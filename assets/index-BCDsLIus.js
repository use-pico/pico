(async()=>{function X$(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function eB(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Lw={exports:{}},fp={},Mw={exports:{}},Cn={};var sC;function tB(){if(sC)return Cn;sC=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;function b(te){return te===null||typeof te!="object"?null:(te=h&&te[h]||te["@@iterator"],typeof te=="function"?te:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,E={};function I(te,ue,de){this.props=te,this.context=ue,this.refs=E,this.updater=de||x}I.prototype.isReactComponent={},I.prototype.setState=function(te,ue){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,ue,"setState")},I.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function T(){}T.prototype=I.prototype;function C(te,ue,de){this.props=te,this.context=ue,this.refs=E,this.updater=de||x}var j=C.prototype=new T;j.constructor=C,_(j,I.prototype),j.isPureReactComponent=!0;var q=Array.isArray,L=Object.prototype.hasOwnProperty,M={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function P(te,ue,de){var ye,we={},Ne=null,ze=null;if(ue!=null)for(ye in ue.ref!==void 0&&(ze=ue.ref),ue.key!==void 0&&(Ne=""+ue.key),ue)L.call(ue,ye)&&!W.hasOwnProperty(ye)&&(we[ye]=ue[ye]);var je=arguments.length-2;if(je===1)we.children=de;else if(1<je){for(var De=Array(je),Je=0;Je<je;Je++)De[Je]=arguments[Je+2];we.children=De}if(te&&te.defaultProps)for(ye in je=te.defaultProps,je)we[ye]===void 0&&(we[ye]=je[ye]);return{$$typeof:t,type:te,key:Ne,ref:ze,props:we,_owner:M.current}}function O(te,ue){return{$$typeof:t,type:te.type,key:ue,ref:te.ref,props:te.props,_owner:te._owner}}function z(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function F(te){var ue={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(de){return ue[de]})}var V=/\/+/g;function U(te,ue){return typeof te=="object"&&te!==null&&te.key!=null?F(""+te.key):ue.toString(36)}function B(te,ue,de,ye,we){var Ne=typeof te;(Ne==="undefined"||Ne==="boolean")&&(te=null);var ze=!1;if(te===null)ze=!0;else switch(Ne){case"string":case"number":ze=!0;break;case"object":switch(te.$$typeof){case t:case e:ze=!0}}if(ze)return ze=te,we=we(ze),te=ye===""?"."+U(ze,0):ye,q(we)?(de="",te!=null&&(de=te.replace(V,"$&/")+"/"),B(we,ue,de,"",function(Je){return Je})):we!=null&&(z(we)&&(we=O(we,de+(!we.key||ze&&ze.key===we.key?"":(""+we.key).replace(V,"$&/")+"/")+te)),ue.push(we)),1;if(ze=0,ye=ye===""?".":ye+":",q(te))for(var je=0;je<te.length;je++){Ne=te[je];var De=ye+U(Ne,je);ze+=B(Ne,ue,de,De,we)}else if(De=b(te),typeof De=="function")for(te=De.call(te),je=0;!(Ne=te.next()).done;)Ne=Ne.value,De=ye+U(Ne,je++),ze+=B(Ne,ue,de,De,we);else if(Ne==="object")throw ue=String(te),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.");return ze}function G(te,ue,de){if(te==null)return te;var ye=[],we=0;return B(te,ye,"","",function(Ne){return ue.call(de,Ne,we++)}),ye}function Z(te){if(te._status===-1){var ue=te._result;ue=ue(),ue.then(function(de){(te._status===0||te._status===-1)&&(te._status=1,te._result=de)},function(de){(te._status===0||te._status===-1)&&(te._status=2,te._result=de)}),te._status===-1&&(te._status=0,te._result=ue)}if(te._status===1)return te._result.default;throw te._result}var le={current:null},ie={transition:null},ne={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:ie,ReactCurrentOwner:M};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Cn.Children={map:G,forEach:function(te,ue,de){G(te,function(){ue.apply(this,arguments)},de)},count:function(te){var ue=0;return G(te,function(){ue++}),ue},toArray:function(te){return G(te,function(ue){return ue})||[]},only:function(te){if(!z(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},Cn.Component=I,Cn.Fragment=n,Cn.Profiler=i,Cn.PureComponent=C,Cn.StrictMode=r,Cn.Suspense=u,Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,Cn.act=oe,Cn.cloneElement=function(te,ue,de){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var ye=_({},te.props),we=te.key,Ne=te.ref,ze=te._owner;if(ue!=null){if(ue.ref!==void 0&&(Ne=ue.ref,ze=M.current),ue.key!==void 0&&(we=""+ue.key),te.type&&te.type.defaultProps)var je=te.type.defaultProps;for(De in ue)L.call(ue,De)&&!W.hasOwnProperty(De)&&(ye[De]=ue[De]===void 0&&je!==void 0?je[De]:ue[De])}var De=arguments.length-2;if(De===1)ye.children=de;else if(1<De){je=Array(De);for(var Je=0;Je<De;Je++)je[Je]=arguments[Je+2];ye.children=je}return{$$typeof:t,type:te.type,key:we,ref:Ne,props:ye,_owner:ze}},Cn.createContext=function(te){return te={$$typeof:o,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:s,_context:te},te.Consumer=te},Cn.createElement=P,Cn.createFactory=function(te){var ue=P.bind(null,te);return ue.type=te,ue},Cn.createRef=function(){return{current:null}},Cn.forwardRef=function(te){return{$$typeof:l,render:te}},Cn.isValidElement=z,Cn.lazy=function(te){return{$$typeof:p,_payload:{_status:-1,_result:te},_init:Z}},Cn.memo=function(te,ue){return{$$typeof:f,type:te,compare:ue===void 0?null:ue}},Cn.startTransition=function(te){var ue=ie.transition;ie.transition={};try{te()}finally{ie.transition=ue}},Cn.unstable_act=oe,Cn.useCallback=function(te,ue){return le.current.useCallback(te,ue)},Cn.useContext=function(te){return le.current.useContext(te)},Cn.useDebugValue=function(){},Cn.useDeferredValue=function(te){return le.current.useDeferredValue(te)},Cn.useEffect=function(te,ue){return le.current.useEffect(te,ue)},Cn.useId=function(){return le.current.useId()},Cn.useImperativeHandle=function(te,ue,de){return le.current.useImperativeHandle(te,ue,de)},Cn.useInsertionEffect=function(te,ue){return le.current.useInsertionEffect(te,ue)},Cn.useLayoutEffect=function(te,ue){return le.current.useLayoutEffect(te,ue)},Cn.useMemo=function(te,ue){return le.current.useMemo(te,ue)},Cn.useReducer=function(te,ue,de){return le.current.useReducer(te,ue,de)},Cn.useRef=function(te){return le.current.useRef(te)},Cn.useState=function(te){return le.current.useState(te)},Cn.useSyncExternalStore=function(te,ue,de){return le.current.useSyncExternalStore(te,ue,de)},Cn.useTransition=function(){return le.current.useTransition()},Cn.version="18.3.1",Cn}var oC;function Zh(){return oC||(oC=1,Mw.exports=tB()),Mw.exports}var aC;function nB(){if(aC)return fp;aC=1;var t=Zh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,f){var p,h={},b=null,x=null;f!==void 0&&(b=""+f),u.key!==void 0&&(b=""+u.key),u.ref!==void 0&&(x=u.ref);for(p in u)r.call(u,p)&&!s.hasOwnProperty(p)&&(h[p]=u[p]);if(l&&l.defaultProps)for(p in u=l.defaultProps,u)h[p]===void 0&&(h[p]=u[p]);return{$$typeof:e,type:l,key:b,ref:x,props:h,_owner:i.current}}return fp.Fragment=n,fp.jsx=o,fp.jsxs=o,fp}var lC;function rB(){return lC||(lC=1,Lw.exports=nB()),Lw.exports}var d=rB(),nf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Yc=typeof window>"u"||"Deno"in globalThis;function to(){}function iB(t,e){return typeof t=="function"?t(e):t}function DS(t){return typeof t=="number"&&t>=0&&t!==1/0}function k3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function vd(t,e){return typeof t=="function"?t(e):t}function No(t,e){return typeof t=="function"?t(e):t}function cC(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==lN(o,e.options))return!1}else if(!ch(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function uC(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Xc(e.options.mutationKey)!==Xc(s))return!1}else if(!ch(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function lN(t,e){return(e?.queryKeyHashFn||Xc)(t)}function Xc(t){return JSON.stringify(t,(e,n)=>LS(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function ch(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!ch(t[n],e[n])):!1}function cN(t,e){if(t===e)return t;const n=dC(t)&&dC(e);if(n||LS(t)&&LS(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,l=n?[]:{};let u=0;for(let f=0;f<o;f++){const p=n?f:s[f];(!n&&r.includes(p)||n)&&t[p]===void 0&&e[p]===void 0?(l[p]=void 0,u++):(l[p]=cN(t[p],e[p]),l[p]===t[p]&&t[p]!==void 0&&u++)}return i===o&&u===i?t:l}return e}function tb(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function dC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function LS(t){if(!fC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!fC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function fC(t){return Object.prototype.toString.call(t)==="[object Object]"}function sB(t){return new Promise(e=>{setTimeout(e,t)})}function MS(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?cN(t,e):e}function oB(t){return t}function aB(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function lB(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var uN=Symbol();function C3(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===uN?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var cB=class extends nf{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Yc&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},dN=new cB,uB=class extends nf{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Yc&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},nb=new uB;function $S(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function dB(t){return Math.min(1e3*2**t,3e4)}function T3(t){return(t??"online")==="online"?nb.isOnline():!0}var R3=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function $w(t){return t instanceof R3}function j3(t){let e=!1,n=0,r=!1,i;const s=$S(),o=E=>{r||(b(new R3(E)),t.abort?.())},l=()=>{e=!0},u=()=>{e=!1},f=()=>dN.isFocused()&&(t.networkMode==="always"||nb.isOnline())&&t.canRun(),p=()=>T3(t.networkMode)&&t.canRun(),h=E=>{r||(r=!0,t.onSuccess?.(E),i?.(),s.resolve(E))},b=E=>{r||(r=!0,t.onError?.(E),i?.(),s.reject(E))},x=()=>new Promise(E=>{i=I=>{(r||f())&&E(I)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),_=()=>{if(r)return;let E;const I=n===0?t.initialPromise:void 0;try{E=I??t.fn()}catch(T){E=Promise.reject(T)}Promise.resolve(E).then(h).catch(T=>{if(r)return;const C=t.retry??(Yc?0:3),j=t.retryDelay??dB,q=typeof j=="function"?j(n,T):j,L=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,T);if(e||!L){b(T);return}n++,t.onFail?.(n,T),sB(q).then(()=>f()?void 0:x()).then(()=>{e?b(T):_()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:l,continueRetry:u,canStart:p,start:()=>(p()?_():x().then(_),s)}}function fB(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=l=>setTimeout(l,0);const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||o()}return u},batchCalls:l=>(...u)=>{s(()=>{l(...u)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Zr=fB(),O3=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),DS(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Yc?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},pB=class extends O3{#e;#t;#n;#r;#i;#s;constructor(t){super(),this.#s=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=hB(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=MS(this.state.data,t,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#o({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(to).catch(to):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>No(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===uN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!k3(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#s=!0,n.signal)})},i=()=>{const l=C3(this.options,e),u={queryKey:this.queryKey,meta:this.meta};return r(u),this.#s=!1,this.options.persister?this.options.persister(l,u,this):l(u)},s={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(s),this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#o({type:"fetch",meta:s.fetchOptions?.meta});const o=l=>{$w(l)&&l.silent||this.#o({type:"error",error:l}),$w(l)||(this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this)),this.scheduleGc()};return this.#r=j3({initialPromise:e?.initialPromise,fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:l=>{if(l===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(u){o(u);return}this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),this.scheduleGc()},onError:o,onFail:(l,u)=>{this.#o({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#r.start()}#o(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...q3(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return $w(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Zr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function q3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:T3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function hB(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var mB=class extends nf{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??lN(r,e);let s=this.get(i);return s||(s=new pB({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Zr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>cC(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>cC(t,n)):e}notify(t){Zr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Zr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Zr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},gB=class extends O3{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||A3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=j3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,i)=>{this.#r({type:"failed",failureCount:r,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:n})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#r({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#r({type:"error",error:r})}}finally{this.#t.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Zr.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function A3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yB=class extends nf{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new gB({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=jg(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=jg(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=jg(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=jg(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Zr.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>uC(e,n))}findAll(t={}){return this.getAll().filter(e=>uC(t,e))}notify(t){Zr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Zr.batch(()=>Promise.all(t.map(e=>e.continue().catch(to))))}};function jg(t){return t.options.scope?.id}function pC(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const f=async()=>{let p=!1;const h=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},b=C3(e.options,e.fetchOptions),x=async(_,E,I)=>{if(p)return Promise.reject();if(E==null&&_.pages.length)return Promise.resolve(_);const T={queryKey:e.queryKey,pageParam:E,direction:I?"backward":"forward",meta:e.options.meta};h(T);const C=await b(T),{maxPages:j}=e.options,q=I?lB:aB;return{pages:q(_.pages,C,j),pageParams:q(_.pageParams,E,j)}};if(i&&s.length){const _=i==="backward",E=_?bB:hC,I={pages:s,pageParams:o},T=E(r,I);l=await x(I,T,_)}else{const _=t??s.length;do{const E=u===0?o[0]??r.initialPageParam:hC(r,l);if(u>0&&E==null)break;l=await x(l,E),u++}while(u<_)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(f,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=f}}}function hC(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function bB(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var vB=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(t={}){this.#e=t.queryCache||new mB,this.#t=t.mutationCache||new yB,this.#n=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=dN.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=nb.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(vd(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,o=iB(e,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Zr.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Zr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,r={type:"active",...t};return Zr.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Zr.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(to).catch(to)}invalidateQueries(t,e={}){return Zr.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none")return Promise.resolve();const n={...t,type:t?.refetchType??t?.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Zr.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(to)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(to)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(vd(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(to).catch(to)}fetchInfiniteQuery(t){return t.behavior=pC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(to).catch(to)}ensureInfiniteQueryData(t){return t.behavior=pC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return nb.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Xc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{ch(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(Xc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()];let n={};return e.forEach(r=>{ch(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=lN(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===uN&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},xB=class extends nf{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#o=$S(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#s;#o;#a;#c;#l;#u;#d;#p;#f;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),mC(this.#t,this.options)?this.#h():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return BS(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return BS(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#w(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof No(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!tb(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&gC(this.#t,r,this.options,n)&&this.#h(),this.updateResult(e),i&&(this.#t!==r||No(this.options.enabled,this.#t)!==No(n.enabled,this.#t)||vd(this.options.staleTime,this.#t)!==vd(n.staleTime,this.#t))&&this.#g();const s=this.#y();i&&(this.#t!==r||No(this.options.enabled,this.#t)!==No(n.enabled,this.#t)||s!==this.#f)&&this.#b(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return _B(this,n)&&(this.#r=n,this.#s=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#_();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(to)),e}#g(){this.#x();const t=vd(this.options.staleTime,this.#t);if(Yc||this.#r.isStale||!DS(t))return;const n=k3(this.#r.dataUpdatedAt,t)+1;this.#d=setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#w(),this.#f=t,!(Yc||No(this.options.enabled,this.#t)===!1||!DS(this.#f)||this.#f===0)&&(this.#p=setInterval(()=>{(this.options.refetchIntervalInBackground||dN.isFocused())&&this.#h()},this.#f))}#v(){this.#g(),this.#b(this.#y())}#x(){this.#d&&(clearTimeout(this.#d),this.#d=void 0)}#w(){this.#p&&(clearInterval(this.#p),this.#p=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#r,s=this.#i,o=this.#s,u=t!==n?t.state:this.#n,{state:f}=t;let p={...f},h=!1,b;if(e._optimisticResults){const W=this.hasListeners(),P=!W&&mC(t,e),O=W&&gC(t,n,e,r);(P||O)&&(p={...p,...q3(f.data,t.options)}),e._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:_,status:E}=p;if(e.select&&p.data!==void 0)if(i&&p.data===s?.data&&e.select===this.#c)b=this.#l;else try{this.#c=e.select,b=e.select(p.data),b=MS(i?.data,b,e),this.#l=b,this.#a=null}catch(W){this.#a=W}else b=p.data;if(e.placeholderData!==void 0&&b===void 0&&E==="pending"){let W;if(i?.isPlaceholderData&&e.placeholderData===o?.placeholderData)W=i.data;else if(W=typeof e.placeholderData=="function"?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,e.select&&W!==void 0)try{W=e.select(W),this.#a=null}catch(P){this.#a=P}W!==void 0&&(E="success",b=MS(i?.data,W,e),h=!0)}this.#a&&(x=this.#a,b=this.#l,_=Date.now(),E="error");const I=p.fetchStatus==="fetching",T=E==="pending",C=E==="error",j=T&&I,q=b!==void 0,M={status:E,fetchStatus:p.fetchStatus,isPending:T,isSuccess:E==="success",isError:C,isInitialLoading:j,isLoading:j,data:b,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:_,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:I,isRefetching:I&&!T,isLoadingError:C&&!q,isPaused:p.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:C&&q,isStale:fN(t,e),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const W=z=>{M.status==="error"?z.reject(M.error):M.data!==void 0&&z.resolve(M.data)},P=()=>{const z=this.#o=M.promise=$S();W(z)},O=this.#o;switch(O.status){case"pending":t.queryHash===n.queryHash&&W(O);break;case"fulfilled":(M.status==="error"||M.data!==O.value)&&P();break;case"rejected":(M.status!=="error"||M.error!==O.reason)&&P();break}}return M}updateResult(t){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#s=this.options,this.#i.data!==void 0&&(this.#u=this.#t),tb(n,e))return;this.#r=n;const r={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#m.size)return!0;const l=new Set(o??this.#m);return this.options.throwOnError&&l.add("error"),Object.keys(this.#r).some(u=>{const f=u;return this.#r[f]!==e[f]&&l.has(f)})};t?.listeners!==!1&&i()&&(r.listeners=!0),this.#S({...r,...t})}#_(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(t){Zr.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function wB(t,e){return No(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function mC(t,e){return wB(t,e)||t.state.data!==void 0&&BS(t,e,e.refetchOnMount)}function BS(t,e,n){if(No(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&fN(t,e)}return!1}function gC(t,e,n,r){return(t!==e||No(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&fN(t,n)}function fN(t,e){return No(e.enabled,t)!==!1&&t.isStaleByTime(vd(e.staleTime,t))}function _B(t,e){return!tb(t.getCurrentResult(),e)}var SB=class extends nf{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),tb(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Xc(n.mutationKey)!==Xc(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#s()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??A3();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){Zr.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},H=Zh();const $n=uo(H),EB=X$({__proto__:null,default:$n},[H]);var P3=H.createContext(void 0),lv=t=>{const e=H.useContext(P3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},NB=({client:t,children:e})=>(H.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),d.jsx(P3.Provider,{value:t,children:e})),F3=H.createContext(!1),IB=()=>H.useContext(F3);F3.Provider;function kB(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var CB=H.createContext(kB()),TB=()=>H.useContext(CB);function D3(t,e){return typeof t=="function"?t(...e):!!t}function zS(){}var RB=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},jB=t=>{H.useEffect(()=>{t.clearReset()},[t])},OB=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&D3(n,[t.error,r]),qB=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},AB=(t,e)=>t.isLoading&&t.isFetching&&!e,PB=(t,e)=>t?.suspense&&e.isPending,yC=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function FB(t,e,n){const r=lv(),i=IB(),s=TB(),o=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=i?"isRestoring":"optimistic",qB(o),RB(o,s),jB(s);const l=!r.getQueryCache().get(o.queryHash),[u]=H.useState(()=>new e(r,o)),f=u.getOptimisticResult(o),p=!i&&t.subscribed!==!1;if(H.useSyncExternalStore(H.useCallback(h=>{const b=p?u.subscribe(Zr.batchCalls(h)):zS;return u.updateResult(),b},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),H.useEffect(()=>{u.setOptions(o,{listeners:!1})},[o,u]),PB(o,f))throw yC(o,u,s);if(OB({result:f,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw f.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,f),o.experimental_prefetchInRender&&!Yc&&AB(f,i)&&(l?yC(o,u,s):r.getQueryCache().get(o.queryHash)?.promise)?.catch(zS).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?f:u.trackResult(f)}function rb(t,e){return FB(t,xB)}function bC(t,e){return t.findAll(e.filters).map(n=>e.select?e.select(n):n.state)}function DB(t={},e){const n=lv().getMutationCache(),r=H.useRef(t),i=H.useRef(null);return i.current||(i.current=bC(n,t)),H.useEffect(()=>{r.current=t}),H.useSyncExternalStore(H.useCallback(s=>n.subscribe(()=>{const o=cN(i.current,bC(n,r.current));i.current!==o&&(i.current=o,Zr.schedule(s))}),[n]),()=>i.current,()=>i.current)}function Yt(t,e){const n=lv(),[r]=H.useState(()=>new SB(n,t));H.useEffect(()=>{r.setOptions(t)},[r,t]);const i=H.useSyncExternalStore(H.useCallback(o=>r.subscribe(Zr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=H.useCallback((o,l)=>{r.mutate(o,l).catch(zS)},[r]);if(i.error&&D3(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const Kc="__TSR_index",vC="popstate",xC="beforeunload";function L3(t){let e=t.getLocation();const n=new Set,r=o=>{e=t.getLocation(),n.forEach(l=>l({location:e,action:o}))},i=o=>{t.notifyOnIndexChange??!0?r(o):e=t.getLocation()},s=async({task:o,navigateOpts:l,...u})=>{var f,p;if(l?.ignoreBlocker??!1){o();return}const b=((f=t.getBlockers)==null?void 0:f.call(t))??[],x=u.type==="PUSH"||u.type==="REPLACE";if(typeof document<"u"&&b.length&&x)for(const _ of b){const E=uh(u.path,u.state);if(await _.blockerFn({currentLocation:e,nextLocation:E,action:u.type})){(p=t.onBlocked)==null||p.call(t);return}}o()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,l,u)=>{const f=e.state[Kc];l=WS(f+1,l),s({task:()=>{t.pushState(o,l),r({type:"PUSH"})},navigateOpts:u,type:"PUSH",path:o,state:l})},replace:(o,l,u)=>{const f=e.state[Kc];l=WS(f,l),s({task:()=>{t.replaceState(o,l),r({type:"REPLACE"})},navigateOpts:u,type:"REPLACE",path:o,state:l})},go:(o,l)=>{s({task:()=>{t.go(o),i({type:"GO",index:o})},navigateOpts:l,type:"GO"})},back:o=>{s({task:()=>{t.back(o?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{s({task:()=>{t.forward(o?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>e.state[Kc]!==0,createHref:o=>t.createHref(o),block:o=>{var l;if(!t.setBlockers)return()=>{};const u=((l=t.getBlockers)==null?void 0:l.call(t))??[];return t.setBlockers([...u,o]),()=>{var f,p;const h=((f=t.getBlockers)==null?void 0:f.call(t))??[];(p=t.setBlockers)==null||p.call(t,h.filter(b=>b!==o))}},flush:()=>{var o;return(o=t.flush)==null?void 0:o.call(t)},destroy:()=>{var o;return(o=t.destroy)==null?void 0:o.call(t)},notify:r}}function WS(t,e){return e||(e={}),{...e,key:$B(),[Kc]:t}}function LB(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState;let i=[];const s=()=>i,o=P=>i=P,l=P=>P,u=()=>uh(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);let f=u(),p,h=!1,b=!1,x=!1,_=!1;const E=()=>f;let I,T;const C=()=>{I&&(W._ignoreSubscribers=!0,(I.isPush?e.history.pushState:e.history.replaceState)(I.state,"",I.href),W._ignoreSubscribers=!1,I=void 0,T=void 0,p=void 0)},j=(P,O,z)=>{const F=l(O);T||(p=f),f=uh(O,z),I={href:F,state:z,isPush:I?.isPush||P==="push"},T||(T=Promise.resolve().then(()=>C()))},q=P=>{f=u(),W.notify({type:P})},L=async()=>{if(b){b=!1;return}const P=u(),O=P.state[Kc]-f.state[Kc],z=O===1,F=O===-1,V=!z&&!F||h;h=!1;const U=V?"GO":F?"BACK":"FORWARD",B=V?{type:"GO",index:O}:{type:F?"BACK":"FORWARD"};if(x)x=!1;else{const G=s();if(typeof document<"u"&&G.length){for(const Z of G)if(await Z.blockerFn({currentLocation:f,nextLocation:P,action:U})){b=!0,e.history.go(1),W.notify(B);return}}}f=u(),W.notify(B)},M=P=>{if(_){_=!1;return}let O=!1;const z=s();if(typeof document<"u"&&z.length)for(const F of z){const V=F.enableBeforeUnload??!0;if(V===!0){O=!0;break}if(typeof V=="function"&&V()===!0){O=!0;break}}if(O)return P.preventDefault(),P.returnValue=""},W=L3({getLocation:E,getLength:()=>e.history.length,pushState:(P,O)=>j("push",P,O),replaceState:(P,O)=>j("replace",P,O),back:P=>(P&&(x=!0),_=!0,e.history.back()),forward:P=>{P&&(x=!0),_=!0,e.history.forward()},go:P=>{h=!0,e.history.go(P)},createHref:P=>l(P),flush:C,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(xC,M,{capture:!0}),e.removeEventListener(vC,L)},onBlocked:()=>{p&&f!==p&&(f=p)},getBlockers:s,setBlockers:o,notifyOnIndexChange:!1});return e.addEventListener(xC,M,{capture:!0}),e.addEventListener(vC,L),e.history.pushState=function(...P){const O=n.apply(e.history,P);return W._ignoreSubscribers||q("PUSH"),O},e.history.replaceState=function(...P){const O=r.apply(e.history,P);return W._ignoreSubscribers||q("REPLACE"),O},W}function MB(t={initialEntries:["/"]}){const e=t.initialEntries;let n=t.initialIndex?Math.min(Math.max(t.initialIndex,0),e.length-1):e.length-1;const r=e.map((s,o)=>WS(o,void 0));return L3({getLocation:()=>uh(e[n],r[n]),getLength:()=>e.length,pushState:(s,o)=>{n<e.length-1&&(e.splice(n+1),r.splice(n+1)),r.push(o),e.push(s),n=Math.max(e.length-1,0)},replaceState:(s,o)=>{r[n]=o,e[n]=s},back:()=>{n=Math.max(n-1,0)},forward:()=>{n=Math.min(n+1,e.length-1)},go:s=>{n=Math.min(Math.max(n+s,0),e.length-1)},createHref:s=>s})}function uh(t,e){const n=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[Kc]:0}}}function $B(){return(Math.random()+1).toString(36).substring(7)}var BB="Invariant failed";function Is(t,e){if(!t)throw new Error(BB)}const Bw=H.createContext(null);function M3(){return typeof document>"u"?Bw:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Bw,Bw)}function Lo(t){const e=H.useContext(M3());return t?.warn,e}var zw={exports:{}},Ww={},Vw={exports:{}},Uw={};var wC;function zB(){if(wC)return Uw;wC=1;var t=Zh();function e(h,b){return h===b&&(h!==0||1/h===1/b)||h!==h&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(h,b){var x=b(),_=r({inst:{value:x,getSnapshot:b}}),E=_[0].inst,I=_[1];return s(function(){E.value=x,E.getSnapshot=b,u(E)&&I({inst:E})},[h,x,b]),i(function(){return u(E)&&I({inst:E}),h(function(){u(E)&&I({inst:E})})},[h]),o(x),x}function u(h){var b=h.getSnapshot;h=h.value;try{var x=b();return!n(h,x)}catch{return!0}}function f(h,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return Uw.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Uw}var _C;function WB(){return _C||(_C=1,Vw.exports=zB()),Vw.exports}var SC;function VB(){if(SC)return Ww;SC=1;var t=Zh(),e=WB();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,u=t.useDebugValue;return Ww.useSyncExternalStoreWithSelector=function(f,p,h,b,x){var _=s(null);if(_.current===null){var E={hasValue:!1,value:null};_.current=E}else E=_.current;_=l(function(){function T(M){if(!C){if(C=!0,j=M,M=b(M),x!==void 0&&E.hasValue){var W=E.value;if(x(W,M))return q=W}return q=M}if(W=q,r(j,M))return W;var P=b(M);return x!==void 0&&x(W,P)?(j=M,W):(j=M,q=P)}var C=!1,j,q,L=h===void 0?null:h;return[function(){return T(p())},L===null?void 0:function(){return T(L())}]},[p,h,b,x]);var I=i(f,_[0],_[1]);return o(function(){E.hasValue=!0,E.value=I},[I]),u(I),I},Ww}var EC;function UB(){return EC||(EC=1,zw.exports=VB()),zw.exports}var $3=UB();const HB=uo($3),xd=new WeakMap,py=new WeakMap,ib={current:[]};let Hw=!1,Kp=0;const Cp=new Set,Og=new Map;function B3(t){const e=Array.from(t).sort((n,r)=>n instanceof wd&&n.options.deps.includes(r)?1:r instanceof wd&&r.options.deps.includes(n)?-1:0);for(const n of e){if(ib.current.includes(n))continue;ib.current.push(n),n.recompute();const r=py.get(n);if(r)for(const i of r){const s=xd.get(i);s&&B3(s)}}}function KB(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function QB(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function z3(t){if(Kp>0&&!Og.has(t)&&Og.set(t,t.prevState),Cp.add(t),!(Kp>0)&&!Hw)try{for(Hw=!0;Cp.size>0;){const e=Array.from(Cp);Cp.clear();for(const n of e){const r=Og.get(n)??n.prevState;n.prevState=r,KB(n)}for(const n of e){const r=xd.get(n);r&&(ib.current.push(n),B3(r))}for(const n of e){const r=xd.get(n);if(r)for(const i of r)QB(i)}}}finally{Hw=!1,ib.current=[],Og.clear()}}function Kw(t){Kp++;try{t()}finally{if(Kp--,Kp===0){const e=Array.from(Cp)[0];e&&z3(e)}}}class VS{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var i,s;this.listeners.add(r);const o=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),o?.()}},this.setState=r=>{var i,s,o;this.prevState=this.state,this.state=(i=this.options)!=null&&i.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(s=this.options)==null?void 0:s.onUpdate)==null||o.call(s),z3(this)},this.prevState=e,this.state=e,this.options=n}}class wd{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const i of this.options.deps)n.push(i.prevState),r.push(i.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:i,currDepVals:s,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:s,prevVal:o}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const s of this.options.deps)s instanceof wd&&s.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==r[s]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,i;this.listeners.add(n);const s=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),s?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const n of e)if(n instanceof wd)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof VS){let r=xd.get(n);r||(r=new Set,xd.set(n,r)),r.add(this);let i=py.get(this);i||(i=new Set,py.set(this,i)),i.add(n)}}unregisterFromGraph(e=this.options.deps){for(const n of e)if(n instanceof wd)this.unregisterFromGraph(n.options.deps);else if(n instanceof VS){const r=xd.get(n);r&&r.delete(this);const i=py.get(this);i&&i.delete(n)}}}function GB(t,e=n=>n){return $3.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,JB)}function JB(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var Qw,NC;function ZB(){if(NC)return Qw;NC=1;const t={},e=t.hasOwnProperty,n=(P,O)=>{for(const z in P)e.call(P,z)&&O(z,P[z])},r=(P,O)=>(O&&n(O,(z,F)=>{P[z]=F}),P),i=(P,O)=>{const z=P.length;let F=-1;for(;++F<z;)O(P[F])},s=P=>"\\u"+("0000"+P).slice(-4),o=(P,O)=>{let z=P.toString(16);return O?z:z.toUpperCase()},l=t.toString,u=Array.isArray,f=P=>typeof Buffer=="function"&&Buffer.isBuffer(P),p=P=>l.call(P)=="[object Object]",h=P=>typeof P=="string"||l.call(P)=="[object String]",b=P=>typeof P=="number"||l.call(P)=="[object Number]",x=P=>typeof P=="bigint",_=P=>typeof P=="function",E=P=>l.call(P)=="[object Map]",I=P=>l.call(P)=="[object Set]",T={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},C=/[\\\b\f\n\r\t]/,j=/[0-9]/,q=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,L=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,M=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,W=(P,O)=>{const z=()=>{le=Z,++O.indentLevel,Z=O.indent.repeat(O.indentLevel)},F={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},V=O&&O.json;V&&(F.quotes="double",F.wrap=!0),O=r(F,O),O.quotes!="single"&&O.quotes!="double"&&O.quotes!="backtick"&&(O.quotes="single");const U=O.quotes=="double"?'"':O.quotes=="backtick"?"`":"'",B=O.compact,G=O.lowercaseHex;let Z=O.indent.repeat(O.indentLevel),le="";const ie=O.__inline1__,ne=O.__inline2__,oe=B?"":`
`;let te,ue=!0;const de=O.numbers=="binary",ye=O.numbers=="octal",we=O.numbers=="decimal",Ne=O.numbers=="hexadecimal";if(V&&P&&_(P.toJSON)&&(P=P.toJSON()),!h(P)){if(E(P))return P.size==0?"new Map()":(B||(O.__inline1__=!0,O.__inline2__=!1),"new Map("+W(Array.from(P),O)+")");if(I(P))return P.size==0?"new Set()":"new Set("+W(Array.from(P),O)+")";if(f(P))return P.length==0?"Buffer.from([])":"Buffer.from("+W(Array.from(P),O)+")";if(u(P))return te=[],O.wrap=!0,ie&&(O.__inline1__=!1,O.__inline2__=!0),ne||z(),i(P,je=>{ue=!1,ne&&(O.__inline2__=!1),te.push((B||ne?"":Z)+W(je,O))}),ue?"[]":ne?"["+te.join(", ")+"]":"["+oe+te.join(","+oe)+oe+(B?"":le)+"]";if(b(P)||x(P)){if(V)return JSON.stringify(Number(P));let je;if(we)je=String(P);else if(Ne){let De=P.toString(16);G||(De=De.toUpperCase()),je="0x"+De}else de?je="0b"+P.toString(2):ye&&(je="0o"+P.toString(8));return x(P)?je+"n":je}else return x(P)?V?JSON.stringify(Number(P)):P+"n":p(P)?(te=[],O.wrap=!0,z(),n(P,(je,De)=>{ue=!1,te.push((B?"":Z)+W(je,O)+":"+(B?"":" ")+W(De,O))}),ue?"{}":"{"+oe+te.join(","+oe)+oe+(B?"":le)+"}"):V?JSON.stringify(P)||"null":String(P)}const ze=O.escapeEverything?L:M;return te=P.replace(ze,(je,De,Je,Xe,Ve,ct)=>{if(De){if(O.minimal)return De;const Tt=De.charCodeAt(0),Ut=De.charCodeAt(1);if(O.es6){const sn=(Tt-55296)*1024+Ut-56320+65536;return"\\u{"+o(sn,G)+"}"}return s(o(Tt,G))+s(o(Ut,G))}if(Je)return s(o(Je.charCodeAt(0),G));if(je=="\0"&&!V&&!j.test(ct.charAt(Ve+1)))return"\\0";if(Xe)return Xe==U||O.escapeEverything?"\\"+Xe:Xe;if(C.test(je))return T[je];if(O.minimal&&!q.test(je))return je;const _t=o(je.charCodeAt(0),G);return V||_t.length>2?s(_t):"\\x"+("00"+_t).slice(-2)}),U=="`"&&(te=te.replace(/\$\{/g,"\\${")),O.isScriptContext&&(te=te.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,V?"\\u003C!--":"\\x3C!--")),O.wrap&&(te=U+te+U),te};return W.version="3.0.2",Qw=W,Qw}ZB();const Es="__root__";function YB(t,e){let n,r,i,s="";for(n in t)if((i=t[n])!==void 0)if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i);return""+s}function IC(t){if(!t)return"";const e=decodeURIComponent(t);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function XB(t,e){let n,r;const i={},s=t.split("&");for(;n=s.shift();){const o=n.indexOf("=");if(o!==-1){r=n.slice(0,o),r=decodeURIComponent(r);const l=n.slice(o+1);i[r]!==void 0?i[r]=[].concat(i[r],IC(l)):i[r]=IC(l)}else r=n,r=decodeURIComponent(r),i[r]=""}return i}const e4=n4(JSON.parse),t4=r4(JSON.stringify,JSON.parse);function n4(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const n=XB(e);for(const r in n){const i=n[r];if(typeof i=="string")try{n[r]=t(i)}catch{}}return n}}function r4(t,e){function n(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(s=>{const o=r[s];typeof o>"u"||o===void 0?delete r[s]:r[s]=n(o)});const i=YB(r).toString();return i?`?${i}`:""}}function Qp(t){return t[t.length-1]}function i4(t){return typeof t=="function"}function $c(t,e){return i4(t)?t(e):t}function hy(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Xs(t,e){if(t===e)return t;const n=e,r=CC(t)&&CC(n);if(r||Dl(t)&&Dl(n)){const i=r?t:Object.keys(t),s=i.length,o=r?n:Object.keys(n),l=o.length,u=r?[]:{};let f=0;for(let p=0;p<l;p++){const h=r?p:o[p];(!r&&i.includes(h)||r)&&t[h]===void 0&&n[h]===void 0?(u[h]=void 0,f++):(u[h]=Xs(t[h],n[h]),u[h]===t[h]&&t[h]!==void 0&&f++)}return s===l&&f===s?t:u}return n}function Dl(t){if(!kC(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!kC(n)||!n.hasOwnProperty("isPrototypeOf"))}function kC(t){return Object.prototype.toString.call(t)==="[object Object]"}function CC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function TC(t,e){let n=Object.keys(t);return e&&(n=n.filter(r=>t[r]!==void 0)),n}function _d(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Dl(t)&&Dl(e)){const r=n?.ignoreUndefined??!0,i=TC(t,r),s=TC(e,r);return!n?.partial&&i.length!==s.length?!1:s.every(o=>_d(t[o],e[o],n))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((r,i)=>!_d(r,e[i],n)):!1}const Tp=typeof window<"u"?H.useLayoutEffect:H.useEffect;function od(t){let e,n;const r=new Promise((i,s)=>{e=i,n=s});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,e(i),t?.(i)},r.reject=i=>{r.status="rejected",n(i)},r}function Gw(t){const e=H.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function s4(t,e,n={},r={}){const i=H.useRef(typeof IntersectionObserver=="function"),s=H.useRef(null);return H.useEffect(()=>{if(!(!t.current||!i.current||r.disabled))return s.current=new IntersectionObserver(([o])=>{e(o)},n),s.current.observe(t.current),()=>{var o;(o=s.current)==null||o.disconnect()}},[e,n,r.disabled,t]),s.current}function o4(t){const e=H.useRef(null);return H.useEffect(()=>{t&&(typeof t=="function"?t(e.current):t.current=e.current)}),e}function La(t){return cv(t.filter(e=>e!==void 0).join("/"))}function cv(t){return t.replace(/\/{2,}/g,"/")}function pN(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function Bc(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function a4(t){return Bc(pN(t))}function sb(t,e){return t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function l4(t,e,n){return sb(t,n)===sb(e,n)}function c4({basepath:t,base:e,to:n,trailingSlash:r="never",caseSensitive:i}){var s,o;e=ob(t,e,i),n=ob(t,n,i);let l=Ld(e);const u=Ld(n);l.length>1&&((s=Qp(l))==null?void 0:s.value)==="/"&&l.pop(),u.forEach((p,h)=>{p.value==="/"?h?h===u.length-1&&l.push(p):l=[p]:p.value===".."?l.pop():p.value==="."||l.push(p)}),l.length>1&&(((o=Qp(l))==null?void 0:o.value)==="/"?r==="never"&&l.pop():r==="always"&&l.push({type:"pathname",value:"/"}));const f=La([t,...l.map(p=>p.value)]);return cv(f)}function Ld(t){if(!t)return[];t=cv(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const n=t.split("/").filter(Boolean);return e.push(...n.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function qg({path:t,params:e,leaveWildcards:n,leaveParams:r,decodeCharMap:i}){const s=Ld(t),o={};for(const[l,u]of Object.entries(e)){const f=typeof u=="string";["*","_splat"].includes(l)?o[l]=f?encodeURI(u):u:o[l]=f?u4(u,i):u}return La(s.map(l=>{if(l.type==="wildcard"){const u=o._splat;return n?`${l.value}${u??""}`:u}if(l.type==="param"){if(r){const u=o[l.value];return`${l.value}${u??""}`}return o[l.value.substring(1)]??"undefined"}return l.value}))}function u4(t,e){let n=encodeURIComponent(t);if(e)for(const[r,i]of e)n=n.replaceAll(r,i);return n}function Ag(t,e,n){const r=d4(t,e,n);if(!(n.to&&!r))return r??{}}function ob(t,e,n=!1){const r=n?t:t.toLowerCase(),i=n?e:e.toLowerCase();switch(!0){case r==="/":return e;case i===r:return"";case e.length<t.length:return e;case i[r.length]!=="/":return e;case i.startsWith(r):return e.slice(t.length);default:return e}}function d4(t,e,n){if(t!=="/"&&!e.startsWith(t))return;e=ob(t,e,n.caseSensitive);const r=ob(t,`${n.to??"$"}`,n.caseSensitive),i=Ld(e),s=Ld(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"}),r.startsWith("/")||s.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let u=0;u<Math.max(i.length,s.length);u++){const f=i[u],p=s[u],h=u>=i.length-1,b=u>=s.length-1;if(p){if(p.type==="wildcard"){const x=decodeURI(La(i.slice(u).map(_=>_.value)));return o["*"]=x,o._splat=x,!0}if(p.type==="pathname"){if(p.value==="/"&&!f?.value)return!0;if(f){if(n.caseSensitive){if(p.value!==f.value)return!1}else if(p.value.toLowerCase()!==f.value.toLowerCase())return!1}}if(!f)return!1;if(p.type==="param"){if(f.value==="/")return!1;f.value.charAt(0)!=="$"&&(o[p.value.substring(1)]=decodeURIComponent(f.value))}}if(!h&&b)return o["**"]=La(i.slice(u+1).map(x=>x.value)),!!n.fuzzy&&p?.value!=="/"}return!0})()?o:void 0}function Yh(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},!t.reloadDocument){t.reloadDocument=!1;try{new URL(`${t.href}`),t.reloadDocument=!0}catch{}}if(t.throw)throw t;return t}function jc(t){return!!t?.isRedirect}function Jw(t){return!!t?.isRedirect&&t.href}function hN(t){const e=t.errorComponent??uv;return d.jsx(f4,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?H.createElement(e,{error:n,reset:r}):t.children})}class f4 extends H.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function uv({error:t}){const[e,n]=H.useState(!1);return d.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[d.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),d.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),d.jsx("div",{style:{height:".25rem"}}),e?d.jsx("div",{children:d.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?d.jsx("code",{children:t.message}):null})}):null]})}function Ui(t){const e=Lo({warn:t?.router===void 0}),n=t?.router||e,r=H.useRef();return GB(n.__store,i=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const s=Xs(r.current,t.select(i));return r.current=s,s}return t.select(i)}return i})}function So(t){return!!t?.isNotFound}function p4(t){const e=Ui({select:n=>`not-found-${n.location.pathname}-${n.status}`});return d.jsx(hN,{getResetKey:()=>e,onCatch:(n,r)=>{var i;if(So(n))(i=t.onCatch)==null||i.call(t,n,r);else throw n},errorComponent:({error:n})=>{var r;if(So(n))return(r=t.fallback)==null?void 0:r.call(t,n);throw n},children:t.children})}function h4(){return d.jsx("p",{children:"Not Found"})}const Rp={stringify:t=>JSON.stringify(t,function(n,r){const i=this[n],s=Fg.find(o=>o.stringifyCondition(i));return s?s.stringify(i):r}),parse:t=>JSON.parse(t,function(n,r){const i=this[n];if(Dl(i)){const s=Fg.find(o=>o.parseCondition(i));if(s)return s.parse(i)}return r}),encode:t=>{if(Array.isArray(t))return t.map(n=>Rp.encode(n));if(Dl(t))return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Rp.encode(r)]));const e=Fg.find(n=>n.stringifyCondition(t));return e?e.stringify(t):t},decode:t=>{if(Dl(t)){const e=Fg.find(n=>n.parseCondition(t));if(e)return e.parse(t)}return Array.isArray(t)?t.map(e=>Rp.decode(e)):Dl(t)?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,Rp.decode(n)])):t}},Pg=(t,e,n,r)=>({key:t,stringifyCondition:e,stringify:i=>({[`$${t}`]:n(i)}),parseCondition:i=>Object.hasOwn(i,`$${t}`),parse:i=>r(i[`$${t}`])}),Fg=[Pg("undefined",t=>t===void 0,()=>0,()=>{}),Pg("date",t=>t instanceof Date,t=>t.toISOString(),t=>new Date(t)),Pg("error",t=>t instanceof Error,t=>({...t,message:t.message,stack:t.stack,cause:t.cause}),t=>Object.assign(new Error(t.message),t)),Pg("formData",t=>t instanceof FormData,t=>{const e={};return t.forEach((n,r)=>{const i=e[r];i!==void 0?Array.isArray(i)?i.push(n):e[r]=[i,n]:e[r]=n}),e},t=>{const e=new FormData;return Object.entries(t).forEach(([n,r])=>{Array.isArray(r)?r.forEach(i=>e.append(n,i)):e.append(n,r)}),e})],W3=["component","errorComponent","pendingComponent","notFoundComponent"];function m4(t){var e;for(const n of W3)if((e=t.options[n])!=null&&e.preload)return!0;return!1}function Zw(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new US("Async validation not supported");if(n.issues)throw new US(JSON.stringify(n.issues,void 0,2));return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function g4(t){return new y4(t)}class y4{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=n=>n(),this.update=n=>{var r;n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options;this.options={...this.options,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(s=>[encodeURIComponent(s),s])):void 0,(!this.basepath||n.basepath&&n.basepath!==i.basepath)&&(n.basepath===void 0||n.basepath===""||n.basepath==="/"?this.basepath="/":this.basepath=`/${a4(n.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?MB({initialEntries:[this.basepath||"/"]}):LB()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new VS(v4(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const n=this.options.notFoundRoute;n&&(n.init({originalIndex:0x174876e7ff,defaultSsr:this.options.defaultSsr}),this.routesById[n.id]=n);const r=o=>{o.forEach((l,u)=>{l.init({originalIndex:u,defaultSsr:this.options.defaultSsr});const f=this.routesById[l.id];if(Is(!f,`Duplicate routes found with id: ${String(l.id)}`),this.routesById[l.id]=l,!l.isRoot&&l.path){const h=Bc(l.fullPath);(!this.routesByPath[h]||l.fullPath.endsWith("/"))&&(this.routesByPath[h]=l)}const p=l.children;p?.length&&r(p)})};r([this.routeTree]);const i=[];Object.values(this.routesById).forEach((o,l)=>{var u;if(o.isRoot||!o.path)return;const f=pN(o.fullPath),p=Ld(f);for(;p.length>1&&((u=p[0])==null?void 0:u.value)==="/";)p.shift();const h=p.map(b=>b.value==="/"?.75:b.type==="param"?.5:b.type==="wildcard"?.25:1);i.push({child:o,trimmed:f,parsed:p,index:l,scores:h})}),this.flatRoutes=i.sort((o,l)=>{const u=Math.min(o.scores.length,l.scores.length);for(let f=0;f<u;f++)if(o.scores[f]!==l.scores[f])return l.scores[f]-o.scores[f];if(o.scores.length!==l.scores.length)return l.scores.length-o.scores.length;for(let f=0;f<u;f++)if(o.parsed[f].value!==l.parsed[f].value)return o.parsed[f].value>l.parsed[f].value?1:-1;return o.index-l.index}).map((o,l)=>(o.child.rank=l,o.child))},this.subscribe=(n,r)=>{const i={eventType:n,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const i=({pathname:u,search:f,hash:p,state:h})=>{const b=this.options.parseSearch(f),x=this.options.stringifySearch(b);return{pathname:u,searchStr:x,search:Xs(n?.search,b),hash:p.split("#").reverse()[0]??"",href:`${u}${x}${p}`,state:Xs(n?.state,h)}},s=i(r??this.history.location),{__tempLocation:o,__tempKey:l}=s.state;if(o&&(!l||l===this.tempLocationKey)){const u=i(o);return u.state.key=s.state.key,delete u.state.__tempLocation,{...u,maskedLocation:s}}return s},this.resolvePathWithBase=(n,r)=>c4({basepath:this.basepath,base:n,to:cv(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(n,r)=>{let i={};const s=Bc(n.pathname),o=p=>Ag(this.basepath,s,{to:p.fullPath,caseSensitive:p.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let l=r?.to!==void 0?this.routesByPath[r.to]:void 0;l?i=o(l):l=this.flatRoutes.find(p=>{const h=o(p);return h?(i=h,!0):!1});let u=l||this.routesById[Es];const f=[u];for(;u.parentRoute;)u=u.parentRoute,f.unshift(u);return{matchedRoutes:f,routeParams:i,foundRoute:l}},this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var n;(n=this.state.pendingMatches)==null||n.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=n=>{const r=(s={},o)=>{var l,u,f,p,h,b;const x=s._fromLocation?this.matchRoutes(s._fromLocation,{_buildLocation:!0}):this.state.matches,_=s.from!=null?x.find(F=>Ag(this.basepath,Bc(F.pathname),{to:s.from,caseSensitive:!1,fuzzy:!1})):void 0,E=_?.pathname||this.latestLocation.pathname;Is(s.from==null||_!=null,"Could not find match for from: "+s.from);const I=(l=this.state.pendingMatches)!=null&&l.length?(u=Qp(this.state.pendingMatches))==null?void 0:u.search:((f=Qp(x))==null?void 0:f.search)||this.latestLocation.search,T=o?.matchedRoutes.filter(F=>x.find(V=>V.routeId===F.id));let C;if(s.to)C=this.resolvePathWithBase(E,`${s.to}`);else{const F=this.routesById[(p=T?.find(V=>{const U=qg({path:V.fullPath,params:o?.routeParams??{},decodeCharMap:this.pathParamsDecodeCharMap});return La([this.basepath,U])===E}))==null?void 0:p.id];C=this.resolvePathWithBase(E,F?.to??E)}const j={...(h=Qp(x))==null?void 0:h.params};let q=(s.params??!0)===!0?j:{...j,...$c(s.params,j)};Object.keys(q).length>0&&o?.matchedRoutes.map(F=>{var V;return((V=F.options.params)==null?void 0:V.stringify)??F.options.stringifyParams}).filter(Boolean).forEach(F=>{q={...q,...F(q)}}),C=qg({path:C,params:q??{},leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let L=I;if(n._includeValidateSearch&&((b=this.options.search)!=null&&b.strict)){let F={};o?.matchedRoutes.forEach(V=>{try{V.options.validateSearch&&(F={...F,...Zw(V.options.validateSearch,{...F,...L})??{}})}catch{}}),L=F}L=(F=>{const V=o?.matchedRoutes.reduce((G,Z)=>{var le;const ie=[];if("search"in Z.options)(le=Z.options.search)!=null&&le.middlewares&&ie.push(...Z.options.search.middlewares);else if(Z.options.preSearchFilters||Z.options.postSearchFilters){const ne=({search:oe,next:te})=>{let ue=oe;"preSearchFilters"in Z.options&&Z.options.preSearchFilters&&(ue=Z.options.preSearchFilters.reduce((ye,we)=>we(ye),oe));const de=te(ue);return"postSearchFilters"in Z.options&&Z.options.postSearchFilters?Z.options.postSearchFilters.reduce((ye,we)=>we(ye),de):de};ie.push(ne)}if(n._includeValidateSearch&&Z.options.validateSearch){const ne=({search:oe,next:te})=>{try{const ue=te(oe);return{...ue,...Zw(Z.options.validateSearch,ue)??{}}}catch{}};ie.push(ne)}return G.concat(ie)},[])??[],U=({search:G})=>s.search?s.search===!0?G:$c(s.search,G):{};V.push(U);const B=(G,Z)=>{if(G>=V.length)return Z;const le=V[G];return le({search:Z,next:ne=>B(G+1,ne)})};return B(0,F)})(L),L=Xs(I,L);const W=this.options.stringifySearch(L),P=s.hash===!0?this.latestLocation.hash:s.hash?$c(s.hash,this.latestLocation.hash):void 0,O=P?`#${P}`:"";let z=s.state===!0?this.latestLocation.state:s.state?$c(s.state,this.latestLocation.state):{};return z=Xs(this.latestLocation.state,z),{pathname:C,search:L,searchStr:W,state:z,hash:P??"",href:`${C}${W}${O}`,unmaskOnReload:s.unmaskOnReload}},i=(s={},o)=>{var l;const u=r(s);let f=o?r(o):void 0;if(!f){let b={};const x=(l=this.options.routeMasks)==null?void 0:l.find(_=>{const E=Ag(this.basepath,u.pathname,{to:_.from,caseSensitive:!1,fuzzy:!1});return E?(b=E,!0):!1});if(x){const{from:_,...E}=x;o={...hy(n,["from"]),...E,params:b},f=r(o)}}const p=this.getMatchedRoutes(u,s),h=r(s,p);if(f){const b=this.getMatchedRoutes(f,o),x=r(o,b);h.maskedLocation=x}return h};return n.mask?i(n,{...hy(n,["from"]),...n.mask}):i(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...i})=>{const s=()=>{i.state.key=this.latestLocation.state.key;const u=_d(i.state,this.latestLocation.state);return delete i.state.key,u},o=this.latestLocation.href===i.href,l=this.commitLocationPromise;if(this.commitLocationPromise=od(()=>{l?.resolve()}),o&&s())this.load();else{let{maskedLocation:u,hashScrollIntoView:f,...p}=i;u&&(p={...u,state:{...u.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=f??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](p.href,p.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:i,viewTransition:s,ignoreBlocker:o,href:l,...u}={})=>{if(l){const p=this.history.location.state.__TSR_index,h=uh(l,{__TSR_index:n?p:p+1});u.to=h.pathname,u.search=this.options.parseSearch(h.search),u.hash=h.hash.slice(1)}const f=this.buildLocation({...u,_includeValidateSearch:!0});return this.commitLocation({...f,viewTransition:s,replace:n,resetScroll:r,hashScrollIntoView:i,ignoreBlocker:o})},this.navigate=({to:n,reloadDocument:r,href:i,...s})=>{if(r){i||(i=this.buildLocation({to:n,...s}).href),s.replace?window.location.replace(i):window.location.href=i;return}return this.buildAndCommitLocation({...s,href:i,to:n})},this.load=async n=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,i,s;for(s=new Promise(o=>{this.startReactTransition(async()=>{var l;try{const u=this.latestLocation,f=this.state.resolvedLocation,p=f.href!==u.href,h=f.pathname!==u.pathname;this.cancelMatches();let b;Kw(()=>{b=this.matchRoutes(u),this.__store.setState(x=>({...x,status:"pending",isLoading:!0,location:u,pendingMatches:b,cachedMatches:x.cachedMatches.filter(_=>!b.find(E=>E.id===_.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:f,toLocation:u,pathChanged:h,hrefChanged:p}),this.emit({type:"onBeforeLoad",fromLocation:f,toLocation:u,pathChanged:h,hrefChanged:p}),await this.loadMatches({sync:n?.sync,matches:b,location:u,onReady:async()=>{this.startViewTransition(async()=>{let x,_,E;Kw(()=>{this.__store.setState(I=>{const T=I.matches,C=I.pendingMatches||I.matches;return x=T.filter(j=>!C.find(q=>q.id===j.id)),_=C.filter(j=>!T.find(q=>q.id===j.id)),E=T.filter(j=>C.find(q=>q.id===j.id)),{...I,isLoading:!1,loadedAt:Date.now(),matches:C,pendingMatches:void 0,cachedMatches:[...I.cachedMatches,...x.filter(j=>j.status!=="error")]}}),this.clearExpiredCache()}),[[x,"onLeave"],[_,"onEnter"],[E,"onStay"]].forEach(([I,T])=>{I.forEach(C=>{var j,q;(q=(j=this.looseRoutesById[C.routeId].options)[T])==null||q.call(j,C)})})})}})}catch(u){Jw(u)?(r=u,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):So(u)&&(i=u),this.__store.setState(f=>({...f,statusCode:r?r.statusCode:i?404:f.matches.some(p=>p.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&((l=this.commitLocationPromise)==null||l.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;typeof r=="object"&&this.isViewTransitionTypesSupported?i={update:n,types:r.types}:i=n,document.startViewTransition(i)}else n()},this.updateMatch=(n,r)=>{var i;let s;const o=(i=this.state.pendingMatches)==null?void 0:i.find(p=>p.id===n),l=this.state.matches.find(p=>p.id===n),u=this.state.cachedMatches.find(p=>p.id===n),f=o?"pendingMatches":l?"matches":u?"cachedMatches":"";return f&&this.__store.setState(p=>{var h;return{...p,[f]:(h=p[f])==null?void 0:h.map(b=>b.id===n?s=r(b):b)}}),s},this.getMatch=n=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===n),this.loadMatches=async({location:n,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch,sync:l})=>{let u,f=!1;const p=async()=>{f||(f=!0,await s?.())},h=x=>!!(i&&!this.state.matches.find(_=>_.id===x));!this.isServer&&!this.state.matches.length&&p();const b=(x,_)=>{var E,I,T;if(Jw(_)&&!_.reloadDocument)throw _;if(jc(_)||So(_)){if(o(x.id,C=>({...C,status:jc(_)?"redirected":So(_)?"notFound":"error",isFetching:!1,error:_,beforeLoadPromise:void 0,loaderPromise:void 0})),_.routeId||(_.routeId=x.routeId),(E=x.beforeLoadPromise)==null||E.resolve(),(I=x.loaderPromise)==null||I.resolve(),(T=x.loadPromise)==null||T.resolve(),jc(_))throw f=!0,_=this.resolveRedirect({..._,_fromLocation:n}),_;if(So(_))throw this._handleNotFound(r,_,{updateMatch:o}),_}};try{await new Promise((x,_)=>{(async()=>{var E,I,T;try{const C=(L,M,W)=>{var P,O;const{id:z,routeId:F}=r[L],V=this.looseRoutesById[F];if(M instanceof Promise)throw M;M.routerCode=W,u=u??L,b(this.getMatch(z),M);try{(O=(P=V.options).onError)==null||O.call(P,M)}catch(U){M=U,b(this.getMatch(z),M)}o(z,U=>{var B,G;return(B=U.beforeLoadPromise)==null||B.resolve(),(G=U.loadPromise)==null||G.resolve(),{...U,error:M,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[L,{id:M,routeId:W}]of r.entries()){const P=this.getMatch(M),O=(E=r[L-1])==null?void 0:E.id,z=this.looseRoutesById[W],F=z.options.pendingMs??this.options.defaultPendingMs,V=!!(s&&!this.isServer&&!h(M)&&(z.options.loader||z.options.beforeLoad)&&typeof F=="number"&&F!==1/0&&(z.options.pendingComponent??this.options.defaultPendingComponent));let U=!0;if((P.beforeLoadPromise||P.loaderPromise)&&(V&&setTimeout(()=>{try{p()}catch{}},F),await P.beforeLoadPromise,U=this.getMatch(M).status!=="success"),U){try{o(M,Ne=>({...Ne,loadPromise:od(()=>{var ze;(ze=Ne.loadPromise)==null||ze.resolve()}),beforeLoadPromise:od()}));const B=new AbortController;let G;V&&(G=setTimeout(()=>{try{p()}catch{}},F));const{paramsError:Z,searchError:le}=this.getMatch(M);Z&&C(L,Z,"PARSE_PARAMS"),le&&C(L,le,"VALIDATE_SEARCH");const ie=()=>O?this.getMatch(O).context:this.options.context??{};o(M,Ne=>({...Ne,isFetching:"beforeLoad",fetchCount:Ne.fetchCount+1,abortController:B,pendingTimeout:G,context:{...ie(),...Ne.__routeContext}}));const{search:ne,params:oe,context:te,cause:ue}=this.getMatch(M),de=h(M),ye={search:ne,abortController:B,params:oe,preload:de,context:te,location:n,navigate:Ne=>this.navigate({...Ne,_fromLocation:n}),buildLocation:this.buildLocation,cause:de?"preload":ue,matches:r};let we=await ((T=(I=z.options).beforeLoad)==null?void 0:T.call(I,ye))??{};this.serializeLoaderData&&(we=this.serializeLoaderData("__beforeLoadContext",we,{router:this,match:this.getMatch(M)})),(jc(we)||So(we))&&C(L,we,"BEFORE_LOAD"),o(M,Ne=>({...Ne,__beforeLoadContext:we,context:{...ie(),...Ne.__routeContext,...we},abortController:B}))}catch(B){C(L,B,"BEFORE_LOAD")}o(M,B=>{var G;return(G=B.beforeLoadPromise)==null||G.resolve(),{...B,beforeLoadPromise:void 0,isFetching:!1}})}}const j=r.slice(0,u),q=[];j.forEach(({id:L,routeId:M},W)=>{q.push((async()=>{const{loaderPromise:P}=this.getMatch(L);let O=!1,z=!1;if(P){await P;const F=this.getMatch(L);F.error&&b(F,F.error)}else{const F=q[W-1],V=this.looseRoutesById[M],U=()=>{const{params:ue,loaderDeps:de,abortController:ye,context:we,cause:Ne}=this.getMatch(L),ze=h(L);return{params:ue,deps:de,preload:!!ze,parentMatchPromise:F,abortController:ye,context:we,location:n,navigate:je=>this.navigate({...je,_fromLocation:n}),cause:ze?"preload":Ne,route:V}},B=Date.now()-this.getMatch(L).updatedAt,G=h(L),Z=G?V.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:V.options.staleTime??this.options.defaultStaleTime??0,le=V.options.shouldReload,ie=typeof le=="function"?le(U()):le;o(L,ue=>({...ue,loaderPromise:od(),preload:!!G&&!this.state.matches.find(de=>de.id===L)}));const ne=async()=>{var ue,de,ye,we,Ne,ze,je,De;try{const Je=async()=>{const Xe=this.getMatch(L);Xe.minPendingPromise&&await Xe.minPendingPromise};try{this.loadRouteChunk(V),o(L,sn=>({...sn,isFetching:"loader"}));let Xe=await ((de=(ue=V.options).loader)==null?void 0:de.call(ue,U()));this.serializeLoaderData&&(Xe=this.serializeLoaderData("loaderData",Xe,{router:this,match:this.getMatch(L)})),b(this.getMatch(L),Xe),await V._lazyPromise,await Je();const Ve=(we=(ye=V.options).head)==null?void 0:we.call(ye,{matches:r,match:this.getMatch(L),params:this.getMatch(L).params,loaderData:Xe}),ct=Ve?.meta,_t=Ve?.links,Tt=Ve?.scripts,Ut=(ze=(Ne=V.options).headers)==null?void 0:ze.call(Ne,{loaderData:Xe});o(L,sn=>({...sn,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Xe,meta:ct,links:_t,scripts:Tt,headers:Ut}))}catch(Xe){let Ve=Xe;await Je(),b(this.getMatch(L),Xe);try{(De=(je=V.options).onError)==null||De.call(je,Xe)}catch(ct){Ve=ct,b(this.getMatch(L),ct)}o(L,ct=>({...ct,error:Ve,status:"error",isFetching:!1}))}await V._componentsPromise}catch(Je){o(L,Xe=>({...Xe,loaderPromise:void 0})),b(this.getMatch(L),Je)}},{status:oe,invalid:te}=this.getMatch(L);O=oe==="success"&&(te||(ie??B>Z)),G&&V.options.preload===!1||(O&&!l?(z=!0,(async()=>{try{await ne();const{loaderPromise:ue,loadPromise:de}=this.getMatch(L);ue?.resolve(),de?.resolve(),o(L,ye=>({...ye,loaderPromise:void 0}))}catch(ue){Jw(ue)&&await this.navigate(ue)}})()):(oe!=="success"||O&&l)&&await ne())}if(!z){const{loaderPromise:F,loadPromise:V}=this.getMatch(L);F?.resolve(),V?.resolve()}return o(L,F=>({...F,isFetching:z?F.isFetching:!1,loaderPromise:z?F.loaderPromise:void 0,invalid:!1})),this.getMatch(L)})())}),await Promise.all(q),x()}catch(C){_(C)}})()}),await p()}catch(x){if(jc(x)||So(x))throw So(x)&&!i&&await p(),x}return r},this.invalidate=n=>{const r=i=>{var s;return((s=n?.filter)==null?void 0:s.call(n,i))??!0?{...i,invalid:!0,...i.status==="error"?{status:"pending",error:void 0}:{}}:i};return this.__store.setState(i=>{var s;return{...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:(s=i.pendingMatches)==null?void 0:s.map(r)}}),this.load({sync:n?.sync})},this.resolveRedirect=n=>{const r=n;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(s=>!r(s))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const s=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<s)};this.clearCache({filter:n})},this.loadRouteChunk=n=>(n._lazyPromise===void 0&&(n.lazyFn?n._lazyPromise=n.lazyFn().then(r=>{const{id:i,...s}=r.options;Object.assign(n.options,s)}):n._lazyPromise=Promise.resolve()),n._componentsPromise===void 0&&(n._componentsPromise=n._lazyPromise.then(()=>Promise.all(W3.map(async r=>{const i=n.options[r];i?.preload&&await i.preload()})))),n._componentsPromise),this.preloadRoute=async n=>{const r=this.buildLocation(n);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(l=>l.id)),o=new Set([...s,...this.state.cachedMatches.map(l=>l.id)]);Kw(()=>{i.forEach(l=>{o.has(l.id)||this.__store.setState(u=>({...u,cachedMatches:[...u.cachedMatches,l]}))})});try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(l,u)=>{s.has(l)?i=i.map(f=>f.id===l?u(f):f):this.updateMatch(l,u)}}),i}catch(l){if(jc(l))return l.reloadDocument?void 0:await this.preloadRoute({...l,_fromLocation:r});console.error(l);return}},this.matchRoute=(n,r)=>{const i={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(i);if(r?.pending&&this.state.status!=="pending")return!1;const l=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,u=Ag(this.basepath,l.pathname,{...r,to:s.pathname});return!u||n.params&&!_d(u,n.params,{partial:!0})?!1:u&&(r?.includeSearch??!0)?_d(l.search,s.search,{partial:!0})?u:!1:u},this.dehydrate=()=>{var n;const r=((n=this.options.errorSerializer)==null?void 0:n.serialize)??x4;return{state:{dehydratedMatches:this.state.matches.map(i=>({...hy(i,["id","status","updatedAt"]),error:i.error?{data:r(i.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var n,r,i;let s;typeof document<"u"&&(s=this.options.transformer.parse((n=window.__TSR__)==null?void 0:n.dehydrated)),Is(s),this.dehydratedData=s.payload,(i=(r=this.options).hydrate)==null||i.call(r,s.payload);const o=s.router.state,l=this.matchRoutes(this.state.location).map(u=>{const f=o.dehydratedMatches.find(p=>p.id===u.id);return Is(f,`Could not find a client-side match for dehydrated match with id: ${u.id}!`),{...u,...f}});this.__store.setState(u=>({...u,matches:l})),this.manifest=s.router.manifest},this.injectedHtml=[],this.injectHtml=n=>{const r=()=>(this.injectedHtml=this.injectedHtml.filter(i=>i!==r),n);this.injectedHtml.push(r)},this.injectScript=(n,r)=>{this.injectHtml(`<script class='tsr-once'>${n}; if (typeof __TSR__ !== 'undefined') __TSR__.cleanScripts()</script>`)},this.streamedKeys=new Set,this.getStreamedValue=n=>{var r;if(this.isServer)return;const i=(r=window.__TSR__)==null?void 0:r.streamedValues[n];if(i)return i.parsed||(i.parsed=this.options.transformer.parse(i.value)),i.parsed},this.streamValue=(n,r)=>{var i;this.streamedKeys.has(n),this.streamedKeys.add(n),this.injectScript(`__TSR__.streamedValues['${n}'] = { value: ${(i=this.serializer)==null?void 0:i.call(this,this.options.transformer.stringify(r))}}`)},this._handleNotFound=(n,r,{updateMatch:i=this.updateMatch}={})=>{const s=Object.fromEntries(n.map(u=>[u.routeId,u]));let o=(r.global?this.looseRoutesById[Es]:this.looseRoutesById[r.routeId])||this.looseRoutesById[Es];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==Es;)o=o.parentRoute,Is(o);const l=s[o.id];Is(l,"Could not find match for route: "+o.id),i(l.id,u=>({...u,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(n,r,{updateMatch:i}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??t4,parseSearch:e.parseSearch??e4,transformer:e.transformer??Rp}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(e,n,r){return typeof e=="string"?this.matchRoutesInternal({pathname:e,search:n},r):this.matchRoutesInternal(e,n)}matchRoutesInternal(e,n){const{foundRoute:r,matchedRoutes:i,routeParams:s}=this.getMatchedRoutes(e,n?.dest);let o=!1;(r?r.path!=="/"&&s["**"]:Bc(e.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const l=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let h=i.length-1;h>=0;h--){const b=i[h];if(b.children)return b.id}return Es}})(),u=i.map(h=>{var b;let x;const _=((b=h.options.params)==null?void 0:b.parse)??h.options.parseParams;if(_)try{const E=_(s);Object.assign(s,E)}catch(E){if(x=new b4(E.message,{cause:E}),n?.throwOnError)throw x;return x}}),f=[],p=h=>h?.id?h.context??this.options.context??{}:this.options.context??{};return i.forEach((h,b)=>{var x,_,E,I;const T=f[b-1],[C,j]=(()=>{const U=T?.search??e.search;try{const B=Zw(h.options.validateSearch,U)??{};return[{...U,...B},void 0]}catch(B){const G=new US(B.message,{cause:B});if(n?.throwOnError)throw G;return[U,G]}})(),q=((_=(x=h.options).loaderDeps)==null?void 0:_.call(x,{search:C}))??"",L=q?JSON.stringify(q):"",M=qg({path:h.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),W=qg({path:h.id,params:s,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+L,P=this.getMatch(W),O=this.state.matches.find(U=>U.routeId===h.id),z=O?"stay":"enter";let F;if(P)F={...P,cause:z,params:O?Xs(O.params,s):s,search:Xs(O?O.search:P.search,C)};else{const U=h.options.loader||h.options.beforeLoad||h.lazyFn||m4(h)?"pending":"success";F={id:W,index:b,routeId:h.id,params:O?Xs(O.params,s):s,pathname:La([this.basepath,M]),updatedAt:Date.now(),search:O?Xs(O.search,C):C,searchError:void 0,status:U,isFetching:!1,error:void 0,paramsError:u[b],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:z,loaderDeps:O?Xs(O.loaderDeps,q):q,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:h.options.staticData||{},loadPromise:od(),fullPath:h.fullPath}}F.status==="success"&&(F.headers=(I=(E=h.options).headers)==null?void 0:I.call(E,{loaderData:F.loaderData})),n?.preload||(F.globalNotFound=l===h.id),F.searchError=j;const V=p(T);F.context={...V,...F.__routeContext,...F.__beforeLoadContext},f.push(F)}),f.forEach((h,b)=>{var x,_,E,I;const T=this.looseRoutesById[h.routeId];if(!this.getMatch(h.id)&&n?._buildLocation!==!0){const q=f[b-1],L=p(q),M={deps:h.loaderDeps,params:h.params,context:L,location:e,navigate:W=>this.navigate({...W,_fromLocation:e}),buildLocation:this.buildLocation,cause:h.cause,abortController:h.abortController,preload:!!h.preload,matches:f};h.__routeContext=((_=(x=T.options).context)==null?void 0:_.call(x,M))??{},h.context={...L,...h.__routeContext,...h.__beforeLoadContext}}const j=(I=(E=T.options).head)==null?void 0:I.call(E,{matches:f,match:h,params:h.params,loaderData:h.loaderData??void 0});h.links=j?.links,h.scripts=j?.scripts,h.meta=j?.meta}),f}}class US extends Error{}class b4 extends Error{}function v4(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function x4(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function RC(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function jC(t){if("name"in t&&"message"in t){const e=new Error(t.message);return e.name=t.name,e}return t.data}const dv=H.createContext(void 0),w4=H.createContext(void 0);function Ul(t){const e=H.useContext(t.from?w4:dv);return Ui({select:r=>{const i=r.matches.find(s=>t.from?t.from===s.routeId:s.id===e);if(Is(!((t.shouldThrow??!0)&&!i),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),i!==void 0)return t.select?t.select(i):i},structuralSharing:t.structuralSharing})}function mi(t){return Ul({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function _4(t){const{select:e,...n}=t;return Ul({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function tn(t){return Ul({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function S4(t){return Ul({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function tc(t){const{navigate:e}=Lo();return H.useCallback(n=>e({...n}),[e])}let V3=class{constructor(e){this.init=n=>{var r,i;this.originalIndex=n.originalIndex;const s=this.options,o=!s?.path&&!s?.id;this.parentRoute=(i=(r=this.options).getParentRoute)==null?void 0:i.call(r),o?this._path=Es:Is(this.parentRoute);let l=o?Es:s.path;l&&l!=="/"&&(l=pN(l));const u=s?.id||l;let f=o?Es:La([this.parentRoute.id===Es?"":this.parentRoute.id,u]);l===Es&&(l="/"),f!==Es&&(f=La(["/",f]));const p=f===Es?"/":La([this.parentRoute.fullPath,l]);this._path=l,this._id=f,this._fullPath=p,this._to=p,this._ssr=s?.ssr??n.defaultSsr??!0},this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.useMatch=n=>Ul({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Ul({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>S4({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>tn({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>_4({...n,from:this.id}),this.useLoaderData=n=>mi({...n,from:this.id}),this.useNavigate=()=>tc({from:this.id}),this.options=e||{},this.isRoot=!e?.getParentRoute,Is(!(e?.id&&e?.path)),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(e){return this._addFileChildren(e)}_addFileChildren(e){return Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this}};function E4(t){return new V3(t)}function N4(){return t=>k4(t)}class I4 extends V3{constructor(e){super(e)}addChildren(e){return super.addChildren(e),this}_addFileChildren(e){return super._addFileChildren(e),this}_addFileTypes(){return this}}function k4(t){return new I4(t)}function Dt(t){return new C4(t,{silent:!0}).createRoute}class C4{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const i=E4(r);return i.isRoot=!1,i},this.silent=n?.silent}}function my(t){return d.jsx(d.Fragment,{children:t.children})}function U3(t,e,n){return e.options.notFoundComponent?d.jsx(e.options.notFoundComponent,{data:n}):t.options.defaultNotFoundComponent?d.jsx(t.options.defaultNotFoundComponent,{data:n}):d.jsx(h4,{})}const H3=H.memo(function({matchId:e}){var n,r;const i=Lo(),s=Ui({select:I=>{var T;return(T=I.matches.find(C=>C.id===e))==null?void 0:T.routeId}});Is(s);const o=i.routesById[s],l=o.options.pendingComponent??i.options.defaultPendingComponent,u=l?d.jsx(l,{}):null,f=o.options.errorComponent??i.options.defaultErrorComponent,p=o.options.onCatch??i.options.defaultOnCatch,h=o.isRoot?o.options.notFoundComponent??((n=i.options.notFoundRoute)==null?void 0:n.options.component):o.options.notFoundComponent,b=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??l??((r=o.options.errorComponent)==null?void 0:r.preload))?H.Suspense:my,x=f?hN:my,_=h?p4:my,E=Ui({select:I=>I.loadedAt});return d.jsx(dv.Provider,{value:e,children:d.jsx(b,{fallback:u,children:d.jsx(x,{getResetKey:()=>E,errorComponent:f||uv,onCatch:(I,T)=>{if(So(I))throw I;p?.(I,T)},children:d.jsx(_,{fallback:I=>{if(!h||I.routeId&&I.routeId!==s||!I.routeId&&!o.isRoot)throw I;return H.createElement(h,I)},children:d.jsx(T4,{matchId:e})})})})})}),T4=H.memo(function({matchId:e}){var n,r,i,s,o;const l=Lo(),{match:u,matchIndex:f,routeId:p}=Ui({select:_=>{const E=_.matches.findIndex(C=>C.id===e),I=_.matches[E];return{routeId:I.routeId,matchIndex:E,match:hy(I,["id","status","error"])}},structuralSharing:!0}),h=l.routesById[p],b=H.useMemo(()=>{const _=h.options.component??l.options.defaultComponent;return _?d.jsx(_,{}):d.jsx(fo,{})},[h.options.component,l.options.defaultComponent]),x=(h.options.errorComponent??l.options.defaultErrorComponent)||uv;if(u.status==="notFound"){let _;return RC(u.error)?_=(((n=l.options.errorSerializer)==null?void 0:n.deserialize)??jC)(u.error.data):_=u.error,Is(So(_)),U3(l,h,_)}if(u.status==="redirected")throw Is(jc(u.error)),(r=l.getMatch(u.id))==null?void 0:r.loadPromise;if(u.status==="error"){if(l.isServer)return d.jsx(x,{error:u.error,info:{componentStack:""}});throw RC(u.error)?(((i=l.options.errorSerializer)==null?void 0:i.deserialize)??jC)(u.error.data):u.error}if(u.status==="pending"){const _=h.options.pendingMinMs??l.options.defaultPendingMinMs;if(_&&!((s=l.getMatch(u.id))!=null&&s.minPendingPromise)&&!l.isServer){const E=od();Promise.resolve().then(()=>{l.updateMatch(u.id,I=>({...I,minPendingPromise:E}))}),setTimeout(()=>{E.resolve(),l.updateMatch(u.id,I=>({...I,minPendingPromise:void 0}))},_)}throw(o=l.getMatch(u.id))==null?void 0:o.loadPromise}return d.jsxs(d.Fragment,{children:[b,l.AfterEachMatch?d.jsx(l.AfterEachMatch,{match:u,matchIndex:f}):null]})}),fo=H.memo(function(){const e=Lo(),n=H.useContext(dv),r=Ui({select:f=>{var p;return(p=f.matches.find(h=>h.id===n))==null?void 0:p.routeId}}),i=e.routesById[r],s=Ui({select:f=>{const h=f.matches.find(b=>b.id===n);return Is(h),h.globalNotFound}}),o=Ui({select:f=>{var p;const h=f.matches,b=h.findIndex(x=>x.id===n);return(p=h[b+1])==null?void 0:p.id}});if(s)return U3(e,i,void 0);if(!o)return null;const l=d.jsx(H3,{matchId:o}),u=e.options.defaultPendingComponent?d.jsx(e.options.defaultPendingComponent,{}):null;return n===Es?d.jsx(H.Suspense,{fallback:u,children:l}):l});var Yw={exports:{}},os={},Xw={exports:{}},e_={};var OC;function R4(){return OC||(OC=1,function(t){function e(ie,ne){var oe=ie.length;ie.push(ne);e:for(;0<oe;){var te=oe-1>>>1,ue=ie[te];if(0<i(ue,ne))ie[te]=ne,ie[oe]=ue,oe=te;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ne=ie[0],oe=ie.pop();if(oe!==ne){ie[0]=oe;e:for(var te=0,ue=ie.length,de=ue>>>1;te<de;){var ye=2*(te+1)-1,we=ie[ye],Ne=ye+1,ze=ie[Ne];if(0>i(we,oe))Ne<ue&&0>i(ze,we)?(ie[te]=ze,ie[Ne]=oe,te=Ne):(ie[te]=we,ie[ye]=oe,te=ye);else if(Ne<ue&&0>i(ze,oe))ie[te]=ze,ie[Ne]=oe,te=Ne;else break e}}return ne}function i(ie,ne){var oe=ie.sortIndex-ne.sortIndex;return oe!==0?oe:ie.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],f=[],p=1,h=null,b=3,x=!1,_=!1,E=!1,I=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(ie){for(var ne=n(f);ne!==null;){if(ne.callback===null)r(f);else if(ne.startTime<=ie)r(f),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(f)}}function q(ie){if(E=!1,j(ie),!_)if(n(u)!==null)_=!0,Z(L);else{var ne=n(f);ne!==null&&le(q,ne.startTime-ie)}}function L(ie,ne){_=!1,E&&(E=!1,T(P),P=-1),x=!0;var oe=b;try{for(j(ne),h=n(u);h!==null&&(!(h.expirationTime>ne)||ie&&!F());){var te=h.callback;if(typeof te=="function"){h.callback=null,b=h.priorityLevel;var ue=te(h.expirationTime<=ne);ne=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===n(u)&&r(u),j(ne)}else r(u);h=n(u)}if(h!==null)var de=!0;else{var ye=n(f);ye!==null&&le(q,ye.startTime-ne),de=!1}return de}finally{h=null,b=oe,x=!1}}var M=!1,W=null,P=-1,O=5,z=-1;function F(){return!(t.unstable_now()-z<O)}function V(){if(W!==null){var ie=t.unstable_now();z=ie;var ne=!0;try{ne=W(!0,ie)}finally{ne?U():(M=!1,W=null)}}else M=!1}var U;if(typeof C=="function")U=function(){C(V)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,G=B.port2;B.port1.onmessage=V,U=function(){G.postMessage(null)}}else U=function(){I(V,0)};function Z(ie){W=ie,M||(M=!0,U())}function le(ie,ne){P=I(function(){ie(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){_||x||(_=!0,Z(L))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(ie){switch(b){case 1:case 2:case 3:var ne=3;break;default:ne=b}var oe=b;b=ne;try{return ie()}finally{b=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,ne){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var oe=b;b=ie;try{return ne()}finally{b=oe}},t.unstable_scheduleCallback=function(ie,ne,oe){var te=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?te+oe:te):oe=te,ie){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=0x3fffffff;break;case 4:ue=1e4;break;default:ue=5e3}return ue=oe+ue,ie={id:p++,callback:ne,priorityLevel:ie,startTime:oe,expirationTime:ue,sortIndex:-1},oe>te?(ie.sortIndex=oe,e(f,ie),n(u)===null&&ie===n(f)&&(E?(T(P),P=-1):E=!0,le(q,oe-te))):(ie.sortIndex=ue,e(u,ie),_||x||(_=!0,Z(L))),ie},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(ie){var ne=b;return function(){var oe=b;b=ne;try{return ie.apply(this,arguments)}finally{b=oe}}}}(e_)),e_}var qC;function j4(){return qC||(qC=1,Xw.exports=R4()),Xw.exports}var AC;function O4(){if(AC)return os;AC=1;var t=Zh(),e=j4();function n(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(i[a]=c,a=0;a<c.length;a++)r.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function b(a){return u.call(h,a)?!0:u.call(p,a)?!1:f.test(a)?h[a]=!0:(p[a]=!0,!1)}function x(a,c,m,w){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function _(a,c,m,w){if(c===null||typeof c>"u"||x(a,c,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function E(a,c,m,w,k,A,Y){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=w,this.attributeNamespace=k,this.mustUseProperty=m,this.propertyName=a,this.type=c,this.sanitizeURL=A,this.removeEmptyString=Y}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){I[a]=new E(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];I[c]=new E(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){I[a]=new E(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){I[a]=new E(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){I[a]=new E(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){I[a]=new E(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){I[a]=new E(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){I[a]=new E(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){I[a]=new E(a,5,!1,a.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(T,C);I[c]=new E(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(T,C);I[c]=new E(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(T,C);I[c]=new E(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){I[a]=new E(a,1,!1,a.toLowerCase(),null,!1,!1)}),I.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){I[a]=new E(a,1,!1,a.toLowerCase(),null,!0,!0)});function j(a,c,m,w){var k=I.hasOwnProperty(c)?I[c]:null;(k!==null?k.type!==0:w||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(_(c,m,k,w)&&(m=null),w||k===null?b(c)&&(m===null?a.removeAttribute(c):a.setAttribute(c,""+m)):k.mustUseProperty?a[k.propertyName]=m===null?k.type===3?!1:"":m:(c=k.attributeName,w=k.attributeNamespace,m===null?a.removeAttribute(c):(k=k.type,m=k===3||k===4&&m===!0?"":""+m,w?a.setAttributeNS(w,c,m):a.setAttribute(c,m))))}var q=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),M=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),F=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ne(a){return a===null||typeof a!="object"?null:(a=ie&&a[ie]||a["@@iterator"],typeof a=="function"?a:null)}var oe=Object.assign,te;function ue(a){if(te===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);te=c&&c[1]||""}return`
`+te+a}var de=!1;function ye(a,c){if(!a||de)return"";de=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(He){var w=He}Reflect.construct(a,[],c)}else{try{c.call()}catch(He){w=He}a.call(c.prototype)}else{try{throw Error()}catch(He){w=He}a()}}catch(He){if(He&&w&&typeof He.stack=="string"){for(var k=He.stack.split(`
`),A=w.stack.split(`
`),Y=k.length-1,ge=A.length-1;1<=Y&&0<=ge&&k[Y]!==A[ge];)ge--;for(;1<=Y&&0<=ge;Y--,ge--)if(k[Y]!==A[ge]){if(Y!==1||ge!==1)do if(Y--,ge--,0>ge||k[Y]!==A[ge]){var Se=`
`+k[Y].replace(" at new "," at ");return a.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",a.displayName)),Se}while(1<=Y&&0<=ge);break}}}finally{de=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?ue(a):""}function we(a){switch(a.tag){case 5:return ue(a.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 2:case 15:return a=ye(a.type,!1),a;case 11:return a=ye(a.type.render,!1),a;case 1:return a=ye(a.type,!0),a;default:return""}}function Ne(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case W:return"Fragment";case M:return"Portal";case O:return"Profiler";case P:return"StrictMode";case U:return"Suspense";case B:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case F:return(a.displayName||"Context")+".Consumer";case z:return(a._context.displayName||"Context")+".Provider";case V:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case G:return c=a.displayName||null,c!==null?c:Ne(a.type)||"Memo";case Z:c=a._payload,a=a._init;try{return Ne(a(c))}catch{}}return null}function ze(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(c);case 8:return c===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function je(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function De(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Je(a){var c=De(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),w=""+a[c];if(!a.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var k=m.get,A=m.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return k.call(this)},set:function(Y){w=""+Y,A.call(this,Y)}}),Object.defineProperty(a,c,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(Y){w=""+Y},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Xe(a){a._valueTracker||(a._valueTracker=Je(a))}function Ve(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var m=c.getValue(),w="";return a&&(w=De(a)?a.checked?"true":"false":a.value),a=w,a!==m?(c.setValue(a),!0):!1}function ct(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function _t(a,c){var m=c.checked;return oe({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function Tt(a,c){var m=c.defaultValue==null?"":c.defaultValue,w=c.checked!=null?c.checked:c.defaultChecked;m=je(c.value!=null?c.value:m),a._wrapperState={initialChecked:w,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Ut(a,c){c=c.checked,c!=null&&j(a,"checked",c,!1)}function sn(a,c){Ut(a,c);var m=je(c.value),w=c.type;if(m!=null)w==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(w==="submit"||w==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?be(a,c.type,m):c.hasOwnProperty("defaultValue")&&be(a,c.type,je(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function xe(a,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var w=c.type;if(!(w!=="submit"&&w!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,m||c===a.value||(a.value=c),a.defaultValue=c}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function be(a,c,m){(c!=="number"||ct(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var Ie=Array.isArray;function Ae(a,c,m,w){if(a=a.options,c){c={};for(var k=0;k<m.length;k++)c["$"+m[k]]=!0;for(m=0;m<a.length;m++)k=c.hasOwnProperty("$"+a[m].value),a[m].selected!==k&&(a[m].selected=k),k&&w&&(a[m].defaultSelected=!0)}else{for(m=""+je(m),c=null,k=0;k<a.length;k++){if(a[k].value===m){a[k].selected=!0,w&&(a[k].defaultSelected=!0);return}c!==null||a[k].disabled||(c=a[k])}c!==null&&(c.selected=!0)}}function Ue(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function rt(a,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(n(92));if(Ie(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),m=c}a._wrapperState={initialValue:je(m)}}function Me(a,c){var m=je(c.value),w=je(c.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),c.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),w!=null&&(a.defaultValue=""+w)}function ut(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Qt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gt(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Qt(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var bn,ar=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,w,k){MSApp.execUnsafeLocalFunction(function(){return a(c,m,w,k)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(bn=bn||document.createElement("div"),bn.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=bn.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Dn(a,c){if(c){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=c;return}}a.textContent=c}var Qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pi=["Webkit","ms","Moz","O"];Object.keys(Qr).forEach(function(a){Pi.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Qr[c]=Qr[a]})});function Sr(a,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||Qr.hasOwnProperty(a)&&Qr[a]?(""+c).trim():c+"px"}function Jt(a,c){a=a.style;for(var m in c)if(c.hasOwnProperty(m)){var w=m.indexOf("--")===0,k=Sr(m,c[m],w);m==="float"&&(m="cssFloat"),w?a.setProperty(m,k):a[m]=k}}var Ji=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zi(a,c){if(c){if(Ji[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Yi(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var po=null;function pa(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var cc=null,Bs=null,K=null;function gu(a){if(a=Zf(a)){if(typeof cc!="function")throw Error(n(280));var c=a.stateNode;c&&(c=Hm(c),cc(a.stateNode,a.type,c))}}function dn(a){Bs?K?K.push(a):K=[a]:Bs=a}function yu(){if(Bs){var a=Bs,c=K;if(K=Bs=null,gu(a),c)for(a=0;a<c.length;a++)gu(c[a])}}function bu(a,c){return a(c)}function vu(){}var uc=!1;function ha(a,c,m){if(uc)return a(c,m);uc=!0;try{return bu(a,c,m)}finally{uc=!1,(Bs!==null||K!==null)&&(vu(),yu())}}function Xi(a,c){var m=a.stateNode;if(m===null)return null;var w=Hm(m);if(w===null)return null;m=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(a=a.type,w=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!w;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(n(231,c,typeof m));return m}var dc=!1;if(l)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){dc=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{dc=!1}function Ef(a,c,m,w,k,A,Y,ge,Se){var He=Array.prototype.slice.call(arguments,3);try{c.apply(m,He)}catch(ht){this.onError(ht)}}var ga=!1,zs=null,Ya=!1,Ws=null,Nf={onError:function(a){ga=!0,zs=a}};function If(a,c,m,w,k,A,Y,ge,Se){ga=!1,zs=null,Ef.apply(Nf,arguments)}function xu(a,c,m,w,k,A,Y,ge,Se){if(If.apply(this,arguments),ga){if(ga){var He=zs;ga=!1,zs=null}else throw Error(n(198));Ya||(Ya=!0,Ws=He)}}function Vs(a){var c=a,m=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,c.flags&4098&&(m=c.return),a=c.return;while(a)}return c.tag===3?m:null}function wu(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function _u(a){if(Vs(a)!==a)throw Error(n(188))}function kf(a){var c=a.alternate;if(!c){if(c=Vs(a),c===null)throw Error(n(188));return c!==a?null:a}for(var m=a,w=c;;){var k=m.return;if(k===null)break;var A=k.alternate;if(A===null){if(w=k.return,w!==null){m=w;continue}break}if(k.child===A.child){for(A=k.child;A;){if(A===m)return _u(k),a;if(A===w)return _u(k),c;A=A.sibling}throw Error(n(188))}if(m.return!==w.return)m=k,w=A;else{for(var Y=!1,ge=k.child;ge;){if(ge===m){Y=!0,m=k,w=A;break}if(ge===w){Y=!0,w=k,m=A;break}ge=ge.sibling}if(!Y){for(ge=A.child;ge;){if(ge===m){Y=!0,m=A,w=k;break}if(ge===w){Y=!0,w=A,m=k;break}ge=ge.sibling}if(!Y)throw Error(n(189))}}if(m.alternate!==w)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?a:c}function Su(a){return a=kf(a),a!==null?Eu(a):null}function Eu(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=Eu(a);if(c!==null)return c;a=a.sibling}return null}var Nu=e.unstable_scheduleCallback,fc=e.unstable_cancelCallback,Iu=e.unstable_shouldYield,Cf=e.unstable_requestPaint,lr=e.unstable_now,Tf=e.unstable_getCurrentPriorityLevel,pc=e.unstable_ImmediatePriority,ku=e.unstable_UserBlockingPriority,Xa=e.unstable_NormalPriority,Rf=e.unstable_LowPriority,hc=e.unstable_IdlePriority,el=null,es=null;function jf(a){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(el,a,void 0,(a.current.flags&128)===128)}catch{}}var xi=Math.clz32?Math.clz32:Af,Of=Math.log,qf=Math.LN2;function Af(a){return a>>>=0,a===0?32:31-(Of(a)/qf|0)|0}var Wo=64,tl=4194304;function Fi(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return a&0x7c00000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return a}}function nl(a,c){var m=a.pendingLanes;if(m===0)return 0;var w=0,k=a.suspendedLanes,A=a.pingedLanes,Y=m&0xfffffff;if(Y!==0){var ge=Y&~k;ge!==0?w=Fi(ge):(A&=Y,A!==0&&(w=Fi(A)))}else Y=m&~k,Y!==0?w=Fi(Y):A!==0&&(w=Fi(A));if(w===0)return 0;if(c!==0&&c!==w&&!(c&k)&&(k=w&-w,A=c&-c,k>=A||k===16&&(A&4194240)!==0))return c;if(w&4&&(w|=m&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=w;0<c;)m=31-xi(c),k=1<<m,w|=a[m],c&=~k;return w}function fx(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return-1;case 0x8000000:case 0x10000000:case 0x20000000:case 0x40000000:return-1;default:return-1}}function px(a,c){for(var m=a.suspendedLanes,w=a.pingedLanes,k=a.expirationTimes,A=a.pendingLanes;0<A;){var Y=31-xi(A),ge=1<<Y,Se=k[Y];Se===-1?(!(ge&m)||ge&w)&&(k[Y]=fx(ge,c)):Se<=c&&(a.expiredLanes|=ge),A&=~ge}}function Pf(a){return a=a.pendingLanes&-0x40000001,a!==0?a:a&0x40000000?0x40000000:0}function Fm(){var a=Wo;return Wo<<=1,!(Wo&4194240)&&(Wo=64),a}function Ff(a){for(var c=[],m=0;31>m;m++)c.push(a);return c}function mc(a,c,m){a.pendingLanes|=c,c!==0x20000000&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-xi(c),a[c]=m}function hx(a,c){var m=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var w=a.eventTimes;for(a=a.expirationTimes;0<m;){var k=31-xi(m),A=1<<k;c[k]=0,w[k]=-1,a[k]=-1,m&=~A}}function Df(a,c){var m=a.entangledLanes|=c;for(a=a.entanglements;m;){var w=31-xi(m),k=1<<w;k&c|a[w]&c&&(a[w]|=c),m&=~k}}var Ln=0;function Dm(a){return a&=-a,1<a?4<a?a&0xfffffff?16:0x20000000:4:1}var Lf,he,Mf,gc,$f,g=!1,y=[],S=null,N=null,R=null,$=new Map,fe=new Map,me=[],Ke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tt(a,c){switch(a){case"focusin":case"focusout":S=null;break;case"dragenter":case"dragleave":N=null;break;case"mouseover":case"mouseout":R=null;break;case"pointerover":case"pointerout":$.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":fe.delete(c.pointerId)}}function at(a,c,m,w,k,A){return a===null||a.nativeEvent!==A?(a={blockedOn:c,domEventName:m,eventSystemFlags:w,nativeEvent:A,targetContainers:[k]},c!==null&&(c=Zf(c),c!==null&&he(c)),a):(a.eventSystemFlags|=w,c=a.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),a)}function mt(a,c,m,w,k){switch(c){case"focusin":return S=at(S,a,c,m,w,k),!0;case"dragenter":return N=at(N,a,c,m,w,k),!0;case"mouseover":return R=at(R,a,c,m,w,k),!0;case"pointerover":var A=k.pointerId;return $.set(A,at($.get(A)||null,a,c,m,w,k)),!0;case"gotpointercapture":return A=k.pointerId,fe.set(A,at(fe.get(A)||null,a,c,m,w,k)),!0}return!1}function Be(a){var c=yc(a.target);if(c!==null){var m=Vs(c);if(m!==null){if(c=m.tag,c===13){if(c=wu(m),c!==null){a.blockedOn=c,$f(a.priority,function(){Mf(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Oe(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var m=ce(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var w=new m.constructor(m.type,m);po=w,m.target.dispatchEvent(w),po=null}else return c=Zf(m),c!==null&&he(c),a.blockedOn=m,!1;c.shift()}return!0}function et(a,c,m){Oe(a)&&m.delete(c)}function ve(){g=!1,S!==null&&Oe(S)&&(S=null),N!==null&&Oe(N)&&(N=null),R!==null&&Oe(R)&&(R=null),$.forEach(et),fe.forEach(et)}function ke(a,c){a.blockedOn===c&&(a.blockedOn=null,g||(g=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ve)))}function Te(a){function c(k){return ke(k,a)}if(0<y.length){ke(y[0],a);for(var m=1;m<y.length;m++){var w=y[m];w.blockedOn===a&&(w.blockedOn=null)}}for(S!==null&&ke(S,a),N!==null&&ke(N,a),R!==null&&ke(R,a),$.forEach(c),fe.forEach(c),m=0;m<me.length;m++)w=me[m],w.blockedOn===a&&(w.blockedOn=null);for(;0<me.length&&(m=me[0],m.blockedOn===null);)Be(m),m.blockedOn===null&&me.shift()}var Ze=q.ReactCurrentBatchConfig,Ge=!0;function Re(a,c,m,w){var k=Ln,A=Ze.transition;Ze.transition=null;try{Ln=1,St(a,c,m,w)}finally{Ln=k,Ze.transition=A}}function Qe(a,c,m,w){var k=Ln,A=Ze.transition;Ze.transition=null;try{Ln=4,St(a,c,m,w)}finally{Ln=k,Ze.transition=A}}function St(a,c,m,w){if(Ge){var k=ce(a,c,m,w);if(k===null)Cx(a,c,w,ee,m),tt(a,w);else if(mt(k,a,c,m,w))w.stopPropagation();else if(tt(a,w),c&4&&-1<Ke.indexOf(a)){for(;k!==null;){var A=Zf(k);if(A!==null&&Lf(A),A=ce(a,c,m,w),A===null&&Cx(a,c,w,ee,m),A===k)break;k=A}k!==null&&w.stopPropagation()}else Cx(a,c,w,null,m)}}var ee=null;function ce(a,c,m,w){if(ee=null,a=pa(w),a=yc(a),a!==null)if(c=Vs(a),c===null)a=null;else if(m=c.tag,m===13){if(a=wu(c),a!==null)return a;a=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return ee=a,null}function Ee(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tf()){case pc:return 1;case ku:return 4;case Xa:case Rf:return 16;case hc:return 0x20000000;default:return 16}default:return 16}}var st=null,ae=null,pe=null;function Q(){if(pe)return pe;var a,c=ae,m=c.length,w,k="value"in st?st.value:st.textContent,A=k.length;for(a=0;a<m&&c[a]===k[a];a++);var Y=m-a;for(w=1;w<=Y&&c[m-w]===k[A-w];w++);return pe=k.slice(a,1<w?1-w:void 0)}function re(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function se(){return!0}function Le(){return!1}function it(a){function c(m,w,k,A,Y){this._reactName=m,this._targetInst=k,this.type=w,this.nativeEvent=A,this.target=Y,this.currentTarget=null;for(var ge in a)a.hasOwnProperty(ge)&&(m=a[ge],this[ge]=m?m(A):A[ge]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?se:Le,this.isPropagationStopped=Le,this}return oe(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=se)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=se)},persist:function(){},isPersistent:se}),c}var qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wt=it(qt),Zt=oe({},qt,{view:0,detail:0}),lt=it(Zt),_e,Pe,ot,pt=oe({},Zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ot&&(ot&&a.type==="mousemove"?(_e=a.screenX-ot.screenX,Pe=a.screenY-ot.screenY):Pe=_e=0,ot=a),_e)},movementY:function(a){return"movementY"in a?a.movementY:Pe}}),Mt=it(pt),Xt=oe({},pt,{dataTransfer:0}),qe=it(Xt),nt=oe({},Zt,{relatedTarget:0}),dt=it(nt),Nt=oe({},qt,{animationName:0,elapsedTime:0,pseudoElement:0}),xt=it(Nt),zt=oe({},qt,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),vn=it(zt),At=oe({},qt,{data:0}),Er=it(At),We={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function It(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=wt[a])?!!c[a]:!1}function wn(){return It}var Hn=oe({},Zt,{key:function(a){if(a.key){var c=We[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=re(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?bt[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(a){return a.type==="keypress"?re(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?re(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Bn=it(Hn),Un=oe({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ya=it(Un),ci=oe({},Zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn}),mx=it(ci),gx=oe({},qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Us=it(gx),yx=oe({},pt,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Lm=it(yx),Bf=[9,13,27,32],bx=l&&"CompositionEvent"in window,zf=null;l&&"documentMode"in document&&(zf=document.documentMode);var JM=l&&"TextEvent"in window&&!zf,Z1=l&&(!bx||zf&&8<zf&&11>=zf),Y1=" ",X1=!1;function eI(a,c){switch(a){case"keyup":return Bf.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tI(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Cu=!1;function ZM(a,c){switch(a){case"compositionend":return tI(c);case"keypress":return c.which!==32?null:(X1=!0,Y1);case"textInput":return a=c.data,a===Y1&&X1?null:a;default:return null}}function YM(a,c){if(Cu)return a==="compositionend"||!bx&&eI(a,c)?(a=Q(),pe=ae=st=null,Cu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Z1&&c.locale!=="ko"?null:c.data;default:return null}}var XM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nI(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!XM[a.type]:c==="textarea"}function rI(a,c,m,w){dn(w),c=Wm(c,"onChange"),0<c.length&&(m=new Wt("onChange","change",null,m,w),a.push({event:m,listeners:c}))}var Wf=null,Vf=null;function e$(a){wI(a,0)}function Mm(a){var c=qu(a);if(Ve(c))return a}function t$(a,c){if(a==="change")return c}var iI=!1;if(l){var vx;if(l){var xx="oninput"in document;if(!xx){var sI=document.createElement("div");sI.setAttribute("oninput","return;"),xx=typeof sI.oninput=="function"}vx=xx}else vx=!1;iI=vx&&(!document.documentMode||9<document.documentMode)}function oI(){Wf&&(Wf.detachEvent("onpropertychange",aI),Vf=Wf=null)}function aI(a){if(a.propertyName==="value"&&Mm(Vf)){var c=[];rI(c,Vf,a,pa(a)),ha(e$,c)}}function n$(a,c,m){a==="focusin"?(oI(),Wf=c,Vf=m,Wf.attachEvent("onpropertychange",aI)):a==="focusout"&&oI()}function r$(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Mm(Vf)}function i$(a,c){if(a==="click")return Mm(c)}function s$(a,c){if(a==="input"||a==="change")return Mm(c)}function o$(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var ho=typeof Object.is=="function"?Object.is:o$;function Uf(a,c){if(ho(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var m=Object.keys(a),w=Object.keys(c);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var k=m[w];if(!u.call(c,k)||!ho(a[k],c[k]))return!1}return!0}function lI(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function cI(a,c){var m=lI(a);a=0;for(var w;m;){if(m.nodeType===3){if(w=a+m.textContent.length,a<=c&&w>=c)return{node:m,offset:c-a};a=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=lI(m)}}function uI(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?uI(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function dI(){for(var a=window,c=ct();c instanceof a.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)a=c.contentWindow;else break;c=ct(a.document)}return c}function wx(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function a$(a){var c=dI(),m=a.focusedElem,w=a.selectionRange;if(c!==m&&m&&m.ownerDocument&&uI(m.ownerDocument.documentElement,m)){if(w!==null&&wx(m)){if(c=w.start,a=w.end,a===void 0&&(a=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(a,m.value.length);else if(a=(c=m.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var k=m.textContent.length,A=Math.min(w.start,k);w=w.end===void 0?A:Math.min(w.end,k),!a.extend&&A>w&&(k=w,w=A,A=k),k=cI(m,A);var Y=cI(m,w);k&&Y&&(a.rangeCount!==1||a.anchorNode!==k.node||a.anchorOffset!==k.offset||a.focusNode!==Y.node||a.focusOffset!==Y.offset)&&(c=c.createRange(),c.setStart(k.node,k.offset),a.removeAllRanges(),A>w?(a.addRange(c),a.extend(Y.node,Y.offset)):(c.setEnd(Y.node,Y.offset),a.addRange(c)))}}for(c=[],a=m;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)a=c[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var l$=l&&"documentMode"in document&&11>=document.documentMode,Tu=null,_x=null,Hf=null,Sx=!1;function fI(a,c,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Sx||Tu==null||Tu!==ct(w)||(w=Tu,"selectionStart"in w&&wx(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Hf&&Uf(Hf,w)||(Hf=w,w=Wm(_x,"onSelect"),0<w.length&&(c=new Wt("onSelect","select",null,c,m),a.push({event:c,listeners:w}),c.target=Tu)))}function $m(a,c){var m={};return m[a.toLowerCase()]=c.toLowerCase(),m["Webkit"+a]="webkit"+c,m["Moz"+a]="moz"+c,m}var Ru={animationend:$m("Animation","AnimationEnd"),animationiteration:$m("Animation","AnimationIteration"),animationstart:$m("Animation","AnimationStart"),transitionend:$m("Transition","TransitionEnd")},Ex={},pI={};l&&(pI=document.createElement("div").style,"AnimationEvent"in window||(delete Ru.animationend.animation,delete Ru.animationiteration.animation,delete Ru.animationstart.animation),"TransitionEvent"in window||delete Ru.transitionend.transition);function Bm(a){if(Ex[a])return Ex[a];if(!Ru[a])return a;var c=Ru[a],m;for(m in c)if(c.hasOwnProperty(m)&&m in pI)return Ex[a]=c[m];return a}var hI=Bm("animationend"),mI=Bm("animationiteration"),gI=Bm("animationstart"),yI=Bm("transitionend"),bI=new Map,vI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(a,c){bI.set(a,c),s(c,[a])}for(var Nx=0;Nx<vI.length;Nx++){var Ix=vI[Nx],c$=Ix.toLowerCase(),u$=Ix[0].toUpperCase()+Ix.slice(1);rl(c$,"on"+u$)}rl(hI,"onAnimationEnd"),rl(mI,"onAnimationIteration"),rl(gI,"onAnimationStart"),rl("dblclick","onDoubleClick"),rl("focusin","onFocus"),rl("focusout","onBlur"),rl(yI,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kf));function xI(a,c,m){var w=a.type||"unknown-event";a.currentTarget=m,xu(w,c,void 0,a),a.currentTarget=null}function wI(a,c){c=(c&4)!==0;for(var m=0;m<a.length;m++){var w=a[m],k=w.event;w=w.listeners;e:{var A=void 0;if(c)for(var Y=w.length-1;0<=Y;Y--){var ge=w[Y],Se=ge.instance,He=ge.currentTarget;if(ge=ge.listener,Se!==A&&k.isPropagationStopped())break e;xI(k,ge,He),A=Se}else for(Y=0;Y<w.length;Y++){if(ge=w[Y],Se=ge.instance,He=ge.currentTarget,ge=ge.listener,Se!==A&&k.isPropagationStopped())break e;xI(k,ge,He),A=Se}}}if(Ya)throw a=Ws,Ya=!1,Ws=null,a}function cr(a,c){var m=c[Ax];m===void 0&&(m=c[Ax]=new Set);var w=a+"__bubble";m.has(w)||(_I(c,a,2,!1),m.add(w))}function kx(a,c,m){var w=0;c&&(w|=4),_I(m,a,w,c)}var zm="_reactListening"+Math.random().toString(36).slice(2);function Qf(a){if(!a[zm]){a[zm]=!0,r.forEach(function(m){m!=="selectionchange"&&(d$.has(m)||kx(m,!1,a),kx(m,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[zm]||(c[zm]=!0,kx("selectionchange",!1,c))}}function _I(a,c,m,w){switch(Ee(c)){case 1:var k=Re;break;case 4:k=Qe;break;default:k=St}m=k.bind(null,c,m,a),k=void 0,!dc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),w?k!==void 0?a.addEventListener(c,m,{capture:!0,passive:k}):a.addEventListener(c,m,!0):k!==void 0?a.addEventListener(c,m,{passive:k}):a.addEventListener(c,m,!1)}function Cx(a,c,m,w,k){var A=w;if(!(c&1)&&!(c&2)&&w!==null)e:for(;;){if(w===null)return;var Y=w.tag;if(Y===3||Y===4){var ge=w.stateNode.containerInfo;if(ge===k||ge.nodeType===8&&ge.parentNode===k)break;if(Y===4)for(Y=w.return;Y!==null;){var Se=Y.tag;if((Se===3||Se===4)&&(Se=Y.stateNode.containerInfo,Se===k||Se.nodeType===8&&Se.parentNode===k))return;Y=Y.return}for(;ge!==null;){if(Y=yc(ge),Y===null)return;if(Se=Y.tag,Se===5||Se===6){w=A=Y;continue e}ge=ge.parentNode}}w=w.return}ha(function(){var He=A,ht=pa(m),gt=[];e:{var ft=bI.get(a);if(ft!==void 0){var Pt=Wt,Bt=a;switch(a){case"keypress":if(re(m)===0)break e;case"keydown":case"keyup":Pt=Bn;break;case"focusin":Bt="focus",Pt=dt;break;case"focusout":Bt="blur",Pt=dt;break;case"beforeblur":case"afterblur":Pt=dt;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pt=Mt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pt=qe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pt=mx;break;case hI:case mI:case gI:Pt=xt;break;case yI:Pt=Us;break;case"scroll":Pt=lt;break;case"wheel":Pt=Lm;break;case"copy":case"cut":case"paste":Pt=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pt=ya}var Vt=(c&4)!==0,Mr=!Vt&&a==="scroll",Fe=Vt?ft!==null?ft+"Capture":null:ft;Vt=[];for(var Ce=He,$e;Ce!==null;){$e=Ce;var vt=$e.stateNode;if($e.tag===5&&vt!==null&&($e=vt,Fe!==null&&(vt=Xi(Ce,Fe),vt!=null&&Vt.push(Gf(Ce,vt,$e)))),Mr)break;Ce=Ce.return}0<Vt.length&&(ft=new Pt(ft,Bt,null,m,ht),gt.push({event:ft,listeners:Vt}))}}if(!(c&7)){e:{if(ft=a==="mouseover"||a==="pointerover",Pt=a==="mouseout"||a==="pointerout",ft&&m!==po&&(Bt=m.relatedTarget||m.fromElement)&&(yc(Bt)||Bt[ba]))break e;if((Pt||ft)&&(ft=ht.window===ht?ht:(ft=ht.ownerDocument)?ft.defaultView||ft.parentWindow:window,Pt?(Bt=m.relatedTarget||m.toElement,Pt=He,Bt=Bt?yc(Bt):null,Bt!==null&&(Mr=Vs(Bt),Bt!==Mr||Bt.tag!==5&&Bt.tag!==6)&&(Bt=null)):(Pt=null,Bt=He),Pt!==Bt)){if(Vt=Mt,vt="onMouseLeave",Fe="onMouseEnter",Ce="mouse",(a==="pointerout"||a==="pointerover")&&(Vt=ya,vt="onPointerLeave",Fe="onPointerEnter",Ce="pointer"),Mr=Pt==null?ft:qu(Pt),$e=Bt==null?ft:qu(Bt),ft=new Vt(vt,Ce+"leave",Pt,m,ht),ft.target=Mr,ft.relatedTarget=$e,vt=null,yc(ht)===He&&(Vt=new Vt(Fe,Ce+"enter",Bt,m,ht),Vt.target=$e,Vt.relatedTarget=Mr,vt=Vt),Mr=vt,Pt&&Bt)t:{for(Vt=Pt,Fe=Bt,Ce=0,$e=Vt;$e;$e=ju($e))Ce++;for($e=0,vt=Fe;vt;vt=ju(vt))$e++;for(;0<Ce-$e;)Vt=ju(Vt),Ce--;for(;0<$e-Ce;)Fe=ju(Fe),$e--;for(;Ce--;){if(Vt===Fe||Fe!==null&&Vt===Fe.alternate)break t;Vt=ju(Vt),Fe=ju(Fe)}Vt=null}else Vt=null;Pt!==null&&SI(gt,ft,Pt,Vt,!1),Bt!==null&&Mr!==null&&SI(gt,Mr,Bt,Vt,!0)}}e:{if(ft=He?qu(He):window,Pt=ft.nodeName&&ft.nodeName.toLowerCase(),Pt==="select"||Pt==="input"&&ft.type==="file")var Ht=t$;else if(nI(ft))if(iI)Ht=s$;else{Ht=r$;var nn=n$}else(Pt=ft.nodeName)&&Pt.toLowerCase()==="input"&&(ft.type==="checkbox"||ft.type==="radio")&&(Ht=i$);if(Ht&&(Ht=Ht(a,He))){rI(gt,Ht,m,ht);break e}nn&&nn(a,ft,He),a==="focusout"&&(nn=ft._wrapperState)&&nn.controlled&&ft.type==="number"&&be(ft,"number",ft.value)}switch(nn=He?qu(He):window,a){case"focusin":(nI(nn)||nn.contentEditable==="true")&&(Tu=nn,_x=He,Hf=null);break;case"focusout":Hf=_x=Tu=null;break;case"mousedown":Sx=!0;break;case"contextmenu":case"mouseup":case"dragend":Sx=!1,fI(gt,m,ht);break;case"selectionchange":if(l$)break;case"keydown":case"keyup":fI(gt,m,ht)}var rn;if(bx)e:{switch(a){case"compositionstart":var un="onCompositionStart";break e;case"compositionend":un="onCompositionEnd";break e;case"compositionupdate":un="onCompositionUpdate";break e}un=void 0}else Cu?eI(a,m)&&(un="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(un="onCompositionStart");un&&(Z1&&m.locale!=="ko"&&(Cu||un!=="onCompositionStart"?un==="onCompositionEnd"&&Cu&&(rn=Q()):(st=ht,ae="value"in st?st.value:st.textContent,Cu=!0)),nn=Wm(He,un),0<nn.length&&(un=new Er(un,a,null,m,ht),gt.push({event:un,listeners:nn}),rn?un.data=rn:(rn=tI(m),rn!==null&&(un.data=rn)))),(rn=JM?ZM(a,m):YM(a,m))&&(He=Wm(He,"onBeforeInput"),0<He.length&&(ht=new Er("onBeforeInput","beforeinput",null,m,ht),gt.push({event:ht,listeners:He}),ht.data=rn))}wI(gt,c)})}function Gf(a,c,m){return{instance:a,listener:c,currentTarget:m}}function Wm(a,c){for(var m=c+"Capture",w=[];a!==null;){var k=a,A=k.stateNode;k.tag===5&&A!==null&&(k=A,A=Xi(a,m),A!=null&&w.unshift(Gf(a,A,k)),A=Xi(a,c),A!=null&&w.push(Gf(a,A,k))),a=a.return}return w}function ju(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function SI(a,c,m,w,k){for(var A=c._reactName,Y=[];m!==null&&m!==w;){var ge=m,Se=ge.alternate,He=ge.stateNode;if(Se!==null&&Se===w)break;ge.tag===5&&He!==null&&(ge=He,k?(Se=Xi(m,A),Se!=null&&Y.unshift(Gf(m,Se,ge))):k||(Se=Xi(m,A),Se!=null&&Y.push(Gf(m,Se,ge)))),m=m.return}Y.length!==0&&a.push({event:c,listeners:Y})}var f$=/\r\n?/g,p$=/\u0000|\uFFFD/g;function EI(a){return(typeof a=="string"?a:""+a).replace(f$,`
`).replace(p$,"")}function Vm(a,c,m){if(c=EI(c),EI(a)!==c&&m)throw Error(n(425))}function Um(){}var Tx=null,Rx=null;function jx(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ox=typeof setTimeout=="function"?setTimeout:void 0,h$=typeof clearTimeout=="function"?clearTimeout:void 0,NI=typeof Promise=="function"?Promise:void 0,m$=typeof queueMicrotask=="function"?queueMicrotask:typeof NI<"u"?function(a){return NI.resolve(null).then(a).catch(g$)}:Ox;function g$(a){setTimeout(function(){throw a})}function qx(a,c){var m=c,w=0;do{var k=m.nextSibling;if(a.removeChild(m),k&&k.nodeType===8)if(m=k.data,m==="/$"){if(w===0){a.removeChild(k),Te(c);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=k}while(m);Te(c)}function il(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function II(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return a;c--}else m==="/$"&&c++}a=a.previousSibling}return null}var Ou=Math.random().toString(36).slice(2),Vo="__reactFiber$"+Ou,Jf="__reactProps$"+Ou,ba="__reactContainer$"+Ou,Ax="__reactEvents$"+Ou,y$="__reactListeners$"+Ou,b$="__reactHandles$"+Ou;function yc(a){var c=a[Vo];if(c)return c;for(var m=a.parentNode;m;){if(c=m[ba]||m[Vo]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(a=II(a);a!==null;){if(m=a[Vo])return m;a=II(a)}return c}a=m,m=a.parentNode}return null}function Zf(a){return a=a[Vo]||a[ba],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function qu(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function Hm(a){return a[Jf]||null}var Px=[],Au=-1;function sl(a){return{current:a}}function ur(a){0>Au||(a.current=Px[Au],Px[Au]=null,Au--)}function nr(a,c){Au++,Px[Au]=a.current,a.current=c}var ol={},wi=sl(ol),ts=sl(!1),bc=ol;function Pu(a,c){var m=a.type.contextTypes;if(!m)return ol;var w=a.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var k={},A;for(A in m)k[A]=c[A];return w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=k),k}function ns(a){return a=a.childContextTypes,a!=null}function Km(){ur(ts),ur(wi)}function kI(a,c,m){if(wi.current!==ol)throw Error(n(168));nr(wi,c),nr(ts,m)}function CI(a,c,m){var w=a.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var k in w)if(!(k in c))throw Error(n(108,ze(a)||"Unknown",k));return oe({},m,w)}function Qm(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ol,bc=wi.current,nr(wi,a),nr(ts,ts.current),!0}function TI(a,c,m){var w=a.stateNode;if(!w)throw Error(n(169));m?(a=CI(a,c,bc),w.__reactInternalMemoizedMergedChildContext=a,ur(ts),ur(wi),nr(wi,a)):ur(ts),nr(ts,m)}var va=null,Gm=!1,Fx=!1;function RI(a){va===null?va=[a]:va.push(a)}function v$(a){Gm=!0,RI(a)}function al(){if(!Fx&&va!==null){Fx=!0;var a=0,c=Ln;try{var m=va;for(Ln=1;a<m.length;a++){var w=m[a];do w=w(!0);while(w!==null)}va=null,Gm=!1}catch(k){throw va!==null&&(va=va.slice(a+1)),Nu(pc,al),k}finally{Ln=c,Fx=!1}}return null}var Fu=[],Du=0,Jm=null,Zm=0,Hs=[],Ks=0,vc=null,xa=1,wa="";function xc(a,c){Fu[Du++]=Zm,Fu[Du++]=Jm,Jm=a,Zm=c}function jI(a,c,m){Hs[Ks++]=xa,Hs[Ks++]=wa,Hs[Ks++]=vc,vc=a;var w=xa;a=wa;var k=32-xi(w)-1;w&=~(1<<k),m+=1;var A=32-xi(c)+k;if(30<A){var Y=k-k%5;A=(w&(1<<Y)-1).toString(32),w>>=Y,k-=Y,xa=1<<32-xi(c)+k|m<<k|w,wa=A+a}else xa=1<<A|m<<k|w,wa=a}function Dx(a){a.return!==null&&(xc(a,1),jI(a,1,0))}function Lx(a){for(;a===Jm;)Jm=Fu[--Du],Fu[Du]=null,Zm=Fu[--Du],Fu[Du]=null;for(;a===vc;)vc=Hs[--Ks],Hs[Ks]=null,wa=Hs[--Ks],Hs[Ks]=null,xa=Hs[--Ks],Hs[Ks]=null}var vs=null,xs=null,gr=!1,mo=null;function OI(a,c){var m=Zs(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=a,c=a.deletions,c===null?(a.deletions=[m],a.flags|=16):c.push(m)}function qI(a,c){switch(a.tag){case 5:var m=a.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,vs=a,xs=il(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,vs=a,xs=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=vc!==null?{id:xa,overflow:wa}:null,a.memoizedState={dehydrated:c,treeContext:m,retryLane:0x40000000},m=Zs(18,null,null,0),m.stateNode=c,m.return=a,a.child=m,vs=a,xs=null,!0):!1;default:return!1}}function Mx(a){return(a.mode&1)!==0&&(a.flags&128)===0}function $x(a){if(gr){var c=xs;if(c){var m=c;if(!qI(a,c)){if(Mx(a))throw Error(n(418));c=il(m.nextSibling);var w=vs;c&&qI(a,c)?OI(w,m):(a.flags=a.flags&-4097|2,gr=!1,vs=a)}}else{if(Mx(a))throw Error(n(418));a.flags=a.flags&-4097|2,gr=!1,vs=a}}}function AI(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;vs=a}function Ym(a){if(a!==vs)return!1;if(!gr)return AI(a),gr=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!jx(a.type,a.memoizedProps)),c&&(c=xs)){if(Mx(a))throw PI(),Error(n(418));for(;c;)OI(a,c),c=il(c.nextSibling)}if(AI(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(c===0){xs=il(a.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}a=a.nextSibling}xs=null}}else xs=vs?il(a.stateNode.nextSibling):null;return!0}function PI(){for(var a=xs;a;)a=il(a.nextSibling)}function Lu(){xs=vs=null,gr=!1}function Bx(a){mo===null?mo=[a]:mo.push(a)}var x$=q.ReactCurrentBatchConfig;function Yf(a,c,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var w=m.stateNode}if(!w)throw Error(n(147,a));var k=w,A=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===A?c.ref:(c=function(Y){var ge=k.refs;Y===null?delete ge[A]:ge[A]=Y},c._stringRef=A,c)}if(typeof a!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,a))}return a}function Xm(a,c){throw a=Object.prototype.toString.call(c),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function FI(a){var c=a._init;return c(a._payload)}function DI(a){function c(Fe,Ce){if(a){var $e=Fe.deletions;$e===null?(Fe.deletions=[Ce],Fe.flags|=16):$e.push(Ce)}}function m(Fe,Ce){if(!a)return null;for(;Ce!==null;)c(Fe,Ce),Ce=Ce.sibling;return null}function w(Fe,Ce){for(Fe=new Map;Ce!==null;)Ce.key!==null?Fe.set(Ce.key,Ce):Fe.set(Ce.index,Ce),Ce=Ce.sibling;return Fe}function k(Fe,Ce){return Fe=ml(Fe,Ce),Fe.index=0,Fe.sibling=null,Fe}function A(Fe,Ce,$e){return Fe.index=$e,a?($e=Fe.alternate,$e!==null?($e=$e.index,$e<Ce?(Fe.flags|=2,Ce):$e):(Fe.flags|=2,Ce)):(Fe.flags|=1048576,Ce)}function Y(Fe){return a&&Fe.alternate===null&&(Fe.flags|=2),Fe}function ge(Fe,Ce,$e,vt){return Ce===null||Ce.tag!==6?(Ce=Ow($e,Fe.mode,vt),Ce.return=Fe,Ce):(Ce=k(Ce,$e),Ce.return=Fe,Ce)}function Se(Fe,Ce,$e,vt){var Ht=$e.type;return Ht===W?ht(Fe,Ce,$e.props.children,vt,$e.key):Ce!==null&&(Ce.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Z&&FI(Ht)===Ce.type)?(vt=k(Ce,$e.props),vt.ref=Yf(Fe,Ce,$e),vt.return=Fe,vt):(vt=Sg($e.type,$e.key,$e.props,null,Fe.mode,vt),vt.ref=Yf(Fe,Ce,$e),vt.return=Fe,vt)}function He(Fe,Ce,$e,vt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==$e.containerInfo||Ce.stateNode.implementation!==$e.implementation?(Ce=qw($e,Fe.mode,vt),Ce.return=Fe,Ce):(Ce=k(Ce,$e.children||[]),Ce.return=Fe,Ce)}function ht(Fe,Ce,$e,vt,Ht){return Ce===null||Ce.tag!==7?(Ce=Cc($e,Fe.mode,vt,Ht),Ce.return=Fe,Ce):(Ce=k(Ce,$e),Ce.return=Fe,Ce)}function gt(Fe,Ce,$e){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=Ow(""+Ce,Fe.mode,$e),Ce.return=Fe,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case L:return $e=Sg(Ce.type,Ce.key,Ce.props,null,Fe.mode,$e),$e.ref=Yf(Fe,null,Ce),$e.return=Fe,$e;case M:return Ce=qw(Ce,Fe.mode,$e),Ce.return=Fe,Ce;case Z:var vt=Ce._init;return gt(Fe,vt(Ce._payload),$e)}if(Ie(Ce)||ne(Ce))return Ce=Cc(Ce,Fe.mode,$e,null),Ce.return=Fe,Ce;Xm(Fe,Ce)}return null}function ft(Fe,Ce,$e,vt){var Ht=Ce!==null?Ce.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Ht!==null?null:ge(Fe,Ce,""+$e,vt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case L:return $e.key===Ht?Se(Fe,Ce,$e,vt):null;case M:return $e.key===Ht?He(Fe,Ce,$e,vt):null;case Z:return Ht=$e._init,ft(Fe,Ce,Ht($e._payload),vt)}if(Ie($e)||ne($e))return Ht!==null?null:ht(Fe,Ce,$e,vt,null);Xm(Fe,$e)}return null}function Pt(Fe,Ce,$e,vt,Ht){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Fe=Fe.get($e)||null,ge(Ce,Fe,""+vt,Ht);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case L:return Fe=Fe.get(vt.key===null?$e:vt.key)||null,Se(Ce,Fe,vt,Ht);case M:return Fe=Fe.get(vt.key===null?$e:vt.key)||null,He(Ce,Fe,vt,Ht);case Z:var nn=vt._init;return Pt(Fe,Ce,$e,nn(vt._payload),Ht)}if(Ie(vt)||ne(vt))return Fe=Fe.get($e)||null,ht(Ce,Fe,vt,Ht,null);Xm(Ce,vt)}return null}function Bt(Fe,Ce,$e,vt){for(var Ht=null,nn=null,rn=Ce,un=Ce=0,ai=null;rn!==null&&un<$e.length;un++){rn.index>un?(ai=rn,rn=null):ai=rn.sibling;var Fn=ft(Fe,rn,$e[un],vt);if(Fn===null){rn===null&&(rn=ai);break}a&&rn&&Fn.alternate===null&&c(Fe,rn),Ce=A(Fn,Ce,un),nn===null?Ht=Fn:nn.sibling=Fn,nn=Fn,rn=ai}if(un===$e.length)return m(Fe,rn),gr&&xc(Fe,un),Ht;if(rn===null){for(;un<$e.length;un++)rn=gt(Fe,$e[un],vt),rn!==null&&(Ce=A(rn,Ce,un),nn===null?Ht=rn:nn.sibling=rn,nn=rn);return gr&&xc(Fe,un),Ht}for(rn=w(Fe,rn);un<$e.length;un++)ai=Pt(rn,Fe,un,$e[un],vt),ai!==null&&(a&&ai.alternate!==null&&rn.delete(ai.key===null?un:ai.key),Ce=A(ai,Ce,un),nn===null?Ht=ai:nn.sibling=ai,nn=ai);return a&&rn.forEach(function(gl){return c(Fe,gl)}),gr&&xc(Fe,un),Ht}function Vt(Fe,Ce,$e,vt){var Ht=ne($e);if(typeof Ht!="function")throw Error(n(150));if($e=Ht.call($e),$e==null)throw Error(n(151));for(var nn=Ht=null,rn=Ce,un=Ce=0,ai=null,Fn=$e.next();rn!==null&&!Fn.done;un++,Fn=$e.next()){rn.index>un?(ai=rn,rn=null):ai=rn.sibling;var gl=ft(Fe,rn,Fn.value,vt);if(gl===null){rn===null&&(rn=ai);break}a&&rn&&gl.alternate===null&&c(Fe,rn),Ce=A(gl,Ce,un),nn===null?Ht=gl:nn.sibling=gl,nn=gl,rn=ai}if(Fn.done)return m(Fe,rn),gr&&xc(Fe,un),Ht;if(rn===null){for(;!Fn.done;un++,Fn=$e.next())Fn=gt(Fe,Fn.value,vt),Fn!==null&&(Ce=A(Fn,Ce,un),nn===null?Ht=Fn:nn.sibling=Fn,nn=Fn);return gr&&xc(Fe,un),Ht}for(rn=w(Fe,rn);!Fn.done;un++,Fn=$e.next())Fn=Pt(rn,Fe,un,Fn.value,vt),Fn!==null&&(a&&Fn.alternate!==null&&rn.delete(Fn.key===null?un:Fn.key),Ce=A(Fn,Ce,un),nn===null?Ht=Fn:nn.sibling=Fn,nn=Fn);return a&&rn.forEach(function(Y$){return c(Fe,Y$)}),gr&&xc(Fe,un),Ht}function Mr(Fe,Ce,$e,vt){if(typeof $e=="object"&&$e!==null&&$e.type===W&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case L:e:{for(var Ht=$e.key,nn=Ce;nn!==null;){if(nn.key===Ht){if(Ht=$e.type,Ht===W){if(nn.tag===7){m(Fe,nn.sibling),Ce=k(nn,$e.props.children),Ce.return=Fe,Fe=Ce;break e}}else if(nn.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Z&&FI(Ht)===nn.type){m(Fe,nn.sibling),Ce=k(nn,$e.props),Ce.ref=Yf(Fe,nn,$e),Ce.return=Fe,Fe=Ce;break e}m(Fe,nn);break}else c(Fe,nn);nn=nn.sibling}$e.type===W?(Ce=Cc($e.props.children,Fe.mode,vt,$e.key),Ce.return=Fe,Fe=Ce):(vt=Sg($e.type,$e.key,$e.props,null,Fe.mode,vt),vt.ref=Yf(Fe,Ce,$e),vt.return=Fe,Fe=vt)}return Y(Fe);case M:e:{for(nn=$e.key;Ce!==null;){if(Ce.key===nn)if(Ce.tag===4&&Ce.stateNode.containerInfo===$e.containerInfo&&Ce.stateNode.implementation===$e.implementation){m(Fe,Ce.sibling),Ce=k(Ce,$e.children||[]),Ce.return=Fe,Fe=Ce;break e}else{m(Fe,Ce);break}else c(Fe,Ce);Ce=Ce.sibling}Ce=qw($e,Fe.mode,vt),Ce.return=Fe,Fe=Ce}return Y(Fe);case Z:return nn=$e._init,Mr(Fe,Ce,nn($e._payload),vt)}if(Ie($e))return Bt(Fe,Ce,$e,vt);if(ne($e))return Vt(Fe,Ce,$e,vt);Xm(Fe,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,Ce!==null&&Ce.tag===6?(m(Fe,Ce.sibling),Ce=k(Ce,$e),Ce.return=Fe,Fe=Ce):(m(Fe,Ce),Ce=Ow($e,Fe.mode,vt),Ce.return=Fe,Fe=Ce),Y(Fe)):m(Fe,Ce)}return Mr}var Mu=DI(!0),LI=DI(!1),eg=sl(null),tg=null,$u=null,zx=null;function Wx(){zx=$u=tg=null}function Vx(a){var c=eg.current;ur(eg),a._currentValue=c}function Ux(a,c,m){for(;a!==null;){var w=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),a===m)break;a=a.return}}function Bu(a,c){tg=a,zx=$u=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&c&&(rs=!0),a.firstContext=null)}function Qs(a){var c=a._currentValue;if(zx!==a)if(a={context:a,memoizedValue:c,next:null},$u===null){if(tg===null)throw Error(n(308));$u=a,tg.dependencies={lanes:0,firstContext:a}}else $u=$u.next=a;return c}var wc=null;function Hx(a){wc===null?wc=[a]:wc.push(a)}function MI(a,c,m,w){var k=c.interleaved;return k===null?(m.next=m,Hx(c)):(m.next=k.next,k.next=m),c.interleaved=m,_a(a,w)}function _a(a,c){a.lanes|=c;var m=a.alternate;for(m!==null&&(m.lanes|=c),m=a,a=a.return;a!==null;)a.childLanes|=c,m=a.alternate,m!==null&&(m.childLanes|=c),m=a,a=a.return;return m.tag===3?m.stateNode:null}var ll=!1;function Kx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $I(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Sa(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function cl(a,c,m){var w=a.updateQueue;if(w===null)return null;if(w=w.shared,qn&2){var k=w.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),w.pending=c,_a(a,m)}return k=w.interleaved,k===null?(c.next=c,Hx(w)):(c.next=k.next,k.next=c),w.interleaved=c,_a(a,m)}function ng(a,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var w=c.lanes;w&=a.pendingLanes,m|=w,c.lanes=m,Df(a,m)}}function BI(a,c){var m=a.updateQueue,w=a.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var k=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var Y={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};A===null?k=A=Y:A=A.next=Y,m=m.next}while(m!==null);A===null?k=A=c:A=A.next=c}else k=A=c;m={baseState:w.baseState,firstBaseUpdate:k,lastBaseUpdate:A,shared:w.shared,effects:w.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=c:a.next=c,m.lastBaseUpdate=c}function rg(a,c,m,w){var k=a.updateQueue;ll=!1;var A=k.firstBaseUpdate,Y=k.lastBaseUpdate,ge=k.shared.pending;if(ge!==null){k.shared.pending=null;var Se=ge,He=Se.next;Se.next=null,Y===null?A=He:Y.next=He,Y=Se;var ht=a.alternate;ht!==null&&(ht=ht.updateQueue,ge=ht.lastBaseUpdate,ge!==Y&&(ge===null?ht.firstBaseUpdate=He:ge.next=He,ht.lastBaseUpdate=Se))}if(A!==null){var gt=k.baseState;Y=0,ht=He=Se=null,ge=A;do{var ft=ge.lane,Pt=ge.eventTime;if((w&ft)===ft){ht!==null&&(ht=ht.next={eventTime:Pt,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var Bt=a,Vt=ge;switch(ft=c,Pt=m,Vt.tag){case 1:if(Bt=Vt.payload,typeof Bt=="function"){gt=Bt.call(Pt,gt,ft);break e}gt=Bt;break e;case 3:Bt.flags=Bt.flags&-65537|128;case 0:if(Bt=Vt.payload,ft=typeof Bt=="function"?Bt.call(Pt,gt,ft):Bt,ft==null)break e;gt=oe({},gt,ft);break e;case 2:ll=!0}}ge.callback!==null&&ge.lane!==0&&(a.flags|=64,ft=k.effects,ft===null?k.effects=[ge]:ft.push(ge))}else Pt={eventTime:Pt,lane:ft,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},ht===null?(He=ht=Pt,Se=gt):ht=ht.next=Pt,Y|=ft;if(ge=ge.next,ge===null){if(ge=k.shared.pending,ge===null)break;ft=ge,ge=ft.next,ft.next=null,k.lastBaseUpdate=ft,k.shared.pending=null}}while(!0);if(ht===null&&(Se=gt),k.baseState=Se,k.firstBaseUpdate=He,k.lastBaseUpdate=ht,c=k.shared.interleaved,c!==null){k=c;do Y|=k.lane,k=k.next;while(k!==c)}else A===null&&(k.shared.lanes=0);Ec|=Y,a.lanes=Y,a.memoizedState=gt}}function zI(a,c,m){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var w=a[c],k=w.callback;if(k!==null){if(w.callback=null,w=m,typeof k!="function")throw Error(n(191,k));k.call(w)}}}var Xf={},Uo=sl(Xf),ep=sl(Xf),tp=sl(Xf);function _c(a){if(a===Xf)throw Error(n(174));return a}function Qx(a,c){switch(nr(tp,c),nr(ep,a),nr(Uo,Xf),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Gt(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Gt(c,a)}ur(Uo),nr(Uo,c)}function zu(){ur(Uo),ur(ep),ur(tp)}function WI(a){_c(tp.current);var c=_c(Uo.current),m=Gt(c,a.type);c!==m&&(nr(ep,a),nr(Uo,m))}function Gx(a){ep.current===a&&(ur(Uo),ur(ep))}var Nr=sl(0);function ig(a){for(var c=a;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Jx=[];function Zx(){for(var a=0;a<Jx.length;a++)Jx[a]._workInProgressVersionPrimary=null;Jx.length=0}var sg=q.ReactCurrentDispatcher,Yx=q.ReactCurrentBatchConfig,Sc=0,Ir=null,ti=null,si=null,og=!1,np=!1,rp=0,w$=0;function _i(){throw Error(n(321))}function Xx(a,c){if(c===null)return!1;for(var m=0;m<c.length&&m<a.length;m++)if(!ho(a[m],c[m]))return!1;return!0}function ew(a,c,m,w,k,A){if(Sc=A,Ir=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,sg.current=a===null||a.memoizedState===null?N$:I$,a=m(w,k),np){A=0;do{if(np=!1,rp=0,25<=A)throw Error(n(301));A+=1,si=ti=null,c.updateQueue=null,sg.current=k$,a=m(w,k)}while(np)}if(sg.current=cg,c=ti!==null&&ti.next!==null,Sc=0,si=ti=Ir=null,og=!1,c)throw Error(n(300));return a}function tw(){var a=rp!==0;return rp=0,a}function Ho(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?Ir.memoizedState=si=a:si=si.next=a,si}function Gs(){if(ti===null){var a=Ir.alternate;a=a!==null?a.memoizedState:null}else a=ti.next;var c=si===null?Ir.memoizedState:si.next;if(c!==null)si=c,ti=a;else{if(a===null)throw Error(n(310));ti=a,a={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},si===null?Ir.memoizedState=si=a:si=si.next=a}return si}function ip(a,c){return typeof c=="function"?c(a):c}function nw(a){var c=Gs(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=ti,k=w.baseQueue,A=m.pending;if(A!==null){if(k!==null){var Y=k.next;k.next=A.next,A.next=Y}w.baseQueue=k=A,m.pending=null}if(k!==null){A=k.next,w=w.baseState;var ge=Y=null,Se=null,He=A;do{var ht=He.lane;if((Sc&ht)===ht)Se!==null&&(Se=Se.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),w=He.hasEagerState?He.eagerState:a(w,He.action);else{var gt={lane:ht,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Se===null?(ge=Se=gt,Y=w):Se=Se.next=gt,Ir.lanes|=ht,Ec|=ht}He=He.next}while(He!==null&&He!==A);Se===null?Y=w:Se.next=ge,ho(w,c.memoizedState)||(rs=!0),c.memoizedState=w,c.baseState=Y,c.baseQueue=Se,m.lastRenderedState=w}if(a=m.interleaved,a!==null){k=a;do A=k.lane,Ir.lanes|=A,Ec|=A,k=k.next;while(k!==a)}else k===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function rw(a){var c=Gs(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=m.dispatch,k=m.pending,A=c.memoizedState;if(k!==null){m.pending=null;var Y=k=k.next;do A=a(A,Y.action),Y=Y.next;while(Y!==k);ho(A,c.memoizedState)||(rs=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),m.lastRenderedState=A}return[A,w]}function VI(){}function UI(a,c){var m=Ir,w=Gs(),k=c(),A=!ho(w.memoizedState,k);if(A&&(w.memoizedState=k,rs=!0),w=w.queue,iw(QI.bind(null,m,w,a),[a]),w.getSnapshot!==c||A||si!==null&&si.memoizedState.tag&1){if(m.flags|=2048,sp(9,KI.bind(null,m,w,k,c),void 0,null),oi===null)throw Error(n(349));Sc&30||HI(m,c,k)}return k}function HI(a,c,m){a.flags|=16384,a={getSnapshot:c,value:m},c=Ir.updateQueue,c===null?(c={lastEffect:null,stores:null},Ir.updateQueue=c,c.stores=[a]):(m=c.stores,m===null?c.stores=[a]:m.push(a))}function KI(a,c,m,w){c.value=m,c.getSnapshot=w,GI(c)&&JI(a)}function QI(a,c,m){return m(function(){GI(c)&&JI(a)})}function GI(a){var c=a.getSnapshot;a=a.value;try{var m=c();return!ho(a,m)}catch{return!0}}function JI(a){var c=_a(a,1);c!==null&&vo(c,a,1,-1)}function ZI(a){var c=Ho();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ip,lastRenderedState:a},c.queue=a,a=a.dispatch=E$.bind(null,Ir,a),[c.memoizedState,a]}function sp(a,c,m,w){return a={tag:a,create:c,destroy:m,deps:w,next:null},c=Ir.updateQueue,c===null?(c={lastEffect:null,stores:null},Ir.updateQueue=c,c.lastEffect=a.next=a):(m=c.lastEffect,m===null?c.lastEffect=a.next=a:(w=m.next,m.next=a,a.next=w,c.lastEffect=a)),a}function YI(){return Gs().memoizedState}function ag(a,c,m,w){var k=Ho();Ir.flags|=a,k.memoizedState=sp(1|c,m,void 0,w===void 0?null:w)}function lg(a,c,m,w){var k=Gs();w=w===void 0?null:w;var A=void 0;if(ti!==null){var Y=ti.memoizedState;if(A=Y.destroy,w!==null&&Xx(w,Y.deps)){k.memoizedState=sp(c,m,A,w);return}}Ir.flags|=a,k.memoizedState=sp(1|c,m,A,w)}function XI(a,c){return ag(8390656,8,a,c)}function iw(a,c){return lg(2048,8,a,c)}function ek(a,c){return lg(4,2,a,c)}function tk(a,c){return lg(4,4,a,c)}function nk(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function rk(a,c,m){return m=m!=null?m.concat([a]):null,lg(4,4,nk.bind(null,c,a),m)}function sw(){}function ik(a,c){var m=Gs();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&Xx(c,w[1])?w[0]:(m.memoizedState=[a,c],a)}function sk(a,c){var m=Gs();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&Xx(c,w[1])?w[0]:(a=a(),m.memoizedState=[a,c],a)}function ok(a,c,m){return Sc&21?(ho(m,c)||(m=Fm(),Ir.lanes|=m,Ec|=m,a.baseState=!0),c):(a.baseState&&(a.baseState=!1,rs=!0),a.memoizedState=m)}function _$(a,c){var m=Ln;Ln=m!==0&&4>m?m:4,a(!0);var w=Yx.transition;Yx.transition={};try{a(!1),c()}finally{Ln=m,Yx.transition=w}}function ak(){return Gs().memoizedState}function S$(a,c,m){var w=pl(a);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},lk(a))ck(c,m);else if(m=MI(a,c,m,w),m!==null){var k=Li();vo(m,a,w,k),uk(m,c,w)}}function E$(a,c,m){var w=pl(a),k={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(lk(a))ck(c,k);else{var A=a.alternate;if(a.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var Y=c.lastRenderedState,ge=A(Y,m);if(k.hasEagerState=!0,k.eagerState=ge,ho(ge,Y)){var Se=c.interleaved;Se===null?(k.next=k,Hx(c)):(k.next=Se.next,Se.next=k),c.interleaved=k;return}}catch{}finally{}m=MI(a,c,k,w),m!==null&&(k=Li(),vo(m,a,w,k),uk(m,c,w))}}function lk(a){var c=a.alternate;return a===Ir||c!==null&&c===Ir}function ck(a,c){np=og=!0;var m=a.pending;m===null?c.next=c:(c.next=m.next,m.next=c),a.pending=c}function uk(a,c,m){if(m&4194240){var w=c.lanes;w&=a.pendingLanes,m|=w,c.lanes=m,Df(a,m)}}var cg={readContext:Qs,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useInsertionEffect:_i,useLayoutEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useMutableSource:_i,useSyncExternalStore:_i,useId:_i,unstable_isNewReconciler:!1},N$={readContext:Qs,useCallback:function(a,c){return Ho().memoizedState=[a,c===void 0?null:c],a},useContext:Qs,useEffect:XI,useImperativeHandle:function(a,c,m){return m=m!=null?m.concat([a]):null,ag(4194308,4,nk.bind(null,c,a),m)},useLayoutEffect:function(a,c){return ag(4194308,4,a,c)},useInsertionEffect:function(a,c){return ag(4,2,a,c)},useMemo:function(a,c){var m=Ho();return c=c===void 0?null:c,a=a(),m.memoizedState=[a,c],a},useReducer:function(a,c,m){var w=Ho();return c=m!==void 0?m(c):c,w.memoizedState=w.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},w.queue=a,a=a.dispatch=S$.bind(null,Ir,a),[w.memoizedState,a]},useRef:function(a){var c=Ho();return a={current:a},c.memoizedState=a},useState:ZI,useDebugValue:sw,useDeferredValue:function(a){return Ho().memoizedState=a},useTransition:function(){var a=ZI(!1),c=a[0];return a=_$.bind(null,a[1]),Ho().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,m){var w=Ir,k=Ho();if(gr){if(m===void 0)throw Error(n(407));m=m()}else{if(m=c(),oi===null)throw Error(n(349));Sc&30||HI(w,c,m)}k.memoizedState=m;var A={value:m,getSnapshot:c};return k.queue=A,XI(QI.bind(null,w,A,a),[a]),w.flags|=2048,sp(9,KI.bind(null,w,A,m,c),void 0,null),m},useId:function(){var a=Ho(),c=oi.identifierPrefix;if(gr){var m=wa,w=xa;m=(w&~(1<<32-xi(w)-1)).toString(32)+m,c=":"+c+"R"+m,m=rp++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=w$++,c=":"+c+"r"+m.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},I$={readContext:Qs,useCallback:ik,useContext:Qs,useEffect:iw,useImperativeHandle:rk,useInsertionEffect:ek,useLayoutEffect:tk,useMemo:sk,useReducer:nw,useRef:YI,useState:function(){return nw(ip)},useDebugValue:sw,useDeferredValue:function(a){var c=Gs();return ok(c,ti.memoizedState,a)},useTransition:function(){var a=nw(ip)[0],c=Gs().memoizedState;return[a,c]},useMutableSource:VI,useSyncExternalStore:UI,useId:ak,unstable_isNewReconciler:!1},k$={readContext:Qs,useCallback:ik,useContext:Qs,useEffect:iw,useImperativeHandle:rk,useInsertionEffect:ek,useLayoutEffect:tk,useMemo:sk,useReducer:rw,useRef:YI,useState:function(){return rw(ip)},useDebugValue:sw,useDeferredValue:function(a){var c=Gs();return ti===null?c.memoizedState=a:ok(c,ti.memoizedState,a)},useTransition:function(){var a=rw(ip)[0],c=Gs().memoizedState;return[a,c]},useMutableSource:VI,useSyncExternalStore:UI,useId:ak,unstable_isNewReconciler:!1};function go(a,c){if(a&&a.defaultProps){c=oe({},c),a=a.defaultProps;for(var m in a)c[m]===void 0&&(c[m]=a[m]);return c}return c}function ow(a,c,m,w){c=a.memoizedState,m=m(w,c),m=m==null?c:oe({},c,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var ug={isMounted:function(a){return(a=a._reactInternals)?Vs(a)===a:!1},enqueueSetState:function(a,c,m){a=a._reactInternals;var w=Li(),k=pl(a),A=Sa(w,k);A.payload=c,m!=null&&(A.callback=m),c=cl(a,A,k),c!==null&&(vo(c,a,k,w),ng(c,a,k))},enqueueReplaceState:function(a,c,m){a=a._reactInternals;var w=Li(),k=pl(a),A=Sa(w,k);A.tag=1,A.payload=c,m!=null&&(A.callback=m),c=cl(a,A,k),c!==null&&(vo(c,a,k,w),ng(c,a,k))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var m=Li(),w=pl(a),k=Sa(m,w);k.tag=2,c!=null&&(k.callback=c),c=cl(a,k,w),c!==null&&(vo(c,a,w,m),ng(c,a,w))}};function dk(a,c,m,w,k,A,Y){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(w,A,Y):c.prototype&&c.prototype.isPureReactComponent?!Uf(m,w)||!Uf(k,A):!0}function fk(a,c,m){var w=!1,k=ol,A=c.contextType;return typeof A=="object"&&A!==null?A=Qs(A):(k=ns(c)?bc:wi.current,w=c.contextTypes,A=(w=w!=null)?Pu(a,k):ol),c=new c(m,A),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=ug,a.stateNode=c,c._reactInternals=a,w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=k,a.__reactInternalMemoizedMaskedChildContext=A),c}function pk(a,c,m,w){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,w),c.state!==a&&ug.enqueueReplaceState(c,c.state,null)}function aw(a,c,m,w){var k=a.stateNode;k.props=m,k.state=a.memoizedState,k.refs={},Kx(a);var A=c.contextType;typeof A=="object"&&A!==null?k.context=Qs(A):(A=ns(c)?bc:wi.current,k.context=Pu(a,A)),k.state=a.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(ow(a,c,A,m),k.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(c=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),c!==k.state&&ug.enqueueReplaceState(k,k.state,null),rg(a,m,k,w),k.state=a.memoizedState),typeof k.componentDidMount=="function"&&(a.flags|=4194308)}function Wu(a,c){try{var m="",w=c;do m+=we(w),w=w.return;while(w);var k=m}catch(A){k=`
Error generating stack: `+A.message+`
`+A.stack}return{value:a,source:c,stack:k,digest:null}}function lw(a,c,m){return{value:a,source:null,stack:m??null,digest:c??null}}function cw(a,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var C$=typeof WeakMap=="function"?WeakMap:Map;function hk(a,c,m){m=Sa(-1,m),m.tag=3,m.payload={element:null};var w=c.value;return m.callback=function(){yg||(yg=!0,Ew=w),cw(a,c)},m}function mk(a,c,m){m=Sa(-1,m),m.tag=3;var w=a.type.getDerivedStateFromError;if(typeof w=="function"){var k=c.value;m.payload=function(){return w(k)},m.callback=function(){cw(a,c)}}var A=a.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(m.callback=function(){cw(a,c),typeof w!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var Y=c.stack;this.componentDidCatch(c.value,{componentStack:Y!==null?Y:""})}),m}function gk(a,c,m){var w=a.pingCache;if(w===null){w=a.pingCache=new C$;var k=new Set;w.set(c,k)}else k=w.get(c),k===void 0&&(k=new Set,w.set(c,k));k.has(m)||(k.add(m),a=z$.bind(null,a,c,m),c.then(a,a))}function yk(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function bk(a,c,m,w,k){return a.mode&1?(a.flags|=65536,a.lanes=k,a):(a===c?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=Sa(-1,1),c.tag=2,cl(m,c,1))),m.lanes|=1),a)}var T$=q.ReactCurrentOwner,rs=!1;function Di(a,c,m,w){c.child=a===null?LI(c,null,m,w):Mu(c,a.child,m,w)}function vk(a,c,m,w,k){m=m.render;var A=c.ref;return Bu(c,k),w=ew(a,c,m,w,A,k),m=tw(),a!==null&&!rs?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~k,Ea(a,c,k)):(gr&&m&&Dx(c),c.flags|=1,Di(a,c,w,k),c.child)}function xk(a,c,m,w,k){if(a===null){var A=m.type;return typeof A=="function"&&!jw(A)&&A.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=A,wk(a,c,A,w,k)):(a=Sg(m.type,null,w,c,c.mode,k),a.ref=c.ref,a.return=c,c.child=a)}if(A=a.child,!(a.lanes&k)){var Y=A.memoizedProps;if(m=m.compare,m=m!==null?m:Uf,m(Y,w)&&a.ref===c.ref)return Ea(a,c,k)}return c.flags|=1,a=ml(A,w),a.ref=c.ref,a.return=c,c.child=a}function wk(a,c,m,w,k){if(a!==null){var A=a.memoizedProps;if(Uf(A,w)&&a.ref===c.ref)if(rs=!1,c.pendingProps=w=A,(a.lanes&k)!==0)a.flags&131072&&(rs=!0);else return c.lanes=a.lanes,Ea(a,c,k)}return uw(a,c,m,w,k)}function _k(a,c,m){var w=c.pendingProps,k=w.children,A=a!==null?a.memoizedState:null;if(w.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(Uu,ws),ws|=m;else{if(!(m&0x40000000))return a=A!==null?A.baseLanes|m:m,c.lanes=c.childLanes=0x40000000,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,nr(Uu,ws),ws|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=A!==null?A.baseLanes:m,nr(Uu,ws),ws|=w}else A!==null?(w=A.baseLanes|m,c.memoizedState=null):w=m,nr(Uu,ws),ws|=w;return Di(a,c,k,m),c.child}function Sk(a,c){var m=c.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function uw(a,c,m,w,k){var A=ns(m)?bc:wi.current;return A=Pu(c,A),Bu(c,k),m=ew(a,c,m,w,A,k),w=tw(),a!==null&&!rs?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~k,Ea(a,c,k)):(gr&&w&&Dx(c),c.flags|=1,Di(a,c,m,k),c.child)}function Ek(a,c,m,w,k){if(ns(m)){var A=!0;Qm(c)}else A=!1;if(Bu(c,k),c.stateNode===null)fg(a,c),fk(c,m,w),aw(c,m,w,k),w=!0;else if(a===null){var Y=c.stateNode,ge=c.memoizedProps;Y.props=ge;var Se=Y.context,He=m.contextType;typeof He=="object"&&He!==null?He=Qs(He):(He=ns(m)?bc:wi.current,He=Pu(c,He));var ht=m.getDerivedStateFromProps,gt=typeof ht=="function"||typeof Y.getSnapshotBeforeUpdate=="function";gt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ge!==w||Se!==He)&&pk(c,Y,w,He),ll=!1;var ft=c.memoizedState;Y.state=ft,rg(c,w,Y,k),Se=c.memoizedState,ge!==w||ft!==Se||ts.current||ll?(typeof ht=="function"&&(ow(c,m,ht,w),Se=c.memoizedState),(ge=ll||dk(c,m,ge,w,ft,Se,He))?(gt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(c.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=Se),Y.props=w,Y.state=Se,Y.context=He,w=ge):(typeof Y.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{Y=c.stateNode,$I(a,c),ge=c.memoizedProps,He=c.type===c.elementType?ge:go(c.type,ge),Y.props=He,gt=c.pendingProps,ft=Y.context,Se=m.contextType,typeof Se=="object"&&Se!==null?Se=Qs(Se):(Se=ns(m)?bc:wi.current,Se=Pu(c,Se));var Pt=m.getDerivedStateFromProps;(ht=typeof Pt=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ge!==gt||ft!==Se)&&pk(c,Y,w,Se),ll=!1,ft=c.memoizedState,Y.state=ft,rg(c,w,Y,k);var Bt=c.memoizedState;ge!==gt||ft!==Bt||ts.current||ll?(typeof Pt=="function"&&(ow(c,m,Pt,w),Bt=c.memoizedState),(He=ll||dk(c,m,He,w,ft,Bt,Se)||!1)?(ht||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(w,Bt,Se),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(w,Bt,Se)),typeof Y.componentDidUpdate=="function"&&(c.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=Bt),Y.props=w,Y.state=Bt,Y.context=Se,w=He):(typeof Y.componentDidUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=1024),w=!1)}return dw(a,c,m,w,A,k)}function dw(a,c,m,w,k,A){Sk(a,c);var Y=(c.flags&128)!==0;if(!w&&!Y)return k&&TI(c,m,!1),Ea(a,c,A);w=c.stateNode,T$.current=c;var ge=Y&&typeof m.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,a!==null&&Y?(c.child=Mu(c,a.child,null,A),c.child=Mu(c,null,ge,A)):Di(a,c,ge,A),c.memoizedState=w.state,k&&TI(c,m,!0),c.child}function Nk(a){var c=a.stateNode;c.pendingContext?kI(a,c.pendingContext,c.pendingContext!==c.context):c.context&&kI(a,c.context,!1),Qx(a,c.containerInfo)}function Ik(a,c,m,w,k){return Lu(),Bx(k),c.flags|=256,Di(a,c,m,w),c.child}var fw={dehydrated:null,treeContext:null,retryLane:0};function pw(a){return{baseLanes:a,cachePool:null,transitions:null}}function kk(a,c,m){var w=c.pendingProps,k=Nr.current,A=!1,Y=(c.flags&128)!==0,ge;if((ge=Y)||(ge=a!==null&&a.memoizedState===null?!1:(k&2)!==0),ge?(A=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(k|=1),nr(Nr,k&1),a===null)return $x(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(c.mode&1?a.data==="$!"?c.lanes=8:c.lanes=0x40000000:c.lanes=1,null):(Y=w.children,a=w.fallback,A?(w=c.mode,A=c.child,Y={mode:"hidden",children:Y},!(w&1)&&A!==null?(A.childLanes=0,A.pendingProps=Y):A=Eg(Y,w,0,null),a=Cc(a,w,m,null),A.return=c,a.return=c,A.sibling=a,c.child=A,c.child.memoizedState=pw(m),c.memoizedState=fw,a):hw(c,Y));if(k=a.memoizedState,k!==null&&(ge=k.dehydrated,ge!==null))return R$(a,c,Y,w,ge,k,m);if(A){A=w.fallback,Y=c.mode,k=a.child,ge=k.sibling;var Se={mode:"hidden",children:w.children};return!(Y&1)&&c.child!==k?(w=c.child,w.childLanes=0,w.pendingProps=Se,c.deletions=null):(w=ml(k,Se),w.subtreeFlags=k.subtreeFlags&0xe00000),ge!==null?A=ml(ge,A):(A=Cc(A,Y,m,null),A.flags|=2),A.return=c,w.return=c,w.sibling=A,c.child=w,w=A,A=c.child,Y=a.child.memoizedState,Y=Y===null?pw(m):{baseLanes:Y.baseLanes|m,cachePool:null,transitions:Y.transitions},A.memoizedState=Y,A.childLanes=a.childLanes&~m,c.memoizedState=fw,w}return A=a.child,a=A.sibling,w=ml(A,{mode:"visible",children:w.children}),!(c.mode&1)&&(w.lanes=m),w.return=c,w.sibling=null,a!==null&&(m=c.deletions,m===null?(c.deletions=[a],c.flags|=16):m.push(a)),c.child=w,c.memoizedState=null,w}function hw(a,c){return c=Eg({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function dg(a,c,m,w){return w!==null&&Bx(w),Mu(c,a.child,null,m),a=hw(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function R$(a,c,m,w,k,A,Y){if(m)return c.flags&256?(c.flags&=-257,w=lw(Error(n(422))),dg(a,c,Y,w)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(A=w.fallback,k=c.mode,w=Eg({mode:"visible",children:w.children},k,0,null),A=Cc(A,k,Y,null),A.flags|=2,w.return=c,A.return=c,w.sibling=A,c.child=w,c.mode&1&&Mu(c,a.child,null,Y),c.child.memoizedState=pw(Y),c.memoizedState=fw,A);if(!(c.mode&1))return dg(a,c,Y,null);if(k.data==="$!"){if(w=k.nextSibling&&k.nextSibling.dataset,w)var ge=w.dgst;return w=ge,A=Error(n(419)),w=lw(A,w,void 0),dg(a,c,Y,w)}if(ge=(Y&a.childLanes)!==0,rs||ge){if(w=oi,w!==null){switch(Y&-Y){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:k=32;break;case 0x20000000:k=0x10000000;break;default:k=0}k=k&(w.suspendedLanes|Y)?0:k,k!==0&&k!==A.retryLane&&(A.retryLane=k,_a(a,k),vo(w,a,k,-1))}return Rw(),w=lw(Error(n(421))),dg(a,c,Y,w)}return k.data==="$?"?(c.flags|=128,c.child=a.child,c=W$.bind(null,a),k._reactRetry=c,null):(a=A.treeContext,xs=il(k.nextSibling),vs=c,gr=!0,mo=null,a!==null&&(Hs[Ks++]=xa,Hs[Ks++]=wa,Hs[Ks++]=vc,xa=a.id,wa=a.overflow,vc=c),c=hw(c,w.children),c.flags|=4096,c)}function Ck(a,c,m){a.lanes|=c;var w=a.alternate;w!==null&&(w.lanes|=c),Ux(a.return,c,m)}function mw(a,c,m,w,k){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:k}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=w,A.tail=m,A.tailMode=k)}function Tk(a,c,m){var w=c.pendingProps,k=w.revealOrder,A=w.tail;if(Di(a,c,w.children,m),w=Nr.current,w&2)w=w&1|2,c.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Ck(a,m,c);else if(a.tag===19)Ck(a,m,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}w&=1}if(nr(Nr,w),!(c.mode&1))c.memoizedState=null;else switch(k){case"forwards":for(m=c.child,k=null;m!==null;)a=m.alternate,a!==null&&ig(a)===null&&(k=m),m=m.sibling;m=k,m===null?(k=c.child,c.child=null):(k=m.sibling,m.sibling=null),mw(c,!1,k,m,A);break;case"backwards":for(m=null,k=c.child,c.child=null;k!==null;){if(a=k.alternate,a!==null&&ig(a)===null){c.child=k;break}a=k.sibling,k.sibling=m,m=k,k=a}mw(c,!0,m,null,A);break;case"together":mw(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function fg(a,c){!(c.mode&1)&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function Ea(a,c,m){if(a!==null&&(c.dependencies=a.dependencies),Ec|=c.lanes,!(m&c.childLanes))return null;if(a!==null&&c.child!==a.child)throw Error(n(153));if(c.child!==null){for(a=c.child,m=ml(a,a.pendingProps),c.child=m,m.return=c;a.sibling!==null;)a=a.sibling,m=m.sibling=ml(a,a.pendingProps),m.return=c;m.sibling=null}return c.child}function j$(a,c,m){switch(c.tag){case 3:Nk(c),Lu();break;case 5:WI(c);break;case 1:ns(c.type)&&Qm(c);break;case 4:Qx(c,c.stateNode.containerInfo);break;case 10:var w=c.type._context,k=c.memoizedProps.value;nr(eg,w._currentValue),w._currentValue=k;break;case 13:if(w=c.memoizedState,w!==null)return w.dehydrated!==null?(nr(Nr,Nr.current&1),c.flags|=128,null):m&c.child.childLanes?kk(a,c,m):(nr(Nr,Nr.current&1),a=Ea(a,c,m),a!==null?a.sibling:null);nr(Nr,Nr.current&1);break;case 19:if(w=(m&c.childLanes)!==0,a.flags&128){if(w)return Tk(a,c,m);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),nr(Nr,Nr.current),w)break;return null;case 22:case 23:return c.lanes=0,_k(a,c,m)}return Ea(a,c,m)}var Rk,gw,jk,Ok;Rk=function(a,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},gw=function(){},jk=function(a,c,m,w){var k=a.memoizedProps;if(k!==w){a=c.stateNode,_c(Uo.current);var A=null;switch(m){case"input":k=_t(a,k),w=_t(a,w),A=[];break;case"select":k=oe({},k,{value:void 0}),w=oe({},w,{value:void 0}),A=[];break;case"textarea":k=Ue(a,k),w=Ue(a,w),A=[];break;default:typeof k.onClick!="function"&&typeof w.onClick=="function"&&(a.onclick=Um)}Zi(m,w);var Y;m=null;for(He in k)if(!w.hasOwnProperty(He)&&k.hasOwnProperty(He)&&k[He]!=null)if(He==="style"){var ge=k[He];for(Y in ge)ge.hasOwnProperty(Y)&&(m||(m={}),m[Y]="")}else He!=="dangerouslySetInnerHTML"&&He!=="children"&&He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&He!=="autoFocus"&&(i.hasOwnProperty(He)?A||(A=[]):(A=A||[]).push(He,null));for(He in w){var Se=w[He];if(ge=k?.[He],w.hasOwnProperty(He)&&Se!==ge&&(Se!=null||ge!=null))if(He==="style")if(ge){for(Y in ge)!ge.hasOwnProperty(Y)||Se&&Se.hasOwnProperty(Y)||(m||(m={}),m[Y]="");for(Y in Se)Se.hasOwnProperty(Y)&&ge[Y]!==Se[Y]&&(m||(m={}),m[Y]=Se[Y])}else m||(A||(A=[]),A.push(He,m)),m=Se;else He==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,ge=ge?ge.__html:void 0,Se!=null&&ge!==Se&&(A=A||[]).push(He,Se)):He==="children"?typeof Se!="string"&&typeof Se!="number"||(A=A||[]).push(He,""+Se):He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&(i.hasOwnProperty(He)?(Se!=null&&He==="onScroll"&&cr("scroll",a),A||ge===Se||(A=[])):(A=A||[]).push(He,Se))}m&&(A=A||[]).push("style",m);var He=A;(c.updateQueue=He)&&(c.flags|=4)}},Ok=function(a,c,m,w){m!==w&&(c.flags|=4)};function op(a,c){if(!gr)switch(a.tailMode){case"hidden":c=a.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:w.sibling=null}}function Si(a){var c=a.alternate!==null&&a.alternate.child===a.child,m=0,w=0;if(c)for(var k=a.child;k!==null;)m|=k.lanes|k.childLanes,w|=k.subtreeFlags&0xe00000,w|=k.flags&0xe00000,k.return=a,k=k.sibling;else for(k=a.child;k!==null;)m|=k.lanes|k.childLanes,w|=k.subtreeFlags,w|=k.flags,k.return=a,k=k.sibling;return a.subtreeFlags|=w,a.childLanes=m,c}function O$(a,c,m){var w=c.pendingProps;switch(Lx(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(c),null;case 1:return ns(c.type)&&Km(),Si(c),null;case 3:return w=c.stateNode,zu(),ur(ts),ur(wi),Zx(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(a===null||a.child===null)&&(Ym(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,mo!==null&&(kw(mo),mo=null))),gw(a,c),Si(c),null;case 5:Gx(c);var k=_c(tp.current);if(m=c.type,a!==null&&c.stateNode!=null)jk(a,c,m,w,k),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(n(166));return Si(c),null}if(a=_c(Uo.current),Ym(c)){w=c.stateNode,m=c.type;var A=c.memoizedProps;switch(w[Vo]=c,w[Jf]=A,a=(c.mode&1)!==0,m){case"dialog":cr("cancel",w),cr("close",w);break;case"iframe":case"object":case"embed":cr("load",w);break;case"video":case"audio":for(k=0;k<Kf.length;k++)cr(Kf[k],w);break;case"source":cr("error",w);break;case"img":case"image":case"link":cr("error",w),cr("load",w);break;case"details":cr("toggle",w);break;case"input":Tt(w,A),cr("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!A.multiple},cr("invalid",w);break;case"textarea":rt(w,A),cr("invalid",w)}Zi(m,A),k=null;for(var Y in A)if(A.hasOwnProperty(Y)){var ge=A[Y];Y==="children"?typeof ge=="string"?w.textContent!==ge&&(A.suppressHydrationWarning!==!0&&Vm(w.textContent,ge,a),k=["children",ge]):typeof ge=="number"&&w.textContent!==""+ge&&(A.suppressHydrationWarning!==!0&&Vm(w.textContent,ge,a),k=["children",""+ge]):i.hasOwnProperty(Y)&&ge!=null&&Y==="onScroll"&&cr("scroll",w)}switch(m){case"input":Xe(w),xe(w,A,!0);break;case"textarea":Xe(w),ut(w);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(w.onclick=Um)}w=k,c.updateQueue=w,w!==null&&(c.flags|=4)}else{Y=k.nodeType===9?k:k.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Qt(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=Y.createElement("div"),a.innerHTML="<script></script>",a=a.removeChild(a.firstChild)):typeof w.is=="string"?a=Y.createElement(m,{is:w.is}):(a=Y.createElement(m),m==="select"&&(Y=a,w.multiple?Y.multiple=!0:w.size&&(Y.size=w.size))):a=Y.createElementNS(a,m),a[Vo]=c,a[Jf]=w,Rk(a,c,!1,!1),c.stateNode=a;e:{switch(Y=Yi(m,w),m){case"dialog":cr("cancel",a),cr("close",a),k=w;break;case"iframe":case"object":case"embed":cr("load",a),k=w;break;case"video":case"audio":for(k=0;k<Kf.length;k++)cr(Kf[k],a);k=w;break;case"source":cr("error",a),k=w;break;case"img":case"image":case"link":cr("error",a),cr("load",a),k=w;break;case"details":cr("toggle",a),k=w;break;case"input":Tt(a,w),k=_t(a,w),cr("invalid",a);break;case"option":k=w;break;case"select":a._wrapperState={wasMultiple:!!w.multiple},k=oe({},w,{value:void 0}),cr("invalid",a);break;case"textarea":rt(a,w),k=Ue(a,w),cr("invalid",a);break;default:k=w}Zi(m,k),ge=k;for(A in ge)if(ge.hasOwnProperty(A)){var Se=ge[A];A==="style"?Jt(a,Se):A==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&ar(a,Se)):A==="children"?typeof Se=="string"?(m!=="textarea"||Se!=="")&&Dn(a,Se):typeof Se=="number"&&Dn(a,""+Se):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?Se!=null&&A==="onScroll"&&cr("scroll",a):Se!=null&&j(a,A,Se,Y))}switch(m){case"input":Xe(a),xe(a,w,!1);break;case"textarea":Xe(a),ut(a);break;case"option":w.value!=null&&a.setAttribute("value",""+je(w.value));break;case"select":a.multiple=!!w.multiple,A=w.value,A!=null?Ae(a,!!w.multiple,A,!1):w.defaultValue!=null&&Ae(a,!!w.multiple,w.defaultValue,!0);break;default:typeof k.onClick=="function"&&(a.onclick=Um)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Si(c),null;case 6:if(a&&c.stateNode!=null)Ok(a,c,a.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(n(166));if(m=_c(tp.current),_c(Uo.current),Ym(c)){if(w=c.stateNode,m=c.memoizedProps,w[Vo]=c,(A=w.nodeValue!==m)&&(a=vs,a!==null))switch(a.tag){case 3:Vm(w.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Vm(w.nodeValue,m,(a.mode&1)!==0)}A&&(c.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[Vo]=c,c.stateNode=w}return Si(c),null;case 13:if(ur(Nr),w=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(gr&&xs!==null&&c.mode&1&&!(c.flags&128))PI(),Lu(),c.flags|=98560,A=!1;else if(A=Ym(c),w!==null&&w.dehydrated!==null){if(a===null){if(!A)throw Error(n(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Vo]=c}else Lu(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;Si(c),A=!1}else mo!==null&&(kw(mo),mo=null),A=!0;if(!A)return c.flags&65536?c:null}return c.flags&128?(c.lanes=m,c):(w=w!==null,w!==(a!==null&&a.memoizedState!==null)&&w&&(c.child.flags|=8192,c.mode&1&&(a===null||Nr.current&1?ni===0&&(ni=3):Rw())),c.updateQueue!==null&&(c.flags|=4),Si(c),null);case 4:return zu(),gw(a,c),a===null&&Qf(c.stateNode.containerInfo),Si(c),null;case 10:return Vx(c.type._context),Si(c),null;case 17:return ns(c.type)&&Km(),Si(c),null;case 19:if(ur(Nr),A=c.memoizedState,A===null)return Si(c),null;if(w=(c.flags&128)!==0,Y=A.rendering,Y===null)if(w)op(A,!1);else{if(ni!==0||a!==null&&a.flags&128)for(a=c.child;a!==null;){if(Y=ig(a),Y!==null){for(c.flags|=128,op(A,!1),w=Y.updateQueue,w!==null&&(c.updateQueue=w,c.flags|=4),c.subtreeFlags=0,w=m,m=c.child;m!==null;)A=m,a=w,A.flags&=0xe00002,Y=A.alternate,Y===null?(A.childLanes=0,A.lanes=a,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=Y.childLanes,A.lanes=Y.lanes,A.child=Y.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=Y.memoizedProps,A.memoizedState=Y.memoizedState,A.updateQueue=Y.updateQueue,A.type=Y.type,a=Y.dependencies,A.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return nr(Nr,Nr.current&1|2),c.child}a=a.sibling}A.tail!==null&&lr()>Hu&&(c.flags|=128,w=!0,op(A,!1),c.lanes=4194304)}else{if(!w)if(a=ig(Y),a!==null){if(c.flags|=128,w=!0,m=a.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),op(A,!0),A.tail===null&&A.tailMode==="hidden"&&!Y.alternate&&!gr)return Si(c),null}else 2*lr()-A.renderingStartTime>Hu&&m!==0x40000000&&(c.flags|=128,w=!0,op(A,!1),c.lanes=4194304);A.isBackwards?(Y.sibling=c.child,c.child=Y):(m=A.last,m!==null?m.sibling=Y:c.child=Y,A.last=Y)}return A.tail!==null?(c=A.tail,A.rendering=c,A.tail=c.sibling,A.renderingStartTime=lr(),c.sibling=null,m=Nr.current,nr(Nr,w?m&1|2:m&1),c):(Si(c),null);case 22:case 23:return Tw(),w=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==w&&(c.flags|=8192),w&&c.mode&1?ws&0x40000000&&(Si(c),c.subtreeFlags&6&&(c.flags|=8192)):Si(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function q$(a,c){switch(Lx(c),c.tag){case 1:return ns(c.type)&&Km(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return zu(),ur(ts),ur(wi),Zx(),a=c.flags,a&65536&&!(a&128)?(c.flags=a&-65537|128,c):null;case 5:return Gx(c),null;case 13:if(ur(Nr),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Lu()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return ur(Nr),null;case 4:return zu(),null;case 10:return Vx(c.type._context),null;case 22:case 23:return Tw(),null;case 24:return null;default:return null}}var pg=!1,Ei=!1,A$=typeof WeakSet=="function"?WeakSet:Set,$t=null;function Vu(a,c){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){Tr(a,c,w)}else m.current=null}function yw(a,c,m){try{m()}catch(w){Tr(a,c,w)}}var qk=!1;function P$(a,c){if(Tx=Ge,a=dI(),wx(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var k=w.anchorOffset,A=w.focusNode;w=w.focusOffset;try{m.nodeType,A.nodeType}catch{m=null;break e}var Y=0,ge=-1,Se=-1,He=0,ht=0,gt=a,ft=null;t:for(;;){for(var Pt;gt!==m||k!==0&&gt.nodeType!==3||(ge=Y+k),gt!==A||w!==0&&gt.nodeType!==3||(Se=Y+w),gt.nodeType===3&&(Y+=gt.nodeValue.length),(Pt=gt.firstChild)!==null;)ft=gt,gt=Pt;for(;;){if(gt===a)break t;if(ft===m&&++He===k&&(ge=Y),ft===A&&++ht===w&&(Se=Y),(Pt=gt.nextSibling)!==null)break;gt=ft,ft=gt.parentNode}gt=Pt}m=ge===-1||Se===-1?null:{start:ge,end:Se}}else m=null}m=m||{start:0,end:0}}else m=null;for(Rx={focusedElem:a,selectionRange:m},Ge=!1,$t=c;$t!==null;)if(c=$t,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,$t=a;else for(;$t!==null;){c=$t;try{var Bt=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Bt!==null){var Vt=Bt.memoizedProps,Mr=Bt.memoizedState,Fe=c.stateNode,Ce=Fe.getSnapshotBeforeUpdate(c.elementType===c.type?Vt:go(c.type,Vt),Mr);Fe.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:var $e=c.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(vt){Tr(c,c.return,vt)}if(a=c.sibling,a!==null){a.return=c.return,$t=a;break}$t=c.return}return Bt=qk,qk=!1,Bt}function ap(a,c,m){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var k=w=w.next;do{if((k.tag&a)===a){var A=k.destroy;k.destroy=void 0,A!==void 0&&yw(c,m,A)}k=k.next}while(k!==w)}}function hg(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&a)===a){var w=m.create;m.destroy=w()}m=m.next}while(m!==c)}}function bw(a){var c=a.ref;if(c!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof c=="function"?c(a):c.current=a}}function Ak(a){var c=a.alternate;c!==null&&(a.alternate=null,Ak(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Vo],delete c[Jf],delete c[Ax],delete c[y$],delete c[b$])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Pk(a){return a.tag===5||a.tag===3||a.tag===4}function Fk(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Pk(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function vw(a,c,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(a,c):m.insertBefore(a,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(a,m)):(c=m,c.appendChild(a)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Um));else if(w!==4&&(a=a.child,a!==null))for(vw(a,c,m),a=a.sibling;a!==null;)vw(a,c,m),a=a.sibling}function xw(a,c,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?m.insertBefore(a,c):m.appendChild(a);else if(w!==4&&(a=a.child,a!==null))for(xw(a,c,m),a=a.sibling;a!==null;)xw(a,c,m),a=a.sibling}var ui=null,yo=!1;function ul(a,c,m){for(m=m.child;m!==null;)Dk(a,c,m),m=m.sibling}function Dk(a,c,m){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(el,m)}catch{}switch(m.tag){case 5:Ei||Vu(m,c);case 6:var w=ui,k=yo;ui=null,ul(a,c,m),ui=w,yo=k,ui!==null&&(yo?(a=ui,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):ui.removeChild(m.stateNode));break;case 18:ui!==null&&(yo?(a=ui,m=m.stateNode,a.nodeType===8?qx(a.parentNode,m):a.nodeType===1&&qx(a,m),Te(a)):qx(ui,m.stateNode));break;case 4:w=ui,k=yo,ui=m.stateNode.containerInfo,yo=!0,ul(a,c,m),ui=w,yo=k;break;case 0:case 11:case 14:case 15:if(!Ei&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){k=w=w.next;do{var A=k,Y=A.destroy;A=A.tag,Y!==void 0&&(A&2||A&4)&&yw(m,c,Y),k=k.next}while(k!==w)}ul(a,c,m);break;case 1:if(!Ei&&(Vu(m,c),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(ge){Tr(m,c,ge)}ul(a,c,m);break;case 21:ul(a,c,m);break;case 22:m.mode&1?(Ei=(w=Ei)||m.memoizedState!==null,ul(a,c,m),Ei=w):ul(a,c,m);break;default:ul(a,c,m)}}function Lk(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new A$),c.forEach(function(w){var k=V$.bind(null,a,w);m.has(w)||(m.add(w),w.then(k,k))})}}function bo(a,c){var m=c.deletions;if(m!==null)for(var w=0;w<m.length;w++){var k=m[w];try{var A=a,Y=c,ge=Y;e:for(;ge!==null;){switch(ge.tag){case 5:ui=ge.stateNode,yo=!1;break e;case 3:ui=ge.stateNode.containerInfo,yo=!0;break e;case 4:ui=ge.stateNode.containerInfo,yo=!0;break e}ge=ge.return}if(ui===null)throw Error(n(160));Dk(A,Y,k),ui=null,yo=!1;var Se=k.alternate;Se!==null&&(Se.return=null),k.return=null}catch(He){Tr(k,c,He)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Mk(c,a),c=c.sibling}function Mk(a,c){var m=a.alternate,w=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(bo(c,a),Ko(a),w&4){try{ap(3,a,a.return),hg(3,a)}catch(Vt){Tr(a,a.return,Vt)}try{ap(5,a,a.return)}catch(Vt){Tr(a,a.return,Vt)}}break;case 1:bo(c,a),Ko(a),w&512&&m!==null&&Vu(m,m.return);break;case 5:if(bo(c,a),Ko(a),w&512&&m!==null&&Vu(m,m.return),a.flags&32){var k=a.stateNode;try{Dn(k,"")}catch(Vt){Tr(a,a.return,Vt)}}if(w&4&&(k=a.stateNode,k!=null)){var A=a.memoizedProps,Y=m!==null?m.memoizedProps:A,ge=a.type,Se=a.updateQueue;if(a.updateQueue=null,Se!==null)try{ge==="input"&&A.type==="radio"&&A.name!=null&&Ut(k,A),Yi(ge,Y);var He=Yi(ge,A);for(Y=0;Y<Se.length;Y+=2){var ht=Se[Y],gt=Se[Y+1];ht==="style"?Jt(k,gt):ht==="dangerouslySetInnerHTML"?ar(k,gt):ht==="children"?Dn(k,gt):j(k,ht,gt,He)}switch(ge){case"input":sn(k,A);break;case"textarea":Me(k,A);break;case"select":var ft=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!A.multiple;var Pt=A.value;Pt!=null?Ae(k,!!A.multiple,Pt,!1):ft!==!!A.multiple&&(A.defaultValue!=null?Ae(k,!!A.multiple,A.defaultValue,!0):Ae(k,!!A.multiple,A.multiple?[]:"",!1))}k[Jf]=A}catch(Vt){Tr(a,a.return,Vt)}}break;case 6:if(bo(c,a),Ko(a),w&4){if(a.stateNode===null)throw Error(n(162));k=a.stateNode,A=a.memoizedProps;try{k.nodeValue=A}catch(Vt){Tr(a,a.return,Vt)}}break;case 3:if(bo(c,a),Ko(a),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Te(c.containerInfo)}catch(Vt){Tr(a,a.return,Vt)}break;case 4:bo(c,a),Ko(a);break;case 13:bo(c,a),Ko(a),k=a.child,k.flags&8192&&(A=k.memoizedState!==null,k.stateNode.isHidden=A,!A||k.alternate!==null&&k.alternate.memoizedState!==null||(Sw=lr())),w&4&&Lk(a);break;case 22:if(ht=m!==null&&m.memoizedState!==null,a.mode&1?(Ei=(He=Ei)||ht,bo(c,a),Ei=He):bo(c,a),Ko(a),w&8192){if(He=a.memoizedState!==null,(a.stateNode.isHidden=He)&&!ht&&a.mode&1)for($t=a,ht=a.child;ht!==null;){for(gt=$t=ht;$t!==null;){switch(ft=$t,Pt=ft.child,ft.tag){case 0:case 11:case 14:case 15:ap(4,ft,ft.return);break;case 1:Vu(ft,ft.return);var Bt=ft.stateNode;if(typeof Bt.componentWillUnmount=="function"){w=ft,m=ft.return;try{c=w,Bt.props=c.memoizedProps,Bt.state=c.memoizedState,Bt.componentWillUnmount()}catch(Vt){Tr(w,m,Vt)}}break;case 5:Vu(ft,ft.return);break;case 22:if(ft.memoizedState!==null){zk(gt);continue}}Pt!==null?(Pt.return=ft,$t=Pt):zk(gt)}ht=ht.sibling}e:for(ht=null,gt=a;;){if(gt.tag===5){if(ht===null){ht=gt;try{k=gt.stateNode,He?(A=k.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(ge=gt.stateNode,Se=gt.memoizedProps.style,Y=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,ge.style.display=Sr("display",Y))}catch(Vt){Tr(a,a.return,Vt)}}}else if(gt.tag===6){if(ht===null)try{gt.stateNode.nodeValue=He?"":gt.memoizedProps}catch(Vt){Tr(a,a.return,Vt)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===a)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===a)break e;for(;gt.sibling===null;){if(gt.return===null||gt.return===a)break e;ht===gt&&(ht=null),gt=gt.return}ht===gt&&(ht=null),gt.sibling.return=gt.return,gt=gt.sibling}}break;case 19:bo(c,a),Ko(a),w&4&&Lk(a);break;case 21:break;default:bo(c,a),Ko(a)}}function Ko(a){var c=a.flags;if(c&2){try{e:{for(var m=a.return;m!==null;){if(Pk(m)){var w=m;break e}m=m.return}throw Error(n(160))}switch(w.tag){case 5:var k=w.stateNode;w.flags&32&&(Dn(k,""),w.flags&=-33);var A=Fk(a);xw(a,A,k);break;case 3:case 4:var Y=w.stateNode.containerInfo,ge=Fk(a);vw(a,ge,Y);break;default:throw Error(n(161))}}catch(Se){Tr(a,a.return,Se)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function F$(a,c,m){$t=a,$k(a)}function $k(a,c,m){for(var w=(a.mode&1)!==0;$t!==null;){var k=$t,A=k.child;if(k.tag===22&&w){var Y=k.memoizedState!==null||pg;if(!Y){var ge=k.alternate,Se=ge!==null&&ge.memoizedState!==null||Ei;ge=pg;var He=Ei;if(pg=Y,(Ei=Se)&&!He)for($t=k;$t!==null;)Y=$t,Se=Y.child,Y.tag===22&&Y.memoizedState!==null?Wk(k):Se!==null?(Se.return=Y,$t=Se):Wk(k);for(;A!==null;)$t=A,$k(A),A=A.sibling;$t=k,pg=ge,Ei=He}Bk(a)}else k.subtreeFlags&8772&&A!==null?(A.return=k,$t=A):Bk(a)}}function Bk(a){for(;$t!==null;){var c=$t;if(c.flags&8772){var m=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:Ei||hg(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!Ei)if(m===null)w.componentDidMount();else{var k=c.elementType===c.type?m.memoizedProps:go(c.type,m.memoizedProps);w.componentDidUpdate(k,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var A=c.updateQueue;A!==null&&zI(c,A,w);break;case 3:var Y=c.updateQueue;if(Y!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}zI(c,Y,m)}break;case 5:var ge=c.stateNode;if(m===null&&c.flags&4){m=ge;var Se=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&m.focus();break;case"img":Se.src&&(m.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var He=c.alternate;if(He!==null){var ht=He.memoizedState;if(ht!==null){var gt=ht.dehydrated;gt!==null&&Te(gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ei||c.flags&512&&bw(c)}catch(ft){Tr(c,c.return,ft)}}if(c===a){$t=null;break}if(m=c.sibling,m!==null){m.return=c.return,$t=m;break}$t=c.return}}function zk(a){for(;$t!==null;){var c=$t;if(c===a){$t=null;break}var m=c.sibling;if(m!==null){m.return=c.return,$t=m;break}$t=c.return}}function Wk(a){for(;$t!==null;){var c=$t;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{hg(4,c)}catch(Se){Tr(c,m,Se)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var k=c.return;try{w.componentDidMount()}catch(Se){Tr(c,k,Se)}}var A=c.return;try{bw(c)}catch(Se){Tr(c,A,Se)}break;case 5:var Y=c.return;try{bw(c)}catch(Se){Tr(c,Y,Se)}}}catch(Se){Tr(c,c.return,Se)}if(c===a){$t=null;break}var ge=c.sibling;if(ge!==null){ge.return=c.return,$t=ge;break}$t=c.return}}var D$=Math.ceil,mg=q.ReactCurrentDispatcher,ww=q.ReactCurrentOwner,Js=q.ReactCurrentBatchConfig,qn=0,oi=null,Gr=null,di=0,ws=0,Uu=sl(0),ni=0,lp=null,Ec=0,gg=0,_w=0,cp=null,is=null,Sw=0,Hu=1/0,Na=null,yg=!1,Ew=null,dl=null,bg=!1,fl=null,vg=0,up=0,Nw=null,xg=-1,wg=0;function Li(){return qn&6?lr():xg!==-1?xg:xg=lr()}function pl(a){return a.mode&1?qn&2&&di!==0?di&-di:x$.transition!==null?(wg===0&&(wg=Fm()),wg):(a=Ln,a!==0||(a=window.event,a=a===void 0?16:Ee(a.type)),a):1}function vo(a,c,m,w){if(50<up)throw up=0,Nw=null,Error(n(185));mc(a,m,w),(!(qn&2)||a!==oi)&&(a===oi&&(!(qn&2)&&(gg|=m),ni===4&&hl(a,di)),ss(a,w),m===1&&qn===0&&!(c.mode&1)&&(Hu=lr()+500,Gm&&al()))}function ss(a,c){var m=a.callbackNode;px(a,c);var w=nl(a,a===oi?di:0);if(w===0)m!==null&&fc(m),a.callbackNode=null,a.callbackPriority=0;else if(c=w&-w,a.callbackPriority!==c){if(m!=null&&fc(m),c===1)a.tag===0?v$(Uk.bind(null,a)):RI(Uk.bind(null,a)),m$(function(){!(qn&6)&&al()}),m=null;else{switch(Dm(w)){case 1:m=pc;break;case 4:m=ku;break;case 16:m=Xa;break;case 0x20000000:m=hc;break;default:m=Xa}m=Xk(m,Vk.bind(null,a))}a.callbackPriority=c,a.callbackNode=m}}function Vk(a,c){if(xg=-1,wg=0,qn&6)throw Error(n(327));var m=a.callbackNode;if(Ku()&&a.callbackNode!==m)return null;var w=nl(a,a===oi?di:0);if(w===0)return null;if(w&30||w&a.expiredLanes||c)c=_g(a,w);else{c=w;var k=qn;qn|=2;var A=Kk();(oi!==a||di!==c)&&(Na=null,Hu=lr()+500,Ic(a,c));do try{$$();break}catch(ge){Hk(a,ge)}while(!0);Wx(),mg.current=A,qn=k,Gr!==null?c=0:(oi=null,di=0,c=ni)}if(c!==0){if(c===2&&(k=Pf(a),k!==0&&(w=k,c=Iw(a,k))),c===1)throw m=lp,Ic(a,0),hl(a,w),ss(a,lr()),m;if(c===6)hl(a,w);else{if(k=a.current.alternate,!(w&30)&&!L$(k)&&(c=_g(a,w),c===2&&(A=Pf(a),A!==0&&(w=A,c=Iw(a,A))),c===1))throw m=lp,Ic(a,0),hl(a,w),ss(a,lr()),m;switch(a.finishedWork=k,a.finishedLanes=w,c){case 0:case 1:throw Error(n(345));case 2:kc(a,is,Na);break;case 3:if(hl(a,w),(w&0x7c00000)===w&&(c=Sw+500-lr(),10<c)){if(nl(a,0)!==0)break;if(k=a.suspendedLanes,(k&w)!==w){Li(),a.pingedLanes|=a.suspendedLanes&k;break}a.timeoutHandle=Ox(kc.bind(null,a,is,Na),c);break}kc(a,is,Na);break;case 4:if(hl(a,w),(w&4194240)===w)break;for(c=a.eventTimes,k=-1;0<w;){var Y=31-xi(w);A=1<<Y,Y=c[Y],Y>k&&(k=Y),w&=~A}if(w=k,w=lr()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*D$(w/1960))-w,10<w){a.timeoutHandle=Ox(kc.bind(null,a,is,Na),w);break}kc(a,is,Na);break;case 5:kc(a,is,Na);break;default:throw Error(n(329))}}}return ss(a,lr()),a.callbackNode===m?Vk.bind(null,a):null}function Iw(a,c){var m=cp;return a.current.memoizedState.isDehydrated&&(Ic(a,c).flags|=256),a=_g(a,c),a!==2&&(c=is,is=m,c!==null&&kw(c)),a}function kw(a){is===null?is=a:is.push.apply(is,a)}function L$(a){for(var c=a;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var k=m[w],A=k.getSnapshot;k=k.value;try{if(!ho(A(),k))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function hl(a,c){for(c&=~_w,c&=~gg,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var m=31-xi(c),w=1<<m;a[m]=-1,c&=~w}}function Uk(a){if(qn&6)throw Error(n(327));Ku();var c=nl(a,0);if(!(c&1))return ss(a,lr()),null;var m=_g(a,c);if(a.tag!==0&&m===2){var w=Pf(a);w!==0&&(c=w,m=Iw(a,w))}if(m===1)throw m=lp,Ic(a,0),hl(a,c),ss(a,lr()),m;if(m===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,kc(a,is,Na),ss(a,lr()),null}function Cw(a,c){var m=qn;qn|=1;try{return a(c)}finally{qn=m,qn===0&&(Hu=lr()+500,Gm&&al())}}function Nc(a){fl!==null&&fl.tag===0&&!(qn&6)&&Ku();var c=qn;qn|=1;var m=Js.transition,w=Ln;try{if(Js.transition=null,Ln=1,a)return a()}finally{Ln=w,Js.transition=m,qn=c,!(qn&6)&&al()}}function Tw(){ws=Uu.current,ur(Uu)}function Ic(a,c){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,h$(m)),Gr!==null)for(m=Gr.return;m!==null;){var w=m;switch(Lx(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Km();break;case 3:zu(),ur(ts),ur(wi),Zx();break;case 5:Gx(w);break;case 4:zu();break;case 13:ur(Nr);break;case 19:ur(Nr);break;case 10:Vx(w.type._context);break;case 22:case 23:Tw()}m=m.return}if(oi=a,Gr=a=ml(a.current,null),di=ws=c,ni=0,lp=null,_w=gg=Ec=0,is=cp=null,wc!==null){for(c=0;c<wc.length;c++)if(m=wc[c],w=m.interleaved,w!==null){m.interleaved=null;var k=w.next,A=m.pending;if(A!==null){var Y=A.next;A.next=k,w.next=Y}m.pending=w}wc=null}return a}function Hk(a,c){do{var m=Gr;try{if(Wx(),sg.current=cg,og){for(var w=Ir.memoizedState;w!==null;){var k=w.queue;k!==null&&(k.pending=null),w=w.next}og=!1}if(Sc=0,si=ti=Ir=null,np=!1,rp=0,ww.current=null,m===null||m.return===null){ni=1,lp=c,Gr=null;break}e:{var A=a,Y=m.return,ge=m,Se=c;if(c=di,ge.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var He=Se,ht=ge,gt=ht.tag;if(!(ht.mode&1)&&(gt===0||gt===11||gt===15)){var ft=ht.alternate;ft?(ht.updateQueue=ft.updateQueue,ht.memoizedState=ft.memoizedState,ht.lanes=ft.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var Pt=yk(Y);if(Pt!==null){Pt.flags&=-257,bk(Pt,Y,ge,A,c),Pt.mode&1&&gk(A,He,c),c=Pt,Se=He;var Bt=c.updateQueue;if(Bt===null){var Vt=new Set;Vt.add(Se),c.updateQueue=Vt}else Bt.add(Se);break e}else{if(!(c&1)){gk(A,He,c),Rw();break e}Se=Error(n(426))}}else if(gr&&ge.mode&1){var Mr=yk(Y);if(Mr!==null){!(Mr.flags&65536)&&(Mr.flags|=256),bk(Mr,Y,ge,A,c),Bx(Wu(Se,ge));break e}}A=Se=Wu(Se,ge),ni!==4&&(ni=2),cp===null?cp=[A]:cp.push(A),A=Y;do{switch(A.tag){case 3:A.flags|=65536,c&=-c,A.lanes|=c;var Fe=hk(A,Se,c);BI(A,Fe);break e;case 1:ge=Se;var Ce=A.type,$e=A.stateNode;if(!(A.flags&128)&&(typeof Ce.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(dl===null||!dl.has($e)))){A.flags|=65536,c&=-c,A.lanes|=c;var vt=mk(A,ge,c);BI(A,vt);break e}}A=A.return}while(A!==null)}Gk(m)}catch(Ht){c=Ht,Gr===m&&m!==null&&(Gr=m=m.return);continue}break}while(!0)}function Kk(){var a=mg.current;return mg.current=cg,a===null?cg:a}function Rw(){(ni===0||ni===3||ni===2)&&(ni=4),oi===null||!(Ec&0xfffffff)&&!(gg&0xfffffff)||hl(oi,di)}function _g(a,c){var m=qn;qn|=2;var w=Kk();(oi!==a||di!==c)&&(Na=null,Ic(a,c));do try{M$();break}catch(k){Hk(a,k)}while(!0);if(Wx(),qn=m,mg.current=w,Gr!==null)throw Error(n(261));return oi=null,di=0,ni}function M$(){for(;Gr!==null;)Qk(Gr)}function $$(){for(;Gr!==null&&!Iu();)Qk(Gr)}function Qk(a){var c=Yk(a.alternate,a,ws);a.memoizedProps=a.pendingProps,c===null?Gk(a):Gr=c,ww.current=null}function Gk(a){var c=a;do{var m=c.alternate;if(a=c.return,c.flags&32768){if(m=q$(m,c),m!==null){m.flags&=32767,Gr=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{ni=6,Gr=null;return}}else if(m=O$(m,c,ws),m!==null){Gr=m;return}if(c=c.sibling,c!==null){Gr=c;return}Gr=c=a}while(c!==null);ni===0&&(ni=5)}function kc(a,c,m){var w=Ln,k=Js.transition;try{Js.transition=null,Ln=1,B$(a,c,m,w)}finally{Js.transition=k,Ln=w}return null}function B$(a,c,m,w){do Ku();while(fl!==null);if(qn&6)throw Error(n(327));m=a.finishedWork;var k=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var A=m.lanes|m.childLanes;if(hx(a,A),a===oi&&(Gr=oi=null,di=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||bg||(bg=!0,Xk(Xa,function(){return Ku(),null})),A=(m.flags&15990)!==0,m.subtreeFlags&15990||A){A=Js.transition,Js.transition=null;var Y=Ln;Ln=1;var ge=qn;qn|=4,ww.current=null,P$(a,m),Mk(m,a),a$(Rx),Ge=!!Tx,Rx=Tx=null,a.current=m,F$(m),Cf(),qn=ge,Ln=Y,Js.transition=A}else a.current=m;if(bg&&(bg=!1,fl=a,vg=k),A=a.pendingLanes,A===0&&(dl=null),jf(m.stateNode),ss(a,lr()),c!==null)for(w=a.onRecoverableError,m=0;m<c.length;m++)k=c[m],w(k.value,{componentStack:k.stack,digest:k.digest});if(yg)throw yg=!1,a=Ew,Ew=null,a;return vg&1&&a.tag!==0&&Ku(),A=a.pendingLanes,A&1?a===Nw?up++:(up=0,Nw=a):up=0,al(),null}function Ku(){if(fl!==null){var a=Dm(vg),c=Js.transition,m=Ln;try{if(Js.transition=null,Ln=16>a?16:a,fl===null)var w=!1;else{if(a=fl,fl=null,vg=0,qn&6)throw Error(n(331));var k=qn;for(qn|=4,$t=a.current;$t!==null;){var A=$t,Y=A.child;if($t.flags&16){var ge=A.deletions;if(ge!==null){for(var Se=0;Se<ge.length;Se++){var He=ge[Se];for($t=He;$t!==null;){var ht=$t;switch(ht.tag){case 0:case 11:case 15:ap(8,ht,A)}var gt=ht.child;if(gt!==null)gt.return=ht,$t=gt;else for(;$t!==null;){ht=$t;var ft=ht.sibling,Pt=ht.return;if(Ak(ht),ht===He){$t=null;break}if(ft!==null){ft.return=Pt,$t=ft;break}$t=Pt}}}var Bt=A.alternate;if(Bt!==null){var Vt=Bt.child;if(Vt!==null){Bt.child=null;do{var Mr=Vt.sibling;Vt.sibling=null,Vt=Mr}while(Vt!==null)}}$t=A}}if(A.subtreeFlags&2064&&Y!==null)Y.return=A,$t=Y;else e:for(;$t!==null;){if(A=$t,A.flags&2048)switch(A.tag){case 0:case 11:case 15:ap(9,A,A.return)}var Fe=A.sibling;if(Fe!==null){Fe.return=A.return,$t=Fe;break e}$t=A.return}}var Ce=a.current;for($t=Ce;$t!==null;){Y=$t;var $e=Y.child;if(Y.subtreeFlags&2064&&$e!==null)$e.return=Y,$t=$e;else e:for(Y=Ce;$t!==null;){if(ge=$t,ge.flags&2048)try{switch(ge.tag){case 0:case 11:case 15:hg(9,ge)}}catch(Ht){Tr(ge,ge.return,Ht)}if(ge===Y){$t=null;break e}var vt=ge.sibling;if(vt!==null){vt.return=ge.return,$t=vt;break e}$t=ge.return}}if(qn=k,al(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(el,a)}catch{}w=!0}return w}finally{Ln=m,Js.transition=c}}return!1}function Jk(a,c,m){c=Wu(m,c),c=hk(a,c,1),a=cl(a,c,1),c=Li(),a!==null&&(mc(a,1,c),ss(a,c))}function Tr(a,c,m){if(a.tag===3)Jk(a,a,m);else for(;c!==null;){if(c.tag===3){Jk(c,a,m);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(dl===null||!dl.has(w))){a=Wu(m,a),a=mk(c,a,1),c=cl(c,a,1),a=Li(),c!==null&&(mc(c,1,a),ss(c,a));break}}c=c.return}}function z$(a,c,m){var w=a.pingCache;w!==null&&w.delete(c),c=Li(),a.pingedLanes|=a.suspendedLanes&m,oi===a&&(di&m)===m&&(ni===4||ni===3&&(di&0x7c00000)===di&&500>lr()-Sw?Ic(a,0):_w|=m),ss(a,c)}function Zk(a,c){c===0&&(a.mode&1?(c=tl,tl<<=1,!(tl&0x7c00000)&&(tl=4194304)):c=1);var m=Li();a=_a(a,c),a!==null&&(mc(a,c,m),ss(a,m))}function W$(a){var c=a.memoizedState,m=0;c!==null&&(m=c.retryLane),Zk(a,m)}function V$(a,c){var m=0;switch(a.tag){case 13:var w=a.stateNode,k=a.memoizedState;k!==null&&(m=k.retryLane);break;case 19:w=a.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(c),Zk(a,m)}var Yk;Yk=function(a,c,m){if(a!==null)if(a.memoizedProps!==c.pendingProps||ts.current)rs=!0;else{if(!(a.lanes&m)&&!(c.flags&128))return rs=!1,j$(a,c,m);rs=!!(a.flags&131072)}else rs=!1,gr&&c.flags&1048576&&jI(c,Zm,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;fg(a,c),a=c.pendingProps;var k=Pu(c,wi.current);Bu(c,m),k=ew(null,c,w,a,k,m);var A=tw();return c.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,ns(w)?(A=!0,Qm(c)):A=!1,c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Kx(c),k.updater=ug,c.stateNode=k,k._reactInternals=c,aw(c,w,a,m),c=dw(null,c,w,!0,A,m)):(c.tag=0,gr&&A&&Dx(c),Di(null,c,k,m),c=c.child),c;case 16:w=c.elementType;e:{switch(fg(a,c),a=c.pendingProps,k=w._init,w=k(w._payload),c.type=w,k=c.tag=H$(w),a=go(w,a),k){case 0:c=uw(null,c,w,a,m);break e;case 1:c=Ek(null,c,w,a,m);break e;case 11:c=vk(null,c,w,a,m);break e;case 14:c=xk(null,c,w,go(w.type,a),m);break e}throw Error(n(306,w,""))}return c;case 0:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:go(w,k),uw(a,c,w,k,m);case 1:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:go(w,k),Ek(a,c,w,k,m);case 3:e:{if(Nk(c),a===null)throw Error(n(387));w=c.pendingProps,A=c.memoizedState,k=A.element,$I(a,c),rg(c,w,null,m);var Y=c.memoizedState;if(w=Y.element,A.isDehydrated)if(A={element:w,isDehydrated:!1,cache:Y.cache,pendingSuspenseBoundaries:Y.pendingSuspenseBoundaries,transitions:Y.transitions},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){k=Wu(Error(n(423)),c),c=Ik(a,c,w,m,k);break e}else if(w!==k){k=Wu(Error(n(424)),c),c=Ik(a,c,w,m,k);break e}else for(xs=il(c.stateNode.containerInfo.firstChild),vs=c,gr=!0,mo=null,m=LI(c,null,w,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Lu(),w===k){c=Ea(a,c,m);break e}Di(a,c,w,m)}c=c.child}return c;case 5:return WI(c),a===null&&$x(c),w=c.type,k=c.pendingProps,A=a!==null?a.memoizedProps:null,Y=k.children,jx(w,k)?Y=null:A!==null&&jx(w,A)&&(c.flags|=32),Sk(a,c),Di(a,c,Y,m),c.child;case 6:return a===null&&$x(c),null;case 13:return kk(a,c,m);case 4:return Qx(c,c.stateNode.containerInfo),w=c.pendingProps,a===null?c.child=Mu(c,null,w,m):Di(a,c,w,m),c.child;case 11:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:go(w,k),vk(a,c,w,k,m);case 7:return Di(a,c,c.pendingProps,m),c.child;case 8:return Di(a,c,c.pendingProps.children,m),c.child;case 12:return Di(a,c,c.pendingProps.children,m),c.child;case 10:e:{if(w=c.type._context,k=c.pendingProps,A=c.memoizedProps,Y=k.value,nr(eg,w._currentValue),w._currentValue=Y,A!==null)if(ho(A.value,Y)){if(A.children===k.children&&!ts.current){c=Ea(a,c,m);break e}}else for(A=c.child,A!==null&&(A.return=c);A!==null;){var ge=A.dependencies;if(ge!==null){Y=A.child;for(var Se=ge.firstContext;Se!==null;){if(Se.context===w){if(A.tag===1){Se=Sa(-1,m&-m),Se.tag=2;var He=A.updateQueue;if(He!==null){He=He.shared;var ht=He.pending;ht===null?Se.next=Se:(Se.next=ht.next,ht.next=Se),He.pending=Se}}A.lanes|=m,Se=A.alternate,Se!==null&&(Se.lanes|=m),Ux(A.return,m,c),ge.lanes|=m;break}Se=Se.next}}else if(A.tag===10)Y=A.type===c.type?null:A.child;else if(A.tag===18){if(Y=A.return,Y===null)throw Error(n(341));Y.lanes|=m,ge=Y.alternate,ge!==null&&(ge.lanes|=m),Ux(Y,m,c),Y=A.sibling}else Y=A.child;if(Y!==null)Y.return=A;else for(Y=A;Y!==null;){if(Y===c){Y=null;break}if(A=Y.sibling,A!==null){A.return=Y.return,Y=A;break}Y=Y.return}A=Y}Di(a,c,k.children,m),c=c.child}return c;case 9:return k=c.type,w=c.pendingProps.children,Bu(c,m),k=Qs(k),w=w(k),c.flags|=1,Di(a,c,w,m),c.child;case 14:return w=c.type,k=go(w,c.pendingProps),k=go(w.type,k),xk(a,c,w,k,m);case 15:return wk(a,c,c.type,c.pendingProps,m);case 17:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:go(w,k),fg(a,c),c.tag=1,ns(w)?(a=!0,Qm(c)):a=!1,Bu(c,m),fk(c,w,k),aw(c,w,k,m),dw(null,c,w,!0,a,m);case 19:return Tk(a,c,m);case 22:return _k(a,c,m)}throw Error(n(156,c.tag))};function Xk(a,c){return Nu(a,c)}function U$(a,c,m,w){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(a,c,m,w){return new U$(a,c,m,w)}function jw(a){return a=a.prototype,!(!a||!a.isReactComponent)}function H$(a){if(typeof a=="function")return jw(a)?1:0;if(a!=null){if(a=a.$$typeof,a===V)return 11;if(a===G)return 14}return 2}function ml(a,c){var m=a.alternate;return m===null?(m=Zs(a.tag,c,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=c,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&0xe00000,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,c=a.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function Sg(a,c,m,w,k,A){var Y=2;if(w=a,typeof a=="function")jw(a)&&(Y=1);else if(typeof a=="string")Y=5;else e:switch(a){case W:return Cc(m.children,k,A,c);case P:Y=8,k|=8;break;case O:return a=Zs(12,m,c,k|2),a.elementType=O,a.lanes=A,a;case U:return a=Zs(13,m,c,k),a.elementType=U,a.lanes=A,a;case B:return a=Zs(19,m,c,k),a.elementType=B,a.lanes=A,a;case le:return Eg(m,k,A,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case z:Y=10;break e;case F:Y=9;break e;case V:Y=11;break e;case G:Y=14;break e;case Z:Y=16,w=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return c=Zs(Y,m,c,k),c.elementType=a,c.type=w,c.lanes=A,c}function Cc(a,c,m,w){return a=Zs(7,a,w,c),a.lanes=m,a}function Eg(a,c,m,w){return a=Zs(22,a,w,c),a.elementType=le,a.lanes=m,a.stateNode={isHidden:!1},a}function Ow(a,c,m){return a=Zs(6,a,null,c),a.lanes=m,a}function qw(a,c,m){return c=Zs(4,a.children!==null?a.children:[],a.key,c),c.lanes=m,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function K$(a,c,m,w,k){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ff(0),this.expirationTimes=Ff(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ff(0),this.identifierPrefix=w,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Aw(a,c,m,w,k,A,Y,ge,Se){return a=new K$(a,c,m,ge,Se),c===1?(c=1,A===!0&&(c|=8)):c=0,A=Zs(3,null,null,c),a.current=A,A.stateNode=a,A.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kx(A),a}function Q$(a,c,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:w==null?null:""+w,children:a,containerInfo:c,implementation:m}}function eC(a){if(!a)return ol;a=a._reactInternals;e:{if(Vs(a)!==a||a.tag!==1)throw Error(n(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(ns(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(a.tag===1){var m=a.type;if(ns(m))return CI(a,m,c)}return c}function tC(a,c,m,w,k,A,Y,ge,Se){return a=Aw(m,w,!0,a,k,A,Y,ge,Se),a.context=eC(null),m=a.current,w=Li(),k=pl(m),A=Sa(w,k),A.callback=c??null,cl(m,A,k),a.current.lanes=k,mc(a,k,w),ss(a,w),a}function Ng(a,c,m,w){var k=c.current,A=Li(),Y=pl(k);return m=eC(m),c.context===null?c.context=m:c.pendingContext=m,c=Sa(A,Y),c.payload={element:a},w=w===void 0?null:w,w!==null&&(c.callback=w),a=cl(k,c,Y),a!==null&&(vo(a,k,Y,A),ng(a,k,Y)),Y}function Ig(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nC(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<c?m:c}}function Pw(a,c){nC(a,c),(a=a.alternate)&&nC(a,c)}var rC=typeof reportError=="function"?reportError:function(a){console.error(a)};function Fw(a){this._internalRoot=a}kg.prototype.render=Fw.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(n(409));Ng(a,c,null,null)},kg.prototype.unmount=Fw.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Nc(function(){Ng(null,a,null,null)}),c[ba]=null}};function kg(a){this._internalRoot=a}kg.prototype.unstable_scheduleHydration=function(a){if(a){var c=gc();a={blockedOn:null,target:a,priority:c};for(var m=0;m<me.length&&c!==0&&c<me[m].priority;m++);me.splice(m,0,a),m===0&&Be(a)}};function Dw(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Cg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function iC(){}function G$(a,c,m,w,k){if(k){if(typeof w=="function"){var A=w;w=function(){var He=Ig(Y);A.call(He)}}var Y=tC(c,w,a,0,null,!1,!1,"",iC);return a._reactRootContainer=Y,a[ba]=Y.current,Qf(a.nodeType===8?a.parentNode:a),Nc(),Y}for(;k=a.lastChild;)a.removeChild(k);if(typeof w=="function"){var ge=w;w=function(){var He=Ig(Se);ge.call(He)}}var Se=Aw(a,0,!1,null,null,!1,!1,"",iC);return a._reactRootContainer=Se,a[ba]=Se.current,Qf(a.nodeType===8?a.parentNode:a),Nc(function(){Ng(c,Se,m,w)}),Se}function Tg(a,c,m,w,k){var A=m._reactRootContainer;if(A){var Y=A;if(typeof k=="function"){var ge=k;k=function(){var Se=Ig(Y);ge.call(Se)}}Ng(c,Y,a,k)}else Y=G$(m,c,a,k,w);return Ig(Y)}Lf=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var m=Fi(c.pendingLanes);m!==0&&(Df(c,m|1),ss(c,lr()),!(qn&6)&&(Hu=lr()+500,al()))}break;case 13:Nc(function(){var w=_a(a,1);if(w!==null){var k=Li();vo(w,a,1,k)}}),Pw(a,1)}},he=function(a){if(a.tag===13){var c=_a(a,0x8000000);if(c!==null){var m=Li();vo(c,a,0x8000000,m)}Pw(a,0x8000000)}},Mf=function(a){if(a.tag===13){var c=pl(a),m=_a(a,c);if(m!==null){var w=Li();vo(m,a,c,w)}Pw(a,c)}},gc=function(){return Ln},$f=function(a,c){var m=Ln;try{return Ln=a,c()}finally{Ln=m}},cc=function(a,c,m){switch(c){case"input":if(sn(a,m),c=m.name,m.type==="radio"&&c!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var w=m[c];if(w!==a&&w.form===a.form){var k=Hm(w);if(!k)throw Error(n(90));Ve(w),sn(w,k)}}}break;case"textarea":Me(a,m);break;case"select":c=m.value,c!=null&&Ae(a,!!m.multiple,c,!1)}},bu=Cw,vu=Nc;var J$={usingClientEntryPoint:!1,Events:[Zf,qu,Hm,dn,yu,Cw]},dp={findFiberByHostInstance:yc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z$={bundleType:dp.bundleType,version:dp.version,rendererPackageName:dp.rendererPackageName,rendererConfig:dp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Su(a),a===null?null:a.stateNode},findFiberByHostInstance:dp.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rg.isDisabled&&Rg.supportsFiber)try{el=Rg.inject(Z$),es=Rg}catch{}}return os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J$,os.createPortal=function(a,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dw(c))throw Error(n(200));return Q$(a,c,null,m)},os.createRoot=function(a,c){if(!Dw(a))throw Error(n(299));var m=!1,w="",k=rC;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=Aw(a,1,!1,null,null,m,!1,w,k),a[ba]=c.current,Qf(a.nodeType===8?a.parentNode:a),new Fw(c)},os.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=Su(c),a=a===null?null:a.stateNode,a},os.flushSync=function(a){return Nc(a)},os.hydrate=function(a,c,m){if(!Cg(c))throw Error(n(200));return Tg(null,a,c,!0,m)},os.hydrateRoot=function(a,c,m){if(!Dw(a))throw Error(n(405));var w=m!=null&&m.hydratedSources||null,k=!1,A="",Y=rC;if(m!=null&&(m.unstable_strictMode===!0&&(k=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onRecoverableError!==void 0&&(Y=m.onRecoverableError)),c=tC(c,null,a,1,m??null,k,!1,A,Y),a[ba]=c.current,Qf(a),w)for(a=0;a<w.length;a++)m=w[a],k=m._getVersion,k=k(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,k]:c.mutableSourceEagerHydrationData.push(m,k);return new kg(c)},os.render=function(a,c,m){if(!Cg(c))throw Error(n(200));return Tg(null,a,c,!1,m)},os.unmountComponentAtNode=function(a){if(!Cg(a))throw Error(n(40));return a._reactRootContainer?(Nc(function(){Tg(null,null,a,!1,function(){a._reactRootContainer=null,a[ba]=null})}),!0):!1},os.unstable_batchedUpdates=Cw,os.unstable_renderSubtreeIntoContainer=function(a,c,m,w){if(!Cg(m))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Tg(a,c,m,!1,w)},os.version="18.3.1-next-f1338f8080-20240426",os}var PC;function K3(){if(PC)return Yw.exports;PC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yw.exports=O4(),Yw.exports}var Xh=K3();const q4="Error preloading route! ";function A4(t,e){const n=Lo(),[r,i]=H.useState(!1),s=H.useRef(!1),o=o4(e),{activeProps:l=()=>({className:"active"}),inactiveProps:u=()=>({}),activeOptions:f,to:p,preload:h,preloadDelay:b,hashScrollIntoView:x,replace:_,startTransition:E,resetScroll:I,viewTransition:T,children:C,target:j,disabled:q,style:L,className:M,onClick:W,onFocus:P,onMouseEnter:O,onMouseLeave:z,onTouchStart:F,ignoreBlocker:V,...U}=t,{params:B,search:G,hash:Z,state:le,mask:ie,reloadDocument:ne,...oe}=U,te=H.useMemo(()=>{try{return new URL(`${p}`),"external"}catch{}return"internal"},[p]),ue=Ui({select:Ie=>Ie.location.search,structuralSharing:!0});t={from:Ul({strict:!1,select:Ie=>Ie.pathname}),...t};const ye=H.useMemo(()=>n.buildLocation(t),[n,t,ue]),we=H.useMemo(()=>t.reloadDocument?!1:h??n.options.defaultPreload,[n.options.defaultPreload,h,t.reloadDocument]),Ne=b??n.options.defaultPreloadDelay??0,ze=Ui({select:Ie=>{if(f?.exact){if(!l4(Ie.location.pathname,ye.pathname,n.basepath))return!1}else{const Ae=sb(Ie.location.pathname,n.basepath).split("/");if(!sb(ye.pathname,n.basepath).split("/").every((Me,ut)=>Me===Ae[ut]))return!1}return(f?.includeSearch??!0)&&!_d(Ie.location.search,ye.search,{partial:!f?.exact,ignoreUndefined:!f?.explicitUndefined})?!1:f?.includeHash?Ie.location.hash===ye.hash:!0}}),je=H.useCallback(()=>{n.preloadRoute(t).catch(Ie=>{console.warn(Ie),console.warn(q4)})},[t,n]),De=H.useCallback(Ie=>{Ie?.isIntersecting&&je()},[je]);if(s4(o,De,{rootMargin:"100px"},{disabled:!!q||we!=="viewport"}),Tp(()=>{s.current||!q&&we==="render"&&(je(),s.current=!0)},[q,je,we]),te==="external")return{...oe,ref:o,type:te,href:p,...C&&{children:C},...j&&{target:j},...q&&{disabled:q},...L&&{style:L},...M&&{className:M},...W&&{onClick:W},...P&&{onFocus:P},...O&&{onMouseEnter:O},...z&&{onMouseLeave:z},...F&&{onTouchStart:F}};const Je=Ie=>{if(!q&&!F4(Ie)&&!Ie.defaultPrevented&&(!j||j==="_self")&&Ie.button===0){Ie.preventDefault(),Xh.flushSync(()=>{i(!0)});const Ae=n.subscribe("onResolved",()=>{Ae(),i(!1)});return n.navigate({...t,replace:_,resetScroll:I,hashScrollIntoView:x,startTransition:E,viewTransition:T,ignoreBlocker:V})}},Xe=Ie=>{q||we&&je()},Ve=Xe,ct=Ie=>{if(q)return;const Ae=Ie.target||{};if(we){if(Ae.preloadTimeout)return;Ae.preloadTimeout=setTimeout(()=>{Ae.preloadTimeout=null,je()},Ne)}},_t=Ie=>{if(q)return;const Ae=Ie.target||{};Ae.preloadTimeout&&(clearTimeout(Ae.preloadTimeout),Ae.preloadTimeout=null)},Tt=Ie=>Ae=>{var Ue;(Ue=Ae.persist)==null||Ue.call(Ae),Ie.filter(Boolean).forEach(rt=>{Ae.defaultPrevented||rt(Ae)})},Ut=ze?$c(l,{})??{}:{},sn=ze?{}:$c(u,{}),xe=[M,Ut.className,sn.className].filter(Boolean).join(" "),be={...L,...Ut.style,...sn.style};return{...oe,...Ut,...sn,href:q?void 0:ye.maskedLocation?n.history.createHref(ye.maskedLocation.href):n.history.createHref(ye.href),ref:o,onClick:Tt([W,Je]),onFocus:Tt([P,Xe]),onMouseEnter:Tt([O,ct]),onMouseLeave:Tt([z,_t]),onTouchStart:Tt([F,Ve]),disabled:!!q,target:j,...Object.keys(be).length&&{style:be},...xe&&{className:xe},...q&&{role:"link","aria-disabled":!0},...ze&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}function Q3(t){return H.forwardRef(function(n,r){return d.jsx(P4,{...n,_asChild:t,ref:r})})}const P4=H.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:i,ref:s,...o}=A4(r,e),l=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof n>"u"&&delete o.disabled,H.createElement(n||"a",{...o,ref:s},l)});function F4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function D4(){const t=Lo(),e=H.useRef({router:t,mounted:!1}),n=Ui({select:({isLoading:h})=>h}),[r,i]=H.useState(!1),s=Ui({select:h=>h.matches.some(b=>b.status==="pending"),structuralSharing:!0}),o=Gw(n),l=n||r||s,u=Gw(l),f=n||s,p=Gw(f);return t.isServer||(t.startReactTransition=h=>{i(!0),H.startTransition(()=>{h(),i(!1)})}),H.useEffect(()=>{const h=t.history.subscribe(t.load),b=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Bc(t.latestLocation.href)!==Bc(b.href)&&t.commitLocation({...b,replace:!0}),()=>{h()}},[t,t.history]),Tp(()=>{var h;if(typeof window<"u"&&((h=window.__TSR__)!=null&&h.dehydrated)||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(x){console.error(x)}})()},[t]),Tp(()=>{if(o&&!n){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;t.emit({type:"onLoad",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_})}},[o,t,n]),Tp(()=>{if(p&&!f){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;t.emit({type:"onBeforeRouteMount",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_})}},[f,p,t]),Tp(()=>{if(u&&!l){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;if(t.emit({type:"onResolved",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_}),t.__store.setState(E=>({...E,status:"idle",resolvedLocation:E.location})),typeof document<"u"&&document.querySelector){const E=t.state.location.state.__hashScrollIntoViewOptions??!0;if(E&&t.state.location.hash!==""){const I=document.getElementById(t.state.location.hash);I&&I.scrollIntoView(E)}}}},[l,u,t]),null}function L4(){const t=Lo(),e=t.options.defaultPendingComponent?d.jsx(t.options.defaultPendingComponent,{}):null,n=t.isServer||typeof document<"u"&&window.__TSR__?my:H.Suspense,r=d.jsxs(n,{fallback:e,children:[d.jsx(D4,{}),d.jsx(M4,{})]});return t.options.InnerWrap?d.jsx(t.options.InnerWrap,{children:r}):r}function M4(){const t=Ui({select:n=>{var r;return(r=n.matches[0])==null?void 0:r.id}}),e=Ui({select:n=>n.loadedAt});return d.jsx(dv.Provider,{value:t,children:d.jsx(hN,{getResetKey:()=>e,errorComponent:uv,onCatch:n=>{n.message||n.toString()},children:t?d.jsx(H3,{matchId:t}):null})})}function $4(){const t=Lo();return Ui({select:e=>[e.location.href,e.resolvedLocation.href,e.status],structuralSharing:!0}),H.useCallback(e=>{const{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s,...o}=e;return t.matchRoute(o,{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s})},[t])}function B4({router:t,children:e,...n}){t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=M3(),i=d.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?d.jsx(t.options.Wrap,{children:i}):i}function z4({router:t,...e}){return d.jsx(B4,{router:t,...e,children:d.jsx(L4,{})})}const W4=typeof window<"u"?H.useLayoutEffect:H.useEffect,t_="window",FC="___";let n_=new WeakSet;const V4=typeof window<"u"&&window.sessionStorage,_o=V4?(()=>{const t="tsr-scroll-restoration-v2";return{state:JSON.parse(window.sessionStorage.getItem(t)||"null")||{cached:{},next:{}},set:n=>{_o.state=$c(n,_o.state),window.sessionStorage.setItem(t,JSON.stringify(_o.state))}}})():void 0,U4=t=>t.state.key||t.href;function H4(t){const e=Lo();W4(()=>{const n=t?.getKey||U4,{history:r}=window;r.scrollRestoration="manual";const i=l=>{if(n_.has(l.target))return;n_.add(l.target);let u="";if(l.target===document||l.target===window)u=t_;else{const f=l.target.getAttribute("data-scroll-restoration-id");f?u=`[data-scroll-restoration-id="${f}"]`:u=Q4(l.target)}_o.state.next[u]||_o.set(f=>({...f,next:{...f.next,[u]:{scrollX:NaN,scrollY:NaN}}}))};typeof document<"u"&&document.addEventListener("scroll",i,!0);const s=e.subscribe("onBeforeLoad",l=>{if(l.hrefChanged){const u=n(l.fromLocation);for(const f in _o.state.next){const p=_o.state.next[f];if(f===t_)p.scrollX=window.scrollX||0,p.scrollY=window.scrollY||0;else if(f){const h=document.querySelector(f);p.scrollX=h?.scrollLeft||0,p.scrollY=h?.scrollTop||0}_o.set(h=>{const b={...h.next};return delete b[f],{...h,next:b,cached:{...h.cached,[[u,f].join(FC)]:p}}})}}}),o=e.subscribe("onBeforeRouteMount",l=>{if(l.hrefChanged){if(!e.resetNextScroll)return;e.resetNextScroll=!0;const u=n(l.toLocation);let f=!1;for(const p in _o.state.cached){const h=_o.state.cached[p],[b,x]=p.split(FC);if(b===u){if(x===t_)f=!0,window.scrollTo({top:h.scrollY,left:h.scrollX,behavior:t?.scrollBehavior});else if(x){const _=document.querySelector(x);_&&(_.scrollLeft=h.scrollX,_.scrollTop=h.scrollY)}}}f||window.scrollTo(0,0),_o.set(p=>({...p,next:{}})),n_=new WeakSet}});return()=>{document.removeEventListener("scroll",i),s(),o()}},[t?.getKey,e])}function K4(t){return H4(t),null}function Q4(t){const e=[];let n;for(;n=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(n.children,t)+1})`),t=n;return`${e.join(" > ")}`.toLowerCase()}function pr(t){return Ul({...t,select:e=>t.select?t.select(e.context):e.context})}let G4={data:""},J4=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||G4,Z4=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Y4=/\/\*[^]*?\*\/|  +/g,DC=/\n+/g,Tl=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Tl(o,s):s+"{"+Tl(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Tl(o,e?e.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Tl.p?Tl.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Ia={},G3=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+G3(t[n]);return e}return t},X4=(t,e,n,r,i)=>{let s=G3(t),o=Ia[s]||(Ia[s]=(u=>{let f=0,p=11;for(;f<u.length;)p=101*p+u.charCodeAt(f++)>>>0;return"go"+p})(s));if(!Ia[o]){let u=s!==t?t:(f=>{let p,h,b=[{}];for(;p=Z4.exec(f.replace(Y4,""));)p[4]?b.shift():p[3]?(h=p[3].replace(DC," ").trim(),b.unshift(b[0][h]=b[0][h]||{})):b[0][p[1]]=p[2].replace(DC," ").trim();return b[0]})(t);Ia[o]=Tl(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&Ia.g?Ia.g:null;return n&&(Ia.g=Ia[o]),((u,f,p,h)=>{h?f.data=f.data.replace(h,u):f.data.indexOf(u)===-1&&(f.data=p?u+f.data:f.data+u)})(Ia[o],e,r,l),o},ez=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":Tl(l,""):l===!1?"":l}return r+i+(o??"")},"");function fv(t){let e=this||{},n=t.call?t(e.p):t;return X4(n.unshift?n.raw?ez(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,J4(e.target),e.g,e.o,e.k)}let J3,HS,KS;fv.bind({g:1});let za=fv.bind({k:1});function tz(t,e,n,r){Tl.p=e,J3=t,HS=n,KS=r}function nc(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let l=Object.assign({},s),u=l.className||i.className;n.p=Object.assign({theme:HS&&HS()},l),n.o=/ *go\d+/.test(u),l.className=fv.apply(n,r)+(u?" "+u:"");let f=t;return t[0]&&(f=l.as||t,delete l.as),KS&&f[0]&&KS(l),J3(f,l)}return i}}var nz=t=>typeof t=="function",ab=(t,e)=>nz(t)?t(e):t,rz=(()=>{let t=0;return()=>(++t).toString()})(),Z3=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),iz=20,Y3=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,iz)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return Y3(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},gy=[],yy={toasts:[],pausedAt:void 0},du=t=>{yy=Y3(yy,t),gy.forEach(e=>{e(yy)})},sz={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},oz=(t={})=>{let[e,n]=H.useState(yy);H.useEffect(()=>(gy.push(n),()=>{let i=gy.indexOf(n);i>-1&&gy.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((s=t[i.type])==null?void 0:s.removeDelay)||t?.removeDelay,duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||t?.duration||sz[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:r}},az=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||rz()}),em=t=>(e,n)=>{let r=az(e,t,n);return du({type:2,toast:r}),r.id},Rn=(t,e)=>em("blank")(t,e);Rn.error=em("error");Rn.success=em("success");Rn.loading=em("loading");Rn.custom=em("custom");Rn.dismiss=t=>{du({type:3,toastId:t})};Rn.remove=t=>du({type:4,toastId:t});Rn.promise=(t,e,n)=>{let r=Rn.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?ab(e.success,i):void 0;return s?Rn.success(s,{id:r,...n,...n?.success}):Rn.dismiss(r),i}).catch(i=>{let s=e.error?ab(e.error,i):void 0;s?Rn.error(s,{id:r,...n,...n?.error}):Rn.dismiss(r)}),t};var lz=(t,e)=>{du({type:1,toast:{id:t,height:e}})},cz=()=>{du({type:5,time:Date.now()})},Gp=new Map,uz=1e3,dz=(t,e=uz)=>{if(Gp.has(t))return;let n=setTimeout(()=>{Gp.delete(t),du({type:4,toastId:t})},e);Gp.set(t,n)},fz=t=>{let{toasts:e,pausedAt:n}=oz(t);H.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let u=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(u<0){l.visible&&Rn.dismiss(l.id);return}return setTimeout(()=>Rn.dismiss(l.id),u)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=H.useCallback(()=>{n&&du({type:6,time:Date.now()})},[n]),i=H.useCallback((s,o)=>{let{reverseOrder:l=!1,gutter:u=8,defaultPosition:f}=o||{},p=e.filter(x=>(x.position||f)===(s.position||f)&&x.height),h=p.findIndex(x=>x.id===s.id),b=p.filter((x,_)=>_<h&&x.visible).length;return p.filter(x=>x.visible).slice(...l?[b+1]:[0,b]).reduce((x,_)=>x+(_.height||0)+u,0)},[e]);return H.useEffect(()=>{e.forEach(s=>{if(s.dismissed)dz(s.id,s.removeDelay);else{let o=Gp.get(s.id);o&&(clearTimeout(o),Gp.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:lz,startPause:cz,endPause:r,calculateOffset:i}}},pz=za`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,hz=za`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,mz=za`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,gz=nc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${hz} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${mz} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,yz=za`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,bz=nc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${yz} 1s linear infinite;
`,vz=za`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,xz=za`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,wz=nc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${vz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${xz} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,_z=nc("div")`
  position: absolute;
`,Sz=nc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ez=za`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Nz=nc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ez} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Iz=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?H.createElement(Nz,null,e):e:n==="blank"?null:H.createElement(Sz,null,H.createElement(bz,{...r}),n!=="loading"&&H.createElement(_z,null,n==="error"?H.createElement(gz,{...r}):H.createElement(wz,{...r})))},kz=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Cz=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Tz="0%{opacity:0;} 100%{opacity:1;}",Rz="0%{opacity:1;} 100%{opacity:0;}",jz=nc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Oz=nc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,qz=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=Z3()?[Tz,Rz]:[kz(n),Cz(n)];return{animation:e?`${za(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${za(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Az=H.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?qz(t.position||e||"top-center",t.visible):{opacity:0},s=H.createElement(Iz,{toast:t}),o=H.createElement(Oz,{...t.ariaProps},ab(t.message,t));return H.createElement(jz,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):H.createElement(H.Fragment,null,s,o))});tz(H.createElement);var Pz=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=H.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(t,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return H.createElement("div",{ref:s,className:e,style:n},i)},Fz=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Z3()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},Dz=fv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Dg=16,Lz=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:u}=fz(n);return H.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Dg,left:Dg,right:Dg,bottom:Dg,pointerEvents:"none",...s},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(f=>{let p=f.position||e,h=u.calculateOffset(f,{reverseOrder:t,gutter:r,defaultPosition:e}),b=Fz(p,h);return H.createElement(Pz,{id:f.id,key:f.id,onHeightUpdate:u.updateHeight,className:f.visible?Dz:"",style:b},f.type==="custom"?ab(f.message,f):i?i(f):H.createElement(Az,{toast:f,position:p}))}))},Mz=Rn;class fu extends Error{}class $z extends fu{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Bz extends fu{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class zz extends fu{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class dd extends fu{}class X3 extends fu{constructor(e){super(`Invalid unit ${e}`)}}class Ii extends fu{}class yl extends fu{constructor(){super("Zone is an abstract class")}}const Ct="numeric",Ao="short",js="long",lb={year:Ct,month:Ct,day:Ct},eA={year:Ct,month:Ao,day:Ct},Wz={year:Ct,month:Ao,day:Ct,weekday:Ao},tA={year:Ct,month:js,day:Ct},nA={year:Ct,month:js,day:Ct,weekday:js},rA={hour:Ct,minute:Ct},iA={hour:Ct,minute:Ct,second:Ct},sA={hour:Ct,minute:Ct,second:Ct,timeZoneName:Ao},oA={hour:Ct,minute:Ct,second:Ct,timeZoneName:js},aA={hour:Ct,minute:Ct,hourCycle:"h23"},lA={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23"},cA={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23",timeZoneName:Ao},uA={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23",timeZoneName:js},dA={year:Ct,month:Ct,day:Ct,hour:Ct,minute:Ct},fA={year:Ct,month:Ct,day:Ct,hour:Ct,minute:Ct,second:Ct},pA={year:Ct,month:Ao,day:Ct,hour:Ct,minute:Ct},hA={year:Ct,month:Ao,day:Ct,hour:Ct,minute:Ct,second:Ct},Vz={year:Ct,month:Ao,day:Ct,weekday:Ao,hour:Ct,minute:Ct},mA={year:Ct,month:js,day:Ct,hour:Ct,minute:Ct,timeZoneName:Ao},gA={year:Ct,month:js,day:Ct,hour:Ct,minute:Ct,second:Ct,timeZoneName:Ao},yA={year:Ct,month:js,day:Ct,weekday:js,hour:Ct,minute:Ct,timeZoneName:js},bA={year:Ct,month:js,day:Ct,weekday:js,hour:Ct,minute:Ct,second:Ct,timeZoneName:js};class tm{get type(){throw new yl}get name(){throw new yl}get ianaName(){return this.name}get isUniversal(){throw new yl}offsetName(e,n){throw new yl}formatOffset(e,n){throw new yl}offset(e){throw new yl}equals(e){throw new yl}get isValid(){throw new yl}}let r_=null;class pv extends tm{static get instance(){return r_===null&&(r_=new pv),r_}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return kA(e,n,r)}formatOffset(e,n){return Jp(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let by={};function Uz(t){return by[t]||(by[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),by[t]}const Hz={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Kz(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,l,u,f,p]=r;return[o,i,s,l,u,f,p]}function Qz(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],l=Hz[s];s==="era"?r[l]=o:pn(l)||(r[l]=parseInt(o,10))}return r}let Lg={};class Wa extends tm{static create(e){return Lg[e]||(Lg[e]=new Wa(e)),Lg[e]}static resetCache(){Lg={},by={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Wa.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return kA(e,n,r,this.name)}formatOffset(e,n){return Jp(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const r=Uz(this.name);let[i,s,o,l,u,f,p]=r.formatToParts?Qz(r,n):Kz(r,n);l==="BC"&&(i=-Math.abs(i)+1);const b=mv({year:i,month:s,day:o,hour:u===24?0:u,minute:f,second:p,millisecond:0});let x=+n;const _=x%1e3;return x-=_>=0?_:1e3+_,(b-x)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let LC={};function Gz(t,e={}){const n=JSON.stringify([t,e]);let r=LC[n];return r||(r=new Intl.ListFormat(t,e),LC[n]=r),r}let QS={};function GS(t,e={}){const n=JSON.stringify([t,e]);let r=QS[n];return r||(r=new Intl.DateTimeFormat(t,e),QS[n]=r),r}let JS={};function Jz(t,e={}){const n=JSON.stringify([t,e]);let r=JS[n];return r||(r=new Intl.NumberFormat(t,e),JS[n]=r),r}let ZS={};function Zz(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=ZS[i];return s||(s=new Intl.RelativeTimeFormat(t,e),ZS[i]=s),s}let jp=null;function Yz(){return jp||(jp=new Intl.DateTimeFormat().resolvedOptions().locale,jp)}let MC={};function Xz(t){let e=MC[t];if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,MC[t]=e}return e}function eW(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=GS(t).resolvedOptions(),i=t}catch{const u=t.substring(0,n);r=GS(u).resolvedOptions(),i=u}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function tW(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function nW(t){const e=[];for(let n=1;n<=12;n++){const r=fn.utc(2009,n,1);e.push(t(r))}return e}function rW(t){const e=[];for(let n=1;n<=7;n++){const r=fn.utc(2016,11,13+n);e.push(t(r))}return e}function Mg(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function iW(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class sW{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const l={useGrouping:!1,...r};r.padTo>0&&(l.minimumIntegerDigits=r.padTo),this.inf=Jz(e,l)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):vN(e,3);return Jr(n,this.padTo)}}}class oW{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Wa.create(l).valid?(i=l,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=GS(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class aW{constructor(e,n,r){this.opts={style:"long",...r},!n&&NA()&&(this.rtf=Zz(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):RW(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const lW={firstDay:1,minimalDays:4,weekend:[6,7]};class Wn{static fromOpts(e){return Wn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){const o=e||jr.defaultLocale,l=o||(s?"en-US":Yz()),u=n||jr.defaultNumberingSystem,f=r||jr.defaultOutputCalendar,p=YS(i)||jr.defaultWeekSettings;return new Wn(l,u,f,p,o)}static resetCache(){jp=null,QS={},JS={},ZS={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Wn.create(e,n,r,i)}constructor(e,n,r,i,s){const[o,l,u]=eW(e);this.locale=o,this.numberingSystem=n||l||null,this.outputCalendar=r||u||null,this.weekSettings=i,this.intl=tW(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=iW(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Wn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,YS(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return Mg(this,e,RA,()=>{const r=n?{month:e,day:"numeric"}:{month:e},i=n?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=nW(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,n=!1){return Mg(this,e,qA,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=rW(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Mg(this,void 0,()=>AA,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[fn.utc(2016,11,13,9),fn.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Mg(this,e,PA,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[fn.utc(-40,1,1),fn.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),s=i.formatToParts(),o=s.find(l=>l.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new sW(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new oW(e,this.intl,n)}relFormatter(e={}){return new aW(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Gz(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:IA()?Xz(this.locale):lW}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let i_=null;class Vi extends tm{static get utcInstance(){return i_===null&&(i_=new Vi(0)),i_}static instance(e){return e===0?Vi.utcInstance:new Vi(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Vi(gv(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Jp(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Jp(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return Jp(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class cW extends tm{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Rl(t,e){if(pn(t)||t===null)return e;if(t instanceof tm)return t;if(mW(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?pv.instance:n==="utc"||n==="gmt"?Vi.utcInstance:Vi.parseSpecifier(n)||Wa.create(t)}else return Ll(t)?Vi.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new cW(t)}const mN={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},$C={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},uW=mN.hanidec.replace(/[\[|\]]/g,"").split("");function dW(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(mN.hanidec)!==-1)e+=uW.indexOf(t[n]);else for(const i in $C){const[s,o]=$C[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}let ad={};function fW(){ad={}}function xo({numberingSystem:t},e=""){const n=t||"latn";return ad[n]||(ad[n]={}),ad[n][e]||(ad[n][e]=new RegExp(`${mN[n]}${e}`)),ad[n][e]}let BC=()=>Date.now(),zC="system",WC=null,VC=null,UC=null,HC=60,KC,QC=null;class jr{static get now(){return BC}static set now(e){BC=e}static set defaultZone(e){zC=e}static get defaultZone(){return Rl(zC,pv.instance)}static get defaultLocale(){return WC}static set defaultLocale(e){WC=e}static get defaultNumberingSystem(){return VC}static set defaultNumberingSystem(e){VC=e}static get defaultOutputCalendar(){return UC}static set defaultOutputCalendar(e){UC=e}static get defaultWeekSettings(){return QC}static set defaultWeekSettings(e){QC=YS(e)}static get twoDigitCutoffYear(){return HC}static set twoDigitCutoffYear(e){HC=e%100}static get throwOnInvalid(){return KC}static set throwOnInvalid(e){KC=e}static resetCaches(){Wn.resetCache(),Wa.resetCache(),fn.resetCache(),fW()}}class Ro{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const vA=[0,31,59,90,120,151,181,212,243,273,304,334],xA=[0,31,60,91,121,152,182,213,244,274,305,335];function so(t,e){return new Ro("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function gN(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function wA(t,e,n){return n+(nm(t)?xA:vA)[e-1]}function _A(t,e){const n=nm(t)?xA:vA,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function yN(t,e){return(t-e+7)%7+1}function cb(t,e=4,n=1){const{year:r,month:i,day:s}=t,o=wA(r,i,s),l=yN(gN(r,i,s),n);let u=Math.floor((o-l+14-e)/7),f;return u<1?(f=r-1,u=dh(f,e,n)):u>dh(r,e,n)?(f=r+1,u=1):f=r,{weekYear:f,weekNumber:u,weekday:l,...yv(t)}}function GC(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=t,o=yN(gN(r,1,e),n),l=Sd(r);let u=i*7+s-o-7+e,f;u<1?(f=r-1,u+=Sd(f)):u>l?(f=r+1,u-=Sd(r)):f=r;const{month:p,day:h}=_A(f,u);return{year:f,month:p,day:h,...yv(t)}}function s_(t){const{year:e,month:n,day:r}=t,i=wA(e,n,r);return{year:e,ordinal:i,...yv(t)}}function JC(t){const{year:e,ordinal:n}=t,{month:r,day:i}=_A(e,n);return{year:e,month:r,day:i,...yv(t)}}function ZC(t,e){if(!pn(t.localWeekday)||!pn(t.localWeekNumber)||!pn(t.localWeekYear)){if(!pn(t.weekday)||!pn(t.weekNumber)||!pn(t.weekYear))throw new dd("Cannot mix locale-based week fields with ISO-based week fields");return pn(t.localWeekday)||(t.weekday=t.localWeekday),pn(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),pn(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function pW(t,e=4,n=1){const r=hv(t.weekYear),i=oo(t.weekNumber,1,dh(t.weekYear,e,n)),s=oo(t.weekday,1,7);return r?i?s?!1:so("weekday",t.weekday):so("week",t.weekNumber):so("weekYear",t.weekYear)}function hW(t){const e=hv(t.year),n=oo(t.ordinal,1,Sd(t.year));return e?n?!1:so("ordinal",t.ordinal):so("year",t.year)}function SA(t){const e=hv(t.year),n=oo(t.month,1,12),r=oo(t.day,1,ub(t.year,t.month));return e?n?r?!1:so("day",t.day):so("month",t.month):so("year",t.year)}function EA(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=oo(e,0,23)||e===24&&n===0&&r===0&&i===0,o=oo(n,0,59),l=oo(r,0,59),u=oo(i,0,999);return s?o?l?u?!1:so("millisecond",i):so("second",r):so("minute",n):so("hour",e)}function pn(t){return typeof t>"u"}function Ll(t){return typeof t=="number"}function hv(t){return typeof t=="number"&&t%1===0}function mW(t){return typeof t=="string"}function gW(t){return Object.prototype.toString.call(t)==="[object Date]"}function NA(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function IA(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function yW(t){return Array.isArray(t)?t:[t]}function YC(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function bW(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Md(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function YS(t){if(t==null)return null;if(typeof t!="object")throw new Ii("Week settings must be an object");if(!oo(t.firstDay,1,7)||!oo(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!oo(e,1,7)))throw new Ii("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function oo(t,e,n){return hv(t)&&t>=e&&t<=n}function vW(t,e){return t-e*Math.floor(t/e)}function Jr(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Il(t){if(!(pn(t)||t===null||t===""))return parseInt(t,10)}function Tc(t){if(!(pn(t)||t===null||t===""))return parseFloat(t)}function bN(t){if(!(pn(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function vN(t,e,n=!1){const r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function nm(t){return t%4===0&&(t%100!==0||t%400===0)}function Sd(t){return nm(t)?366:365}function ub(t,e){const n=vW(e-1,12)+1,r=t+(e-n)/12;return n===2?nm(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function mv(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function XC(t,e,n){return-yN(gN(t,1,e),n)+e-1}function dh(t,e=4,n=1){const r=XC(t,e,n),i=XC(t+1,e,n);return(Sd(t)-r+i)/7}function XS(t){return t>99?t:t>jr.twoDigitCutoffYear?1900+t:2e3+t}function kA(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},l=new Intl.DateTimeFormat(n,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return l?l.value:null}function gv(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function CA(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Ii(`Invalid unit value ${t}`);return e}function db(t,e){const n={};for(const r in t)if(Md(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=CA(i)}return n}function Jp(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Jr(n,2)}:${Jr(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Jr(n,2)}${Jr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function yv(t){return bW(t,["hour","minute","second","millisecond"])}const xW=["January","February","March","April","May","June","July","August","September","October","November","December"],TA=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wW=["J","F","M","A","M","J","J","A","S","O","N","D"];function RA(t){switch(t){case"narrow":return[...wW];case"short":return[...TA];case"long":return[...xW];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const jA=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],OA=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],_W=["M","T","W","T","F","S","S"];function qA(t){switch(t){case"narrow":return[..._W];case"short":return[...OA];case"long":return[...jA];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const AA=["AM","PM"],SW=["Before Christ","Anno Domini"],EW=["BC","AD"],NW=["B","A"];function PA(t){switch(t){case"narrow":return[...NW];case"short":return[...EW];case"long":return[...SW];default:return null}}function IW(t){return AA[t.hour<12?0:1]}function kW(t,e){return qA(e)[t.weekday-1]}function CW(t,e){return RA(e)[t.month-1]}function TW(t,e){return PA(e)[t.year<0?0:1]}function RW(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),u=l===1,f=i[t],p=r?u?f[1]:f[2]||f[1]:u?i[t][0]:t;return o?`${l} ${p} ago`:`in ${l} ${p}`}function eT(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const jW={D:lb,DD:eA,DDD:tA,DDDD:nA,t:rA,tt:iA,ttt:sA,tttt:oA,T:aA,TT:lA,TTT:cA,TTTT:uA,f:dA,ff:pA,fff:mA,ffff:yA,F:fA,FF:hA,FFF:gA,FFFF:bA};class Ci{static create(e,n={}){return new Ci(e,n)}static parseFormat(e){let n=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||l===n?r+=l:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=l,n=l)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return jW[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Jr(e,n);const r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(x,_)=>this.loc.extract(e,x,_),o=x=>e.isOffsetFixed&&e.offset===0&&x.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,x.format):"",l=()=>r?IW(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(x,_)=>r?CW(e,x):s(_?{month:x}:{month:x,day:"numeric"},"month"),f=(x,_)=>r?kW(e,x):s(_?{weekday:x}:{weekday:x,month:"long",day:"numeric"},"weekday"),p=x=>{const _=Ci.macroTokenToFormatOpts(x);return _?this.formatWithSystemDefault(e,_):x},h=x=>r?TW(e,x):s({era:x},"era"),b=x=>{switch(x){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(x)}};return eT(Ci.parseFormat(n),b)}formatDurationFromString(e,n){const r=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=u=>f=>{const p=r(f);return p?this.num(u.get(p),f.length):f},s=Ci.parseFormat(n),o=s.reduce((u,{literal:f,val:p})=>f?u:u.concat(p),[]),l=e.shiftTo(...o.map(r).filter(u=>u));return eT(s,i(l))}}const FA=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function rf(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function sf(...t){return e=>t.reduce(([n,r,i],s)=>{const[o,l,u]=s(e,i);return[{...n,...o},l||r,u]},[{},null,1]).slice(0,2)}function of(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function DA(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=Il(e[n+i]);return[r,null,n+i]}}const LA=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,OW=`(?:${LA.source}?(?:\\[(${FA.source})\\])?)?`,xN=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,MA=RegExp(`${xN.source}${OW}`),wN=RegExp(`(?:T${MA.source})?`),qW=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,AW=/(\d{4})-?W(\d\d)(?:-?(\d))?/,PW=/(\d{4})-?(\d{3})/,FW=DA("weekYear","weekNumber","weekDay"),DW=DA("year","ordinal"),LW=/(\d{4})-(\d\d)-(\d\d)/,$A=RegExp(`${xN.source} ?(?:${LA.source}|(${FA.source}))?`),MW=RegExp(`(?: ${$A.source})?`);function Ed(t,e,n){const r=t[e];return pn(r)?n:Il(r)}function $W(t,e){return[{year:Ed(t,e),month:Ed(t,e+1,1),day:Ed(t,e+2,1)},null,e+3]}function af(t,e){return[{hours:Ed(t,e,0),minutes:Ed(t,e+1,0),seconds:Ed(t,e+2,0),milliseconds:bN(t[e+3])},null,e+4]}function rm(t,e){const n=!t[e]&&!t[e+1],r=gv(t[e+1],t[e+2]),i=n?null:Vi.instance(r);return[{},i,e+3]}function im(t,e){const n=t[e]?Wa.create(t[e]):null;return[{},n,e+1]}const BW=RegExp(`^T?${xN.source}$`),zW=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function WW(t){const[e,n,r,i,s,o,l,u,f]=t,p=e[0]==="-",h=u&&u[0]==="-",b=(x,_=!1)=>x!==void 0&&(_||x&&p)?-x:x;return[{years:b(Tc(n)),months:b(Tc(r)),weeks:b(Tc(i)),days:b(Tc(s)),hours:b(Tc(o)),minutes:b(Tc(l)),seconds:b(Tc(u),u==="-0"),milliseconds:b(bN(f),h)}]}const VW={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function _N(t,e,n,r,i,s,o){const l={year:e.length===2?XS(Il(e)):Il(e),month:TA.indexOf(n)+1,day:Il(r),hour:Il(i),minute:Il(s)};return o&&(l.second=Il(o)),t&&(l.weekday=t.length>3?jA.indexOf(t)+1:OA.indexOf(t)+1),l}const UW=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function HW(t){const[,e,n,r,i,s,o,l,u,f,p,h]=t,b=_N(e,i,r,n,s,o,l);let x;return u?x=VW[u]:f?x=0:x=gv(p,h),[b,new Vi(x)]}function KW(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const QW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,GW=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,JW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function tT(t){const[,e,n,r,i,s,o,l]=t;return[_N(e,i,r,n,s,o,l),Vi.utcInstance]}function ZW(t){const[,e,n,r,i,s,o,l]=t;return[_N(e,l,n,r,i,s,o),Vi.utcInstance]}const YW=rf(qW,wN),XW=rf(AW,wN),e6=rf(PW,wN),t6=rf(MA),BA=sf($W,af,rm,im),n6=sf(FW,af,rm,im),r6=sf(DW,af,rm,im),i6=sf(af,rm,im);function s6(t){return of(t,[YW,BA],[XW,n6],[e6,r6],[t6,i6])}function o6(t){return of(KW(t),[UW,HW])}function a6(t){return of(t,[QW,tT],[GW,tT],[JW,ZW])}function l6(t){return of(t,[zW,WW])}const c6=sf(af);function u6(t){return of(t,[BW,c6])}const d6=rf(LW,MW),f6=rf($A),p6=sf(af,rm,im);function h6(t){return of(t,[d6,BA],[f6,p6])}const nT="Invalid Duration",zA={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},m6={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...zA},Ys=146097/400,Qu=146097/4800,g6={years:{quarters:4,months:12,weeks:Ys/7,days:Ys,hours:Ys*24,minutes:Ys*24*60,seconds:Ys*24*60*60,milliseconds:Ys*24*60*60*1e3},quarters:{months:3,weeks:Ys/28,days:Ys/4,hours:Ys*24/4,minutes:Ys*24*60/4,seconds:Ys*24*60*60/4,milliseconds:Ys*24*60*60*1e3/4},months:{weeks:Qu/7,days:Qu,hours:Qu*24,minutes:Qu*24*60,seconds:Qu*24*60*60,milliseconds:Qu*24*60*60*1e3},...zA},zc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],y6=zc.slice(0).reverse();function bl(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new An(r)}function WA(t,e){let n=e.milliseconds??0;for(const r of y6.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function rT(t,e){const n=WA(t,e)<0?-1:1;zc.reduceRight((r,i)=>{if(pn(e[i]))return r;if(r){const s=e[r]*n,o=t[i][r],l=Math.floor(s/o);e[i]+=l*n,e[r]-=l*o*n}return i},null),zc.reduce((r,i)=>{if(pn(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function b6(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class An{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?g6:m6;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Wn.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return An.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new Ii(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new An({values:db(e,An.normalizeUnit),loc:Wn.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Ll(e))return An.fromMillis(e);if(An.isDuration(e))return e;if(typeof e=="object")return An.fromObject(e);throw new Ii(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=l6(e);return r?An.fromObject(r,n):An.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=u6(e);return r?An.fromObject(r,n):An.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new Ii("need to specify a reason the Duration is invalid");const r=e instanceof Ro?e:new Ro(e,n);if(jr.throwOnInvalid)throw new zz(r);return new An({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new X3(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Ci.create(this.loc,r).formatDurationFromString(this,e):nT}toHuman(e={}){if(!this.isValid)return nT;const n=zc.map(r=>{const i=this.values[r];return pn(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=vN(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},fn.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?WA(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e),r={};for(const i of zc)(Md(n.values,i)||Md(this.values,i))&&(r[i]=n.get(i)+this.get(i));return bl(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=CA(e(this.values[r],r));return bl(this,{values:n},!0)}get(e){return this[An.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...db(e,An.normalizeUnit)};return bl(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return bl(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return rT(this.matrix,e),bl(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=b6(this.normalize().shiftToAll().toObject());return bl(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>An.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of zc)if(e.indexOf(o)>=0){s=o;let l=0;for(const f in r)l+=this.matrix[f][o]*r[f],r[f]=0;Ll(i[o])&&(l+=i[o]);const u=Math.trunc(l);n[o]=u,r[o]=(l*1e3-u*1e3)/1e3}else Ll(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return rT(this.matrix,n),bl(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return bl(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of zc)if(!n(this.values[r],e.values[r]))return!1;return!0}}const Gu="Invalid Interval";function v6(t,e){return!t||!t.isValid?Rr.invalid("missing or invalid start"):!e||!e.isValid?Rr.invalid("missing or invalid end"):e<t?Rr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Rr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new Ii("need to specify a reason the Interval is invalid");const r=e instanceof Ro?e:new Ro(e,n);if(jr.throwOnInvalid)throw new Bz(r);return new Rr({invalid:r})}static fromDateTimes(e,n){const r=pp(e),i=pp(n),s=v6(r,i);return s??new Rr({start:r,end:i})}static after(e,n){const r=An.fromDurationLike(n),i=pp(e);return Rr.fromDateTimes(i,i.plus(r))}static before(e,n){const r=An.fromDurationLike(n),i=pp(e);return Rr.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=fn.fromISO(r,n),o=s.isValid}catch{o=!1}let l,u;try{l=fn.fromISO(i,n),u=l.isValid}catch{u=!1}if(o&&u)return Rr.fromDateTimes(s,l);if(o){const f=An.fromISO(i,n);if(f.isValid)return Rr.after(s,f)}else if(u){const f=An.fromISO(r,n);if(f.isValid)return Rr.before(l,f)}}return Rr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Rr.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(pp).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,l=+o>+this.e?this.e:o;r.push(Rr.fromDateTimes(i,l)),i=l,s+=1}return r}splitBy(e){const n=An.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const l=this.start.plus(n.mapUnits(u=>u*i));s=+l>+this.e?this.e:l,o.push(Rr.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:Rr.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Rr.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),l=o.sort((u,f)=>u.time-f.time);for(const u of l)r+=u.type==="s"?1:-1,r===1?n=u.time:(n&&+n!=+u.time&&i.push(Rr.fromDateTimes(n,u.time)),n=null);return Rr.merge(i)}difference(...e){return Rr.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Gu}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=lb,n={}){return this.isValid?Ci.create(this.s.loc.clone(n),e).formatInterval(this):Gu}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Gu}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Gu}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Gu}toFormat(e,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:Gu}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):An.invalid(this.invalidReason)}mapEndpoints(e){return Rr.fromDateTimes(e(this.s),e(this.e))}}class $g{static hasDST(e=jr.defaultZone){const n=fn.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return Wa.isValidZone(e)}static normalizeZone(e){return Rl(e,jr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Wn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Wn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Wn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Wn.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Wn.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Wn.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Wn.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Wn.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Wn.create(n,null,"gregory").eras(e)}static features(){return{relative:NA(),localeWeek:IA()}}}function iT(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(An.fromMillis(r).as("days"))}function x6(t,e,n){const r=[["years",(u,f)=>f.year-u.year],["quarters",(u,f)=>f.quarter-u.quarter+(f.year-u.year)*4],["months",(u,f)=>f.month-u.month+(f.year-u.year)*12],["weeks",(u,f)=>{const p=iT(u,f);return(p-p%7)/7}],["days",iT]],i={},s=t;let o,l;for(const[u,f]of r)n.indexOf(u)>=0&&(o=u,i[u]=f(t,e),l=s.plus(i),l>e?(i[u]--,t=s.plus(i),t>e&&(l=t,i[u]--,t=s.plus(i))):t=l);return[t,i,l,o]}function w6(t,e,n,r){let[i,s,o,l]=x6(t,e,n);const u=e-i,f=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);f.length===0&&(o<e&&(o=i.plus({[l]:1})),o!==i&&(s[l]=(s[l]||0)+u/(o-i)));const p=An.fromObject(s,r);return f.length>0?An.fromMillis(u,r).shiftTo(...f).plus(p):p}const _6="missing Intl.DateTimeFormat.formatToParts support";function Mn(t,e=n=>n){return{regex:t,deser:([n])=>e(dW(n))}}const S6="\xa0",VA=`[ ${S6}]`,UA=new RegExp(VA,"g");function E6(t){return t.replace(/\./g,"\\.?").replace(UA,VA)}function sT(t){return t.replace(/\./g,"").replace(UA," ").toLowerCase()}function wo(t,e){return t===null?null:{regex:RegExp(t.map(E6).join("|")),deser:([n])=>t.findIndex(r=>sT(n)===sT(r))+e}}function oT(t,e){return{regex:t,deser:([,n,r])=>gv(n,r),groups:e}}function Bg(t){return{regex:t,deser:([e])=>e}}function N6(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function I6(t,e){const n=xo(e),r=xo(e,"{2}"),i=xo(e,"{3}"),s=xo(e,"{4}"),o=xo(e,"{6}"),l=xo(e,"{1,2}"),u=xo(e,"{1,3}"),f=xo(e,"{1,6}"),p=xo(e,"{1,9}"),h=xo(e,"{2,4}"),b=xo(e,"{4,6}"),x=I=>({regex:RegExp(N6(I.val)),deser:([T])=>T,literal:!0}),E=(I=>{if(t.literal)return x(I);switch(I.val){case"G":return wo(e.eras("short"),0);case"GG":return wo(e.eras("long"),0);case"y":return Mn(f);case"yy":return Mn(h,XS);case"yyyy":return Mn(s);case"yyyyy":return Mn(b);case"yyyyyy":return Mn(o);case"M":return Mn(l);case"MM":return Mn(r);case"MMM":return wo(e.months("short",!0),1);case"MMMM":return wo(e.months("long",!0),1);case"L":return Mn(l);case"LL":return Mn(r);case"LLL":return wo(e.months("short",!1),1);case"LLLL":return wo(e.months("long",!1),1);case"d":return Mn(l);case"dd":return Mn(r);case"o":return Mn(u);case"ooo":return Mn(i);case"HH":return Mn(r);case"H":return Mn(l);case"hh":return Mn(r);case"h":return Mn(l);case"mm":return Mn(r);case"m":return Mn(l);case"q":return Mn(l);case"qq":return Mn(r);case"s":return Mn(l);case"ss":return Mn(r);case"S":return Mn(u);case"SSS":return Mn(i);case"u":return Bg(p);case"uu":return Bg(l);case"uuu":return Mn(n);case"a":return wo(e.meridiems(),0);case"kkkk":return Mn(s);case"kk":return Mn(h,XS);case"W":return Mn(l);case"WW":return Mn(r);case"E":case"c":return Mn(n);case"EEE":return wo(e.weekdays("short",!1),1);case"EEEE":return wo(e.weekdays("long",!1),1);case"ccc":return wo(e.weekdays("short",!0),1);case"cccc":return wo(e.weekdays("long",!0),1);case"Z":case"ZZ":return oT(new RegExp(`([+-]${l.source})(?::(${r.source}))?`),2);case"ZZZ":return oT(new RegExp(`([+-]${l.source})(${r.source})?`),2);case"z":return Bg(/[a-z_+-/]{1,256}?/i);case" ":return Bg(/[^\S\n\r]/);default:return x(I)}})(t)||{invalidReason:_6};return E.token=t,E}const k6={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function C6(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const u=/^\s+$/.test(i);return{literal:!u,val:u?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let l=k6[o];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function T6(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function R6(t,e,n){const r=t.match(e);if(r){const i={};let s=1;for(const o in n)if(Md(n,o)){const l=n[o],u=l.groups?l.groups+1:1;!l.literal&&l.token&&(i[l.token.val[0]]=l.deser(r.slice(s,s+u))),s+=u}return[r,i]}else return[r,{}]}function j6(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return pn(t.z)||(n=Wa.create(t.z)),pn(t.Z)||(n||(n=new Vi(t.Z)),r=t.Z),pn(t.q)||(t.M=(t.q-1)*3+1),pn(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),pn(t.u)||(t.S=bN(t.u)),[Object.keys(t).reduce((s,o)=>{const l=e(o);return l&&(s[l]=t[o]),s},{}),n,r]}let o_=null;function O6(){return o_||(o_=fn.fromMillis(0x16a2e5618e3)),o_}function q6(t,e){if(t.literal)return t;const n=Ci.macroTokenToFormatOpts(t.val),r=GA(n,e);return r==null||r.includes(void 0)?t:r}function HA(t,e){return Array.prototype.concat(...t.map(n=>q6(n,e)))}class KA{constructor(e,n){if(this.locale=e,this.format=n,this.tokens=HA(Ci.parseFormat(n),e),this.units=this.tokens.map(r=>I6(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=T6(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[n,r]=R6(e,this.regex,this.handlers),[i,s,o]=r?j6(r):[null,null,void 0];if(Md(r,"a")&&Md(r,"H"))throw new dd("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function QA(t,e,n){return new KA(t,n).explainFromTokens(e)}function A6(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=QA(t,e,n);return[r,i,s,o]}function GA(t,e){if(!t)return null;const r=Ci.create(e,t).dtFormatter(O6()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>C6(o,t,s))}const a_="Invalid DateTime",P6=864e13;function Op(t){return new Ro("unsupported zone",`the zone "${t.name}" is not supported`)}function l_(t){return t.weekData===null&&(t.weekData=cb(t.c)),t.weekData}function c_(t){return t.localWeekData===null&&(t.localWeekData=cb(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Rc(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new fn({...n,...e,old:n})}function JA(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function zg(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function vy(t,e,n){return JA(mv(t),e,n)}function aT(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,ub(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=An.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=mv(s);let[u,f]=JA(l,n,t.zone);return o!==0&&(u+=o,f=t.zone.offset(u)),{ts:u,o:f}}function Ju(t,e,n,r,i,s){const{setZone:o,zone:l}=n;if(t&&Object.keys(t).length!==0||e){const u=e||l,f=fn.fromObject(t,{...n,zone:u,specificOffset:s});return o?f:f.setZone(l)}else return fn.invalid(new Ro("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Wg(t,e,n=!0){return t.isValid?Ci.create(Wn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function u_(t,e){const n=t.c.year>9999||t.c.year<0;let r="";return n&&t.c.year>=0&&(r+="+"),r+=Jr(t.c.year,n?6:4),e?(r+="-",r+=Jr(t.c.month),r+="-",r+=Jr(t.c.day)):(r+=Jr(t.c.month),r+=Jr(t.c.day)),r}function lT(t,e,n,r,i,s){let o=Jr(t.c.hour);return e?(o+=":",o+=Jr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=":")):o+=Jr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=Jr(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=Jr(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Jr(Math.trunc(-t.o/60)),o+=":",o+=Jr(Math.trunc(-t.o%60))):(o+="+",o+=Jr(Math.trunc(t.o/60)),o+=":",o+=Jr(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const ZA={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},F6={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},D6={ordinal:1,hour:0,minute:0,second:0,millisecond:0},YA=["year","month","day","hour","minute","second","millisecond"],L6=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],M6=["year","ordinal","hour","minute","second","millisecond"];function $6(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new X3(t);return e}function cT(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return $6(t)}}function B6(t){return wy[t]||(xy===void 0&&(xy=jr.now()),wy[t]=t.offset(xy)),wy[t]}function uT(t,e){const n=Rl(e.zone,jr.defaultZone);if(!n.isValid)return fn.invalid(Op(n));const r=Wn.fromObject(e);let i,s;if(pn(t.year))i=jr.now();else{for(const u of YA)pn(t[u])&&(t[u]=ZA[u]);const o=SA(t)||EA(t);if(o)return fn.invalid(o);const l=B6(n);[i,s]=vy(t,l,n)}return new fn({ts:i,zone:n,loc:r,o:s})}function dT(t,e,n){const r=pn(n.round)?!0:n.round,i=(o,l)=>(o=vN(o,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(o,l)),s=o=>n.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(n.unit)return i(s(n.unit),n.unit);for(const o of n.units){const l=s(o);if(Math.abs(l)>=1)return i(l,o)}return i(t>e?-0:0,n.units[n.units.length-1])}function fT(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}let xy,wy={};class fn{constructor(e){const n=e.zone||jr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Ro("invalid input"):null)||(n.isValid?null:Op(n));this.ts=pn(e.ts)?jr.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{const l=Ll(e.o)&&!e.old?e.o:n.offset(this.ts);i=zg(this.ts,l),r=Number.isNaN(i.year)?new Ro("invalid input"):null,i=r?null:i,s=r?null:l}this._zone=n,this.loc=e.loc||Wn.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new fn({})}static local(){const[e,n]=fT(arguments),[r,i,s,o,l,u,f]=n;return uT({year:r,month:i,day:s,hour:o,minute:l,second:u,millisecond:f},e)}static utc(){const[e,n]=fT(arguments),[r,i,s,o,l,u,f]=n;return e.zone=Vi.utcInstance,uT({year:r,month:i,day:s,hour:o,minute:l,second:u,millisecond:f},e)}static fromJSDate(e,n={}){const r=gW(e)?e.valueOf():NaN;if(Number.isNaN(r))return fn.invalid("invalid input");const i=Rl(n.zone,jr.defaultZone);return i.isValid?new fn({ts:r,zone:i,loc:Wn.fromObject(n)}):fn.invalid(Op(i))}static fromMillis(e,n={}){if(Ll(e))return e<-864e13||e>P6?fn.invalid("Timestamp out of range"):new fn({ts:e,zone:Rl(n.zone,jr.defaultZone),loc:Wn.fromObject(n)});throw new Ii(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Ll(e))return new fn({ts:e*1e3,zone:Rl(n.zone,jr.defaultZone),loc:Wn.fromObject(n)});throw new Ii("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=Rl(n.zone,jr.defaultZone);if(!r.isValid)return fn.invalid(Op(r));const i=Wn.fromObject(n),s=db(e,cT),{minDaysInFirstWeek:o,startOfWeek:l}=ZC(s,i),u=jr.now(),f=pn(n.specificOffset)?r.offset(u):n.specificOffset,p=!pn(s.ordinal),h=!pn(s.year),b=!pn(s.month)||!pn(s.day),x=h||b,_=s.weekYear||s.weekNumber;if((x||p)&&_)throw new dd("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&p)throw new dd("Can't mix ordinal dates with month/day");const E=_||s.weekday&&!x;let I,T,C=zg(u,f);E?(I=L6,T=F6,C=cb(C,o,l)):p?(I=M6,T=D6,C=s_(C)):(I=YA,T=ZA);let j=!1;for(const z of I){const F=s[z];pn(F)?j?s[z]=T[z]:s[z]=C[z]:j=!0}const q=E?pW(s,o,l):p?hW(s):SA(s),L=q||EA(s);if(L)return fn.invalid(L);const M=E?GC(s,o,l):p?JC(s):s,[W,P]=vy(M,f,r),O=new fn({ts:W,zone:r,o:P,loc:i});return s.weekday&&x&&e.weekday!==O.weekday?fn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${O.toISO()}`):O.isValid?O:fn.invalid(O.invalid)}static fromISO(e,n={}){const[r,i]=s6(e);return Ju(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=o6(e);return Ju(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=a6(e);return Ju(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(pn(e)||pn(n))throw new Ii("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Wn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[l,u,f,p]=A6(o,e,n);return p?fn.invalid(p):Ju(l,u,r,`format ${n}`,e,f)}static fromString(e,n,r={}){return fn.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=h6(e);return Ju(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new Ii("need to specify a reason the DateTime is invalid");const r=e instanceof Ro?e:new Ro(e,n);if(jr.throwOnInvalid)throw new $z(r);return new fn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=GA(e,Wn.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return HA(Ci.parseFormat(e),Wn.fromObject(n)).map(i=>i.val).join("")}static resetCache(){xy=void 0,wy={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?l_(this).weekYear:NaN}get weekNumber(){return this.isValid?l_(this).weekNumber:NaN}get weekday(){return this.isValid?l_(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?c_(this).weekday:NaN}get localWeekNumber(){return this.isValid?c_(this).weekNumber:NaN}get localWeekYear(){return this.isValid?c_(this).weekYear:NaN}get ordinal(){return this.isValid?s_(this.c).ordinal:NaN}get monthShort(){return this.isValid?$g.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?$g.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?$g.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?$g.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=mv(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*n),l=this.zone.offset(r-s*n);if(o===l)return[this];const u=r-o*n,f=r-l*n,p=zg(u,o),h=zg(f,l);return p.hour===h.hour&&p.minute===h.minute&&p.second===h.second&&p.millisecond===h.millisecond?[Rc(this,{ts:u}),Rc(this,{ts:f})]:[this]}get isInLeapYear(){return nm(this.year)}get daysInMonth(){return ub(this.year,this.month)}get daysInYear(){return this.isValid?Sd(this.year):NaN}get weeksInWeekYear(){return this.isValid?dh(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?dh(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=Ci.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(Vi.instance(e),n)}toLocal(){return this.setZone(jr.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=Rl(e,jr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const s=e.offset(this.ts),o=this.toObject();[i]=vy(o,s,e)}return Rc(this,{ts:i,zone:e})}else return fn.invalid(Op(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return Rc(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=db(e,cT),{minDaysInFirstWeek:r,startOfWeek:i}=ZC(n,this.loc),s=!pn(n.weekYear)||!pn(n.weekNumber)||!pn(n.weekday),o=!pn(n.ordinal),l=!pn(n.year),u=!pn(n.month)||!pn(n.day),f=l||u,p=n.weekYear||n.weekNumber;if((f||o)&&p)throw new dd("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new dd("Can't mix ordinal dates with month/day");let h;s?h=GC({...cb(this.c,r,i),...n},r,i):pn(n.ordinal)?(h={...this.toObject(),...n},pn(n.day)&&(h.day=Math.min(ub(h.year,h.month),h.day))):h=JC({...s_(this.c),...n});const[b,x]=vy(h,this.o,this.zone);return Rc(this,{ts:b,o:x})}plus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e);return Rc(this,aT(this,n))}minus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e).negate();return Rc(this,aT(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=An.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?Ci.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):a_}toLocaleString(e=lb,n={}){return this.isValid?Ci.create(this.loc.clone(n),e).formatDateTime(this):a_}toLocaleParts(e={}){return this.isValid?Ci.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let l=u_(this,o);return l+="T",l+=lT(this,o,n,r,i,s),l}toISODate({format:e="extended"}={}){return this.isValid?u_(this,e==="extended"):null}toISOWeekDate(){return Wg(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+lT(this,o==="extended",n,e,r,s):null}toRFC2822(){return Wg(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Wg(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?u_(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),Wg(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():a_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return An.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=yW(n).map(An.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,u=o?e:this,f=w6(l,u,s,i);return o?f.negate():f}diffNow(e="milliseconds",n={}){return this.diff(fn.now(),e,n)}until(e){return this.isValid?Rr.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||fn.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),dT(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?dT(e.base||fn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(fn.isDateTime))throw new Ii("min requires all arguments be DateTimes");return YC(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(fn.isDateTime))throw new Ii("max requires all arguments be DateTimes");return YC(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Wn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return QA(o,e,n)}static fromStringExplain(e,n,r={}){return fn.fromFormatExplain(e,n,r)}static buildFormatParser(e,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Wn.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new KA(s,e)}static fromFormatParser(e,n,r={}){if(pn(e)||pn(n))throw new Ii("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Wn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new Ii(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:l,zone:u,specificOffset:f,invalidReason:p}=n.explainFromTokens(e);return p?fn.invalid(p):Ju(l,u,r,`format ${n.format}`,e,f)}static get DATE_SHORT(){return lb}static get DATE_MED(){return eA}static get DATE_MED_WITH_WEEKDAY(){return Wz}static get DATE_FULL(){return tA}static get DATE_HUGE(){return nA}static get TIME_SIMPLE(){return rA}static get TIME_WITH_SECONDS(){return iA}static get TIME_WITH_SHORT_OFFSET(){return sA}static get TIME_WITH_LONG_OFFSET(){return oA}static get TIME_24_SIMPLE(){return aA}static get TIME_24_WITH_SECONDS(){return lA}static get TIME_24_WITH_SHORT_OFFSET(){return cA}static get TIME_24_WITH_LONG_OFFSET(){return uA}static get DATETIME_SHORT(){return dA}static get DATETIME_SHORT_WITH_SECONDS(){return fA}static get DATETIME_MED(){return pA}static get DATETIME_MED_WITH_SECONDS(){return hA}static get DATETIME_MED_WITH_WEEKDAY(){return Vz}static get DATETIME_FULL(){return mA}static get DATETIME_FULL_WITH_SECONDS(){return gA}static get DATETIME_HUGE(){return yA}static get DATETIME_HUGE_WITH_SECONDS(){return bA}}function pp(t){if(fn.isDateTime(t))return t;if(t&&t.valueOf&&Ll(t.valueOf()))return fn.fromJSDate(t);if(t&&typeof t=="object")return fn.fromObject(t);throw new Ii(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function XA(t,e){return function(){return t.apply(e,arguments)}}const{toString:z6}=Object.prototype,{getPrototypeOf:SN}=Object,bv=(t=>e=>{const n=z6.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Mo=t=>(t=t.toLowerCase(),e=>bv(e)===t),vv=t=>e=>typeof e===t,{isArray:lf}=Array,fh=vv("undefined");function W6(t){return t!==null&&!fh(t)&&t.constructor!==null&&!fh(t.constructor)&&Os(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const eP=Mo("ArrayBuffer");function V6(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&eP(t.buffer),e}const U6=vv("string"),Os=vv("function"),tP=vv("number"),xv=t=>t!==null&&typeof t=="object",H6=t=>t===!0||t===!1,_y=t=>{if(bv(t)!=="object")return!1;const e=SN(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},K6=Mo("Date"),Q6=Mo("File"),G6=Mo("Blob"),J6=Mo("FileList"),Z6=t=>xv(t)&&Os(t.pipe),Y6=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Os(t.append)&&((e=bv(t))==="formdata"||e==="object"&&Os(t.toString)&&t.toString()==="[object FormData]"))},X6=Mo("URLSearchParams"),[eV,tV,nV,rV]=["ReadableStream","Request","Response","Headers"].map(Mo),iV=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),lf(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,t[l],l,t)}}function nP(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Wc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,rP=t=>!fh(t)&&t!==Wc;function eE(){const{caseless:t}=rP(this)&&this||{},e={},n=(r,i)=>{const s=t&&nP(e,i)||i;_y(e[s])&&_y(r)?e[s]=eE(e[s],r):_y(r)?e[s]=eE({},r):lf(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&sm(arguments[r],n);return e}const sV=(t,e,n,{allOwnKeys:r}={})=>(sm(e,(i,s)=>{n&&Os(i)?t[s]=XA(i,n):t[s]=i},{allOwnKeys:r}),t),oV=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),aV=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},lV=(t,e,n,r)=>{let i,s,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&SN(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},cV=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},uV=t=>{if(!t)return null;if(lf(t))return t;let e=t.length;if(!tP(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},dV=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&SN(Uint8Array)),fV=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},pV=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},hV=Mo("HTMLFormElement"),mV=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),pT=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),gV=Mo("RegExp"),iP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};sm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},yV=t=>{iP(t,(e,n)=>{if(Os(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Os(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},bV=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return lf(t)?r(t):r(String(t).split(e)),n},vV=()=>{},xV=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,d_="abcdefghijklmnopqrstuvwxyz",hT="0123456789",sP={DIGIT:hT,ALPHA:d_,ALPHA_DIGIT:d_+d_.toUpperCase()+hT},wV=(t=16,e=sP.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function _V(t){return!!(t&&Os(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const SV=t=>{const e=new Array(10),n=(r,i)=>{if(xv(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=lf(r)?[]:{};return sm(r,(o,l)=>{const u=n(o,i+1);!fh(u)&&(s[l]=u)}),e[i]=void 0,s}}return r};return n(t,0)},EV=Mo("AsyncFunction"),NV=t=>t&&(xv(t)||Os(t))&&Os(t.then)&&Os(t.catch),oP=((t,e)=>t?setImmediate:e?((n,r)=>(Wc.addEventListener("message",({source:i,data:s})=>{i===Wc&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Wc.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Os(Wc.postMessage)),IV=typeof queueMicrotask<"u"?queueMicrotask.bind(Wc):typeof process<"u"&&process.nextTick||oP,Ye={isArray:lf,isArrayBuffer:eP,isBuffer:W6,isFormData:Y6,isArrayBufferView:V6,isString:U6,isNumber:tP,isBoolean:H6,isObject:xv,isPlainObject:_y,isReadableStream:eV,isRequest:tV,isResponse:nV,isHeaders:rV,isUndefined:fh,isDate:K6,isFile:Q6,isBlob:G6,isRegExp:gV,isFunction:Os,isStream:Z6,isURLSearchParams:X6,isTypedArray:dV,isFileList:J6,forEach:sm,merge:eE,extend:sV,trim:iV,stripBOM:oV,inherits:aV,toFlatObject:lV,kindOf:bv,kindOfTest:Mo,endsWith:cV,toArray:uV,forEachEntry:fV,matchAll:pV,isHTMLForm:hV,hasOwnProperty:pT,hasOwnProp:pT,reduceDescriptors:iP,freezeMethods:yV,toObjectSet:bV,toCamelCase:mV,noop:vV,toFiniteNumber:xV,findKey:nP,global:Wc,isContextDefined:rP,ALPHABET:sP,generateString:wV,isSpecCompliantForm:_V,toJSONObject:SV,isAsyncFn:EV,isThenable:NV,setImmediate:oP,asap:IV};function _n(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ye.inherits(_n,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ye.toJSONObject(this.config),code:this.code,status:this.status}}});const aP=_n.prototype,lP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{lP[t]={value:t}});Object.defineProperties(_n,lP);Object.defineProperty(aP,"isAxiosError",{value:!0});_n.from=(t,e,n,r,i,s)=>{const o=Object.create(aP);return Ye.toFlatObject(t,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),_n.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const kV=null;function tE(t){return Ye.isPlainObject(t)||Ye.isArray(t)}function cP(t){return Ye.endsWith(t,"[]")?t.slice(0,-2):t}function mT(t,e,n){return t?t.concat(e).map(function(i,s){return i=cP(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function CV(t){return Ye.isArray(t)&&!t.some(tE)}const TV=Ye.toFlatObject(Ye,{},null,function(e){return/^is[A-Z]/.test(e)});function wv(t,e,n){if(!Ye.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ye.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,I){return!Ye.isUndefined(I[E])});const r=n.metaTokens,i=n.visitor||p,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Ye.isSpecCompliantForm(e);if(!Ye.isFunction(i))throw new TypeError("visitor must be a function");function f(_){if(_===null)return"";if(Ye.isDate(_))return _.toISOString();if(!u&&Ye.isBlob(_))throw new _n("Blob is not supported. Use a Buffer instead.");return Ye.isArrayBuffer(_)||Ye.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,E,I){let T=_;if(_&&!I&&typeof _=="object"){if(Ye.endsWith(E,"{}"))E=r?E:E.slice(0,-2),_=JSON.stringify(_);else if(Ye.isArray(_)&&CV(_)||(Ye.isFileList(_)||Ye.endsWith(E,"[]"))&&(T=Ye.toArray(_)))return E=cP(E),T.forEach(function(j,q){!(Ye.isUndefined(j)||j===null)&&e.append(o===!0?mT([E],q,s):o===null?E:E+"[]",f(j))}),!1}return tE(_)?!0:(e.append(mT(I,E,s),f(_)),!1)}const h=[],b=Object.assign(TV,{defaultVisitor:p,convertValue:f,isVisitable:tE});function x(_,E){if(!Ye.isUndefined(_)){if(h.indexOf(_)!==-1)throw Error("Circular reference detected in "+E.join("."));h.push(_),Ye.forEach(_,function(T,C){(!(Ye.isUndefined(T)||T===null)&&i.call(e,T,Ye.isString(C)?C.trim():C,E,b))===!0&&x(T,E?E.concat(C):[C])}),h.pop()}}if(!Ye.isObject(t))throw new TypeError("data must be an object");return x(t),e}function gT(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function EN(t,e){this._pairs=[],t&&wv(t,this,e)}const uP=EN.prototype;uP.append=function(e,n){this._pairs.push([e,n])};uP.toString=function(e){const n=e?function(r){return e.call(this,r,gT)}:gT;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function RV(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function dP(t,e,n){if(!e)return t;const r=n&&n.encode||RV;Ye.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Ye.isURLSearchParams(e)?e.toString():new EN(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class yT{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const fP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jV=typeof URLSearchParams<"u"?URLSearchParams:EN,OV=typeof FormData<"u"?FormData:null,qV=typeof Blob<"u"?Blob:null,AV={isBrowser:!0,classes:{URLSearchParams:jV,FormData:OV,Blob:qV},protocols:["http","https","file","blob","url","data"]},NN=typeof window<"u"&&typeof document<"u",nE=typeof navigator=="object"&&navigator||void 0,PV=NN&&(!nE||["ReactNative","NativeScript","NS"].indexOf(nE.product)<0),FV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",DV=NN&&window.location.href||"http://localhost",LV=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:NN,hasStandardBrowserEnv:PV,hasStandardBrowserWebWorkerEnv:FV,navigator:nE,origin:DV},Symbol.toStringTag,{value:"Module"})),Ti={...LV,...AV};function MV(t,e){return wv(t,new Ti.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ti.isNode&&Ye.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function $V(t){return Ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function BV(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function pP(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=s>=n.length;return o=!o&&Ye.isArray(i)?i.length:o,u?(Ye.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!Ye.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Ye.isArray(i[o])&&(i[o]=BV(i[o])),!l)}if(Ye.isFormData(t)&&Ye.isFunction(t.entries)){const n={};return Ye.forEachEntry(t,(r,i)=>{e($V(r),i,n,0)}),n}return null}function zV(t,e,n){if(Ye.isString(t))try{return(e||JSON.parse)(t),Ye.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const om={transitional:fP,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Ye.isObject(e);if(s&&Ye.isHTMLForm(e)&&(e=new FormData(e)),Ye.isFormData(e))return i?JSON.stringify(pP(e)):e;if(Ye.isArrayBuffer(e)||Ye.isBuffer(e)||Ye.isStream(e)||Ye.isFile(e)||Ye.isBlob(e)||Ye.isReadableStream(e))return e;if(Ye.isArrayBufferView(e))return e.buffer;if(Ye.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return MV(e,this.formSerializer).toString();if((l=Ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return wv(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),zV(e)):e}],transformResponse:[function(e){const n=this.transitional||om.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Ye.isResponse(e)||Ye.isReadableStream(e))return e;if(e&&Ye.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?_n.from(l,_n.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ti.classes.FormData,Blob:Ti.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ye.forEach(["delete","get","head","post","put","patch"],t=>{om.headers[t]={}});const WV=Ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VV=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&WV[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},bT=Symbol("internals");function hp(t){return t&&String(t).trim().toLowerCase()}function Sy(t){return t===!1||t==null?t:Ye.isArray(t)?t.map(Sy):String(t)}function UV(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const HV=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function f_(t,e,n,r,i){if(Ye.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Ye.isString(e)){if(Ye.isString(r))return e.indexOf(r)!==-1;if(Ye.isRegExp(r))return r.test(e)}}function KV(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function QV(t,e){const n=Ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let ps=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,u,f){const p=hp(u);if(!p)throw new Error("header name must be a non-empty string");const h=Ye.findKey(i,p);(!h||i[h]===void 0||f===!0||f===void 0&&i[h]!==!1)&&(i[h||u]=Sy(l))}const o=(l,u)=>Ye.forEach(l,(f,p)=>s(f,p,u));if(Ye.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Ye.isString(e)&&(e=e.trim())&&!HV(e))o(VV(e),n);else if(Ye.isHeaders(e))for(const[l,u]of e.entries())s(u,l,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=hp(e),e){const r=Ye.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return UV(i);if(Ye.isFunction(n))return n.call(this,i,r);if(Ye.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=hp(e),e){const r=Ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||f_(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=hp(o),o){const l=Ye.findKey(r,o);l&&(!n||f_(r,r[l],l,n))&&(delete r[l],i=!0)}}return Ye.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||f_(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Ye.forEach(this,(i,s)=>{const o=Ye.findKey(r,s);if(o){n[o]=Sy(i),delete n[s];return}const l=e?KV(s):String(s).trim();l!==s&&delete n[s],n[l]=Sy(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ye.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Ye.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[bT]=this[bT]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=hp(o);r[l]||(QV(i,o),r[l]=!0)}return Ye.isArray(e)?e.forEach(s):s(e),this}};ps.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ye.reduceDescriptors(ps.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ye.freezeMethods(ps);function p_(t,e){const n=this||om,r=e||n,i=ps.from(r.headers);let s=r.data;return Ye.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function hP(t){return!!(t&&t.__CANCEL__)}function cf(t,e,n){_n.call(this,t??"canceled",_n.ERR_CANCELED,e,n),this.name="CanceledError"}Ye.inherits(cf,_n,{__CANCEL__:!0});function mP(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new _n("Request failed with status code "+n.status,[_n.ERR_BAD_REQUEST,_n.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function GV(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function JV(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),p=r[s];o||(o=f),n[i]=u,r[i]=f;let h=s,b=0;for(;h!==i;)b+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),f-o<e)return;const x=p&&f-p;return x?Math.round(b*1e3/x):void 0}}function ZV(t,e){let n=0,r=1e3/e,i,s;const o=(f,p=Date.now())=>{n=p,i=null,s&&(clearTimeout(s),s=null),t.apply(null,f)};return[(...f)=>{const p=Date.now(),h=p-n;h>=r?o(f,p):(i=f,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const fb=(t,e,n=3)=>{let r=0;const i=JV(50,250);return ZV(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,u=o-r,f=i(u),p=o<=l;r=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:f||void 0,estimated:f&&l&&p?(l-o)/f:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},n)},vT=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},xT=t=>(...e)=>Ye.asap(()=>t(...e)),YV=Ti.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ti.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ti.origin),Ti.navigator&&/(msie|trident)/i.test(Ti.navigator.userAgent)):()=>!0,XV=Ti.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Ye.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ye.isString(r)&&o.push("path="+r),Ye.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function eU(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function tU(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function gP(t,e){return t&&!eU(e)?tU(t,e):e}const wT=t=>t instanceof ps?{...t}:t;function eu(t,e){e=e||{};const n={};function r(f,p,h,b){return Ye.isPlainObject(f)&&Ye.isPlainObject(p)?Ye.merge.call({caseless:b},f,p):Ye.isPlainObject(p)?Ye.merge({},p):Ye.isArray(p)?p.slice():p}function i(f,p,h,b){if(Ye.isUndefined(p)){if(!Ye.isUndefined(f))return r(void 0,f,h,b)}else return r(f,p,h,b)}function s(f,p){if(!Ye.isUndefined(p))return r(void 0,p)}function o(f,p){if(Ye.isUndefined(p)){if(!Ye.isUndefined(f))return r(void 0,f)}else return r(void 0,p)}function l(f,p,h){if(h in e)return r(f,p);if(h in t)return r(void 0,f)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(f,p,h)=>i(wT(f),wT(p),h,!0)};return Ye.forEach(Object.keys(Object.assign({},t,e)),function(p){const h=u[p]||i,b=h(t[p],e[p],p);Ye.isUndefined(b)&&h!==l||(n[p]=b)}),n}const yP=t=>{const e=eu({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=e;e.headers=o=ps.from(o),e.url=dP(gP(e.baseURL,e.url),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(Ye.isFormData(n)){if(Ti.hasStandardBrowserEnv||Ti.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[f,...p]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([f||"multipart/form-data",...p].join("; "))}}if(Ti.hasStandardBrowserEnv&&(r&&Ye.isFunction(r)&&(r=r(e)),r||r!==!1&&YV(e.url))){const f=i&&s&&XV.read(s);f&&o.set(i,f)}return e},nU=typeof XMLHttpRequest<"u",rU=nU&&function(t){return new Promise(function(n,r){const i=yP(t);let s=i.data;const o=ps.from(i.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:f}=i,p,h,b,x,_;function E(){x&&x(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let I=new XMLHttpRequest;I.open(i.method.toUpperCase(),i.url,!0),I.timeout=i.timeout;function T(){if(!I)return;const j=ps.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),L={data:!l||l==="text"||l==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:j,config:t,request:I};mP(function(W){n(W),E()},function(W){r(W),E()},L),I=null}"onloadend"in I?I.onloadend=T:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(T)},I.onabort=function(){I&&(r(new _n("Request aborted",_n.ECONNABORTED,t,I)),I=null)},I.onerror=function(){r(new _n("Network Error",_n.ERR_NETWORK,t,I)),I=null},I.ontimeout=function(){let q=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const L=i.transitional||fP;i.timeoutErrorMessage&&(q=i.timeoutErrorMessage),r(new _n(q,L.clarifyTimeoutError?_n.ETIMEDOUT:_n.ECONNABORTED,t,I)),I=null},s===void 0&&o.setContentType(null),"setRequestHeader"in I&&Ye.forEach(o.toJSON(),function(q,L){I.setRequestHeader(L,q)}),Ye.isUndefined(i.withCredentials)||(I.withCredentials=!!i.withCredentials),l&&l!=="json"&&(I.responseType=i.responseType),f&&([b,_]=fb(f,!0),I.addEventListener("progress",b)),u&&I.upload&&([h,x]=fb(u),I.upload.addEventListener("progress",h),I.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(p=j=>{I&&(r(!j||j.type?new cf(null,t,I):j),I.abort(),I=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const C=GV(i.url);if(C&&Ti.protocols.indexOf(C)===-1){r(new _n("Unsupported protocol "+C+":",_n.ERR_BAD_REQUEST,t));return}I.send(s||null)})},iU=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(f){if(!i){i=!0,l();const p=f instanceof Error?f:this.reason;r.abort(p instanceof _n?p:new cf(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,s(new _n(`timeout ${e} of ms exceeded`,_n.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),t=null)};t.forEach(f=>f.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>Ye.asap(l),u}},sU=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},oU=async function*(t,e){for await(const n of aU(t))yield*sU(n,e)},aU=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},_T=(t,e,n,r)=>{const i=oU(t,e);let s=0,o,l=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:f,value:p}=await i.next();if(f){l(),u.close();return}let h=p.byteLength;if(n){let b=s+=h;n(b)}u.enqueue(new Uint8Array(p))}catch(f){throw l(f),f}},cancel(u){return l(u),i.return()}},{highWaterMark:2})},_v=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",bP=_v&&typeof ReadableStream=="function",lU=_v&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),vP=(t,...e)=>{try{return!!t(...e)}catch{return!1}},cU=bP&&vP(()=>{let t=!1;const e=new Request(Ti.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),ST=64*1024,rE=bP&&vP(()=>Ye.isReadableStream(new Response("").body)),pb={stream:rE&&(t=>t.body)};_v&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!pb[e]&&(pb[e]=Ye.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new _n(`Response type '${e}' is not supported`,_n.ERR_NOT_SUPPORT,r)})})})(new Response);const uU=async t=>{if(t==null)return 0;if(Ye.isBlob(t))return t.size;if(Ye.isSpecCompliantForm(t))return(await new Request(Ti.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ye.isArrayBufferView(t)||Ye.isArrayBuffer(t))return t.byteLength;if(Ye.isURLSearchParams(t)&&(t=t+""),Ye.isString(t))return(await lU(t)).byteLength},dU=async(t,e)=>{const n=Ye.toFiniteNumber(t.getContentLength());return n??uU(e)},fU=_v&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:u,responseType:f,headers:p,withCredentials:h="same-origin",fetchOptions:b}=yP(t);f=f?(f+"").toLowerCase():"text";let x=iU([i,s&&s.toAbortSignal()],o),_;const E=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let I;try{if(u&&cU&&n!=="get"&&n!=="head"&&(I=await dU(p,r))!==0){let L=new Request(e,{method:"POST",body:r,duplex:"half"}),M;if(Ye.isFormData(r)&&(M=L.headers.get("content-type"))&&p.setContentType(M),L.body){const[W,P]=vT(I,fb(xT(u)));r=_T(L.body,ST,W,P)}}Ye.isString(h)||(h=h?"include":"omit");const T="credentials"in Request.prototype;_=new Request(e,{...b,signal:x,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:T?h:void 0});let C=await fetch(_);const j=rE&&(f==="stream"||f==="response");if(rE&&(l||j&&E)){const L={};["status","statusText","headers"].forEach(O=>{L[O]=C[O]});const M=Ye.toFiniteNumber(C.headers.get("content-length")),[W,P]=l&&vT(M,fb(xT(l),!0))||[];C=new Response(_T(C.body,ST,W,()=>{P&&P(),E&&E()}),L)}f=f||"text";let q=await pb[Ye.findKey(pb,f)||"text"](C,t);return!j&&E&&E(),await new Promise((L,M)=>{mP(L,M,{data:q,headers:ps.from(C.headers),status:C.status,statusText:C.statusText,config:t,request:_})})}catch(T){throw E&&E(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new _n("Network Error",_n.ERR_NETWORK,t,_),{cause:T.cause||T}):_n.from(T,T&&T.code,t,_)}}),iE={http:kV,xhr:rU,fetch:fU};Ye.forEach(iE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ET=t=>`- ${t}`,pU=t=>Ye.isFunction(t)||t===null||t===!1,xP={getAdapter:t=>{t=Ye.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!pU(n)&&(r=iE[(o=String(n)).toLowerCase()],r===void 0))throw new _n(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(ET).join(`
`):" "+ET(s[0]):"as no adapter specified";throw new _n("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:iE};function h_(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new cf(null,t)}function NT(t){return h_(t),t.headers=ps.from(t.headers),t.data=p_.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xP.getAdapter(t.adapter||om.adapter)(t).then(function(r){return h_(t),r.data=p_.call(t,t.transformResponse,r),r.headers=ps.from(r.headers),r},function(r){return hP(r)||(h_(t),r&&r.response&&(r.response.data=p_.call(t,t.transformResponse,r.response),r.response.headers=ps.from(r.response.headers))),Promise.reject(r)})}const wP="1.7.9",Sv={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Sv[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const IT={};Sv.transitional=function(e,n,r){function i(s,o){return"[Axios v"+wP+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new _n(i(o," has been removed"+(n?" in "+n:"")),_n.ERR_DEPRECATED);return n&&!IT[o]&&(IT[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};Sv.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function hU(t,e,n){if(typeof t!="object")throw new _n("options must be an object",_n.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=t[s],u=l===void 0||o(l,s,t);if(u!==!0)throw new _n("option "+s+" must be "+u,_n.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new _n("Unknown option "+s,_n.ERR_BAD_OPTION)}}const Ey={assertOptions:hU,validators:Sv},Qo=Ey.validators;let Qc=class{constructor(e){this.defaults=e,this.interceptors={request:new yT,response:new yT}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=eu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Ey.assertOptions(r,{silentJSONParsing:Qo.transitional(Qo.boolean),forcedJSONParsing:Qo.transitional(Qo.boolean),clarifyTimeoutError:Qo.transitional(Qo.boolean)},!1),i!=null&&(Ye.isFunction(i)?n.paramsSerializer={serialize:i}:Ey.assertOptions(i,{encode:Qo.function,serialize:Qo.function},!0)),Ey.assertOptions(n,{baseUrl:Qo.spelling("baseURL"),withXsrfToken:Qo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ye.merge(s.common,s[n.method]);s&&Ye.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=ps.concat(o,s);const l=[];let u=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(u=u&&E.synchronous,l.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let p,h=0,b;if(!u){const _=[NT.bind(this),void 0];for(_.unshift.apply(_,l),_.push.apply(_,f),b=_.length,p=Promise.resolve(n);h<b;)p=p.then(_[h++],_[h++]);return p}b=l.length;let x=n;for(h=0;h<b;){const _=l[h++],E=l[h++];try{x=_(x)}catch(I){E.call(this,I);break}}try{p=NT.call(this,x)}catch(_){return Promise.reject(_)}for(h=0,b=f.length;h<b;)p=p.then(f[h++],f[h++]);return p}getUri(e){e=eu(this.defaults,e);const n=gP(e.baseURL,e.url);return dP(n,e.params,e.paramsSerializer)}};Ye.forEach(["delete","get","head","options"],function(e){Qc.prototype[e]=function(n,r){return this.request(eu(r||{},{method:e,url:n,data:(r||{}).data}))}});Ye.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,l){return this.request(eu(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Qc.prototype[e]=n(),Qc.prototype[e+"Form"]=n(!0)});let mU=class _P{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new cf(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new _P(function(i){e=i}),cancel:e}}};function gU(t){return function(n){return t.apply(null,n)}}function yU(t){return Ye.isObject(t)&&t.isAxiosError===!0}const sE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sE).forEach(([t,e])=>{sE[e]=t});function SP(t){const e=new Qc(t),n=XA(Qc.prototype.request,e);return Ye.extend(n,Qc.prototype,e,{allOwnKeys:!0}),Ye.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return SP(eu(t,i))},n}const Ur=SP(om);Ur.Axios=Qc;Ur.CanceledError=cf;Ur.CancelToken=mU;Ur.isCancel=hP;Ur.VERSION=wP;Ur.toFormData=wv;Ur.AxiosError=_n;Ur.Cancel=Ur.CanceledError;Ur.all=function(e){return Promise.all(e)};Ur.spread=gU;Ur.isAxiosError=yU;Ur.mergeConfig=eu;Ur.AxiosHeaders=ps;Ur.formToJSON=t=>pP(Ye.isHTMLForm(t)?new FormData(t):t);Ur.getAdapter=xP.getAdapter;Ur.HttpStatusCode=sE;Ur.default=Ur;const{Axios:wce,AxiosError:bU,CanceledError:_ce,isCancel:Sce,CancelToken:Ece,VERSION:Nce,all:Ice,Cancel:kce,isAxiosError:Cce,spread:Tce,toFormData:Rce,AxiosHeaders:jce,HttpStatusCode:Oce,formToJSON:qce,getAdapter:Ace,mergeConfig:Pce}=Ur,IN=({error:t,schema:e,onError:n})=>{if(t instanceof bU){const i=e.safeParse(t.response?.data);return i.success&&n({error:t,data:i.data}),i.success}return!1};var m_,kT;function vU(){if(kT)return m_;kT=1;function t(r){this.queue=[],this.timeslotRequests=0,this.interceptors={request:null,response:null},this.handleRequest=this.handleRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.enable(r)}t.prototype.getMaxRPS=function(){var r=this.perMilliseconds/1e3;return this.maxRequests/r},t.prototype.getQueue=function(){return this.queue},t.prototype.setMaxRPS=function(r){this.setRateLimitOptions({maxRequests:r,perMilliseconds:1e3})},t.prototype.setRateLimitOptions=function(r){r.maxRPS?this.setMaxRPS(r.maxRPS):(this.perMilliseconds=r.perMilliseconds,this.maxRequests=r.maxRequests)},t.prototype.enable=function(r){function i(s){return Promise.reject(s)}this.interceptors.request=r.interceptors.request.use(this.handleRequest,i),this.interceptors.response=r.interceptors.response.use(this.handleResponse,i)};function e(r){r.cancelToken&&r.cancelToken.throwIfRequested()}t.prototype.handleRequest=function(r){return new Promise(function(i,s){this.push({resolve:function(){try{e(r)}catch(o){return s(o),!1}return i(r),!0}})}.bind(this))},t.prototype.handleResponse=function(r){return this.shift(),r},t.prototype.push=function(r){this.queue.push(r),this.shiftInitial()},t.prototype.shiftInitial=function(){setTimeout(function(){return this.shift()}.bind(this),0)},t.prototype.shift=function(){if(this.queue.length){if(this.timeslotRequests===this.maxRequests){this.timeoutId&&typeof this.timeoutId.ref=="function"&&this.timeoutId.ref();return}var r=this.queue.shift(),i=r.resolve();if(this.timeslotRequests===0&&(this.timeoutId=setTimeout(function(){this.timeslotRequests=0,this.shift()}.bind(this),this.perMilliseconds),typeof this.timeoutId.unref=="function"&&this.queue.length===0&&this.timeoutId.unref()),!i){this.shift();return}this.timeslotRequests+=1}};function n(r,i){var s=new t(r);return s.setRateLimitOptions(i),r.getQueue=t.prototype.getQueue.bind(s),r.getMaxRPS=t.prototype.getMaxRPS.bind(s),r.setMaxRPS=t.prototype.setMaxRPS.bind(s),r.setRateLimitOptions=t.prototype.setRateLimitOptions.bind(s),r}return m_=n,m_}var xU=vU();const wU=uo(xU),_U=({instance:t,limit:e}={})=>wU(t||Ur,e||{maxRequests:5,perMilliseconds:100}),kN="-",SU=t=>{const e=NU(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(kN);return l[0]===""&&l.length!==1&&l.shift(),EP(l,e)||EU(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},EP=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?EP(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(kN);return e.validators.find(({validator:o})=>o(s))?.classGroupId},CT=/^\[(.+)\]$/,EU=t=>{if(CT.test(t)){const e=CT.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},NU=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return kU(Object.entries(t.classGroups),n).forEach(([s,o])=>{oE(o,r,s,e)}),r},oE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:TT(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(IU(i)){oE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{oE(o,TT(e,s),n,r)})})},TT=(t,e)=>{let n=t;return e.split(kN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},IU=t=>t.isThemeGetter,kU=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[n,i]}):t,CU=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},NP="!",TU=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=l=>{const u=[];let f=0,p=0,h;for(let I=0;I<l.length;I++){let T=l[I];if(f===0){if(T===i&&(r||l.slice(I,I+s)===e)){u.push(l.slice(p,I)),p=I+s;continue}if(T==="/"){h=I;continue}}T==="["?f++:T==="]"&&f--}const b=u.length===0?l:l.substring(p),x=b.startsWith(NP),_=x?b.substring(1):b,E=h&&h>p?h-p:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:E}};return n?l=>n({className:l,parseClassName:o}):o},RU=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},jU=t=>({cache:CU(t.cacheSize),parseClassName:TU(t),...SU(t)}),OU=/\s+/,qU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(OU);let l="";for(let u=o.length-1;u>=0;u-=1){const f=o[u],{modifiers:p,hasImportantModifier:h,baseClassName:b,maybePostfixModifierPosition:x}=n(f);let _=!!x,E=r(_?b.substring(0,x):b);if(!E){if(!_){l=f+(l.length>0?" "+l:l);continue}if(E=r(b),!E){l=f+(l.length>0?" "+l:l);continue}_=!1}const I=RU(p).join(":"),T=h?I+NP:I,C=T+E;if(s.includes(C))continue;s.push(C);const j=i(E,_);for(let q=0;q<j.length;++q){const L=j[q];s.push(T+L)}l=f+(l.length>0?" "+l:l)}return l};function AU(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=IP(e))&&(r&&(r+=" "),r+=n);return r}const IP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=IP(t[r]))&&(n&&(n+=" "),n+=e);return n};function PU(t,...e){let n,r,i,s=o;function o(u){const f=e.reduce((p,h)=>h(p),t());return n=jU(f),r=n.cache.get,i=n.cache.set,s=l,l(u)}function l(u){const f=r(u);if(f)return f;const p=qU(u,n);return i(u,p),p}return function(){return s(AU.apply(null,arguments))}}const dr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},kP=/^\[(?:([a-z-]+):)?(.+)\]$/i,FU=/^\d+\/\d+$/,DU=new Set(["px","full","screen"]),LU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,MU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$U=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,BU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ka=t=>Nd(t)||DU.has(t)||FU.test(t),vl=t=>uf(t,"length",JU),Nd=t=>!!t&&!Number.isNaN(Number(t)),g_=t=>uf(t,"number",Nd),mp=t=>!!t&&Number.isInteger(Number(t)),WU=t=>t.endsWith("%")&&Nd(t.slice(0,-1)),En=t=>kP.test(t),xl=t=>LU.test(t),VU=new Set(["length","size","percentage"]),UU=t=>uf(t,VU,CP),HU=t=>uf(t,"position",CP),KU=new Set(["image","url"]),QU=t=>uf(t,KU,YU),GU=t=>uf(t,"",ZU),gp=()=>!0,uf=(t,e,n)=>{const r=kP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},JU=t=>MU.test(t)&&!$U.test(t),CP=()=>!1,ZU=t=>BU.test(t),YU=t=>zU.test(t),XU=()=>{const t=dr("colors"),e=dr("spacing"),n=dr("blur"),r=dr("brightness"),i=dr("borderColor"),s=dr("borderRadius"),o=dr("borderSpacing"),l=dr("borderWidth"),u=dr("contrast"),f=dr("grayscale"),p=dr("hueRotate"),h=dr("invert"),b=dr("gap"),x=dr("gradientColorStops"),_=dr("gradientColorStopPositions"),E=dr("inset"),I=dr("margin"),T=dr("opacity"),C=dr("padding"),j=dr("saturate"),q=dr("scale"),L=dr("sepia"),M=dr("skew"),W=dr("space"),P=dr("translate"),O=()=>["auto","contain","none"],z=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",En,e],V=()=>[En,e],U=()=>["",ka,vl],B=()=>["auto",Nd,En],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>["start","end","center","between","around","evenly","stretch"],ne=()=>["","0",En],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[Nd,En];return{cacheSize:500,separator:":",theme:{colors:[gp],spacing:[ka,vl],blur:["none","",xl,En],brightness:te(),borderColor:[t],borderRadius:["none","","full",xl,En],borderSpacing:V(),borderWidth:U(),contrast:te(),grayscale:ne(),hueRotate:te(),invert:ne(),gap:V(),gradientColorStops:[t],gradientColorStopPositions:[WU,vl],inset:F(),margin:F(),opacity:te(),padding:V(),saturate:te(),scale:te(),sepia:ne(),skew:te(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",En]}],container:["container"],columns:[{columns:[xl]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),En]}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",mp,En]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",En]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",mp,En]}],"grid-cols":[{"grid-cols":[gp]}],"col-start-end":[{col:["auto",{span:["full",mp,En]},En]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[gp]}],"row-start-end":[{row:["auto",{span:[mp,En]},En]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",En]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",En]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...ie()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ie(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ie(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[I]}],mx:[{mx:[I]}],my:[{my:[I]}],ms:[{ms:[I]}],me:[{me:[I]}],mt:[{mt:[I]}],mr:[{mr:[I]}],mb:[{mb:[I]}],ml:[{ml:[I]}],"space-x":[{"space-x":[W]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[W]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",En,e]}],"min-w":[{"min-w":[En,e,"min","max","fit"]}],"max-w":[{"max-w":[En,e,"none","full","min","max","fit","prose",{screen:[xl]},xl]}],h:[{h:[En,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[En,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[En,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[En,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xl,vl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",g_]}],"font-family":[{font:[gp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",En]}],"line-clamp":[{"line-clamp":["none",Nd,g_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ka,En]}],"list-image":[{"list-image":["none",En]}],"list-style-type":[{list:["none","disc","decimal",En]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[T]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ka,vl]}],"underline-offset":[{"underline-offset":["auto",ka,En]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",En]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",En]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[T]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),HU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",UU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},QU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[T]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[T]}],"divide-style":[{divide:Z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[ka,En]}],"outline-w":[{outline:[ka,vl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[T]}],"ring-offset-w":[{"ring-offset":[ka,vl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xl,GU]}],"shadow-color":[{shadow:[gp]}],opacity:[{opacity:[T]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",xl,En]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[h]}],saturate:[{saturate:[j]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[T]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",En]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",En]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",En]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[q]}],"scale-x":[{"scale-x":[q]}],"scale-y":[{"scale-y":[q]}],rotate:[{rotate:[mp,En]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",En]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",En]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",En]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ka,vl,g_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},TP=PU(XU),aE=new Proxy(()=>aE,{get:()=>aE});function xn({use:t,slot:e,variant:n,match:r=[],defaults:i}){return({css:s,...o}={})=>({slots:new Proxy({},{get:(l,u)=>({css:f,...p}={})=>{const h=[],b=t,x={...b?.()?.config.defaults,...i,...o,...p};h.push(b?.(x)?.slots[u]?.(x)),h.push(Array.isArray(e[u])?e[u]:[e[u]]);for(const[_,E]of Object.entries(x)){const I=n[_]?.[E];I&&h.push(I)}for(const _ of r)Object.entries(_.if).every(([E,I])=>I===x[E])&&h.push(_.then?.[u]);return h.push(s?.[u]),h.push(f),TP(h)}}),config:{defaults:{...t?.()?.config.defaults,...i},values:{...t?.()?.config.defaults,...i,...o}},type:aE()})}const mn=TP;var y_,RT;function RP(){return RT||(RT=1,y_=Object),y_}var b_,jT;function e5(){return jT||(jT=1,b_=Error),b_}var v_,OT;function t5(){return OT||(OT=1,v_=EvalError),v_}var x_,qT;function n5(){return qT||(qT=1,x_=RangeError),x_}var w_,AT;function r5(){return AT||(AT=1,w_=ReferenceError),w_}var __,PT;function i5(){return PT||(PT=1,__=SyntaxError),__}var S_,FT;function jP(){return FT||(FT=1,S_=TypeError),S_}var E_,DT;function s5(){return DT||(DT=1,E_=URIError),E_}var N_,LT;function o5(){return LT||(LT=1,N_=Math.abs),N_}var I_,MT;function a5(){return MT||(MT=1,I_=Math.floor),I_}var k_,$T;function l5(){return $T||($T=1,k_=Math.max),k_}var C_,BT;function c5(){return BT||(BT=1,C_=Math.min),C_}var T_,zT;function u5(){return zT||(zT=1,T_=Math.pow),T_}var R_,WT;function d5(){return WT||(WT=1,R_=Math.round),R_}var j_,VT;function f5(){return VT||(VT=1,j_=Number.isNaN||function(e){return e!==e}),j_}var O_,UT;function p5(){if(UT)return O_;UT=1;var t=f5();return O_=function(n){return t(n)||n===0?n:n<0?-1:1},O_}var q_,HT;function h5(){return HT||(HT=1,q_=Object.getOwnPropertyDescriptor),q_}var A_,KT;function OP(){if(KT)return A_;KT=1;var t=h5();if(t)try{t([],"length")}catch{t=null}return A_=t,A_}var P_,QT;function m5(){if(QT)return P_;QT=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return P_=t,P_}var F_,GT;function qP(){return GT||(GT=1,F_=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,n);if(l.value!==i||l.enumerable!==!0)return!1}return!0}),F_}var D_,JT;function g5(){if(JT)return D_;JT=1;var t=typeof Symbol<"u"&&Symbol,e=qP();return D_=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},D_}var L_,ZT;function AP(){return ZT||(ZT=1,L_=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),L_}var M_,YT;function PP(){if(YT)return M_;YT=1;var t=RP();return M_=t.getPrototypeOf||null,M_}var $_,XT;function y5(){if(XT)return $_;XT=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(u,f){for(var p=[],h=0;h<u.length;h+=1)p[h]=u[h];for(var b=0;b<f.length;b+=1)p[b+u.length]=f[b];return p},s=function(u,f){for(var p=[],h=f,b=0;h<u.length;h+=1,b+=1)p[b]=u[h];return p},o=function(l,u){for(var f="",p=0;p<l.length;p+=1)f+=l[p],p+1<l.length&&(f+=u);return f};return $_=function(u){var f=this;if(typeof f!="function"||e.apply(f)!==r)throw new TypeError(t+f);for(var p=s(arguments,1),h,b=function(){if(this instanceof h){var T=f.apply(this,i(p,arguments));return Object(T)===T?T:this}return f.apply(u,i(p,arguments))},x=n(0,f.length-p.length),_=[],E=0;E<x;E++)_[E]="$"+E;if(h=Function("binder","return function ("+o(_,",")+"){ return binder.apply(this,arguments); }")(b),f.prototype){var I=function(){};I.prototype=f.prototype,h.prototype=new I,I.prototype=null}return h},$_}var B_,eR;function Ev(){if(eR)return B_;eR=1;var t=y5();return B_=Function.prototype.bind||t,B_}var z_,tR;function CN(){return tR||(tR=1,z_=Function.prototype.call),z_}var W_,nR;function FP(){return nR||(nR=1,W_=Function.prototype.apply),W_}var V_,rR;function b5(){return rR||(rR=1,V_=typeof Reflect<"u"&&Reflect&&Reflect.apply),V_}var U_,iR;function v5(){if(iR)return U_;iR=1;var t=Ev(),e=FP(),n=CN(),r=b5();return U_=r||t.call(n,e),U_}var H_,sR;function DP(){if(sR)return H_;sR=1;var t=Ev(),e=jP(),n=CN(),r=v5();return H_=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(t,n,s)},H_}var K_,oR;function x5(){if(oR)return K_;oR=1;var t=DP(),e=OP(),n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return K_=r&&typeof r.get=="function"?t([r.get]):typeof s=="function"?function(l){return s(l==null?l:i(l))}:!1,K_}var Q_,aR;function w5(){if(aR)return Q_;aR=1;var t=AP(),e=PP(),n=x5();return Q_=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:n?function(i){return n(i)}:null,Q_}var G_,lR;function _5(){if(lR)return G_;lR=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=Ev();return G_=n.call(t,e),G_}var J_,cR;function S5(){if(cR)return J_;cR=1;var t,e=RP(),n=e5(),r=t5(),i=n5(),s=r5(),o=i5(),l=jP(),u=s5(),f=o5(),p=a5(),h=l5(),b=c5(),x=u5(),_=d5(),E=p5(),I=Function,T=function(De){try{return I('"use strict"; return ('+De+").constructor;")()}catch{}},C=OP(),j=m5(),q=function(){throw new l},L=C?function(){try{return arguments.callee,q}catch{try{return C(arguments,"callee").get}catch{return q}}}():q,M=g5()(),W=w5(),P=PP(),O=AP(),z=FP(),F=CN(),V={},U=typeof Uint8Array>"u"||!W?t:W(Uint8Array),B={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":M&&W?W([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":V,"%AsyncGenerator%":V,"%AsyncGeneratorFunction%":V,"%AsyncIteratorPrototype%":V,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":I,"%GeneratorFunction%":V,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":M&&W?W(W([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!M||!W?t:W(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":C,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!M||!W?t:W(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":M&&W?W(""[Symbol.iterator]()):t,"%Symbol%":M?Symbol:t,"%SyntaxError%":o,"%ThrowTypeError%":L,"%TypedArray%":U,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":F,"%Function.prototype.apply%":z,"%Object.defineProperty%":j,"%Object.getPrototypeOf%":P,"%Math.abs%":f,"%Math.floor%":p,"%Math.max%":h,"%Math.min%":b,"%Math.pow%":x,"%Math.round%":_,"%Math.sign%":E,"%Reflect.getPrototypeOf%":O};if(W)try{null.error}catch(De){var G=W(W(De));B["%Error.prototype%"]=G}var Z=function De(Je){var Xe;if(Je==="%AsyncFunction%")Xe=T("async function () {}");else if(Je==="%GeneratorFunction%")Xe=T("function* () {}");else if(Je==="%AsyncGeneratorFunction%")Xe=T("async function* () {}");else if(Je==="%AsyncGenerator%"){var Ve=De("%AsyncGeneratorFunction%");Ve&&(Xe=Ve.prototype)}else if(Je==="%AsyncIteratorPrototype%"){var ct=De("%AsyncGenerator%");ct&&W&&(Xe=W(ct.prototype))}return B[Je]=Xe,Xe},le={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ie=Ev(),ne=_5(),oe=ie.call(F,Array.prototype.concat),te=ie.call(z,Array.prototype.splice),ue=ie.call(F,String.prototype.replace),de=ie.call(F,String.prototype.slice),ye=ie.call(F,RegExp.prototype.exec),we=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ne=/\\(\\)?/g,ze=function(Je){var Xe=de(Je,0,1),Ve=de(Je,-1);if(Xe==="%"&&Ve!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(Ve==="%"&&Xe!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ct=[];return ue(Je,we,function(_t,Tt,Ut,sn){ct[ct.length]=Ut?ue(sn,Ne,"$1"):Tt||_t}),ct},je=function(Je,Xe){var Ve=Je,ct;if(ne(le,Ve)&&(ct=le[Ve],Ve="%"+ct[0]+"%"),ne(B,Ve)){var _t=B[Ve];if(_t===V&&(_t=Z(Ve)),typeof _t>"u"&&!Xe)throw new l("intrinsic "+Je+" exists, but is not available. Please file an issue!");return{alias:ct,name:Ve,value:_t}}throw new o("intrinsic "+Je+" does not exist!")};return J_=function(Je,Xe){if(typeof Je!="string"||Je.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Xe!="boolean")throw new l('"allowMissing" argument must be a boolean');if(ye(/^%?[^%]*%?$/,Je)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ve=ze(Je),ct=Ve.length>0?Ve[0]:"",_t=je("%"+ct+"%",Xe),Tt=_t.name,Ut=_t.value,sn=!1,xe=_t.alias;xe&&(ct=xe[0],te(Ve,oe([0,1],xe)));for(var be=1,Ie=!0;be<Ve.length;be+=1){var Ae=Ve[be],Ue=de(Ae,0,1),rt=de(Ae,-1);if((Ue==='"'||Ue==="'"||Ue==="`"||rt==='"'||rt==="'"||rt==="`")&&Ue!==rt)throw new o("property names with quotes must have matching quotes");if((Ae==="constructor"||!Ie)&&(sn=!0),ct+="."+Ae,Tt="%"+ct+"%",ne(B,Tt))Ut=B[Tt];else if(Ut!=null){if(!(Ae in Ut)){if(!Xe)throw new l("base intrinsic for "+Je+" exists, but the property is not available.");return}if(C&&be+1>=Ve.length){var Me=C(Ut,Ae);Ie=!!Me,Ie&&"get"in Me&&!("originalValue"in Me.get)?Ut=Me.get:Ut=Ut[Ae]}else Ie=ne(Ut,Ae),Ut=Ut[Ae];Ie&&!sn&&(B[Tt]=Ut)}}return Ut},J_}var Z_,uR;function E5(){if(uR)return Z_;uR=1;var t=S5(),e=DP(),n=e([t("%String.prototype.indexOf%")]);return Z_=function(i,s){var o=t(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?e([o]):o},Z_}var Y_,dR;function N5(){if(dR)return Y_;dR=1;var t=qP();return Y_=function(){return t()&&!!Symbol.toStringTag},Y_}var X_,fR;function I5(){if(fR)return X_;fR=1;var t=E5(),e=t("String.prototype.valueOf"),n=function(l){try{return e(l),!0}catch{return!1}},r=t("Object.prototype.toString"),i="[object String]",s=N5()();return X_=function(l){return typeof l=="string"?!0:!l||typeof l!="object"?!1:s?n(l):r(l)===i},X_}var k5=I5();const C5=uo(k5),Nv=t=>C5(t),T5=(t,e,n={})=>{const r=[];return t.filter((s,o)=>{const l=n.regionLowerCase?s.toLowerCase():s;if(e.includes(l))return r.push({index:o,appLocale:l}),!0;const{isAvailable:u,appLocale:f}=R5(l,e,n);return u&&r.push({index:o,appLocale:n.regionLowerCase?f.toLowerCase():f}),u}).map((s,o)=>!r||r.length===0?s:r[o]?.appLocale)},R5=(t,e,n={})=>{n?.languageOnly||(n.languageOnly=!1);let r=t;return{isAvailable:e.some(s=>{if(!Ny()&&!n.languageOnly&&t.split("-")[1]===void 0)return!1;const o=Ny()?new Intl.Locale(t).minimize().language:t.split("-")[0],l=Ny()?new Intl.Locale(s).minimize().language:s.split("-")[0],u=o===l;return u&&(r=s),u}),appLocale:r}},j5=(t={})=>{t?.regionLowerCase||(t.regionLowerCase=!1);let e=[];return Intl&&"DateTimeFormat"in Intl?e=[Intl.DateTimeFormat().resolvedOptions().locale]:typeof window=="object"&&window?.navigator?.languages&&(e=[...window.navigator.languages]),e.map(n=>t.regionLowerCase?n.toLowerCase():n)},Ny=()=>Intl&&"Locale"in Intl,O5=(t,e={})=>{e?.regionLowerCase||(e.regionLowerCase=!1),e?.languageOnly||(e.languageOnly=!1);const n=t.map(r=>{const i=r.split("-");if(e.languageOnly)return i[0];const s=Ny()?new Intl.Locale(r).maximize():{language:i[0],script:i.length===3?i[1]:void 0,region:i.length===3?i[2]:i[1]},{language:o,script:l}=s;let{region:u}=s;return e.regionLowerCase&&u&&(u=u.toLowerCase()),i.length>2?`${o}-${l}-${u}`:u?`${o}-${u}`:o});return[...new Set(n)]},q5=(t,e,n={})=>{n.regionLowerCase||(n.regionLowerCase=!1),n.languageOnly||(n.languageOnly=!1);const r=j5(n),i=O5([...r,t],n);return T5(i,e,n)[0]||t},A5=({available:t,fallback:e})=>q5(e,t,{languageOnly:!0});var e0={exports:{}};const P5={},F5=Object.freeze(Object.defineProperty({__proto__:null,default:P5},Symbol.toStringTag,{value:"Module"})),pR=eB(F5);var hR;function D5(){return hR||(hR=1,function(t){(function(){var e="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",s=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?r=Mc:i&&(r=self);var o=!r.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,l=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),f=[-0x80000000,8388608,32768,128],p=[24,16,8,0],h=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],b=["hex","array","digest","arrayBuffer"],x=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(M){return Object.prototype.toString.call(M)==="[object Array]"}),l&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(M){return typeof M=="object"&&M.buffer&&M.buffer.constructor===ArrayBuffer});var _=function(M,W){return function(P){return new j(W,!0).update(P)[M]()}},E=function(M){var W=_("hex",M);s&&(W=I(W,M)),W.create=function(){return new j(M)},W.update=function(z){return W.create().update(z)};for(var P=0;P<b.length;++P){var O=b[P];W[O]=_(O,M)}return W},I=function(M,W){var P=pR,O=pR.Buffer,z=W?"sha224":"sha256",F;O.from&&!r.JS_SHA256_NO_BUFFER_FROM?F=O.from:F=function(U){return new O(U)};var V=function(U){if(typeof U=="string")return P.createHash(z).update(U,"utf8").digest("hex");if(U==null)throw new Error(e);return U.constructor===ArrayBuffer&&(U=new Uint8Array(U)),Array.isArray(U)||ArrayBuffer.isView(U)||U.constructor===O?P.createHash(z).update(F(U)).digest("hex"):M(U)};return V},T=function(M,W){return function(P,O){return new q(P,W,!0).update(O)[M]()}},C=function(M){var W=T("hex",M);W.create=function(z){return new q(z,M)},W.update=function(z,F){return W.create(z).update(F)};for(var P=0;P<b.length;++P){var O=b[P];W[O]=T(O,M)}return W};function j(M,W){W?(x[0]=x[16]=x[1]=x[2]=x[3]=x[4]=x[5]=x[6]=x[7]=x[8]=x[9]=x[10]=x[11]=x[12]=x[13]=x[14]=x[15]=0,this.blocks=x):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M?(this.h0=0xc1059ed8,this.h1=0x367cd507,this.h2=0x3070dd17,this.h3=0xf70e5939,this.h4=0xffc00b31,this.h5=0x68581511,this.h6=0x64f98fa7,this.h7=0xbefa4fa4):(this.h0=0x6a09e667,this.h1=0xbb67ae85,this.h2=0x3c6ef372,this.h3=0xa54ff53a,this.h4=0x510e527f,this.h5=0x9b05688c,this.h6=0x1f83d9ab,this.h7=0x5be0cd19),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=M}j.prototype.update=function(M){if(!this.finalized){var W,P=typeof M;if(P!=="string"){if(P==="object"){if(M===null)throw new Error(e);if(l&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!l||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);W=!0}for(var O,z=0,F,V=M.length,U=this.blocks;z<V;){if(this.hashed&&(this.hashed=!1,U[0]=this.block,this.block=U[16]=U[1]=U[2]=U[3]=U[4]=U[5]=U[6]=U[7]=U[8]=U[9]=U[10]=U[11]=U[12]=U[13]=U[14]=U[15]=0),W)for(F=this.start;z<V&&F<64;++z)U[F>>>2]|=M[z]<<p[F++&3];else for(F=this.start;z<V&&F<64;++z)O=M.charCodeAt(z),O<128?U[F>>>2]|=O<<p[F++&3]:O<2048?(U[F>>>2]|=(192|O>>>6)<<p[F++&3],U[F>>>2]|=(128|O&63)<<p[F++&3]):O<55296||O>=57344?(U[F>>>2]|=(224|O>>>12)<<p[F++&3],U[F>>>2]|=(128|O>>>6&63)<<p[F++&3],U[F>>>2]|=(128|O&63)<<p[F++&3]):(O=65536+((O&1023)<<10|M.charCodeAt(++z)&1023),U[F>>>2]|=(240|O>>>18)<<p[F++&3],U[F>>>2]|=(128|O>>>12&63)<<p[F++&3],U[F>>>2]|=(128|O>>>6&63)<<p[F++&3],U[F>>>2]|=(128|O&63)<<p[F++&3]);this.lastByteIndex=F,this.bytes+=F-this.start,F>=64?(this.block=U[16],this.start=F-64,this.hash(),this.hashed=!0):this.start=F}return this.bytes>0xffffffff&&(this.hBytes+=this.bytes/0x100000000<<0,this.bytes=this.bytes%0x100000000),this}},j.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var M=this.blocks,W=this.lastByteIndex;M[16]=this.block,M[W>>>2]|=f[W&3],this.block=M[16],W>=56&&(this.hashed||this.hash(),M[0]=this.block,M[16]=M[1]=M[2]=M[3]=M[4]=M[5]=M[6]=M[7]=M[8]=M[9]=M[10]=M[11]=M[12]=M[13]=M[14]=M[15]=0),M[14]=this.hBytes<<3|this.bytes>>>29,M[15]=this.bytes<<3,this.hash()}},j.prototype.hash=function(){var M=this.h0,W=this.h1,P=this.h2,O=this.h3,z=this.h4,F=this.h5,V=this.h6,U=this.h7,B=this.blocks,G,Z,le,ie,ne,oe,te,ue,de,ye,we;for(G=16;G<64;++G)ne=B[G-15],Z=(ne>>>7|ne<<25)^(ne>>>18|ne<<14)^ne>>>3,ne=B[G-2],le=(ne>>>17|ne<<15)^(ne>>>19|ne<<13)^ne>>>10,B[G]=B[G-16]+Z+B[G-7]+le<<0;for(we=W&P,G=0;G<64;G+=4)this.first?(this.is224?(ue=300032,ne=B[0]-0x543c9a5b,U=ne-0x8f1a6c7<<0,O=ne+0x170e9b5<<0):(ue=0x2a01a605,ne=B[0]-0xc881298,U=ne-0x5ab00ac6<<0,O=ne+0x8909ae5<<0),this.first=!1):(Z=(M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10),le=(z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7),ue=M&W,ie=ue^M&P^we,te=z&F^~z&V,ne=U+le+te+h[G]+B[G],oe=Z+ie,U=O+ne<<0,O=ne+oe<<0),Z=(O>>>2|O<<30)^(O>>>13|O<<19)^(O>>>22|O<<10),le=(U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7),de=O&M,ie=de^O&W^ue,te=U&z^~U&F,ne=V+le+te+h[G+1]+B[G+1],oe=Z+ie,V=P+ne<<0,P=ne+oe<<0,Z=(P>>>2|P<<30)^(P>>>13|P<<19)^(P>>>22|P<<10),le=(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7),ye=P&O,ie=ye^P&M^de,te=V&U^~V&z,ne=F+le+te+h[G+2]+B[G+2],oe=Z+ie,F=W+ne<<0,W=ne+oe<<0,Z=(W>>>2|W<<30)^(W>>>13|W<<19)^(W>>>22|W<<10),le=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),we=W&P,ie=we^W&O^ye,te=F&V^~F&U,ne=z+le+te+h[G+3]+B[G+3],oe=Z+ie,z=M+ne<<0,M=ne+oe<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+M<<0,this.h1=this.h1+W<<0,this.h2=this.h2+P<<0,this.h3=this.h3+O<<0,this.h4=this.h4+z<<0,this.h5=this.h5+F<<0,this.h6=this.h6+V<<0,this.h7=this.h7+U<<0},j.prototype.hex=function(){this.finalize();var M=this.h0,W=this.h1,P=this.h2,O=this.h3,z=this.h4,F=this.h5,V=this.h6,U=this.h7,B=u[M>>>28&15]+u[M>>>24&15]+u[M>>>20&15]+u[M>>>16&15]+u[M>>>12&15]+u[M>>>8&15]+u[M>>>4&15]+u[M&15]+u[W>>>28&15]+u[W>>>24&15]+u[W>>>20&15]+u[W>>>16&15]+u[W>>>12&15]+u[W>>>8&15]+u[W>>>4&15]+u[W&15]+u[P>>>28&15]+u[P>>>24&15]+u[P>>>20&15]+u[P>>>16&15]+u[P>>>12&15]+u[P>>>8&15]+u[P>>>4&15]+u[P&15]+u[O>>>28&15]+u[O>>>24&15]+u[O>>>20&15]+u[O>>>16&15]+u[O>>>12&15]+u[O>>>8&15]+u[O>>>4&15]+u[O&15]+u[z>>>28&15]+u[z>>>24&15]+u[z>>>20&15]+u[z>>>16&15]+u[z>>>12&15]+u[z>>>8&15]+u[z>>>4&15]+u[z&15]+u[F>>>28&15]+u[F>>>24&15]+u[F>>>20&15]+u[F>>>16&15]+u[F>>>12&15]+u[F>>>8&15]+u[F>>>4&15]+u[F&15]+u[V>>>28&15]+u[V>>>24&15]+u[V>>>20&15]+u[V>>>16&15]+u[V>>>12&15]+u[V>>>8&15]+u[V>>>4&15]+u[V&15];return this.is224||(B+=u[U>>>28&15]+u[U>>>24&15]+u[U>>>20&15]+u[U>>>16&15]+u[U>>>12&15]+u[U>>>8&15]+u[U>>>4&15]+u[U&15]),B},j.prototype.toString=j.prototype.hex,j.prototype.digest=function(){this.finalize();var M=this.h0,W=this.h1,P=this.h2,O=this.h3,z=this.h4,F=this.h5,V=this.h6,U=this.h7,B=[M>>>24&255,M>>>16&255,M>>>8&255,M&255,W>>>24&255,W>>>16&255,W>>>8&255,W&255,P>>>24&255,P>>>16&255,P>>>8&255,P&255,O>>>24&255,O>>>16&255,O>>>8&255,O&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255,F>>>24&255,F>>>16&255,F>>>8&255,F&255,V>>>24&255,V>>>16&255,V>>>8&255,V&255];return this.is224||B.push(U>>>24&255,U>>>16&255,U>>>8&255,U&255),B},j.prototype.array=j.prototype.digest,j.prototype.arrayBuffer=function(){this.finalize();var M=new ArrayBuffer(this.is224?28:32),W=new DataView(M);return W.setUint32(0,this.h0),W.setUint32(4,this.h1),W.setUint32(8,this.h2),W.setUint32(12,this.h3),W.setUint32(16,this.h4),W.setUint32(20,this.h5),W.setUint32(24,this.h6),this.is224||W.setUint32(28,this.h7),M};function q(M,W,P){var O,z=typeof M;if(z==="string"){var F=[],V=M.length,U=0,B;for(O=0;O<V;++O)B=M.charCodeAt(O),B<128?F[U++]=B:B<2048?(F[U++]=192|B>>>6,F[U++]=128|B&63):B<55296||B>=57344?(F[U++]=224|B>>>12,F[U++]=128|B>>>6&63,F[U++]=128|B&63):(B=65536+((B&1023)<<10|M.charCodeAt(++O)&1023),F[U++]=240|B>>>18,F[U++]=128|B>>>12&63,F[U++]=128|B>>>6&63,F[U++]=128|B&63);M=F}else if(z==="object"){if(M===null)throw new Error(e);if(l&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!l||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);M.length>64&&(M=new j(W,!0).update(M).array());var G=[],Z=[];for(O=0;O<64;++O){var le=M[O]||0;G[O]=92^le,Z[O]=54^le}j.call(this,W,P),this.update(Z),this.oKeyPad=G,this.inner=!0,this.sharedMemory=P}q.prototype=new j,q.prototype.finalize=function(){if(j.prototype.finalize.call(this),this.inner){this.inner=!1;var M=this.array();j.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(M),j.prototype.finalize.call(this)}};var L=E();L.sha256=L,L.sha224=E(!0),L.sha256.hmac=C(),L.sha224.hmac=C(!0),o?t.exports=L:(r.sha256=L.sha256,r.sha224=L.sha224)})()}(e0)),e0.exports}var lE=D5();const L5=lE.sha224,LP=({index:t,key:e,fallback:n})=>t[L5(e)]?.value??t[e]?.value??n??e,M5=({index:t,key:e,fallback:n})=>LP({index:t,key:e,fallback:n}),$5=({index:t,key:e,fallback:n})=>LP({index:t,key:e,fallback:n}),sa={index:{},push(t){this.index={...this.index,...t}},text:(t,e)=>M5({index:sa.index,key:t,fallback:e}),rich:(t,e)=>$5({index:sa.index,key:t,fallback:e})};function Ml(t){return typeof t>"u"||t===void 0}function As(t){return typeof t=="string"}function Iv(t){return typeof t=="number"}function hb(t){return typeof t=="boolean"}function TN(t){return t===null}function B5(t){return t instanceof Date}function RN(t){return typeof t=="bigint"}function Ls(t){return typeof t=="function"}function Zo(t){return typeof t=="object"&&t!==null}function J(t){return Object.freeze(t)}function Vg(t){return Va(t)?t:[t]}function Va(t){return Array.isArray(t)}function $l(t){return t}const Gn=J({is(t){return t.kind==="AlterTableNode"},create(t){return J({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return J({...t,...e})},cloneWithColumnAlteration(t,e){return J({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),xr=J({is(t){return t.kind==="IdentifierNode"},create(t){return J({kind:"IdentifierNode",name:t})}}),Oa=J({is(t){return t.kind==="CreateIndexNode"},create(t){return J({kind:"CreateIndexNode",name:xr.create(t)})},cloneWith(t,e){return J({...t,...e})},cloneWithColumns(t,e){return J({...t,columns:[...t.columns||[],...e]})}}),MP=J({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return J({kind:"CreateSchemaNode",schema:xr.create(t),...e})},cloneWith(t,e){return J({...t,...e})}}),z5=["preserve rows","delete rows","drop"],_s=J({is(t){return t.kind==="CreateTableNode"},create(t){return J({kind:"CreateTableNode",table:t,columns:J([])})},cloneWithColumn(t,e){return J({...t,columns:J([...t.columns,e])})},cloneWithConstraint(t,e){return J({...t,constraints:t.constraints?J([...t.constraints,e]):J([e])})},cloneWithFrontModifier(t,e){return J({...t,frontModifiers:t.frontModifiers?J([...t.frontModifiers,e]):J([e])})},cloneWithEndModifier(t,e){return J({...t,endModifiers:t.endModifiers?J([...t.endModifiers,e]):J([e])})},cloneWith(t,e){return J({...t,...e})}}),Hl=J({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return J({kind:"SchemableIdentifierNode",identifier:xr.create(t)})},createWithSchema(t,e){return J({kind:"SchemableIdentifierNode",schema:xr.create(t),identifier:xr.create(e)})}}),Zp=J({is(t){return t.kind==="DropIndexNode"},create(t,e){return J({kind:"DropIndexNode",name:Hl.create(t),...e})},cloneWith(t,e){return J({...t,...e})}}),cE=J({is(t){return t.kind==="DropSchemaNode"},create(t,e){return J({kind:"DropSchemaNode",schema:xr.create(t),...e})},cloneWith(t,e){return J({...t,...e})}}),uE=J({is(t){return t.kind==="DropTableNode"},create(t,e){return J({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return J({...t,...e})}}),rc=J({is(t){return t.kind==="AliasNode"},create(t,e){return J({kind:"AliasNode",node:t,alias:e})}}),Bl=J({is(t){return t.kind==="TableNode"},create(t){return J({kind:"TableNode",table:Hl.create(t)})},createWithSchema(t,e){return J({kind:"TableNode",table:Hl.createWithSchema(t,e)})}});function gs(t){return Zo(t)&&Ls(t.toOperationNode)}function W5(t){return Zo(t)&&"expressionType"in t&&gs(t)}function V5(t){return Zo(t)&&"expression"in t&&As(t.alias)&&gs(t)}const Ca=J({is(t){return t.kind==="SelectModifierNode"},create(t,e){return J({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return J({kind:"SelectModifierNode",rawModifier:t})}}),Kl=J({is(t){return t.kind==="AndNode"},create(t,e){return J({kind:"AndNode",left:t,right:e})}}),df=J({is(t){return t.kind==="OrNode"},create(t,e){return J({kind:"OrNode",left:t,right:e})}}),t0=J({is(t){return t.kind==="OnNode"},create(t){return J({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return J({...t,on:e==="And"?Kl.create(t.on,n):df.create(t.on,n)})}}),Yp=J({is(t){return t.kind==="JoinNode"},create(t,e){return J({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return J({kind:"JoinNode",joinType:t,table:e,on:t0.create(n)})},cloneWithOn(t,e){return J({...t,on:t.on?t0.cloneWithOperation(t.on,"And",e):t0.create(e)})}}),$d=J({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return J({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),U5=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],H5=["+","-","*","/","%","^","&","|","#","<<",">>"],$P=["->","->>"],K5=[...U5,...H5,"&&","||"],Q5=["exists","not exists"],G5=["not","-",...Q5],J5=[...K5,...$P,...G5,"between","between symmetric"],Ql=J({is(t){return t.kind==="OperatorNode"},create(t){return J({kind:"OperatorNode",operator:t})}});function mR(t){return As(t)&&$P.includes(t)}const Hr=J({is(t){return t.kind==="ColumnNode"},create(t){return J({kind:"ColumnNode",column:xr.create(t)})}}),jN=J({is(t){return t.kind==="SelectAllNode"},create(){return J({kind:"SelectAllNode"})}}),kv=J({is(t){return t.kind==="ReferenceNode"},create(t,e){return J({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return J({kind:"ReferenceNode",table:t,column:jN.create()})}});class Z5{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return UP(this.#e)}}function BP(t){return Zo(t)&&gs(t)&&As(t.dynamicReference)}const dE=J({is(t){return t.kind==="OrderByItemNode"},create(t,e){return J({kind:"OrderByItemNode",orderBy:t,direction:e})}}),ki=J({is(t){return t.kind==="RawNode"},create(t,e){return J({kind:"RawNode",sqlFragments:J(t),parameters:J(e)})},createWithSql(t){return ki.create([t],[])},createWithChild(t){return ki.create(["",""],[t])},createWithChildren(t){return ki.create(new Array(t.length+1).fill(""),t)}});function zP(t){return t==="asc"||t==="desc"}function am(t){if(t.length===2)return[n0(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>n0(n)):[n0(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function n0(t,e){const n=Y5(t);if(dE.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return dE.create(n,WP(e))}function Y5(t){if(fm(t))return pu(t);if(BP(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!zP(n))throw new Error(`Invalid order by direction: ${n}`);return dE.create(Ua(e),WP(n))}return Ua(t)}function WP(t){if(t)return t==="asc"||t==="desc"?ki.createWithSql(t):t.toOperationNode()}const mb=J({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return J({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return J({...t,traversal:e})}}),VP=J({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return J({kind:"JSONOperatorChainNode",operator:t,values:J([])})},cloneWithValue(t,e){return J({...t,values:J([...t.values,e])})}}),Xp=J({is(t){return t.kind==="JSONPathNode"},create(t){return J({kind:"JSONPathNode",inOperator:t,pathLegs:J([])})},cloneWithLeg(t,e){return J({...t,pathLegs:J([...t.pathLegs,e])})}});function UP(t){return As(t)?Ua(t):t.toOperationNode()}function ph(t){return Va(t)?t.map(e=>Cs(e)):[Cs(t)]}function Cs(t){return fm(t)?pu(t):UP(t)}function X5(t,e){const n=Ua(t);if(mR(e))return mb.create(n,VP.create(Ql.create(e)));const r=e.slice(0,-1);if(mR(r))return mb.create(n,Xp.create(Ql.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function Ua(t){const e=".";if(!t.includes(e))return kv.create(Hr.create(t));const n=t.split(e).map(ON);if(n.length===3)return t8(n);if(n.length===2)return n8(n);throw new Error(`invalid column reference ${t}`)}function e8(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(ON);return rc.create(Ua(n),xr.create(r))}else return Ua(t)}function HP(t){return Hr.create(t)}function gb(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(ON);if(!zP(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return am([n,r])[0]}else return HP(t)}function t8(t){const[e,n,r]=t;return kv.create(Hr.create(r),Bl.createWithSchema(e,n))}function n8(t){const[e,n]=t;return kv.create(Hr.create(n),Bl.create(e))}function ON(t){return t.trim()}const KP=J({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return J({kind:"PrimitiveValueListNode",values:J([...t])})}}),qN=J({is(t){return t.kind==="ValueListNode"},create(t){return J({kind:"ValueListNode",values:J(t)})}}),oa=J({is(t){return t.kind==="ValueNode"},create(t){return J({kind:"ValueNode",value:t})},createImmediate(t){return J({kind:"ValueNode",value:t,immediate:!0})}});function r8(t){return Va(t)?i8(t):Yr(t)}function Yr(t){return fm(t)?pu(t):oa.create(t)}function AN(t){return Iv(t)||hb(t)||TN(t)}function PN(t){if(!AN(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return oa.createImmediate(t)}function i8(t){return t.some(fm)?qN.create(t.map(e=>Yr(e))):KP.create(t)}const Bd=J({is(t){return t.kind==="ParensNode"},create(t){return J({kind:"ParensNode",node:t})}});function gi(t){if(t.length===3)return FN(t[0],t[1],t[2]);if(t.length===1)return Yr(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function FN(t,e,n){return s8(e)&&QP(n)?$d.create(Cs(t),fE(e),oa.createImmediate(n)):$d.create(Cs(t),fE(e),r8(n))}function aa(t,e,n){return $d.create(Cs(t),fE(e),Cs(n))}function gR(t,e){return yb(Object.entries(t).filter(([,n])=>!Ml(n)).map(([n,r])=>FN(n,QP(r)?"is":"=",r)),e)}function yb(t,e,n=!0){const r=e==="and"?Kl.create:df.create;if(t.length===0)return $d.create(oa.createImmediate(1),Ql.create("="),oa.createImmediate(e==="and"?1:0));let i=yR(t[0]);for(let s=1;s<t.length;++s)i=r(i,yR(t[s]));return t.length>1&&n?Bd.create(i):i}function s8(t){return t==="is"||t==="is not"}function QP(t){return TN(t)||hb(t)}function fE(t){if(As(t)&&J5.includes(t))return Ql.create(t);if(gs(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function yR(t){return gs(t)?t.toOperationNode():t}const Gl=J({is(t){return t.kind==="OrderByNode"},create(t){return J({kind:"OrderByNode",items:J([...t])})},cloneWithItems(t,e){return J({...t,items:J([...t.items,...e])})}}),bR=J({is(t){return t.kind==="PartitionByNode"},create(t){return J({kind:"PartitionByNode",items:J(t)})},cloneWithItems(t,e){return J({...t,items:J([...t.items,...e])})}}),pE=J({is(t){return t.kind==="OverNode"},create(){return J({kind:"OverNode"})},cloneWithOrderByItems(t,e){return J({...t,orderBy:t.orderBy?Gl.cloneWithItems(t.orderBy,e):Gl.create(e)})},cloneWithPartitionByItems(t,e){return J({...t,partitionBy:t.partitionBy?bR.cloneWithItems(t.partitionBy,e):bR.create(e)})}}),bb=J({is(t){return t.kind==="FromNode"},create(t){return J({kind:"FromNode",froms:J(t)})},cloneWithFroms(t,e){return J({...t,froms:J([...t.froms,...e])})}}),vR=J({is(t){return t.kind==="GroupByNode"},create(t){return J({kind:"GroupByNode",items:J(t)})},cloneWithItems(t,e){return J({...t,items:J([...t.items,...e])})}}),xR=J({is(t){return t.kind==="HavingNode"},create(t){return J({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return J({...t,having:e==="And"?Kl.create(t.having,n):df.create(t.having,n)})}}),Qn=J({is(t){return t.kind==="SelectQueryNode"},create(t){return J({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return J({kind:"SelectQueryNode",from:bb.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return J({...t,selections:t.selections?J([...t.selections,...e]):J(e)})},cloneWithDistinctOn(t,e){return J({...t,distinctOn:t.distinctOn?J([...t.distinctOn,...e]):J(e)})},cloneWithFrontModifier(t,e){return J({...t,frontModifiers:t.frontModifiers?J([...t.frontModifiers,e]):J([e])})},cloneWithOrderByItems(t,e){return J({...t,orderBy:t.orderBy?Gl.cloneWithItems(t.orderBy,e):Gl.create(e)})},cloneWithGroupByItems(t,e){return J({...t,groupBy:t.groupBy?vR.cloneWithItems(t.groupBy,e):vR.create(e)})},cloneWithLimit(t,e){return J({...t,limit:e})},cloneWithOffset(t,e){return J({...t,offset:e})},cloneWithFetch(t,e){return J({...t,fetch:e})},cloneWithHaving(t,e){return J({...t,having:t.having?xR.cloneWithOperation(t.having,"And",e):xR.create(e)})},cloneWithSetOperations(t,e){return J({...t,setOperations:t.setOperations?J([...t.setOperations,...e]):J([...e])})},cloneWithoutSelections(t){return J({...t,selections:[]})},cloneWithoutLimit(t){return J({...t,limit:void 0})},cloneWithoutOffset(t){return J({...t,offset:void 0})},cloneWithoutOrderBy(t){return J({...t,orderBy:void 0})},cloneWithoutGroupBy(t){return J({...t,groupBy:void 0})}});function Nn(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}class Id{#e;constructor(e){this.#e=J(e)}on(...e){return new Id({...this.#e,joinNode:Yp.cloneWithOn(this.#e.joinNode,gi(e))})}onRef(e,n,r){return new Id({...this.#e,joinNode:Yp.cloneWithOn(this.#e.joinNode,aa(e,n,r))})}onTrue(){return new Id({...this.#e,joinNode:Yp.cloneWithOn(this.#e.joinNode,ki.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}Nn(Id,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const o8=J({is(t){return t.kind==="PartitionByItemNode"},create(t){return J({kind:"PartitionByItemNode",partitionBy:t})}});function a8(t){return ph(t).map(o8.create)}class hh{#e;constructor(e){this.#e=J(e)}orderBy(e,n){return new hh({overNode:pE.cloneWithOrderByItems(this.#e.overNode,am([e,n]))})}partitionBy(e){return new hh({overNode:pE.cloneWithPartitionByItems(this.#e.overNode,a8(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}Nn(hh,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const eh=J({is(t){return t.kind==="SelectionNode"},create(t){return J({kind:"SelectionNode",selection:t})},createSelectAll(){return J({kind:"SelectionNode",selection:jN.create()})},createSelectAllFromTable(t){return J({kind:"SelectionNode",selection:kv.createSelectAll(t)})}});function Po(t){return Ls(t)?Po(t(pf())):Va(t)?t.map(e=>wR(e)):[wR(t)]}function wR(t){return As(t)?eh.create(e8(t)):BP(t)?eh.create(t.toOperationNode()):eh.create(aF(t))}function la(t){return t?Array.isArray(t)?t.map(_R):[_R(t)]:[eh.createSelectAll()]}function _R(t){if(As(t))return eh.createSelectAllFromTable(zr(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const l8=J({is(t){return t.kind==="ValuesNode"},create(t){return J({kind:"ValuesNode",values:J(t)})}}),c8=J({is(t){return t.kind==="DefaultInsertValueNode"},create(){return J({kind:"DefaultInsertValueNode"})}});function GP(t){const e=Ls(t)?t(pf()):t,n=Va(e)?e:J([e]);return u8(n)}function u8(t){const e=d8(t);return[J([...e.keys()].map(Hr.create)),l8.create(t.map(n=>f8(n,e)))]}function d8(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const i of r)!e.has(i)&&n[i]!==void 0&&e.set(i,e.size)}return e}function f8(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let i=!1;for(const o of n){const l=e.get(o);if(Ml(l))continue;const u=t[o];(Ml(u)||fm(u))&&(i=!0),r[l]=u}if(n.length<e.size||i){const o=c8.create();return qN.create(r.map(l=>Ml(l)?o:Yr(l)))}return KP.create(r)}const Ns=J({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return J({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},createWithoutInto(){return J({kind:"InsertQueryNode"})},cloneWith(t,e){return J({...t,...e})}}),kd=J({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return J({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return J({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return J({...t,from:t.from?bb.cloneWithFroms(t.from,e):bb.create(e)})},cloneWithUpdates(t,e){return J({...t,updates:t.updates?J([...t.updates,...e]):e})},cloneWithLimit(t,e){return J({...t,limit:e})}}),SR=J({is(t){return t.kind==="UsingNode"},create(t){return J({kind:"UsingNode",tables:J(t)})},cloneWithTables(t,e){return J({...t,tables:J([...t.tables,...e])})}}),Fc=J({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return J({kind:"DeleteQueryNode",from:bb.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return J({...t,orderBy:t.orderBy?Gl.cloneWithItems(t.orderBy,e):Gl.create(e)})},cloneWithoutOrderBy(t){return J({...t,orderBy:void 0})},cloneWithLimit(t,e){return J({...t,limit:e})},cloneWithoutLimit(t){return J({...t,limit:void 0})},cloneWithUsing(t,e){return J({...t,using:t.using!==void 0?SR.cloneWithTables(t.using,e):SR.create(e)})}}),us=J({is(t){return t.kind==="WhereNode"},create(t){return J({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return J({...t,where:e==="And"?Kl.create(t.where,n):df.create(t.where,n)})}}),ER=J({is(t){return t.kind==="ReturningNode"},create(t){return J({kind:"ReturningNode",selections:J(t)})},cloneWithSelections(t,e){return J({...t,selections:t.selections?J([...t.selections,...e]):J(e)})}}),p8=J({is(t){return t.kind==="ExplainNode"},create(t,e){return J({kind:"ExplainNode",format:t,options:e})}}),lm=J({is(t){return t.kind==="WhenNode"},create(t){return J({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return J({...t,result:e})}}),ds=J({is(t){return t.kind==="MergeQueryNode"},create(t,e){return J({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return J({...t,using:e})},cloneWithWhen(t,e){return J({...t,whens:t.whens?J([...t.whens,e]):J([e])})},cloneWithThen(t,e){return J({...t,whens:t.whens?J([...t.whens.slice(0,-1),lm.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}}),NR=J({is(t){return t.kind==="OutputNode"},create(t){return J({kind:"OutputNode",selections:J(t)})},cloneWithSelections(t,e){return J({...t,selections:t.selections?J([...t.selections,...e]):J(e)})}}),Lt=J({is(t){return Qn.is(t)||Ns.is(t)||kd.is(t)||Fc.is(t)||ds.is(t)},cloneWithEndModifier(t,e){return J({...t,endModifiers:t.endModifiers?J([...t.endModifiers,e]):J([e])})},cloneWithWhere(t,e){return J({...t,where:t.where?us.cloneWithOperation(t.where,"And",e):us.create(e)})},cloneWithJoin(t,e){return J({...t,joins:t.joins?J([...t.joins,e]):J([e])})},cloneWithReturning(t,e){return J({...t,returning:t.returning?ER.cloneWithSelections(t.returning,e):ER.create(e)})},cloneWithoutReturning(t){return J({...t,returning:void 0})},cloneWithoutWhere(t){return J({...t,where:void 0})},cloneWithExplain(t,e,n){return J({...t,explain:p8.create(e,n?.toOperationNode())})},cloneWithTop(t,e){return J({...t,top:e})},cloneWithOutput(t,e){return J({...t,output:t.output?NR.cloneWithSelections(t.output,e):NR.create(e)})}}),JP=J({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return J({kind:"ColumnUpdateNode",column:t,value:e})}});function h8(...t){return t.length===2?[JP.create(Cs(t[0]),Yr(t[1]))]:DN(t[0])}function DN(t){const e=Ls(t)?t(pf()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>JP.create(Hr.create(n),Yr(r)))}const m8=J({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return J({kind:"OnDuplicateKeyNode",updates:t})}});class g8{insertId;numInsertedOrUpdatedRows;constructor(e,n){this.insertId=e,this.numInsertedOrUpdatedRows=n}}class cm extends Error{node;constructor(e){super("no result"),this.node=e}}function um(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const Ss=J({is(t){return t.kind==="OnConflictNode"},create(){return J({kind:"OnConflictNode"})},cloneWith(t,e){return J({...t,...e})},cloneWithIndexWhere(t,e){return J({...t,indexWhere:t.indexWhere?us.cloneWithOperation(t.indexWhere,"And",e):us.create(e)})},cloneWithIndexOrWhere(t,e){return J({...t,indexWhere:t.indexWhere?us.cloneWithOperation(t.indexWhere,"Or",e):us.create(e)})},cloneWithUpdateWhere(t,e){return J({...t,updateWhere:t.updateWhere?us.cloneWithOperation(t.updateWhere,"And",e):us.create(e)})},cloneWithUpdateOrWhere(t,e){return J({...t,updateWhere:t.updateWhere?us.cloneWithOperation(t.updateWhere,"Or",e):us.create(e)})},cloneWithoutIndexWhere(t){return J({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return J({...t,updateWhere:void 0})}});class Jo{#e;constructor(e){this.#e=J(e)}column(e){const n=Hr.create(e);return new Jo({...this.#e,onConflictNode:Ss.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?J([...this.#e.onConflictNode.columns,n]):J([n])})})}columns(e){const n=e.map(Hr.create);return new Jo({...this.#e,onConflictNode:Ss.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?J([...this.#e.onConflictNode.columns,...n]):J(n)})})}constraint(e){return new Jo({...this.#e,onConflictNode:Ss.cloneWith(this.#e.onConflictNode,{constraint:xr.create(e)})})}expression(e){return new Jo({...this.#e,onConflictNode:Ss.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Jo({...this.#e,onConflictNode:Ss.cloneWithIndexWhere(this.#e.onConflictNode,gi(e))})}whereRef(e,n,r){return new Jo({...this.#e,onConflictNode:Ss.cloneWithIndexWhere(this.#e.onConflictNode,aa(e,n,r))})}clearWhere(){return new Jo({...this.#e,onConflictNode:Ss.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new ZP({...this.#e,onConflictNode:Ss.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Cd({...this.#e,onConflictNode:Ss.cloneWith(this.#e.onConflictNode,{updates:DN(e)})})}$call(e){return e(this)}}Nn(Jo,"don't await OnConflictBuilder instances.");class ZP{#e;constructor(e){this.#e=J(e)}toOperationNode(){return this.#e.onConflictNode}}Nn(ZP,"don't await OnConflictDoNothingBuilder instances.");class Cd{#e;constructor(e){this.#e=J(e)}where(...e){return new Cd({...this.#e,onConflictNode:Ss.cloneWithUpdateWhere(this.#e.onConflictNode,gi(e))})}whereRef(e,n,r){return new Cd({...this.#e,onConflictNode:Ss.cloneWithUpdateWhere(this.#e.onConflictNode,aa(e,n,r))})}clearWhere(){return new Cd({...this.#e,onConflictNode:Ss.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}Nn(Cd,"don't await OnConflictUpdateBuilder instances.");const y8=J({is(t){return t.kind==="TopNode"},create(t,e){return J({kind:"TopNode",expression:t,modifiers:e})}});function ff(t,e){if(!Iv(t)&&!RN(t))throw new Error(`Invalid top expression: ${t}`);if(!Ml(e)&&!b8(e))throw new Error(`Invalid top modifiers: ${e}`);return y8.create(t,e)}function b8(t){return t==="percent"||t==="with ties"||t==="percent with ties"}class yr{#e;constructor(e){this.#e=J(e)}values(e){const[n,r]=GP(e);return new yr({...this.#e,queryNode:Ns.cloneWith(this.#e.queryNode,{columns:n,values:r})})}columns(e){return new yr({...this.#e,queryNode:Ns.cloneWith(this.#e.queryNode,{columns:J(e.map(Hr.create))})})}expression(e){return new yr({...this.#e,queryNode:Ns.cloneWith(this.#e.queryNode,{values:pu(e)})})}defaultValues(){return new yr({...this.#e,queryNode:Ns.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new yr({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new yr({...this.#e,queryNode:Ns.cloneWith(this.#e.queryNode,{ignore:!0})})}top(e,n){return new yr({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,ff(e,n))})}onConflict(e){return new yr({...this.#e,queryNode:Ns.cloneWith(this.#e.queryNode,{onConflict:e(new Jo({onConflictNode:Ss.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new yr({...this.#e,queryNode:Ns.cloneWith(this.#e.queryNode,{onDuplicateKey:m8.create(DN(e))})})}returning(e){return new yr({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,Po(e))})}returningAll(){return new yr({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,la())})}output(e){return new yr({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new yr({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,la(e))})}clearReturning(){return new yr({...this.#e,queryNode:Lt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new yr({...this.#e})}$castTo(){return new yr(this.#e)}$narrowType(){return new yr(this.#e)}$assertType(){return new yr(this.#e)}withPlugin(e){return new yr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new g8(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=cm){const n=await this.executeTakeFirst();if(n===void 0)throw um(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new yr({...this.#e,queryNode:Lt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Nn(yr,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class v8{numDeletedRows;constructor(e){this.numDeletedRows=e}}const LN=J({is(t){return t.kind==="LimitNode"},create(t){return J({kind:"LimitNode",limit:t})}});class Kn{#e;constructor(e){this.#e=J(e)}where(...e){return new Kn({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,gi(e))})}whereRef(e,n,r){return new Kn({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,aa(e,n,r))})}clearWhere(){return new Kn({...this.#e,queryNode:Lt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new Kn({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,ff(e,n))})}using(e){return new Kn({...this.#e,queryNode:Fc.cloneWithUsing(this.#e.queryNode,yh(e))})}innerJoin(...e){return new Kn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("InnerJoin",e))})}leftJoin(...e){return new Kn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("LeftJoin",e))})}rightJoin(...e){return new Kn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("RightJoin",e))})}fullJoin(...e){return new Kn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("FullJoin",e))})}returning(e){return new Kn({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,Po(e))})}returningAll(e){return new Kn({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,la(e))})}output(e){return new Kn({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Kn({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,la(e))})}clearReturning(){return new Kn({...this.#e,queryNode:Lt.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new Kn({...this.#e,queryNode:Fc.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new Kn({...this.#e,queryNode:Fc.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(e,n){return new Kn({...this.#e,queryNode:Fc.cloneWithOrderByItems(this.#e.queryNode,am([e,n]))})}limit(e){return new Kn({...this.#e,queryNode:Fc.cloneWithLimit(this.#e.queryNode,LN.create(Yr(e)))})}modifyEnd(e){return new Kn({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,n){return e?n(this):new Kn({...this.#e})}$castTo(){return new Kn(this.#e)}$narrowType(){return new Kn(this.#e)}$assertType(){return new Kn(this.#e)}withPlugin(e){return new Kn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new v8(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=cm){const n=await this.executeTakeFirst();if(n===void 0)throw um(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Kn({...this.#e,queryNode:Lt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Nn(Kn,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class x8{numUpdatedRows;numChangedRows;constructor(e,n){this.numUpdatedRows=e,this.numChangedRows=n}}class Xn{#e;constructor(e){this.#e=J(e)}where(...e){return new Xn({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,gi(e))})}whereRef(e,n,r){return new Xn({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,aa(e,n,r))})}clearWhere(){return new Xn({...this.#e,queryNode:Lt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new Xn({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,ff(e,n))})}from(e){return new Xn({...this.#e,queryNode:kd.cloneWithFromItems(this.#e.queryNode,yh(e))})}innerJoin(...e){return new Xn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("InnerJoin",e))})}leftJoin(...e){return new Xn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("LeftJoin",e))})}rightJoin(...e){return new Xn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("RightJoin",e))})}fullJoin(...e){return new Xn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("FullJoin",e))})}limit(e){return new Xn({...this.#e,queryNode:kd.cloneWithLimit(this.#e.queryNode,LN.create(Yr(e)))})}set(...e){return new Xn({...this.#e,queryNode:kd.cloneWithUpdates(this.#e.queryNode,h8(...e))})}returning(e){return new Xn({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,Po(e))})}returningAll(e){return new Xn({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,la(e))})}output(e){return new Xn({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Xn({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,la(e))})}modifyEnd(e){return new Xn({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new Xn({...this.#e,queryNode:Lt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new Xn({...this.#e})}$castTo(){return new Xn(this.#e)}$narrowType(){return new Xn(this.#e)}$assertType(){return new Xn(this.#e)}withPlugin(e){return new Xn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new x8(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0),n.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=cm){const n=await this.executeTakeFirst();if(n===void 0)throw um(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Xn({...this.#e,queryNode:Lt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Nn(Xn,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const IR=J({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return J({kind:"CommonTableExpressionNameNode",table:Bl.create(t),columns:e?J(e.map(Hr.create)):void 0})}}),vb=J({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return J({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return J({...t,...e})}});class mh{#e;constructor(e){this.#e=J(e)}materialized(){return new mh({...this.#e,node:vb.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new mh({...this.#e,node:vb.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}Nn(mh,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function kR(t,e){const n=e(O8()).toOperationNode();return Ls(t)?t(w8(n)).toOperationNode():vb.create(YP(t),n)}function w8(t){return e=>new mh({node:vb.create(YP(e),t)})}function YP(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(i=>i.trim());return IR.create(n,r)}else return IR.create(t)}const Ug=J({is(t){return t.kind==="WithNode"},create(t,e){return J({kind:"WithNode",expressions:J([t]),...e})},cloneWithExpression(t,e){return J({...t,expressions:J([...t.expressions,e])})}}),CR=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function _8(t){let e="";for(let n=0;n<t;++n)e+=S8();return e}function S8(){return CR[~~(Math.random()*CR.length)]}function Jn(){return new E8}class E8{#e;get queryId(){return this.#e===void 0&&(this.#e=_8(8)),this.#e}}class XP{nodeStack=[];#e=J({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),J(n)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&J(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:J([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}const N8=J({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});class I8 extends XP{#e;#t=new Set;#n=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);const n=this.#s(e);for(const s of n)this.#n.add(s);const r=this.#i(e);for(const s of r)this.#t.add(s);const i=super.transformNodeImpl(e);for(const s of r)this.#t.delete(s);for(const s of n)this.#n.delete(s);return i}transformSchemableIdentifier(e){const n=super.transformSchemableIdentifier(e);return n.schema||!this.#t.has(e.identifier.name)?n:{...n,schema:xr.create(this.#e)}}transformReferences(e){const n=super.transformReferences(e);return n.table.table.schema?n:{...n,table:Bl.createWithSchema(this.#e,n.table.table.identifier.name)}}#r(e){return e.kind in N8}#i(e){const n=new Set;if("name"in e&&e.name&&Hl.is(e.name)&&this.#a(e.name,n),"from"in e&&e.from)for(const r of e.from.froms)this.#o(r,n);if("into"in e&&e.into&&this.#o(e.into,n),"table"in e&&e.table&&this.#o(e.table,n),"joins"in e&&e.joins)for(const r of e.joins)this.#o(r.table,n);return"using"in e&&e.using&&this.#o(e.using,n),n}#s(e){const n=new Set;return"with"in e&&e.with&&this.#c(e.with,n),n}#o(e,n){const r=Bl.is(e)?e:rc.is(e)&&Bl.is(e.node)?e.node:null;r&&this.#a(r.table,n)}#a(e,n){const r=e.identifier.name;!this.#t.has(r)&&!this.#n.has(r)&&n.add(r)}#c(e,n){for(const r of e.expressions){const i=r.name.table.table.identifier.name;this.#n.has(i)||n.add(i)}}}class dm{#e;constructor(e){this.#e=new I8(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}}const k8=J({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return J({kind:"MatchedNode",not:t,bySource:e})}});function TR(t,e,n){return lm.create(yb([k8.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&n?aa(e[0],e[1],e[2]):gi(e)]:[]],"and",!1))}function th(t){return As(t)?ki.create([t],[]):gs(t)?t.toOperationNode():t}class RR{#e;#t;#n;constructor(){this.#e=new Promise((e,n)=>{this.#n=n,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#n&&this.#n(e)}}const jR=new Set;function C8(t){jR.has(t)||(jR.add(t),console.log(t))}const T8=J([]);class eF{#e;constructor(e=T8){this.#e=e}get plugins(){return this.#e}transformQuery(e,n){for(const r of this.#e){const i=r.transformQuery({node:e,queryId:n});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const i=await r.executeQuery(e),s=await this.#t(i,n);return R8(i,s),s})}async *stream(e,n,r){const i=new RR,s=new RR;this.provideConnection(async l=>(i.resolve(l),await s.promise)).catch(l=>i.reject(l));const o=await i.promise;try{for await(const l of o.streamQuery(e,n))yield await this.#t(l,r)}finally{s.resolve()}}async #t(e,n){for(const r of this.#e)e=await r.transformResult({result:e,queryId:n});return e}}function R8(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||C8("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class fd extends eF{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new fd([...this.plugins,e])}withPlugins(e){return new fd([...this.plugins,...e])}withPluginAtFront(e){return new fd([e,...this.plugins])}withoutPlugins(){return new fd([])}}const Cv=new fd;class j8{numChangedRows;constructor(e){this.numChangedRows=e}}class Vc{#e;constructor(e){this.#e=J(e)}modifyEnd(e){return new Vc({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new Vc({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,ff(e,n))})}using(...e){return new Ts({...this.#e,queryNode:ds.cloneWithUsing(this.#e.queryNode,Bi("Using",e))})}output(e){return new Vc({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Vc({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,la(e))})}}Nn(Vc,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Ts{#e;constructor(e){this.#e=J(e)}modifyEnd(e){return new Ts({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new Ts({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,ff(e,n))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,n,r){return this.#t([e,n,r],!0)}#t(e,n){return new hE({...this.#e,queryNode:ds.cloneWithWhen(this.#e.queryNode,TR({isMatched:!0},e,n))})}whenNotMatched(){return this.#n([])}whenNotMatchedAnd(...e){return this.#n(e)}whenNotMatchedAndRef(e,n,r){return this.#n([e,n,r],!0)}whenNotMatchedBySource(){return this.#n([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#n(e,!1,!0)}whenNotMatchedBySourceAndRef(e,n,r){return this.#n([e,n,r],!0,!0)}output(e){return new Ts({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Ts({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,la(e))})}#n(e,n=!1,r=!1){const i={...this.#e,queryNode:ds.cloneWithWhen(this.#e.queryNode,TR({isMatched:!1,bySource:r},e,n))},s=r?hE:tF;return new s(i)}$call(e){return e(this)}$if(e,n){return e?n(this):new Ts({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId);return e.query.output&&this.#e.executor.adapter.supportsOutput?n.rows:[new j8(n.numAffectedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=cm){const n=await this.executeTakeFirst();if(n===void 0)throw um(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}}Nn(Ts,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class hE{#e;constructor(e){this.#e=J(e)}thenDelete(){return new Ts({...this.#e,queryNode:ds.cloneWithThen(this.#e.queryNode,th("delete"))})}thenDoNothing(){return new Ts({...this.#e,queryNode:ds.cloneWithThen(this.#e.queryNode,th("do nothing"))})}thenUpdate(e){return new Ts({...this.#e,queryNode:ds.cloneWithThen(this.#e.queryNode,th(e(new Xn({queryId:this.#e.queryId,executor:Cv,queryNode:kd.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(n=>n.set(...e))}}Nn(hE,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class tF{#e;constructor(e){this.#e=J(e)}thenDoNothing(){return new Ts({...this.#e,queryNode:ds.cloneWithThen(this.#e.queryNode,th("do nothing"))})}thenInsertValues(e){const[n,r]=GP(e);return new Ts({...this.#e,queryNode:ds.cloneWithThen(this.#e.queryNode,th(Ns.cloneWith(Ns.createWithoutInto(),{columns:n,values:r})))})}}Nn(tF,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class jl{#e;constructor(e){this.#e=J(e)}selectFrom(e){return mE({queryId:Jn(),executor:this.#e.executor,queryNode:Qn.createFrom(yh(e),this.#e.withNode)})}selectNoFrom(e){return mE({queryId:Jn(),executor:this.#e.executor,queryNode:Qn.cloneWithSelections(Qn.create(this.#e.withNode),Po(e))})}insertInto(e){return new yr({queryId:Jn(),executor:this.#e.executor,queryNode:Ns.create(zr(e),this.#e.withNode)})}replaceInto(e){return new yr({queryId:Jn(),executor:this.#e.executor,queryNode:Ns.create(zr(e),this.#e.withNode,!0)})}deleteFrom(e){return new Kn({queryId:Jn(),executor:this.#e.executor,queryNode:Fc.create(yh(e),this.#e.withNode)})}updateTable(e){return new Xn({queryId:Jn(),executor:this.#e.executor,queryNode:kd.create(bh(e),this.#e.withNode)})}mergeInto(e){return new Vc({queryId:Jn(),executor:this.#e.executor,queryNode:ds.create(lF(e),this.#e.withNode)})}with(e,n){const r=kR(e,n);return new jl({...this.#e,withNode:this.#e.withNode?Ug.cloneWithExpression(this.#e.withNode,r):Ug.create(r)})}withRecursive(e,n){const r=kR(e,n);return new jl({...this.#e,withNode:this.#e.withNode?Ug.cloneWithExpression(this.#e.withNode,r):Ug.create(r,{recursive:!0})})}withPlugin(e){return new jl({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new jl({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new jl({...this.#e,executor:this.#e.executor.withPluginAtFront(new dm(e))})}}function O8(){return new jl({executor:Cv})}function q8(t,e){return new Id({joinNode:Yp.create(t,bh(e))})}function A8(){return new hh({overNode:pE.create()})}function Bi(t,e){if(e.length===3)return F8(t,e[0],e[1],e[2]);if(e.length===2)return P8(t,e[0],e[1]);throw new Error("not implemented")}function P8(t,e,n){return n(q8(t,e)).toOperationNode()}function F8(t,e,n,r){return Yp.createWithOn(t,bh(e),aa(n,"=",r))}const D8=J({is(t){return t.kind==="OffsetNode"},create(t){return J({kind:"OffsetNode",offset:t})}}),L8=J({is(t){return t.kind==="GroupByItemNode"},create(t){return J({kind:"GroupByItemNode",groupBy:t})}});function M8(t){return t=Ls(t)?t(pf()):t,ph(t).map(L8.create)}const nF=J({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return J({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function Zu(t,e,n){return Ls(e)&&(e=e($N())),Va(e)||(e=[e]),e.map(r=>nF.create(t,pu(r),n))}class er{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new MN(this,e)}or(...e){return new xb(df.create(this.#e,gi(e)))}and(...e){return new wb(Kl.create(this.#e,gi(e)))}$castTo(){return new er(this.#e)}$notNull(){return new er(this.#e)}toOperationNode(){return this.#e}}class MN{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return rc.create(this.#e.toOperationNode(),gs(this.#t)?this.#t.toOperationNode():xr.create(this.#t))}}class xb{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new MN(this,e)}or(...e){return new xb(df.create(this.#e,gi(e)))}$castTo(){return new xb(this.#e)}toOperationNode(){return Bd.create(this.#e)}}class wb{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new MN(this,e)}and(...e){return new wb(Kl.create(this.#e,gi(e)))}$castTo(){return new wb(this.#e)}toOperationNode(){return Bd.create(this.#e)}}const $8={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:oa.create(t),modifier:e}}};function B8(t,e){if(!Iv(t)&&!RN(t))throw new Error(`Invalid fetch row count: ${t}`);if(!z8(e))throw new Error(`Invalid fetch modifier: ${e}`);return $8.create(t,e)}function z8(t){return t==="only"||t==="with ties"}class an{#e;constructor(e){this.#e=J(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new an({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,gi(e))})}whereRef(e,n,r){return new an({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,aa(e,n,r))})}having(...e){return new an({...this.#e,queryNode:Qn.cloneWithHaving(this.#e.queryNode,gi(e))})}havingRef(e,n,r){return new an({...this.#e,queryNode:Qn.cloneWithHaving(this.#e.queryNode,aa(e,n,r))})}select(e){return new an({...this.#e,queryNode:Qn.cloneWithSelections(this.#e.queryNode,Po(e))})}distinctOn(e){return new an({...this.#e,queryNode:Qn.cloneWithDistinctOn(this.#e.queryNode,ph(e))})}modifyFront(e){return new an({...this.#e,queryNode:Qn.cloneWithFrontModifier(this.#e.queryNode,Ca.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new an({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.createWithExpression(e.toOperationNode()))})}distinct(){return new an({...this.#e,queryNode:Qn.cloneWithFrontModifier(this.#e.queryNode,Ca.create("Distinct"))})}forUpdate(e){return new an({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.create("ForUpdate",e?Vg(e).map(zr):void 0))})}forShare(e){return new an({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.create("ForShare",e?Vg(e).map(zr):void 0))})}forKeyShare(e){return new an({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.create("ForKeyShare",e?Vg(e).map(zr):void 0))})}forNoKeyUpdate(e){return new an({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.create("ForNoKeyUpdate",e?Vg(e).map(zr):void 0))})}skipLocked(){return new an({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.create("SkipLocked"))})}noWait(){return new an({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.create("NoWait"))})}selectAll(e){return new an({...this.#e,queryNode:Qn.cloneWithSelections(this.#e.queryNode,la(e))})}innerJoin(...e){return new an({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("InnerJoin",e))})}leftJoin(...e){return new an({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("LeftJoin",e))})}rightJoin(...e){return new an({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("RightJoin",e))})}fullJoin(...e){return new an({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("FullJoin",e))})}innerJoinLateral(...e){return new an({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("LateralInnerJoin",e))})}leftJoinLateral(...e){return new an({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Bi("LateralLeftJoin",e))})}orderBy(...e){return new an({...this.#e,queryNode:Qn.cloneWithOrderByItems(this.#e.queryNode,am(e))})}groupBy(e){return new an({...this.#e,queryNode:Qn.cloneWithGroupByItems(this.#e.queryNode,M8(e))})}limit(e){return new an({...this.#e,queryNode:Qn.cloneWithLimit(this.#e.queryNode,LN.create(Yr(e)))})}offset(e){return new an({...this.#e,queryNode:Qn.cloneWithOffset(this.#e.queryNode,D8.create(Yr(e)))})}fetch(e,n="only"){return new an({...this.#e,queryNode:Qn.cloneWithFetch(this.#e.queryNode,B8(e,n))})}top(e,n){return new an({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,ff(e,n))})}union(e){return new an({...this.#e,queryNode:Qn.cloneWithSetOperations(this.#e.queryNode,Zu("union",e,!1))})}unionAll(e){return new an({...this.#e,queryNode:Qn.cloneWithSetOperations(this.#e.queryNode,Zu("union",e,!0))})}intersect(e){return new an({...this.#e,queryNode:Qn.cloneWithSetOperations(this.#e.queryNode,Zu("intersect",e,!1))})}intersectAll(e){return new an({...this.#e,queryNode:Qn.cloneWithSetOperations(this.#e.queryNode,Zu("intersect",e,!0))})}except(e){return new an({...this.#e,queryNode:Qn.cloneWithSetOperations(this.#e.queryNode,Zu("except",e,!1))})}exceptAll(e){return new an({...this.#e,queryNode:Qn.cloneWithSetOperations(this.#e.queryNode,Zu("except",e,!0))})}as(e){return new rF(this,e)}clearSelect(){return new an({...this.#e,queryNode:Qn.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new an({...this.#e,queryNode:Lt.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new an({...this.#e,queryNode:Qn.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new an({...this.#e,queryNode:Qn.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new an({...this.#e,queryNode:Qn.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new an({...this.#e,queryNode:Qn.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new an({...this.#e})}$castTo(){return new an(this.#e)}$narrowType(){return new an(this.#e)}$assertType(){return new an(this.#e)}$asTuple(){return new er(this.toOperationNode())}withPlugin(e){return new an({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=cm){const n=await this.executeTakeFirst();if(n===void 0)throw um(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new an({...this.#e,queryNode:Lt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Nn(an,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function mE(t){return new an(t)}class rF{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return rc.create(this.#e.toOperationNode(),xr.create(this.#t))}}Nn(rF,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Ol=J({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return J({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return J({...t,distinct:!0})},cloneWithOrderBy(t,e){return J({...t,orderBy:t.orderBy?Gl.cloneWithItems(t.orderBy,e):Gl.create(e)})},cloneWithFilter(t,e){return J({...t,filter:t.filter?us.cloneWithOperation(t.filter,"And",e):us.create(e)})},cloneWithOrFilter(t,e){return J({...t,filter:t.filter?us.cloneWithOperation(t.filter,"Or",e):us.create(e)})},cloneWithOver(t,e){return J({...t,over:e})}}),OR=J({is(t){return t.kind==="FunctionNode"},create(t,e){return J({kind:"FunctionNode",func:t,arguments:e})}});class no{#e;constructor(e){this.#e=J(e)}get expressionType(){}as(e){return new W8(this,e)}distinct(){return new no({...this.#e,aggregateFunctionNode:Ol.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(e,n){return new no({...this.#e,aggregateFunctionNode:Ol.cloneWithOrderBy(this.#e.aggregateFunctionNode,am([e,n]))})}filterWhere(...e){return new no({...this.#e,aggregateFunctionNode:Ol.cloneWithFilter(this.#e.aggregateFunctionNode,gi(e))})}filterWhereRef(e,n,r){return new no({...this.#e,aggregateFunctionNode:Ol.cloneWithFilter(this.#e.aggregateFunctionNode,aa(e,n,r))})}over(e){const n=A8();return new no({...this.#e,aggregateFunctionNode:Ol.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}$castTo(){return new no(this.#e)}$notNull(){return new no(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}Nn(no,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class W8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return rc.create(this.#e.toOperationNode(),xr.create(this.#t))}}function iF(){const t=(n,r)=>new er(OR.create(n,ph(r??[]))),e=(n,r)=>new no({aggregateFunctionNode:Ol.create(n,r?ph(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(...n){return t("coalesce",n)},count(n){return e("count",[n])},countAll(n){return new no({aggregateFunctionNode:Ol.create("count",la(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])},jsonAgg(n){return new no({aggregateFunctionNode:Ol.create("json_agg",[As(n)?zr(n):n.toOperationNode()])})},toJson(n){return new er(OR.create("to_json",[As(n)?zr(n):n.toOperationNode()]))}})}const V8=J({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return J({kind:"UnaryOperationNode",operator:t,operand:e})}});function U8(t,e){return V8.create(Ql.create(t),Cs(e))}const Xo=J({is(t){return t.kind==="CaseNode"},create(t){return J({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return J({...t,when:J(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return J({...t,when:t.when?J([...t.when.slice(0,-1),lm.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return J({...t,...e})}});class sF{#e;constructor(e){this.#e=J(e)}when(...e){return new oF({...this.#e,node:Xo.cloneWithWhen(this.#e.node,lm.create(gi(e)))})}}class oF{#e;constructor(e){this.#e=J(e)}then(e){return new H8({...this.#e,node:Xo.cloneWithThen(this.#e.node,AN(e)?PN(e):Yr(e))})}}class H8{#e;constructor(e){this.#e=J(e)}when(...e){return new oF({...this.#e,node:Xo.cloneWithWhen(this.#e.node,lm.create(gi(e)))})}else(e){return new K8({...this.#e,node:Xo.cloneWith(this.#e.node,{else:AN(e)?PN(e):Yr(e)})})}end(){return new er(Xo.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new er(Xo.cloneWith(this.#e.node,{isStatement:!0}))}}class K8{#e;constructor(e){this.#e=J(e)}end(){return new er(Xo.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new er(Xo.cloneWith(this.#e.node,{isStatement:!0}))}}const qR=J({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return J({kind:"JSONPathLegNode",type:t,value:e})}});class gE{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,n){return mb.is(this.#e)?new gh(mb.cloneWithTraversal(this.#e,Xp.is(this.#e.traversal)?Xp.cloneWithLeg(this.#e.traversal,qR.create(e,n)):VP.cloneWithValue(this.#e.traversal,oa.createImmediate(n)))):new gh(Xp.cloneWithLeg(this.#e,qR.create(e,n)))}}class gh extends gE{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new Q8(this,e)}$castTo(){return new gh(this.#e)}$notNull(){return new gh(this.#e)}toOperationNode(){return this.#e}}class Q8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return rc.create(this.#e.toOperationNode(),gs(this.#t)?this.#t.toOperationNode():xr.create(this.#t))}}const AR=J({is(t){return t.kind==="TupleNode"},create(t){return J({kind:"TupleNode",values:J(t)})}}),G8=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],J8=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],Z8=J({is(t){return t.kind==="DataTypeNode"},create(t){return J({kind:"DataTypeNode",dataType:t})}});function Y8(t){return!!(G8.includes(t)||J8.some(e=>e.test(t)))}function tu(t){if(gs(t))return t.toOperationNode();if(Y8(t))return Z8.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}const X8=J({is(t){return t.kind==="CastNode"},create(t,e){return J({kind:"CastNode",expression:t,dataType:e})}});function $N(t=Cv){function e(i,s,o){return new er(FN(i,s,o))}function n(i,s){return new er(U8(i,s))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(i){return mE({queryId:Jn(),executor:t,queryNode:Qn.createFrom(yh(i))})},case(i){return new sF({node:Xo.create(Ml(i)?void 0:Cs(i))})},ref(i,s){return Ml(s)?new er(Ua(i)):new gE(X5(i,s))},jsonPath(){return new gE(Xp.create())},table(i){return new er(zr(i))},val(i){return new er(Yr(i))},refTuple(...i){return new er(AR.create(i.map(Cs)))},tuple(...i){return new er(AR.create(i.map(Yr)))},lit(i){return new er(PN(i))},unary:n,not(i){return n("not",i)},exists(i){return n("exists",i)},neg(i){return n("-",i)},between(i,s,o){return new er($d.create(Cs(i),Ql.create("between"),Kl.create(Yr(s),Yr(o))))},betweenSymmetric(i,s,o){return new er($d.create(Cs(i),Ql.create("between symmetric"),Kl.create(Yr(s),Yr(o))))},and(i){return Va(i)?new er(yb(i,"and")):new er(gR(i,"and"))},or(i){return Va(i)?new er(yb(i,"or")):new er(gR(i,"or"))},parens(...i){const s=gi(i);return Bd.is(s)?new er(s):new er(Bd.create(s))},cast(i,s){return new er(X8.create(Cs(i),tu(s)))},withSchema(i){return $N(t.withPluginAtFront(new dm(i)))}});return r.fn=iF(),r.eb=r,r}function pf(t){return $N()}function pu(t){if(gs(t))return t.toOperationNode();if(Ls(t))return t(pf()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function aF(t){if(gs(t))return t.toOperationNode();if(Ls(t))return t(pf()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function fm(t){return W5(t)||V5(t)||Ls(t)}function yh(t){return Va(t)?t.map(e=>bh(e)):[bh(t)]}function bh(t){return As(t)?lF(t):aF(t)}function lF(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(cF);return rc.create(zr(n),xr.create(r))}else return zr(t)}function zr(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(cF);return Bl.createWithSchema(n,r)}else return Bl.create(t)}function cF(t){return t.trim()}const uF=J({is(t){return t.kind==="AddColumnNode"},create(t){return J({kind:"AddColumnNode",column:t})}}),br=J({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return J({kind:"ColumnDefinitionNode",column:Hr.create(t),dataType:e})},cloneWithFrontModifier(t,e){return J({...t,frontModifiers:t.frontModifiers?J([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return J({...t,endModifiers:t.endModifiers?J([...t.endModifiers,e]):[e]})},cloneWith(t,e){return J({...t,...e})}}),dF=J({is(t){return t.kind==="DropColumnNode"},create(t){return J({kind:"DropColumnNode",column:Hr.create(t)})}}),fF=J({is(t){return t.kind==="RenameColumnNode"},create(t,e){return J({kind:"RenameColumnNode",column:Hr.create(t),renameTo:Hr.create(e)})}}),BN=J({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return J({kind:"CheckConstraintNode",expression:t,name:e?xr.create(e):void 0})}}),eH=["no action","restrict","cascade","set null","set default"],Iy=J({is(t){return t.kind==="ReferencesNode"},create(t,e){return J({kind:"ReferencesNode",table:t,columns:J([...e])})},cloneWithOnDelete(t,e){return J({...t,onDelete:e})},cloneWithOnUpdate(t,e){return J({...t,onUpdate:e})}});function pF(t){return gs(t)?t.toOperationNode():oa.createImmediate(t)}const Hg=J({is(t){return t.kind==="GeneratedNode"},create(t){return J({kind:"GeneratedNode",...t})},createWithExpression(t){return J({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return J({...t,...e})}}),tH=J({is(t){return t.kind==="DefaultValueNode"},create(t){return J({kind:"DefaultValueNode",defaultValue:t})}});function _b(t){if(eH.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}class ir{#e;constructor(e){this.#e=e}autoIncrement(){return new ir(br.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new ir(br.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new ir(br.cloneWith(this.#e,{primaryKey:!0}))}references(e){const n=Ua(e);if(!n.table||jN.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new ir(br.cloneWith(this.#e,{references:Iy.create(n.table,[n.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new ir(br.cloneWith(this.#e,{references:Iy.cloneWithOnDelete(this.#e.references,_b(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new ir(br.cloneWith(this.#e,{references:Iy.cloneWithOnUpdate(this.#e.references,_b(e))}))}unique(){return new ir(br.cloneWith(this.#e,{unique:!0}))}notNull(){return new ir(br.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new ir(br.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new ir(br.cloneWith(this.#e,{defaultTo:tH.create(pF(e))}))}check(e){return new ir(br.cloneWith(this.#e,{check:BN.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new ir(br.cloneWith(this.#e,{generated:Hg.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new ir(br.cloneWith(this.#e,{generated:Hg.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new ir(br.cloneWith(this.#e,{generated:Hg.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new ir(br.cloneWith(this.#e,{generated:Hg.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new ir(br.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new ir(br.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new ir(br.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new ir(br.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}Nn(ir,"don't await ColumnDefinitionBuilder instances directly.");const hF=J({is(t){return t.kind==="ModifyColumnNode"},create(t){return J({kind:"ModifyColumnNode",column:t})}}),Sb=J({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return J({kind:"ForeignKeyConstraintNode",columns:t,references:Iy.create(e,n),name:r?xr.create(r):void 0})},cloneWith(t,e){return J({...t,...e})}});class zd{#e;constructor(e){this.#e=e}onDelete(e){return new zd(Sb.cloneWith(this.#e,{onDelete:_b(e)}))}onUpdate(e){return new zd(Sb.cloneWith(this.#e,{onUpdate:_b(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}}Nn(zd,"don't await ForeignKeyConstraintBuilder instances directly.");const ky=J({is(t){return t.kind==="AddConstraintNode"},create(t){return J({kind:"AddConstraintNode",constraint:t})}}),zN=J({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,n){return J({kind:"UniqueConstraintNode",columns:J(t.map(Hr.create)),name:e?xr.create(e):void 0,nullsNotDistinct:n})},cloneWith(t,e){return J({...t,...e})}}),Cy=J({is(t){return t.kind==="DropConstraintNode"},create(t){return J({kind:"DropConstraintNode",constraintName:xr.create(t)})},cloneWith(t,e){return J({...t,...e})}}),yp=J({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return J({kind:"AlterColumnNode",column:Hr.create(t),[e]:n})}});class WN{#e;constructor(e){this.#e=e}setDataType(e){return new ld(yp.create(this.#e,"dataType",tu(e)))}setDefault(e){return new ld(yp.create(this.#e,"setDefault",pF(e)))}dropDefault(){return new ld(yp.create(this.#e,"dropDefault",!0))}setNotNull(){return new ld(yp.create(this.#e,"setNotNull",!0))}dropNotNull(){return new ld(yp.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}}Nn(WN,"don't await AlterColumnBuilder instances");class ld{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}Nn(ld,"don't await AlteredColumnBuilder instances");class Oc{#e;constructor(e){this.#e=J(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Oc,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class vh{#e;constructor(e){this.#e=J(e)}onDelete(e){return new vh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new vh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Gn.cloneWithTableProps(this.#e.node,{addConstraint:ky.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(vh,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class Td{#e;constructor(e){this.#e=J(e)}ifExists(){return new Td({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{dropConstraint:Cy.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new Td({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{dropConstraint:Cy.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new Td({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{dropConstraint:Cy.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Td,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const mF=J({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return J({kind:"PrimaryKeyConstraintNode",columns:J(t.map(Hr.create)),name:e?xr.create(e):void 0})}}),cd=J({is(t){return t.kind==="AddIndexNode"},create(t){return J({kind:"AddIndexNode",name:xr.create(t)})},cloneWith(t,e){return J({...t,...e})},cloneWithColumns(t,e){return J({...t,columns:[...t.columns||[],...e]})}});class ql{#e;constructor(e){this.#e=J(e)}unique(){return new ql({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addIndex:cd.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new ql({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addIndex:cd.cloneWithColumns(this.#e.node.addIndex,[gb(e)])})})}columns(e){return new ql({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addIndex:cd.cloneWithColumns(this.#e.node.addIndex,e.map(gb))})})}expression(e){return new ql({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addIndex:cd.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new ql({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addIndex:cd.cloneWith(this.#e.node.addIndex,{using:ki.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(ql,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class pm{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}nullsNotDistinct(){return new pm(zN.cloneWith(this.#e,{nullsNotDistinct:!0}))}}Nn(pm,"don't await UniqueConstraintNodeBuilder instances directly.");class gF{#e;constructor(e){this.#e=J(e)}renameTo(e){return new Oc({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{renameTo:zr(e)})})}setSchema(e){return new Oc({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{setSchema:xr.create(e)})})}alterColumn(e,n){const r=n(new WN(e));return new io({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new io({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,dF.create(e))})}renameColumn(e,n){return new io({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,fF.create(e,n))})}addColumn(e,n,r=$l){const i=r(new ir(br.create(e,tu(n))));return new io({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,uF.create(i.toOperationNode()))})}modifyColumn(e,n,r=$l){const i=r(new ir(br.create(e,tu(n))));return new io({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,hF.create(i.toOperationNode()))})}addUniqueConstraint(e,n,r=$l){const i=r(new pm(zN.create(n,e)));return new Oc({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addConstraint:ky.create(i.toOperationNode())})})}addCheckConstraint(e,n){return new Oc({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addConstraint:ky.create(BN.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,i){return new vh({...this.#e,constraintBuilder:new zd(Sb.create(n.map(Hr.create),zr(r),i.map(Hr.create),e))})}addPrimaryKeyConstraint(e,n){return new Oc({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addConstraint:ky.create(mF.create(n,e))})})}dropConstraint(e){return new Td({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{dropConstraint:Cy.create(e)})})}addIndex(e){return new ql({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addIndex:cd.create(e)})})}dropIndex(e){return new Oc({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{dropIndex:Zp.create(e)})})}$call(e){return e(this)}}Nn(gF,"don't await AlterTableBuilder instances");class io{#e;constructor(e){this.#e=J(e)}alterColumn(e,n){const r=n(new WN(e));return new io({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new io({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,dF.create(e))})}renameColumn(e,n){return new io({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,fF.create(e,n))})}addColumn(e,n,r=$l){const i=r(new ir(br.create(e,tu(n))));return new io({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,uF.create(i.toOperationNode()))})}modifyColumn(e,n,r=$l){const i=r(new ir(br.create(e,tu(n))));return new io({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,hF.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(io,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class yF extends XP{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class eo{#e;constructor(e){this.#e=J(e)}ifNotExists(){return new eo({...this.#e,node:Oa.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new eo({...this.#e,node:Oa.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new eo({...this.#e,node:Oa.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new eo({...this.#e,node:Oa.cloneWith(this.#e.node,{table:zr(e)})})}column(e){return new eo({...this.#e,node:Oa.cloneWithColumns(this.#e.node,[gb(e)])})}columns(e){return new eo({...this.#e,node:Oa.cloneWithColumns(this.#e.node,e.map(gb))})}expression(e){return new eo({...this.#e,node:Oa.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new eo({...this.#e,node:Oa.cloneWith(this.#e.node,{using:ki.createWithSql(e)})})}where(...e){const n=new yF;return new eo({...this.#e,node:Lt.cloneWithWhere(this.#e.node,n.transformNode(gi(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(eo,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class Tv{#e;constructor(e){this.#e=J(e)}ifNotExists(){return new Tv({...this.#e,node:MP.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Tv,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function nH(t){if(z5.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}class as{#e;constructor(e){this.#e=J(e)}temporary(){return new as({...this.#e,node:_s.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new as({...this.#e,node:_s.cloneWith(this.#e.node,{onCommit:nH(e)})})}ifNotExists(){return new as({...this.#e,node:_s.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,n,r=$l){const i=r(new ir(br.create(e,tu(n))));return new as({...this.#e,node:_s.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new as({...this.#e,node:_s.cloneWithConstraint(this.#e.node,mF.create(n,e))})}addUniqueConstraint(e,n,r=$l){const i=r(new pm(zN.create(n,e)));return new as({...this.#e,node:_s.cloneWithConstraint(this.#e.node,i.toOperationNode())})}addCheckConstraint(e,n){return new as({...this.#e,node:_s.cloneWithConstraint(this.#e.node,BN.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,i,s=$l){const o=s(new zd(Sb.create(n.map(Hr.create),zr(r),i.map(Hr.create),e)));return new as({...this.#e,node:_s.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(e){return new as({...this.#e,node:_s.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new as({...this.#e,node:_s.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new as({...this.#e,node:_s.cloneWith(this.#e.node,{selectQuery:pu(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(as,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class Rd{#e;constructor(e){this.#e=J(e)}on(e){return new Rd({...this.#e,node:Zp.cloneWith(this.#e.node,{table:zr(e)})})}ifExists(){return new Rd({...this.#e,node:Zp.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Rd({...this.#e,node:Zp.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Rd,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class xh{#e;constructor(e){this.#e=J(e)}ifExists(){return new xh({...this.#e,node:cE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new xh({...this.#e,node:cE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(xh,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class wh{#e;constructor(e){this.#e=J(e)}ifExists(){return new wh({...this.#e,node:uE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new wh({...this.#e,node:uE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(wh,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const kl=J({is(t){return t.kind==="CreateViewNode"},create(t){return J({kind:"CreateViewNode",name:Hl.create(t)})},cloneWith(t,e){return J({...t,...e})}});class rH{#e=new yF;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class Pa{#e;constructor(e){this.#e=J(e)}temporary(){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{columns:e.map(HP)})})}as(e){const n=e.withPlugin(new rH).toOperationNode();return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{as:n})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Pa,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Ty=J({is(t){return t.kind==="DropViewNode"},create(t){return J({kind:"DropViewNode",name:Hl.create(t)})},cloneWith(t,e){return J({...t,...e})}});class jd{#e;constructor(e){this.#e=J(e)}materialized(){return new jd({...this.#e,node:Ty.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new jd({...this.#e,node:Ty.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new jd({...this.#e,node:Ty.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(jd,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const bF=J({is(t){return t.kind==="CreateTypeNode"},create(t){return J({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return J({...t,enum:qN.create(e.map(n=>oa.createImmediate(n)))})}});class Rv{#e;constructor(e){this.#e=J(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new Rv({...this.#e,node:bF.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Rv,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const vF=J({is(t){return t.kind==="DropTypeNode"},create(t){return J({kind:"DropTypeNode",name:t})},cloneWith(t,e){return J({...t,...e})}});class jv{#e;constructor(e){this.#e=J(e)}ifExists(){return new jv({...this.#e,node:vF.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(jv,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function PR(t){const e=".";if(t.includes(e)){const n=t.split(e).map(iH);if(n.length===2)return Hl.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return Hl.create(t)}function iH(t){return t.trim()}class nh{#e;constructor(e){this.#e=e}createTable(e){return new as({queryId:Jn(),executor:this.#e,node:_s.create(zr(e))})}dropTable(e){return new wh({queryId:Jn(),executor:this.#e,node:uE.create(zr(e))})}createIndex(e){return new eo({queryId:Jn(),executor:this.#e,node:Oa.create(e)})}dropIndex(e){return new Rd({queryId:Jn(),executor:this.#e,node:Zp.create(e)})}createSchema(e){return new Tv({queryId:Jn(),executor:this.#e,node:MP.create(e)})}dropSchema(e){return new xh({queryId:Jn(),executor:this.#e,node:cE.create(e)})}alterTable(e){return new gF({queryId:Jn(),executor:this.#e,node:Gn.create(zr(e))})}createView(e){return new Pa({queryId:Jn(),executor:this.#e,node:kl.create(e)})}dropView(e){return new jd({queryId:Jn(),executor:this.#e,node:Ty.create(e)})}createType(e){return new Rv({queryId:Jn(),executor:this.#e,node:bF.create(PR(e))})}dropType(e){return new jv({queryId:Jn(),executor:this.#e,node:vF.create(PR(e))})}withPlugin(e){return new nh(this.#e.withPlugin(e))}withoutPlugins(){return new nh(this.#e.withoutPlugins())}withSchema(e){return new nh(this.#e.withPluginAtFront(new dm(e)))}}class sH{ref(e){return new Z5(e)}}class oH{#e;constructor(e){this.#e=e}async provideConnection(e){const n=await this.#e.acquireConnection();try{return await e(n)}finally{await this.#e.releaseConnection(n)}}}class Dc extends eF{#e;#t;#n;constructor(e,n,r,i=[]){super(i),this.#e=e,this.#t=n,this.#n=r}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#n.provideConnection(e)}withPlugins(e){return new Dc(this.#e,this.#t,this.#n,[...this.plugins,...e])}withPlugin(e){return new Dc(this.#e,this.#t,this.#n,[...this.plugins,e])}withPluginAtFront(e){return new Dc(this.#e,this.#t,this.#n,[e,...this.plugins])}withConnectionProvider(e){return new Dc(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new Dc(this.#e,this.#t,this.#n,[])}}function FR(){return typeof performance<"u"&&Ls(performance.now)?performance.now():Date.now()}class aH{#e;#t;#n;#r;#i;#s=new WeakSet;constructor(e,n){this.#r=!1,this.#e=e,this.#t=n}async init(){if(this.#i)throw new Error("driver has already been destroyed");this.#n||(this.#n=this.#e.init().then(()=>{this.#r=!0}).catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n}async acquireConnection(){if(this.#i)throw new Error("driver has already been destroyed");this.#r||await this.init();const e=await this.#e.acquireConnection();return this.#s.has(e)||(this.#o()&&this.#a(e),this.#s.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,n){return this.#e.beginTransaction(e,n)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#n&&(await this.#n,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#o(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#a(e){const n=e.executeQuery;e.executeQuery=async r=>{let i;const s=FR();try{return await n.call(e,r)}catch(o){throw i=o,await this.#c(o,r,s),o}finally{i||await this.#l(r,s)}}}async #c(e,n,r){await this.#t.error(()=>({level:"error",error:e,query:n,queryDurationMillis:this.#u(r)}))}async #l(e,n){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#u(n)}))}#u(e){return FR()-e}}const lH=()=>{};class xF{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(lH);return this.#t=this.#n(e).finally(()=>{this.#t=void 0}),this.#t}async #n(e){return await e(this.#e)}}const cH=["read uncommitted","read committed","repeatable read","serializable","snapshot"];J(["query","error"]);class uH{#e;#t;constructor(e){Ls(e)?(this.#t=e,this.#e=J({query:!0,error:!0})):(this.#t=dH,this.#e=J({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}function dH(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function fH(t){return Zo(t)&&Ls(t.compile)}let VN=class qp extends jl{#e;constructor(e){let n,r;if(pH(e))n={executor:e.executor},r={...e};else{const i=e.dialect,s=i.createDriver(),o=i.createQueryCompiler(),l=i.createAdapter(),u=new uH(e.log??[]),f=new aH(s,u),p=new oH(f),h=new Dc(o,l,p,e.plugins??[]);n={executor:h},r={config:e,executor:h,dialect:i,driver:f}}super(n),this.#e=J(r)}get schema(){return new nh(this.#e.executor)}get dynamic(){return new sH}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new sF({node:Xo.create(Ml(e)?void 0:pu(e))})}get fn(){return iF()}transaction(){return new Ov({...this.#e})}connection(){return new wF({...this.#e})}withPlugin(e){return new qp({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new qp({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new qp({...this.#e,executor:this.#e.executor.withPluginAtFront(new dm(e))})}withTables(){return new qp({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,n=Jn()){const r=fH(e)?e.compile():e;return this.getExecutor().executeQuery(r,n)}};class pd extends VN{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new pd({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new pd({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new pd({...this.#e,executor:this.#e.executor.withPluginAtFront(new dm(e))})}withTables(){return new pd({...this.#e})}}function pH(t){return Zo(t)&&Zo(t.config)&&Zo(t.driver)&&Zo(t.executor)&&Zo(t.dialect)}class wF{#e;constructor(e){this.#e=J(e)}async execute(e){return this.#e.executor.provideConnection(async n=>{const r=this.#e.executor.withConnectionProvider(new xF(n)),i=new VN({...this.#e,executor:r});return await e(i)})}}Nn(wF,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class Ov{#e;constructor(e){this.#e=J(e)}setIsolationLevel(e){return new Ov({...this.#e,isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=this.#e,i={isolationLevel:n};return hH(i),this.#e.executor.provideConnection(async s=>{const o=this.#e.executor.withConnectionProvider(new xF(s)),l=new pd({...r,executor:o});try{await this.#e.driver.beginTransaction(s,i);const u=await e(l);return await this.#e.driver.commitTransaction(s),u}catch(u){throw await this.#e.driver.rollbackTransaction(s),u}})}}Nn(Ov,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function hH(t){if(t.isolationLevel&&!cH.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}class Od{#e;constructor(e){this.#e=J(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new _F(this,e)}$castTo(){return new Od({...this.#e})}$notNull(){return new Od(this.#e)}withPlugin(e){return new Od({...this.#e,plugins:this.#e.plugins!==void 0?J([...this.#e.plugins,e]):J([e])})}toOperationNode(){return this.#n(this.#t())}compile(e){return this.#r(this.#t(e))}async execute(e){const n=this.#t(e);return n.executeQuery(this.#r(n),this.#e.queryId)}#t(e){const n=e!==void 0?e.getExecutor():Cv;return this.#e.plugins!==void 0?n.withPlugins(this.#e.plugins):n}#n(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#r(e){return e.compileQuery(this.#n(e),this.#e.queryId)}}function wl(t){return new Od(t)}Nn(Od,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class _F{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return rc.create(this.#e.toOperationNode(),gs(this.#t)?this.#t.toOperationNode():xr.create(this.#t))}}Nn(_F,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const fr=Object.assign((t,...e)=>wl({queryId:Jn(),rawNode:ki.create(t,e?.map(DR)??[])}),{ref(t){return wl({queryId:Jn(),rawNode:ki.createWithChild(Ua(t))})},val(t){return wl({queryId:Jn(),rawNode:ki.createWithChild(Yr(t))})},value(t){return this.val(t)},table(t){return wl({queryId:Jn(),rawNode:ki.createWithChild(zr(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",wl({queryId:Jn(),rawNode:ki.create(e,t.map(xr.create))})},lit(t){return wl({queryId:Jn(),rawNode:ki.createWithChild(oa.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return wl({queryId:Jn(),rawNode:ki.createWithSql(t)})},join(t,e=fr`, `){const n=new Array(2*t.length-1),r=e.toOperationNode();for(let i=0;i<t.length;++i)n[2*i]=DR(t[i]),i!==t.length-1&&(n[2*i+1]=r);return wl({queryId:Jn(),rawNode:ki.createWithChildren(n)})}});function DR(t){return gs(t)?t.toOperationNode():Yr(t)}class mH{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=J({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}class gH extends mH{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),J({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){const n=this.parentNode!==void 0&&!Bd.is(this.parentNode)&&!Ns.is(this.parentNode)&&!_s.is(this.parentNode)&&!kl.is(this.parentNode)&&!nF.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),n&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,n=", "){const r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(n)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){const n=this.nodeStack.find(Lt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!ds.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!ds.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){const n=this.nodeStack.find(Lt.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!As(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");const{values:n}=e;for(let r=0;r<n.length;++r)this.appendValue(n[r]),r!==n.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(bH[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){const{sqlFragments:n,parameters:r}=e;for(let i=0;i<n.length;++i)this.append(n[i]),r.length>i&&this.visitNode(r[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){const n=this.nodeStack.find(Lt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!ds.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!ds.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),hb(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(yH[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return Ql.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(const n of e.pathLegs)this.visitNode(n);this.append("'")}visitJSONPathLeg(e){const n=e.type==="ArrayLocation";this.append(n?"[":"."),this.append(String(e.value)),n&&this.append("]")}visitJSONOperatorChain(e){for(let n=0,r=e.values.length;n<r;n++)n===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[n])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){const n=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper();let i="";for(const s of e)i+=s,s===n?i+=n:s===r&&(i+=r);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(As(e))this.append(`'${e}'`);else if(Iv(e)||hb(e))this.append(e.toString());else if(TN(e))this.append("null");else if(B5(e))this.appendImmediateValue(e.toISOString());else if(RN(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((n,r)=>n.modifier&&r.modifier?LR[n.modifier]-LR[r.modifier]:1),J(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}const yH=J({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),LR=J({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),bH=J({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"});class vH{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}const xH=/"/g;class wH extends gH{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(xH,'""')}visitDefaultInsertValue(e){this.append("null")}}const _H="kysely_migration",SH="kysely_migration_lock";J({__noMigrations__:!0});class EH{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let n=this.#e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(n=n.where("name","!=",_H).where("name","!=",SH));const r=await n.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(e){return{tables:await this.getTables(e)}}async #t(e){const n=this.#e,r=await n.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),i=r.sql?.split(/[\(\),]/)?.find(o=>o.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),s=await n.selectFrom(fr`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:s.map(o=>({name:o.name,dataType:o.type,isNullable:!o.notnull,isAutoIncrementing:o.name===i,hasDefaultValue:o.dflt_value!=null,comment:void 0}))}}}class NH extends vH{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}const SF={jsonObject(t){const e=fr.join(Object.entries(t).map(([n,r])=>fr`${n}, ${r}`));return fr`json_object(${e})`},jsonGroupArray(t){return fr`json_group_array(${SF.jsonObject(t)})`}},EF={hash(t){return lE.sha224(t)},verify(t,e){return lE.sha224(t)===e}};var jn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of s)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(jn||(jn={}));var yE;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(yE||(yE={}));const Ft=jn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fa=t=>{switch(typeof t){case"undefined":return Ft.undefined;case"string":return Ft.string;case"number":return isNaN(t)?Ft.nan:Ft.number;case"boolean":return Ft.boolean;case"function":return Ft.function;case"bigint":return Ft.bigint;case"symbol":return Ft.symbol;case"object":return Array.isArray(t)?Ft.array:t===null?Ft.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ft.promise:typeof Map<"u"&&t instanceof Map?Ft.map:typeof Set<"u"&&t instanceof Set?Ft.set:typeof Date<"u"&&t instanceof Date?Ft.date:Ft.object;default:return Ft.unknown}},yt=jn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),IH=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class qs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,u=0;for(;u<o.path.length;){const f=o.path[u];u===o.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(n(o))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return i(this),r}static assert(e){if(!(e instanceof qs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,jn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}qs.create=t=>new qs(t);const Wd=(t,e)=>{let n;switch(t.code){case yt.invalid_type:t.received===Ft.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case yt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,jn.jsonStringifyReplacer)}`;break;case yt.unrecognized_keys:n=`Unrecognized key(s) in object: ${jn.joinValues(t.keys,", ")}`;break;case yt.invalid_union:n="Invalid input";break;case yt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${jn.joinValues(t.options)}`;break;case yt.invalid_enum_value:n=`Invalid enum value. Expected ${jn.joinValues(t.options)}, received '${t.received}'`;break;case yt.invalid_arguments:n="Invalid function arguments";break;case yt.invalid_return_type:n="Invalid function return type";break;case yt.invalid_date:n="Invalid date";break;case yt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:jn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case yt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case yt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case yt.custom:n="Invalid input";break;case yt.invalid_intersection_types:n="Intersection results could not be merged";break;case yt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case yt.not_finite:n="Number must be finite";break;default:n=e.defaultError,jn.assertNever(t)}return{message:n}};let NF=Wd;function kH(t){NF=t}function Eb(){return NF}const Nb=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const u=r.filter(f=>!!f).slice().reverse();for(const f of u)l=f(o,{data:e,defaultError:l}).message;return{...i,path:s,message:l}},CH=[];function kt(t,e){const n=Eb(),r=Nb({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Wd?void 0:Wd].filter(i=>!!i)});t.common.issues.push(r)}class ji{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return cn;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return ji.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return cn;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const cn=Object.freeze({status:"aborted"}),hd=t=>({status:"dirty",value:t}),Ki=t=>({status:"valid",value:t}),bE=t=>t.status==="aborted",vE=t=>t.status==="dirty",nu=t=>t.status==="valid",_h=t=>typeof Promise<"u"&&t instanceof Promise;function Ib(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function IF(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Kt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Kt||(Kt={}));var Ap,Pp;class ca{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const MR=(t,e)=>{if(nu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new qs(t.common.issues);return this._error=n,this._error}}};function Sn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{var u,f;const{message:p}=t;return o.code==="invalid_enum_value"?{message:p??l.defaultError}:typeof l.data>"u"?{message:(u=p??r)!==null&&u!==void 0?u:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(f=p??n)!==null&&f!==void 0?f:l.defaultError}},description:i}}class In{get description(){return this._def.description}_getType(e){return Fa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Fa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ji,ctx:{common:e.parent.common,data:e.data,parsedType:Fa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(_h(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)},s=this._parseSync({data:e,path:i.path,parent:i});return MR(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return nu(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>nu(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await (_h(i)?i:Promise.resolve(i));return MR(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),l=()=>s.addIssue({code:yt.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Fo({schema:this,typeName:ln.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ta.create(this,this._def)}nullable(){return Xl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qo.create(this)}promise(){return Ud.create(this,this._def)}or(e){return Ih.create([this,e],this._def)}and(e){return kh.create(this,e,this._def)}transform(e){return new Fo({...Sn(this._def),schema:this,typeName:ln.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Oh({...Sn(this._def),innerType:this,defaultValue:n,typeName:ln.ZodDefault})}brand(){return new UN({typeName:ln.ZodBranded,type:this,...Sn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new qh({...Sn(this._def),innerType:this,catchValue:n,typeName:ln.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return hm.create(this,e)}readonly(){return Ah.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const TH=/^c[^\s-]{8,}$/i,RH=/^[0-9a-z]+$/,jH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,OH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,qH=/^[a-z0-9_-]{21}$/i,AH=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,PH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,FH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,DH="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let r0;const LH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,MH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,$H=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,BH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,zH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,WH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,kF="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",VH=new RegExp(`^${kF}$`);function CF(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function UH(t){return new RegExp(`^${CF(t)}$`)}function TF(t){let e=`${kF}T${CF(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function HH(t,e){return!!((e==="v4"||!e)&&LH.test(t)||(e==="v6"||!e)&&$H.test(t))}function KH(t,e){if(!AH.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function QH(t,e){return!!((e==="v4"||!e)&&MH.test(t)||(e==="v6"||!e)&&BH.test(t))}class jo extends In{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ft.string){const s=this._getOrReturnCtx(e);return kt(s,{code:yt.invalid_type,expected:Ft.string,received:s.parsedType}),cn}const r=new ji;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),kt(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),kt(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,l=e.data.length<s.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?kt(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&kt(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")FH.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"email",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")r0||(r0=new RegExp(DH,"u")),r0.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"emoji",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")OH.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"uuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")qH.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"nanoid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")TH.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"cuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")RH.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"cuid2",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")jH.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"ulid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),kt(i,{validation:"url",code:yt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"regex",code:yt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),kt(i,{code:yt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),kt(i,{code:yt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),kt(i,{code:yt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?TF(s).test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{code:yt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?VH.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{code:yt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?UH(s).test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{code:yt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?PH.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"duration",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?HH(e.data,s.version)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"ip",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?KH(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"jwt",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?QH(e.data,s.version)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"cidr",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?zH.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"base64",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?WH.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"base64url",code:yt.invalid_string,message:s.message}),r.dirty()):jn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:yt.invalid_string,...Kt.errToObj(r)})}_addCheck(e){return new jo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Kt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Kt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Kt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Kt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Kt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Kt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Kt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Kt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Kt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Kt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Kt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Kt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Kt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Kt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Kt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Kt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Kt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Kt.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Kt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Kt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Kt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Kt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Kt.errToObj(n)})}nonempty(e){return this.min(1,Kt.errToObj(e))}trim(){return new jo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new jo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new jo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}jo.create=t=>{var e;return new jo({checks:[],typeName:ln.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Sn(t)})};function GH(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Jl extends In{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ft.number){const s=this._getOrReturnCtx(e);return kt(s,{code:yt.invalid_type,expected:Ft.number,received:s.parsedType}),cn}let r;const i=new ji;for(const s of this._def.checks)s.kind==="int"?jn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),kt(r,{code:yt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),kt(r,{code:yt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),kt(r,{code:yt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?GH(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),kt(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),kt(r,{code:yt.not_finite,message:s.message}),i.dirty()):jn.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Kt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Kt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Kt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Kt.toString(n))}setLimit(e,n,r,i){return new Jl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Kt.toString(i)}]})}_addCheck(e){return new Jl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Kt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Kt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Kt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Kt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Kt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Kt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Kt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Kt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Kt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&jn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Jl.create=t=>new Jl({checks:[],typeName:ln.ZodNumber,coerce:t?.coerce||!1,...Sn(t)});class Zl extends In{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ft.bigint)return this._getInvalidInput(e);let r;const i=new ji;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),kt(r,{code:yt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),kt(r,{code:yt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),kt(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):jn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return kt(n,{code:yt.invalid_type,expected:Ft.bigint,received:n.parsedType}),cn}gte(e,n){return this.setLimit("min",e,!0,Kt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Kt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Kt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Kt.toString(n))}setLimit(e,n,r,i){return new Zl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Kt.toString(i)}]})}_addCheck(e){return new Zl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Kt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Kt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Kt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Kt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Kt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Zl.create=t=>{var e;return new Zl({checks:[],typeName:ln.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Sn(t)})};class Sh extends In{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ft.boolean){const r=this._getOrReturnCtx(e);return kt(r,{code:yt.invalid_type,expected:Ft.boolean,received:r.parsedType}),cn}return Ki(e.data)}}Sh.create=t=>new Sh({typeName:ln.ZodBoolean,coerce:t?.coerce||!1,...Sn(t)});class ru extends In{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ft.date){const s=this._getOrReturnCtx(e);return kt(s,{code:yt.invalid_type,expected:Ft.date,received:s.parsedType}),cn}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return kt(s,{code:yt.invalid_date}),cn}const r=new ji;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),kt(i,{code:yt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),kt(i,{code:yt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):jn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ru({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Kt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Kt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ru.create=t=>new ru({checks:[],coerce:t?.coerce||!1,typeName:ln.ZodDate,...Sn(t)});class kb extends In{_parse(e){if(this._getType(e)!==Ft.symbol){const r=this._getOrReturnCtx(e);return kt(r,{code:yt.invalid_type,expected:Ft.symbol,received:r.parsedType}),cn}return Ki(e.data)}}kb.create=t=>new kb({typeName:ln.ZodSymbol,...Sn(t)});class Eh extends In{_parse(e){if(this._getType(e)!==Ft.undefined){const r=this._getOrReturnCtx(e);return kt(r,{code:yt.invalid_type,expected:Ft.undefined,received:r.parsedType}),cn}return Ki(e.data)}}Eh.create=t=>new Eh({typeName:ln.ZodUndefined,...Sn(t)});class Nh extends In{_parse(e){if(this._getType(e)!==Ft.null){const r=this._getOrReturnCtx(e);return kt(r,{code:yt.invalid_type,expected:Ft.null,received:r.parsedType}),cn}return Ki(e.data)}}Nh.create=t=>new Nh({typeName:ln.ZodNull,...Sn(t)});class Vd extends In{constructor(){super(...arguments),this._any=!0}_parse(e){return Ki(e.data)}}Vd.create=t=>new Vd({typeName:ln.ZodAny,...Sn(t)});class Gc extends In{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ki(e.data)}}Gc.create=t=>new Gc({typeName:ln.ZodUnknown,...Sn(t)});class Ha extends In{_parse(e){const n=this._getOrReturnCtx(e);return kt(n,{code:yt.invalid_type,expected:Ft.never,received:n.parsedType}),cn}}Ha.create=t=>new Ha({typeName:ln.ZodNever,...Sn(t)});class Cb extends In{_parse(e){if(this._getType(e)!==Ft.undefined){const r=this._getOrReturnCtx(e);return kt(r,{code:yt.invalid_type,expected:Ft.void,received:r.parsedType}),cn}return Ki(e.data)}}Cb.create=t=>new Cb({typeName:ln.ZodVoid,...Sn(t)});class qo extends In{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Ft.array)return kt(n,{code:yt.invalid_type,expected:Ft.array,received:n.parsedType}),cn;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(kt(n,{code:o?yt.too_big:yt.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(kt(n,{code:yt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(kt(n,{code:yt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new ca(n,o,n.path,l)))).then(o=>ji.mergeArray(r,o));const s=[...n.data].map((o,l)=>i.type._parseSync(new ca(n,o,n.path,l)));return ji.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new qo({...this._def,minLength:{value:e,message:Kt.toString(n)}})}max(e,n){return new qo({...this._def,maxLength:{value:e,message:Kt.toString(n)}})}length(e,n){return new qo({...this._def,exactLength:{value:e,message:Kt.toString(n)}})}nonempty(e){return this.min(1,e)}}qo.create=(t,e)=>new qo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ln.ZodArray,...Sn(e)});function ud(t){if(t instanceof Cr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ta.create(ud(r))}return new Cr({...t._def,shape:()=>e})}else return t instanceof qo?new qo({...t._def,type:ud(t.element)}):t instanceof ta?ta.create(ud(t.unwrap())):t instanceof Xl?Xl.create(ud(t.unwrap())):t instanceof ua?ua.create(t.items.map(e=>ud(e))):t}class Cr extends In{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=jn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ft.object){const f=this._getOrReturnCtx(e);return kt(f,{code:yt.invalid_type,expected:Ft.object,received:f.parsedType}),cn}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ha&&this._def.unknownKeys==="strip"))for(const f in i.data)o.includes(f)||l.push(f);const u=[];for(const f of o){const p=s[f],h=i.data[f];u.push({key:{status:"valid",value:f},value:p._parse(new ca(i,h,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof Ha){const f=this._def.unknownKeys;if(f==="passthrough")for(const p of l)u.push({key:{status:"valid",value:p},value:{status:"valid",value:i.data[p]}});else if(f==="strict")l.length>0&&(kt(i,{code:yt.unrecognized_keys,keys:l}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const p of l){const h=i.data[p];u.push({key:{status:"valid",value:p},value:f._parse(new ca(i,h,i.path,p)),alwaysSet:p in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const p of u){const h=await p.key,b=await p.value;f.push({key:h,value:b,alwaysSet:p.alwaysSet})}return f}).then(f=>ji.mergeObjectSync(r,f)):ji.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Kt.errToObj,new Cr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,l;const u=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Kt.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new Cr({...this._def,unknownKeys:"strip"})}passthrough(){return new Cr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Cr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Cr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ln.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Cr({...this._def,catchall:e})}pick(e){const n={};return jn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Cr({...this._def,shape:()=>n})}omit(e){const n={};return jn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Cr({...this._def,shape:()=>n})}deepPartial(){return ud(this)}partial(e){const n={};return jn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Cr({...this._def,shape:()=>n})}required(e){const n={};return jn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof ta;)s=s._def.innerType;n[r]=s}}),new Cr({...this._def,shape:()=>n})}keyof(){return RF(jn.objectKeys(this.shape))}}Cr.create=(t,e)=>new Cr({shape:()=>t,unknownKeys:"strip",catchall:Ha.create(),typeName:ln.ZodObject,...Sn(e)});Cr.strictCreate=(t,e)=>new Cr({shape:()=>t,unknownKeys:"strict",catchall:Ha.create(),typeName:ln.ZodObject,...Sn(e)});Cr.lazycreate=(t,e)=>new Cr({shape:t,unknownKeys:"strip",catchall:Ha.create(),typeName:ln.ZodObject,...Sn(e)});class Ih extends In{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new qs(l.ctx.common.issues));return kt(n,{code:yt.invalid_union,unionErrors:o}),cn}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const u of r){const f={...n,common:{...n.common,issues:[]},parent:null},p=u._parseSync({data:n.data,path:n.path,parent:f});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(u=>new qs(u));return kt(n,{code:yt.invalid_union,unionErrors:l}),cn}}get options(){return this._def.options}}Ih.create=(t,e)=>new Ih({options:t,typeName:ln.ZodUnion,...Sn(e)});const qa=t=>t instanceof Th?qa(t.schema):t instanceof Fo?qa(t.innerType()):t instanceof Rh?[t.value]:t instanceof Yl?t.options:t instanceof jh?jn.objectValues(t.enum):t instanceof Oh?qa(t._def.innerType):t instanceof Eh?[void 0]:t instanceof Nh?[null]:t instanceof ta?[void 0,...qa(t.unwrap())]:t instanceof Xl?[null,...qa(t.unwrap())]:t instanceof UN||t instanceof Ah?qa(t.unwrap()):t instanceof qh?qa(t._def.innerType):[];class qv extends In{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ft.object)return kt(n,{code:yt.invalid_type,expected:Ft.object,received:n.parsedType}),cn;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(kt(n,{code:yt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),cn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=qa(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,s)}}return new qv({typeName:ln.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Sn(r)})}}function xE(t,e){const n=Fa(t),r=Fa(e);if(t===e)return{valid:!0,data:t};if(n===Ft.object&&r===Ft.object){const i=jn.objectKeys(e),s=jn.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of s){const u=xE(t[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(n===Ft.array&&r===Ft.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],l=e[s],u=xE(o,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===Ft.date&&r===Ft.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class kh extends In{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(bE(s)||bE(o))return cn;const l=xE(s.value,o.value);return l.valid?((vE(s)||vE(o))&&n.dirty(),{status:n.value,value:l.data}):(kt(r,{code:yt.invalid_intersection_types}),cn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}kh.create=(t,e,n)=>new kh({left:t,right:e,typeName:ln.ZodIntersection,...Sn(n)});class ua extends In{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.array)return kt(r,{code:yt.invalid_type,expected:Ft.array,received:r.parsedType}),cn;if(r.data.length<this._def.items.length)return kt(r,{code:yt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),cn;!this._def.rest&&r.data.length>this._def.items.length&&(kt(r,{code:yt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new ca(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>ji.mergeArray(n,o)):ji.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ua({...this._def,rest:e})}}ua.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ua({items:t,typeName:ln.ZodTuple,rest:null,...Sn(e)})};class Ch extends In{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.object)return kt(r,{code:yt.invalid_type,expected:Ft.object,received:r.parsedType}),cn;const i=[],s=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:s._parse(new ca(r,l,r.path,l)),value:o._parse(new ca(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?ji.mergeObjectAsync(n,i):ji.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof In?new Ch({keyType:e,valueType:n,typeName:ln.ZodRecord,...Sn(r)}):new Ch({keyType:jo.create(),valueType:e,typeName:ln.ZodRecord,...Sn(n)})}}class Tb extends In{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.map)return kt(r,{code:yt.invalid_type,expected:Ft.map,received:r.parsedType}),cn;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([l,u],f)=>({key:i._parse(new ca(r,l,r.path,[f,"key"])),value:s._parse(new ca(r,u,r.path,[f,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const f=await u.key,p=await u.value;if(f.status==="aborted"||p.status==="aborted")return cn;(f.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(f.value,p.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const u of o){const f=u.key,p=u.value;if(f.status==="aborted"||p.status==="aborted")return cn;(f.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(f.value,p.value)}return{status:n.value,value:l}}}}Tb.create=(t,e,n)=>new Tb({valueType:e,keyType:t,typeName:ln.ZodMap,...Sn(n)});class iu extends In{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.set)return kt(r,{code:yt.invalid_type,expected:Ft.set,received:r.parsedType}),cn;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(kt(r,{code:yt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(kt(r,{code:yt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(u){const f=new Set;for(const p of u){if(p.status==="aborted")return cn;p.status==="dirty"&&n.dirty(),f.add(p.value)}return{status:n.value,value:f}}const l=[...r.data.values()].map((u,f)=>s._parse(new ca(r,u,r.path,f)));return r.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,n){return new iu({...this._def,minSize:{value:e,message:Kt.toString(n)}})}max(e,n){return new iu({...this._def,maxSize:{value:e,message:Kt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}iu.create=(t,e)=>new iu({valueType:t,minSize:null,maxSize:null,typeName:ln.ZodSet,...Sn(e)});class qd extends In{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ft.function)return kt(n,{code:yt.invalid_type,expected:Ft.function,received:n.parsedType}),cn;function r(l,u){return Nb({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Eb(),Wd].filter(f=>!!f),issueData:{code:yt.invalid_arguments,argumentsError:u}})}function i(l,u){return Nb({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Eb(),Wd].filter(f=>!!f),issueData:{code:yt.invalid_return_type,returnTypeError:u}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Ud){const l=this;return Ki(async function(...u){const f=new qs([]),p=await l._def.args.parseAsync(u,s).catch(x=>{throw f.addIssue(r(u,x)),f}),h=await Reflect.apply(o,this,p);return await l._def.returns._def.type.parseAsync(h,s).catch(x=>{throw f.addIssue(i(h,x)),f})})}else{const l=this;return Ki(function(...u){const f=l._def.args.safeParse(u,s);if(!f.success)throw new qs([r(u,f.error)]);const p=Reflect.apply(o,this,f.data),h=l._def.returns.safeParse(p,s);if(!h.success)throw new qs([i(p,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new qd({...this._def,args:ua.create(e).rest(Gc.create())})}returns(e){return new qd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new qd({args:e||ua.create([]).rest(Gc.create()),returns:n||Gc.create(),typeName:ln.ZodFunction,...Sn(r)})}}class Th extends In{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Th.create=(t,e)=>new Th({getter:t,typeName:ln.ZodLazy,...Sn(e)});class Rh extends In{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return kt(n,{received:n.data,code:yt.invalid_literal,expected:this._def.value}),cn}return{status:"valid",value:e.data}}get value(){return this._def.value}}Rh.create=(t,e)=>new Rh({value:t,typeName:ln.ZodLiteral,...Sn(e)});function RF(t,e){return new Yl({values:t,typeName:ln.ZodEnum,...Sn(e)})}class Yl extends In{constructor(){super(...arguments),Ap.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return kt(n,{expected:jn.joinValues(r),received:n.parsedType,code:yt.invalid_type}),cn}if(Ib(this,Ap)||IF(this,Ap,new Set(this._def.values)),!Ib(this,Ap).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return kt(n,{received:n.data,code:yt.invalid_enum_value,options:r}),cn}return Ki(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Yl.create(e,{...this._def,...n})}exclude(e,n=this._def){return Yl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Ap=new WeakMap;Yl.create=RF;class jh extends In{constructor(){super(...arguments),Pp.set(this,void 0)}_parse(e){const n=jn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ft.string&&r.parsedType!==Ft.number){const i=jn.objectValues(n);return kt(r,{expected:jn.joinValues(i),received:r.parsedType,code:yt.invalid_type}),cn}if(Ib(this,Pp)||IF(this,Pp,new Set(jn.getValidEnumValues(this._def.values))),!Ib(this,Pp).has(e.data)){const i=jn.objectValues(n);return kt(r,{received:r.data,code:yt.invalid_enum_value,options:i}),cn}return Ki(e.data)}get enum(){return this._def.values}}Pp=new WeakMap;jh.create=(t,e)=>new jh({values:t,typeName:ln.ZodNativeEnum,...Sn(e)});class Ud extends In{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ft.promise&&n.common.async===!1)return kt(n,{code:yt.invalid_type,expected:Ft.promise,received:n.parsedType}),cn;const r=n.parsedType===Ft.promise?n.data:Promise.resolve(n.data);return Ki(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ud.create=(t,e)=>new Ud({type:t,typeName:ln.ZodPromise,...Sn(e)});class Fo extends In{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ln.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{kt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return cn;const u=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return u.status==="aborted"?cn:u.status==="dirty"||n.value==="dirty"?hd(u.value):u});{if(n.value==="aborted")return cn;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?cn:l.status==="dirty"||n.value==="dirty"?hd(l.value):l}}if(i.type==="refinement"){const o=l=>{const u=i.refinement(l,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?cn:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?cn:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!nu(o))return o;const l=i.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>nu(o)?Promise.resolve(i.transform(o.value,s)).then(l=>({status:n.value,value:l})):o);jn.assertNever(i)}}Fo.create=(t,e,n)=>new Fo({schema:t,typeName:ln.ZodEffects,effect:e,...Sn(n)});Fo.createWithPreprocess=(t,e,n)=>new Fo({schema:e,effect:{type:"preprocess",transform:t},typeName:ln.ZodEffects,...Sn(n)});class ta extends In{_parse(e){return this._getType(e)===Ft.undefined?Ki(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ta.create=(t,e)=>new ta({innerType:t,typeName:ln.ZodOptional,...Sn(e)});class Xl extends In{_parse(e){return this._getType(e)===Ft.null?Ki(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xl.create=(t,e)=>new Xl({innerType:t,typeName:ln.ZodNullable,...Sn(e)});class Oh extends In{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ft.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Oh.create=(t,e)=>new Oh({innerType:t,typeName:ln.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Sn(e)});class qh extends In{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return _h(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new qs(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new qs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}qh.create=(t,e)=>new qh({innerType:t,typeName:ln.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Sn(e)});class Rb extends In{_parse(e){if(this._getType(e)!==Ft.nan){const r=this._getOrReturnCtx(e);return kt(r,{code:yt.invalid_type,expected:Ft.nan,received:r.parsedType}),cn}return{status:"valid",value:e.data}}}Rb.create=t=>new Rb({typeName:ln.ZodNaN,...Sn(t)});const JH=Symbol("zod_brand");class UN extends In{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class hm extends In{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?cn:s.status==="dirty"?(n.dirty(),hd(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?cn:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new hm({in:e,out:n,typeName:ln.ZodPipeline})}}class Ah extends In{_parse(e){const n=this._def.innerType._parse(e),r=i=>(nu(i)&&(i.value=Object.freeze(i.value)),i);return _h(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Ah.create=(t,e)=>new Ah({innerType:t,typeName:ln.ZodReadonly,...Sn(e)});function jF(t,e={},n){return t?Vd.create().superRefine((r,i)=>{var s,o;if(!t(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(o=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,f=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...f,fatal:u})}}):Vd.create()}const ZH={object:Cr.lazycreate};var ln;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ln||(ln={}));const YH=(t,e={message:`Input not instance of ${t.name}`})=>jF(n=>n instanceof t,e),OF=jo.create,qF=Jl.create,XH=Rb.create,e9=Zl.create,AF=Sh.create,t9=ru.create,n9=kb.create,r9=Eh.create,i9=Nh.create,s9=Vd.create,o9=Gc.create,a9=Ha.create,l9=Cb.create,c9=qo.create,u9=Cr.create,d9=Cr.strictCreate,f9=Ih.create,p9=qv.create,h9=kh.create,m9=ua.create,g9=Ch.create,y9=Tb.create,b9=iu.create,v9=qd.create,x9=Th.create,w9=Rh.create,_9=Yl.create,S9=jh.create,E9=Ud.create,$R=Fo.create,N9=ta.create,I9=Xl.create,k9=Fo.createWithPreprocess,C9=hm.create,T9=()=>OF().optional(),R9=()=>qF().optional(),j9=()=>AF().optional(),O9={string:t=>jo.create({...t,coerce:!0}),number:t=>Jl.create({...t,coerce:!0}),boolean:t=>Sh.create({...t,coerce:!0}),bigint:t=>Zl.create({...t,coerce:!0}),date:t=>ru.create({...t,coerce:!0})},q9=cn;var D=Object.freeze({__proto__:null,defaultErrorMap:Wd,setErrorMap:kH,getErrorMap:Eb,makeIssue:Nb,EMPTY_PATH:CH,addIssueToContext:kt,ParseStatus:ji,INVALID:cn,DIRTY:hd,OK:Ki,isAborted:bE,isDirty:vE,isValid:nu,isAsync:_h,get util(){return jn},get objectUtil(){return yE},ZodParsedType:Ft,getParsedType:Fa,ZodType:In,datetimeRegex:TF,ZodString:jo,ZodNumber:Jl,ZodBigInt:Zl,ZodBoolean:Sh,ZodDate:ru,ZodSymbol:kb,ZodUndefined:Eh,ZodNull:Nh,ZodAny:Vd,ZodUnknown:Gc,ZodNever:Ha,ZodVoid:Cb,ZodArray:qo,ZodObject:Cr,ZodUnion:Ih,ZodDiscriminatedUnion:qv,ZodIntersection:kh,ZodTuple:ua,ZodRecord:Ch,ZodMap:Tb,ZodSet:iu,ZodFunction:qd,ZodLazy:Th,ZodLiteral:Rh,ZodEnum:Yl,ZodNativeEnum:jh,ZodPromise:Ud,ZodEffects:Fo,ZodTransformer:Fo,ZodOptional:ta,ZodNullable:Xl,ZodDefault:Oh,ZodCatch:qh,ZodNaN:Rb,BRAND:JH,ZodBranded:UN,ZodPipeline:hm,ZodReadonly:Ah,custom:jF,Schema:In,ZodSchema:In,late:ZH,get ZodFirstPartyTypeKind(){return ln},coerce:O9,any:s9,array:c9,bigint:e9,boolean:AF,date:t9,discriminatedUnion:p9,effect:$R,enum:_9,function:v9,instanceof:YH,intersection:h9,lazy:x9,literal:w9,map:y9,nan:XH,nativeEnum:S9,never:a9,null:i9,nullable:I9,number:qF,object:u9,oboolean:j9,onumber:R9,optional:N9,ostring:T9,pipeline:C9,preprocess:k9,promise:E9,record:g9,set:b9,strictObject:d9,string:OF,symbol:n9,transformer:$R,tuple:m9,undefined:r9,union:f9,unknown:o9,void:l9,NEVER:q9,ZodIssueCode:yt,quotelessJson:IH,ZodError:qs});const A9=D.object({page:D.number().gte(0,"Page must be greater than zero"),size:D.number().gte(1,"Page size must be greater than one to get any data")}),Oi=D.object({id:D.string().min(1)}),HN=D.object({message:D.string()}),qi=D.object({id:D.string().optional(),idIn:D.array(D.string()).optional(),fulltext:D.string().optional()}),P9=D.enum(["asc","desc"]),Hi=()=>D.union([D.boolean(),D.number().int().refine(t=>t===0||t===1).transform(t=>typeof t=="boolean"?t:t===1)]),ao=()=>D.union([D.number(),D.string().transform(t=>parseFloat(t)).refine(t=>!isNaN(t))]),Io=()=>D.union([D.number().int(),D.string().transform(t=>parseInt(t,10)).refine(t=>!isNaN(t))]),hs=t=>D.string().transform(e=>JSON.parse(e)).refine(e=>Array.isArray(e)).transform(e=>D.array(t).parse(e)),F9=t=>D.string().transform(e=>JSON.parse(e)).transform(e=>t.parse(e)),wE=new Proxy(()=>wE,{get:()=>wE}),Ai=({entity:t,shape:e,filter:n,sort:r})=>{const i=wE();return{entity:t,"~entity":i,"~entity-array":[],"~entity-partial-exclude-id":i,shape:e,"~shape":i,"~shape-partial":i,filter:n,"~filter":i,sort:D.array(D.object({name:D.enum(r),sort:P9})),"~sort":i,"~sort-keyof":i}},_l=(t,e)=>Array.from({length:e-t+1},(n,r)=>r+t),D9=({page:t,total:e,siblings:n=1,boundaries:r=1})=>{const i=Math.max(Math.trunc(e),0);if(n*2+3+r*2>=i)return{type:"simple",page:t,total:e,pages:_l(1,i),start:[],end:[]};const o=Math.max(t-n,r),l=Math.min(t+n,i-r),u=o>r+2,f=l<i-(r+1);return!u&&f?{type:"end",page:t,total:e,start:[],pages:_l(1,n*2+r+2),end:_l(e-(r-1),i)}:u&&!f?{type:"start",page:t,total:e,start:_l(1,r),pages:_l(e-(r+1+2*n),i),end:[]}:{type:"both",page:t,total:e,start:_l(1,r),pages:_l(o,l),end:_l(i-r+1,i)}};var Yu={},Ta={},rr={},Sl={},BR;function PF(){if(BR)return Sl;BR=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.anumber=t,Sl.abytes=n,Sl.ahash=r,Sl.aexists=i,Sl.aoutput=s;function t(o){if(!Number.isSafeInteger(o)||o<0)throw new Error("positive integer expected, got "+o)}function e(o){return o instanceof Uint8Array||ArrayBuffer.isView(o)&&o.constructor.name==="Uint8Array"}function n(o,...l){if(!e(o))throw new Error("Uint8Array expected");if(l.length>0&&!l.includes(o.length))throw new Error("Uint8Array expected of length "+l+", got length="+o.length)}function r(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(o.outputLen),t(o.blockLen)}function i(o,l=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(l&&o.finished)throw new Error("Hash#digest() has already been called")}function s(o,l){n(o);const u=l.outputLen;if(o.length<u)throw new Error("digestInto() expects output buffer of length at least "+u)}return Sl}var yn={},zR;function L9(){if(zR)return yn;zR=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.add5L=yn.add5H=yn.add4H=yn.add4L=yn.add3H=yn.add3L=yn.rotlBL=yn.rotlBH=yn.rotlSL=yn.rotlSH=yn.rotr32L=yn.rotr32H=yn.rotrBL=yn.rotrBH=yn.rotrSL=yn.rotrSH=yn.shrSL=yn.shrSH=yn.toBig=void 0,yn.fromBig=n,yn.split=r,yn.add=T;const t=BigInt(2**32-1),e=BigInt(32);function n(O,z=!1){return z?{h:Number(O&t),l:Number(O>>e&t)}:{h:Number(O>>e&t)|0,l:Number(O&t)|0}}function r(O,z=!1){let F=new Uint32Array(O.length),V=new Uint32Array(O.length);for(let U=0;U<O.length;U++){const{h:B,l:G}=n(O[U],z);[F[U],V[U]]=[B,G]}return[F,V]}const i=(O,z)=>BigInt(O>>>0)<<e|BigInt(z>>>0);yn.toBig=i;const s=(O,z,F)=>O>>>F;yn.shrSH=s;const o=(O,z,F)=>O<<32-F|z>>>F;yn.shrSL=o;const l=(O,z,F)=>O>>>F|z<<32-F;yn.rotrSH=l;const u=(O,z,F)=>O<<32-F|z>>>F;yn.rotrSL=u;const f=(O,z,F)=>O<<64-F|z>>>F-32;yn.rotrBH=f;const p=(O,z,F)=>O>>>F-32|z<<64-F;yn.rotrBL=p;const h=(O,z)=>z;yn.rotr32H=h;const b=(O,z)=>O;yn.rotr32L=b;const x=(O,z,F)=>O<<F|z>>>32-F;yn.rotlSH=x;const _=(O,z,F)=>z<<F|O>>>32-F;yn.rotlSL=_;const E=(O,z,F)=>z<<F-32|O>>>64-F;yn.rotlBH=E;const I=(O,z,F)=>O<<F-32|z>>>64-F;yn.rotlBL=I;function T(O,z,F,V){const U=(z>>>0)+(V>>>0);return{h:O+F+(U/2**32|0)|0,l:U|0}}const C=(O,z,F)=>(O>>>0)+(z>>>0)+(F>>>0);yn.add3L=C;const j=(O,z,F,V)=>z+F+V+(O/2**32|0)|0;yn.add3H=j;const q=(O,z,F,V)=>(O>>>0)+(z>>>0)+(F>>>0)+(V>>>0);yn.add4L=q;const L=(O,z,F,V,U)=>z+F+V+U+(O/2**32|0)|0;yn.add4H=L;const M=(O,z,F,V,U)=>(O>>>0)+(z>>>0)+(F>>>0)+(V>>>0)+(U>>>0);yn.add5L=M;const W=(O,z,F,V,U,B)=>z+F+V+U+B+(O/2**32|0)|0;yn.add5H=W;const P={fromBig:n,split:r,toBig:i,shrSH:s,shrSL:o,rotrSH:l,rotrSL:u,rotrBH:f,rotrBL:p,rotr32H:h,rotr32L:b,rotlSH:x,rotlSL:_,rotlBH:E,rotlBL:I,add:T,add3L:C,add3H:j,add4L:q,add4H:L,add5H:W,add5L:M};return yn.default=P,yn}var i0={},bp={},WR;function M9(){return WR||(WR=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.crypto=void 0,bp.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),bp}var VR;function $9(){return VR||(VR=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=r,t.u8=i,t.u32=s,t.createView=o,t.rotr=l,t.rotl=u,t.byteSwap=f,t.byteSwap32=p,t.bytesToHex=b,t.hexToBytes=E,t.asyncLoop=T,t.utf8ToBytes=C,t.toBytes=j,t.concatBytes=q,t.checkOpts=M,t.wrapConstructor=W,t.wrapConstructorWithOpts=P,t.wrapXOFConstructorWithOpts=O,t.randomBytes=z;const e=M9(),n=PF();function r(F){return F instanceof Uint8Array||ArrayBuffer.isView(F)&&F.constructor.name==="Uint8Array"}function i(F){return new Uint8Array(F.buffer,F.byteOffset,F.byteLength)}function s(F){return new Uint32Array(F.buffer,F.byteOffset,Math.floor(F.byteLength/4))}function o(F){return new DataView(F.buffer,F.byteOffset,F.byteLength)}function l(F,V){return F<<32-V|F>>>V}function u(F,V){return F<<V|F>>>32-V>>>0}t.isLE=new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]===68;function f(F){return F<<24&0xff000000|F<<8&0xff0000|F>>>8&65280|F>>>24&255}t.byteSwapIfBE=t.isLE?F=>F:F=>f(F);function p(F){for(let V=0;V<F.length;V++)F[V]=f(F[V])}const h=Array.from({length:256},(F,V)=>V.toString(16).padStart(2,"0"));function b(F){(0,n.abytes)(F);let V="";for(let U=0;U<F.length;U++)V+=h[F[U]];return V}const x={_0:48,_9:57,A:65,F:70,a:97,f:102};function _(F){if(F>=x._0&&F<=x._9)return F-x._0;if(F>=x.A&&F<=x.F)return F-(x.A-10);if(F>=x.a&&F<=x.f)return F-(x.a-10)}function E(F){if(typeof F!="string")throw new Error("hex string expected, got "+typeof F);const V=F.length,U=V/2;if(V%2)throw new Error("hex string expected, got unpadded hex of length "+V);const B=new Uint8Array(U);for(let G=0,Z=0;G<U;G++,Z+=2){const le=_(F.charCodeAt(Z)),ie=_(F.charCodeAt(Z+1));if(le===void 0||ie===void 0){const ne=F[Z]+F[Z+1];throw new Error('hex string expected, got non-hex character "'+ne+'" at index '+Z)}B[G]=le*16+ie}return B}const I=async()=>{};t.nextTick=I;async function T(F,V,U){let B=Date.now();for(let G=0;G<F;G++){U(G);const Z=Date.now()-B;Z>=0&&Z<V||(await (0,t.nextTick)(),B+=Z)}}function C(F){if(typeof F!="string")throw new Error("utf8ToBytes expected string, got "+typeof F);return new Uint8Array(new TextEncoder().encode(F))}function j(F){return typeof F=="string"&&(F=C(F)),(0,n.abytes)(F),F}function q(...F){let V=0;for(let B=0;B<F.length;B++){const G=F[B];(0,n.abytes)(G),V+=G.length}const U=new Uint8Array(V);for(let B=0,G=0;B<F.length;B++){const Z=F[B];U.set(Z,G),G+=Z.length}return U}class L{clone(){return this._cloneInto()}}t.Hash=L;function M(F,V){if(V!==void 0&&{}.toString.call(V)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(F,V)}function W(F){const V=B=>F().update(j(B)).digest(),U=F();return V.outputLen=U.outputLen,V.blockLen=U.blockLen,V.create=()=>F(),V}function P(F){const V=(B,G)=>F(G).update(j(B)).digest(),U=F({});return V.outputLen=U.outputLen,V.blockLen=U.blockLen,V.create=B=>F(B),V}function O(F){const V=(B,G)=>F(G).update(j(B)).digest(),U=F({});return V.outputLen=U.outputLen,V.blockLen=U.blockLen,V.create=B=>F(B),V}function z(F=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(F));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(F);throw new Error("crypto.getRandomValues must be defined")}}(i0)),i0}var UR;function B9(){if(UR)return rr;UR=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.shake256=rr.shake128=rr.keccak_512=rr.keccak_384=rr.keccak_256=rr.keccak_224=rr.sha3_512=rr.sha3_384=rr.sha3_256=rr.sha3_224=rr.Keccak=void 0,rr.keccakP=I;const t=PF(),e=L9(),n=$9(),r=[],i=[],s=[],o=BigInt(0),l=BigInt(1),u=BigInt(2),f=BigInt(7),p=BigInt(256),h=BigInt(113);for(let q=0,L=l,M=1,W=0;q<24;q++){[M,W]=[W,(2*M+3*W)%5],r.push(2*(5*W+M)),i.push((q+1)*(q+2)/2%64);let P=o;for(let O=0;O<7;O++)L=(L<<l^(L>>f)*h)%p,L&u&&(P^=l<<(l<<BigInt(O))-l);s.push(P)}const[b,x]=(0,e.split)(s,!0),_=(q,L,M)=>M>32?(0,e.rotlBH)(q,L,M):(0,e.rotlSH)(q,L,M),E=(q,L,M)=>M>32?(0,e.rotlBL)(q,L,M):(0,e.rotlSL)(q,L,M);function I(q,L=24){const M=new Uint32Array(10);for(let W=24-L;W<24;W++){for(let z=0;z<10;z++)M[z]=q[z]^q[z+10]^q[z+20]^q[z+30]^q[z+40];for(let z=0;z<10;z+=2){const F=(z+8)%10,V=(z+2)%10,U=M[V],B=M[V+1],G=_(U,B,1)^M[F],Z=E(U,B,1)^M[F+1];for(let le=0;le<50;le+=10)q[z+le]^=G,q[z+le+1]^=Z}let P=q[2],O=q[3];for(let z=0;z<24;z++){const F=i[z],V=_(P,O,F),U=E(P,O,F),B=r[z];P=q[B],O=q[B+1],q[B]=V,q[B+1]=U}for(let z=0;z<50;z+=10){for(let F=0;F<10;F++)M[F]=q[z+F];for(let F=0;F<10;F++)q[z+F]^=~M[(F+2)%10]&M[(F+4)%10]}q[0]^=b[W],q[1]^=x[W]}M.fill(0)}class T extends n.Hash{constructor(L,M,W,P=!1,O=24){if(super(),this.blockLen=L,this.suffix=M,this.outputLen=W,this.enableXOF=P,this.rounds=O,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,t.anumber)(W),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,n.u32)(this.state)}keccak(){n.isLE||(0,n.byteSwap32)(this.state32),I(this.state32,this.rounds),n.isLE||(0,n.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(L){(0,t.aexists)(this);const{blockLen:M,state:W}=this;L=(0,n.toBytes)(L);const P=L.length;for(let O=0;O<P;){const z=Math.min(M-this.pos,P-O);for(let F=0;F<z;F++)W[this.pos++]^=L[O++];this.pos===M&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:L,suffix:M,pos:W,blockLen:P}=this;L[W]^=M,M&128&&W===P-1&&this.keccak(),L[P-1]^=128,this.keccak()}writeInto(L){(0,t.aexists)(this,!1),(0,t.abytes)(L),this.finish();const M=this.state,{blockLen:W}=this;for(let P=0,O=L.length;P<O;){this.posOut>=W&&this.keccak();const z=Math.min(W-this.posOut,O-P);L.set(M.subarray(this.posOut,this.posOut+z),P),this.posOut+=z,P+=z}return L}xofInto(L){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(L)}xof(L){return(0,t.anumber)(L),this.xofInto(new Uint8Array(L))}digestInto(L){if((0,t.aoutput)(L,this),this.finished)throw new Error("digest() was already called");return this.writeInto(L),this.destroy(),L}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(L){const{blockLen:M,suffix:W,outputLen:P,rounds:O,enableXOF:z}=this;return L||(L=new T(M,W,P,z,O)),L.state32.set(this.state32),L.pos=this.pos,L.posOut=this.posOut,L.finished=this.finished,L.rounds=O,L.suffix=W,L.outputLen=P,L.enableXOF=z,L.destroyed=this.destroyed,L}}rr.Keccak=T;const C=(q,L,M)=>(0,n.wrapConstructor)(()=>new T(L,q,M));rr.sha3_224=C(6,144,224/8),rr.sha3_256=C(6,136,256/8),rr.sha3_384=C(6,104,384/8),rr.sha3_512=C(6,72,512/8),rr.keccak_224=C(1,144,224/8),rr.keccak_256=C(1,136,256/8),rr.keccak_384=C(1,104,384/8),rr.keccak_512=C(1,72,512/8);const j=(q,L,M)=>(0,n.wrapXOFConstructorWithOpts)((W={})=>new T(L,q,W.dkLen===void 0?M:W.dkLen,!0));return rr.shake128=j(31,168,128/8),rr.shake256=j(31,136,256/8),rr}var HR;function z9(){if(HR)return Ta;HR=1;const{sha3_512:t}=B9(),e=24,n=32,r=(_=4,E=Math.random)=>{let I="";for(;I.length<_;)I=I+Math.floor(E()*36).toString(36);return I};function i(_){let E=8n,I=0n;for(const T of _.values()){const C=BigInt(T);I=(I<<E)+C}return I}const s=(_="")=>i(t(_)).toString(36).slice(1),o=Array.from({length:26},(_,E)=>String.fromCharCode(E+97)),l=_=>o[Math.floor(_()*o.length)],u=({globalObj:_=typeof Mc<"u"?Mc:typeof window<"u"?window:{},random:E=Math.random}={})=>{const I=Object.keys(_).toString(),T=I.length?I+r(n,E):r(n,E);return s(T).substring(0,n)},f=_=>()=>_++,p=0x1c6b1f1f,h=({random:_=Math.random,counter:E=f(Math.floor(_()*p)),length:I=e,fingerprint:T=u({random:_})}={})=>function(){const j=l(_),q=Date.now().toString(36),L=E().toString(36),M=r(I,_),W=`${q+M+L+T}`;return`${j+s(W).substring(1,I)}`},b=h(),x=(_,{minLength:E=2,maxLength:I=n}={})=>{const T=_.length,C=/^[0-9a-z]+$/;try{if(typeof _=="string"&&T>=E&&T<=I&&C.test(_))return!0}finally{}return!1};return Ta.getConstants=()=>({defaultLength:e,bigLength:n}),Ta.init=h,Ta.createId=b,Ta.bufToBigInt=i,Ta.createCounter=f,Ta.createFingerprint=u,Ta.isCuid=x,Ta}var KR;function W9(){if(KR)return Yu;KR=1;const{createId:t,init:e,getConstants:n,isCuid:r}=z9();return Yu.createId=t,Yu.init=e,Yu.getConstants=n,Yu.isCuid=r,Yu}var V9=W9();const On=V9.createId;var s0,QR;function U9(){if(QR)return s0;QR=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(C){C!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(j){try{var q=t.call(j);return i.test(q)}catch{return!1}},o=function(j){try{return s(j)?!1:(t.call(j),!0)}catch{return!1}},l=Object.prototype.toString,u="[object Object]",f="[object Function]",p="[object GeneratorFunction]",h="[object HTMLAllCollection]",b="[object HTML document.all class]",x="[object HTMLCollection]",_=typeof Symbol=="function"&&!!Symbol.toStringTag,E=!(0 in[,]),I=function(){return!1};if(typeof document=="object"){var T=document.all;l.call(T)===l.call(document.all)&&(I=function(j){if((E||!j)&&(typeof j>"u"||typeof j=="object"))try{var q=l.call(j);return(q===h||q===b||q===x||q===u)&&j("")==null}catch{}return!1})}return s0=e?function(j){if(I(j))return!0;if(!j||typeof j!="function"&&typeof j!="object")return!1;try{e(j,null,n)}catch(q){if(q!==r)return!1}return!s(j)&&o(j)}:function(j){if(I(j))return!0;if(!j||typeof j!="function"&&typeof j!="object")return!1;if(_)return o(j);if(s(j))return!1;var q=l.call(j);return q!==f&&q!==p&&!/^\[object HTML/.test(q)?!1:o(j)},s0}var H9=U9();const K9=uo(H9),Q9=t=>K9(t);var Ry={exports:{}},G9=Ry.exports,GR;function J9(){return GR||(GR=1,function(t){(function(e,n){t.exports=n()})(G9,function(){var e=Object.prototype.toString;function n(h,b){return h==null?!1:Object.prototype.hasOwnProperty.call(h,b)}function r(h){if(!h||o(h)&&h.length===0)return!0;if(typeof h!="string"){for(var b in h)if(n(h,b))return!1;return!0}return!1}function i(h){return e.call(h)}function s(h){return typeof h=="object"&&i(h)==="[object Object]"}var o=Array.isArray||function(h){return e.call(h)==="[object Array]"};function l(h){return typeof h=="boolean"||i(h)==="[object Boolean]"}function u(h){var b=parseInt(h);return b.toString()===h?b:h}function f(h){h=h||{};var b=function(T){return Object.keys(b).reduce(function(C,j){return j==="create"||typeof b[j]=="function"&&(C[j]=b[j].bind(b,T)),C},{})},x;h.includeInheritedProps?x=function(){return!0}:x=function(T,C){return typeof C=="number"&&Array.isArray(T)||n(T,C)};function _(T,C){if(x(T,C))return T[C]}var E;h.includeInheritedProps?E=function(T,C){typeof C!="string"&&typeof C!="number"&&(C=String(C));var j=_(T,C);if(C==="__proto__"||C==="prototype"||C==="constructor"&&typeof j=="function")throw new Error("For security reasons, object's magic properties cannot be set");return j}:E=function(T,C){return _(T,C)};function I(T,C,j,q){if(typeof C=="number"&&(C=[C]),!C||C.length===0)return T;if(typeof C=="string")return I(T,C.split(".").map(u),j,q);var L=C[0],M=E(T,L);return C.length===1?((M===void 0||!q)&&(T[L]=j),M):(M===void 0&&(typeof C[1]=="number"?T[L]=[]:T[L]={}),I(T[L],C.slice(1),j,q))}return b.has=function(T,C){if(typeof C=="number"?C=[C]:typeof C=="string"&&(C=C.split(".")),!C||C.length===0)return!!T;for(var j=0;j<C.length;j++){var q=u(C[j]);if(typeof q=="number"&&o(T)&&q<T.length||(h.includeInheritedProps?q in Object(T):n(T,q)))T=T[q];else return!1}return!0},b.ensureExists=function(T,C,j){return I(T,C,j,!0)},b.set=function(T,C,j,q){return I(T,C,j,q)},b.insert=function(T,C,j,q){var L=b.get(T,C);q=~~q,o(L)||(L=[],b.set(T,C,L)),L.splice(q,0,j)},b.empty=function(T,C){if(!r(C)&&T!=null){var j,q;if(j=b.get(T,C)){if(typeof j=="string")return b.set(T,C,"");if(l(j))return b.set(T,C,!1);if(typeof j=="number")return b.set(T,C,0);if(o(j))j.length=0;else if(s(j))for(q in j)x(j,q)&&delete j[q];else return b.set(T,C,null)}}},b.push=function(T,C){var j=b.get(T,C);o(j)||(j=[],b.set(T,C,j)),j.push.apply(j,Array.prototype.slice.call(arguments,2))},b.coalesce=function(T,C,j){for(var q,L=0,M=C.length;L<M;L++)if((q=b.get(T,C[L]))!==void 0)return q;return j},b.get=function(T,C,j){if(typeof C=="number"&&(C=[C]),!C||C.length===0)return T;if(T==null)return j;if(typeof C=="string")return b.get(T,C.split("."),j);var q=u(C[0]),L=E(T,q);return L===void 0?j:C.length===1?L:b.get(T[q],C.slice(1),j)},b.del=function(C,j){if(typeof j=="number"&&(j=[j]),C==null||r(j))return C;if(typeof j=="string")return b.del(C,j.split("."));var q=u(j[0]);if(E(C,q),!x(C,q))return C;if(j.length===1)o(C)?C.splice(q,1):delete C[q];else return b.del(C[q],j.slice(1));return C},b}var p=f();return p.create=f,p.withInheritedProps=f({includeInheritedProps:!0}),p})}(Ry)),Ry.exports}var Z9=J9();const JR=uo(Z9);function on({number:t,empty:e="-",fraction:n=2}){if(t==null)return e;try{return t.toLocaleString(void 0,{maximumFractionDigits:n})}catch(r){return console.error("toHumanNumber",t,r),t.toFixed(2)}}const KN=({error:t,errors:e,onError:n})=>{const r=e.some(s=>s),i=t instanceof Error;return!r&&i&&n(t),r||i},FF=xn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-0.5","hover:bg-slate-100","text-slate-500","hover:text-blue-500","cursor-pointer"]},variant:{variant:{common:[],warning:["text-amber-500","hover:text-amber-600","hover:bg-amber-100"],danger:["text-red-500","hover:text-red-600","hover:bg-red-100"]},disabled:{true:["cursor-not-allowed","text-slate-300","bg-slate-100","hover:bg-slate-100"]}},defaults:{variant:"common",disabled:!1}}),Y9=xn({use:FF,slot:{},variant:{},defaults:{}}),QN=({icon:t,iconProps:e,variant:n,tva:r=Y9,css:i,children:s,...o})=>{const l=r({...n,css:i}).slots;return d.jsxs("div",{className:l.base(),...o,children:[Nv(t)?d.jsx(en,{icon:t,...e}):t,s]})};function Av(){return typeof window<"u"}function ic(t){return DF(t)?(t.nodeName||"").toLowerCase():"#document"}function ms(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function da(t){var e;return(e=(DF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function DF(t){return Av()?t instanceof Node||t instanceof ms(t).Node:!1}function sr(t){return Av()?t instanceof Element||t instanceof ms(t).Element:!1}function Xr(t){return Av()?t instanceof HTMLElement||t instanceof ms(t).HTMLElement:!1}function _E(t){return!Av()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ms(t).ShadowRoot}function mm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=lo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function X9(t){return["table","td","th"].includes(ic(t))}function Pv(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function GN(t){const e=Fv(),n=sr(t)?lo(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function eK(t){let e=Ka(t);for(;Xr(e)&&!Ma(e);){if(GN(e))return e;if(Pv(e))return null;e=Ka(e)}return null}function Fv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ma(t){return["html","body","#document"].includes(ic(t))}function lo(t){return ms(t).getComputedStyle(t)}function Dv(t){return sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ka(t){if(ic(t)==="html")return t;const e=t.assignedSlot||t.parentNode||_E(t)&&t.host||da(t);return _E(e)?e.host:e}function LF(t){const e=Ka(t);return Ma(e)?t.ownerDocument?t.ownerDocument.body:t.body:Xr(e)&&mm(e)?e:LF(e)}function zl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=LF(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ms(i);if(s){const l=SE(o);return e.concat(o,o.visualViewport||[],mm(i)?i:[],l&&n?zl(l):[])}return e.concat(i,zl(i,[],n))}function SE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ko(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function pi(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&_E(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function JN(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function MF(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function $F(t){return t.mozInputSource===0&&t.isTrusted?!0:EE()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function ZN(t){return nK()?!1:!EE()&&t.width===0&&t.height===0||EE()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function BF(){return/apple/i.test(navigator.vendor)}function EE(){const t=/android/i;return t.test(JN())||t.test(MF())}function tK(){return JN().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function nK(){return MF().includes("jsdom/")}function Ph(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function rK(t){return"nativeEvent"in t}function iK(t){return t.matches("html,body")}function hi(t){return t?.ownerDocument||document}function o0(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Al(t){return"composedPath"in t?t.composedPath()[0]:t.target}const sK="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function YN(t){return Xr(t)&&t.matches(sK)}function Mi(t){t.preventDefault(),t.stopPropagation()}function zF(t){return t?t.getAttribute("role")==="combobox"&&YN(t):!1}const Hd=Math.min,ks=Math.max,jb=Math.round,md=Math.floor,na=t=>({x:t,y:t}),oK={left:"right",right:"left",bottom:"top",top:"bottom"},aK={start:"end",end:"start"};function ZR(t,e,n){return ks(t,Hd(e,n))}function gm(t,e){return typeof t=="function"?t(e):t}function ec(t){return t.split("-")[0]}function ym(t){return t.split("-")[1]}function WF(t){return t==="x"?"y":"x"}function VF(t){return t==="y"?"height":"width"}function su(t){return["top","bottom"].includes(ec(t))?"y":"x"}function UF(t){return WF(su(t))}function lK(t,e,n){n===void 0&&(n=!1);const r=ym(t),i=UF(t),s=VF(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ob(o)),[o,Ob(o)]}function cK(t){const e=Ob(t);return[NE(t),e,NE(e)]}function NE(t){return t.replace(/start|end/g,e=>aK[e])}function uK(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function dK(t,e,n,r){const i=ym(t);let s=uK(ec(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(NE)))),s}function Ob(t){return t.replace(/left|right|bottom|top/g,e=>oK[e])}function fK(t){return{top:0,right:0,bottom:0,left:0,...t}}function pK(t){return typeof t!="number"?fK(t):{top:t,right:t,bottom:t,left:t}}function qb(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}var hK=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ab=hK.join(","),HF=typeof Element>"u",Kd=HF?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Pb=!HF&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},Fb=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},mK=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},gK=function(e,n,r){if(Fb(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Ab));return n&&Kd.call(e,Ab)&&i.unshift(e),i=i.filter(r),i},yK=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!Fb(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),u=l.length?l:o.children,f=t(u,!0,r);r.flatten?i.push.apply(i,f):i.push({scopeParent:o,candidates:f})}else{var p=Kd.call(o,Ab);p&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),b=!Fb(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&b){var x=t(h===!0?o.children:h.children,!0,r);r.flatten?i.push.apply(i,x):i.push({scopeParent:o,candidates:x})}else s.unshift.apply(s,o.children)}}return i},KF=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},QF=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||mK(e))&&!KF(e)?0:e.tabIndex},bK=function(e,n){var r=QF(e);return r<0&&n&&!KF(e)?0:r},vK=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},GF=function(e){return e.tagName==="INPUT"},xK=function(e){return GF(e)&&e.type==="hidden"},wK=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},_K=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},SK=function(e){if(!e.name)return!0;var n=e.form||Pb(e),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=_K(i,e.form);return!s||s===e},EK=function(e){return GF(e)&&e.type==="radio"},NK=function(e){return EK(e)&&!SK(e)},IK=function(e){var n,r=e&&Pb(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,l,u;for(s=!!((o=i)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(i)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!s&&i;){var f,p,h;r=Pb(i),i=(f=r)===null||f===void 0?void 0:f.host,s=!!((p=i)!==null&&p!==void 0&&(h=p.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return s},YR=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},kK=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Kd.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Kd.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var l=e;e;){var u=e.parentElement,f=Pb(e);if(u&&!u.shadowRoot&&i(u)===!0)return YR(e);e.assignedSlot?e=e.assignedSlot:!u&&f!==e.ownerDocument?e=f.host:e=u}e=l}if(IK(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return YR(e);return!1},CK=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return Kd.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},TK=function(e,n){return!(n.disabled||Fb(n)||xK(n)||kK(n,e)||wK(n)||CK(n))},IE=function(e,n){return!(NK(n)||QF(n)<0||!TK(e,n))},RK=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},jK=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,l=o?i.scopeParent:i,u=bK(l,o),f=o?t(i.candidates):l;u===0?o?n.push.apply(n,f):n.push(l):r.push({documentOrder:s,tabIndex:u,item:i,isScope:o,content:f})}),r.sort(vK).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},Lv=function(e,n){n=n||{};var r;return n.getShadowRoot?r=yK([e],n.includeContainer,{filter:IE.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:RK}):r=gK(e,n.includeContainer,IE.bind(null,n)),jK(r)},OK=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Kd.call(e,Ab)===!1?!1:IE(n,e)};function XR(t,e,n){let{reference:r,floating:i}=t;const s=su(e),o=UF(e),l=VF(o),u=ec(e),f=s==="y",p=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,b=r[l]/2-i[l]/2;let x;switch(u){case"top":x={x:p,y:r.y-i.height};break;case"bottom":x={x:p,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:h};break;case"left":x={x:r.x-i.width,y:h};break;default:x={x:r.x,y:r.y}}switch(ym(e)){case"start":x[o]-=b*(n&&f?-1:1);break;case"end":x[o]+=b*(n&&f?-1:1);break}return x}const qK=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),u=await (o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:h}=XR(f,r,u),b=r,x={},_=0;for(let E=0;E<l.length;E++){const{name:I,fn:T}=l[E],{x:C,y:j,data:q,reset:L}=await T({x:p,y:h,initialPlacement:r,placement:b,strategy:i,middlewareData:x,rects:f,platform:o,elements:{reference:t,floating:e}});p=C??p,h=j??h,x={...x,[I]:{...x[I],...q}},L&&_<=50&&(_++,typeof L=="object"&&(L.placement&&(b=L.placement),L.rects&&(f=L.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):L.rects),{x:p,y:h}=XR(f,b,u)),E=-1)}return{x:p,y:h,placement:b,strategy:i,middlewareData:x}};async function XN(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:b=!1,padding:x=0}=gm(e,t),_=pK(x),I=l[b?h==="floating"?"reference":"floating":h],T=qb(await s.getClippingRect({element:(n=await (s.isElement==null?void 0:s.isElement(I)))==null||n?I:I.contextElement||await (s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:f,rootBoundary:p,strategy:u})),C=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,j=await (s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),q=await (s.isElement==null?void 0:s.isElement(j))?await (s.getScale==null?void 0:s.getScale(j))||{x:1,y:1}:{x:1,y:1},L=qb(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:C,offsetParent:j,strategy:u}):C);return{top:(T.top-L.top+_.top)/q.y,bottom:(L.bottom-T.bottom+_.bottom)/q.y,left:(T.left-L.left+_.left)/q.x,right:(L.right-T.right+_.right)/q.x}}const AK=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:u,elements:f}=e,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:b,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:E=!0,...I}=gm(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const T=ec(i),C=su(l),j=ec(l)===l,q=await (u.isRTL==null?void 0:u.isRTL(f.floating)),L=b||(j||!E?[Ob(l)]:cK(l)),M=_!=="none";!b&&M&&L.push(...dK(l,E,_,q));const W=[l,...L],P=await XN(e,I),O=[];let z=((r=s.flip)==null?void 0:r.overflows)||[];if(p&&O.push(P[T]),h){const B=lK(i,o,q);O.push(P[B[0]],P[B[1]])}if(z=[...z,{placement:i,overflows:O}],!O.every(B=>B<=0)){var F,V;const B=(((F=s.flip)==null?void 0:F.index)||0)+1,G=W[B];if(G)return{data:{index:B,overflows:z},reset:{placement:G}};let Z=(V=z.filter(le=>le.overflows[0]<=0).sort((le,ie)=>le.overflows[1]-ie.overflows[1])[0])==null?void 0:V.placement;if(!Z)switch(x){case"bestFit":{var U;const le=(U=z.filter(ie=>{if(M){const ne=su(ie.placement);return ne===C||ne==="y"}return!0}).map(ie=>[ie.placement,ie.overflows.filter(ne=>ne>0).reduce((ne,oe)=>ne+oe,0)]).sort((ie,ne)=>ie[1]-ne[1])[0])==null?void 0:U[0];le&&(Z=le);break}case"initialPlacement":Z=l;break}if(i!==Z)return{reset:{placement:Z}}}return{}}}};async function PK(t,e){const{placement:n,platform:r,elements:i}=t,s=await (r.isRTL==null?void 0:r.isRTL(i.floating)),o=ec(n),l=ym(n),u=su(n)==="y",f=["left","top"].includes(o)?-1:1,p=s&&u?-1:1,h=gm(e,t);let{mainAxis:b,crossAxis:x,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof _=="number"&&(x=l==="end"?_*-1:_),u?{x:x*p,y:b*f}:{x:b*f,y:x*p}}const FK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=e,u=await PK(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},DK=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:I=>{let{x:T,y:C}=I;return{x:T,y:C}}},...u}=gm(t,e),f={x:n,y:r},p=await XN(e,u),h=su(ec(i)),b=WF(h);let x=f[b],_=f[h];if(s){const I=b==="y"?"top":"left",T=b==="y"?"bottom":"right",C=x+p[I],j=x-p[T];x=ZR(C,x,j)}if(o){const I=h==="y"?"top":"left",T=h==="y"?"bottom":"right",C=_+p[I],j=_-p[T];_=ZR(C,_,j)}const E=l.fn({...e,[b]:x,[h]:_});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[b]:s,[h]:o}}}}}},LK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:u=()=>{},...f}=gm(t,e),p=await XN(e,f),h=ec(i),b=ym(i),x=su(i)==="y",{width:_,height:E}=s.floating;let I,T;h==="top"||h==="bottom"?(I=h,T=b===(await (o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(T=h,I=b==="end"?"top":"bottom");const C=E-p.top-p.bottom,j=_-p.left-p.right,q=Hd(E-p[I],C),L=Hd(_-p[T],j),M=!e.middlewareData.shift;let W=q,P=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=j),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(W=C),M&&!b){const z=ks(p.left,0),F=ks(p.right,0),V=ks(p.top,0),U=ks(p.bottom,0);x?P=_-2*(z!==0||F!==0?z+F:ks(p.left,p.right)):W=E-2*(V!==0||U!==0?V+U:ks(p.top,p.bottom))}await u({...e,availableWidth:P,availableHeight:W});const O=await o.getDimensions(l.floating);return _!==O.width||E!==O.height?{reset:{rects:!0}}:{}}}};function JF(t){const e=lo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Xr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=jb(n)!==s||jb(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function e1(t){return sr(t)?t:t.contextElement}function Ad(t){const e=e1(t);if(!Xr(e))return na(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=JF(e);let o=(s?jb(n.width):n.width)/r,l=(s?jb(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const MK=na(0);function ZF(t){const e=ms(t);return!Fv()||!e.visualViewport?MK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function $K(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ms(t)?!1:e}function ou(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=e1(t);let o=na(1);e&&(r?sr(r)&&(o=Ad(r)):o=Ad(t));const l=$K(s,n,r)?ZF(s):na(0);let u=(i.left+l.x)/o.x,f=(i.top+l.y)/o.y,p=i.width/o.x,h=i.height/o.y;if(s){const b=ms(s),x=r&&sr(r)?ms(r):r;let _=b,E=SE(_);for(;E&&r&&x!==_;){const I=Ad(E),T=E.getBoundingClientRect(),C=lo(E),j=T.left+(E.clientLeft+parseFloat(C.paddingLeft))*I.x,q=T.top+(E.clientTop+parseFloat(C.paddingTop))*I.y;u*=I.x,f*=I.y,p*=I.x,h*=I.y,u+=j,f+=q,_=ms(E),E=SE(_)}}return qb({width:p,height:h,x:u,y:f})}function t1(t,e){const n=Dv(t).scrollLeft;return e?e.left+n:ou(da(t)).left+n}function YF(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:t1(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function BK(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=da(r),l=e?Pv(e.floating):!1;if(r===o||l&&s)return n;let u={scrollLeft:0,scrollTop:0},f=na(1);const p=na(0),h=Xr(r);if((h||!h&&!s)&&((ic(r)!=="body"||mm(o))&&(u=Dv(r)),Xr(r))){const x=ou(r);f=Ad(r),p.x=x.x+r.clientLeft,p.y=x.y+r.clientTop}const b=o&&!h&&!s?YF(o,u,!0):na(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-u.scrollLeft*f.x+p.x+b.x,y:n.y*f.y-u.scrollTop*f.y+p.y+b.y}}function zK(t){return Array.from(t.getClientRects())}function WK(t){const e=da(t),n=Dv(t),r=t.ownerDocument.body,i=ks(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ks(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+t1(t);const l=-n.scrollTop;return lo(r).direction==="rtl"&&(o+=ks(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}function VK(t,e){const n=ms(t),r=da(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,u=0;if(i){s=i.width,o=i.height;const f=Fv();(!f||f&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:l,y:u}}function UK(t,e){const n=ou(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Xr(t)?Ad(t):na(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,u=i*s.x,f=r*s.y;return{width:o,height:l,x:u,y:f}}function ej(t,e,n){let r;if(e==="viewport")r=VK(t,n);else if(e==="document")r=WK(da(t));else if(sr(e))r=UK(e,n);else{const i=ZF(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return qb(r)}function XF(t,e){const n=Ka(t);return n===e||!sr(n)||Ma(n)?!1:lo(n).position==="fixed"||XF(n,e)}function HK(t,e){const n=e.get(t);if(n)return n;let r=zl(t,[],!1).filter(l=>sr(l)&&ic(l)!=="body"),i=null;const s=lo(t).position==="fixed";let o=s?Ka(t):t;for(;sr(o)&&!Ma(o);){const l=lo(o),u=GN(o);!u&&l.position==="fixed"&&(i=null),(s?!u&&!i:!u&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||mm(o)&&!u&&XF(t,o))?r=r.filter(p=>p!==o):i=l,o=Ka(o)}return e.set(t,r),r}function KK(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Pv(e)?[]:HK(e,this._c):[].concat(n),r],l=o[0],u=o.reduce((f,p)=>{const h=ej(e,p,i);return f.top=ks(h.top,f.top),f.right=Hd(h.right,f.right),f.bottom=Hd(h.bottom,f.bottom),f.left=ks(h.left,f.left),f},ej(e,l,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function QK(t){const{width:e,height:n}=JF(t);return{width:e,height:n}}function GK(t,e,n){const r=Xr(e),i=da(e),s=n==="fixed",o=ou(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const u=na(0);if(r||!r&&!s)if((ic(e)!=="body"||mm(i))&&(l=Dv(e)),r){const b=ou(e,!0,s,e);u.x=b.x+e.clientLeft,u.y=b.y+e.clientTop}else i&&(u.x=t1(i));const f=i&&!r&&!s?YF(i,l):na(0),p=o.left+l.scrollLeft-u.x-f.x,h=o.top+l.scrollTop-u.y-f.y;return{x:p,y:h,width:o.width,height:o.height}}function a0(t){return lo(t).position==="static"}function tj(t,e){if(!Xr(t)||lo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return da(t)===n&&(n=n.ownerDocument.body),n}function eD(t,e){const n=ms(t);if(Pv(t))return n;if(!Xr(t)){let i=Ka(t);for(;i&&!Ma(i);){if(sr(i)&&!a0(i))return i;i=Ka(i)}return n}let r=tj(t,e);for(;r&&X9(r)&&a0(r);)r=tj(r,e);return r&&Ma(r)&&a0(r)&&!GN(r)?n:r||eK(t)||n}const JK=async function(t){const e=this.getOffsetParent||eD,n=this.getDimensions,r=await n(t.floating);return{reference:GK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ZK(t){return lo(t).direction==="rtl"}const YK={convertOffsetParentRelativeRectToViewportRelativeRect:BK,getDocumentElement:da,getClippingRect:KK,getOffsetParent:eD,getElementRects:JK,getClientRects:zK,getDimensions:QK,getScale:Ad,isElement:sr,isRTL:ZK};function tD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function XK(t,e){let n=null,r;const i=da(t);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),s();const f=t.getBoundingClientRect(),{left:p,top:h,width:b,height:x}=f;if(l||e(),!b||!x)return;const _=md(h),E=md(i.clientWidth-(p+b)),I=md(i.clientHeight-(h+x)),T=md(p),j={rootMargin:-_+"px "+-E+"px "+-I+"px "+-T+"px",threshold:ks(0,Hd(1,u))||1};let q=!0;function L(M){const W=M[0].intersectionRatio;if(W!==u){if(!q)return o();W?o(!1,W):r=setTimeout(()=>{o(!1,1e-7)},1e3)}W===1&&!tD(f,t.getBoundingClientRect())&&o(),q=!1}try{n=new IntersectionObserver(L,{...j,root:i.ownerDocument})}catch{n=new IntersectionObserver(L,j)}n.observe(t)}return o(!0),s}function nD(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,f=e1(t),p=i||s?[...f?zl(f):[],...zl(e)]:[];p.forEach(T=>{i&&T.addEventListener("scroll",n,{passive:!0}),s&&T.addEventListener("resize",n)});const h=f&&l?XK(f,n):null;let b=-1,x=null;o&&(x=new ResizeObserver(T=>{let[C]=T;C&&C.target===f&&x&&(x.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var j;(j=x)==null||j.observe(e)})),n()}),f&&!u&&x.observe(f),x.observe(e));let _,E=u?ou(t):null;u&&I();function I(){const T=ou(t);E&&!tD(E,T)&&n(),E=T,_=requestAnimationFrame(I)}return n(),()=>{var T;p.forEach(C=>{i&&C.removeEventListener("scroll",n),s&&C.removeEventListener("resize",n)}),h?.(),(T=x)==null||T.disconnect(),x=null,u&&cancelAnimationFrame(_)}}const eQ=FK,tQ=DK,nQ=AK,rQ=LK,iQ=(t,e,n)=>{const r=new Map,i={platform:YK,...n},s={...i.platform,_c:r};return qK(t,e,{...i,platform:s})};var jy=typeof document<"u"?H.useLayoutEffect:H.useEffect;function Db(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Db(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Db(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function rD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function nj(t,e){const n=rD(t);return Math.round(e*n)/n}function l0(t){const e=H.useRef(t);return jy(()=>{e.current=t}),e}function sQ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:u,open:f}=t,[p,h]=H.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[b,x]=H.useState(r);Db(b,r)||x(r);const[_,E]=H.useState(null),[I,T]=H.useState(null),C=H.useCallback(ie=>{ie!==M.current&&(M.current=ie,E(ie))},[]),j=H.useCallback(ie=>{ie!==W.current&&(W.current=ie,T(ie))},[]),q=s||_,L=o||I,M=H.useRef(null),W=H.useRef(null),P=H.useRef(p),O=u!=null,z=l0(u),F=l0(i),V=l0(f),U=H.useCallback(()=>{if(!M.current||!W.current)return;const ie={placement:e,strategy:n,middleware:b};F.current&&(ie.platform=F.current),iQ(M.current,W.current,ie).then(ne=>{const oe={...ne,isPositioned:V.current!==!1};B.current&&!Db(P.current,oe)&&(P.current=oe,Xh.flushSync(()=>{h(oe)}))})},[b,e,n,F,V]);jy(()=>{f===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(ie=>({...ie,isPositioned:!1})))},[f]);const B=H.useRef(!1);jy(()=>(B.current=!0,()=>{B.current=!1}),[]),jy(()=>{if(q&&(M.current=q),L&&(W.current=L),q&&L){if(z.current)return z.current(q,L,U);U()}},[q,L,U,z,O]);const G=H.useMemo(()=>({reference:M,floating:W,setReference:C,setFloating:j}),[C,j]),Z=H.useMemo(()=>({reference:q,floating:L}),[q,L]),le=H.useMemo(()=>{const ie={position:n,left:0,top:0};if(!Z.floating)return ie;const ne=nj(Z.floating,p.x),oe=nj(Z.floating,p.y);return l?{...ie,transform:"translate("+ne+"px, "+oe+"px)",...rD(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:oe}},[n,l,Z.floating,p.x,p.y]);return H.useMemo(()=>({...p,update:U,refs:G,elements:Z,floatingStyles:le}),[p,U,G,Z,le])}const iD=(t,e)=>({...eQ(t),options:[t,e]}),oQ=(t,e)=>({...tQ(t),options:[t,e]}),sD=(t,e)=>({...nQ(t),options:[t,e]}),aQ=(t,e)=>({...rQ(t),options:[t,e]});function rj(t){return H.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const oD={...EB},lQ=oD.useInsertionEffect,cQ=lQ||(t=>t());function zi(t){const e=H.useRef(()=>{});return cQ(()=>{e.current=t}),H.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const n1="ArrowUp",bm="ArrowDown",Wl="ArrowLeft",Vl="ArrowRight";function Kg(t,e,n){return Math.floor(t/e)!==n}function rh(t,e){return e<0||e>=t.current.length}function c0(t,e){return Ni(t,{disabledIndices:e})}function ij(t,e){return Ni(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function Ni(t,e){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=e===void 0?{}:e;const o=t.current;let l=n;do l+=r?-s:s;while(l>=0&&l<=o.length-1&&Oy(o,l,i));return l}function uQ(t,e){let{event:n,orientation:r,loop:i,rtl:s,cols:o,disabledIndices:l,minIndex:u,maxIndex:f,prevIndex:p,stopEvent:h=!1}=e,b=p;if(n.key===n1){if(h&&Mi(n),p===-1)b=f;else if(b=Ni(t,{startingIndex:b,amount:o,decrement:!0,disabledIndices:l}),i&&(p-o<u||b<0)){const x=p%o,_=f%o,E=f-(_-x);_===x?b=f:b=_>x?E:E-o}rh(t,b)&&(b=p)}if(n.key===bm&&(h&&Mi(n),p===-1?b=u:(b=Ni(t,{startingIndex:p,amount:o,disabledIndices:l}),i&&p+o>f&&(b=Ni(t,{startingIndex:p%o-o,amount:o,disabledIndices:l}))),rh(t,b)&&(b=p)),r==="both"){const x=md(p/o);n.key===(s?Wl:Vl)&&(h&&Mi(n),p%o!==o-1?(b=Ni(t,{startingIndex:p,disabledIndices:l}),i&&Kg(b,o,x)&&(b=Ni(t,{startingIndex:p-p%o-1,disabledIndices:l}))):i&&(b=Ni(t,{startingIndex:p-p%o-1,disabledIndices:l})),Kg(b,o,x)&&(b=p)),n.key===(s?Vl:Wl)&&(h&&Mi(n),p%o!==0?(b=Ni(t,{startingIndex:p,decrement:!0,disabledIndices:l}),i&&Kg(b,o,x)&&(b=Ni(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l}))):i&&(b=Ni(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l})),Kg(b,o,x)&&(b=p));const _=md(f/o)===x;rh(t,b)&&(i&&_?b=n.key===(s?Vl:Wl)?f:Ni(t,{startingIndex:p-p%o-1,disabledIndices:l}):b=p)}return b}function dQ(t,e,n){const r=[];let i=0;return t.forEach((s,o)=>{let{width:l,height:u}=s,f=!1;for(n&&(i=0);!f;){const p=[];for(let h=0;h<l;h++)for(let b=0;b<u;b++)p.push(i+h+b*e);i%e+l<=e&&p.every(h=>r[h]==null)?(p.forEach(h=>{r[h]=o}),f=!0):i++}}),[...r]}function fQ(t,e,n,r,i){if(t===-1)return-1;const s=n.indexOf(t),o=e[t];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(t)}}function pQ(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function Oy(t,e,n){if(n)return n.includes(e);const r=t[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}var vr=typeof document<"u"?H.useLayoutEffect:H.useEffect;let sj=!1,hQ=0;const oj=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+hQ++;function mQ(){const[t,e]=H.useState(()=>sj?oj():void 0);return vr(()=>{t==null&&e(oj())},[]),H.useEffect(()=>{sj=!0},[]),t}const gQ=oD.useId,r1=gQ||mQ;function aD(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const lD=H.createContext(null),cD=H.createContext(null),vm=()=>{var t;return((t=H.useContext(lD))==null?void 0:t.id)||null},hf=()=>H.useContext(cD);function yQ(t){const e=r1(),n=hf(),i=vm();return vr(()=>{if(!e)return;const s={id:e,parentId:i};return n?.addNode(s),()=>{n?.removeNode(s)}},[n,e,i]),e}function bQ(t){const{children:e,id:n}=t,r=vm();return d.jsx(lD.Provider,{value:H.useMemo(()=>({id:n,parentId:r}),[n,r]),children:e})}function vQ(t){const{children:e}=t,n=H.useRef([]),r=H.useCallback(o=>{n.current=[...n.current,o]},[]),i=H.useCallback(o=>{n.current=n.current.filter(l=>l!==o)},[]),s=H.useState(()=>aD())[0];return d.jsx(cD.Provider,{value:H.useMemo(()=>({nodesRef:n,addNode:r,removeNode:i,events:s}),[r,i,s]),children:e})}function au(t){return"data-floating-ui-"+t}function Wi(t){const e=H.useRef(t);return vr(()=>{e.current=t}),e}const aj=au("safe-polygon");function u0(t,e,n){return n&&!Ph(n)?0:typeof t=="number"?t:t?.[e]}function xQ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=t,{enabled:l=!0,delay:u=0,handleClose:f=null,mouseOnly:p=!1,restMs:h=0,move:b=!0}=e,x=hf(),_=vm(),E=Wi(f),I=Wi(u),T=Wi(n),C=H.useRef(),j=H.useRef(-1),q=H.useRef(),L=H.useRef(-1),M=H.useRef(!0),W=H.useRef(!1),P=H.useRef(()=>{}),O=H.useRef(!1),z=H.useCallback(()=>{var le;const ie=(le=i.current.openEvent)==null?void 0:le.type;return ie?.includes("mouse")&&ie!=="mousedown"},[i]);H.useEffect(()=>{if(!l)return;function le(ie){let{open:ne}=ie;ne||(clearTimeout(j.current),clearTimeout(L.current),M.current=!0,O.current=!1)}return s.on("openchange",le),()=>{s.off("openchange",le)}},[l,s]),H.useEffect(()=>{if(!l||!E.current||!n)return;function le(ne){z()&&r(!1,ne,"hover")}const ie=hi(o.floating).documentElement;return ie.addEventListener("mouseleave",le),()=>{ie.removeEventListener("mouseleave",le)}},[o.floating,n,r,l,E,z]);const F=H.useCallback(function(le,ie,ne){ie===void 0&&(ie=!0),ne===void 0&&(ne="hover");const oe=u0(I.current,"close",C.current);oe&&!q.current?(clearTimeout(j.current),j.current=window.setTimeout(()=>r(!1,le,ne),oe)):ie&&(clearTimeout(j.current),r(!1,le,ne))},[I,r]),V=zi(()=>{P.current(),q.current=void 0}),U=zi(()=>{if(W.current){const le=hi(o.floating).body;le.style.pointerEvents="",le.removeAttribute(aj),W.current=!1}}),B=zi(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);H.useEffect(()=>{if(!l)return;function le(te){if(clearTimeout(j.current),M.current=!1,p&&!Ph(C.current)||h>0&&!u0(I.current,"open"))return;const ue=u0(I.current,"open",C.current);ue?j.current=window.setTimeout(()=>{T.current||r(!0,te,"hover")},ue):n||r(!0,te,"hover")}function ie(te){if(B())return;P.current();const ue=hi(o.floating);if(clearTimeout(L.current),O.current=!1,E.current&&i.current.floatingContext){n||clearTimeout(j.current),q.current=E.current({...i.current.floatingContext,tree:x,x:te.clientX,y:te.clientY,onClose(){U(),V(),B()||F(te,!0,"safe-polygon")}});const ye=q.current;ue.addEventListener("mousemove",ye),P.current=()=>{ue.removeEventListener("mousemove",ye)};return}(C.current==="touch"?!pi(o.floating,te.relatedTarget):!0)&&F(te)}function ne(te){B()||i.current.floatingContext&&(E.current==null||E.current({...i.current.floatingContext,tree:x,x:te.clientX,y:te.clientY,onClose(){U(),V(),B()||F(te)}})(te))}if(sr(o.domReference)){var oe;const te=o.domReference;return n&&te.addEventListener("mouseleave",ne),(oe=o.floating)==null||oe.addEventListener("mouseleave",ne),b&&te.addEventListener("mousemove",le,{once:!0}),te.addEventListener("mouseenter",le),te.addEventListener("mouseleave",ie),()=>{var ue;n&&te.removeEventListener("mouseleave",ne),(ue=o.floating)==null||ue.removeEventListener("mouseleave",ne),b&&te.removeEventListener("mousemove",le),te.removeEventListener("mouseenter",le),te.removeEventListener("mouseleave",ie)}}},[o,l,t,p,h,b,F,V,U,r,n,T,x,I,E,i,B]),vr(()=>{var le;if(l&&n&&(le=E.current)!=null&&le.__options.blockPointerEvents&&z()){W.current=!0;const ne=o.floating;if(sr(o.domReference)&&ne){var ie;const oe=hi(o.floating).body;oe.setAttribute(aj,"");const te=o.domReference,ue=x==null||(ie=x.nodesRef.current.find(de=>de.id===_))==null||(ie=ie.context)==null?void 0:ie.elements.floating;return ue&&(ue.style.pointerEvents=""),oe.style.pointerEvents="none",te.style.pointerEvents="auto",ne.style.pointerEvents="auto",()=>{oe.style.pointerEvents="",te.style.pointerEvents="",ne.style.pointerEvents=""}}}},[l,n,_,o,x,E,z]),vr(()=>{n||(C.current=void 0,O.current=!1,V(),U())},[n,V,U]),H.useEffect(()=>()=>{V(),clearTimeout(j.current),clearTimeout(L.current),U()},[l,o.domReference,V,U]);const G=H.useMemo(()=>{function le(ie){C.current=ie.pointerType}return{onPointerDown:le,onPointerEnter:le,onMouseMove(ie){const{nativeEvent:ne}=ie;function oe(){!M.current&&!T.current&&r(!0,ne,"hover")}p&&!Ph(C.current)||n||h===0||O.current&&ie.movementX**2+ie.movementY**2<2||(clearTimeout(L.current),C.current==="touch"?oe():(O.current=!0,L.current=window.setTimeout(oe,h)))}}},[p,r,n,T,h]),Z=H.useMemo(()=>({onMouseEnter(){clearTimeout(j.current)},onMouseLeave(le){B()||F(le.nativeEvent,!1)}}),[F,B]);return H.useMemo(()=>l?{reference:G,floating:Z}:{},[l,G,Z])}let lj=0;function qc(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(lj);const s=()=>t?.focus({preventScroll:n});i?s():lj=requestAnimationFrame(s)}function cj(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s?.parentId,s&&(r=r.concat(s))}return r}function Pd(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var l;return i.parentId===o.id&&((l=i.context)==null?void 0:l.open)})}),n=n.concat(r);return n}function wQ(t,e){let n,r=-1;function i(s,o){o>r&&(n=s,r=o),Pd(t,s).forEach(u=>{i(u.id,o+1)})}return i(e,0),t.find(s=>s.id===n)}let Xu=new WeakMap,Qg=new WeakSet,Gg={},d0=0;const _Q=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,uD=t=>t&&(t.host||uD(t.parentNode)),SQ=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=uD(n);return t.contains(r)?r:null}).filter(n=>n!=null);function EQ(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=SQ(e,t),l=new Set,u=new Set(o),f=[];Gg[i]||(Gg[i]=new WeakMap);const p=Gg[i];o.forEach(h),b(e),l.clear();function h(x){!x||l.has(x)||(l.add(x),x.parentNode&&h(x.parentNode))}function b(x){!x||u.has(x)||[].forEach.call(x.children,_=>{if(ic(_)!=="script")if(l.has(_))b(_);else{const E=s?_.getAttribute(s):null,I=E!==null&&E!=="false",T=Xu.get(_)||0,C=s?T+1:T,j=(p.get(_)||0)+1;Xu.set(_,C),p.set(_,j),f.push(_),C===1&&I&&Qg.add(_),j===1&&_.setAttribute(i,""),!I&&s&&_.setAttribute(s,"true")}})}return d0++,()=>{f.forEach(x=>{const _=Xu.get(x)||0,E=s?_-1:_,I=(p.get(x)||0)-1;Xu.set(x,E),p.set(x,I),E||(!Qg.has(x)&&s&&x.removeAttribute(s),Qg.delete(x)),I||x.removeAttribute(i)}),d0--,d0||(Xu=new WeakMap,Xu=new WeakMap,Qg=new WeakSet,Gg={})}}function uj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=hi(t[0]).body;return EQ(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const Mv=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function dD(t,e){const n=Lv(t,Mv());e==="prev"&&n.reverse();const r=n.indexOf(ko(hi(t)));return n.slice(r+1)[0]}function fD(){return dD(document.body,"next")}function pD(){return dD(document.body,"prev")}function ih(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!pi(n,r)}function NQ(t){Lv(t,Mv()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function dj(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const $v={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let IQ;function fj(t){t.key==="Tab"&&(t.target,clearTimeout(IQ))}const Lb=H.forwardRef(function(e,n){const[r,i]=H.useState();vr(()=>(BF()&&i("button"),document.addEventListener("keydown",fj),()=>{document.removeEventListener("keydown",fj)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[au("focus-guard")]:"",style:$v};return d.jsx("span",{...e,...s})}),hD=H.createContext(null),pj=au("portal");function kQ(t){t===void 0&&(t={});const{id:e,root:n}=t,r=r1(),i=mD(),[s,o]=H.useState(null),l=H.useRef(null);return vr(()=>()=>{s?.remove(),queueMicrotask(()=>{l.current=null})},[s]),vr(()=>{if(!r||l.current)return;const u=e?document.getElementById(e):null;if(!u)return;const f=document.createElement("div");f.id=r,f.setAttribute(pj,""),u.appendChild(f),l.current=f,o(f)},[e,r]),vr(()=>{if(n===null||!r||l.current)return;let u=n||i?.portalNode;u&&!sr(u)&&(u=u.current),u=u||document.body;let f=null;e&&(f=document.createElement("div"),f.id=e,u.appendChild(f));const p=document.createElement("div");p.id=r,p.setAttribute(pj,""),u=f||u,u.appendChild(p),l.current=p,o(p)},[e,n,r,i]),s}function i1(t){const{children:e,id:n,root:r,preserveTabOrder:i=!0}=t,s=kQ({id:n,root:r}),[o,l]=H.useState(null),u=H.useRef(null),f=H.useRef(null),p=H.useRef(null),h=H.useRef(null),b=o?.modal,x=o?.open,_=!!o&&!o.modal&&o.open&&i&&!!(r||s);return H.useEffect(()=>{if(!s||!i||b)return;function E(I){s&&ih(I)&&(I.type==="focusin"?dj:NQ)(s)}return s.addEventListener("focusin",E,!0),s.addEventListener("focusout",E,!0),()=>{s.removeEventListener("focusin",E,!0),s.removeEventListener("focusout",E,!0)}},[s,i,b]),H.useEffect(()=>{s&&(x||dj(s))},[x,s]),d.jsxs(hD.Provider,{value:H.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:u,afterOutsideRef:f,beforeInsideRef:p,afterInsideRef:h,portalNode:s,setFocusManagerState:l}),[i,s]),children:[_&&s&&d.jsx(Lb,{"data-type":"outside",ref:u,onFocus:E=>{if(ih(E,s)){var I;(I=p.current)==null||I.focus()}else{const T=pD()||o?.domReference;T?.focus()}}}),_&&s&&d.jsx("span",{"aria-owns":s.id,style:$v}),s&&Xh.createPortal(e,s),_&&s&&d.jsx(Lb,{"data-type":"outside",ref:f,onFocus:E=>{if(ih(E,s)){var I;(I=h.current)==null||I.focus()}else{const T=fD()||o?.domReference;T?.focus(),o?.closeOnFocusOut&&o?.onOpenChange(!1,E.nativeEvent,"focus-out")}}})]})}const mD=()=>H.useContext(hD),kE="data-floating-ui-focusable";function CE(t){return t?t.hasAttribute(kE)?t:t.querySelector("["+kE+"]")||t:null}const CQ=20;let Ac=[];function f0(t){Ac=Ac.filter(e=>e.isConnected),t&&ic(t)!=="body"&&(Ac.push(t),Ac.length>CQ&&(Ac=Ac.slice(-20)))}function hj(){return Ac.slice().reverse().find(t=>t.isConnected)}function TQ(t){const e=Mv();return OK(t,e)?t:Lv(t,e)[0]||t}const RQ=H.forwardRef(function(e,n){return d.jsx("button",{...e,type:"button",ref:n,tabIndex:-1,style:$v})});function gD(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:l=!0,restoreFocus:u=!1,modal:f=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:h=!0,outsideElementsInert:b=!1}=t,{open:x,onOpenChange:_,events:E,dataRef:I,elements:{domReference:T,floating:C}}=e,j=zi(()=>{var De;return(De=I.current.floatingContext)==null?void 0:De.nodeId}),q=typeof o=="number"&&o<0,L=zF(T)&&q,M=_Q(),W=M?s:!0,P=!W||M&&b,O=Wi(i),z=Wi(o),F=Wi(l),V=hf(),U=mD(),B=H.useRef(null),G=H.useRef(null),Z=H.useRef(!1),le=H.useRef(!1),ie=H.useRef(-1),ne=U!=null,oe=CE(C),te=zi(function(De){return De===void 0&&(De=oe),De?Lv(De,Mv()):[]}),ue=zi(De=>{const Je=te(De);return O.current.map(Xe=>T&&Xe==="reference"?T:oe&&Xe==="floating"?oe:Je).filter(Boolean).flat()});H.useEffect(()=>{if(r||!f)return;function De(Xe){if(Xe.key==="Tab"){pi(oe,ko(hi(oe)))&&te().length===0&&!L&&Mi(Xe);const Ve=ue(),ct=Al(Xe);O.current[0]==="reference"&&ct===T&&(Mi(Xe),Xe.shiftKey?qc(Ve[Ve.length-1]):qc(Ve[1])),O.current[1]==="floating"&&ct===oe&&Xe.shiftKey&&(Mi(Xe),qc(Ve[0]))}}const Je=hi(oe);return Je.addEventListener("keydown",De),()=>{Je.removeEventListener("keydown",De)}},[r,T,oe,f,O,L,te,ue]),H.useEffect(()=>{if(r||!C)return;function De(Je){const Xe=Al(Je),ct=te().indexOf(Xe);ct!==-1&&(ie.current=ct)}return C.addEventListener("focusin",De),()=>{C.removeEventListener("focusin",De)}},[r,C,te]),H.useEffect(()=>{if(r||!h)return;function De(){le.current=!0,setTimeout(()=>{le.current=!1})}function Je(Xe){const Ve=Xe.relatedTarget;queueMicrotask(()=>{const ct=j(),_t=!(pi(T,Ve)||pi(C,Ve)||pi(Ve,C)||pi(U?.portalNode,Ve)||Ve!=null&&Ve.hasAttribute(au("focus-guard"))||V&&(Pd(V.nodesRef.current,ct).find(Tt=>{var Ut,sn;return pi((Ut=Tt.context)==null?void 0:Ut.elements.floating,Ve)||pi((sn=Tt.context)==null?void 0:sn.elements.domReference,Ve)})||cj(V.nodesRef.current,ct).find(Tt=>{var Ut,sn,xe;return[(Ut=Tt.context)==null?void 0:Ut.elements.floating,CE((sn=Tt.context)==null?void 0:sn.elements.floating)].includes(Ve)||((xe=Tt.context)==null?void 0:xe.elements.domReference)===Ve})));if(u&&_t&&ko(hi(oe))===hi(oe).body){Xr(oe)&&oe.focus();const Tt=ie.current,Ut=te(),sn=Ut[Tt]||Ut[Ut.length-1]||oe;Xr(sn)&&sn.focus()}(L||!f)&&Ve&&_t&&!le.current&&Ve!==hj()&&(Z.current=!0,_(!1,Xe,"focus-out"))})}if(C&&Xr(T))return T.addEventListener("focusout",Je),T.addEventListener("pointerdown",De),C.addEventListener("focusout",Je),()=>{T.removeEventListener("focusout",Je),T.removeEventListener("pointerdown",De),C.removeEventListener("focusout",Je)}},[r,T,C,oe,f,V,U,_,h,u,te,L,j]);const de=H.useRef(null),ye=H.useRef(null),we=rj([de,U?.beforeInsideRef]),Ne=rj([ye,U?.afterInsideRef]);H.useEffect(()=>{var De;if(r||!C)return;const Je=Array.from((U==null||(De=U.portalNode)==null?void 0:De.querySelectorAll("["+au("portal")+"]"))||[]),Xe=V&&!f?cj(V?.nodesRef.current,j()).map(_t=>{var Tt;return(Tt=_t.context)==null?void 0:Tt.elements.floating}):[],Ve=[C,...Je,...Xe,B.current,G.current,de.current,ye.current,U?.beforeOutsideRef.current,U?.afterOutsideRef.current,O.current.includes("reference")||L?T:null].filter(_t=>_t!=null),ct=f||L?uj(Ve,!P,P):uj(Ve);return()=>{ct()}},[r,T,C,f,O,U,L,W,P,V,j]),vr(()=>{if(r||!Xr(oe))return;const De=hi(oe),Je=ko(De);queueMicrotask(()=>{const Xe=ue(oe),Ve=z.current,ct=(typeof Ve=="number"?Xe[Ve]:Ve.current)||oe,_t=pi(oe,Je);!q&&!_t&&x&&qc(ct,{preventScroll:ct===oe})})},[r,x,oe,q,ue,z]),vr(()=>{if(r||!oe)return;let De=!1;const Je=hi(oe),Xe=ko(Je);let ct=I.current.openEvent;f0(Xe);function _t(sn){let{open:xe,reason:be,event:Ie,nested:Ae}=sn;xe&&(ct=Ie),be==="escape-key"&&T&&f0(T),["hover","safe-polygon"].includes(be)&&Ie.type==="mouseleave"&&(Z.current=!0),be==="outside-press"&&(Ae?(Z.current=!1,De=!0):Z.current=!($F(Ie)||ZN(Ie)))}E.on("openchange",_t);const Tt=Je.createElement("span");Tt.setAttribute("tabindex","-1"),Tt.setAttribute("aria-hidden","true"),Object.assign(Tt.style,$v),ne&&T&&T.insertAdjacentElement("afterend",Tt);function Ut(){return typeof F.current=="boolean"?hj()||Tt:F.current.current||Tt}return()=>{E.off("openchange",_t);const sn=ko(Je),xe=pi(C,sn)||V&&Pd(V.nodesRef.current,j()).some(Ae=>{var Ue;return pi((Ue=Ae.context)==null?void 0:Ue.elements.floating,sn)});(xe||ct&&["click","mousedown"].includes(ct.type))&&T&&f0(T);const Ie=Ut();queueMicrotask(()=>{const Ae=TQ(Ie);F.current&&!Z.current&&Xr(Ae)&&(!(Ae!==sn&&sn!==Je.body)||xe)&&Ae.focus({preventScroll:De}),Tt.remove()})}},[r,C,oe,F,I,E,V,ne,T,j]),H.useEffect(()=>{queueMicrotask(()=>{Z.current=!1})},[r]),vr(()=>{if(!r&&U)return U.setFocusManagerState({modal:f,closeOnFocusOut:h,open:x,onOpenChange:_,domReference:T}),()=>{U.setFocusManagerState(null)}},[r,U,f,x,_,h,T]),vr(()=>{if(r||!oe||typeof MutationObserver!="function"||q)return;const De=()=>{const Xe=oe.getAttribute("tabindex"),Ve=te(),ct=ko(hi(C)),_t=Ve.indexOf(ct);_t!==-1&&(ie.current=_t),O.current.includes("floating")||ct!==T&&Ve.length===0?Xe!=="0"&&oe.setAttribute("tabindex","0"):Xe!=="-1"&&oe.setAttribute("tabindex","-1")};De();const Je=new MutationObserver(De);return Je.observe(oe,{childList:!0,subtree:!0,attributes:!0}),()=>{Je.disconnect()}},[r,C,oe,T,O,te,q]);function ze(De){return r||!p||!f?null:d.jsx(RQ,{ref:De==="start"?B:G,onClick:Je=>_(!1,Je.nativeEvent),children:typeof p=="string"?p:"Dismiss"})}const je=!r&&W&&(f?!L:!0)&&(ne||f);return d.jsxs(d.Fragment,{children:[je&&d.jsx(Lb,{"data-type":"inside",ref:we,onFocus:De=>{if(f){const Xe=ue();qc(i[0]==="reference"?Xe[0]:Xe[Xe.length-1])}else if(U!=null&&U.preserveTabOrder&&U.portalNode)if(Z.current=!1,ih(De,U.portalNode)){const Xe=fD()||T;Xe?.focus()}else{var Je;(Je=U.beforeOutsideRef.current)==null||Je.focus()}}}),!L&&ze("start"),n,ze("end"),je&&d.jsx(Lb,{"data-type":"inside",ref:Ne,onFocus:De=>{if(f)qc(ue()[0]);else if(U!=null&&U.preserveTabOrder&&U.portalNode)if(h&&(Z.current=!0),ih(De,U.portalNode)){const Xe=pD()||T;Xe?.focus()}else{var Je;(Je=U.afterOutsideRef.current)==null||Je.focus()}}})]})}let Jg=0;function jQ(){const t=/iP(hone|ad|od)|iOS/.test(JN()),e=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=e.left?parseFloat(e.left):window.scrollX,o=e.top?parseFloat(e.top):window.scrollY;if(e.overflow="hidden",i&&(e[r]=i+"px"),t){var l,u;const f=((l=window.visualViewport)==null?void 0:l.offsetLeft)||0,p=((u=window.visualViewport)==null?void 0:u.offsetTop)||0;Object.assign(e,{position:"fixed",top:-(o-Math.floor(p))+"px",left:-(s-Math.floor(f))+"px",right:"0"})}return()=>{Object.assign(e,{overflow:"",[r]:""}),t&&(Object.assign(e,{position:"",top:"",left:"",right:""}),window.scrollTo(s,o))}}let mj=()=>{};const OQ=H.forwardRef(function(e,n){const{lockScroll:r=!1,...i}=e;return vr(()=>{if(r)return Jg++,Jg===1&&(mj=jQ()),()=>{Jg--,Jg===0&&mj()}},[r]),d.jsx("div",{ref:n,...i,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}})});function gj(t){return Xr(t.target)&&t.target.tagName==="BUTTON"}function yj(t){return YN(t)}function s1(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:l="click",toggle:u=!0,ignoreMouse:f=!1,keyboardHandlers:p=!0,stickIfOpen:h=!0}=e,b=H.useRef(),x=H.useRef(!1),_=H.useMemo(()=>({onPointerDown(E){b.current=E.pointerType},onMouseDown(E){const I=b.current;E.button===0&&l!=="click"&&(Ph(I,!0)&&f||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="mousedown")?r(!1,E.nativeEvent,"click"):(E.preventDefault(),r(!0,E.nativeEvent,"click"))))},onClick(E){const I=b.current;if(l==="mousedown"&&b.current){b.current=void 0;return}Ph(I,!0)&&f||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="click")?r(!1,E.nativeEvent,"click"):r(!0,E.nativeEvent,"click"))},onKeyDown(E){b.current=void 0,!(E.defaultPrevented||!p||gj(E))&&(E.key===" "&&!yj(s)&&(E.preventDefault(),x.current=!0),E.key==="Enter"&&r(!(n&&u),E.nativeEvent,"click"))},onKeyUp(E){E.defaultPrevented||!p||gj(E)||yj(s)||E.key===" "&&x.current&&(x.current=!1,r(!(n&&u),E.nativeEvent,"click"))}}),[i,s,l,f,p,r,n,h,u]);return H.useMemo(()=>o?{reference:_}:{},[o,_])}const qQ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},AQ={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},bj=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function o1(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=t,{enabled:o=!0,escapeKey:l=!0,outsidePress:u=!0,outsidePressEvent:f="pointerdown",referencePress:p=!1,referencePressEvent:h="pointerdown",ancestorScroll:b=!1,bubbles:x,capture:_}=e,E=hf(),I=zi(typeof u=="function"?u:()=>!1),T=typeof u=="function"?I:u,C=H.useRef(!1),j=H.useRef(!1),{escapeKey:q,outsidePress:L}=bj(x),{escapeKey:M,outsidePress:W}=bj(_),P=H.useRef(!1),O=zi(G=>{var Z;if(!n||!o||!l||G.key!=="Escape"||P.current)return;const le=(Z=s.current.floatingContext)==null?void 0:Z.nodeId,ie=E?Pd(E.nodesRef.current,le):[];if(!q&&(G.stopPropagation(),ie.length>0)){let ne=!0;if(ie.forEach(oe=>{var te;if((te=oe.context)!=null&&te.open&&!oe.context.dataRef.current.__escapeKeyBubbles){ne=!1;return}}),!ne)return}r(!1,rK(G)?G.nativeEvent:G,"escape-key")}),z=zi(G=>{var Z;const le=()=>{var ie;O(G),(ie=Al(G))==null||ie.removeEventListener("keydown",le)};(Z=Al(G))==null||Z.addEventListener("keydown",le)}),F=zi(G=>{var Z;const le=C.current;C.current=!1;const ie=j.current;if(j.current=!1,f==="click"&&ie||le||typeof T=="function"&&!T(G))return;const ne=Al(G),oe="["+au("inert")+"]",te=hi(i.floating).querySelectorAll(oe);let ue=sr(ne)?ne:null;for(;ue&&!Ma(ue);){const Ne=Ka(ue);if(Ma(Ne)||!sr(Ne))break;ue=Ne}if(te.length&&sr(ne)&&!iK(ne)&&!pi(ne,i.floating)&&Array.from(te).every(Ne=>!pi(ue,Ne)))return;if(Xr(ne)&&B){const Ne=Ma(ne),ze=lo(ne),je=/auto|scroll/,De=Ne||je.test(ze.overflowX),Je=Ne||je.test(ze.overflowY),Xe=De&&ne.clientWidth>0&&ne.scrollWidth>ne.clientWidth,Ve=Je&&ne.clientHeight>0&&ne.scrollHeight>ne.clientHeight,ct=ze.direction==="rtl",_t=Ve&&(ct?G.offsetX<=ne.offsetWidth-ne.clientWidth:G.offsetX>ne.clientWidth),Tt=Xe&&G.offsetY>ne.clientHeight;if(_t||Tt)return}const de=(Z=s.current.floatingContext)==null?void 0:Z.nodeId,ye=E&&Pd(E.nodesRef.current,de).some(Ne=>{var ze;return o0(G,(ze=Ne.context)==null?void 0:ze.elements.floating)});if(o0(G,i.floating)||o0(G,i.domReference)||ye)return;const we=E?Pd(E.nodesRef.current,de):[];if(we.length>0){let Ne=!0;if(we.forEach(ze=>{var je;if((je=ze.context)!=null&&je.open&&!ze.context.dataRef.current.__outsidePressBubbles){Ne=!1;return}}),!Ne)return}r(!1,G,"outside-press")}),V=zi(G=>{var Z;const le=()=>{var ie;F(G),(ie=Al(G))==null||ie.removeEventListener(f,le)};(Z=Al(G))==null||Z.addEventListener(f,le)});H.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=q,s.current.__outsidePressBubbles=L;let G=-1;function Z(te){r(!1,te,"ancestor-scroll")}function le(){window.clearTimeout(G),P.current=!0}function ie(){G=window.setTimeout(()=>{P.current=!1},Fv()?5:0)}const ne=hi(i.floating);l&&(ne.addEventListener("keydown",M?z:O,M),ne.addEventListener("compositionstart",le),ne.addEventListener("compositionend",ie)),T&&ne.addEventListener(f,W?V:F,W);let oe=[];return b&&(sr(i.domReference)&&(oe=zl(i.domReference)),sr(i.floating)&&(oe=oe.concat(zl(i.floating))),!sr(i.reference)&&i.reference&&i.reference.contextElement&&(oe=oe.concat(zl(i.reference.contextElement)))),oe=oe.filter(te=>{var ue;return te!==((ue=ne.defaultView)==null?void 0:ue.visualViewport)}),oe.forEach(te=>{te.addEventListener("scroll",Z,{passive:!0})}),()=>{l&&(ne.removeEventListener("keydown",M?z:O,M),ne.removeEventListener("compositionstart",le),ne.removeEventListener("compositionend",ie)),T&&ne.removeEventListener(f,W?V:F,W),oe.forEach(te=>{te.removeEventListener("scroll",Z)}),window.clearTimeout(G)}},[s,i,l,T,f,n,r,b,o,q,L,O,M,z,F,W,V]),H.useEffect(()=>{C.current=!1},[T,f]);const U=H.useMemo(()=>({onKeyDown:O,...p&&{[qQ[h]]:G=>{r(!1,G.nativeEvent,"reference-press")},...h!=="click"&&{onClick(G){r(!1,G.nativeEvent,"reference-press")}}}}),[O,r,p,h]),B=H.useMemo(()=>({onKeyDown:O,onMouseDown(){j.current=!0},onMouseUp(){j.current=!0},[AQ[f]]:()=>{C.current=!0}}),[O,f]);return H.useMemo(()=>o?{reference:U,floating:B}:{},[o,U,B])}function PQ(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=r1(),s=H.useRef({}),[o]=H.useState(()=>aD()),l=vm()!=null,[u,f]=H.useState(r.reference),p=zi((x,_,E)=>{s.current.openEvent=x?_:void 0,o.emit("openchange",{open:x,event:_,reason:E,nested:l}),n?.(x,_,E)}),h=H.useMemo(()=>({setPositionReference:f}),[]),b=H.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return H.useMemo(()=>({dataRef:s,open:e,onOpenChange:p,elements:b,events:o,floatingId:i,refs:h}),[e,p,b,o,i,h])}function a1(t){t===void 0&&(t={});const{nodeId:e}=t,n=PQ({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=H.useState(null),[l,u]=H.useState(null),p=i?.domReference||s,h=H.useRef(null),b=hf();vr(()=>{p&&(h.current=p)},[p]);const x=sQ({...t,elements:{...i,...l&&{reference:l}}}),_=H.useCallback(j=>{const q=sr(j)?{getBoundingClientRect:()=>j.getBoundingClientRect(),contextElement:j}:j;u(q),x.refs.setReference(q)},[x.refs]),E=H.useCallback(j=>{(sr(j)||j===null)&&(h.current=j,o(j)),(sr(x.refs.reference.current)||x.refs.reference.current===null||j!==null&&!sr(j))&&x.refs.setReference(j)},[x.refs]),I=H.useMemo(()=>({...x.refs,setReference:E,setPositionReference:_,domReference:h}),[x.refs,E,_]),T=H.useMemo(()=>({...x.elements,domReference:p}),[x.elements,p]),C=H.useMemo(()=>({...x,...r,refs:I,elements:T,nodeId:e}),[x,I,T,e,r]);return vr(()=>{r.dataRef.current.floatingContext=C;const j=b?.nodesRef.current.find(q=>q.id===e);j&&(j.context=C)}),H.useMemo(()=>({...x,context:C,refs:I,elements:T}),[x,I,T,C])}function FQ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=t,{enabled:l=!0,visibleOnly:u=!0}=e,f=H.useRef(!1),p=H.useRef(),h=H.useRef(!0);H.useEffect(()=>{if(!l)return;const x=ms(o.domReference);function _(){!n&&Xr(o.domReference)&&o.domReference===ko(hi(o.domReference))&&(f.current=!0)}function E(){h.current=!0}return x.addEventListener("blur",_),x.addEventListener("keydown",E,!0),()=>{x.removeEventListener("blur",_),x.removeEventListener("keydown",E,!0)}},[o.domReference,n,l]),H.useEffect(()=>{if(!l)return;function x(_){let{reason:E}=_;(E==="reference-press"||E==="escape-key")&&(f.current=!0)}return i.on("openchange",x),()=>{i.off("openchange",x)}},[i,l]),H.useEffect(()=>()=>{clearTimeout(p.current)},[]);const b=H.useMemo(()=>({onPointerDown(x){ZN(x.nativeEvent)||(h.current=!1)},onMouseLeave(){f.current=!1},onFocus(x){if(f.current)return;const _=Al(x.nativeEvent);if(u&&sr(_))try{if(BF()&&tK())throw Error();if(!_.matches(":focus-visible"))return}catch{if(!h.current&&!YN(_))return}r(!0,x.nativeEvent,"focus")},onBlur(x){f.current=!1;const _=x.relatedTarget,E=x.nativeEvent,I=sr(_)&&_.hasAttribute(au("focus-guard"))&&_.getAttribute("data-type")==="outside";p.current=window.setTimeout(()=>{var T;const C=ko(o.domReference?o.domReference.ownerDocument:document);!_&&C===o.domReference||pi((T=s.current.floatingContext)==null?void 0:T.refs.floating.current,C)||pi(o.domReference,C)||I||r(!1,E,"focus")})}}),[s,o.domReference,r,u]);return H.useMemo(()=>l?{reference:b}:{},[l,b])}const vj="active",xj="selected";function p0(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[vj]:o,[xj]:l,...u}=t;s=u}return{...n==="floating"&&{tabIndex:-1,[kE]:""},...s,...e.map(o=>{const l=o?o[n]:null;return typeof l=="function"?t?l(t):null:l}).concat(t).reduce((o,l)=>(l&&Object.entries(l).forEach(u=>{let[f,p]=u;if(!(i&&[vj,xj].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof p=="function"){var h;(h=r.get(f))==null||h.push(p),o[f]=function(){for(var b,x=arguments.length,_=new Array(x),E=0;E<x;E++)_[E]=arguments[E];return(b=r.get(f))==null?void 0:b.map(I=>I(..._)).find(I=>I!==void 0)}}}else o[f]=p}),o),{})}}function l1(t){t===void 0&&(t=[]);const e=t.map(l=>l?.reference),n=t.map(l=>l?.floating),r=t.map(l=>l?.item),i=H.useCallback(l=>p0(l,t,"reference"),e),s=H.useCallback(l=>p0(l,t,"floating"),n),o=H.useCallback(l=>p0(l,t,"item"),r);return H.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function Bv(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function wj(t,e){return Bv(e,t===n1||t===bm,t===Wl||t===Vl)}function h0(t,e,n){return Bv(e,t===bm,n?t===Wl:t===Vl)||t==="Enter"||t===" "||t===""}function DQ(t,e,n){return Bv(e,n?t===Wl:t===Vl,t===bm)}function _j(t,e,n){return Bv(e,n?t===Vl:t===Wl,t===n1)}function LQ(t,e){const{open:n,onOpenChange:r,elements:i}=t,{listRef:s,activeIndex:o,onNavigate:l=()=>{},enabled:u=!0,selectedIndex:f=null,allowEscape:p=!1,loop:h=!1,nested:b=!1,rtl:x=!1,virtual:_=!1,focusItemOnOpen:E="auto",focusItemOnHover:I=!0,openOnArrowKeyDown:T=!0,disabledIndices:C=void 0,orientation:j="vertical",cols:q=1,scrollItemIntoView:L=!0,virtualItemRef:M,itemSizes:W,dense:P=!1}=e,O=CE(i.floating),z=Wi(O),F=vm(),V=hf(),U=zi(()=>{l(Z.current===-1?null:Z.current)}),B=zF(i.domReference),G=H.useRef(E),Z=H.useRef(f??-1),le=H.useRef(null),ie=H.useRef(!0),ne=H.useRef(U),oe=H.useRef(!!i.floating),te=H.useRef(n),ue=H.useRef(!1),de=H.useRef(!1),ye=Wi(C),we=Wi(n),Ne=Wi(L),ze=Wi(f),[je,De]=H.useState(),[Je,Xe]=H.useState(),Ve=zi(()=>{function be(Ue){_?(De(Ue.id),V?.events.emit("virtualfocus",Ue),M&&(M.current=Ue)):qc(Ue,{sync:ue.current,preventScroll:!0})}const Ie=s.current[Z.current];Ie&&be(Ie),(ue.current?Ue=>Ue():requestAnimationFrame)(()=>{const Ue=s.current[Z.current]||Ie;if(!Ue)return;Ie||be(Ue);const rt=Ne.current;rt&&_t&&(de.current||!ie.current)&&(Ue.scrollIntoView==null||Ue.scrollIntoView(typeof rt=="boolean"?{block:"nearest",inline:"nearest"}:rt))})});vr(()=>{u&&(n&&i.floating?G.current&&f!=null&&(de.current=!0,Z.current=f,U()):oe.current&&(Z.current=-1,ne.current()))},[u,n,i.floating,f,U]),vr(()=>{if(u&&n&&i.floating)if(o==null){if(ue.current=!1,ze.current!=null)return;if(oe.current&&(Z.current=-1,Ve()),(!te.current||!oe.current)&&G.current&&(le.current!=null||G.current===!0&&le.current==null)){let be=0;const Ie=()=>{s.current[0]==null?(be<2&&(be?requestAnimationFrame:queueMicrotask)(Ie),be++):(Z.current=le.current==null||h0(le.current,j,x)||b?c0(s,ye.current):ij(s,ye.current),le.current=null,U())};Ie()}}else rh(s,o)||(Z.current=o,Ve(),de.current=!1)},[u,n,i.floating,o,ze,b,s,j,x,U,Ve,ye]),vr(()=>{var be;if(!u||i.floating||!V||_||!oe.current)return;const Ie=V.nodesRef.current,Ae=(be=Ie.find(Me=>Me.id===F))==null||(be=be.context)==null?void 0:be.elements.floating,Ue=ko(hi(i.floating)),rt=Ie.some(Me=>Me.context&&pi(Me.context.elements.floating,Ue));Ae&&!rt&&ie.current&&Ae.focus({preventScroll:!0})},[u,i.floating,V,F,_]),vr(()=>{if(!u||!V||!_||F)return;function be(Ie){Xe(Ie.id),M&&(M.current=Ie)}return V.events.on("virtualfocus",be),()=>{V.events.off("virtualfocus",be)}},[u,V,_,F,M]),vr(()=>{ne.current=U,te.current=n,oe.current=!!i.floating}),vr(()=>{n||(le.current=null)},[n]);const ct=o!=null,_t=H.useMemo(()=>{function be(Ae){if(!n)return;const Ue=s.current.indexOf(Ae);Ue!==-1&&Z.current!==Ue&&(Z.current=Ue,U())}return{onFocus(Ae){let{currentTarget:Ue}=Ae;ue.current=!0,be(Ue)},onClick:Ae=>{let{currentTarget:Ue}=Ae;return Ue.focus({preventScroll:!0})},...I&&{onMouseMove(Ae){let{currentTarget:Ue}=Ae;ue.current=!0,de.current=!1,be(Ue)},onPointerLeave(Ae){let{pointerType:Ue}=Ae;if(!(!ie.current||Ue==="touch")&&(ue.current=!0,Z.current=-1,U(),!_)){var rt;(rt=z.current)==null||rt.focus({preventScroll:!0})}}}}},[n,z,I,s,U,_]),Tt=zi(be=>{if(ie.current=!1,ue.current=!0,be.which===229||!we.current&&be.currentTarget===z.current)return;if(b&&_j(be.key,j,x)){Mi(be),r(!1,be.nativeEvent,"list-navigation"),Xr(i.domReference)&&(_?V?.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const Ie=Z.current,Ae=c0(s,C),Ue=ij(s,C);if(B||(be.key==="Home"&&(Mi(be),Z.current=Ae,U()),be.key==="End"&&(Mi(be),Z.current=Ue,U())),q>1){const rt=W||Array.from({length:s.current.length},()=>({width:1,height:1})),Me=dQ(rt,q,P),ut=Me.findIndex(bn=>bn!=null&&!Oy(s.current,bn,C)),Qt=Me.reduce((bn,ar,Dn)=>ar!=null&&!Oy(s.current,ar,C)?Dn:bn,-1),Gt=Me[uQ({current:Me.map(bn=>bn!=null?s.current[bn]:null)},{event:be,orientation:j,loop:h,rtl:x,cols:q,disabledIndices:pQ([...C||s.current.map((bn,ar)=>Oy(s.current,ar)?ar:void 0),void 0],Me),minIndex:ut,maxIndex:Qt,prevIndex:fQ(Z.current>Ue?Ae:Z.current,rt,Me,q,be.key===bm?"bl":be.key===(x?Wl:Vl)?"tr":"tl"),stopEvent:!0})];if(Gt!=null&&(Z.current=Gt,U()),j==="both")return}if(wj(be.key,j)){if(Mi(be),n&&!_&&ko(be.currentTarget.ownerDocument)===be.currentTarget){Z.current=h0(be.key,j,x)?Ae:Ue,U();return}h0(be.key,j,x)?h?Z.current=Ie>=Ue?p&&Ie!==s.current.length?-1:Ae:Ni(s,{startingIndex:Ie,disabledIndices:C}):Z.current=Math.min(Ue,Ni(s,{startingIndex:Ie,disabledIndices:C})):h?Z.current=Ie<=Ae?p&&Ie!==-1?s.current.length:Ue:Ni(s,{startingIndex:Ie,decrement:!0,disabledIndices:C}):Z.current=Math.max(Ae,Ni(s,{startingIndex:Ie,decrement:!0,disabledIndices:C})),rh(s,Z.current)&&(Z.current=-1),U()}}),Ut=H.useMemo(()=>_&&n&&ct&&{"aria-activedescendant":Je||je},[_,n,ct,Je,je]),sn=H.useMemo(()=>({"aria-orientation":j==="both"?void 0:j,...B?{}:Ut,onKeyDown:Tt,onPointerMove(){ie.current=!0}}),[Ut,Tt,j,B]),xe=H.useMemo(()=>{function be(Ae){E==="auto"&&$F(Ae.nativeEvent)&&(G.current=!0)}function Ie(Ae){G.current=E,E==="auto"&&ZN(Ae.nativeEvent)&&(G.current=!0)}return{...Ut,onKeyDown(Ae){ie.current=!1;const Ue=Ae.key.startsWith("Arrow"),rt=["Home","End"].includes(Ae.key),Me=Ue||rt,ut=DQ(Ae.key,j,x),Qt=_j(Ae.key,j,x),Gt=wj(Ae.key,j),bn=(b?ut:Gt)||Ae.key==="Enter"||Ae.key.trim()==="";if(_&&n){const Pi=V?.nodesRef.current.find(Jt=>Jt.parentId==null),Sr=V&&Pi?wQ(V.nodesRef.current,Pi.id):null;if(Me&&Sr&&M){const Jt=new KeyboardEvent("keydown",{key:Ae.key,bubbles:!0});if(ut||Qt){var ar,Dn;const Ji=((ar=Sr.context)==null?void 0:ar.elements.domReference)===Ae.currentTarget,Zi=Qt&&!Ji?(Dn=Sr.context)==null?void 0:Dn.elements.domReference:ut?s.current.find(Yi=>Yi?.id===je):null;Zi&&(Mi(Ae),Zi.dispatchEvent(Jt),Xe(void 0))}if((Gt||rt)&&Sr.context&&Sr.context.open&&Sr.parentId&&Ae.currentTarget!==Sr.context.elements.domReference){var Qr;Mi(Ae),(Qr=Sr.context.elements.domReference)==null||Qr.dispatchEvent(Jt);return}}return Tt(Ae)}if(!(!n&&!T&&Ue)){if(bn&&(le.current=b&&Gt?null:Ae.key),b){ut&&(Mi(Ae),n?(Z.current=c0(s,ye.current),U()):r(!0,Ae.nativeEvent,"list-navigation"));return}Gt&&(f!=null&&(Z.current=f),Mi(Ae),!n&&T?r(!0,Ae.nativeEvent,"list-navigation"):Tt(Ae),n&&U())}},onFocus(){n&&!_&&(Z.current=-1,U())},onPointerDown:Ie,onPointerEnter:Ie,onMouseDown:be,onClick:be}},[je,Ut,Tt,ye,E,s,b,U,r,n,T,j,x,f,V,_,M]);return H.useMemo(()=>u?{reference:xe,floating:sn,item:_t}:{},[u,xe,sn,_t])}const Sj=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function ed(t,e){return typeof t=="function"?t(e):t}function MQ(t,e){const[n,r]=H.useState(t);return t&&!n&&r(!0),H.useEffect(()=>{if(!t&&n){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,n,e]),n}function $Q(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[l,u]=H.useState("unmounted"),f=MQ(n,o);return!f&&l==="close"&&u("unmounted"),vr(()=>{if(r){if(n){u("initial");const p=requestAnimationFrame(()=>{u("open")});return()=>{cancelAnimationFrame(p)}}u("close")}},[n,r]),{isMounted:f,status:l}}function c1(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:s,duration:o=250}=e,l=t.placement,u=l.split("-")[0],f=H.useMemo(()=>({side:u,placement:l}),[u,l]),p=typeof o=="number",h=(p?o:o.open)||0,b=(p?o:o.close)||0,[x,_]=H.useState(()=>({...ed(s,f),...ed(n,f)})),{isMounted:E,status:I}=$Q(t,{duration:o}),T=Wi(n),C=Wi(r),j=Wi(i),q=Wi(s);return vr(()=>{const L=ed(T.current,f),M=ed(j.current,f),W=ed(q.current,f),P=ed(C.current,f)||Object.keys(L).reduce((O,z)=>(O[z]="",O),{});if(I==="initial"&&_(O=>({transitionProperty:O.transitionProperty,...W,...L})),I==="open"&&_({transitionProperty:Object.keys(P).map(Sj).join(","),transitionDuration:h+"ms",...W,...P}),I==="close"){const O=M||L;_({transitionProperty:Object.keys(O).map(Sj).join(","),transitionDuration:b+"ms",...W,...O})}},[b,j,T,C,q,h,I,f]),{isMounted:E,styles:x}}const BQ=H.createContext({close(){}}),zQ=xn({slot:{target:["flex","justify-center","items-center"],portal:[]},variant:{mounted:{true:[]}},match:[{if:{mounted:!1},then:{portal:["hidden"]}}],defaults:{mounted:!1}}),WQ=({target:t,action:e="hover",disabled:n=!1,closeOnClick:r=!1,delay:i=100,float:s,variant:o,tva:l=zQ,css:u,children:f})=>{const[p,h]=H.useState(!1),{refs:b,floatingStyles:x,context:_}=a1({open:p,onOpenChange:h,placement:"top",whileElementsMounted:nD,middleware:[iD(10),sD({fallbackAxisSideDirection:"start"}),oQ()],...s}),{getReferenceProps:E,getFloatingProps:I}=l1([xQ(_,{enabled:e==="hover",delay:i}),s1(_,{enabled:e==="click"}),FQ(_),o1(_)]),{isMounted:T,styles:C}=c1(_),j=l({mounted:T,...o,css:u}).slots;return d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",ref:b.setReference,...E(),disabled:n,className:j.target(),children:t}),d.jsx(i1,{children:d.jsx("div",{ref:b.setFloating,style:{...x,...C},className:j.portal(),...I(),onClick:r?()=>{h(!1)}:void 0,children:d.jsx(BQ.Provider,{value:{close(){h(!1)}},children:f})})})]})},yD="icon-[system-uicons--menu-hamburger]",bD=xn({slot:{base:[]},variant:{size:{xs:"text-sm",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl"},disabled:{true:[]}},match:[{if:{disabled:!0},then:{base:["pointer-events-none","cursor-not-allowed","text-gray-400","opacity-50"]}}],defaults:{size:"xl",disabled:!1}}),en=({icon:t,variant:e,tva:n=bD,css:r,...i})=>{const s=n({...e,css:r}).slots;return t?d.jsx("div",{className:s.base({css:[t]}),...i}):null},VQ=xn({slot:{base:["p-1","bg-slate-50","border","border-slate-300","rounded-sm","shadow-md","text-slate-500","flex","flex-col","gap-2"]},variant:{},defaults:{}}),or=({icon:t=yD,iconProps:e,children:n,variant:r,tva:i=VQ,css:s,...o})=>{const l=i({...r,css:s}).slots;return d.jsx(vQ,{children:d.jsx(WQ,{action:"click",target:d.jsx(en,{icon:t,...e}),delay:100,float:{placement:"bottom-start"},closeOnClick:!0,...o,children:d.jsx("div",{className:l.base(),children:n})})})},vD="icon-[svg-spinners--90-ring-with-bg]",UQ=xn({slot:{base:["flex","items-center","justify-center","gap-2","group","w-fit","h-fit","rounded-sm","cursor-pointer","hover:shadow-md","hover:shadow-slate-200","transition-all","hover:bg-slate-200","text-slate-600","text-2xl","p-1"]},variant:{disabled:{true:["cursor-not-allowed","pointer-events-none"]},loading:{true:["cursor-not-allowed","pointer-events-none"]}},match:[{if:{disabled:!0},then:{base:["opacity-50","hover:bg-blue-400"]}}],defaults:{disabled:!1,loading:!1}}),xm=({iconEnabled:t,iconDisabled:e,iconLoading:n=vD,disabled:r=!1,loading:i=!1,onClick:s,variant:o,tva:l=UQ,css:u,children:f,...p})=>{const h=l({disabled:r,loading:i,...o,css:u}).slots;return d.jsxs("div",{className:h.base(),onClick:r?void 0:s,...p,children:[r?d.jsx(en,{icon:i?n:e??t}):d.jsx(en,{icon:i?n:t}),f]})},u1="icon-[iconamoon--close-light]",zv=H.createContext(void 0),HQ=xn({slot:{base:["bg-slate-300/75","backdrop-blur-xs","flex","justify-center","py-12"],target:[],modal:["bg-white","rounded-lg","shadow-lg","p-4","w-fit","h-fit","max-h-full","overflow-y-auto","relative","w-2/3","max-w-1/2"]},variant:{disabled:{true:["pointer-events-none"]},loading:{true:[]}},match:[{if:{loading:!0},then:{base:["pointer-events-none","opacity-50"]}}],defaults:{disabled:!1,loading:!1}}),mf=({target:t,icon:e,textTitle:n,disabled:r=!1,defaultOpen:i=!1,outside:s=!1,variant:o,css:l,tva:u=HQ,children:f})=>{const[p,h]=H.useState(i),b=yQ(),{refs:x,context:_}=a1({nodeId:b,open:p,onOpenChange:h}),E=s1(_),I=o1(_,{outsidePress:s}),{getReferenceProps:T,getFloatingProps:C}=l1([E,I]),{isMounted:j,styles:q}=c1(_),L=u({disabled:r,...o,css:l}).slots;return d.jsxs(zv.Provider,{value:{close(){h(!1)}},children:[d.jsx("div",{ref:x.setReference,...T({disabled:r}),className:L.target(),children:t}),d.jsx(bQ,{id:b,children:j&&d.jsx(d.Fragment,{children:d.jsx(i1,{children:d.jsx(OQ,{lockScroll:!0,style:q,className:L.base(),children:d.jsx(gD,{context:_,children:d.jsxs("div",{ref:x.setFloating,...C(),className:L.modal(),children:[d.jsxs("div",{className:"border-b border-slate-200 mb-2 py-1.5 flex flex-row items-center justify-between select-none",children:[d.jsxs("div",{className:"flex flex-row items-center gap-2 pr-4",children:[e&&(Nv(e)?d.jsx(en,{icon:e,variant:{size:"xl"}}):e),n&&d.jsx("div",{className:"text-lg font-semibold text-slate-700",children:n})]}),d.jsx(xm,{iconEnabled:u1,onClick:()=>h(!1)})]}),Q9(f)?d.jsx(f,{close:()=>h(!1)}):f]})})})})})})]})},KQ=xn({use:FF,slot:{},variant:{},defaults:{}}),kn=({icon:t,iconProps:e,label:n,disabled:r=!1,hidden:i=!1,variant:s,tva:o=KQ,css:l,...u})=>{const f=o({...s,disabled:r,css:l}).slots;return i?null:d.jsxs("div",{className:f.base(),children:[Nv(t)?d.jsx(en,{icon:t,...e}):t,d.jsx(mf,{icon:t,target:n,disabled:r,css:{modal:["w-1/2"]},...u})]})},QQ=xn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-2xl","bg-blue-50","border","border-blue-200","text-xs","px-4","py-0.5","font-bold"]},variant:{},defaults:{}}),Ri=({variant:t,tva:e=QQ,css:n,...r})=>{const i=e({...t,css:n}).slots;return d.jsx("div",{className:i.base(),...r})},TE="icon-[material-symbols-light--check-small]",GQ="icon-[material-symbols-light--close-small]",JQ="icon-[material-symbols-light--check-indeterminate-small]",ZQ=xn({use:bD,slot:{},variant:{value:{true:"text-green-600",false:"text-amber-600"}},defaults:{value:!1}}),Wv=({value:t,checkIcon:e=TE,unCheckIcon:n=GQ,undefinedIcon:r=JQ,tva:i=ZQ,...s})=>t==null?d.jsx(en,{icon:r,tva:i,...s}):d.jsx(en,{icon:t?e:n,tva:o=>i({...o,value:t}),...s}),YQ=xn({slot:{base:["flex","items-center","justify-between","text-sm","font-medium","text-slate-900","w-full"],switch:["relative","w-11","h-6","bg-gray-200","peer-focus:outline-hidden","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","peer-checked:rtl:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"]},variant:{},defaults:{}}),xD=({value:t,onChange:e,variant:n,tva:r=YQ,css:i,...s})=>{const o=r({...n,css:i}).slots;return d.jsx("div",{className:o.base(),children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:t,className:"sr-only peer",onChange:l=>{e(l.target.checked)},...s}),d.jsx("div",{className:o.switch()})]})})},XQ=xn({slot:{base:["flex","flex-row","items-center","justify-center","gap-2","group","rounded-sm","transition-all","cursor-pointer"]},variant:{variant:{primary:["text-white"],secondary:["text-slate-700"],subtle:["text-slate-600"],danger:["text-slate-50"]},disabled:{true:"cursor-not-allowed"},size:{xs:[],sm:[],md:[]}},match:[{if:{variant:"primary"},then:{base:["bg-blue-400","hover:bg-blue-500"]}},{if:{variant:"primary",disabled:!0},then:{base:["opacity-50","bg-blue-600","hover:bg-blue-600","cursor-not-allowed"]}},{if:{variant:"secondary"},then:{base:["bg-amber-400","hover:bg-amber-500"]}},{if:{variant:"secondary",disabled:!0},then:{base:["opacity-50","bg-amber-600","hover:bg-amber-600","cursor-not-allowed"]}},{if:{variant:"subtle"},then:{base:["text-slate-600","hover:text-slate-800","hover:bg-blue-50"]}},{if:{variant:"subtle",disabled:!0},then:{base:["opacity-50","bg-blue-50","hover:bg-blue-50","cursor-not-allowed"]}},{if:{variant:"danger"},then:{base:["bg-red-400","hover:bg-red-500","hover:text-white"]}},{if:{size:"xs"},then:{base:["py-0.5","px-1"]}},{if:{size:"sm"},then:{base:["py-1","px-2"]}},{if:{size:"md"},then:{base:["py-2","px-4"]}}],defaults:{variant:"primary",disabled:!1,size:"md"}}),gn=({iconEnabled:t,iconDisabled:e,iconLoading:n=vD,iconProps:r,loading:i,variant:s,tva:o=XQ,css:l,children:u,...f})=>{const p=o({disabled:f.disabled,...s,css:l}).slots;return d.jsxs("button",{type:"button",className:p.base({disabled:f.disabled}),...f,children:[f.disabled?d.jsx(en,{icon:i===!0?n:e,variant:{size:"xl"},...r}):d.jsx(en,{icon:i===!0?n:t,variant:{size:"xl"},...r}),u]})},d1=H.createContext({inline:!1}),e7=xn({slot:{base:["border","border-slate-100","px-2","py-1","rounded-md"],label:["text-sm","font-semibold","text-slate-600","border-b","mb-2"],value:[]},variant:{inline:{true:[]},withBackground:{true:[]}},match:[{if:{inline:!0},then:{base:["border-none","flex","flex-row","items-center","gap-2"],label:["mb-0","font-light","text-md","text-slate-600","border-none"],value:["text-md","text-slate-800"]}},{if:{withBackground:!0},then:{base:["bg-slate-50","hover:bg-slate-100"]}}],defaults:{inline:!1,withBackground:!0}}),t7=({inline:t,label:e,value:n,variant:r,tva:i=e7,css:s})=>{const o=H.useContext(d1),l=t??o?.inline,u=i({inline:l,...r,css:s}).slots;return d.jsxs("div",{className:u.base(),children:[e?d.jsx("div",{className:u.label(),children:e}):null,d.jsx("div",{className:u.value(),children:n})]})},n7=xn({slot:{base:["flex","flex-col","gap-4","border","border-slate-100","p-4","rounded-lg"]},variant:{inline:{true:["flex-row","border-none","gap-1","p-0","flex-1"]}},defaults:{inline:!1}}),wD=({items:t,hidden:e=[],valueOfProps:n,entity:r,variant:i,tva:s=n7,css:o,inline:l=!1})=>{const u=s({inline:l,...i,css:o}).slots;return d.jsx(d1.Provider,{value:{inline:l},children:d.jsx("div",{className:u.base(),children:t.filter(({id:f})=>!e.includes(f)).map(({id:f,render:p,...h})=>d.jsx(t7,{value:d.jsx(p,{entity:r}),...n,...h},f))})})},r7=xn({slot:{base:["flex","flex-col","gap-2"]},variant:{},defaults:{}}),Ej="icon-[tabler--dots]",i7=xn({slot:{base:["flex","items-center","justify-between","gap-2"],sums:["flex","items-center","gap-2","text-sm"]},variant:{},defaults:{}}),s7=xn({slot:{base:["select-none"],list:["flex","items-center","-space-x-px","text-xs","gap-2"],page:["flex","items-center","justify-center","w-12","px-2","py-1","rounded-sm","border","border-slate-200","hover:bg-slate-200","cursor-pointer","transition-all","duration-200"]},variant:{current:{true:[]}},match:[{if:{current:!0},then:{page:["bg-slate-100","hover:bg-slate-200","text-slate-800","font-bold"]}}],defaults:{current:!1}}),m0=({pages:t,page:e,onPage:n,variant:r,tva:i=s7,css:s})=>{const o=i({...r,css:s}).slots;return d.jsx("nav",{className:o.base(),children:d.jsx("ul",{className:o.list(),children:t.map((l,u)=>d.jsx("li",{className:o.page({current:e===l-1}),onClick:()=>n(l-1),children:l},`page-${l}-${u}`))})})},o7=xn({slot:{base:["cursor-pointer","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","p-2.5","hover:shadow-md","transition-all","group"],input:["flex","flex-row","items-center","justify-between","gap-2"],popup:["z-50","cursor-pointer","overflow-y-auto","rounded-sm","border","border-slate-300","bg-white","shadow-lg","focus:outline-hidden"],item:["focus:outline-hidden","py-2","px-2.5","flex","items-center","justify-between"]},variant:{disabled:{true:["cursor-not-allowed","hover:shadow-none","focus:border-slate-300","opacity-50"]},active:{true:[]},selected:{true:[]}},match:[{if:{selected:!0},then:{item:["bg-slate-100"]}},{if:{active:!0},then:{item:["bg-slate-200"]}}],defaults:{disabled:!1,selected:!1,active:!1}}),f1=({items:t,icon:e,defaultValue:n,render:r,textSelect:i,disabled:s=!1,onItem:o,onSelect:l,onChange:u,value:f,variant:p,tva:h=o7,css:b})=>{const[x,_]=H.useState(!1),[E,I]=H.useState(null),[T,C]=H.useState(t.findIndex(ne=>ne.id===n));H.useEffect(()=>{C(t.findIndex(ne=>ne.id===f))},[f]);const{refs:j,floatingStyles:q,context:L}=a1({placement:"bottom-start",open:x,onOpenChange:_,whileElementsMounted:nD,middleware:[iD(5),sD({padding:10}),aQ({apply({rects:ne,elements:oe,availableHeight:te}){Object.assign(oe.floating.style,{maxHeight:`${te}px`,minWidth:`${ne.reference.width}px`})},padding:10})]}),M=H.useRef([]),W=H.useRef(!1),P=s1(L,{event:"mousedown"}),O=o1(L),z=LQ(L,{listRef:M,activeIndex:E,selectedIndex:T,onNavigate:I,loop:!0}),{getReferenceProps:F,getFloatingProps:V,getItemProps:U}=l1([O,z,P]),{isMounted:B,styles:G}=c1(L),Z=ne=>{C(ne),_(!1);const oe=t[ne];oe&&o?.(oe),l?.(oe),u?.(oe?.id)},le=T===null?void 0:t[T],ie=h({disabled:s,...p,css:b}).slots;return d.jsxs(d.Fragment,{children:[d.jsx("div",{tabIndex:s?-1:0,ref:s?void 0:j.setReference,"aria-labelledby":"select-label","aria-autocomplete":"none",...s?{}:F(),className:ie.base(),children:d.jsxs("div",{className:ie.input(),children:[e?d.jsx(en,{icon:e,variant:{size:"xl"},css:{base:["text-slate-400","group-hover:text-slate-600"]}}):null,le?d.jsx(r,{entity:le}):i||sa.rich("Select item"),d.jsx(en,{icon:"icon-[gg--select]",variant:{size:"xl"},css:{base:[!x&&"text-slate-400",x&&"text-slate-600","group-hover:text-slate-600"]}})]})}),B&&d.jsx(i1,{children:d.jsx(gD,{context:L,modal:!1,children:d.jsx("div",{ref:j.setFloating,style:{...q,...G},className:ie.popup(),...V(),children:t.map((ne,oe)=>d.jsxs("div",{ref:te=>{M.current[oe]=te},role:"option",tabIndex:oe===E?0:-1,"aria-selected":oe===T&&oe===E,className:ie.item({selected:oe===T,active:oe===E}),...U({onClick(){Z(oe)},onKeyDown(te){te.key==="Enter"&&(te.preventDefault(),Z(oe)),te.key===" "&&!W.current&&(te.preventDefault(),Z(oe))}}),children:[d.jsx(r,{entity:ne}),oe===T&&d.jsx(en,{icon:"icon-[basil--check-outline]",variant:{size:"xl"}})]},ne.id))})})})]})},a7=({sizes:t=[5,15,30,50,100],size:e,onSize:n,...r})=>d.jsx(f1,{items:t.map(i=>({id:`${i}`,size:i})),defaultValue:`${e}`,value:`${e}`,onItem:({size:i})=>n(i),render:({entity:{size:i}})=>i,css:{base:["px-8","py-1"],item:["px-8","py-1"]},...r}),Nj=({cursor:t,count:e,textTotal:n,onPage:r,onSize:i,variant:s,tva:o=i7,css:l})=>{const u=H.useMemo(()=>D9({page:t.page,total:Math.ceil(e.filter/t.size),siblings:1,boundaries:1}),[t.page,e.filter,t.size]),f=o({...s,css:l}).slots;return d.jsxs("div",{className:f.base(),children:[u.total>1?d.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[["both","start"].includes(u.type)&&d.jsxs(d.Fragment,{children:[d.jsx(m0,{page:t.page,pages:u.start,onPage:r}),d.jsx(en,{icon:Ej})]}),d.jsx(m0,{page:t.page,pages:u.pages,onPage:r}),["both","end"].includes(u.type)&&d.jsxs(d.Fragment,{children:[d.jsx(en,{icon:Ej}),d.jsx(m0,{page:t.page,pages:u.end,onPage:r})]})]}):null,d.jsxs("div",{className:f.sums(),children:[d.jsx("div",{children:n}),d.jsx("div",{className:"font-bold",children:e.filter}),e.filter!==e.where&&d.jsxs(d.Fragment,{children:[d.jsx("div",{children:"/"}),d.jsx("div",{className:"font-semibold",children:e.where})]})]}),d.jsx(a7,{size:t.size,onSize:i})]})},Ij="function",gd="64e10b34-2bf7-4616-9668-f99de5aa046e",l7="get",c7="has",u7="set",{isArray:qy}=Array;let{SharedArrayBuffer:Mb,window:d7}=globalThis,{notify:_D,wait:SD,waitAsync:$b}=Atomics,ED=null;$b||($b=t=>({value:new Promise(e=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=e,n.postMessage(t)})}));try{new Mb(4)}catch{Mb=ArrayBuffer;const e=new WeakMap;if(d7){const n=new Map,{prototype:{postMessage:r}}=Worker,i=s=>{const o=s.data?.[gd];if(!qy(o)){s.stopImmediatePropagation();const{id:l,sb:u}=o;n.get(l)(u)}};ED=function(s,...o){const l=s?.[gd];if(qy(l)){const[u,f]=l;e.set(f,u),this.addEventListener("message",i)}return r.call(this,s,...o)},$b=s=>({value:new Promise(o=>{n.set(e.get(s),o)}).then(o=>{n.delete(e.get(s)),e.delete(s);for(let l=0;l<o.length;l++)s[l]=o[l];return"ok"})})}else{const n=(r,i)=>({[gd]:{id:r,sb:i}});_D=r=>{postMessage(n(e.get(r),r))},addEventListener("message",r=>{const i=r.data?.[gd];if(qy(i)){const[s,o]=i;e.set(o,s)}})}}const{Int32Array:RE,Map:kj,Uint16Array:jE}=globalThis,{BYTES_PER_ELEMENT:Cj}=RE,{BYTES_PER_ELEMENT:f7}=jE,p7=(t,e,n)=>{for(;SD(t,0,0,e)==="timed-out";)n()},OE=new WeakSet,g0=new WeakMap,h7={value:{then:t=>t()}};let m7=0;const p1=(t,{parse:e=JSON.parse,stringify:n=JSON.stringify,transform:r,interrupt:i}=JSON)=>{if(!g0.has(t)){const s=ED||t.postMessage,o=(b,...x)=>s.call(t,{[gd]:x},{transfer:b}),l=typeof i===Ij?i:i?.handler,u=i?.delay||42,f=new TextDecoder("utf-16"),p=(b,x)=>b?$b(x,0):(l?p7(x,u,l):SD(x,0),h7);let h=!1;g0.set(t,new Proxy(new kj,{[c7]:(b,x)=>typeof x=="string"&&!x.startsWith("_"),[l7]:(b,x)=>x==="then"?null:(..._)=>{const E=m7++;let I=new RE(new Mb(Cj*2)),T=[];OE.has(_.at(-1)||T)&&OE.delete(T=_.pop()),o(T,E,I,x,r?_.map(r):_);const C=t!==globalThis;let j=0;return h&&C&&(j=setTimeout(console.warn,1e3,` - Possible deadlock if proxy.${x}(...args) is awaited`)),p(C,I).value.then(()=>{clearTimeout(j);const q=I[1];if(!q)return;const L=f7*q;return I=new RE(new Mb(L+L%Cj)),o([],E,I),p(C,I).value.then(()=>e(f.decode(new jE(I.buffer).slice(0,q))))})},[u7](b,x,_){const E=typeof _;if(E!==Ij)throw new Error(`Unable to assign ${x} as ${E}`);if(!b.size){const I=new kj;t.addEventListener("message",async T=>{const C=T.data?.[gd];if(qy(C)){T.stopImmediatePropagation();const[j,q,...L]=C;let M;if(L.length){const[W,P]=L;if(b.has(W)){h=!0;try{const O=await b.get(W)(...P);if(O!==void 0){const z=n(r?r(O):O);I.set(j,z),q[1]=z.length}}catch(O){M=O}finally{h=!1}}else M=new Error(`Unsupported action: ${W}`);q[0]=1}else{const W=I.get(j);I.delete(j);for(let P=new jE(q.buffer),O=0;O<W.length;O++)P[O]=W.charCodeAt(O)}if(_D(q,0),M)throw M}})}return!!b.set(x,_)}}))}return g0.get(t)};p1.transfer=(...t)=>(OE.add(t),t);var h1=(()=>{var t=import.meta.url;return function(e={}){var n,r=e,i,s,o=new Promise((g,y)=>{i=g,s=y}),l=typeof window=="object",u=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;const f=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,f.debugModule("globalThis.location =",globalThis.location);var p=Object.assign({},r),h="./this.program",b="";function x(g){return r.locateFile?r.locateFile(g,b):b+g}var _,E;(l||u)&&(u?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),t&&(b=t),b.startsWith("blob:")?b="":b=b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(E=g=>{var y=new XMLHttpRequest;return y.open("GET",g,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),_=g=>fetch(g,{credentials:"same-origin"}).then(y=>y.ok?y.arrayBuffer():Promise.reject(new Error(y.status+" : "+y.url))));var I=r.print||console.log.bind(console),T=r.printErr||console.error.bind(console);Object.assign(r,p),p=null,r.arguments&&r.arguments,r.thisProgram&&(h=r.thisProgram);var C=r.wasmBinary,j,q=!1,L,M,W,P,O,z;function F(){var g=j.buffer;r.HEAP8=L=new Int8Array(g),r.HEAP16=W=new Int16Array(g),r.HEAPU8=M=new Uint8Array(g),r.HEAPU16=new Uint16Array(g),r.HEAP32=P=new Int32Array(g),r.HEAPU32=O=new Uint32Array(g),r.HEAPF32=new Float32Array(g),r.HEAPF64=new Float64Array(g),r.HEAP64=z=new BigInt64Array(g),r.HEAPU64=new BigUint64Array(g)}if(r.wasmMemory)j=r.wasmMemory;else{var V=r.INITIAL_MEMORY||0x1000000;j=new WebAssembly.Memory({initial:V/65536,maximum:32768})}F();var U=[],B=[],G=[];function Z(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)ne(r.preRun.shift());xe(U)}function le(){!r.noFSInit&&!K.initialized&&K.init(),K.ignorePermissions=!1,xe(B)}function ie(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)te(r.postRun.shift());xe(G)}function ne(g){U.unshift(g)}function oe(g){B.unshift(g)}function te(g){G.unshift(g)}var ue=0,de=null;function ye(g){return g}function we(g){ue++,r.monitorRunDependencies?.(ue)}function Ne(g){if(ue--,r.monitorRunDependencies?.(ue),ue==0&&de){var y=de;de=null,y()}}function ze(g){r.onAbort?.(g),g="Aborted("+g+")",T(g),q=!0,g+=". Build with -sASSERTIONS for more info.";var y=new WebAssembly.RuntimeError(g);throw s(y),y}var je="data:application/octet-stream;base64,",De=g=>g.startsWith(je);function Je(){if(r.locateFile){var g="sqlite3.wasm";return De(g)?g:x(g)}return new URL("/assets/sqlite3-CgX3seBP.wasm",import.meta.url).href}var Xe;function Ve(g){if(g==Xe&&C)return new Uint8Array(C);if(E)return E(g);throw"both async and sync fetching of the wasm failed"}function ct(g){return C?Promise.resolve().then(()=>Ve(g)):_(g).then(y=>new Uint8Array(y),()=>Ve(g))}function _t(g,y,S){return ct(g).then(N=>WebAssembly.instantiate(N,y)).then(S,N=>{T(`failed to asynchronously prepare wasm: ${N}`),ze(N)})}function Tt(g,y,S,N){return!g&&typeof WebAssembly.instantiateStreaming=="function"&&!De(y)&&typeof fetch=="function"?fetch(y,{credentials:"same-origin"}).then(R=>{var $=WebAssembly.instantiateStreaming(R,S);return $.then(N,function(fe){return T(`wasm streaming compile failed: ${fe}`),T("falling back to ArrayBuffer instantiation"),_t(y,S,N)})}):_t(y,S,N)}function Ut(){return{env:Lf,wasi_snapshot_preview1:Lf}}function sn(){var g=Ut();function y(N,R){return he=N.exports,oe(he.__wasm_call_ctors),Ne(),he}we();function S(N){y(N.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(g,y)}catch(N){T(`Module.instantiateWasm callback failed with error: ${N}`),s(N)}return Xe||(Xe=Je()),Tt(C,Xe,g,S).catch(s),{}}var xe=g=>{for(;g.length>0;)g.shift()(r)};r.noExitRuntime;var be={isAbs:g=>g.charAt(0)==="/",splitPath:g=>{var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return y.exec(g).slice(1)},normalizeArray:(g,y)=>{for(var S=0,N=g.length-1;N>=0;N--){var R=g[N];R==="."?g.splice(N,1):R===".."?(g.splice(N,1),S++):S&&(g.splice(N,1),S--)}if(y)for(;S;S--)g.unshift("..");return g},normalize:g=>{var y=be.isAbs(g),S=g.substr(-1)==="/";return g=be.normalizeArray(g.split("/").filter(N=>!!N),!y).join("/"),!g&&!y&&(g="."),g&&S&&(g+="/"),(y?"/":"")+g},dirname:g=>{var y=be.splitPath(g),S=y[0],N=y[1];return!S&&!N?".":(N&&(N=N.substr(0,N.length-1)),S+N)},basename:g=>{if(g==="/")return"/";g=be.normalize(g),g=g.replace(/\/$/,"");var y=g.lastIndexOf("/");return y===-1?g:g.substr(y+1)},join:(...g)=>be.normalize(g.join("/")),join2:(g,y)=>be.normalize(g+"/"+y)},Ie=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return g=>crypto.getRandomValues(g);ze("initRandomDevice")},Ae=g=>(Ae=Ie())(g),Ue={resolve:(...g)=>{for(var y="",S=!1,N=g.length-1;N>=-1&&!S;N--){var R=N>=0?g[N]:K.cwd();if(typeof R!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!R)return"";y=R+"/"+y,S=be.isAbs(R)}return y=be.normalizeArray(y.split("/").filter($=>!!$),!S).join("/"),(S?"/":"")+y||"."},relative:(g,y)=>{g=Ue.resolve(g).substr(1),y=Ue.resolve(y).substr(1);function S(tt){for(var at=0;at<tt.length&&tt[at]==="";at++);for(var mt=tt.length-1;mt>=0&&tt[mt]==="";mt--);return at>mt?[]:tt.slice(at,mt-at+1)}for(var N=S(g.split("/")),R=S(y.split("/")),$=Math.min(N.length,R.length),fe=$,me=0;me<$;me++)if(N[me]!==R[me]){fe=me;break}for(var Ke=[],me=fe;me<N.length;me++)Ke.push("..");return Ke=Ke.concat(R.slice(fe)),Ke.join("/")}},rt=typeof TextDecoder<"u"?new TextDecoder:void 0,Me=(g,y,S)=>{for(var N=y+S,R=y;g[R]&&!(R>=N);)++R;if(R-y>16&&g.buffer&&rt)return rt.decode(g.subarray(y,R));for(var $="";y<R;){var fe=g[y++];if(!(fe&128)){$+=String.fromCharCode(fe);continue}var me=g[y++]&63;if((fe&224)==192){$+=String.fromCharCode((fe&31)<<6|me);continue}var Ke=g[y++]&63;if((fe&240)==224?fe=(fe&15)<<12|me<<6|Ke:fe=(fe&7)<<18|me<<12|Ke<<6|g[y++]&63,fe<65536)$+=String.fromCharCode(fe);else{var tt=fe-65536;$+=String.fromCharCode(55296|tt>>10,56320|tt&1023)}}return $},ut=[],Qt=g=>{for(var y=0,S=0;S<g.length;++S){var N=g.charCodeAt(S);N<=127?y++:N<=2047?y+=2:N>=55296&&N<=57343?(y+=4,++S):y+=3}return y},Gt=(g,y,S,N)=>{if(!(N>0))return 0;for(var R=S,$=S+N-1,fe=0;fe<g.length;++fe){var me=g.charCodeAt(fe);if(me>=55296&&me<=57343){var Ke=g.charCodeAt(++fe);me=65536+((me&1023)<<10)|Ke&1023}if(me<=127){if(S>=$)break;y[S++]=me}else if(me<=2047){if(S+1>=$)break;y[S++]=192|me>>6,y[S++]=128|me&63}else if(me<=65535){if(S+2>=$)break;y[S++]=224|me>>12,y[S++]=128|me>>6&63,y[S++]=128|me&63}else{if(S+3>=$)break;y[S++]=240|me>>18,y[S++]=128|me>>12&63,y[S++]=128|me>>6&63,y[S++]=128|me&63}}return y[S]=0,S-R};function bn(g,y,S){var N=Qt(g)+1,R=new Array(N),$=Gt(g,R,0,R.length);return R.length=$,R}var ar=()=>{if(!ut.length){var g=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(g=window.prompt("Input: "),g!==null&&(g+=`
`)),!g)return null;ut=bn(g)}return ut.shift()},Dn={ttys:[],init(){},shutdown(){},register(g,y){Dn.ttys[g]={input:[],output:[],ops:y},K.registerDevice(g,Dn.stream_ops)},stream_ops:{open(g){var y=Dn.ttys[g.node.rdev];if(!y)throw new K.ErrnoError(43);g.tty=y,g.seekable=!1},close(g){g.tty.ops.fsync(g.tty)},fsync(g){g.tty.ops.fsync(g.tty)},read(g,y,S,N,R){if(!g.tty||!g.tty.ops.get_char)throw new K.ErrnoError(60);for(var $=0,fe=0;fe<N;fe++){var me;try{me=g.tty.ops.get_char(g.tty)}catch{throw new K.ErrnoError(29)}if(me===void 0&&$===0)throw new K.ErrnoError(6);if(me==null)break;$++,y[S+fe]=me}return $&&(g.node.timestamp=Date.now()),$},write(g,y,S,N,R){if(!g.tty||!g.tty.ops.put_char)throw new K.ErrnoError(60);try{for(var $=0;$<N;$++)g.tty.ops.put_char(g.tty,y[S+$])}catch{throw new K.ErrnoError(29)}return N&&(g.node.timestamp=Date.now()),$}},default_tty_ops:{get_char(g){return ar()},put_char(g,y){y===null||y===10?(I(Me(g.output,0)),g.output=[]):y!=0&&g.output.push(y)},fsync(g){g.output&&g.output.length>0&&(I(Me(g.output,0)),g.output=[])},ioctl_tcgets(g){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(g,y,S){return 0},ioctl_tiocgwinsz(g){return[24,80]}},default_tty1_ops:{put_char(g,y){y===null||y===10?(T(Me(g.output,0)),g.output=[]):y!=0&&g.output.push(y)},fsync(g){g.output&&g.output.length>0&&(T(Me(g.output,0)),g.output=[])}}},Qr=(g,y)=>(M.fill(0,g,g+y),g),Pi=(g,y)=>Math.ceil(g/y)*y,Sr=g=>{g=Pi(g,65536);var y=Mf(65536,g);return y?Qr(y,g):0},Jt={ops_table:null,mount(g){return Jt.createNode(null,"/",16895,0)},createNode(g,y,S,N){if(K.isBlkdev(S)||K.isFIFO(S))throw new K.ErrnoError(63);Jt.ops_table||={dir:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr,lookup:Jt.node_ops.lookup,mknod:Jt.node_ops.mknod,rename:Jt.node_ops.rename,unlink:Jt.node_ops.unlink,rmdir:Jt.node_ops.rmdir,readdir:Jt.node_ops.readdir,symlink:Jt.node_ops.symlink},stream:{llseek:Jt.stream_ops.llseek}},file:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr},stream:{llseek:Jt.stream_ops.llseek,read:Jt.stream_ops.read,write:Jt.stream_ops.write,allocate:Jt.stream_ops.allocate,mmap:Jt.stream_ops.mmap,msync:Jt.stream_ops.msync}},link:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr,readlink:Jt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr},stream:K.chrdev_stream_ops}};var R=K.createNode(g,y,S,N);return K.isDir(R.mode)?(R.node_ops=Jt.ops_table.dir.node,R.stream_ops=Jt.ops_table.dir.stream,R.contents={}):K.isFile(R.mode)?(R.node_ops=Jt.ops_table.file.node,R.stream_ops=Jt.ops_table.file.stream,R.usedBytes=0,R.contents=null):K.isLink(R.mode)?(R.node_ops=Jt.ops_table.link.node,R.stream_ops=Jt.ops_table.link.stream):K.isChrdev(R.mode)&&(R.node_ops=Jt.ops_table.chrdev.node,R.stream_ops=Jt.ops_table.chrdev.stream),R.timestamp=Date.now(),g&&(g.contents[y]=R,g.timestamp=R.timestamp),R},getFileDataAsTypedArray(g){return g.contents?g.contents.subarray?g.contents.subarray(0,g.usedBytes):new Uint8Array(g.contents):new Uint8Array(0)},expandFileStorage(g,y){var S=g.contents?g.contents.length:0;if(!(S>=y)){var N=1024*1024;y=Math.max(y,S*(S<N?2:1.125)>>>0),S!=0&&(y=Math.max(y,256));var R=g.contents;g.contents=new Uint8Array(y),g.usedBytes>0&&g.contents.set(R.subarray(0,g.usedBytes),0)}},resizeFileStorage(g,y){if(g.usedBytes!=y)if(y==0)g.contents=null,g.usedBytes=0;else{var S=g.contents;g.contents=new Uint8Array(y),S&&g.contents.set(S.subarray(0,Math.min(y,g.usedBytes))),g.usedBytes=y}},node_ops:{getattr(g){var y={};return y.dev=K.isChrdev(g.mode)?g.id:1,y.ino=g.id,y.mode=g.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=g.rdev,K.isDir(g.mode)?y.size=4096:K.isFile(g.mode)?y.size=g.usedBytes:K.isLink(g.mode)?y.size=g.link.length:y.size=0,y.atime=new Date(g.timestamp),y.mtime=new Date(g.timestamp),y.ctime=new Date(g.timestamp),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},setattr(g,y){y.mode!==void 0&&(g.mode=y.mode),y.timestamp!==void 0&&(g.timestamp=y.timestamp),y.size!==void 0&&Jt.resizeFileStorage(g,y.size)},lookup(g,y){throw K.genericErrors[44]},mknod(g,y,S,N){return Jt.createNode(g,y,S,N)},rename(g,y,S){if(K.isDir(g.mode)){var N;try{N=K.lookupNode(y,S)}catch{}if(N)for(var R in N.contents)throw new K.ErrnoError(55)}delete g.parent.contents[g.name],g.parent.timestamp=Date.now(),g.name=S,y.contents[S]=g,y.timestamp=g.parent.timestamp},unlink(g,y){delete g.contents[y],g.timestamp=Date.now()},rmdir(g,y){var S=K.lookupNode(g,y);for(var N in S.contents)throw new K.ErrnoError(55);delete g.contents[y],g.timestamp=Date.now()},readdir(g){var y=[".",".."];for(var S of Object.keys(g.contents))y.push(S);return y},symlink(g,y,S){var N=Jt.createNode(g,y,41471,0);return N.link=S,N},readlink(g){if(!K.isLink(g.mode))throw new K.ErrnoError(28);return g.link}},stream_ops:{read(g,y,S,N,R){var $=g.node.contents;if(R>=g.node.usedBytes)return 0;var fe=Math.min(g.node.usedBytes-R,N);if(fe>8&&$.subarray)y.set($.subarray(R,R+fe),S);else for(var me=0;me<fe;me++)y[S+me]=$[R+me];return fe},write(g,y,S,N,R,$){if(y.buffer===L.buffer&&($=!1),!N)return 0;var fe=g.node;if(fe.timestamp=Date.now(),y.subarray&&(!fe.contents||fe.contents.subarray)){if($)return fe.contents=y.subarray(S,S+N),fe.usedBytes=N,N;if(fe.usedBytes===0&&R===0)return fe.contents=y.slice(S,S+N),fe.usedBytes=N,N;if(R+N<=fe.usedBytes)return fe.contents.set(y.subarray(S,S+N),R),N}if(Jt.expandFileStorage(fe,R+N),fe.contents.subarray&&y.subarray)fe.contents.set(y.subarray(S,S+N),R);else for(var me=0;me<N;me++)fe.contents[R+me]=y[S+me];return fe.usedBytes=Math.max(fe.usedBytes,R+N),N},llseek(g,y,S){var N=y;if(S===1?N+=g.position:S===2&&K.isFile(g.node.mode)&&(N+=g.node.usedBytes),N<0)throw new K.ErrnoError(28);return N},allocate(g,y,S){Jt.expandFileStorage(g.node,y+S),g.node.usedBytes=Math.max(g.node.usedBytes,y+S)},mmap(g,y,S,N,R){if(!K.isFile(g.node.mode))throw new K.ErrnoError(43);var $,fe,me=g.node.contents;if(!(R&2)&&me&&me.buffer===L.buffer)fe=!1,$=me.byteOffset;else{if(fe=!0,$=Sr(y),!$)throw new K.ErrnoError(48);me&&((S>0||S+y<me.length)&&(me.subarray?me=me.subarray(S,S+y):me=Array.prototype.slice.call(me,S,S+y)),L.set(me,$))}return{ptr:$,allocated:fe}},msync(g,y,S,N,R){return Jt.stream_ops.write(g,y,0,N,S,!1),0}}},Ji=(g,y,S,N)=>{var R=`al ${g}`;_(g).then($=>{y(new Uint8Array($)),R&&Ne()},$=>{if(S)S();else throw`Loading data file "${g}" failed.`}),R&&we()},Zi=(g,y,S,N,R,$)=>{K.createDataFile(g,y,S,N,R,$)},Yi=r.preloadPlugins||[],po=(g,y,S,N)=>{typeof Browser<"u"&&Browser.init();var R=!1;return Yi.forEach($=>{R||$.canHandle(y)&&($.handle(g,y,S,N),R=!0)}),R},pa=(g,y,S,N,R,$,fe,me,Ke,tt)=>{var at=y?Ue.resolve(be.join2(g,y)):g;function mt(Be){function Oe(et){tt?.(),me||Zi(g,y,et,N,R,Ke),$?.(),Ne()}po(Be,at,Oe,()=>{fe?.(),Ne()})||Oe(Be)}we(),typeof S=="string"?Ji(S,mt,fe):mt(S)},cc=g=>{var y={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},S=y[g];if(typeof S>"u")throw new Error(`Unknown file open mode: ${g}`);return S},Bs=(g,y)=>{var S=0;return g&&(S|=365),y&&(S|=146),S},K={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(g){this.name="ErrnoError",this.errno=g}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(g){this.node=g}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(g){this.shared.flags=g}get position(){return this.shared.position}set position(g){this.shared.position=g}},FSNode:class{constructor(g,y,S,N){g||(g=this),this.parent=g,this.mount=g.mount,this.mounted=null,this.id=K.nextInode++,this.name=y,this.mode=S,this.node_ops={},this.stream_ops={},this.rdev=N,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(g){g?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(g){g?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return K.isDir(this.mode)}get isDevice(){return K.isChrdev(this.mode)}},lookupPath(g,y={}){if(g=Ue.resolve(g),!g)return{path:"",node:null};var S={follow_mount:!0,recurse_count:0};if(y=Object.assign(S,y),y.recurse_count>8)throw new K.ErrnoError(32);for(var N=g.split("/").filter(mt=>!!mt),R=K.root,$="/",fe=0;fe<N.length;fe++){var me=fe===N.length-1;if(me&&y.parent)break;if(R=K.lookupNode(R,N[fe]),$=be.join2($,N[fe]),K.isMountpoint(R)&&(!me||me&&y.follow_mount)&&(R=R.mounted.root),!me||y.follow)for(var Ke=0;K.isLink(R.mode);){var tt=K.readlink($);$=Ue.resolve(be.dirname($),tt);var at=K.lookupPath($,{recurse_count:y.recurse_count+1});if(R=at.node,Ke++>40)throw new K.ErrnoError(32)}}return{path:$,node:R}},getPath(g){for(var y;;){if(K.isRoot(g)){var S=g.mount.mountpoint;return y?S[S.length-1]!=="/"?`${S}/${y}`:S+y:S}y=y?`${g.name}/${y}`:g.name,g=g.parent}},hashName(g,y){for(var S=0,N=0;N<y.length;N++)S=(S<<5)-S+y.charCodeAt(N)|0;return(g+S>>>0)%K.nameTable.length},hashAddNode(g){var y=K.hashName(g.parent.id,g.name);g.name_next=K.nameTable[y],K.nameTable[y]=g},hashRemoveNode(g){var y=K.hashName(g.parent.id,g.name);if(K.nameTable[y]===g)K.nameTable[y]=g.name_next;else for(var S=K.nameTable[y];S;){if(S.name_next===g){S.name_next=g.name_next;break}S=S.name_next}},lookupNode(g,y){var S=K.mayLookup(g);if(S)throw new K.ErrnoError(S);for(var N=K.hashName(g.id,y),R=K.nameTable[N];R;R=R.name_next){var $=R.name;if(R.parent.id===g.id&&$===y)return R}return K.lookup(g,y)},createNode(g,y,S,N){var R=new K.FSNode(g,y,S,N);return K.hashAddNode(R),R},destroyNode(g){K.hashRemoveNode(g)},isRoot(g){return g===g.parent},isMountpoint(g){return!!g.mounted},isFile(g){return(g&61440)===32768},isDir(g){return(g&61440)===16384},isLink(g){return(g&61440)===40960},isChrdev(g){return(g&61440)===8192},isBlkdev(g){return(g&61440)===24576},isFIFO(g){return(g&61440)===4096},isSocket(g){return(g&49152)===49152},flagsToPermissionString(g){var y=["r","w","rw"][g&3];return g&512&&(y+="w"),y},nodePermissions(g,y){return K.ignorePermissions?0:y.includes("r")&&!(g.mode&292)||y.includes("w")&&!(g.mode&146)||y.includes("x")&&!(g.mode&73)?2:0},mayLookup(g){if(!K.isDir(g.mode))return 54;var y=K.nodePermissions(g,"x");return y||(g.node_ops.lookup?0:2)},mayCreate(g,y){try{var S=K.lookupNode(g,y);return 20}catch{}return K.nodePermissions(g,"wx")},mayDelete(g,y,S){var N;try{N=K.lookupNode(g,y)}catch($){return $.errno}var R=K.nodePermissions(g,"wx");if(R)return R;if(S){if(!K.isDir(N.mode))return 54;if(K.isRoot(N)||K.getPath(N)===K.cwd())return 10}else if(K.isDir(N.mode))return 31;return 0},mayOpen(g,y){return g?K.isLink(g.mode)?32:K.isDir(g.mode)&&(K.flagsToPermissionString(y)!=="r"||y&512)?31:K.nodePermissions(g,K.flagsToPermissionString(y)):44},MAX_OPEN_FDS:4096,nextfd(){for(var g=0;g<=K.MAX_OPEN_FDS;g++)if(!K.streams[g])return g;throw new K.ErrnoError(33)},getStreamChecked(g){var y=K.getStream(g);if(!y)throw new K.ErrnoError(8);return y},getStream:g=>K.streams[g],createStream(g,y=-1){return g=Object.assign(new K.FSStream,g),y==-1&&(y=K.nextfd()),g.fd=y,K.streams[y]=g,g},closeStream(g){K.streams[g]=null},dupStream(g,y=-1){var S=K.createStream(g,y);return S.stream_ops?.dup?.(S),S},chrdev_stream_ops:{open(g){var y=K.getDevice(g.node.rdev);g.stream_ops=y.stream_ops,g.stream_ops.open?.(g)},llseek(){throw new K.ErrnoError(70)}},major:g=>g>>8,minor:g=>g&255,makedev:(g,y)=>g<<8|y,registerDevice(g,y){K.devices[g]={stream_ops:y}},getDevice:g=>K.devices[g],getMounts(g){for(var y=[],S=[g];S.length;){var N=S.pop();y.push(N),S.push(...N.mounts)}return y},syncfs(g,y){typeof g=="function"&&(y=g,g=!1),K.syncFSRequests++,K.syncFSRequests>1&&T(`warning: ${K.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var S=K.getMounts(K.root.mount),N=0;function R(fe){return K.syncFSRequests--,y(fe)}function $(fe){if(fe)return $.errored?void 0:($.errored=!0,R(fe));++N>=S.length&&R(null)}S.forEach(fe=>{if(!fe.type.syncfs)return $(null);fe.type.syncfs(fe,g,$)})},mount(g,y,S){var N=S==="/",R=!S,$;if(N&&K.root)throw new K.ErrnoError(10);if(!N&&!R){var fe=K.lookupPath(S,{follow_mount:!1});if(S=fe.path,$=fe.node,K.isMountpoint($))throw new K.ErrnoError(10);if(!K.isDir($.mode))throw new K.ErrnoError(54)}var me={type:g,opts:y,mountpoint:S,mounts:[]},Ke=g.mount(me);return Ke.mount=me,me.root=Ke,N?K.root=Ke:$&&($.mounted=me,$.mount&&$.mount.mounts.push(me)),Ke},unmount(g){var y=K.lookupPath(g,{follow_mount:!1});if(!K.isMountpoint(y.node))throw new K.ErrnoError(28);var S=y.node,N=S.mounted,R=K.getMounts(N);Object.keys(K.nameTable).forEach(fe=>{for(var me=K.nameTable[fe];me;){var Ke=me.name_next;R.includes(me.mount)&&K.destroyNode(me),me=Ke}}),S.mounted=null;var $=S.mount.mounts.indexOf(N);S.mount.mounts.splice($,1)},lookup(g,y){return g.node_ops.lookup(g,y)},mknod(g,y,S){var N=K.lookupPath(g,{parent:!0}),R=N.node,$=be.basename(g);if(!$||$==="."||$==="..")throw new K.ErrnoError(28);var fe=K.mayCreate(R,$);if(fe)throw new K.ErrnoError(fe);if(!R.node_ops.mknod)throw new K.ErrnoError(63);return R.node_ops.mknod(R,$,y,S)},create(g,y){return y=y!==void 0?y:438,y&=4095,y|=32768,K.mknod(g,y,0)},mkdir(g,y){return y=y!==void 0?y:511,y&=1023,y|=16384,K.mknod(g,y,0)},mkdirTree(g,y){for(var S=g.split("/"),N="",R=0;R<S.length;++R)if(S[R]){N+="/"+S[R];try{K.mkdir(N,y)}catch($){if($.errno!=20)throw $}}},mkdev(g,y,S){return typeof S>"u"&&(S=y,y=438),y|=8192,K.mknod(g,y,S)},symlink(g,y){if(!Ue.resolve(g))throw new K.ErrnoError(44);var S=K.lookupPath(y,{parent:!0}),N=S.node;if(!N)throw new K.ErrnoError(44);var R=be.basename(y),$=K.mayCreate(N,R);if($)throw new K.ErrnoError($);if(!N.node_ops.symlink)throw new K.ErrnoError(63);return N.node_ops.symlink(N,R,g)},rename(g,y){var S=be.dirname(g),N=be.dirname(y),R=be.basename(g),$=be.basename(y),fe,me,Ke;if(fe=K.lookupPath(g,{parent:!0}),me=fe.node,fe=K.lookupPath(y,{parent:!0}),Ke=fe.node,!me||!Ke)throw new K.ErrnoError(44);if(me.mount!==Ke.mount)throw new K.ErrnoError(75);var tt=K.lookupNode(me,R),at=Ue.relative(g,N);if(at.charAt(0)!==".")throw new K.ErrnoError(28);if(at=Ue.relative(y,S),at.charAt(0)!==".")throw new K.ErrnoError(55);var mt;try{mt=K.lookupNode(Ke,$)}catch{}if(tt!==mt){var Be=K.isDir(tt.mode),Oe=K.mayDelete(me,R,Be);if(Oe)throw new K.ErrnoError(Oe);if(Oe=mt?K.mayDelete(Ke,$,Be):K.mayCreate(Ke,$),Oe)throw new K.ErrnoError(Oe);if(!me.node_ops.rename)throw new K.ErrnoError(63);if(K.isMountpoint(tt)||mt&&K.isMountpoint(mt))throw new K.ErrnoError(10);if(Ke!==me&&(Oe=K.nodePermissions(me,"w"),Oe))throw new K.ErrnoError(Oe);K.hashRemoveNode(tt);try{me.node_ops.rename(tt,Ke,$),tt.parent=Ke}catch(et){throw et}finally{K.hashAddNode(tt)}}},rmdir(g){var y=K.lookupPath(g,{parent:!0}),S=y.node,N=be.basename(g),R=K.lookupNode(S,N),$=K.mayDelete(S,N,!0);if($)throw new K.ErrnoError($);if(!S.node_ops.rmdir)throw new K.ErrnoError(63);if(K.isMountpoint(R))throw new K.ErrnoError(10);S.node_ops.rmdir(S,N),K.destroyNode(R)},readdir(g){var y=K.lookupPath(g,{follow:!0}),S=y.node;if(!S.node_ops.readdir)throw new K.ErrnoError(54);return S.node_ops.readdir(S)},unlink(g){var y=K.lookupPath(g,{parent:!0}),S=y.node;if(!S)throw new K.ErrnoError(44);var N=be.basename(g),R=K.lookupNode(S,N),$=K.mayDelete(S,N,!1);if($)throw new K.ErrnoError($);if(!S.node_ops.unlink)throw new K.ErrnoError(63);if(K.isMountpoint(R))throw new K.ErrnoError(10);S.node_ops.unlink(S,N),K.destroyNode(R)},readlink(g){var y=K.lookupPath(g),S=y.node;if(!S)throw new K.ErrnoError(44);if(!S.node_ops.readlink)throw new K.ErrnoError(28);return Ue.resolve(K.getPath(S.parent),S.node_ops.readlink(S))},stat(g,y){var S=K.lookupPath(g,{follow:!y}),N=S.node;if(!N)throw new K.ErrnoError(44);if(!N.node_ops.getattr)throw new K.ErrnoError(63);return N.node_ops.getattr(N)},lstat(g){return K.stat(g,!0)},chmod(g,y,S){var N;if(typeof g=="string"){var R=K.lookupPath(g,{follow:!S});N=R.node}else N=g;if(!N.node_ops.setattr)throw new K.ErrnoError(63);N.node_ops.setattr(N,{mode:y&4095|N.mode&-4096,timestamp:Date.now()})},lchmod(g,y){K.chmod(g,y,!0)},fchmod(g,y){var S=K.getStreamChecked(g);K.chmod(S.node,y)},chown(g,y,S,N){var R;if(typeof g=="string"){var $=K.lookupPath(g,{follow:!N});R=$.node}else R=g;if(!R.node_ops.setattr)throw new K.ErrnoError(63);R.node_ops.setattr(R,{timestamp:Date.now()})},lchown(g,y,S){K.chown(g,y,S,!0)},fchown(g,y,S){var N=K.getStreamChecked(g);K.chown(N.node,y,S)},truncate(g,y){if(y<0)throw new K.ErrnoError(28);var S;if(typeof g=="string"){var N=K.lookupPath(g,{follow:!0});S=N.node}else S=g;if(!S.node_ops.setattr)throw new K.ErrnoError(63);if(K.isDir(S.mode))throw new K.ErrnoError(31);if(!K.isFile(S.mode))throw new K.ErrnoError(28);var R=K.nodePermissions(S,"w");if(R)throw new K.ErrnoError(R);S.node_ops.setattr(S,{size:y,timestamp:Date.now()})},ftruncate(g,y){var S=K.getStreamChecked(g);if(!(S.flags&2097155))throw new K.ErrnoError(28);K.truncate(S.node,y)},utime(g,y,S){var N=K.lookupPath(g,{follow:!0}),R=N.node;R.node_ops.setattr(R,{timestamp:Math.max(y,S)})},open(g,y,S){if(g==="")throw new K.ErrnoError(44);y=typeof y=="string"?cc(y):y,y&64?(S=typeof S>"u"?438:S,S=S&4095|32768):S=0;var N;if(typeof g=="object")N=g;else{g=be.normalize(g);try{var R=K.lookupPath(g,{follow:!(y&131072)});N=R.node}catch{}}var $=!1;if(y&64)if(N){if(y&128)throw new K.ErrnoError(20)}else N=K.mknod(g,S,0),$=!0;if(!N)throw new K.ErrnoError(44);if(K.isChrdev(N.mode)&&(y&=-513),y&65536&&!K.isDir(N.mode))throw new K.ErrnoError(54);if(!$){var fe=K.mayOpen(N,y);if(fe)throw new K.ErrnoError(fe)}y&512&&!$&&K.truncate(N,0),y&=-131713;var me=K.createStream({node:N,path:K.getPath(N),flags:y,seekable:!0,position:0,stream_ops:N.stream_ops,ungotten:[],error:!1});return me.stream_ops.open&&me.stream_ops.open(me),r.logReadFiles&&!(y&1)&&(K.readFiles||(K.readFiles={}),g in K.readFiles||(K.readFiles[g]=1)),me},close(g){if(K.isClosed(g))throw new K.ErrnoError(8);g.getdents&&(g.getdents=null);try{g.stream_ops.close&&g.stream_ops.close(g)}catch(y){throw y}finally{K.closeStream(g.fd)}g.fd=null},isClosed(g){return g.fd===null},llseek(g,y,S){if(K.isClosed(g))throw new K.ErrnoError(8);if(!g.seekable||!g.stream_ops.llseek)throw new K.ErrnoError(70);if(S!=0&&S!=1&&S!=2)throw new K.ErrnoError(28);return g.position=g.stream_ops.llseek(g,y,S),g.ungotten=[],g.position},read(g,y,S,N,R){if(N<0||R<0)throw new K.ErrnoError(28);if(K.isClosed(g))throw new K.ErrnoError(8);if((g.flags&2097155)===1)throw new K.ErrnoError(8);if(K.isDir(g.node.mode))throw new K.ErrnoError(31);if(!g.stream_ops.read)throw new K.ErrnoError(28);var $=typeof R<"u";if(!$)R=g.position;else if(!g.seekable)throw new K.ErrnoError(70);var fe=g.stream_ops.read(g,y,S,N,R);return $||(g.position+=fe),fe},write(g,y,S,N,R,$){if(N<0||R<0)throw new K.ErrnoError(28);if(K.isClosed(g))throw new K.ErrnoError(8);if(!(g.flags&2097155))throw new K.ErrnoError(8);if(K.isDir(g.node.mode))throw new K.ErrnoError(31);if(!g.stream_ops.write)throw new K.ErrnoError(28);g.seekable&&g.flags&1024&&K.llseek(g,0,2);var fe=typeof R<"u";if(!fe)R=g.position;else if(!g.seekable)throw new K.ErrnoError(70);var me=g.stream_ops.write(g,y,S,N,R,$);return fe||(g.position+=me),me},allocate(g,y,S){if(K.isClosed(g))throw new K.ErrnoError(8);if(y<0||S<=0)throw new K.ErrnoError(28);if(!(g.flags&2097155))throw new K.ErrnoError(8);if(!K.isFile(g.node.mode)&&!K.isDir(g.node.mode))throw new K.ErrnoError(43);if(!g.stream_ops.allocate)throw new K.ErrnoError(138);g.stream_ops.allocate(g,y,S)},mmap(g,y,S,N,R){if(N&2&&!(R&2)&&(g.flags&2097155)!==2)throw new K.ErrnoError(2);if((g.flags&2097155)===1)throw new K.ErrnoError(2);if(!g.stream_ops.mmap)throw new K.ErrnoError(43);if(!y)throw new K.ErrnoError(28);return g.stream_ops.mmap(g,y,S,N,R)},msync(g,y,S,N,R){return g.stream_ops.msync?g.stream_ops.msync(g,y,S,N,R):0},ioctl(g,y,S){if(!g.stream_ops.ioctl)throw new K.ErrnoError(59);return g.stream_ops.ioctl(g,y,S)},readFile(g,y={}){if(y.flags=y.flags||0,y.encoding=y.encoding||"binary",y.encoding!=="utf8"&&y.encoding!=="binary")throw new Error(`Invalid encoding type "${y.encoding}"`);var S,N=K.open(g,y.flags),R=K.stat(g),$=R.size,fe=new Uint8Array($);return K.read(N,fe,0,$,0),y.encoding==="utf8"?S=Me(fe,0):y.encoding==="binary"&&(S=fe),K.close(N),S},writeFile(g,y,S={}){S.flags=S.flags||577;var N=K.open(g,S.flags,S.mode);if(typeof y=="string"){var R=new Uint8Array(Qt(y)+1),$=Gt(y,R,0,R.length);K.write(N,R,0,$,void 0,S.canOwn)}else if(ArrayBuffer.isView(y))K.write(N,y,0,y.byteLength,void 0,S.canOwn);else throw new Error("Unsupported data type");K.close(N)},cwd:()=>K.currentPath,chdir(g){var y=K.lookupPath(g,{follow:!0});if(y.node===null)throw new K.ErrnoError(44);if(!K.isDir(y.node.mode))throw new K.ErrnoError(54);var S=K.nodePermissions(y.node,"x");if(S)throw new K.ErrnoError(S);K.currentPath=y.path},createDefaultDirectories(){K.mkdir("/tmp"),K.mkdir("/home"),K.mkdir("/home/web_user")},createDefaultDevices(){K.mkdir("/dev"),K.registerDevice(K.makedev(1,3),{read:()=>0,write:(N,R,$,fe,me)=>fe}),K.mkdev("/dev/null",K.makedev(1,3)),Dn.register(K.makedev(5,0),Dn.default_tty_ops),Dn.register(K.makedev(6,0),Dn.default_tty1_ops),K.mkdev("/dev/tty",K.makedev(5,0)),K.mkdev("/dev/tty1",K.makedev(6,0));var g=new Uint8Array(1024),y=0,S=()=>(y===0&&(y=Ae(g).byteLength),g[--y]);K.createDevice("/dev","random",S),K.createDevice("/dev","urandom",S),K.mkdir("/dev/shm"),K.mkdir("/dev/shm/tmp")},createSpecialDirectories(){K.mkdir("/proc");var g=K.mkdir("/proc/self");K.mkdir("/proc/self/fd"),K.mount({mount(){var y=K.createNode(g,"fd",16895,73);return y.node_ops={lookup(S,N){var R=+N,$=K.getStreamChecked(R),fe={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>$.path}};return fe.parent=fe,fe}},y}},{},"/proc/self/fd")},createStandardStreams(g,y,S){g?K.createDevice("/dev","stdin",g):K.symlink("/dev/tty","/dev/stdin"),y?K.createDevice("/dev","stdout",null,y):K.symlink("/dev/tty","/dev/stdout"),S?K.createDevice("/dev","stderr",null,S):K.symlink("/dev/tty1","/dev/stderr"),K.open("/dev/stdin",0),K.open("/dev/stdout",1),K.open("/dev/stderr",1)},staticInit(){[44].forEach(g=>{K.genericErrors[g]=new K.ErrnoError(g),K.genericErrors[g].stack="<generic error, no stack>"}),K.nameTable=new Array(4096),K.mount(Jt,{},"/"),K.createDefaultDirectories(),K.createDefaultDevices(),K.createSpecialDirectories(),K.filesystems={MEMFS:Jt}},init(g,y,S){K.initialized=!0,g??=r.stdin,y??=r.stdout,S??=r.stderr,K.createStandardStreams(g,y,S)},quit(){K.initialized=!1;for(var g=0;g<K.streams.length;g++){var y=K.streams[g];y&&K.close(y)}},findObject(g,y){var S=K.analyzePath(g,y);return S.exists?S.object:null},analyzePath(g,y){try{var S=K.lookupPath(g,{follow:!y});g=S.path}catch{}var N={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var S=K.lookupPath(g,{parent:!0});N.parentExists=!0,N.parentPath=S.path,N.parentObject=S.node,N.name=be.basename(g),S=K.lookupPath(g,{follow:!y}),N.exists=!0,N.path=S.path,N.object=S.node,N.name=S.node.name,N.isRoot=S.path==="/"}catch(R){N.error=R.errno}return N},createPath(g,y,S,N){g=typeof g=="string"?g:K.getPath(g);for(var R=y.split("/").reverse();R.length;){var $=R.pop();if($){var fe=be.join2(g,$);try{K.mkdir(fe)}catch{}g=fe}}return fe},createFile(g,y,S,N,R){var $=be.join2(typeof g=="string"?g:K.getPath(g),y),fe=Bs(N,R);return K.create($,fe)},createDataFile(g,y,S,N,R,$){var fe=y;g&&(g=typeof g=="string"?g:K.getPath(g),fe=y?be.join2(g,y):g);var me=Bs(N,R),Ke=K.create(fe,me);if(S){if(typeof S=="string"){for(var tt=new Array(S.length),at=0,mt=S.length;at<mt;++at)tt[at]=S.charCodeAt(at);S=tt}K.chmod(Ke,me|146);var Be=K.open(Ke,577);K.write(Be,S,0,S.length,0,$),K.close(Be),K.chmod(Ke,me)}},createDevice(g,y,S,N){var R=be.join2(typeof g=="string"?g:K.getPath(g),y),$=Bs(!!S,!!N);K.createDevice.major||(K.createDevice.major=64);var fe=K.makedev(K.createDevice.major++,0);return K.registerDevice(fe,{open(me){me.seekable=!1},close(me){N?.buffer?.length&&N(10)},read(me,Ke,tt,at,mt){for(var Be=0,Oe=0;Oe<at;Oe++){var et;try{et=S()}catch{throw new K.ErrnoError(29)}if(et===void 0&&Be===0)throw new K.ErrnoError(6);if(et==null)break;Be++,Ke[tt+Oe]=et}return Be&&(me.node.timestamp=Date.now()),Be},write(me,Ke,tt,at,mt){for(var Be=0;Be<at;Be++)try{N(Ke[tt+Be])}catch{throw new K.ErrnoError(29)}return at&&(me.node.timestamp=Date.now()),Be}}),K.mkdev(R,$,fe)},forceLoadFile(g){if(g.isDevice||g.isFolder||g.link||g.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{g.contents=E(g.url),g.usedBytes=g.contents.length}catch{throw new K.ErrnoError(29)}},createLazyFile(g,y,S,N,R){class ${constructor(){this.lengthKnown=!1,this.chunks=[]}get(Oe){if(!(Oe>this.length-1||Oe<0)){var et=Oe%this.chunkSize,ve=Oe/this.chunkSize|0;return this.getter(ve)[et]}}setDataGetter(Oe){this.getter=Oe}cacheLength(){var Oe=new XMLHttpRequest;if(Oe.open("HEAD",S,!1),Oe.send(null),!(Oe.status>=200&&Oe.status<300||Oe.status===304))throw new Error("Couldn't load "+S+". Status: "+Oe.status);var et=Number(Oe.getResponseHeader("Content-length")),ve,ke=(ve=Oe.getResponseHeader("Accept-Ranges"))&&ve==="bytes",Te=(ve=Oe.getResponseHeader("Content-Encoding"))&&ve==="gzip",Ze=1024*1024;ke||(Ze=et);var Ge=(Qe,St)=>{if(Qe>St)throw new Error("invalid range ("+Qe+", "+St+") or no bytes requested!");if(St>et-1)throw new Error("only "+et+" bytes available! programmer error!");var ee=new XMLHttpRequest;if(ee.open("GET",S,!1),et!==Ze&&ee.setRequestHeader("Range","bytes="+Qe+"-"+St),ee.responseType="arraybuffer",ee.overrideMimeType&&ee.overrideMimeType("text/plain; charset=x-user-defined"),ee.send(null),!(ee.status>=200&&ee.status<300||ee.status===304))throw new Error("Couldn't load "+S+". Status: "+ee.status);return ee.response!==void 0?new Uint8Array(ee.response||[]):bn(ee.responseText||"")},Re=this;Re.setDataGetter(Qe=>{var St=Qe*Ze,ee=(Qe+1)*Ze-1;if(ee=Math.min(ee,et-1),typeof Re.chunks[Qe]>"u"&&(Re.chunks[Qe]=Ge(St,ee)),typeof Re.chunks[Qe]>"u")throw new Error("doXHR failed!");return Re.chunks[Qe]}),(Te||!et)&&(Ze=et=1,et=this.getter(0).length,Ze=et,I("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=et,this._chunkSize=Ze,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var fe=new $,me={isDevice:!1,contents:fe}}else var me={isDevice:!1,url:S};var Ke=K.createFile(g,y,me,N,R);me.contents?Ke.contents=me.contents:me.url&&(Ke.contents=null,Ke.url=me.url),Object.defineProperties(Ke,{usedBytes:{get:function(){return this.contents.length}}});var tt={},at=Object.keys(Ke.stream_ops);at.forEach(Be=>{var Oe=Ke.stream_ops[Be];tt[Be]=(...et)=>(K.forceLoadFile(Ke),Oe(...et))});function mt(Be,Oe,et,ve,ke){var Te=Be.node.contents;if(ke>=Te.length)return 0;var Ze=Math.min(Te.length-ke,ve);if(Te.slice)for(var Ge=0;Ge<Ze;Ge++)Oe[et+Ge]=Te[ke+Ge];else for(var Ge=0;Ge<Ze;Ge++)Oe[et+Ge]=Te.get(ke+Ge);return Ze}return tt.read=(Be,Oe,et,ve,ke)=>(K.forceLoadFile(Ke),mt(Be,Oe,et,ve,ke)),tt.mmap=(Be,Oe,et,ve,ke)=>{K.forceLoadFile(Ke);var Te=Sr(Oe);if(!Te)throw new K.ErrnoError(48);return mt(Be,L,Te,Oe,et),{ptr:Te,allocated:!0}},Ke.stream_ops=tt,Ke}},gu=(g,y)=>g?Me(M,g,y):"",dn={DEFAULT_POLLMASK:5,calculateAt(g,y,S){if(be.isAbs(y))return y;var N;if(g===-100)N=K.cwd();else{var R=dn.getStreamFromFD(g);N=R.path}if(y.length==0){if(!S)throw new K.ErrnoError(44);return N}return be.join2(N,y)},doStat(g,y,S){var N=g(y);P[S>>2]=N.dev,P[S+4>>2]=N.mode,O[S+8>>2]=N.nlink,P[S+12>>2]=N.uid,P[S+16>>2]=N.gid,P[S+20>>2]=N.rdev,z[S+24>>3]=BigInt(N.size),P[S+32>>2]=4096,P[S+36>>2]=N.blocks;var R=N.atime.getTime(),$=N.mtime.getTime(),fe=N.ctime.getTime();return z[S+40>>3]=BigInt(Math.floor(R/1e3)),O[S+48>>2]=R%1e3*1e3*1e3,z[S+56>>3]=BigInt(Math.floor($/1e3)),O[S+64>>2]=$%1e3*1e3*1e3,z[S+72>>3]=BigInt(Math.floor(fe/1e3)),O[S+80>>2]=fe%1e3*1e3*1e3,z[S+88>>3]=BigInt(N.ino),0},doMsync(g,y,S,N,R){if(!K.isFile(y.node.mode))throw new K.ErrnoError(43);if(N&2)return 0;var $=M.slice(g,g+S);K.msync(y,$,R,S,N)},getStreamFromFD(g){var y=K.getStreamChecked(g);return y},varargs:void 0,getStr(g){var y=gu(g);return y}};function yu(g,y){try{return g=dn.getStr(g),K.chmod(g,y),0}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function bu(g,y,S,N){try{if(y=dn.getStr(y),y=dn.calculateAt(g,y),S&-8)return-28;var R=K.lookupPath(y,{follow:!0}),$=R.node;if(!$)return-44;var fe="";return S&4&&(fe+="r"),S&2&&(fe+="w"),S&1&&(fe+="x"),fe&&K.nodePermissions($,fe)?-2:0}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function vu(g,y){try{return K.fchmod(g,y),0}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function uc(g,y,S){try{return K.fchown(g,y,S),0}catch(N){if(typeof K>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function ha(){var g=P[+dn.varargs>>2];return dn.varargs+=4,g}var Xi=ha;function dc(g,y,S){dn.varargs=S;try{var N=dn.getStreamFromFD(g);switch(y){case 0:{var R=ha();if(R<0)return-28;for(;K.streams[R];)R++;var $;return $=K.dupStream(N,R),$.fd}case 1:case 2:return 0;case 3:return N.flags;case 4:{var R=ha();return N.flags|=R,0}case 12:{var R=Xi(),fe=0;return W[R+fe>>1]=2,0}case 13:case 14:return 0}return-28}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function ma(g,y){try{var S=dn.getStreamFromFD(g);return dn.doStat(K.stat,S.path,y)}catch(N){if(typeof K>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}var Ef=0x20000000000000,ga=-0x20000000000000,zs=g=>g<ga||g>Ef?NaN:Number(g);function Ya(g,y){y=zs(y);try{return isNaN(y)?61:(K.ftruncate(g,y),0)}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}var Ws=(g,y,S)=>Gt(g,M,y,S);function Nf(g,y){try{if(y===0)return-28;var S=K.cwd(),N=Qt(S)+1;return y<N?-68:(Ws(S,g,y),N)}catch(R){if(typeof K>"u"||R.name!=="ErrnoError")throw R;return-R.errno}}function If(g,y,S){dn.varargs=S;try{var N=dn.getStreamFromFD(g);switch(y){case 21509:return N.tty?0:-59;case 21505:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tcgets){var R=N.tty.ops.ioctl_tcgets(N),$=Xi();P[$>>2]=R.c_iflag||0,P[$+4>>2]=R.c_oflag||0,P[$+8>>2]=R.c_cflag||0,P[$+12>>2]=R.c_lflag||0;for(var fe=0;fe<32;fe++)L[$+fe+17]=R.c_cc[fe]||0;return 0}return 0}case 21510:case 21511:case 21512:return N.tty?0:-59;case 21506:case 21507:case 21508:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tcsets){for(var $=Xi(),me=P[$>>2],Ke=P[$+4>>2],tt=P[$+8>>2],at=P[$+12>>2],mt=[],fe=0;fe<32;fe++)mt.push(L[$+fe+17]);return N.tty.ops.ioctl_tcsets(N.tty,y,{c_iflag:me,c_oflag:Ke,c_cflag:tt,c_lflag:at,c_cc:mt})}return 0}case 21519:{if(!N.tty)return-59;var $=Xi();return P[$>>2]=0,0}case 21520:return N.tty?-28:-59;case 21531:{var $=Xi();return K.ioctl(N,y,$)}case 21523:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tiocgwinsz){var Be=N.tty.ops.ioctl_tiocgwinsz(N.tty),$=Xi();W[$>>1]=Be[0],W[$+2>>1]=Be[1]}return 0}case 21524:return N.tty?0:-59;case 21515:return N.tty?0:-59;default:return-28}}catch(Oe){if(typeof K>"u"||Oe.name!=="ErrnoError")throw Oe;return-Oe.errno}}function xu(g,y){try{return g=dn.getStr(g),dn.doStat(K.lstat,g,y)}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function Vs(g,y,S){try{return y=dn.getStr(y),y=dn.calculateAt(g,y),y=be.normalize(y),y[y.length-1]==="/"&&(y=y.substr(0,y.length-1)),K.mkdir(y,S,0),0}catch(N){if(typeof K>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function wu(g,y,S,N){try{y=dn.getStr(y);var R=N&256,$=N&4096;return N=N&-6401,y=dn.calculateAt(g,y,$),dn.doStat(R?K.lstat:K.stat,y,S)}catch(fe){if(typeof K>"u"||fe.name!=="ErrnoError")throw fe;return-fe.errno}}function _u(g,y,S,N){dn.varargs=N;try{y=dn.getStr(y),y=dn.calculateAt(g,y);var R=N?ha():0;return K.open(y,S,R).fd}catch($){if(typeof K>"u"||$.name!=="ErrnoError")throw $;return-$.errno}}function kf(g,y,S,N){try{if(y=dn.getStr(y),y=dn.calculateAt(g,y),N<=0)return-28;var R=K.readlink(y),$=Math.min(N,Qt(R)),fe=L[S+$];return Ws(R,S,N+1),L[S+$]=fe,$}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function Su(g){try{return g=dn.getStr(g),K.rmdir(g),0}catch(y){if(typeof K>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function Eu(g,y){try{return g=dn.getStr(g),dn.doStat(K.stat,g,y)}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function Nu(g,y,S){try{return y=dn.getStr(y),y=dn.calculateAt(g,y),S===0?K.unlink(y):S===512?K.rmdir(y):ze("Invalid flags passed to unlinkat"),0}catch(N){if(typeof K>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}var fc=g=>O[g>>2]+P[g+4>>2]*0x100000000;function Iu(g,y,S,N){try{y=dn.getStr(y),y=dn.calculateAt(g,y,!0);var R=Date.now(),$,fe;if(!S)$=R,fe=R;else{var me=fc(S),Ke=P[S+8>>2];Ke==0x3fffffff?$=R:Ke==0x3ffffffe?$=-1:$=me*1e3+Ke/(1e3*1e3),S+=16,me=fc(S),Ke=P[S+8>>2],Ke==0x3fffffff?fe=R:Ke==0x3ffffffe?fe=-1:fe=me*1e3+Ke/(1e3*1e3)}return(fe!=-1||$!=-1)&&K.utime(y,$,fe),0}catch(tt){if(typeof K>"u"||tt.name!=="ErrnoError")throw tt;return-tt.errno}}var Cf=1,lr=()=>Cf,Tf=g=>g%4===0&&(g%100!==0||g%400===0),pc=[0,31,60,91,121,152,182,213,244,274,305,335],ku=[0,31,59,90,120,151,181,212,243,273,304,334],Xa=g=>{var y=Tf(g.getFullYear()),S=y?pc:ku,N=S[g.getMonth()]+g.getDate()-1;return N};function Rf(g,y){g=zs(g);var S=new Date(g*1e3);P[y>>2]=S.getSeconds(),P[y+4>>2]=S.getMinutes(),P[y+8>>2]=S.getHours(),P[y+12>>2]=S.getDate(),P[y+16>>2]=S.getMonth(),P[y+20>>2]=S.getFullYear()-1900,P[y+24>>2]=S.getDay();var N=Xa(S)|0;P[y+28>>2]=N,P[y+36>>2]=-(S.getTimezoneOffset()*60);var R=new Date(S.getFullYear(),0,1),$=new Date(S.getFullYear(),6,1).getTimezoneOffset(),fe=R.getTimezoneOffset(),me=($!=fe&&S.getTimezoneOffset()==Math.min(fe,$))|0;P[y+32>>2]=me}function hc(g,y,S,N,R,$,fe){R=zs(R);try{if(isNaN(R))return 61;var me=dn.getStreamFromFD(N),Ke=K.mmap(me,g,R,y,S),tt=Ke.ptr;return P[$>>2]=Ke.allocated,O[fe>>2]=tt,0}catch(at){if(typeof K>"u"||at.name!=="ErrnoError")throw at;return-at.errno}}function el(g,y,S,N,R,$){$=zs($);try{var fe=dn.getStreamFromFD(R);S&2&&dn.doMsync(g,fe,y,N,$)}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}var es=(g,y,S,N)=>{var R=new Date().getFullYear(),$=new Date(R,0,1),fe=new Date(R,6,1),me=$.getTimezoneOffset(),Ke=fe.getTimezoneOffset(),tt=Math.max(me,Ke);O[g>>2]=tt*60,P[y>>2]=+(me!=Ke);var at=Oe=>{var et=Oe>=0?"-":"+",ve=Math.abs(Oe),ke=String(Math.floor(ve/60)).padStart(2,"0"),Te=String(ve%60).padStart(2,"0");return`UTC${et}${ke}${Te}`},mt=at(me),Be=at(Ke);Ke<me?(Ws(mt,S,17),Ws(Be,N,17)):(Ws(mt,N,17),Ws(Be,S,17))},jf=()=>Date.now(),xi;xi=()=>performance.now();var Of=()=>0x80000000,qf=g=>{var y=j.buffer,S=(g-y.byteLength+65535)/65536;try{return j.grow(S),F(),1}catch{}},Af=g=>{var y=M.length;g>>>=0;var S=Of();if(g>S)return!1;for(var N=1;N<=4;N*=2){var R=y*(1+.2/N);R=Math.min(R,g+0x6000000);var $=Math.min(S,Pi(Math.max(g,R),65536)),fe=qf($);if(fe)return!0}return!1},Wo={},tl=()=>h||"./this.program",Fi=()=>{if(!Fi.strings){var g=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",y={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:g,_:tl()};for(var S in Wo)Wo[S]===void 0?delete y[S]:y[S]=Wo[S];var N=[];for(var S in y)N.push(`${S}=${y[S]}`);Fi.strings=N}return Fi.strings},nl=(g,y)=>{for(var S=0;S<g.length;++S)L[y++]=g.charCodeAt(S);L[y]=0},fx=(g,y)=>{var S=0;return Fi().forEach((N,R)=>{var $=y+S;O[g+R*4>>2]=$,nl(N,$),S+=N.length+1}),0},px=(g,y)=>{var S=Fi();O[g>>2]=S.length;var N=0;return S.forEach(R=>N+=R.length+1),O[y>>2]=N,0};function Pf(g){try{var y=dn.getStreamFromFD(g);return K.close(y),0}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return S.errno}}function Fm(g,y){try{var S=0,N=0,R=0,$=dn.getStreamFromFD(g),fe=$.tty?2:K.isDir($.mode)?3:K.isLink($.mode)?7:4;return L[y]=fe,W[y+2>>1]=R,z[y+8>>3]=BigInt(S),z[y+16>>3]=BigInt(N),0}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return me.errno}}var Ff=(g,y,S,N)=>{for(var R=0,$=0;$<S;$++){var fe=O[y>>2],me=O[y+4>>2];y+=8;var Ke=K.read(g,L,fe,me,N);if(Ke<0)return-1;if(R+=Ke,Ke<me)break}return R};function mc(g,y,S,N){try{var R=dn.getStreamFromFD(g),$=Ff(R,y,S);return O[N>>2]=$,0}catch(fe){if(typeof K>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}function hx(g,y,S,N){y=zs(y);try{if(isNaN(y))return 61;var R=dn.getStreamFromFD(g);return K.llseek(R,y,S),z[N>>3]=BigInt(R.position),R.getdents&&y===0&&S===0&&(R.getdents=null),0}catch($){if(typeof K>"u"||$.name!=="ErrnoError")throw $;return $.errno}}function Df(g){try{var y=dn.getStreamFromFD(g);return y.stream_ops?.fsync?y.stream_ops.fsync(y):0}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return S.errno}}var Ln=(g,y,S,N)=>{for(var R=0,$=0;$<S;$++){var fe=O[y>>2],me=O[y+4>>2];y+=8;var Ke=K.write(g,L,fe,me,N);if(Ke<0)return-1;if(R+=Ke,Ke<me)break}return R};function Dm(g,y,S,N){try{var R=dn.getStreamFromFD(g),$=Ln(R,y,S);return O[N>>2]=$,0}catch(fe){if(typeof K>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}K.createPreloadedFile=pa,K.staticInit();var Lf={__syscall_chmod:yu,__syscall_faccessat:bu,__syscall_fchmod:vu,__syscall_fchown32:uc,__syscall_fcntl64:dc,__syscall_fstat64:ma,__syscall_ftruncate64:Ya,__syscall_getcwd:Nf,__syscall_ioctl:If,__syscall_lstat64:xu,__syscall_mkdirat:Vs,__syscall_newfstatat:wu,__syscall_openat:_u,__syscall_readlinkat:kf,__syscall_rmdir:Su,__syscall_stat64:Eu,__syscall_unlinkat:Nu,__syscall_utimensat:Iu,_emscripten_get_now_is_monotonic:lr,_localtime_js:Rf,_mmap_js:hc,_munmap_js:el,_tzset_js:es,emscripten_date_now:jf,emscripten_get_now:xi,emscripten_resize_heap:Af,environ_get:fx,environ_sizes_get:px,fd_close:Pf,fd_fdstat_get:Fm,fd_read:mc,fd_seek:hx,fd_sync:Df,fd_write:Dm,memory:j},he=sn();r._sqlite3_status64=(g,y,S,N)=>(r._sqlite3_status64=he.sqlite3_status64)(g,y,S,N),r._sqlite3_status=(g,y,S,N)=>(r._sqlite3_status=he.sqlite3_status)(g,y,S,N),r._sqlite3_db_status=(g,y,S,N,R)=>(r._sqlite3_db_status=he.sqlite3_db_status)(g,y,S,N,R),r._sqlite3_msize=g=>(r._sqlite3_msize=he.sqlite3_msize)(g),r._sqlite3_vfs_find=g=>(r._sqlite3_vfs_find=he.sqlite3_vfs_find)(g),r._sqlite3_initialize=()=>(r._sqlite3_initialize=he.sqlite3_initialize)(),r._sqlite3_malloc=g=>(r._sqlite3_malloc=he.sqlite3_malloc)(g),r._sqlite3_free=g=>(r._sqlite3_free=he.sqlite3_free)(g),r._sqlite3_vfs_register=(g,y)=>(r._sqlite3_vfs_register=he.sqlite3_vfs_register)(g,y),r._sqlite3_vfs_unregister=g=>(r._sqlite3_vfs_unregister=he.sqlite3_vfs_unregister)(g),r._sqlite3_malloc64=g=>(r._sqlite3_malloc64=he.sqlite3_malloc64)(g),r._sqlite3_realloc=(g,y)=>(r._sqlite3_realloc=he.sqlite3_realloc)(g,y),r._sqlite3_realloc64=(g,y)=>(r._sqlite3_realloc64=he.sqlite3_realloc64)(g,y),r._sqlite3_value_text=g=>(r._sqlite3_value_text=he.sqlite3_value_text)(g),r._sqlite3_randomness=(g,y)=>(r._sqlite3_randomness=he.sqlite3_randomness)(g,y),r._sqlite3_stricmp=(g,y)=>(r._sqlite3_stricmp=he.sqlite3_stricmp)(g,y),r._sqlite3_strnicmp=(g,y,S)=>(r._sqlite3_strnicmp=he.sqlite3_strnicmp)(g,y,S),r._sqlite3_uri_parameter=(g,y)=>(r._sqlite3_uri_parameter=he.sqlite3_uri_parameter)(g,y),r._sqlite3_uri_boolean=(g,y,S)=>(r._sqlite3_uri_boolean=he.sqlite3_uri_boolean)(g,y,S),r._sqlite3_serialize=(g,y,S,N)=>(r._sqlite3_serialize=he.sqlite3_serialize)(g,y,S,N),r._sqlite3_prepare_v2=(g,y,S,N,R)=>(r._sqlite3_prepare_v2=he.sqlite3_prepare_v2)(g,y,S,N,R),r._sqlite3_step=g=>(r._sqlite3_step=he.sqlite3_step)(g),r._sqlite3_column_int64=(g,y)=>(r._sqlite3_column_int64=he.sqlite3_column_int64)(g,y),r._sqlite3_reset=g=>(r._sqlite3_reset=he.sqlite3_reset)(g),r._sqlite3_exec=(g,y,S,N,R)=>(r._sqlite3_exec=he.sqlite3_exec)(g,y,S,N,R),r._sqlite3_column_int=(g,y)=>(r._sqlite3_column_int=he.sqlite3_column_int)(g,y),r._sqlite3_finalize=g=>(r._sqlite3_finalize=he.sqlite3_finalize)(g),r._sqlite3_file_control=(g,y,S,N)=>(r._sqlite3_file_control=he.sqlite3_file_control)(g,y,S,N),r._sqlite3_column_name=(g,y)=>(r._sqlite3_column_name=he.sqlite3_column_name)(g,y),r._sqlite3_column_text=(g,y)=>(r._sqlite3_column_text=he.sqlite3_column_text)(g,y),r._sqlite3_column_type=(g,y)=>(r._sqlite3_column_type=he.sqlite3_column_type)(g,y),r._sqlite3_errmsg=g=>(r._sqlite3_errmsg=he.sqlite3_errmsg)(g),r._sqlite3_deserialize=(g,y,S,N,R,$)=>(r._sqlite3_deserialize=he.sqlite3_deserialize)(g,y,S,N,R,$),r._sqlite3_clear_bindings=g=>(r._sqlite3_clear_bindings=he.sqlite3_clear_bindings)(g),r._sqlite3_value_blob=g=>(r._sqlite3_value_blob=he.sqlite3_value_blob)(g),r._sqlite3_value_bytes=g=>(r._sqlite3_value_bytes=he.sqlite3_value_bytes)(g),r._sqlite3_value_double=g=>(r._sqlite3_value_double=he.sqlite3_value_double)(g),r._sqlite3_value_int=g=>(r._sqlite3_value_int=he.sqlite3_value_int)(g),r._sqlite3_value_int64=g=>(r._sqlite3_value_int64=he.sqlite3_value_int64)(g),r._sqlite3_value_subtype=g=>(r._sqlite3_value_subtype=he.sqlite3_value_subtype)(g),r._sqlite3_value_pointer=(g,y)=>(r._sqlite3_value_pointer=he.sqlite3_value_pointer)(g,y),r._sqlite3_value_type=g=>(r._sqlite3_value_type=he.sqlite3_value_type)(g),r._sqlite3_value_nochange=g=>(r._sqlite3_value_nochange=he.sqlite3_value_nochange)(g),r._sqlite3_value_frombind=g=>(r._sqlite3_value_frombind=he.sqlite3_value_frombind)(g),r._sqlite3_value_dup=g=>(r._sqlite3_value_dup=he.sqlite3_value_dup)(g),r._sqlite3_value_free=g=>(r._sqlite3_value_free=he.sqlite3_value_free)(g),r._sqlite3_result_blob=(g,y,S,N)=>(r._sqlite3_result_blob=he.sqlite3_result_blob)(g,y,S,N),r._sqlite3_result_error_toobig=g=>(r._sqlite3_result_error_toobig=he.sqlite3_result_error_toobig)(g),r._sqlite3_result_error_nomem=g=>(r._sqlite3_result_error_nomem=he.sqlite3_result_error_nomem)(g),r._sqlite3_result_double=(g,y)=>(r._sqlite3_result_double=he.sqlite3_result_double)(g,y),r._sqlite3_result_error=(g,y,S)=>(r._sqlite3_result_error=he.sqlite3_result_error)(g,y,S),r._sqlite3_result_int=(g,y)=>(r._sqlite3_result_int=he.sqlite3_result_int)(g,y),r._sqlite3_result_int64=(g,y)=>(r._sqlite3_result_int64=he.sqlite3_result_int64)(g,y),r._sqlite3_result_null=g=>(r._sqlite3_result_null=he.sqlite3_result_null)(g),r._sqlite3_result_pointer=(g,y,S,N)=>(r._sqlite3_result_pointer=he.sqlite3_result_pointer)(g,y,S,N),r._sqlite3_result_subtype=(g,y)=>(r._sqlite3_result_subtype=he.sqlite3_result_subtype)(g,y),r._sqlite3_result_text=(g,y,S,N)=>(r._sqlite3_result_text=he.sqlite3_result_text)(g,y,S,N),r._sqlite3_result_zeroblob=(g,y)=>(r._sqlite3_result_zeroblob=he.sqlite3_result_zeroblob)(g,y),r._sqlite3_result_zeroblob64=(g,y)=>(r._sqlite3_result_zeroblob64=he.sqlite3_result_zeroblob64)(g,y),r._sqlite3_result_error_code=(g,y)=>(r._sqlite3_result_error_code=he.sqlite3_result_error_code)(g,y),r._sqlite3_user_data=g=>(r._sqlite3_user_data=he.sqlite3_user_data)(g),r._sqlite3_context_db_handle=g=>(r._sqlite3_context_db_handle=he.sqlite3_context_db_handle)(g),r._sqlite3_vtab_nochange=g=>(r._sqlite3_vtab_nochange=he.sqlite3_vtab_nochange)(g),r._sqlite3_vtab_in_first=(g,y)=>(r._sqlite3_vtab_in_first=he.sqlite3_vtab_in_first)(g,y),r._sqlite3_vtab_in_next=(g,y)=>(r._sqlite3_vtab_in_next=he.sqlite3_vtab_in_next)(g,y),r._sqlite3_aggregate_context=(g,y)=>(r._sqlite3_aggregate_context=he.sqlite3_aggregate_context)(g,y),r._sqlite3_get_auxdata=(g,y)=>(r._sqlite3_get_auxdata=he.sqlite3_get_auxdata)(g,y),r._sqlite3_set_auxdata=(g,y,S,N)=>(r._sqlite3_set_auxdata=he.sqlite3_set_auxdata)(g,y,S,N),r._sqlite3_column_count=g=>(r._sqlite3_column_count=he.sqlite3_column_count)(g),r._sqlite3_data_count=g=>(r._sqlite3_data_count=he.sqlite3_data_count)(g),r._sqlite3_column_blob=(g,y)=>(r._sqlite3_column_blob=he.sqlite3_column_blob)(g,y),r._sqlite3_column_bytes=(g,y)=>(r._sqlite3_column_bytes=he.sqlite3_column_bytes)(g,y),r._sqlite3_column_double=(g,y)=>(r._sqlite3_column_double=he.sqlite3_column_double)(g,y),r._sqlite3_column_value=(g,y)=>(r._sqlite3_column_value=he.sqlite3_column_value)(g,y),r._sqlite3_column_decltype=(g,y)=>(r._sqlite3_column_decltype=he.sqlite3_column_decltype)(g,y),r._sqlite3_bind_blob=(g,y,S,N,R)=>(r._sqlite3_bind_blob=he.sqlite3_bind_blob)(g,y,S,N,R),r._sqlite3_bind_double=(g,y,S)=>(r._sqlite3_bind_double=he.sqlite3_bind_double)(g,y,S),r._sqlite3_bind_int=(g,y,S)=>(r._sqlite3_bind_int=he.sqlite3_bind_int)(g,y,S),r._sqlite3_bind_int64=(g,y,S)=>(r._sqlite3_bind_int64=he.sqlite3_bind_int64)(g,y,S),r._sqlite3_bind_null=(g,y)=>(r._sqlite3_bind_null=he.sqlite3_bind_null)(g,y),r._sqlite3_bind_pointer=(g,y,S,N,R)=>(r._sqlite3_bind_pointer=he.sqlite3_bind_pointer)(g,y,S,N,R),r._sqlite3_bind_text=(g,y,S,N,R)=>(r._sqlite3_bind_text=he.sqlite3_bind_text)(g,y,S,N,R),r._sqlite3_bind_parameter_count=g=>(r._sqlite3_bind_parameter_count=he.sqlite3_bind_parameter_count)(g),r._sqlite3_bind_parameter_name=(g,y)=>(r._sqlite3_bind_parameter_name=he.sqlite3_bind_parameter_name)(g,y),r._sqlite3_bind_parameter_index=(g,y)=>(r._sqlite3_bind_parameter_index=he.sqlite3_bind_parameter_index)(g,y),r._sqlite3_db_handle=g=>(r._sqlite3_db_handle=he.sqlite3_db_handle)(g),r._sqlite3_stmt_readonly=g=>(r._sqlite3_stmt_readonly=he.sqlite3_stmt_readonly)(g),r._sqlite3_stmt_isexplain=g=>(r._sqlite3_stmt_isexplain=he.sqlite3_stmt_isexplain)(g),r._sqlite3_stmt_explain=(g,y)=>(r._sqlite3_stmt_explain=he.sqlite3_stmt_explain)(g,y),r._sqlite3_stmt_busy=g=>(r._sqlite3_stmt_busy=he.sqlite3_stmt_busy)(g),r._sqlite3_stmt_status=(g,y,S)=>(r._sqlite3_stmt_status=he.sqlite3_stmt_status)(g,y,S),r._sqlite3_sql=g=>(r._sqlite3_sql=he.sqlite3_sql)(g),r._sqlite3_expanded_sql=g=>(r._sqlite3_expanded_sql=he.sqlite3_expanded_sql)(g),r._sqlite3_preupdate_old=(g,y,S)=>(r._sqlite3_preupdate_old=he.sqlite3_preupdate_old)(g,y,S),r._sqlite3_preupdate_count=g=>(r._sqlite3_preupdate_count=he.sqlite3_preupdate_count)(g),r._sqlite3_preupdate_depth=g=>(r._sqlite3_preupdate_depth=he.sqlite3_preupdate_depth)(g),r._sqlite3_preupdate_blobwrite=g=>(r._sqlite3_preupdate_blobwrite=he.sqlite3_preupdate_blobwrite)(g),r._sqlite3_preupdate_new=(g,y,S)=>(r._sqlite3_preupdate_new=he.sqlite3_preupdate_new)(g,y,S),r._sqlite3_value_numeric_type=g=>(r._sqlite3_value_numeric_type=he.sqlite3_value_numeric_type)(g),r._sqlite3_set_authorizer=(g,y,S)=>(r._sqlite3_set_authorizer=he.sqlite3_set_authorizer)(g,y,S),r._sqlite3_strglob=(g,y)=>(r._sqlite3_strglob=he.sqlite3_strglob)(g,y),r._sqlite3_strlike=(g,y,S)=>(r._sqlite3_strlike=he.sqlite3_strlike)(g,y,S),r._sqlite3_auto_extension=g=>(r._sqlite3_auto_extension=he.sqlite3_auto_extension)(g),r._sqlite3_cancel_auto_extension=g=>(r._sqlite3_cancel_auto_extension=he.sqlite3_cancel_auto_extension)(g),r._sqlite3_reset_auto_extension=()=>(r._sqlite3_reset_auto_extension=he.sqlite3_reset_auto_extension)(),r._sqlite3_prepare_v3=(g,y,S,N,R,$)=>(r._sqlite3_prepare_v3=he.sqlite3_prepare_v3)(g,y,S,N,R,$),r._sqlite3_create_module=(g,y,S,N)=>(r._sqlite3_create_module=he.sqlite3_create_module)(g,y,S,N),r._sqlite3_create_module_v2=(g,y,S,N,R)=>(r._sqlite3_create_module_v2=he.sqlite3_create_module_v2)(g,y,S,N,R),r._sqlite3_drop_modules=(g,y)=>(r._sqlite3_drop_modules=he.sqlite3_drop_modules)(g,y),r._sqlite3_declare_vtab=(g,y)=>(r._sqlite3_declare_vtab=he.sqlite3_declare_vtab)(g,y),r._sqlite3_vtab_on_conflict=g=>(r._sqlite3_vtab_on_conflict=he.sqlite3_vtab_on_conflict)(g),r._sqlite3_vtab_collation=(g,y)=>(r._sqlite3_vtab_collation=he.sqlite3_vtab_collation)(g,y),r._sqlite3_vtab_in=(g,y,S)=>(r._sqlite3_vtab_in=he.sqlite3_vtab_in)(g,y,S),r._sqlite3_vtab_rhs_value=(g,y,S)=>(r._sqlite3_vtab_rhs_value=he.sqlite3_vtab_rhs_value)(g,y,S),r._sqlite3_vtab_distinct=g=>(r._sqlite3_vtab_distinct=he.sqlite3_vtab_distinct)(g),r._sqlite3_keyword_name=(g,y,S)=>(r._sqlite3_keyword_name=he.sqlite3_keyword_name)(g,y,S),r._sqlite3_keyword_count=()=>(r._sqlite3_keyword_count=he.sqlite3_keyword_count)(),r._sqlite3_keyword_check=(g,y)=>(r._sqlite3_keyword_check=he.sqlite3_keyword_check)(g,y),r._sqlite3_complete=g=>(r._sqlite3_complete=he.sqlite3_complete)(g),r._sqlite3_libversion=()=>(r._sqlite3_libversion=he.sqlite3_libversion)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=he.sqlite3_libversion_number)(),r._sqlite3_shutdown=()=>(r._sqlite3_shutdown=he.sqlite3_shutdown)(),r._sqlite3_last_insert_rowid=g=>(r._sqlite3_last_insert_rowid=he.sqlite3_last_insert_rowid)(g),r._sqlite3_set_last_insert_rowid=(g,y)=>(r._sqlite3_set_last_insert_rowid=he.sqlite3_set_last_insert_rowid)(g,y),r._sqlite3_changes64=g=>(r._sqlite3_changes64=he.sqlite3_changes64)(g),r._sqlite3_changes=g=>(r._sqlite3_changes=he.sqlite3_changes)(g),r._sqlite3_total_changes64=g=>(r._sqlite3_total_changes64=he.sqlite3_total_changes64)(g),r._sqlite3_total_changes=g=>(r._sqlite3_total_changes=he.sqlite3_total_changes)(g),r._sqlite3_txn_state=(g,y)=>(r._sqlite3_txn_state=he.sqlite3_txn_state)(g,y),r._sqlite3_close_v2=g=>(r._sqlite3_close_v2=he.sqlite3_close_v2)(g),r._sqlite3_busy_handler=(g,y,S)=>(r._sqlite3_busy_handler=he.sqlite3_busy_handler)(g,y,S),r._sqlite3_progress_handler=(g,y,S,N)=>(r._sqlite3_progress_handler=he.sqlite3_progress_handler)(g,y,S,N),r._sqlite3_busy_timeout=(g,y)=>(r._sqlite3_busy_timeout=he.sqlite3_busy_timeout)(g,y),r._sqlite3_interrupt=g=>(r._sqlite3_interrupt=he.sqlite3_interrupt)(g),r._sqlite3_is_interrupted=g=>(r._sqlite3_is_interrupted=he.sqlite3_is_interrupted)(g),r._sqlite3_create_function=(g,y,S,N,R,$,fe,me)=>(r._sqlite3_create_function=he.sqlite3_create_function)(g,y,S,N,R,$,fe,me),r._sqlite3_create_function_v2=(g,y,S,N,R,$,fe,me,Ke)=>(r._sqlite3_create_function_v2=he.sqlite3_create_function_v2)(g,y,S,N,R,$,fe,me,Ke),r._sqlite3_create_window_function=(g,y,S,N,R,$,fe,me,Ke,tt)=>(r._sqlite3_create_window_function=he.sqlite3_create_window_function)(g,y,S,N,R,$,fe,me,Ke,tt),r._sqlite3_overload_function=(g,y,S)=>(r._sqlite3_overload_function=he.sqlite3_overload_function)(g,y,S),r._sqlite3_trace_v2=(g,y,S,N)=>(r._sqlite3_trace_v2=he.sqlite3_trace_v2)(g,y,S,N),r._sqlite3_commit_hook=(g,y,S)=>(r._sqlite3_commit_hook=he.sqlite3_commit_hook)(g,y,S),r._sqlite3_update_hook=(g,y,S)=>(r._sqlite3_update_hook=he.sqlite3_update_hook)(g,y,S),r._sqlite3_rollback_hook=(g,y,S)=>(r._sqlite3_rollback_hook=he.sqlite3_rollback_hook)(g,y,S),r._sqlite3_preupdate_hook=(g,y,S)=>(r._sqlite3_preupdate_hook=he.sqlite3_preupdate_hook)(g,y,S),r._sqlite3_error_offset=g=>(r._sqlite3_error_offset=he.sqlite3_error_offset)(g),r._sqlite3_errcode=g=>(r._sqlite3_errcode=he.sqlite3_errcode)(g),r._sqlite3_extended_errcode=g=>(r._sqlite3_extended_errcode=he.sqlite3_extended_errcode)(g),r._sqlite3_errstr=g=>(r._sqlite3_errstr=he.sqlite3_errstr)(g),r._sqlite3_limit=(g,y,S)=>(r._sqlite3_limit=he.sqlite3_limit)(g,y,S),r._sqlite3_open=(g,y)=>(r._sqlite3_open=he.sqlite3_open)(g,y),r._sqlite3_open_v2=(g,y,S,N)=>(r._sqlite3_open_v2=he.sqlite3_open_v2)(g,y,S,N),r._sqlite3_create_collation=(g,y,S,N,R)=>(r._sqlite3_create_collation=he.sqlite3_create_collation)(g,y,S,N,R),r._sqlite3_create_collation_v2=(g,y,S,N,R,$)=>(r._sqlite3_create_collation_v2=he.sqlite3_create_collation_v2)(g,y,S,N,R,$),r._sqlite3_collation_needed=(g,y,S)=>(r._sqlite3_collation_needed=he.sqlite3_collation_needed)(g,y,S),r._sqlite3_get_autocommit=g=>(r._sqlite3_get_autocommit=he.sqlite3_get_autocommit)(g),r._sqlite3_table_column_metadata=(g,y,S,N,R,$,fe,me,Ke)=>(r._sqlite3_table_column_metadata=he.sqlite3_table_column_metadata)(g,y,S,N,R,$,fe,me,Ke),r._sqlite3_extended_result_codes=(g,y)=>(r._sqlite3_extended_result_codes=he.sqlite3_extended_result_codes)(g,y),r._sqlite3_uri_key=(g,y)=>(r._sqlite3_uri_key=he.sqlite3_uri_key)(g,y),r._sqlite3_uri_int64=(g,y,S)=>(r._sqlite3_uri_int64=he.sqlite3_uri_int64)(g,y,S),r._sqlite3_db_name=(g,y)=>(r._sqlite3_db_name=he.sqlite3_db_name)(g,y),r._sqlite3_db_filename=(g,y)=>(r._sqlite3_db_filename=he.sqlite3_db_filename)(g,y),r._sqlite3_db_readonly=(g,y)=>(r._sqlite3_db_readonly=he.sqlite3_db_readonly)(g,y),r._sqlite3_compileoption_used=g=>(r._sqlite3_compileoption_used=he.sqlite3_compileoption_used)(g),r._sqlite3_compileoption_get=g=>(r._sqlite3_compileoption_get=he.sqlite3_compileoption_get)(g),r._sqlite3session_diff=(g,y,S,N)=>(r._sqlite3session_diff=he.sqlite3session_diff)(g,y,S,N),r._sqlite3session_attach=(g,y)=>(r._sqlite3session_attach=he.sqlite3session_attach)(g,y),r._sqlite3session_create=(g,y,S)=>(r._sqlite3session_create=he.sqlite3session_create)(g,y,S),r._sqlite3session_delete=g=>(r._sqlite3session_delete=he.sqlite3session_delete)(g),r._sqlite3session_table_filter=(g,y,S)=>(r._sqlite3session_table_filter=he.sqlite3session_table_filter)(g,y,S),r._sqlite3session_changeset=(g,y,S)=>(r._sqlite3session_changeset=he.sqlite3session_changeset)(g,y,S),r._sqlite3session_changeset_strm=(g,y,S)=>(r._sqlite3session_changeset_strm=he.sqlite3session_changeset_strm)(g,y,S),r._sqlite3session_patchset_strm=(g,y,S)=>(r._sqlite3session_patchset_strm=he.sqlite3session_patchset_strm)(g,y,S),r._sqlite3session_patchset=(g,y,S)=>(r._sqlite3session_patchset=he.sqlite3session_patchset)(g,y,S),r._sqlite3session_enable=(g,y)=>(r._sqlite3session_enable=he.sqlite3session_enable)(g,y),r._sqlite3session_indirect=(g,y)=>(r._sqlite3session_indirect=he.sqlite3session_indirect)(g,y),r._sqlite3session_isempty=g=>(r._sqlite3session_isempty=he.sqlite3session_isempty)(g),r._sqlite3session_memory_used=g=>(r._sqlite3session_memory_used=he.sqlite3session_memory_used)(g),r._sqlite3session_object_config=(g,y,S)=>(r._sqlite3session_object_config=he.sqlite3session_object_config)(g,y,S),r._sqlite3session_changeset_size=g=>(r._sqlite3session_changeset_size=he.sqlite3session_changeset_size)(g),r._sqlite3changeset_start=(g,y,S)=>(r._sqlite3changeset_start=he.sqlite3changeset_start)(g,y,S),r._sqlite3changeset_start_v2=(g,y,S,N)=>(r._sqlite3changeset_start_v2=he.sqlite3changeset_start_v2)(g,y,S,N),r._sqlite3changeset_start_strm=(g,y,S)=>(r._sqlite3changeset_start_strm=he.sqlite3changeset_start_strm)(g,y,S),r._sqlite3changeset_start_v2_strm=(g,y,S,N)=>(r._sqlite3changeset_start_v2_strm=he.sqlite3changeset_start_v2_strm)(g,y,S,N),r._sqlite3changeset_next=g=>(r._sqlite3changeset_next=he.sqlite3changeset_next)(g),r._sqlite3changeset_op=(g,y,S,N,R)=>(r._sqlite3changeset_op=he.sqlite3changeset_op)(g,y,S,N,R),r._sqlite3changeset_pk=(g,y,S)=>(r._sqlite3changeset_pk=he.sqlite3changeset_pk)(g,y,S),r._sqlite3changeset_old=(g,y,S)=>(r._sqlite3changeset_old=he.sqlite3changeset_old)(g,y,S),r._sqlite3changeset_new=(g,y,S)=>(r._sqlite3changeset_new=he.sqlite3changeset_new)(g,y,S),r._sqlite3changeset_conflict=(g,y,S)=>(r._sqlite3changeset_conflict=he.sqlite3changeset_conflict)(g,y,S),r._sqlite3changeset_fk_conflicts=(g,y)=>(r._sqlite3changeset_fk_conflicts=he.sqlite3changeset_fk_conflicts)(g,y),r._sqlite3changeset_finalize=g=>(r._sqlite3changeset_finalize=he.sqlite3changeset_finalize)(g),r._sqlite3changeset_invert=(g,y,S,N)=>(r._sqlite3changeset_invert=he.sqlite3changeset_invert)(g,y,S,N),r._sqlite3changeset_invert_strm=(g,y,S,N)=>(r._sqlite3changeset_invert_strm=he.sqlite3changeset_invert_strm)(g,y,S,N),r._sqlite3changeset_apply_v2=(g,y,S,N,R,$,fe,me,Ke)=>(r._sqlite3changeset_apply_v2=he.sqlite3changeset_apply_v2)(g,y,S,N,R,$,fe,me,Ke),r._sqlite3changeset_apply=(g,y,S,N,R,$)=>(r._sqlite3changeset_apply=he.sqlite3changeset_apply)(g,y,S,N,R,$),r._sqlite3changeset_apply_v2_strm=(g,y,S,N,R,$,fe,me,Ke)=>(r._sqlite3changeset_apply_v2_strm=he.sqlite3changeset_apply_v2_strm)(g,y,S,N,R,$,fe,me,Ke),r._sqlite3changeset_apply_strm=(g,y,S,N,R,$)=>(r._sqlite3changeset_apply_strm=he.sqlite3changeset_apply_strm)(g,y,S,N,R,$),r._sqlite3changegroup_new=g=>(r._sqlite3changegroup_new=he.sqlite3changegroup_new)(g),r._sqlite3changegroup_add=(g,y,S)=>(r._sqlite3changegroup_add=he.sqlite3changegroup_add)(g,y,S),r._sqlite3changegroup_output=(g,y,S)=>(r._sqlite3changegroup_output=he.sqlite3changegroup_output)(g,y,S),r._sqlite3changegroup_add_strm=(g,y,S)=>(r._sqlite3changegroup_add_strm=he.sqlite3changegroup_add_strm)(g,y,S),r._sqlite3changegroup_output_strm=(g,y,S)=>(r._sqlite3changegroup_output_strm=he.sqlite3changegroup_output_strm)(g,y,S),r._sqlite3changegroup_delete=g=>(r._sqlite3changegroup_delete=he.sqlite3changegroup_delete)(g),r._sqlite3changeset_concat=(g,y,S,N,R,$)=>(r._sqlite3changeset_concat=he.sqlite3changeset_concat)(g,y,S,N,R,$),r._sqlite3changeset_concat_strm=(g,y,S,N,R,$)=>(r._sqlite3changeset_concat_strm=he.sqlite3changeset_concat_strm)(g,y,S,N,R,$),r._sqlite3session_config=(g,y)=>(r._sqlite3session_config=he.sqlite3session_config)(g,y),r._sqlite3_sourceid=()=>(r._sqlite3_sourceid=he.sqlite3_sourceid)(),r._sqlite3__wasm_pstack_ptr=()=>(r._sqlite3__wasm_pstack_ptr=he.sqlite3__wasm_pstack_ptr)(),r._sqlite3__wasm_pstack_restore=g=>(r._sqlite3__wasm_pstack_restore=he.sqlite3__wasm_pstack_restore)(g),r._sqlite3__wasm_pstack_alloc=g=>(r._sqlite3__wasm_pstack_alloc=he.sqlite3__wasm_pstack_alloc)(g),r._sqlite3__wasm_pstack_remaining=()=>(r._sqlite3__wasm_pstack_remaining=he.sqlite3__wasm_pstack_remaining)(),r._sqlite3__wasm_pstack_quota=()=>(r._sqlite3__wasm_pstack_quota=he.sqlite3__wasm_pstack_quota)(),r._sqlite3__wasm_db_error=(g,y,S)=>(r._sqlite3__wasm_db_error=he.sqlite3__wasm_db_error)(g,y,S),r._sqlite3__wasm_test_struct=g=>(r._sqlite3__wasm_test_struct=he.sqlite3__wasm_test_struct)(g),r._sqlite3__wasm_enum_json=()=>(r._sqlite3__wasm_enum_json=he.sqlite3__wasm_enum_json)(),r._sqlite3__wasm_vfs_unlink=(g,y)=>(r._sqlite3__wasm_vfs_unlink=he.sqlite3__wasm_vfs_unlink)(g,y),r._sqlite3__wasm_db_vfs=(g,y)=>(r._sqlite3__wasm_db_vfs=he.sqlite3__wasm_db_vfs)(g,y),r._sqlite3__wasm_db_reset=g=>(r._sqlite3__wasm_db_reset=he.sqlite3__wasm_db_reset)(g),r._sqlite3__wasm_db_export_chunked=(g,y)=>(r._sqlite3__wasm_db_export_chunked=he.sqlite3__wasm_db_export_chunked)(g,y),r._sqlite3__wasm_db_serialize=(g,y,S,N,R)=>(r._sqlite3__wasm_db_serialize=he.sqlite3__wasm_db_serialize)(g,y,S,N,R),r._sqlite3__wasm_vfs_create_file=(g,y,S,N)=>(r._sqlite3__wasm_vfs_create_file=he.sqlite3__wasm_vfs_create_file)(g,y,S,N),r._sqlite3__wasm_posix_create_file=(g,y,S)=>(r._sqlite3__wasm_posix_create_file=he.sqlite3__wasm_posix_create_file)(g,y,S),r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(g,y)=>(r._sqlite3__wasm_kvvfsMakeKeyOnPstack=he.sqlite3__wasm_kvvfsMakeKeyOnPstack)(g,y),r._sqlite3__wasm_kvvfs_methods=()=>(r._sqlite3__wasm_kvvfs_methods=he.sqlite3__wasm_kvvfs_methods)(),r._sqlite3__wasm_vtab_config=(g,y,S)=>(r._sqlite3__wasm_vtab_config=he.sqlite3__wasm_vtab_config)(g,y,S),r._sqlite3__wasm_db_config_ip=(g,y,S,N)=>(r._sqlite3__wasm_db_config_ip=he.sqlite3__wasm_db_config_ip)(g,y,S,N),r._sqlite3__wasm_db_config_pii=(g,y,S,N,R)=>(r._sqlite3__wasm_db_config_pii=he.sqlite3__wasm_db_config_pii)(g,y,S,N,R),r._sqlite3__wasm_db_config_s=(g,y,S)=>(r._sqlite3__wasm_db_config_s=he.sqlite3__wasm_db_config_s)(g,y,S),r._sqlite3__wasm_config_i=(g,y)=>(r._sqlite3__wasm_config_i=he.sqlite3__wasm_config_i)(g,y),r._sqlite3__wasm_config_ii=(g,y,S)=>(r._sqlite3__wasm_config_ii=he.sqlite3__wasm_config_ii)(g,y,S),r._sqlite3__wasm_config_j=(g,y)=>(r._sqlite3__wasm_config_j=he.sqlite3__wasm_config_j)(g,y),r._sqlite3__wasm_qfmt_token=(g,y)=>(r._sqlite3__wasm_qfmt_token=he.sqlite3__wasm_qfmt_token)(g,y),r._sqlite3__wasm_init_wasmfs=g=>(r._sqlite3__wasm_init_wasmfs=he.sqlite3__wasm_init_wasmfs)(g),r._sqlite3__wasm_test_intptr=g=>(r._sqlite3__wasm_test_intptr=he.sqlite3__wasm_test_intptr)(g),r._sqlite3__wasm_test_voidptr=g=>(r._sqlite3__wasm_test_voidptr=he.sqlite3__wasm_test_voidptr)(g),r._sqlite3__wasm_test_int64_max=()=>(r._sqlite3__wasm_test_int64_max=he.sqlite3__wasm_test_int64_max)(),r._sqlite3__wasm_test_int64_min=()=>(r._sqlite3__wasm_test_int64_min=he.sqlite3__wasm_test_int64_min)(),r._sqlite3__wasm_test_int64_times2=g=>(r._sqlite3__wasm_test_int64_times2=he.sqlite3__wasm_test_int64_times2)(g),r._sqlite3__wasm_test_int64_minmax=(g,y)=>(r._sqlite3__wasm_test_int64_minmax=he.sqlite3__wasm_test_int64_minmax)(g,y),r._sqlite3__wasm_test_int64ptr=g=>(r._sqlite3__wasm_test_int64ptr=he.sqlite3__wasm_test_int64ptr)(g),r._sqlite3__wasm_test_stack_overflow=g=>(r._sqlite3__wasm_test_stack_overflow=he.sqlite3__wasm_test_stack_overflow)(g),r._sqlite3__wasm_test_str_hello=g=>(r._sqlite3__wasm_test_str_hello=he.sqlite3__wasm_test_str_hello)(g),r._sqlite3__wasm_SQLTester_strglob=(g,y)=>(r._sqlite3__wasm_SQLTester_strglob=he.sqlite3__wasm_SQLTester_strglob)(g,y),r._malloc=g=>(r._malloc=he.malloc)(g),r._free=g=>(r._free=he.free)(g),r._realloc=(g,y)=>(r._realloc=he.realloc)(g,y);var Mf=(g,y)=>(Mf=he.emscripten_builtin_memalign)(g,y);r.wasmMemory=j;var gc;de=function g(){gc||$f(),gc||(de=g)};function $f(){if(ue>0||(Z(),ue>0))return;function g(){gc||(gc=!0,r.calledRun=!0,!q&&(le(),i(r),r.onRuntimeInitialized?.(),ie()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),g()},1)):g()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return $f(),r.postRun||(r.postRun=[]),r.postRun.push(function(g){if(globalThis.sqlite3ApiBootstrap=function y(S=globalThis.sqlite3ApiConfig||y.defaultConfig){if(y.sqlite3)return(y.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),y.sqlite3;const N=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof g<"u"&&g.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},S||{});Object.assign(N,{allocExportName:N.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:N.useStdAlloc?"free":"sqlite3_free",reallocExportName:N.useStdAlloc?"realloc":"sqlite3_realloc"},N),["exports","memory","wasmfsOpfsDir"].forEach(Q=>{typeof N[Q]=="function"&&(N[Q]=N[Q]())}),delete globalThis.sqlite3ApiConfig,delete y.defaultConfig;const R=Object.create(null),$=Object.create(null),fe=Q=>R.sqlite3_js_rc_str&&R.sqlite3_js_rc_str(Q)||"Unknown result code #"+Q,me=Q=>typeof Q=="number"&&Q===(Q|0);class Ke extends Error{constructor(...re){let se;if(re.length)if(me(re[0]))if(se=re[0],re.length===1)super(fe(re[0]));else{const Le=fe(se);typeof re[1]=="object"?super(Le,re[1]):(re[0]=Le+":",super(re.join(" ")))}else re.length===2&&typeof re[1]=="object"?super(...re):super(re.join(" "));this.resultCode=se||R.SQLITE_ERROR,this.name="SQLite3Error"}}Ke.toss=(...Q)=>{throw new Ke(...Q)};const tt=Ke.toss;N.wasmfsOpfsDir&&!/^\/[^/]+$/.test(N.wasmfsOpfsDir)&&tt("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const at=Q=>typeof Q!="bigint"&&Q===(Q|0)&&Q<=0x7fffffff&&Q>=-0x80000000,mt=function Q(re){return Q._max||(Q._max=BigInt("0x7fffffffffffffff"),Q._min=~Q._max),re>=Q._min&&re<=Q._max},Be=Q=>Q>=-2147483647n-1n&&Q<=2147483647n,Oe=function Q(re){return Q._min||(Q._min=Number.MIN_SAFE_INTEGER,Q._max=Number.MAX_SAFE_INTEGER),re>=Q._min&&re<=Q._max},et=Q=>Q&&Q.constructor&&at(Q.constructor.BYTES_PER_ELEMENT)?Q:!1,ve=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ke=Q=>Q.buffer instanceof ve,Te=(Q,re,se)=>ke(Q)?Q.slice(re,se):Q.subarray(re,se),Ze=Q=>Q&&(Q instanceof Uint8Array||Q instanceof Int8Array||Q instanceof ArrayBuffer),Ge=Q=>Q&&(Q instanceof Uint8Array||Q instanceof Int8Array||Q instanceof ArrayBuffer),Re=Q=>Ze(Q)||tt("Value is not of a supported TypedArray type."),Qe=new TextDecoder("utf-8"),St=function(Q,re,se){return Qe.decode(Te(Q,re,se))},ee=function(Q){return Ge(Q)?St(Q instanceof ArrayBuffer?new Uint8Array(Q):Q):Array.isArray(Q)?Q.join(""):($.isPtr(Q)&&(Q=$.cstrToJs(Q)),Q)};class ce extends Error{constructor(...re){re.length===2&&typeof re[1]=="object"?super(...re):re.length?super(re.join(" ")):super("Allocation failed."),this.resultCode=R.SQLITE_NOMEM,this.name="WasmAllocError"}}ce.toss=(...Q)=>{throw new ce(...Q)},Object.assign(R,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(Q,re,se,Le,it,qt,Wt,Zt,lt)=>{},sqlite3_create_function:(Q,re,se,Le,it,qt,Wt,Zt)=>{},sqlite3_create_window_function:(Q,re,se,Le,it,qt,Wt,Zt,lt,_e)=>{},sqlite3_prepare_v3:(Q,re,se,Le,it,qt)=>{},sqlite3_prepare_v2:(Q,re,se,Le,it)=>{},sqlite3_exec:(Q,re,se,Le,it)=>{},sqlite3_randomness:(Q,re)=>{}});const Ee={affirmBindableTypedArray:Re,flexibleString:ee,bigIntFits32:Be,bigIntFits64:mt,bigIntFitsDouble:Oe,isBindableTypedArray:Ze,isInt32:at,isSQLableTypedArray:Ge,isTypedArray:et,typedArrayToString:St,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:ke,toss:function(...Q){throw new Error(Q.join(" "))},toss3:tt,typedArrayPart:Te,affirmDbHeader:function(Q){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q));const re="SQLite format 3";re.length>Q.byteLength&&tt("Input does not contain an SQLite3 database header.");for(let se=0;se<re.length;++se)re.charCodeAt(se)!==Q[se]&&tt("Input does not contain an SQLite3 database header.")},affirmIsDb:function(Q){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q));const re=Q.byteLength;(re<512||re%512!==0)&&tt("Byte array size",re,"is invalid for an SQLite3 db."),Ee.affirmDbHeader(Q)}};Object.assign($,{ptrSizeof:N.wasmPtrSizeof||4,ptrIR:N.wasmPtrIR||"i32",bigIntEnabled:!!N.bigIntEnabled,exports:N.exports||tt("Missing API config.exports (WASM module exports)."),memory:N.memory||N.exports.memory||tt("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),$.allocFromTypedArray=function(Q){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q)),Re(Q);const re=$.alloc(Q.byteLength||1);return $.heapForSize(Q.constructor).set(Q.byteLength?Q:[0],re),re};{const Q=N.allocExportName,re=N.deallocExportName,se=N.reallocExportName;for(const Le of[Q,re,se])$.exports[Le]instanceof Function||tt("Missing required exports[",Le,"] function.");$.alloc=function Le(it){return Le.impl(it)||ce.toss("Failed to allocate",it," bytes.")},$.alloc.impl=$.exports[Q],$.realloc=function Le(it,qt){const Wt=Le.impl(it,qt);return qt?Wt||ce.toss("Failed to reallocate",qt," bytes."):0},$.realloc.impl=$.exports[se],$.dealloc=$.exports[re]}$.compileOptionUsed=function Q(re){if(arguments.length){if(Array.isArray(re)){const se={};return re.forEach(Le=>{se[Le]=R.sqlite3_compileoption_used(Le)}),se}else if(typeof re=="object")return Object.keys(re).forEach(se=>{re[se]=R.sqlite3_compileoption_used(se)}),re}else{if(Q._result)return Q._result;Q._opt||(Q._rx=/^([^=]+)=(.+)/,Q._rxInt=/^-?\d+$/,Q._opt=function(Wt,Zt){const lt=Q._rx.exec(Wt);Zt[0]=lt?lt[1]:Wt,Zt[1]=lt?Q._rxInt.test(lt[2])?+lt[2]:lt[2]:!0});const se={},Le=[0,0];let it=0,qt;for(;qt=R.sqlite3_compileoption_get(it++);)Q._opt(qt,Le),se[Le[0]]=Le[1];return Q._result=se}return typeof re=="string"?!!R.sqlite3_compileoption_used(re):!1},$.pstack=Object.assign(Object.create(null),{restore:$.exports.sqlite3__wasm_pstack_restore,alloc:function(Q){return typeof Q=="string"&&!(Q=$.sizeofIR(Q))&&ce.toss("Invalid value for pstack.alloc(",arguments[0],")"),$.exports.sqlite3__wasm_pstack_alloc(Q)||ce.toss("Could not allocate",Q,"bytes from the pstack.")},allocChunks:function(Q,re){typeof re=="string"&&!(re=$.sizeofIR(re))&&ce.toss("Invalid size value for allocChunks(",arguments[1],")");const se=$.pstack.alloc(Q*re),Le=[];let it=0,qt=0;for(;it<Q;++it,qt+=re)Le.push(se+qt);return Le},allocPtr:(Q=1,re=!0)=>Q===1?$.pstack.alloc(re?8:$.ptrSizeof):$.pstack.allocChunks(Q,re?8:$.ptrSizeof),call:function(Q){const re=$.pstack.pointer;try{return Q(pe)}finally{$.pstack.restore(re)}}}),Object.defineProperties($.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:$.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:$.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:$.exports.sqlite3__wasm_pstack_remaining}}),R.sqlite3_randomness=(...Q)=>{if(Q.length===1&&Ee.isTypedArray(Q[0])&&Q[0].BYTES_PER_ELEMENT===1){const re=Q[0];if(re.byteLength===0)return $.exports.sqlite3_randomness(0,0),re;const se=$.pstack.pointer;try{let Le=re.byteLength,it=0;const qt=$.exports.sqlite3_randomness,Wt=$.heap8u(),Zt=Le<512?Le:512,lt=$.pstack.alloc(Zt);do{const _e=Le>Zt?Zt:Le;qt(_e,lt),re.set(Te(Wt,lt,lt+_e),it),Le-=_e,it+=_e}while(Le>0)}catch(Le){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",Le)}finally{$.pstack.restore(se)}return re}$.exports.sqlite3_randomness(...Q)};let st;if(R.sqlite3_wasmfs_opfs_dir=function(){if(st!==void 0)return st;const Q=N.wasmfsOpfsDir;if(!Q||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return st="";try{return Q&&$.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],Q)===0?st=Q:st=""}catch{return st=""}},R.sqlite3_wasmfs_filename_is_persistent=function(Q){const re=R.sqlite3_wasmfs_opfs_dir();return re&&Q?Q.startsWith(re+"/"):!1},R.sqlite3_js_db_uses_vfs=function(Q,re,se=0){try{const Le=R.sqlite3_vfs_find(re);return Le?Q?Le===R.sqlite3_js_db_vfs(Q,se)?Le:!1:Le===R.sqlite3_vfs_find(0)?Le:!1:!1}catch{return!1}},R.sqlite3_js_vfs_list=function(){const Q=[];let re=R.sqlite3_vfs_find(0);for(;re;){const se=new R.sqlite3_vfs(re);Q.push($.cstrToJs(se.$zName)),re=se.$pNext,se.dispose()}return Q},R.sqlite3_js_db_export=function(Q,re=0){Q=$.xWrap.testConvertArg("sqlite3*",Q),Q||tt("Invalid sqlite3* argument."),$.bigIntEnabled||tt("BigInt64 support is not enabled.");const se=$.scopedAllocPush();let Le;try{const it=$.scopedAlloc(8+$.ptrSizeof),qt=it+8,Wt=re?$.isPtr(re)?re:$.scopedAllocCString(""+re):0;let Zt=$.exports.sqlite3__wasm_db_serialize(Q,Wt,qt,it,0);Zt&&tt("Database serialization failed with code",pe.capi.sqlite3_js_rc_str(Zt)),Le=$.peekPtr(qt);const lt=$.peek(it,"i64");return Zt=lt?$.heap8u().slice(Le,Le+Number(lt)):new Uint8Array,Zt}finally{Le&&$.exports.sqlite3_free(Le),$.scopedAllocPop(se)}},R.sqlite3_js_db_vfs=(Q,re=0)=>Ee.sqlite3__wasm_db_vfs(Q,re),R.sqlite3_js_aggregate_context=(Q,re)=>R.sqlite3_aggregate_context(Q,re)||(re?ce.toss("Cannot allocate",re,"bytes for sqlite3_aggregate_context()"):0),R.sqlite3_js_posix_create_file=function(Q,re,se){let Le;re&&$.isPtr(re)?Le=re:re instanceof ArrayBuffer||re instanceof Uint8Array?(Le=$.allocFromTypedArray(re),(arguments.length<3||!Ee.isInt32(se)||se<0)&&(se=re.byteLength)):Ke.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!Ee.isInt32(se)||se<0)&&Ke.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const it=Ee.sqlite3__wasm_posix_create_file(Q,Le,se);it&&Ke.toss("Creation of file failed with sqlite3 result code",R.sqlite3_js_rc_str(it))}finally{$.dealloc(Le)}},R.sqlite3_js_vfs_create_file=function(Q,re,se,Le){N.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let it;se?($.isPtr(se)?it=se:se instanceof ArrayBuffer&&(se=new Uint8Array(se)),se instanceof Uint8Array?(it=$.allocFromTypedArray(se),(arguments.length<4||!Ee.isInt32(Le)||Le<0)&&(Le=se.byteLength)):Ke.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):it=0,(!Ee.isInt32(Le)||Le<0)&&($.dealloc(it),Ke.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const qt=Ee.sqlite3__wasm_vfs_create_file(Q,re,it,Le);qt&&Ke.toss("Creation of file failed with sqlite3 result code",R.sqlite3_js_rc_str(qt))}finally{$.dealloc(it)}},R.sqlite3_js_sql_to_string=Q=>{if(typeof Q=="string")return Q;const re=ee(v);return re===v?void 0:re},Ee.isUIThread()){const Q=function(re){const se=Object.create(null);return se.prefix="kvvfs-"+re,se.stores=[],(re==="session"||re==="")&&se.stores.push(globalThis.sessionStorage),(re==="local"||re==="")&&se.stores.push(globalThis.localStorage),se};R.sqlite3_js_kvvfs_clear=function(re=""){let se=0;const Le=Q(re);return Le.stores.forEach(it=>{const qt=[];let Wt;for(Wt=0;Wt<it.length;++Wt){const Zt=it.key(Wt);Zt.startsWith(Le.prefix)&&qt.push(Zt)}qt.forEach(Zt=>it.removeItem(Zt)),se+=qt.length}),se},R.sqlite3_js_kvvfs_size=function(re=""){let se=0;const Le=Q(re);return Le.stores.forEach(it=>{let qt;for(qt=0;qt<it.length;++qt){const Wt=it.key(qt);Wt.startsWith(Le.prefix)&&(se+=Wt.length,se+=it.getItem(Wt).length)}}),se*2}}R.sqlite3_db_config=function(Q,re,...se){switch(this.s||(this.s=$.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=$.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=$.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),re){case R.SQLITE_DBCONFIG_ENABLE_FKEY:case R.SQLITE_DBCONFIG_ENABLE_TRIGGER:case R.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case R.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case R.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case R.SQLITE_DBCONFIG_ENABLE_QPSG:case R.SQLITE_DBCONFIG_TRIGGER_EQP:case R.SQLITE_DBCONFIG_RESET_DATABASE:case R.SQLITE_DBCONFIG_DEFENSIVE:case R.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case R.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case R.SQLITE_DBCONFIG_DQS_DML:case R.SQLITE_DBCONFIG_DQS_DDL:case R.SQLITE_DBCONFIG_ENABLE_VIEW:case R.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case R.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case R.SQLITE_DBCONFIG_STMT_SCANSTATUS:case R.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(Q,re,se[0],se[1]||0);case R.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(Q,re,se[0],se[1],se[2]);case R.SQLITE_DBCONFIG_MAINDBNAME:return this.s(Q,re,se[0]);default:return R.SQLITE_MISUSE}}.bind(Object.create(null)),R.sqlite3_value_to_js=function(Q,re=!0){let se;const Le=R.sqlite3_value_type(Q);switch(Le){case R.SQLITE_INTEGER:$.bigIntEnabled?(se=R.sqlite3_value_int64(Q),Ee.bigIntFitsDouble(se)&&(se=Number(se))):se=R.sqlite3_value_double(Q);break;case R.SQLITE_FLOAT:se=R.sqlite3_value_double(Q);break;case R.SQLITE_TEXT:se=R.sqlite3_value_text(Q);break;case R.SQLITE_BLOB:{const it=R.sqlite3_value_bytes(Q),qt=R.sqlite3_value_blob(Q);it&&!qt&&pe.WasmAllocError.toss("Cannot allocate memory for blob argument of",it,"byte(s)"),se=it?$.heap8u().slice(qt,qt+Number(it)):null;break}case R.SQLITE_NULL:se=null;break;default:re&&tt(R.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",Le),se=void 0}return se},R.sqlite3_values_to_js=function(Q,re,se=!0){let Le;const it=[];for(Le=0;Le<Q;++Le)it.push(R.sqlite3_value_to_js($.peekPtr(re+$.ptrSizeof*Le),se));return it},R.sqlite3_result_error_js=function(Q,re){re instanceof ce?R.sqlite3_result_error_nomem(Q):R.sqlite3_result_error(Q,""+re,-1)},R.sqlite3_result_js=function(Q,re){if(re instanceof Error){R.sqlite3_result_error_js(Q,re);return}try{switch(typeof re){case"undefined":break;case"boolean":R.sqlite3_result_int(Q,re?1:0);break;case"bigint":Ee.bigIntFits32(re)?R.sqlite3_result_int(Q,Number(re)):Ee.bigIntFitsDouble(re)?R.sqlite3_result_double(Q,Number(re)):$.bigIntEnabled?Ee.bigIntFits64(re)?R.sqlite3_result_int64(Q,re):tt("BigInt value",re.toString(),"is too BigInt for int64."):tt("BigInt value",re.toString(),"is too BigInt.");break;case"number":{let se;Ee.isInt32(re)?se=R.sqlite3_result_int:$.bigIntEnabled&&Number.isInteger(re)&&Ee.bigIntFits64(BigInt(re))?se=R.sqlite3_result_int64:se=R.sqlite3_result_double,se(Q,re);break}case"string":{const[se,Le]=$.allocCString(re,!0);R.sqlite3_result_text(Q,se,Le,R.SQLITE_WASM_DEALLOC);break}case"object":if(re===null){R.sqlite3_result_null(Q);break}else if(Ee.isBindableTypedArray(re)){const se=$.allocFromTypedArray(re);R.sqlite3_result_blob(Q,se,re.byteLength,R.SQLITE_WASM_DEALLOC);break}default:tt("Don't not how to handle this UDF result value:",typeof re,re)}}catch(se){R.sqlite3_result_error_js(Q,se)}},R.sqlite3_column_js=function(Q,re,se=!0){const Le=R.sqlite3_column_value(Q,re);return Le===0?void 0:R.sqlite3_value_to_js(Le,se)};const ae=function(Q,re,se){se=R[se],this.ptr?$.pokePtr(this.ptr,0):this.ptr=$.allocPtr();const Le=se(Q,re,this.ptr);if(Le)return Ke.toss(Le,arguments[2]+"() failed with code "+Le);const it=$.peekPtr(this.ptr);return it?R.sqlite3_value_to_js(it,!0):void 0}.bind(Object.create(null));R.sqlite3_preupdate_new_js=(Q,re)=>ae(Q,re,"sqlite3_preupdate_new"),R.sqlite3_preupdate_old_js=(Q,re)=>ae(Q,re,"sqlite3_preupdate_old"),R.sqlite3changeset_new_js=(Q,re)=>ae(Q,re,"sqlite3changeset_new"),R.sqlite3changeset_old_js=(Q,re)=>ae(Q,re,"sqlite3changeset_old");const pe={WasmAllocError:ce,SQLite3Error:Ke,capi:R,util:Ee,wasm:$,config:N,version:Object.create(null),client:void 0,asyncPostInit:async function Q(){if(Q.isReady instanceof Promise)return Q.isReady;let re=y.initializersAsync;delete y.initializersAsync;const se=async()=>(pe.__isUnderTest||(delete pe.util,delete pe.StructBinder),pe),Le=qt=>{throw N.error("an async sqlite3 initializer failed:",qt),qt};if(!re||!re.length)return Q.isReady=se().catch(Le);re=re.map(qt=>qt instanceof Function?async Wt=>qt(pe):qt),re.push(se);let it=Promise.resolve(pe);for(;re.length;)it=it.then(re.shift());return Q.isReady=it.catch(Le)},scriptInfo:void 0};try{y.initializers.forEach(Q=>{Q(pe)})}catch(Q){throw console.error("sqlite3 bootstrap initializer threw:",Q),Q}return delete y.initializers,y.sqlite3=pe,pe},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(y){y.bigIntEnabled===void 0&&(y.bigIntEnabled=!!globalThis.BigInt64Array);const S=(...ee)=>{throw new Error(ee.join(" "))};y.exports||Object.defineProperty(y,"exports",{enumerable:!0,configurable:!0,get:()=>y.instance&&y.instance.exports});const N=y.pointerIR||"i32",R=y.ptrSizeof=N==="i32"?4:N==="i64"?8:S("Unhandled ptrSizeof:",N),$=Object.create(null);$.heapSize=0,$.memory=null,$.freeFuncIndexes=[],$.scopedAlloc=[],$.utf8Decoder=new TextDecoder,$.utf8Encoder=new TextEncoder("utf-8"),y.sizeofIR=ee=>{switch(ee){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return R;default:return(""+ee).endsWith("*")?R:void 0}};const fe=function(){if(!$.memory)$.memory=y.memory instanceof WebAssembly.Memory?y.memory:y.exports.memory;else if($.heapSize===$.memory.buffer.byteLength)return $;const ee=$.memory.buffer;return $.HEAP8=new Int8Array(ee),$.HEAP8U=new Uint8Array(ee),$.HEAP16=new Int16Array(ee),$.HEAP16U=new Uint16Array(ee),$.HEAP32=new Int32Array(ee),$.HEAP32U=new Uint32Array(ee),y.bigIntEnabled&&($.HEAP64=new BigInt64Array(ee),$.HEAP64U=new BigUint64Array(ee)),$.HEAP32F=new Float32Array(ee),$.HEAP64F=new Float64Array(ee),$.heapSize=ee.byteLength,$};y.heap8=()=>fe().HEAP8,y.heap8u=()=>fe().HEAP8U,y.heap16=()=>fe().HEAP16,y.heap16u=()=>fe().HEAP16U,y.heap32=()=>fe().HEAP32,y.heap32u=()=>fe().HEAP32U,y.heapForSize=function(ee,ce=!0){const Ee=$.memory&&$.heapSize===$.memory.buffer.byteLength?$:fe();switch(ee){case Int8Array:return Ee.HEAP8;case Uint8Array:return Ee.HEAP8U;case Int16Array:return Ee.HEAP16;case Uint16Array:return Ee.HEAP16U;case Int32Array:return Ee.HEAP32;case Uint32Array:return Ee.HEAP32U;case 8:return ce?Ee.HEAP8U:Ee.HEAP8;case 16:return ce?Ee.HEAP16U:Ee.HEAP16;case 32:return ce?Ee.HEAP32U:Ee.HEAP32;case 64:if(Ee.HEAP64)return ce?Ee.HEAP64U:Ee.HEAP64;break;default:if(y.bigIntEnabled){if(ee===globalThis.BigUint64Array)return Ee.HEAP64U;if(ee===globalThis.BigInt64Array)return Ee.HEAP64;break}}S("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},y.functionTable=function(){return y.exports.__indirect_function_table},y.functionEntry=function(ee){const ce=y.functionTable();return ee<ce.length?ce.get(ee):void 0},y.jsFuncToWasm=function ee(ce,Ee){if(ee._||(ee._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(pe,Q,re){re<128?pe[Q](re):pe[Q](re%128|128,re>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(pe){const Q=ee._.rxJSig.exec(pe);return Q?Q[2]:pe.substr(1)},letterType:pe=>ee._.sigTypes[pe]||S("Invalid signature letter:",pe),pushSigType:(pe,Q)=>pe.push(ee._.typeCodes[ee._.letterType(Q)])}),typeof ce=="string"){const pe=Ee;Ee=ce,ce=pe}const st=ee._.sigParams(Ee),ae=[1,96];ee._.uleb128Encode(ae,"push",st.length);for(const pe of st)ee._.pushSigType(ae,pe);return Ee[0]==="v"?ae.push(0):(ae.push(1),ee._.pushSigType(ae,Ee[0])),ee._.uleb128Encode(ae,"unshift",ae.length),ae.unshift(0,97,115,109,1,0,0,0,1),ae.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(ae)),{e:{f:ce}}).exports.f};const me=function(ce,Ee,st){if(st&&!$.scopedAlloc.length&&S("No scopedAllocPush() scope is active."),typeof ce=="string"){const re=Ee;Ee=ce,ce=re}(typeof Ee!="string"||!(ce instanceof Function))&&S("Invalid arguments: expecting (function,signature) or (signature,function).");const ae=y.functionTable(),pe=ae.length;let Q;for(;$.freeFuncIndexes.length&&(Q=$.freeFuncIndexes.pop(),ae.get(Q));){Q=null;continue}Q||(Q=pe,ae.grow(1));try{return ae.set(Q,ce),st&&$.scopedAlloc[$.scopedAlloc.length-1].push(Q),Q}catch(re){if(!(re instanceof TypeError))throw Q===pe&&$.freeFuncIndexes.push(pe),re}try{const re=y.jsFuncToWasm(ce,Ee);ae.set(Q,re),st&&$.scopedAlloc[$.scopedAlloc.length-1].push(Q)}catch(re){throw Q===pe&&$.freeFuncIndexes.push(pe),re}return Q};y.installFunction=(ee,ce)=>me(ee,ce,!1),y.scopedInstallFunction=(ee,ce)=>me(ee,ce,!0),y.uninstallFunction=function(ee){if(!ee&&ee!==0)return;const ce=$.freeFuncIndexes,Ee=y.functionTable();ce.push(ee);const st=Ee.get(ee);return Ee.set(ee,null),st},y.peek=function(ce,Ee="i8"){Ee.endsWith("*")&&(Ee=N);const st=$.memory&&$.heapSize===$.memory.buffer.byteLength?$:fe(),ae=Array.isArray(ce)?[]:void 0;let pe;do{switch(ae&&(ce=arguments[0].shift()),Ee){case"i1":case"i8":pe=st.HEAP8[ce>>0];break;case"i16":pe=st.HEAP16[ce>>1];break;case"i32":pe=st.HEAP32[ce>>2];break;case"float":case"f32":pe=st.HEAP32F[ce>>2];break;case"double":case"f64":pe=Number(st.HEAP64F[ce>>3]);break;case"i64":if(y.bigIntEnabled){pe=BigInt(st.HEAP64[ce>>3]);break}default:S("Invalid type for peek():",Ee)}ae&&ae.push(pe)}while(ae&&arguments[0].length);return ae||pe},y.poke=function(ee,ce,Ee="i8"){Ee.endsWith("*")&&(Ee=N);const st=$.memory&&$.heapSize===$.memory.buffer.byteLength?$:fe();for(const ae of Array.isArray(ee)?ee:[ee])switch(Ee){case"i1":case"i8":st.HEAP8[ae>>0]=ce;continue;case"i16":st.HEAP16[ae>>1]=ce;continue;case"i32":st.HEAP32[ae>>2]=ce;continue;case"float":case"f32":st.HEAP32F[ae>>2]=ce;continue;case"double":case"f64":st.HEAP64F[ae>>3]=ce;continue;case"i64":if(st.HEAP64){st.HEAP64[ae>>3]=BigInt(ce);continue}default:S("Invalid type for poke(): "+Ee)}return this},y.peekPtr=(...ee)=>y.peek(ee.length===1?ee[0]:ee,N),y.pokePtr=(ee,ce=0)=>y.poke(ee,ce,N),y.peek8=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"i8"),y.poke8=(ee,ce)=>y.poke(ee,ce,"i8"),y.peek16=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"i16"),y.poke16=(ee,ce)=>y.poke(ee,ce,"i16"),y.peek32=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"i32"),y.poke32=(ee,ce)=>y.poke(ee,ce,"i32"),y.peek64=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"i64"),y.poke64=(ee,ce)=>y.poke(ee,ce,"i64"),y.peek32f=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"f32"),y.poke32f=(ee,ce)=>y.poke(ee,ce,"f32"),y.peek64f=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"f64"),y.poke64f=(ee,ce)=>y.poke(ee,ce,"f64"),y.getMemValue=y.peek,y.getPtrValue=y.peekPtr,y.setMemValue=y.poke,y.setPtrValue=y.pokePtr,y.isPtr32=ee=>typeof ee=="number"&&ee===(ee|0)&&ee>=0,y.isPtr=y.isPtr32,y.cstrlen=function(ee){if(!ee||!y.isPtr(ee))return null;const ce=fe().HEAP8U;let Ee=ee;for(;ce[Ee]!==0;++Ee);return Ee-ee};const Ke=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,tt=function(ee,ce,Ee){return $.utf8Decoder.decode(ee.buffer instanceof Ke?ee.slice(ce,Ee):ee.subarray(ce,Ee))};y.cstrToJs=function(ee){const ce=y.cstrlen(ee);return ce?tt(fe().HEAP8U,ee,ee+ce):ce===null?ce:""},y.jstrlen=function(ee){if(typeof ee!="string")return null;const ce=ee.length;let Ee=0;for(let st=0;st<ce;++st){let ae=ee.charCodeAt(st);ae>=55296&&ae<=57343&&(ae=65536+((ae&1023)<<10)|ee.charCodeAt(++st)&1023),ae<=127?++Ee:ae<=2047?Ee+=2:ae<=65535?Ee+=3:Ee+=4}return Ee},y.jstrcpy=function(ee,ce,Ee=0,st=-1,ae=!0){if((!ce||!(ce instanceof Int8Array)&&!(ce instanceof Uint8Array))&&S("jstrcpy() target must be an Int8Array or Uint8Array."),st<0&&(st=ce.length-Ee),!(st>0)||!(Ee>=0))return 0;let pe=0,Q=ee.length;const re=Ee,se=Ee+st-(ae?1:0);for(;pe<Q&&Ee<se;++pe){let Le=ee.charCodeAt(pe);if(Le>=55296&&Le<=57343&&(Le=65536+((Le&1023)<<10)|ee.charCodeAt(++pe)&1023),Le<=127){if(Ee>=se)break;ce[Ee++]=Le}else if(Le<=2047){if(Ee+1>=se)break;ce[Ee++]=192|Le>>6,ce[Ee++]=128|Le&63}else if(Le<=65535){if(Ee+2>=se)break;ce[Ee++]=224|Le>>12,ce[Ee++]=128|Le>>6&63,ce[Ee++]=128|Le&63}else{if(Ee+3>=se)break;ce[Ee++]=240|Le>>18,ce[Ee++]=128|Le>>12&63,ce[Ee++]=128|Le>>6&63,ce[Ee++]=128|Le&63}}return ae&&(ce[Ee++]=0),Ee-re},y.cstrncpy=function(ee,ce,Ee){if((!ee||!ce)&&S("cstrncpy() does not accept NULL strings."),Ee<0)Ee=y.cstrlen(strPtr)+1;else if(!(Ee>0))return 0;const st=y.heap8u();let ae=0,pe;for(;ae<Ee&&(pe=st[ce+ae]);++ae)st[ee+ae]=pe;return ae<Ee&&(st[ee+ae++]=0),ae},y.jstrToUintArray=(ee,ce=!1)=>$.utf8Encoder.encode(ce?ee+"\0":ee);const at=(ee,ce)=>{(!(ee.alloc instanceof Function)||!(ee.dealloc instanceof Function))&&S("Object is missing alloc() and/or dealloc() function(s)","required by",ce+"().")},mt=function(ee,ce,Ee,st){if(at(y,st),typeof ee!="string")return null;{const ae=$.utf8Encoder.encode(ee),pe=Ee(ae.length+1),Q=fe().HEAP8U;return Q.set(ae,pe),Q[pe+ae.length]=0,ce?[pe,ae.length]:pe}};y.allocCString=(ee,ce=!1)=>mt(ee,ce,y.alloc,"allocCString()"),y.scopedAllocPush=function(){at(y,"scopedAllocPush");const ee=[];return $.scopedAlloc.push(ee),ee},y.scopedAllocPop=function(ee){at(y,"scopedAllocPop");const ce=arguments.length?$.scopedAlloc.indexOf(ee):$.scopedAlloc.length-1;ce<0&&S("Invalid state object for scopedAllocPop()."),arguments.length===0&&(ee=$.scopedAlloc[ce]),$.scopedAlloc.splice(ce,1);for(let Ee;Ee=ee.pop();)y.functionEntry(Ee)?y.uninstallFunction(Ee):y.dealloc(Ee)},y.scopedAlloc=function(ee){$.scopedAlloc.length||S("No scopedAllocPush() scope is active.");const ce=y.alloc(ee);return $.scopedAlloc[$.scopedAlloc.length-1].push(ce),ce},Object.defineProperty(y.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>$.scopedAlloc.length,set:()=>S("The 'active' property is read-only.")}),y.scopedAllocCString=(ee,ce=!1)=>mt(ee,ce,y.scopedAlloc,"scopedAllocCString()");const Be=function(ee,ce){const Ee=y[ee?"scopedAlloc":"alloc"]((ce.length+1)*y.ptrSizeof);let st=0;return ce.forEach(ae=>{y.pokePtr(Ee+y.ptrSizeof*st++,y[ee?"scopedAllocCString":"allocCString"](""+ae))}),y.pokePtr(Ee+y.ptrSizeof*st,0),Ee};y.scopedAllocMainArgv=ee=>Be(!0,ee),y.allocMainArgv=ee=>Be(!1,ee),y.cArgvToJs=(ee,ce)=>{const Ee=[];for(let st=0;st<ee;++st){const ae=y.peekPtr(ce+y.ptrSizeof*st);Ee.push(ae?y.cstrToJs(ae):null)}return Ee},y.scopedAllocCall=function(ee){y.scopedAllocPush();try{return ee()}finally{y.scopedAllocPop()}};const Oe=function(ee,ce,Ee){at(y,Ee);const st=ce?"i64":N;let ae=y[Ee](ee*(ce?8:R));if(y.poke(ae,0,st),ee===1)return ae;const pe=[ae];for(let Q=1;Q<ee;++Q)ae+=ce?8:R,pe[Q]=ae,y.poke(ae,0,st);return pe};y.allocPtr=(ee=1,ce=!0)=>Oe(ee,ce,"alloc"),y.scopedAllocPtr=(ee=1,ce=!0)=>Oe(ee,ce,"scopedAlloc"),y.xGet=function(ee){return y.exports[ee]||S("Cannot find exported symbol:",ee)};const et=(ee,ce)=>S(ee+"() requires",ce,"argument(s).");y.xCall=function(ee,...ce){const Ee=ee instanceof Function?ee:y.xGet(ee);return Ee instanceof Function||S("Exported symbol",ee,"is not a function."),Ee.length!==ce.length&&et(Ee===ee?Ee.name:ee,Ee.length),arguments.length===2&&Array.isArray(arguments[1])?Ee.apply(null,arguments[1]):Ee.apply(null,ce)},$.xWrap=Object.create(null),$.xWrap.convert=Object.create(null),$.xWrap.convert.arg=new Map,$.xWrap.convert.result=new Map;const ve=$.xWrap.convert.arg,ke=$.xWrap.convert.result;y.bigIntEnabled&&ve.set("i64",ee=>BigInt(ee));const Te=N==="i32"?ee=>ee|0:ee=>BigInt(ee)|BigInt(0);ve.set("i32",Te).set("i16",ee=>(ee|0)&65535).set("i8",ee=>(ee|0)&255).set("f32",ee=>Number(ee).valueOf()).set("float",ve.get("f32")).set("f64",ve.get("f32")).set("double",ve.get("f64")).set("int",ve.get("i32")).set("null",ee=>ee).set(null,ve.get("null")).set("**",Te).set("*",Te),ke.set("*",Te).set("pointer",Te).set("number",ee=>Number(ee)).set("void",ee=>{}).set("null",ee=>ee).set(null,ke.get("null"));{const ee=["i8","i16","i32","int","f32","float","f64","double"];y.bigIntEnabled&&ee.push("i64");const ce=ve.get(N);for(const Ee of ee)ve.set(Ee+"*",ce),ke.set(Ee+"*",ce),ke.set(Ee,ve.get(Ee)||S("Missing arg converter:",Ee))}const Ze=function(ee){return typeof ee=="string"?y.scopedAllocCString(ee):ee?Te(ee):null};ve.set("string",Ze).set("utf8",Ze).set("pointer",Ze),ke.set("string",ee=>y.cstrToJs(ee)).set("utf8",ke.get("string")).set("string:dealloc",ee=>{try{return ee?y.cstrToJs(ee):null}finally{y.dealloc(ee)}}).set("utf8:dealloc",ke.get("string:dealloc")).set("json",ee=>JSON.parse(y.cstrToJs(ee))).set("json:dealloc",ee=>{try{return ee?JSON.parse(y.cstrToJs(ee)):null}finally{y.dealloc(ee)}});const Ge=class{constructor(ee){this.name=ee.name||"unnamed adapter"}convertArg(ee,ce,Ee){S("AbstractArgAdapter must be subclassed.")}};ve.FuncPtrAdapter=class Aa extends Ge{constructor(ce){super(ce),ve.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",ce),this.name=ce.name||"unnamed",this.signature=ce.signature,ce.contextKey instanceof Function&&(this.contextKey=ce.contextKey,ce.bindScope||(ce.bindScope="context")),this.bindScope=ce.bindScope||S("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Aa.bindScopes.indexOf(ce.bindScope)<0&&S("Invalid options.bindScope ("+ce.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Aa.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=ce.callProxy instanceof Function?ce.callProxy:void 0}contextKey(ce,Ee){return this}contextMap(ce){const Ee=this.__cmap||(this.__cmap=new Map);let st=Ee.get(ce);return st===void 0&&Ee.set(ce,st=[]),st}convertArg(ce,Ee,st){let ae=this.singleton;if(!ae&&this.isContext&&(ae=this.contextMap(this.contextKey(Ee,st))),ae&&ae[0]===ce)return ae[1];if(ce instanceof Function){this.callProxy&&(ce=this.callProxy(ce));const pe=me(ce,this.signature,this.isTransient);if(Aa.debugFuncInstall&&Aa.debugOut("FuncPtrAdapter installed",this,this.contextKey(Ee,st),"@"+pe,ce),ae){if(ae[1]){Aa.debugFuncInstall&&Aa.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ce);try{$.scopedAlloc[$.scopedAlloc.length-1].push(ae[1])}catch{}}ae[0]=ce,ae[1]=pe}return pe}else if(y.isPtr(ce)||ce===null||ce===void 0){if(ae&&ae[1]&&ae[1]!==ce){Aa.debugFuncInstall&&Aa.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ce);try{$.scopedAlloc[$.scopedAlloc.length-1].push(ae[1])}catch{}ae[0]=ae[1]=ce|0}return ce||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},ve.FuncPtrAdapter.warnOnUse=!1,ve.FuncPtrAdapter.debugFuncInstall=!1,ve.FuncPtrAdapter.debugOut=console.debug.bind(console),ve.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const Re=ee=>ve.get(ee)||S("Argument adapter not found:",ee),Qe=ee=>ke.get(ee)||S("Result adapter not found:",ee);$.xWrap.convertArg=(ee,...ce)=>Re(ee)(...ce),$.xWrap.convertArgNoCheck=(ee,...ce)=>ve.get(ee)(...ce),$.xWrap.convertResult=(ee,ce)=>ee===null?ce:ee?Qe(ee)(ce):void 0,$.xWrap.convertResultNoCheck=(ee,ce)=>ee===null?ce:ee?ke.get(ee)(ce):void 0,y.xWrap=function(ee,ce,...Ee){arguments.length===3&&Array.isArray(arguments[2])&&(Ee=arguments[2]),y.isPtr(ee)&&(ee=y.functionEntry(ee)||S("Function pointer not found in WASM function table."));const st=ee instanceof Function,ae=st?ee:y.xGet(ee);if(st&&(ee=ae.name||"unnamed function"),Ee.length!==ae.length&&et(ee,ae.length),ce===null&&ae.length===0)return ae;ce!=null&&Qe(ce);for(const Q of Ee)Q instanceof Ge?ve.set(Q,(...re)=>Q.convertArg(...re)):Re(Q);const pe=$.xWrap;return ae.length===0?(...Q)=>Q.length?et(ee,ae.length):pe.convertResult(ce,ae.call(null)):function(...Q){Q.length!==ae.length&&et(ee,ae.length);const re=y.scopedAllocPush();try{let se=0;for(;se<Q.length;++se)Q[se]=pe.convertArgNoCheck(Ee[se],Q[se],Q,se);return pe.convertResultNoCheck(ce,ae.apply(null,Q))}finally{y.scopedAllocPop(re)}}};const St=function(ee,ce,Ee,st,ae,pe){if(typeof Ee=="string"){if(ce===1)return pe.get(Ee);if(ce===2){if(st)st instanceof Function||S(ae,"requires a function argument.");else return delete pe.get(Ee),ee;return pe.set(Ee,st),ee}}S("Invalid arguments to",ae)};return y.xWrap.resultAdapter=function ee(ce,Ee){return St(ee,arguments.length,ce,Ee,"resultAdapter()",ke)},y.xWrap.argAdapter=function ee(ce,Ee){return St(ee,arguments.length,ce,Ee,"argAdapter()",ve)},y.xWrap.FuncPtrAdapter=ve.FuncPtrAdapter,y.xCallWrapped=function(ee,ce,Ee,...st){return Array.isArray(arguments[3])&&(st=arguments[3]),y.xWrap(ee,ce,Ee||[]).apply(null,st||[])},y.xWrap.testConvertArg=$.xWrap.convertArg,y.xWrap.testConvertResult=$.xWrap.convertResult,y},globalThis.WhWasmUtilInstaller.yawl=function(y){const S=()=>fetch(y.uri,{credentials:"same-origin"}),N=this,R=function(fe){if(y.wasmUtilTarget){const me=(...tt)=>{throw new Error(tt.join(" "))},Ke=y.wasmUtilTarget;if(Ke.module=fe.module,Ke.instance=fe.instance,Ke.instance.exports.memory||(Ke.memory=y.imports&&y.imports.env&&y.imports.env.memory||me("Missing 'memory' object!")),!Ke.alloc&&fe.instance.exports.malloc){const tt=fe.instance.exports;Ke.alloc=function(at){return tt.malloc(at)||me("Allocation of",at,"bytes failed.")},Ke.dealloc=function(at){tt.free(at)}}N(Ke)}return y.onload&&y.onload(fe,y),fe};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(S(),y.imports||{}).then(R)}:function(){return S().then(me=>me.arrayBuffer()).then(me=>WebAssembly.instantiate(me,y.imports||{})).then(R)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function y(S){const N=(...We)=>{throw new Error(We.join(" "))};!(S.heap instanceof WebAssembly.Memory)&&!(S.heap instanceof Function)&&N("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(We){S[We]instanceof Function||N("Config option '"+We+"' must be a function.")});const R=y,$=S.heap instanceof Function?S.heap:()=>new Uint8Array(S.heap.buffer),fe=S.alloc,me=S.dealloc,Ke=S.log||console.log.bind(console),tt=S.memberPrefix||"",at=S.memberSuffix||"",mt=S.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!S.bigIntEnabled,Be=globalThis.BigInt,Oe=globalThis.BigInt64Array,et=S.ptrSizeof||4,ve=S.ptrIR||"i32";R.debugFlags||(R.__makeDebugFlags=function(We=null){We&&We.__flags&&(We=We.__flags);const bt=function wt(It){return arguments.length===0?wt.__flags:(It<0?(delete wt.__flags.getter,delete wt.__flags.setter,delete wt.__flags.alloc,delete wt.__flags.dealloc):(wt.__flags.getter=(1&It)!==0,wt.__flags.setter=(2&It)!==0,wt.__flags.alloc=(4&It)!==0,wt.__flags.dealloc=(8&It)!==0),wt._flags)};return Object.defineProperty(bt,"__flags",{iterable:!1,writable:!1,value:Object.create(We)}),We||bt(0),bt},R.debugFlags=R.__makeDebugFlags());const ke=function(){const We=new ArrayBuffer(2);return new DataView(We).setInt16(0,256,!0),new Int16Array(We)[0]===256}(),Te=We=>We[1]==="(",Ze=We=>We==="P",Ge=We=>Te(We)?"p":We[0],Re=function(We){switch(Ge(We)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return ve;case"j":return"i64";case"f":return"float";case"d":return"double"}N("Unhandled signature IR:",We)},Qe=Oe?()=>!0:()=>N("BigInt64Array is not available."),St=function(We){switch(Ge(We)){case"p":case"P":case"s":{switch(et){case 4:return"getInt32";case 8:return Qe()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return Qe()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}N("Unhandled DataView getter for signature:",We)},ee=function(We){switch(Ge(We)){case"p":case"P":case"s":{switch(et){case 4:return"setInt32";case 8:return Qe()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return Qe()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}N("Unhandled DataView setter for signature:",We)},ce=function(We){switch(Ge(We)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return Qe()&&Be;case"p":case"P":case"s":switch(et){case 4:return Number;case 8:return Qe()&&Be}break}N("Unhandled DataView set wrapper for signature:",We)},Ee=(We,bt)=>We+"::"+bt,st=function(We,bt){return()=>N(Ee(We,bt),"is read-only.")},ae=new WeakMap,pe="(pointer-is-external)",Q=function(We,bt,wt){if(wt||(wt=ae.get(bt)),wt){if(ae.delete(bt),Array.isArray(bt.ondispose)){let It;for(;It=bt.ondispose.shift();)try{It instanceof Function?It.call(bt):It instanceof zt?It.dispose():typeof It=="number"&&me(It)}catch(wn){console.warn("ondispose() for",We.structName,"@",wt,"threw. NOT propagating it.",wn)}}else if(bt.ondispose instanceof Function)try{bt.ondispose()}catch(It){console.warn("ondispose() for",We.structName,"@",wt,"threw. NOT propagating it.",It)}delete bt.ondispose,We.debugFlags.__flags.dealloc&&Ke("debug.dealloc:",bt[pe]?"EXTERNAL":"",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+wt),bt[pe]||me(wt)}},re=We=>({configurable:!1,writable:!1,iterable:!1,value:We}),se=function(We,bt,wt){let It=!wt;wt?Object.defineProperty(bt,pe,re(wt)):(wt=fe(We.structInfo.sizeof),wt||N("Allocation of",We.structName,"structure failed."));try{We.debugFlags.__flags.alloc&&Ke("debug.alloc:",It?"":"EXTERNAL",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+wt),It&&$().fill(0,wt,wt+We.structInfo.sizeof),ae.set(bt,wt)}catch(wn){throw Q(We,bt,wt),wn}},Le=function(){const We=this.pointer;return We?new Uint8Array($().slice(We,We+this.structInfo.sizeof)):null},qt=re(We=>tt+We+at),Wt=function(We,bt,wt=!0){let It=We.members[bt];if(!It&&(tt||at)){for(const wn of Object.values(We.members))if(wn.key===bt){It=wn;break}!It&&wt&&N(Ee(We.name,bt),"is not a mapped struct member.")}return It},Zt=function We(bt,wt,It=!1){We._||(We._=Hn=>Hn.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const wn=Wt(bt.structInfo,wt,!0);return It?We._(wn.signature):wn.signature},lt={configurable:!1,enumerable:!1,get:function(){return ae.get(this)},set:()=>N("Cannot assign the 'pointer' property of a struct.")},_e=re(function(){const We=[];for(const bt of Object.keys(this.structInfo.members))We.push(this.memberKey(bt));return We}),Pe=new TextDecoder("utf-8"),ot=new TextEncoder,pt=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Mt=function(We,bt,wt){return Pe.decode(We.buffer instanceof pt?We.slice(bt,wt):We.subarray(bt,wt))},Xt=function(We,bt,wt=!1){const It=Wt(We.structInfo,bt,wt);return It&&It.signature.length===1&&It.signature[0]==="s"?It:!1},qe=function(We){We.signature!=="s"&&N("Invalid member type signature for C-string value:",JSON.stringify(We))},nt=function(bt,wt){const It=Wt(bt.structInfo,wt,!0);qe(It);const wn=bt[It.key];if(!wn)return null;let Hn=wn;const Bn=$();for(;Bn[Hn]!==0;++Hn);return wn===Hn?"":Mt(Bn,wn,Hn)},dt=function(We,...bt){We.ondispose?Array.isArray(We.ondispose)||(We.ondispose=[We.ondispose]):We.ondispose=[],We.ondispose.push(...bt)},Nt=function(We){const bt=ot.encode(We),wt=fe(bt.length+1);wt||N("Allocation error while duplicating string:",We);const It=$();return It.set(bt,wt),It[wt+bt.length]=0,wt},xt=function(We,bt,wt){const It=Wt(We.structInfo,bt,!0);qe(It);const wn=Nt(wt);return We[It.key]=wn,dt(We,wn),We},zt=function(bt,wt){arguments[2]!==re&&N("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:re(bt),structInfo:re(wt)})};zt.prototype=Object.create(null,{dispose:re(function(){Q(this.constructor,this)}),lookupMember:re(function(We,bt=!0){return Wt(this.structInfo,We,bt)}),memberToJsString:re(function(We){return nt(this,We)}),memberIsString:re(function(We,bt=!0){return Xt(this,We,bt)}),memberKey:qt,memberKeys:_e,memberSignature:re(function(We,bt=!1){return Zt(this,We,bt)}),memoryDump:re(Le),pointer:lt,setMemberCString:re(function(We,bt){return xt(this,We,bt)})}),Object.assign(zt.prototype,{addOnDispose:function(...We){return dt(this,...We),this}}),Object.defineProperties(zt,{allocCString:re(Nt),isA:re(We=>We instanceof zt),hasExternalPointer:re(We=>We instanceof zt&&!!We[pe]),memberKey:qt});const vn=We=>Number.isFinite(We)||We instanceof(Be||Number),At=function We(bt,wt,It){if(!We._){We._={getters:{},setters:{},sw:{}};const ci=["i","c","C","p","P","s","f","d","v()"];mt&&ci.push("j"),ci.forEach(function(Us){We._.getters[Us]=St(Us),We._.setters[Us]=ee(Us),We._.sw[Us]=ce(Us)});const mx=/^[ipPsjfdcC]$/,gx=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;We.sigCheck=function(Us,yx,Lm,Bf){Object.prototype.hasOwnProperty.call(Us,Lm)&&N(Us.structName,"already has a property named",Lm+"."),mx.test(Bf)||gx.test(Bf)||N("Malformed signature for",Ee(Us.structName,yx)+":",Bf)}}const wn=bt.memberKey(wt);We.sigCheck(bt.prototype,wt,wn,It.signature),It.key=wn,It.name=wt;const Hn=Ge(It.signature),Bn=Ee(bt.prototype.structName,wn),Un=bt.prototype.debugFlags.__flags,ya=Object.create(null);ya.configurable=!1,ya.enumerable=!1,ya.get=function(){Un.getter&&Ke("debug.getter:",We._.getters[Hn],"for",Re(Hn),Bn,"@",this.pointer,"+",It.offset,"sz",It.sizeof);let ci=new DataView($().buffer,this.pointer+It.offset,It.sizeof)[We._.getters[Hn]](0,ke);return Un.getter&&Ke("debug.getter:",Bn,"result =",ci),ci},It.readOnly?ya.set=st(bt.prototype.structName,wn):ya.set=function(ci){if(Un.setter&&Ke("debug.setter:",We._.setters[Hn],"for",Re(Hn),Bn,"@",this.pointer,"+",It.offset,"sz",It.sizeof,ci),this.pointer||N("Cannot set struct property on disposed instance."),ci===null)ci=0;else for(;!vn(ci);){if(Ze(It.signature)&&ci instanceof zt){ci=ci.pointer||0,Un.setter&&Ke("debug.setter:",Bn,"resolved to",ci);break}N("Invalid value for pointer-type",Bn+".")}new DataView($().buffer,this.pointer+It.offset,It.sizeof)[We._.setters[Hn]](0,We._.sw[Hn](ci),ke)},Object.defineProperty(bt.prototype,wn,ya)},Er=function We(bt,wt){arguments.length===1?(wt=bt,bt=wt.name):wt.name||(wt.name=bt),bt||N("Struct name is required.");let It=!1;Object.keys(wt.members).forEach(Bn=>{const Un=wt.members[Bn];Un.sizeof?Un.sizeof===1?Un.signature==="c"||Un.signature==="C"||N("Unexpected sizeof==1 member",Ee(wt.name,Bn),"with signature",Un.signature):(Un.sizeof%4!==0&&(console.warn("Invalid struct member description =",Un,"from",wt),N(bt,"member",Bn,"sizeof is not aligned. sizeof="+Un.sizeof)),Un.offset%4!==0&&(console.warn("Invalid struct member description =",Un,"from",wt),N(bt,"member",Bn,"offset is not aligned. offset="+Un.offset))):N(bt,"member",Bn,"is missing sizeof."),(!It||It.offset<Un.offset)&&(It=Un)}),It?wt.sizeof<It.offset+It.sizeof&&N("Invalid struct config:",bt,"max member offset ("+It.offset+") ","extends past end of struct (sizeof="+wt.sizeof+")."):N("No member property descriptions found.");const wn=re(R.__makeDebugFlags(We.debugFlags)),Hn=function Bn(Un){this instanceof Bn?arguments.length?((Un!==(Un|0)||Un<=0)&&N("Invalid pointer value for",bt,"constructor."),se(Bn,this,Un)):se(Bn,this):N("The",bt,"constructor may only be called via 'new'.")};return Object.defineProperties(Hn,{debugFlags:wn,isA:re(Bn=>Bn instanceof Hn),memberKey:qt,memberKeys:_e,methodInfoForKey:re(function(Bn){}),structInfo:re(wt),structName:re(bt)}),Hn.prototype=new zt(bt,wt,re),Object.defineProperties(Hn.prototype,{debugFlags:wn,constructor:re(Hn)}),Object.keys(wt.members).forEach(Bn=>At(Hn,Bn,wt.members[Bn])),Hn};return Er.StructType=zt,Er.config=S,Er.allocCString=Nt,Er.debugFlags||(Er.debugFlags=R.__makeDebugFlags(R.debugFlags)),Er},globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=(...ve)=>{throw new Error(ve.join(" "))};y.SQLite3Error.toss;const N=y.capi,R=y.wasm,$=y.util;if(globalThis.WhWasmUtilInstaller(R),delete globalThis.WhWasmUtilInstaller,R.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new R.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(ve,ke)=>ve[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new R.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:ve=>ve[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new R.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:ve=>{let ke;return(Te,Ze,Ge,Re)=>{try{const Qe=R.cArgvToJs(Ze,Ge);return ke||(ke=R.cArgvToJs(Ze,Re)),ve(Qe,ke)|0}catch(Qe){return Qe.resultCode||N.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new R.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:ve=>ve[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new R.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(ve,ke)=>ve[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new R.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(ve,ke)=>ve[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],R.exports.sqlite3_progress_handler&&R.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new R.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(ve,ke)=>ve[0]}),"*"]]),R.exports.sqlite3_stmt_explain&&R.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),R.exports.sqlite3_set_authorizer&&R.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new R.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(ve,ke)=>ve[0],callProxy:ve=>(ke,Te,Ze,Ge,Re,Qe)=>{try{return Ze=Ze&&R.cstrToJs(Ze),Ge=Ge&&R.cstrToJs(Ge),Re=Re&&R.cstrToJs(Re),Qe=Qe&&R.cstrToJs(Qe),ve(ke,Te,Ze,Ge,Re,Qe)||0}catch(St){return St.resultCode||N.SQLITE_ERROR}}}),"*"]]),R.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new R.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:ve=>ve[0],callProxy:ve=>(ke,Te,Ze,Ge,Re)=>{ve(ke,Te,R.cstrToJs(Ze),R.cstrToJs(Ge),Re)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],R.bigIntEnabled&&R.exports.sqlite3_declare_vtab&&R.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),R.bigIntEnabled&&R.exports.sqlite3_preupdate_hook&&R.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new R.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:ve=>ve[0],callProxy:ve=>(ke,Te,Ze,Ge,Re,Qe,St)=>{ve(ke,Te,Ze,R.cstrToJs(Ge),R.cstrToJs(Re),Qe,St)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),R.bigIntEnabled&&R.exports.sqlite3changegroup_add&&R.exports.sqlite3session_create&&R.exports.sqlite3_preupdate_hook){const ve={signature:"i(ps)",callProxy:ke=>(Te,Ze)=>{try{return ke(Te,R.cstrToJs(Ze))|0}catch(Ge){return Ge.resultCode||N.SQLITE_ERROR}}};R.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new R.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new R.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new R.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new R.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new R.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new R.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new R.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new R.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new R.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new R.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new R.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new R.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new R.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new R.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new R.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new R.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new R.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new R.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new R.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new R.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new R.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new R.xWrap.FuncPtrAdapter({name:"xFilter",...ve,contextKey:(ke,Te)=>ke[0]}),"*"]])}R.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],y.StructBinder=globalThis.Jaccwabyt({heap:R.heap8u,alloc:R.alloc,dealloc:R.dealloc,bigIntEnabled:R.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const ve=R.xWrap.argAdapter("string");R.xWrap.argAdapter("string:flexible",Re=>ve($.flexibleString(Re))),R.xWrap.argAdapter("string:static",function(Re){return R.isPtr(Re)?Re:(Re=""+Re,this[Re]||(this[Re]=R.allocCString(Re)))}.bind(Object.create(null)));const ke=R.xWrap.argAdapter("*"),Te=function(){};R.xWrap.argAdapter("sqlite3_filename",ke)("sqlite3_context*",ke)("sqlite3_value*",ke)("void*",ke)("sqlite3_changegroup*",ke)("sqlite3_changeset_iter*",ke)("sqlite3_session*",ke)("sqlite3_stmt*",Re=>ke(Re instanceof(y?.oo1?.Stmt||Te)?Re.pointer:Re))("sqlite3*",Re=>ke(Re instanceof(y?.oo1?.DB||Te)?Re.pointer:Re))("sqlite3_vfs*",Re=>typeof Re=="string"?N.sqlite3_vfs_find(Re)||y.SQLite3Error.toss(N.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",Re):ke(Re instanceof(N.sqlite3_vfs||Te)?Re.pointer:Re)),R.exports.sqlite3_declare_vtab&&R.xWrap.argAdapter("sqlite3_index_info*",Re=>ke(Re instanceof(N.sqlite3_index_info||Te)?Re.pointer:Re))("sqlite3_module*",Re=>ke(Re instanceof(N.sqlite3_module||Te)?Re.pointer:Re));const Ze=R.xWrap.resultAdapter("*");R.xWrap.resultAdapter("sqlite3*",Ze)("sqlite3_context*",Ze)("sqlite3_stmt*",Ze)("sqlite3_value*",Ze)("sqlite3_vfs*",Ze)("void*",Ze),R.exports.sqlite3_step.length===0&&(R.xWrap.doArgcCheck=!1,y.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const Re of R.bindingSignatures)N[Re[0]]=R.xWrap.apply(null,Re);for(const Re of R.bindingSignatures.wasmInternal)$[Re[0]]=R.xWrap.apply(null,Re);const Ge=function(Re){return()=>S(Re+"() is unavailable due to lack","of BigInt support in this build.")};for(const Re of R.bindingSignatures.int64)N[Re[0]]=R.bigIntEnabled?R.xWrap.apply(null,Re):Ge(Re[0]);if(delete R.bindingSignatures,R.exports.sqlite3__wasm_db_error){const Re=R.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");$.sqlite3__wasm_db_error=function(Qe,St,ee){return St instanceof y.WasmAllocError?(St=N.SQLITE_NOMEM,ee=0):St instanceof Error&&(ee=ee||""+St,St=St.resultCode||N.SQLITE_ERROR),Qe?Re(Qe,St,ee):St}}else $.sqlite3__wasm_db_error=function(Re,Qe,St){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),Qe}}{const ve=R.xCall("sqlite3__wasm_enum_json");ve||S("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),R.ctype=JSON.parse(R.cstrToJs(ve));const ke=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];R.bigIntEnabled&&ke.push("serialize","session","vtab");for(const Ge of ke)for(const Re of Object.entries(R.ctype[Ge]))N[Re[0]]=Re[1];R.functionEntry(N.SQLITE_WASM_DEALLOC)||S("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+N.SQLITE_WASM_DEALLOC+").");const Te=Object.create(null);for(const Ge of["resultCodes"])for(const Re of Object.entries(R.ctype[Ge]))Te[Re[1]]=Re[0];N.sqlite3_js_rc_str=Ge=>Te[Ge];const Ze=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!$.isUIThread(),sqlite3_index_info:!R.bigIntEnabled,sqlite3_index_constraint:!R.bigIntEnabled,sqlite3_index_orderby:!R.bigIntEnabled,sqlite3_index_constraint_usage:!R.bigIntEnabled});for(const Ge of R.ctype.structs)Ze[Ge.name]||(N[Ge.name]=y.StructBinder(Ge));if(N.sqlite3_index_info){for(const Ge of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])N.sqlite3_index_info[Ge]=N[Ge],delete N[Ge];N.sqlite3_vtab_config=R.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const fe=(ve,ke,Te)=>$.sqlite3__wasm_db_error(ve,N.SQLITE_MISUSE,ke+"() requires "+Te+" argument"+(Te===1?"":"s")+"."),me=ve=>$.sqlite3__wasm_db_error(ve,N.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),Ke=ve=>R.xWrap.argAdapter("sqlite3*")(ve),tt=ve=>R.isPtr(ve)?R.cstrToJs(ve):ve,at=function(ve,ke){ve=Ke(ve);let Te=this.dbMap.get(ve);if(ke)!Te&&ke>0&&this.dbMap.set(ve,Te=Object.create(null));else return this.dbMap.delete(ve),Te;return Te}.bind(Object.assign(Object.create(null),{dbMap:new Map}));at.addCollation=function(ve,ke){const Te=at(ve,1);Te.collation||(Te.collation=new Set),Te.collation.add(tt(ke).toLowerCase())},at._addUDF=function(ve,ke,Te,Ze){ke=tt(ke).toLowerCase();let Ge=Ze.get(ke);Ge||Ze.set(ke,Ge=new Set),Ge.add(Te<0?-1:Te)},at.addFunction=function(ve,ke,Te){const Ze=at(ve,1);Ze.udf||(Ze.udf=new Map),this._addUDF(ve,ke,Te,Ze.udf)},R.exports.sqlite3_create_window_function&&(at.addWindowFunc=function(ve,ke,Te){const Ze=at(ve,1);Ze.wudf||(Ze.wudf=new Map),this._addUDF(ve,ke,Te,Ze.wudf)}),at.cleanup=function(ve){ve=Ke(ve);const ke=[ve];for(const Ge of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const Re=R.exports[Ge];if(Re){ke.length=Re.length;try{N[Ge](...ke)}catch(Qe){y.config.warn("close-time call of",Ge+"(",ke,") threw:",Qe)}}}const Te=at(ve,0);if(!Te)return;if(Te.collation){for(const Ge of Te.collation)try{N.sqlite3_create_collation_v2(ve,Ge,N.SQLITE_UTF8,0,0,0)}catch{}delete Te.collation}let Ze;for(Ze=0;Ze<2;++Ze){const Ge=Ze?Te.wudf:Te.udf;if(!Ge)continue;const Re=Ze?N.sqlite3_create_window_function:N.sqlite3_create_function_v2;for(const Qe of Ge){const St=Qe[0],ee=Qe[1],ce=[ve,St,0,N.SQLITE_UTF8,0,0,0,0,0];Ze&&ce.push(0);for(const Ee of ee)try{ce[2]=Ee,Re.apply(null,ce)}catch{}ee.clear()}Ge.clear()}delete Te.udf,delete Te.wudf};{const ve=R.xWrap("sqlite3_close_v2","int","sqlite3*");N.sqlite3_close_v2=function(ke){if(arguments.length!==1)return fe(ke,"sqlite3_close_v2",1);if(ke)try{at.cleanup(ke)}catch{}return ve(ke)}}if(N.sqlite3session_create){const ve=R.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);N.sqlite3session_delete=function(ke){if(arguments.length!==1)return fe(pDb,"sqlite3session_delete",1);ke&&N.sqlite3session_table_filter(ke,0,0),ve(ke)}}{const ve=(Te,Ze)=>"argv["+Ze+"]:"+Te[0]+":"+R.cstrToJs(Te[1]).toLowerCase(),ke=R.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new R.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:ve}),new R.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:ve})]);N.sqlite3_create_collation_v2=function(Te,Ze,Ge,Re,Qe,St){if(arguments.length!==6)return fe(Te,"sqlite3_create_collation_v2",6);if(!(Ge&15))Ge|=N.SQLITE_UTF8;else if(N.SQLITE_UTF8!==(Ge&15))return me(Te);try{const ee=ke(Te,Ze,Ge,Re,Qe,St);return ee===0&&Qe instanceof Function&&at.addCollation(Te,Ze),ee}catch(ee){return $.sqlite3__wasm_db_error(Te,ee)}},N.sqlite3_create_collation=(Te,Ze,Ge,Re,Qe)=>arguments.length===5?N.sqlite3_create_collation_v2(Te,Ze,Ge,Re,Qe,0):fe(Te,"sqlite3_create_collation",5)}{const ve=function(Ge,Re){return Ge[0]+":"+(Ge[2]<0?-1:Ge[2])+":"+Re+":"+R.cstrToJs(Ge[1]).toLowerCase()},ke=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:ve,callProxy:Ge=>(Re,Qe,St)=>{try{Ge(Re,...N.sqlite3_values_to_js(Qe,St))}catch(ee){N.sqlite3_result_error_js(Re,ee)}}},xFinalAndValue:{signature:"v(p)",contextKey:ve,callProxy:Ge=>Re=>{try{N.sqlite3_result_js(Re,Ge(Re))}catch(Qe){N.sqlite3_result_error_js(Re,Qe)}}},xFunc:{signature:"v(pip)",contextKey:ve,callProxy:Ge=>(Re,Qe,St)=>{try{N.sqlite3_result_js(Re,Ge(Re,...N.sqlite3_values_to_js(Qe,St)))}catch(ee){N.sqlite3_result_error_js(Re,ee)}}},xDestroy:{signature:"v(p)",contextKey:ve,callProxy:Ge=>Re=>{try{Ge(Re)}catch(Qe){console.error("UDF xDestroy method threw:",Qe)}}}}),Te=R.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new R.xWrap.FuncPtrAdapter({name:"xFunc",...ke.xFunc}),new R.xWrap.FuncPtrAdapter({name:"xStep",...ke.xInverseAndStep}),new R.xWrap.FuncPtrAdapter({name:"xFinal",...ke.xFinalAndValue}),new R.xWrap.FuncPtrAdapter({name:"xDestroy",...ke.xDestroy})]),Ze=R.exports.sqlite3_create_window_function?R.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new R.xWrap.FuncPtrAdapter({name:"xStep",...ke.xInverseAndStep}),new R.xWrap.FuncPtrAdapter({name:"xFinal",...ke.xFinalAndValue}),new R.xWrap.FuncPtrAdapter({name:"xValue",...ke.xFinalAndValue}),new R.xWrap.FuncPtrAdapter({name:"xInverse",...ke.xInverseAndStep}),new R.xWrap.FuncPtrAdapter({name:"xDestroy",...ke.xDestroy})]):void 0;N.sqlite3_create_function_v2=function Ge(Re,Qe,St,ee,ce,Ee,st,ae,pe){if(Ge.length!==arguments.length)return fe(Re,"sqlite3_create_function_v2",Ge.length);if(!(ee&15))ee|=N.SQLITE_UTF8;else if(N.SQLITE_UTF8!==(ee&15))return me(Re);try{const Q=Te(Re,Qe,St,ee,ce,Ee,st,ae,pe);return Q===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function)&&at.addFunction(Re,Qe,St),Q}catch(Q){return console.error("sqlite3_create_function_v2() setup threw:",Q),$.sqlite3__wasm_db_error(Re,Q,"Creation of UDF threw: "+Q)}},N.sqlite3_create_function=function Ge(Re,Qe,St,ee,ce,Ee,st,ae){return Ge.length===arguments.length?N.sqlite3_create_function_v2(Re,Qe,St,ee,ce,Ee,st,ae,0):fe(Re,"sqlite3_create_function",Ge.length)},Ze?N.sqlite3_create_window_function=function Ge(Re,Qe,St,ee,ce,Ee,st,ae,pe,Q){if(Ge.length!==arguments.length)return fe(Re,"sqlite3_create_window_function",Ge.length);if(!(ee&15))ee|=N.SQLITE_UTF8;else if(N.SQLITE_UTF8!==(ee&15))return me(Re);try{const re=Ze(Re,Qe,St,ee,ce,Ee,st,ae,pe,Q);return re===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function||Q instanceof Function)&&at.addWindowFunc(Re,Qe,St),re}catch(re){return console.error("sqlite3_create_window_function() setup threw:",re),$.sqlite3__wasm_db_error(Re,re,"Creation of UDF threw: "+re)}}:delete N.sqlite3_create_window_function,N.sqlite3_create_function_v2.udfSetResult=N.sqlite3_create_function.udfSetResult=N.sqlite3_result_js,N.sqlite3_create_window_function&&(N.sqlite3_create_window_function.udfSetResult=N.sqlite3_result_js),N.sqlite3_create_function_v2.udfConvertArgs=N.sqlite3_create_function.udfConvertArgs=N.sqlite3_values_to_js,N.sqlite3_create_window_function&&(N.sqlite3_create_window_function.udfConvertArgs=N.sqlite3_values_to_js),N.sqlite3_create_function_v2.udfSetError=N.sqlite3_create_function.udfSetError=N.sqlite3_result_error_js,N.sqlite3_create_window_function&&(N.sqlite3_create_window_function.udfSetError=N.sqlite3_result_error_js)}{const ve=(Te,Ze)=>(typeof Te=="string"?Ze=-1:$.isSQLableTypedArray(Te)?(Ze=Te.byteLength,Te=$.typedArrayToString(Te instanceof ArrayBuffer?new Uint8Array(Te):Te)):Array.isArray(Te)&&(Te=Te.join(""),Ze=-1),[Te,Ze]),ke={basic:R.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:R.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};N.sqlite3_prepare_v3=function Te(Ze,Ge,Re,Qe,St,ee){if(Te.length!==arguments.length)return fe(Ze,"sqlite3_prepare_v3",Te.length);const[ce,Ee]=ve(Ge,Re);switch(typeof ce){case"string":return ke.basic(Ze,ce,Ee,Qe,St,null);case"number":return ke.full(Ze,ce,Ee,Qe,St,ee);default:return $.sqlite3__wasm_db_error(Ze,N.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},N.sqlite3_prepare_v2=function Te(Ze,Ge,Re,Qe,St){return Te.length===arguments.length?N.sqlite3_prepare_v3(Ze,Ge,Re,0,Qe,St):fe(Ze,"sqlite3_prepare_v2",Te.length)}}{const ve=R.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),ke=R.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);N.sqlite3_bind_text=function Te(Ze,Ge,Re,Qe,St){if(Te.length!==arguments.length)return fe(N.sqlite3_db_handle(Ze),"sqlite3_bind_text",Te.length);if(R.isPtr(Re)||Re===null)return ve(Ze,Ge,Re,Qe,St);Re instanceof ArrayBuffer?Re=new Uint8Array(Re):Array.isArray(pMem)&&(Re=pMem.join(""));let ee,ce;try{if($.isSQLableTypedArray(Re))ee=R.allocFromTypedArray(Re),ce=Re.byteLength;else if(typeof Re=="string")[ee,ce]=R.allocCString(Re);else return $.sqlite3__wasm_db_error(N.sqlite3_db_handle(Ze),N.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return ve(Ze,Ge,ee,ce,N.SQLITE_WASM_DEALLOC)}catch(Ee){return R.dealloc(ee),$.sqlite3__wasm_db_error(N.sqlite3_db_handle(Ze),Ee)}},N.sqlite3_bind_blob=function Te(Ze,Ge,Re,Qe,St){if(Te.length!==arguments.length)return fe(N.sqlite3_db_handle(Ze),"sqlite3_bind_blob",Te.length);if(R.isPtr(Re)||Re===null)return ke(Ze,Ge,Re,Qe,St);Re instanceof ArrayBuffer?Re=new Uint8Array(Re):Array.isArray(Re)&&(Re=Re.join(""));let ee,ce;try{if($.isBindableTypedArray(Re))ee=R.allocFromTypedArray(Re),ce=Qe>=0?Qe:Re.byteLength;else if(typeof Re=="string")[ee,ce]=R.allocCString(Re);else return $.sqlite3__wasm_db_error(N.sqlite3_db_handle(Ze),N.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return ke(Ze,Ge,ee,ce,N.SQLITE_WASM_DEALLOC)}catch(Ee){return R.dealloc(ee),$.sqlite3__wasm_db_error(N.sqlite3_db_handle(Ze),Ee)}}}N.sqlite3_config=function(ve,...ke){if(arguments.length<2)return N.SQLITE_MISUSE;switch(ve){case N.SQLITE_CONFIG_COVERING_INDEX_SCAN:case N.SQLITE_CONFIG_MEMSTATUS:case N.SQLITE_CONFIG_SMALL_MALLOC:case N.SQLITE_CONFIG_SORTERREF_SIZE:case N.SQLITE_CONFIG_STMTJRNL_SPILL:case N.SQLITE_CONFIG_URI:return R.exports.sqlite3__wasm_config_i(ve,ke[0]);case N.SQLITE_CONFIG_LOOKASIDE:return R.exports.sqlite3__wasm_config_ii(ve,ke[0],ke[1]);case N.SQLITE_CONFIG_MEMDB_MAXSIZE:return R.exports.sqlite3__wasm_config_j(ve,ke[0]);case N.SQLITE_CONFIG_GETMALLOC:case N.SQLITE_CONFIG_GETMUTEX:case N.SQLITE_CONFIG_GETPCACHE2:case N.SQLITE_CONFIG_GETPCACHE:case N.SQLITE_CONFIG_HEAP:case N.SQLITE_CONFIG_LOG:case N.SQLITE_CONFIG_MALLOC:case N.SQLITE_CONFIG_MMAP_SIZE:case N.SQLITE_CONFIG_MULTITHREAD:case N.SQLITE_CONFIG_MUTEX:case N.SQLITE_CONFIG_PAGECACHE:case N.SQLITE_CONFIG_PCACHE2:case N.SQLITE_CONFIG_PCACHE:case N.SQLITE_CONFIG_PCACHE_HDRSZ:case N.SQLITE_CONFIG_PMASZ:case N.SQLITE_CONFIG_SERIALIZED:case N.SQLITE_CONFIG_SINGLETHREAD:case N.SQLITE_CONFIG_SQLLOG:case N.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return N.SQLITE_NOTFOUND}};{const ve=new Set;N.sqlite3_auto_extension=function(ke){if(ke instanceof Function)ke=R.installFunction("i(ppp)",ke);else if(arguments.length!==1||!R.isPtr(ke))return N.SQLITE_MISUSE;const Te=R.exports.sqlite3_auto_extension(ke);return ke!==arguments[0]&&(Te===0?ve.add(ke):R.uninstallFunction(ke)),Te},N.sqlite3_cancel_auto_extension=function(ke){return!ke||arguments.length!==1||!R.isPtr(ke)?0:R.exports.sqlite3_cancel_auto_extension(ke)},N.sqlite3_reset_auto_extension=function(){R.exports.sqlite3_reset_auto_extension();for(const ke of ve)R.uninstallFunction(ke);ve.clear()}}const mt=N.sqlite3_vfs_find("kvvfs");if(mt)if($.isUIThread()){const ve=new N.sqlite3_kvvfs_methods(R.exports.sqlite3__wasm_kvvfs_methods());delete N.sqlite3_kvvfs_methods;const ke=R.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,Te=R.pstack,Ze=Re=>R.peek(Re)===115?sessionStorage:localStorage,Ge={xRead:(Re,Qe,St,ee)=>{const ce=Te.pointer,Ee=R.scopedAllocPush();try{const st=ke(Re,Qe);if(!st)return-3;const ae=R.cstrToJs(st),pe=Ze(Re).getItem(ae);if(!pe)return-1;const Q=pe.length;if(ee<=0)return Q;if(ee===1)return R.poke(St,0),Q;const re=R.scopedAllocCString(pe);return ee>Q+1&&(ee=Q+1),R.heap8u().copyWithin(St,re,re+ee-1),R.poke(St+ee-1,0),ee-1}catch(st){return console.error("kvstorageRead()",st),-2}finally{Te.restore(ce),R.scopedAllocPop(Ee)}},xWrite:(Re,Qe,St)=>{const ee=Te.pointer;try{const ce=ke(Re,Qe);if(!ce)return 1;const Ee=R.cstrToJs(ce);return Ze(Re).setItem(Ee,R.cstrToJs(St)),0}catch(ce){return console.error("kvstorageWrite()",ce),N.SQLITE_IOERR}finally{Te.restore(ee)}},xDelete:(Re,Qe)=>{const St=Te.pointer;try{const ee=ke(Re,Qe);return ee?(Ze(Re).removeItem(R.cstrToJs(ee)),0):1}catch(ee){return console.error("kvstorageDelete()",ee),N.SQLITE_IOERR}finally{Te.restore(St)}}};for(const Re of Object.keys(Ge))ve[ve.memberKey(Re)]=R.installFunction(ve.memberSignature(Re),Ge[Re])}else N.sqlite3_vfs_unregister(mt);R.xWrap.FuncPtrAdapter.warnOnUse=!0;const Be=y.StructBinder,Oe=function ve(ke,Te,Ze,Ge=ve.installMethodArgcCheck){if(ke instanceof Be.StructType?!(Ze instanceof Function)&&!R.isPtr(Ze)&&S("Usage errror: expecting a Function or WASM pointer to one."):S("Usage error: target object is-not-a StructType."),arguments.length===1)return(ee,ce)=>ve(ke,ee,ce,Ge);ve.argcProxy||(ve.argcProxy=function(ee,ce,Ee,st){return function(...ae){return Ee.length!==arguments.length&&S("Argument mismatch for",ee.structInfo.name+"::"+ce+": Native signature is:",st),Ee.apply(this,ae)}},ve.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((ee,ce)=>{if(typeof ee=="number")try{R.uninstallFunction(ee)}catch{}}),delete this.ondispose.__removeFuncList)});const Re=ke.memberSignature(Te);Re.length<2&&S("Member",Te,"does not have a function pointer signature:",Re);const Qe=ke.memberKey(Te),St=Ge&&!R.isPtr(Ze)?ve.argcProxy(ke,Qe,Ze,Re):Ze;if(R.isPtr(St))St&&!R.functionEntry(St)&&S("Pointer",St,"is not a WASM function table entry."),ke[Qe]=St;else{const ee=R.installFunction(St,ke.memberSignature(Te,!0));ke[Qe]=ee,(!ke.ondispose||!ke.ondispose.__removeFuncList)&&(ke.addOnDispose("ondispose.__removeFuncList handler",ve.removeFuncList),ke.ondispose.__removeFuncList=[]),ke.ondispose.__removeFuncList.push(Qe,ee)}return(ee,ce)=>ve(ke,ee,ce,Ge)};Oe.installMethodArgcCheck=!1;const et=function(ve,ke,Te=Oe.installMethodArgcCheck){const Ze=new Map;for(const Ge of Object.keys(ke)){const Re=ke[Ge],Qe=Ze.get(Re);if(Qe){const St=ve.memberKey(Ge);ve[St]=ve[ve.memberKey(Qe)]}else Oe(ve,Ge,Re,Te),Ze.set(Re,Ge)}return ve};Be.StructType.prototype.installMethod=function(ke,Te,Ze=Oe.installMethodArgcCheck){return arguments.length<3&&ke&&typeof ke=="object"?et(this,...arguments):Oe(this,...arguments)},Be.StructType.prototype.installMethods=function(ve,ke=Oe.installMethodArgcCheck){return et(this,ve,ke)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){y.version={libVersion:"3.47.1",libVersionNumber:3047001,sourceId:"2024-11-25 12:07:48 b95d11e958643b969c47a8e5857f3793b9e69700b8f1469371386369a26e577e",downloadVersion:3470100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=(...ae)=>{throw new y.SQLite3Error(...ae)},N=y.capi,R=y.wasm,$=y.util,fe=new WeakMap,me=new WeakMap,Ke=(ae,pe,Q)=>{const re=Object.getOwnPropertyDescriptor(ae,pe);return re?re.value:Q},tt=function(ae,pe){return pe&&(ae instanceof Oe&&(ae=ae.pointer),S(pe,"sqlite3 result code",pe+":",ae?N.sqlite3_errmsg(ae):N.sqlite3_errstr(pe))),arguments[0]},at=R.installFunction("i(ippp)",function(ae,pe,Q,re){N.SQLITE_TRACE_STMT===ae&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+pe+":",R.cstrToJs(re))}.bind({counter:0})),mt=Object.create(null),Be=function ae(...pe){if(!ae._name2vfs){ae._name2vfs=Object.create(null);const _e=typeof importScripts=="function"?Pe=>S("The VFS for",Pe,"is only available in the main window thread."):!1;ae._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:_e||(()=>"local")},ae._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:_e||(()=>"session")}}const Q=ae.normalizeArgs(...pe);let re=Q.filename,se=Q.vfs,Le=Q.flags;(typeof re!="string"&&typeof re!="number"||typeof Le!="string"||se&&typeof se!="string"&&typeof se!="number")&&(y.config.error("Invalid DB ctor args",Q,arguments),S("Invalid arguments for DB constructor."));let it=typeof re=="number"?R.cstrToJs(re):re;const qt=ae._name2vfs[it];qt&&(se=qt.vfs,re=it=qt.filename(it));let Wt,Zt=0;Le.indexOf("c")>=0&&(Zt|=N.SQLITE_OPEN_CREATE|N.SQLITE_OPEN_READWRITE),Le.indexOf("w")>=0&&(Zt|=N.SQLITE_OPEN_READWRITE),Zt===0&&(Zt|=N.SQLITE_OPEN_READONLY),Zt|=N.SQLITE_OPEN_EXRESCODE;const lt=R.pstack.pointer;try{const _e=R.pstack.allocPtr();let Pe=N.sqlite3_open_v2(re,_e,Zt,se||0);Wt=R.peekPtr(_e),tt(Wt,Pe),N.sqlite3_extended_result_codes(Wt,1),Le.indexOf("t")>=0&&N.sqlite3_trace_v2(Wt,N.SQLITE_TRACE_STMT,at,Wt)}catch(_e){throw Wt&&N.sqlite3_close_v2(Wt),_e}finally{R.pstack.restore(lt)}this.filename=it,fe.set(this,Wt),me.set(this,Object.create(null));try{const _e=N.sqlite3_js_db_vfs(Wt)||S("Internal error: cannot get VFS for new db handle."),Pe=mt[_e];Pe&&(Pe instanceof Function?Pe(this,y):tt(Wt,N.sqlite3_exec(Wt,Pe,0,0,0)))}catch(_e){throw this.close(),_e}};Be.setVfsPostOpenCallback=function(ae,pe){pe instanceof Function||S("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),mt[ae]=pe},Be.normalizeArgs=function(ae=":memory:",pe="c",Q=null){const re={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(re,arguments[0]),re.flags===void 0&&(re.flags="c"),re.vfs===void 0&&(re.vfs=null),re.filename===void 0&&(re.filename=":memory:")):(re.filename=ae,re.flags=pe,re.vfs=Q),re};const Oe=function(...ae){Be.apply(this,ae)};Oe.dbCtorHelper=Be;const et={null:1,number:2,string:3,boolean:4,blob:5};et.undefined==et.null,R.bigIntEnabled&&(et.bigint=et.number);const ve=function(){et!==arguments[2]&&S(N.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],fe.set(this,arguments[1]),this.parameterCount=N.sqlite3_bind_parameter_count(this.pointer)},ke=function(ae){return ae.pointer||S("DB has been closed."),ae},Te=function(ae,pe){return(pe!==(pe|0)||pe<0||pe>=ae.columnCount)&&S("Column index",pe,"is out of range."),ae},Ze=function(ae,pe){const Q=Object.create(null);switch(Q.opt=Object.create(null),pe.length){case 1:typeof pe[0]=="string"||$.isSQLableTypedArray(pe[0])||Array.isArray(pe[0])?Q.sql=pe[0]:pe[0]&&typeof pe[0]=="object"&&(Q.opt=pe[0],Q.sql=Q.opt.sql);break;case 2:Q.sql=pe[0],Q.opt=pe[1];break;default:S("Invalid argument count for exec().")}Q.sql=$.flexibleString(Q.sql),typeof Q.sql!="string"&&S("Missing SQL argument or unsupported SQL value type.");const re=Q.opt;switch(re.returnValue){case"resultRows":re.resultRows||(re.resultRows=[]),Q.returnVal=()=>re.resultRows;break;case"saveSql":re.saveSql||(re.saveSql=[]),Q.returnVal=()=>re.saveSql;break;case void 0:case"this":Q.returnVal=()=>ae;break;default:S("Invalid returnValue value:",re.returnValue)}if(!re.callback&&!re.returnValue&&re.rowMode!==void 0&&(re.resultRows||(re.resultRows=[]),Q.returnVal=()=>re.resultRows),re.callback||re.resultRows)switch(re.rowMode===void 0?"array":re.rowMode){case"object":Q.cbArg=(se,Le)=>{Le.columnNames||(Le.columnNames=se.getColumnNames([]));const it=se.get([]),qt=Object.create(null);for(const Wt in Le.columnNames)qt[Le.columnNames[Wt]]=it[Wt];return qt};break;case"array":Q.cbArg=se=>se.get([]);break;case"stmt":Array.isArray(re.resultRows)&&S("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),Q.cbArg=se=>se;break;default:if($.isInt32(re.rowMode)){Q.cbArg=se=>se.get(re.rowMode);break}else if(typeof re.rowMode=="string"&&re.rowMode.length>1&&re.rowMode[0]==="$"){const se=re.rowMode.substr(1);Q.cbArg=Le=>{const it=Le.get(Object.create(null))[se];return it===void 0?S(N.SQLITE_NOTFOUND,"exec(): unknown result column:",se):it};break}S("Invalid rowMode:",re.rowMode)}return Q},Ge=(ae,pe,Q,...re)=>{const se=ae.prepare(pe);try{const Le=se.bind(Q).step()?se.get(...re):void 0;return se.reset(),Le}finally{se.finalize()}},Re=(ae,pe,Q,re)=>ae.exec({sql:pe,bind:Q,rowMode:re,returnValue:"resultRows"});Oe.checkRc=(ae,pe)=>tt(ae,pe),Oe.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return ke(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const ae=this.pointer;if(Object.keys(me.get(this)).forEach((pe,Q)=>{if(Q&&Q.pointer)try{Q.finalize()}catch{}}),fe.delete(this),me.delete(this),N.sqlite3_close_v2(ae),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(ae=!1,pe=!1){const Q=ke(this).pointer;return ae?pe?N.sqlite3_total_changes64(Q):N.sqlite3_total_changes(Q):pe?N.sqlite3_changes64(Q):N.sqlite3_changes(Q)},dbFilename:function(ae="main"){return N.sqlite3_db_filename(ke(this).pointer,ae)},dbName:function(ae=0){return N.sqlite3_db_name(ke(this).pointer,ae)},dbVfsName:function(ae=0){let pe;const Q=N.sqlite3_js_db_vfs(ke(this).pointer,ae);if(Q){const re=new N.sqlite3_vfs(Q);try{pe=R.cstrToJs(re.$zName)}finally{re.dispose()}}return pe},prepare:function(ae){ke(this);const pe=R.pstack.pointer;let Q,re;try{Q=R.pstack.alloc(8),Oe.checkRc(this,N.sqlite3_prepare_v2(this.pointer,ae,-1,Q,null)),re=R.peekPtr(Q)}finally{R.pstack.restore(pe)}re||S("Cannot prepare empty SQL.");const se=new ve(this,re,et);return me.get(this)[re]=se,se},exec:function(){ke(this);const ae=Ze(this,arguments);if(!ae.sql)return S("exec() requires an SQL string.");const pe=ae.opt,Q=pe.callback,re=Array.isArray(pe.resultRows)?pe.resultRows:void 0;let se,Le=pe.bind,it=!!(ae.cbArg||pe.columnNames||re);const qt=R.scopedAllocPush(),Wt=Array.isArray(pe.saveSql)?pe.saveSql:void 0;try{const Zt=$.isSQLableTypedArray(ae.sql);let lt=Zt?ae.sql.byteLength:R.jstrlen(ae.sql);const _e=R.scopedAlloc(2*R.ptrSizeof+(lt+1)),Pe=_e+R.ptrSizeof;let ot=Pe+R.ptrSizeof;const pt=ot+lt;for(Zt?R.heap8().set(ae.sql,ot):R.jstrcpy(ae.sql,R.heap8(),ot,lt,!1),R.poke(ot+lt,0);ot&&R.peek(ot,"i8");){R.pokePtr([_e,Pe],0),Oe.checkRc(this,N.sqlite3_prepare_v3(this.pointer,ot,lt,0,_e,Pe));const Mt=R.peekPtr(_e);if(ot=R.peekPtr(Pe),lt=pt-ot,!!Mt){if(Wt&&Wt.push(N.sqlite3_sql(Mt).trim()),se=new ve(this,Mt,et),Le&&se.parameterCount&&(se.bind(Le),Le=null),it&&se.columnCount){let Xt=Array.isArray(pe.columnNames)?0:1;if(it=!1,ae.cbArg||re){const qe=Object.create(null);for(;se.step();se._lockedByExec=!1){Xt++===0&&se.getColumnNames(qe.columnNames=pe.columnNames||[]),se._lockedByExec=!0;const nt=ae.cbArg(se,qe);if(re&&re.push(nt),Q&&Q.call(pe,nt,se)===!1)break}se._lockedByExec=!1}Xt===0&&se.getColumnNames(pe.columnNames)}else se.step();se.reset().finalize(),se=null}}}finally{R.scopedAllocPop(qt),se&&(delete se._lockedByExec,se.finalize())}return ae.returnVal()},createFunction:function(pe,Q,re){const se=qe=>qe instanceof Function;switch(arguments.length){case 1:re=pe,pe=re.name,Q=re.xFunc||0;break;case 2:se(Q)||(re=Q,Q=re.xFunc||0);break}re||(re={}),typeof pe!="string"&&S("Invalid arguments: missing function name.");let Le=re.xStep||0,it=re.xFinal||0;const qt=re.xValue||0,Wt=re.xInverse||0;let Zt;se(Q)?(Zt=!1,(se(Le)||se(it))&&S("Ambiguous arguments: scalar or aggregate?"),Le=it=null):se(Le)?(se(it)||S("Missing xFinal() callback for aggregate or window UDF."),Q=null):se(it)?S("Missing xStep() callback for aggregate or window UDF."):S("Missing function-type properties."),Zt===!1?(se(qt)||se(Wt))&&S("xValue and xInverse are not permitted for non-window UDFs."):se(qt)?(se(Wt)||S("xInverse must be provided if xValue is."),Zt=!0):se(Wt)&&S("xValue must be provided if xInverse is.");const lt=re.pApp;lt!=null&&(typeof lt!="number"||!$.isInt32(lt))&&S("Invalid value for pApp property. Must be a legal WASM pointer value.");const _e=re.xDestroy||0;_e&&!se(_e)&&S("xDestroy property must be a function.");let Pe=0;Ke(re,"deterministic")&&(Pe|=N.SQLITE_DETERMINISTIC),Ke(re,"directOnly")&&(Pe|=N.SQLITE_DIRECTONLY),Ke(re,"innocuous")&&(Pe|=N.SQLITE_INNOCUOUS),pe=pe.toLowerCase();const ot=Q||Le,pt=Ke(re,"arity"),Mt=typeof pt=="number"?pt:ot.length?ot.length-1:0;let Xt;return Zt?Xt=N.sqlite3_create_window_function(this.pointer,pe,Mt,N.SQLITE_UTF8|Pe,lt||0,Le,it,qt,Wt,_e):Xt=N.sqlite3_create_function_v2(this.pointer,pe,Mt,N.SQLITE_UTF8|Pe,lt||0,Q,Le,it,_e),Oe.checkRc(this,Xt),this},selectValue:function(ae,pe,Q){return Ge(this,ae,pe,0,Q)},selectValues:function(ae,pe,Q){const re=this.prepare(ae),se=[];try{for(re.bind(pe);re.step();)se.push(re.get(0,Q));re.reset()}finally{re.finalize()}return se},selectArray:function(ae,pe){return Ge(this,ae,pe,[])},selectObject:function(ae,pe){return Ge(this,ae,pe,{})},selectArrays:function(ae,pe){return Re(this,ae,pe,"array")},selectObjects:function(ae,pe){return Re(this,ae,pe,"object")},openStatementCount:function(){return this.pointer?Object.keys(me.get(this)).length:0},transaction:function(ae){let pe="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&S(N.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),pe+=" "+arguments[0],ae=arguments[1]),ke(this).exec(pe);try{const Q=ae(this);return this.exec("COMMIT"),Q}catch(Q){throw this.exec("ROLLBACK"),Q}},savepoint:function(ae){ke(this).exec("SAVEPOINT oo1");try{const pe=ae(this);return this.exec("RELEASE oo1"),pe}catch(pe){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),pe}},checkRc:function(ae){return tt(this,ae)}};const Qe=function(ae){return ae.pointer||S("Stmt has been closed."),ae},St=function(ae){let pe=et[ae==null?"null":typeof ae];switch(pe){case et.boolean:case et.null:case et.number:case et.string:return pe;case et.bigint:if(R.bigIntEnabled)return pe;default:return $.isBindableTypedArray(ae)?et.blob:void 0}},ee=function(ae){return St(ae)||S("Unsupported bind() argument type:",typeof ae)},ce=function(ae,pe){const Q=typeof pe=="number"?pe:N.sqlite3_bind_parameter_index(ae.pointer,pe);return Q===0||!$.isInt32(Q)?S("Invalid bind() parameter name: "+pe):(Q<1||Q>ae.parameterCount)&&S("Bind index",pe,"is out of range."),Q},Ee=function(ae,pe){return ae._lockedByExec&&S("Operation is illegal when statement is locked:",pe),ae},st=function ae(pe,Q,re,se){Ee(Qe(pe),"bind()"),ae._||(ae._tooBigInt=it=>S("BigInt value is too big to store without precision loss:",it),ae._={string:function(it,qt,Wt,Zt){const[lt,_e]=R.allocCString(Wt,!0);return(Zt?N.sqlite3_bind_blob:N.sqlite3_bind_text)(it.pointer,qt,lt,_e,N.SQLITE_WASM_DEALLOC)}}),ee(se),Q=ce(pe,Q);let Le=0;switch(se==null?et.null:re){case et.null:Le=N.sqlite3_bind_null(pe.pointer,Q);break;case et.string:Le=ae._.string(pe,Q,se,!1);break;case et.number:{let it;$.isInt32(se)?it=N.sqlite3_bind_int:typeof se=="bigint"?$.bigIntFits64(se)?R.bigIntEnabled?it=N.sqlite3_bind_int64:$.bigIntFitsDouble(se)?(se=Number(se),it=N.sqlite3_bind_double):ae._tooBigInt(se):ae._tooBigInt(se):(se=Number(se),R.bigIntEnabled&&Number.isInteger(se)?it=N.sqlite3_bind_int64:it=N.sqlite3_bind_double),Le=it(pe.pointer,Q,se);break}case et.boolean:Le=N.sqlite3_bind_int(pe.pointer,Q,se?1:0);break;case et.blob:{if(typeof se=="string"){Le=ae._.string(pe,Q,se,!0);break}else se instanceof ArrayBuffer?se=new Uint8Array(se):$.isBindableTypedArray(se)||S("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const it=R.alloc(se.byteLength||1);R.heap8().set(se.byteLength?se:[0],it),Le=N.sqlite3_bind_blob(pe.pointer,Q,it,se.byteLength,N.SQLITE_WASM_DEALLOC);break}default:y.config.warn("Unsupported bind() argument type:",se),S("Unsupported bind() argument type: "+typeof se)}return Le&&Oe.checkRc(pe.db.pointer,Le),pe._mayGet=!1,pe};ve.prototype={finalize:function(){if(this.pointer){Ee(this,"finalize()");const ae=N.sqlite3_finalize(this.pointer);return delete me.get(this.db)[this.pointer],fe.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,ae}},clearBindings:function(){return Ee(Qe(this),"clearBindings()"),N.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(ae){Ee(this,"reset()"),ae&&this.clearBindings();const pe=N.sqlite3_reset(Qe(this).pointer);return this._mayGet=!1,tt(this.db,pe),this},bind:function(){Qe(this);let ae,pe;switch(arguments.length){case 1:ae=1,pe=arguments[0];break;case 2:ae=arguments[0],pe=arguments[1];break;default:S("Invalid bind() arguments.")}return pe===void 0?this:(this.parameterCount||S("This statement has no bindable parameters."),this._mayGet=!1,pe===null?st(this,ae,et.null,pe):Array.isArray(pe)?(arguments.length!==1&&S("When binding an array, an index argument is not permitted."),pe.forEach((Q,re)=>st(this,re+1,ee(Q),Q)),this):(pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe)),typeof pe=="object"&&!$.isBindableTypedArray(pe)?(arguments.length!==1&&S("When binding an object, an index argument is not permitted."),Object.keys(pe).forEach(Q=>st(this,Q,ee(pe[Q]),pe[Q])),this):st(this,ae,ee(pe),pe)))},bindAsBlob:function(ae,pe){Qe(this),arguments.length===1&&(pe=ae,ae=1);const Q=ee(pe);return et.string!==Q&&et.blob!==Q&&et.null!==Q&&S("Invalid value type for bindAsBlob()"),st(this,ae,et.blob,pe)},step:function(){Ee(this,"step()");const ae=N.sqlite3_step(Qe(this).pointer);switch(ae){case N.SQLITE_DONE:return this._mayGet=!1;case N.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,y.config.warn("sqlite3_step() rc=",ae,N.sqlite3_js_rc_str(ae),"SQL =",N.sqlite3_sql(this.pointer)),Oe.checkRc(this.db.pointer,ae)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const ae=this.step();return this.reset(),ae}finally{try{this.finalize()}catch{}}},get:function(ae,pe){if(Qe(this)._mayGet||S("Stmt.step() has not (recently) returned true."),Array.isArray(ae)){let Q=0;const re=this.columnCount;for(;Q<re;)ae[Q]=this.get(Q++);return ae}else if(ae&&typeof ae=="object"){let Q=0;const re=this.columnCount;for(;Q<re;)ae[N.sqlite3_column_name(this.pointer,Q)]=this.get(Q++);return ae}switch(Te(this,ae),pe===void 0?N.sqlite3_column_type(this.pointer,ae):pe){case N.SQLITE_NULL:return null;case N.SQLITE_INTEGER:if(R.bigIntEnabled){const Q=N.sqlite3_column_int64(this.pointer,ae);return Q>=Number.MIN_SAFE_INTEGER&&Q<=Number.MAX_SAFE_INTEGER?Number(Q).valueOf():Q}else{const Q=N.sqlite3_column_double(this.pointer,ae);return(Q>Number.MAX_SAFE_INTEGER||Q<Number.MIN_SAFE_INTEGER)&&S("Integer is out of range for JS integer range: "+Q),$.isInt32(Q)?Q|0:Q}case N.SQLITE_FLOAT:return N.sqlite3_column_double(this.pointer,ae);case N.SQLITE_TEXT:return N.sqlite3_column_text(this.pointer,ae);case N.SQLITE_BLOB:{const Q=N.sqlite3_column_bytes(this.pointer,ae),re=N.sqlite3_column_blob(this.pointer,ae),se=new Uint8Array(Q);return Q&&se.set(R.heap8u().slice(re,re+Q),0),Q&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(se.buffer),se}default:S("Don't know how to translate","type of result column #"+ae+".")}S("Not reached.")},getInt:function(ae){return this.get(ae,N.SQLITE_INTEGER)},getFloat:function(ae){return this.get(ae,N.SQLITE_FLOAT)},getString:function(ae){return this.get(ae,N.SQLITE_TEXT)},getBlob:function(ae){return this.get(ae,N.SQLITE_BLOB)},getJSON:function(ae){const pe=this.get(ae,N.SQLITE_STRING);return pe===null?pe:JSON.parse(pe)},getColumnName:function(ae){return N.sqlite3_column_name(Te(Qe(this),ae).pointer,ae)},getColumnNames:function(ae=[]){Te(Qe(this),0);const pe=this.columnCount;for(let Q=0;Q<pe;++Q)ae.push(N.sqlite3_column_name(this.pointer,Q));return ae},getParamIndex:function(ae){return Qe(this).parameterCount?N.sqlite3_bind_parameter_index(this.pointer,ae):void 0},getParamName:function(ae){return Qe(this).parameterCount?N.sqlite3_bind_parameter_name(this.pointer,ae):void 0},isBusy:function(){return N.sqlite3_stmt_busy(Qe(this))!==0},isReadOnly:function(){return N.sqlite3_stmt_readonly(Qe(this))!==0}};{const ae={enumerable:!0,get:function(){return fe.get(this)},set:()=>S("The pointer property is read-only.")};Object.defineProperty(ve.prototype,"pointer",ae),Object.defineProperty(Oe.prototype,"pointer",ae)}if(Object.defineProperty(ve.prototype,"columnCount",{enumerable:!1,get:function(){return N.sqlite3_column_count(this.pointer)},set:()=>S("The columnCount property is read-only.")}),y.oo1={DB:Oe,Stmt:ve},$.isUIThread()){y.oo1.JsStorageDb=function(pe="session"){const Q=Be.normalizeArgs(...arguments);pe=Q.filename,pe!=="session"&&pe!=="local"&&S("JsStorageDb db name must be one of 'session' or 'local'."),Q.vfs="kvvfs",Be.call(this,Q)};const ae=y.oo1.JsStorageDb;ae.prototype=Object.create(Oe.prototype),ae.clearStorage=N.sqlite3_js_kvvfs_clear,ae.prototype.clearStorage=function(){return ae.clearStorage(ke(this).filename)},ae.storageSize=N.sqlite3_js_kvvfs_size,ae.prototype.storageSize=function(){return ae.storageSize(ke(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.util;y.initWorker1API=function(){const N=(...Be)=>{throw new Error(Be.join(" "))};globalThis.WorkerGlobalScope instanceof Function||N("initWorker1API() must be run from a Worker thread.");const R=this.sqlite3||N("Missing this.sqlite3 object."),$=R.oo1.DB,fe=function(Be){let Oe=me.idMap.get(Be);return Oe||(Oe="db#"+ ++me.idSeq+"@"+Be.pointer,me.idMap.set(Be,Oe),Oe)},me={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(Be){const Oe=new $(Be);return this.dbs[fe(Oe)]=Oe,this.dbList.indexOf(Oe)<0&&this.dbList.push(Oe),Oe},close:function(Be,Oe){if(Be){delete this.dbs[fe(Be)];const et=Be.filename,ve=S.sqlite3__wasm_db_vfs(Be.pointer,0);Be.close();const ke=this.dbList.indexOf(Be);ke>=0&&this.dbList.splice(ke,1),Oe&&et&&ve&&S.sqlite3__wasm_vfs_unlink(ve,et)}},post:function(Be,Oe){Oe&&Oe.length?(globalThis.postMessage(Be,Array.from(Oe)),Oe.length=0):globalThis.postMessage(Be)},dbs:Object.create(null),getDb:function(Be,Oe=!0){return this.dbs[Be]||(Oe?N("Unknown (or closed) DB ID:",Be):void 0)}},Ke=function(Be=me.dbList[0]){return Be&&Be.pointer?Be:N("DB is not opened.")},tt=function(Be,Oe=!0){const et=me.getDb(Be.dbId,!1)||me.dbList[0];return Oe?Ke(et):et},at=function(){return me.dbList[0]&&fe(me.dbList[0])},mt={open:function(Be){const Oe=Object.create(null),et=Be.args||Object.create(null);et.simulateError&&N("Throwing because of simulateError flag.");const ve=Object.create(null);Oe.vfs=et.vfs,Oe.filename=et.filename||"";const ke=me.open(Oe);return ve.filename=ke.filename,ve.persistent=!!R.capi.sqlite3_js_db_uses_vfs(ke.pointer,"opfs"),ve.dbId=fe(ke),ve.vfs=ke.dbVfsName(),ve},close:function(Be){const Oe=tt(Be,!1),et={filename:Oe&&Oe.filename};if(Oe){const ve=Be.args&&typeof Be.args=="object"?!!Be.args.unlink:!1;me.close(Oe,ve)}return et},exec:function(Be){const Oe=typeof Be.args=="string"?{sql:Be.args}:Be.args||Object.create(null);Oe.rowMode==="stmt"?N("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):Oe.sql||N("'exec' requires input SQL.");const et=tt(Be);(Oe.callback||Array.isArray(Oe.resultRows))&&(et._blobXfer=me.xfer);const ve=Oe.callback;let ke=0;const Te=!!Oe.columnNames;typeof ve=="string"&&(Te||(Oe.columnNames=[]),Oe.callback=function(Ze,Ge){me.post({type:ve,columnNames:Oe.columnNames,rowNumber:++ke,row:Ze},me.xfer)});try{const Ze=Oe.countChanges?et.changes(!0,Oe.countChanges===64):void 0;et.exec(Oe),Ze!==void 0&&(Oe.changeCount=et.changes(!0,Oe.countChanges===64)-Ze),Oe.callback instanceof Function&&(Oe.callback=ve,me.post({type:ve,columnNames:Oe.columnNames,rowNumber:null,row:void 0}))}finally{delete et._blobXfer,Oe.callback&&(Oe.callback=ve)}return Oe},"config-get":function(){const Be=Object.create(null),Oe=R.config;return["bigIntEnabled"].forEach(function(et){Object.getOwnPropertyDescriptor(Oe,et)&&(Be[et]=Oe[et])}),Be.version=R.version,Be.vfsList=R.capi.sqlite3_js_vfs_list(),Be},export:function(Be){const Oe=tt(Be),et={byteArray:R.capi.sqlite3_js_db_export(Oe.pointer),filename:Oe.filename,mimetype:"application/x-sqlite3"};return me.xfer.push(et.byteArray.buffer),et},toss:function(Be){N("Testing worker exception")}};globalThis.onmessage=async function(Be){Be=Be.data;let Oe,et=Be.dbId,ve=Be.type;const ke=performance.now();try{mt.hasOwnProperty(ve)&&mt[ve]instanceof Function?Oe=await mt[ve](Be):N("Unknown db worker message type:",Be.type)}catch(Te){ve="error",Oe={operation:Be.type,message:Te.message,errorClass:Te.name,input:Be},Te.stack&&(Oe.stack=typeof Te.stack=="string"?Te.stack.split(/\n\s*/):Te.stack)}et||(et=Oe.dbId||at()),me.post({type:ve,dbId:et,messageId:Be.messageId,workerReceivedTime:ke,workerRespondTime:performance.now(),departureTime:Be.departureTime,result:Oe},me.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:y})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.wasm,N=y.capi,R=y.util.toss3,$=Object.create(null);y.vfs=$,N.sqlite3_vfs.prototype.registerVfs=function(fe=!1){this instanceof y.capi.sqlite3_vfs||R("Expecting a sqlite3_vfs-type argument.");const me=N.sqlite3_vfs_register(this,fe?1:0);return me&&R("sqlite3_vfs_register(",this,") failed with rc",me),this.pointer!==N.sqlite3_vfs_find(this.$zName)&&R("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},$.installVfs=function(fe){let me=0;const Ke=["io","vfs"];for(const tt of Ke){const at=fe[tt];at&&(++me,at.struct.installMethods(at.methods,!!at.applyArgcCheck),tt==="vfs"&&(!at.struct.$zName&&typeof at.name=="string"&&at.struct.addOnDispose(at.struct.$zName=S.allocCString(at.name)),at.struct.registerVfs(!!at.asDefault)))}return me||R("Misuse: installVfs() options object requires at least","one of:",Ke),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){if(!y.wasm.exports.sqlite3_declare_vtab)return;const S=y.wasm,N=y.capi,R=y.util.toss3,$=Object.create(null);y.vtab=$;const fe=N.sqlite3_index_info;fe.prototype.nthConstraint=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraint+fe.sqlite3_index_constraint.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint(mt)},fe.prototype.nthConstraintUsage=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraintUsage+fe.sqlite3_index_constraint_usage.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint_usage(mt)},fe.prototype.nthOrderBy=function(tt,at=!1){if(tt<0||tt>=this.$nOrderBy)return!1;const mt=this.$aOrderBy+fe.sqlite3_index_orderby.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_orderby(mt)};const me=function(tt,at){return function(mt,Be=!1){if(arguments.length===0&&(mt=new at),mt instanceof at)return this.set(mt.pointer,mt),mt;S.isPtr(mt)||y.SQLite3Error.toss("Invalid argument to",tt+"()");let Oe=this.get(mt);return Be&&this.delete(mt),Oe}.bind(new Map)},Ke=function(tt,at){const mt=me(tt,at);return Object.assign(Object.create(null),{StructType:at,create:Be=>{const Oe=mt();return S.pokePtr(Be,Oe.pointer),Oe},get:Be=>mt(Be),unget:Be=>mt(Be,!0),dispose:Be=>{const Oe=mt(Be,!0);Oe&&Oe.dispose()}})};$.xVtab=Ke("xVtab",N.sqlite3_vtab),$.xCursor=Ke("xCursor",N.sqlite3_vtab_cursor),$.xIndexInfo=tt=>new N.sqlite3_index_info(tt),$.xError=function tt(at,mt,Be){if(tt.errorReporter instanceof Function)try{tt.errorReporter("sqlite3_module::"+at+"(): "+mt.message)}catch{}let Oe;return mt instanceof y.WasmAllocError?Oe=N.SQLITE_NOMEM:arguments.length>2?Oe=Be:mt instanceof y.SQLite3Error&&(Oe=mt.resultCode),Oe||N.SQLITE_ERROR},$.xError.errorReporter=console.error.bind(console),$.xRowid=(tt,at)=>S.poke(tt,at,"i64"),$.setupModule=function(tt){let at=!1;const mt=this instanceof N.sqlite3_module?this:tt.struct||(at=new N.sqlite3_module);try{const Be=tt.methods||R("Missing 'methods' object.");for(const Oe of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const et=Oe[0],ve=Oe[1];Be[et]===!0?Be[et]=Be[ve]:Be[ve]===!0&&(Be[ve]=Be[et])}if(tt.catchExceptions){const Oe=function(ke,Te){return["xConnect","xCreate"].indexOf(ke)>=0?function(Ze,Ge,Re,Qe,St,ee){try{return Te(...arguments)||0}catch(ce){return ce instanceof y.WasmAllocError||(S.dealloc(S.peekPtr(ee)),S.pokePtr(ee,S.allocCString(ce.message))),$.xError(ke,ce)}}:function(...Ze){try{return Te(...Ze)||0}catch(Ge){return $.xError(ke,Ge)}}},et=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],ve=Object.create(null);for(const ke of et){const Te=Be[ke];if(Te instanceof Function)ke==="xConnect"&&Be.xCreate===Te?ve[ke]=Be.xCreate:ke==="xCreate"&&Be.xConnect===Te?ve[ke]=Be.xConnect:ve[ke]=Oe(ke,Te);else continue}mt.installMethods(ve,!1)}else mt.installMethods(Be,!!tt.applyArgcCheck);if(mt.$iVersion===0){let Oe;typeof tt.iVersion=="number"?Oe=tt.iVersion:mt.$xShadowName?Oe=3:mt.$xSavePoint||mt.$xRelease||mt.$xRollbackTo?Oe=2:Oe=1,mt.$iVersion=Oe}}catch(Be){throw at&&at.dispose(),Be}return mt},N.sqlite3_module.prototype.setupModule=function(tt){return $.setupModule.call(this,tt)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=function N(R){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!R||typeof R!="object")&&(R=Object.create(null));const $=new URL(globalThis.location.href).searchParams;return $.has("opfs-disable")?Promise.resolve(y):(R.verbose===void 0&&(R.verbose=$.has("opfs-verbose")?+$.get("opfs-verbose")||2:1),R.sanityChecks===void 0&&(R.sanityChecks=$.has("opfs-sanity-check")),R.proxyUri===void 0&&(R.proxyUri=N.defaultProxyUri),typeof R.proxyUri=="function"&&(R.proxyUri=R.proxyUri()),new Promise(function(me,Ke){const tt=[y.config.error,y.config.warn,y.config.log],at=(qe,...nt)=>{R.verbose>qe&&tt[qe]("OPFS syncer:",...nt)},mt=(...qe)=>at(2,...qe),Be=(...qe)=>at(1,...qe),Oe=(...qe)=>at(0,...qe),et=y.util.toss,ve=y.capi,ke=y.util,Te=y.wasm,Ze=ve.sqlite3_vfs,Ge=ve.sqlite3_file,Re=ve.sqlite3_io_methods,Qe=Object.create(null),St=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;Qe.metrics={dump:function(){let qe,nt=0,dt=0,Nt=0;for(qe in se.opIds){const xt=Le[qe];nt+=xt.count,dt+=xt.time,Nt+=xt.wait,xt.avgTime=xt.count&&xt.time?xt.time/xt.count:0,xt.avgWait=xt.count&&xt.wait?xt.wait/xt.count:0}y.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",Le,`
Total of`,nt,"op(s) for",dt,"ms (incl. "+Nt+" ms of waiting on the async side)"),y.config.log("Serialization metrics:",Le.s11n),pe.postMessage({type:"opfs-async-metrics"})},reset:function(){let qe;const nt=Nt=>Nt.count=Nt.time=Nt.wait=0;for(qe in se.opIds)nt(Le[qe]=Object.create(null));let dt=Le.s11n=Object.create(null);dt=dt.serialize=Object.create(null),dt.count=dt.time=0,dt=Le.s11n.deserialize=Object.create(null),dt.count=dt.time=0}};const ee=new Re,ce=new Ze().addOnDispose(()=>ee.dispose());let Ee;const st=qe=>(Ee=!0,ce.dispose(),Ke(qe)),ae=()=>(Ee=!1,me(y)),pe=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-C_otN2ZJ.js",import.meta.url));setTimeout(()=>{Ee===void 0&&st(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),pe._originalOnError=pe.onerror,pe.onerror=function(qe){Oe("Error initializing OPFS asyncer:",qe),st(new Error("Loading OPFS async Worker failed for unknown reasons."))};const Q=ve.sqlite3_vfs_find(null),re=Q?new Ze(Q):null;ee.$iVersion=1,ce.$iVersion=2,ce.$szOsFile=ve.sqlite3_file.structInfo.sizeof,ce.$mxPathname=1024,ce.$zName=Te.allocCString("opfs"),ce.$xDlOpen=ce.$xDlError=ce.$xDlSym=ce.$xDlClose=null,ce.addOnDispose("$zName",ce.$zName,"cleanup default VFS wrapper",()=>re?re.dispose():null);const se=Object.create(null);se.verbose=R.verbose,se.littleEndian=(()=>{const qe=new ArrayBuffer(2);return new DataView(qe).setInt16(0,256,!0),new Int16Array(qe)[0]===256})(),se.asyncIdleWaitTime=150,se.asyncS11nExceptions=1,se.fileBufferSize=1024*64,se.sabS11nOffset=se.fileBufferSize,se.sabS11nSize=ce.$mxPathname*2,se.sabIO=new SharedArrayBuffer(se.fileBufferSize+se.sabS11nSize),se.opIds=Object.create(null);const Le=Object.create(null);{let qe=0;se.opIds.whichOp=qe++,se.opIds.rc=qe++,se.opIds.xAccess=qe++,se.opIds.xClose=qe++,se.opIds.xDelete=qe++,se.opIds.xDeleteNoWait=qe++,se.opIds.xFileSize=qe++,se.opIds.xLock=qe++,se.opIds.xOpen=qe++,se.opIds.xRead=qe++,se.opIds.xSleep=qe++,se.opIds.xSync=qe++,se.opIds.xTruncate=qe++,se.opIds.xUnlock=qe++,se.opIds.xWrite=qe++,se.opIds.mkdir=qe++,se.opIds["opfs-async-metrics"]=qe++,se.opIds["opfs-async-shutdown"]=qe++,se.opIds.retry=qe++,se.sabOP=new SharedArrayBuffer(qe*4),Qe.metrics.reset()}se.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(qe=>{(se.sq3Codes[qe]=ve[qe])===void 0&&et("Maintenance required: not found:",qe)}),se.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const it=(qe,...nt)=>{const dt=se.opIds[qe]||et("Invalid op ID:",qe);se.s11n.serialize(...nt),Atomics.store(se.sabOPView,se.opIds.rc,-1),Atomics.store(se.sabOPView,se.opIds.whichOp,dt),Atomics.notify(se.sabOPView,se.opIds.whichOp);const Nt=performance.now();for(;Atomics.wait(se.sabOPView,se.opIds.rc,-1)!=="not-equal";);const xt=Atomics.load(se.sabOPView,se.opIds.rc);if(Le[qe].wait+=performance.now()-Nt,xt&&se.asyncS11nExceptions){const zt=se.s11n.deserialize();zt&&Oe(qe+"() async error:",...zt)}return xt};Qe.debug={asyncShutdown:()=>{Be("Shutting down OPFS async listener. The OPFS VFS will no longer work."),it("opfs-async-shutdown")},asyncRestart:()=>{Be("Attempting to restart OPFS VFS async listener. Might work, might not."),pe.postMessage({type:"opfs-async-restart"})}};const qt=()=>{if(se.s11n)return se.s11n;const qe=new TextDecoder,nt=new TextEncoder("utf-8"),dt=new Uint8Array(se.sabIO,se.sabS11nOffset,se.sabS11nSize),Nt=new DataView(se.sabIO,se.sabS11nOffset,se.sabS11nSize);se.s11n=Object.create(null);const xt=Object.create(null);xt.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},xt.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},xt.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},xt.string={id:4};const zt=At=>xt[typeof At]||et("Maintenance required: this value type cannot be serialized.",At),vn=At=>{switch(At){case xt.number.id:return xt.number;case xt.bigint.id:return xt.bigint;case xt.boolean.id:return xt.boolean;case xt.string.id:return xt.string;default:et("Invalid type ID:",At)}};return se.s11n.deserialize=function(At=!1){++Le.s11n.deserialize.count;const Er=performance.now(),We=dt[0],bt=We?[]:null;if(We){const wt=[];let It=1,wn,Hn,Bn;for(wn=0;wn<We;++wn,++It)wt.push(vn(dt[It]));for(wn=0;wn<We;++wn){const Un=wt[wn];Un.getter?(Bn=Nt[Un.getter](It,se.littleEndian),It+=Un.size):(Hn=Nt.getInt32(It,se.littleEndian),It+=4,Bn=qe.decode(dt.slice(It,It+Hn)),It+=Hn),bt.push(Bn)}}return At&&(dt[0]=0),Le.s11n.deserialize.time+=performance.now()-Er,bt},se.s11n.serialize=function(...At){const Er=performance.now();if(++Le.s11n.serialize.count,At.length){const We=[];let bt=0,wt=1;for(dt[0]=At.length&255;bt<At.length;++bt,++wt)We.push(zt(At[bt])),dt[wt]=We[bt].id;for(bt=0;bt<At.length;++bt){const It=We[bt];if(It.setter)Nt[It.setter](wt,At[bt],se.littleEndian),wt+=It.size;else{const wn=nt.encode(At[bt]);Nt.setInt32(wt,wn.byteLength,se.littleEndian),wt+=4,dt.set(wn,wt),wt+=wn.byteLength}}}else dt[0]=0;Le.s11n.serialize.time+=performance.now()-Er},se.s11n},Wt=function qe(nt=16){qe._chars||(qe._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",qe._n=qe._chars.length);const dt=[];let Nt=0;for(;Nt<nt;++Nt){const xt=Math.random()*(qe._n*64)%qe._n|0;dt[Nt]=qe._chars[xt]}return dt.join("")},Zt=Object.create(null),lt=Object.create(null);lt.op=void 0,lt.start=void 0;const _e=qe=>{lt.start=performance.now(),lt.op=qe,++Le[qe].count},Pe=()=>Le[lt.op].time+=performance.now()-lt.start,ot={xCheckReservedLock:function(qe,nt){return Te.poke(nt,0,"i32"),0},xClose:function(qe){_e("xClose");let nt=0;const dt=Zt[qe];return dt&&(delete Zt[qe],nt=it("xClose",qe),dt.sq3File&&dt.sq3File.dispose()),Pe(),nt},xDeviceCharacteristics:function(qe){return ve.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(qe,nt,dt){return ve.SQLITE_NOTFOUND},xFileSize:function(qe,nt){_e("xFileSize");let dt=it("xFileSize",qe);if(dt==0)try{const Nt=se.s11n.deserialize()[0];Te.poke(nt,Nt,"i64")}catch(Nt){Oe("Unexpected error reading xFileSize() result:",Nt),dt=se.sq3Codes.SQLITE_IOERR}return Pe(),dt},xLock:function(qe,nt){_e("xLock");const dt=Zt[qe];let Nt=0;return dt.lockType?dt.lockType=nt:(Nt=it("xLock",qe,nt),Nt===0&&(dt.lockType=nt)),Pe(),Nt},xRead:function(qe,nt,dt,Nt){_e("xRead");const xt=Zt[qe];let zt;try{zt=it("xRead",qe,dt,Number(Nt)),(zt===0||ve.SQLITE_IOERR_SHORT_READ===zt)&&Te.heap8u().set(xt.sabView.subarray(0,dt),nt)}catch(vn){Oe("xRead(",arguments,") failed:",vn,xt),zt=ve.SQLITE_IOERR_READ}return Pe(),zt},xSync:function(qe,nt){_e("xSync"),++Le.xSync.count;const dt=it("xSync",qe,nt);return Pe(),dt},xTruncate:function(qe,nt){_e("xTruncate");const dt=it("xTruncate",qe,Number(nt));return Pe(),dt},xUnlock:function(qe,nt){_e("xUnlock");const dt=Zt[qe];let Nt=0;return ve.SQLITE_LOCK_NONE===nt&&dt.lockType&&(Nt=it("xUnlock",qe,nt)),Nt===0&&(dt.lockType=nt),Pe(),Nt},xWrite:function(qe,nt,dt,Nt){_e("xWrite");const xt=Zt[qe];let zt;try{xt.sabView.set(Te.heap8u().subarray(nt,nt+dt)),zt=it("xWrite",qe,dt,Number(Nt))}catch(vn){Oe("xWrite(",arguments,") failed:",vn,xt),zt=ve.SQLITE_IOERR_WRITE}return Pe(),zt}},pt={xAccess:function(qe,nt,dt,Nt){_e("xAccess");const xt=it("xAccess",Te.cstrToJs(nt));return Te.poke(Nt,xt?0:1,"i32"),Pe(),0},xCurrentTime:function(qe,nt){return Te.poke(nt,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(qe,nt){return Te.poke(nt,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(qe,nt,dt){_e("xDelete");const Nt=it("xDelete",Te.cstrToJs(nt),dt,!1);return Pe(),Nt},xFullPathname:function(qe,nt,dt,Nt){return Te.cstrncpy(Nt,nt,dt)<dt?0:ve.SQLITE_CANTOPEN},xGetLastError:function(qe,nt,dt){return Be("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(nt,dt,Nt,xt,zt){_e("xOpen");let vn=0;dt===0?dt=Wt():Te.isPtr(dt)&&(ve.sqlite3_uri_boolean(dt,"opfs-unlock-asap",0)&&(vn|=se.opfsFlags.OPFS_UNLOCK_ASAP),ve.sqlite3_uri_boolean(dt,"delete-before-open",0)&&(vn|=se.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),dt=Te.cstrToJs(dt));const At=Object.create(null);At.fid=Nt,At.filename=dt,At.sab=new SharedArrayBuffer(se.fileBufferSize),At.flags=xt,At.readOnly=!(y.SQLITE_OPEN_CREATE&xt)&&!!(xt&ve.SQLITE_OPEN_READONLY);const Er=it("xOpen",Nt,dt,xt,vn);return Er||(At.readOnly&&Te.poke(zt,ve.SQLITE_OPEN_READONLY,"i32"),Zt[Nt]=At,At.sabView=se.sabFileBufView,At.sq3File=new Ge(Nt),At.sq3File.$pMethods=ee.pointer,At.lockType=ve.SQLITE_LOCK_NONE),Pe(),Er}};re&&(ce.$xRandomness=re.$xRandomness,ce.$xSleep=re.$xSleep),ce.$xRandomness||(pt.xRandomness=function(qe,nt,dt){const Nt=Te.heap8u();let xt=0;for(;xt<nt;++xt)Nt[dt+xt]=Math.random()*255e3&255;return xt}),ce.$xSleep||(pt.xSleep=function(qe,nt){return Atomics.wait(se.sabOPView,se.opIds.xSleep,0,nt),0}),Qe.getResolvedPath=function(qe,nt){const dt=new URL(qe,"file://irrelevant").pathname;return nt?dt.split("/").filter(Nt=>!!Nt):dt},Qe.getDirForFilename=async function(nt,dt=!1){const Nt=Qe.getResolvedPath(nt,!0),xt=Nt.pop();let zt=Qe.rootDirectory;for(const vn of Nt)vn&&(zt=await zt.getDirectoryHandle(vn,{create:!!dt}));return[zt,xt]},Qe.mkdir=async function(qe){try{return await Qe.getDirForFilename(qe+"/filepart",!0),!0}catch{return!1}},Qe.entryExists=async function(qe){try{const[nt,dt]=await Qe.getDirForFilename(qe);return await nt.getFileHandle(dt),!0}catch{return!1}},Qe.randomFilename=Wt,Qe.treeList=async function(){const qe=async function dt(Nt,xt){xt.name=Nt.name,xt.dirs=[],xt.files=[];for await(const zt of Nt.values())if(zt.kind==="directory"){const vn=Object.create(null);xt.dirs.push(vn),await dt(zt,vn)}else xt.files.push(zt.name)},nt=Object.create(null);return await qe(Qe.rootDirectory,nt),nt},Qe.rmfr=async function(){const qe=Qe.rootDirectory,nt={recurse:!0};for await(const dt of qe.values())qe.removeEntry(dt.name,nt)},Qe.unlink=async function(qe,nt=!1,dt=!1){try{const[Nt,xt]=await Qe.getDirForFilename(qe,!1);return await Nt.removeEntry(xt,{recursive:nt}),!0}catch(Nt){if(dt)throw new Error("unlink(",arguments[0],") failed: "+Nt.message,{cause:Nt});return!1}},Qe.traverse=async function(qe){const nt={recursive:!0,directory:Qe.rootDirectory};typeof qe=="function"&&(qe={callback:qe}),qe=Object.assign(nt,qe||{}),async function Nt(xt,zt){for await(const vn of xt.values()){if(qe.callback(vn,xt,zt)===!1)return!1;if(qe.recursive&&vn.kind==="directory"&&await Nt(vn,zt+1)===!1)break}}(qe.directory,0)};const Mt=async function(qe,nt){const[dt,Nt]=await Qe.getDirForFilename(qe,!0);let zt=await (await dt.getFileHandle(Nt,{create:!0})).createSyncAccessHandle(),vn=0,At,Er=!1;try{for(zt.truncate(0);(At=await nt())!==void 0;)At instanceof ArrayBuffer&&(At=new Uint8Array(At)),vn===0&&At.byteLength>=15&&(ke.affirmDbHeader(At),Er=!0),zt.write(At,{at:vn}),vn+=At.byteLength;if((vn<512||vn%512!==0)&&et("Input size",vn,"is not correct for an SQLite database."),!Er){const We=new Uint8Array(20);zt.read(We,{at:0}),ke.affirmDbHeader(We)}return zt.write(new Uint8Array([1,1]),{at:18}),vn}catch(We){throw await zt.close(),zt=void 0,await dt.removeEntry(Nt).catch(()=>{}),We}finally{zt&&await zt.close()}};if(Qe.importDb=async function(qe,nt){if(nt instanceof Function)return Mt(qe,nt);nt instanceof ArrayBuffer&&(nt=new Uint8Array(nt)),ke.affirmIsDb(nt);const dt=nt.byteLength,[Nt,xt]=await Qe.getDirForFilename(qe,!0);let zt,vn=0;try{return zt=await (await Nt.getFileHandle(xt,{create:!0})).createSyncAccessHandle(),zt.truncate(0),vn=zt.write(nt,{at:0}),vn!=dt&&et("Expected to write "+dt+" bytes but wrote "+vn+"."),zt.write(new Uint8Array([1,1]),{at:18}),vn}catch(At){throw zt&&(await zt.close(),zt=void 0),await Nt.removeEntry(xt).catch(()=>{}),At}finally{zt&&await zt.close()}},y.oo1){const qe=function(...nt){const dt=y.oo1.DB.dbCtorHelper.normalizeArgs(...nt);dt.vfs=ce.$zName,y.oo1.DB.dbCtorHelper.call(this,dt)};qe.prototype=Object.create(y.oo1.DB.prototype),y.oo1.OpfsDb=qe,qe.importDb=Qe.importDb,y.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(ce.pointer,function(nt,dt){dt.capi.sqlite3_busy_timeout(nt,1e4)})}const Xt=function(){const qe=Te.scopedAllocPush(),nt=new Ge;try{const dt=nt.pointer,Nt=ve.SQLITE_OPEN_CREATE|ve.SQLITE_OPEN_READWRITE|ve.SQLITE_OPEN_MAIN_DB,xt=Te.scopedAlloc(8),zt="/sanity/check/file"+Wt(8),vn=Te.scopedAllocCString(zt);let At;if(se.s11n.serialize("This is \xe4 string."),At=se.s11n.deserialize(),mt("deserialize() says:",At),At[0]!=="This is \xe4 string."&&et("String d13n error."),pt.xAccess(ce.pointer,vn,0,xt),At=Te.peek(xt,"i32"),mt("xAccess(",zt,") exists ?=",At),At=pt.xOpen(ce.pointer,vn,dt,Nt,xt),mt("open rc =",At,"state.sabOPView[xOpen] =",se.sabOPView[se.opIds.xOpen]),At!==0){Oe("open failed with code",At);return}pt.xAccess(ce.pointer,vn,0,xt),At=Te.peek(xt,"i32"),At||et("xAccess() failed to detect file."),At=ot.xSync(nt.pointer,0),At&&et("sync failed w/ rc",At),At=ot.xTruncate(nt.pointer,1024),At&&et("truncate failed w/ rc",At),Te.poke(xt,0,"i64"),At=ot.xFileSize(nt.pointer,xt),At&&et("xFileSize failed w/ rc",At),mt("xFileSize says:",Te.peek(xt,"i64")),At=ot.xWrite(nt.pointer,vn,10,1),At&&et("xWrite() failed!");const Er=Te.scopedAlloc(16);At=ot.xRead(nt.pointer,Er,6,2),Te.poke(Er+6,0);let We=Te.cstrToJs(Er);mt("xRead() got:",We),We!=="sanity"&&et("Unexpected xRead() value."),pt.xSleep&&(mt("xSleep()ing before close()ing..."),pt.xSleep(ce.pointer,2e3),mt("waking up from xSleep()")),At=ot.xClose(dt),mt("xClose rc =",At,"sabOPView =",se.sabOPView),mt("Deleting file:",zt),pt.xDelete(ce.pointer,vn,4660),pt.xAccess(ce.pointer,vn,0,xt),At=Te.peek(xt,"i32"),At&&et("Expecting 0 from xAccess(",zt,") after xDelete()."),Be("End of OPFS sanity checks.")}finally{nt.dispose(),Te.scopedAllocPop(qe)}};pe.onmessage=function({data:qe}){switch(qe.type){case"opfs-unavailable":st(new Error(qe.payload.join(" ")));break;case"opfs-async-loaded":pe.postMessage({type:"opfs-async-init",args:se});break;case"opfs-async-inited":{if(Ee===!0)break;try{y.vfs.installVfs({io:{struct:ee,methods:ot},vfs:{struct:ce,methods:pt}}),se.sabOPView=new Int32Array(se.sabOP),se.sabFileBufView=new Uint8Array(se.sabIO,0,se.fileBufferSize),se.sabS11nView=new Uint8Array(se.sabIO,se.sabS11nOffset,se.sabS11nSize),qt(),R.sanityChecks&&(Be("Running sanity checks because of opfs-sanity-check URL arg..."),Xt()),St()?navigator.storage.getDirectory().then(nt=>{pe.onerror=pe._originalOnError,delete pe._originalOnError,y.opfs=Qe,Qe.rootDirectory=nt,mt("End of OPFS sqlite3_vfs setup.",ce),ae()}).catch(st):ae()}catch(nt){Oe(nt),st(nt)}break}default:{const nt="Unexpected message from the OPFS async worker: "+JSON.stringify(qe);Oe(nt),st(new Error(nt));break}}}}))};S.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async N=>{try{let R=S.defaultProxyUri;return N.scriptInfo.sqlite3Dir&&(S.defaultProxyUri=N.scriptInfo.sqlite3Dir+R),S().catch($=>{N.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",$.message)})}catch(R){return N.config.error("installOpfsVfs() exception:",R),Promise.reject(R)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.util.toss,N=y.util.toss3,R=Object.create(null),$=y.capi,fe=y.util,me=y.wasm,Ke=4096,tt=512,at=4,mt=8,Be=tt+at,Oe=tt,et=Be,ve=Ke,ke=$.SQLITE_OPEN_MAIN_DB|$.SQLITE_OPEN_MAIN_JOURNAL|$.SQLITE_OPEN_SUPER_JOURNAL|$.SQLITE_OPEN_WAL,Te=".opaque",Ze=()=>Math.random().toString(36).slice(2),Ge=new TextDecoder,Re=new TextEncoder,Qe=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),St=[y.config.error,y.config.warn,y.config.log];y.config.log;const ee=y.config.warn;y.config.error;const ce=new Map,Ee=lt=>ce.get(lt),st=(lt,_e)=>{_e?ce.set(lt,_e):ce.delete(lt)},ae=new Map,pe=lt=>ae.get(lt),Q=(lt,_e)=>{_e?ae.set(lt,_e):ae.delete(lt)},re={xCheckReservedLock:function(lt,_e){const Pe=pe(lt);return Pe.log("xCheckReservedLock"),Pe.storeErr(),me.poke32(_e,1),0},xClose:function(lt){const _e=pe(lt);_e.storeErr();const Pe=_e.getOFileForS3File(lt);if(Pe)try{_e.log(`xClose ${Pe.path}`),_e.mapS3FileToOFile(lt,!1),Pe.sah.flush(),Pe.flags&$.SQLITE_OPEN_DELETEONCLOSE&&_e.deletePath(Pe.path)}catch(ot){return _e.storeErr(ot,$.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(lt){return $.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(lt,_e,Pe){return $.SQLITE_NOTFOUND},xFileSize:function(lt,_e){const Pe=pe(lt);Pe.log("xFileSize");const pt=Pe.getOFileForS3File(lt).sah.getSize()-ve;return me.poke64(_e,BigInt(pt)),0},xLock:function(lt,_e){const Pe=pe(lt);Pe.log(`xLock ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xRead:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Mt=pt.getOFileForS3File(lt);pt.log(`xRead ${Mt.path} ${Pe} @ ${ot}`);try{const Xt=Mt.sah.read(me.heap8u().subarray(_e,_e+Pe),{at:ve+Number(ot)});return Xt<Pe?(me.heap8u().fill(0,_e+Xt,_e+Pe),$.SQLITE_IOERR_SHORT_READ):0}catch(Xt){return pt.storeErr(Xt,$.SQLITE_IOERR)}},xSectorSize:function(lt){return Ke},xSync:function(lt,_e){const Pe=pe(lt);Pe.log(`xSync ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.flush(),0}catch(pt){return Pe.storeErr(pt,$.SQLITE_IOERR)}},xTruncate:function(lt,_e){const Pe=pe(lt);Pe.log(`xTruncate ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.truncate(ve+Number(_e)),0}catch(pt){return Pe.storeErr(pt,$.SQLITE_IOERR)}},xUnlock:function(lt,_e){const Pe=pe(lt);Pe.log("xUnlock");const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xWrite:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Mt=pt.getOFileForS3File(lt);pt.log(`xWrite ${Mt.path} ${Pe} ${ot}`);try{const Xt=Mt.sah.write(me.heap8u().subarray(_e,_e+Pe),{at:ve+Number(ot)});return Pe===Xt?0:S("Unknown write() failure.")}catch(Xt){return pt.storeErr(Xt,$.SQLITE_IOERR)}}},se=new $.sqlite3_io_methods;se.$iVersion=1,y.vfs.installVfs({io:{struct:se,methods:re}});const Le={xAccess:function(lt,_e,Pe,ot){const pt=Ee(lt);pt.storeErr();try{const Mt=pt.getPath(_e);me.poke32(ot,pt.hasFilename(Mt)?1:0)}catch{me.poke32(ot,0)}return 0},xCurrentTime:function(lt,_e){return me.poke(_e,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(lt,_e){return me.poke(_e,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(lt,_e,Pe){const ot=Ee(lt);ot.log(`xDelete ${me.cstrToJs(_e)}`),ot.storeErr();try{return ot.deletePath(ot.getPath(_e)),0}catch(pt){return ot.storeErr(pt),$.SQLITE_IOERR_DELETE}},xFullPathname:function(lt,_e,Pe,ot){return me.cstrncpy(ot,_e,Pe)<Pe?0:$.SQLITE_CANTOPEN},xGetLastError:function(lt,_e,Pe){const ot=Ee(lt),pt=ot.popErr();if(ot.log(`xGetLastError ${_e} e =`,pt),pt){const Mt=me.scopedAllocPush();try{const[Xt,qe]=me.scopedAllocCString(pt.message,!0);me.cstrncpy(Pe,Xt,_e),qe>_e&&me.poke8(Pe+_e-1,0)}catch{return $.SQLITE_NOMEM}finally{me.scopedAllocPop(Mt)}}return pt?pt.sqlite3Rc||$.SQLITE_IOERR:0},xOpen:function(_e,Pe,ot,pt,Mt){const Xt=Ee(_e);try{Xt.log(`xOpen ${me.cstrToJs(Pe)} ${pt}`);const qe=Pe&&me.peek8(Pe)?Xt.getPath(Pe):Ze();let nt=Xt.getSAHForPath(qe);!nt&&pt&$.SQLITE_OPEN_CREATE&&(Xt.getFileCount()<Xt.getCapacity()?(nt=Xt.nextAvailableSAH(),Xt.setAssociatedPath(nt,qe,pt)):S("SAH pool is full. Cannot create file",qe)),nt||S("file not found:",qe);const dt={path:qe,flags:pt,sah:nt};Xt.mapS3FileToOFile(ot,dt),dt.lockType=$.SQLITE_LOCK_NONE;const Nt=new $.sqlite3_file(ot);return Nt.$pMethods=se.pointer,Nt.dispose(),me.poke32(Mt,pt),0}catch(qe){return Xt.storeErr(qe),$.SQLITE_CANTOPEN}}},it=function(lt){y.capi.sqlite3_vfs_find(lt)&&N("VFS name is already registered:",lt);const _e=new $.sqlite3_vfs,Pe=$.sqlite3_vfs_find(null),ot=Pe?new $.sqlite3_vfs(Pe):null;return _e.$iVersion=2,_e.$szOsFile=$.sqlite3_file.structInfo.sizeof,_e.$mxPathname=tt,_e.addOnDispose(_e.$zName=me.allocCString(lt),()=>st(_e.pointer,0)),ot&&(_e.$xRandomness=ot.$xRandomness,_e.$xSleep=ot.$xSleep,ot.dispose()),!_e.$xRandomness&&!Le.xRandomness&&(Le.xRandomness=function(pt,Mt,Xt){const qe=me.heap8u();let nt=0;for(;nt<Mt;++nt)qe[Xt+nt]=Math.random()*255e3&255;return nt}),!_e.$xSleep&&!Le.xSleep&&(Le.xSleep=(pt,Mt)=>0),y.vfs.installVfs({vfs:{struct:_e,methods:Le}}),_e};class qt{vfsDir;#e;#t;#n;#r=new Map;#i=new Map;#s=new Set;#o=new Map;#a=new Uint8Array(Be);#c;#l;#u;constructor(_e=Object.create(null)){this.#u=_e.verbosity??Qe.verbosity,this.vfsName=_e.name||Qe.name,this.#l=it(this.vfsName),st(this.#l.pointer,this),this.vfsDir=_e.directory||"."+this.vfsName,this.#c=new DataView(this.#a.buffer,this.#a.byteOffset),this.isReady=this.reset(!!(_e.clearOnInit??Qe.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(_e.initialCapacity||Qe.initialCapacity)})}#d(_e,...Pe){this.#u>_e&&St[_e](this.vfsName+":",...Pe)}log(..._e){this.#d(2,..._e)}warn(..._e){this.#d(1,..._e)}error(..._e){this.#d(0,..._e)}getVfs(){return this.#l}getCapacity(){return this.#r.size}getFileCount(){return this.#i.size}getFileNames(){const _e=[],Pe=this.#i.keys();for(const ot of Pe)_e.push(ot);return _e}async addCapacity(_e){for(let Pe=0;Pe<_e;++Pe){const ot=Ze(),Mt=await (await this.#t.getFileHandle(ot,{create:!0})).createSyncAccessHandle();this.#r.set(Mt,ot),this.setAssociatedPath(Mt,"",0)}return this.getCapacity()}async reduceCapacity(_e){let Pe=0;for(const ot of Array.from(this.#s)){if(Pe===_e||this.getFileCount()===this.getCapacity())break;const pt=this.#r.get(ot);ot.close(),await this.#t.removeEntry(pt),this.#r.delete(ot),this.#s.delete(ot),++Pe}return Pe}releaseAccessHandles(){for(const _e of this.#r.keys())_e.close();this.#r.clear(),this.#i.clear(),this.#s.clear()}async acquireAccessHandles(_e){const Pe=[];for await(const[ot,pt]of this.#t)pt.kind==="file"&&Pe.push([ot,pt]);return Promise.all(Pe.map(async([ot,pt])=>{try{const Mt=await pt.createSyncAccessHandle();if(this.#r.set(Mt,ot),_e)Mt.truncate(ve),this.setAssociatedPath(Mt,"",0);else{const Xt=this.getAssociatedPath(Mt);Xt?this.#i.set(Xt,Mt):this.#s.add(Mt)}}catch(Mt){throw this.storeErr(Mt),this.releaseAccessHandles(),Mt}}))}getAssociatedPath(_e){_e.read(this.#a,{at:0});const Pe=this.#c.getUint32(Oe);if(this.#a[0]&&(Pe&$.SQLITE_OPEN_DELETEONCLOSE||!(Pe&ke)))return ee(`Removing file with unexpected flags ${Pe.toString(16)}`,this.#a),this.setAssociatedPath(_e,"",0),"";const ot=new Uint32Array(mt/4);_e.read(ot,{at:et});const pt=this.computeDigest(this.#a);if(ot.every((Mt,Xt)=>Mt===pt[Xt])){const Mt=this.#a.findIndex(Xt=>Xt===0);return Mt===0&&_e.truncate(ve),Mt?Ge.decode(this.#a.subarray(0,Mt)):""}else return ee("Disassociating file with bad digest."),this.setAssociatedPath(_e,"",0),""}setAssociatedPath(_e,Pe,ot){const pt=Re.encodeInto(Pe,this.#a);tt<=pt.written+1&&S("Path too long:",Pe),this.#a.fill(0,pt.written,tt),this.#c.setUint32(Oe,ot);const Mt=this.computeDigest(this.#a);_e.write(this.#a,{at:0}),_e.write(Mt,{at:et}),_e.flush(),Pe?(this.#i.set(Pe,_e),this.#s.delete(_e)):(_e.truncate(ve),this.#s.add(_e))}computeDigest(_e){let Pe=0xdeadbeef,ot=0x41c6ce57;for(const pt of _e)Pe=31*Pe+pt*307,ot=31*ot+pt*307;return new Uint32Array([Pe>>>0,ot>>>0])}async reset(_e){await this.isReady;let Pe=await navigator.storage.getDirectory(),ot;for(const pt of this.vfsDir.split("/"))pt&&(ot=Pe,Pe=await Pe.getDirectoryHandle(pt,{create:!0}));return this.#e=Pe,this.#n=ot,this.#t=await this.#e.getDirectoryHandle(Te,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(_e)}getPath(_e){return me.isPtr(_e)&&(_e=me.cstrToJs(_e)),(_e instanceof URL?_e:new URL(_e,"file://localhost/")).pathname}deletePath(_e){const Pe=this.#i.get(_e);return Pe&&(this.#i.delete(_e),this.setAssociatedPath(Pe,"",0)),!!Pe}storeErr(_e,Pe){return _e&&(_e.sqlite3Rc=Pe||$.SQLITE_IOERR,this.error(_e)),this.$error=_e,Pe}popErr(){const _e=this.$error;return this.$error=void 0,_e}nextAvailableSAH(){const[_e]=this.#s.keys();return _e}getOFileForS3File(_e){return this.#o.get(_e)}mapS3FileToOFile(_e,Pe){Pe?(this.#o.set(_e,Pe),Q(_e,this)):(this.#o.delete(_e),Q(_e,!1))}hasFilename(_e){return this.#i.has(_e)}getSAHForPath(_e){return this.#i.get(_e)}async removeVfs(){if(!this.#l.pointer||!this.#t)return!1;$.sqlite3_vfs_unregister(this.#l.pointer),this.#l.dispose(),delete R[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(Te,{recursive:!0}),this.#t=void 0,await this.#n.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#n=void 0}catch(_e){y.config.error(this.vfsName,"removeVfs() failed:",_e)}return!0}exportFile(_e){const Pe=this.#i.get(_e)||S("File not found:",_e),ot=Pe.getSize()-ve,pt=new Uint8Array(ot>0?ot:0);if(ot>0){const Mt=Pe.read(pt,{at:ve});Mt!=ot&&S("Expected to read "+ot+" bytes but read "+Mt+".")}return pt}async importDbChunked(_e,Pe){const ot=this.#i.get(_e)||this.nextAvailableSAH()||S("No available handles to import to.");ot.truncate(0);let pt=0,Mt,Xt=!1;try{for(;(Mt=await Pe())!==void 0;)Mt instanceof ArrayBuffer&&(Mt=new Uint8Array(Mt)),pt===0&&Mt.byteLength>=15&&(fe.affirmDbHeader(Mt),Xt=!0),ot.write(Mt,{at:ve+pt}),pt+=Mt.byteLength;if((pt<512||pt%512!==0)&&S("Input size",pt,"is not correct for an SQLite database."),!Xt){const qe=new Uint8Array(20);ot.read(qe,{at:0}),fe.affirmDbHeader(qe)}ot.write(new Uint8Array([1,1]),{at:ve+18})}catch(qe){throw this.setAssociatedPath(ot,"",0),qe}return this.setAssociatedPath(ot,_e,$.SQLITE_OPEN_MAIN_DB),pt}importDb(_e,Pe){if(Pe instanceof ArrayBuffer)Pe=new Uint8Array(Pe);else if(Pe instanceof Function)return this.importDbChunked(_e,Pe);const ot=this.#i.get(_e)||this.nextAvailableSAH()||S("No available handles to import to."),pt=Pe.byteLength;(pt<512||pt%512!=0)&&S("Byte array size is invalid for an SQLite db.");const Mt="SQLite format 3";for(let qe=0;qe<Mt.length;++qe)Mt.charCodeAt(qe)!==Pe[qe]&&S("Input does not contain an SQLite database header.");const Xt=ot.write(Pe,{at:ve});return Xt!=pt?(this.setAssociatedPath(ot,"",0),S("Expected to write "+pt+" bytes but wrote "+Xt+".")):(ot.write(new Uint8Array([1,1]),{at:ve+18}),this.setAssociatedPath(ot,_e,$.SQLITE_OPEN_MAIN_DB)),Xt}}class Wt{#e;constructor(_e){this.#e=_e,this.vfsName=_e.vfsName}async addCapacity(_e){return this.#e.addCapacity(_e)}async reduceCapacity(_e){return this.#e.reduceCapacity(_e)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(_e){const Pe=this.#e.getCapacity();return Pe<_e?this.#e.addCapacity(_e-Pe):Pe}exportFile(_e){return this.#e.exportFile(_e)}importDb(_e,Pe){return this.#e.importDb(_e,Pe)}async wipeFiles(){return this.#e.reset(!0)}unlink(_e){return this.#e.deletePath(_e)}async removeVfs(){return this.#e.removeVfs()}}const Zt=async()=>{const lt=await navigator.storage.getDirectory(),_e=".opfs-sahpool-sync-check-"+Ze(),pt=(await (await lt.getFileHandle(_e,{create:!0})).createSyncAccessHandle()).close();return await pt,await lt.removeEntry(_e),pt?.then&&S("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};y.installOpfsSAHPoolVfs=async function(lt=Object.create(null)){lt=Object.assign(Object.create(null),Qe,lt||{});const _e=lt.name;if(lt.$testThrowPhase1)throw lt.$testThrowPhase1;if(R[_e])try{return await R[_e]}catch(Pe){if(lt.forceReinitIfPreviouslyFailed)delete R[_e];else throw Pe}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?R[_e]=Promise.reject(new Error("Missing required OPFS APIs.")):R[_e]=Zt().then(async function(){if(lt.$testThrowPhase2)throw lt.$testThrowPhase2;const Pe=new qt(lt);return Pe.isReady.then(async()=>{const ot=new Wt(Pe);if(y.oo1){const pt=y.oo1,Mt=Pe.getVfs(),Xt=function(...qe){const nt=pt.DB.dbCtorHelper.normalizeArgs(...qe);nt.vfs=Mt.$zName,pt.DB.dbCtorHelper.call(this,nt)};Xt.prototype=Object.create(pt.DB.prototype),ot.OpfsSAHPoolDb=Xt}return Pe.log("VFS initialized."),ot}).catch(async ot=>{throw await Pe.removeVfs().catch(()=>{}),ot})}).catch(Pe=>R[_e]=Promise.reject(Pe))}}),typeof g<"u"){const y=Object.assign(Object.create(null),{exports:typeof he>"u"?g.asm:he,memory:g.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=y;let S;try{S=globalThis.sqlite3ApiBootstrap()}catch(N){throw console.error("sqlite3ApiBootstrap() error:",N),N}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}g.sqlite3=S}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),n=o,n}})();const g7=function(){const t=h1;if(!t)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...n)=>console.warn("sqlite3.debugModule:",...n):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const n=e.moduleScript.src.split("/");n.pop(),e.sqlite3Dir=n.join("/")+"/"}if(globalThis.sqlite3InitModule=function n(...r){return t(...r).then(i=>{const s=i.sqlite3;s.scriptInfo=e,n.__isUnderTest&&(s.__isUnderTest=!0);const o=s.asyncPostInit;return delete s.asyncPostInit,o()}).catch(i=>{throw console.error("Exception loading sqlite3 module:",i),i})},globalThis.sqlite3InitModule.ready=t.ready,globalThis.sqlite3InitModuleState.moduleScript){const n=globalThis.sqlite3InitModuleState;let r=n.moduleScript.src.split("/");r.pop(),n.scriptDir=r.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();h1=g7;const y7=h1;globalThis.sqlite3Worker1Promiser=function t(e=t.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const h=e;e=Object.assign(Object.create(null),t.defaultConfig),e.onready=h}else e=Object.assign(Object.create(null),t.defaultConfig,e);const n=Object.create(null),r=function(){},i=e.onerror||r,s=e.debug||r,o=e.generateMessageId?void 0:Object.create(null),l=e.generateMessageId||function(h){return h.type+"#"+(o[h.type]=(o[h.type]||0)+1)},u=(...h)=>{throw new Error(h.join(" "))};e.worker||(e.worker=t.defaultConfig.worker),typeof e.worker=="function"&&(e.worker=e.worker());let f,p;return e.worker.onmessage=function(h){h=h.data,s("worker1.onmessage",h);let b=n[h.messageId];if(!b){if(h&&h.type==="sqlite3-api"&&h.result==="worker1-ready"){e.onready&&e.onready(p);return}if(b=n[h.type],b&&b.onrow){b.onrow(h);return}e.onunhandled?e.onunhandled(arguments[0]):i("sqlite3Worker1Promiser() unhandled worker message:",h);return}switch(delete n[h.messageId],h.type){case"error":b.reject(h);return;case"open":f||(f=h.dbId);break;case"close":h.dbId===f&&(f=void 0);break}try{b.resolve(h)}catch(x){b.reject(x)}},p=function(){let h;arguments.length===1?h=arguments[0]:arguments.length===2?(h=Object.create(null),h.type=arguments[0],h.args=arguments[1],h.dbId=h.args.dbId):u("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!h.dbId&&h.type!=="open"&&(h.dbId=f),h.messageId=l(h),h.departureTime=performance.now();const b=Object.create(null);b.message=h;let x;h.type==="exec"&&h.args&&(typeof h.args.callback=="function"?(x=h.messageId+":row",b.onrow=h.args.callback,h.args.callback=x,n[x]=b):typeof h.args.callback=="string"&&u("exec callback may not be a string when using the Promise interface."));let _=new Promise(function(E,I){b.resolve=E,b.reject=I,n[h.messageId]=b,s("Posting",h.type,"message to Worker dbId="+(f||"default")+":",h),e.worker.postMessage(h)});return x&&(_=_.finally(()=>delete n[x])),_}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-BF9rosUC.js",import.meta.url),{type:"module"})},onerror:(...t)=>console.error("worker1 promiser error",...t)};sqlite3Worker1Promiser.v2=function(t){let e;typeof t=="function"?(e=t,t={}):typeof t?.onready=="function"&&(e=t.onready,delete t.onready);const n=Object.create(null);t=Object.assign(t||Object.create(null),{onready:async function(i){try{e&&await e(i),n.resolve(i)}catch(s){n.reject(s)}}});const r=new Promise(function(i,s){n.resolve=i,n.reject=s});try{this.original(t)}catch(i){n.reject(i)}return r}.bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;function Tj(){let t,e;return{lock:async()=>{for(;t;)await t;t=new Promise(i=>{e=i})},unlock:async()=>{const i=e;t=void 0,e=void 0,i?.()}}}function y0(t,e){const n={rows:[],columns:[]},r=t.exec({sql:e.sql,bind:e.params,returnValue:"resultRows",rowMode:"array",columnNames:n.columns});switch(e.method){case"run":break;case"get":n.rows=r[0]??[];break;case"all":default:n.rows=r;break}return n}function ND(t){const e=t.split(/[\\/]/).filter(s=>s!==""),n=e.pop();if(!n)throw new Error("Database path is invalid.");const r=["journal","wal","shm"].map(s=>`${n}-${s}`);return{directories:e,fileName:n,tempFileNames:r,getDirectoryHandle:async()=>{let s=await navigator.storage.getDirectory();for(let o of e)s=await s.getDirectoryHandle(o);return s}}}async function qE(t,e){let n;if(t instanceof Blob?n=t.stream():n=t,n instanceof ReadableStream&&e){const i=n.getReader();switch(e){case"callback":return async()=>(await i.read()).value;case"buffer":const s=[];let o=!1;for(;!o;){const p=await i.read();p.value&&s.push(p.value),o=p.done}const l=s.reduce((p,h)=>p+h.length,0),u=new Uint8Array(l);let f=0;return s.forEach(p=>{u.set(p,f),f+=p.length}),u}}else return n}class b7{constructor(e){Object.defineProperty(this,"sqlite3",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"db",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dbStorageType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"pointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userFunctions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"initMutex",{enumerable:!0,configurable:!0,writable:!0,value:Tj()}),Object.defineProperty(this,"transactionMutex",{enumerable:!0,configurable:!0,writable:!0,value:Tj()}),Object.defineProperty(this,"transactionKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"init",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;await this.initMutex.lock();const{databasePath:i,readOnly:s,verbose:o}=this.config,l=[s===!0?"r":"cw",o===!0?"t":""].join("");try{this.sqlite3||(this.sqlite3=await y7()),this.db&&this.destroy(),"opfs"in this.sqlite3&&i!==":memory:"?(this.db=new this.sqlite3.oo1.OpfsDb(i,l),this.dbStorageType="opfs"):(this.db=new this.sqlite3.oo1.DB(i,l),this.dbStorageType="memory",i!==":memory:"&&console.warn(`The origin private file system is not available, so ${i} will not be persisted. Make sure your web server is configured to use the correct HTTP response headers (See https://sqlocal.dallashoffman.com/guide/setup#cross-origin-isolation).`)),this.dbStorageType!=="memory"&&(this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${i})`),this.reinitChannel.onmessage=u=>{this.config.clientKey!==u.data.clientKey&&this.init(u.data.reason)}),this.userFunctions.forEach(this.initUserFunction),this.execInitStatements(),this.emitMessage({type:"event",event:"connect",reason:r})}catch(u){this.emitMessage({type:"error",error:u,queryKey:null}),this.destroy()}finally{await this.initMutex.unlock()}}}),Object.defineProperty(this,"postMessage",{enumerable:!0,configurable:!0,writable:!0,value:async(r,i)=>{const s=r instanceof MessageEvent?r.data:r;switch(await this.initMutex.lock(),s.type){case"config":this.editConfig(s);break;case"query":case"batch":case"transaction":this.exec(s);break;case"function":this.createUserFunction(s);break;case"getinfo":this.getDatabaseInfo(s);break;case"import":this.importDb(s);break;case"export":this.exportDb(s);break;case"delete":this.deleteDb(s);break;case"destroy":this.destroy(s);break}await this.initMutex.unlock()}}),Object.defineProperty(this,"emitMessage",{enumerable:!0,configurable:!0,writable:!0,value:(r,i=[])=>{this.onmessage&&this.onmessage(r,i)}}),Object.defineProperty(this,"editConfig",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.config=r.config,this.init("initial")}}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(this.db)try{const i={type:"data",queryKey:r.queryKey,data:[]};switch(r.type){case"query":const s=this.transactionKey!==null&&this.transactionKey===r.transactionKey;try{s||await this.transactionMutex.lock();const o=y0(this.db,r);i.data.push(o)}finally{s||await this.transactionMutex.unlock()}break;case"batch":try{await this.transactionMutex.lock(),this.db.transaction(o=>{for(let l of r.statements){const u=y0(o,l);i.data.push(u)}})}finally{await this.transactionMutex.unlock()}break;case"transaction":if(r.action==="begin"&&(await this.transactionMutex.lock(),this.transactionKey=r.transactionKey,this.db.exec({sql:"BEGIN"})),(r.action==="commit"||r.action==="rollback")&&this.transactionKey!==null&&this.transactionKey===r.transactionKey){const o=r.action==="commit"?"COMMIT":"ROLLBACK";this.db.exec({sql:o}),this.transactionKey=null,await this.transactionMutex.unlock()}break}this.emitMessage(i)}catch(i){this.emitMessage({type:"error",error:i,queryKey:r.queryKey})}}}),Object.defineProperty(this,"execInitStatements",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.db&&this.config.onInitStatements)for(let r of this.config.onInitStatements)y0(this.db,r)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{try{const i=this.config.databasePath,s=this.dbStorageType,o=s!==void 0?s!=="memory"?await navigator.storage?.persisted():!1:void 0,u=this.db?.exec({sql:"SELECT page_count * page_size AS size FROM pragma_page_count(), pragma_page_size()",returnValue:"resultRows",rowMode:"array"})?.[0]?.[0],f=typeof u=="number"?u:void 0;this.emitMessage({type:"info",queryKey:r.queryKey,info:{databasePath:i,databaseSizeBytes:f,storageType:s,persisted:o}})}catch(i){this.emitMessage({type:"error",queryKey:r.queryKey,error:i})}}}),Object.defineProperty(this,"createUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{const{functionName:i,functionType:s,queryKey:o}=r;let l;if(this.userFunctions.has(i)){this.emitMessage({type:"error",error:new Error(`A user-defined function with the name "${i}" has already been created for this SQLocal instance.`),queryKey:o});return}s==="callback"?l=(...u)=>{this.emitMessage({type:"callback",name:i,args:u})}:l=this.proxy[`_sqlocal_func_${i}`];try{this.initUserFunction({type:s,name:i,func:l}),this.emitMessage({type:"success",queryKey:o})}catch(u){this.emitMessage({type:"error",error:u,queryKey:o})}}}),Object.defineProperty(this,"initUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.createFunction({name:r.name,xFunc:(i,...s)=>r.func(...s),arity:-1}),this.userFunctions.set(r.name,r))}}),Object.defineProperty(this,"importDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.sqlite3||!this.config.databasePath||!this.db)return;const{queryKey:i,database:s}=r;let o=!1;try{if(this.dbStorageType==="opfs"){this.destroy();const l=await qE(s,"callback");await this.sqlite3.oo1.OpfsDb.importDb(this.config.databasePath,l)}else{const l=await qE(s,"buffer"),u=this.sqlite3.wasm.allocFromTypedArray(l);this.pointers.push(u);const f=this.sqlite3.capi.sqlite3_deserialize(this.db,"main",u,l.byteLength,l.byteLength,this.config.readOnly?this.sqlite3.capi.SQLITE_DESERIALIZE_READONLY:this.sqlite3.capi.SQLITE_DESERIALIZE_RESIZEABLE);this.db.checkRc(f),this.execInitStatements()}}catch(l){this.emitMessage({type:"error",error:l,queryKey:i}),o=!0}finally{this.dbStorageType!=="memory"&&await this.init("overwrite")}o||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"exportDb",{enumerable:!0,configurable:!0,writable:!0,value:r=>{if(!this.sqlite3||!this.db)return;const{queryKey:i}=r;try{const s=this.sqlite3.capi.sqlite3_js_db_export(this.db);this.emitMessage({type:"buffer",queryKey:i,buffer:s},[s])}catch(s){this.emitMessage({type:"error",error:s,queryKey:i})}}}),Object.defineProperty(this,"deleteDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;const{queryKey:i}=r;let s=!1;try{if(this.dbStorageType==="opfs"){const{getDirectoryHandle:o,fileName:l,tempFileNames:u}=ND(this.config.databasePath),f=await o(),p=[l,...u];this.destroy(),await Promise.all(p.map(async h=>f.removeEntry(h).catch(b=>{if(!(b instanceof DOMException&&b.name==="NotFoundError"))throw b})))}else this.destroy()}catch(o){this.emitMessage({type:"error",error:o,queryKey:i}),s=!0}finally{await this.init("delete")}s||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.exec({sql:"PRAGMA optimize"}),this.db.close(),this.db=void 0,this.dbStorageType=void 0),this.reinitChannel&&(this.reinitChannel.close(),this.reinitChannel=void 0),this.pointers.forEach(i=>this.sqlite3?.wasm.dealloc(i)),this.pointers=[],r&&this.emitMessage({type:"success",queryKey:r.queryKey})}});const n=e?globalThis:p1(globalThis);this.proxy=n,this.init("initial")}}function Bb(t,...e){return{sql:t.join("?"),params:e}}function v7(t){return!t.some(e=>!Array.isArray(e))}function b0(t,e){let n;return v7(t)?n=t:n=[t],n.map(r=>{const i={};return e.forEach((s,o)=>{i[s]=r[o]}),i})}function x7(t){return typeof t=="object"&&t!==null&&"getSQL"in t&&typeof t.getSQL=="function"}function w7(t){return typeof t=="object"&&t!==null&&"sql"in t&&typeof t.sql=="string"&&"params"in t}function _7(t){if(typeof t=="function"&&(t=t(Bb)),x7(t))try{if(!("toSQL"in t&&typeof t.toSQL=="function"))throw 1;const r=t.toSQL();if(!w7(r))throw 2;return r}catch{throw new Error("The passed statement could not be parsed.")}const e=t.sql;let n=[];return"params"in t?n=t.params:"parameters"in t&&(n=t.parameters),{sql:e,params:n}}function v0(){return crypto.randomUUID()}function Rj(t,e){let n;return typeof t=="string"?n={sql:t,params:e}:n=Bb(t,...e),n}async function Zg(t,e,n,r){return!e&&"locks"in navigator?navigator.locks.request(`_sqlocal_mutation_(${n.databasePath})`,{mode:t},r):r()}class S7{constructor(e){Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"bypassMutationLock",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"userCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"queriesInProgress",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processMessageEvent",{enumerable:!0,configurable:!0,writable:!0,value:o=>{const l=o instanceof MessageEvent?o.data:o,u=this.queriesInProgress;switch(l.type){case"success":case"data":case"buffer":case"info":case"error":if(l.queryKey&&u.has(l.queryKey)){const[p,h]=u.get(l.queryKey);l.type==="error"?h(l.error):p(l),u.delete(l.queryKey)}else if(l.type==="error")throw l.error;break;case"callback":const f=this.userCallbacks.get(l.name);f&&f(...l.args??[]);break;case"event":this.config.onConnect?.(l.reason);break}}}),Object.defineProperty(this,"createQuery",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Zg("shared",this.bypassMutationLock||o.type==="import"||o.type==="delete",this.config,async()=>{if(this.isDestroyed===!0)throw new Error("This SQLocal client has been destroyed. You will need to initialize a new client in order to make further queries.");const l=v0();switch(o.type){case"import":this.processor.postMessage({...o,queryKey:l},[o.database]);break;default:this.processor.postMessage({...o,queryKey:l});break}return new Promise((u,f)=>{this.queriesInProgress.set(l,[u,f])})})}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l,u="all",f)=>{const p=await this.createQuery({type:"query",transactionKey:f,sql:o,params:l,method:u}),h={rows:[],columns:[]};return p.type==="data"&&(h.rows=p.data[0]?.rows??[],h.columns=p.data[0]?.columns??[]),h}}),Object.defineProperty(this,"execBatch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const l=await this.createQuery({type:"batch",statements:o}),u=new Array(o.length).fill({rows:[],columns:[]});return l.type==="data"&&l.data.forEach((f,p)=>{u[p]=f}),u}}),Object.defineProperty(this,"sql",{enumerable:!0,configurable:!0,writable:!0,value:async(o,...l)=>{const u=Rj(o,l),{rows:f,columns:p}=await this.exec(u.sql,u.params,"all");return b0(f,p)}}),Object.defineProperty(this,"batch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const l=o(Bb);return(await this.execBatch(l)).map(({rows:f,columns:p})=>b0(f,p))}}),Object.defineProperty(this,"beginTransaction",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=v0();await this.createQuery({type:"transaction",transactionKey:o,action:"begin"});const l=async h=>{const b=_7(h),{rows:x,columns:_}=await this.exec(b.sql,b.params,"all",o);return b0(x,_)};return{query:l,sql:async(h,...b)=>{const x=Rj(h,b);return await l(x)},commit:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"commit"})},rollback:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"rollback"})}}}}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Zg("exclusive",!1,this.config,async()=>{let l;this.bypassMutationLock=!0;try{l=await this.beginTransaction();const u=await o({sql:l.sql,query:l.query});return await l.commit(),u}catch(u){throw await l?.rollback(),u}finally{this.bypassMutationLock=!1}})}),Object.defineProperty(this,"createCallbackFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{await this.createQuery({type:"function",functionName:o,functionType:"callback"}),this.userCallbacks.set(o,l)}}),Object.defineProperty(this,"createScalarFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{const u=`_sqlocal_func_${o}`;this.proxy===globalThis&&(this.proxy[u]=l),await this.createQuery({type:"function",functionName:o,functionType:"scalar"}),this.proxy!==globalThis&&(this.proxy[u]=l)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=await this.createQuery({type:"getinfo"});if(o.type==="info")return o.info;throw new Error("The database failed to return valid information.")}}),Object.defineProperty(this,"getDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{let o,l;const{storageType:u}=await this.getDatabaseInfo();if(u==="opfs"){const f=ND(this.config.databasePath),{directories:p,getDirectoryHandle:h}=f;o=f.fileName;const b=`backup-${Date.now()}--${o}`,x=`${p.join("/")}/${b}`;await this.exec("VACUUM INTO ?",[x]);const _=await h();l=await (await (await _.getFileHandle(b)).getFile()).arrayBuffer(),await _.removeEntry(b)}else{const f=await this.createQuery({type:"export"});if(f.type==="buffer")o="database.sqlite3",l=f.buffer;else throw new Error("The database failed to export.")}return new File([l],o,{type:"application/x-sqlite3"})}}),Object.defineProperty(this,"overwriteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{await Zg("exclusive",!1,this.config,async()=>{try{const u=await qE(o);await this.createQuery({type:"import",database:u}),typeof l=="function"&&(this.bypassMutationLock=!0,await l()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"overwrite"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"deleteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{await Zg("exclusive",!1,this.config,async()=>{try{await this.createQuery({type:"delete"}),typeof o=="function"&&(this.bypassMutationLock=!0,await o()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"delete"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{await this.createQuery({type:"destroy"}),this.processor instanceof Worker&&(this.processor.removeEventListener("message",this.processMessageEvent),this.processor.terminate()),this.queriesInProgress.clear(),this.userCallbacks.clear(),this.reinitChannel.close(),this.isDestroyed=!0}});const n=typeof e=="string"?{databasePath:e}:e,{onInit:r,onConnect:i,...s}=n;this.config=n,this.clientKey=v0(),this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${s.databasePath})`),typeof globalThis.Worker<"u"&&s.databasePath!==":memory:"?(this.processor=new Worker(new URL("/assets/worker-DxuAzsZq.js",import.meta.url),{type:"module"}),this.processor.addEventListener("message",this.processMessageEvent),this.proxy=p1(this.processor)):(this.processor=new b7(!0),this.processor.onmessage=o=>this.processMessageEvent(o),this.proxy=globalThis),this.processor.postMessage({type:"config",config:{...s,clientKey:this.clientKey,onInitStatements:r?.(Bb)??[]}})}}class E7 extends S7{constructor(){super(...arguments),Object.defineProperty(this,"dialect",{enumerable:!0,configurable:!0,writable:!0,value:{createAdapter:()=>new NH,createDriver:()=>new N7(this),createIntrospector:e=>new EH(e),createQueryCompiler:()=>new wH}})}}class N7{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e})}async init(){}async acquireConnection(){return new I7(this.client)}async releaseConnection(){}async beginTransaction(e){e.transaction=await this.client.beginTransaction()}async commitTransaction(e){await e.transaction?.commit(),e.transaction=null}async rollbackTransaction(e){await e.transaction?.rollback(),e.transaction=null}async destroy(){await this.client.destroy()}}class I7{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:null})}async executeQuery(e){let n;return this.transaction===null?n=await this.client.sql(e.sql,...e.parameters):n=await this.transaction.query(e),{rows:n}}async *streamQuery(){throw new Error("SQLite3 does not support streaming.")}}const k7=({database:t,bootstrap:e})=>{const{dialect:n}=new E7({databasePath:`${t}.sqlite3`,onInit(i){return[i`PRAGMA foreign_keys = ON;`]}}),r=new VN({dialect:n});return{kysely:r,async bootstrap(){return e({kysely:r})}}},yi=xn({slot:{base:["border","border-gray-300","rounded-md","p-4","flex","flex-col","gap-2","items-center"],input:["w-full","border","border-gray-300","rounded-md","p-2","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"]},variant:{isLoading:{true:[]},isSubmitting:{true:[]}},match:[{if:{isSubmitting:!0},then:{base:["opacity-50","pointer-events-none","select-none"]}}],defaults:{isLoading:!1,isSubmitting:!1}}),C7="icon-[material-symbols--error-outline]",T7=xn({slot:{base:["flex","flex-row","gap-1","items-center","text-red-600","p-2"]},variant:{highlight:{true:[]},compact:{true:[]}},match:[{if:{highlight:!0},then:{base:["bg-red-100","p-2","font-bold","border","border-red-200","rounded-md","w-full"]}},{if:{compact:!0},then:{base:["p-0"]}}],defaults:{highlight:!1,compact:!1}}),li=({error:t,variant:e,tva:n=T7,css:r})=>{const i=n({...e,css:r}).slots;return t?.message?d.jsxs("div",{className:i.base(),children:[d.jsx(en,{icon:C7}),d.jsx("span",{children:sa.rich(t.message)})]}):null},R7=xn({slot:{base:["flex","flex-col","gap-1","w-full"],input:[]},variant:{required:{true:[]},disabled:{true:[]},isSubmitting:{true:[]},isLoading:{true:[]},isError:{true:[]}},match:[{if:{isError:!0},then:{base:["text-red-600"]}},{if:{required:!0},then:{base:["text-emerald-600","font-bold"]}}],defaults:{required:!1,disabled:!1,isSubmitting:!1,isLoading:!1,isError:!1}}),hn=({label:t,hint:e,required:n=!1,formState:r,name:i,children:s,variant:o,tva:l=R7,css:u})=>{const f=l({isSubmitting:r.isSubmitting,isLoading:r.isLoading,isError:!!r.errors[i],required:n,...o,css:u}).slots;return d.jsxs("div",{className:f.base(),children:[d.jsxs("div",{className:"flex flex-row justify-between",children:[t?d.jsx("label",{htmlFor:i,children:t}):null,d.jsx(li,{variant:{compact:!0},error:r.errors[i]})]}),e?d.jsx("div",{className:"text-sm italic",children:e}):null,d.jsx("div",{className:f.input(),children:s})]})},Gi=({form:t,mutation:e})=>{const n=t.handleSubmit(async r=>e.mutateAsync(r,{onError:i=>{KN({error:i,errors:[IN({error:i,schema:HN,onError:({data:s})=>{t.setError("root",{message:s.message})}})],onError:s=>{t.setError("root",{message:s.message})}})}}).catch(()=>{}));return r=>{r.stopPropagation(),n(r)}};function j7(t,e,n,r={leading:!1}){const[i,s]=H.useState(t),[o,l]=H.useState(t),u=H.useRef(null),f=H.useRef(!0),p=()=>window.clearTimeout(u.current||void 0);H.useEffect(()=>p,[]),H.useEffect(()=>{e(i)},[i]),H.useEffect(()=>{l(t),s(t)},[t]);const h=H.useCallback(b=>{l(b),p(),f.current&&r.leading?s(b):u.current=window.setTimeout(()=>{f.current=!0,s(b)},n),f.current=!1},[r.leading]);return[o,h]}const O7=xn({slot:{base:["relative","w-full"],search:["absolute","inset-y-0","left-2","flex","items-center","pointer-events-none","text-slate-500"],input:["pl-8","py-1","w-full","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","block"],clear:["absolute","inset-y-0","right-2","flex","items-center","cursor-pointer","text-slate-300","hover:text-slate-500"]},variant:{},defaults:{}}),ID=({value:t="",onFulltext:e,textPlaceholder:n,variant:r,tva:i=O7,css:s})=>{const o=i({...r,css:s}).slots,[l,u]=j7(t,f=>{e(f||"")},500);return d.jsxs("div",{className:o.base(),children:[d.jsx("div",{className:o.search(),children:d.jsx(en,{icon:"icon-[material-symbols-light--search]",variant:{size:"xl"}})}),d.jsx("input",{value:l||"",className:o.input(),type:"text",placeholder:n||sa.text("Fulltext (placeholder)"),onChange:f=>{u(f.target.value)}}),t&&d.jsx("div",{className:o.clear(),onClick:()=>{e("")},children:d.jsx(en,{icon:"icon-[gridicons--cross]",variant:{size:"md"}})})]})},Ps="icon-[pajamas--go-back]",zb="icon-[line-md--confirm-circle]",kD="icon-[mage--edit]",q7="icon-[arcticons--nothing-x]",A7="icon-[tabler--filter-plus]",jj="icon-[tabler--filter-minus]",Vv="icon-[ph--list-dashes-thin]",P7="icon-[svg-spinners--3-dots-scale]",m1="icon-[material-symbols-light--logout-sharp]",F7="icon-[fluent--shape-intersect-20-regular]",Uv="icon-[fluent--checkbox-unchecked-20-regular]",Hv="icon-[fluent--checkbox-checked-20-regular]",Fh="icon-[teenyicons--tag-outline]",ii="icon-[ph--trash]",D7="icon-[clarity--upload-cloud-line]",g1="icon-[ph--user]",L7=async({queryClient:t,keys:e})=>{for await(const n of e)await t.invalidateQueries({queryKey:n,refetchType:"all"})},Vn=t=>{const e=lv(),n=Lo();return async()=>{await L7({keys:t,queryClient:e}),await n.invalidate()}};var x0={exports:{}},w0,Oj;function M7(){if(Oj)return w0;Oj=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return w0=t,w0}var _0,qj;function $7(){if(qj)return _0;qj=1;var t=M7();function e(){}function n(){}return n.resetWarningCache=e,_0=function(){function r(o,l,u,f,p,h){if(h!==t){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},_0}var Aj;function B7(){return Aj||(Aj=1,x0.exports=$7()()),x0.exports}var z7=B7();const Yn=uo(z7);function hu(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(p){try{f(r.next(p))}catch(h){o(h)}}function u(p){try{f(r.throw(p))}catch(h){o(h)}}function f(p){p.done?s(p.value):i(p.value).then(l,u)}f((r=r.apply(t,e||[])).next())})}const W7=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Qd(t,e,n){const r=V7(t),{webkitRelativePath:i}=t,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&Pj(r,"path",s),Pj(r,"relativePath",s),r}function V7(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=W7.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function Pj(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const U7=[".DS_Store","Thumbs.db"];function H7(t){return hu(this,void 0,void 0,function*(){return Wb(t)&&K7(t.dataTransfer)?Z7(t.dataTransfer,t.type):Q7(t)?G7(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?J7(t):[]})}function K7(t){return Wb(t)}function Q7(t){return Wb(t)&&Wb(t.target)}function Wb(t){return typeof t=="object"&&t!==null}function G7(t){return AE(t.target.files).map(e=>Qd(e))}function J7(t){return hu(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>Qd(n))})}function Z7(t,e){return hu(this,void 0,void 0,function*(){if(t.items){const n=AE(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(Y7));return Fj(CD(r))}return Fj(AE(t.files).map(n=>Qd(n)))})}function Fj(t){return t.filter(e=>U7.indexOf(e.name)===-1)}function AE(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function Y7(t){if(typeof t.webkitGetAsEntry!="function")return Dj(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?TD(e):Dj(t,e)}function CD(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?CD(n):[n]],[])}function Dj(t,e){return hu(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const s=yield t.getAsFileSystemHandle();if(s===null)throw new Error(`${t} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,Qd(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return Qd(r,(n=e?.fullPath)!==null&&n!==void 0?n:void 0)})}function X7(t){return hu(this,void 0,void 0,function*(){return t.isDirectory?TD(t):eG(t)})}function TD(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function s(){e.readEntries(o=>hu(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(X7));i.push(l),s()}else try{const l=yield Promise.all(i);n(l)}catch(l){r(l)}}),o=>{r(o)})}s()})}function eG(t){return hu(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=Qd(r,t.fullPath);e(i)},r=>{n(r)})})})}var Yg={},Lj;function tG(){return Lj||(Lj=1,Yg.__esModule=!0,Yg.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?s===l.replace(/\/.*$/,""):i===l})}return!0}),Yg}var nG=tG();const S0=uo(nG);function Mj(t){return sG(t)||iG(t)||jD(t)||rG()}function rG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sG(t){if(Array.isArray(t))return PE(t)}function $j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$j(Object(n),!0).forEach(function(r){RD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$j(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dh(t,e){return lG(t)||aG(t,e)||jD(t,e)||oG()}function oG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jD(t,e){if(t){if(typeof t=="string")return PE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PE(t,e)}}function PE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aG(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function lG(t){if(Array.isArray(t))return t}var cG=typeof S0=="function"?S0:S0.default,OD="file-invalid-type",qD="file-too-large",AD="file-too-small",PD="too-many-files",uG={FileInvalidType:OD,FileTooLarge:qD,FileTooSmall:AD,TooManyFiles:PD},dG=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:OD,message:"File type must be ".concat(r)}},zj=function(e){return{code:qD,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Wj=function(e){return{code:AD,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},fG={code:PD,message:"Too many files"};function FD(t,e){var n=t.type==="application/x-moz-file"||cG(t,e);return[n,n?null:dG(e)]}function DD(t,e,n){if(Lc(t.size))if(Lc(e)&&Lc(n)){if(t.size>n)return[!1,zj(n)];if(t.size<e)return[!1,Wj(e)]}else{if(Lc(e)&&t.size<e)return[!1,Wj(e)];if(Lc(n)&&t.size>n)return[!1,zj(n)]}return[!0,null]}function Lc(t){return t!=null}function pG(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,l=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(u){var f=FD(u,n),p=Dh(f,1),h=p[0],b=DD(u,r,i),x=Dh(b,1),_=x[0],E=l?l(u):null;return h&&_&&!E})}function Vb(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Xg(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function Vj(t){t.preventDefault()}function hG(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function mG(t){return t.indexOf("Edge/")!==-1}function gG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return hG(t)||mG(t)}function Go(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(l){return!Vb(r)&&l&&l.apply(void 0,[r].concat(s)),Vb(r)})}}function yG(){return"showOpenFilePicker"in window}function bG(t){if(Lc(t)){var e=Object.entries(t).filter(function(n){var r=Dh(n,2),i=r[0],s=r[1],o=!0;return LD(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(MD))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=Dh(r,2),s=i[0],o=i[1];return Bj(Bj({},n),{},RD({},s,o))},{});return[{description:"Files",accept:e}]}return t}function vG(t){if(Lc(t))return Object.entries(t).reduce(function(e,n){var r=Dh(n,2),i=r[0],s=r[1];return[].concat(Mj(e),[i],Mj(s))},[]).filter(function(e){return LD(e)||MD(e)}).join(",")}function xG(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function wG(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function LD(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function MD(t){return/^.*\.[\w]+$/.test(t)}var _G=["children"],SG=["open"],EG=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],NG=["refKey","onChange","onClick"];function IG(t){return TG(t)||CG(t)||$D(t)||kG()}function kG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TG(t){if(Array.isArray(t))return FE(t)}function E0(t,e){return OG(t)||jG(t,e)||$D(t,e)||RG()}function RG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $D(t,e){if(t){if(typeof t=="string")return FE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FE(t,e)}}function FE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jG(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function OG(t){if(Array.isArray(t))return t}function Uj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uj(Object(n),!0).forEach(function(r){DE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ub(t,e){if(t==null)return{};var n=qG(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qG(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Kv=H.forwardRef(function(t,e){var n=t.children,r=Ub(t,_G),i=zD(r),s=i.open,o=Ub(i,SG);return H.useImperativeHandle(e,function(){return{open:s}},[s]),$n.createElement(H.Fragment,null,n(kr(kr({},o),{},{open:s})))});Kv.displayName="Dropzone";var BD={disabled:!1,getFilesFromEvent:H7,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Kv.defaultProps=BD;Kv.propTypes={children:Yn.func,accept:Yn.objectOf(Yn.arrayOf(Yn.string)),multiple:Yn.bool,preventDropOnDocument:Yn.bool,noClick:Yn.bool,noKeyboard:Yn.bool,noDrag:Yn.bool,noDragEventsBubbling:Yn.bool,minSize:Yn.number,maxSize:Yn.number,maxFiles:Yn.number,disabled:Yn.bool,getFilesFromEvent:Yn.func,onFileDialogCancel:Yn.func,onFileDialogOpen:Yn.func,useFsAccessApi:Yn.bool,autoFocus:Yn.bool,onDragEnter:Yn.func,onDragLeave:Yn.func,onDragOver:Yn.func,onDrop:Yn.func,onDropAccepted:Yn.func,onDropRejected:Yn.func,onError:Yn.func,validator:Yn.func};var LE={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function zD(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=kr(kr({},BD),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,l=e.multiple,u=e.maxFiles,f=e.onDragEnter,p=e.onDragLeave,h=e.onDragOver,b=e.onDrop,x=e.onDropAccepted,_=e.onDropRejected,E=e.onFileDialogCancel,I=e.onFileDialogOpen,T=e.useFsAccessApi,C=e.autoFocus,j=e.preventDropOnDocument,q=e.noClick,L=e.noKeyboard,M=e.noDrag,W=e.noDragEventsBubbling,P=e.onError,O=e.validator,z=H.useMemo(function(){return vG(n)},[n]),F=H.useMemo(function(){return bG(n)},[n]),V=H.useMemo(function(){return typeof I=="function"?I:Hj},[I]),U=H.useMemo(function(){return typeof E=="function"?E:Hj},[E]),B=H.useRef(null),G=H.useRef(null),Z=H.useReducer(AG,LE),le=E0(Z,2),ie=le[0],ne=le[1],oe=ie.isFocused,te=ie.isFileDialogActive,ue=H.useRef(typeof window<"u"&&window.isSecureContext&&T&&yG()),de=function(){!ue.current&&te&&setTimeout(function(){if(G.current){var ut=G.current.files;ut.length||(ne({type:"closeDialog"}),U())}},300)};H.useEffect(function(){return window.addEventListener("focus",de,!1),function(){window.removeEventListener("focus",de,!1)}},[G,te,U,ue]);var ye=H.useRef([]),we=function(ut){B.current&&B.current.contains(ut.target)||(ut.preventDefault(),ye.current=[])};H.useEffect(function(){return j&&(document.addEventListener("dragover",Vj,!1),document.addEventListener("drop",we,!1)),function(){j&&(document.removeEventListener("dragover",Vj),document.removeEventListener("drop",we))}},[B,j]),H.useEffect(function(){return!r&&C&&B.current&&B.current.focus(),function(){}},[B,C,r]);var Ne=H.useCallback(function(Me){P?P(Me):console.error(Me)},[P]),ze=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ie(Me),ye.current=[].concat(IG(ye.current),[Me.target]),Xg(Me)&&Promise.resolve(i(Me)).then(function(ut){if(!(Vb(Me)&&!W)){var Qt=ut.length,Gt=Qt>0&&pG({files:ut,accept:z,minSize:o,maxSize:s,multiple:l,maxFiles:u,validator:O}),bn=Qt>0&&!Gt;ne({isDragAccept:Gt,isDragReject:bn,isDragActive:!0,type:"setDraggedFiles"}),f&&f(Me)}}).catch(function(ut){return Ne(ut)})},[i,f,Ne,W,z,o,s,l,u,O]),je=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ie(Me);var ut=Xg(Me);if(ut&&Me.dataTransfer)try{Me.dataTransfer.dropEffect="copy"}catch{}return ut&&h&&h(Me),!1},[h,W]),De=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ie(Me);var ut=ye.current.filter(function(Gt){return B.current&&B.current.contains(Gt)}),Qt=ut.indexOf(Me.target);Qt!==-1&&ut.splice(Qt,1),ye.current=ut,!(ut.length>0)&&(ne({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Xg(Me)&&p&&p(Me))},[B,p,W]),Je=H.useCallback(function(Me,ut){var Qt=[],Gt=[];Me.forEach(function(bn){var ar=FD(bn,z),Dn=E0(ar,2),Qr=Dn[0],Pi=Dn[1],Sr=DD(bn,o,s),Jt=E0(Sr,2),Ji=Jt[0],Zi=Jt[1],Yi=O?O(bn):null;if(Qr&&Ji&&!Yi)Qt.push(bn);else{var po=[Pi,Zi];Yi&&(po=po.concat(Yi)),Gt.push({file:bn,errors:po.filter(function(pa){return pa})})}}),(!l&&Qt.length>1||l&&u>=1&&Qt.length>u)&&(Qt.forEach(function(bn){Gt.push({file:bn,errors:[fG]})}),Qt.splice(0)),ne({acceptedFiles:Qt,fileRejections:Gt,isDragReject:Gt.length>0,type:"setFiles"}),b&&b(Qt,Gt,ut),Gt.length>0&&_&&_(Gt,ut),Qt.length>0&&x&&x(Qt,ut)},[ne,l,z,o,s,u,b,x,_,O]),Xe=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ie(Me),ye.current=[],Xg(Me)&&Promise.resolve(i(Me)).then(function(ut){Vb(Me)&&!W||Je(ut,Me)}).catch(function(ut){return Ne(ut)}),ne({type:"reset"})},[i,Je,Ne,W]),Ve=H.useCallback(function(){if(ue.current){ne({type:"openDialog"}),V();var Me={multiple:l,types:F};window.showOpenFilePicker(Me).then(function(ut){return i(ut)}).then(function(ut){Je(ut,null),ne({type:"closeDialog"})}).catch(function(ut){xG(ut)?(U(ut),ne({type:"closeDialog"})):wG(ut)?(ue.current=!1,G.current?(G.current.value=null,G.current.click()):Ne(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ne(ut)});return}G.current&&(ne({type:"openDialog"}),V(),G.current.value=null,G.current.click())},[ne,V,U,T,Je,Ne,F,l]),ct=H.useCallback(function(Me){!B.current||!B.current.isEqualNode(Me.target)||(Me.key===" "||Me.key==="Enter"||Me.keyCode===32||Me.keyCode===13)&&(Me.preventDefault(),Ve())},[B,Ve]),_t=H.useCallback(function(){ne({type:"focus"})},[]),Tt=H.useCallback(function(){ne({type:"blur"})},[]),Ut=H.useCallback(function(){q||(gG()?setTimeout(Ve,0):Ve())},[q,Ve]),sn=function(ut){return r?null:ut},xe=function(ut){return L?null:sn(ut)},be=function(ut){return M?null:sn(ut)},Ie=function(ut){W&&ut.stopPropagation()},Ae=H.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=Me.refKey,Qt=ut===void 0?"ref":ut,Gt=Me.role,bn=Me.onKeyDown,ar=Me.onFocus,Dn=Me.onBlur,Qr=Me.onClick,Pi=Me.onDragEnter,Sr=Me.onDragOver,Jt=Me.onDragLeave,Ji=Me.onDrop,Zi=Ub(Me,EG);return kr(kr(DE({onKeyDown:xe(Go(bn,ct)),onFocus:xe(Go(ar,_t)),onBlur:xe(Go(Dn,Tt)),onClick:sn(Go(Qr,Ut)),onDragEnter:be(Go(Pi,ze)),onDragOver:be(Go(Sr,je)),onDragLeave:be(Go(Jt,De)),onDrop:be(Go(Ji,Xe)),role:typeof Gt=="string"&&Gt!==""?Gt:"presentation"},Qt,B),!r&&!L?{tabIndex:0}:{}),Zi)}},[B,ct,_t,Tt,Ut,ze,je,De,Xe,L,M,r]),Ue=H.useCallback(function(Me){Me.stopPropagation()},[]),rt=H.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=Me.refKey,Qt=ut===void 0?"ref":ut,Gt=Me.onChange,bn=Me.onClick,ar=Ub(Me,NG),Dn=DE({accept:z,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:sn(Go(Gt,Xe)),onClick:sn(Go(bn,Ue)),tabIndex:-1},Qt,G);return kr(kr({},Dn),ar)}},[G,n,l,Xe,r]);return kr(kr({},ie),{},{isFocused:oe&&!r,getRootProps:Ae,getInputProps:rt,rootRef:B,inputRef:G,open:sn(Ve)})}function AG(t,e){switch(e.type){case"focus":return kr(kr({},t),{},{isFocused:!0});case"blur":return kr(kr({},t),{},{isFocused:!1});case"openDialog":return kr(kr({},LE),{},{isFileDialogActive:!0});case"closeDialog":return kr(kr({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return kr(kr({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return kr(kr({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return kr({},LE);default:return t}}function Hj(){}const PG=Object.freeze(Object.defineProperty({__proto__:null,ErrorCode:uG,default:Kv,useDropzone:zD},Symbol.toStringTag,{value:"Module"})),FG=xn({slot:{base:["flex","items-center","justify-center","w-full"],label:["flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100"],zone:["flex","flex-col","items-center","justify-center","pt-5","pb-6","text-slate-500"]},variant:{active:{true:[]},rejected:{true:[]}},match:[{if:{active:!0},then:{label:["text-blue-400"],zone:["text-blue-400"]}},{if:{rejected:!0},then:{label:["text-red-400"],zone:["text-red-400"]}}],defaults:{active:!1,rejected:!1}}),{useDropzone:DG}=PG,LG=({id:t,accept:e,text:n,variant:r,tva:i=FG,css:s,...o})=>{const{getRootProps:l,getInputProps:u,isDragActive:f,isDragReject:p}=DG({noClick:!0,multiple:!1,accept:e,maxFiles:1,minSize:0,maxSize:8388608,...o}),h=i({active:f,rejected:p,...r,css:s}).slots;return d.jsx("div",{...l(),className:h.base(),children:d.jsxs("label",{htmlFor:t,className:h.label(),children:[d.jsxs("div",{className:h.zone(),children:[d.jsx(en,{icon:D7,variant:{size:"4xl"}}),d.jsx("p",{className:"mb-2 text-sm font-semibold",children:n?.title||sa.rich("Drag 'n' drop a file here")}),n?.message?d.jsx("p",{className:"text-xs",children:n.message}):null]}),d.jsx("input",{id:t,type:"file",className:"hidden",...u()})]})})},MG=xn({slot:{base:["min-h-screen","flex","flex-col"],header:["flex","flex-row","items-center","bg-slate-50","shadow-xs","border-b","border-b-slate-200","w-full","gap-4","p-4"],content:["grow","h-full","border-b","border-b-slate-200","p-2"]},variant:{},defaults:{}}),WD=({logo:t,menu:e,actions:n,variant:r,tva:i=MG,css:s,children:o})=>{const l=i({...r,css:s}).slots;return d.jsxs("div",{className:l.base(),children:[d.jsx(Lz,{position:"top-right"}),d.jsxs("div",{className:l.header(),children:[d.jsx("div",{children:t}),d.jsx("div",{className:"grow",children:e}),d.jsx("div",{className:"flex flex-row gap-2 items-center",children:n})]}),d.jsx("div",{className:l.content(),children:o??d.jsx(fo,{})})]})},$G=xn({slot:{base:["flex","flex-row","gap-2","items-center","justify-between","text-blue-500","rounded-sm","px-1","py-0.5","hover:text-blue-700","focus:outline-hidden","w-fit"]},variant:{},defaults:{}}),BG=H.forwardRef(({icon:t,iconProps:e,variant:n,tva:r=$G,css:i,children:s,...o},l)=>{const u=r({...n,css:i}).slots;return d.jsxs("a",{...o,ref:l,className:u.base(),children:[t&&d.jsx(en,{icon:t,...e}),s]})}),zG=Q3(BG),Rt=t=>d.jsx(zG,{preload:"intent",...t}),WG=xn({slot:{base:["fixed","inset-0","h-full","items-center","justify-center","bg-slate-100","flex","transition-all","duration-200","z-10","pointer-events-none","bg-opacity-0","backdrop-blur-none"]},variant:{show:{true:["bg-opacity-50","backdrop-blur-xs","pointer-events-auto"]}},defaults:{show:!0}}),VG=({show:t=!0,variant:e,tva:n=WG,css:r})=>{const i=n({show:t,...e,css:r}).slots;return t?d.jsx("div",{className:i.base(),children:d.jsx(en,{icon:"icon-[svg-spinners--pulse-rings-multiple]",variant:{size:"8xl"},css:{base:["text-sky-400"]}})}):null};var Ay={exports:{}},UG=Ay.exports,Kj;function HG(){return Kj||(Kj=1,function(t,e){(function(n,r){t.exports=r()})(UG,()=>(()=>{var n={d:(_,E)=>{for(var I in E)n.o(E,I)&&!n.o(_,I)&&Object.defineProperty(_,I,{enumerable:!0,get:E[I]})},o:(_,E)=>Object.prototype.hasOwnProperty.call(_,E)},r={};n.d(r,{default:()=>x});const i=(..._)=>{},s=_=>_!==null&&_?.constructor.name==="Object";let o,l;const u=()=>{if(!o){o=!0;try{l=h.storage||localStorage,l.getItem("")}catch{l=(()=>{const _={getItem:I=>E[I]||null,setItem:(I,T)=>{E[I]=T},removeItem:I=>{E[I]=void 0},clear:()=>{E={__proto__:_}}};let E={__proto__:_};return E})()}b()}},f="\0",p=(_,E,I=!0)=>I?[...JSON.stringify(_)].map(T=>String.fromCharCode(T.charCodeAt(0)+E)).join(""):JSON.parse([..._].map(T=>String.fromCharCode(T.charCodeAt(0)-E)).join("")),h={ttl:null,encrypt:!1,encrypter:p,decrypter:(_,E)=>p(_,E,!1),secret:75,storage:void 0};Object.seal(h);const b=(_=!1)=>{u();for(const E of Object.keys(l)){const I=l.getItem(E);let T;try{T=JSON.parse(I||"")}catch{continue}s(T)&&f in T&&(Date.now()>T.ttl||_)&&l.removeItem(E)}},x={config:h,set:(_,E,I={})=>{u();const T={...h,...I,encrypt:I.encrypt!==!1&&(I.encrypt||h.encrypt),ttl:I.ttl===null?null:I.ttl||h.ttl};try{const C=T.ttl&&!isNaN(T.ttl)&&T.ttl>0;let j=C?{[f]:E,ttl:Date.now()+1e3*T.ttl}:E;T.encrypt&&(C?j[f]=(T.encrypter||i)(j[f],T.secret):j=(T.encrypter||i)(j,T.secret)),l.setItem(_,JSON.stringify(j))}catch{return!1}},get:(_,E={})=>{u();const I=l.getItem(_),T={...h,...E,encrypt:E.encrypt!==!1&&(E.encrypt||h.encrypt),ttl:E.ttl===null?null:E.ttl||h.ttl};let C,j;try{C=JSON.parse(I||""),j=s(C)&&f in C,(T.decrypt||T.encrypt)&&(j?C[f]=(T.decrypter||i)(C[f],T.secret):C=(T.decrypter||i)(C,T.secret))}catch{}return j?Date.now()>C.ttl?(l.removeItem(_),null):C[f]:C!==void 0?C:I},flush:b,clear:()=>{u(),l.clear()},remove:_=>{u(),l.removeItem(_)}};return r.default})())}(Ay)),Ay.exports}var KG=HG();const QG=uo(KG),gf=QG,GG=xn({slot:{base:["flex","flex-row","gap-2","items-center"]},variant:{},defaults:{}}),mu=({variant:t,tva:e=GG,css:n,children:r})=>{const i=e({...t,css:n}).slots;return d.jsx("div",{className:i.base(),children:r})},VD=xn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-1","border","border-b-2","border-transparent","hover:text-slate-500"]},variant:{active:{true:[]},inner:{true:[]},subtle:{true:[]}},match:[{if:{active:!0,inner:!1},then:{base:["border","border-b-2","border-blue-400","bg-blue-50","hover:border-blue-500","text-slate-800","hover:text-blue-800"]}},{if:{active:!0,inner:!0},then:{base:["border-none","text-blue-600","hover:text-blue-800"]}},{if:{subtle:!0},then:{base:["hover:bg-slate-50","hover:border-slate-300","hover:text-slate-600"]}},{if:{active:!0,subtle:!0},then:{base:["bg-slate-100","border-slate-400"]}}],defaults:{active:!1,inner:!1,subtle:!1}}),JG=H.forwardRef(({icon:t=null,variant:e,tva:n=VD,css:r,children:i,...s},o)=>{const l=n({...e,css:r}).slots;return d.jsxs("a",{...s,className:l.base(),ref:o,children:[Nv(t)?d.jsx(en,{icon:t}):t,i]})}),ZG=Q3(JG),tr=({match:t=[],variant:e,tva:n=VD,css:r,...i})=>{const s=$4(),o=t.some(l=>!!s(l));return d.jsx(ZG,{preload:"intent",variant:{active:!!s({to:i.to,params:i.params})||o,...e},tva:n,css:r,...i})},YG=xn({slot:{base:["flex","flex-row","flex-wrap","items-center","gap-2","text-sm","font-semibold"],item:["border","border-blue-200","bg-blue-50","rounded-md","px-2","py-1"]},variant:{},defaults:{}}),Gd=({textTitle:t,textEmpty:e,items:n,render:r,limit:i,variant:s,tva:o=YG,css:l})=>{const u=i?n.slice(0,i):n,f=o({...s,css:l}).slots;return d.jsxs("div",{className:f.base(),children:[n.length?null:e,u.map(p=>d.jsx(r,{entity:p},`items-${p.id}`)),i&&n.length>i&&d.jsx(mf,{textTitle:t,target:d.jsx(xm,{iconEnabled:yD}),outside:!0,children:d.jsx("div",{className:"flex flex-col gap-2",children:n.map(p=>d.jsx(r,{entity:p},`items-${p.id}`))})})]})},XG=xn({slot:{base:[]},variant:{},defaults:{}}),X=({label:t,fallback:e,variant:n,tva:r=XG,css:i})=>{const s=r({...n,css:i}).slots;return d.jsx("div",{className:s.base(),children:sa.rich(t,e)})},UD=xn({slot:{base:["flex","flex-col","gap-2"],input:["py-2","px-2","flex","flex-row","gap-2","items-center","cursor-pointer","hover:bg-slate-50","border","border-gray-300","rounded-md","text-slate-400","hover:text-slate-700","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],content:[],footer:["flex","items-center","justify-between","gap-2","border-t-2","border-slate-100","mt-4","pt-2"]},variant:{loading:{true:[]},selected:{true:[]}},match:[{if:{loading:!0},then:{input:["text-slate-300"]}},{if:{selected:!0},then:{input:["bg-slate-50","text-slate-700","hover:bg-slate-100","hover:text-slate-800"]}}],defaults:{loading:!1,selected:!1}}),eJ=xn({use:UD,slot:{},variant:{},defaults:{}}),tJ=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:l,query:u,value:f,onChange:p,variant:h,tva:b=eJ,css:x})=>{const _=b({...h,css:x}).slots,[E,I]=H.useState(0),[T,C]=H.useState(15),[j,q]=H.useState(f||[]),[L,M]=H.useState(void 0),W=rb({queryKey:[l,"PopupMultiSelect","data",{fulltext:L,page:E,size:T}],async queryFn(){return u({filter:{fulltext:L},cursor:{page:E,size:T}})}}),P=rb({queryKey:[l,"PopupMultiSelect","selected",{value:f}],async queryFn(){return u({filter:{idIn:f}})},enabled:!!f});return d.jsx(mf,{icon:t,target:d.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data.length}),children:[d.jsx(en,{icon:P.data?.data?.length?Hv:Uv}),P.data&&P.data.data.length?d.jsx(s,{entities:P.data.data}):n||d.jsx(X,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:W.isLoading},disabled:W.isLoading,...r,children:d.jsxs("div",{className:_.base(),children:[d.jsx("div",{className:_.content(),children:d.jsx(i,{cursor:{cursor:{page:E,size:T},count:W.data?.count?W.data.count:{filter:-1,total:-1,where:-1},textTotal:d.jsx(X,{label:"Total count of items (label)"}),onPage(O){I(O)},onSize(O){C(O),I(0)}},fulltext:{value:L,set(O){M(O),I(0)}},table:{data:W.data?.data??[],selection:{type:"multi",value:j,set(O){q(O)}}}})}),d.jsx(zv.Consumer,{children:O=>d.jsxs("div",{className:_.footer(),children:[d.jsx(gn,{iconEnabled:Ps,iconDisabled:Ps,onClick:()=>{O?.close()},variant:{variant:"subtle"},children:d.jsx(X,{label:"Close (label)"})}),d.jsx(gn,{iconEnabled:zb,iconDisabled:zb,disabled:!j.length&&!o,onClick:()=>{p(j),O?.close()},children:d.jsx(X,{label:"Confirm selection (label)"})})]})})]})})},HD=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:l,query:u,value:f,onChange:p,variant:h,tva:b=UD,css:x})=>{const _=b({...h,css:x}).slots,[E,I]=H.useState(0),[T,C]=H.useState(15),[j,q]=H.useState(f?[f]:[]),[L,M]=H.useState(void 0),W=rb({queryKey:[l,"PopupSelect","data",{fulltext:L,page:E,size:T}],async queryFn(){return u({filter:{fulltext:L},cursor:{page:E,size:T}})}}),P=rb({queryKey:[l,"PopupSelect","selected",{value:f}],async queryFn(){return u({filter:{id:f||void 0}})},enabled:!!f});return d.jsx(mf,{icon:t,target:d.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data?.length}),children:[d.jsx(en,{icon:P.data?.data?.[0]?Hv:Uv}),P.data?.data?.[0]?d.jsx(s,{entity:P.data?.data?.[0]}):n||d.jsx(X,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:W.isLoading},disabled:W.isLoading,...r,children:d.jsxs("div",{className:_.base(),children:[d.jsx("div",{className:_.content(),children:d.jsx(i,{cursor:{cursor:{page:E,size:T},count:W.data?.count?W.data.count:{filter:-1,total:-1,where:-1},textTotal:d.jsx(X,{label:"Total count of items (label)"}),onPage(O){I(O)},onSize(O){C(O),I(0)}},fulltext:{value:L,set(O){M(O),I(0)}},table:{data:W.data?.data??[],selection:{type:"single",value:j,set(O){q(O)}}}})}),d.jsx(zv.Consumer,{children:O=>d.jsxs("div",{className:_.footer(),children:[d.jsx(gn,{iconEnabled:Ps,iconDisabled:Ps,onClick:()=>{O?.close()},variant:{variant:"subtle"},children:d.jsx(X,{label:"Close (label)"})}),d.jsx(gn,{iconEnabled:zb,iconDisabled:zb,disabled:!j.length&&!o,onClick:()=>{p(j?.[0]),O?.close()},children:d.jsx(X,{label:"Confirm selection (label)"})})]})})]})})},nJ=xn({slot:{base:["bg-blue-50","p-2","rounded-md","border","border-blue-200"],container:["grid","grid-cols-2","grid-rows-2","gap-1"],title:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2"],links:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2","flex","flex-row","items-center","gap-4","justify-end"],actions:["col-span-1","row-span-1","flex","flex-row","items-center","gap-4"],extra:["col-span-1","row-span-1","flex","flex-row","gap-4","justify-end"]},variant:{},defaults:{}}),yf=({entity:t,title:e=()=>null,links:n=()=>null,actions:r=()=>null,extra:i=()=>null,variant:s,tva:o=nJ,css:l})=>{const u=o({...s,css:l}).slots;return d.jsx(d1.Provider,{value:{inline:!0},children:d.jsx("div",{className:u.base(),children:d.jsxs("div",{className:u.container(),children:[d.jsx("div",{className:u.title(),children:d.jsx(e,{entity:t})}),d.jsx("div",{className:u.links(),children:d.jsx(n,{entity:t})}),d.jsx("div",{className:u.actions(),children:d.jsx(r,{entity:t})}),d.jsx("div",{className:u.extra(),children:d.jsx(i,{entity:t})})]})})})},rJ=xn({slot:{base:["w-full","bg-slate-200","rounded-sm","transition-all"],progress:["h-full","bg-blue-400","rounded-sm","leading-none","transition-all"]},variant:{size:{xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-4"}},defaults:{size:"md"}}),bf=({value:t,variant:e,tva:n=rJ,css:r})=>{const i=n({...e,css:r}).slots;return d.jsx("div",{className:i.base(),children:d.jsx("div",{style:{width:`${t}%`},className:i.progress()})})},iJ=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,page:e}})})},sJ=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,size:e,page:0}})})},Or=t=>({onPage:iJ(t),onSize:sJ(t)}),qr=t=>e=>t({search:({cursor:n,...r})=>({...r,filter:e,cursor:{...n,page:0}})}),Ar=t=>e=>{t({search:({cursor:n,filter:r,...i})=>({...i,filter:{...r,fulltext:e},cursor:{...n,page:e?0:n.page}}),replace:!!e})},ys=t=>e=>{t({search(n){return{...n,selection:e}}})},Wr=t=>({loading:d.jsx(X,{label:`${t} - Loading (label)`}),success:d.jsx(X,{label:`${t} - Success (label)`}),error:d.jsx(X,{label:`${t} - Error (label)`})}),oJ=xn({slot:{base:["flex","flex-col","gap-4"],content:["text-bold","text-red-500","font-bold"],footer:["flex","flex-row","items-center","justify-between","gap-4"]},variant:{},defaults:{}}),bs=({textContent:t,textToast:e,callback:n,onCancel:r,invalidator:i,variant:s,tva:o=oJ,css:l})=>{const u=o({...s,css:l}).slots,f=H.useContext(zv),p=Yt({async mutationFn(){return Mz.promise(n(),Wr(e))},async onSuccess(){await i?.(),f?.close()}});return d.jsxs("div",{className:u.base(),children:[d.jsx("div",{className:u.content(),children:t}),d.jsxs("div",{className:u.footer(),children:[d.jsx(gn,{variant:{variant:"subtle",size:"sm"},iconEnabled:Ps,onClick:()=>{f?.close(),r?.()},children:d.jsx(X,{label:"Cancel (button)"})}),d.jsx(gn,{variant:{variant:"danger",size:"md"},iconEnabled:ii,onClick:()=>{p.mutate()},children:d.jsx(X,{label:"Delete (button)"})})]})]})},aJ=async({select:t,query:e=()=>t,filter:n,where:r})=>({total:(await t.clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,filter:(await e({select:e({select:t,where:r}),where:n}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,where:(await e({select:t,where:r}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count}),$o=async({select:t,query:e=()=>t,output:n,filter:r,where:i})=>n.parse(await e({select:e({select:t,where:i}),where:r}).executeTakeFirstOrThrow()),Br=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>{const o=l=>{let u=l;return s&&(u=l.limit(s.size).offset(s.page*s.size)),u};return D.array(n).parse(await o(e({select:e({select:t,where:i}),where:r})).execute())},hr=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>({data:await Br({select:t,output:n,where:i,filter:r,query:e,cursor:s}),count:await aJ({select:t,where:i,filter:r,query:e})}),mr=t=>{const e="input"in t?t.input:"input",n="output"in t?t.output:"output",r="schema"in t?t.schema._input:t._input,i="schema"in t?t.schema._output:t._output;return{types:{input:e==="output"?i:r,output:n==="input"?r:i},parse:s=>"schema"in t?t.schema.parse(s):t.parse(s)}},ey=(t,e)=>D.custom().pipe(t.catch(e)),Pr=({filter:t},{size:e=30}={size:30})=>D.object({filter:ey(t.optional(),void 0),cursor:ey(A9,{page:0,size:e}).default({page:0,size:e}),sort:ey(D.any().optional(),[]).default([]),selection:ey(D.array(D.string()),[]).default([])}),lJ=xn({slot:{base:["w-full","flex","flex-col","items-center","justify-center"],title:["text-xl","text-bold"],message:["text-base","text-slate-500"],body:["pt-2"]},variant:{},defaults:{}}),KD=({textTitle:t,textMessage:e,icon:n,iconProps:r,variant:i,tva:s=lJ,css:o,children:l})=>{const u=s({...i,css:o}).slots;return d.jsxs("div",{className:u.base(),children:[n?d.jsx(en,{icon:n,variant:{size:"6xl"},css:{base:["text-slate-500","opacity-50"]},...r}):null,d.jsx("div",{className:u.title(),children:t}),d.jsx("div",{className:u.message(),children:e}),d.jsx("div",{className:u.body(),children:l})]})},y1=xn({slot:{base:["min-w-full","flex","flex-col","gap-2","text-sm"],table:["min-w-full","w-max","table-fixed"],thead:["border","border-slate-200","bg-slate-100"],th:["text-left","px-2","py-1","border-t","border-b","border-slate-300"],tbody:[],tr:["border-b","border-b-slate-200","odd:bg-slate-50","hover:bg-purple-100","hover:border-purple-300"],td:["px-2","py-1"],tfoot:[],select:["cursor-pointer","text-slate-400","hover:text-slate-600"]},variant:{selected:{true:[]}},match:[{if:{selected:!0},then:{tr:["bg-blue-100","odd:bg-blue-50","border-blue-300"],select:["text-slate-600"]}}],defaults:{selected:!1}}),cJ=({table:t,cell:{column:e,data:n,value:r},variant:i,tva:s=y1,css:o})=>{const l=e.def.render,u=s({...i,css:o}).slots;return d.jsx("td",{className:u.td(),children:d.jsxs("div",{className:"group flex flex-row items-center gap-2 justify-between",children:[d.jsx(l,{table:t,data:n,value:r,context:t.context}),e.filter&&!e.filter.is()?d.jsx(en,{icon:A7,css:{base:["group-hover:visible","invisible","opacity-50 hover:opacity-100","cursor-pointer"]},variant:{size:"xl"},onClick:()=>{e.filter&&(e.def.filter?.onFilter({data:n,filter:e.filter}),window.scrollTo({top:0,behavior:"smooth"}))}}):null]})})},uJ=({table:t,row:e,action:n,variant:r,tva:i=y1,css:s})=>{const o=i({...r,css:s}).slots,l=n?.table,u=n?.row;return d.jsxs("tr",{className:o.tr({selected:t.selection.isSelected(e)}),children:[l||u||t.selection.enabled?d.jsx("td",{className:"w-0",children:d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?d.jsx(en,{icon:t.selection.isSelected(e)?Hv:Uv,css:{base:o.select({selected:t.selection.isSelected(e)})},onClick:t.selection.withRowHandler(e)}):null,u?d.jsx(u,{table:t,data:e.data}):null]})}):null,e.cells.map(f=>d.jsx(cJ,{table:t,cell:f,variant:r,tva:i,css:s},`${e.id}-${f.column.id}`)),d.jsx("td",{})]})},Fr=({table:t,fulltext:e,cursor:n,empty:r=()=>d.jsx(KD,{icon:q7,textTitle:d.jsx(X,{label:"Nothing here"}),textMessage:d.jsx(X,{label:"There is nothing to see right now."})}),action:i,variant:s,tva:o=y1,css:l})=>{const u=o({...s,css:l}).slots,f=i?.table,p=i?.row;return d.jsxs("div",{className:u.base(),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center gap-6 w-1/3",children:e?d.jsx(ID,{value:e.value,onFulltext:e.set}):null}),d.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[d.jsx(Nj,{...n}),t.filter.is()&&d.jsx(xm,{iconEnabled:jj,css:{base:["text-amber-500"]},onClick:()=>t.filter.reset()})]})]}),d.jsx("div",{className:"relative overflow-x-auto",children:d.jsxs("table",{className:u.table(),children:[d.jsx("thead",{className:u.thead(),children:d.jsxs("tr",{children:[f||p||t.selection.enabled?d.jsx("th",{className:"w-0",children:d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?d.jsx(en,{icon:t.selection.isAll()?Hv:t.selection.isAny()?F7:Uv,variant:{disabled:t.selection.isSingle},css:{base:u.select({selected:t.selection.isAny()})},onClick:t.selection.withAllHandler()}):null,f?d.jsx(f,{table:t}):null]})}):null,t.visible.map(h=>{const b=h.def.header||(()=>null);return d.jsx("th",{className:u.th(),style:h.def.size?{width:`${h.def.size}rem`}:void 0,children:d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx(b,{table:t}),d.jsx("div",{className:"flex flex-row items-center gap-2",children:h.filter?.is()&&d.jsx(en,{icon:jj,variant:{size:"md"},css:{base:["opacity-50","hover:opacity-100","cursor-pointer"]},onClick:()=>{h.filter?.reset()}})})]})},h.id)}),d.jsx("th",{})]})}),t.isEmpty?null:d.jsx("tbody",{className:u.tbody(),children:t.rows?.map(h=>d.jsx(uJ,{row:h,table:t,action:i,variant:s,tva:o,css:l},h.id))})]})}),t.isEmpty?d.jsx(r,{}):null,d.jsxs("div",{className:"flex flex-row items-center justify-end gap-2",children:[d.jsx("div",{}),d.jsx(Nj,{...n})]})]})},fi=[];for(let t=0;t<256;++t)fi.push((t+256).toString(16).slice(1));function dJ(t,e=0){return(fi[t[e+0]]+fi[t[e+1]]+fi[t[e+2]]+fi[t[e+3]]+"-"+fi[t[e+4]]+fi[t[e+5]]+"-"+fi[t[e+6]]+fi[t[e+7]]+"-"+fi[t[e+8]]+fi[t[e+9]]+"-"+fi[t[e+10]]+fi[t[e+11]]+fi[t[e+12]]+fi[t[e+13]]+fi[t[e+14]]+fi[t[e+15]]).toLowerCase()}let N0;const fJ=new Uint8Array(16);function pJ(){if(!N0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");N0=crypto.getRandomValues.bind(crypto)}return N0(fJ)}const hJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qj={randomUUID:hJ};function Gj(t,e,n){if(Qj.randomUUID&&!t)return Qj.randomUUID();t=t||{};const r=t.random??t.rng?.()??pJ();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,dJ(r)}const Dr=({columns:t,order:e=t.map(u=>u.name),hidden:n=[],visible:r=t.map(u=>u.name),data:i,filter:s,selection:o,context:l})=>{const u={...s?.value||{}},f=JR(u),p=new Set(o?.value),h=t.map(x=>({id:Gj(),def:x,filter:x.filter?{is(){return x.filter?f.get(x.filter.path)!==void 0:!1},reset(){x.filter&&f.set(x.filter.path,void 0),s?.set({...u})},shallow(_,E){x.filter&&f.set(_,E),s?.set({...u})},set(_){s?.set({..._})}}:void 0})),b=h.filter(x=>r.includes(x.def.name)&&!n.includes(x.def.name)).sort((x,_)=>{const E=e.indexOf(x.def.name),I=e.indexOf(_.def.name);return(E===-1?1/0:E)-(I===-1?1/0:I)});return{columns:h,visible:b,rows:i?.map(x=>({id:Gj(),data:x,cells:b.map(_=>({column:_,data:x,value:JR(x).get(_.def.name)}))})),isEmpty:i.length===0,filter:{is(){return h.some(x=>x.filter?.is())},reset(){s?.set({})},set(x){s?.set({...x})},shallow(x,_){f.set(x,_)}},selection:{enabled:!!o&&i.length>0,selection:Array.from(p),isSingle:o?.type==="single",isMulti:o?.type==="multi",isSelected({data:x}){return p.has(x.id)||!1},isAll(){return i.every(x=>p.has(x.id))},isAny(){return i.some(x=>p.has(x.id))},withRowHandler({data:x}){return()=>{if(o?.type==="single"){const _=p.has(x.id);p.clear(),_?p.delete(x.id):p.add(x.id)}else p.has(x.id)?p.delete(x.id):p.add(x.id);o?.set(Array.from(p))}},withAllHandler(){return()=>{i.every(x=>p.has(x.id))?p.clear():i.forEach(({id:x})=>p.add(x)),o?.set(Array.from(p))}}},context:l}},Lr=()=>t=>t,QD=({tags:t=[],render:e=({tag:i})=>i.label,onClick:n,textEmpty:r})=>{const i=t.filter(Boolean).sort((s,o)=>s.sort-o.sort);return d.jsx("div",{className:"flex flex-wrap flex-row gap-2 items-center",children:i.length?i.map(s=>d.jsx(Ri,{onClick:()=>n?.(s),children:e({tag:s})},s.id)):r||d.jsx(X,{label:"No tags (label)"})})},mJ=xn({slot:{base:["flex","flex-row","gap-2","items-center"],title:["flex","flex-row","gap-2","items-center","text-lg","text-slate-500","font-bold"],subtitle:["flex","flex-row","gap-4","items-center","text-lg"]},variant:{withSubtitle:{true:[]}},match:[{if:{withSubtitle:!0},then:{title:["border-r","border-r-slate-300","pr-2"]}}],defaults:{withSubtitle:!1}}),vf=({icon:t,title:e,subtitle:n,variant:r,tva:i=mJ,css:s})=>{const o=i({withSubtitle:!!n,...r,css:s}).slots;return d.jsxs("div",{className:o.base(),children:[d.jsxs("div",{className:o.title(),children:[t?d.jsx(en,{icon:t}):null,e]}),n?d.jsx("div",{className:o.subtitle(),children:n}):null]})};var ty={},Jj;function gJ(){if(Jj)return ty;Jj=1;var t=K3();return ty.createRoot=t.createRoot,ty.hydrateRoot=t.hydrateRoot,ty}var yJ=gJ();const bJ=uo(yJ),b1=N4()({component:()=>d.jsxs(d.Fragment,{children:[d.jsx(K4,{}),d.jsx(fo,{})]})}),vJ="modulepreload",xJ=function(t){return"/"+t},Zj={},Yj=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(n.map(u=>{if(u=xJ(u),u in Zj)return;Zj[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":vJ,f||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),f)return new Promise((b,x)=>{h.addEventListener("load",b),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},wJ=Dt("/$locale")({component:fo,loader:async({params:{locale:t}})=>{try{sa.push((await _J(`../translation/${t}.yaml`)).default)}catch(e){console.error(e)}}});function _J(t){switch(t){case"../translation/cs":case"../translation/cs.yaml":return Yj(()=>import("./cs-DKwp3jby.js"),[]);case"../translation/en":case"../translation/en.yaml":return Yj(()=>import("./en-DAdE-tts.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const GD="cs",SJ=[GD,"en"],EJ=Dt("/")({loader:async()=>{throw Yh({to:"/$locale",params:{locale:A5({available:SJ,fallback:GD})}})}}),NJ=Dt("/$locale/")({component:()=>{const{locale:t}=tn({from:"/$locale"});return d.jsx("div",{className:"flex flex-col items-center justify-center h-screen w-screen",children:d.jsxs("div",{className:"rounded-sm bg-slate-50 p-4 shadow-md border border-slate-300",children:[d.jsx("h1",{className:"text-3xl text-center",children:"Apps"}),d.jsx("ul",{children:d.jsx("li",{children:d.jsx(Rt,{icon:"icon-[bx--game]",to:"/$locale/apps/derivean/public/login",params:{locale:t},children:"DeRivean"})})})]})})}}),{kysely:jt,bootstrap:IJ}=k7({database:"derivean",async bootstrap({kysely:t}){const e="varchar(36)";try{await t.selectFrom("User").select(n=>n.fn.countAll().as("count")).executeTakeFirstOrThrow()}catch{await t.schema.createTable("User").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("login","varchar(128)",r=>r.notNull()).addColumn("password","varchar(256)",r=>r.notNull()).addUniqueConstraint("[User] login",["login"]).execute(),await t.schema.createTable("Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("code","varchar(64)",r=>r.notNull()).addColumn("label","varchar(128)",r=>r.notNull()).addColumn("group","varchar(64)").addColumn("sort","integer",r=>r.notNull().defaultTo(0)).addUniqueConstraint("Tag_code_group",["code","group"]).execute(),await t.schema.createTable("Cycle").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("stamp","datetime",r=>r.defaultTo(fr`CURRENT_TIMESTAMP`).notNull()).execute(),await t.schema.createTable("Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("transport","float4",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Resource] name",["name"]).execute(),await t.schema.createTable("Resource_Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("tagId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] tagId",["tagId"],"Tag",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Resource_Tag] resourceId-tagId",["resourceId","tagId"]).execute(),await t.schema.createTable("Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("limit","float4",r=>r.notNull()).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).execute(),await t.schema.createTable("Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(128)",r=>r.notNull()).addColumn("color","varchar(128)",r=>r.notNull().defaultTo("slate")).addColumn("minWidth","integer",r=>r.notNull()).addColumn("maxWidth","integer",r=>r.notNull()).addColumn("minHeight","integer",r=>r.notNull()).addColumn("maxHeight","integer",r=>r.notNull()).addColumn("probability","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull()).execute(),await t.schema.createTable("Region_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("minAmount","float4",r=>r.notNull()).addColumn("maxAmount","float4",r=>r.notNull()).addColumn("minLimit","float4",r=>r.notNull()).addColumn("maxLimit","float4",r=>r.notNull()).addUniqueConstraint("[Region_Inventory] regionId-resourceId",["regionId","resourceId"]).execute(),await t.schema.createTable("Map").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Map] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("name","varchar(128)",r=>r.notNull()).addUniqueConstraint("[Map] userId-name",["userId","name"]).execute(),await t.schema.createTable("Land").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","integer",r=>r.notNull()).addColumn("y","integer",r=>r.notNull()).addColumn("width","integer",r=>r.notNull()).addColumn("height","integer",r=>r.notNull()).execute(),await t.schema.createTable("Land_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Land_Inventory] landId-inventoryId",["landId","inventoryId"]).execute(),await t.schema.createTable("Blueprint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).addColumn("sort","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Blueprint] name",["name"]).execute(),await t.schema.createTable("Blueprint_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Inventory] blueprintId-inventoryId",["blueprintId","inventoryId"]).execute(),await t.schema.createTable("Blueprint_Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).execute(),await t.schema.createTable("Blueprint_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Requirement] blueprintId-requirementId",["blueprintId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("dependencyId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] dependencyId",["dependencyId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Dependency] blueprintId-dependencyId",["blueprintId","dependencyId"]).execute(),await t.schema.createTable("Blueprint_Conflict").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("conflictId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] conflictId",["conflictId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Conflict] blueprintId-conflictId",["blueprintId","conflictId"]).execute(),await t.schema.createTable("Blueprint_Production_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Requirement] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Production_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-blueprintId",["blueprintProductionId","blueprintId"]).execute(),await t.schema.createTable("Blueprint_Production_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Construction").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Construction] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("plan","boolean",r=>r.notNull().defaultTo(!0)).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("constructionId",e).addForeignKeyConstraint("[Building] constructionId",["constructionId"],"Construction",["id"],r=>r.onDelete("set null").onUpdate("set null")).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("productionId",e).addForeignKeyConstraint("[Building] productionId",["productionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("recurringProductionId",e).addForeignKeyConstraint("[Building] recurringProductionId",["recurringProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","float4",r=>r.notNull().defaultTo(0)).addColumn("y","float4",r=>r.notNull().defaultTo(0)).addColumn("valid","boolean",r=>r.notNull().defaultTo(!0)).execute(),await t.schema.createTable("Building_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Inventory] buildingId-inventoryId",["buildingId","inventoryId"]).execute(),await t.schema.createTable("Route").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("fromId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] fromId",["fromId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("toId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] toId",["toId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Route] userId-fromId-toId",["userId","fromId","toId"]).execute(),await t.schema.createTable("Route_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("routeId",e,r=>r.notNull()).addForeignKeyConstraint("[Route_Resource] routeId",["routeId"],"Route",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Route_Resource] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).addColumn("amount","float4").addColumn("priority","integer",r=>r.notNull().defaultTo(0)).execute(),await t.schema.createTable("Land_Route").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Route] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("fromId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Route] fromId",["fromId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("toId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Route] toId",["toId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Land_Route] userId-fromId-toId",["userId","fromId","toId"]).execute(),await t.schema.createTable("Land_Route_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("landRouteId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Route_Resource] landRouteId",["landRouteId"],"Land_Route",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Route_Resource] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).addColumn("amount","float4").addColumn("priority","integer",r=>r.notNull().defaultTo(0)).execute()}}}),kJ=Dt("/$locale/apps/derivean")({loader:IJ}),JD="icon-[proicons--game]",CJ=xn({slot:{base:["text-orange-500","font-bold","text-2xl","shadow-md","hover:shadow-lg","hover:text-orange-600","rounded-sm","px-2","py-1","bg-slate-100"]},variant:{},defaults:{}}),ZD=({variant:t,tva:e=CJ,css:n})=>{const r=e({...t,css:n}).slots;return d.jsx("div",{className:r.base(),children:"DeRivean"})},Bo="icon-[fluent--building-shop-20-regular]",ME="icon-[oui--vis-map-region]",Zn="icon-[hugeicons--resources-add]",TJ=t=>{const{locale:e}=tn({from:"/$locale"});return d.jsxs(mu,{...t,children:[d.jsx(tr,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},children:d.jsx(X,{label:"Editor (menu)"})}),d.jsx(tr,{icon:Bo,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/blueprint/$id/view"},{to:"/$locale/apps/derivean/root/blueprint/$id/dependencies"},{to:"/$locale/apps/derivean/root/blueprint/$id/production"},{to:"/$locale/apps/derivean/root/blueprint/$id/requirements"},{to:"/$locale/apps/derivean/root/blueprint/$id/edit"},{to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements"}],children:d.jsx(X,{label:"Blueprint list (menu)"})}),d.jsx(tr,{icon:ME,to:"/$locale/apps/derivean/root/region/list",params:{locale:e},children:d.jsx(X,{label:"Region list (menu)"})}),d.jsx(tr,{icon:Zn,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:d.jsx(X,{label:"Resource list (menu)"})}),d.jsx(tr,{icon:g1,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/user/$id/view"},{to:"/$locale/apps/derivean/root/user/$id/building/list"}],children:d.jsx(X,{label:"User list (menu)"})}),d.jsx(tr,{icon:Fh,to:"/$locale/apps/derivean/root/tag/list",params:{locale:e},children:d.jsx(X,{label:"Tag list (menu)"})})]})},wm=D.object({id:D.string(),name:D.string(),login:D.string()}),RJ=Dt("/$locale/apps/derivean/root")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return wm.parse(gf.get("session"))}catch{throw Yh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{session:t}}){return{session:await t()}},component:()=>{const{locale:t}=tn({from:"/$locale"}),{session:e}=mi({from:"/$locale/apps/derivean/root"});return d.jsx(WD,{logo:d.jsx(Rt,{to:"/$locale/apps/derivean/root",params:{locale:t},children:d.jsx(ZD,{})}),menu:d.jsx(TJ,{}),actions:d.jsxs(d.Fragment,{children:[e.name,d.jsx(Rt,{icon:JD,to:"/$locale/apps/derivean/game",params:{locale:t}}),d.jsx(Rt,{icon:m1,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]})})}}),jJ=Dt("/$locale/apps/derivean/map")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return wm.parse(gf.get("session"))}catch{throw Yh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}}}),OJ=Dt("/$locale/apps/derivean/game")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return wm.parse(gf.get("session"))}catch{throw Yh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{session:r,cycle:await t.ensureQueryData({queryKey:["Cycle"],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{locale:t}=tn({from:"/$locale"}),{session:e}=mi({from:"/$locale/apps/derivean/game"}),n=DB({filters:{status:"pending",mutationKey:["useCycleMutation"]},select(r){return r.state.status}});return d.jsx(WD,{logo:d.jsx(Rt,{to:"/$locale/apps/derivean/game",params:{locale:t},children:d.jsx(ZD,{})}),actions:d.jsxs(d.Fragment,{children:[e.name,d.jsx(Rt,{icon:"icon-[clarity--crown-line]",to:"/$locale/apps/derivean/root",params:{locale:t}}),d.jsx(Rt,{icon:m1,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]}),css:{base:n.length?["select-none","pointer-events-none","opacity-50"]:void 0},children:d.jsx(fo,{})})}});var Py={exports:{}},qJ=Py.exports,Xj;function AJ(){return Xj||(Xj=1,function(t,e){(function(n,r){r()})(qJ,function(){function n(f,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function r(f,p,h){var b=new XMLHttpRequest;b.open("GET",f),b.responseType="blob",b.onload=function(){u(b.response,p,h)},b.onerror=function(){console.error("could not download file")},b.send()}function i(f){var p=new XMLHttpRequest;p.open("HEAD",f,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function s(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(p)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Mc=="object"&&Mc.global===Mc?Mc:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(f,p,h){var b=o.URL||o.webkitURL,x=document.createElement("a");p=p||f.name||"download",x.download=p,x.rel="noopener",typeof f=="string"?(x.href=f,x.origin===location.origin?s(x):i(x.href)?r(f,p,h):s(x,x.target="_blank")):(x.href=b.createObjectURL(f),setTimeout(function(){b.revokeObjectURL(x.href)},4e4),setTimeout(function(){s(x)},0))}:"msSaveOrOpenBlob"in navigator?function(f,p,h){if(p=p||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(n(f,h),p);else if(i(f))r(f,p,h);else{var b=document.createElement("a");b.href=f,b.target="_blank",setTimeout(function(){s(b)})}}:function(f,p,h,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof f=="string")return r(f,p,h);var x=f.type==="application/octet-stream",_=/constructor/i.test(o.HTMLElement)||o.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||x&&_||l)&&typeof FileReader<"u"){var I=new FileReader;I.onloadend=function(){var j=I.result;j=E?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=j:location=j,b=null},I.readAsDataURL(f)}else{var T=o.URL||o.webkitURL,C=T.createObjectURL(f);b?b.location=C:location.href=C,b=null,setTimeout(function(){T.revokeObjectURL(C)},4e4)}});o.saveAs=u.saveAs=u,t.exports=u})}(Py)),Py.exports}var PJ=AJ();const FJ=uo(PJ),I0=["Tag","Resource","Resource_Tag","Blueprint","Inventory","Region","Region_Inventory","Blueprint_Inventory","Blueprint_Dependency","Blueprint_Conflict","Blueprint_Requirement","Blueprint_Production","Blueprint_Production_Requirement","Blueprint_Production_Dependency","Blueprint_Production_Resource"],DJ=Dt("/$locale/apps/derivean/root/")({component(){const t=Yt({mutationKey:["export"],async mutationFn(){return Rn.promise((async()=>{const e=[];await jt.transaction().execute(async n=>{for await(const r of I0)e.push({source:r,entities:await n.selectFrom(r).selectAll().execute()})}),FJ.saveAs(new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"}),"export.json")})(),Wr("Export game files"))}});return d.jsxs("div",{className:"flex flex-col gap-4 w-2/3 mx-auto",children:[d.jsx(LG,{onDrop:async e=>{const[n]=e;if(!n)return;const r=JSON.parse(await n.text());await fr`PRAGMA foreign_keys = OFF`.execute(jt),await Rn.promise(jt.transaction().execute(async i=>{for await(const{source:s}of r){const o=I0.find(l=>l===s);o&&await i.deleteFrom(o).execute()}for await(const{source:s,entities:o}of r){const l=I0.find(u=>u===s);if(l)for await(const u of Object.values(o))await i.insertInto(l).values(u).execute()}}),Wr("Import game files")),await fr`PRAGMA foreign_keys = ON`.execute(jt)}}),d.jsx("div",{className:"flex items-center justify-center mt-10 gap-4",children:d.jsx(gn,{iconEnabled:JD,loading:t.isPending,onClick:()=>t.mutate(),variant:{variant:"subtle"},children:d.jsx(X,{label:"Export game files (label)"})})}),d.jsx("h2",{children:"TODO"}),d.jsxs("ul",{className:"flex flex-col gap-2",children:[d.jsx("li",{children:"Fix Cycles as it's not bound to the Map."}),d.jsxs("li",{children:[d.jsx("p",{children:"Idea of lands; define lands in root, their size boundaries (will be randomized), available resources (may be randomized)."}),d.jsx("p",{children:"Here may be time for citizens, like geologist who will investigate a land to find, what's in there."}),d.jsx("p",{children:"Generate land into a map (so there will be Land as definition and Land as an instance)."}),d.jsx("p",{children:"For start, list all lands + zoom to land."})]}),d.jsx("li",{children:"Fetch production on building from production next to prod* ids on the building."}),d.jsx("li",{children:"Add notification center like inventory is full, production is full and so on."}),d.jsx("li",{children:'Upgrades: Put everything into the building, drive upgrades by passive "Research" points'}),d.jsx("li",{children:"Bundle default gameplay as exported json (put into public); add button to root to load default/selected gameplay; idea is a few buttons: Settler like, Fantasy, AoE and so on."}),d.jsx("li",{children:"Define game ending rules: amount of resources in (individual resourece per required cycle), required building in a cycle. When a player fail, game end with the ability to reset. Each game rule may have an ending message to show."}),d.jsx("li",{children:"Define winning rules: amount of resources / building built in specific cycle. When rules are not met, it's like a fail."}),d.jsx("li",{children:"Add something like world available resources + the ability to drain and add resources to the world. Something like Wolrd_Inventory where 0 means unlimited resources."}),d.jsx("li",{children:"World renewal resources: a list of resources with cycles and amount when they got renewed (world_renewal_queue)."}),d.jsx("li",{children:"Defines seasons: list of cyclic seasons with their length; resource production may be bound to specific season(s)."}),d.jsx("li",{children:"Add maintenance cost for a building: when a cycle ends, cost is deducted from the inventory. If there is not enough resources, building will be marked as offline (closed for production)."}),d.jsx("li",{children:"Dispaly resources per season (some resources will be available only in specific season)"}),d.jsx("li",{children:"Add resource probability drop: some resources may have not be produces (like a crop). This should be thinked out."})]})]})}});var _m=t=>t.type==="checkbox",Uc=t=>t instanceof Date,$i=t=>t==null;const YD=t=>typeof t=="object";var Vr=t=>!$i(t)&&!Array.isArray(t)&&YD(t)&&!Uc(t),XD=t=>Vr(t)&&t.target?_m(t.target)?t.target.checked:t.target.value:t,LJ=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,e2=(t,e)=>t.has(LJ(e)),MJ=t=>{const e=t.constructor&&t.constructor.prototype;return Vr(e)&&e.hasOwnProperty("isPrototypeOf")},v1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ls(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(v1&&(t instanceof Blob||r))&&(n||Vr(t)))if(e=n?[]:{},!n&&!MJ(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=ls(t[i]));else return t;return e}var Qv=t=>Array.isArray(t)?t.filter(Boolean):[],$r=t=>t===void 0,Et=(t,e,n)=>{if(!e||!Vr(t))return n;const r=Qv(e.split(/[,[\].]+?/)).reduce((i,s)=>$i(i)?i:i[s],t);return $r(r)||r===t?$r(t[e])?n:t[e]:r},ro=t=>typeof t=="boolean",x1=t=>/^\w*$/.test(t),t2=t=>Qv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),zn=(t,e,n)=>{let r=-1;const i=x1(e)?[e]:t2(e),s=i.length,o=s-1;for(;++r<s;){const l=i[r];let u=n;if(r!==o){const f=t[l];u=Vr(f)||Array.isArray(f)?f:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=u,t=t[l]}return t};const Hb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Co={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ra={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},$J=$n.createContext(null),w1=()=>$n.useContext($J);var n2=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Co.all&&(e._proxyFormState[o]=!r||Co.all),n&&(n[o]=!0),t[o]}});return i},cs=t=>Vr(t)&&!Object.keys(t).length,r2=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return cs(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Co.all))},sh=t=>Array.isArray(t)?t:[t],i2=(t,e,n)=>!t||!e||t===e||sh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function _1(t){const e=$n.useRef(t);e.current=t,$n.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function BJ(t){const e=w1(),{control:n=e.control,disabled:r,name:i,exact:s}=t,[o,l]=$n.useState(n._formState),u=$n.useRef(!0),f=$n.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=$n.useRef(i);return p.current=i,_1({disabled:r,next:h=>u.current&&i2(p.current,h.name,s)&&r2(h,f.current,n._updateFormState)&&l({...n._formState,...h}),subject:n._subjects.state}),$n.useEffect(()=>(u.current=!0,f.current.isValid&&n._updateValid(!0),()=>{u.current=!1}),[n]),$n.useMemo(()=>n2(o,n,f.current,!1),[o,n])}var ea=t=>typeof t=="string",s2=(t,e,n,r,i)=>ea(t)?(r&&e.watch.add(t),Et(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Et(n,s))):(r&&(e.watchAll=!0),n);function zJ(t){const e=w1(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t,l=$n.useRef(r);l.current=r,_1({disabled:s,subject:n._subjects.values,next:p=>{i2(l.current,p.name,o)&&f(ls(s2(l.current,n._names,p.values||n._formValues,!1,i)))}});const[u,f]=$n.useState(n._getWatch(r,i));return $n.useEffect(()=>n._removeUnmounted()),u}function WJ(t){const e=w1(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=e2(i._names.array,n),l=zJ({control:i,name:n,defaultValue:Et(i._formValues,n,Et(i._defaultValues,n,t.defaultValue)),exact:!0}),u=BJ({control:i,name:n,exact:!0}),f=$n.useRef(i.register(n,{...t.rules,value:l,...ro(t.disabled)?{disabled:t.disabled}:{}})),p=$n.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Et(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!Et(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Et(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Et(u.validatingFields,n)},error:{enumerable:!0,get:()=>Et(u.errors,n)}}),[u,n]),h=$n.useMemo(()=>({name:n,value:l,...ro(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:b=>f.current.onChange({target:{value:XD(b),name:n},type:Hb.CHANGE}),onBlur:()=>f.current.onBlur({target:{value:Et(i._formValues,n),name:n},type:Hb.BLUR}),ref:b=>{const x=Et(i._fields,n);x&&b&&(x._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:_=>b.setCustomValidity(_),reportValidity:()=>b.reportValidity()})}}),[n,i._formValues,r,u.disabled,l,i._fields]);return $n.useEffect(()=>{const b=i._options.shouldUnregister||s,x=(_,E)=>{const I=Et(i._fields,_);I&&I._f&&(I._f.mount=E)};if(x(n,!0),b){const _=ls(Et(i._options.defaultValues,n));zn(i._defaultValues,n,_),$r(Et(i._formValues,n))&&zn(i._formValues,n,_)}return!o&&i.register(n),()=>{(o?b&&!i._state.action:b)?i.unregister(n):x(n,!1)}},[n,i,o,s]),$n.useEffect(()=>{i._updateDisabledField({disabled:r,fields:i._fields,name:n})},[r,n,i]),$n.useMemo(()=>({field:h,formState:u,fieldState:p}),[h,u,p])}const Qi=t=>t.render(WJ(t));var o2=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},eO=t=>({isOnSubmit:!t||t===Co.onSubmit,isOnBlur:t===Co.onBlur,isOnChange:t===Co.onChange,isOnAll:t===Co.all,isOnTouch:t===Co.onTouched}),tO=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const oh=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Et(t,i);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(oh(l,e))break}else if(Vr(l)&&oh(l,e))break}}};var VJ=(t,e,n)=>{const r=sh(Et(t,n));return zn(r,"root",e[n]),zn(t,n,r),t},S1=t=>t.type==="file",Yo=t=>typeof t=="function",Kb=t=>{if(!v1)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Fy=t=>ea(t),E1=t=>t.type==="radio",Qb=t=>t instanceof RegExp;const nO={value:!1,isValid:!1},rO={value:!0,isValid:!0};var a2=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!$r(t[0].attributes.value)?$r(t[0].value)||t[0].value===""?rO:{value:t[0].value,isValid:!0}:rO:nO}return nO};const iO={isValid:!1,value:null};var l2=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,iO):iO;function sO(t,e,n="validate"){if(Fy(t)||Array.isArray(t)&&t.every(Fy)||ro(t)&&!t)return{type:n,message:Fy(t)?t:"",ref:e}}var td=t=>Vr(t)&&!Qb(t)?t:{value:t,message:""},oO=async(t,e,n,r,i,s)=>{const{ref:o,refs:l,required:u,maxLength:f,minLength:p,min:h,max:b,pattern:x,validate:_,name:E,valueAsNumber:I,mount:T}=t._f,C=Et(n,E);if(!T||e.has(E))return{};const j=l?l[0]:o,q=V=>{i&&j.reportValidity&&(j.setCustomValidity(ro(V)?"":V||""),j.reportValidity())},L={},M=E1(o),W=_m(o),P=M||W,O=(I||S1(o))&&$r(o.value)&&$r(C)||Kb(o)&&o.value===""||C===""||Array.isArray(C)&&!C.length,z=o2.bind(null,E,r,L),F=(V,U,B,G=Ra.maxLength,Z=Ra.minLength)=>{const le=V?U:B;L[E]={type:V?G:Z,message:le,ref:o,...z(V?G:Z,le)}};if(s?!Array.isArray(C)||!C.length:u&&(!P&&(O||$i(C))||ro(C)&&!C||W&&!a2(l).isValid||M&&!l2(l).isValid)){const{value:V,message:U}=Fy(u)?{value:!!u,message:u}:td(u);if(V&&(L[E]={type:Ra.required,message:U,ref:j,...z(Ra.required,U)},!r))return q(U),L}if(!O&&(!$i(h)||!$i(b))){let V,U;const B=td(b),G=td(h);if(!$i(C)&&!isNaN(C)){const Z=o.valueAsNumber||C&&+C;$i(B.value)||(V=Z>B.value),$i(G.value)||(U=Z<G.value)}else{const Z=o.valueAsDate||new Date(C),le=oe=>new Date(new Date().toDateString()+" "+oe),ie=o.type=="time",ne=o.type=="week";ea(B.value)&&C&&(V=ie?le(C)>le(B.value):ne?C>B.value:Z>new Date(B.value)),ea(G.value)&&C&&(U=ie?le(C)<le(G.value):ne?C<G.value:Z<new Date(G.value))}if((V||U)&&(F(!!V,B.message,G.message,Ra.max,Ra.min),!r))return q(L[E].message),L}if((f||p)&&!O&&(ea(C)||s&&Array.isArray(C))){const V=td(f),U=td(p),B=!$i(V.value)&&C.length>+V.value,G=!$i(U.value)&&C.length<+U.value;if((B||G)&&(F(B,V.message,U.message),!r))return q(L[E].message),L}if(x&&!O&&ea(C)){const{value:V,message:U}=td(x);if(Qb(V)&&!C.match(V)&&(L[E]={type:Ra.pattern,message:U,ref:o,...z(Ra.pattern,U)},!r))return q(U),L}if(_){if(Yo(_)){const V=await _(C,n),U=sO(V,j);if(U&&(L[E]={...U,...z(Ra.validate,U.message)},!r))return q(U.message),L}else if(Vr(_)){let V={};for(const U in _){if(!cs(V)&&!r)break;const B=sO(await _[U](C,n),j,U);B&&(V={...B,...z(U,B.message)},q(B.message),r&&(L[E]=V))}if(!cs(V)&&(L[E]={ref:j,...V},!r))return L}}return q(!0),L};function UJ(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=$r(t)?r++:t[e[r++]];return t}function HJ(t){for(const e in t)if(t.hasOwnProperty(e)&&!$r(t[e]))return!1;return!0}function ri(t,e){const n=Array.isArray(e)?e:x1(e)?[e]:t2(e),r=n.length===1?t:UJ(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Vr(r)&&cs(r)||Array.isArray(r)&&HJ(r))&&ri(t,n.slice(0,-1)),t}var k0=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},$E=t=>$i(t)||!YD(t);function Pl(t,e){if($E(t)||$E(e))return t===e;if(Uc(t)&&Uc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Uc(s)&&Uc(o)||Vr(s)&&Vr(o)||Array.isArray(s)&&Array.isArray(o)?!Pl(s,o):s!==o)return!1}}return!0}var c2=t=>t.type==="select-multiple",KJ=t=>E1(t)||_m(t),C0=t=>Kb(t)&&t.isConnected,u2=t=>{for(const e in t)if(Yo(t[e]))return!0;return!1};function Gb(t,e={}){const n=Array.isArray(t);if(Vr(t)||n)for(const r in t)Array.isArray(t[r])||Vr(t[r])&&!u2(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Gb(t[r],e[r])):$i(t[r])||(e[r]=!0);return e}function d2(t,e,n){const r=Array.isArray(t);if(Vr(t)||r)for(const i in t)Array.isArray(t[i])||Vr(t[i])&&!u2(t[i])?$r(e)||$E(n[i])?n[i]=Array.isArray(t[i])?Gb(t[i],[]):{...Gb(t[i])}:d2(t[i],$i(e)?{}:e[i],n[i]):n[i]=!Pl(t[i],e[i]);return n}var vp=(t,e)=>d2(t,e,Gb(e)),f2=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>$r(t)?t:e?t===""?NaN:t&&+t:n&&ea(t)?new Date(t):r?r(t):t;function T0(t){const e=t.ref;return S1(e)?e.files:E1(e)?l2(t.refs).value:c2(e)?[...e.selectedOptions].map(({value:n})=>n):_m(e)?a2(t.refs).value:f2($r(e.value)?t.ref.value:e.value,t)}var QJ=(t,e,n,r)=>{const i={};for(const s of t){const o=Et(e,s);o&&zn(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},xp=t=>$r(t)?t:Qb(t)?t.source:Vr(t)?Qb(t.value)?t.value.source:t.value:t;const aO="AsyncFunction";var GJ=t=>!!t&&!!t.validate&&!!(Yo(t.validate)&&t.validate.constructor.name===aO||Vr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===aO)),JJ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function lO(t,e,n){const r=Et(t,n);if(r||x1(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Et(e,s),l=Et(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(l&&l.type)return{name:s,error:l};i.pop()}return{name:n}}var ZJ=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,YJ=(t,e)=>!Qv(Et(t,e)).length&&ri(t,e);const XJ={mode:Co.onSubmit,reValidateMode:Co.onChange,shouldFocusError:!0};function eZ(t={}){let e={...XJ,...t},n={submitCount:0,isDirty:!1,isLoading:Yo(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Vr(e.defaultValues)||Vr(e.values)?ls(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:ls(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,f=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:k0(),array:k0(),state:k0()},b=eO(e.mode),x=eO(e.reValidateMode),_=e.criteriaMode===Co.all,E=xe=>be=>{clearTimeout(f),f=setTimeout(xe,be)},I=async xe=>{if(!e.disabled&&(p.isValid||xe)){const be=e.resolver?cs((await P()).errors):await z(r,!0);be!==n.isValid&&h.state.next({isValid:be})}},T=(xe,be)=>{!e.disabled&&(p.isValidating||p.validatingFields)&&((xe||Array.from(l.mount)).forEach(Ie=>{Ie&&(be?zn(n.validatingFields,Ie,be):ri(n.validatingFields,Ie))}),h.state.next({validatingFields:n.validatingFields,isValidating:!cs(n.validatingFields)}))},C=(xe,be=[],Ie,Ae,Ue=!0,rt=!0)=>{if(Ae&&Ie&&!e.disabled){if(o.action=!0,rt&&Array.isArray(Et(r,xe))){const Me=Ie(Et(r,xe),Ae.argA,Ae.argB);Ue&&zn(r,xe,Me)}if(rt&&Array.isArray(Et(n.errors,xe))){const Me=Ie(Et(n.errors,xe),Ae.argA,Ae.argB);Ue&&zn(n.errors,xe,Me),YJ(n.errors,xe)}if(p.touchedFields&&rt&&Array.isArray(Et(n.touchedFields,xe))){const Me=Ie(Et(n.touchedFields,xe),Ae.argA,Ae.argB);Ue&&zn(n.touchedFields,xe,Me)}p.dirtyFields&&(n.dirtyFields=vp(i,s)),h.state.next({name:xe,isDirty:V(xe,be),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else zn(s,xe,be)},j=(xe,be)=>{zn(n.errors,xe,be),h.state.next({errors:n.errors})},q=xe=>{n.errors=xe,h.state.next({errors:n.errors,isValid:!1})},L=(xe,be,Ie,Ae)=>{const Ue=Et(r,xe);if(Ue){const rt=Et(s,xe,$r(Ie)?Et(i,xe):Ie);$r(rt)||Ae&&Ae.defaultChecked||be?zn(s,xe,be?rt:T0(Ue._f)):G(xe,rt),o.mount&&I()}},M=(xe,be,Ie,Ae,Ue)=>{let rt=!1,Me=!1;const ut={name:xe};if(!e.disabled){const Qt=!!(Et(r,xe)&&Et(r,xe)._f&&Et(r,xe)._f.disabled);if(!Ie||Ae){p.isDirty&&(Me=n.isDirty,n.isDirty=ut.isDirty=V(),rt=Me!==ut.isDirty);const Gt=Qt||Pl(Et(i,xe),be);Me=!!(!Qt&&Et(n.dirtyFields,xe)),Gt||Qt?ri(n.dirtyFields,xe):zn(n.dirtyFields,xe,!0),ut.dirtyFields=n.dirtyFields,rt=rt||p.dirtyFields&&Me!==!Gt}if(Ie){const Gt=Et(n.touchedFields,xe);Gt||(zn(n.touchedFields,xe,Ie),ut.touchedFields=n.touchedFields,rt=rt||p.touchedFields&&Gt!==Ie)}rt&&Ue&&h.state.next(ut)}return rt?ut:{}},W=(xe,be,Ie,Ae)=>{const Ue=Et(n.errors,xe),rt=p.isValid&&ro(be)&&n.isValid!==be;if(e.delayError&&Ie?(u=E(()=>j(xe,Ie)),u(e.delayError)):(clearTimeout(f),u=null,Ie?zn(n.errors,xe,Ie):ri(n.errors,xe)),(Ie?!Pl(Ue,Ie):Ue)||!cs(Ae)||rt){const Me={...Ae,...rt&&ro(be)?{isValid:be}:{},errors:n.errors,name:xe};n={...n,...Me},h.state.next(Me)}},P=async xe=>{T(xe,!0);const be=await e.resolver(s,e.context,QJ(xe||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return T(xe),be},O=async xe=>{const{errors:be}=await P(xe);if(xe)for(const Ie of xe){const Ae=Et(be,Ie);Ae?zn(n.errors,Ie,Ae):ri(n.errors,Ie)}else n.errors=be;return be},z=async(xe,be,Ie={valid:!0})=>{for(const Ae in xe){const Ue=xe[Ae];if(Ue){const{_f:rt,...Me}=Ue;if(rt){const ut=l.array.has(rt.name),Qt=Ue._f&&GJ(Ue._f);Qt&&p.validatingFields&&T([Ae],!0);const Gt=await oO(Ue,l.disabled,s,_,e.shouldUseNativeValidation&&!be,ut);if(Qt&&p.validatingFields&&T([Ae]),Gt[rt.name]&&(Ie.valid=!1,be))break;!be&&(Et(Gt,rt.name)?ut?VJ(n.errors,Gt,rt.name):zn(n.errors,rt.name,Gt[rt.name]):ri(n.errors,rt.name))}!cs(Me)&&await z(Me,be,Ie)}}return Ie.valid},F=()=>{for(const xe of l.unMount){const be=Et(r,xe);be&&(be._f.refs?be._f.refs.every(Ie=>!C0(Ie)):!C0(be._f.ref))&&Ne(xe)}l.unMount=new Set},V=(xe,be)=>!e.disabled&&(xe&&be&&zn(s,xe,be),!Pl(te(),i)),U=(xe,be,Ie)=>s2(xe,l,{...o.mount?s:$r(be)?i:ea(xe)?{[xe]:be}:be},Ie,be),B=xe=>Qv(Et(o.mount?s:i,xe,e.shouldUnregister?Et(i,xe,[]):[])),G=(xe,be,Ie={})=>{const Ae=Et(r,xe);let Ue=be;if(Ae){const rt=Ae._f;rt&&(!rt.disabled&&zn(s,xe,f2(be,rt)),Ue=Kb(rt.ref)&&$i(be)?"":be,c2(rt.ref)?[...rt.ref.options].forEach(Me=>Me.selected=Ue.includes(Me.value)):rt.refs?_m(rt.ref)?rt.refs.length>1?rt.refs.forEach(Me=>(!Me.defaultChecked||!Me.disabled)&&(Me.checked=Array.isArray(Ue)?!!Ue.find(ut=>ut===Me.value):Ue===Me.value)):rt.refs[0]&&(rt.refs[0].checked=!!Ue):rt.refs.forEach(Me=>Me.checked=Me.value===Ue):S1(rt.ref)?rt.ref.value="":(rt.ref.value=Ue,rt.ref.type||h.values.next({name:xe,values:{...s}})))}(Ie.shouldDirty||Ie.shouldTouch)&&M(xe,Ue,Ie.shouldTouch,Ie.shouldDirty,!0),Ie.shouldValidate&&oe(xe)},Z=(xe,be,Ie)=>{for(const Ae in be){const Ue=be[Ae],rt=`${xe}.${Ae}`,Me=Et(r,rt);(l.array.has(xe)||Vr(Ue)||Me&&!Me._f)&&!Uc(Ue)?Z(rt,Ue,Ie):G(rt,Ue,Ie)}},le=(xe,be,Ie={})=>{const Ae=Et(r,xe),Ue=l.array.has(xe),rt=ls(be);zn(s,xe,rt),Ue?(h.array.next({name:xe,values:{...s}}),(p.isDirty||p.dirtyFields)&&Ie.shouldDirty&&h.state.next({name:xe,dirtyFields:vp(i,s),isDirty:V(xe,rt)})):Ae&&!Ae._f&&!$i(rt)?Z(xe,rt,Ie):G(xe,rt,Ie),tO(xe,l)&&h.state.next({...n}),h.values.next({name:o.mount?xe:void 0,values:{...s}})},ie=async xe=>{o.mount=!0;const be=xe.target;let Ie=be.name,Ae=!0;const Ue=Et(r,Ie),rt=()=>be.type?T0(Ue._f):XD(xe),Me=ut=>{Ae=Number.isNaN(ut)||Uc(ut)&&isNaN(ut.getTime())||Pl(ut,Et(s,Ie,ut))};if(Ue){let ut,Qt;const Gt=rt(),bn=xe.type===Hb.BLUR||xe.type===Hb.FOCUS_OUT,ar=!JJ(Ue._f)&&!e.resolver&&!Et(n.errors,Ie)&&!Ue._f.deps||ZJ(bn,Et(n.touchedFields,Ie),n.isSubmitted,x,b),Dn=tO(Ie,l,bn);zn(s,Ie,Gt),bn?(Ue._f.onBlur&&Ue._f.onBlur(xe),u&&u(0)):Ue._f.onChange&&Ue._f.onChange(xe);const Qr=M(Ie,Gt,bn,!1),Pi=!cs(Qr)||Dn;if(!bn&&h.values.next({name:Ie,type:xe.type,values:{...s}}),ar)return p.isValid&&(e.mode==="onBlur"&&bn?I():bn||I()),Pi&&h.state.next({name:Ie,...Dn?{}:Qr});if(!bn&&Dn&&h.state.next({...n}),e.resolver){const{errors:Sr}=await P([Ie]);if(Me(Gt),Ae){const Jt=lO(n.errors,r,Ie),Ji=lO(Sr,r,Jt.name||Ie);ut=Ji.error,Ie=Ji.name,Qt=cs(Sr)}}else T([Ie],!0),ut=(await oO(Ue,l.disabled,s,_,e.shouldUseNativeValidation))[Ie],T([Ie]),Me(Gt),Ae&&(ut?Qt=!1:p.isValid&&(Qt=await z(r,!0)));Ae&&(Ue._f.deps&&oe(Ue._f.deps),W(Ie,Qt,ut,Qr))}},ne=(xe,be)=>{if(Et(n.errors,be)&&xe.focus)return xe.focus(),1},oe=async(xe,be={})=>{let Ie,Ae;const Ue=sh(xe);if(e.resolver){const rt=await O($r(xe)?xe:Ue);Ie=cs(rt),Ae=xe?!Ue.some(Me=>Et(rt,Me)):Ie}else xe?(Ae=(await Promise.all(Ue.map(async rt=>{const Me=Et(r,rt);return await z(Me&&Me._f?{[rt]:Me}:Me)}))).every(Boolean),!(!Ae&&!n.isValid)&&I()):Ae=Ie=await z(r);return h.state.next({...!ea(xe)||p.isValid&&Ie!==n.isValid?{}:{name:xe},...e.resolver||!xe?{isValid:Ie}:{},errors:n.errors}),be.shouldFocus&&!Ae&&oh(r,ne,xe?Ue:l.mount),Ae},te=xe=>{const be={...o.mount?s:i};return $r(xe)?be:ea(xe)?Et(be,xe):xe.map(Ie=>Et(be,Ie))},ue=(xe,be)=>({invalid:!!Et((be||n).errors,xe),isDirty:!!Et((be||n).dirtyFields,xe),error:Et((be||n).errors,xe),isValidating:!!Et(n.validatingFields,xe),isTouched:!!Et((be||n).touchedFields,xe)}),de=xe=>{xe&&sh(xe).forEach(be=>ri(n.errors,be)),h.state.next({errors:xe?n.errors:{}})},ye=(xe,be,Ie)=>{const Ae=(Et(r,xe,{_f:{}})._f||{}).ref,Ue=Et(n.errors,xe)||{},{ref:rt,message:Me,type:ut,...Qt}=Ue;zn(n.errors,xe,{...Qt,...be,ref:Ae}),h.state.next({name:xe,errors:n.errors,isValid:!1}),Ie&&Ie.shouldFocus&&Ae&&Ae.focus&&Ae.focus()},we=(xe,be)=>Yo(xe)?h.values.subscribe({next:Ie=>xe(U(void 0,be),Ie)}):U(xe,be,!0),Ne=(xe,be={})=>{for(const Ie of xe?sh(xe):l.mount)l.mount.delete(Ie),l.array.delete(Ie),be.keepValue||(ri(r,Ie),ri(s,Ie)),!be.keepError&&ri(n.errors,Ie),!be.keepDirty&&ri(n.dirtyFields,Ie),!be.keepTouched&&ri(n.touchedFields,Ie),!be.keepIsValidating&&ri(n.validatingFields,Ie),!e.shouldUnregister&&!be.keepDefaultValue&&ri(i,Ie);h.values.next({values:{...s}}),h.state.next({...n,...be.keepDirty?{isDirty:V()}:{}}),!be.keepIsValid&&I()},ze=({disabled:xe,name:be,field:Ie,fields:Ae})=>{(ro(xe)&&o.mount||xe||l.disabled.has(be))&&(xe?l.disabled.add(be):l.disabled.delete(be),M(be,T0(Ie?Ie._f:Et(Ae,be)._f),!1,!1,!0))},je=(xe,be={})=>{let Ie=Et(r,xe);const Ae=ro(be.disabled)||ro(e.disabled);return zn(r,xe,{...Ie||{},_f:{...Ie&&Ie._f?Ie._f:{ref:{name:xe}},name:xe,mount:!0,...be}}),l.mount.add(xe),Ie?ze({field:Ie,disabled:ro(be.disabled)?be.disabled:e.disabled,name:xe}):L(xe,!0,be.value),{...Ae?{disabled:be.disabled||e.disabled}:{},...e.progressive?{required:!!be.required,min:xp(be.min),max:xp(be.max),minLength:xp(be.minLength),maxLength:xp(be.maxLength),pattern:xp(be.pattern)}:{},name:xe,onChange:ie,onBlur:ie,ref:Ue=>{if(Ue){je(xe,be),Ie=Et(r,xe);const rt=$r(Ue.value)&&Ue.querySelectorAll&&Ue.querySelectorAll("input,select,textarea")[0]||Ue,Me=KJ(rt),ut=Ie._f.refs||[];if(Me?ut.find(Qt=>Qt===rt):rt===Ie._f.ref)return;zn(r,xe,{_f:{...Ie._f,...Me?{refs:[...ut.filter(C0),rt,...Array.isArray(Et(i,xe))?[{}]:[]],ref:{type:rt.type,name:xe}}:{ref:rt}}}),L(xe,!1,void 0,rt)}else Ie=Et(r,xe,{}),Ie._f&&(Ie._f.mount=!1),(e.shouldUnregister||be.shouldUnregister)&&!(e2(l.array,xe)&&o.action)&&l.unMount.add(xe)}}},De=()=>e.shouldFocusError&&oh(r,ne,l.mount),Je=xe=>{ro(xe)&&(h.state.next({disabled:xe}),oh(r,(be,Ie)=>{const Ae=Et(r,Ie);Ae&&(be.disabled=Ae._f.disabled||xe,Array.isArray(Ae._f.refs)&&Ae._f.refs.forEach(Ue=>{Ue.disabled=Ae._f.disabled||xe}))},0,!1))},Xe=(xe,be)=>async Ie=>{let Ae;Ie&&(Ie.preventDefault&&Ie.preventDefault(),Ie.persist&&Ie.persist());let Ue=ls(s);if(l.disabled.size)for(const rt of l.disabled)zn(Ue,rt,void 0);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:rt,values:Me}=await P();n.errors=rt,Ue=Me}else await z(r);if(ri(n.errors,"root"),cs(n.errors)){h.state.next({errors:{}});try{await xe(Ue,Ie)}catch(rt){Ae=rt}}else be&&await be({...n.errors},Ie),De(),setTimeout(De);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:cs(n.errors)&&!Ae,submitCount:n.submitCount+1,errors:n.errors}),Ae)throw Ae},Ve=(xe,be={})=>{Et(r,xe)&&($r(be.defaultValue)?le(xe,ls(Et(i,xe))):(le(xe,be.defaultValue),zn(i,xe,ls(be.defaultValue))),be.keepTouched||ri(n.touchedFields,xe),be.keepDirty||(ri(n.dirtyFields,xe),n.isDirty=be.defaultValue?V(xe,ls(Et(i,xe))):V()),be.keepError||(ri(n.errors,xe),p.isValid&&I()),h.state.next({...n}))},ct=(xe,be={})=>{const Ie=xe?ls(xe):i,Ae=ls(Ie),Ue=cs(xe),rt=Ue?i:Ae;if(be.keepDefaultValues||(i=Ie),!be.keepValues){if(be.keepDirtyValues){const Me=new Set([...l.mount,...Object.keys(vp(i,s))]);for(const ut of Array.from(Me))Et(n.dirtyFields,ut)?zn(rt,ut,Et(s,ut)):le(ut,Et(rt,ut))}else{if(v1&&$r(xe))for(const Me of l.mount){const ut=Et(r,Me);if(ut&&ut._f){const Qt=Array.isArray(ut._f.refs)?ut._f.refs[0]:ut._f.ref;if(Kb(Qt)){const Gt=Qt.closest("form");if(Gt){Gt.reset();break}}}}r={}}s=e.shouldUnregister?be.keepDefaultValues?ls(i):{}:ls(rt),h.array.next({values:{...rt}}),h.values.next({values:{...rt}})}l={mount:be.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!p.isValid||!!be.keepIsValid||!!be.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:be.keepSubmitCount?n.submitCount:0,isDirty:Ue?!1:be.keepDirty?n.isDirty:!!(be.keepDefaultValues&&!Pl(xe,i)),isSubmitted:be.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ue?{}:be.keepDirtyValues?be.keepDefaultValues&&s?vp(i,s):n.dirtyFields:be.keepDefaultValues&&xe?vp(i,xe):be.keepDirty?n.dirtyFields:{},touchedFields:be.keepTouched?n.touchedFields:{},errors:be.keepErrors?n.errors:{},isSubmitSuccessful:be.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},_t=(xe,be)=>ct(Yo(xe)?xe(s):xe,be);return{control:{register:je,unregister:Ne,getFieldState:ue,handleSubmit:Xe,setError:ye,_executeSchema:P,_getWatch:U,_getDirty:V,_updateValid:I,_removeUnmounted:F,_updateFieldArray:C,_updateDisabledField:ze,_getFieldArray:B,_reset:ct,_resetDefaultValues:()=>Yo(e.defaultValues)&&e.defaultValues().then(xe=>{_t(xe,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:xe=>{n={...n,...xe}},_disableForm:Je,_subjects:h,_proxyFormState:p,_setErrors:q,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(xe){o=xe},get _defaultValues(){return i},get _names(){return l},set _names(xe){l=xe},get _formState(){return n},set _formState(xe){n=xe},get _options(){return e},set _options(xe){e={...e,...xe}}},trigger:oe,register:je,handleSubmit:Xe,watch:we,setValue:le,getValues:te,reset:_t,resetField:Ve,clearErrors:de,unregister:Ne,setError:ye,setFocus:(xe,be={})=>{const Ie=Et(r,xe),Ae=Ie&&Ie._f;if(Ae){const Ue=Ae.refs?Ae.refs[0]:Ae.ref;Ue.focus&&(Ue.focus(),be.shouldSelect&&Yo(Ue.select)&&Ue.select())}},getFieldState:ue}}function bi(t={}){const e=$n.useRef(void 0),n=$n.useRef(void 0),[r,i]=$n.useState({isDirty:!1,isValidating:!1,isLoading:Yo(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Yo(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...eZ(t),formState:r});const s=e.current.control;return s._options=t,_1({subject:s._subjects.state,next:o=>{r2(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),$n.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),$n.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),$n.useEffect(()=>{t.values&&!Pl(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),$n.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),$n.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),$n.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=n2(r,s),e.current}const cO=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Et(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},p2=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?cO(r.ref,n,t):r.refs&&r.refs.forEach(i=>cO(i,n,t))}},tZ=(t,e)=>{e.shouldUseNativeValidation&&p2(t,e);const n={};for(const r in t){const i=Et(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(nZ(e.names||Object.keys(t),r)){const o=Object.assign({},Et(n,r));zn(o,"root",s),zn(n,r,o)}else zn(n,r,s)}return n},nZ=(t,e)=>t.some(n=>n.startsWith(e+"."));var rZ=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(p){return p.errors.forEach(function(h){return t.push(h)})}),e){var u=n[o].types,f=u&&u[r.code];n[o]=o2(o,e,n,i,f?[].concat(f,r.message):r.message)}t.shift()}return n},vi=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,l){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(f){return s.shouldUseNativeValidation&&p2({},s),{errors:{},values:n.raw?r:f}})}catch(f){return l(f)}return u&&u.then?u.then(void 0,l):u}(0,function(o){if(function(l){return Array.isArray(l?.errors)}(o))return{values:{},errors:tZ(rZ(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}};const Jb="icon-[cil--arrow-right]",h2="icon-[et--map]",iZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({name:D.string().min(1),cycles:D.number().int(),sort:D.number().int(),limit:D.number().int()})),shape:t,filter:e,sort:["id","name","cycles","sort","limit"]}),sZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({blueprintId:D.string().min(1),conflictId:D.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","conflictId"]}),oZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({blueprintId:D.string().min(1),dependencyId:D.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","dependencyId"]}),aZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({blueprintId:D.string().min(1),inventoryId:D.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","inventoryId"]}),lZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({blueprintId:D.string().min(1),resourceId:D.string().min(1),amount:D.number(),cycles:D.number().int()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","cycles"]}),cZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({blueprintProductionId:D.string().min(1),blueprintId:D.string().min(1)})),shape:t,filter:e,sort:["id","blueprintProductionId","blueprintId"]}),uZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({blueprintProductionId:D.string().min(1),resourceId:D.string().min(1),amount:D.number(),passive:Hi()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount","passive"]}),dZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({blueprintProductionId:D.string().min(1),resourceId:D.string().min(1),amount:D.number()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount"]}),fZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({blueprintId:D.string().min(1),resourceId:D.string().min(1),amount:D.number(),passive:Hi()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","passive"]}),pZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({userId:D.string().min(1),blueprintId:D.string().min(1),constructionId:D.string().nullish(),landId:D.string().min(1),productionId:D.string().nullish(),recurringProductionId:D.string().nullish(),x:D.number(),y:D.number(),valid:Hi()})),shape:t,filter:e,sort:["id","userId","blueprintId","constructionId","landId","productionId","recurringProductionId","x","y","valid"]}),hZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({resourceId:D.string().min(1),amount:D.number(),limit:D.number(),type:D.string().min(1)})),shape:t,filter:e,sort:["id","resourceId","amount","limit","type"]}),mZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({userId:D.string().min(1),name:D.string().min(1)})),shape:t,filter:e,sort:["id","userId","name"]}),gZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({name:D.string().min(1),color:D.string().min(1),minWidth:D.number().int(),maxWidth:D.number().int(),minHeight:D.number().int(),maxHeight:D.number().int(),probability:D.number().int(),limit:D.number().int()})),shape:t,filter:e,sort:["id","name","color","minWidth","maxWidth","minHeight","maxHeight","probability","limit"]}),yZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({name:D.string().min(1),transport:D.number()})),shape:t,filter:e,sort:["id","name","transport"]}),bZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({code:D.string().min(1),label:D.string().min(1),group:D.string().nullish(),sort:D.number().int()})),shape:t,filter:e,sort:["id","code","label","group","sort"]}),vZ=({shape:t,filter:e})=>Ai({entity:Oi.merge(D.object({name:D.string().min(1),login:D.string().min(1),password:D.string().min(1)})),shape:t,filter:e,sort:["id","name","login","password"]}),xZ=mZ({shape:D.object({name:D.string().min(1)}),filter:qi});function wZ(t){return Math.random()<t/100}function uO(t,e){return Math.floor(Math.random()*(e-t+1))+t}function _Z(t=20480,e=32){const n=()=>Math.floor(Math.random()*(t/e))*e;return{x:n(),y:n()}}async function SZ(t,e,n,r){return!!await t.selectFrom("Land as l").where("l.mapId","=",e).where(s=>s.not(s.or([s("l.x",">=",n.x+r.width),s(fr`l.x + l.width`,"<=",n.x),s("l.y",">=",n.y+r.height),s(fr`l.y + l.height`,"<=",n.y)]))).select("id").executeTakeFirst()}const EZ=async({tx:t,userId:e,name:n,size:r={world:32,land:384*2}})=>{const i=await t.insertInto("Map").values({id:On(),userId:e,name:n}).returning("id").executeTakeFirstOrThrow(),s=await t.selectFrom("Region").selectAll().execute();for await(const{id:o,probability:l,limit:u,minWidth:f,maxWidth:p,minHeight:h,maxHeight:b}of s)for(let x=0;x<u;x++){if(!wZ(l))continue;let _=0;const E=10;for(;_<E;){const I=uO(f,p)*r.land+64,T=uO(h,b)*r.land+64,C=_Z(4096*r.world);if(!await SZ(t,i.id,C,{width:I,height:T})){await t.insertInto("Land").values({id:On(),height:T,width:I,regionId:o,mapId:i.id,...C}).execute();break}_++}}return i},NZ=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(xZ.shape),defaultValues:{name:"",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"name",label:d.jsx(X,{label:"Map name (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:h2,type:"submit",children:d.jsx(X,{label:"Create map (submit)"})})})]})},m2=Dt("/$locale/apps/derivean/game/")({async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{user:r,map:await t.ensureQueryData({queryKey:["GameMap","map",r.id],async queryFn(){return e.transaction().execute(i=>Br({select:i.selectFrom("Map as m").select(["m.id","m.name"]).where("m.userId","=",r.id),output:D.object({id:D.string().min(1),name:D.string().min(1)})}))}})}},component(){const{user:t,map:e}=m2.useLoaderData(),{tva:n}=pr({from:"__root__"}),r=n().slots,i=Vn([["GameMap"]]),{locale:s}=tn({from:"/$locale"}),o=tc(),l=Yt({async mutationFn({id:u}){return jt.transaction().execute(async f=>f.deleteFrom("Map").where("id","=",u).where("userId","=",t.id).execute())},async onSuccess(){await i()}});return d.jsxs("div",{className:r.base({css:["w-1/2","mx-auto","mt-24","flex","flex-col","gap-6"]}),children:[d.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:d.jsx(X,{label:"Map list (label)"})}),e.length>0?e.map(u=>d.jsxs("div",{className:mn(["flex","flex-row","gap-2","items-center","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsx(Rt,{icon:Jb,to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:u.id},children:u.name}),d.jsx("div",{children:d.jsx(gn,{iconEnabled:ii,variant:{variant:"danger"},loading:l.isPending,onClick:()=>{l.mutate({id:u.id})}})})]},u.id)):d.jsx("div",{className:mn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"There are no maps (label)"})}),d.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:d.jsx(X,{label:"New map (label)"})}),d.jsx("div",{children:d.jsx(NZ,{mutation:Yt({async mutationFn(u){return Rn.promise(jt.transaction().execute(f=>EZ({tx:f,userId:t.id,...u})),Wr("Map generator"))},async onSuccess(u){o({to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:u.id}}),await i()}})})})]})}});var R0,dO;function N1(){if(dO)return R0;dO=1;var t="\0",e="\0",n="\x01";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(p){p&&(this._isDirected=Object.hasOwn(p,"directed")?p.directed:!0,this._isMultigraph=Object.hasOwn(p,"multigraph")?p.multigraph:!1,this._isCompound=Object.hasOwn(p,"compound")?p.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(p){return this._label=p,this}graph(){return this._label}setDefaultNodeLabel(p){return this._defaultNodeLabelFn=p,typeof p!="function"&&(this._defaultNodeLabelFn=()=>p),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var p=this;return this.nodes().filter(h=>Object.keys(p._in[h]).length===0)}sinks(){var p=this;return this.nodes().filter(h=>Object.keys(p._out[h]).length===0)}setNodes(p,h){var b=arguments,x=this;return p.forEach(function(_){b.length>1?x.setNode(_,h):x.setNode(_)}),this}setNode(p,h){return Object.hasOwn(this._nodes,p)?(arguments.length>1&&(this._nodes[p]=h),this):(this._nodes[p]=arguments.length>1?h:this._defaultNodeLabelFn(p),this._isCompound&&(this._parent[p]=e,this._children[p]={},this._children[e][p]=!0),this._in[p]={},this._preds[p]={},this._out[p]={},this._sucs[p]={},++this._nodeCount,this)}node(p){return this._nodes[p]}hasNode(p){return Object.hasOwn(this._nodes,p)}removeNode(p){var h=this;if(Object.hasOwn(this._nodes,p)){var b=x=>h.removeEdge(h._edgeObjs[x]);delete this._nodes[p],this._isCompound&&(this._removeFromParentsChildList(p),delete this._parent[p],this.children(p).forEach(function(x){h.setParent(x)}),delete this._children[p]),Object.keys(this._in[p]).forEach(b),delete this._in[p],delete this._preds[p],Object.keys(this._out[p]).forEach(b),delete this._out[p],delete this._sucs[p],--this._nodeCount}return this}setParent(p,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(h===void 0)h=e;else{h+="";for(var b=h;b!==void 0;b=this.parent(b))if(b===p)throw new Error("Setting "+h+" as parent of "+p+" would create a cycle");this.setNode(h)}return this.setNode(p),this._removeFromParentsChildList(p),this._parent[p]=h,this._children[h][p]=!0,this}_removeFromParentsChildList(p){delete this._children[this._parent[p]][p]}parent(p){if(this._isCompound){var h=this._parent[p];if(h!==e)return h}}children(p=e){if(this._isCompound){var h=this._children[p];if(h)return Object.keys(h)}else{if(p===e)return this.nodes();if(this.hasNode(p))return[]}}predecessors(p){var h=this._preds[p];if(h)return Object.keys(h)}successors(p){var h=this._sucs[p];if(h)return Object.keys(h)}neighbors(p){var h=this.predecessors(p);if(h){const x=new Set(h);for(var b of this.successors(p))x.add(b);return Array.from(x.values())}}isLeaf(p){var h;return this.isDirected()?h=this.successors(p):h=this.neighbors(p),h.length===0}filterNodes(p){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var b=this;Object.entries(this._nodes).forEach(function([E,I]){p(E)&&h.setNode(E,I)}),Object.values(this._edgeObjs).forEach(function(E){h.hasNode(E.v)&&h.hasNode(E.w)&&h.setEdge(E,b.edge(E))});var x={};function _(E){var I=b.parent(E);return I===void 0||h.hasNode(I)?(x[E]=I,I):I in x?x[I]:_(I)}return this._isCompound&&h.nodes().forEach(E=>h.setParent(E,_(E))),h}setDefaultEdgeLabel(p){return this._defaultEdgeLabelFn=p,typeof p!="function"&&(this._defaultEdgeLabelFn=()=>p),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(p,h){var b=this,x=arguments;return p.reduce(function(_,E){return x.length>1?b.setEdge(_,E,h):b.setEdge(_,E),E}),this}setEdge(){var p,h,b,x,_=!1,E=arguments[0];typeof E=="object"&&E!==null&&"v"in E?(p=E.v,h=E.w,b=E.name,arguments.length===2&&(x=arguments[1],_=!0)):(p=E,h=arguments[1],b=arguments[3],arguments.length>2&&(x=arguments[2],_=!0)),p=""+p,h=""+h,b!==void 0&&(b=""+b);var I=o(this._isDirected,p,h,b);if(Object.hasOwn(this._edgeLabels,I))return _&&(this._edgeLabels[I]=x),this;if(b!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(p),this.setNode(h),this._edgeLabels[I]=_?x:this._defaultEdgeLabelFn(p,h,b);var T=l(this._isDirected,p,h,b);return p=T.v,h=T.w,Object.freeze(T),this._edgeObjs[I]=T,i(this._preds[h],p),i(this._sucs[p],h),this._in[h][I]=T,this._out[p][I]=T,this._edgeCount++,this}edge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b);return this._edgeLabels[x]}edgeAsObj(){const p=this.edge(...arguments);return typeof p!="object"?{label:p}:p}hasEdge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b);return Object.hasOwn(this._edgeLabels,x)}removeEdge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b),_=this._edgeObjs[x];return _&&(p=_.v,h=_.w,delete this._edgeLabels[x],delete this._edgeObjs[x],s(this._preds[h],p),s(this._sucs[p],h),delete this._in[h][x],delete this._out[p][x],this._edgeCount--),this}inEdges(p,h){var b=this._in[p];if(b){var x=Object.values(b);return h?x.filter(_=>_.v===h):x}}outEdges(p,h){var b=this._out[p];if(b){var x=Object.values(b);return h?x.filter(_=>_.w===h):x}}nodeEdges(p,h){var b=this.inEdges(p,h);if(b)return b.concat(this.outEdges(p,h))}}function i(f,p){f[p]?f[p]++:f[p]=1}function s(f,p){--f[p]||delete f[p]}function o(f,p,h,b){var x=""+p,_=""+h;if(!f&&x>_){var E=x;x=_,_=E}return x+n+_+n+(b===void 0?t:b)}function l(f,p,h,b){var x=""+p,_=""+h;if(!f&&x>_){var E=x;x=_,_=E}var I={v:x,w:_};return b&&(I.name=b),I}function u(f,p){return o(f,p.v,p.w,p.name)}return R0=r,R0}var j0,fO;function IZ(){return fO||(fO=1,j0="2.2.4"),j0}var O0,pO;function kZ(){return pO||(pO=1,O0={Graph:N1(),version:IZ()}),O0}var q0,hO;function CZ(){if(hO)return q0;hO=1;var t=N1();q0={write:e,read:i};function e(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:r(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function n(s){return s.nodes().map(function(o){var l=s.node(o),u=s.parent(o),f={v:o};return l!==void 0&&(f.value=l),u!==void 0&&(f.parent=u),f})}function r(s){return s.edges().map(function(o){var l=s.edge(o),u={v:o.v,w:o.w};return o.name!==void 0&&(u.name=o.name),l!==void 0&&(u.value=l),u})}function i(s){var o=new t(s.options).setGraph(s.value);return s.nodes.forEach(function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),s.edges.forEach(function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return q0}var A0,mO;function TZ(){if(mO)return A0;mO=1,A0=t;function t(e){var n={},r=[],i;function s(o){Object.hasOwn(n,o)||(n[o]=!0,i.push(o),e.successors(o).forEach(s),e.predecessors(o).forEach(s))}return e.nodes().forEach(function(o){i=[],s(o),i.length&&r.push(i)}),r}return A0}var P0,gO;function g2(){if(gO)return P0;gO=1;class t{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))}_decrease(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s}_swap(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r}}return P0=t,P0}var F0,yO;function y2(){if(yO)return F0;yO=1;var t=g2();F0=n;var e=()=>1;function n(i,s,o,l){return r(i,String(s),o||e,l||function(u){return i.outEdges(u)})}function r(i,s,o,l){var u={},f=new t,p,h,b=function(x){var _=x.v!==p?x.v:x.w,E=u[_],I=o(x),T=h.distance+I;if(I<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+I);T<E.distance&&(E.distance=T,E.predecessor=p,f.decrease(_,T))};for(i.nodes().forEach(function(x){var _=x===s?0:Number.POSITIVE_INFINITY;u[x]={distance:_},f.add(x,_)});f.size()>0&&(p=f.removeMin(),h=u[p],h.distance!==Number.POSITIVE_INFINITY);)l(p).forEach(b);return u}return F0}var D0,bO;function RZ(){if(bO)return D0;bO=1;var t=y2();D0=e;function e(n,r,i){return n.nodes().reduce(function(s,o){return s[o]=t(n,o,r,i),s},{})}return D0}var L0,vO;function b2(){if(vO)return L0;vO=1,L0=t;function t(e){var n=0,r=[],i={},s=[];function o(l){var u=i[l]={onStack:!0,lowlink:n,index:n++};if(r.push(l),e.successors(l).forEach(function(h){Object.hasOwn(i,h)?i[h].onStack&&(u.lowlink=Math.min(u.lowlink,i[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,i[h].lowlink))}),u.lowlink===u.index){var f=[],p;do p=r.pop(),i[p].onStack=!1,f.push(p);while(l!==p);s.push(f)}}return e.nodes().forEach(function(l){Object.hasOwn(i,l)||o(l)}),s}return L0}var M0,xO;function jZ(){if(xO)return M0;xO=1;var t=b2();M0=e;function e(n){return t(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return M0}var $0,wO;function OZ(){if(wO)return $0;wO=1,$0=e;var t=()=>1;function e(r,i,s){return n(r,i||t,s||function(o){return r.outEdges(o)})}function n(r,i,s){var o={},l=r.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(f){u!==f&&(o[u][f]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(f){var p=f.v===u?f.w:f.v,h=i(f);o[u][p]={distance:h,predecessor:u}})}),l.forEach(function(u){var f=o[u];l.forEach(function(p){var h=o[p];l.forEach(function(b){var x=h[u],_=f[b],E=h[b],I=x.distance+_.distance;I<E.distance&&(E.distance=I,E.predecessor=_.predecessor)})})}),o}return $0}var B0,_O;function v2(){if(_O)return B0;_O=1;function t(n){var r={},i={},s=[];function o(l){if(Object.hasOwn(i,l))throw new e;Object.hasOwn(r,l)||(i[l]=!0,r[l]=!0,n.predecessors(l).forEach(o),delete i[l],s.push(l))}if(n.sinks().forEach(o),Object.keys(r).length!==n.nodeCount())throw new e;return s}class e extends Error{constructor(){super(...arguments)}}return B0=t,t.CycleException=e,B0}var z0,SO;function qZ(){if(SO)return z0;SO=1;var t=v2();z0=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return z0}var W0,EO;function x2(){if(EO)return W0;EO=1,W0=t;function t(i,s,o){Array.isArray(s)||(s=[s]);var l=i.isDirected()?h=>i.successors(h):h=>i.neighbors(h),u=o==="post"?e:n,f=[],p={};return s.forEach(h=>{if(!i.hasNode(h))throw new Error("Graph does not have node: "+h);u(h,l,p,f)}),f}function e(i,s,o,l){for(var u=[[i,!1]];u.length>0;){var f=u.pop();f[1]?l.push(f[0]):Object.hasOwn(o,f[0])||(o[f[0]]=!0,u.push([f[0],!0]),r(s(f[0]),p=>u.push([p,!1])))}}function n(i,s,o,l){for(var u=[i];u.length>0;){var f=u.pop();Object.hasOwn(o,f)||(o[f]=!0,l.push(f),r(s(f),p=>u.push(p)))}}function r(i,s){for(var o=i.length;o--;)s(i[o],o,i);return i}return W0}var V0,NO;function AZ(){if(NO)return V0;NO=1;var t=x2();V0=e;function e(n,r){return t(n,r,"post")}return V0}var U0,IO;function PZ(){if(IO)return U0;IO=1;var t=x2();U0=e;function e(n,r){return t(n,r,"pre")}return U0}var H0,kO;function FZ(){if(kO)return H0;kO=1;var t=N1(),e=g2();H0=n;function n(r,i){var s=new t,o={},l=new e,u;function f(h){var b=h.v===u?h.w:h.v,x=l.priority(b);if(x!==void 0){var _=i(h);_<x&&(o[b]=u,l.decrease(b,_))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(h){l.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),l.decrease(r.nodes()[0],0);for(var p=!1;l.size()>0;){if(u=l.removeMin(),Object.hasOwn(o,u))s.setEdge(u,o[u]);else{if(p)throw new Error("Input graph is not connected: "+r);p=!0}r.nodeEdges(u).forEach(f)}return s}return H0}var K0,CO;function DZ(){return CO||(CO=1,K0={components:TZ(),dijkstra:y2(),dijkstraAll:RZ(),findCycles:jZ(),floydWarshall:OZ(),isAcyclic:qZ(),postorder:AZ(),preorder:PZ(),prim:FZ(),tarjan:b2(),topsort:v2()}),K0}var Q0,TO;function Do(){if(TO)return Q0;TO=1;var t=kZ();return Q0={Graph:t.Graph,json:CZ(),alg:DZ(),version:t.version},Q0}var G0,RO;function LZ(){if(RO)return G0;RO=1;class t{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return e(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&e(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,o=s._prev;for(;o!==s;)i.push(JSON.stringify(o,n)),o=o._prev;return"["+i.join(", ")+"]"}}function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return G0=t,G0}var J0,jO;function MZ(){if(jO)return J0;jO=1;let t=Do().Graph,e=LZ();J0=r;let n=()=>1;function r(f,p){if(f.nodeCount()<=1)return[];let h=o(f,p||n);return i(h.graph,h.buckets,h.zeroIdx).flatMap(x=>f.outEdges(x.v,x.w))}function i(f,p,h){let b=[],x=p[p.length-1],_=p[0],E;for(;f.nodeCount();){for(;E=_.dequeue();)s(f,p,h,E);for(;E=x.dequeue();)s(f,p,h,E);if(f.nodeCount()){for(let I=p.length-2;I>0;--I)if(E=p[I].dequeue(),E){b=b.concat(s(f,p,h,E,!0));break}}}return b}function s(f,p,h,b,x){let _=x?[]:void 0;return f.inEdges(b.v).forEach(E=>{let I=f.edge(E),T=f.node(E.v);x&&_.push({v:E.v,w:E.w}),T.out-=I,l(p,h,T)}),f.outEdges(b.v).forEach(E=>{let I=f.edge(E),T=E.w,C=f.node(T);C.in-=I,l(p,h,C)}),f.removeNode(b.v),_}function o(f,p){let h=new t,b=0,x=0;f.nodes().forEach(I=>{h.setNode(I,{v:I,in:0,out:0})}),f.edges().forEach(I=>{let T=h.edge(I.v,I.w)||0,C=p(I),j=T+C;h.setEdge(I.v,I.w,j),x=Math.max(x,h.node(I.v).out+=C),b=Math.max(b,h.node(I.w).in+=C)});let _=u(x+b+3).map(()=>new e),E=b+1;return h.nodes().forEach(I=>{l(_,E,h.node(I))}),{graph:h,buckets:_,zeroIdx:E}}function l(f,p,h){h.out?h.in?f[h.out-h.in+p].enqueue(h):f[f.length-1].enqueue(h):f[0].enqueue(h)}function u(f){const p=[];for(let h=0;h<f;h++)p.push(h);return p}return J0}var Z0,OO;function ei(){if(OO)return Z0;OO=1;let t=Do().Graph;Z0={addBorderNode:p,addDummyNode:e,applyWithChunking:x,asNonCompoundGraph:r,buildLayerMatrix:l,intersectRect:o,mapValues:M,maxRank:_,normalizeRanks:u,notime:T,partition:E,pick:L,predecessorWeights:s,range:q,removeEmptyRanks:f,simplify:n,successorWeights:i,time:I,uniqueId:j,zipObject:W};function e(P,O,z,F){let V;do V=j(F);while(P.hasNode(V));return z.dummy=O,P.setNode(V,z),V}function n(P){let O=new t().setGraph(P.graph());return P.nodes().forEach(z=>O.setNode(z,P.node(z))),P.edges().forEach(z=>{let F=O.edge(z.v,z.w)||{weight:0,minlen:1},V=P.edge(z);O.setEdge(z.v,z.w,{weight:F.weight+V.weight,minlen:Math.max(F.minlen,V.minlen)})}),O}function r(P){let O=new t({multigraph:P.isMultigraph()}).setGraph(P.graph());return P.nodes().forEach(z=>{P.children(z).length||O.setNode(z,P.node(z))}),P.edges().forEach(z=>{O.setEdge(z,P.edge(z))}),O}function i(P){let O=P.nodes().map(z=>{let F={};return P.outEdges(z).forEach(V=>{F[V.w]=(F[V.w]||0)+P.edge(V).weight}),F});return W(P.nodes(),O)}function s(P){let O=P.nodes().map(z=>{let F={};return P.inEdges(z).forEach(V=>{F[V.v]=(F[V.v]||0)+P.edge(V).weight}),F});return W(P.nodes(),O)}function o(P,O){let z=P.x,F=P.y,V=O.x-z,U=O.y-F,B=P.width/2,G=P.height/2;if(!V&&!U)throw new Error("Not possible to find intersection inside of the rectangle");let Z,le;return Math.abs(U)*B>Math.abs(V)*G?(U<0&&(G=-G),Z=G*V/U,le=G):(V<0&&(B=-B),Z=B,le=B*U/V),{x:z+Z,y:F+le}}function l(P){let O=q(_(P)+1).map(()=>[]);return P.nodes().forEach(z=>{let F=P.node(z),V=F.rank;V!==void 0&&(O[V][F.order]=z)}),O}function u(P){let O=P.nodes().map(F=>{let V=P.node(F).rank;return V===void 0?Number.MAX_VALUE:V}),z=x(Math.min,O);P.nodes().forEach(F=>{let V=P.node(F);Object.hasOwn(V,"rank")&&(V.rank-=z)})}function f(P){let O=P.nodes().map(B=>P.node(B).rank),z=x(Math.min,O),F=[];P.nodes().forEach(B=>{let G=P.node(B).rank-z;F[G]||(F[G]=[]),F[G].push(B)});let V=0,U=P.graph().nodeRankFactor;Array.from(F).forEach((B,G)=>{B===void 0&&G%U!==0?--V:B!==void 0&&V&&B.forEach(Z=>P.node(Z).rank+=V)})}function p(P,O,z,F){let V={width:0,height:0};return arguments.length>=4&&(V.rank=z,V.order=F),e(P,"border",V,O)}function h(P,O=b){const z=[];for(let F=0;F<P.length;F+=O){const V=P.slice(F,F+O);z.push(V)}return z}const b=65535;function x(P,O){if(O.length>b){const z=h(O);return P.apply(null,z.map(F=>P.apply(null,F)))}else return P.apply(null,O)}function _(P){const z=P.nodes().map(F=>{let V=P.node(F).rank;return V===void 0?Number.MIN_VALUE:V});return x(Math.max,z)}function E(P,O){let z={lhs:[],rhs:[]};return P.forEach(F=>{O(F)?z.lhs.push(F):z.rhs.push(F)}),z}function I(P,O){let z=Date.now();try{return O()}finally{console.log(P+" time: "+(Date.now()-z)+"ms")}}function T(P,O){return O()}let C=0;function j(P){var O=++C;return toString(P)+O}function q(P,O,z=1){O==null&&(O=P,P=0);let F=U=>U<O;z<0&&(F=U=>O<U);const V=[];for(let U=P;F(U);U+=z)V.push(U);return V}function L(P,O){const z={};for(const F of O)P[F]!==void 0&&(z[F]=P[F]);return z}function M(P,O){let z=O;return typeof O=="string"&&(z=F=>F[O]),Object.entries(P).reduce((F,[V,U])=>(F[V]=z(U,V),F),{})}function W(P,O){return P.reduce((z,F,V)=>(z[F]=O[V],z),{})}return Z0}var Y0,qO;function $Z(){if(qO)return Y0;qO=1;let t=MZ(),e=ei().uniqueId;Y0={run:n,undo:i};function n(s){(s.graph().acyclicer==="greedy"?t(s,l(s)):r(s)).forEach(u=>{let f=s.edge(u);s.removeEdge(u),f.forwardName=u.name,f.reversed=!0,s.setEdge(u.w,u.v,f,e("rev"))});function l(u){return f=>u.edge(f).weight}}function r(s){let o=[],l={},u={};function f(p){Object.hasOwn(u,p)||(u[p]=!0,l[p]=!0,s.outEdges(p).forEach(h=>{Object.hasOwn(l,h.w)?o.push(h):f(h.w)}),delete l[p])}return s.nodes().forEach(f),o}function i(s){s.edges().forEach(o=>{let l=s.edge(o);if(l.reversed){s.removeEdge(o);let u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return Y0}var X0,AO;function BZ(){if(AO)return X0;AO=1;let t=ei();X0={run:e,undo:r};function e(i){i.graph().dummyChains=[],i.edges().forEach(s=>n(i,s))}function n(i,s){let o=s.v,l=i.node(o).rank,u=s.w,f=i.node(u).rank,p=s.name,h=i.edge(s),b=h.labelRank;if(f===l+1)return;i.removeEdge(s);let x,_,E;for(E=0,++l;l<f;++E,++l)h.points=[],_={width:0,height:0,edgeLabel:h,edgeObj:s,rank:l},x=t.addDummyNode(i,"edge",_,"_d"),l===b&&(_.width=h.width,_.height=h.height,_.dummy="edge-label",_.labelpos=h.labelpos),i.setEdge(o,x,{weight:h.weight},p),E===0&&i.graph().dummyChains.push(x),o=x;i.setEdge(o,u,{weight:h.weight},p)}function r(i){i.graph().dummyChains.forEach(s=>{let o=i.node(s),l=o.edgeLabel,u;for(i.setEdge(o.edgeObj,l);o.dummy;)u=i.successors(s)[0],i.removeNode(s),l.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(l.x=o.x,l.y=o.y,l.width=o.width,l.height=o.height),s=u,o=i.node(s)})}return X0}var eS,PO;function Zb(){if(PO)return eS;PO=1;const{applyWithChunking:t}=ei();eS={longestPath:e,slack:n};function e(r){var i={};function s(o){var l=r.node(o);if(Object.hasOwn(i,o))return l.rank;i[o]=!0;let u=r.outEdges(o).map(p=>p==null?Number.POSITIVE_INFINITY:s(p.w)-r.edge(p).minlen);var f=t(Math.min,u);return f===Number.POSITIVE_INFINITY&&(f=0),l.rank=f}r.sources().forEach(s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return eS}var tS,FO;function w2(){if(FO)return tS;FO=1;var t=Do().Graph,e=Zb().slack;tS=n;function n(o){var l=new t({directed:!1}),u=o.nodes()[0],f=o.nodeCount();l.setNode(u,{});for(var p,h;r(l,o)<f;)p=i(l,o),h=l.hasNode(p.v)?e(o,p):-e(o,p),s(l,o,h);return l}function r(o,l){function u(f){l.nodeEdges(f).forEach(p=>{var h=p.v,b=f===h?p.w:h;!o.hasNode(b)&&!e(l,p)&&(o.setNode(b,{}),o.setEdge(f,b,{}),u(b))})}return o.nodes().forEach(u),o.nodeCount()}function i(o,l){return l.edges().reduce((f,p)=>{let h=Number.POSITIVE_INFINITY;return o.hasNode(p.v)!==o.hasNode(p.w)&&(h=e(l,p)),h<f[0]?[h,p]:f},[Number.POSITIVE_INFINITY,null])[1]}function s(o,l,u){o.nodes().forEach(f=>l.node(f).rank+=u)}return tS}var nS,DO;function zZ(){if(DO)return nS;DO=1;var t=w2(),e=Zb().slack,n=Zb().longestPath,r=Do().alg.preorder,i=Do().alg.postorder,s=ei().simplify;nS=o,o.initLowLimValues=p,o.initCutValues=l,o.calcCutValue=f,o.leaveEdge=b,o.enterEdge=x,o.exchangeEdges=_;function o(C){C=s(C),n(C);var j=t(C);p(j),l(j,C);for(var q,L;q=b(j);)L=x(j,C,q),_(j,C,q,L)}function l(C,j){var q=i(C,C.nodes());q=q.slice(0,q.length-1),q.forEach(L=>u(C,j,L))}function u(C,j,q){var L=C.node(q),M=L.parent;C.edge(q,M).cutvalue=f(C,j,q)}function f(C,j,q){var L=C.node(q),M=L.parent,W=!0,P=j.edge(q,M),O=0;return P||(W=!1,P=j.edge(M,q)),O=P.weight,j.nodeEdges(q).forEach(z=>{var F=z.v===q,V=F?z.w:z.v;if(V!==M){var U=F===W,B=j.edge(z).weight;if(O+=U?B:-B,I(C,q,V)){var G=C.edge(q,V).cutvalue;O+=U?-G:G}}}),O}function p(C,j){arguments.length<2&&(j=C.nodes()[0]),h(C,{},1,j)}function h(C,j,q,L,M){var W=q,P=C.node(L);return j[L]=!0,C.neighbors(L).forEach(O=>{Object.hasOwn(j,O)||(q=h(C,j,q,O,L))}),P.low=W,P.lim=q++,M?P.parent=M:delete P.parent,q}function b(C){return C.edges().find(j=>C.edge(j).cutvalue<0)}function x(C,j,q){var L=q.v,M=q.w;j.hasEdge(L,M)||(L=q.w,M=q.v);var W=C.node(L),P=C.node(M),O=W,z=!1;W.lim>P.lim&&(O=P,z=!0);var F=j.edges().filter(V=>z===T(C,C.node(V.v),O)&&z!==T(C,C.node(V.w),O));return F.reduce((V,U)=>e(j,U)<e(j,V)?U:V)}function _(C,j,q,L){var M=q.v,W=q.w;C.removeEdge(M,W),C.setEdge(L.v,L.w,{}),p(C),l(C,j),E(C,j)}function E(C,j){var q=C.nodes().find(M=>!j.node(M).parent),L=r(C,q);L=L.slice(1),L.forEach(M=>{var W=C.node(M).parent,P=j.edge(M,W),O=!1;P||(P=j.edge(W,M),O=!0),j.node(M).rank=j.node(W).rank+(O?P.minlen:-P.minlen)})}function I(C,j,q){return C.hasEdge(j,q)}function T(C,j,q){return q.low<=j.lim&&j.lim<=q.lim}return nS}var rS,LO;function WZ(){if(LO)return rS;LO=1;var t=Zb(),e=t.longestPath,n=w2(),r=zZ();rS=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=e;function o(u){e(u),n(u)}function l(u){r(u)}return rS}var iS,MO;function VZ(){if(MO)return iS;MO=1,iS=t;function t(r){let i=n(r);r.graph().dummyChains.forEach(s=>{let o=r.node(s),l=o.edgeObj,u=e(r,i,l.v,l.w),f=u.path,p=u.lca,h=0,b=f[h],x=!0;for(;s!==l.w;){if(o=r.node(s),x){for(;(b=f[h])!==p&&r.node(b).maxRank<o.rank;)h++;b===p&&(x=!1)}if(!x){for(;h<f.length-1&&r.node(b=f[h+1]).minRank<=o.rank;)h++;b=f[h]}r.setParent(s,b),s=r.successors(s)[0]}})}function e(r,i,s,o){let l=[],u=[],f=Math.min(i[s].low,i[o].low),p=Math.max(i[s].lim,i[o].lim),h,b;h=s;do h=r.parent(h),l.push(h);while(h&&(i[h].low>f||p>i[h].lim));for(b=h,h=o;(h=r.parent(h))!==b;)u.push(h);return{path:l.concat(u.reverse()),lca:b}}function n(r){let i={},s=0;function o(l){let u=s;r.children(l).forEach(o),i[l]={low:u,lim:s++}}return r.children().forEach(o),i}return iS}var sS,$O;function UZ(){if($O)return sS;$O=1;let t=ei();sS={run:e,cleanup:s};function e(o){let l=t.addDummyNode(o,"root",{},"_root"),u=r(o),f=Object.values(u),p=t.applyWithChunking(Math.max,f)-1,h=2*p+1;o.graph().nestingRoot=l,o.edges().forEach(x=>o.edge(x).minlen*=h);let b=i(o)+1;o.children().forEach(x=>n(o,l,h,b,p,u,x)),o.graph().nodeRankFactor=h}function n(o,l,u,f,p,h,b){let x=o.children(b);if(!x.length){b!==l&&o.setEdge(l,b,{weight:0,minlen:u});return}let _=t.addBorderNode(o,"_bt"),E=t.addBorderNode(o,"_bb"),I=o.node(b);o.setParent(_,b),I.borderTop=_,o.setParent(E,b),I.borderBottom=E,x.forEach(T=>{n(o,l,u,f,p,h,T);let C=o.node(T),j=C.borderTop?C.borderTop:T,q=C.borderBottom?C.borderBottom:T,L=C.borderTop?f:2*f,M=j!==q?1:p-h[b]+1;o.setEdge(_,j,{weight:L,minlen:M,nestingEdge:!0}),o.setEdge(q,E,{weight:L,minlen:M,nestingEdge:!0})}),o.parent(b)||o.setEdge(l,_,{weight:0,minlen:p+h[b]})}function r(o){var l={};function u(f,p){var h=o.children(f);h&&h.length&&h.forEach(b=>u(b,p+1)),l[f]=p}return o.children().forEach(f=>u(f,1)),l}function i(o){return o.edges().reduce((l,u)=>l+o.edge(u).weight,0)}function s(o){var l=o.graph();o.removeNode(l.nestingRoot),delete l.nestingRoot,o.edges().forEach(u=>{var f=o.edge(u);f.nestingEdge&&o.removeEdge(u)})}return sS}var oS,BO;function HZ(){if(BO)return oS;BO=1;let t=ei();oS=e;function e(r){function i(s){let o=r.children(s),l=r.node(s);if(o.length&&o.forEach(i),Object.hasOwn(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(let u=l.minRank,f=l.maxRank+1;u<f;++u)n(r,"borderLeft","_bl",s,l,u),n(r,"borderRight","_br",s,l,u)}}r.children().forEach(i)}function n(r,i,s,o,l,u){let f={width:0,height:0,rank:u,borderType:i},p=l[i][u-1],h=t.addDummyNode(r,"border",f,s);l[i][u]=h,r.setParent(h,o),p&&r.setEdge(p,h,{weight:1})}return oS}var aS,zO;function KZ(){if(zO)return aS;zO=1,aS={adjust:t,undo:e};function t(u){let f=u.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&n(u)}function e(u){let f=u.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&i(u),(f==="lr"||f==="rl")&&(o(u),n(u))}function n(u){u.nodes().forEach(f=>r(u.node(f))),u.edges().forEach(f=>r(u.edge(f)))}function r(u){let f=u.width;u.width=u.height,u.height=f}function i(u){u.nodes().forEach(f=>s(u.node(f))),u.edges().forEach(f=>{let p=u.edge(f);p.points.forEach(s),Object.hasOwn(p,"y")&&s(p)})}function s(u){u.y=-u.y}function o(u){u.nodes().forEach(f=>l(u.node(f))),u.edges().forEach(f=>{let p=u.edge(f);p.points.forEach(l),Object.hasOwn(p,"x")&&l(p)})}function l(u){let f=u.x;u.x=u.y,u.y=f}return aS}var lS,WO;function QZ(){if(WO)return lS;WO=1;let t=ei();lS=e;function e(n){let r={},i=n.nodes().filter(p=>!n.children(p).length),s=i.map(p=>n.node(p).rank),o=t.applyWithChunking(Math.max,s),l=t.range(o+1).map(()=>[]);function u(p){if(r[p])return;r[p]=!0;let h=n.node(p);l[h.rank].push(p),n.successors(p).forEach(u)}return i.sort((p,h)=>n.node(p).rank-n.node(h).rank).forEach(u),l}return lS}var cS,VO;function GZ(){if(VO)return cS;VO=1;let t=ei().zipObject;cS=e;function e(r,i){let s=0;for(let o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){let o=t(s,s.map((b,x)=>x)),l=i.flatMap(b=>r.outEdges(b).map(x=>({pos:o[x.w],weight:r.edge(x).weight})).sort((x,_)=>x.pos-_.pos)),u=1;for(;u<s.length;)u<<=1;let f=2*u-1;u-=1;let p=new Array(f).fill(0),h=0;return l.forEach(b=>{let x=b.pos+u;p[x]+=b.weight;let _=0;for(;x>0;)x%2&&(_+=p[x+1]),x=x-1>>1,p[x]+=b.weight;h+=b.weight*_}),h}return cS}var uS,UO;function JZ(){if(UO)return uS;UO=1,uS=t;function t(e,n=[]){return n.map(r=>{let i=e.inEdges(r);if(i.length){let s=i.reduce((o,l)=>{let u=e.edge(l),f=e.node(l.v);return{sum:o.sum+u.weight*f.order,weight:o.weight+u.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return uS}var dS,HO;function ZZ(){if(HO)return dS;HO=1;let t=ei();dS=e;function e(i,s){let o={};i.forEach((u,f)=>{let p=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:f};u.barycenter!==void 0&&(p.barycenter=u.barycenter,p.weight=u.weight)}),s.edges().forEach(u=>{let f=o[u.v],p=o[u.w];f!==void 0&&p!==void 0&&(p.indegree++,f.out.push(o[u.w]))});let l=Object.values(o).filter(u=>!u.indegree);return n(l)}function n(i){let s=[];function o(u){return f=>{f.merged||(f.barycenter===void 0||u.barycenter===void 0||f.barycenter>=u.barycenter)&&r(u,f)}}function l(u){return f=>{f.in.push(u),--f.indegree===0&&i.push(f)}}for(;i.length;){let u=i.pop();s.push(u),u.in.reverse().forEach(o(u)),u.out.forEach(l(u))}return s.filter(u=>!u.merged).map(u=>t.pick(u,["vs","i","barycenter","weight"]))}function r(i,s){let o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return dS}var fS,KO;function YZ(){if(KO)return fS;KO=1;let t=ei();fS=e;function e(i,s){let o=t.partition(i,_=>Object.hasOwn(_,"barycenter")),l=o.lhs,u=o.rhs.sort((_,E)=>E.i-_.i),f=[],p=0,h=0,b=0;l.sort(r(!!s)),b=n(f,u,b),l.forEach(_=>{b+=_.vs.length,f.push(_.vs),p+=_.barycenter*_.weight,h+=_.weight,b=n(f,u,b)});let x={vs:f.flat(!0)};return h&&(x.barycenter=p/h,x.weight=h),x}function n(i,s,o){let l;for(;s.length&&(l=s[s.length-1]).i<=o;)s.pop(),i.push(l.vs),o++;return o}function r(i){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}return fS}var pS,QO;function XZ(){if(QO)return pS;QO=1;let t=JZ(),e=ZZ(),n=YZ();pS=r;function r(o,l,u,f){let p=o.children(l),h=o.node(l),b=h?h.borderLeft:void 0,x=h?h.borderRight:void 0,_={};b&&(p=p.filter(C=>C!==b&&C!==x));let E=t(o,p);E.forEach(C=>{if(o.children(C.v).length){let j=r(o,C.v,u,f);_[C.v]=j,Object.hasOwn(j,"barycenter")&&s(C,j)}});let I=e(E,u);i(I,_);let T=n(I,f);if(b&&(T.vs=[b,T.vs,x].flat(!0),o.predecessors(b).length)){let C=o.node(o.predecessors(b)[0]),j=o.node(o.predecessors(x)[0]);Object.hasOwn(T,"barycenter")||(T.barycenter=0,T.weight=0),T.barycenter=(T.barycenter*T.weight+C.order+j.order)/(T.weight+2),T.weight+=2}return T}function i(o,l){o.forEach(u=>{u.vs=u.vs.flatMap(f=>l[f]?l[f].vs:f)})}function s(o,l){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+l.barycenter*l.weight)/(o.weight+l.weight),o.weight+=l.weight):(o.barycenter=l.barycenter,o.weight=l.weight)}return pS}var hS,GO;function eY(){if(GO)return hS;GO=1;let t=Do().Graph,e=ei();hS=n;function n(i,s,o){let l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(f=>i.node(f));return i.nodes().forEach(f=>{let p=i.node(f),h=i.parent(f);(p.rank===s||p.minRank<=s&&s<=p.maxRank)&&(u.setNode(f),u.setParent(f,h||l),i[o](f).forEach(b=>{let x=b.v===f?b.w:b.v,_=u.edge(x,f),E=_!==void 0?_.weight:0;u.setEdge(x,f,{weight:i.edge(b).weight+E})}),Object.hasOwn(p,"minRank")&&u.setNode(f,{borderLeft:p.borderLeft[s],borderRight:p.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return hS}var mS,JO;function tY(){if(JO)return mS;JO=1,mS=t;function t(e,n,r){let i={},s;r.forEach(o=>{let l=e.parent(o),u,f;for(;l;){if(u=e.parent(l),u?(f=i[u],i[u]=l):(f=s,s=l),f&&f!==l){n.setEdge(f,l);return}l=u}})}return mS}var gS,ZO;function nY(){if(ZO)return gS;ZO=1;let t=QZ(),e=GZ(),n=XZ(),r=eY(),i=tY(),s=Do().Graph,o=ei();gS=l;function l(h,b){if(b&&typeof b.customOrder=="function"){b.customOrder(h,l);return}let x=o.maxRank(h),_=u(h,o.range(1,x+1),"inEdges"),E=u(h,o.range(x-1,-1,-1),"outEdges"),I=t(h);if(p(h,I),b&&b.disableOptimalOrderHeuristic)return;let T=Number.POSITIVE_INFINITY,C;for(let j=0,q=0;q<4;++j,++q){f(j%2?_:E,j%4>=2),I=o.buildLayerMatrix(h);let L=e(h,I);L<T&&(q=0,C=Object.assign({},I),T=L)}p(h,C)}function u(h,b,x){return b.map(function(_){return r(h,_,x)})}function f(h,b){let x=new s;h.forEach(function(_){let E=_.graph().root,I=n(_,E,x,b);I.vs.forEach((T,C)=>_.node(T).order=C),i(_,x,I.vs)})}function p(h,b){Object.values(b).forEach(x=>x.forEach((_,E)=>h.node(_).order=E))}return gS}var yS,YO;function rY(){if(YO)return yS;YO=1;let t=Do().Graph,e=ei();yS={positionX:x,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:o,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:h,findSmallestWidthAlignment:p,balance:b};function n(I,T){let C={};function j(q,L){let M=0,W=0,P=q.length,O=L[L.length-1];return L.forEach((z,F)=>{let V=i(I,z),U=V?I.node(V).order:P;(V||z===O)&&(L.slice(W,F+1).forEach(B=>{I.predecessors(B).forEach(G=>{let Z=I.node(G),le=Z.order;(le<M||U<le)&&!(Z.dummy&&I.node(B).dummy)&&s(C,G,B)})}),W=F+1,M=U)}),L}return T.length&&T.reduce(j),C}function r(I,T){let C={};function j(L,M,W,P,O){let z;e.range(M,W).forEach(F=>{z=L[F],I.node(z).dummy&&I.predecessors(z).forEach(V=>{let U=I.node(V);U.dummy&&(U.order<P||U.order>O)&&s(C,V,z)})})}function q(L,M){let W=-1,P,O=0;return M.forEach((z,F)=>{if(I.node(z).dummy==="border"){let V=I.predecessors(z);V.length&&(P=I.node(V[0]).order,j(M,O,F,W,P),O=F,W=P)}j(M,O,M.length,P,L.length)}),M}return T.length&&T.reduce(q),C}function i(I,T){if(I.node(T).dummy)return I.predecessors(T).find(C=>I.node(C).dummy)}function s(I,T,C){if(T>C){let q=T;T=C,C=q}let j=I[T];j||(I[T]=j={}),j[C]=!0}function o(I,T,C){if(T>C){let j=T;T=C,C=j}return!!I[T]&&Object.hasOwn(I[T],C)}function l(I,T,C,j){let q={},L={},M={};return T.forEach(W=>{W.forEach((P,O)=>{q[P]=P,L[P]=P,M[P]=O})}),T.forEach(W=>{let P=-1;W.forEach(O=>{let z=j(O);if(z.length){z=z.sort((V,U)=>M[V]-M[U]);let F=(z.length-1)/2;for(let V=Math.floor(F),U=Math.ceil(F);V<=U;++V){let B=z[V];L[O]===O&&P<M[B]&&!o(C,O,B)&&(L[B]=O,L[O]=q[O]=q[B],P=M[B])}}})}),{root:q,align:L}}function u(I,T,C,j,q){let L={},M=f(I,T,C,q),W=q?"borderLeft":"borderRight";function P(F,V){let U=M.nodes(),B=U.pop(),G={};for(;B;)G[B]?F(B):(G[B]=!0,U.push(B),U=U.concat(V(B))),B=U.pop()}function O(F){L[F]=M.inEdges(F).reduce((V,U)=>Math.max(V,L[U.v]+M.edge(U)),0)}function z(F){let V=M.outEdges(F).reduce((B,G)=>Math.min(B,L[G.w]-M.edge(G)),Number.POSITIVE_INFINITY),U=I.node(F);V!==Number.POSITIVE_INFINITY&&U.borderType!==W&&(L[F]=Math.max(L[F],V))}return P(O,M.predecessors.bind(M)),P(z,M.successors.bind(M)),Object.keys(j).forEach(F=>L[F]=L[C[F]]),L}function f(I,T,C,j){let q=new t,L=I.graph(),M=_(L.nodesep,L.edgesep,j);return T.forEach(W=>{let P;W.forEach(O=>{let z=C[O];if(q.setNode(z),P){var F=C[P],V=q.edge(F,z);q.setEdge(F,z,Math.max(M(I,O,P),V||0))}P=O})}),q}function p(I,T){return Object.values(T).reduce((C,j)=>{let q=Number.NEGATIVE_INFINITY,L=Number.POSITIVE_INFINITY;Object.entries(j).forEach(([W,P])=>{let O=E(I,W)/2;q=Math.max(P+O,q),L=Math.min(P-O,L)});const M=q-L;return M<C[0]&&(C=[M,j]),C},[Number.POSITIVE_INFINITY,null])[1]}function h(I,T){let C=Object.values(T),j=e.applyWithChunking(Math.min,C),q=e.applyWithChunking(Math.max,C);["u","d"].forEach(L=>{["l","r"].forEach(M=>{let W=L+M,P=I[W];if(P===T)return;let O=Object.values(P),z=j-e.applyWithChunking(Math.min,O);M!=="l"&&(z=q-e.applyWithChunking(Math.max,O)),z&&(I[W]=e.mapValues(P,F=>F+z))})})}function b(I,T){return e.mapValues(I.ul,(C,j)=>{if(T)return I[T.toLowerCase()][j];{let q=Object.values(I).map(L=>L[j]).sort((L,M)=>L-M);return(q[1]+q[2])/2}})}function x(I){let T=e.buildLayerMatrix(I),C=Object.assign(n(I,T),r(I,T)),j={},q;["u","d"].forEach(M=>{q=M==="u"?T:Object.values(T).reverse(),["l","r"].forEach(W=>{W==="r"&&(q=q.map(F=>Object.values(F).reverse()));let P=(M==="u"?I.predecessors:I.successors).bind(I),O=l(I,q,C,P),z=u(I,q,O.root,O.align,W==="r");W==="r"&&(z=e.mapValues(z,F=>-F)),j[M+W]=z})});let L=p(I,j);return h(j,L),b(j,I.graph().align)}function _(I,T,C){return(j,q,L)=>{let M=j.node(q),W=j.node(L),P=0,O;if(P+=M.width/2,Object.hasOwn(M,"labelpos"))switch(M.labelpos.toLowerCase()){case"l":O=-M.width/2;break;case"r":O=M.width/2;break}if(O&&(P+=C?O:-O),O=0,P+=(M.dummy?T:I)/2,P+=(W.dummy?T:I)/2,P+=W.width/2,Object.hasOwn(W,"labelpos"))switch(W.labelpos.toLowerCase()){case"l":O=W.width/2;break;case"r":O=-W.width/2;break}return O&&(P+=C?O:-O),O=0,P}}function E(I,T){return I.node(T).width}return yS}var bS,XO;function iY(){if(XO)return bS;XO=1;let t=ei(),e=rY().positionX;bS=n;function n(i){i=t.asNonCompoundGraph(i),r(i),Object.entries(e(i)).forEach(([s,o])=>i.node(s).x=o)}function r(i){let s=t.buildLayerMatrix(i),o=i.graph().ranksep,l=0;s.forEach(u=>{const f=u.reduce((p,h)=>{const b=i.node(h).height;return p>b?p:b},0);u.forEach(p=>i.node(p).y=l+f/2),l+=f+o})}return bS}var vS,eq;function sY(){if(eq)return vS;eq=1;let t=$Z(),e=BZ(),n=WZ(),r=ei().normalizeRanks,i=VZ(),s=ei().removeEmptyRanks,o=UZ(),l=HZ(),u=KZ(),f=nY(),p=iY(),h=ei(),b=Do().Graph;vS=x;function x(de,ye){let we=ye&&ye.debugTiming?h.time:h.notime;we("layout",()=>{let Ne=we("  buildLayoutGraph",()=>P(de));we("  runLayout",()=>_(Ne,we,ye)),we("  updateInputGraph",()=>E(de,Ne))})}function _(de,ye,we){ye("    makeSpaceForEdgeLabels",()=>O(de)),ye("    removeSelfEdges",()=>ie(de)),ye("    acyclic",()=>t.run(de)),ye("    nestingGraph.run",()=>o.run(de)),ye("    rank",()=>n(h.asNonCompoundGraph(de))),ye("    injectEdgeLabelProxies",()=>z(de)),ye("    removeEmptyRanks",()=>s(de)),ye("    nestingGraph.cleanup",()=>o.cleanup(de)),ye("    normalizeRanks",()=>r(de)),ye("    assignRankMinMax",()=>F(de)),ye("    removeEdgeLabelProxies",()=>V(de)),ye("    normalize.run",()=>e.run(de)),ye("    parentDummyChains",()=>i(de)),ye("    addBorderSegments",()=>l(de)),ye("    order",()=>f(de,we)),ye("    insertSelfEdges",()=>ne(de)),ye("    adjustCoordinateSystem",()=>u.adjust(de)),ye("    position",()=>p(de)),ye("    positionSelfEdges",()=>oe(de)),ye("    removeBorderNodes",()=>le(de)),ye("    normalize.undo",()=>e.undo(de)),ye("    fixupEdgeLabelCoords",()=>G(de)),ye("    undoCoordinateSystem",()=>u.undo(de)),ye("    translateGraph",()=>U(de)),ye("    assignNodeIntersects",()=>B(de)),ye("    reversePoints",()=>Z(de)),ye("    acyclic.undo",()=>t.undo(de))}function E(de,ye){de.nodes().forEach(we=>{let Ne=de.node(we),ze=ye.node(we);Ne&&(Ne.x=ze.x,Ne.y=ze.y,Ne.rank=ze.rank,ye.children(we).length&&(Ne.width=ze.width,Ne.height=ze.height))}),de.edges().forEach(we=>{let Ne=de.edge(we),ze=ye.edge(we);Ne.points=ze.points,Object.hasOwn(ze,"x")&&(Ne.x=ze.x,Ne.y=ze.y)}),de.graph().width=ye.graph().width,de.graph().height=ye.graph().height}let I=["nodesep","edgesep","ranksep","marginx","marginy"],T={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},C=["acyclicer","ranker","rankdir","align"],j=["width","height"],q={width:0,height:0},L=["minlen","weight","width","height","labeloffset"],M={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},W=["labelpos"];function P(de){let ye=new b({multigraph:!0,compound:!0}),we=ue(de.graph());return ye.setGraph(Object.assign({},T,te(we,I),h.pick(we,C))),de.nodes().forEach(Ne=>{let ze=ue(de.node(Ne));const je=te(ze,j);Object.keys(q).forEach(De=>{je[De]===void 0&&(je[De]=q[De])}),ye.setNode(Ne,je),ye.setParent(Ne,de.parent(Ne))}),de.edges().forEach(Ne=>{let ze=ue(de.edge(Ne));ye.setEdge(Ne,Object.assign({},M,te(ze,L),h.pick(ze,W)))}),ye}function O(de){let ye=de.graph();ye.ranksep/=2,de.edges().forEach(we=>{let Ne=de.edge(we);Ne.minlen*=2,Ne.labelpos.toLowerCase()!=="c"&&(ye.rankdir==="TB"||ye.rankdir==="BT"?Ne.width+=Ne.labeloffset:Ne.height+=Ne.labeloffset)})}function z(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(we.width&&we.height){let Ne=de.node(ye.v),je={rank:(de.node(ye.w).rank-Ne.rank)/2+Ne.rank,e:ye};h.addDummyNode(de,"edge-proxy",je,"_ep")}})}function F(de){let ye=0;de.nodes().forEach(we=>{let Ne=de.node(we);Ne.borderTop&&(Ne.minRank=de.node(Ne.borderTop).rank,Ne.maxRank=de.node(Ne.borderBottom).rank,ye=Math.max(ye,Ne.maxRank))}),de.graph().maxRank=ye}function V(de){de.nodes().forEach(ye=>{let we=de.node(ye);we.dummy==="edge-proxy"&&(de.edge(we.e).labelRank=we.rank,de.removeNode(ye))})}function U(de){let ye=Number.POSITIVE_INFINITY,we=0,Ne=Number.POSITIVE_INFINITY,ze=0,je=de.graph(),De=je.marginx||0,Je=je.marginy||0;function Xe(Ve){let ct=Ve.x,_t=Ve.y,Tt=Ve.width,Ut=Ve.height;ye=Math.min(ye,ct-Tt/2),we=Math.max(we,ct+Tt/2),Ne=Math.min(Ne,_t-Ut/2),ze=Math.max(ze,_t+Ut/2)}de.nodes().forEach(Ve=>Xe(de.node(Ve))),de.edges().forEach(Ve=>{let ct=de.edge(Ve);Object.hasOwn(ct,"x")&&Xe(ct)}),ye-=De,Ne-=Je,de.nodes().forEach(Ve=>{let ct=de.node(Ve);ct.x-=ye,ct.y-=Ne}),de.edges().forEach(Ve=>{let ct=de.edge(Ve);ct.points.forEach(_t=>{_t.x-=ye,_t.y-=Ne}),Object.hasOwn(ct,"x")&&(ct.x-=ye),Object.hasOwn(ct,"y")&&(ct.y-=Ne)}),je.width=we-ye+De,je.height=ze-Ne+Je}function B(de){de.edges().forEach(ye=>{let we=de.edge(ye),Ne=de.node(ye.v),ze=de.node(ye.w),je,De;we.points?(je=we.points[0],De=we.points[we.points.length-1]):(we.points=[],je=ze,De=Ne),we.points.unshift(h.intersectRect(Ne,je)),we.points.push(h.intersectRect(ze,De))})}function G(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(Object.hasOwn(we,"x"))switch((we.labelpos==="l"||we.labelpos==="r")&&(we.width-=we.labeloffset),we.labelpos){case"l":we.x-=we.width/2+we.labeloffset;break;case"r":we.x+=we.width/2+we.labeloffset;break}})}function Z(de){de.edges().forEach(ye=>{let we=de.edge(ye);we.reversed&&we.points.reverse()})}function le(de){de.nodes().forEach(ye=>{if(de.children(ye).length){let we=de.node(ye),Ne=de.node(we.borderTop),ze=de.node(we.borderBottom),je=de.node(we.borderLeft[we.borderLeft.length-1]),De=de.node(we.borderRight[we.borderRight.length-1]);we.width=Math.abs(De.x-je.x),we.height=Math.abs(ze.y-Ne.y),we.x=je.x+we.width/2,we.y=Ne.y+we.height/2}}),de.nodes().forEach(ye=>{de.node(ye).dummy==="border"&&de.removeNode(ye)})}function ie(de){de.edges().forEach(ye=>{if(ye.v===ye.w){var we=de.node(ye.v);we.selfEdges||(we.selfEdges=[]),we.selfEdges.push({e:ye,label:de.edge(ye)}),de.removeEdge(ye)}})}function ne(de){var ye=h.buildLayerMatrix(de);ye.forEach(we=>{var Ne=0;we.forEach((ze,je)=>{var De=de.node(ze);De.order=je+Ne,(De.selfEdges||[]).forEach(Je=>{h.addDummyNode(de,"selfedge",{width:Je.label.width,height:Je.label.height,rank:De.rank,order:je+ ++Ne,e:Je.e,label:Je.label},"_se")}),delete De.selfEdges})})}function oe(de){de.nodes().forEach(ye=>{var we=de.node(ye);if(we.dummy==="selfedge"){var Ne=de.node(we.e.v),ze=Ne.x+Ne.width/2,je=Ne.y,De=we.x-ze,Je=Ne.height/2;de.setEdge(we.e,we.label),de.removeNode(ye),we.label.points=[{x:ze+2*De/3,y:je-Je},{x:ze+5*De/6,y:je-Je},{x:ze+De,y:je},{x:ze+5*De/6,y:je+Je},{x:ze+2*De/3,y:je+Je}],we.label.x=we.x,we.label.y=we.y}})}function te(de,ye){return h.mapValues(h.pick(de,ye),Number)}function ue(de){var ye={};return de&&Object.entries(de).forEach(([we,Ne])=>{typeof we=="string"&&(we=we.toLowerCase()),ye[we]=Ne}),ye}return vS}var xS,tq;function oY(){if(tq)return xS;tq=1;let t=ei(),e=Do().Graph;xS={debugOrdering:n};function n(r){let i=t.buildLayerMatrix(r),s=new e({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+r.node(o).rank)}),r.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),i.forEach((o,l)=>{let u="layer"+l;s.setNode(u,{rank:"same"}),o.reduce((f,p)=>(s.setEdge(f,p,{style:"invis"}),p))}),s}return xS}var wS,nq;function aY(){return nq||(nq=1,wS="1.1.4"),wS}var _S,rq;function lY(){return rq||(rq=1,_S={graphlib:Do(),layout:sY(),debug:oY(),util:{time:ei().time,notime:ei().notime},version:aY()}),_S}var cY=lY();const _2=uo(cY);function Kr(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Kr(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var uY={value:()=>{}};function Gv(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Dy(n)}function Dy(t){this._=t}function dY(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Dy.prototype=Gv.prototype={constructor:Dy,on:function(t,e){var n=this._,r=dY(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=fY(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=iq(n[i],t.name,e);else if(e==null)for(i in n)n[i]=iq(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Dy(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function fY(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function iq(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=uY,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var BE="http://www.w3.org/1999/xhtml";const sq={svg:"http://www.w3.org/2000/svg",xhtml:BE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jv(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),sq.hasOwnProperty(e)?{space:sq[e],local:t}:t}function pY(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===BE&&e.documentElement.namespaceURI===BE?e.createElement(t):e.createElementNS(n,t)}}function hY(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function S2(t){var e=Jv(t);return(e.local?hY:pY)(e)}function mY(){}function I1(t){return t==null?mY:function(){return this.querySelector(t)}}function gY(t){typeof t!="function"&&(t=I1(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),u,f,p=0;p<o;++p)(u=s[p])&&(f=t.call(u,u.__data__,p,s))&&("__data__"in u&&(f.__data__=u.__data__),l[p]=f);return new Fs(r,this._parents)}function yY(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function bY(){return[]}function E2(t){return t==null?bY:function(){return this.querySelectorAll(t)}}function vY(t){return function(){return yY(t.apply(this,arguments))}}function xY(t){typeof t=="function"?t=vY(t):t=E2(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],l=o.length,u,f=0;f<l;++f)(u=o[f])&&(r.push(t.call(u,u.__data__,f,o)),i.push(u));return new Fs(r,i)}function N2(t){return function(){return this.matches(t)}}function I2(t){return function(e){return e.matches(t)}}var wY=Array.prototype.find;function _Y(t){return function(){return wY.call(this.children,t)}}function SY(){return this.firstElementChild}function EY(t){return this.select(t==null?SY:_Y(typeof t=="function"?t:I2(t)))}var NY=Array.prototype.filter;function IY(){return Array.from(this.children)}function kY(t){return function(){return NY.call(this.children,t)}}function CY(t){return this.selectAll(t==null?IY:kY(typeof t=="function"?t:I2(t)))}function TY(t){typeof t!="function"&&(t=N2(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,f=0;f<o;++f)(u=s[f])&&t.call(u,u.__data__,f,s)&&l.push(u);return new Fs(r,this._parents)}function k2(t){return new Array(t.length)}function RY(){return new Fs(this._enter||this._groups.map(k2),this._parents)}function Yb(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Yb.prototype={constructor:Yb,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function jY(t){return function(){return t}}function OY(t,e,n,r,i,s){for(var o=0,l,u=e.length,f=s.length;o<f;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):n[o]=new Yb(t,s[o]);for(;o<u;++o)(l=e[o])&&(i[o]=l)}function qY(t,e,n,r,i,s,o){var l,u,f=new Map,p=e.length,h=s.length,b=new Array(p),x;for(l=0;l<p;++l)(u=e[l])&&(b[l]=x=o.call(u,u.__data__,l,e)+"",f.has(x)?i[l]=u:f.set(x,u));for(l=0;l<h;++l)x=o.call(t,s[l],l,s)+"",(u=f.get(x))?(r[l]=u,u.__data__=s[l],f.delete(x)):n[l]=new Yb(t,s[l]);for(l=0;l<p;++l)(u=e[l])&&f.get(b[l])===u&&(i[l]=u)}function AY(t){return t.__data__}function PY(t,e){if(!arguments.length)return Array.from(this,AY);var n=e?qY:OY,r=this._parents,i=this._groups;typeof t!="function"&&(t=jY(t));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),f=0;f<s;++f){var p=r[f],h=i[f],b=h.length,x=FY(t.call(p,p&&p.__data__,f,r)),_=x.length,E=l[f]=new Array(_),I=o[f]=new Array(_),T=u[f]=new Array(b);n(p,h,E,I,T,x,e);for(var C=0,j=0,q,L;C<_;++C)if(q=E[C]){for(C>=j&&(j=C+1);!(L=I[j])&&++j<_;);q._next=L||null}}return o=new Fs(o,r),o._enter=l,o._exit=u,o}function FY(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function DY(){return new Fs(this._exit||this._groups.map(k2),this._parents)}function LY(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function MY(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var f=n[u],p=r[u],h=f.length,b=l[u]=new Array(h),x,_=0;_<h;++_)(x=f[_]||p[_])&&(b[_]=x);for(;u<i;++u)l[u]=n[u];return new Fs(l,this._parents)}function $Y(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function BY(t){t||(t=zY);function e(h,b){return h&&b?t(h.__data__,b.__data__):!h-!b}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),f,p=0;p<l;++p)(f=o[p])&&(u[p]=f);u.sort(e)}return new Fs(i,this._parents).order()}function zY(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function WY(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function VY(){return Array.from(this)}function UY(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function HY(){let t=0;for(const e of this)++t;return t}function KY(){return!this.node()}function QY(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function GY(t){return function(){this.removeAttribute(t)}}function JY(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ZY(t,e){return function(){this.setAttribute(t,e)}}function YY(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function XY(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function eX(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function tX(t,e){var n=Jv(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?JY:GY:typeof e=="function"?n.local?eX:XY:n.local?YY:ZY)(n,e))}function C2(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function nX(t){return function(){this.style.removeProperty(t)}}function rX(t,e,n){return function(){this.style.setProperty(t,e,n)}}function iX(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function sX(t,e,n){return arguments.length>1?this.each((e==null?nX:typeof e=="function"?iX:rX)(t,e,n??"")):Jd(this.node(),t)}function Jd(t,e){return t.style.getPropertyValue(e)||C2(t).getComputedStyle(t,null).getPropertyValue(e)}function oX(t){return function(){delete this[t]}}function aX(t,e){return function(){this[t]=e}}function lX(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function cX(t,e){return arguments.length>1?this.each((e==null?oX:typeof e=="function"?lX:aX)(t,e)):this.node()[t]}function T2(t){return t.trim().split(/^|\s+/)}function k1(t){return t.classList||new R2(t)}function R2(t){this._node=t,this._names=T2(t.getAttribute("class")||"")}R2.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function j2(t,e){for(var n=k1(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function O2(t,e){for(var n=k1(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function uX(t){return function(){j2(this,t)}}function dX(t){return function(){O2(this,t)}}function fX(t,e){return function(){(e.apply(this,arguments)?j2:O2)(this,t)}}function pX(t,e){var n=T2(t+"");if(arguments.length<2){for(var r=k1(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?fX:e?uX:dX)(n,e))}function hX(){this.textContent=""}function mX(t){return function(){this.textContent=t}}function gX(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function yX(t){return arguments.length?this.each(t==null?hX:(typeof t=="function"?gX:mX)(t)):this.node().textContent}function bX(){this.innerHTML=""}function vX(t){return function(){this.innerHTML=t}}function xX(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function wX(t){return arguments.length?this.each(t==null?bX:(typeof t=="function"?xX:vX)(t)):this.node().innerHTML}function _X(){this.nextSibling&&this.parentNode.appendChild(this)}function SX(){return this.each(_X)}function EX(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function NX(){return this.each(EX)}function IX(t){var e=typeof t=="function"?t:S2(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function kX(){return null}function CX(t,e){var n=typeof t=="function"?t:S2(t),r=e==null?kX:typeof e=="function"?e:I1(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function TX(){var t=this.parentNode;t&&t.removeChild(this)}function RX(){return this.each(TX)}function jX(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function OX(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function qX(t){return this.select(t?OX:jX)}function AX(t){return arguments.length?this.property("__data__",t):this.node().__data__}function PX(t){return function(e){t.call(this,e,this.__data__)}}function FX(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function DX(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function LX(t,e,n){return function(){var r=this.__on,i,s=PX(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function MX(t,e,n){var r=FX(t+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,f=l.length,p;u<f;++u)for(i=0,p=l[u];i<s;++i)if((o=r[i]).type===p.type&&o.name===p.name)return p.value}return}for(l=e?LX:DX,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function q2(t,e,n){var r=C2(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function $X(t,e){return function(){return q2(this,t,e)}}function BX(t,e){return function(){return q2(this,t,e.apply(this,arguments))}}function zX(t,e){return this.each((typeof e=="function"?BX:$X)(t,e))}function*WX(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var A2=[null];function Fs(t,e){this._groups=t,this._parents=e}function Sm(){return new Fs([[document.documentElement]],A2)}function VX(){return this}Fs.prototype=Sm.prototype={constructor:Fs,select:gY,selectAll:xY,selectChild:EY,selectChildren:CY,filter:TY,data:PY,enter:RY,exit:DY,join:LY,merge:MY,selection:VX,order:$Y,sort:BY,call:WY,nodes:VY,node:UY,size:HY,empty:KY,each:QY,attr:tX,style:sX,property:cX,classed:pX,text:yX,html:wX,raise:SX,lower:NX,append:IX,insert:CX,remove:RX,clone:qX,datum:AX,on:MX,dispatch:zX,[Symbol.iterator]:WX};function Rs(t){return typeof t=="string"?new Fs([[document.querySelector(t)]],[document.documentElement]):new Fs([[t]],A2)}function UX(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Eo(t,e){if(t=UX(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const HX={passive:!1},Lh={capture:!0,passive:!1};function SS(t){t.stopImmediatePropagation()}function Fd(t){t.preventDefault(),t.stopImmediatePropagation()}function P2(t){var e=t.document.documentElement,n=Rs(t).on("dragstart.drag",Fd,Lh);"onselectstart"in e?n.on("selectstart.drag",Fd,Lh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function F2(t,e){var n=t.document.documentElement,r=Rs(t).on("dragstart.drag",null);e&&(r.on("click.drag",Fd,Lh),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ny=t=>()=>t;function zE(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:f,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:p}})}zE.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function KX(t){return!t.ctrlKey&&!t.button}function QX(){return this.parentNode}function GX(t,e){return e??{x:t.x,y:t.y}}function JX(){return navigator.maxTouchPoints||"ontouchstart"in this}function D2(){var t=KX,e=QX,n=GX,r=JX,i={},s=Gv("start","drag","end"),o=0,l,u,f,p,h=0;function b(q){q.on("mousedown.drag",x).filter(r).on("touchstart.drag",I).on("touchmove.drag",T,HX).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(q,L){if(!(p||!t.call(this,q,L))){var M=j(this,e.call(this,q,L),q,L,"mouse");M&&(Rs(q.view).on("mousemove.drag",_,Lh).on("mouseup.drag",E,Lh),P2(q.view),SS(q),f=!1,l=q.clientX,u=q.clientY,M("start",q))}}function _(q){if(Fd(q),!f){var L=q.clientX-l,M=q.clientY-u;f=L*L+M*M>h}i.mouse("drag",q)}function E(q){Rs(q.view).on("mousemove.drag mouseup.drag",null),F2(q.view,f),Fd(q),i.mouse("end",q)}function I(q,L){if(t.call(this,q,L)){var M=q.changedTouches,W=e.call(this,q,L),P=M.length,O,z;for(O=0;O<P;++O)(z=j(this,W,q,L,M[O].identifier,M[O]))&&(SS(q),z("start",q,M[O]))}}function T(q){var L=q.changedTouches,M=L.length,W,P;for(W=0;W<M;++W)(P=i[L[W].identifier])&&(Fd(q),P("drag",q,L[W]))}function C(q){var L=q.changedTouches,M=L.length,W,P;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),W=0;W<M;++W)(P=i[L[W].identifier])&&(SS(q),P("end",q,L[W]))}function j(q,L,M,W,P,O){var z=s.copy(),F=Eo(O||M,L),V,U,B;if((B=n.call(q,new zE("beforestart",{sourceEvent:M,target:b,identifier:P,active:o,x:F[0],y:F[1],dx:0,dy:0,dispatch:z}),W))!=null)return V=B.x-F[0]||0,U=B.y-F[1]||0,function G(Z,le,ie){var ne=F,oe;switch(Z){case"start":i[P]=G,oe=o++;break;case"end":delete i[P],--o;case"drag":F=Eo(ie||le,L),oe=o;break}z.call(Z,q,new zE(Z,{sourceEvent:le,subject:B,target:b,identifier:P,active:oe,x:F[0]+V,y:F[1]+U,dx:F[0]-ne[0],dy:F[1]-ne[1],dispatch:z}),W)}}return b.filter=function(q){return arguments.length?(t=typeof q=="function"?q:ny(!!q),b):t},b.container=function(q){return arguments.length?(e=typeof q=="function"?q:ny(q),b):e},b.subject=function(q){return arguments.length?(n=typeof q=="function"?q:ny(q),b):n},b.touchable=function(q){return arguments.length?(r=typeof q=="function"?q:ny(!!q),b):r},b.on=function(){var q=s.on.apply(s,arguments);return q===s?b:q},b.clickDistance=function(q){return arguments.length?(h=(q=+q)*q,b):Math.sqrt(h)},b}function C1(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function L2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Em(){}var Mh=.7,Xb=1/Mh,Dd="\\s*([+-]?\\d+)\\s*",$h="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ZX=/^#([0-9a-f]{3,8})$/,YX=new RegExp(`^rgb\\(${Dd},${Dd},${Dd}\\)$`),XX=new RegExp(`^rgb\\(${ra},${ra},${ra}\\)$`),eee=new RegExp(`^rgba\\(${Dd},${Dd},${Dd},${$h}\\)$`),tee=new RegExp(`^rgba\\(${ra},${ra},${ra},${$h}\\)$`),nee=new RegExp(`^hsl\\(${$h},${ra},${ra}\\)$`),ree=new RegExp(`^hsla\\(${$h},${ra},${ra},${$h}\\)$`),oq={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};C1(Em,Bh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:aq,formatHex:aq,formatHex8:iee,formatHsl:see,formatRgb:lq,toString:lq});function aq(){return this.rgb().formatHex()}function iee(){return this.rgb().formatHex8()}function see(){return M2(this).formatHsl()}function lq(){return this.rgb().formatRgb()}function Bh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ZX.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?cq(e):n===3?new fs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ry(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ry(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=YX.exec(t))?new fs(e[1],e[2],e[3],1):(e=XX.exec(t))?new fs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=eee.exec(t))?ry(e[1],e[2],e[3],e[4]):(e=tee.exec(t))?ry(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=nee.exec(t))?fq(e[1],e[2]/100,e[3]/100,1):(e=ree.exec(t))?fq(e[1],e[2]/100,e[3]/100,e[4]):oq.hasOwnProperty(t)?cq(oq[t]):t==="transparent"?new fs(NaN,NaN,NaN,0):null}function cq(t){return new fs(t>>16&255,t>>8&255,t&255,1)}function ry(t,e,n,r){return r<=0&&(t=e=n=NaN),new fs(t,e,n,r)}function oee(t){return t instanceof Em||(t=Bh(t)),t?(t=t.rgb(),new fs(t.r,t.g,t.b,t.opacity)):new fs}function WE(t,e,n,r){return arguments.length===1?oee(t):new fs(t,e,n,r??1)}function fs(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}C1(fs,WE,L2(Em,{brighter(t){return t=t==null?Xb:Math.pow(Xb,t),new fs(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Mh:Math.pow(Mh,t),new fs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new fs(Jc(this.r),Jc(this.g),Jc(this.b),ev(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uq,formatHex:uq,formatHex8:aee,formatRgb:dq,toString:dq}));function uq(){return`#${Hc(this.r)}${Hc(this.g)}${Hc(this.b)}`}function aee(){return`#${Hc(this.r)}${Hc(this.g)}${Hc(this.b)}${Hc((isNaN(this.opacity)?1:this.opacity)*255)}`}function dq(){const t=ev(this.opacity);return`${t===1?"rgb(":"rgba("}${Jc(this.r)}, ${Jc(this.g)}, ${Jc(this.b)}${t===1?")":`, ${t})`}`}function ev(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Hc(t){return t=Jc(t),(t<16?"0":"")+t.toString(16)}function fq(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new To(t,e,n,r)}function M2(t){if(t instanceof To)return new To(t.h,t.s,t.l,t.opacity);if(t instanceof Em||(t=Bh(t)),!t)return new To;if(t instanceof To)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new To(o,l,u,t.opacity)}function lee(t,e,n,r){return arguments.length===1?M2(t):new To(t,e,n,r??1)}function To(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}C1(To,lee,L2(Em,{brighter(t){return t=t==null?Xb:Math.pow(Xb,t),new To(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Mh:Math.pow(Mh,t),new To(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new fs(ES(t>=240?t-240:t+120,i,r),ES(t,i,r),ES(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new To(pq(this.h),iy(this.s),iy(this.l),ev(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ev(this.opacity);return`${t===1?"hsl(":"hsla("}${pq(this.h)}, ${iy(this.s)*100}%, ${iy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function pq(t){return t=(t||0)%360,t<0?t+360:t}function iy(t){return Math.max(0,Math.min(1,t||0))}function ES(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const $2=t=>()=>t;function cee(t,e){return function(n){return t+n*e}}function uee(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function dee(t){return(t=+t)==1?B2:function(e,n){return n-e?uee(e,n,t):$2(isNaN(e)?n:e)}}function B2(t,e){var n=e-t;return n?cee(t,n):$2(isNaN(t)?e:t)}const hq=function t(e){var n=dee(e);function r(i,s){var o=n((i=WE(i)).r,(s=WE(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),f=B2(i.opacity,s.opacity);return function(p){return i.r=o(p),i.g=l(p),i.b=u(p),i.opacity=f(p),i+""}}return r.gamma=t,r}(1);function Cl(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var VE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,NS=new RegExp(VE.source,"g");function fee(t){return function(){return t}}function pee(t){return function(e){return t(e)+""}}function hee(t,e){var n=VE.lastIndex=NS.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(t=t+"",e=e+"";(r=VE.exec(t))&&(i=NS.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:Cl(r,i)})),n=NS.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?pee(u[0].x):fee(e):(e=u.length,function(f){for(var p=0,h;p<e;++p)l[(h=u[p]).i]=h.x(f);return l.join("")})}var mq=180/Math.PI,UE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function z2(t,e,n,r,i,s){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*mq,skewX:Math.atan(u)*mq,scaleX:o,scaleY:l}}var sy;function mee(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?UE:z2(e.a,e.b,e.c,e.d,e.e,e.f)}function gee(t){return t==null||(sy||(sy=document.createElementNS("http://www.w3.org/2000/svg","g")),sy.setAttribute("transform",t),!(t=sy.transform.baseVal.consolidate()))?UE:(t=t.matrix,z2(t.a,t.b,t.c,t.d,t.e,t.f))}function W2(t,e,n,r){function i(f){return f.length?f.pop()+" ":""}function s(f,p,h,b,x,_){if(f!==h||p!==b){var E=x.push("translate(",null,e,null,n);_.push({i:E-4,x:Cl(f,h)},{i:E-2,x:Cl(p,b)})}else(h||b)&&x.push("translate("+h+e+b+n)}function o(f,p,h,b){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),b.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Cl(f,p)})):p&&h.push(i(h)+"rotate("+p+r)}function l(f,p,h,b){f!==p?b.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Cl(f,p)}):p&&h.push(i(h)+"skewX("+p+r)}function u(f,p,h,b,x,_){if(f!==h||p!==b){var E=x.push(i(x)+"scale(",null,",",null,")");_.push({i:E-4,x:Cl(f,h)},{i:E-2,x:Cl(p,b)})}else(h!==1||b!==1)&&x.push(i(x)+"scale("+h+","+b+")")}return function(f,p){var h=[],b=[];return f=t(f),p=t(p),s(f.translateX,f.translateY,p.translateX,p.translateY,h,b),o(f.rotate,p.rotate,h,b),l(f.skewX,p.skewX,h,b),u(f.scaleX,f.scaleY,p.scaleX,p.scaleY,h,b),f=p=null,function(x){for(var _=-1,E=b.length,I;++_<E;)h[(I=b[_]).i]=I.x(x);return h.join("")}}}var yee=W2(mee,"px, ","px)","deg)"),bee=W2(gee,", ",")",")"),vee=1e-12;function gq(t){return((t=Math.exp(t))+1/t)/2}function xee(t){return((t=Math.exp(t))-1/t)/2}function wee(t){return((t=Math.exp(2*t))-1)/(t+1)}const _ee=function t(e,n,r){function i(s,o){var l=s[0],u=s[1],f=s[2],p=o[0],h=o[1],b=o[2],x=p-l,_=h-u,E=x*x+_*_,I,T;if(E<vee)T=Math.log(b/f)/e,I=function(W){return[l+W*x,u+W*_,f*Math.exp(e*W*T)]};else{var C=Math.sqrt(E),j=(b*b-f*f+r*E)/(2*f*n*C),q=(b*b-f*f-r*E)/(2*b*n*C),L=Math.log(Math.sqrt(j*j+1)-j),M=Math.log(Math.sqrt(q*q+1)-q);T=(M-L)/e,I=function(W){var P=W*T,O=gq(L),z=f/(n*C)*(O*wee(e*P+L)-xee(L));return[l+z*x,u+z*_,f*O/gq(e*P+L)]}}return I.duration=T*1e3*e/Math.SQRT2,I}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return t(o,l,u)},i}(Math.SQRT2,2,4);var Zd=0,Fp=0,wp=0,V2=1e3,tv,Dp,nv=0,lu=0,Zv=0,zh=typeof performance=="object"&&performance.now?performance:Date,U2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function T1(){return lu||(U2(See),lu=zh.now()+Zv)}function See(){lu=0}function rv(){this._call=this._time=this._next=null}rv.prototype=H2.prototype={constructor:rv,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?T1():+n)+(e==null?0:+e),!this._next&&Dp!==this&&(Dp?Dp._next=this:tv=this,Dp=this),this._call=t,this._time=n,HE()},stop:function(){this._call&&(this._call=null,this._time=1/0,HE())}};function H2(t,e,n){var r=new rv;return r.restart(t,e,n),r}function Eee(){T1(),++Zd;for(var t=tv,e;t;)(e=lu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Zd}function yq(){lu=(nv=zh.now())+Zv,Zd=Fp=0;try{Eee()}finally{Zd=0,Iee(),lu=0}}function Nee(){var t=zh.now(),e=t-nv;e>V2&&(Zv-=e,nv=t)}function Iee(){for(var t,e=tv,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:tv=n);Dp=t,HE(r)}function HE(t){if(!Zd){Fp&&(Fp=clearTimeout(Fp));var e=t-lu;e>24?(t<1/0&&(Fp=setTimeout(yq,t-zh.now()-Zv)),wp&&(wp=clearInterval(wp))):(wp||(nv=zh.now(),wp=setInterval(Nee,V2)),Zd=1,U2(yq))}}function bq(t,e,n){var r=new rv;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var kee=Gv("start","end","cancel","interrupt"),Cee=[],K2=0,vq=1,KE=2,Ly=3,xq=4,QE=5,My=6;function Yv(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Tee(t,n,{name:e,index:r,group:i,on:kee,tween:Cee,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:K2})}function R1(t,e){var n=zo(t,e);if(n.state>K2)throw new Error("too late; already scheduled");return n}function fa(t,e){var n=zo(t,e);if(n.state>Ly)throw new Error("too late; already running");return n}function zo(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Tee(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=H2(s,0,n.time);function s(f){n.state=vq,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var p,h,b,x;if(n.state!==vq)return u();for(p in r)if(x=r[p],x.name===n.name){if(x.state===Ly)return bq(o);x.state===xq?(x.state=My,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[p]):+p<e&&(x.state=My,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[p])}if(bq(function(){n.state===Ly&&(n.state=xq,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=KE,n.on.call("start",t,t.__data__,n.index,n.group),n.state===KE){for(n.state=Ly,i=new Array(b=n.tween.length),p=0,h=-1;p<b;++p)(x=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=x);i.length=h+1}}function l(f){for(var p=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(u),n.state=QE,1),h=-1,b=i.length;++h<b;)i[h].call(t,p);n.state===QE&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=My,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function $y(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>KE&&r.state<QE,r.state=My,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function Ree(t){return this.each(function(){$y(this,t)})}function jee(t,e){var n,r;return function(){var i=fa(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Oee(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=fa(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},u=0,f=i.length;u<f;++u)if(i[u].name===e){i[u]=l;break}u===f&&i.push(l)}s.tween=i}}function qee(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=zo(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?jee:Oee)(n,t,e))}function j1(t,e,n){var r=t._id;return t.each(function(){var i=fa(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return zo(i,r).value[e]}}function Q2(t,e){var n;return(typeof e=="number"?Cl:e instanceof Bh?hq:(n=Bh(e))?(e=n,hq):hee)(t,e)}function Aee(t){return function(){this.removeAttribute(t)}}function Pee(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fee(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function Dee(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function Lee(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function Mee(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function $ee(t,e){var n=Jv(t),r=n==="transform"?bee:Q2;return this.attrTween(t,typeof e=="function"?(n.local?Mee:Lee)(n,r,j1(this,"attr."+t,e)):e==null?(n.local?Pee:Aee)(n):(n.local?Dee:Fee)(n,r,e))}function Bee(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function zee(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Wee(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&zee(t,s)),n}return i._value=e,i}function Vee(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Bee(t,s)),n}return i._value=e,i}function Uee(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Jv(t);return this.tween(n,(r.local?Wee:Vee)(r,e))}function Hee(t,e){return function(){R1(this,t).delay=+e.apply(this,arguments)}}function Kee(t,e){return e=+e,function(){R1(this,t).delay=e}}function Qee(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Hee:Kee)(e,t)):zo(this.node(),e).delay}function Gee(t,e){return function(){fa(this,t).duration=+e.apply(this,arguments)}}function Jee(t,e){return e=+e,function(){fa(this,t).duration=e}}function Zee(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Gee:Jee)(e,t)):zo(this.node(),e).duration}function Yee(t,e){if(typeof e!="function")throw new Error;return function(){fa(this,t).ease=e}}function Xee(t){var e=this._id;return arguments.length?this.each(Yee(e,t)):zo(this.node(),e).ease}function ete(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;fa(this,t).ease=n}}function tte(t){if(typeof t!="function")throw new Error;return this.each(ete(this._id,t))}function nte(t){typeof t!="function"&&(t=N2(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,f=0;f<o;++f)(u=s[f])&&t.call(u,u.__data__,f,s)&&l.push(u);return new Qa(r,this._parents,this._name,this._id)}function rte(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=e[l],f=n[l],p=u.length,h=o[l]=new Array(p),b,x=0;x<p;++x)(b=u[x]||f[x])&&(h[x]=b);for(;l<r;++l)o[l]=e[l];return new Qa(o,this._parents,this._name,this._id)}function ite(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ste(t,e,n){var r,i,s=ite(e)?R1:fa;return function(){var o=s(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function ote(t,e){var n=this._id;return arguments.length<2?zo(this.node(),n).on.on(t):this.each(ste(n,t,e))}function ate(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function lte(){return this.on("end.remove",ate(this._id))}function cte(t){var e=this._name,n=this._id;typeof t!="function"&&(t=I1(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,f=s[o]=new Array(u),p,h,b=0;b<u;++b)(p=l[b])&&(h=t.call(p,p.__data__,b,l))&&("__data__"in p&&(h.__data__=p.__data__),f[b]=h,Yv(f[b],e,n,b,f,zo(p,n)));return new Qa(s,this._parents,e,n)}function ute(t){var e=this._name,n=this._id;typeof t!="function"&&(t=E2(t));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],f=u.length,p,h=0;h<f;++h)if(p=u[h]){for(var b=t.call(p,p.__data__,h,u),x,_=zo(p,n),E=0,I=b.length;E<I;++E)(x=b[E])&&Yv(x,e,n,E,b,_);s.push(b),o.push(p)}return new Qa(s,o,e,n)}var dte=Sm.prototype.constructor;function fte(){return new dte(this._groups,this._parents)}function pte(t,e){var n,r,i;return function(){var s=Jd(this,t),o=(this.style.removeProperty(t),Jd(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function G2(t){return function(){this.style.removeProperty(t)}}function hte(t,e,n){var r,i=n+"",s;return function(){var o=Jd(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function mte(t,e,n){var r,i,s;return function(){var o=Jd(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),Jd(this,t))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l))}}function gte(t,e){var n,r,i,s="style."+e,o="end."+s,l;return function(){var u=fa(this,t),f=u.on,p=u.value[s]==null?l||(l=G2(e)):void 0;(f!==n||i!==p)&&(r=(n=f).copy()).on(o,i=p),u.on=r}}function yte(t,e,n){var r=(t+="")=="transform"?yee:Q2;return e==null?this.styleTween(t,pte(t,r)).on("end.style."+t,G2(t)):typeof e=="function"?this.styleTween(t,mte(t,r,j1(this,"style."+t,e))).each(gte(this._id,t)):this.styleTween(t,hte(t,r,e),n).on("end.style."+t,null)}function bte(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function vte(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&bte(t,o,n)),r}return s._value=e,s}function xte(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,vte(t,e,n??""))}function wte(t){return function(){this.textContent=t}}function _te(t){return function(){var e=t(this);this.textContent=e??""}}function Ste(t){return this.tween("text",typeof t=="function"?_te(j1(this,"text",t)):wte(t==null?"":t+""))}function Ete(t){return function(e){this.textContent=t.call(this,e)}}function Nte(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ete(i)),e}return r._value=t,r}function Ite(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Nte(t))}function kte(){for(var t=this._name,e=this._id,n=J2(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,f=0;f<l;++f)if(u=o[f]){var p=zo(u,e);Yv(u,t,n,f,o,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Qa(r,this._parents,t,n)}function Cte(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var f=fa(this,r),p=f.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),f.on=e}),i===0&&s()})}var Tte=0;function Qa(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function J2(){return++Tte}var ja=Sm.prototype;Qa.prototype={constructor:Qa,select:cte,selectAll:ute,selectChild:ja.selectChild,selectChildren:ja.selectChildren,filter:nte,merge:rte,selection:fte,transition:kte,call:ja.call,nodes:ja.nodes,node:ja.node,size:ja.size,empty:ja.empty,each:ja.each,on:ote,attr:$ee,attrTween:Uee,style:yte,styleTween:xte,text:Ste,textTween:Ite,remove:lte,tween:qee,delay:Qee,duration:Zee,ease:Xee,easeVarying:tte,end:Cte,[Symbol.iterator]:ja[Symbol.iterator]};function Rte(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var jte={time:null,delay:0,duration:250,ease:Rte};function Ote(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function qte(t){var e,n;t instanceof Qa?(e=t._id,t=t._name):(e=J2(),(n=jte).time=T1(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,f=0;f<l;++f)(u=o[f])&&Yv(u,t,e,f,o,n||Ote(u,e));return new Qa(r,this._parents,t,e)}Sm.prototype.interrupt=Ree;Sm.prototype.transition=qte;const oy=t=>()=>t;function Ate(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Da(t,e,n){this.k=t,this.x=e,this.y=n}Da.prototype={constructor:Da,scale:function(t){return t===1?this:new Da(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Da(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Xv=new Da(1,0,0);Z2.prototype=Da.prototype;function Z2(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Xv;return t.__zoom}function IS(t){t.stopImmediatePropagation()}function _p(t){t.preventDefault(),t.stopImmediatePropagation()}function Pte(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Fte(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function wq(){return this.__zoom||Xv}function Dte(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Lte(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mte(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Y2(){var t=Pte,e=Fte,n=Mte,r=Dte,i=Lte,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=_ee,f=Gv("start","zoom","end"),p,h,b,x=500,_=150,E=0,I=10;function T(B){B.property("__zoom",wq).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(B,G,Z,le){var ie=B.selection?B.selection():B;ie.property("__zoom",wq),B!==ie?L(B,G,Z,le):ie.interrupt().each(function(){M(this,arguments).event(le).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},T.scaleBy=function(B,G,Z,le){T.scaleTo(B,function(){var ie=this.__zoom.k,ne=typeof G=="function"?G.apply(this,arguments):G;return ie*ne},Z,le)},T.scaleTo=function(B,G,Z,le){T.transform(B,function(){var ie=e.apply(this,arguments),ne=this.__zoom,oe=Z==null?q(ie):typeof Z=="function"?Z.apply(this,arguments):Z,te=ne.invert(oe),ue=typeof G=="function"?G.apply(this,arguments):G;return n(j(C(ne,ue),oe,te),ie,o)},Z,le)},T.translateBy=function(B,G,Z,le){T.transform(B,function(){return n(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof Z=="function"?Z.apply(this,arguments):Z),e.apply(this,arguments),o)},null,le)},T.translateTo=function(B,G,Z,le,ie){T.transform(B,function(){var ne=e.apply(this,arguments),oe=this.__zoom,te=le==null?q(ne):typeof le=="function"?le.apply(this,arguments):le;return n(Xv.translate(te[0],te[1]).scale(oe.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof Z=="function"?-Z.apply(this,arguments):-Z),ne,o)},le,ie)};function C(B,G){return G=Math.max(s[0],Math.min(s[1],G)),G===B.k?B:new Da(G,B.x,B.y)}function j(B,G,Z){var le=G[0]-Z[0]*B.k,ie=G[1]-Z[1]*B.k;return le===B.x&&ie===B.y?B:new Da(B.k,le,ie)}function q(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function L(B,G,Z,le){B.on("start.zoom",function(){M(this,arguments).event(le).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(le).end()}).tween("zoom",function(){var ie=this,ne=arguments,oe=M(ie,ne).event(le),te=e.apply(ie,ne),ue=Z==null?q(te):typeof Z=="function"?Z.apply(ie,ne):Z,de=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),ye=ie.__zoom,we=typeof G=="function"?G.apply(ie,ne):G,Ne=u(ye.invert(ue).concat(de/ye.k),we.invert(ue).concat(de/we.k));return function(ze){if(ze===1)ze=we;else{var je=Ne(ze),De=de/je[2];ze=new Da(De,ue[0]-je[0]*De,ue[1]-je[1]*De)}oe.zoom(null,ze)}})}function M(B,G,Z){return!Z&&B.__zooming||new W(B,G)}function W(B,G){this.that=B,this.args=G,this.active=0,this.sourceEvent=null,this.extent=e.apply(B,G),this.taps=0}W.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,G){return this.mouse&&B!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var G=Rs(this.that).datum();f.call(B,this.that,new Ate(B,{sourceEvent:this.sourceEvent,target:T,type:B,transform:this.that.__zoom,dispatch:f}),G)}};function P(B,...G){if(!t.apply(this,arguments))return;var Z=M(this,G).event(B),le=this.__zoom,ie=Math.max(s[0],Math.min(s[1],le.k*Math.pow(2,r.apply(this,arguments)))),ne=Eo(B);if(Z.wheel)(Z.mouse[0][0]!==ne[0]||Z.mouse[0][1]!==ne[1])&&(Z.mouse[1]=le.invert(Z.mouse[0]=ne)),clearTimeout(Z.wheel);else{if(le.k===ie)return;Z.mouse=[ne,le.invert(ne)],$y(this),Z.start()}_p(B),Z.wheel=setTimeout(oe,_),Z.zoom("mouse",n(j(C(le,ie),Z.mouse[0],Z.mouse[1]),Z.extent,o));function oe(){Z.wheel=null,Z.end()}}function O(B,...G){if(b||!t.apply(this,arguments))return;var Z=B.currentTarget,le=M(this,G,!0).event(B),ie=Rs(B.view).on("mousemove.zoom",ue,!0).on("mouseup.zoom",de,!0),ne=Eo(B,Z),oe=B.clientX,te=B.clientY;P2(B.view),IS(B),le.mouse=[ne,this.__zoom.invert(ne)],$y(this),le.start();function ue(ye){if(_p(ye),!le.moved){var we=ye.clientX-oe,Ne=ye.clientY-te;le.moved=we*we+Ne*Ne>E}le.event(ye).zoom("mouse",n(j(le.that.__zoom,le.mouse[0]=Eo(ye,Z),le.mouse[1]),le.extent,o))}function de(ye){ie.on("mousemove.zoom mouseup.zoom",null),F2(ye.view,le.moved),_p(ye),le.event(ye).end()}}function z(B,...G){if(t.apply(this,arguments)){var Z=this.__zoom,le=Eo(B.changedTouches?B.changedTouches[0]:B,this),ie=Z.invert(le),ne=Z.k*(B.shiftKey?.5:2),oe=n(j(C(Z,ne),le,ie),e.apply(this,G),o);_p(B),l>0?Rs(this).transition().duration(l).call(L,oe,le,B):Rs(this).call(T.transform,oe,le,B)}}function F(B,...G){if(t.apply(this,arguments)){var Z=B.touches,le=Z.length,ie=M(this,G,B.changedTouches.length===le).event(B),ne,oe,te,ue;for(IS(B),oe=0;oe<le;++oe)te=Z[oe],ue=Eo(te,this),ue=[ue,this.__zoom.invert(ue),te.identifier],ie.touch0?!ie.touch1&&ie.touch0[2]!==ue[2]&&(ie.touch1=ue,ie.taps=0):(ie.touch0=ue,ne=!0,ie.taps=1+!!p);p&&(p=clearTimeout(p)),ne&&(ie.taps<2&&(h=ue[0],p=setTimeout(function(){p=null},x)),$y(this),ie.start())}}function V(B,...G){if(this.__zooming){var Z=M(this,G).event(B),le=B.changedTouches,ie=le.length,ne,oe,te,ue;for(_p(B),ne=0;ne<ie;++ne)oe=le[ne],te=Eo(oe,this),Z.touch0&&Z.touch0[2]===oe.identifier?Z.touch0[0]=te:Z.touch1&&Z.touch1[2]===oe.identifier&&(Z.touch1[0]=te);if(oe=Z.that.__zoom,Z.touch1){var de=Z.touch0[0],ye=Z.touch0[1],we=Z.touch1[0],Ne=Z.touch1[1],ze=(ze=we[0]-de[0])*ze+(ze=we[1]-de[1])*ze,je=(je=Ne[0]-ye[0])*je+(je=Ne[1]-ye[1])*je;oe=C(oe,Math.sqrt(ze/je)),te=[(de[0]+we[0])/2,(de[1]+we[1])/2],ue=[(ye[0]+Ne[0])/2,(ye[1]+Ne[1])/2]}else if(Z.touch0)te=Z.touch0[0],ue=Z.touch0[1];else return;Z.zoom("touch",n(j(oe,te,ue),Z.extent,o))}}function U(B,...G){if(this.__zooming){var Z=M(this,G).event(B),le=B.changedTouches,ie=le.length,ne,oe;for(IS(B),b&&clearTimeout(b),b=setTimeout(function(){b=null},x),ne=0;ne<ie;++ne)oe=le[ne],Z.touch0&&Z.touch0[2]===oe.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===oe.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&(oe=Eo(oe,this),Math.hypot(h[0]-oe[0],h[1]-oe[1])<I)){var te=Rs(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return T.wheelDelta=function(B){return arguments.length?(r=typeof B=="function"?B:oy(+B),T):r},T.filter=function(B){return arguments.length?(t=typeof B=="function"?B:oy(!!B),T):t},T.touchable=function(B){return arguments.length?(i=typeof B=="function"?B:oy(!!B),T):i},T.extent=function(B){return arguments.length?(e=typeof B=="function"?B:oy([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),T):e},T.scaleExtent=function(B){return arguments.length?(s[0]=+B[0],s[1]=+B[1],T):[s[0],s[1]]},T.translateExtent=function(B){return arguments.length?(o[0][0]=+B[0][0],o[1][0]=+B[1][0],o[0][1]=+B[0][1],o[1][1]=+B[1][1],T):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},T.constrain=function(B){return arguments.length?(n=B,T):n},T.duration=function(B){return arguments.length?(l=+B,T):l},T.interpolate=function(B){return arguments.length?(u=B,T):u},T.on=function(){var B=f.on.apply(f,arguments);return B===f?T:B},T.clickDistance=function(B){return arguments.length?(E=(B=+B)*B,T):Math.sqrt(E)},T.tapDistance=function(B){return arguments.length?(I=+B,T):I},T}const Ga={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},Wh=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],X2=["Enter"," ","Escape"];var Yd;(function(t){t.Strict="strict",t.Loose="loose"})(Yd||(Yd={}));var Zc;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Zc||(Zc={}));var Vh;(function(t){t.Partial="partial",t.Full="full"})(Vh||(Vh={}));const eL={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Fl;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Fl||(Fl={}));var Uh;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Uh||(Uh={}));var Ot;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Ot||(Ot={}));const _q={[Ot.Left]:Ot.Right,[Ot.Right]:Ot.Left,[Ot.Top]:Ot.Bottom,[Ot.Bottom]:Ot.Top};function tL(t){return t===null?null:t?"valid":"invalid"}const nL=t=>"id"in t&&"source"in t&&"target"in t,$te=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),O1=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Nm=(t,e=[0,0])=>{const{width:n,height:r}=Ja(t),i=t.origin??e,s=n*i[0],o=r*i[1];return{x:t.position.x-s,y:t.position.y-o}},Bte=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):O1(i)?i:e.nodeLookup.get(i.id));const l=o?iv(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return ex(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return tx(n)},xf=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=iv(r);n=ex(n,i)}}),tx(n)},rL=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...Im(e,[n,r,i]),width:e.width/i,height:e.height/i},u=[];for(const f of t.values()){const{measured:p,selectable:h=!0,hidden:b=!1}=f;if(o&&!h||b)continue;const x=p.width??f.width??f.initialWidth??null,_=p.height??f.height??f.initialHeight??null,E=Hh(l,ef(f)),I=(x??0)*(_??0),T=s&&E>0;(!f.internals.handleBounds||T||E>=I||f.dragging)&&u.push(f)}return u},zte=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function GE(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function JE({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(t.size===0)return Promise.resolve(!1);const l=xf(t),u=q1(l,e,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(u,{duration:o?.duration}),Promise.resolve(!0)}function iL({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(t),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:f}=l?l.internals.positionAbsolute:{x:0,y:0},p=o.origin??r;let h=i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",Ga.error005());else{const x=l.measured.width,_=l.measured.height;x&&_&&(h=[[u,f],[u+x,f+_]])}else l&&tf(o.extent)&&(h=[[o.extent[0][0]+u,o.extent[0][1]+f],[o.extent[1][0]+u,o.extent[1][1]+f]]);const b=tf(h)?cu(e,h,o.measured):e;return{position:{x:b.x-u+o.measured.width*p[0],y:b.y-f+o.measured.height*p[1]},positionAbsolute:b}}async function Wte({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(b=>b.id)),o=[];for(const b of n){if(b.deletable===!1)continue;const x=s.has(b.id),_=!x&&b.parentId&&o.find(E=>E.id===b.parentId);(x||_)&&o.push(b)}const l=new Set(e.map(b=>b.id)),u=r.filter(b=>b.deletable!==!1),p=zte(o,u);for(const b of u)l.has(b.id)&&!p.find(_=>_.id===b.id)&&p.push(b);if(!i)return{edges:p,nodes:o};const h=await i({nodes:o,edges:p});return typeof h=="boolean"?h?{edges:p,nodes:o}:{edges:[],nodes:[]}:h}const Xd=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),cu=(t={x:0,y:0},e,n)=>({x:Xd(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Xd(t.y,e[0][1],e[1][1]-(n?.height??0))});function sL(t,e,n){const{width:r,height:i}=Ja(n),{x:s,y:o}=n.internals.positionAbsolute;return cu(t,[[s,o],[s+r,o+i]],e)}const Sq=(t,e,n)=>t<e?Xd(Math.abs(t-e),1,e)/e:t>n?-Xd(Math.abs(t-n),1,e)/e:0,oL=(t,e,n=15,r=40)=>{const i=Sq(t.x,r,e.width-r)*n,s=Sq(t.y,r,e.height-r)*n;return[i,s]},ex=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),ZE=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),tx=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),ef=(t,e=[0,0])=>{const{x:n,y:r}=O1(t)?t.internals.positionAbsolute:Nm(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},iv=(t,e=[0,0])=>{const{x:n,y:r}=O1(t)?t.internals.positionAbsolute:Nm(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},aL=(t,e)=>tx(ex(ZE(t),ZE(e))),Hh=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},Eq=t=>Oo(t.width)&&Oo(t.height)&&Oo(t.x)&&Oo(t.y),Oo=t=>!isNaN(t)&&isFinite(t),Vte=(t,e)=>{},nx=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Im=({x:t,y:e},[n,r,i],s=!1,o=[1,1])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?nx(l,o):l},lL=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),q1=(t,e,n,r,i,s)=>{const o=e/(t.width*(1+s)),l=n/(t.height*(1+s)),u=Math.min(o,l),f=Xd(u,r,i),p=t.x+t.width/2,h=t.y+t.height/2,b=e/2-p*f,x=n/2-h*f;return{x:b,y:x,zoom:f}},sv=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function tf(t){return t!==void 0&&t!=="parent"}function Ja(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function cL(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function uL(t,e={width:0,height:0},n,r,i){const s={...t},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}return s}function Nq(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function ah(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=$a(t),l=Im({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:f}=n?nx(l,e):l;return{xSnapped:u,ySnapped:f,...l}}const rx=t=>({width:t.offsetWidth,height:t.offsetHeight}),dL=t=>t?.getRootNode?.()||window?.document,Ute=["INPUT","SELECT","TEXTAREA"];function YE(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:Ute.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const fL=t=>"clientX"in t,$a=(t,e)=>{const n=fL(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},Iq=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:t,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...rx(o)}})};function pL({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=t*.125+i*.375+o*.375+n*.125,f=e*.125+s*.375+l*.375+r*.125,p=Math.abs(u-t),h=Math.abs(f-e);return[u,f,p,h]}function ay(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function kq({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case Ot.Left:return[e-ay(e-r,s),n];case Ot.Right:return[e+ay(r-e,s),n];case Ot.Top:return[e,n-ay(n-i,s)];case Ot.Bottom:return[e,n+ay(i-n,s)]}}function A1({sourceX:t,sourceY:e,sourcePosition:n=Ot.Bottom,targetX:r,targetY:i,targetPosition:s=Ot.Top,curvature:o=.25}){const[l,u]=kq({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[f,p]=kq({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[h,b,x,_]=pL({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:f,targetControlY:p});return[`M${t},${e} C${l},${u} ${f},${p} ${r},${i}`,h,b,x,_]}function hL({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,l=r<e?r+o:r-o;return[s,l,i,o]}function Hte({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const s=n||e.selected||t.selected,o=Math.max(t.internals.z||0,e.internals.z||0,1e3);return r+(s?o:0)}function Kte({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=ex(iv(t),iv(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Hh(o,tx(s))>0}const Qte=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,Gte=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Jte=(t,e)=>{if(!t.source||!t.target)return e;let n;return nL(t)?n={...t}:n={...t,id:Qte(t)},Gte(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function mL({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,l]=hL({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,l]}const Cq={[Ot.Left]:{x:-1,y:0},[Ot.Right]:{x:1,y:0},[Ot.Top]:{x:0,y:-1},[Ot.Bottom]:{x:0,y:1}},Zte=({source:t,sourcePosition:e=Ot.Bottom,target:n})=>e===Ot.Left||e===Ot.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Tq=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Yte({source:t,sourcePosition:e=Ot.Bottom,target:n,targetPosition:r=Ot.Top,center:i,offset:s}){const o=Cq[e],l=Cq[r],u={x:t.x+o.x*s,y:t.y+o.y*s},f={x:n.x+l.x*s,y:n.y+l.y*s},p=Zte({source:u,sourcePosition:e,target:f}),h=p.x!==0?"x":"y",b=p[h];let x=[],_,E;const I={x:0,y:0},T={x:0,y:0},[C,j,q,L]=hL({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[h]*l[h]===-1){_=i.x??C,E=i.y??j;const W=[{x:_,y:u.y},{x:_,y:f.y}],P=[{x:u.x,y:E},{x:f.x,y:E}];o[h]===b?x=h==="x"?W:P:x=h==="x"?P:W}else{const W=[{x:u.x,y:f.y}],P=[{x:f.x,y:u.y}];if(h==="x"?x=o.x===b?P:W:x=o.y===b?W:P,e===r){const U=Math.abs(t[h]-n[h]);if(U<=s){const B=Math.min(s-1,s-U);o[h]===b?I[h]=(u[h]>t[h]?-1:1)*B:T[h]=(f[h]>n[h]?-1:1)*B}}if(e!==r){const U=h==="x"?"y":"x",B=o[h]===l[U],G=u[U]>f[U],Z=u[U]<f[U];(o[h]===1&&(!B&&G||B&&Z)||o[h]!==1&&(!B&&Z||B&&G))&&(x=h==="x"?W:P)}const O={x:u.x+I.x,y:u.y+I.y},z={x:f.x+T.x,y:f.y+T.y},F=Math.max(Math.abs(O.x-x[0].x),Math.abs(z.x-x[0].x)),V=Math.max(Math.abs(O.y-x[0].y),Math.abs(z.y-x[0].y));F>=V?(_=(O.x+z.x)/2,E=x[0].y):(_=x[0].x,E=(O.y+z.y)/2)}return[[t,{x:u.x+I.x,y:u.y+I.y},...x,{x:f.x+T.x,y:f.y+T.y},n],_,E,q,L]}function Xte(t,e,n,r){const i=Math.min(Tq(t,e)/2,Tq(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const f=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${s+i*f},${o}Q ${s},${o} ${s},${o+i*p}`}const l=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function XE({sourceX:t,sourceY:e,sourcePosition:n=Ot.Bottom,targetX:r,targetY:i,targetPosition:s=Ot.Top,borderRadius:o=5,centerX:l,centerY:u,offset:f=20}){const[p,h,b,x,_]=Yte({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:f});return[p.reduce((I,T,C)=>{let j="";return C>0&&C<p.length-1?j=Xte(p[C-1],T,p[C+1],o):j=`${C===0?"M":"L"}${T.x} ${T.y}`,I+=j,I},""),h,b,x,_]}function Rq(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function ene(t){const{sourceNode:e,targetNode:n}=t;if(!Rq(e)||!Rq(n))return null;const r=e.internals.handleBounds||jq(e.handles),i=n.internals.handleBounds||jq(n.handles),s=Oq(r?.source??[],t.sourceHandle),o=Oq(t.connectionMode===Yd.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!s||!o)return t.onError?.("008",Ga.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=s?.position||Ot.Bottom,u=o?.position||Ot.Top,f=Kh(e,s,l),p=Kh(n,o,u);return{sourceX:f.x,sourceY:f.y,targetX:p.x,targetY:p.y,sourcePosition:l,targetPosition:u}}function jq(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function Kh(t,e,n=Ot.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:o,height:l}=e??Ja(t);if(r)return{x:i+o/2,y:s+l/2};switch(e?.position??n){case Ot.Top:return{x:i+o/2,y:s};case Ot.Right:return{x:i+o,y:s+l/2};case Ot.Bottom:return{x:i+o/2,y:s+l};case Ot.Left:return{x:i,y:s+l/2}}}function Oq(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function eN(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function tne(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const f=eN(u,e);s.has(f)||(o.push({id:f,color:u.color||n,...u}),s.add(f))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}function nne(t,e,n,r,i){let s=.5;i==="start"?s=0:i==="end"&&(s=1);let o=[(t.x+t.width*s)*e.zoom+e.x,t.y*e.zoom+e.y-r],l=[-100*s,-100];switch(n){case Ot.Right:o=[(t.x+t.width)*e.zoom+e.x+r,(t.y+t.height*s)*e.zoom+e.y],l=[0,-100*s];break;case Ot.Bottom:o[1]=(t.y+t.height)*e.zoom+e.y+r,l[1]=0;break;case Ot.Left:o=[t.x*e.zoom+e.x-r,(t.y+t.height*s)*e.zoom+e.y],l=[-100,-100*s];break}return`translate(${o[0]}px, ${o[1]}px) translate(${l[0]}%, ${l[1]}%)`}const P1={nodeOrigin:[0,0],nodeExtent:Wh,elevateNodesOnSelect:!0,defaults:{}},rne={...P1,checkEquality:!0};function F1(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function ine(t,e,n){const r=F1(P1,n);for(const i of t.values())if(i.parentId)D1(i,t,e,r);else{const s=Nm(i,r.nodeOrigin),o=tf(i.extent)?i.extent:r.nodeExtent,l=cu(s,o,Ja(i));i.internals.positionAbsolute=l}}function tN(t,e,n,r){const i=F1(rne,r),s=new Map(e),o=i?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const l of t){let u=s.get(l.id);if(i.checkEquality&&l===u?.internals.userNode)e.set(l.id,u);else{const f=Nm(l,i.nodeOrigin),p=tf(l.extent)?l.extent:i.nodeExtent,h=cu(f,p,Ja(l));u={...i.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:h,handleBounds:l.measured?u?.internals.handleBounds:void 0,z:gL(l,o),userNode:l}},e.set(l.id,u)}l.parentId&&D1(u,e,n,r)}}function sne(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function D1(t,e,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=F1(P1,r),l=t.parentId,u=e.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}sne(t,n);const f=i?1e3:0,{x:p,y:h,z:b}=one(t,u,s,o,f),{positionAbsolute:x}=t.internals,_=p!==x.x||h!==x.y;(_||b!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:_?{x:p,y:h}:x,z:b}})}function gL(t,e){return(Oo(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function one(t,e,n,r,i){const{x:s,y:o}=e.internals.positionAbsolute,l=Ja(t),u=Nm(t,n),f=tf(t.extent)?cu(u,t.extent,l):u;let p=cu({x:s+f.x,y:o+f.y},r,l);t.extent==="parent"&&(p=sL(p,l,e));const h=gL(t,i),b=e.internals.z??0;return{x:p.x,y:p.y,z:b>h?b:h}}function L1(t,e,n,r=[0,0]){const i=[],s=new Map;for(const o of t){const l=e.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??ef(l),f=aL(u,o.rect);s.set(o.parentId,{expandedRect:f,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const f=l.internals.positionAbsolute,p=Ja(l),h=l.origin??r,b=o.x<f.x?Math.round(Math.abs(f.x-o.x)):0,x=o.y<f.y?Math.round(Math.abs(f.y-o.y)):0,_=Math.max(p.width,Math.round(o.width)),E=Math.max(p.height,Math.round(o.height)),I=(_-p.width)*h[0],T=(E-p.height)*h[1];(b>0||x>0||I||T)&&(i.push({id:u,type:"position",position:{x:l.position.x-b+I,y:l.position.y-x+T}}),n.get(u)?.forEach(C=>{t.some(j=>j.id===C.id)||i.push({id:C.id,type:"position",position:{x:C.position.x+b,y:C.position.y+x}})})),(p.width<o.width||p.height<o.height||b||x)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:_+(b?h[0]*b-I:0),height:E+(x?h[1]*x-T:0)}})}),i}function ane(t,e,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],f=window.getComputedStyle(o),{m22:p}=new window.DOMMatrixReadOnly(f.transform),h=[];for(const b of t.values()){const x=e.get(b.id);if(!x)continue;if(x.hidden){e.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),l=!0;continue}const _=rx(b.nodeElement),E=x.measured.width!==_.width||x.measured.height!==_.height;if(!!(_.width&&_.height&&(E||!x.internals.handleBounds||b.force))){const T=b.nodeElement.getBoundingClientRect(),C=tf(x.extent)?x.extent:s;let{positionAbsolute:j}=x.internals;x.parentId&&x.extent==="parent"?j=sL(j,_,e.get(x.parentId)):C&&(j=cu(j,C,_));const q={...x,measured:_,internals:{...x.internals,positionAbsolute:j,handleBounds:{source:Iq("source",b.nodeElement,T,p,x.id),target:Iq("target",b.nodeElement,T,p,x.id)}}};e.set(x.id,q),x.parentId&&D1(q,e,n,{nodeOrigin:i}),l=!0,E&&(u.push({id:x.id,type:"dimensions",dimensions:_}),x.expandParent&&x.parentId&&h.push({id:x.id,parentId:x.parentId,rect:ef(q,i)}))}}if(h.length>0){const b=L1(h,e,n,i);u.push(...b)}return{changes:u,updatedInternals:l}}async function lne({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function qq(t,e,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,e)),o=`${i}-${t}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,e)),s){o=`${i}-${t}-${s}`;const f=r.get(o)||new Map;r.set(o,f.set(n,e))}}function yL(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},f=`${i}-${o}--${s}-${l}`,p=`${s}-${l}--${i}-${o}`;qq("source",u,p,t,i,o),qq("target",u,f,t,s,l),e.set(r.id,r)}}function bL(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:bL(n,e):!1}function Aq(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function cne(t,e,n,r){const i=new Map;for(const[s,o]of t)if((o.selected||o.id===r)&&(!o.parentId||!bL(o,t))&&(o.draggable||e&&typeof o.draggable>"u")){const l=t.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function kS({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of e){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!t)return[i[0],i];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:r}:i[0],i]}function une({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,f={x:0,y:0},p=null,h=!1,b=null,x=!1;function _({noDragClassName:I,handleSelector:T,domNode:C,isSelectable:j,nodeId:q,nodeClickDistance:L=0}){b=Rs(C);function M({x:z,y:F},V){const{nodeLookup:U,nodeExtent:B,snapGrid:G,snapToGrid:Z,nodeOrigin:le,onNodeDrag:ie,onSelectionDrag:ne,onError:oe,updateNodePositions:te}=e();s={x:z,y:F};let ue=!1,de={x:0,y:0,x2:0,y2:0};if(l.size>1&&B){const ye=xf(l);de=ZE(ye)}for(const[ye,we]of l){if(!U.has(ye))continue;let Ne={x:z-we.distance.x,y:F-we.distance.y};Z&&(Ne=nx(Ne,G));let ze=[[B[0][0],B[0][1]],[B[1][0],B[1][1]]];if(l.size>1&&B&&!we.extent){const{positionAbsolute:Je}=we.internals,Xe=Je.x-de.x+B[0][0],Ve=Je.x+we.measured.width-de.x2+B[1][0],ct=Je.y-de.y+B[0][1],_t=Je.y+we.measured.height-de.y2+B[1][1];ze=[[Xe,ct],[Ve,_t]]}const{position:je,positionAbsolute:De}=iL({nodeId:ye,nextPosition:Ne,nodeLookup:U,nodeExtent:ze,nodeOrigin:le,onError:oe});ue=ue||we.position.x!==je.x||we.position.y!==je.y,we.position=je,we.internals.positionAbsolute=De}if(ue&&(te(l,!0),V&&(r||ie||!q&&ne))){const[ye,we]=kS({nodeId:q,dragItems:l,nodeLookup:U});r?.(V,l,ye,we),ie?.(V,ye,we),q||ne?.(V,we)}}async function W(){if(!p)return;const{transform:z,panBy:F,autoPanSpeed:V}=e(),[U,B]=oL(f,p,V);(U!==0||B!==0)&&(s.x=(s.x??0)-U/z[2],s.y=(s.y??0)-B/z[2],await F({x:U,y:B})&&M(s,null)),o=requestAnimationFrame(W)}function P(z){const{nodeLookup:F,multiSelectionActive:V,nodesDraggable:U,transform:B,snapGrid:G,snapToGrid:Z,selectNodesOnDrag:le,onNodeDragStart:ie,onSelectionDragStart:ne,unselectNodesAndEdges:oe}=e();h=!0,(!le||!j)&&!V&&q&&(F.get(q)?.selected||oe()),j&&le&&q&&t?.(q);const te=ah(z.sourceEvent,{transform:B,snapGrid:G,snapToGrid:Z,containerBounds:p});if(s=te,l=cne(F,U,te,q),l.size>0&&(n||ie||!q&&ne)){const[ue,de]=kS({nodeId:q,dragItems:l,nodeLookup:F});n?.(z.sourceEvent,l,ue,de),ie?.(z.sourceEvent,ue,de),q||ne?.(z.sourceEvent,de)}}const O=D2().clickDistance(L).on("start",z=>{const{domNode:F,nodeDragThreshold:V,transform:U,snapGrid:B,snapToGrid:G}=e();p=F?.getBoundingClientRect()||null,x=!1,V===0&&P(z),s=ah(z.sourceEvent,{transform:U,snapGrid:B,snapToGrid:G,containerBounds:p}),f=$a(z.sourceEvent,p)}).on("drag",z=>{const{autoPanOnNodeDrag:F,transform:V,snapGrid:U,snapToGrid:B,nodeDragThreshold:G,nodeLookup:Z}=e(),le=ah(z.sourceEvent,{transform:V,snapGrid:U,snapToGrid:B,containerBounds:p});if((z.sourceEvent.type==="touchmove"&&z.sourceEvent.touches.length>1||q&&!Z.has(q))&&(x=!0),!x){if(!u&&F&&h&&(u=!0,W()),!h){const ie=le.xSnapped-(s.x??0),ne=le.ySnapped-(s.y??0);Math.sqrt(ie*ie+ne*ne)>G&&P(z)}(s.x!==le.xSnapped||s.y!==le.ySnapped)&&l&&h&&(f=$a(z.sourceEvent,p),M(le,z.sourceEvent))}}).on("end",z=>{if(!(!h||x)&&(u=!1,h=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:F,updateNodePositions:V,onNodeDragStop:U,onSelectionDragStop:B}=e();if(V(l,!1),i||U||!q&&B){const[G,Z]=kS({nodeId:q,dragItems:l,nodeLookup:F,dragging:!1});i?.(z.sourceEvent,l,G,Z),U?.(z.sourceEvent,G,Z),q||B?.(z.sourceEvent,Z)}}}).filter(z=>{const F=z.target;return!z.button&&(!I||!Aq(F,`.${I}`,C))&&(!T||Aq(F,T,C))});b.call(O)}function E(){b?.on(".drag",null)}return{update:_,destroy:E}}function dne(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())Hh(i,ef(s))>0&&r.push(s);return r}const fne=250;function pne(t,e,n,r){let i=[],s=1/0;const o=dne(t,n,e+fne);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const f of u){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:p,y:h}=Kh(l,f,f.position,!0),b=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(h-t.y,2));b>e||(b<s?(i=[{...f,x:p,y:h}],s=b):b===s&&i.push({...f,x:p,y:h}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function vL(t,e,n,r,i,s=!1){const o=r.get(t);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[e]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(f=>f.id===n):l?.[0])??null;return u&&s?{...u,...Kh(o,u,u.position,!0)}:u}function xL(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function hne(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const wL=()=>!0;function mne(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:f,autoPanOnConnect:p,flowId:h,panBy:b,cancelConnection:x,onConnectStart:_,onConnect:E,onConnectEnd:I,isValidConnection:T=wL,onReconnectEnd:C,updateConnection:j,getTransform:q,getFromHandle:L,autoPanSpeed:M}){const W=dL(t.target);let P=0,O;const{x:z,y:F}=$a(t),V=W?.elementFromPoint(z,F),U=xL(s,V),B=l?.getBoundingClientRect();if(!B||!U)return;const G=vL(i,U,r,u,e);if(!G)return;let Z=$a(t,B),le=!1,ie=null,ne=!1,oe=null;function te(){if(!p||!B)return;const[De,Je]=oL(Z,B,M);b({x:De,y:Je}),P=requestAnimationFrame(te)}const ue={...G,nodeId:i,type:U,position:G.position},de=u.get(i),we={inProgress:!0,isValid:null,from:Kh(de,ue,Ot.Left,!0),fromHandle:ue,fromPosition:ue.position,fromNode:de,to:Z,toHandle:null,toPosition:_q[ue.position],toNode:null};j(we);let Ne=we;_?.(t,{nodeId:i,handleId:r,handleType:U});function ze(De){if(!L()||!ue){je(De);return}const Je=q();Z=$a(De,B),O=pne(Im(Z,Je,!1,[1,1]),n,u,ue),le||(te(),le=!0);const Xe=_L(De,{handle:O,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:T,doc:W,lib:f,flowId:h,nodeLookup:u});oe=Xe.handleDomNode,ie=Xe.connection,ne=hne(!!O,Xe.isValid);const Ve={...Ne,isValid:ne,to:O&&ne?lL({x:O.x,y:O.y},Je):Z,toHandle:Xe.toHandle,toPosition:ne&&Xe.toHandle?Xe.toHandle.position:_q[ue.position],toNode:Xe.toHandle?u.get(Xe.toHandle.nodeId):null};ne&&O&&Ne.toHandle&&Ve.toHandle&&Ne.toHandle.type===Ve.toHandle.type&&Ne.toHandle.nodeId===Ve.toHandle.nodeId&&Ne.toHandle.id===Ve.toHandle.id&&Ne.to.x===Ve.to.x&&Ne.to.y===Ve.to.y||(j(Ve),Ne=Ve)}function je(De){(O||oe)&&ie&&ne&&E?.(ie);const{inProgress:Je,...Xe}=Ne,Ve={...Xe,toPosition:Ne.toHandle?Ne.toPosition:null};I?.(De,Ve),s&&C?.(De,Ve),x(),cancelAnimationFrame(P),le=!1,ne=!1,ie=null,oe=null,W.removeEventListener("mousemove",ze),W.removeEventListener("mouseup",je),W.removeEventListener("touchmove",ze),W.removeEventListener("touchend",je)}W.addEventListener("mousemove",ze),W.addEventListener("mouseup",je),W.addEventListener("touchmove",ze),W.addEventListener("touchend",je)}function _L(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:f=wL,nodeLookup:p}){const h=s==="target",b=e?o.querySelector(`.${l}-flow__handle[data-id="${u}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x,y:_}=$a(t),E=o.elementFromPoint(x,_),I=E?.classList.contains(`${l}-flow__handle`)?E:b,T={handleDomNode:I,isValid:!1,connection:null,toHandle:null};if(I){const C=xL(void 0,I),j=I.getAttribute("data-nodeid"),q=I.getAttribute("data-handleid"),L=I.classList.contains("connectable"),M=I.classList.contains("connectableend");if(!j||!C)return T;const W={source:h?j:r,sourceHandle:h?q:i,target:h?r:j,targetHandle:h?i:q};T.connection=W;const O=L&&M&&(n===Yd.Strict?h&&C==="source"||!h&&C==="target":j!==r||q!==i);T.isValid=O&&f(W),T.toHandle=vL(j,C,q,p,n,!1)}return T}const nN={onPointerDown:mne,isValid:_L};function gne({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=Rs(t);function s({translateExtent:l,width:u,height:f,zoomStep:p=10,pannable:h=!0,zoomable:b=!0,inversePan:x=!1}){const _=j=>{const q=n();if(j.sourceEvent.type!=="wheel"||!e)return;const L=-j.sourceEvent.deltaY*(j.sourceEvent.deltaMode===1?.05:j.sourceEvent.deltaMode?1:.002)*p,M=q[2]*Math.pow(2,L);e.scaleTo(M)};let E=[0,0];const I=j=>{(j.sourceEvent.type==="mousedown"||j.sourceEvent.type==="touchstart")&&(E=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY])},T=j=>{const q=n();if(j.sourceEvent.type!=="mousemove"&&j.sourceEvent.type!=="touchmove"||!e)return;const L=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY],M=[L[0]-E[0],L[1]-E[1]];E=L;const W=r()*Math.max(q[2],Math.log(q[2]))*(x?-1:1),P={x:q[0]-M[0]*W,y:q[1]-M[1]*W},O=[[0,0],[u,f]];e.setViewportConstrained({x:P.x,y:P.y,zoom:q[2]},O,l)},C=Y2().on("start",I).on("zoom",h?T:null).on("zoom.wheel",b?_:null);i.call(C,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Eo}}const yne=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,ix=t=>({x:t.x,y:t.y,zoom:t.k}),CS=({x:t,y:e,zoom:n})=>Xv.translate(t,e).scale(n),yd=(t,e)=>t.target.closest(`.${e}`),SL=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),TS=(t,e=0,n=()=>{})=>{const r=typeof e=="number"&&e>0;return r||n(),r?t.transition().duration(e).on("end",n):t},EL=t=>{const e=t.ctrlKey&&sv()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function bne({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:f}){return p=>{if(yd(p,e))return!1;p.preventDefault(),p.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(p.ctrlKey&&o){const I=Eo(p),T=EL(p),C=h*Math.pow(2,T);r.scaleTo(n,C,I,p);return}const b=p.deltaMode===1?20:1;let x=i===Zc.Vertical?0:p.deltaX*b,_=i===Zc.Horizontal?0:p.deltaY*b;!sv()&&p.shiftKey&&i!==Zc.Vertical&&(x=p.deltaY*b,_=0),r.translateBy(n,-(x/h)*s,-(_/h)*s,{internal:!0});const E=ix(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l?.(p,E)),t.isPanScrolling&&(u?.(p,E),t.panScrollTimeout=setTimeout(()=>{f?.(p,E),t.isPanScrolling=!1},150))}}function vne({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){if(!e&&r.type==="wheel"&&!r.ctrlKey||yd(r,t))return null;r.preventDefault(),n.call(this,r,i)}}function xne({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=ix(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function wne({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{t.usedRightMouseButton=!!(n&&SL(e,t.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,ix(s.transform))}}function _ne({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&SL(e,t.mouseButton??0)&&!t.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&yne(t.prevViewport,o.transform))){const l=ix(o.transform);t.prevViewport=l,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Sne({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:f}){return p=>{const h=t||e,b=n&&p.ctrlKey;if(p.button===1&&p.type==="mousedown"&&(yd(p,`${f}-flow__node`)||yd(p,`${f}-flow__edge`)))return!0;if(!r&&!h&&!i&&!s&&!n||o||yd(p,l)&&p.type==="wheel"||yd(p,u)&&(p.type!=="wheel"||i&&p.type==="wheel"&&!t)||!n&&p.ctrlKey&&p.type==="wheel")return!1;if(!n&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!h&&!i&&!b&&p.type==="wheel"||!r&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(r)&&!r.includes(p.button)&&p.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||p.type==="wheel")&&x}}function Ene({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:f}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),b=Y2().clickDistance(!Oo(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(i),x=Rs(t).call(b);j({x:s.x,y:s.y,zoom:Xd(s.zoom,e,n)},[[0,0],[h.width,h.height]],i);const _=x.on("wheel.zoom"),E=x.on("dblclick.zoom");b.wheelDelta(EL);function I(V,U){return x?new Promise(B=>{b?.transform(TS(x,U?.duration,()=>B(!0)),V)}):Promise.resolve(!1)}function T({noWheelClassName:V,noPanClassName:U,onPaneContextMenu:B,userSelectionActive:G,panOnScroll:Z,panOnDrag:le,panOnScrollMode:ie,panOnScrollSpeed:ne,preventScrolling:oe,zoomOnPinch:te,zoomOnScroll:ue,zoomOnDoubleClick:de,zoomActivationKeyPressed:ye,lib:we,onTransformChange:Ne}){G&&!p.isZoomingOrPanning&&C();const je=Z&&!ye&&!G?bne({zoomPanValues:p,noWheelClassName:V,d3Selection:x,d3Zoom:b,panOnScrollMode:ie,panOnScrollSpeed:ne,zoomOnPinch:te,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):vne({noWheelClassName:V,preventScrolling:oe,d3ZoomHandler:_});if(x.on("wheel.zoom",je,{passive:!1}),!G){const Je=xne({zoomPanValues:p,onDraggingChange:f,onPanZoomStart:l});b.on("start",Je);const Xe=wne({zoomPanValues:p,panOnDrag:le,onPaneContextMenu:!!B,onPanZoom:o,onTransformChange:Ne});b.on("zoom",Xe);const Ve=_ne({zoomPanValues:p,panOnDrag:le,panOnScroll:Z,onPaneContextMenu:B,onPanZoomEnd:u,onDraggingChange:f});b.on("end",Ve)}const De=Sne({zoomActivationKeyPressed:ye,panOnDrag:le,zoomOnScroll:ue,panOnScroll:Z,zoomOnDoubleClick:de,zoomOnPinch:te,userSelectionActive:G,noPanClassName:U,noWheelClassName:V,lib:we});b.filter(De),de?x.on("dblclick.zoom",E):x.on("dblclick.zoom",null)}function C(){b.on("zoom",null)}async function j(V,U,B){const G=CS(V),Z=b?.constrain()(G,U,B);return Z&&await I(Z),new Promise(le=>le(Z))}async function q(V,U){const B=CS(V);return await I(B,U),new Promise(G=>G(B))}function L(V){if(x){const U=CS(V),B=x.property("__zoom");(B.k!==V.zoom||B.x!==V.x||B.y!==V.y)&&b?.transform(x,U,null,{sync:!0})}}function M(){const V=x?Z2(x.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function W(V,U){return x?new Promise(B=>{b?.scaleTo(TS(x,U?.duration,()=>B(!0)),V)}):Promise.resolve(!1)}function P(V,U){return x?new Promise(B=>{b?.scaleBy(TS(x,U?.duration,()=>B(!0)),V)}):Promise.resolve(!1)}function O(V){b?.scaleExtent(V)}function z(V){b?.translateExtent(V)}function F(V){const U=!Oo(V)||V<0?0:V;b?.clickDistance(U)}return{update:T,destroy:C,setViewport:q,setViewportConstrained:j,getViewport:M,scaleTo:W,scaleBy:P,setScaleExtent:O,setTranslateExtent:z,syncViewport:L,setClickDistance:F}}var lh;(function(t){t.Line="line",t.Handle="handle"})(lh||(lh={}));function Nne({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=t-e,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function Ine(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function El(t,e){return Math.max(0,e-t)}function Nl(t,e){return Math.max(0,t-e)}function ly(t,e,n){return Math.max(0,e-t,t-n)}function Pq(t,e){return t?!e:e}function kne(t,e,n,r,i,s,o,l){let{affectsX:u,affectsY:f}=e;const{isHorizontal:p,isVertical:h}=e,b=p&&h,{xSnapped:x,ySnapped:_}=n,{minWidth:E,maxWidth:I,minHeight:T,maxHeight:C}=r,{x:j,y:q,width:L,height:M,aspectRatio:W}=t;let P=Math.floor(p?x-t.pointerX:0),O=Math.floor(h?_-t.pointerY:0);const z=L+(u?-P:P),F=M+(f?-O:O),V=-s[0]*L,U=-s[1]*M;let B=ly(z,E,I),G=ly(F,T,C);if(o){let ie=0,ne=0;u&&P<0?ie=El(j+P+V,o[0][0]):!u&&P>0&&(ie=Nl(j+z+V,o[1][0])),f&&O<0?ne=El(q+O+U,o[0][1]):!f&&O>0&&(ne=Nl(q+F+U,o[1][1])),B=Math.max(B,ie),G=Math.max(G,ne)}if(l){let ie=0,ne=0;u&&P>0?ie=Nl(j+P,l[0][0]):!u&&P<0&&(ie=El(j+z,l[1][0])),f&&O>0?ne=Nl(q+O,l[0][1]):!f&&O<0&&(ne=El(q+F,l[1][1])),B=Math.max(B,ie),G=Math.max(G,ne)}if(i){if(p){const ie=ly(z/W,T,C)*W;if(B=Math.max(B,ie),o){let ne=0;!u&&!f||u&&!f&&b?ne=Nl(q+U+z/W,o[1][1])*W:ne=El(q+U+(u?P:-P)/W,o[0][1])*W,B=Math.max(B,ne)}if(l){let ne=0;!u&&!f||u&&!f&&b?ne=El(q+z/W,l[1][1])*W:ne=Nl(q+(u?P:-P)/W,l[0][1])*W,B=Math.max(B,ne)}}if(h){const ie=ly(F*W,E,I)/W;if(G=Math.max(G,ie),o){let ne=0;!u&&!f||f&&!u&&b?ne=Nl(j+F*W+V,o[1][0])/W:ne=El(j+(f?O:-O)*W+V,o[0][0])/W,G=Math.max(G,ne)}if(l){let ne=0;!u&&!f||f&&!u&&b?ne=El(j+F*W,l[1][0])/W:ne=Nl(j+(f?O:-O)*W,l[0][0])/W,G=Math.max(G,ne)}}}O=O+(O<0?G:-G),P=P+(P<0?B:-B),i&&(b?z>F*W?O=(Pq(u,f)?-P:P)/W:P=(Pq(u,f)?-O:O)*W:p?(O=P/W,f=u):(P=O*W,u=f));const Z=u?j+P:j,le=f?q+O:q;return{width:L+(u?-P:P),height:M+(f?-O:O),x:s[0]*P*(u?-1:1)+Z,y:s[1]*O*(f?-1:1)+le}}const NL={width:0,height:0,x:0,y:0},Cne={...NL,pointerX:0,pointerY:0,aspectRatio:1};function Tne(t){return[[0,0],[t.measured.width,t.measured.height]]}function Rne(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,o=t.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function jne({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=Rs(t);function o({controlPosition:u,boundaries:f,keepAspectRatio:p,onResizeStart:h,onResize:b,onResizeEnd:x,shouldResize:_}){let E={...NL},I={...Cne};const T=Ine(u);let C,j=null,q=[],L,M,W;const P=D2().on("start",O=>{const{nodeLookup:z,transform:F,snapGrid:V,snapToGrid:U,nodeOrigin:B,paneDomNode:G}=n();if(C=z.get(e),!C)return;j=G?.getBoundingClientRect()??null;const{xSnapped:Z,ySnapped:le}=ah(O.sourceEvent,{transform:F,snapGrid:V,snapToGrid:U,containerBounds:j});E={width:C.measured.width??0,height:C.measured.height??0,x:C.position.x??0,y:C.position.y??0},I={...E,pointerX:Z,pointerY:le,aspectRatio:E.width/E.height},L=void 0,C.parentId&&(C.extent==="parent"||C.expandParent)&&(L=z.get(C.parentId),M=L&&C.extent==="parent"?Tne(L):void 0),q=[],W=void 0;for(const[ie,ne]of z)if(ne.parentId===e&&(q.push({id:ie,position:{...ne.position},extent:ne.extent}),ne.extent==="parent"||ne.expandParent)){const oe=Rne(ne,C,ne.origin??B);W?W=[[Math.min(oe[0][0],W[0][0]),Math.min(oe[0][1],W[0][1])],[Math.max(oe[1][0],W[1][0]),Math.max(oe[1][1],W[1][1])]]:W=oe}h?.(O,{...E})}).on("drag",O=>{const{transform:z,snapGrid:F,snapToGrid:V,nodeOrigin:U}=n(),B=ah(O.sourceEvent,{transform:z,snapGrid:F,snapToGrid:V,containerBounds:j}),G=[];if(!C)return;const{x:Z,y:le,width:ie,height:ne}=E,oe={},te=C.origin??U,{width:ue,height:de,x:ye,y:we}=kne(I,T,B,f,p,te,M,W),Ne=ue!==ie,ze=de!==ne,je=ye!==Z&&Ne,De=we!==le&&ze;if(!je&&!De&&!Ne&&!ze)return;if((je||De||te[0]===1||te[1]===1)&&(oe.x=je?ye:E.x,oe.y=De?we:E.y,E.x=oe.x,E.y=oe.y,q.length>0)){const ct=ye-Z,_t=we-le;for(const Tt of q)Tt.position={x:Tt.position.x-ct+te[0]*(ue-ie),y:Tt.position.y-_t+te[1]*(de-ne)},G.push(Tt)}if((Ne||ze)&&(oe.width=Ne?ue:E.width,oe.height=ze?de:E.height,E.width=oe.width,E.height=oe.height),L&&C.expandParent){const ct=te[0]*(oe.width??0);oe.x&&oe.x<ct&&(E.x=ct,I.x=I.x-(oe.x-ct));const _t=te[1]*(oe.height??0);oe.y&&oe.y<_t&&(E.y=_t,I.y=I.y-(oe.y-_t))}const Je=Nne({width:E.width,prevWidth:ie,height:E.height,prevHeight:ne,affectsX:T.affectsX,affectsY:T.affectsY}),Xe={...E,direction:Je};_?.(O,Xe)!==!1&&(b?.(O,Xe),r(oe,G))}).on("end",O=>{x?.(O,{...E}),i?.()});s.call(P)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const Fq=t=>{let e;const n=new Set,r=(p,h)=>{const b=typeof p=="function"?p(e):p;if(!Object.is(b,e)){const x=e;e=h??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(_=>_(e,x))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{n.clear()}},f=e=t(r,i,u);return u},One=t=>t?Fq(t):Fq,{useDebugValue:qne}=$n,{useSyncExternalStoreWithSelector:Ane}=HB,Pne=t=>t;function IL(t,e=Pne,n){const r=Ane(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return qne(r),r}const Dq=(t,e)=>{const n=One(t),r=(i,s=e)=>IL(n,i,s);return Object.assign(r,n),r},Fne=(t,e)=>t?Dq(t,e):Dq;function wr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const sx=H.createContext(null),Dne=sx.Provider,kL=Ga.error001();function Tn(t,e){const n=H.useContext(sx);if(n===null)throw new Error(kL);return IL(n,t,e)}function _r(){const t=H.useContext(sx);if(t===null)throw new Error(kL);return H.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Lq={display:"none"},Lne={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},CL="react-flow__node-desc",TL="react-flow__edge-desc",Mne="react-flow__aria-live",$ne=t=>t.ariaLiveMessage;function Bne({rfId:t}){const e=Tn($ne);return d.jsx("div",{id:`${Mne}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Lne,children:e})}function zne({rfId:t,disableKeyboardA11y:e}){return d.jsxs(d.Fragment,{children:[d.jsxs("div",{id:`${CL}-${t}`,style:Lq,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),d.jsx("div",{id:`${TL}-${t}`,style:Lq,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&d.jsx(Bne,{rfId:t})]})}const Wne=t=>t.userSelectionActive?"none":"all",M1=H.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const o=Tn(Wne),l=`${t}`.split("-");return d.jsx("div",{className:Kr(["react-flow__panel",n,...l]),style:{...r,pointerEvents:o},ref:s,...i,children:e})});function Vne({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:d.jsx(M1,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Une=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},cy=t=>t.id;function Hne(t,e){return wr(t.selectedNodes.map(cy),e.selectedNodes.map(cy))&&wr(t.selectedEdges.map(cy),e.selectedEdges.map(cy))}function Kne({onSelectionChange:t}){const e=_r(),{selectedNodes:n,selectedEdges:r}=Tn(Une,Hne);return H.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const Qne=t=>!!t.onSelectionChangeHandlers;function Gne({onSelectionChange:t}){const e=Tn(Qne);return t||e?d.jsx(Kne,{onSelectionChange:t}):null}const RL=[0,0],Jne={x:0,y:0,zoom:1},Zne=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Mq=[...Zne,"rfId"],Yne=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),$q={translateExtent:Wh,nodeOrigin:RL,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Xne(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:f}=Tn(Yne,wr),p=_r();H.useEffect(()=>(u(t.defaultNodes,t.defaultEdges),()=>{h.current=$q,l()}),[]);const h=H.useRef($q);return H.useEffect(()=>{for(const b of Mq){const x=t[b],_=h.current[b];x!==_&&(typeof t[b]>"u"||(b==="nodes"?e(x):b==="edges"?n(x):b==="minZoom"?r(x):b==="maxZoom"?i(x):b==="translateExtent"?s(x):b==="nodeExtent"?o(x):b==="paneClickDistance"?f(x):b==="fitView"?p.setState({fitViewOnInit:x}):b==="fitViewOptions"?p.setState({fitViewOnInitOptions:x}):p.setState({[b]:x})))}h.current=t},Mq.map(b=>t[b])),null}function Bq(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ere(t){const[e,n]=H.useState(t==="system"?null:t);return H.useEffect(()=>{if(t!=="system"){n(t);return}const r=Bq(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:Bq()?.matches?"dark":"light"}const zq=typeof document<"u"?document:null;function Qh(t=null,e={target:zq,actInsideInputWithModifier:!0}){const[n,r]=H.useState(!1),i=H.useRef(!1),s=H.useRef(new Set([])),[o,l]=H.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=f.reduce((h,b)=>h.concat(...b),[]);return[f,p]}return[[],[]]},[t]);return H.useEffect(()=>{const u=e?.target||zq;if(t!==null){const f=b=>{if(i.current=b.ctrlKey||b.metaKey||b.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&YE(b))return!1;const _=Vq(b.code,l);s.current.add(b[_]),Wq(o,s.current,!1)&&(b.preventDefault(),r(!0))},p=b=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&YE(b))return!1;const _=Vq(b.code,l);Wq(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(b[_]),b.key==="Meta"&&s.current.clear(),i.current=!1},h=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",f),u?.addEventListener("keyup",p),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{u?.removeEventListener("keydown",f),u?.removeEventListener("keyup",p),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[t,r]),n}function Wq(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function Vq(t,e){return e.includes(t)?"code":"key"}const tre=()=>{const t=_r();return H.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:o}=t.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},fitView:e=>{const{nodeLookup:n,minZoom:r,maxZoom:i,panZoom:s,domNode:o}=t.getState();if(!s||!o)return Promise.resolve(!1);const l=GE(n,e),{width:u,height:f}=rx(o);return JE({nodes:l,width:u,height:f,minZoom:r,maxZoom:i,panZoom:s},e)},setCenter:async(e,n,r)=>{const{width:i,height:s,maxZoom:o,panZoom:l}=t.getState(),u=typeof r?.zoom<"u"?r.zoom:o,f=i/2-e*u,p=s/2-n*u;return l?(await l.setViewport({x:f,y:p,zoom:u},{duration:r?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=t.getState(),u=q1(e,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={snapToGrid:!0})=>{const{transform:r,snapGrid:i,domNode:s}=t.getState();if(!s)return e;const{x:o,y:l}=s.getBoundingClientRect(),u={x:e.x-o,y:e.y-l};return Im(u,r,n.snapToGrid,i)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=lL(e,n);return{x:o.x+i,y:o.y+s}}}),[])};function jL(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)nre(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function nre(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&(e.width=t.dimensions.width,e.height=t.dimensions.height)),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function $1(t,e){return jL(t,e)}function OL(t,e){return jL(t,e)}function Pc(t,e){return{id:t,type:"select",selected:e}}function bd(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(Pc(s.id,o)))}return r}function Uq({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const o=e.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function Hq(t){return{id:t.id,type:"remove"}}const Kq=t=>$te(t),rre=t=>nL(t);function qL(t){return H.forwardRef(t)}const ire=typeof window<"u"?H.useLayoutEffect:H.useEffect;function Qq(t){const[e,n]=H.useState(BigInt(0)),[r]=H.useState(()=>sre(()=>n(i=>i+BigInt(1))));return ire(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function sre(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const AL=H.createContext(null);function ore({children:t}){const e=_r(),n=H.useCallback(l=>{const{nodes:u=[],setNodes:f,hasDefaultNodes:p,onNodesChange:h,nodeLookup:b}=e.getState();let x=u;for(const _ of l)x=typeof _=="function"?_(x):_;p?f(x):h&&h(Uq({items:x,lookup:b}))},[]),r=Qq(n),i=H.useCallback(l=>{const{edges:u=[],setEdges:f,hasDefaultEdges:p,onEdgesChange:h,edgeLookup:b}=e.getState();let x=u;for(const _ of l)x=typeof _=="function"?_(x):_;p?f(x):h&&h(Uq({items:x,lookup:b}))},[]),s=Qq(i),o=H.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return d.jsx(AL.Provider,{value:o,children:t})}function are(){const t=H.useContext(AL);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const lre=t=>!!t.panZoom;function wf(){const t=tre(),e=_r(),n=are(),r=Tn(lre),i=H.useMemo(()=>{const s=h=>e.getState().nodeLookup.get(h),o=h=>{n.nodeQueue.push(h)},l=h=>{n.edgeQueue.push(h)},u=h=>{const{nodeLookup:b,nodeOrigin:x}=e.getState(),_=Kq(h)?h:b.get(h.id),E=_.parentId?uL(_.position,_.measured,_.parentId,b,x):_.position,I={..._,position:E,width:_.measured?.width??_.width,height:_.measured?.height??_.height};return ef(I)},f=(h,b,x={replace:!1})=>{o(_=>_.map(E=>{if(E.id===h){const I=typeof b=="function"?b(E):b;return x.replace&&Kq(I)?I:{...E,...I}}return E}))},p=(h,b,x={replace:!1})=>{l(_=>_.map(E=>{if(E.id===h){const I=typeof b=="function"?b(E):b;return x.replace&&rre(I)?I:{...E,...I}}return E}))};return{getNodes:()=>e.getState().nodes.map(h=>({...h})),getNode:h=>s(h)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:h=[]}=e.getState();return h.map(b=>({...b}))},getEdge:h=>e.getState().edgeLookup.get(h),setNodes:o,setEdges:l,addNodes:h=>{const b=Array.isArray(h)?h:[h];n.nodeQueue.push(x=>[...x,...b])},addEdges:h=>{const b=Array.isArray(h)?h:[h];n.edgeQueue.push(x=>[...x,...b])},toObject:()=>{const{nodes:h=[],edges:b=[],transform:x}=e.getState(),[_,E,I]=x;return{nodes:h.map(T=>({...T})),edges:b.map(T=>({...T})),viewport:{x:_,y:E,zoom:I}}},deleteElements:async({nodes:h=[],edges:b=[]})=>{const{nodes:x,edges:_,onNodesDelete:E,onEdgesDelete:I,triggerNodeChanges:T,triggerEdgeChanges:C,onDelete:j,onBeforeDelete:q}=e.getState(),{nodes:L,edges:M}=await Wte({nodesToRemove:h,edgesToRemove:b,nodes:x,edges:_,onBeforeDelete:q}),W=M.length>0,P=L.length>0;if(W){const O=M.map(Hq);I?.(M),C(O)}if(P){const O=L.map(Hq);E?.(L),T(O)}return(P||W)&&j?.({nodes:L,edges:M}),{deletedNodes:L,deletedEdges:M}},getIntersectingNodes:(h,b=!0,x)=>{const _=Eq(h),E=_?h:u(h),I=x!==void 0;return E?(x||e.getState().nodes).filter(T=>{const C=e.getState().nodeLookup.get(T.id);if(C&&!_&&(T.id===h.id||!C.internals.positionAbsolute))return!1;const j=ef(I?T:C),q=Hh(j,E);return b&&q>0||q>=E.width*E.height}):[]},isNodeIntersecting:(h,b,x=!0)=>{const E=Eq(h)?h:u(h);if(!E)return!1;const I=Hh(E,b);return x&&I>0||I>=E.width*E.height},updateNode:f,updateNodeData:(h,b,x={replace:!1})=>{f(h,_=>{const E=typeof b=="function"?b(_):b;return x.replace?{..._,data:E}:{..._,data:{..._.data,...E}}},x)},updateEdge:p,updateEdgeData:(h,b,x={replace:!1})=>{p(h,_=>{const E=typeof b=="function"?b(_):b;return x.replace?{..._,data:E}:{..._,data:{..._.data,...E}}},x)},getNodesBounds:h=>{const{nodeLookup:b,nodeOrigin:x}=e.getState();return Bte(h,{nodeLookup:b,nodeOrigin:x})},getHandleConnections:({type:h,id:b,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}-${h}${b?`-${b}`:""}`)?.values()??[]),getNodeConnections:({type:h,handleId:b,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}${h?b?`-${h}-${b}`:`-${h}`:""}`)?.values()??[])}},[]);return H.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const Gq=t=>t.selected,cre={actInsideInputWithModifier:!1},ure=typeof window<"u"?window:void 0;function dre({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=_r(),{deleteElements:r}=wf(),i=Qh(t,cre),s=Qh(e,{target:ure});H.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(Gq),edges:o.filter(Gq)}),n.setState({nodesSelectionActive:!1})}},[i]),H.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function fre(t){const e=_r();H.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=rx(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Ga.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const ox={position:"absolute",width:"100%",height:"100%",top:0,left:0},pre=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function hre({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Zc.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:f,minZoom:p,maxZoom:h,zoomActivationKeyCode:b,preventScrolling:x=!0,children:_,noWheelClassName:E,noPanClassName:I,onViewportChange:T,isControlledViewport:C,paneClickDistance:j}){const q=_r(),L=H.useRef(null),{userSelectionActive:M,lib:W}=Tn(pre,wr),P=Qh(b),O=H.useRef();fre(L);const z=H.useCallback(F=>{T?.({x:F[0],y:F[1],zoom:F[2]}),C||q.setState({transform:F})},[T,C]);return H.useEffect(()=>{if(L.current){O.current=Ene({domNode:L.current,minZoom:p,maxZoom:h,translateExtent:f,viewport:u,paneClickDistance:j,onDraggingChange:B=>q.setState({paneDragging:B}),onPanZoomStart:(B,G)=>{const{onViewportChangeStart:Z,onMoveStart:le}=q.getState();le?.(B,G),Z?.(G)},onPanZoom:(B,G)=>{const{onViewportChange:Z,onMove:le}=q.getState();le?.(B,G),Z?.(G)},onPanZoomEnd:(B,G)=>{const{onViewportChangeEnd:Z,onMoveEnd:le}=q.getState();le?.(B,G),Z?.(G)}});const{x:F,y:V,zoom:U}=O.current.getViewport();return q.setState({panZoom:O.current,transform:[F,V,U],domNode:L.current.closest(".react-flow")}),()=>{O.current?.destroy()}}},[]),H.useEffect(()=>{O.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:P,preventScrolling:x,noPanClassName:I,userSelectionActive:M,noWheelClassName:E,lib:W,onTransformChange:z})},[t,e,n,r,i,s,o,l,P,x,I,M,E,W,z]),d.jsx("div",{className:"react-flow__renderer",ref:L,style:ox,children:_})}const mre=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function gre(){const{userSelectionActive:t,userSelectionRect:e}=Tn(mre,wr);return t&&e?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const RS=(t,e)=>n=>{n.target===e.current&&t?.(n)},yre=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging});function bre({isSelecting:t,selectionKeyPressed:e,selectionMode:n=Vh.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:f,onPaneMouseEnter:p,onPaneMouseMove:h,onPaneMouseLeave:b,children:x}){const _=_r(),{userSelectionActive:E,elementsSelectable:I,dragging:T}=Tn(yre,wr),C=I&&(t||E),j=H.useRef(null),q=H.useRef(),L=H.useRef(new Set),M=H.useRef(new Set),W=H.useRef(!1),P=H.useRef(!1),O=Z=>{if(W.current){W.current=!1;return}l?.(Z),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},z=Z=>{if(Array.isArray(r)&&r?.includes(2)){Z.preventDefault();return}u?.(Z)},F=f?Z=>f(Z):void 0,V=Z=>{const{resetSelectedElements:le,domNode:ie}=_.getState();if(q.current=ie?.getBoundingClientRect(),!I||!t||Z.button!==0||Z.target!==j.current||!q.current)return;Z.target?.setPointerCapture?.(Z.pointerId),P.current=!0,W.current=!1;const{x:ne,y:oe}=$a(Z.nativeEvent,q.current);le(),_.setState({userSelectionRect:{width:0,height:0,startX:ne,startY:oe,x:ne,y:oe}}),s?.(Z)},U=Z=>{const{userSelectionRect:le,transform:ie,nodeLookup:ne,edgeLookup:oe,connectionLookup:te,triggerNodeChanges:ue,triggerEdgeChanges:de,defaultEdgeOptions:ye}=_.getState();if(!q.current||!le)return;W.current=!0;const{x:we,y:Ne}=$a(Z.nativeEvent,q.current),{startX:ze,startY:je}=le,De={startX:ze,startY:je,x:we<ze?we:ze,y:Ne<je?Ne:je,width:Math.abs(we-ze),height:Math.abs(Ne-je)},Je=L.current,Xe=M.current;L.current=new Set(rL(ne,De,ie,n===Vh.Partial,!0).map(ct=>ct.id)),M.current=new Set;const Ve=ye?.selectable??!0;for(const ct of L.current){const _t=te.get(ct);if(_t)for(const{edgeId:Tt}of _t.values()){const Ut=oe.get(Tt);Ut&&(Ut.selectable??Ve)&&M.current.add(Tt)}}if(!Nq(Je,L.current)){const ct=bd(ne,L.current,!0);ue(ct)}if(!Nq(Xe,M.current)){const ct=bd(oe,M.current);de(ct)}_.setState({userSelectionRect:De,userSelectionActive:!0,nodesSelectionActive:!1})},B=Z=>{if(Z.button!==0||!P.current)return;Z.target?.releasePointerCapture?.(Z.pointerId);const{userSelectionRect:le}=_.getState();!E&&le&&Z.target===j.current&&O?.(Z),_.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:L.current.size>0}),o?.(Z),(e||i)&&(W.current=!1),P.current=!1},G=r===!0||Array.isArray(r)&&r.includes(0);return d.jsxs("div",{className:Kr(["react-flow__pane",{draggable:G,dragging:T,selection:t}]),onClick:C?void 0:RS(O,j),onContextMenu:RS(z,j),onWheel:RS(F,j),onPointerEnter:C?void 0:p,onPointerDown:C?V:h,onPointerMove:C?U:h,onPointerUp:C?B:void 0,onPointerLeave:b,ref:j,style:ox,children:[x,d.jsx(gre,{})]})}function rN({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=e.getState(),f=l.get(t);if(!f){u?.("012",Ga.error012(t));return}e.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&o)&&(s({nodes:[f],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function PL({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=_r(),[u,f]=H.useState(!1),p=H.useRef();return H.useEffect(()=>{p.current=une({getStoreItems:()=>l.getState(),onNodeMouseDown:h=>{rN({id:h,store:l,nodeRef:t})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),H.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{p.current?.destroy()}},[n,r,e,s,t,i]),u}const vre=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function FL(){const t=_r();return H.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:f,nodeOrigin:p}=t.getState(),h=new Map,b=vre(o),x=i?s[0]:5,_=i?s[1]:5,E=n.direction.x*x*n.factor,I=n.direction.y*_*n.factor;for(const[,T]of f){if(!b(T))continue;let C={x:T.internals.positionAbsolute.x+E,y:T.internals.positionAbsolute.y+I};i&&(C=nx(C,s));const{position:j,positionAbsolute:q}=iL({nodeId:T.id,nextPosition:C,nodeLookup:f,nodeExtent:r,nodeOrigin:p,onError:l});T.position=j,T.internals.positionAbsolute=q,h.set(T.id,T)}u(h)},[])}const B1=H.createContext(null),xre=B1.Provider;B1.Consumer;const z1=()=>H.useContext(B1),wre=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),_re=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:f}=o,p=u?.nodeId===t&&u?.id===e&&u?.type===n;return{connectingFrom:l?.nodeId===t&&l?.id===e&&l?.type===n,connectingTo:p,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:s===Yd.Strict?l?.type!==n:t!==l?.nodeId||e!==l?.id,connectionInProcess:!!l,valid:p&&f}};function Sre({type:t="source",position:e=Ot.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:f,onMouseDown:p,onTouchStart:h,...b},x){const _=o||null,E=t==="target",I=_r(),T=z1(),{connectOnClick:C,noPanClassName:j,rfId:q}=Tn(wre,wr),{connectingFrom:L,connectingTo:M,clickConnecting:W,isPossibleEndHandle:P,connectionInProcess:O,valid:z}=Tn(_re(T,_,t),wr);T||I.getState().onError?.("010",Ga.error010());const F=B=>{const{defaultEdgeOptions:G,onConnect:Z,hasDefaultEdges:le}=I.getState(),ie={...G,...B};if(le){const{edges:ne,setEdges:oe}=I.getState();oe(Jte(ie,ne))}Z?.(ie),l?.(ie)},V=B=>{if(!T)return;const G=fL(B.nativeEvent);if(i&&(G&&B.button===0||!G)){const Z=I.getState();nN.onPointerDown(B.nativeEvent,{autoPanOnConnect:Z.autoPanOnConnect,connectionMode:Z.connectionMode,connectionRadius:Z.connectionRadius,domNode:Z.domNode,nodeLookup:Z.nodeLookup,lib:Z.lib,isTarget:E,handleId:_,nodeId:T,flowId:Z.rfId,panBy:Z.panBy,cancelConnection:Z.cancelConnection,onConnectStart:Z.onConnectStart,onConnectEnd:Z.onConnectEnd,updateConnection:Z.updateConnection,onConnect:F,isValidConnection:n||Z.isValidConnection,getTransform:()=>I.getState().transform,getFromHandle:()=>I.getState().connection.fromHandle,autoPanSpeed:Z.autoPanSpeed})}G?p?.(B):h?.(B)},U=B=>{const{onClickConnectStart:G,onClickConnectEnd:Z,connectionClickStartHandle:le,connectionMode:ie,isValidConnection:ne,lib:oe,rfId:te,nodeLookup:ue,connection:de}=I.getState();if(!T||!le&&!i)return;if(!le){G?.(B.nativeEvent,{nodeId:T,handleId:_,handleType:t}),I.setState({connectionClickStartHandle:{nodeId:T,type:t,id:_}});return}const ye=dL(B.target),we=n||ne,{connection:Ne,isValid:ze}=nN.isValid(B.nativeEvent,{handle:{nodeId:T,id:_,type:t},connectionMode:ie,fromNodeId:le.nodeId,fromHandleId:le.id||null,fromType:le.type,isValidConnection:we,flowId:te,doc:ye,lib:oe,nodeLookup:ue});ze&&Ne&&F(Ne);const je=structuredClone(de);delete je.inProgress,je.toPosition=je.toHandle?je.toHandle.position:null,Z?.(B,je),I.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":_,"data-nodeid":T,"data-handlepos":e,"data-id":`${q}-${T}-${_}-${t}`,className:Kr(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",j,f,{source:!E,target:E,connectable:r,connectablestart:i,connectableend:s,clickconnecting:W,connectingfrom:L,connectingto:M,valid:z,connectionindicator:r&&(!O||P)&&(O?s:i)}]),onMouseDown:V,onTouchStart:V,onClick:C?U:void 0,ref:x,...b,children:u})}const co=H.memo(qL(Sre));function Ere({data:t,isConnectable:e,sourcePosition:n=Ot.Bottom}){return d.jsxs(d.Fragment,{children:[t?.label,d.jsx(co,{type:"source",position:n,isConnectable:e})]})}function Nre({data:t,isConnectable:e,targetPosition:n=Ot.Top,sourcePosition:r=Ot.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx(co,{type:"target",position:n,isConnectable:e}),t?.label,d.jsx(co,{type:"source",position:r,isConnectable:e})]})}function Ire(){return null}function kre({data:t,isConnectable:e,targetPosition:n=Ot.Top}){return d.jsxs(d.Fragment,{children:[d.jsx(co,{type:"target",position:n,isConnectable:e}),t?.label]})}const ov={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Jq={input:Ere,default:Nre,output:kre,group:Ire};function Cre(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const Tre=t=>{const{width:e,height:n,x:r,y:i}=xf(t.nodeLookup,{filter:s=>!!s.selected});return{width:Oo(e)?e:null,height:Oo(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function Rre({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=_r(),{width:i,height:s,transformString:o,userSelectionActive:l}=Tn(Tre,wr),u=FL(),f=H.useRef(null);if(H.useEffect(()=>{n||f.current?.focus({preventScroll:!0})},[n]),PL({nodeRef:f}),l||!i||!s)return null;const p=t?b=>{const x=r.getState().nodes.filter(_=>_.selected);t(b,x)}:void 0,h=b=>{Object.prototype.hasOwnProperty.call(ov,b.key)&&(b.preventDefault(),u({direction:ov[b.key],factor:b.shiftKey?4:1}))};return d.jsx("div",{className:Kr(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:d.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s}})})}const Zq=typeof window<"u"?window:void 0,jre=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function DL({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:f,selectionOnDrag:p,selectionMode:h,onSelectionStart:b,onSelectionEnd:x,multiSelectionKeyCode:_,panActivationKeyCode:E,zoomActivationKeyCode:I,elementsSelectable:T,zoomOnScroll:C,zoomOnPinch:j,panOnScroll:q,panOnScrollSpeed:L,panOnScrollMode:M,zoomOnDoubleClick:W,panOnDrag:P,defaultViewport:O,translateExtent:z,minZoom:F,maxZoom:V,preventScrolling:U,onSelectionContextMenu:B,noWheelClassName:G,noPanClassName:Z,disableKeyboardA11y:le,onViewportChange:ie,isControlledViewport:ne}){const{nodesSelectionActive:oe,userSelectionActive:te}=Tn(jre),ue=Qh(f,{target:Zq}),de=Qh(E,{target:Zq}),ye=de||P,we=de||q,Ne=p&&ye!==!0,ze=ue||te||Ne;return dre({deleteKeyCode:u,multiSelectionKeyCode:_}),d.jsx(hre,{onPaneContextMenu:s,elementsSelectable:T,zoomOnScroll:C,zoomOnPinch:j,panOnScroll:we,panOnScrollSpeed:L,panOnScrollMode:M,zoomOnDoubleClick:W,panOnDrag:!ue&&ye,defaultViewport:O,translateExtent:z,minZoom:F,maxZoom:V,zoomActivationKeyCode:I,preventScrolling:U,noWheelClassName:G,noPanClassName:Z,onViewportChange:ie,isControlledViewport:ne,paneClickDistance:l,children:d.jsxs(bre,{onSelectionStart:b,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ye,isSelecting:!!ze,selectionMode:h,selectionKeyPressed:ue,selectionOnDrag:Ne,children:[t,oe&&d.jsx(Rre,{onSelectionContextMenu:B,noPanClassName:Z,disableKeyboardA11y:le})]})})}DL.displayName="FlowRenderer";const Ore=H.memo(DL),qre=t=>e=>t?rL(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function Are(t){return Tn(H.useCallback(qre(t),[t]),wr)}const Pre=t=>t.updateNodeInternals;function Fre(){const t=Tn(Pre),[e]=H.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return H.useEffect(()=>()=>{e?.disconnect()},[e]),e}function Dre({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=_r(),s=H.useRef(null),o=H.useRef(null),l=H.useRef(t.sourcePosition),u=H.useRef(t.targetPosition),f=H.useRef(e),p=n&&!!t.internals.handleBounds;return H.useEffect(()=>{s.current&&!t.hidden&&(!p||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[p,t.hidden]),H.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),H.useEffect(()=>{if(s.current){const h=f.current!==e,b=l.current!==t.sourcePosition,x=u.current!==t.targetPosition;(h||b||x)&&(f.current=e,l.current=t.sourcePosition,u.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function Lre({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:f,nodesFocusable:p,resizeObserver:h,noDragClassName:b,noPanClassName:x,disableKeyboardA11y:_,rfId:E,nodeTypes:I,nodeExtent:T,nodeClickDistance:C,onError:j}){const{node:q,internals:L,isParent:M}=Tn(je=>{const De=je.nodeLookup.get(t),Je=je.parentLookup.has(t);return{node:De,internals:De.internals,isParent:Je}},wr);let W=q.type||"default",P=I?.[W]||Jq[W];P===void 0&&(j?.("003",Ga.error003(W)),W="default",P=Jq.default);const O=!!(q.draggable||l&&typeof q.draggable>"u"),z=!!(q.selectable||u&&typeof q.selectable>"u"),F=!!(q.connectable||f&&typeof q.connectable>"u"),V=!!(q.focusable||p&&typeof q.focusable>"u"),U=_r(),B=cL(q),G=Dre({node:q,nodeType:W,hasDimensions:B,resizeObserver:h}),Z=PL({nodeRef:G,disabled:q.hidden||!O,noDragClassName:b,handleSelector:q.dragHandle,nodeId:t,isSelectable:z,nodeClickDistance:C}),le=FL();if(q.hidden)return null;const ie=Ja(q),ne=Cre(q),oe=z||O||e||n||r||i,te=n?je=>n(je,{...L.userNode}):void 0,ue=r?je=>r(je,{...L.userNode}):void 0,de=i?je=>i(je,{...L.userNode}):void 0,ye=s?je=>s(je,{...L.userNode}):void 0,we=o?je=>o(je,{...L.userNode}):void 0,Ne=je=>{const{selectNodesOnDrag:De,nodeDragThreshold:Je}=U.getState();z&&(!De||!O||Je>0)&&rN({id:t,store:U,nodeRef:G}),e&&e(je,{...L.userNode})},ze=je=>{if(!(YE(je.nativeEvent)||_))if(X2.includes(je.key)&&z){const De=je.key==="Escape";rN({id:t,store:U,unselect:De,nodeRef:G})}else O&&q.selected&&Object.prototype.hasOwnProperty.call(ov,je.key)&&(je.preventDefault(),U.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~L.positionAbsolute.x}, y: ${~~L.positionAbsolute.y}`}),le({direction:ov[je.key],factor:je.shiftKey?4:1}))};return d.jsx("div",{className:Kr(["react-flow__node",`react-flow__node-${W}`,{[x]:O},q.className,{selected:q.selected,selectable:z,parent:M,draggable:O,dragging:Z}]),ref:G,style:{zIndex:L.z,transform:`translate(${L.positionAbsolute.x}px,${L.positionAbsolute.y}px)`,pointerEvents:oe?"all":"none",visibility:B?"visible":"hidden",...q.style,...ne},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:te,onMouseMove:ue,onMouseLeave:de,onContextMenu:ye,onClick:Ne,onDoubleClick:we,onKeyDown:V?ze:void 0,tabIndex:V?0:void 0,role:V?"button":void 0,"aria-describedby":_?void 0:`${CL}-${E}`,"aria-label":q.ariaLabel,children:d.jsx(xre,{value:t,children:d.jsx(P,{id:t,data:q.data,type:W,positionAbsoluteX:L.positionAbsolute.x,positionAbsoluteY:L.positionAbsolute.y,selected:q.selected??!1,selectable:z,draggable:O,deletable:q.deletable??!0,isConnectable:F,sourcePosition:q.sourcePosition,targetPosition:q.targetPosition,dragging:Z,dragHandle:q.dragHandle,zIndex:L.z,parentId:q.parentId,...ie})})})}const Mre=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function LL(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Tn(Mre,wr),o=Are(t.onlyRenderVisibleElements),l=Fre();return d.jsx("div",{className:"react-flow__nodes",style:ox,children:o.map(u=>d.jsx(Lre,{id:u,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:l,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},u))})}LL.displayName="NodeRenderer";const $re=H.memo(LL);function Bre(t){return Tn(H.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&Kte({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),wr)}const zre=({color:t="none",strokeWidth:e=1})=>d.jsx("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Wre=({color:t="none",strokeWidth:e=1})=>d.jsx("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Yq={[Uh.Arrow]:zre,[Uh.ArrowClosed]:Wre};function Vre(t){const e=_r();return H.useMemo(()=>Object.prototype.hasOwnProperty.call(Yq,t)?Yq[t]:(e.getState().onError?.("009",Ga.error009(t)),null),[t])}const Ure=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=Vre(e);return u?d.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:d.jsx(u,{color:n,strokeWidth:o})}):null},ML=({defaultColor:t,rfId:e})=>{const n=Tn(s=>s.edges),r=Tn(s=>s.defaultEdgeOptions),i=H.useMemo(()=>tne(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?d.jsx("svg",{className:"react-flow__marker",children:d.jsx("defs",{children:i.map(s=>d.jsx(Ure,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};ML.displayName="MarkerDefinitions";var Hre=H.memo(ML);function $L({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:f,...p}){const[h,b]=H.useState({x:1,y:0,width:0,height:0}),x=Kr(["react-flow__edge-textwrapper",f]),_=H.useRef(null);return H.useEffect(()=>{if(_.current){const E=_.current.getBBox();b({x:E.x,y:E.y,width:E.width,height:E.height})}},[n]),typeof n>"u"||!n?null:d.jsxs("g",{transform:`translate(${t-h.width/2} ${e-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...p,children:[i&&d.jsx("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),d.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:_,style:r,children:n}),u]})}$L.displayName="EdgeText";const Kre=H.memo($L);function km({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:f=20,...p}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...p,d:t,fill:"none",className:Kr(["react-flow__edge-path",p.className])}),f&&d.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),r&&Oo(e)&&Oo(n)?d.jsx(Kre,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function Xq({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Ot.Left||t===Ot.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function ax({sourceX:t,sourceY:e,sourcePosition:n=Ot.Bottom,targetX:r,targetY:i,targetPosition:s=Ot.Top}){const[o,l]=Xq({pos:n,x1:t,y1:e,x2:r,y2:i}),[u,f]=Xq({pos:s,x1:r,y1:i,x2:t,y2:e}),[p,h,b,x]=pL({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:f});return[`M${t},${e} C${o},${l} ${u},${f} ${r},${i}`,p,h,b,x]}function BL(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Ot.Bottom,targetPosition:l=Ot.Top,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:I,interactionWidth:T})=>{const[C,j,q]=ax({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),L=t.isInternal?void 0:e;return d.jsx(km,{id:L,path:C,labelX:j,labelY:q,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:I,interactionWidth:T})})}const Qre=BL({isInternal:!1}),zL=BL({isInternal:!0});Qre.displayName="SimpleBezierEdge";zL.displayName="SimpleBezierEdgeInternal";function WL(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,sourcePosition:x=Ot.Bottom,targetPosition:_=Ot.Top,markerEnd:E,markerStart:I,pathOptions:T,interactionWidth:C})=>{const[j,q,L]=XE({sourceX:n,sourceY:r,sourcePosition:x,targetX:i,targetY:s,targetPosition:_,borderRadius:T?.borderRadius,offset:T?.offset}),M=t.isInternal?void 0:e;return d.jsx(km,{id:M,path:j,labelX:q,labelY:L,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:E,markerStart:I,interactionWidth:C})})}const VL=WL({isInternal:!1}),UL=WL({isInternal:!0});VL.displayName="SmoothStepEdge";UL.displayName="SmoothStepEdgeInternal";function HL(t){return H.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return d.jsx(VL,{...n,id:r,pathOptions:H.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Gre=HL({isInternal:!1}),KL=HL({isInternal:!0});Gre.displayName="StepEdge";KL.displayName="StepEdgeInternal";function QL(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:x,markerStart:_,interactionWidth:E})=>{const[I,T,C]=mL({sourceX:n,sourceY:r,targetX:i,targetY:s}),j=t.isInternal?void 0:e;return d.jsx(km,{id:j,path:I,labelX:T,labelY:C,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:x,markerStart:_,interactionWidth:E})})}const Jre=QL({isInternal:!1}),GL=QL({isInternal:!0});Jre.displayName="StraightEdge";GL.displayName="StraightEdgeInternal";function JL(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Ot.Bottom,targetPosition:l=Ot.Top,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:I,pathOptions:T,interactionWidth:C})=>{const[j,q,L]=A1({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:T?.curvature}),M=t.isInternal?void 0:e;return d.jsx(km,{id:M,path:j,labelX:q,labelY:L,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:I,interactionWidth:C})})}const Zre=JL({isInternal:!1}),ZL=JL({isInternal:!0});Zre.displayName="BezierEdge";ZL.displayName="BezierEdgeInternal";const e3={default:ZL,straight:GL,step:KL,smoothstep:UL,simplebezier:zL},t3={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Yre=(t,e,n)=>n===Ot.Left?t-e:n===Ot.Right?t+e:t,Xre=(t,e,n)=>n===Ot.Top?t-e:n===Ot.Bottom?t+e:t,n3="react-flow__edgeupdater";function r3({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return d.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Kr([n3,`${n3}-${l}`]),cx:Yre(e,r,t),cy:Xre(n,r,t),r,stroke:"transparent",fill:"transparent"})}function eie({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:f,onReconnectStart:p,onReconnectEnd:h,setReconnecting:b,setUpdateHover:x}){const _=_r(),E=(q,L)=>{if(q.button!==0)return;const{autoPanOnConnect:M,domNode:W,isValidConnection:P,connectionMode:O,connectionRadius:z,lib:F,onConnectStart:V,onConnectEnd:U,cancelConnection:B,nodeLookup:G,rfId:Z,panBy:le,updateConnection:ie}=_.getState(),ne=L.type==="target";b(!0),p?.(q,n,L.type);const oe=(ue,de)=>{b(!1),h?.(ue,n,L.type,de)},te=ue=>f?.(n,ue);nN.onPointerDown(q.nativeEvent,{autoPanOnConnect:M,connectionMode:O,connectionRadius:z,domNode:W,handleId:L.id,nodeId:L.nodeId,nodeLookup:G,isTarget:ne,edgeUpdaterType:L.type,lib:F,flowId:Z,cancelConnection:B,panBy:le,isValidConnection:P,onConnect:te,onConnectStart:V,onConnectEnd:U,onReconnectEnd:oe,updateConnection:ie,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle})},I=q=>E(q,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),T=q=>E(q,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),C=()=>x(!0),j=()=>x(!1);return d.jsxs(d.Fragment,{children:[(t===!0||t==="source")&&d.jsx(r3,{position:l,centerX:r,centerY:i,radius:e,onMouseDown:I,onMouseEnter:C,onMouseOut:j,type:"source"}),(t===!0||t==="target")&&d.jsx(r3,{position:u,centerX:s,centerY:o,radius:e,onMouseDown:T,onMouseEnter:C,onMouseOut:j,type:"target"})]})}function tie({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:f,reconnectRadius:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,rfId:_,edgeTypes:E,noPanClassName:I,onError:T,disableKeyboardA11y:C}){let j=Tn(Ve=>Ve.edgeLookup.get(t));const q=Tn(Ve=>Ve.defaultEdgeOptions);j=q?{...q,...j}:j;let L=j.type||"default",M=E?.[L]||e3[L];M===void 0&&(T?.("011",Ga.error011(L)),L="default",M=e3.default);const W=!!(j.focusable||e&&typeof j.focusable>"u"),P=typeof h<"u"&&(j.reconnectable||n&&typeof j.reconnectable>"u"),O=!!(j.selectable||r&&typeof j.selectable>"u"),z=H.useRef(null),[F,V]=H.useState(!1),[U,B]=H.useState(!1),G=_r(),{zIndex:Z,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ue}=Tn(H.useCallback(Ve=>{const ct=Ve.nodeLookup.get(j.source),_t=Ve.nodeLookup.get(j.target);if(!ct||!_t)return{zIndex:j.zIndex,...t3};const Tt=ene({id:t,sourceNode:ct,targetNode:_t,sourceHandle:j.sourceHandle||null,targetHandle:j.targetHandle||null,connectionMode:Ve.connectionMode,onError:T});return{zIndex:Hte({selected:j.selected,zIndex:j.zIndex,sourceNode:ct,targetNode:_t,elevateOnSelect:Ve.elevateEdgesOnSelect}),...Tt||t3}},[j.source,j.target,j.sourceHandle,j.targetHandle,j.selected,j.zIndex]),wr),de=H.useMemo(()=>j.markerStart?`url('#${eN(j.markerStart,_)}')`:void 0,[j.markerStart,_]),ye=H.useMemo(()=>j.markerEnd?`url('#${eN(j.markerEnd,_)}')`:void 0,[j.markerEnd,_]);if(j.hidden||le===null||ie===null||ne===null||oe===null)return null;const we=Ve=>{const{addSelectedEdges:ct,unselectNodesAndEdges:_t,multiSelectionActive:Tt}=G.getState();O&&(G.setState({nodesSelectionActive:!1}),j.selected&&Tt?(_t({nodes:[],edges:[j]}),z.current?.blur()):ct([t])),i&&i(Ve,j)},Ne=s?Ve=>{s(Ve,{...j})}:void 0,ze=o?Ve=>{o(Ve,{...j})}:void 0,je=l?Ve=>{l(Ve,{...j})}:void 0,De=u?Ve=>{u(Ve,{...j})}:void 0,Je=f?Ve=>{f(Ve,{...j})}:void 0,Xe=Ve=>{if(!C&&X2.includes(Ve.key)&&O){const{unselectNodesAndEdges:ct,addSelectedEdges:_t}=G.getState();Ve.key==="Escape"?(z.current?.blur(),ct({edges:[j]})):_t([t])}};return d.jsx("svg",{style:{zIndex:Z},children:d.jsxs("g",{className:Kr(["react-flow__edge",`react-flow__edge-${L}`,j.className,I,{selected:j.selected,animated:j.animated,inactive:!O&&!i,updating:F,selectable:O}]),onClick:we,onDoubleClick:Ne,onContextMenu:ze,onMouseEnter:je,onMouseMove:De,onMouseLeave:Je,onKeyDown:W?Xe:void 0,tabIndex:W?0:void 0,role:W?"button":"img","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":j.ariaLabel===null?void 0:j.ariaLabel||`Edge from ${j.source} to ${j.target}`,"aria-describedby":W?`${TL}-${_}`:void 0,ref:z,children:[!U&&d.jsx(M,{id:t,source:j.source,target:j.target,type:j.type,selected:j.selected,animated:j.animated,selectable:O,deletable:j.deletable??!0,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ue,data:j.data,style:j.style,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerStart:de,markerEnd:ye,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth}),P&&d.jsx(eie,{edge:j,isReconnectable:P,reconnectRadius:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ue,setUpdateHover:V,setReconnecting:B})]})})}const nie=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function YL({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:f,onEdgeClick:p,reconnectRadius:h,onEdgeDoubleClick:b,onReconnectStart:x,onReconnectEnd:_,disableKeyboardA11y:E}){const{edgesFocusable:I,edgesReconnectable:T,elementsSelectable:C,onError:j}=Tn(nie,wr),q=Bre(e);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx(Hre,{defaultColor:t,rfId:n}),q.map(L=>d.jsx(tie,{id:L,edgesFocusable:I,edgesReconnectable:T,elementsSelectable:C,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:f,onClick:p,reconnectRadius:h,onDoubleClick:b,onReconnectStart:x,onReconnectEnd:_,rfId:n,onError:j,edgeTypes:r,disableKeyboardA11y:E},L))]})}YL.displayName="EdgeRenderer";const rie=H.memo(YL),iie=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function sie({children:t}){const e=Tn(iie);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function oie(t){const e=wf(),n=H.useRef(!1);H.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const aie=t=>t.panZoom?.syncViewport;function lie(t){const e=Tn(aie),n=_r();return H.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function cie(t){return t.connection.inProgress?{...t.connection,to:Im(t.connection.to,t.transform)}:{...t.connection}}function uie(t){return cie}function XL(t){const e=uie();return Tn(e,wr)}const die=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function fie({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=Tn(die,wr);return!(s&&i&&u)?null:d.jsx("svg",{style:t,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:Kr(["react-flow__connection",tL(l)]),children:d.jsx(eM,{style:e,type:n,CustomComponent:r,isValid:l})})})}const eM=({style:t,type:e=Fl.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:f,toNode:p,toHandle:h,toPosition:b}=XL();if(!i)return;if(n)return d.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:f.x,toY:f.y,fromPosition:u,toPosition:b,connectionStatus:tL(r),toNode:p,toHandle:h});let x="";const _={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:f.x,targetY:f.y,targetPosition:b};switch(e){case Fl.Bezier:[x]=A1(_);break;case Fl.SimpleBezier:[x]=ax(_);break;case Fl.Step:[x]=XE({..._,borderRadius:0});break;case Fl.SmoothStep:[x]=XE(_);break;default:[x]=mL(_)}return d.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};eM.displayName="ConnectionLine";const pie={};function i3(t=pie){H.useRef(t),_r(),H.useEffect(()=>{},[t])}function hie(){_r(),H.useRef(!1),H.useEffect(()=>{},[])}function tM({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:b,onSelectionEnd:x,connectionLineType:_,connectionLineStyle:E,connectionLineComponent:I,connectionLineContainerStyle:T,selectionKeyCode:C,selectionOnDrag:j,selectionMode:q,multiSelectionKeyCode:L,panActivationKeyCode:M,zoomActivationKeyCode:W,deleteKeyCode:P,onlyRenderVisibleElements:O,elementsSelectable:z,defaultViewport:F,translateExtent:V,minZoom:U,maxZoom:B,preventScrolling:G,defaultMarkerColor:Z,zoomOnScroll:le,zoomOnPinch:ie,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:te,zoomOnDoubleClick:ue,panOnDrag:de,onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ne,onPaneMouseLeave:ze,onPaneScroll:je,onPaneContextMenu:De,paneClickDistance:Je,nodeClickDistance:Xe,onEdgeContextMenu:Ve,onEdgeMouseEnter:ct,onEdgeMouseMove:_t,onEdgeMouseLeave:Tt,reconnectRadius:Ut,onReconnect:sn,onReconnectStart:xe,onReconnectEnd:be,noDragClassName:Ie,noWheelClassName:Ae,noPanClassName:Ue,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ut,viewport:Qt,onViewportChange:Gt}){return i3(t),i3(e),hie(),oie(n),lie(Qt),d.jsx(Ore,{onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ne,onPaneMouseLeave:ze,onPaneContextMenu:De,onPaneScroll:je,paneClickDistance:Je,deleteKeyCode:P,selectionKeyCode:C,selectionOnDrag:j,selectionMode:q,onSelectionStart:b,onSelectionEnd:x,multiSelectionKeyCode:L,panActivationKeyCode:M,zoomActivationKeyCode:W,elementsSelectable:z,zoomOnScroll:le,zoomOnPinch:ie,zoomOnDoubleClick:ue,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:te,panOnDrag:de,defaultViewport:F,translateExtent:V,minZoom:U,maxZoom:B,onSelectionContextMenu:h,preventScrolling:G,noDragClassName:Ie,noWheelClassName:Ae,noPanClassName:Ue,disableKeyboardA11y:rt,onViewportChange:Gt,isControlledViewport:!!Qt,children:d.jsxs(sie,{children:[d.jsx(rie,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:sn,onReconnectStart:xe,onReconnectEnd:be,onlyRenderVisibleElements:O,onEdgeContextMenu:Ve,onEdgeMouseEnter:ct,onEdgeMouseMove:_t,onEdgeMouseLeave:Tt,reconnectRadius:Ut,defaultMarkerColor:Z,noPanClassName:Ue,disableKeyboardA11y:rt,rfId:ut}),d.jsx(fie,{style:E,type:_,component:I,containerStyle:T}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx($re,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:p,nodeClickDistance:Xe,onlyRenderVisibleElements:O,noPanClassName:Ue,noDragClassName:Ie,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ut}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}tM.displayName="GraphView";const mie=H.memo(tM),s3=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}={})=>{const f=new Map,p=new Map,h=new Map,b=new Map,x=r??e??[],_=n??t??[],E=l??[0,0],I=u??Wh;yL(h,b,x),tN(_,f,p,{nodeOrigin:E,nodeExtent:I,elevateNodesOnSelect:!1});let T=[0,0,1];if(o&&i&&s){const C=xf(f,{filter:M=>!!((M.width||M.initialWidth)&&(M.height||M.initialHeight))}),{x:j,y:q,zoom:L}=q1(C,i,s,.5,2,.1);T=[j,q,L]}return{rfId:"1",width:0,height:0,transform:T,nodes:_,nodeLookup:f,parentLookup:p,edges:x,edgeLookup:b,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Wh,nodeExtent:I,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Yd.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...eL},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Vte,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},gie=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u})=>Fne((f,p)=>({...s3({nodes:t,edges:e,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u,defaultNodes:n,defaultEdges:r}),setNodes:h=>{const{nodeLookup:b,parentLookup:x,nodeOrigin:_,elevateNodesOnSelect:E}=p();tN(h,b,x,{nodeOrigin:_,nodeExtent:u,elevateNodesOnSelect:E,checkEquality:!0}),f({nodes:h})},setEdges:h=>{const{connectionLookup:b,edgeLookup:x}=p();yL(b,x,h),f({edges:h})},setDefaultNodesAndEdges:(h,b)=>{if(h){const{setNodes:x}=p();x(h),f({hasDefaultNodes:!0})}if(b){const{setEdges:x}=p();x(b),f({hasDefaultEdges:!0})}},updateNodeInternals:(h,b={triggerFitView:!0})=>{const{triggerNodeChanges:x,nodeLookup:_,parentLookup:E,fitViewOnInit:I,fitViewDone:T,fitViewOnInitOptions:C,domNode:j,nodeOrigin:q,nodeExtent:L,debug:M,fitViewSync:W}=p(),{changes:P,updatedInternals:O}=ane(h,_,E,j,q,L);if(O){if(ine(_,E,{nodeOrigin:q,nodeExtent:L}),b.triggerFitView){let z=T;!T&&I&&(z=W({...C,nodes:C?.nodes})),f({fitViewDone:z})}else f({});P?.length>0&&(M&&console.log("React Flow: trigger node changes",P),x?.(P))}},updateNodePositions:(h,b=!1)=>{const x=[],_=[];for(const[E,I]of h){const T=!!(I?.expandParent&&I?.parentId&&I?.position),C={id:E,type:"position",position:T?{x:Math.max(0,I.position.x),y:Math.max(0,I.position.y)}:I.position,dragging:b};T&&x.push({id:E,parentId:I.parentId,rect:{...I.internals.positionAbsolute,width:I.measured.width,height:I.measured.height}}),_.push(C)}if(x.length>0){const{nodeLookup:E,parentLookup:I,nodeOrigin:T}=p(),C=L1(x,E,I,T);_.push(...C)}p().triggerNodeChanges(_)},triggerNodeChanges:h=>{const{onNodesChange:b,setNodes:x,nodes:_,hasDefaultNodes:E,debug:I}=p();if(h?.length){if(E){const T=$1(h,_);x(T)}I&&console.log("React Flow: trigger node changes",h),b?.(h)}},triggerEdgeChanges:h=>{const{onEdgesChange:b,setEdges:x,edges:_,hasDefaultEdges:E,debug:I}=p();if(h?.length){if(E){const T=OL(h,_);x(T)}I&&console.log("React Flow: trigger edge changes",h),b?.(h)}},addSelectedNodes:h=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:_,triggerNodeChanges:E,triggerEdgeChanges:I}=p();if(b){const T=h.map(C=>Pc(C,!0));E(T);return}E(bd(_,new Set([...h]),!0)),I(bd(x))},addSelectedEdges:h=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:_,triggerNodeChanges:E,triggerEdgeChanges:I}=p();if(b){const T=h.map(C=>Pc(C,!0));I(T);return}I(bd(x,new Set([...h]))),E(bd(_,new Set,!0))},unselectNodesAndEdges:({nodes:h,edges:b}={})=>{const{edges:x,nodes:_,nodeLookup:E,triggerNodeChanges:I,triggerEdgeChanges:T}=p(),C=h||_,j=b||x,q=C.map(M=>{const W=E.get(M.id);return W&&(W.selected=!1),Pc(M.id,!1)}),L=j.map(M=>Pc(M.id,!1));I(q),T(L)},setMinZoom:h=>{const{panZoom:b,maxZoom:x}=p();b?.setScaleExtent([h,x]),f({minZoom:h})},setMaxZoom:h=>{const{panZoom:b,minZoom:x}=p();b?.setScaleExtent([x,h]),f({maxZoom:h})},setTranslateExtent:h=>{p().panZoom?.setTranslateExtent(h),f({translateExtent:h})},setPaneClickDistance:h=>{p().panZoom?.setClickDistance(h)},resetSelectedElements:()=>{const{edges:h,nodes:b,triggerNodeChanges:x,triggerEdgeChanges:_}=p(),E=b.reduce((T,C)=>C.selected?[...T,Pc(C.id,!1)]:T,[]),I=h.reduce((T,C)=>C.selected?[...T,Pc(C.id,!1)]:T,[]);x(E),_(I)},setNodeExtent:h=>{const{nodes:b,nodeLookup:x,parentLookup:_,nodeOrigin:E,elevateNodesOnSelect:I,nodeExtent:T}=p();h[0][0]===T[0][0]&&h[0][1]===T[0][1]&&h[1][0]===T[1][0]&&h[1][1]===T[1][1]||(tN(b,x,_,{nodeOrigin:E,nodeExtent:h,elevateNodesOnSelect:I,checkEquality:!1}),f({nodeExtent:h}))},panBy:h=>{const{transform:b,width:x,height:_,panZoom:E,translateExtent:I}=p();return lne({delta:h,panZoom:E,transform:b,translateExtent:I,width:x,height:_})},fitView:h=>{const{panZoom:b,width:x,height:_,minZoom:E,maxZoom:I,nodeLookup:T}=p();if(!b)return Promise.resolve(!1);const C=GE(T,h);return JE({nodes:C,width:x,height:_,panZoom:b,minZoom:E,maxZoom:I},h)},fitViewSync:h=>{const{panZoom:b,width:x,height:_,minZoom:E,maxZoom:I,nodeLookup:T}=p();if(!b)return!1;const C=GE(T,h);return JE({nodes:C,width:x,height:_,panZoom:b,minZoom:E,maxZoom:I},h),C.size>0},cancelConnection:()=>{f({connection:{...eL}})},updateConnection:h=>{f({connection:h})},reset:()=>f({...s3()})}),Object.is);function nM({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:o,nodeOrigin:l,nodeExtent:u,children:f}){const[p]=H.useState(()=>gie({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}));return d.jsx(Dne,{value:p,children:d.jsx(ore,{children:f})})}function yie({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,nodeOrigin:u,nodeExtent:f}){return H.useContext(sx)?d.jsx(d.Fragment,{children:t}):d.jsx(nM,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,nodeOrigin:u,nodeExtent:f,children:t})}const bie={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function vie({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:f,onMove:p,onMoveStart:h,onMoveEnd:b,onConnect:x,onConnectStart:_,onConnectEnd:E,onClickConnectStart:I,onClickConnectEnd:T,onNodeMouseEnter:C,onNodeMouseMove:j,onNodeMouseLeave:q,onNodeContextMenu:L,onNodeDoubleClick:M,onNodeDragStart:W,onNodeDrag:P,onNodeDragStop:O,onNodesDelete:z,onEdgesDelete:F,onDelete:V,onSelectionChange:U,onSelectionDragStart:B,onSelectionDrag:G,onSelectionDragStop:Z,onSelectionContextMenu:le,onSelectionStart:ie,onSelectionEnd:ne,onBeforeDelete:oe,connectionMode:te,connectionLineType:ue=Fl.Bezier,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,deleteKeyCode:Ne="Backspace",selectionKeyCode:ze="Shift",selectionOnDrag:je=!1,selectionMode:De=Vh.Full,panActivationKeyCode:Je="Space",multiSelectionKeyCode:Xe=sv()?"Meta":"Control",zoomActivationKeyCode:Ve=sv()?"Meta":"Control",snapToGrid:ct,snapGrid:_t,onlyRenderVisibleElements:Tt=!1,selectNodesOnDrag:Ut,nodesDraggable:sn,nodesConnectable:xe,nodesFocusable:be,nodeOrigin:Ie=RL,edgesFocusable:Ae,edgesReconnectable:Ue,elementsSelectable:rt=!0,defaultViewport:Me=Jne,minZoom:ut=.5,maxZoom:Qt=2,translateExtent:Gt=Wh,preventScrolling:bn=!0,nodeExtent:ar,defaultMarkerColor:Dn="#b1b1b7",zoomOnScroll:Qr=!0,zoomOnPinch:Pi=!0,panOnScroll:Sr=!1,panOnScrollSpeed:Jt=.5,panOnScrollMode:Ji=Zc.Free,zoomOnDoubleClick:Zi=!0,panOnDrag:Yi=!0,onPaneClick:po,onPaneMouseEnter:pa,onPaneMouseMove:cc,onPaneMouseLeave:Bs,onPaneScroll:K,onPaneContextMenu:gu,paneClickDistance:dn=0,nodeClickDistance:yu=0,children:bu,onReconnect:vu,onReconnectStart:uc,onReconnectEnd:ha,onEdgeContextMenu:Xi,onEdgeDoubleClick:dc,onEdgeMouseEnter:ma,onEdgeMouseMove:Ef,onEdgeMouseLeave:ga,reconnectRadius:zs=10,onNodesChange:Ya,onEdgesChange:Ws,noDragClassName:Nf="nodrag",noWheelClassName:If="nowheel",noPanClassName:xu="nopan",fitView:Vs,fitViewOptions:wu,connectOnClick:_u,attributionPosition:kf,proOptions:Su,defaultEdgeOptions:Eu,elevateNodesOnSelect:Nu,elevateEdgesOnSelect:fc,disableKeyboardA11y:Iu=!1,autoPanOnConnect:Cf,autoPanOnNodeDrag:lr,autoPanSpeed:Tf,connectionRadius:pc,isValidConnection:ku,onError:Xa,style:Rf,id:hc,nodeDragThreshold:el,viewport:es,onViewportChange:jf,width:xi,height:Of,colorMode:qf="light",debug:Af,...Wo},tl){const Fi=hc||"1",nl=ere(qf);return d.jsx("div",{"data-testid":"rf__wrapper",...Wo,style:{...Rf,...bie},ref:tl,className:Kr(["react-flow",i,nl]),id:hc,children:d.jsxs(yie,{nodes:t,edges:e,width:xi,height:Of,fitView:Vs,nodeOrigin:Ie,nodeExtent:ar,children:[d.jsx(mie,{onInit:f,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:C,onNodeMouseMove:j,onNodeMouseLeave:q,onNodeContextMenu:L,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:o,connectionLineType:ue,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,selectionKeyCode:ze,selectionOnDrag:je,selectionMode:De,deleteKeyCode:Ne,multiSelectionKeyCode:Xe,panActivationKeyCode:Je,zoomActivationKeyCode:Ve,onlyRenderVisibleElements:Tt,defaultViewport:Me,translateExtent:Gt,minZoom:ut,maxZoom:Qt,preventScrolling:bn,zoomOnScroll:Qr,zoomOnPinch:Pi,zoomOnDoubleClick:Zi,panOnScroll:Sr,panOnScrollSpeed:Jt,panOnScrollMode:Ji,panOnDrag:Yi,onPaneClick:po,onPaneMouseEnter:pa,onPaneMouseMove:cc,onPaneMouseLeave:Bs,onPaneScroll:K,onPaneContextMenu:gu,paneClickDistance:dn,nodeClickDistance:yu,onSelectionContextMenu:le,onSelectionStart:ie,onSelectionEnd:ne,onReconnect:vu,onReconnectStart:uc,onReconnectEnd:ha,onEdgeContextMenu:Xi,onEdgeDoubleClick:dc,onEdgeMouseEnter:ma,onEdgeMouseMove:Ef,onEdgeMouseLeave:ga,reconnectRadius:zs,defaultMarkerColor:Dn,noDragClassName:Nf,noWheelClassName:If,noPanClassName:xu,rfId:Fi,disableKeyboardA11y:Iu,nodeExtent:ar,viewport:es,onViewportChange:jf}),d.jsx(Xne,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:x,onConnectStart:_,onConnectEnd:E,onClickConnectStart:I,onClickConnectEnd:T,nodesDraggable:sn,nodesConnectable:xe,nodesFocusable:be,edgesFocusable:Ae,edgesReconnectable:Ue,elementsSelectable:rt,elevateNodesOnSelect:Nu,elevateEdgesOnSelect:fc,minZoom:ut,maxZoom:Qt,nodeExtent:ar,onNodesChange:Ya,onEdgesChange:Ws,snapToGrid:ct,snapGrid:_t,connectionMode:te,translateExtent:Gt,connectOnClick:_u,defaultEdgeOptions:Eu,fitView:Vs,fitViewOptions:wu,onNodesDelete:z,onEdgesDelete:F,onDelete:V,onNodeDragStart:W,onNodeDrag:P,onNodeDragStop:O,onSelectionDrag:G,onSelectionDragStart:B,onSelectionDragStop:Z,onMove:p,onMoveStart:h,onMoveEnd:b,noPanClassName:xu,nodeOrigin:Ie,rfId:Fi,autoPanOnConnect:Cf,autoPanOnNodeDrag:lr,autoPanSpeed:Tf,onError:Xa,connectionRadius:pc,isValidConnection:ku,selectNodesOnDrag:Ut,nodeDragThreshold:el,onBeforeDelete:oe,paneClickDistance:dn,debug:Af}),d.jsx(Gne,{onSelectionChange:U}),bu,d.jsx(Vne,{proOptions:Su,position:kf}),d.jsx(zne,{rfId:Fi,disableKeyboardA11y:Iu})]})})}var rM=qL(vie);const xie=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function wie({children:t}){const e=Tn(xie);return e?Xh.createPortal(t,e):null}function _ie(t){const[e,n]=H.useState(t),r=H.useCallback(i=>n(s=>$1(i,s)),[]);return[e,n,r]}function Sie(t){const[e,n]=H.useState(t),r=H.useCallback(i=>n(s=>OL(i,s)),[]);return[e,n,r]}function o3(t){return Tn(H.useCallback(n=>n.nodeLookup.get(t),[t]),wr)}function Eie({dimensions:t,lineWidth:e,variant:n,className:r}){return d.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Kr(["react-flow__background-pattern",n,r])})}function Nie({radius:t,className:e}){return d.jsx("circle",{cx:t,cy:t,r:t,className:Kr(["react-flow__background-pattern","dots",e])})}var ia;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ia||(ia={}));const Iie={[ia.Dots]:1,[ia.Lines]:1,[ia.Cross]:6},kie=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function iM({id:t,variant:e=ia.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:f,patternClassName:p}){const h=H.useRef(null),{transform:b,patternId:x}=Tn(kie,wr),_=r||Iie[e],E=e===ia.Dots,I=e===ia.Cross,T=Array.isArray(n)?n:[n,n],C=[T[0]*b[2]||1,T[1]*b[2]||1],j=_*b[2],q=Array.isArray(s)?s:[s,s],L=I?[j,j]:C,M=[q[0]*b[2]||1+L[0]/2,q[1]*b[2]||1+L[1]/2],W=`${x}${t||""}`;return d.jsxs("svg",{className:Kr(["react-flow__background",f]),style:{...u,...ox,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:h,"data-testid":"rf__background",children:[d.jsx("pattern",{id:W,x:b[0]%C[0],y:b[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:E?d.jsx(Nie,{radius:j/2,className:p}):d.jsx(Eie,{dimensions:L,lineWidth:i,variant:e,className:p})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${W})`})]})}iM.displayName="Background";const sM=H.memo(iM);function Cie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Tie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Rie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function jie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Oie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function uy({children:t,className:e,...n}){return d.jsx("button",{type:"button",className:Kr(["react-flow__controls-button",e]),...n,children:t})}const qie=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom});function oM({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:f,children:p,position:h="bottom-left",orientation:b="vertical","aria-label":x="React Flow controls"}){const _=_r(),{isInteractive:E,minZoomReached:I,maxZoomReached:T}=Tn(qie,wr),{zoomIn:C,zoomOut:j,fitView:q}=wf(),L=()=>{C(),s?.()},M=()=>{j(),o?.()},W=()=>{q(i),l?.()},P=()=>{_.setState({nodesDraggable:!E,nodesConnectable:!E,elementsSelectable:!E}),u?.(!E)},O=b==="horizontal"?"horizontal":"vertical";return d.jsxs(M1,{className:Kr(["react-flow__controls",O,f]),position:h,style:t,"data-testid":"rf__controls","aria-label":x,children:[e&&d.jsxs(d.Fragment,{children:[d.jsx(uy,{onClick:L,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:T,children:d.jsx(Cie,{})}),d.jsx(uy,{onClick:M,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:I,children:d.jsx(Tie,{})})]}),n&&d.jsx(uy,{className:"react-flow__controls-fitview",onClick:W,title:"fit view","aria-label":"fit view",children:d.jsx(Rie,{})}),r&&d.jsx(uy,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:E?d.jsx(Oie,{}):d.jsx(jie,{})}),p]})}oM.displayName="Controls";const aM=H.memo(oM);function Aie({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:f,borderRadius:p,shapeRendering:h,selected:b,onClick:x}){const{background:_,backgroundColor:E}=s||{},I=o||_||E;return d.jsx("rect",{className:Kr(["react-flow__minimap-node",{selected:b},f]),x:e,y:n,rx:p,ry:p,width:r,height:i,style:{fill:I,stroke:l,strokeWidth:u},shapeRendering:h,onClick:x?T=>x(T,t):void 0})}const Pie=H.memo(Aie),Fie=t=>t.nodes.map(e=>e.id),jS=t=>t instanceof Function?t:()=>t;function Die({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Pie,onClick:o}){const l=Tn(Fie,wr),u=jS(e),f=jS(t),p=jS(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:l.map(b=>d.jsx(Mie,{id:b,nodeColorFunc:u,nodeStrokeColorFunc:f,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:h},b))})}function Lie({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:f,x:p,y:h,width:b,height:x}=Tn(_=>{const E=_.nodeLookup.get(t),{x:I,y:T}=E.internals.positionAbsolute,{width:C,height:j}=Ja(E);return{node:E,x:I,y:T,width:C,height:j}},wr);return!f||f.hidden||!cL(f)?null:d.jsx(l,{x:p,y:h,width:b,height:x,style:f.style,selected:!!f.selected,className:r(f),color:e(f),borderRadius:i,strokeColor:n(f),strokeWidth:s,shapeRendering:o,onClick:u,id:f.id})}const Mie=H.memo(Lie);var $ie=H.memo(Die);const Bie=200,zie=150,Wie=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?aL(xf(t.nodeLookup),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height}},Vie="react-flow__minimap-desc";function lM({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:f,maskStrokeColor:p,maskStrokeWidth:h,position:b="bottom-right",onClick:x,onNodeClick:_,pannable:E=!1,zoomable:I=!1,ariaLabel:T="React Flow mini map",inversePan:C,zoomStep:j=10,offsetScale:q=5}){const L=_r(),M=H.useRef(null),{boundingRect:W,viewBB:P,rfId:O,panZoom:z,translateExtent:F,flowWidth:V,flowHeight:U}=Tn(Wie,wr),B=t?.width??Bie,G=t?.height??zie,Z=W.width/B,le=W.height/G,ie=Math.max(Z,le),ne=ie*B,oe=ie*G,te=q*ie,ue=W.x-(ne-W.width)/2-te,de=W.y-(oe-W.height)/2-te,ye=ne+te*2,we=oe+te*2,Ne=`${Vie}-${O}`,ze=H.useRef(0),je=H.useRef();ze.current=ie,H.useEffect(()=>{if(M.current&&z)return je.current=gne({domNode:M.current,panZoom:z,getTransform:()=>L.getState().transform,getViewScale:()=>ze.current}),()=>{je.current?.destroy()}},[z]),H.useEffect(()=>{je.current?.update({translateExtent:F,width:V,height:U,inversePan:C,pannable:E,zoomStep:j,zoomable:I})},[E,I,C,j,F,V,U]);const De=x?Xe=>{const[Ve,ct]=je.current?.pointer(Xe)||[0,0];x(Xe,{x:Ve,y:ct})}:void 0,Je=_?H.useCallback((Xe,Ve)=>{const ct=L.getState().nodeLookup.get(Ve);_(Xe,ct)},[]):void 0;return d.jsx(M1,{position:b,style:{...t,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*ie:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:Kr(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:B,height:G,viewBox:`${ue} ${de} ${ye} ${we}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Ne,ref:M,onClick:De,children:[T&&d.jsx("title",{id:Ne,children:T}),d.jsx($ie,{onClick:Je,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),d.jsx("path",{className:"react-flow__minimap-mask",d:`M${ue-te},${de-te}h${ye+te*2}v${we+te*2}h${-ye-te*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}lM.displayName="MiniMap";const cM=H.memo(lM);function Uie({nodeId:t,position:e,variant:n=lh.Handle,className:r,style:i={},children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:f=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:b,onResizeStart:x,onResize:_,onResizeEnd:E}){const I=z1(),T=typeof t=="string"?t:I,C=_r(),j=H.useRef(null),q=n===lh.Line?"right":"bottom-right",L=e??q,M=H.useRef(null);H.useEffect(()=>{if(!(!j.current||!T))return M.current||(M.current=jne({domNode:j.current,nodeId:T,getStoreItems:()=>{const{nodeLookup:z,transform:F,snapGrid:V,snapToGrid:U,nodeOrigin:B,domNode:G}=C.getState();return{nodeLookup:z,transform:F,snapGrid:V,snapToGrid:U,nodeOrigin:B,paneDomNode:G}},onChange:(z,F)=>{const{triggerNodeChanges:V,nodeLookup:U,parentLookup:B,nodeOrigin:G}=C.getState(),Z=[],le={x:z.x,y:z.y},ie=U.get(T);if(ie&&ie.expandParent&&ie.parentId){const ne=ie.origin??G,oe=z.width??ie.measured.width,te=z.height??ie.measured.height,ue={id:ie.id,parentId:ie.parentId,rect:{width:oe,height:te,...uL({x:z.x??ie.position.x,y:z.y??ie.position.y},{width:oe,height:te},ie.parentId,U,ne)}},de=L1([ue],U,B,G);Z.push(...de),le.x=z.x?Math.max(ne[0]*oe,z.x):void 0,le.y=z.y?Math.max(ne[1]*te,z.y):void 0}if(le.x!==void 0&&le.y!==void 0){const ne={id:T,type:"position",position:{...le}};Z.push(ne)}if(z.width!==void 0&&z.height!==void 0){const ne={id:T,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:z.width,height:z.height}};Z.push(ne)}for(const ne of F){const oe={...ne,type:"position"};Z.push(oe)}V(Z)},onEnd:()=>{const z={id:T,type:"dimensions",resizing:!1};C.getState().triggerNodeChanges([z])}})),M.current.update({controlPosition:L,boundaries:{minWidth:l,minHeight:u,maxWidth:f,maxHeight:p},keepAspectRatio:h,onResizeStart:x,onResize:_,onResizeEnd:E,shouldResize:b}),()=>{M.current?.destroy()}},[L,l,u,f,p,h,x,_,E,b]);const W=L.split("-"),P=n===lh.Line?"borderColor":"backgroundColor",O=o?{...i,[P]:o}:i;return d.jsx("div",{className:Kr(["react-flow__resize-control","nodrag",...W,n,r]),ref:j,style:O,children:s})}H.memo(Uie);const Hie=t=>t.domNode?.querySelector(".react-flow__renderer");function Kie({children:t}){const e=Tn(Hie);return e?Xh.createPortal(t,e):null}const Qie=(t,e)=>t?.internals.positionAbsolute.x!==e?.internals.positionAbsolute.x||t?.internals.positionAbsolute.y!==e?.internals.positionAbsolute.y||t?.measured.width!==e?.measured.width||t?.measured.height!==e?.measured.height||t?.selected!==e?.selected||t?.internals.z!==e?.internals.z,Gie=(t,e)=>{if(t.size!==e.size)return!1;for(const[n,r]of t)if(Qie(r,e.get(n)))return!1;return!0},Jie=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2],selectedNodesCount:t.nodes.filter(e=>e.selected).length});function uM({nodeId:t,children:e,className:n,style:r,isVisible:i,position:s=Ot.Top,offset:o=10,align:l="center",...u}){const f=z1(),p=H.useCallback(L=>(Array.isArray(t)?t:[t||f||""]).reduce((P,O)=>{const z=L.nodeLookup.get(O);return z&&P.set(z.id,z),P},new Map),[t,f]),h=Tn(p,Gie),{x:b,y:x,zoom:_,selectedNodesCount:E}=Tn(Jie,wr);if(!(typeof i=="boolean"?i:h.size===1&&h.values().next().value.selected&&E===1)||!h.size)return null;const T=xf(h),C=Array.from(h.values()),j=Math.max(...C.map(L=>L.internals.z+1)),q={position:"absolute",transform:nne(T,{x:b,y:x,zoom:_},s,o,l),zIndex:j,...r};return d.jsx(Kie,{children:d.jsx("div",{style:q,className:Kr(["react-flow__node-toolbar",n]),...u,"data-id":C.reduce((L,M)=>`${L}${M.id} `,"").trim(),children:e})})}const Pn="icon-[solar--home-outline]",W1=iZ({shape:D.object({name:D.string().min(1),cycles:Io(),sort:Io(),limit:Io()}),filter:qi.merge(D.object({name:D.string().optional()}))}),av=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(W1.shape),defaultValues:{cycles:1,sort:0,limit:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"name",label:d.jsx(X,{label:"Building name (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),d.jsx(hn,{formState:s.formState,name:"cycles",label:d.jsx(X,{label:"Construction cycles (label)"}),hint:d.jsx(X,{label:"Amount of cycles to build this building (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,...s.register("cycles")})}),d.jsx(hn,{formState:s.formState,name:"limit",label:d.jsx(X,{label:"Building limit (label)"}),hint:d.jsx(X,{label:"Maximum number of building a player can build (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,...s.register("limit")})}),d.jsx(hn,{formState:s.formState,name:"sort",label:d.jsx(X,{label:"Blueprint sort (label)"}),hint:d.jsx(X,{label:"Sort blueprints by this number (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:0,...s.register("sort")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Pn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},Ds="icon-[fluent-mdl2--production-floor-management]",Zie=({id:t,data:e,isConnectable:n})=>{const{locale:r}=tn({from:"/$locale"}),i=tc();return d.jsxs("div",{className:"min-w-[14rem]",onClick:()=>{i({to:"/$locale/apps/derivean/root/editor",params:{locale:r},search:{zoomTo:t}})},onDoubleClick:()=>{i({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t}})},children:[d.jsx(co,{type:"target",position:Ot.Left,className:"w-4 h-4"}),d.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[d.jsx("div",{className:"flex flex-row items-center gap-2",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:d.jsx(Rt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t},children:e.name})}),d.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 border bg-slate-50 border-slate-200 rounded-sm w-full p-1",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:[d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsx(Rt,{icon:Zn,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:r,id:t}}),d.jsx(Rt,{icon:Ds,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:r,id:t}}),d.jsx(Rt,{icon:kD,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:r,id:t}})]}),d.jsx("div",{children:d.jsx(mf,{target:d.jsx(xm,{iconEnabled:ii,css:{base:["text-red-500"]}}),outside:!0,textTitle:d.jsx(X,{label:"Delete blueprint (modal)"}),css:{modal:["w-1/3"]},children:()=>{const s=Vn([["Editor"]]);return d.jsx(bs,{callback:async()=>jt.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",e.id).execute()),textContent:d.jsx(X,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:s})}})})]})]}),d.jsx(co,{type:"source",position:Ot.Right,isConnectable:n,className:"w-4 h-4"})]})},Yie=({nodeId:t})=>{const{fitView:e}=wf();return H.useEffect(()=>{t&&setTimeout(()=>{e({nodes:[{id:t}],duration:750,minZoom:1,maxZoom:1})},50)},[t]),null},Xie=({data:t,zoomTo:e})=>{const n=Vn([]),r=Yt({async mutationFn({blueprintId:i,dependencyId:s}){return jt.transaction().execute(async o=>o.insertInto("Blueprint_Dependency").values({id:On(),blueprintId:i,dependencyId:s}).execute())},async onSuccess(){await n()}});return d.jsx("div",{className:"w-fit h-fit mx-auto border border-slate-300 rounded-md shadow-md m-8",children:d.jsx("div",{style:{width:"95vw",height:"85vh"},children:d.jsxs(rM,{nodes:t.nodes,edges:t.edges,onConnect:i=>{r.mutate({blueprintId:i.target,dependencyId:i.source})},fitView:!0,snapGrid:[16,16],elementsSelectable:!1,nodeTypes:H.useMemo(()=>({blueprint(i){return d.jsx(Zie,{...i})}}),[]),edgeTypes:H.useMemo(()=>({dependency({id:i,sourceX:s,sourceY:o,targetX:l,targetY:u,sourcePosition:f,targetPosition:p,style:h={},markerEnd:b}){const{setEdges:x}=wf(),[_,E,I]=A1({sourceX:s,sourceY:o,sourcePosition:f,targetX:l,targetY:u,targetPosition:p}),T=Vn([]),C=Yt({async mutationFn({id:j}){return jt.transaction().execute(async q=>{await q.deleteFrom("Blueprint_Dependency").where("id","=",j).execute()})},async onSuccess(){x(j=>j.filter(q=>q.id!==i)),await T()}});return d.jsxs(d.Fragment,{children:[d.jsx(km,{path:_,markerEnd:b,style:h}),d.jsx(wie,{children:d.jsx("div",{className:mn("nodrag nopan",["flex","items-center","justify-center","cursor-pointer","bg-red-200","text-red-500","border","border-red-300","hover:border-red-600","hover:bg-red-300","hover:text-red-700","rounded-full","w-4","h-4","z-20"]),style:{position:"absolute",pointerEvents:"all",transformOrigin:"center",transform:`translate(-50%, -50%) translate(${E}px,${I}px)`},children:d.jsx(en,{icon:C.isPending?P7:u1,onClick:()=>{C.mutate({id:i})}})})})]})}}),[]),children:[d.jsx(Yie,{nodeId:e}),d.jsx(aM,{orientation:"horizontal",showInteractive:!1,showZoom:!1,children:d.jsx(mf,{target:d.jsx(xm,{className:"react-flow__controls-button",iconEnabled:Pn}),outside:!1,textTitle:d.jsx(X,{label:"Create blueprint (modal)"}),css:{modal:["w-1/3"]},children:({close:i})=>{const s=Vn([["Editor"]]),{locale:o}=tn({from:"/$locale"}),l=tc();return d.jsx(av,{mutation:Yt({async mutationFn(u){return Rn.promise(jt.transaction().execute(f=>f.insertInto("Blueprint").values({id:On(),...u}).returningAll().executeTakeFirstOrThrow()),Wr("Create blueprint"))},async onSuccess(u){await s(),l({to:"/$locale/apps/derivean/root/editor",params:{locale:o},search:{zoomTo:u.id}}),i()}})})}})}),d.jsx(cM,{}),d.jsx(sM,{variant:ia.Dots,gap:12,size:1})]})})})},ese=({graph:t,nodes:e,edges:n,size:r={width:344,height:36}})=>(t.setGraph({rankdir:"LR",nodesep:125,edgesep:65,ranksep:50}),e.forEach(i=>{t.setNode(i.id,{width:r.width,height:r.height})}),n.forEach(i=>{t.setEdge(i.source,i.target)}),_2.layout(t,{}),{nodes:e.map(i=>{const s=t.node(i.id);return{...i,targetPosition:"left",sourcePosition:"right",position:{x:s.x-r.width/2,y:s.y-r.height/2}}}),edges:n}),iN=Dt("/$locale/apps/derivean/root/editor")({validateSearch:mr(D.object({zoomTo:D.string().optional()})),async loader({context:{kysely:t}}){const e=(await t.selectFrom("Blueprint").select(["id","name","cycles","sort"]).execute()).map(r=>({id:r.id,position:{x:0,y:0},data:r,type:"blueprint"})),n=(await t.selectFrom("Blueprint_Dependency").select(["id","blueprintId","dependencyId"]).execute()).map(({id:r,blueprintId:i,dependencyId:s})=>({id:r,source:s,target:i,type:"dependency"}));return ese({graph:new _2.graphlib.Graph().setDefaultEdgeLabel(()=>({})),nodes:[...e],edges:[...n]})},component(){const t=iN.useLoaderData(),{zoomTo:e}=iN.useSearch();return d.jsx(Xie,{data:t,zoomTo:e})}}),tse=()=>Yt({mutationKey:["useRegisterMutation"],async mutationFn({login:t,name:e,password1:n}){return jt.transaction().execute(async r=>wm.parse(await r.insertInto("User").values({id:On(),name:e,login:t,password:EF.hash(n)}).returning(["User.id","User.name","User.login"]).executeTakeFirstOrThrow()))}}),nse=D.object({name:D.string().min(1),login:D.string().min(1),password1:D.string().min(1),password2:D.string().min(1)}).refine(t=>t.password1===t.password2,{message:"Passwords must match",path:["password1"]}),rse=({onSuccess:t})=>{const e=tse(),n=bi({resolver:vi(nse)}),r=yi({isLoading:n.formState.isLoading,isSubmitting:n.formState.isSubmitting}).slots;return d.jsxs("form",{className:r.base(),onSubmit:n.handleSubmit(async i=>e.mutateAsync(i,{onSuccess:t,onError:s=>{KN({error:s,errors:[IN({error:s,schema:HN,onError:({data:o})=>{n.setError("root",{message:o.message})}})],onError:o=>{n.setError("root",{message:o.message})}})}}).catch(()=>{})),children:[d.jsx(li,{variant:{highlight:!0},error:n.formState.errors.root}),d.jsx(hn,{formState:n.formState,name:"name",label:d.jsx(X,{label:"Name (label)"}),children:d.jsx("input",{type:"text",className:r.input(),...n.register("name")})}),d.jsx(hn,{formState:n.formState,name:"login",label:d.jsx(X,{label:"Login (label)"}),children:d.jsx("input",{type:"text",className:r.input(),...n.register("login")})}),d.jsx(hn,{formState:n.formState,name:"password1",label:d.jsx(X,{label:"Password 1 (label)"}),children:d.jsx("input",{type:"password",className:r.input(),...n.register("password1")})}),d.jsx(hn,{formState:n.formState,name:"password2",label:d.jsx(X,{label:"Password 2 (label)"}),children:d.jsx("input",{type:"password",className:r.input(),...n.register("password2")})}),d.jsx(gn,{iconEnabled:"icon-[mdi--register-outline]",iconDisabled:"icon-[mdi--register-outline]",type:"submit",children:d.jsx(X,{label:"Register (submit)"})})]})},ise=Dt("/$locale/apps/derivean/public/register")({component:()=>{const t=tc();return d.jsx("div",{className:mn(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:d.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[d.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),d.jsx(rse,{onSuccess:async e=>{gf.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),sse=Dt("/$locale/apps/derivean/public/logout")({pendingComponent(){return d.jsx("div",{className:mn(["flex items-center justify-center h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:d.jsx(KD,{icon:m1,textTitle:d.jsx(X,{label:"Logout (label)"}),textMessage:d.jsx(X,{label:"Logout in progress..."}),css:{base:["p-4","bg-slate-200","rounded-sm"]}})})},async loader({params:{locale:t}}){throw gf.remove("session"),Yh({to:"/$locale/apps/derivean/public/login",params:{locale:t}})}}),ose=()=>Yt({mutationKey:["useLoginMutation"],async mutationFn({login:t,password:e}){return jt.transaction().execute(async n=>{const r=await n.selectFrom("User as u").select(["u.id","u.login","u.name"]).where("u.login","=",t).where("u.password","=",EF.hash(e)).executeTakeFirstOrThrow();return{id:r.id,login:r.login,name:r.name}})}}),ase=D.object({login:D.string().min(1),password:D.string().min(1)}),lse=({onSuccess:t})=>{const{locale:e}=tn({from:"/$locale"}),n=ose(),r=bi({resolver:vi(ase)}),i=yi({isLoading:r.formState.isLoading,isSubmitting:r.formState.isSubmitting}).slots;return d.jsxs("form",{className:i.base(),onSubmit:r.handleSubmit(async s=>n.mutateAsync(s,{onSuccess:t,onError:o=>{KN({error:o,errors:[IN({error:o,schema:HN,onError:({data:l})=>{r.setError("root",{message:l.message})}})],onError:l=>{r.setError("root",{message:l.message})}})}}).catch(()=>{})),children:[d.jsx(li,{variant:{highlight:!0},error:r.formState.errors.root}),d.jsx(hn,{formState:r.formState,name:"login",label:d.jsx(X,{label:"Login (label)"}),children:d.jsx("input",{type:"text",className:i.input(),...r.register("login")})}),d.jsx(hn,{formState:r.formState,name:"password",label:d.jsx(X,{label:"Password (label)"}),children:d.jsx("input",{type:"password",className:i.input(),...r.register("password")})}),d.jsxs("div",{className:"flex flex-row justify-between gap-8",children:[d.jsx(Rt,{icon:"icon-[mdi--register-outline]",to:"/$locale/apps/derivean/public/register",params:{locale:e},children:d.jsx(X,{label:"Register (link)"})}),d.jsx(gn,{iconEnabled:"icon-[uiw--login]",iconDisabled:"icon-[uiw--login]",type:"submit",children:d.jsx(X,{label:"Login (submit)"})})]})]})},cse=Dt("/$locale/apps/derivean/public/login")({component:()=>{const t=tc();return d.jsx("div",{className:mn(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:d.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[d.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),d.jsx(lse,{onSuccess:async e=>{gf.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),use=async({tx:t,userId:e})=>{const n=await t.selectFrom(t.selectFrom("Building as b").innerJoin("Construction as c","c.id","b.constructionId").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id as buildingId","c.id","c.cycle","bl.cycles",r=>r.case().when(r.not(r.exists(r.selectFrom("Blueprint_Requirement as br").select(r.lit(1).as("one")).whereRef("br.blueprintId","=","b.blueprintId").where(i=>i.not(i.exists(i.selectFrom("Inventory as i").select(i.lit(1).as("one")).where("i.id","in",i.selectFrom("Building_Inventory").select("inventoryId").whereRef("buildingId","=","b.id")).where("i.type","=","construction").whereRef("i.resourceId","=","br.resourceId").whereRef("i.amount",">=","br.amount"))))))).then(r.lit(!0)).else(r.lit(!1)).end().as("withAvailableResources")]).where("b.userId","=",e).where("c.plan","=",!1).as("building")).where("building.withAvailableResources","=",!0).selectAll().execute();for await(const{id:r,cycle:i,cycles:s,buildingId:o}of n){if(await t.deleteFrom("Route").where("toId","=",o).execute(),i>=s){await t.deleteFrom("Construction").where("id","=",r).execute();continue}await t.updateTable("Construction").set("cycle",i+1).where("id","=",r).execute()}},dse=async({tx:t,userId:e})=>{const n=await t.selectFrom("Route_Resource as rr").select(["rr.id","rr.routeId","rr.resourceId"]).where("rr.routeId","in",t.selectFrom("Route as r").innerJoin("Building as b","b.id","r.toId").select("r.id").where("b.constructionId","is not",null).where("r.userId","=",e)).execute();for await(const{id:r,routeId:i,resourceId:s}of n){const o=await t.selectFrom("Blueprint_Requirement as br").select(["br.amount"]).where("br.resourceId","=",s).where("br.blueprintId","=",t.selectFrom("Route as r").innerJoin("Building as b","b.id","r.toId").select("b.blueprintId").where("r.id","=",i)).executeTakeFirst(),l=await t.selectFrom("Inventory as i").select(["i.amount"]).where("i.resourceId","=",s).where("i.id","in",t.selectFrom("Building_Inventory as bi").select(["bi.inventoryId"]).where("bi.buildingId","=",t.selectFrom("Route as r").select("r.toId").where("r.id","=",i))).executeTakeFirst();!o||!l||l.amount>=o.amount&&await t.deleteFrom("Route_Resource").where("id","=",r).execute()}},a3=async({tx:t,userId:e,buildingId:n,blueprintProductionId:r})=>{const i=await t.selectFrom("Blueprint_Production as bp").select(["bp.cycles"]).where("bp.id","=",r).executeTakeFirstOrThrow(),s=await t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",r).execute();for await(const{resourceId:o,amount:l,passive:u}of s){const f=await t.selectFrom("Inventory as i").innerJoin("Building_Inventory as bi","bi.inventoryId","i.id").select(["i.id","i.amount"]).where("bi.buildingId","=",n).where("i.resourceId","=",o).where("i.amount",">=",l).where("i.type","in",["storage"]).executeTakeFirstOrThrow();u||await t.updateTable("Inventory").set({amount:f.amount-l}).where("id","=",f.id).execute()}await t.insertInto("Production").values({id:On(),buildingId:n,blueprintProductionId:r,userId:e,cycle:0,cycles:i.cycles}).execute()},fse=async({tx:t,userId:e})=>{const n=await t.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","p.buildingId","p.cycle","p.cycles","bp.resourceId","r.name","bp.amount"]).where("userId","=",e).execute();for await(const{id:s,buildingId:o,resourceId:l,cycle:u,cycles:f,amount:p}of n){if(u<f){await t.updateTable("Production").set("cycle",u+1).where("id","=",s).execute();continue}const h=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",o)).where("i.resourceId","=",l).where("i.type","=","storage").executeTakeFirst();if(h&&(!(h.limit>0)||h.amount+p<=h.limit)){await t.updateTable("Inventory").set({amount:h.amount+p}).where("id","=",h.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",s).execute();continue}const b=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",o)).where("i.resourceId","=",l).where("i.type","=","storage").executeTakeFirst();if(b&&(!(b.limit>0)||b.amount+p<=b.limit)){await t.updateTable("Inventory").set({amount:b.amount+p}).where("id","=",b.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",s).execute();continue}}const r=await t.selectFrom("Building as b").select(["b.id as buildingId","b.productionId"]).where("b.userId","=",e).where("b.productionId","is not",null).execute();for await(const{buildingId:s,productionId:o}of r)try{const{count:l}=await t.selectFrom("Production as p").where("p.buildingId","=",s).select(u=>u.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(l>0)continue;await a3({tx:t,blueprintProductionId:o,buildingId:s,userId:e}),await t.updateTable("Building").set({productionId:null}).where("id","=",s).execute()}catch{}const i=await t.selectFrom("Building as b").select(["b.id as buildingId","b.recurringProductionId"]).where("b.userId","=",e).where("b.recurringProductionId","is not",null).execute();for await(const{buildingId:s,recurringProductionId:o}of i)try{const{count:l}=await t.selectFrom("Production as p").where("p.buildingId","=",s).select(u=>u.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(l>0)continue;await a3({tx:t,blueprintProductionId:o,buildingId:s,userId:e})}catch{}},pse=async({tx:t,userId:e})=>{const n=await t.selectFrom("Route as r").innerJoin("Route_Resource as rr","rr.routeId","r.id").select(["r.id","r.toId","r.fromId"]).where("r.userId","=",e).orderBy("rr.priority","desc").execute();for await(const{id:r,fromId:i,toId:s}of n){const o=await t.selectFrom("Route_Resource as rr").select(["rr.amount","rr.resourceId","rr.type"]).where("rr.routeId","=",r).orderBy("rr.priority","desc").execute();for await(const{amount:l,resourceId:u,type:f}of o){const p=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",i)).where("i.resourceId","=",u).where("i.type","=","storage").orderBy("i.amount","desc").executeTakeFirst(),h=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",s)).where("i.resourceId","=",u).where("i.type","=",f).orderBy("i.amount","asc").executeTakeFirst();if(!p||!h){console.log("Source or target is not compatible");continue}const b=Math.max(0,Math.min(Math.min(p.amount,l??p.amount),h.limit-h.amount));b>0&&(await t.updateTable("Inventory").set({amount:p.amount-b}).where("id","=",p.id).execute(),await t.updateTable("Inventory").set({amount:h.amount+b}).where("id","=",h.id).execute())}}},dM=async({tx:t,userId:e})=>{try{await t.insertInto("Cycle").values({id:On(),stamp:fn.now().toUTC().toSQLTime(),userId:e}).execute(),await use({tx:t,userId:e}),await dse({tx:t,userId:e}),await fse({tx:t,userId:e}),await pse({tx:t,userId:e})}catch(n){throw console.error(n),n}},hse=({userId:t,...e})=>{const n=Vn([["GameMap"]]),[r,i]=H.useState(!1),s=Yt({mutationKey:["useCycleMutation"],async mutationFn({userId:o}){return jt.transaction().execute(async l=>dM({userId:o,tx:l}))},async onSuccess(){await n()}});return H.useEffect(()=>{if(r&&!s.isPending){const o=setInterval(()=>{s.mutate({userId:t})},1e3);return()=>clearInterval(o)}},[r]),d.jsx(gn,{iconEnabled:r?"icon-[fluent--pause-24-regular]":"icon-[hugeicons--play]",onClick:()=>{i(o=>!o)},loading:s.isPending,...e})},Gh="icon-[gala--clock]",mse=({userId:t,cycle:e,...n})=>{const r=Vn([["Cycle"],["GameMap"],["Resource_Queue"],["Building_Queue"],["Building"],["User_Inventory"],["Inventory"],["Building_Base_Production"]]),i=Yt({mutationKey:["useCycleMutation"],async mutationFn({userId:s}){return jt.transaction().execute(async o=>dM({userId:s,tx:o}))},async onSuccess(){await r()}});return d.jsxs(gn,{iconEnabled:Gh,iconDisabled:Gh,onClick:()=>{i.mutate({userId:t})},loading:i.isPending,...n,children:[d.jsx(X,{css:{base:["font-bold"]},label:"New cycle (label)"}),d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx("div",{className:"font-light text-sm",children:on({number:e})}),d.jsx(en,{icon:"icon-[solar--arrow-right-linear]"}),d.jsx("div",{className:"font-bold",children:on({number:e+1})})]})]})},gse=({fromX:t,fromY:e,toX:n,toY:r,connectionLineStyle:i})=>{const[s]=ax({sourceX:t,sourceY:e,targetX:n,targetY:r});return d.jsx("g",{children:d.jsx("path",{style:i,fill:"none",d:s})})};function l3(t,e){const n={...t.internals.positionAbsolute,...t},r=Math.round(n.x),i=Math.round(n.y),s=Math.round(e.x),o=Math.round(e.y);return s<=r+1?Ot.Left:s>=r+n.measured.width-1?Ot.Right:o<=i+1?Ot.Top:o>=n.y+n.measured.height-1?Ot.Bottom:Ot.Top}function c3(t,e){const{width:n,height:r}=t.measured,i=t.internals.positionAbsolute,s=e.internals.positionAbsolute,o=n/2,l=r/2,u=i.x+o,f=i.y+l,p=s.x+e.measured.width/2,h=s.y+e.measured.height/2,b=(p-u)/(2*o)-(h-f)/(2*l),x=(p-u)/(2*o)+(h-f)/(2*l),_=1/(Math.abs(b)+Math.abs(x)||1),E=_*b,I=_*x,T=o*(E+I)+u,C=l*(-E+I)+f;return{x:T,y:C}}function yse(t,e){const n=c3(t,e),r=c3(e,t);return{sx:n.x,sy:n.y,tx:r.x,ty:r.y,sourcePos:l3(t,n),targetPos:l3(e,r)}}const bse=({id:t,source:e,target:n,markerEnd:r,style:i})=>{const s=o3(e),o=o3(n);if(!s||!o)return null;const{sx:l,sy:u,tx:f,ty:p}=yse(s,o),[h]=ax({sourceX:l,sourceY:u,targetX:f,targetY:p});return d.jsx("path",{id:t,className:"react-flow__edge-path",d:h,markerEnd:r,style:i})},fM=["flex","flex-row","gap-2","items-center","p-4","bg-white","rounded-md","border","shadow-md","border-slate-300"],Ba="icon-[mingcute--inventory-line]",sN="icon-[tabler--basket]",pM="icon-[oui--refresh]",lx="icon-[gis--route-end]",vse=({id:t,data:e})=>{const{mapId:n,locale:r}=tn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs(d.Fragment,{children:[d.jsx(uM,{className:mn(fM),children:"Blah"}),d.jsxs("div",{className:mn(["flex","flex-col","gap-1","w-full","h-full","justify-between","items-start"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[d.jsx(Rt,{icon:Bo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:t},css:{base:["font-bold"]},children:e.name}),d.jsxs("div",{className:"flex flex-row gap-1 items-end",children:[d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:r,mapId:n,buildingId:t},children:d.jsx(gn,{iconEnabled:Ba,variant:{variant:"subtle",size:"sm"}})}),d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:r,mapId:n,buildingId:t},children:d.jsx(gn,{iconEnabled:Ds,variant:{variant:"subtle",size:"sm"}})}),d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:r,mapId:n,buildingId:t},children:d.jsx(gn,{iconEnabled:lx,variant:{variant:"subtle",size:"sm"}})})]})]}),d.jsxs("div",{className:"flex flex-row items-center justify-between w-full",children:[d.jsx("div",{children:e.productionName?d.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400",children:[d.jsx(en,{icon:sN,variant:{size:"xs"}}),d.jsx("div",{children:e.productionName})]}):e.recurringProductionName?d.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400",children:[d.jsx(en,{icon:pM,variant:{size:"xs"}}),d.jsx("div",{children:e.recurringProductionName})]}):null}),e.production?d.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400 font-bold",children:[d.jsx(en,{icon:Jb}),d.jsx("div",{children:e.production.name})]}):null]}),e.production?d.jsx(bf,{value:100*e.production.cycle/e.production.cycles}):null,d.jsx(co,{className:"hidden",position:Ot.Right,type:"source",isConnectable:!1}),d.jsx(co,{className:"hidden",position:Ot.Left,type:"target",isConnectable:!1})]})]})},xse=({id:t,data:e})=>{const n=XL(),r=n.inProgress&&n.fromNode.id!==t;return d.jsxs("div",{className:"flex flex-row gap-2 w-full h-full items-center justify-center ",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-center text-xl",children:[d.jsx(en,{icon:lx,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:e.name})]}),d.jsxs("div",{className:"w-full h-full absolute top-0 left-0",children:[!n.inProgress&&d.jsx(co,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Ot.Right,type:"source"}),(!n.inProgress||r)&&d.jsx(co,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Ot.Left,type:"target",isConnectableStart:!1})]})]})},wse=({data:t})=>{const e=Vn([["GameMap"]]),n=Yt({async mutationFn({constructionId:r}){return jt.transaction().execute(i=>i.updateTable("Construction").set({plan:!1}).where("id","=",r).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:"flex flex-row gap-2 items-start justify-between w-full h-full",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(en,{icon:"icon-[carbon--floorplan]",css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:t.name})]}),d.jsx(gn,{iconEnabled:TE,iconDisabled:TE,loading:n.isPending,disabled:!t.valid,onClick:()=>{n.mutate({constructionId:t.constructionId})}})]})},uu="icon-[emojione-monotone--construction]",_se=({data:t})=>{const{mapId:e,locale:n}=tn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs(d.Fragment,{children:[d.jsx(uM,{position:Ot.Top,className:mn(fM),children:d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:n,mapId:e,landId:t.id},children:d.jsx(gn,{iconEnabled:uu,variant:{variant:"subtle"},children:d.jsx(X,{label:"Construction (label)"})})})}),d.jsx("div",{children:d.jsx("div",{className:"text-9xl font-bold font-slate-800",children:t.name})})]})},Sse=({data:t})=>{const{mapId:e,locale:n}=tn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[d.jsx("div",{className:"flex flex-row gap-2 items-center",children:d.jsx(Rt,{icon:uu,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/construction/requirements",params:{locale:n,mapId:e,buildingId:t.id},css:{base:["font-bold"]},children:t.name})}),d.jsx(bf,{value:100*t.cycle/t.cycles}),d.jsx(co,{className:"hidden",position:Ot.Right,type:"source",isConnectable:!1}),d.jsx(co,{className:"hidden",position:Ot.Left,type:"target",isConnectable:!1})]})},V1="icon-[lucide--land-plot]",Sp=384,Ep=128,nd=["p-2","bg-white","rounded-lg","border-[4px]","border-slate-300"],Ese={stroke:"#DD44AA",strokeWidth:3},Nse={land:_se,construction:wse,queue:Sse,building:vse,"building-route":xse},Ise={route:bse},kse=({userId:t,cycle:e,construction:n,queue:r,building:i,route:s,land:o,zoomToId:l,routing:u})=>{const f=Vn([["GameMap"]]),{mapId:p,locale:h}=tn({from:"/$locale/apps/derivean/map/$mapId"}),b=tc(),x=H.useMemo(()=>[...o.map(G=>({id:G.id,position:{x:G.x,y:G.y},width:G.width,height:G.height,selectable:!0,draggable:!1,data:G,type:"land",className:mn(nd,[G.color,"border-slate-600","opacity-25"]),zIndex:-1})),...n.map(G=>({id:G.id,data:G,position:{x:G.x,y:G.y},type:"construction",width:Sp,height:Ep,selectable:!1,className:mn(nd,[G.valid?["border-green-500"]:["border-red-500"]]),extent:"parent",parentId:G.landId})),...r.map(G=>u?{id:G.id,data:G,position:{x:G.x,y:G.y},type:"building-route",width:Sp,height:Ep,selectable:!1,className:mn(nd,["border-amber-400","bg-amber-50"],G.valid?void 0:["border-red-500"]),extent:"parent",parentId:G.landId}:{id:G.id,data:G,position:{x:G.x,y:G.y},type:"queue",width:Sp,height:Ep,selectable:!1,className:mn(nd,["border-amber-400","bg-amber-50"],G.valid?void 0:["border-red-500"]),extent:"parent",parentId:G.landId}),...i.map(G=>u?{id:G.id,data:G,position:{x:G.x,y:G.y},type:"building-route",width:Sp,height:Ep,className:mn(nd,G.valid?void 0:["border-red-500"]),extent:"parent",parentId:G.landId}:{id:G.id,data:G,position:{x:G.x,y:G.y},type:"building",width:Sp,height:Ep,selectable:!0,className:mn(nd,G.valid?void 0:["border-red-500"]),extent:"parent",parentId:G.landId})],[n,r,i,o,u]),_=H.useMemo(()=>[...s.map(G=>({id:G.id,source:G.fromId,target:G.toId,type:"route",animated:G.resourceCount>0,markerEnd:{type:Uh.ArrowClosed,color:G.resourceCount>0?"#b1b1b7":"#FF0000"},style:{stroke:G.resourceCount>0?void 0:"#FF0000",strokeWidth:2,pointerEvents:"all"}}))],[s]),[E,I]=_ie(x),[T,C]=Sie(_),{updateNode:j,getIntersectingNodes:q,fitView:L,getNodes:M}=wf();H.useEffect(()=>{I(x)},[x]),H.useEffect(()=>{C(_)},[_]),H.useEffect(()=>{l&&setTimeout(()=>{L({nodes:[{id:l}],duration:750})},250)},[L,l]);const W=Yt({async mutationFn({buildingId:G,x:Z,y:le}){return jt.transaction().execute(async ie=>{await ie.updateTable("Building").set({x:Z,y:le}).where("id","=",G).execute()})},async onSuccess(){await f()}}),P=Yt({async mutationFn(){return jt.transaction().execute(async G=>{const Z=M().filter(le=>q(le).filter(ie=>ie.type!=="land").length>0).map(le=>le.id);await G.updateTable("Building").where("id","in",G.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").where("l.mapId","=",p).select("b.id")).set({valid:!0}).execute(),await G.updateTable("Building").set({valid:!1}).where("id","in",Z).execute()})},async onSuccess(){await f()}}),O=H.useCallback(G=>{I(Z=>$1(G,Z))},[I]),z=H.useCallback((G,Z)=>{I(le=>le.map(ie=>ie.id===Z.id?{...ie,selected:!1}:ie))},[]),F=H.useCallback((G,Z)=>{},[q,j]),V=H.useCallback((G,Z)=>{W.mutate({buildingId:Z.id,x:Z.position.x,y:Z.position.y},{onSuccess(){P.mutate()}})},[q,W]),U=Yt({async mutationFn({fromId:G,toId:Z}){return jt.transaction().execute(async le=>le.insertInto("Route").values({id:On(),fromId:G,toId:Z,userId:t}).execute())},async onSuccess(){await f()}}),B=H.useCallback(({source:G,target:Z})=>U.mutate({fromId:G,toId:Z}),[U]);return d.jsx(d.Fragment,{children:d.jsxs("div",{className:"flex flex-row",children:[d.jsxs(rM,{nodes:E,edges:T,onNodesChange:O,onNodeDragStart:z,onNodeDrag:F,onNodeDragStop:V,onConnect:B,className:"grow h-screen",fitView:!0,snapToGrid:!0,snapGrid:[32,32],elementsSelectable:!1,nodeTypes:Nse,edgeTypes:Ise,connectionLineComponent:gse,connectionLineStyle:Ese,maxZoom:2,minZoom:.1,onDoubleClick:()=>{b({search:{routing:!u}})},onEdgeClick:(G,Z)=>{b({to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:h,buildingId:Z.source}})},zoomOnDoubleClick:!1,children:[d.jsx(mse,{userId:t,cycle:e,css:{base:["react-flow__panel","absolute","top-1","right-16"]},onDoubleClick:G=>{G.preventDefault(),G.stopPropagation()}}),d.jsx(hse,{userId:t,css:{base:["react-flow__panel","absolute","top-1","right-1"]}}),d.jsx(aM,{orientation:"horizontal",showZoom:!1,showFitView:!1}),d.jsx(cM,{zoomable:!0,draggable:!0,pannable:!0,maskColor:"rgba(0,0,0,0.2)"}),d.jsx(sM,{variant:ia.Lines,className:"bg-slate-50",gap:32,size:1}),d.jsxs("div",{className:"react-flow__panel flex flex-row p-2 border bg-white border-slate-300 shadow-xs",children:[d.jsx(Rt,{to:"/$locale/apps/derivean/game",params:{locale:h},children:d.jsx(gn,{iconEnabled:Ps,variant:{variant:"subtle"}})}),d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/building/list",params:{locale:h,mapId:p},children:d.jsx(gn,{iconEnabled:Bo,variant:{variant:"subtle"}})}),d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/land/list",params:{locale:h,mapId:p},children:d.jsx(gn,{iconEnabled:V1,variant:{variant:"subtle"}})})]})]}),d.jsx(fo,{})]})})},Cse=({cycle:t,userId:e,construction:n,building:r,queue:i,route:s,land:o,zoomToId:l,routing:u})=>d.jsx(nM,{children:d.jsx(kse,{userId:e,cycle:t,construction:n,queue:i,building:r,route:s,land:o,zoomToId:l,routing:u})}),oN=Dt("/$locale/apps/derivean/map/$mapId")({validateSearch:mr(D.object({zoomToId:D.string().optional(),routing:D.boolean().optional()})),async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r}}){const i=await n();return{user:i,construction:await t.ensureQueryData({queryKey:["GameMap",r,"construction"],async queryFn(){return e.transaction().execute(s=>Br({select:s.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bg.constructionId","bl.name","bg.x","bg.y","bg.valid"]).where("c.plan","=",!0).where("l.mapId","=",r).where("bg.userId","=",i.id),output:D.object({id:D.string().min(1),blueprintId:D.string().min(1),landId:D.string().min(1),constructionId:D.string().min(1),name:D.string().min(1),x:D.number(),y:D.number(),valid:Hi()})}))}}),queue:await t.ensureQueryData({queryKey:["GameMap",r,"queue"],async queryFn(){return e.transaction().execute(s=>Br({select:s.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bl.name","bg.x","bg.y","bg.valid","c.cycles","c.cycle"]).where("c.plan","=",!1).where("l.mapId","=",r).where("bg.userId","=",i.id),output:D.object({id:D.string().min(1),blueprintId:D.string().min(1),landId:D.string().min(1),name:D.string().min(1),x:D.number(),y:D.number(),cycles:D.number().int().nonnegative(),cycle:D.number().int().nonnegative(),valid:Hi()})}))}}),building:await t.ensureQueryData({queryKey:["GameMap",r,"building"],async queryFn(){return e.transaction().execute(s=>Br({select:s.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bg.productionId","bg.recurringProductionId","bg.valid",o=>o.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.productionId").select("r.name").as("productionName"),o=>o.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.recurringProductionId").select("r.name").as("recurringProductionName"),o=>o.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(l=>SF.jsonObject({id:l.ref("p.id"),name:l.ref("r.name"),cycle:l.ref("p.cycle"),cycles:l.ref("p.cycles")}).as("production")).whereRef("p.buildingId","=","bg.id").as("production"),"bl.name","bg.x","bg.y"]).where("bg.constructionId","is",null).where("l.mapId","=",r).where("bg.userId","=",i.id),output:D.object({id:D.string().min(1),blueprintId:D.string().min(1),landId:D.string().min(1),name:D.string().min(1),productionId:D.string().nullish(),recurringProductionId:D.string().nullish(),productionName:D.string().nullish(),recurringProductionName:D.string().nullish(),production:F9(D.object({id:D.string().min(1),name:D.string().min(1),cycle:D.number().int().nonnegative(),cycles:D.number().int().nonnegative()})).nullish(),x:D.number(),y:D.number(),valid:Hi()})}))}}),route:await t.ensureQueryData({queryKey:["GameMap",r,"route"],async queryFn(){return e.transaction().execute(s=>Br({select:s.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Blueprint as blf","blf.id","bf.blueprintId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blf.name as fromName","blt.name as toName",o=>o.selectFrom("Route_Resource as rr").whereRef("rr.routeId","=","r.id").select(l=>l.fn.count("rr.id").as("resourceCount")).as("resourceCount")]).where("r.userId","=",i.id),output:D.object({id:D.string().min(1),fromId:D.string().min(1),toId:D.string().min(1),fromName:D.string().min(1),toName:D.string().min(1),resourceCount:D.number().int().nonnegative()})}))}}),land:await t.ensureQueryData({queryKey:["GameMap",r,"land","list"],async queryFn(){return e.transaction().execute(async s=>Br({select:s.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","r.color","l.x","l.y","l.width","l.height"]).where("l.mapId","=",r).orderBy("r.name"),output:D.object({id:D.string().min(1),name:D.string().min(1),color:D.string().min(1),x:D.number().int(),y:D.number().int(),width:D.number().int(),height:D.number().int()})}))}}),cycle:await t.ensureQueryData({queryKey:["GameMap",r,"cycle"],async queryFn(){return e.transaction().execute(async s=>(await s.selectFrom("Cycle as c").select(o=>o.fn.count("c.id").as("count")).where("c.userId","=",i.id).executeTakeFirstOrThrow()).count)}})}},component(){const{user:t,construction:e,queue:n,building:r,route:i,land:s,cycle:o}=oN.useLoaderData(),{zoomToId:l,routing:u}=oN.useSearch();return d.jsx(Cse,{userId:t.id,cycle:o,construction:e,queue:n,building:r,route:i,land:s,zoomToId:l,routing:u})}}),hM=Dt("/$locale/apps/derivean/db/schema")({async loader({context:{kysely:t}}){return{tables:await t.introspection.getTables()}},component(){const{tables:t}=hM.useLoaderData(),e=({dataType:i,isNullable:s})=>{const o=i.toLowerCase();let l=`z.never({message: '${i}'})`;switch(o){case"integer":{l="z.number().int()";break}case"float4":{l="z.number()";break}case"datetime":{l="z.string()";break}case"boolean":{l="withBoolSchema()";break}}return o.startsWith("varchar")&&(l=`z.string()${s?"":".min(1)"}`),`
// ${i} / ${s?"nullable":"not nullable"}
${l}${s?".nullish()":""}
`},n=t.map(i=>{const s=i.name.replaceAll("_","");return`
export const with${s}Schema = <
    TShapeSchema extends ShapeSchema,
    TFilterSchema extends FilterSchema,
>({
    shape,
    filter,
}: {
    shape: TShapeSchema;
    filter: TFilterSchema;
}) => {
    return withSourceSchema({
        entity: IdentitySchema.merge(z.object({
                ${i.columns.filter(({name:o})=>o!=="id").map(o=>`
    "${o.name}": ${e(o)}
        `.trim()).join(`,
			`)},
        })),
        shape,
        filter,
        sort: [${i.columns.map(o=>`"${o.name}"`).join(", ")}],
    });
}

export type ${s}Entity = ReturnType<typeof with${s}Schema>['~entity'];
            `.trim()}),r=t.map(i=>{const s=i.name.replaceAll("_","");return`${i.name}: ${s}Entity;`});return d.jsxs("pre",{children:[`
import {
    IdentitySchema,
    withSourceSchema,
    type FilterSchema,
    type ShapeSchema,
    withBoolSchema,
} from "@use-pico/common";
import { z } from "zod";
            `.trim(),`

${n.join(`

`)}`,`

export interface Database {
    ${r.join(`
	`)}
}
                `]})}}),u3=Lr(),Tse=[u3({name:"name",header(){return d.jsx(X,{label:"User name (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsx(Rt,{to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:e})},size:14}),u3({name:"login",header(){return d.jsx(X,{label:"User login (label)"})},render({value:t}){return t},size:14})],Rse=({table:t,...e})=>{const n=Vn([["GameMap"],["Management"],["User_Inventory"]]),r=Yt({async mutationFn({userId:i}){return jt.transaction().execute(async s=>{await s.deleteFrom("Building").where("userId","=",i).execute(),await s.deleteFrom("Production").where("userId","=",i).execute(),await s.deleteFrom("Construction").where("userId","=",i).execute(),await s.deleteFrom("Cycle").where("userId","=",i).execute()})},async onSuccess(){await n()}});return d.jsx(Fr,{table:Dr({...t,columns:Tse}),action:{row({data:i}){return d.jsx(or,{children:d.jsx(QN,{icon:ii,onClick:()=>{r.mutateAsync({userId:i.id})},children:d.jsx(X,{label:"Reset game (menu)"})})})}},...e})},jse=vZ({shape:D.object({name:D.string().min(1),login:D.string().min(1),password:D.string().min(1)}),filter:qi.merge(D.object({login:D.string().optional(),password:D.string().optional()}))}),By=Dt("/$locale/apps/derivean/root/user/list")({validateSearch:mr(Pr(jse)),loaderDeps({search:{filter:t,cursor:e}}){return{filter:t,cursor:e}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["User","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>hr({select:i.selectFrom("User as u").select(["u.id","u.name","u.login"]),output:D.object({id:D.string().min(1),name:D.string().min(1),login:D.string().min(1)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=By.useLoaderData(),{filter:n,cursor:r,selection:i}=By.useSearch(),s=By.useNavigate(),{tva:o}=pr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(Rse,{table:{data:t,filter:{value:n,set:qr(s)},selection:{type:"multi",value:i,set:ys(s)}},fulltext:{value:n?.fulltext,set:Ar(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of users (label)"}),...Or(s)}})})}}),Ose=({entity:t,...e})=>{const{locale:n}=tn({from:"/$locale"});return d.jsxs(mu,{...e,children:[d.jsx(tr,{icon:g1,to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:d.jsx(X,{label:"View detail (menu)"})}),d.jsx(tr,{icon:Bo,to:"/$locale/apps/derivean/root/user/$id/building/list",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Building list (menu)"})})]})},qse=t=>{const{locale:e}=tn({from:"/$locale"});return d.jsx(yf,{title:({entity:n})=>d.jsx(vf,{icon:g1,title:n.name}),actions:()=>d.jsx(d.Fragment,{children:d.jsx(Rt,{icon:Vv,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},children:d.jsx(X,{label:"User list (label)"})})}),...t})},mM=Dt("/$locale/apps/derivean/root/user/$id")({async loader({context:{kysely:t},params:{id:e}}){return t.transaction().execute(async n=>({entity:await $o({select:n.selectFrom("User as u").select(["u.id","u.name"]).where("u.id","=",e),output:D.object({id:D.string().min(1),name:D.string().min(1)})})}))},component(){const{tva:t}=pr({from:"__root__"}),{entity:e}=mM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(qse,{entity:e}),d.jsx(Ose,{entity:e}),d.jsx(fo,{})]})}}),Cm=bZ({shape:D.object({code:D.string().min(1),label:D.string().min(1),group:D.string().nullish(),sort:Io()}),filter:qi.merge(D.object({code:D.string().optional(),group:D.string().optional()}))}),d3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(Cm.shape),defaultValues:{sort:0,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"code",label:d.jsx(X,{label:"Tag code (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("code")})}),d.jsx(hn,{formState:s.formState,name:"label",label:d.jsx(X,{label:"Tag label (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("label")})}),d.jsx(hn,{formState:s.formState,name:"group",label:d.jsx(X,{label:"Tag group (label)"}),children:d.jsx("input",{type:"text",className:o.input(),...s.register("group")})}),d.jsx(hn,{formState:s.formState,name:"sort",label:d.jsx(X,{label:"Tag sort (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("sort")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Fh,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},OS=Lr(),Ase=[OS({name:"label",header(){return d.jsx(X,{label:"Tag label (label)"})},render({value:t}){return t},size:14}),OS({name:"code",header(){return d.jsx(X,{label:"Tag code (label)"})},render({value:t}){return t},size:14}),OS({name:"group",header(){return d.jsx(X,{label:"Tag group (label)"})},render({value:t}){return t},filter:{path:"group",onFilter({data:t,filter:e}){e.shallow("group",t.group)}},size:24})],gM=({group:t,table:e,...n})=>{const r=Vn([["Tag"],["Resource"]]);return d.jsx(Fr,{table:Dr({...e,columns:Ase}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create tag (menu)"}),textTitle:d.jsx(X,{label:"Create tag (modal)"}),icon:Fh,children:d.jsx(d3,{defaultValues:{group:t},mutation:Yt({async mutationFn(i){return Rn.promise(jt.transaction().execute(s=>s.insertInto("Tag").values({id:On(),...i}).returningAll().executeTakeFirstOrThrow()),Wr("Create tag"))},async onSuccess(){await r()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit tag (modal)"}),icon:Fh,children:d.jsx(d3,{defaultValues:{group:t,...i},mutation:Yt({async mutationFn(s){return Rn.promise(jt.transaction().execute(o=>o.updateTable("Tag").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Wr("Edit tag"))},async onSuccess(){await r()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete tag (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>{await jt.transaction().execute(s=>s.deleteFrom("Tag").where("id","=",i.id).execute())},textContent:d.jsx(X,{label:"Tag delete (content)"}),textToast:"Tag delete",invalidator:r})})]})}},...n})},zy=Dt("/$locale/apps/derivean/root/tag/list")({validateSearch:mr(Pr(Cm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Tag","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async i=>hr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]).orderBy("t.sort","desc"),output:D.object({id:D.string().min(1),code:D.string().min(1),label:D.string().min(1),group:D.string().nullish(),sort:D.number().int().nonnegative()}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=zy.useLoaderData(),{filter:n,cursor:r,selection:i}=zy.useSearch(),s=zy.useNavigate(),{tva:o}=pr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(gM,{table:{data:t,filter:{value:n,set:qr(s)},selection:{type:"multi",value:i,set:ys(s)}},fulltext:{value:n?.fulltext,set:Ar(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of items"}),...Or(s)}})})}}),Pse=({group:t,...e})=>d.jsx(tJ,{icon:Fh,table:n=>d.jsx(gM,{group:t,...n}),render:({entities:n})=>d.jsx(QD,{tags:n}),queryKey:"Tag",query:async({filter:n,cursor:r})=>jt.transaction().execute(async i=>hr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]),output:Cm.entity,query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("t.id","=",o.id)),o?.idIn&&(l=l.where("t.id","in",o.idIn)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("t.code","like",u),f("t.group","like",u),f("t.label","like",u),f("t.id","like",u)]))}return l},filter:n,cursor:r})),...e}),yM=yZ({shape:D.object({name:D.string().min(1),transport:ao(),tagIds:D.array(D.string()).optional()}),filter:qi.merge(D.object({name:D.string().optional()}))}),f3=({group:t="resource",mutation:e,defaultValues:n,variant:r,tva:i=yi,css:s})=>{const o=bi({resolver:vi(yM.shape),defaultValues:{transport:1,...n}}),l=i({...r,isLoading:o.formState.isLoading,isSubmitting:o.formState.isSubmitting,css:s}).slots;return d.jsxs("form",{className:l.base(),onSubmit:Gi({form:o,mutation:e}),children:[d.jsx(li,{variant:{highlight:!0},error:o.formState.errors.root}),d.jsx(hn,{formState:o.formState,name:"name",label:d.jsx(X,{label:"Resource name (label)"}),children:d.jsx("input",{type:"text",className:l.input(),...o.register("name")})}),d.jsx(hn,{formState:o.formState,name:"transport",label:d.jsx(X,{label:"Resource transport (label)"}),hint:d.jsx(X,{label:"Amount of resources transported per cycle (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:l.input(),min:.5,step:.5,...o.register("transport")})}),d.jsx(hn,{formState:o.formState,name:"tagIds",label:d.jsx(X,{label:"Resource tags (label)"}),children:d.jsx(Qi,{control:o.control,name:"tagIds",render:({field:{ref:u,...f}})=>d.jsx(Pse,{group:t,textTitle:d.jsx(X,{label:"Select resource tags (title)"}),textSelect:d.jsx(X,{label:"Select resource tags (label)"}),allowEmpty:!0,...f})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Zn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},rd=Lr(),Fse=[rd({name:"name",header(){return d.jsx(X,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsx(Rt,{to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),rd({name:"transport",header(){return d.jsx(X,{label:"Resource transport (label)"})},render({value:t}){return on({number:t})},size:12}),rd({name:"countProduction",header(){return d.jsx(X,{label:"Resource production count (label)"})},render({value:t}){return d.jsx(Ri,{css:{base:t!==void 0&&t===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:on({number:t})})},size:12}),rd({name:"countRequirement",header(){return d.jsx(X,{label:"Resource requirement count (label)"})},render({data:t,value:e}){return d.jsx(Ri,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:on({number:e})})},size:12}),rd({name:"countProductionRequirement",header(){return d.jsx(X,{label:"Resource production requirement count (label)"})},render({data:t,value:e}){return d.jsx(Ri,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:on({number:e})})},size:18}),rd({name:"tags",header(){return d.jsx(X,{label:"Resource tags (label)"})},render({value:t}){return d.jsx(QD,{tags:t})},size:32})],bM=({group:t,table:e,...n})=>{const r=Vn([["Resource"],["Resource_Tag"]]);return d.jsx(Fr,{table:Dr({...e,columns:Fse}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create resource (menu)"}),textTitle:d.jsx(X,{label:"Create resource (modal)"}),icon:Zn,children:({close:i})=>d.jsx(f3,{group:t,mutation:Yt({async mutationFn({name:s,transport:o,tagIds:l=[]}){return jt.transaction().execute(async u=>{const f=await u.insertInto("Resource").values({id:On(),name:s,transport:o}).returningAll().executeTakeFirstOrThrow();return l.length&&await u.insertInto("Resource_Tag").values(l.map(p=>({id:On(),resourceId:f.id,tagId:p}))).execute(),f})},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit resource (modal)"}),icon:Zn,children:({close:s})=>d.jsx(f3,{defaultValues:{...i,tagIds:i.tags.map(({id:o})=>o)},mutation:Yt({async mutationFn({tagIds:o,...l}){return Rn.promise(jt.transaction().execute(async u=>{const f=await u.updateTable("Resource").set(l).where("id","=",i.id).returningAll().executeTakeFirstOrThrow();return await u.deleteFrom("Resource_Tag").where("resourceId","=",f.id).execute(),o?.length&&await u.insertInto("Resource_Tag").values(o.map(p=>({id:On(),resourceId:f.id,tagId:p}))).execute(),f}),Wr("Update resource"))},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete resource (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Resource").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Resource delete (content)"}),textToast:"Resource delete",invalidator:r})})]})}},...n})},Wy=Dt("/$locale/apps/derivean/root/resource/list")({validateSearch:mr(Pr(yM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Resource","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>hr({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>fr`json_group_array(json_object(
                                            'id', ${o.ref("t.id")},
                                            'code', ${o.ref("t.code")},
                                            'group', ${o.ref("t.group")},
                                            'sort', ${o.ref("t.sort")},
                                            'label', ${o.ref("t.label")}
                                        ))`.as("tags")).where("t.id","in",s.selectFrom("Resource_Tag as rt").select("rt.tagId").whereRef("rt.resourceId","=","r.id")).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.id","like",u),f("r.name","like",u),f("r.id","in",f.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return l},output:D.object({id:D.string().min(1),name:D.string().min(1),transport:ao(),countRequirement:D.number().nonnegative(),countProduction:D.number().nonnegative(),countProductionRequirement:D.number().nonnegative(),tags:hs(Cm.entity)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=Wy.useLoaderData(),{filter:n,cursor:r,selection:i}=Wy.useSearch(),s=Wy.useNavigate(),{tva:o}=pr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(bM,{table:{data:t,filter:{value:n,set:qr(s)},selection:{type:"multi",value:i,set:ys(s)}},fulltext:{value:n?.fulltext,set:Ar(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of items"}),...Or(s)}})})}}),Dse=({entity:t,...e})=>{const{locale:n}=tn({from:"/$locale"});return d.jsx(mu,{...e,children:d.jsx(tr,{icon:Zn,to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:d.jsx(X,{label:"View detail (menu)"})})})},Lse=t=>{const{locale:e}=tn({from:"/$locale"});return d.jsx(yf,{title:({entity:n})=>d.jsx(vf,{icon:Zn,title:n.name}),actions:()=>d.jsx(d.Fragment,{children:d.jsx(Rt,{icon:Vv,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:d.jsx(X,{label:"Resource list (label)"})})}),...t})},vM=Dt("/$locale/apps/derivean/root/resource/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Resource",n],async queryFn(){return e.transaction().execute(async r=>({entity:await $o({select:r.selectFrom("Resource as r").select(["r.id","r.name"]).where("r.id","=",n),output:D.object({id:D.string().min(1),name:D.string().min(1)})})}))}})},component:()=>{const{tva:t}=pr({from:"__root__"}),{entity:e}=vM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Lse,{entity:e}),d.jsx(Dse,{entity:e}),d.jsx(fo,{})]})}}),Mse=["bg-blue-200","bg-blue-400","bg-blue-600","bg-green-200","bg-green-400","bg-green-600","bg-orange-200","bg-orange-400","bg-orange-600","bg-slate-200","bg-slate-400","bg-gray-200","bg-gray-400"],xM=gZ({shape:D.object({name:D.string().min(1),color:D.string().min(1),minWidth:Io(),maxWidth:Io(),minHeight:Io(),maxHeight:Io(),probability:Io(),limit:Io()}),filter:qi}),p3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(xM.shape),defaultValues:{name:"",color:"slate",minWidth:1,maxWidth:4,minHeight:1,maxHeight:4,limit:32,probability:100,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"name",label:d.jsx(X,{label:"Region name (label)"}),children:d.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),d.jsxs("div",{className:"flex flex-row gap-4 items-center w-full",children:[d.jsx(hn,{formState:s.formState,name:"minWidth",label:d.jsx(X,{label:"Region min width (label)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("minWidth")})}),d.jsx(hn,{formState:s.formState,name:"maxWidth",label:d.jsx(X,{label:"Region max width (label)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("maxWidth")})})]}),d.jsxs("div",{className:"flex flex-row gap-4 items-center w-full",children:[d.jsx(hn,{formState:s.formState,name:"minHeight",label:d.jsx(X,{label:"Region min height (label)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("minHeight")})}),d.jsx(hn,{formState:s.formState,name:"maxHeight",label:d.jsx(X,{label:"Region max height (label)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("maxHeight")})})]}),d.jsx(hn,{formState:s.formState,name:"probability",label:d.jsx(X,{label:"Region spawn probability (label)"}),hint:d.jsx(X,{label:"Region spawn probability (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:.5,max:100,step:.5,...s.register("probability")})}),d.jsx(hn,{formState:s.formState,name:"limit",label:d.jsx(X,{label:"Region limit (label)"}),hint:d.jsx(X,{label:"Region limit (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("limit")})}),d.jsx(hn,{formState:s.formState,name:"color",label:d.jsx(X,{label:"Color (label)"}),children:d.jsx(Qi,{control:s.control,name:"color",render:({field:{ref:l,...u}})=>d.jsx(f1,{items:Mse.map(f=>({id:f,color:f})),render:({entity:f})=>d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx("div",{className:mn("w-4","h-4",f.color)}),f.color]}),...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:h2,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},Np=Lr(),$se=[Np({name:"name",header(){return d.jsx(X,{label:"Region name (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsx(Rt,{to:"/$locale/apps/derivean/root/region/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),Np({name:"width",header(){return d.jsx(X,{label:"Region width (label)"})},render({data:t}){return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx("div",{children:on({number:t.minWidth})}),d.jsx("div",{children:d.jsx(en,{icon:Jb,variant:{size:"xs"}})}),d.jsx("div",{children:on({number:t.maxWidth})})]})},size:16}),Np({name:"height",header(){return d.jsx(X,{label:"Region height (label)"})},render({data:t}){return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx("div",{children:on({number:t.minHeight})}),d.jsx("div",{children:d.jsx(en,{icon:Jb,variant:{size:"xs"}})}),d.jsx("div",{children:on({number:t.maxHeight})})]})},size:12}),Np({name:"probability",header(){return d.jsx(X,{label:"Region probability (label)"})},render({value:t}){return d.jsxs(Ri,{children:[on({number:t}),"%"]})},size:14}),Np({name:"limit",header(){return d.jsx(X,{label:"Region limit (label)"})},render({value:t}){return on({number:t})},size:18})],Bse=({table:t,...e})=>{const n=Vn([["Region"]]);return d.jsx(Fr,{table:Dr({...t,columns:$se}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create region (menu)"}),textTitle:d.jsx(X,{label:"Create region (modal)"}),icon:ME,children:({close:r})=>d.jsx(p3,{mutation:Yt({async mutationFn(i){return jt.transaction().execute(async s=>s.insertInto("Region").values({id:On(),...i}).execute())},async onSuccess(){await n(),r()}})})})})},row({data:r}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit region (modal)"}),icon:ME,children:({close:i})=>d.jsx(p3,{defaultValues:r,mutation:Yt({async mutationFn(s){return jt.transaction().execute(async o=>o.updateTable("Region").set(s).where("id","=",r.id).execute())},async onSuccess(){await n(),i()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete region (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>jt.transaction().execute(async i=>i.deleteFrom("Region").where("id","=",r.id).execute()),textContent:d.jsx(X,{label:"Delete region (content)"}),textToast:"Delete region",invalidator:n})})]})}},...e})},Vy=Dt("/$locale/apps/derivean/root/region/list")({validateSearch:mr(Pr(xM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Region","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>hr({select:i.selectFrom("Region as r").select(["r.id","r.name","r.color","r.minWidth","r.maxWidth","r.minHeight","r.maxHeight","r.probability","r.limit"]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.id","like",u),f("r.name","like",u)]))}return l},output:D.object({id:D.string().min(1),name:D.string().min(1),color:D.string().min(1),minWidth:D.number().int().min(0),maxWidth:D.number().int().min(0),minHeight:D.number().int().min(0),maxHeight:D.number().int().min(0),probability:D.number().int().min(0),limit:D.number().int().min(0)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=Vy.useLoaderData(),{filter:n,cursor:r,selection:i}=Vy.useSearch(),s=Vy.useNavigate(),{tva:o}=pr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(Bse,{table:{data:t,filter:{value:n,set:qr(s)},selection:{type:"multi",value:i,set:ys(s)}},fulltext:{value:n?.fulltext,set:Ar(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of items"}),...Or(s)}})})}}),zse=xn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2","bg-sky-100","border-sky-300","text-sky-500"]},variant:{missing:{true:[]}},match:[{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{missing:!1}}),wM=({dependencies:t,variant:e,tva:n=zse,css:r,...i})=>{const s=n({...e,css:r}).slots;return d.jsx(Gd,{items:t,render:({entity:o})=>d.jsx("div",{className:s.item(),children:d.jsx("div",{children:o.name})}),...i})};var dy={},h3;function Wse(){if(h3)return dy;h3=1;function t(r,i,s,o){var l=new Set;return function(u){if(!l.has(u)){var f=new Set,p=[],h=[];for(h.push({node:u,processed:!1});h.length>0;){var b=h[h.length-1],x=b.processed,_=b.node;if(x)h.pop(),p.pop(),f.delete(_),l.add(_),(!i||r.get(_).length===0)&&s.push(_);else{if(l.has(_)){h.pop();continue}else if(f.has(_)){if(o){h.pop();continue}throw p.push(_),new n(p)}f.add(_),p.push(_);for(var E=r.get(_),I=E.length-1;I>=0;I--)h.push({node:E[I],processed:!1});b.processed=!0}}}}}var e=dy.DepGraph=function(i){this.nodes=new Map,this.outgoingEdges=new Map,this.incomingEdges=new Map,this.circular=i&&!!i.circular};e.prototype={size:function(){return this.nodes.size},addNode:function(r,i){this.hasNode(r)||(arguments.length===2?this.nodes.set(r,i):this.nodes.set(r,r),this.outgoingEdges.set(r,[]),this.incomingEdges.set(r,[]))},removeNode:function(r){this.hasNode(r)&&(this.nodes.delete(r),this.outgoingEdges.delete(r),this.incomingEdges.delete(r),[this.incomingEdges,this.outgoingEdges].forEach(function(i){i.forEach(function(s){var o=s.indexOf(r);o>=0&&s.splice(o,1)})}))},hasNode:function(r){return this.nodes.has(r)},getNodeData:function(r){if(this.hasNode(r))return this.nodes.get(r);throw new Error("Node does not exist: "+r)},setNodeData:function(r,i){if(this.hasNode(r))this.nodes.set(r,i);else throw new Error("Node does not exist: "+r)},addDependency:function(r,i){if(!this.hasNode(r))throw new Error("Node does not exist: "+r);if(!this.hasNode(i))throw new Error("Node does not exist: "+i);return this.outgoingEdges.get(r).indexOf(i)===-1&&this.outgoingEdges.get(r).push(i),this.incomingEdges.get(i).indexOf(r)===-1&&this.incomingEdges.get(i).push(r),!0},removeDependency:function(r,i){var s;this.hasNode(r)&&(s=this.outgoingEdges.get(r).indexOf(i),s>=0&&this.outgoingEdges.get(r).splice(s,1)),this.hasNode(i)&&(s=this.incomingEdges.get(i).indexOf(r),s>=0&&this.incomingEdges.get(i).splice(s,1))},clone:function(){var r=this,i=new e;return r.nodes.forEach(function(s,o){i.nodes.set(o,s),i.outgoingEdges.set(o,r.outgoingEdges.get(o).slice(0)),i.incomingEdges.set(o,r.incomingEdges.get(o).slice(0))}),i.circular=r.circular,i},directDependenciesOf:function(r){if(this.hasNode(r))return this.outgoingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},directDependantsOf:function(r){if(this.hasNode(r))return this.incomingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},dependenciesOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.outgoingEdges,i,s,this.circular);o(r);var l=s.indexOf(r);return l>=0&&s.splice(l,1),s}else throw new Error("Node does not exist: "+r)},dependantsOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.incomingEdges,i,s,this.circular);o(r);var l=s.indexOf(r);return l>=0&&s.splice(l,1),s}else throw new Error("Node does not exist: "+r)},overallOrder:function(r){var i=this,s=[],o=Array.from(this.nodes.keys());if(o.length===0)return s;if(!this.circular){var l=t(this.outgoingEdges,!1,[],this.circular);o.forEach(function(f){l(f)})}var u=t(this.outgoingEdges,r,s,this.circular);return o.filter(function(f){return i.incomingEdges.get(f).length===0}).forEach(function(f){u(f)}),this.circular&&o.filter(function(f){return s.indexOf(f)===-1}).forEach(function(f){u(f)}),s},entryNodes:function(){var r=this;return Array.from(this.nodes.keys()).filter(function(i){return r.incomingEdges.get(i).length===0})}},e.prototype.directDependentsOf=e.prototype.directDependantsOf,e.prototype.dependentsOf=e.prototype.dependantsOf;var n=dy.DepGraphCycleError=function(r){var i="Dependency Cycle Found: "+r.join(" -> "),s=new Error(i);return s.cyclePath=r,Object.setPrototypeOf(s,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(s,n),s};return n.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(n,Error),dy}var _M=Wse();const Tm=async({tx:t})=>{const e=new _M.DepGraph({circular:!1});for await(const{id:n,name:r}of await t.selectFrom("Blueprint").select(["id","name"]).execute())e.addNode(n,r);for await(const{blueprintId:n,dependencyId:r}of await t.selectFrom("Blueprint_Dependency").select(["blueprintId","dependencyId"]).execute())e.addDependency(n,r);return e},Jh=async({tx:t})=>{const e=Tm({tx:t}),n=await t.selectFrom("Blueprint as bl").select(["bl.id"]).execute();for await(const r of n){const i=(await e).dependenciesOf(r.id);await t.updateTable("Blueprint").set({sort:i.length}).where("id","=",r.id).execute()}},SM=async({tx:t,blueprintId:e})=>{await t.deleteFrom("Blueprint_Inventory").where("blueprintId","=",e).execute();const n=await t.selectFrom("Blueprint_Requirement").select(["resourceId","amount"]).where("blueprintId","=",e).execute();for await(const{resourceId:i,amount:s}of n)await t.insertInto("Blueprint_Inventory").values({id:On(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:On(),resourceId:i,amount:0,limit:s,type:"construction"}).returning("id").executeTakeFirstOrThrow()).id}).execute();const r=await t.selectFrom(t.selectFrom("Blueprint_Production").select(["resourceId","amount"]).where("blueprintId","=",e).union(t.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).union(t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).as("resources")).select(["resourceId",i=>i.fn.max("amount").as("amount")]).groupBy("resourceId").orderBy("amount","desc").execute();for await(const{resourceId:i,amount:s}of r)await t.insertInto("Blueprint_Inventory").values({id:On(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:On(),resourceId:i,amount:0,limit:s*5,type:"storage"}).returning("id").executeTakeFirstOrThrow()).id}).execute()},Vse=xn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]},variant:{passive:{true:[]},missing:{true:[]}},match:[{if:{passive:!0},then:{item:["bg-purple-100","border-purple-300","text-purple-500"]}},{if:{passive:!1},then:{item:["bg-sky-100","border-sky-300","text-sky-500"]}},{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{passive:!1,missing:!1}}),cx=({requirements:t,diff:e,variant:n,tva:r=Vse,css:i,...s})=>{const o=r({...n,css:i}).slots;return d.jsx(Gd,{items:t,render:({entity:l})=>{const u=e?.find(p=>p.resourceId===l.resourceId),f=u?.amount?u.amount-l.amount:-l.amount;return d.jsxs("div",{className:o.item({css:!e||f>=0?[]:["text-red-700","bg-red-100","border-red-300"],passive:l.passive}),children:[d.jsx("div",{children:l.name}),d.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",on({number:l.amount})]}),e?f>=0?d.jsx(en,{icon:"icon-[pajamas--check-sm]",css:{base:["text-emerald-600"]}}):d.jsxs("div",{className:"flex flex-row gao-2 items-center text-sm text-red-500",children:[d.jsx(en,{icon:"icon-[charm--cross]",css:{base:["text-red-500"]}}),"(",on({number:f}),")"]}):null]})},...s})},Ip=Lr(),Use=[Ip({name:"name",header(){return d.jsx(X,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Rt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:n},search:{zoomTo:t.id}}),d.jsx(Rt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),Ip({name:"dependencies",header(){return d.jsx(X,{label:"Blueprint dependencies (label)"})},render({value:t}){return t.length>0?d.jsxs("div",{className:"flex flex-col flex-wrap gap-2 w-full",children:[d.jsx(wM,{textTitle:d.jsx(X,{label:"Blueprint dependencies (title)"}),dependencies:t}),d.jsx("div",{className:"border-b border-slate-200"})]}):d.jsx(X,{label:"No dependencies (label)"})},size:32}),Ip({name:"requirements",header(){return d.jsx(X,{label:"Required resources (label)"})},render({value:t}){return d.jsx(cx,{textTitle:d.jsx(X,{label:"Blueprint requirements (title)"}),textEmpty:d.jsx(X,{label:"No requirements (label)"}),requirements:t})},size:32}),Ip({name:"cycles",header(){return d.jsx(X,{label:"Construction cycles (label)"})},render({value:t}){return d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx(en,{icon:Gh}),on({number:t})]})},size:8}),Ip({name:"limit",header(){return d.jsx(X,{label:"Building limit (label)"})},render({value:t}){return on({number:t})},size:8})],EM=({dependencies:t,table:e,...n})=>{const r=Vn([["Blueprint_Inventory"],["Blueprint"],["Inventory"]]),i=Yt({async mutationFn(){return jt.transaction().execute(async s=>{const o=await s.selectFrom("Blueprint").select(["id"]).execute();for await(const{id:l}of o)await SM({tx:s,blueprintId:l})})},async onSuccess(){await r()},onError(s){console.error(s)}});return d.jsx(Fr,{table:Dr({...e,columns:Use,context:{dependencies:t}}),action:{table(){return d.jsxs(or,{children:[d.jsx(QN,{icon:Ba,onClick:()=>{Rn.promise(i.mutateAsync(),Wr("Fill inventories"))},children:d.jsx(X,{label:"Fill inventories (label)"})}),d.jsx(kn,{label:d.jsx(X,{label:"Create blueprint (menu)"}),textTitle:d.jsx(X,{label:"Create blueprint (modal)"}),icon:Pn,children:({close:s})=>d.jsx(av,{mutation:Yt({async mutationFn(o){return Rn.promise(jt.transaction().execute(async l=>{const u=l.insertInto("Blueprint").values({id:On(),...o}).returningAll().executeTakeFirstOrThrow();return await Jh({tx:l}),u}),Wr("Create blueprint"))},async onSuccess(){await r(),s()}})})})]})},row({data:s}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit blueprint (modal)"}),icon:Pn,children:({close:o})=>d.jsx(av,{defaultValues:s,mutation:Yt({async mutationFn(l){return Rn.promise(jt.transaction().execute(async u=>{const f=u.updateTable("Blueprint").set(l).where("id","=",s.id).returningAll().executeTakeFirstOrThrow();return await Jh({tx:u}),f}),Wr("Update blueprint"))},async onSuccess(){await r(),o()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete blueprint (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>jt.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",s.id).execute()),textContent:d.jsx(X,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:r})})]})}},...n})},sc=oZ({shape:D.object({dependencyId:D.string().min(1)}),filter:qi.merge(D.object({blueprintId:D.string().optional(),dependencyId:D.string().optional()}))}),_f=fZ({shape:D.object({resourceId:D.string().min(1),amount:ao(),passive:D.boolean()}),filter:qi.merge(D.object({blueprintId:D.string().optional(),resourceId:D.string().optional()}))}),Uy=Dt("/$locale/apps/derivean/root/blueprint/list")({validateSearch:mr(Pr(W1)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles","bl.limit",o=>o.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(l=>fr`json_group_array(json_object(
                                                'id', ${l.ref("br.id")},
                                                'amount', ${l.ref("br.amount")},
                                                'passive', ${l.ref("br.passive")},
                                                'resourceId', ${l.ref("br.resourceId")},
                                                'blueprintId', ${l.ref("br.blueprintId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),o=>o.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(l=>fr`json_group_array(json_object(
                                                        'id', ${l.ref("bd.id")},
                                                        'dependencyId', ${l.ref("bd.dependencyId")},
                                                        'blueprintId', ${l.ref("bd.blueprintId")},
                                                        'name', ${l.ref("bl2.name")}
                                                    ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;if(l?.id&&(u=u.where("bl.id","=",l.id)),l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bl.id","like",f),p("bl.name","like",f)]))}return u},output:D.object({id:D.string().min(1),name:D.string().min(1),cycles:D.number().nonnegative(),sort:D.number().nonnegative(),limit:D.number().nonnegative(),requirements:hs(_f.entity.merge(D.object({name:D.string().min(1)}))),dependencies:hs(sc.entity.merge(D.object({name:D.string().min(1)})))}),filter:n,cursor:r}))}}),dependencies:await e.transaction().execute(async s=>Tm({tx:s}))}},component(){const{data:{data:t,count:e},dependencies:n}=Uy.useLoaderData(),{filter:r,cursor:i,selection:s}=Uy.useSearch(),o=Uy.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(EM,{dependencies:n,table:{data:t,filter:{value:r,set:qr(o)},selection:{type:"multi",value:s,set:ys(o)}},fulltext:{value:r?.fulltext,set:Ar(o)},cursor:{count:e,cursor:i,textTotal:d.jsx(X,{label:"Number of blueprints"}),...Or(o)}})})}}),Hse=({entity:t,...e})=>{const{locale:n}=tn({from:"/$locale"});return d.jsxs(mu,{...e,children:[d.jsx(tr,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:d.jsx(X,{label:"View detail (menu)"})}),d.jsx(tr,{icon:Bo,to:"/$locale/apps/derivean/root/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Blueprint dependencies (menu)"})}),d.jsx(tr,{icon:Zn,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Required resources (menu)"})}),d.jsx(tr,{icon:Ds,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Resource production (menu)"})}),d.jsx(tr,{icon:Ba,to:"/$locale/apps/derivean/root/blueprint/$id/inventory",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Blueprint inventory (menu)"})}),d.jsx(tr,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Blueprint conflicts (menu)"})}),d.jsx(tr,{icon:kD,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Edit (menu)"})})]})},Kse=t=>{const{locale:e}=tn({from:"/$locale"});return d.jsx(yf,{title:({entity:n})=>d.jsx(vf,{icon:Pn,title:n.name}),actions:({entity:n})=>d.jsxs(d.Fragment,{children:[d.jsx(Rt,{icon:Vv,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},children:d.jsx(X,{label:"Blueprint list (label)"})}),d.jsx(Rt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},search:{zoomTo:n.id},children:d.jsx(X,{label:"Editor (label)"})})]}),...t})},NM=Dt("/$locale/apps/derivean/root/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>$o({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",s=>s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(o=>fr`json_group_array(json_object(
                                                  'id', ${o.ref("br.id")},
                                                  'amount', ${o.ref("br.amount")},
                                                  'passive', ${o.ref("br.passive")},
                                                  'resourceId', ${o.ref("br.resourceId")},
                                                  'blueprintId', ${o.ref("br.blueprintId")},
                                                  'name', ${o.ref("r.name")}
                                              ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),s=>s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(o=>fr`json_group_array(json_object(
                                                          'id', ${o.ref("bd.id")},
                                                          'dependencyId', ${o.ref("bd.dependencyId")},
                                                          'blueprintId', ${o.ref("bd.blueprintId")},
                                                          'name', ${o.ref("bl2.name")}
                                                      ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("bl.id","like",u),f("bl.name","like",u),f("bl.id","in",f.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),f("bl.id","in",f.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return l},output:D.object({id:D.string().min(1),name:D.string().min(1),cycles:D.number().nonnegative(),sort:D.number().nonnegative(),requirements:hs(_f.entity.merge(D.object({name:D.string().min(1)}))),dependencies:hs(sc.entity.merge(D.object({name:D.string().min(1)})))})}))}}),graph:await e.transaction().execute(async i=>Tm({tx:i}))}},component(){const{tva:t}=pr({from:"__root__"}),{entity:e}=NM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Kse,{entity:e}),d.jsx(Hse,{entity:e}),d.jsx(fo,{})]})}}),Qse=Dt("/$locale/apps/derivean/map/$mapId/view")({}),m3=Lr(),Gse=[m3({name:"name",header(){return d.jsx(X,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Rt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/game",params:{locale:n},search:{blueprintId:t.id}}),d.jsx(Rt,{icon:Pn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),m3({name:"cycles",header(){return d.jsx(X,{label:"Construction cycles (label)"})},render({value:t}){return d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx(en,{icon:Gh}),on({number:t})]})},size:8})],Jse=({table:t,...e})=>d.jsx(Fr,{table:Dr({...t,columns:Gse}),...e}),Hy=Dt("/$locale/apps/derivean/game/blueprint/list")({validateSearch:mr(Pr(W1)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{filter:r,cursor:i}}){const s=await n();return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:r,cursor:i}],async queryFn(){return e.transaction().execute(async l=>hr({select:l.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","in",l.selectFrom("Building as bg").select("bg.blueprintId").where("bg.userId","=",s.id)).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:u,where:f}){let p=u;if(f?.id&&(p=p.where("bl.id","=",f.id)),f?.fulltext){const h=`%${f.fulltext}%`.toLowerCase();p=p.where(b=>b.or([b("bl.id","like",h),b("bl.name","like",h)]))}return p},output:D.object({id:D.string().min(1),name:D.string().min(1),cycles:D.number().nonnegative()}),filter:r,cursor:i}))}})}},component(){const{data:{data:t,count:e}}=Hy.useLoaderData(),{filter:n,cursor:r}=Hy.useSearch(),i=Hy.useNavigate(),{tva:s}=pr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Jse,{table:{data:t,filter:{value:n,set:qr(i)}},fulltext:{value:n?.fulltext,set:Ar(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of blueprints"}),...Or(i)}})})}}),Zse=({entity:t,...e})=>{const{locale:n}=tn({from:"/$locale"});return d.jsxs(mu,{...e,children:[d.jsx(tr,{icon:Pn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:d.jsx(X,{label:"View detail (menu)"})}),d.jsx(tr,{icon:Bo,to:"/$locale/apps/derivean/game/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Blueprint dependencies (menu)"})}),d.jsx(tr,{icon:Zn,to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Required resources (menu)"})}),d.jsx(tr,{icon:Ds,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Resource production (menu)"})}),d.jsx(tr,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Blueprint conflicts (menu)"})})]})},Yse=t=>{const{locale:e}=tn({from:"/$locale"});return d.jsx(yf,{title:({entity:n})=>d.jsx(vf,{icon:Pn,title:n.name}),actions:()=>d.jsx(d.Fragment,{children:d.jsx(Rt,{icon:Vv,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:e},children:d.jsx(X,{label:"Blueprint list (label)"})})}),...t})},IM=Dt("/$locale/apps/derivean/game/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>$o({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("bl.id","like",u),f("bl.name","like",u),f("bl.id","in",f.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),f("bl.id","in",f.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return l},output:D.object({id:D.string().min(1),name:D.string().min(1),cycles:D.number().nonnegative()})}))}}),graph:await e.transaction().execute(async i=>Tm({tx:i}))}},component(){const{tva:t}=pr({from:"__root__"}),{entity:e}=IM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Yse,{entity:e}),d.jsx(Zse,{entity:e}),d.jsx(fo,{})]})}}),Xse=Dt("/$locale/apps/derivean/root/user/$id/view")({component(){return"yep"}}),eoe=Dt("/$locale/apps/derivean/root/resource/$id/view")({component(){return d.jsx("div",{children:'Hello "/$locale/apps/derivean/root/resource/$id/view/"!'})}}),toe=Dt("/$locale/apps/derivean/root/region/$id/view")({component(){return"view"}}),U1="icon-[carbon--document-requirements]",noe=({entity:t,...e})=>{const{locale:n}=tn({from:"/$locale"});return d.jsxs(mu,{...e,children:[d.jsx(tr,{icon:U1,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Production requirements (menu)"})}),d.jsx(tr,{icon:Zn,to:"/$locale/apps/derivean/root/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Production resource requirements (menu)"})}),d.jsx(tr,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Production resource dependencies (menu)"})})]})},roe=t=>{const{locale:e}=tn({from:"/$locale"});return d.jsx(yf,{title:({entity:n})=>d.jsx(vf,{icon:Ds,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>d.jsx(d.Fragment,{children:d.jsx(Rt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:d.jsx(X,{label:"Building base detail (label)"})})}),...t})},kM=Dt("/$locale/apps/derivean/root/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await $o({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:D.object({id:D.string().min(1),resource:D.string().min(1),blueprint:D.string().min(1),blueprintId:D.string().min(1),amount:D.number().nonnegative(),cycles:D.number().int().nonnegative()})})}))}})},component(){const{entity:t}=kM.useLoaderData(),{tva:e}=pr({from:"__root__"}),n=e().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(roe,{entity:t}),d.jsx(noe,{entity:t}),d.jsx(fo,{})]})}}),ioe=({graph:t,blueprintId:e,mode:n="dependencies",reverse:r=!1})=>{try{const i=(s=>r?s.reverse():s)(n==="dependants"?t.dependantsOf(e):t.dependenciesOf(e));return d.jsxs("div",{className:mn(["flex","flex-row","flex-wrap","gap-2","items-center"]),children:[i.length>0?d.jsx(en,{css:{base:["text-emerald-500"]},icon:"icon-[charm--circle-tick]"}):d.jsx(en,{css:{base:["text-amber-500"]},icon:"icon-[fe--question]"}),i.length>0?i.map(s=>d.jsx(Ri,{css:{base:["bg-emerald-200","text-emerald-700","border-emerald-500"]},children:t.getNodeData(s)},On())):d.jsx(X,{css:{base:["text-amber-500","font-bold"]},label:"No dependents (label)"})]})}catch(i){return i instanceof _M.DepGraphCycleError?d.jsxs("div",{className:mn(["flex","flex-row","gap-2","items-center"]),children:[d.jsx(en,{css:{base:["text-red-500"]},icon:"icon-[charm--circle-cross]"}),i.cyclePath.map(s=>d.jsx(Ri,{css:{base:["bg-red-200","text-red-700","border-red-500"]},children:t.getNodeData(s)},On()))]}):"kaboom"}},soe=({dependencies:t,...e})=>d.jsx(wD,{items:[{id:"name",label:d.jsx(X,{label:"Building name (label)"}),render({entity:n}){return n.name}},{id:"cycles",label:d.jsx(X,{label:"Construction cycles (label)"}),render({entity:n}){return on({number:n.cycles})}},{id:"requirements",label:d.jsx(X,{label:"Required resources (label)"}),render({entity:n}){return d.jsx(cx,{requirements:n.requirements,textEmpty:d.jsx(X,{label:"No requirements (label)"})})}},{id:"dependencies",label:d.jsx(X,{label:"Blueprint dependencies (label)"}),render({entity:n}){return d.jsx(wM,{dependencies:n.dependencies,textEmpty:d.jsx(X,{label:"No dependencies (label)"})})}},{id:"deps",label:d.jsx(X,{label:"Blueprint dependency graph (label)"}),render({entity:n}){return d.jsx(ioe,{graph:t,blueprintId:n.id})}}],...e}),CM=Dt("/$locale/apps/derivean/root/blueprint/$id/view")({async loader({context:{kysely:t}}){return{dependencies:await t.transaction().execute(async e=>Tm({tx:e}))}},component(){const{dependencies:t}=CM.useLoaderData(),{entity:e}=mi({from:"/$locale/apps/derivean/root/blueprint/$id"});return d.jsx("div",{className:"w-1/2 mx-auto",children:d.jsx(soe,{dependencies:t,entity:e})})}}),Rm=({group:t,...e})=>d.jsx(HD,{icon:Zn,textTitle:d.jsx(X,{label:"Select resource (title)"}),textSelect:d.jsx(X,{label:"Select resource (label)"}),table:n=>d.jsx(bM,{group:t,...n}),render:({entity:n})=>n.name,queryKey:"Resource",query:async({filter:n,cursor:r})=>jt.transaction().execute(async i=>hr({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>fr`json_group_array(json_object(
                                                'id', ${o.ref("t.id")},
                                                'code', ${o.ref("t.code")},
                                                'group', ${o.ref("t.group")},
                                                'sort', ${o.ref("t.sort")},
                                                'label', ${o.ref("t.label")}
                                            ))`.as("tags")).where("t.id","in",i.selectFrom("Resource_Tag as rt").select("rt.tagId").where("rt.resourceId","=",s.ref("r.id"))).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("r.id","=",o.id)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.id","like",u),f("r.name","like",u),f("r.id","in",f.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return l},output:D.object({id:D.string().min(1),name:D.string().min(1),transport:ao(),tags:hs(Cm.entity),countRequirement:D.number().nonnegative(),countProduction:D.number().nonnegative(),countProductionRequirement:D.number().nonnegative()}),filter:n,cursor:r})),...e}),g3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(_f.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"resourceId",label:d.jsx(X,{label:"Requirement (label)"}),children:d.jsx(Qi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Rm,{allowEmpty:!0,...u})})}),d.jsx(hn,{formState:s.formState,name:"amount",label:d.jsx(X,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(hn,{formState:s.formState,name:"passive",label:d.jsx(X,{label:"Passive requirement (label)"}),hint:d.jsx(X,{label:"Passive requirement (hint)"}),children:d.jsx(Qi,{control:s.control,name:"passive",render:({field:{ref:l,...u}})=>d.jsx(xD,{...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Zn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},qS=Lr(),ooe=[qS({name:"name",header(){return d.jsx(X,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),qS({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:10}),qS({name:"passive",header(){return d.jsx(X,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Wv,{value:t})},size:10})],aoe=({blueprintId:t,table:e,...n})=>{const r=Vn([["Blueprint"],["Blueprint_Requirement"],["Blueprint_Resource_Requirement"],["Resource"]]);return d.jsx(Fr,{table:Dr({...e,columns:ooe}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create requirement item (menu)"}),textTitle:d.jsx(X,{label:"Create requirement item (modal)"}),icon:Zn,children:d.jsx(g3,{mutation:Yt({async mutationFn(i){return jt.transaction().execute(async s=>s.insertInto("Blueprint_Requirement").values({id:On(),...i,blueprintId:t}).execute())},async onSuccess(){await r()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit requirement item (modal)"}),icon:Zn,children:d.jsx(g3,{defaultValues:i,mutation:Yt({async mutationFn(s){return jt.transaction().execute(async o=>o.updateTable("Blueprint_Requirement").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete requirement item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Requirement").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete requirement item (content)"}),textToast:"Delete requirement item",invalidator:r})})]})}},...n})},Lp=Dt("/$locale/apps/derivean/root/blueprint/$id/requirements")({validateSearch:mr(Pr(_f)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("br.id","=",l.id)),l?.idIn&&(u=u.where("br.id","in",l.idIn)),l?.resourceId&&(u=u.where("br.resourceId","=",l.resourceId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),passive:Hi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Lp.useLoaderData(),{filter:n,cursor:r,selection:i}=Lp.useSearch(),{id:s}=Lp.useParams(),o=Lp.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(aoe,{blueprintId:s,table:{data:t,filter:{value:n,set:qr(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Ar(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of requirements (label)"}),...Or(o)}})})}}),H1=lZ({shape:D.object({resourceId:D.string().min(1),amount:ao(),cycles:Io()}),filter:qi.merge(D.object({blueprintId:D.string().optional(),resourceId:D.string().optional()}))}),y3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(H1.shape),defaultValues:{amount:1,cycles:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"resourceId",label:d.jsx(X,{label:"Resource name (label)"}),children:d.jsx(Qi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Rm,{textTitle:d.jsx(X,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),d.jsx(hn,{formState:s.formState,name:"amount",label:d.jsx(X,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(hn,{formState:s.formState,name:"cycles",label:d.jsx(X,{label:"Production cycles (label)"}),hint:d.jsx(X,{label:"Production cycles (hint)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("cycles")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Ds,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},jm=t=>d.jsx(HD,{icon:Pn,textTitle:d.jsx(X,{label:"Select blueprint (title)"}),table:({table:e,...n})=>d.jsx(EM,{table:{...e,hidden:["requirements","dependencies"]},...n}),render:({entity:e})=>e.name,queryKey:"Blueprint",query:async({filter:e,cursor:n})=>jt.transaction().execute(async r=>hr({select:r.selectFrom("Blueprint as b").select(["b.id","b.name","b.sort","b.cycles","b.limit",i=>i.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(s=>fr`json_group_array(json_object(
                                                    'id', ${s.ref("br.id")},
                                                    'amount', ${s.ref("br.amount")},
                                                    'passive', ${s.ref("br.passive")},
                                                    'resourceId', ${s.ref("br.resourceId")},
                                                    'blueprintId', ${s.ref("br.blueprintId")},
                                                    'name', ${s.ref("r.name")}
                                                ))`.as("requirements")).whereRef("br.blueprintId","=","b.id").as("requirements"),i=>i.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.blueprintId").select(s=>fr`json_group_array(json_object(
                                                    'id', ${s.ref("bd.id")},
                                                    'dependencyId', ${s.ref("bd.dependencyId")},
                                                    'blueprintId', ${s.ref("bd.blueprintId")},
                                                    'name', ${s.ref("b.name")}
                                                ))`.as("requirements")).whereRef("bd.blueprintId","=","b.id").as("dependencies")]).orderBy("b.name","asc"),query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("b.id","=",s.id)),s?.fulltext){const l=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("b.id","like",l),u("b.name","like",l)]))}return o},output:D.object({id:D.string().min(1),name:D.string().min(1),cycles:D.number().nonnegative(),sort:D.number().nonnegative(),limit:D.number().nonnegative(),requirements:hs(_f.entity.merge(D.object({name:D.string().min(1)}))),dependencies:hs(sc.entity.merge(D.object({name:D.string().min(1)})))}),filter:e,cursor:n})),...t}),loe=D.object({blueprintId:D.string().min(1)}),coe=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(loe),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"blueprintId",label:d.jsx(X,{label:"Target blueprint (label)"}),children:d.jsx(Qi,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>d.jsx(jm,{allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Pn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},id=Lr(),uoe=[id({name:"name",header(){return d.jsx(X,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsx(Rt,{icon:Ds,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),id({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:8}),id({name:"cycles",header(){return d.jsx(X,{label:"Production cycles (label)"})},render({value:t}){return on({number:t})},size:8}),id({name:"requirements",header(){return d.jsx(X,{label:"Required resources (label)"})},render({value:t}){return d.jsx(cx,{textTitle:d.jsx(X,{label:"Resource requirements (title)"}),textEmpty:d.jsx(X,{label:"No requirements (label)"}),requirements:t})},size:32}),id({name:"resources",header(){return d.jsx(X,{label:"Required production resources (label)"})},render({value:t}){return d.jsx(Gd,{items:t,render:({entity:e})=>d.jsxs("div",{className:mn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[d.jsx("div",{children:e.name}),d.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",on({number:e.amount})]})]})})},size:32}),id({name:"dependencies",header(){return d.jsx(X,{label:"Required production dependencies (label)"})},render({value:t}){return d.jsx(Gd,{items:t,render:({entity:e})=>d.jsx("div",{className:mn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:d.jsx("div",{children:e.name})})})},size:32})],doe=({blueprintId:t,table:e,...n})=>{const r=Vn([["Blueprint"],["Blueprint_Production"],["Blueprint_Production_Requirement"],["Resource"]]);return d.jsx(Fr,{table:Dr({...e,columns:uoe}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create blueprint production (menu)"}),textTitle:d.jsx(X,{label:"Create blueprint production (modal)"}),icon:Ds,children:({close:i})=>d.jsx(y3,{mutation:Yt({async mutationFn(s){return jt.transaction().execute(async o=>await o.insertInto("Blueprint_Production").values({id:On(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit blueprint production (modal)"}),icon:Ds,children:d.jsx(y3,{defaultValues:i,mutation:Yt({async mutationFn(s){return jt.transaction().execute(async o=>o.updateTable("Blueprint_Production").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),d.jsx(kn,{label:d.jsx(X,{label:"Move production to (menu)"}),textTitle:d.jsx(X,{label:"Move production to (modal)"}),icon:Zn,children:({close:s})=>d.jsx(coe,{mutation:Yt({async mutationFn(o){return jt.transaction().execute(async l=>{await l.updateTable("Blueprint_Production").set({blueprintId:o.blueprintId}).where("id","=",i.id).execute()})},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete blueprint production (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete blueprint production (content)"}),textToast:"Delete blueprint production",invalidator:r})})]})}},...n})},Om=cZ({shape:D.object({blueprintId:D.string().min(1)}),filter:qi}),qm=uZ({shape:D.object({resourceId:D.string().min(1),amount:ao(),passive:D.boolean()}),filter:qi.merge(D.object({blueprintProductionId:D.string().optional(),resourceId:D.string().optional()}))}),Am=dZ({shape:D.object({resourceId:D.string().min(1),amount:ao()}),filter:qi.merge(D.object({resourceId:D.string().optional()}))}),Mp=Dt("/$locale/apps/derivean/root/blueprint/$id/production")({validateSearch:mr(Pr(H1)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>fr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'passive', ${l.ref("bpr.passive")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>fr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(l=>fr`json_group_array(json_object(
                                                'id', ${l.ref("bpd.id")},
                                                'blueprintProductionId', ${l.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${l.ref("bpd.blueprintId")},
                                                'name', ${l.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),cycles:D.number().nonnegative(),requirements:hs(qm.entity.merge(D.object({name:D.string().min(1)}))),resources:hs(Am.entity.merge(D.object({name:D.string().min(1)}))),dependencies:hs(Om.entity.merge(D.object({name:D.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Mp.useLoaderData(),{filter:n,cursor:r,selection:i}=Mp.useSearch(),{id:s}=Mp.useParams(),o=Mp.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(doe,{blueprintId:s,table:{data:t,filter:{value:n,set:qr(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Ar(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of productions (label)"}),...Or(o)}})})}}),foe=({label:t,...e})=>d.jsx(X,{label:`Inventory type - ${t}`,...e}),poe=hZ({shape:D.object({resourceId:D.string().min(1),amount:ao(),limit:ao(),type:D.enum(["storage","construction"])}),filter:qi.merge(D.object({resourceId:D.string().optional(),type:D.enum(["storage","construction"]).optional()}))}),b3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(poe.shape),defaultValues:{amount:0,limit:0,type:"storage",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"resourceId",label:d.jsx(X,{label:"Resource name (label)"}),children:d.jsx(Qi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Rm,{textTitle:d.jsx(X,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),d.jsx(hn,{formState:s.formState,name:"type",label:d.jsx(X,{label:"Inventory type (label)"}),children:d.jsx(Qi,{control:s.control,name:"type",render:({field:{ref:l,...u}})=>d.jsx(f1,{items:[{id:"storage",value:sa.text("Inventory type - storage")},{id:"construction",value:sa.text("Inventory type - construction")}],render:({entity:f})=>f.value,...u})})}),d.jsx(hn,{formState:s.formState,name:"amount",label:d.jsx(X,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(hn,{formState:s.formState,name:"limit",label:d.jsx(X,{label:"Inventory limit (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("limit")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Ba,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},fy=Lr(),hoe=[fy({name:"name",header(){return d.jsx(X,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),fy({name:"type",header(){return d.jsx(X,{label:"Inventory type (label)"})},render({value:t}){return d.jsx(foe,{label:t})},filter:{path:"type",onFilter({data:t,filter:e}){e.shallow("type",t.type)}},size:12}),fy({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:12}),fy({name:"limit",header(){return d.jsx(X,{label:"Inventory limit (label)"})},render({value:t,data:e}){return d.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[d.jsx("div",{children:on({number:t})}),d.jsx(bf,{value:100*e.amount/e.limit})]})},size:14})],moe=({blueprintId:t,table:e,...n})=>{const r=Vn([["Blueprint_Inventory"]]),i=Yt({async mutationFn(){return jt.transaction().execute(async s=>SM({tx:s,blueprintId:t}))},async onSuccess(){await r()},onError(s){console.error(s)}});return d.jsx(Fr,{table:Dr({...e,columns:hoe}),action:{table(){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Create inventory item (menu)"}),textTitle:d.jsx(X,{label:"Create inventory item (modal)"}),icon:Ba,children:d.jsx(b3,{mutation:Yt({async mutationFn(s){return Rn.promise(jt.transaction().execute(async o=>o.insertInto("Blueprint_Inventory").values({id:On(),blueprintId:t,inventoryId:(await o.insertInto("Inventory").values({id:On(),...s}).returningAll().executeTakeFirstOrThrow()).id}).returningAll().executeTakeFirstOrThrow()),Wr("Create inventory item"))},async onSuccess(){await r()}})})}),d.jsx(QN,{icon:Ba,onClick:()=>{i.mutate()},children:d.jsx(X,{label:"Fill inventory (label)"})})]})},row({data:s}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit inventory item (modal)"}),icon:Ba,children:d.jsx(b3,{defaultValues:s,mutation:Yt({async mutationFn(o){return Rn.promise(jt.transaction().execute(async l=>l.updateTable("Inventory").set(o).where("id","=",s.inventoryId).returningAll().executeTakeFirstOrThrow()),Wr("Update inventory item"))},async onSuccess(){await r()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>jt.transaction().execute(async o=>o.deleteFrom("Inventory").where("id","=",s.inventoryId).execute()),textContent:d.jsx(X,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:r})})]})}},...n})},goe=aZ({shape:D.object({blueprintId:D.string().min(1),inventoryId:D.string().min(1)}),filter:qi.merge(D.object({blueprintId:D.string().optional(),inventoryId:D.string().optional()}))}),$p=Dt("/$locale/apps/derivean/root/blueprint/$id/inventory")({validateSearch:mr(Pr(goe)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Inventory","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>hr({select:s.selectFrom("Blueprint_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").innerJoin("Resource as r","r.id","i.resourceId").select(["bi.id","r.name","i.amount","i.limit","i.type","i.resourceId","bi.blueprintId","bi.inventoryId"]).where("bi.blueprintId","=",i).orderBy("i.type","asc").orderBy("r.name","asc"),query({select:o,where:l}){let u=o;if(l?.id&&(u=u.where("bi.id","=",l.id)),l?.idIn&&(u=u.where("bi.id","in",l.idIn)),l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bi.id","like",`%${f}%`),p("r.id","like",`%${f}%`),p("r.name","like",`%${f}%`),p("r.id","in",p.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(h=>h.or([h("t.code","like",f),h("t.label","like",f),h("t.group","like",f)])))]))}return u},output:D.object({id:D.string().min(1),name:D.string().min(1),type:D.enum(["storage","construction"]),resourceId:D.string().min(1),blueprintId:D.string().min(1),inventoryId:D.string().min(1),amount:D.number().nonnegative(),limit:D.number().int().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=$p.useLoaderData(),{filter:n,cursor:r,selection:i}=$p.useSearch(),{id:s}=$p.useParams(),o=$p.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(moe,{blueprintId:s,table:{data:t,filter:{value:n,set:qr(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Ar(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of items"}),...Or(o)}})})}}),TM=Dt("/$locale/apps/derivean/root/blueprint/$id/edit")({component:()=>{const{entity:t}=mi({from:"/$locale/apps/derivean/root/blueprint/$id"}),e=TM.useNavigate(),n=Vn([["Blueprint"]]);return d.jsx("div",{className:"w-1/2 mx-auto",children:d.jsx(av,{defaultValues:t,mutation:Yt({async mutationFn(r){return Rn.promise(jt.transaction().execute(async i=>i.updateTable("Blueprint").set(r).where("id","=",t.id).returningAll().executeTakeFirstOrThrow()),Wr("Update blueprint"))},async onSuccess(){await n(),e({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{id:t.id}})}})})})}}),v3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(sc.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"dependencyId",label:d.jsx(X,{label:"Blueprint dependency (label)"}),children:d.jsx(Qi,{control:s.control,name:"dependencyId",render:({field:{ref:l,...u}})=>d.jsx(jm,{textTitle:d.jsx(X,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Pn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},yoe=Lr(),boe=[yoe({name:"name",header(){return d.jsx(X,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsx(Rt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],voe=({blueprintId:t,table:e,...n})=>{const r=Vn([["Blueprint_Dependency"],["Blueprint"]]);return d.jsx(Fr,{table:Dr({...e,columns:boe}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create blueprint dependency (menu)"}),textTitle:d.jsx(X,{label:"Create blueprint dependency (modal)"}),icon:Pn,children:({close:i})=>d.jsx(v3,{mutation:Yt({async mutationFn(s){return Rn.promise(jt.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Dependency").values({id:On(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await Jh({tx:o}),l}),Wr("Create blueprint dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit blueprint dependency (modal)"}),icon:Pn,children:({close:s})=>d.jsx(v3,{defaultValues:i,mutation:Yt({async mutationFn(o){return Rn.promise(jt.transaction().execute(async l=>l.updateTable("Blueprint_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Wr("Update blueprint dependency"))},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete blueprint dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Dependency").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete blueprint dependency (content)"}),textToast:"Delete blueprint dependency",invalidator:r})})]})}},...n})},Bp=Dt("/$locale/apps/derivean/root/blueprint/$id/dependencies")({validateSearch:mr(Pr(sc)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bd.id","=",l.id)),l?.idIn&&(u=u.where("bd.id","in",l.idIn)),l?.blueprintId&&(u=u.where("bd.blueprintId","=",l.blueprintId)),l?.dependencyId&&(u=u.where("bd.dependencyId","=",l.dependencyId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1),dependencyId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Bp.useLoaderData(),{filter:n,cursor:r,selection:i}=Bp.useSearch(),{id:s}=Bp.useParams(),o=Bp.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(voe,{blueprintId:s,table:{data:t,filter:{value:n,set:qr(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Ar(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of requirements (label)"}),...Or(o)}})})}}),xoe=sZ({shape:D.object({conflictId:D.string().min(1)}),filter:qi}),x3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(xoe.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"conflictId",label:d.jsx(X,{label:"Blueprint conflict (label)"}),hint:d.jsx(X,{label:"Blueprint conflict (hint)"}),children:d.jsx(Qi,{control:s.control,name:"conflictId",render:({field:{ref:l,...u}})=>d.jsx(jm,{textTitle:d.jsx(X,{label:"Select blueprint conflict (title)"}),allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Pn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},woe=Lr(),_oe=[woe({name:"name",header(){return d.jsx(X,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsx(Rt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],Soe=({blueprintId:t,table:e,...n})=>{const r=Vn([["Blueprint_Conflict"],["Blueprint"]]);return d.jsx(Fr,{table:Dr({...e,columns:_oe}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create blueprint conflict (menu)"}),textTitle:d.jsx(X,{label:"Create blueprint conflict (modal)"}),icon:Pn,children:({close:i})=>d.jsx(x3,{mutation:Yt({async mutationFn(s){return Rn.promise(jt.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Conflict").values({id:On(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await Jh({tx:o}),l}),Wr("Create blueprint conflict"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit blueprint conflict (modal)"}),icon:Pn,children:({close:s})=>d.jsx(x3,{defaultValues:i,mutation:Yt({async mutationFn(o){return Rn.promise(jt.transaction().execute(async l=>l.updateTable("Blueprint_Conflict").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Wr("Update blueprint conflict"))},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete blueprint conflict (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Conflict").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete blueprint conflict (content)"}),textToast:"Delete blueprint conflict",invalidator:r})})]})}},...n})},zp=Dt("/$locale/apps/derivean/root/blueprint/$id/conflicts")({validateSearch:mr(Pr(sc)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bc.id","=",l.id)),l?.idIn&&(u=u.where("bc.id","in",l.idIn)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1),conflictId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=zp.useLoaderData(),{filter:n,cursor:r,selection:i}=zp.useSearch(),{id:s}=zp.useParams(),o=zp.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(Soe,{blueprintId:s,table:{data:t,filter:{value:n,set:qr(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Ar(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of conflicts (label)"}),...Or(o)}})})}}),Eoe=Dt("/$locale/apps/derivean/map/$mapId/route/$routeId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,routeId:r}}){return{route:await t.ensureQueryData({queryKey:["GameMap",n,"route",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>$o({select:i.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Blueprint as blf","blf.id","bf.blueprintId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blf.name as fromName","blt.name as toName"]).where("r.id","=",r),output:D.object({id:D.string().min(1),fromId:D.string().min(1),toId:D.string().min(1),fromName:D.string().min(1),toName:D.string().min(1)})}))}})}}}),Noe=({land:t})=>{const{mapId:e,locale:n}=tn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx("div",{className:mn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/land/list",params:{locale:n,mapId:e},search:{zoomToId:t.id},children:t.name}),d.jsxs("div",{className:"flex flex-col items-end text-xs",children:[d.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d.jsx("div",{className:"font-bold",children:on({number:t.x})}),d.jsx("div",{children:":"}),d.jsx("div",{className:"font-bold",children:on({number:t.y})})]}),d.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d.jsx("div",{className:"font-bold",children:on({number:t.width})}),d.jsx("div",{children:"x"}),d.jsx("div",{className:"font-bold",children:on({number:t.height})})]})]})]})})},Ioe=xn({slot:{base:["flex","flex-col","gap-4","w-4/12","border-l-2","border-slate-200","shadow-xs","relative","max-h-screen"],title:["flex","flex-row","justify-between","items-center","px-4","py-4","shadow-md"],content:["flex","flex-col","gap-2","max-h-full","overflow-y-auto","px-4","mb-4"]},variant:{},defaults:{}}),Ms=({icon:t,textTitle:e,textSubTitle:n,variant:r,tva:i=Ioe,css:s,children:o})=>{const{mapId:l,locale:u}=tn({from:"/$locale/apps/derivean/map/$mapId"}),f=i({...r,css:s}).slots;return d.jsxs("div",{className:f.base(),children:[d.jsxs("div",{className:f.title(),children:[d.jsxs("div",{className:"flex flex-col gap-2 font-bold",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(en,{icon:t,css:{base:["text-slate-500"]}}),e]}),n?d.jsx("div",{className:"flex flex-row gap-2 items-center text-sm text-slate-500",children:n}):null]}),d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:u,mapId:l},children:d.jsx(gn,{iconEnabled:u1,variant:{variant:"subtle"}})})]}),d.jsx("div",{className:f.content(),children:o})]})},koe=({land:t,...e})=>d.jsx(Ms,{icon:V1,textTitle:d.jsx(X,{label:"Land list (label)"}),...e,children:t.map(n=>d.jsx(Noe,{land:n},n.id))}),RM=Dt("/$locale/apps/derivean/map/$mapId/land/list")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n}}){return{land:await t.ensureQueryData({queryKey:["GameMap",n,"land","list"],async queryFn(){return e.transaction().execute(async r=>Br({select:r.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId","l.x","l.y","l.width","l.height"]).where("l.mapId","=",n).orderBy("r.name").orderBy("l.width","desc").orderBy("l.height","desc"),output:D.object({id:D.string().min(1),name:D.string().min(1),mapId:D.string().min(1),x:D.number(),y:D.number(),width:D.number(),height:D.number()})}))}})}},component(){const{land:t}=RM.useLoaderData();return d.jsx(koe,{land:t})}}),Coe=Dt("/$locale/apps/derivean/map/$mapId/land/$landId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,landId:r}}){return{land:await t.ensureQueryData({queryKey:["GameMap",n,"land",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>$o({select:i.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId"]).where("l.id","=",r),output:D.object({id:D.string().min(1),name:D.string().min(1),mapId:D.string().min(1)})}))}})}}}),Toe=({building:t})=>{const{mapId:e,locale:n}=tn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx("div",{className:mn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx(Rt,{icon:Bo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:n,mapId:e,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),d.jsx(Rt,{icon:V1,to:"/$locale/apps/derivean/map/$mapId/building/list",params:{locale:n,mapId:e},search:{zoomToId:t.landId},children:t.land})]})})},Roe=({building:t,...e})=>d.jsx(Ms,{icon:Bo,textTitle:d.jsx(X,{label:"Building list (label)"}),...e,children:t.length>0?t.map(n=>d.jsx(Toe,{building:n},n.id)):d.jsx("div",{className:mn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"No buildings yet. (label)"})})}),jM=Dt("/$locale/apps/derivean/map/$mapId/building/list")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n}}){return{building:await t.ensureQueryData({queryKey:["GameMap",n,"building","list"],async queryFn(){return e.transaction().execute(async r=>Br({select:r.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","b.landId","r.name as land"]).where("l.mapId","=",n).orderBy("bl.name","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),landId:D.string().min(1),land:D.string().min(1)})}))}})}},component(){const{building:t}=jM.useLoaderData();return d.jsx(Roe,{building:t})}}),joe=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{building:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>$o({select:i.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","r.name as land","b.productionId","b.recurringProductionId"]).where("b.id","=",r),output:D.object({id:D.string().min(1),name:D.string().min(1),land:D.string().min(1),productionId:D.string().nullish(),recurringProductionId:D.string().nullish()})}))}})}}}),Ooe=Dt("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId")({async loader({context:{queryClient:t,kysely:e},params:{blueprintId:n}}){return{blueprint:await t.ensureQueryData({queryKey:["GameMap","blueprint",n,"fetch"],async queryFn(){return e.transaction().execute(async r=>$o({select:r.selectFrom("Blueprint as b").select(["b.id","b.name"]).where("b.id","=",n),output:D.object({id:D.string().min(1),name:D.string().min(1)})}))}})}}}),qoe=({entity:t,...e})=>{const{locale:n}=tn({from:"/$locale"});return d.jsxs(mu,{...e,children:[d.jsx(tr,{icon:U1,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Production requirements (menu)"})}),d.jsx(tr,{icon:Zn,to:"/$locale/apps/derivean/game/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Production resource requirements (menu)"})}),d.jsx(tr,{icon:Pn,to:"/$locale/apps/derivean/game/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Production resource dependencies (menu)"})})]})},Aoe=t=>{const{locale:e}=tn({from:"/$locale"});return d.jsx(yf,{title:({entity:n})=>d.jsx(vf,{icon:Ds,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>d.jsx(d.Fragment,{children:d.jsx(Rt,{icon:Pn,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:d.jsx(X,{label:"Building base detail (label)"})})}),...t})},OM=Dt("/$locale/apps/derivean/game/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await $o({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:D.object({id:D.string().min(1),resource:D.string().min(1),blueprint:D.string().min(1),blueprintId:D.string().min(1),amount:D.number().nonnegative(),cycles:D.number().int().nonnegative()})})}))}})},component(){const{entity:t}=OM.useLoaderData(),{tva:e}=pr({from:"__root__"}),n=e().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Aoe,{entity:t}),d.jsx(qoe,{entity:t}),d.jsx(fo,{})]})}}),Poe=t=>d.jsx(wD,{items:[{id:"name",label:d.jsx(X,{label:"Building name (label)"}),render({entity:e}){return e.name}},{id:"cycles",label:d.jsx(X,{label:"Construction cycles (label)"}),render({entity:e}){return on({number:e.cycles})}}],...t}),Foe=Dt("/$locale/apps/derivean/game/blueprint/$id/view")({component(){const{entity:t}=mi({from:"/$locale/apps/derivean/game/blueprint/$id"});return d.jsx("div",{className:"w-1/2 mx-auto",children:d.jsx(Poe,{entity:t})})}}),AS=Lr(),Doe=[AS({name:"name",header(){return d.jsx(X,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),AS({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:10}),AS({name:"passive",header(){return d.jsx(X,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Wv,{value:t})},size:10})],Loe=({table:t,...e})=>d.jsx(Fr,{table:Dr({...t,columns:Doe}),...e}),Ky=Dt("/$locale/apps/derivean/game/blueprint/$id/requirements")({validateSearch:mr(Pr(_f)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("br.id","=",l.id)),l?.idIn&&(u=u.where("br.id","in",l.idIn)),l?.resourceId&&(u=u.where("br.resourceId","=",l.resourceId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),passive:Hi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Ky.useLoaderData(),{filter:n,cursor:r}=Ky.useSearch(),i=Ky.useNavigate(),{tva:s}=pr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Loe,{table:{data:t,filter:{value:n,set:qr(i)}},fulltext:{value:n?.fulltext,set:Ar(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of requirements (label)"}),...Or(i)}})})}}),sd=Lr(),Moe=[sd({name:"name",header(){return d.jsx(X,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsx(Rt,{icon:Ds,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),sd({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:8}),sd({name:"cycles",header(){return d.jsx(X,{label:"Production cycles (label)"})},render({value:t}){return on({number:t})},size:8}),sd({name:"requirements",header(){return d.jsx(X,{label:"Required resources (label)"})},render({value:t}){return d.jsx(cx,{textTitle:d.jsx(X,{label:"Resource requirements (title)"}),textEmpty:d.jsx(X,{label:"No requirements (label)"}),requirements:t})},size:32}),sd({name:"resources",header(){return d.jsx(X,{label:"Required production resources (label)"})},render({value:t}){return d.jsx(Gd,{items:t,render:({entity:e})=>d.jsxs("div",{className:mn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[d.jsx("div",{children:e.name}),d.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",on({number:e.amount})]})]})})},size:32}),sd({name:"dependencies",header(){return d.jsx(X,{label:"Required production dependencies (label)"})},render({value:t}){const{locale:e}=tn({from:"/$locale"});return d.jsx(Gd,{items:t,render:({entity:n})=>d.jsx("div",{className:mn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:d.jsx(Rt,{to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:e,id:n.blueprintId},children:n.name})})})},size:32})],$oe=({table:t,...e})=>d.jsx(Fr,{table:Dr({...t,columns:Moe}),...e}),Qy=Dt("/$locale/apps/derivean/game/blueprint/$id/production")({validateSearch:mr(Pr(H1)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>fr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'passive', ${l.ref("bpr.passive")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>fr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(l=>fr`json_group_array(json_object(
                                                'id', ${l.ref("bpd.id")},
                                                'blueprintProductionId', ${l.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${l.ref("bpd.blueprintId")},
                                                'name', ${l.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),cycles:D.number().nonnegative(),requirements:hs(qm.entity.merge(D.object({name:D.string().min(1)}))),resources:hs(Am.entity.merge(D.object({name:D.string().min(1)}))),dependencies:hs(Om.entity.merge(D.object({name:D.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Qy.useLoaderData(),{filter:n,cursor:r}=Qy.useSearch(),i=Qy.useNavigate(),{tva:s}=pr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx($oe,{table:{data:t,filter:{value:n,set:qr(i)}},fulltext:{value:n?.fulltext,set:Ar(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of productions (label)"}),...Or(i)}})})}}),Boe=Lr(),zoe=[Boe({name:"name",header(){return d.jsx(X,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsx(Rt,{icon:Pn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],Woe=({table:t,...e})=>d.jsx(Fr,{table:Dr({...t,columns:zoe}),...e}),Gy=Dt("/$locale/apps/derivean/game/blueprint/$id/dependencies")({validateSearch:mr(Pr(sc)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bd.id","=",l.id)),l?.idIn&&(u=u.where("bd.id","in",l.idIn)),l?.blueprintId&&(u=u.where("bd.blueprintId","=",l.blueprintId)),l?.dependencyId&&(u=u.where("bd.dependencyId","=",l.dependencyId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1),dependencyId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Gy.useLoaderData(),{filter:n,cursor:r}=Gy.useSearch(),i=Gy.useNavigate(),{tva:s}=pr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Woe,{table:{data:t,filter:{value:n,set:qr(i)}},fulltext:{value:n?.fulltext,set:Ar(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of dependencies (label)"}),...Or(i)}})})}}),Voe=Lr(),Uoe=[Voe({name:"name",header(){return d.jsx(X,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsx(Rt,{icon:Pn,to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],Hoe=({table:t,...e})=>d.jsx(Fr,{table:Dr({...t,columns:Uoe}),...e}),Jy=Dt("/$locale/apps/derivean/game/blueprint/$id/conflicts")({validateSearch:mr(Pr(sc)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bc.id","=",l.id)),l?.idIn&&(u=u.where("bc.id","in",l.idIn)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1),conflictId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Jy.useLoaderData(),{filter:n,cursor:r}=Jy.useSearch(),i=Jy.useNavigate(),{tva:s}=pr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Hoe,{table:{data:t,filter:{value:n,set:qr(i)}},fulltext:{value:n?.fulltext,set:Ar(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of conflicts (label)"}),...Or(i)}})})}}),qM=pZ({shape:D.object({blueprintId:D.string().min(1),constructionId:D.string().optional(),productionId:D.string().optional(),recurringProductionId:D.string().optional(),x:ao(),y:ao()}),filter:qi.merge(D.object({userId:D.string().optional(),blueprintId:D.string().optional(),name:D.string().optional()}))}),Koe=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(qM.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"blueprintId",label:d.jsx(X,{label:"Select blueprint (label)"}),children:d.jsx(Qi,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>d.jsx(jm,{allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Bo,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},Qoe=Lr(),Goe=[Qoe({name:"name",header(){return d.jsx(X,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsx(Rt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId}}),e]})},size:14})],Joe=({table:t,...e})=>{const n=Vn([["Building"]]);return d.jsx(Fr,{table:Dr({...t,columns:Goe}),action:{row({data:r}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit building (modal)"}),icon:Bo,children:d.jsx(Koe,{defaultValues:r,mutation:Yt({async mutationFn(i){return Rn.promise(jt.transaction().execute(s=>s.updateTable("Building").set(i).where("id","=",r.id).returningAll().executeTakeFirstOrThrow()),Wr("Edit building"))},async onSuccess(){await n()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete building (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>jt.transaction().execute(async i=>i.deleteFrom("Building").where("id","=",r.id).execute()),textContent:d.jsx(X,{label:"Building delete (content)"}),textToast:"Building delete",invalidator:n})})]})}},...e})},Zy=Dt("/$locale/apps/derivean/root/user/$id/building/list")({validateSearch:mr(Pr(qM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Building","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>hr({select:s.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name","b.blueprintId"]).where("b.userId","=",i),output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Zy.useLoaderData(),{filter:n,cursor:r,selection:i}=Zy.useSearch(),s=Zy.useNavigate(),{tva:o}=pr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(Joe,{table:{data:t,filter:{value:n,set:qr(s)},selection:{type:"multi",value:i,set:ys(s)}},fulltext:{value:n?.fulltext,set:Ar(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of buildings (label)"}),...Or(s)}})})}}),w3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(Am.shape),defaultValues:{amount:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"resourceId",label:d.jsx(X,{label:"Requirement (label)"}),children:d.jsx(Qi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Rm,{allowEmpty:!0,...u})})}),d.jsx(hn,{formState:s.formState,name:"amount",label:d.jsx(X,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Zn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},_3=Lr(),Zoe=[_3({name:"name",header(){return d.jsx(X,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),_3({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:10})],Yoe=({blueprintProductionId:t,table:e,...n})=>{const r=Vn([["Blueprint_Production_Resource"],["Blueprint_Production"],["Resource"]]);return d.jsx(Fr,{table:Dr({...e,columns:Zoe}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create production resource requirement (menu)"}),textTitle:d.jsx(X,{label:"Create production resource requirement (modal)"}),icon:Zn,children:({close:i})=>d.jsx(w3,{mutation:Yt({async mutationFn(s){return jt.transaction().execute(async o=>o.insertInto("Blueprint_Production_Resource").values({id:On(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit production resource requirement (modal)"}),icon:Zn,children:({close:s})=>d.jsx(w3,{defaultValues:i,mutation:Yt({async mutationFn(o){return jt.transaction().execute(async l=>l.updateTable("Blueprint_Production_Resource").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete production resource requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Resource").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete production resource requirement (content)"}),textToast:"Delete production resource requirement item",invalidator:r})})]})}},...n})},Wp=Dt("/$locale/apps/derivean/root/blueprint/production/$id/resources")({validateSearch:mr(Pr(Am)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Wp.useLoaderData(),{filter:n,cursor:r,selection:i}=Wp.useSearch(),{id:s}=Wp.useParams(),o=Wp.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(Yoe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:qr(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Ar(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of production resource requirements (label)"}),...Or(o)}})})}}),S3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(qm.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"resourceId",label:d.jsx(X,{label:"Requirement (label)"}),children:d.jsx(Qi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Rm,{allowEmpty:!0,...u})})}),d.jsx(hn,{formState:s.formState,name:"amount",label:d.jsx(X,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(hn,{formState:s.formState,name:"passive",label:d.jsx(X,{label:"Passive requirement (label)"}),hint:d.jsx(X,{label:"Passive requirement (hint)"}),children:d.jsx(Qi,{control:s.control,name:"passive",render:({field:{ref:l,...u}})=>d.jsx(xD,{...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Zn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},PS=Lr(),Xoe=[PS({name:"name",header(){return d.jsx(X,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),PS({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:10}),PS({name:"passive",header(){return d.jsx(X,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Wv,{value:t})},size:10})],eae=({blueprintProductionId:t,table:e,...n})=>{const r=Vn([["Blueprint_Production_Requirement"],["Blueprint_Production"],["Resource"]]);return d.jsx(Fr,{table:Dr({...e,columns:Xoe}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create production requirement (menu)"}),textTitle:d.jsx(X,{label:"Create production requirement (modal)"}),icon:Zn,children:({close:i})=>d.jsx(S3,{mutation:Yt({async mutationFn(s){return jt.transaction().execute(async o=>o.insertInto("Blueprint_Production_Requirement").values({id:On(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit production requirement (modal)"}),icon:Zn,children:({close:s})=>d.jsx(S3,{defaultValues:i,mutation:Yt({async mutationFn(o){return jt.transaction().execute(async l=>l.updateTable("Blueprint_Production_Requirement").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete production requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Requirement").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete production requirement (content)"}),textToast:"Delete production requirement item",invalidator:r})})]})}},...n})},Vp=Dt("/$locale/apps/derivean/root/blueprint/production/$id/requirements")({validateSearch:mr(Pr(qm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),passive:Hi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Vp.useLoaderData(),{filter:n,cursor:r,selection:i}=Vp.useSearch(),{id:s}=Vp.useParams(),o=Vp.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(eae,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:qr(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Ar(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of production requirements (label)"}),...Or(o)}})})}}),E3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(Om.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Gi({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(hn,{formState:s.formState,name:"blueprintId",label:d.jsx(X,{label:"Blueprint dependency (label)"}),children:d.jsx(Qi,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>d.jsx(jm,{textTitle:d.jsx(X,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(gn,{iconEnabled:Pn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},tae=Lr(),nae=[tae({name:"name",header(){return d.jsx(X,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsx(Rt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],rae=({blueprintProductionId:t,table:e,...n})=>{const r=Vn([["Blueprint_Production_Dependency"],["Blueprint"]]);return d.jsx(Fr,{table:Dr({...e,columns:nae}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create blueprint production dependency (menu)"}),textTitle:d.jsx(X,{label:"Create blueprint production dependency (modal)"}),icon:Pn,children:({close:i})=>d.jsx(E3,{mutation:Yt({async mutationFn(s){return Rn.promise(jt.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Production_Dependency").values({id:On(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow();return await Jh({tx:o}),l}),Wr("Create blueprint production dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit blueprint production dependency (modal)"}),icon:Pn,children:({close:s})=>d.jsx(E3,{defaultValues:i,mutation:Yt({async mutationFn(o){return Rn.promise(jt.transaction().execute(async l=>l.updateTable("Blueprint_Production_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Wr("Update blueprint production dependency"))},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ii,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete blueprint production dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Dependency").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete blueprint production dependency (content)"}),textToast:"Delete blueprint production dependency",invalidator:r})})]})}},...n})},Up=Dt("/$locale/apps/derivean/root/blueprint/production/$id/dependencies")({validateSearch:mr(Pr(Om)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpd.id","=",l.id)),l?.idIn&&(u=u.where("bpd.id","in",l.idIn)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Up.useLoaderData(),{filter:n,cursor:r,selection:i}=Up.useSearch(),{id:s}=Up.useParams(),o=Up.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(rae,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:qr(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Ar(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of dependencies (label)"}),...Or(o)}})})}}),iae=Dt("/$locale/apps/derivean/map/$mapId/route/$routeId/resources")({component(){return""}}),sae=({routeId:t,inventory:e})=>{const n=Vn([["GameMap"]]),r=Yt({async mutationFn({routeId:i,resourceId:s,transport:o}){return jt.transaction().execute(async l=>l.insertInto("Route_Resource").values({id:On(),resourceId:s,routeId:i,amount:o,type:"construction",priority:0}).execute())},async onSuccess(){await n()}});return d.jsxs("div",{className:mn(["flex","flex-row","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(en,{icon:Zn,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:e.name})]}),d.jsx("div",{children:d.jsx(gn,{variant:{variant:"secondary"},iconEnabled:"icon-[icons8--plus]",loading:r.isPending,onClick:()=>{r.mutate({resourceId:e.resourceId,transport:e.transport,routeId:t})}})})]})},oae=({resource:t})=>{const e=Vn([["GameMap"]]),n=Yt({async mutationFn({routeResourceId:r}){return jt.transaction().execute(async i=>i.deleteFrom("Route_Resource").where("id","=",r).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:mn(["flex","flex-row","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(en,{icon:Zn,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:t.name}),d.jsxs(Ri,{children:["x",on({number:t.amount})]})]}),d.jsx("div",{children:d.jsx(gn,{variant:{variant:"secondary"},iconEnabled:ii,loading:n.isPending,onClick:()=>{n.mutate({routeResourceId:t.id})}})})]})},aae=({route:t,resource:e,inventory:n,...r})=>{const{mapId:i,locale:s}=tn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs(Ms,{icon:uu,textTitle:d.jsx(X,{label:"Construction resources (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Rt,{icon:Ps,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:s,mapId:i,buildingId:t.fromId}}),d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx("div",{className:"font-light",children:t.fromName}),d.jsx(en,{icon:"icon-[cil--arrow-right]"}),d.jsx("div",{children:t.toName})]})]}),...r,children:[d.jsx("div",{className:"flex flex-col gap-2",children:e.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-bold",children:d.jsx(X,{label:"Transported resources (label)"})}),e.map(o=>d.jsx(oae,{resource:o},o.id))]}):d.jsx("div",{className:mn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"No route resources yet (label)"})})}),d.jsx("div",{className:"border-b border-slate-300 shadow-md"}),d.jsx("div",{className:"flex flex-col gap-2",children:n.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-bold",children:d.jsx(X,{label:"Available resources (label)"})}),n.map(o=>d.jsx(sae,{inventory:o,routeId:t.id},o.id))]}):d.jsx("div",{className:mn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"There are no available items for transport (label)"})})})]})},AM=Dt("/$locale/apps/derivean/map/$mapId/route/$routeId/construction")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,routeId:r}}){return{resource:await t.ensureQueryData({queryKey:["GameMap",n,"route",r,"construction"],async queryFn(){return e.transaction().execute(async i=>Br({select:i.selectFrom("Route_Resource as rr").innerJoin("Resource as r","r.id","rr.resourceId").select(["rr.id","r.name","rr.amount","rr.routeId","rr.resourceId","rr.type"]).where("rr.routeId","=",r),output:D.object({id:D.string().min(1),routeId:D.string().min(1),resourceId:D.string().min(1),name:D.string().min(1),amount:D.number().nonnegative(),type:D.enum(["storage","construction","input","output"])})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap",n,"route",r,"construction","inventory"],async queryFn(){return e.transaction().execute(async i=>Br({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","r.name","r.transport"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("bi.inventoryId").where("bi.buildingId","=",i.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",r)).where("i.type","=","construction")).where("r.id","in",i.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",i.selectFrom("Route as ro").select("ro.fromId").where("ro.id","=",r)).where("i.type","=","storage")).where("r.id","in",i.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",i.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",r)).where("i.type","=","construction")).where("r.id","not in",i.selectFrom("Route_Resource as rr").where("rr.routeId","=",r).select("rr.resourceId")).orderBy("r.name","asc"),output:D.object({id:D.string().min(1),resourceId:D.string().min(1),name:D.string().min(1),transport:ao()})}))}})}},component(){const{route:t}=mi({from:"/$locale/apps/derivean/map/$mapId/route/$routeId"}),{resource:e,inventory:n}=AM.useLoaderData();return d.jsx(aae,{route:t,resource:e,inventory:n})}}),lae=xn({slot:{base:["flex","flex-col","gap-2","rounded-md","bg-white","border","border-slate-300","p-2","hover:bg-slate-100","cursor-draggable"]},variant:{isDragging:{true:[]}},match:[{if:{isDragging:!0},then:{base:["cursor-grabbing","bg-slate-100"]}}],defaults:{isDragging:!1}}),cae=async({userId:t,blueprintId:e,landId:n,x:r,y:i,plan:s,valid:o})=>jt.transaction().execute(async l=>{const u=await l.selectFrom("Blueprint as b").select(["b.cycles"]).where("b.id","=",e).executeTakeFirstOrThrow(),f=await l.insertInto("Building").values({id:On(),userId:t,blueprintId:e,landId:n,constructionId:(await l.insertInto("Construction").values({id:On(),userId:t,cycle:0,cycles:u.cycles,plan:s}).returning("id").executeTakeFirstOrThrow()).id,x:r,y:i,valid:o}).returningAll().executeTakeFirstOrThrow(),p=await l.selectFrom("Inventory as i").select(["i.amount","i.limit","i.resourceId","i.type"]).where("i.id","in",l.selectFrom("Blueprint_Inventory as bi").select("bi.inventoryId").where("bi.blueprintId","=",e)).execute();for await(const{amount:h,limit:b,resourceId:x,type:_}of p)await l.insertInto("Building_Inventory").values({id:On(),buildingId:f.id,inventoryId:(await l.insertInto("Inventory").values({id:On(),amount:h,limit:b,resourceId:x,type:_}).returning("id").executeTakeFirstOrThrow()).id}).execute();return f}),K1=({cycles:t})=>d.jsxs("div",{className:mn(["flex","flex-row","items-center","gap-2"]),children:[d.jsx(en,{css:{base:["text-slate-400"]},icon:Gh}),d.jsx("div",{className:"font-bold text-md",children:on({number:t})})]}),uae=({blueprint:t,land:e,userId:n,variant:r,tva:i=lae,css:s})=>{const{mapId:o,locale:l}=tn({from:"/$locale/apps/derivean/map/$mapId"}),u=tc(),f=Vn([["GameMap"]]),p=Yt({async mutationFn({blueprintId:b,landId:x}){const _=await cae({userId:n,blueprintId:b,landId:x,x:0,y:0,plan:!0,valid:!1});u({to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:l,mapId:o,landId:e.id},search:{zoomToId:_.id}})},async onSuccess(){await f()},onError(b){console.error(b)}}),h=i({...r,css:s}).slots;return d.jsx("div",{className:h.base(),children:d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between",children:[d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsxs(Ri,{children:["x",t.count]}),d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements",params:{locale:l,mapId:o,blueprintId:t.id},css:{base:["font-bold"]},children:t.name})]}),d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsx(K1,{cycles:t.cycles}),d.jsx(gn,{iconEnabled:uu,iconDisabled:uu,loading:p.isPending,onClick:()=>{p.mutate({blueprintId:t.id,landId:e.id})}})]})]})})},dae=({userId:t,land:e,blueprints:n,...r})=>d.jsx(Ms,{icon:uu,textTitle:d.jsx(X,{label:"Construction (label)"}),textSubTitle:e.name,...r,children:n.length>0?n.map(i=>d.jsx(uae,{blueprint:i,userId:t,land:e},i.id)):d.jsx("div",{className:mn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"There are no available blueprints (label)"})})}),PM=Dt("/$locale/apps/derivean/map/$mapId/land/$landId/construction")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,landId:i}}){const s=await n();return{user:s,blueprints:await t.ensureQueryData({queryKey:["GameMap",r,"land",i,"construction","list"],async queryFn(){return e.transaction().execute(async o=>Br({select:o.selectFrom(o.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",l=>l.selectFrom("Building as bg").select(u=>u.fn.count("bg.id").as("count")).whereRef("bg.blueprintId","=","bl.id").where("bg.userId","=",s.id).where("bg.landId","is",i).as("count"),l=>l.case().when(l.not(l.exists(l.selectFrom("Blueprint_Dependency as bd").select(l.lit(1).as("one")).whereRef("bd.blueprintId","=","bl.id").where(u=>u.not(u.exists(u.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").select(u.lit(1).as("one")).where("b.constructionId","is",null).where("b.userId","=",s.id).where("l.mapId","=",r).whereRef("b.blueprintId","=","bd.dependencyId"))))))).then(l.lit(!0)).else(l.lit(!1)).end().as("withAvailableBuildings")]).where("bl.id","not in",o.selectFrom("Blueprint_Conflict as bc").select("bc.conflictId").where("bc.blueprintId","in",o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").select("bg.blueprintId").where("bg.userId","=",s.id).where("l.mapId","=",r))).as("blueprint")).selectAll().where("withAvailableBuildings","=",!0).orderBy("blueprint.sort","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),count:D.number().int().nonnegative(),cycles:D.number().int().nonnegative(),sort:D.number().int().nonnegative(),withAvailableBuildings:Hi()})}))}})}},component(){const{user:t,blueprints:e}=PM.useLoaderData(),{land:n}=mi({from:"/$locale/apps/derivean/map/$mapId/land/$landId"});return d.jsx(dae,{userId:t.id,land:n,blueprints:e})}}),aN="icon-[heroicons--queue-list]",kp=["p-4","border","border-slate-300","w-full","justify-start"],fae=({building:t})=>{const{mapId:e,locale:n}=tn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs(Ms,{icon:Bo,textTitle:t.name,textSubTitle:t.land,children:[d.jsx(Rt,{icon:Ds,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:n,mapId:e,buildingId:t.id},css:{base:kp},children:d.jsx(X,{label:"Building production (label)"})}),d.jsx(Rt,{icon:aN,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue",params:{locale:n,mapId:e,buildingId:t.id},css:{base:kp},children:d.jsx(X,{label:"Production queue (label)"})}),d.jsx(Rt,{icon:Ba,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:n,mapId:e,buildingId:t.id},css:{base:kp},children:d.jsx(X,{label:"Building inventory (label)"})}),d.jsx(Rt,{icon:lx,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:n,mapId:e,buildingId:t.id},css:{base:kp},children:d.jsx(X,{label:"Building routes (label)"})}),d.jsx(Rt,{icon:"icon-[ph--queue-thin]",to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/route/priority",params:{locale:n,mapId:e,buildingId:t.id},css:{base:kp},children:d.jsx(X,{label:"Route priority (label)"})})]})},pae=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/view")({component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"});return d.jsx(fae,{building:t})}}),hae=({route:t})=>{const{mapId:e,locale:n}=tn({from:"/$locale/apps/derivean/map/$mapId"}),r=Vn([["GameMap"]]),i=Yt({async mutationFn({routeId:s}){return jt.transaction().execute(async o=>o.deleteFrom("Route").where("id","=",s).execute())},async onSuccess(){await r()}});return d.jsxs("div",{className:mn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.count>0?void 0:["border-amber-400","bg-amber-50","hover:bg-amber-50","hover:border-amber-600"]]),children:[t.toConstructionId?d.jsx(Rt,{icon:uu,to:"/$locale/apps/derivean/map/$mapId/route/$routeId/construction",params:{locale:n,mapId:e,routeId:t.id},children:t.toName}):d.jsx(Rt,{icon:Zn,to:"/$locale/apps/derivean/map/$mapId/route/$routeId/resources",params:{locale:n,mapId:e,routeId:t.id},children:t.toName}),d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Rt,{icon:"icon-[cil--arrow-right]",to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:n,mapId:e,buildingId:t.fromId},search:{zoomToId:t.toId},children:d.jsx(Ri,{children:on({number:t.count})})}),d.jsx(gn,{iconEnabled:ii,variant:{variant:"secondary"},loading:i.isPending,onClick:()=>{i.mutate({routeId:t.id})}})]})]})},mae=({building:t,route:e,...n})=>{const{mapId:r,locale:i}=tn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(Ms,{icon:lx,textTitle:d.jsx(X,{label:"Routes (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Rt,{icon:Ps,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>d.jsx(hae,{route:s},s.id)):d.jsx("div",{className:mn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"No outcomming routes yet (label)"})})})},FM=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/routes")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{route:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"routes","list"],async queryFn(){return e.transaction().execute(async i=>Br({select:i.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blt.name as toName","bt.constructionId as toConstructionId",s=>s.selectFrom("Route_Resource as rr").select(o=>o.fn.count("rr.id").as("count")).whereRef("rr.routeId","=","r.id").as("count")]).where("r.fromId","=",r),output:D.object({id:D.string().min(1),fromId:D.string().min(1),toId:D.string().min(1),toName:D.string().min(1),toConstructionId:D.string().nullish(),count:D.number().nonnegative()})}))}})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{route:e}=FM.useLoaderData();return d.jsx(mae,{building:t,route:e})}}),gae=({inventory:t})=>d.jsxs("div",{className:mn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",t.limit>0&&t.amount>=t.limit?["border-red-400","bg-red-50","hover:bg-red-50","hover:border-red-600"]:void 0]),children:[d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx("div",{className:"font-bold",children:t.name}),on({number:t.amount})," /"," ",on({number:t.limit})]}),t.limit>0?d.jsx(bf,{variant:{size:"md"},value:100*t.amount/t.limit,css:{progress:t.amount>=t.limit?["bg-red-500"]:void 0}}):null]}),yae=({inventory:t,fulltextProps:e,...n})=>d.jsxs(Ms,{icon:Ba,textTitle:d.jsx(X,{label:"Inventory (label)"}),...n,children:[d.jsx(ID,{...e}),d.jsx("div",{children:d.jsx(X,{label:"Inventory - storage (label)",css:{base:["font-bold","text-slate-500"]}})}),t.length>0?t.map(r=>d.jsx(gae,{inventory:r},r.id)):d.jsx("div",{className:mn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"No inventory storage. (label)"})})]}),Hp=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory")({validateSearch:mr(D.object({fulltext:D.string().optional()})),loaderDeps({search:{fulltext:t}}){return{fulltext:t}},async loader({context:{queryClient:t,kysely:e},deps:{fulltext:n},params:{mapId:r,buildingId:i}}){return{inventory:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"inventory","storage",{fulltext:n}],async queryFn(){return e.transaction().execute(async s=>Br({select:s.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.amount","i.limit","r.name"]).where("i.id","in",s.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",i)).where("i.type","in",["storage"]).orderBy("r.name"),query({select:o,where:l}){let u=o;if(l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("r.name","like",f)]))}return u},output:D.object({id:D.string().min(1),amount:D.number().nonnegative(),limit:D.number().nonnegative(),name:D.string().min(1)}),filter:{fulltext:n}}))}})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{fulltext:e}=Hp.useSearch(),{mapId:n,locale:r}=Hp.useParams(),i=Hp.useNavigate(),{inventory:s}=Hp.useLoaderData();return d.jsx(yae,{inventory:s,textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Rt,{icon:Ps,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:t.id}}),d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:r,mapId:n,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),fulltextProps:{value:e,onFulltext(o){i({search:{fulltext:o}})}}})}}),DM=({requirement:t})=>{const e=(t.available||0)>=t.amount;return d.jsxs("div",{className:mn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.passive?["border-purple-300","hover:border-purple-500","hover:bg-purple-100"]:void 0,t.available===void 0||e?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),children:[d.jsx("div",{className:"font-bold",children:t.name}),t.available===void 0?d.jsxs(Ri,{children:["x",on({number:t.amount})]}):d.jsxs(Ri,{css:{base:e?["bg-green-200","border-green-500"]:["bg-red-200","border-red-500"]},children:[d.jsx("div",{className:"font-bold",children:on({number:t.available})}),d.jsx("div",{children:"/"}),d.jsx("div",{className:"font-light",children:on({number:t.amount})})]})]})},bae=({blueprint:t,requirement:e,...n})=>d.jsx(Ms,{icon:Zn,textTitle:d.jsx(X,{label:"Building requirements (label)"}),textSubTitle:t.name,...n,children:e.length>0?e.map(r=>d.jsx(DM,{requirement:r},r.id)):d.jsx("div",{className:mn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(X,{label:"There are no requirements. (label)"})})}),LM=Dt("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{blueprintId:n}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","blueprint",n,"requirements"],async queryFn(){return e.transaction().execute(async r=>Br({select:r.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive"]).where("br.blueprintId","=",n),output:D.object({id:D.string().min(1),name:D.string().min(1),amount:D.number().nonnegative(),passive:Hi()})}))}})}},component(){const{blueprint:t}=mi({from:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId"}),{requirement:e}=LM.useLoaderData();return d.jsx(bae,{blueprint:t,requirement:e})}}),N3=Lr(),vae=[N3({name:"name",header(){return d.jsx(X,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),N3({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:10})],xae=({table:t,...e})=>d.jsx(Fr,{table:Dr({...t,columns:vae}),...e}),Yy=Dt("/$locale/apps/derivean/game/blueprint/production/$id/resources")({validateSearch:mr(Pr(Am)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Yy.useLoaderData(),{filter:n,cursor:r}=Yy.useSearch(),i=Yy.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(xae,{table:{data:t,filter:{value:n,set:qr(i)}},fulltext:{value:n?.fulltext,set:Ar(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of production resource requirements (label)"}),...Or(i)}})})}}),FS=Lr(),wae=[FS({name:"name",header(){return d.jsx(X,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),FS({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:10}),FS({name:"passive",header(){return d.jsx(X,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Wv,{value:t})},size:10})],_ae=({table:t,...e})=>d.jsx(Fr,{table:Dr({...t,columns:wae}),...e}),Xy=Dt("/$locale/apps/derivean/game/blueprint/production/$id/requirements")({validateSearch:mr(Pr(qm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),passive:Hi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Xy.useLoaderData(),{filter:n,cursor:r}=Xy.useSearch(),i=Xy.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(_ae,{table:{data:t,filter:{value:n,set:qr(i)}},fulltext:{value:n?.fulltext,set:Ar(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of production requirements (label)"}),...Or(i)}})})}}),Sae=Lr(),Eae=[Sae({name:"name",header(){return d.jsx(X,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=tn({from:"/$locale"});return d.jsx(Rt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],Nae=({table:t,...e})=>d.jsx(Fr,{table:Dr({...t,columns:Eae}),...e}),eb=Dt("/$locale/apps/derivean/game/blueprint/production/$id/dependencies")({validateSearch:mr(Pr(Om)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>hr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpd.id","=",l.id)),l?.idIn&&(u=u.where("bpd.id","in",l.idIn)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=eb.useLoaderData(),{filter:n,cursor:r}=eb.useSearch(),i=eb.useNavigate(),{tva:s}=pr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Nae,{table:{data:t,filter:{value:n,set:qr(i)}},fulltext:{value:n?.fulltext,set:Ar(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of dependencies (label)"}),...Or(i)}})})}}),Iae=({priority:t})=>{const e=Vn([["GameMap"]]),n=Yt({async mutationFn({routeResourceId:r,priority:i}){return jt.transaction().execute(async s=>s.updateTable("Route_Resource").set({priority:Math.max(0,i)}).where("id","=",r).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:mn(["flex","flex-row","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",n.isPending?["pointer-events-none","opacity-50"]:void 0]),children:[d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(en,{icon:Zn,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold text-sm",children:t.name}),d.jsx(en,{icon:"icon-[cil--arrow-right]"}),d.jsx("div",{className:"text-xs",children:t.toName})]}),d.jsx("div",{className:"flex flex-row gap-2 items-center text-slate-500",children:d.jsxs(Ri,{children:["x",on({number:t.amount})]})})]}),d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Ri,{children:on({number:t.priority})}),d.jsx(gn,{variant:{variant:"secondary"},iconEnabled:"icon-[typcn--minus-outline]",onClick:()=>{n.mutate({routeResourceId:t.id,priority:t.priority-1})}}),d.jsx(gn,{variant:{variant:"secondary"},iconEnabled:"icon-[mingcute--plus-line]",onClick:()=>{n.mutate({routeResourceId:t.id,priority:t.priority+1})}})]})]})},kae=({building:t,priority:e,...n})=>{const{mapId:r,locale:i}=tn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(Ms,{icon:"icon-[ph--queue-thin]",textTitle:d.jsx(X,{label:"Route priority (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Rt,{icon:Ps,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/route/priority",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>d.jsx(Iae,{priority:s},s.id)):d.jsx("div",{className:mn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"There are no resources on the road. (label)"})})})},MM=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/route/priority")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{priority:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"route","priority","list"],async queryFn(){return e.transaction().execute(async i=>Br({select:i.selectFrom("Route_Resource as rr").innerJoin("Route as r","r.id","rr.routeId").innerJoin("Resource as re","re.id","rr.resourceId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["rr.id","rr.amount","re.name","rr.priority","blt.name as toName"]).where("r.fromId","=",r).orderBy("rr.priority","desc"),output:D.object({id:D.string().min(1),name:D.string().min(1),toName:D.string().min(1),amount:D.number().nonnegative(),priority:D.number().int().nonnegative()})}))}})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{priority:e}=MM.useLoaderData();return d.jsx(kae,{building:t,priority:e})}}),Cae=({queue:t,inventory:e})=>{const n=e.find(i=>i.resourceId===t.resourceId),r=n&&n.amount+t.amount>n.limit;return d.jsxs("div",{className:mn(["flex","flex-col","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300",r?["border-red-400","hover:border-red-600"]:void 0]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[d.jsx("div",{className:"font-bold",children:t.name}),d.jsx("div",{className:"flex flex-row gap-2 items-center",children:d.jsxs(Ri,{children:["x",on({number:t.amount})]})}),d.jsx(K1,{cycles:t.cycles})]}),d.jsx(bf,{css:{progress:r?["bg-red-500"]:void 0},value:100*t.cycle/t.cycles})]})},Tae=({building:t,queue:e,inventory:n,...r})=>{const{mapId:i,locale:s}=tn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(Ms,{icon:aN,textTitle:d.jsx(X,{label:"Production queue (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Rt,{icon:Ps,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:t.id}}),d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...r,children:e.length>0?e.map(o=>d.jsx(Cae,{queue:o,inventory:n},o.id)):d.jsxs("div",{className:mn(["flex","flex-col","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:[d.jsx(X,{label:"Production queue is empty. (label)"}),d.jsx(Rt,{icon:aN,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id},children:d.jsx(X,{label:"Plan queue (label)"})})]})})},$M=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{queue:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production","queue"],async queryFn(){return e.transaction().execute(async i=>Br({select:i.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","r.name","bp.resourceId","p.cycle","bp.amount","bp.cycles"]).where("p.buildingId","=",r),output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),cycle:D.number().int().nonnegative(),cycles:D.number().int().nonnegative()})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"inventory","list"],async queryFn(){return e.transaction().execute(async i=>Br({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","i.amount","i.limit","r.name"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).orderBy("r.name"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.name","like",u)]))}return l},output:D.object({id:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),limit:D.number().nonnegative(),name:D.string().min(1)})}))}})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{queue:e,inventory:n}=$M.useLoaderData();return d.jsx(Tae,{building:t,queue:e,inventory:n})}}),Rae=({building:t,production:e})=>{const{mapId:n,locale:r}=tn({from:"/$locale/apps/derivean/map/$mapId"}),i=Vn([["GameMap"]]),s=Yt({async mutationFn({blueprintProductionId:f,buildingId:p}){return jt.transaction().execute(async h=>h.updateTable("Building").set({productionId:f}).where("id","=",p).execute())},async onSuccess(){await i()}}),o=Yt({async mutationFn({buildingId:f}){return jt.transaction().execute(async p=>p.updateTable("Building").set({productionId:null}).where("id","=",f).execute())},async onSuccess(){await i()}}),l=Yt({async mutationFn({blueprintProductionId:f,buildingId:p}){return jt.transaction().execute(async h=>h.updateTable("Building").set({recurringProductionId:f}).where("id","=",p).execute())},async onSuccess(){await i()}}),u=Yt({async mutationFn({buildingId:f}){return jt.transaction().execute(async p=>p.updateTable("Building").set({recurringProductionId:null}).where("id","=",f).execute())},async onSuccess(){await i()}});return d.jsxs("div",{className:mn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",e.withAvailableResources?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[t.productionId===e.id?d.jsx(gn,{iconEnabled:sN,loading:o.isPending,onClick:()=>{o.mutate({buildingId:t.id})}}):d.jsx(gn,{iconEnabled:"icon-[solar--play-outline]",loading:s.isPending,onClick:()=>{s.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),t.recurringProductionId===e.id?d.jsx(gn,{iconEnabled:sN,loading:u.isPending,onClick:()=>{u.mutate({buildingId:t.id})}}):d.jsx(gn,{iconEnabled:pM,loading:l.isPending,onClick:()=>{l.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),d.jsxs(Rt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements",params:{locale:r,mapId:n,buildingId:t.id,productionId:e.id},children:[e.name,d.jsxs(Ri,{children:["x",on({number:e.amount})]})]})]}),d.jsx(K1,{cycles:e.cycles})]})},jae=({building:t,production:e,...n})=>{const{mapId:r,locale:i}=tn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(Ms,{icon:Ds,textTitle:d.jsx(X,{label:"Building production (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Rt,{icon:Ps,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>d.jsx(Rae,{building:t,production:s},s.id)):d.jsx("div",{className:mn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"This building does not produce anything. (label)"})})})},BM=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,buildingId:i}}){const s=await n();return{production:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"production","list"],async queryFn(){return e.transaction().execute(async o=>Br({select:o.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.cycles",l=>l.case().when(l.not(l.exists(l.selectFrom("Blueprint_Production_Requirement as bpr").select(l.lit(1).as("one")).whereRef("bpr.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Inventory as i").select(u.lit(1).as("one")).where("i.id","in",u.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).where("i.type","in",["storage"]).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))).then(l.lit(!0)).else(l.lit(!1)).end().as("withAvailableResources")]).where("bp.blueprintId","=",o.selectFrom("Building as b").select("b.blueprintId").where("b.id","=",i)).where(l=>l.not(l.exists(l.selectFrom("Blueprint_Production_Dependency as bpd").select("bpd.blueprintProductionId").whereRef("bpd.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Building as b").select("b.blueprintId").where("b.userId","=",s.id).where("b.constructionId","is",null).whereRef("b.blueprintId","=","bpd.blueprintId"))))))).where(l=>l.not(l.exists(l.selectFrom("Blueprint_Production_Resource as bpr").select("bpr.blueprintProductionId").whereRef("bpr.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Inventory as i").select("i.resourceId").where("i.id","in",u.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))),output:D.object({id:D.string().min(1),name:D.string().min(1),amount:D.number().nonnegative(),cycles:D.number().int().nonnegative(),withAvailableResources:Hi()})}))}})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=BM.useLoaderData();return d.jsx(jae,{building:t,production:e})}}),Oae=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r,productionId:i}}){return{production:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production",i,"fetch"],async queryFn(){return e.transaction().execute(async s=>$o({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","bp.amount","r.name"]).where("bp.id","=",i),output:D.object({id:D.string().min(1),amount:D.number().nonnegative(),name:D.string().min(1)})}))}})}}}),qae=({requirement:t})=>{const e=t.available||0;return d.jsxs("div",{className:mn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",t.amount>e?["border-red-400","bg-red-50","hover:border-red-600","hover:bg-red-50"]:void 0]),children:[d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx("div",{className:"font-bold",children:t.name}),d.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d.jsx("div",{children:on({number:e})}),d.jsx("div",{children:"/"}),d.jsx("div",{className:"font-bold",children:on({number:t.amount})})]})]}),d.jsx(bf,{value:100*e/t.amount})]})},Aae=({requirement:t,...e})=>d.jsx(Ms,{icon:U1,textTitle:d.jsx(X,{label:"Construction requirements (label)"}),...e,children:t.length>0?t.map(n=>d.jsx(qae,{requirement:n},n.id)):d.jsx("div",{className:mn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(X,{label:"There are no construction requirements (label)"})})}),zM=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/construction/requirements")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"construction","requirement"],async queryFn(){return e.transaction().execute(async i=>Br({select:i.selectFrom("Blueprint_Requirement as br").innerJoin("Building as bg",s=>s.onRef("bg.blueprintId","=","br.blueprintId").on("bg.id","=",r)).innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive",s=>s.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","br.resourceId").where("i.type","=","construction").limit(1).as("available")]).orderBy("r.name","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),amount:D.number().nonnegative(),available:D.number().nonnegative().nullish(),passive:Hi()})}))}})}},component(){const{requirement:t}=zM.useLoaderData();return d.jsx(Aae,{requirement:t})}}),Pae=({building:t,production:e,requirement:n,...r})=>{const{mapId:i,locale:s}=tn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(Ms,{icon:Zn,textTitle:d.jsx(X,{label:"Production requirements (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Rt,{icon:Ps,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id}}),d.jsx(Rt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),d.jsx("div",{children:e.name})]}),...r,children:n.length>0?n.map(o=>d.jsx(DM,{requirement:o},o.id)):d.jsx("div",{className:mn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(X,{label:"There are no requirements. (label)"})})})},WM=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r,productionId:i}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production",i,"requirement","list"],async queryFn(){return e.transaction().execute(async s=>Br({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.amount","bpr.passive",o=>o.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",s.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","bpr.resourceId").where("i.type","=","storage").orderBy("i.amount","desc").limit(1).as("available")]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),amount:D.number().nonnegative(),available:D.number().nonnegative().nullish(),passive:Hi()})}))}})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId"}),{requirement:n}=WM.useLoaderData();return d.jsx(Pae,{building:t,production:e,requirement:n})}}),Q1=wJ.update({id:"/$locale",path:"/$locale",getParentRoute:()=>b1}),Fae=EJ.update({id:"/",path:"/",getParentRoute:()=>b1}),Dae=NJ.update({id:"/",path:"/",getParentRoute:()=>Q1}),oc=kJ.update({id:"/apps/derivean",path:"/apps/derivean",getParentRoute:()=>Q1}),$s=RJ.update({id:"/root",path:"/root",getParentRoute:()=>oc}),VM=jJ.update({id:"/map",path:"/map",getParentRoute:()=>oc}),Pm=OJ.update({id:"/game",path:"/game",getParentRoute:()=>oc}),Lae=DJ.update({id:"/",path:"/",getParentRoute:()=>$s}),Mae=m2.update({id:"/",path:"/",getParentRoute:()=>Pm}),$ae=iN.update({id:"/editor",path:"/editor",getParentRoute:()=>$s}),Bae=ise.update({id:"/public/register",path:"/public/register",getParentRoute:()=>oc}),zae=sse.update({id:"/public/logout",path:"/public/logout",getParentRoute:()=>oc}),Wae=cse.update({id:"/public/login",path:"/public/login",getParentRoute:()=>oc}),ac=oN.update({id:"/$mapId",path:"/$mapId",getParentRoute:()=>VM}),Vae=hM.update({id:"/db/schema",path:"/db/schema",getParentRoute:()=>oc}),Uae=By.update({id:"/user/list",path:"/user/list",getParentRoute:()=>$s}),G1=mM.update({id:"/user/$id",path:"/user/$id",getParentRoute:()=>$s}),Hae=zy.update({id:"/tag/list",path:"/tag/list",getParentRoute:()=>$s}),Kae=Wy.update({id:"/resource/list",path:"/resource/list",getParentRoute:()=>$s}),UM=vM.update({id:"/resource/$id",path:"/resource/$id",getParentRoute:()=>$s}),Qae=Vy.update({id:"/region/list",path:"/region/list",getParentRoute:()=>$s}),Gae=Uy.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>$s}),lc=NM.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>$s}),Jae=Qse.update({id:"/view",path:"/view",getParentRoute:()=>ac}),Zae=Hy.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>Pm}),Sf=IM.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>Pm}),Yae=Xse.update({id:"/view",path:"/view",getParentRoute:()=>G1}),Xae=eoe.update({id:"/view",path:"/view",getParentRoute:()=>UM}),ele=toe.update({id:"/region/$id/view",path:"/region/$id/view",getParentRoute:()=>$s}),ux=kM.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>$s}),tle=CM.update({id:"/view",path:"/view",getParentRoute:()=>lc}),nle=Lp.update({id:"/requirements",path:"/requirements",getParentRoute:()=>lc}),rle=Mp.update({id:"/production",path:"/production",getParentRoute:()=>lc}),ile=$p.update({id:"/inventory",path:"/inventory",getParentRoute:()=>lc}),sle=TM.update({id:"/edit",path:"/edit",getParentRoute:()=>lc}),ole=Bp.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>lc}),ale=zp.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>lc}),J1=Eoe.update({id:"/route/$routeId",path:"/route/$routeId",getParentRoute:()=>ac}),lle=RM.update({id:"/land/list",path:"/land/list",getParentRoute:()=>ac}),HM=Coe.update({id:"/land/$landId",path:"/land/$landId",getParentRoute:()=>ac}),cle=jM.update({id:"/building/list",path:"/building/list",getParentRoute:()=>ac}),Za=joe.update({id:"/building/$buildingId",path:"/building/$buildingId",getParentRoute:()=>ac}),KM=Ooe.update({id:"/blueprint/$blueprintId",path:"/blueprint/$blueprintId",getParentRoute:()=>ac}),dx=OM.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>Pm}),ule=Foe.update({id:"/view",path:"/view",getParentRoute:()=>Sf}),dle=Ky.update({id:"/requirements",path:"/requirements",getParentRoute:()=>Sf}),fle=Qy.update({id:"/production",path:"/production",getParentRoute:()=>Sf}),ple=Gy.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>Sf}),hle=Jy.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>Sf}),mle=Zy.update({id:"/building/list",path:"/building/list",getParentRoute:()=>G1}),gle=Wp.update({id:"/resources",path:"/resources",getParentRoute:()=>ux}),yle=Vp.update({id:"/requirements",path:"/requirements",getParentRoute:()=>ux}),ble=Up.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>ux}),vle=iae.update({id:"/resources",path:"/resources",getParentRoute:()=>J1}),xle=AM.update({id:"/construction",path:"/construction",getParentRoute:()=>J1}),wle=PM.update({id:"/construction",path:"/construction",getParentRoute:()=>HM}),_le=pae.update({id:"/view",path:"/view",getParentRoute:()=>Za}),Sle=FM.update({id:"/routes",path:"/routes",getParentRoute:()=>Za}),Ele=Hp.update({id:"/inventory",path:"/inventory",getParentRoute:()=>Za}),Nle=LM.update({id:"/requirements",path:"/requirements",getParentRoute:()=>KM}),Ile=Yy.update({id:"/resources",path:"/resources",getParentRoute:()=>dx}),kle=Xy.update({id:"/requirements",path:"/requirements",getParentRoute:()=>dx}),Cle=eb.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>dx}),Tle=MM.update({id:"/route/priority",path:"/route/priority",getParentRoute:()=>Za}),Rle=$M.update({id:"/production/queue",path:"/production/queue",getParentRoute:()=>Za}),jle=BM.update({id:"/production/list",path:"/production/list",getParentRoute:()=>Za}),QM=Oae.update({id:"/production/$productionId",path:"/production/$productionId",getParentRoute:()=>Za}),Ole=zM.update({id:"/construction/requirements",path:"/construction/requirements",getParentRoute:()=>Za}),qle=WM.update({id:"/requirements",path:"/requirements",getParentRoute:()=>QM}),Ale={LocaleAppsDeriveanGameBlueprintIdConflictsRoute:hle,LocaleAppsDeriveanGameBlueprintIdDependenciesRoute:ple,LocaleAppsDeriveanGameBlueprintIdProductionRoute:fle,LocaleAppsDeriveanGameBlueprintIdRequirementsRoute:dle,LocaleAppsDeriveanGameBlueprintIdViewRoute:ule},Ple=Sf._addFileChildren(Ale),Fle={LocaleAppsDeriveanGameBlueprintProductionIdDependenciesRoute:Cle,LocaleAppsDeriveanGameBlueprintProductionIdRequirementsRoute:kle,LocaleAppsDeriveanGameBlueprintProductionIdResourcesRoute:Ile},Dle=dx._addFileChildren(Fle),Lle={LocaleAppsDeriveanGameIndexRoute:Mae,LocaleAppsDeriveanGameBlueprintIdRoute:Ple,LocaleAppsDeriveanGameBlueprintListRoute:Zae,LocaleAppsDeriveanGameBlueprintProductionIdRoute:Dle},Mle=Pm._addFileChildren(Lle),$le={LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRequirementsRoute:Nle},Ble=KM._addFileChildren($le),zle={LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRequirementsRoute:qle},Wle=QM._addFileChildren(zle),Vle={LocaleAppsDeriveanMapMapIdBuildingBuildingIdInventoryRoute:Ele,LocaleAppsDeriveanMapMapIdBuildingBuildingIdRoutesRoute:Sle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdViewRoute:_le,LocaleAppsDeriveanMapMapIdBuildingBuildingIdConstructionRequirementsRoute:Ole,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRoute:Wle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionListRoute:jle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionQueueRoute:Rle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdRoutePriorityRoute:Tle},Ule=Za._addFileChildren(Vle),Hle={LocaleAppsDeriveanMapMapIdLandLandIdConstructionRoute:wle},Kle=HM._addFileChildren(Hle),Qle={LocaleAppsDeriveanMapMapIdRouteRouteIdConstructionRoute:xle,LocaleAppsDeriveanMapMapIdRouteRouteIdResourcesRoute:vle},Gle=J1._addFileChildren(Qle),Jle={LocaleAppsDeriveanMapMapIdViewRoute:Jae,LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRoute:Ble,LocaleAppsDeriveanMapMapIdBuildingBuildingIdRoute:Ule,LocaleAppsDeriveanMapMapIdBuildingListRoute:cle,LocaleAppsDeriveanMapMapIdLandLandIdRoute:Kle,LocaleAppsDeriveanMapMapIdLandListRoute:lle,LocaleAppsDeriveanMapMapIdRouteRouteIdRoute:Gle},Zle=ac._addFileChildren(Jle),Yle={LocaleAppsDeriveanMapMapIdRoute:Zle},Xle=VM._addFileChildren(Yle),ece={LocaleAppsDeriveanRootBlueprintIdConflictsRoute:ale,LocaleAppsDeriveanRootBlueprintIdDependenciesRoute:ole,LocaleAppsDeriveanRootBlueprintIdEditRoute:sle,LocaleAppsDeriveanRootBlueprintIdInventoryRoute:ile,LocaleAppsDeriveanRootBlueprintIdProductionRoute:rle,LocaleAppsDeriveanRootBlueprintIdRequirementsRoute:nle,LocaleAppsDeriveanRootBlueprintIdViewRoute:tle},tce=lc._addFileChildren(ece),nce={LocaleAppsDeriveanRootResourceIdViewRoute:Xae},rce=UM._addFileChildren(nce),ice={LocaleAppsDeriveanRootUserIdViewRoute:Yae,LocaleAppsDeriveanRootUserIdBuildingListRoute:mle},sce=G1._addFileChildren(ice),oce={LocaleAppsDeriveanRootBlueprintProductionIdDependenciesRoute:ble,LocaleAppsDeriveanRootBlueprintProductionIdRequirementsRoute:yle,LocaleAppsDeriveanRootBlueprintProductionIdResourcesRoute:gle},ace=ux._addFileChildren(oce),lce={LocaleAppsDeriveanRootEditorRoute:$ae,LocaleAppsDeriveanRootIndexRoute:Lae,LocaleAppsDeriveanRootBlueprintIdRoute:tce,LocaleAppsDeriveanRootBlueprintListRoute:Gae,LocaleAppsDeriveanRootRegionListRoute:Qae,LocaleAppsDeriveanRootResourceIdRoute:rce,LocaleAppsDeriveanRootResourceListRoute:Kae,LocaleAppsDeriveanRootTagListRoute:Hae,LocaleAppsDeriveanRootUserIdRoute:sce,LocaleAppsDeriveanRootUserListRoute:Uae,LocaleAppsDeriveanRootBlueprintProductionIdRoute:ace,LocaleAppsDeriveanRootRegionIdViewRoute:ele},cce=$s._addFileChildren(lce),uce={LocaleAppsDeriveanGameRoute:Mle,LocaleAppsDeriveanMapRoute:Xle,LocaleAppsDeriveanRootRoute:cce,LocaleAppsDeriveanDbSchemaRoute:Vae,LocaleAppsDeriveanPublicLoginRoute:Wae,LocaleAppsDeriveanPublicLogoutRoute:zae,LocaleAppsDeriveanPublicRegisterRoute:Bae},dce=oc._addFileChildren(uce),fce={LocaleIndexRoute:Dae,LocaleAppsDeriveanRoute:dce},pce=Q1._addFileChildren(fce),hce={IndexRoute:Fae,LocaleRoute:pce},mce=b1._addFileChildren(hce)._addFileTypes(),GM=new vB({defaultOptions:{queries:{placeholderData:oB}}}),gce=g4({routeTree:mce,context:{queryClient:GM,tva:r7,async session(){return wm.parse(null)},kysely:jt},defaultPendingComponent:VG,defaultPreload:"intent",defaultPreloadStaleTime:0,defaultPendingMinMs:200}),I3=document.getElementById("app");_U({limit:{maxRequests:10,perMilliseconds:100}});I3.innerHTML||bJ.createRoot(I3).render(d.jsx(NB,{client:GM,children:d.jsx(z4,{router:gce})}))})();