(async()=>{function C4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function T4(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var b_={exports:{}},Rp={},v_={exports:{}},On={};var eT;function j4(){if(eT)return On;eT=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;function g(te){return te===null||typeof te!="object"?null:(te=h&&te[h]||te["@@iterator"],typeof te=="function"?te:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function k(te,ce,de){this.props=te,this.context=ce,this.refs=S,this.updater=de||x}k.prototype.isReactComponent={},k.prototype.setState=function(te,ce){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,ce,"setState")},k.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function I(){}I.prototype=k.prototype;function E(te,ce,de){this.props=te,this.context=ce,this.refs=S,this.updater=de||x}var C=E.prototype=new I;C.constructor=E,_(C,k.prototype),C.isPureReactComponent=!0;var j=Array.isArray,q=Object.prototype.hasOwnProperty,F={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function P(te,ce,de){var ye,we={},Ie=null,ze=null;if(ce!=null)for(ye in ce.ref!==void 0&&(ze=ce.ref),ce.key!==void 0&&(Ie=""+ce.key),ce)q.call(ce,ye)&&!$.hasOwnProperty(ye)&&(we[ye]=ce[ye]);var Re=arguments.length-2;if(Re===1)we.children=de;else if(1<Re){for(var De=Array(Re),Je=0;Je<Re;Je++)De[Je]=arguments[Je+2];we.children=De}if(te&&te.defaultProps)for(ye in Re=te.defaultProps,Re)we[ye]===void 0&&(we[ye]=Re[ye]);return{$$typeof:t,type:te,key:Ie,ref:ze,props:we,_owner:F.current}}function O(te,ce){return{$$typeof:t,type:te.type,key:ce,ref:te.ref,props:te.props,_owner:te._owner}}function B(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function D(te){var ce={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(de){return ce[de]})}var W=/\/+/g;function V(te,ce){return typeof te=="object"&&te!==null&&te.key!=null?D(""+te.key):ce.toString(36)}function z(te,ce,de,ye,we){var Ie=typeof te;(Ie==="undefined"||Ie==="boolean")&&(te=null);var ze=!1;if(te===null)ze=!0;else switch(Ie){case"string":case"number":ze=!0;break;case"object":switch(te.$$typeof){case t:case e:ze=!0}}if(ze)return ze=te,we=we(ze),te=ye===""?"."+V(ze,0):ye,j(we)?(de="",te!=null&&(de=te.replace(W,"$&/")+"/"),z(we,ce,de,"",function(Je){return Je})):we!=null&&(B(we)&&(we=O(we,de+(!we.key||ze&&ze.key===we.key?"":(""+we.key).replace(W,"$&/")+"/")+te)),ce.push(we)),1;if(ze=0,ye=ye===""?".":ye+":",j(te))for(var Re=0;Re<te.length;Re++){Ie=te[Re];var De=ye+V(Ie,Re);ze+=z(Ie,ce,de,De,we)}else if(De=g(te),typeof De=="function")for(te=De.call(te),Re=0;!(Ie=te.next()).done;)Ie=Ie.value,De=ye+V(Ie,Re++),ze+=z(Ie,ce,de,De,we);else if(Ie==="object")throw ce=String(te),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.");return ze}function X(te,ce,de){if(te==null)return te;var ye=[],we=0;return z(te,ye,"","",function(Ie){return ce.call(de,Ie,we++)}),ye}function Z(te){if(te._status===-1){var ce=te._result;ce=ce(),ce.then(function(de){(te._status===0||te._status===-1)&&(te._status=1,te._result=de)},function(de){(te._status===0||te._status===-1)&&(te._status=2,te._result=de)}),te._status===-1&&(te._status=0,te._result=ce)}if(te._status===1)return te._result.default;throw te._result}var le={current:null},ie={transition:null},ne={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:ie,ReactCurrentOwner:F};function oe(){throw Error("act(...) is not supported in production builds of React.")}return On.Children={map:X,forEach:function(te,ce,de){X(te,function(){ce.apply(this,arguments)},de)},count:function(te){var ce=0;return X(te,function(){ce++}),ce},toArray:function(te){return X(te,function(ce){return ce})||[]},only:function(te){if(!B(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},On.Component=k,On.Fragment=n,On.Profiler=i,On.PureComponent=E,On.StrictMode=r,On.Suspense=u,On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,On.act=oe,On.cloneElement=function(te,ce,de){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var ye=_({},te.props),we=te.key,Ie=te.ref,ze=te._owner;if(ce!=null){if(ce.ref!==void 0&&(Ie=ce.ref,ze=F.current),ce.key!==void 0&&(we=""+ce.key),te.type&&te.type.defaultProps)var Re=te.type.defaultProps;for(De in ce)q.call(ce,De)&&!$.hasOwnProperty(De)&&(ye[De]=ce[De]===void 0&&Re!==void 0?Re[De]:ce[De])}var De=arguments.length-2;if(De===1)ye.children=de;else if(1<De){Re=Array(De);for(var Je=0;Je<De;Je++)Re[Je]=arguments[Je+2];ye.children=Re}return{$$typeof:t,type:te.type,key:we,ref:Ie,props:ye,_owner:ze}},On.createContext=function(te){return te={$$typeof:o,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:s,_context:te},te.Consumer=te},On.createElement=P,On.createFactory=function(te){var ce=P.bind(null,te);return ce.type=te,ce},On.createRef=function(){return{current:null}},On.forwardRef=function(te){return{$$typeof:a,render:te}},On.isValidElement=B,On.lazy=function(te){return{$$typeof:p,_payload:{_status:-1,_result:te},_init:Z}},On.memo=function(te,ce){return{$$typeof:d,type:te,compare:ce===void 0?null:ce}},On.startTransition=function(te){var ce=ie.transition;ie.transition={};try{te()}finally{ie.transition=ce}},On.unstable_act=oe,On.useCallback=function(te,ce){return le.current.useCallback(te,ce)},On.useContext=function(te){return le.current.useContext(te)},On.useDebugValue=function(){},On.useDeferredValue=function(te){return le.current.useDeferredValue(te)},On.useEffect=function(te,ce){return le.current.useEffect(te,ce)},On.useId=function(){return le.current.useId()},On.useImperativeHandle=function(te,ce,de){return le.current.useImperativeHandle(te,ce,de)},On.useInsertionEffect=function(te,ce){return le.current.useInsertionEffect(te,ce)},On.useLayoutEffect=function(te,ce){return le.current.useLayoutEffect(te,ce)},On.useMemo=function(te,ce){return le.current.useMemo(te,ce)},On.useReducer=function(te,ce,de){return le.current.useReducer(te,ce,de)},On.useRef=function(te){return le.current.useRef(te)},On.useState=function(te){return le.current.useState(te)},On.useSyncExternalStore=function(te,ce,de){return le.current.useSyncExternalStore(te,ce,de)},On.useTransition=function(){return le.current.useTransition()},On.version="18.3.1",On}var tT;function xm(){return tT||(tT=1,v_.exports=j4()),v_.exports}var nT;function R4(){if(nT)return Rp;nT=1;var t=xm(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,d){var p,h={},g=null,x=null;d!==void 0&&(g=""+d),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(x=u.ref);for(p in u)r.call(u,p)&&!s.hasOwnProperty(p)&&(h[p]=u[p]);if(a&&a.defaultProps)for(p in u=a.defaultProps,u)h[p]===void 0&&(h[p]=u[p]);return{$$typeof:e,type:a,key:g,ref:x,props:h,_owner:i.current}}return Rp.Fragment=n,Rp.jsx=o,Rp.jsxs=o,Rp}var rT;function O4(){return rT||(rT=1,b_.exports=R4()),b_.exports}var f=O4(),xf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hc=typeof window>"u"||"Deno"in globalThis;function po(){}function A4(t,e){return typeof t=="function"?t(e):t}function NE(t){return typeof t=="number"&&t>=0&&t!==1/0}function F3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Dd(t,e){return typeof t=="function"?t(e):t}function Po(t,e){return typeof t=="function"?t(e):t}function iT(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==JI(o,e.options))return!1}else if(!Ch(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function sT(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(mc(e.options.mutationKey)!==mc(s))return!1}else if(!Ch(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function JI(t,e){return(e?.queryKeyHashFn||mc)(t)}function mc(t){return JSON.stringify(t,(e,n)=>kE(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Ch(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Ch(t[n],e[n])):!1}function ZI(t,e){if(t===e)return t;const n=oT(t)&&oT(e);if(n||kE(t)&&kE(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{};let u=0;for(let d=0;d<o;d++){const p=n?d:s[d];(!n&&r.includes(p)||n)&&t[p]===void 0&&e[p]===void 0?(a[p]=void 0,u++):(a[p]=ZI(t[p],e[p]),a[p]===t[p]&&t[p]!==void 0&&u++)}return i===o&&u===i?t:a}return e}function Ob(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function oT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function kE(t){if(!aT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!aT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function aT(t){return Object.prototype.toString.call(t)==="[object Object]"}function q4(t){return new Promise(e=>{setTimeout(e,t)})}function CE(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ZI(t,e):e}function P4(t){return t}function F4(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function D4(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var YI=Symbol();function D3(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===YI?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var L4=class extends xf{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!hc&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},XI=new L4,M4=class extends xf{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!hc&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Ab=new M4;function TE(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function $4(t){return Math.min(1e3*2**t,3e4)}function L3(t){return(t??"online")==="online"?Ab.isOnline():!0}var M3=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function x_(t){return t instanceof M3}function $3(t){let e=!1,n=0,r=!1,i;const s=TE(),o=S=>{r||(g(new M3(S)),t.abort?.())},a=()=>{e=!0},u=()=>{e=!1},d=()=>XI.isFocused()&&(t.networkMode==="always"||Ab.isOnline())&&t.canRun(),p=()=>L3(t.networkMode)&&t.canRun(),h=S=>{r||(r=!0,t.onSuccess?.(S),i?.(),s.resolve(S))},g=S=>{r||(r=!0,t.onError?.(S),i?.(),s.reject(S))},x=()=>new Promise(S=>{i=k=>{(r||d())&&S(k)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),_=()=>{if(r)return;let S;const k=n===0?t.initialPromise:void 0;try{S=k??t.fn()}catch(I){S=Promise.reject(I)}Promise.resolve(S).then(h).catch(I=>{if(r)return;const E=t.retry??(hc?0:3),C=t.retryDelay??$4,j=typeof C=="function"?C(n,I):C,q=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,I);if(e||!q){g(I);return}n++,t.onFail?.(n,I),q4(j).then(()=>d()?void 0:x()).then(()=>{e?g(I):_()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:a,continueRetry:u,canStart:p,start:()=>(p()?_():x().then(_),s)}}function B4(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(u=>{n(u)})})})};return{batch:a=>{let u;e++;try{u=a()}finally{e--,e||o()}return u},batchCalls:a=>(...u)=>{s(()=>{a(...u)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var ti=B4(),B3=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),NE(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(hc?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},z4=class extends B3{#e;#t;#n;#r;#i;#s;constructor(t){super(),this.#s=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=W4(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=CE(this.state.data,t,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#o({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(po).catch(po):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Po(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===YI||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!F3(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const a=this.observers.find(u=>u.options.queryFn);a&&this.setOptions(a.options)}const n=new AbortController,r=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#s=!0,n.signal)})},i=()=>{const a=D3(this.options,e),u={queryKey:this.queryKey,meta:this.meta};return r(u),this.#s=!1,this.options.persister?this.options.persister(a,u,this):a(u)},s={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(s),this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#o({type:"fetch",meta:s.fetchOptions?.meta});const o=a=>{x_(a)&&a.silent||this.#o({type:"error",error:a}),x_(a)||(this.#n.config.onError?.(a,this),this.#n.config.onSettled?.(this.state.data,a,this)),this.scheduleGc()};return this.#r=$3({initialPromise:e?.initialPromise,fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:a=>{if(a===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(a)}catch(u){o(u);return}this.#n.config.onSuccess?.(a,this),this.#n.config.onSettled?.(a,this.state.error,this),this.scheduleGc()},onError:o,onFail:(a,u)=>{this.#o({type:"failed",failureCount:a,error:u})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#r.start()}#o(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...z3(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return x_(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),ti.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function z3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:L3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function W4(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var U4=class extends xf{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??JI(r,e);let s=this.get(i);return s||(s=new z4({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ti.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>iT(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>iT(t,n)):e}notify(t){ti.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){ti.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ti.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},V4=class extends B3{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||W3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=$3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,i)=>{this.#r({type:"failed",failureCount:r,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:n})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#r({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#r({type:"error",error:r})}}finally{this.#t.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),ti.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function W3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var H4=class extends xf{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new V4({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=ty(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=ty(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=ty(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=ty(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ti.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>sT(e,n))}findAll(t={}){return this.getAll().filter(e=>sT(t,e))}notify(t){ti.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return ti.batch(()=>Promise.all(t.map(e=>e.continue().catch(po))))}};function ty(t){return t.options.scope?.id}function lT(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},u=0;const d=async()=>{let p=!1;const h=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},g=D3(e.options,e.fetchOptions),x=async(_,S,k)=>{if(p)return Promise.reject();if(S==null&&_.pages.length)return Promise.resolve(_);const I={queryKey:e.queryKey,pageParam:S,direction:k?"backward":"forward",meta:e.options.meta};h(I);const E=await g(I),{maxPages:C}=e.options,j=k?D4:F4;return{pages:j(_.pages,E,C),pageParams:j(_.pageParams,S,C)}};if(i&&s.length){const _=i==="backward",S=_?G4:uT,k={pages:s,pageParams:o},I=S(r,k);a=await x(k,I,_)}else{const _=t??s.length;do{const S=u===0?o[0]??r.initialPageParam:uT(r,a);if(u>0&&S==null)break;a=await x(a,S),u++}while(u<_)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function uT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function G4(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var K4=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(t={}){this.#e=t.queryCache||new U4,this.#t=t.mutationCache||new H4,this.#n=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=XI.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Ab.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Dd(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,o=A4(e,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ti.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;ti.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,r={type:"active",...t};return ti.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=ti.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(po).catch(po)}invalidateQueries(t,e={}){return ti.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none")return Promise.resolve();const n={...t,type:t?.refetchType??t?.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=ti.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(po)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(po)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Dd(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(po).catch(po)}fetchInfiniteQuery(t){return t.behavior=lT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(po).catch(po)}ensureInfiniteQueryData(t){return t.behavior=lT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ab.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(mc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Ch(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(mc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()];let n={};return e.forEach(r=>{Ch(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=JI(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===YI&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Q4=class extends xf{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#o=TE(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#s;#o;#a;#u;#l;#c;#d;#p;#f;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),cT(this.#t,this.options)?this.#h():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jE(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jE(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#w(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Po(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!Ob(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&dT(this.#t,r,this.options,n)&&this.#h(),this.updateResult(e),i&&(this.#t!==r||Po(this.options.enabled,this.#t)!==Po(n.enabled,this.#t)||Dd(this.options.staleTime,this.#t)!==Dd(n.staleTime,this.#t))&&this.#g();const s=this.#y();i&&(this.#t!==r||Po(this.options.enabled,this.#t)!==Po(n.enabled,this.#t)||s!==this.#f)&&this.#b(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return Z4(this,n)&&(this.#r=n,this.#s=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#_();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(po)),e}#g(){this.#x();const t=Dd(this.options.staleTime,this.#t);if(hc||this.#r.isStale||!NE(t))return;const n=F3(this.#r.dataUpdatedAt,t)+1;this.#d=setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#w(),this.#f=t,!(hc||Po(this.options.enabled,this.#t)===!1||!NE(this.#f)||this.#f===0)&&(this.#p=setInterval(()=>{(this.options.refetchIntervalInBackground||XI.isFocused())&&this.#h()},this.#f))}#v(){this.#g(),this.#b(this.#y())}#x(){this.#d&&(clearTimeout(this.#d),this.#d=void 0)}#w(){this.#p&&(clearInterval(this.#p),this.#p=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#r,s=this.#i,o=this.#s,u=t!==n?t.state:this.#n,{state:d}=t;let p={...d},h=!1,g;if(e._optimisticResults){const $=this.hasListeners(),P=!$&&cT(t,e),O=$&&dT(t,n,e,r);(P||O)&&(p={...p,...z3(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:_,status:S}=p;if(e.select&&p.data!==void 0)if(i&&p.data===s?.data&&e.select===this.#u)g=this.#l;else try{this.#u=e.select,g=e.select(p.data),g=CE(i?.data,g,e),this.#l=g,this.#a=null}catch($){this.#a=$}else g=p.data;if(e.placeholderData!==void 0&&g===void 0&&S==="pending"){let $;if(i?.isPlaceholderData&&e.placeholderData===o?.placeholderData)$=i.data;else if($=typeof e.placeholderData=="function"?e.placeholderData(this.#c?.state.data,this.#c):e.placeholderData,e.select&&$!==void 0)try{$=e.select($),this.#a=null}catch(P){this.#a=P}$!==void 0&&(S="success",g=CE(i?.data,$,e),h=!0)}this.#a&&(x=this.#a,g=this.#l,_=Date.now(),S="error");const k=p.fetchStatus==="fetching",I=S==="pending",E=S==="error",C=I&&k,j=g!==void 0,F={status:S,fetchStatus:p.fetchStatus,isPending:I,isSuccess:S==="success",isError:E,isInitialLoading:C,isLoading:C,data:g,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:_,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:k,isRefetching:k&&!I,isLoadingError:E&&!j,isPaused:p.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:E&&j,isStale:e1(t,e),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const $=B=>{F.status==="error"?B.reject(F.error):F.data!==void 0&&B.resolve(F.data)},P=()=>{const B=this.#o=F.promise=TE();$(B)},O=this.#o;switch(O.status){case"pending":t.queryHash===n.queryHash&&$(O);break;case"fulfilled":(F.status==="error"||F.data!==O.value)&&P();break;case"rejected":(F.status!=="error"||F.error!==O.reason)&&P();break}}return F}updateResult(t){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#s=this.options,this.#i.data!==void 0&&(this.#c=this.#t),Ob(n,e))return;this.#r=n;const r={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#m.size)return!0;const a=new Set(o??this.#m);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(u=>{const d=u;return this.#r[d]!==e[d]&&a.has(d)})};t?.listeners!==!1&&i()&&(r.listeners=!0),this.#S({...r,...t})}#_(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(t){ti.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function J4(t,e){return Po(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function cT(t,e){return J4(t,e)||t.state.data!==void 0&&jE(t,e,e.refetchOnMount)}function jE(t,e,n){if(Po(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&e1(t,e)}return!1}function dT(t,e,n,r){return(t!==e||Po(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&e1(t,n)}function e1(t,e){return Po(e.enabled,t)!==!1&&t.isStaleByTime(Dd(e.staleTime,t))}function Z4(t,e){return!Ob(t.getCurrentResult(),e)}var Y4=class extends xf{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),Ob(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&mc(n.mutationKey)!==mc(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#s()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??W3();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){ti.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},H=xm();const Un=Gs(H),X4=C4({__proto__:null,default:Un},[H]);var U3=H.createContext(void 0),$v=t=>{const e=H.useContext(U3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ez=({client:t,children:e})=>(H.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),f.jsx(U3.Provider,{value:t,children:e})),V3=H.createContext(!1),tz=()=>H.useContext(V3);V3.Provider;function nz(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var rz=H.createContext(nz()),iz=()=>H.useContext(rz);function H3(t,e){return typeof t=="function"?t(...e):!!t}function RE(){}var sz=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},oz=t=>{H.useEffect(()=>{t.clearReset()},[t])},az=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&H3(n,[t.error,r]),lz=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},uz=(t,e)=>t.isLoading&&t.isFetching&&!e,cz=(t,e)=>t?.suspense&&e.isPending,fT=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function dz(t,e,n){const r=$v(),i=tz(),s=iz(),o=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=i?"isRestoring":"optimistic",lz(o),sz(o,s),oz(s);const a=!r.getQueryCache().get(o.queryHash),[u]=H.useState(()=>new e(r,o)),d=u.getOptimisticResult(o),p=!i&&t.subscribed!==!1;if(H.useSyncExternalStore(H.useCallback(h=>{const g=p?u.subscribe(ti.batchCalls(h)):RE;return u.updateResult(),g},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),H.useEffect(()=>{u.setOptions(o,{listeners:!1})},[o,u]),cz(o,d))throw fT(o,u,s);if(az({result:d,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw d.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,d),o.experimental_prefetchInRender&&!hc&&uz(d,i)&&(a?fT(o,u,s):r.getQueryCache().get(o.queryHash)?.promise)?.catch(RE).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?d:u.trackResult(d)}function qb(t,e){return dz(t,Q4)}function pT(t,e){return t.findAll(e.filters).map(n=>e.select?e.select(n):n.state)}function fz(t={},e){const n=$v().getMutationCache(),r=H.useRef(t),i=H.useRef(null);return i.current||(i.current=pT(n,t)),H.useEffect(()=>{r.current=t}),H.useSyncExternalStore(H.useCallback(s=>n.subscribe(()=>{const o=ZI(i.current,pT(n,r.current));i.current!==o&&(i.current=o,ti.schedule(s))}),[n]),()=>i.current,()=>i.current)}function Jt(t,e){const n=$v(),[r]=H.useState(()=>new Y4(n,t));H.useEffect(()=>{r.setOptions(t)},[r,t]);const i=H.useSyncExternalStore(H.useCallback(o=>r.subscribe(ti.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=H.useCallback((o,a)=>{r.mutate(o,a).catch(RE)},[r]);if(i.error&&H3(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const lc="__TSR_index",hT="popstate",mT="beforeunload";function G3(t){let e=t.getLocation();const n=new Set,r=o=>{e=t.getLocation(),n.forEach(a=>a({location:e,action:o}))},i=o=>{t.notifyOnIndexChange??!0?r(o):e=t.getLocation()},s=async({task:o,navigateOpts:a,...u})=>{var d,p;if(a?.ignoreBlocker??!1){o();return}const g=((d=t.getBlockers)==null?void 0:d.call(t))??[],x=u.type==="PUSH"||u.type==="REPLACE";if(typeof document<"u"&&g.length&&x)for(const _ of g){const S=Th(u.path,u.state);if(await _.blockerFn({currentLocation:e,nextLocation:S,action:u.type})){(p=t.onBlocked)==null||p.call(t);return}}o()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,a,u)=>{const d=e.state[lc];a=OE(d+1,a),s({task:()=>{t.pushState(o,a),r({type:"PUSH"})},navigateOpts:u,type:"PUSH",path:o,state:a})},replace:(o,a,u)=>{const d=e.state[lc];a=OE(d,a),s({task:()=>{t.replaceState(o,a),r({type:"REPLACE"})},navigateOpts:u,type:"REPLACE",path:o,state:a})},go:(o,a)=>{s({task:()=>{t.go(o),i({type:"GO",index:o})},navigateOpts:a,type:"GO"})},back:o=>{s({task:()=>{t.back(o?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{s({task:()=>{t.forward(o?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>e.state[lc]!==0,createHref:o=>t.createHref(o),block:o=>{var a;if(!t.setBlockers)return()=>{};const u=((a=t.getBlockers)==null?void 0:a.call(t))??[];return t.setBlockers([...u,o]),()=>{var d,p;const h=((d=t.getBlockers)==null?void 0:d.call(t))??[];(p=t.setBlockers)==null||p.call(t,h.filter(g=>g!==o))}},flush:()=>{var o;return(o=t.flush)==null?void 0:o.call(t)},destroy:()=>{var o;return(o=t.destroy)==null?void 0:o.call(t)},notify:r}}function OE(t,e){return e||(e={}),{...e,key:mz(),[lc]:t}}function pz(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState;let i=[];const s=()=>i,o=P=>i=P,a=P=>P,u=()=>Th(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);let d=u(),p,h=!1,g=!1,x=!1,_=!1;const S=()=>d;let k,I;const E=()=>{k&&($._ignoreSubscribers=!0,(k.isPush?e.history.pushState:e.history.replaceState)(k.state,"",k.href),$._ignoreSubscribers=!1,k=void 0,I=void 0,p=void 0)},C=(P,O,B)=>{const D=a(O);I||(p=d),d=Th(O,B),k={href:D,state:B,isPush:k?.isPush||P==="push"},I||(I=Promise.resolve().then(()=>E()))},j=P=>{d=u(),$.notify({type:P})},q=async()=>{if(g){g=!1;return}const P=u(),O=P.state[lc]-d.state[lc],B=O===1,D=O===-1,W=!B&&!D||h;h=!1;const V=W?"GO":D?"BACK":"FORWARD",z=W?{type:"GO",index:O}:{type:D?"BACK":"FORWARD"};if(x)x=!1;else{const X=s();if(typeof document<"u"&&X.length){for(const Z of X)if(await Z.blockerFn({currentLocation:d,nextLocation:P,action:V})){g=!0,e.history.go(1),$.notify(z);return}}}d=u(),$.notify(z)},F=P=>{if(_){_=!1;return}let O=!1;const B=s();if(typeof document<"u"&&B.length)for(const D of B){const W=D.enableBeforeUnload??!0;if(W===!0){O=!0;break}if(typeof W=="function"&&W()===!0){O=!0;break}}if(O)return P.preventDefault(),P.returnValue=""},$=G3({getLocation:S,getLength:()=>e.history.length,pushState:(P,O)=>C("push",P,O),replaceState:(P,O)=>C("replace",P,O),back:P=>(P&&(x=!0),_=!0,e.history.back()),forward:P=>{P&&(x=!0),_=!0,e.history.forward()},go:P=>{h=!0,e.history.go(P)},createHref:P=>a(P),flush:E,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(mT,F,{capture:!0}),e.removeEventListener(hT,q)},onBlocked:()=>{p&&d!==p&&(d=p)},getBlockers:s,setBlockers:o,notifyOnIndexChange:!1});return e.addEventListener(mT,F,{capture:!0}),e.addEventListener(hT,q),e.history.pushState=function(...P){const O=n.apply(e.history,P);return $._ignoreSubscribers||j("PUSH"),O},e.history.replaceState=function(...P){const O=r.apply(e.history,P);return $._ignoreSubscribers||j("REPLACE"),O},$}function hz(t={initialEntries:["/"]}){const e=t.initialEntries;let n=t.initialIndex?Math.min(Math.max(t.initialIndex,0),e.length-1):e.length-1;const r=e.map((s,o)=>OE(o,void 0));return G3({getLocation:()=>Th(e[n],r[n]),getLength:()=>e.length,pushState:(s,o)=>{n<e.length-1&&(e.splice(n+1),r.splice(n+1)),r.push(o),e.push(s),n=Math.max(e.length-1,0)},replaceState:(s,o)=>{r[n]=o,e[n]=s},back:()=>{n=Math.max(n-1,0)},forward:()=>{n=Math.min(n+1,e.length-1)},go:s=>{n=Math.min(Math.max(n+s,0),e.length-1)},createHref:s=>s})}function Th(t,e){const n=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[lc]:0}}}function mz(){return(Math.random()+1).toString(36).substring(7)}var gz="Invariant failed";function Fs(t,e){if(!t)throw new Error(gz)}const w_=H.createContext(null);function K3(){return typeof document>"u"?w_:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=w_,w_)}function Qo(t){const e=H.useContext(K3());return t?.warn,e}var __={exports:{}},S_={},E_={exports:{}},I_={};var gT;function yz(){if(gT)return I_;gT=1;var t=xm();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(h,g){var x=g(),_=r({inst:{value:x,getSnapshot:g}}),S=_[0].inst,k=_[1];return s(function(){S.value=x,S.getSnapshot=g,u(S)&&k({inst:S})},[h,x,g]),i(function(){return u(S)&&k({inst:S}),h(function(){u(S)&&k({inst:S})})},[h]),o(x),x}function u(h){var g=h.getSnapshot;h=h.value;try{var x=g();return!n(h,x)}catch{return!0}}function d(h,g){return g()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:a;return I_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,I_}var yT;function bz(){return yT||(yT=1,E_.exports=yz()),E_.exports}var bT;function vz(){if(bT)return S_;bT=1;var t=xm(),e=bz();function n(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,u=t.useDebugValue;return S_.useSyncExternalStoreWithSelector=function(d,p,h,g,x){var _=s(null);if(_.current===null){var S={hasValue:!1,value:null};_.current=S}else S=_.current;_=a(function(){function I(F){if(!E){if(E=!0,C=F,F=g(F),x!==void 0&&S.hasValue){var $=S.value;if(x($,F))return j=$}return j=F}if($=j,r(C,F))return $;var P=g(F);return x!==void 0&&x($,P)?(C=F,$):(C=F,j=P)}var E=!1,C,j,q=h===void 0?null:h;return[function(){return I(p())},q===null?void 0:function(){return I(q())}]},[p,h,g,x]);var k=i(d,_[0],_[1]);return o(function(){S.hasValue=!0,S.value=k},[k]),u(k),k},S_}var vT;function xz(){return vT||(vT=1,__.exports=vz()),__.exports}var Q3=xz();const wz=Gs(Q3),Ld=new WeakMap,Wy=new WeakMap,Pb={current:[]};let N_=!1,fh=0;const Kp=new Set,ny=new Map;function J3(t){const e=Array.from(t).sort((n,r)=>n instanceof Md&&n.options.deps.includes(r)?1:r instanceof Md&&r.options.deps.includes(n)?-1:0);for(const n of e){if(Pb.current.includes(n))continue;Pb.current.push(n),n.recompute();const r=Wy.get(n);if(r)for(const i of r){const s=Ld.get(i);s&&J3(s)}}}function _z(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function Sz(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function Z3(t){if(fh>0&&!ny.has(t)&&ny.set(t,t.prevState),Kp.add(t),!(fh>0)&&!N_)try{for(N_=!0;Kp.size>0;){const e=Array.from(Kp);Kp.clear();for(const n of e){const r=ny.get(n)??n.prevState;n.prevState=r,_z(n)}for(const n of e){const r=Ld.get(n);r&&(Pb.current.push(n),J3(r))}for(const n of e){const r=Ld.get(n);if(r)for(const i of r)Sz(i)}}}finally{N_=!1,Pb.current=[],ny.clear()}}function k_(t){fh++;try{t()}finally{if(fh--,fh===0){const e=Array.from(Kp)[0];e&&Z3(e)}}}class AE{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var i,s;this.listeners.add(r);const o=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),o?.()}},this.setState=r=>{var i,s,o;this.prevState=this.state,this.state=(i=this.options)!=null&&i.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(s=this.options)==null?void 0:s.onUpdate)==null||o.call(s),Z3(this)},this.prevState=e,this.state=e,this.options=n}}class Md{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const i of this.options.deps)n.push(i.prevState),r.push(i.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:i,currDepVals:s,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:s,prevVal:o}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const s of this.options.deps)s instanceof Md&&s.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==r[s]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,i;this.listeners.add(n);const s=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),s?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const n of e)if(n instanceof Md)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof AE){let r=Ld.get(n);r||(r=new Set,Ld.set(n,r)),r.add(this);let i=Wy.get(this);i||(i=new Set,Wy.set(this,i)),i.add(n)}}unregisterFromGraph(e=this.options.deps){for(const n of e)if(n instanceof Md)this.unregisterFromGraph(n.options.deps);else if(n instanceof AE){const r=Ld.get(n);r&&r.delete(this);const i=Wy.get(this);i&&i.delete(n)}}}function Ez(t,e=n=>n){return Q3.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,Iz)}function Iz(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var C_,xT;function Nz(){if(xT)return C_;xT=1;const t={},e=t.hasOwnProperty,n=(P,O)=>{for(const B in P)e.call(P,B)&&O(B,P[B])},r=(P,O)=>(O&&n(O,(B,D)=>{P[B]=D}),P),i=(P,O)=>{const B=P.length;let D=-1;for(;++D<B;)O(P[D])},s=P=>"\\u"+("0000"+P).slice(-4),o=(P,O)=>{let B=P.toString(16);return O?B:B.toUpperCase()},a=t.toString,u=Array.isArray,d=P=>typeof Buffer=="function"&&Buffer.isBuffer(P),p=P=>a.call(P)=="[object Object]",h=P=>typeof P=="string"||a.call(P)=="[object String]",g=P=>typeof P=="number"||a.call(P)=="[object Number]",x=P=>typeof P=="bigint",_=P=>typeof P=="function",S=P=>a.call(P)=="[object Map]",k=P=>a.call(P)=="[object Set]",I={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},E=/[\\\b\f\n\r\t]/,C=/[0-9]/,j=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,q=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,F=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,$=(P,O)=>{const B=()=>{le=Z,++O.indentLevel,Z=O.indent.repeat(O.indentLevel)},D={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},W=O&&O.json;W&&(D.quotes="double",D.wrap=!0),O=r(D,O),O.quotes!="single"&&O.quotes!="double"&&O.quotes!="backtick"&&(O.quotes="single");const V=O.quotes=="double"?'"':O.quotes=="backtick"?"`":"'",z=O.compact,X=O.lowercaseHex;let Z=O.indent.repeat(O.indentLevel),le="";const ie=O.__inline1__,ne=O.__inline2__,oe=z?"":`
`;let te,ce=!0;const de=O.numbers=="binary",ye=O.numbers=="octal",we=O.numbers=="decimal",Ie=O.numbers=="hexadecimal";if(W&&P&&_(P.toJSON)&&(P=P.toJSON()),!h(P)){if(S(P))return P.size==0?"new Map()":(z||(O.__inline1__=!0,O.__inline2__=!1),"new Map("+$(Array.from(P),O)+")");if(k(P))return P.size==0?"new Set()":"new Set("+$(Array.from(P),O)+")";if(d(P))return P.length==0?"Buffer.from([])":"Buffer.from("+$(Array.from(P),O)+")";if(u(P))return te=[],O.wrap=!0,ie&&(O.__inline1__=!1,O.__inline2__=!0),ne||B(),i(P,Re=>{ce=!1,ne&&(O.__inline2__=!1),te.push((z||ne?"":Z)+$(Re,O))}),ce?"[]":ne?"["+te.join(", ")+"]":"["+oe+te.join(","+oe)+oe+(z?"":le)+"]";if(g(P)||x(P)){if(W)return JSON.stringify(Number(P));let Re;if(we)Re=String(P);else if(Ie){let De=P.toString(16);X||(De=De.toUpperCase()),Re="0x"+De}else de?Re="0b"+P.toString(2):ye&&(Re="0o"+P.toString(8));return x(P)?Re+"n":Re}else return x(P)?W?JSON.stringify(Number(P)):P+"n":p(P)?(te=[],O.wrap=!0,B(),n(P,(Re,De)=>{ce=!1,te.push((z?"":Z)+$(Re,O)+":"+(z?"":" ")+$(De,O))}),ce?"{}":"{"+oe+te.join(","+oe)+oe+(z?"":le)+"}"):W?JSON.stringify(P)||"null":String(P)}const ze=O.escapeEverything?q:F;return te=P.replace(ze,(Re,De,Je,Xe,Ue,ut)=>{if(De){if(O.minimal)return De;const At=De.charCodeAt(0),Gt=De.charCodeAt(1);if(O.es6){const ln=(At-55296)*1024+Gt-56320+65536;return"\\u{"+o(ln,X)+"}"}return s(o(At,X))+s(o(Gt,X))}if(Je)return s(o(Je.charCodeAt(0),X));if(Re=="\0"&&!W&&!C.test(ut.charAt(Ue+1)))return"\\0";if(Xe)return Xe==V||O.escapeEverything?"\\"+Xe:Xe;if(E.test(Re))return I[Re];if(O.minimal&&!j.test(Re))return Re;const Et=o(Re.charCodeAt(0),X);return W||Et.length>2?s(Et):"\\x"+("00"+Et).slice(-2)}),V=="`"&&(te=te.replace(/\$\{/g,"\\${")),O.isScriptContext&&(te=te.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,W?"\\u003C!--":"\\x3C!--")),O.wrap&&(te=V+te+V),te};return $.version="3.0.2",C_=$,C_}Nz();const qs="__root__";function kz(t,e){let n,r,i,s="";for(n in t)if((i=t[n])!==void 0)if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i);return""+s}function wT(t){if(!t)return"";const e=decodeURIComponent(t);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function Cz(t,e){let n,r;const i={},s=t.split("&");for(;n=s.shift();){const o=n.indexOf("=");if(o!==-1){r=n.slice(0,o),r=decodeURIComponent(r);const a=n.slice(o+1);i[r]!==void 0?i[r]=[].concat(i[r],wT(a)):i[r]=wT(a)}else r=n,r=decodeURIComponent(r),i[r]=""}return i}const Tz=Rz(JSON.parse),jz=Oz(JSON.stringify,JSON.parse);function Rz(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const n=Cz(e);for(const r in n){const i=n[r];if(typeof i=="string")try{n[r]=t(i)}catch{}}return n}}function Oz(t,e){function n(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(s=>{const o=r[s];typeof o>"u"||o===void 0?delete r[s]:r[s]=n(o)});const i=kz(r).toString();return i?`?${i}`:""}}function ph(t){return t[t.length-1]}function Az(t){return typeof t=="function"}function tc(t,e){return Az(t)?t(e):t}function Uy(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function co(t,e){if(t===e)return t;const n=e,r=ST(t)&&ST(n);if(r||Ql(t)&&Ql(n)){const i=r?t:Object.keys(t),s=i.length,o=r?n:Object.keys(n),a=o.length,u=r?[]:{};let d=0;for(let p=0;p<a;p++){const h=r?p:o[p];(!r&&i.includes(h)||r)&&t[h]===void 0&&n[h]===void 0?(u[h]=void 0,d++):(u[h]=co(t[h],n[h]),u[h]===t[h]&&t[h]!==void 0&&d++)}return s===a&&d===s?t:u}return n}function Ql(t){if(!_T(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!_T(n)||!n.hasOwnProperty("isPrototypeOf"))}function _T(t){return Object.prototype.toString.call(t)==="[object Object]"}function ST(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ET(t,e){let n=Object.keys(t);return e&&(n=n.filter(r=>t[r]!==void 0)),n}function $d(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Ql(t)&&Ql(e)){const r=n?.ignoreUndefined??!0,i=ET(t,r),s=ET(e,r);return!n?.partial&&i.length!==s.length?!1:s.every(o=>$d(t[o],e[o],n))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((r,i)=>!$d(r,e[i],n)):!1}const Qp=typeof window<"u"?H.useLayoutEffect:H.useEffect;function Ed(t){let e,n;const r=new Promise((i,s)=>{e=i,n=s});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,e(i),t?.(i)},r.reject=i=>{r.status="rejected",n(i)},r}function T_(t){const e=H.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function qz(t,e,n={},r={}){const i=H.useRef(typeof IntersectionObserver=="function"),s=H.useRef(null);return H.useEffect(()=>{if(!(!t.current||!i.current||r.disabled))return s.current=new IntersectionObserver(([o])=>{e(o)},n),s.current.observe(t.current),()=>{var o;(o=s.current)==null||o.disconnect()}},[e,n,r.disabled,t]),s.current}function Pz(t){const e=H.useRef(null);return H.useEffect(()=>{t&&(typeof t=="function"?t(e.current):t.current=e.current)}),e}function Qa(t){return Bv(t.filter(e=>e!==void 0).join("/"))}function Bv(t){return t.replace(/\/{2,}/g,"/")}function t1(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function nc(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function Fz(t){return nc(t1(t))}function Fb(t,e){return t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function Dz(t,e,n){return Fb(t,n)===Fb(e,n)}function Lz({basepath:t,base:e,to:n,trailingSlash:r="never",caseSensitive:i}){var s,o;e=Db(t,e,i),n=Db(t,n,i);let a=nf(e);const u=nf(n);a.length>1&&((s=ph(a))==null?void 0:s.value)==="/"&&a.pop(),u.forEach((p,h)=>{p.value==="/"?h?h===u.length-1&&a.push(p):a=[p]:p.value===".."?a.pop():p.value==="."||a.push(p)}),a.length>1&&(((o=ph(a))==null?void 0:o.value)==="/"?r==="never"&&a.pop():r==="always"&&a.push({type:"pathname",value:"/"}));const d=Qa([t,...a.map(p=>p.value)]);return Bv(d)}function nf(t){if(!t)return[];t=Bv(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const n=t.split("/").filter(Boolean);return e.push(...n.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function ry({path:t,params:e,leaveWildcards:n,leaveParams:r,decodeCharMap:i}){const s=nf(t),o={};for(const[a,u]of Object.entries(e)){const d=typeof u=="string";["*","_splat"].includes(a)?o[a]=d?encodeURI(u):u:o[a]=d?Mz(u,i):u}return Qa(s.map(a=>{if(a.type==="wildcard"){const u=o._splat;return n?`${a.value}${u??""}`:u}if(a.type==="param"){if(r){const u=o[a.value];return`${a.value}${u??""}`}return o[a.value.substring(1)]??"undefined"}return a.value}))}function Mz(t,e){let n=encodeURIComponent(t);if(e)for(const[r,i]of e)n=n.replaceAll(r,i);return n}function iy(t,e,n){const r=$z(t,e,n);if(!(n.to&&!r))return r??{}}function Db(t,e,n=!1){const r=n?t:t.toLowerCase(),i=n?e:e.toLowerCase();switch(!0){case r==="/":return e;case i===r:return"";case e.length<t.length:return e;case i[r.length]!=="/":return e;case i.startsWith(r):return e.slice(t.length);default:return e}}function $z(t,e,n){if(t!=="/"&&!e.startsWith(t))return;e=Db(t,e,n.caseSensitive);const r=Db(t,`${n.to??"$"}`,n.caseSensitive),i=nf(e),s=nf(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"}),r.startsWith("/")||s.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let u=0;u<Math.max(i.length,s.length);u++){const d=i[u],p=s[u],h=u>=i.length-1,g=u>=s.length-1;if(p){if(p.type==="wildcard"){const x=decodeURI(Qa(i.slice(u).map(_=>_.value)));return o["*"]=x,o._splat=x,!0}if(p.type==="pathname"){if(p.value==="/"&&!d?.value)return!0;if(d){if(n.caseSensitive){if(p.value!==d.value)return!1}else if(p.value.toLowerCase()!==d.value.toLowerCase())return!1}}if(!d)return!1;if(p.type==="param"){if(d.value==="/")return!1;d.value.charAt(0)!=="$"&&(o[p.value.substring(1)]=decodeURIComponent(d.value))}}if(!h&&g)return o["**"]=Qa(i.slice(u+1).map(x=>x.value)),!!n.fuzzy&&p?.value!=="/"}return!0})()?o:void 0}function wm(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},!t.reloadDocument){t.reloadDocument=!1;try{new URL(`${t.href}`),t.reloadDocument=!0}catch{}}if(t.throw)throw t;return t}function Hu(t){return!!t?.isRedirect}function j_(t){return!!t?.isRedirect&&t.href}function n1(t){const e=t.errorComponent??zv;return f.jsx(Bz,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?H.createElement(e,{error:n,reset:r}):t.children})}class Bz extends H.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function zv({error:t}){const[e,n]=H.useState(!1);return f.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[f.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),f.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),f.jsx("div",{style:{height:".25rem"}}),e?f.jsx("div",{children:f.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?f.jsx("code",{children:t.message}):null})}):null]})}function ts(t){const e=Qo({warn:t?.router===void 0}),n=t?.router||e,r=H.useRef();return Ez(n.__store,i=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const s=co(r.current,t.select(i));return r.current=s,s}return t.select(i)}return i})}function Ao(t){return!!t?.isNotFound}function zz(t){const e=ts({select:n=>`not-found-${n.location.pathname}-${n.status}`});return f.jsx(n1,{getResetKey:()=>e,onCatch:(n,r)=>{var i;if(Ao(n))(i=t.onCatch)==null||i.call(t,n,r);else throw n},errorComponent:({error:n})=>{var r;if(Ao(n))return(r=t.fallback)==null?void 0:r.call(t,n);throw n},children:t.children})}function Wz(){return f.jsx("p",{children:"Not Found"})}const Jp={stringify:t=>JSON.stringify(t,function(n,r){const i=this[n],s=oy.find(o=>o.stringifyCondition(i));return s?s.stringify(i):r}),parse:t=>JSON.parse(t,function(n,r){const i=this[n];if(Ql(i)){const s=oy.find(o=>o.parseCondition(i));if(s)return s.parse(i)}return r}),encode:t=>{if(Array.isArray(t))return t.map(n=>Jp.encode(n));if(Ql(t))return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Jp.encode(r)]));const e=oy.find(n=>n.stringifyCondition(t));return e?e.stringify(t):t},decode:t=>{if(Ql(t)){const e=oy.find(n=>n.parseCondition(t));if(e)return e.parse(t)}return Array.isArray(t)?t.map(e=>Jp.decode(e)):Ql(t)?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,Jp.decode(n)])):t}},sy=(t,e,n,r)=>({key:t,stringifyCondition:e,stringify:i=>({[`$${t}`]:n(i)}),parseCondition:i=>Object.hasOwn(i,`$${t}`),parse:i=>r(i[`$${t}`])}),oy=[sy("undefined",t=>t===void 0,()=>0,()=>{}),sy("date",t=>t instanceof Date,t=>t.toISOString(),t=>new Date(t)),sy("error",t=>t instanceof Error,t=>({...t,message:t.message,stack:t.stack,cause:t.cause}),t=>Object.assign(new Error(t.message),t)),sy("formData",t=>t instanceof FormData,t=>{const e={};return t.forEach((n,r)=>{const i=e[r];i!==void 0?Array.isArray(i)?i.push(n):e[r]=[i,n]:e[r]=n}),e},t=>{const e=new FormData;return Object.entries(t).forEach(([n,r])=>{Array.isArray(r)?r.forEach(i=>e.append(n,i)):e.append(n,r)}),e})],Y3=["component","errorComponent","pendingComponent","notFoundComponent"];function Uz(t){var e;for(const n of Y3)if((e=t.options[n])!=null&&e.preload)return!0;return!1}function R_(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new qE("Async validation not supported");if(n.issues)throw new qE(JSON.stringify(n.issues,void 0,2));return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function Vz(t){return new Hz(t)}class Hz{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=n=>n(),this.update=n=>{var r;n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options;this.options={...this.options,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(s=>[encodeURIComponent(s),s])):void 0,(!this.basepath||n.basepath&&n.basepath!==i.basepath)&&(n.basepath===void 0||n.basepath===""||n.basepath==="/"?this.basepath="/":this.basepath=`/${Fz(n.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?hz({initialEntries:[this.basepath||"/"]}):pz()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new AE(Kz(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const n=this.options.notFoundRoute;n&&(n.init({originalIndex:0x174876e7ff,defaultSsr:this.options.defaultSsr}),this.routesById[n.id]=n);const r=o=>{o.forEach((a,u)=>{a.init({originalIndex:u,defaultSsr:this.options.defaultSsr});const d=this.routesById[a.id];if(Fs(!d,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const h=nc(a.fullPath);(!this.routesByPath[h]||a.fullPath.endsWith("/"))&&(this.routesByPath[h]=a)}const p=a.children;p?.length&&r(p)})};r([this.routeTree]);const i=[];Object.values(this.routesById).forEach((o,a)=>{var u;if(o.isRoot||!o.path)return;const d=t1(o.fullPath),p=nf(d);for(;p.length>1&&((u=p[0])==null?void 0:u.value)==="/";)p.shift();const h=p.map(g=>g.value==="/"?.75:g.type==="param"?.5:g.type==="wildcard"?.25:1);i.push({child:o,trimmed:d,parsed:p,index:a,scores:h})}),this.flatRoutes=i.sort((o,a)=>{const u=Math.min(o.scores.length,a.scores.length);for(let d=0;d<u;d++)if(o.scores[d]!==a.scores[d])return a.scores[d]-o.scores[d];if(o.scores.length!==a.scores.length)return a.scores.length-o.scores.length;for(let d=0;d<u;d++)if(o.parsed[d].value!==a.parsed[d].value)return o.parsed[d].value>a.parsed[d].value?1:-1;return o.index-a.index}).map((o,a)=>(o.child.rank=a,o.child))},this.subscribe=(n,r)=>{const i={eventType:n,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const i=({pathname:u,search:d,hash:p,state:h})=>{const g=this.options.parseSearch(d),x=this.options.stringifySearch(g);return{pathname:u,searchStr:x,search:co(n?.search,g),hash:p.split("#").reverse()[0]??"",href:`${u}${x}${p}`,state:co(n?.state,h)}},s=i(r??this.history.location),{__tempLocation:o,__tempKey:a}=s.state;if(o&&(!a||a===this.tempLocationKey)){const u=i(o);return u.state.key=s.state.key,delete u.state.__tempLocation,{...u,maskedLocation:s}}return s},this.resolvePathWithBase=(n,r)=>Lz({basepath:this.basepath,base:n,to:Bv(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(n,r)=>{let i={};const s=nc(n.pathname),o=p=>iy(this.basepath,s,{to:p.fullPath,caseSensitive:p.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let a=r?.to!==void 0?this.routesByPath[r.to]:void 0;a?i=o(a):a=this.flatRoutes.find(p=>{const h=o(p);return h?(i=h,!0):!1});let u=a||this.routesById[qs];const d=[u];for(;u.parentRoute;)u=u.parentRoute,d.unshift(u);return{matchedRoutes:d,routeParams:i,foundRoute:a}},this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var n;(n=this.state.pendingMatches)==null||n.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=n=>{const r=(s={},o)=>{var a,u,d,p,h,g;const x=s._fromLocation?this.matchRoutes(s._fromLocation,{_buildLocation:!0}):this.state.matches,_=s.from!=null?x.find(D=>iy(this.basepath,nc(D.pathname),{to:s.from,caseSensitive:!1,fuzzy:!1})):void 0,S=_?.pathname||this.latestLocation.pathname;Fs(s.from==null||_!=null,"Could not find match for from: "+s.from);const k=(a=this.state.pendingMatches)!=null&&a.length?(u=ph(this.state.pendingMatches))==null?void 0:u.search:((d=ph(x))==null?void 0:d.search)||this.latestLocation.search,I=o?.matchedRoutes.filter(D=>x.find(W=>W.routeId===D.id));let E;if(s.to)E=this.resolvePathWithBase(S,`${s.to}`);else{const D=this.routesById[(p=I?.find(W=>{const V=ry({path:W.fullPath,params:o?.routeParams??{},decodeCharMap:this.pathParamsDecodeCharMap});return Qa([this.basepath,V])===S}))==null?void 0:p.id];E=this.resolvePathWithBase(S,D?.to??S)}const C={...(h=ph(x))==null?void 0:h.params};let j=(s.params??!0)===!0?C:{...C,...tc(s.params,C)};Object.keys(j).length>0&&o?.matchedRoutes.map(D=>{var W;return((W=D.options.params)==null?void 0:W.stringify)??D.options.stringifyParams}).filter(Boolean).forEach(D=>{j={...j,...D(j)}}),E=ry({path:E,params:j??{},leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let q=k;if(n._includeValidateSearch&&((g=this.options.search)!=null&&g.strict)){let D={};o?.matchedRoutes.forEach(W=>{try{W.options.validateSearch&&(D={...D,...R_(W.options.validateSearch,{...D,...q})??{}})}catch{}}),q=D}q=(D=>{const W=o?.matchedRoutes.reduce((X,Z)=>{var le;const ie=[];if("search"in Z.options)(le=Z.options.search)!=null&&le.middlewares&&ie.push(...Z.options.search.middlewares);else if(Z.options.preSearchFilters||Z.options.postSearchFilters){const ne=({search:oe,next:te})=>{let ce=oe;"preSearchFilters"in Z.options&&Z.options.preSearchFilters&&(ce=Z.options.preSearchFilters.reduce((ye,we)=>we(ye),oe));const de=te(ce);return"postSearchFilters"in Z.options&&Z.options.postSearchFilters?Z.options.postSearchFilters.reduce((ye,we)=>we(ye),de):de};ie.push(ne)}if(n._includeValidateSearch&&Z.options.validateSearch){const ne=({search:oe,next:te})=>{try{const ce=te(oe);return{...ce,...R_(Z.options.validateSearch,ce)??{}}}catch{}};ie.push(ne)}return X.concat(ie)},[])??[],V=({search:X})=>s.search?s.search===!0?X:tc(s.search,X):{};W.push(V);const z=(X,Z)=>{if(X>=W.length)return Z;const le=W[X];return le({search:Z,next:ne=>z(X+1,ne)})};return z(0,D)})(q),q=co(k,q);const $=this.options.stringifySearch(q),P=s.hash===!0?this.latestLocation.hash:s.hash?tc(s.hash,this.latestLocation.hash):void 0,O=P?`#${P}`:"";let B=s.state===!0?this.latestLocation.state:s.state?tc(s.state,this.latestLocation.state):{};return B=co(this.latestLocation.state,B),{pathname:E,search:q,searchStr:$,state:B,hash:P??"",href:`${E}${$}${O}`,unmaskOnReload:s.unmaskOnReload}},i=(s={},o)=>{var a;const u=r(s);let d=o?r(o):void 0;if(!d){let g={};const x=(a=this.options.routeMasks)==null?void 0:a.find(_=>{const S=iy(this.basepath,u.pathname,{to:_.from,caseSensitive:!1,fuzzy:!1});return S?(g=S,!0):!1});if(x){const{from:_,...S}=x;o={...Uy(n,["from"]),...S,params:g},d=r(o)}}const p=this.getMatchedRoutes(u,s),h=r(s,p);if(d){const g=this.getMatchedRoutes(d,o),x=r(o,g);h.maskedLocation=x}return h};return n.mask?i(n,{...Uy(n,["from"]),...n.mask}):i(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...i})=>{const s=()=>{i.state.key=this.latestLocation.state.key;const u=$d(i.state,this.latestLocation.state);return delete i.state.key,u},o=this.latestLocation.href===i.href,a=this.commitLocationPromise;if(this.commitLocationPromise=Ed(()=>{a?.resolve()}),o&&s())this.load();else{let{maskedLocation:u,hashScrollIntoView:d,...p}=i;u&&(p={...u,state:{...u.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=d??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](p.href,p.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:i,viewTransition:s,ignoreBlocker:o,href:a,...u}={})=>{if(a){const p=this.history.location.state.__TSR_index,h=Th(a,{__TSR_index:n?p:p+1});u.to=h.pathname,u.search=this.options.parseSearch(h.search),u.hash=h.hash.slice(1)}const d=this.buildLocation({...u,_includeValidateSearch:!0});return this.commitLocation({...d,viewTransition:s,replace:n,resetScroll:r,hashScrollIntoView:i,ignoreBlocker:o})},this.navigate=({to:n,reloadDocument:r,href:i,...s})=>{if(r){i||(i=this.buildLocation({to:n,...s}).href),s.replace?window.location.replace(i):window.location.href=i;return}return this.buildAndCommitLocation({...s,href:i,to:n})},this.load=async n=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,i,s;for(s=new Promise(o=>{this.startReactTransition(async()=>{var a;try{const u=this.latestLocation,d=this.state.resolvedLocation,p=d.href!==u.href,h=d.pathname!==u.pathname;this.cancelMatches();let g;k_(()=>{g=this.matchRoutes(u),this.__store.setState(x=>({...x,status:"pending",isLoading:!0,location:u,pendingMatches:g,cachedMatches:x.cachedMatches.filter(_=>!g.find(S=>S.id===_.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:d,toLocation:u,pathChanged:h,hrefChanged:p}),this.emit({type:"onBeforeLoad",fromLocation:d,toLocation:u,pathChanged:h,hrefChanged:p}),await this.loadMatches({sync:n?.sync,matches:g,location:u,onReady:async()=>{this.startViewTransition(async()=>{let x,_,S;k_(()=>{this.__store.setState(k=>{const I=k.matches,E=k.pendingMatches||k.matches;return x=I.filter(C=>!E.find(j=>j.id===C.id)),_=E.filter(C=>!I.find(j=>j.id===C.id)),S=I.filter(C=>E.find(j=>j.id===C.id)),{...k,isLoading:!1,loadedAt:Date.now(),matches:E,pendingMatches:void 0,cachedMatches:[...k.cachedMatches,...x.filter(C=>C.status!=="error")]}}),this.clearExpiredCache()}),[[x,"onLeave"],[_,"onEnter"],[S,"onStay"]].forEach(([k,I])=>{k.forEach(E=>{var C,j;(j=(C=this.looseRoutesById[E.routeId].options)[I])==null||j.call(C,E)})})})}})}catch(u){j_(u)?(r=u,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):Ao(u)&&(i=u),this.__store.setState(d=>({...d,statusCode:r?r.statusCode:i?404:d.matches.some(p=>p.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&((a=this.commitLocationPromise)==null||a.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;typeof r=="object"&&this.isViewTransitionTypesSupported?i={update:n,types:r.types}:i=n,document.startViewTransition(i)}else n()},this.updateMatch=(n,r)=>{var i;let s;const o=(i=this.state.pendingMatches)==null?void 0:i.find(p=>p.id===n),a=this.state.matches.find(p=>p.id===n),u=this.state.cachedMatches.find(p=>p.id===n),d=o?"pendingMatches":a?"matches":u?"cachedMatches":"";return d&&this.__store.setState(p=>{var h;return{...p,[d]:(h=p[d])==null?void 0:h.map(g=>g.id===n?s=r(g):g)}}),s},this.getMatch=n=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===n),this.loadMatches=async({location:n,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch,sync:a})=>{let u,d=!1;const p=async()=>{d||(d=!0,await s?.())},h=x=>!!(i&&!this.state.matches.find(_=>_.id===x));!this.isServer&&!this.state.matches.length&&p();const g=(x,_)=>{var S,k,I;if(j_(_)&&!_.reloadDocument)throw _;if(Hu(_)||Ao(_)){if(o(x.id,E=>({...E,status:Hu(_)?"redirected":Ao(_)?"notFound":"error",isFetching:!1,error:_,beforeLoadPromise:void 0,loaderPromise:void 0})),_.routeId||(_.routeId=x.routeId),(S=x.beforeLoadPromise)==null||S.resolve(),(k=x.loaderPromise)==null||k.resolve(),(I=x.loadPromise)==null||I.resolve(),Hu(_))throw d=!0,_=this.resolveRedirect({..._,_fromLocation:n}),_;if(Ao(_))throw this._handleNotFound(r,_,{updateMatch:o}),_}};try{await new Promise((x,_)=>{(async()=>{var S,k,I;try{const E=(q,F,$)=>{var P,O;const{id:B,routeId:D}=r[q],W=this.looseRoutesById[D];if(F instanceof Promise)throw F;F.routerCode=$,u=u??q,g(this.getMatch(B),F);try{(O=(P=W.options).onError)==null||O.call(P,F)}catch(V){F=V,g(this.getMatch(B),F)}o(B,V=>{var z,X;return(z=V.beforeLoadPromise)==null||z.resolve(),(X=V.loadPromise)==null||X.resolve(),{...V,error:F,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[q,{id:F,routeId:$}]of r.entries()){const P=this.getMatch(F),O=(S=r[q-1])==null?void 0:S.id,B=this.looseRoutesById[$],D=B.options.pendingMs??this.options.defaultPendingMs,W=!!(s&&!this.isServer&&!h(F)&&(B.options.loader||B.options.beforeLoad)&&typeof D=="number"&&D!==1/0&&(B.options.pendingComponent??this.options.defaultPendingComponent));let V=!0;if((P.beforeLoadPromise||P.loaderPromise)&&(W&&setTimeout(()=>{try{p()}catch{}},D),await P.beforeLoadPromise,V=this.getMatch(F).status!=="success"),V){try{o(F,Ie=>({...Ie,loadPromise:Ed(()=>{var ze;(ze=Ie.loadPromise)==null||ze.resolve()}),beforeLoadPromise:Ed()}));const z=new AbortController;let X;W&&(X=setTimeout(()=>{try{p()}catch{}},D));const{paramsError:Z,searchError:le}=this.getMatch(F);Z&&E(q,Z,"PARSE_PARAMS"),le&&E(q,le,"VALIDATE_SEARCH");const ie=()=>O?this.getMatch(O).context:this.options.context??{};o(F,Ie=>({...Ie,isFetching:"beforeLoad",fetchCount:Ie.fetchCount+1,abortController:z,pendingTimeout:X,context:{...ie(),...Ie.__routeContext}}));const{search:ne,params:oe,context:te,cause:ce}=this.getMatch(F),de=h(F),ye={search:ne,abortController:z,params:oe,preload:de,context:te,location:n,navigate:Ie=>this.navigate({...Ie,_fromLocation:n}),buildLocation:this.buildLocation,cause:de?"preload":ce,matches:r};let we=await ((I=(k=B.options).beforeLoad)==null?void 0:I.call(k,ye))??{};this.serializeLoaderData&&(we=this.serializeLoaderData("__beforeLoadContext",we,{router:this,match:this.getMatch(F)})),(Hu(we)||Ao(we))&&E(q,we,"BEFORE_LOAD"),o(F,Ie=>({...Ie,__beforeLoadContext:we,context:{...ie(),...Ie.__routeContext,...we},abortController:z}))}catch(z){E(q,z,"BEFORE_LOAD")}o(F,z=>{var X;return(X=z.beforeLoadPromise)==null||X.resolve(),{...z,beforeLoadPromise:void 0,isFetching:!1}})}}const C=r.slice(0,u),j=[];C.forEach(({id:q,routeId:F},$)=>{j.push((async()=>{const{loaderPromise:P}=this.getMatch(q);let O=!1,B=!1;if(P){await P;const D=this.getMatch(q);D.error&&g(D,D.error)}else{const D=j[$-1],W=this.looseRoutesById[F],V=()=>{const{params:ce,loaderDeps:de,abortController:ye,context:we,cause:Ie}=this.getMatch(q),ze=h(q);return{params:ce,deps:de,preload:!!ze,parentMatchPromise:D,abortController:ye,context:we,location:n,navigate:Re=>this.navigate({...Re,_fromLocation:n}),cause:ze?"preload":Ie,route:W}},z=Date.now()-this.getMatch(q).updatedAt,X=h(q),Z=X?W.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:W.options.staleTime??this.options.defaultStaleTime??0,le=W.options.shouldReload,ie=typeof le=="function"?le(V()):le;o(q,ce=>({...ce,loaderPromise:Ed(),preload:!!X&&!this.state.matches.find(de=>de.id===q)}));const ne=async()=>{var ce,de,ye,we,Ie,ze,Re,De;try{const Je=async()=>{const Xe=this.getMatch(q);Xe.minPendingPromise&&await Xe.minPendingPromise};try{this.loadRouteChunk(W),o(q,ln=>({...ln,isFetching:"loader"}));let Xe=await ((de=(ce=W.options).loader)==null?void 0:de.call(ce,V()));this.serializeLoaderData&&(Xe=this.serializeLoaderData("loaderData",Xe,{router:this,match:this.getMatch(q)})),g(this.getMatch(q),Xe),await W._lazyPromise,await Je();const Ue=(we=(ye=W.options).head)==null?void 0:we.call(ye,{matches:r,match:this.getMatch(q),params:this.getMatch(q).params,loaderData:Xe}),ut=Ue?.meta,Et=Ue?.links,At=Ue?.scripts,Gt=(ze=(Ie=W.options).headers)==null?void 0:ze.call(Ie,{loaderData:Xe});o(q,ln=>({...ln,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Xe,meta:ut,links:Et,scripts:At,headers:Gt}))}catch(Xe){let Ue=Xe;await Je(),g(this.getMatch(q),Xe);try{(De=(Re=W.options).onError)==null||De.call(Re,Xe)}catch(ut){Ue=ut,g(this.getMatch(q),ut)}o(q,ut=>({...ut,error:Ue,status:"error",isFetching:!1}))}await W._componentsPromise}catch(Je){o(q,Xe=>({...Xe,loaderPromise:void 0})),g(this.getMatch(q),Je)}},{status:oe,invalid:te}=this.getMatch(q);O=oe==="success"&&(te||(ie??z>Z)),X&&W.options.preload===!1||(O&&!a?(B=!0,(async()=>{try{await ne();const{loaderPromise:ce,loadPromise:de}=this.getMatch(q);ce?.resolve(),de?.resolve(),o(q,ye=>({...ye,loaderPromise:void 0}))}catch(ce){j_(ce)&&await this.navigate(ce)}})()):(oe!=="success"||O&&a)&&await ne())}if(!B){const{loaderPromise:D,loadPromise:W}=this.getMatch(q);D?.resolve(),W?.resolve()}return o(q,D=>({...D,isFetching:B?D.isFetching:!1,loaderPromise:B?D.loaderPromise:void 0,invalid:!1})),this.getMatch(q)})())}),await Promise.all(j),x()}catch(E){_(E)}})()}),await p()}catch(x){if(Hu(x)||Ao(x))throw Ao(x)&&!i&&await p(),x}return r},this.invalidate=n=>{const r=i=>{var s;return((s=n?.filter)==null?void 0:s.call(n,i))??!0?{...i,invalid:!0,...i.status==="error"?{status:"pending",error:void 0}:{}}:i};return this.__store.setState(i=>{var s;return{...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:(s=i.pendingMatches)==null?void 0:s.map(r)}}),this.load({sync:n?.sync})},this.resolveRedirect=n=>{const r=n;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(s=>!r(s))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const s=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<s)};this.clearCache({filter:n})},this.loadRouteChunk=n=>(n._lazyPromise===void 0&&(n.lazyFn?n._lazyPromise=n.lazyFn().then(r=>{const{id:i,...s}=r.options;Object.assign(n.options,s)}):n._lazyPromise=Promise.resolve()),n._componentsPromise===void 0&&(n._componentsPromise=n._lazyPromise.then(()=>Promise.all(Y3.map(async r=>{const i=n.options[r];i?.preload&&await i.preload()})))),n._componentsPromise),this.preloadRoute=async n=>{const r=this.buildLocation(n);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),o=new Set([...s,...this.state.cachedMatches.map(a=>a.id)]);k_(()=>{i.forEach(a=>{o.has(a.id)||this.__store.setState(u=>({...u,cachedMatches:[...u.cachedMatches,a]}))})});try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(a,u)=>{s.has(a)?i=i.map(d=>d.id===a?u(d):d):this.updateMatch(a,u)}}),i}catch(a){if(Hu(a))return a.reloadDocument?void 0:await this.preloadRoute({...a,_fromLocation:r});console.error(a);return}},this.matchRoute=(n,r)=>{const i={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(i);if(r?.pending&&this.state.status!=="pending")return!1;const a=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,u=iy(this.basepath,a.pathname,{...r,to:s.pathname});return!u||n.params&&!$d(u,n.params,{partial:!0})?!1:u&&(r?.includeSearch??!0)?$d(a.search,s.search,{partial:!0})?u:!1:u},this.dehydrate=()=>{var n;const r=((n=this.options.errorSerializer)==null?void 0:n.serialize)??Qz;return{state:{dehydratedMatches:this.state.matches.map(i=>({...Uy(i,["id","status","updatedAt"]),error:i.error?{data:r(i.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var n,r,i;let s;typeof document<"u"&&(s=this.options.transformer.parse((n=window.__TSR__)==null?void 0:n.dehydrated)),Fs(s),this.dehydratedData=s.payload,(i=(r=this.options).hydrate)==null||i.call(r,s.payload);const o=s.router.state,a=this.matchRoutes(this.state.location).map(u=>{const d=o.dehydratedMatches.find(p=>p.id===u.id);return Fs(d,`Could not find a client-side match for dehydrated match with id: ${u.id}!`),{...u,...d}});this.__store.setState(u=>({...u,matches:a})),this.manifest=s.router.manifest},this.injectedHtml=[],this.injectHtml=n=>{const r=()=>(this.injectedHtml=this.injectedHtml.filter(i=>i!==r),n);this.injectedHtml.push(r)},this.injectScript=(n,r)=>{this.injectHtml(`<script class='tsr-once'>${n}; if (typeof __TSR__ !== 'undefined') __TSR__.cleanScripts()</script>`)},this.streamedKeys=new Set,this.getStreamedValue=n=>{var r;if(this.isServer)return;const i=(r=window.__TSR__)==null?void 0:r.streamedValues[n];if(i)return i.parsed||(i.parsed=this.options.transformer.parse(i.value)),i.parsed},this.streamValue=(n,r)=>{var i;this.streamedKeys.has(n),this.streamedKeys.add(n),this.injectScript(`__TSR__.streamedValues['${n}'] = { value: ${(i=this.serializer)==null?void 0:i.call(this,this.options.transformer.stringify(r))}}`)},this._handleNotFound=(n,r,{updateMatch:i=this.updateMatch}={})=>{const s=Object.fromEntries(n.map(u=>[u.routeId,u]));let o=(r.global?this.looseRoutesById[qs]:this.looseRoutesById[r.routeId])||this.looseRoutesById[qs];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==qs;)o=o.parentRoute,Fs(o);const a=s[o.id];Fs(a,"Could not find match for route: "+o.id),i(a.id,u=>({...u,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(n,r,{updateMatch:i}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??jz,parseSearch:e.parseSearch??Tz,transformer:e.transformer??Jp}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(e,n,r){return typeof e=="string"?this.matchRoutesInternal({pathname:e,search:n},r):this.matchRoutesInternal(e,n)}matchRoutesInternal(e,n){const{foundRoute:r,matchedRoutes:i,routeParams:s}=this.getMatchedRoutes(e,n?.dest);let o=!1;(r?r.path!=="/"&&s["**"]:nc(e.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const a=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let h=i.length-1;h>=0;h--){const g=i[h];if(g.children)return g.id}return qs}})(),u=i.map(h=>{var g;let x;const _=((g=h.options.params)==null?void 0:g.parse)??h.options.parseParams;if(_)try{const S=_(s);Object.assign(s,S)}catch(S){if(x=new Gz(S.message,{cause:S}),n?.throwOnError)throw x;return x}}),d=[],p=h=>h?.id?h.context??this.options.context??{}:this.options.context??{};return i.forEach((h,g)=>{var x,_,S,k;const I=d[g-1],[E,C]=(()=>{const V=I?.search??e.search;try{const z=R_(h.options.validateSearch,V)??{};return[{...V,...z},void 0]}catch(z){const X=new qE(z.message,{cause:z});if(n?.throwOnError)throw X;return[V,X]}})(),j=((_=(x=h.options).loaderDeps)==null?void 0:_.call(x,{search:E}))??"",q=j?JSON.stringify(j):"",F=ry({path:h.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),$=ry({path:h.id,params:s,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+q,P=this.getMatch($),O=this.state.matches.find(V=>V.routeId===h.id),B=O?"stay":"enter";let D;if(P)D={...P,cause:B,params:O?co(O.params,s):s,search:co(O?O.search:P.search,E)};else{const V=h.options.loader||h.options.beforeLoad||h.lazyFn||Uz(h)?"pending":"success";D={id:$,index:g,routeId:h.id,params:O?co(O.params,s):s,pathname:Qa([this.basepath,F]),updatedAt:Date.now(),search:O?co(O.search,E):E,searchError:void 0,status:V,isFetching:!1,error:void 0,paramsError:u[g],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:B,loaderDeps:O?co(O.loaderDeps,j):j,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:h.options.staticData||{},loadPromise:Ed(),fullPath:h.fullPath}}D.status==="success"&&(D.headers=(k=(S=h.options).headers)==null?void 0:k.call(S,{loaderData:D.loaderData})),n?.preload||(D.globalNotFound=a===h.id),D.searchError=C;const W=p(I);D.context={...W,...D.__routeContext,...D.__beforeLoadContext},d.push(D)}),d.forEach((h,g)=>{var x,_,S,k;const I=this.looseRoutesById[h.routeId];if(!this.getMatch(h.id)&&n?._buildLocation!==!0){const j=d[g-1],q=p(j),F={deps:h.loaderDeps,params:h.params,context:q,location:e,navigate:$=>this.navigate({...$,_fromLocation:e}),buildLocation:this.buildLocation,cause:h.cause,abortController:h.abortController,preload:!!h.preload,matches:d};h.__routeContext=((_=(x=I.options).context)==null?void 0:_.call(x,F))??{},h.context={...q,...h.__routeContext,...h.__beforeLoadContext}}const C=(k=(S=I.options).head)==null?void 0:k.call(S,{matches:d,match:h,params:h.params,loaderData:h.loaderData??void 0});h.links=C?.links,h.scripts=C?.scripts,h.meta=C?.meta}),d}}class qE extends Error{}class Gz extends Error{}function Kz(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Qz(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function IT(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function NT(t){if("name"in t&&"message"in t){const e=new Error(t.message);return e.name=t.name,e}return t.data}const Wv=H.createContext(void 0),Jz=H.createContext(void 0);function iu(t){const e=H.useContext(t.from?Jz:Wv);return ts({select:r=>{const i=r.matches.find(s=>t.from?t.from===s.routeId:s.id===e);if(Fs(!((t.shouldThrow??!0)&&!i),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),i!==void 0)return t.select?t.select(i):i},structuralSharing:t.structuralSharing})}function mi(t){return iu({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function Zz(t){const{select:e,...n}=t;return iu({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function Zt(t){return iu({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function Yz(t){return iu({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function mu(t){const{navigate:e}=Qo();return H.useCallback(n=>e({...n}),[e])}let X3=class{constructor(e){this.init=n=>{var r,i;this.originalIndex=n.originalIndex;const s=this.options,o=!s?.path&&!s?.id;this.parentRoute=(i=(r=this.options).getParentRoute)==null?void 0:i.call(r),o?this._path=qs:Fs(this.parentRoute);let a=o?qs:s.path;a&&a!=="/"&&(a=t1(a));const u=s?.id||a;let d=o?qs:Qa([this.parentRoute.id===qs?"":this.parentRoute.id,u]);a===qs&&(a="/"),d!==qs&&(d=Qa(["/",d]));const p=d===qs?"/":Qa([this.parentRoute.fullPath,a]);this._path=a,this._id=d,this._fullPath=p,this._to=p,this._ssr=s?.ssr??n.defaultSsr??!0},this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.useMatch=n=>iu({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>iu({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Yz({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>Zt({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>Zz({...n,from:this.id}),this.useLoaderData=n=>mi({...n,from:this.id}),this.useNavigate=()=>mu({from:this.id}),this.options=e||{},this.isRoot=!e?.getParentRoute,Fs(!(e?.id&&e?.path)),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(e){return this._addFileChildren(e)}_addFileChildren(e){return Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this}};function Xz(t){return new X3(t)}function eW(){return t=>nW(t)}class tW extends X3{constructor(e){super(e)}addChildren(e){return super.addChildren(e),this}_addFileChildren(e){return super._addFileChildren(e),this}_addFileTypes(){return this}}function nW(t){return new tW(t)}function Mt(t){return new rW(t,{silent:!0}).createRoute}class rW{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const i=Xz(r);return i.isRoot=!1,i},this.silent=n?.silent}}function Vy(t){return f.jsx(f.Fragment,{children:t.children})}function eP(t,e,n){return e.options.notFoundComponent?f.jsx(e.options.notFoundComponent,{data:n}):t.options.defaultNotFoundComponent?f.jsx(t.options.defaultNotFoundComponent,{data:n}):f.jsx(Wz,{})}const tP=H.memo(function({matchId:e}){var n,r;const i=Qo(),s=ts({select:k=>{var I;return(I=k.matches.find(E=>E.id===e))==null?void 0:I.routeId}});Fs(s);const o=i.routesById[s],a=o.options.pendingComponent??i.options.defaultPendingComponent,u=a?f.jsx(a,{}):null,d=o.options.errorComponent??i.options.defaultErrorComponent,p=o.options.onCatch??i.options.defaultOnCatch,h=o.isRoot?o.options.notFoundComponent??((n=i.options.notFoundRoute)==null?void 0:n.options.component):o.options.notFoundComponent,g=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??a??((r=o.options.errorComponent)==null?void 0:r.preload))?H.Suspense:Vy,x=d?n1:Vy,_=h?zz:Vy,S=ts({select:k=>k.loadedAt});return f.jsx(Wv.Provider,{value:e,children:f.jsx(g,{fallback:u,children:f.jsx(x,{getResetKey:()=>S,errorComponent:d||zv,onCatch:(k,I)=>{if(Ao(k))throw k;p?.(k,I)},children:f.jsx(_,{fallback:k=>{if(!h||k.routeId&&k.routeId!==s||!k.routeId&&!o.isRoot)throw k;return H.createElement(h,k)},children:f.jsx(iW,{matchId:e})})})})})}),iW=H.memo(function({matchId:e}){var n,r,i,s,o;const a=Qo(),{match:u,matchIndex:d,routeId:p}=ts({select:_=>{const S=_.matches.findIndex(E=>E.id===e),k=_.matches[S];return{routeId:k.routeId,matchIndex:S,match:Uy(k,["id","status","error"])}},structuralSharing:!0}),h=a.routesById[p],g=H.useMemo(()=>{const _=h.options.component??a.options.defaultComponent;return _?f.jsx(_,{}):f.jsx(Ks,{})},[h.options.component,a.options.defaultComponent]),x=(h.options.errorComponent??a.options.defaultErrorComponent)||zv;if(u.status==="notFound"){let _;return IT(u.error)?_=(((n=a.options.errorSerializer)==null?void 0:n.deserialize)??NT)(u.error.data):_=u.error,Fs(Ao(_)),eP(a,h,_)}if(u.status==="redirected")throw Fs(Hu(u.error)),(r=a.getMatch(u.id))==null?void 0:r.loadPromise;if(u.status==="error"){if(a.isServer)return f.jsx(x,{error:u.error,info:{componentStack:""}});throw IT(u.error)?(((i=a.options.errorSerializer)==null?void 0:i.deserialize)??NT)(u.error.data):u.error}if(u.status==="pending"){const _=h.options.pendingMinMs??a.options.defaultPendingMinMs;if(_&&!((s=a.getMatch(u.id))!=null&&s.minPendingPromise)&&!a.isServer){const S=Ed();Promise.resolve().then(()=>{a.updateMatch(u.id,k=>({...k,minPendingPromise:S}))}),setTimeout(()=>{S.resolve(),a.updateMatch(u.id,k=>({...k,minPendingPromise:void 0}))},_)}throw(o=a.getMatch(u.id))==null?void 0:o.loadPromise}return f.jsxs(f.Fragment,{children:[g,a.AfterEachMatch?f.jsx(a.AfterEachMatch,{match:u,matchIndex:d}):null]})}),Ks=H.memo(function(){const e=Qo(),n=H.useContext(Wv),r=ts({select:d=>{var p;return(p=d.matches.find(h=>h.id===n))==null?void 0:p.routeId}}),i=e.routesById[r],s=ts({select:d=>{const h=d.matches.find(g=>g.id===n);return Fs(h),h.globalNotFound}}),o=ts({select:d=>{var p;const h=d.matches,g=h.findIndex(x=>x.id===n);return(p=h[g+1])==null?void 0:p.id}});if(s)return eP(e,i,void 0);if(!o)return null;const a=f.jsx(tP,{matchId:o}),u=e.options.defaultPendingComponent?f.jsx(e.options.defaultPendingComponent,{}):null;return n===qs?f.jsx(H.Suspense,{fallback:u,children:a}):a});var O_={exports:{}},gs={},A_={exports:{}},q_={};var kT;function sW(){return kT||(kT=1,function(t){function e(ie,ne){var oe=ie.length;ie.push(ne);e:for(;0<oe;){var te=oe-1>>>1,ce=ie[te];if(0<i(ce,ne))ie[te]=ne,ie[oe]=ce,oe=te;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ne=ie[0],oe=ie.pop();if(oe!==ne){ie[0]=oe;e:for(var te=0,ce=ie.length,de=ce>>>1;te<de;){var ye=2*(te+1)-1,we=ie[ye],Ie=ye+1,ze=ie[Ie];if(0>i(we,oe))Ie<ce&&0>i(ze,we)?(ie[te]=ze,ie[Ie]=oe,te=Ie):(ie[te]=we,ie[ye]=oe,te=ye);else if(Ie<ce&&0>i(ze,oe))ie[te]=ze,ie[Ie]=oe,te=Ie;else break e}}return ne}function i(ie,ne){var oe=ie.sortIndex-ne.sortIndex;return oe!==0?oe:ie.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],d=[],p=1,h=null,g=3,x=!1,_=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ie){for(var ne=n(d);ne!==null;){if(ne.callback===null)r(d);else if(ne.startTime<=ie)r(d),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(d)}}function j(ie){if(S=!1,C(ie),!_)if(n(u)!==null)_=!0,Z(q);else{var ne=n(d);ne!==null&&le(j,ne.startTime-ie)}}function q(ie,ne){_=!1,S&&(S=!1,I(P),P=-1),x=!0;var oe=g;try{for(C(ne),h=n(u);h!==null&&(!(h.expirationTime>ne)||ie&&!D());){var te=h.callback;if(typeof te=="function"){h.callback=null,g=h.priorityLevel;var ce=te(h.expirationTime<=ne);ne=t.unstable_now(),typeof ce=="function"?h.callback=ce:h===n(u)&&r(u),C(ne)}else r(u);h=n(u)}if(h!==null)var de=!0;else{var ye=n(d);ye!==null&&le(j,ye.startTime-ne),de=!1}return de}finally{h=null,g=oe,x=!1}}var F=!1,$=null,P=-1,O=5,B=-1;function D(){return!(t.unstable_now()-B<O)}function W(){if($!==null){var ie=t.unstable_now();B=ie;var ne=!0;try{ne=$(!0,ie)}finally{ne?V():(F=!1,$=null)}}else F=!1}var V;if(typeof E=="function")V=function(){E(W)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,X=z.port2;z.port1.onmessage=W,V=function(){X.postMessage(null)}}else V=function(){k(W,0)};function Z(ie){$=ie,F||(F=!0,V())}function le(ie,ne){P=k(function(){ie(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){_||x||(_=!0,Z(q))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(ie){switch(g){case 1:case 2:case 3:var ne=3;break;default:ne=g}var oe=g;g=ne;try{return ie()}finally{g=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,ne){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var oe=g;g=ie;try{return ne()}finally{g=oe}},t.unstable_scheduleCallback=function(ie,ne,oe){var te=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?te+oe:te):oe=te,ie){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=0x3fffffff;break;case 4:ce=1e4;break;default:ce=5e3}return ce=oe+ce,ie={id:p++,callback:ne,priorityLevel:ie,startTime:oe,expirationTime:ce,sortIndex:-1},oe>te?(ie.sortIndex=oe,e(d,ie),n(u)===null&&ie===n(d)&&(S?(I(P),P=-1):S=!0,le(j,oe-te))):(ie.sortIndex=ce,e(u,ie),_||x||(_=!0,Z(q))),ie},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(ie){var ne=g;return function(){var oe=g;g=ne;try{return ie.apply(this,arguments)}finally{g=oe}}}}(q_)),q_}var CT;function oW(){return CT||(CT=1,A_.exports=sW()),A_.exports}var TT;function aW(){if(TT)return gs;TT=1;var t=xm(),e=oW();function n(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(l,c){o(l,c),o(l+"Capture",c)}function o(l,c){for(i[l]=c,l=0;l<c.length;l++)r.add(c[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function g(l){return u.call(h,l)?!0:u.call(p,l)?!1:d.test(l)?h[l]=!0:(p[l]=!0,!1)}function x(l,c,m,w){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function _(l,c,m,w){if(c===null||typeof c>"u"||x(l,c,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function S(l,c,m,w,R,L,Y){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=w,this.attributeNamespace=R,this.mustUseProperty=m,this.propertyName=l,this.type=c,this.sanitizeURL=L,this.removeEmptyString=Y}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){k[l]=new S(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var c=l[0];k[c]=new S(c,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){k[l]=new S(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){k[l]=new S(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){k[l]=new S(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){k[l]=new S(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){k[l]=new S(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){k[l]=new S(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){k[l]=new S(l,5,!1,l.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function E(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var c=l.replace(I,E);k[c]=new S(c,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var c=l.replace(I,E);k[c]=new S(c,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var c=l.replace(I,E);k[c]=new S(c,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){k[l]=new S(l,1,!1,l.toLowerCase(),null,!1,!1)}),k.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){k[l]=new S(l,1,!1,l.toLowerCase(),null,!0,!0)});function C(l,c,m,w){var R=k.hasOwnProperty(c)?k[c]:null;(R!==null?R.type!==0:w||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(_(c,m,R,w)&&(m=null),w||R===null?g(c)&&(m===null?l.removeAttribute(c):l.setAttribute(c,""+m)):R.mustUseProperty?l[R.propertyName]=m===null?R.type===3?!1:"":m:(c=R.attributeName,w=R.attributeNamespace,m===null?l.removeAttribute(c):(R=R.type,m=R===3||R===4&&m===!0?"":""+m,w?l.setAttributeNS(w,c,m):l.setAttribute(c,m))))}var j=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),F=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),D=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ne(l){return l===null||typeof l!="object"?null:(l=ie&&l[ie]||l["@@iterator"],typeof l=="function"?l:null)}var oe=Object.assign,te;function ce(l){if(te===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);te=c&&c[1]||""}return`
`+te+l}var de=!1;function ye(l,c){if(!l||de)return"";de=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(He){var w=He}Reflect.construct(l,[],c)}else{try{c.call()}catch(He){w=He}l.call(c.prototype)}else{try{throw Error()}catch(He){w=He}l()}}catch(He){if(He&&w&&typeof He.stack=="string"){for(var R=He.stack.split(`
`),L=w.stack.split(`
`),Y=R.length-1,ge=L.length-1;1<=Y&&0<=ge&&R[Y]!==L[ge];)ge--;for(;1<=Y&&0<=ge;Y--,ge--)if(R[Y]!==L[ge]){if(Y!==1||ge!==1)do if(Y--,ge--,0>ge||R[Y]!==L[ge]){var Se=`
`+R[Y].replace(" at new "," at ");return l.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",l.displayName)),Se}while(1<=Y&&0<=ge);break}}}finally{de=!1,Error.prepareStackTrace=m}return(l=l?l.displayName||l.name:"")?ce(l):""}function we(l){switch(l.tag){case 5:return ce(l.type);case 16:return ce("Lazy");case 13:return ce("Suspense");case 19:return ce("SuspenseList");case 0:case 2:case 15:return l=ye(l.type,!1),l;case 11:return l=ye(l.type.render,!1),l;case 1:return l=ye(l.type,!0),l;default:return""}}function Ie(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case $:return"Fragment";case F:return"Portal";case O:return"Profiler";case P:return"StrictMode";case V:return"Suspense";case z:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case D:return(l.displayName||"Context")+".Consumer";case B:return(l._context.displayName||"Context")+".Provider";case W:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case X:return c=l.displayName||null,c!==null?c:Ie(l.type)||"Memo";case Z:c=l._payload,l=l._init;try{return Ie(l(c))}catch{}}return null}function ze(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(c);case 8:return c===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Re(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function De(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Je(l){var c=De(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),w=""+l[c];if(!l.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var R=m.get,L=m.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return R.call(this)},set:function(Y){w=""+Y,L.call(this,Y)}}),Object.defineProperty(l,c,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(Y){w=""+Y},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function Xe(l){l._valueTracker||(l._valueTracker=Je(l))}function Ue(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var m=c.getValue(),w="";return l&&(w=De(l)?l.checked?"true":"false":l.value),l=w,l!==m?(c.setValue(l),!0):!1}function ut(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Et(l,c){var m=c.checked;return oe({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??l._wrapperState.initialChecked})}function At(l,c){var m=c.defaultValue==null?"":c.defaultValue,w=c.checked!=null?c.checked:c.defaultChecked;m=Re(c.value!=null?c.value:m),l._wrapperState={initialChecked:w,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Gt(l,c){c=c.checked,c!=null&&C(l,"checked",c,!1)}function ln(l,c){Gt(l,c);var m=Re(c.value),w=c.type;if(m!=null)w==="number"?(m===0&&l.value===""||l.value!=m)&&(l.value=""+m):l.value!==""+m&&(l.value=""+m);else if(w==="submit"||w==="reset"){l.removeAttribute("value");return}c.hasOwnProperty("value")?be(l,c.type,m):c.hasOwnProperty("defaultValue")&&be(l,c.type,Re(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(l.defaultChecked=!!c.defaultChecked)}function xe(l,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var w=c.type;if(!(w!=="submit"&&w!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+l._wrapperState.initialValue,m||c===l.value||(l.value=c),l.defaultValue=c}m=l.name,m!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,m!==""&&(l.name=m)}function be(l,c,m){(c!=="number"||ut(l.ownerDocument)!==l)&&(m==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+m&&(l.defaultValue=""+m))}var Ne=Array.isArray;function qe(l,c,m,w){if(l=l.options,c){c={};for(var R=0;R<m.length;R++)c["$"+m[R]]=!0;for(m=0;m<l.length;m++)R=c.hasOwnProperty("$"+l[m].value),l[m].selected!==R&&(l[m].selected=R),R&&w&&(l[m].defaultSelected=!0)}else{for(m=""+Re(m),c=null,R=0;R<l.length;R++){if(l[R].value===m){l[R].selected=!0,w&&(l[R].defaultSelected=!0);return}c!==null||l[R].disabled||(c=l[R])}c!==null&&(c.selected=!0)}}function Ve(l,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},c,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function rt(l,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(n(92));if(Ne(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),m=c}l._wrapperState={initialValue:Re(m)}}function Me(l,c){var m=Re(c.value),w=Re(c.defaultValue);m!=null&&(m=""+m,m!==l.value&&(l.value=m),c.defaultValue==null&&l.defaultValue!==m&&(l.defaultValue=m)),w!=null&&(l.defaultValue=""+w)}function ct(l){var c=l.textContent;c===l._wrapperState.initialValue&&c!==""&&c!==null&&(l.value=c)}function Yt(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xt(l,c){return l==null||l==="http://www.w3.org/1999/xhtml"?Yt(c):l==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var _n,dr=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,w,R){MSApp.execUnsafeLocalFunction(function(){return l(c,m,w,R)})}:l}(function(l,c){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=c;else{for(_n=_n||document.createElement("div"),_n.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=_n.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;c.firstChild;)l.appendChild(c.firstChild)}});function Bn(l,c){if(c){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=c;return}}l.textContent=c}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vi=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(l){Vi.forEach(function(c){c=c+l.charAt(0).toUpperCase()+l.substring(1),Yr[c]=Yr[l]})});function Cr(l,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||Yr.hasOwnProperty(l)&&Yr[l]?(""+c).trim():c+"px"}function en(l,c){l=l.style;for(var m in c)if(c.hasOwnProperty(m)){var w=m.indexOf("--")===0,R=Cr(m,c[m],w);m==="float"&&(m="cssFloat"),w?l.setProperty(m,R):l[m]=R}}var os=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function as(l,c){if(c){if(os[l]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function ls(l,c){if(l.indexOf("-")===-1)return typeof c.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _o=null;function Ea(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Su=null,Zs=null,G=null;function Oc(l){if(l=gp(l)){if(typeof Su!="function")throw Error(n(280));var c=l.stateNode;c&&(c=gg(c),Su(l.stateNode,l.type,c))}}function yn(l){Zs?G?G.push(l):G=[l]:Zs=l}function Ac(){if(Zs){var l=Zs,c=G;if(G=Zs=null,Oc(l),c)for(l=0;l<c.length;l++)Oc(c[l])}}function qc(l,c){return l(c)}function Pc(){}var Eu=!1;function Ia(l,c,m){if(Eu)return l(c,m);Eu=!0;try{return qc(l,c,m)}finally{Eu=!1,(Zs!==null||G!==null)&&(Pc(),Ac())}}function us(l,c){var m=l.stateNode;if(m===null)return null;var w=gg(m);if(w===null)return null;m=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(l=l.type,w=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!w;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(n(231,c,typeof m));return m}var Iu=!1;if(a)try{var Na={};Object.defineProperty(Na,"passive",{get:function(){Iu=!0}}),window.addEventListener("test",Na,Na),window.removeEventListener("test",Na,Na)}catch{Iu=!1}function Wf(l,c,m,w,R,L,Y,ge,Se){var He=Array.prototype.slice.call(arguments,3);try{c.apply(m,He)}catch(ht){this.onError(ht)}}var ka=!1,Ys=null,cl=!1,Xs=null,Uf={onError:function(l){ka=!0,Ys=l}};function Vf(l,c,m,w,R,L,Y,ge,Se){ka=!1,Ys=null,Wf.apply(Uf,arguments)}function Fc(l,c,m,w,R,L,Y,ge,Se){if(Vf.apply(this,arguments),ka){if(ka){var He=Ys;ka=!1,Ys=null}else throw Error(n(198));cl||(cl=!0,Xs=He)}}function eo(l){var c=l,m=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,c.flags&4098&&(m=c.return),l=c.return;while(l)}return c.tag===3?m:null}function Dc(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function Lc(l){if(eo(l)!==l)throw Error(n(188))}function Hf(l){var c=l.alternate;if(!c){if(c=eo(l),c===null)throw Error(n(188));return c!==l?null:l}for(var m=l,w=c;;){var R=m.return;if(R===null)break;var L=R.alternate;if(L===null){if(w=R.return,w!==null){m=w;continue}break}if(R.child===L.child){for(L=R.child;L;){if(L===m)return Lc(R),l;if(L===w)return Lc(R),c;L=L.sibling}throw Error(n(188))}if(m.return!==w.return)m=R,w=L;else{for(var Y=!1,ge=R.child;ge;){if(ge===m){Y=!0,m=R,w=L;break}if(ge===w){Y=!0,w=R,m=L;break}ge=ge.sibling}if(!Y){for(ge=L.child;ge;){if(ge===m){Y=!0,m=L,w=R;break}if(ge===w){Y=!0,w=L,m=R;break}ge=ge.sibling}if(!Y)throw Error(n(189))}}if(m.alternate!==w)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?l:c}function Mc(l){return l=Hf(l),l!==null?$c(l):null}function $c(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=$c(l);if(c!==null)return c;l=l.sibling}return null}var Bc=e.unstable_scheduleCallback,Nu=e.unstable_cancelCallback,zc=e.unstable_shouldYield,Gf=e.unstable_requestPaint,fr=e.unstable_now,Kf=e.unstable_getCurrentPriorityLevel,ku=e.unstable_ImmediatePriority,Wc=e.unstable_UserBlockingPriority,dl=e.unstable_NormalPriority,Qf=e.unstable_LowPriority,Cu=e.unstable_IdlePriority,fl=null,cs=null;function Jf(l){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(fl,l,void 0,(l.current.flags&128)===128)}catch{}}var ki=Math.clz32?Math.clz32:Xf,Zf=Math.log,Yf=Math.LN2;function Xf(l){return l>>>=0,l===0?32:31-(Zf(l)/Yf|0)|0}var Yo=64,pl=4194304;function Hi(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return l&0x7c00000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return l}}function hl(l,c){var m=l.pendingLanes;if(m===0)return 0;var w=0,R=l.suspendedLanes,L=l.pingedLanes,Y=m&0xfffffff;if(Y!==0){var ge=Y&~R;ge!==0?w=Hi(ge):(L&=Y,L!==0&&(w=Hi(L)))}else Y=m&~R,Y!==0?w=Hi(Y):L!==0&&(w=Hi(L));if(w===0)return 0;if(c!==0&&c!==w&&!(c&R)&&(R=w&-w,L=c&-c,R>=L||R===16&&(L&4194240)!==0))return c;if(w&4&&(w|=m&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=w;0<c;)m=31-ki(c),R=1<<m,w|=l[m],c&=~R;return w}function Hx(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return-1;case 0x8000000:case 0x10000000:case 0x20000000:case 0x40000000:return-1;default:return-1}}function Gx(l,c){for(var m=l.suspendedLanes,w=l.pingedLanes,R=l.expirationTimes,L=l.pendingLanes;0<L;){var Y=31-ki(L),ge=1<<Y,Se=R[Y];Se===-1?(!(ge&m)||ge&w)&&(R[Y]=Hx(ge,c)):Se<=c&&(l.expiredLanes|=ge),L&=~ge}}function ep(l){return l=l.pendingLanes&-0x40000001,l!==0?l:l&0x40000000?0x40000000:0}function og(){var l=Yo;return Yo<<=1,!(Yo&4194240)&&(Yo=64),l}function tp(l){for(var c=[],m=0;31>m;m++)c.push(l);return c}function Tu(l,c,m){l.pendingLanes|=c,c!==0x20000000&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-ki(c),l[c]=m}function Kx(l,c){var m=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var w=l.eventTimes;for(l=l.expirationTimes;0<m;){var R=31-ki(m),L=1<<R;c[R]=0,w[R]=-1,l[R]=-1,m&=~L}}function np(l,c){var m=l.entangledLanes|=c;for(l=l.entanglements;m;){var w=31-ki(m),R=1<<w;R&c|l[w]&c&&(l[w]|=c),m&=~R}}var zn=0;function ag(l){return l&=-l,1<l?4<l?l&0xfffffff?16:0x20000000:4:1}var rp,he,ip,ju,sp,y=!1,b=[],N=null,T=null,A=null,U=new Map,fe=new Map,me=[],Ge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tt(l,c){switch(l){case"focusin":case"focusout":N=null;break;case"dragenter":case"dragleave":T=null;break;case"mouseover":case"mouseout":A=null;break;case"pointerover":case"pointerout":U.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":fe.delete(c.pointerId)}}function at(l,c,m,w,R,L){return l===null||l.nativeEvent!==L?(l={blockedOn:c,domEventName:m,eventSystemFlags:w,nativeEvent:L,targetContainers:[R]},c!==null&&(c=gp(c),c!==null&&he(c)),l):(l.eventSystemFlags|=w,c=l.targetContainers,R!==null&&c.indexOf(R)===-1&&c.push(R),l)}function mt(l,c,m,w,R){switch(c){case"focusin":return N=at(N,l,c,m,w,R),!0;case"dragenter":return T=at(T,l,c,m,w,R),!0;case"mouseover":return A=at(A,l,c,m,w,R),!0;case"pointerover":var L=R.pointerId;return U.set(L,at(U.get(L)||null,l,c,m,w,R)),!0;case"gotpointercapture":return L=R.pointerId,fe.set(L,at(fe.get(L)||null,l,c,m,w,R)),!0}return!1}function Be(l){var c=Ru(l.target);if(c!==null){var m=eo(c);if(m!==null){if(c=m.tag,c===13){if(c=Dc(m),c!==null){l.blockedOn=c,sp(l.priority,function(){ip(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Oe(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var m=ue(l.domEventName,l.eventSystemFlags,c[0],l.nativeEvent);if(m===null){m=l.nativeEvent;var w=new m.constructor(m.type,m);_o=w,m.target.dispatchEvent(w),_o=null}else return c=gp(m),c!==null&&he(c),l.blockedOn=m,!1;c.shift()}return!0}function et(l,c,m){Oe(l)&&m.delete(c)}function ve(){y=!1,N!==null&&Oe(N)&&(N=null),T!==null&&Oe(T)&&(T=null),A!==null&&Oe(A)&&(A=null),U.forEach(et),fe.forEach(et)}function ke(l,c){l.blockedOn===c&&(l.blockedOn=null,y||(y=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ve)))}function Te(l){function c(R){return ke(R,l)}if(0<b.length){ke(b[0],l);for(var m=1;m<b.length;m++){var w=b[m];w.blockedOn===l&&(w.blockedOn=null)}}for(N!==null&&ke(N,l),T!==null&&ke(T,l),A!==null&&ke(A,l),U.forEach(c),fe.forEach(c),m=0;m<me.length;m++)w=me[m],w.blockedOn===l&&(w.blockedOn=null);for(;0<me.length&&(m=me[0],m.blockedOn===null);)Be(m),m.blockedOn===null&&me.shift()}var Ze=j.ReactCurrentBatchConfig,Qe=!0;function je(l,c,m,w){var R=zn,L=Ze.transition;Ze.transition=null;try{zn=1,It(l,c,m,w)}finally{zn=R,Ze.transition=L}}function Ke(l,c,m,w){var R=zn,L=Ze.transition;Ze.transition=null;try{zn=4,It(l,c,m,w)}finally{zn=R,Ze.transition=L}}function It(l,c,m,w){if(Qe){var R=ue(l,c,m,w);if(R===null)lw(l,c,w,ee,m),tt(l,w);else if(mt(R,l,c,m,w))w.stopPropagation();else if(tt(l,w),c&4&&-1<Ge.indexOf(l)){for(;R!==null;){var L=gp(R);if(L!==null&&rp(L),L=ue(l,c,m,w),L===null&&lw(l,c,w,ee,m),L===R)break;R=L}R!==null&&w.stopPropagation()}else lw(l,c,w,null,m)}}var ee=null;function ue(l,c,m,w){if(ee=null,l=Ea(w),l=Ru(l),l!==null)if(c=eo(l),c===null)l=null;else if(m=c.tag,m===13){if(l=Dc(c),l!==null)return l;l=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null);return ee=l,null}function Ee(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kf()){case ku:return 1;case Wc:return 4;case dl:case Qf:return 16;case Cu:return 0x20000000;default:return 16}default:return 16}}var st=null,ae=null,pe=null;function K(){if(pe)return pe;var l,c=ae,m=c.length,w,R="value"in st?st.value:st.textContent,L=R.length;for(l=0;l<m&&c[l]===R[l];l++);var Y=m-l;for(w=1;w<=Y&&c[m-w]===R[L-w];w++);return pe=R.slice(l,1<w?1-w:void 0)}function re(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function se(){return!0}function Le(){return!1}function it(l){function c(m,w,R,L,Y){this._reactName=m,this._targetInst=R,this.type=w,this.nativeEvent=L,this.target=Y,this.currentTarget=null;for(var ge in l)l.hasOwnProperty(ge)&&(m=l[ge],this[ge]=m?m(L):L[ge]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?se:Le,this.isPropagationStopped=Le,this}return oe(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=se)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=se)},persist:function(){},isPersistent:se}),c}var qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vt=it(qt),nn=oe({},qt,{view:0,detail:0}),lt=it(nn),_e,Pe,ot,pt=oe({},nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ot&&(ot&&l.type==="mousemove"?(_e=l.screenX-ot.screenX,Pe=l.screenY-ot.screenY):Pe=_e=0,ot=l),_e)},movementY:function(l){return"movementY"in l?l.movementY:Pe}}),Bt=it(pt),rn=oe({},pt,{dataTransfer:0}),Ae=it(rn),nt=oe({},nn,{relatedTarget:0}),dt=it(nt),Ct=oe({},qt,{animationName:0,elapsedTime:0,pseudoElement:0}),wt=it(Ct),Ut=oe({},qt,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Sn=it(Ut),Pt=oe({},qt,{data:0}),Tr=it(Pt),We={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_t={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tt(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=_t[l])?!!c[l]:!1}function In(){return Tt}var Qn=oe({},nn,{key:function(l){if(l.key){var c=We[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=re(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?bt[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(l){return l.type==="keypress"?re(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?re(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Vn=it(Qn),Kn=oe({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ca=it(Kn),vi=oe({},nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In}),Qx=it(vi),Jx=oe({},qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),to=it(Jx),Zx=oe({},pt,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),lg=it(Zx),op=[9,13,27,32],Yx=a&&"CompositionEvent"in window,ap=null;a&&"documentMode"in document&&(ap=document.documentMode);var IB=a&&"TextEvent"in window&&!ap,HN=a&&(!Yx||ap&&8<ap&&11>=ap),GN=" ",KN=!1;function QN(l,c){switch(l){case"keyup":return op.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JN(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Uc=!1;function NB(l,c){switch(l){case"compositionend":return JN(c);case"keypress":return c.which!==32?null:(KN=!0,GN);case"textInput":return l=c.data,l===GN&&KN?null:l;default:return null}}function kB(l,c){if(Uc)return l==="compositionend"||!Yx&&QN(l,c)?(l=K(),pe=ae=st=null,Uc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return HN&&c.locale!=="ko"?null:c.data;default:return null}}var CB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ZN(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!CB[l.type]:c==="textarea"}function YN(l,c,m,w){yn(w),c=pg(c,"onChange"),0<c.length&&(m=new Vt("onChange","change",null,m,w),l.push({event:m,listeners:c}))}var lp=null,up=null;function TB(l){gk(l,0)}function ug(l){var c=Qc(l);if(Ue(c))return l}function jB(l,c){if(l==="change")return c}var XN=!1;if(a){var Xx;if(a){var ew="oninput"in document;if(!ew){var ek=document.createElement("div");ek.setAttribute("oninput","return;"),ew=typeof ek.oninput=="function"}Xx=ew}else Xx=!1;XN=Xx&&(!document.documentMode||9<document.documentMode)}function tk(){lp&&(lp.detachEvent("onpropertychange",nk),up=lp=null)}function nk(l){if(l.propertyName==="value"&&ug(up)){var c=[];YN(c,up,l,Ea(l)),Ia(TB,c)}}function RB(l,c,m){l==="focusin"?(tk(),lp=c,up=m,lp.attachEvent("onpropertychange",nk)):l==="focusout"&&tk()}function OB(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ug(up)}function AB(l,c){if(l==="click")return ug(c)}function qB(l,c){if(l==="input"||l==="change")return ug(c)}function PB(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var So=typeof Object.is=="function"?Object.is:PB;function cp(l,c){if(So(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var m=Object.keys(l),w=Object.keys(c);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var R=m[w];if(!u.call(c,R)||!So(l[R],c[R]))return!1}return!0}function rk(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function ik(l,c){var m=rk(l);l=0;for(var w;m;){if(m.nodeType===3){if(w=l+m.textContent.length,l<=c&&w>=c)return{node:m,offset:c-l};l=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=rk(m)}}function sk(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?sk(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function ok(){for(var l=window,c=ut();c instanceof l.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)l=c.contentWindow;else break;c=ut(l.document)}return c}function tw(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}function FB(l){var c=ok(),m=l.focusedElem,w=l.selectionRange;if(c!==m&&m&&m.ownerDocument&&sk(m.ownerDocument.documentElement,m)){if(w!==null&&tw(m)){if(c=w.start,l=w.end,l===void 0&&(l=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(l,m.value.length);else if(l=(c=m.ownerDocument||document)&&c.defaultView||window,l.getSelection){l=l.getSelection();var R=m.textContent.length,L=Math.min(w.start,R);w=w.end===void 0?L:Math.min(w.end,R),!l.extend&&L>w&&(R=w,w=L,L=R),R=ik(m,L);var Y=ik(m,w);R&&Y&&(l.rangeCount!==1||l.anchorNode!==R.node||l.anchorOffset!==R.offset||l.focusNode!==Y.node||l.focusOffset!==Y.offset)&&(c=c.createRange(),c.setStart(R.node,R.offset),l.removeAllRanges(),L>w?(l.addRange(c),l.extend(Y.node,Y.offset)):(c.setEnd(Y.node,Y.offset),l.addRange(c)))}}for(c=[],l=m;l=l.parentNode;)l.nodeType===1&&c.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)l=c[m],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var DB=a&&"documentMode"in document&&11>=document.documentMode,Vc=null,nw=null,dp=null,rw=!1;function ak(l,c,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;rw||Vc==null||Vc!==ut(w)||(w=Vc,"selectionStart"in w&&tw(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),dp&&cp(dp,w)||(dp=w,w=pg(nw,"onSelect"),0<w.length&&(c=new Vt("onSelect","select",null,c,m),l.push({event:c,listeners:w}),c.target=Vc)))}function cg(l,c){var m={};return m[l.toLowerCase()]=c.toLowerCase(),m["Webkit"+l]="webkit"+c,m["Moz"+l]="moz"+c,m}var Hc={animationend:cg("Animation","AnimationEnd"),animationiteration:cg("Animation","AnimationIteration"),animationstart:cg("Animation","AnimationStart"),transitionend:cg("Transition","TransitionEnd")},iw={},lk={};a&&(lk=document.createElement("div").style,"AnimationEvent"in window||(delete Hc.animationend.animation,delete Hc.animationiteration.animation,delete Hc.animationstart.animation),"TransitionEvent"in window||delete Hc.transitionend.transition);function dg(l){if(iw[l])return iw[l];if(!Hc[l])return l;var c=Hc[l],m;for(m in c)if(c.hasOwnProperty(m)&&m in lk)return iw[l]=c[m];return l}var uk=dg("animationend"),ck=dg("animationiteration"),dk=dg("animationstart"),fk=dg("transitionend"),pk=new Map,hk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ml(l,c){pk.set(l,c),s(c,[l])}for(var sw=0;sw<hk.length;sw++){var ow=hk[sw],LB=ow.toLowerCase(),MB=ow[0].toUpperCase()+ow.slice(1);ml(LB,"on"+MB)}ml(uk,"onAnimationEnd"),ml(ck,"onAnimationIteration"),ml(dk,"onAnimationStart"),ml("dblclick","onDoubleClick"),ml("focusin","onFocus"),ml("focusout","onBlur"),ml(fk,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$B=new Set("cancel close invalid load scroll toggle".split(" ").concat(fp));function mk(l,c,m){var w=l.type||"unknown-event";l.currentTarget=m,Fc(w,c,void 0,l),l.currentTarget=null}function gk(l,c){c=(c&4)!==0;for(var m=0;m<l.length;m++){var w=l[m],R=w.event;w=w.listeners;e:{var L=void 0;if(c)for(var Y=w.length-1;0<=Y;Y--){var ge=w[Y],Se=ge.instance,He=ge.currentTarget;if(ge=ge.listener,Se!==L&&R.isPropagationStopped())break e;mk(R,ge,He),L=Se}else for(Y=0;Y<w.length;Y++){if(ge=w[Y],Se=ge.instance,He=ge.currentTarget,ge=ge.listener,Se!==L&&R.isPropagationStopped())break e;mk(R,ge,He),L=Se}}}if(cl)throw l=Xs,cl=!1,Xs=null,l}function pr(l,c){var m=c[hw];m===void 0&&(m=c[hw]=new Set);var w=l+"__bubble";m.has(w)||(yk(c,l,2,!1),m.add(w))}function aw(l,c,m){var w=0;c&&(w|=4),yk(m,l,w,c)}var fg="_reactListening"+Math.random().toString(36).slice(2);function pp(l){if(!l[fg]){l[fg]=!0,r.forEach(function(m){m!=="selectionchange"&&($B.has(m)||aw(m,!1,l),aw(m,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[fg]||(c[fg]=!0,aw("selectionchange",!1,c))}}function yk(l,c,m,w){switch(Ee(c)){case 1:var R=je;break;case 4:R=Ke;break;default:R=It}m=R.bind(null,c,m,l),R=void 0,!Iu||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(R=!0),w?R!==void 0?l.addEventListener(c,m,{capture:!0,passive:R}):l.addEventListener(c,m,!0):R!==void 0?l.addEventListener(c,m,{passive:R}):l.addEventListener(c,m,!1)}function lw(l,c,m,w,R){var L=w;if(!(c&1)&&!(c&2)&&w!==null)e:for(;;){if(w===null)return;var Y=w.tag;if(Y===3||Y===4){var ge=w.stateNode.containerInfo;if(ge===R||ge.nodeType===8&&ge.parentNode===R)break;if(Y===4)for(Y=w.return;Y!==null;){var Se=Y.tag;if((Se===3||Se===4)&&(Se=Y.stateNode.containerInfo,Se===R||Se.nodeType===8&&Se.parentNode===R))return;Y=Y.return}for(;ge!==null;){if(Y=Ru(ge),Y===null)return;if(Se=Y.tag,Se===5||Se===6){w=L=Y;continue e}ge=ge.parentNode}}w=w.return}Ia(function(){var He=L,ht=Ea(m),gt=[];e:{var ft=pk.get(l);if(ft!==void 0){var Dt=Vt,Wt=l;switch(l){case"keypress":if(re(m)===0)break e;case"keydown":case"keyup":Dt=Vn;break;case"focusin":Wt="focus",Dt=dt;break;case"focusout":Wt="blur",Dt=dt;break;case"beforeblur":case"afterblur":Dt=dt;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Dt=Bt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Dt=Ae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Dt=Qx;break;case uk:case ck:case dk:Dt=wt;break;case fk:Dt=to;break;case"scroll":Dt=lt;break;case"wheel":Dt=lg;break;case"copy":case"cut":case"paste":Dt=Sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Dt=Ca}var Ht=(c&4)!==0,Vr=!Ht&&l==="scroll",Fe=Ht?ft!==null?ft+"Capture":null:ft;Ht=[];for(var Ce=He,$e;Ce!==null;){$e=Ce;var vt=$e.stateNode;if($e.tag===5&&vt!==null&&($e=vt,Fe!==null&&(vt=us(Ce,Fe),vt!=null&&Ht.push(hp(Ce,vt,$e)))),Vr)break;Ce=Ce.return}0<Ht.length&&(ft=new Dt(ft,Wt,null,m,ht),gt.push({event:ft,listeners:Ht}))}}if(!(c&7)){e:{if(ft=l==="mouseover"||l==="pointerover",Dt=l==="mouseout"||l==="pointerout",ft&&m!==_o&&(Wt=m.relatedTarget||m.fromElement)&&(Ru(Wt)||Wt[Ta]))break e;if((Dt||ft)&&(ft=ht.window===ht?ht:(ft=ht.ownerDocument)?ft.defaultView||ft.parentWindow:window,Dt?(Wt=m.relatedTarget||m.toElement,Dt=He,Wt=Wt?Ru(Wt):null,Wt!==null&&(Vr=eo(Wt),Wt!==Vr||Wt.tag!==5&&Wt.tag!==6)&&(Wt=null)):(Dt=null,Wt=He),Dt!==Wt)){if(Ht=Bt,vt="onMouseLeave",Fe="onMouseEnter",Ce="mouse",(l==="pointerout"||l==="pointerover")&&(Ht=Ca,vt="onPointerLeave",Fe="onPointerEnter",Ce="pointer"),Vr=Dt==null?ft:Qc(Dt),$e=Wt==null?ft:Qc(Wt),ft=new Ht(vt,Ce+"leave",Dt,m,ht),ft.target=Vr,ft.relatedTarget=$e,vt=null,Ru(ht)===He&&(Ht=new Ht(Fe,Ce+"enter",Wt,m,ht),Ht.target=$e,Ht.relatedTarget=Vr,vt=Ht),Vr=vt,Dt&&Wt)t:{for(Ht=Dt,Fe=Wt,Ce=0,$e=Ht;$e;$e=Gc($e))Ce++;for($e=0,vt=Fe;vt;vt=Gc(vt))$e++;for(;0<Ce-$e;)Ht=Gc(Ht),Ce--;for(;0<$e-Ce;)Fe=Gc(Fe),$e--;for(;Ce--;){if(Ht===Fe||Fe!==null&&Ht===Fe.alternate)break t;Ht=Gc(Ht),Fe=Gc(Fe)}Ht=null}else Ht=null;Dt!==null&&bk(gt,ft,Dt,Ht,!1),Wt!==null&&Vr!==null&&bk(gt,Vr,Wt,Ht,!0)}}e:{if(ft=He?Qc(He):window,Dt=ft.nodeName&&ft.nodeName.toLowerCase(),Dt==="select"||Dt==="input"&&ft.type==="file")var Kt=jB;else if(ZN(ft))if(XN)Kt=qB;else{Kt=OB;var on=RB}else(Dt=ft.nodeName)&&Dt.toLowerCase()==="input"&&(ft.type==="checkbox"||ft.type==="radio")&&(Kt=AB);if(Kt&&(Kt=Kt(l,He))){YN(gt,Kt,m,ht);break e}on&&on(l,ft,He),l==="focusout"&&(on=ft._wrapperState)&&on.controlled&&ft.type==="number"&&be(ft,"number",ft.value)}switch(on=He?Qc(He):window,l){case"focusin":(ZN(on)||on.contentEditable==="true")&&(Vc=on,nw=He,dp=null);break;case"focusout":dp=nw=Vc=null;break;case"mousedown":rw=!0;break;case"contextmenu":case"mouseup":case"dragend":rw=!1,ak(gt,m,ht);break;case"selectionchange":if(DB)break;case"keydown":case"keyup":ak(gt,m,ht)}var an;if(Yx)e:{switch(l){case"compositionstart":var gn="onCompositionStart";break e;case"compositionend":gn="onCompositionEnd";break e;case"compositionupdate":gn="onCompositionUpdate";break e}gn=void 0}else Uc?QN(l,m)&&(gn="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(gn="onCompositionStart");gn&&(HN&&m.locale!=="ko"&&(Uc||gn!=="onCompositionStart"?gn==="onCompositionEnd"&&Uc&&(an=K()):(st=ht,ae="value"in st?st.value:st.textContent,Uc=!0)),on=pg(He,gn),0<on.length&&(gn=new Tr(gn,l,null,m,ht),gt.push({event:gn,listeners:on}),an?gn.data=an:(an=JN(m),an!==null&&(gn.data=an)))),(an=IB?NB(l,m):kB(l,m))&&(He=pg(He,"onBeforeInput"),0<He.length&&(ht=new Tr("onBeforeInput","beforeinput",null,m,ht),gt.push({event:ht,listeners:He}),ht.data=an))}gk(gt,c)})}function hp(l,c,m){return{instance:l,listener:c,currentTarget:m}}function pg(l,c){for(var m=c+"Capture",w=[];l!==null;){var R=l,L=R.stateNode;R.tag===5&&L!==null&&(R=L,L=us(l,m),L!=null&&w.unshift(hp(l,L,R)),L=us(l,c),L!=null&&w.push(hp(l,L,R))),l=l.return}return w}function Gc(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function bk(l,c,m,w,R){for(var L=c._reactName,Y=[];m!==null&&m!==w;){var ge=m,Se=ge.alternate,He=ge.stateNode;if(Se!==null&&Se===w)break;ge.tag===5&&He!==null&&(ge=He,R?(Se=us(m,L),Se!=null&&Y.unshift(hp(m,Se,ge))):R||(Se=us(m,L),Se!=null&&Y.push(hp(m,Se,ge)))),m=m.return}Y.length!==0&&l.push({event:c,listeners:Y})}var BB=/\r\n?/g,zB=/\u0000|\uFFFD/g;function vk(l){return(typeof l=="string"?l:""+l).replace(BB,`
`).replace(zB,"")}function hg(l,c,m){if(c=vk(c),vk(l)!==c&&m)throw Error(n(425))}function mg(){}var uw=null,cw=null;function dw(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var fw=typeof setTimeout=="function"?setTimeout:void 0,WB=typeof clearTimeout=="function"?clearTimeout:void 0,xk=typeof Promise=="function"?Promise:void 0,UB=typeof queueMicrotask=="function"?queueMicrotask:typeof xk<"u"?function(l){return xk.resolve(null).then(l).catch(VB)}:fw;function VB(l){setTimeout(function(){throw l})}function pw(l,c){var m=c,w=0;do{var R=m.nextSibling;if(l.removeChild(m),R&&R.nodeType===8)if(m=R.data,m==="/$"){if(w===0){l.removeChild(R),Te(c);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=R}while(m);Te(c)}function gl(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return l}function wk(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return l;c--}else m==="/$"&&c++}l=l.previousSibling}return null}var Kc=Math.random().toString(36).slice(2),Xo="__reactFiber$"+Kc,mp="__reactProps$"+Kc,Ta="__reactContainer$"+Kc,hw="__reactEvents$"+Kc,HB="__reactListeners$"+Kc,GB="__reactHandles$"+Kc;function Ru(l){var c=l[Xo];if(c)return c;for(var m=l.parentNode;m;){if(c=m[Ta]||m[Xo]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(l=wk(l);l!==null;){if(m=l[Xo])return m;l=wk(l)}return c}l=m,m=l.parentNode}return null}function gp(l){return l=l[Xo]||l[Ta],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Qc(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function gg(l){return l[mp]||null}var mw=[],Jc=-1;function yl(l){return{current:l}}function hr(l){0>Jc||(l.current=mw[Jc],mw[Jc]=null,Jc--)}function sr(l,c){Jc++,mw[Jc]=l.current,l.current=c}var bl={},Ci=yl(bl),ds=yl(!1),Ou=bl;function Zc(l,c){var m=l.type.contextTypes;if(!m)return bl;var w=l.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var R={},L;for(L in m)R[L]=c[L];return w&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=R),R}function fs(l){return l=l.childContextTypes,l!=null}function yg(){hr(ds),hr(Ci)}function _k(l,c,m){if(Ci.current!==bl)throw Error(n(168));sr(Ci,c),sr(ds,m)}function Sk(l,c,m){var w=l.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var R in w)if(!(R in c))throw Error(n(108,ze(l)||"Unknown",R));return oe({},m,w)}function bg(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||bl,Ou=Ci.current,sr(Ci,l),sr(ds,ds.current),!0}function Ek(l,c,m){var w=l.stateNode;if(!w)throw Error(n(169));m?(l=Sk(l,c,Ou),w.__reactInternalMemoizedMergedChildContext=l,hr(ds),hr(Ci),sr(Ci,l)):hr(ds),sr(ds,m)}var ja=null,vg=!1,gw=!1;function Ik(l){ja===null?ja=[l]:ja.push(l)}function KB(l){vg=!0,Ik(l)}function vl(){if(!gw&&ja!==null){gw=!0;var l=0,c=zn;try{var m=ja;for(zn=1;l<m.length;l++){var w=m[l];do w=w(!0);while(w!==null)}ja=null,vg=!1}catch(R){throw ja!==null&&(ja=ja.slice(l+1)),Bc(ku,vl),R}finally{zn=c,gw=!1}}return null}var Yc=[],Xc=0,xg=null,wg=0,no=[],ro=0,Au=null,Ra=1,Oa="";function qu(l,c){Yc[Xc++]=wg,Yc[Xc++]=xg,xg=l,wg=c}function Nk(l,c,m){no[ro++]=Ra,no[ro++]=Oa,no[ro++]=Au,Au=l;var w=Ra;l=Oa;var R=32-ki(w)-1;w&=~(1<<R),m+=1;var L=32-ki(c)+R;if(30<L){var Y=R-R%5;L=(w&(1<<Y)-1).toString(32),w>>=Y,R-=Y,Ra=1<<32-ki(c)+R|m<<R|w,Oa=L+l}else Ra=1<<L|m<<R|w,Oa=l}function yw(l){l.return!==null&&(qu(l,1),Nk(l,1,0))}function bw(l){for(;l===xg;)xg=Yc[--Xc],Yc[Xc]=null,wg=Yc[--Xc],Yc[Xc]=null;for(;l===Au;)Au=no[--ro],no[ro]=null,Oa=no[--ro],no[ro]=null,Ra=no[--ro],no[ro]=null}var Ts=null,js=null,br=!1,Eo=null;function kk(l,c){var m=ao(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=l,c=l.deletions,c===null?(l.deletions=[m],l.flags|=16):c.push(m)}function Ck(l,c){switch(l.tag){case 5:var m=l.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(l.stateNode=c,Ts=l,js=gl(c.firstChild),!0):!1;case 6:return c=l.pendingProps===""||c.nodeType!==3?null:c,c!==null?(l.stateNode=c,Ts=l,js=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=Au!==null?{id:Ra,overflow:Oa}:null,l.memoizedState={dehydrated:c,treeContext:m,retryLane:0x40000000},m=ao(18,null,null,0),m.stateNode=c,m.return=l,l.child=m,Ts=l,js=null,!0):!1;default:return!1}}function vw(l){return(l.mode&1)!==0&&(l.flags&128)===0}function xw(l){if(br){var c=js;if(c){var m=c;if(!Ck(l,c)){if(vw(l))throw Error(n(418));c=gl(m.nextSibling);var w=Ts;c&&Ck(l,c)?kk(w,m):(l.flags=l.flags&-4097|2,br=!1,Ts=l)}}else{if(vw(l))throw Error(n(418));l.flags=l.flags&-4097|2,br=!1,Ts=l}}}function Tk(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Ts=l}function _g(l){if(l!==Ts)return!1;if(!br)return Tk(l),br=!0,!1;var c;if((c=l.tag!==3)&&!(c=l.tag!==5)&&(c=l.type,c=c!=="head"&&c!=="body"&&!dw(l.type,l.memoizedProps)),c&&(c=js)){if(vw(l))throw jk(),Error(n(418));for(;c;)kk(l,c),c=gl(c.nextSibling)}if(Tk(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8){var m=l.data;if(m==="/$"){if(c===0){js=gl(l.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}l=l.nextSibling}js=null}}else js=Ts?gl(l.stateNode.nextSibling):null;return!0}function jk(){for(var l=js;l;)l=gl(l.nextSibling)}function ed(){js=Ts=null,br=!1}function ww(l){Eo===null?Eo=[l]:Eo.push(l)}var QB=j.ReactCurrentBatchConfig;function yp(l,c,m){if(l=m.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var w=m.stateNode}if(!w)throw Error(n(147,l));var R=w,L=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===L?c.ref:(c=function(Y){var ge=R.refs;Y===null?delete ge[L]:ge[L]=Y},c._stringRef=L,c)}if(typeof l!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,l))}return l}function Sg(l,c){throw l=Object.prototype.toString.call(c),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function Rk(l){var c=l._init;return c(l._payload)}function Ok(l){function c(Fe,Ce){if(l){var $e=Fe.deletions;$e===null?(Fe.deletions=[Ce],Fe.flags|=16):$e.push(Ce)}}function m(Fe,Ce){if(!l)return null;for(;Ce!==null;)c(Fe,Ce),Ce=Ce.sibling;return null}function w(Fe,Ce){for(Fe=new Map;Ce!==null;)Ce.key!==null?Fe.set(Ce.key,Ce):Fe.set(Ce.index,Ce),Ce=Ce.sibling;return Fe}function R(Fe,Ce){return Fe=kl(Fe,Ce),Fe.index=0,Fe.sibling=null,Fe}function L(Fe,Ce,$e){return Fe.index=$e,l?($e=Fe.alternate,$e!==null?($e=$e.index,$e<Ce?(Fe.flags|=2,Ce):$e):(Fe.flags|=2,Ce)):(Fe.flags|=1048576,Ce)}function Y(Fe){return l&&Fe.alternate===null&&(Fe.flags|=2),Fe}function ge(Fe,Ce,$e,vt){return Ce===null||Ce.tag!==6?(Ce=f_($e,Fe.mode,vt),Ce.return=Fe,Ce):(Ce=R(Ce,$e),Ce.return=Fe,Ce)}function Se(Fe,Ce,$e,vt){var Kt=$e.type;return Kt===$?ht(Fe,Ce,$e.props.children,vt,$e.key):Ce!==null&&(Ce.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===Z&&Rk(Kt)===Ce.type)?(vt=R(Ce,$e.props),vt.ref=yp(Fe,Ce,$e),vt.return=Fe,vt):(vt=Gg($e.type,$e.key,$e.props,null,Fe.mode,vt),vt.ref=yp(Fe,Ce,$e),vt.return=Fe,vt)}function He(Fe,Ce,$e,vt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==$e.containerInfo||Ce.stateNode.implementation!==$e.implementation?(Ce=p_($e,Fe.mode,vt),Ce.return=Fe,Ce):(Ce=R(Ce,$e.children||[]),Ce.return=Fe,Ce)}function ht(Fe,Ce,$e,vt,Kt){return Ce===null||Ce.tag!==7?(Ce=zu($e,Fe.mode,vt,Kt),Ce.return=Fe,Ce):(Ce=R(Ce,$e),Ce.return=Fe,Ce)}function gt(Fe,Ce,$e){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=f_(""+Ce,Fe.mode,$e),Ce.return=Fe,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case q:return $e=Gg(Ce.type,Ce.key,Ce.props,null,Fe.mode,$e),$e.ref=yp(Fe,null,Ce),$e.return=Fe,$e;case F:return Ce=p_(Ce,Fe.mode,$e),Ce.return=Fe,Ce;case Z:var vt=Ce._init;return gt(Fe,vt(Ce._payload),$e)}if(Ne(Ce)||ne(Ce))return Ce=zu(Ce,Fe.mode,$e,null),Ce.return=Fe,Ce;Sg(Fe,Ce)}return null}function ft(Fe,Ce,$e,vt){var Kt=Ce!==null?Ce.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Kt!==null?null:ge(Fe,Ce,""+$e,vt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case q:return $e.key===Kt?Se(Fe,Ce,$e,vt):null;case F:return $e.key===Kt?He(Fe,Ce,$e,vt):null;case Z:return Kt=$e._init,ft(Fe,Ce,Kt($e._payload),vt)}if(Ne($e)||ne($e))return Kt!==null?null:ht(Fe,Ce,$e,vt,null);Sg(Fe,$e)}return null}function Dt(Fe,Ce,$e,vt,Kt){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Fe=Fe.get($e)||null,ge(Ce,Fe,""+vt,Kt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case q:return Fe=Fe.get(vt.key===null?$e:vt.key)||null,Se(Ce,Fe,vt,Kt);case F:return Fe=Fe.get(vt.key===null?$e:vt.key)||null,He(Ce,Fe,vt,Kt);case Z:var on=vt._init;return Dt(Fe,Ce,$e,on(vt._payload),Kt)}if(Ne(vt)||ne(vt))return Fe=Fe.get($e)||null,ht(Ce,Fe,vt,Kt,null);Sg(Ce,vt)}return null}function Wt(Fe,Ce,$e,vt){for(var Kt=null,on=null,an=Ce,gn=Ce=0,hi=null;an!==null&&gn<$e.length;gn++){an.index>gn?(hi=an,an=null):hi=an.sibling;var $n=ft(Fe,an,$e[gn],vt);if($n===null){an===null&&(an=hi);break}l&&an&&$n.alternate===null&&c(Fe,an),Ce=L($n,Ce,gn),on===null?Kt=$n:on.sibling=$n,on=$n,an=hi}if(gn===$e.length)return m(Fe,an),br&&qu(Fe,gn),Kt;if(an===null){for(;gn<$e.length;gn++)an=gt(Fe,$e[gn],vt),an!==null&&(Ce=L(an,Ce,gn),on===null?Kt=an:on.sibling=an,on=an);return br&&qu(Fe,gn),Kt}for(an=w(Fe,an);gn<$e.length;gn++)hi=Dt(an,Fe,gn,$e[gn],vt),hi!==null&&(l&&hi.alternate!==null&&an.delete(hi.key===null?gn:hi.key),Ce=L(hi,Ce,gn),on===null?Kt=hi:on.sibling=hi,on=hi);return l&&an.forEach(function(Cl){return c(Fe,Cl)}),br&&qu(Fe,gn),Kt}function Ht(Fe,Ce,$e,vt){var Kt=ne($e);if(typeof Kt!="function")throw Error(n(150));if($e=Kt.call($e),$e==null)throw Error(n(151));for(var on=Kt=null,an=Ce,gn=Ce=0,hi=null,$n=$e.next();an!==null&&!$n.done;gn++,$n=$e.next()){an.index>gn?(hi=an,an=null):hi=an.sibling;var Cl=ft(Fe,an,$n.value,vt);if(Cl===null){an===null&&(an=hi);break}l&&an&&Cl.alternate===null&&c(Fe,an),Ce=L(Cl,Ce,gn),on===null?Kt=Cl:on.sibling=Cl,on=Cl,an=hi}if($n.done)return m(Fe,an),br&&qu(Fe,gn),Kt;if(an===null){for(;!$n.done;gn++,$n=$e.next())$n=gt(Fe,$n.value,vt),$n!==null&&(Ce=L($n,Ce,gn),on===null?Kt=$n:on.sibling=$n,on=$n);return br&&qu(Fe,gn),Kt}for(an=w(Fe,an);!$n.done;gn++,$n=$e.next())$n=Dt(an,Fe,gn,$n.value,vt),$n!==null&&(l&&$n.alternate!==null&&an.delete($n.key===null?gn:$n.key),Ce=L($n,Ce,gn),on===null?Kt=$n:on.sibling=$n,on=$n);return l&&an.forEach(function(k4){return c(Fe,k4)}),br&&qu(Fe,gn),Kt}function Vr(Fe,Ce,$e,vt){if(typeof $e=="object"&&$e!==null&&$e.type===$&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case q:e:{for(var Kt=$e.key,on=Ce;on!==null;){if(on.key===Kt){if(Kt=$e.type,Kt===$){if(on.tag===7){m(Fe,on.sibling),Ce=R(on,$e.props.children),Ce.return=Fe,Fe=Ce;break e}}else if(on.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===Z&&Rk(Kt)===on.type){m(Fe,on.sibling),Ce=R(on,$e.props),Ce.ref=yp(Fe,on,$e),Ce.return=Fe,Fe=Ce;break e}m(Fe,on);break}else c(Fe,on);on=on.sibling}$e.type===$?(Ce=zu($e.props.children,Fe.mode,vt,$e.key),Ce.return=Fe,Fe=Ce):(vt=Gg($e.type,$e.key,$e.props,null,Fe.mode,vt),vt.ref=yp(Fe,Ce,$e),vt.return=Fe,Fe=vt)}return Y(Fe);case F:e:{for(on=$e.key;Ce!==null;){if(Ce.key===on)if(Ce.tag===4&&Ce.stateNode.containerInfo===$e.containerInfo&&Ce.stateNode.implementation===$e.implementation){m(Fe,Ce.sibling),Ce=R(Ce,$e.children||[]),Ce.return=Fe,Fe=Ce;break e}else{m(Fe,Ce);break}else c(Fe,Ce);Ce=Ce.sibling}Ce=p_($e,Fe.mode,vt),Ce.return=Fe,Fe=Ce}return Y(Fe);case Z:return on=$e._init,Vr(Fe,Ce,on($e._payload),vt)}if(Ne($e))return Wt(Fe,Ce,$e,vt);if(ne($e))return Ht(Fe,Ce,$e,vt);Sg(Fe,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,Ce!==null&&Ce.tag===6?(m(Fe,Ce.sibling),Ce=R(Ce,$e),Ce.return=Fe,Fe=Ce):(m(Fe,Ce),Ce=f_($e,Fe.mode,vt),Ce.return=Fe,Fe=Ce),Y(Fe)):m(Fe,Ce)}return Vr}var td=Ok(!0),Ak=Ok(!1),Eg=yl(null),Ig=null,nd=null,_w=null;function Sw(){_w=nd=Ig=null}function Ew(l){var c=Eg.current;hr(Eg),l._currentValue=c}function Iw(l,c,m){for(;l!==null;){var w=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),l===m)break;l=l.return}}function rd(l,c){Ig=l,_w=nd=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&c&&(ps=!0),l.firstContext=null)}function io(l){var c=l._currentValue;if(_w!==l)if(l={context:l,memoizedValue:c,next:null},nd===null){if(Ig===null)throw Error(n(308));nd=l,Ig.dependencies={lanes:0,firstContext:l}}else nd=nd.next=l;return c}var Pu=null;function Nw(l){Pu===null?Pu=[l]:Pu.push(l)}function qk(l,c,m,w){var R=c.interleaved;return R===null?(m.next=m,Nw(c)):(m.next=R.next,R.next=m),c.interleaved=m,Aa(l,w)}function Aa(l,c){l.lanes|=c;var m=l.alternate;for(m!==null&&(m.lanes|=c),m=l,l=l.return;l!==null;)l.childLanes|=c,m=l.alternate,m!==null&&(m.childLanes|=c),m=l,l=l.return;return m.tag===3?m.stateNode:null}var xl=!1;function kw(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pk(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function qa(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function wl(l,c,m){var w=l.updateQueue;if(w===null)return null;if(w=w.shared,Dn&2){var R=w.pending;return R===null?c.next=c:(c.next=R.next,R.next=c),w.pending=c,Aa(l,m)}return R=w.interleaved,R===null?(c.next=c,Nw(w)):(c.next=R.next,R.next=c),w.interleaved=c,Aa(l,m)}function Ng(l,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var w=c.lanes;w&=l.pendingLanes,m|=w,c.lanes=m,np(l,m)}}function Fk(l,c){var m=l.updateQueue,w=l.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var R=null,L=null;if(m=m.firstBaseUpdate,m!==null){do{var Y={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};L===null?R=L=Y:L=L.next=Y,m=m.next}while(m!==null);L===null?R=L=c:L=L.next=c}else R=L=c;m={baseState:w.baseState,firstBaseUpdate:R,lastBaseUpdate:L,shared:w.shared,effects:w.effects},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=c:l.next=c,m.lastBaseUpdate=c}function kg(l,c,m,w){var R=l.updateQueue;xl=!1;var L=R.firstBaseUpdate,Y=R.lastBaseUpdate,ge=R.shared.pending;if(ge!==null){R.shared.pending=null;var Se=ge,He=Se.next;Se.next=null,Y===null?L=He:Y.next=He,Y=Se;var ht=l.alternate;ht!==null&&(ht=ht.updateQueue,ge=ht.lastBaseUpdate,ge!==Y&&(ge===null?ht.firstBaseUpdate=He:ge.next=He,ht.lastBaseUpdate=Se))}if(L!==null){var gt=R.baseState;Y=0,ht=He=Se=null,ge=L;do{var ft=ge.lane,Dt=ge.eventTime;if((w&ft)===ft){ht!==null&&(ht=ht.next={eventTime:Dt,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var Wt=l,Ht=ge;switch(ft=c,Dt=m,Ht.tag){case 1:if(Wt=Ht.payload,typeof Wt=="function"){gt=Wt.call(Dt,gt,ft);break e}gt=Wt;break e;case 3:Wt.flags=Wt.flags&-65537|128;case 0:if(Wt=Ht.payload,ft=typeof Wt=="function"?Wt.call(Dt,gt,ft):Wt,ft==null)break e;gt=oe({},gt,ft);break e;case 2:xl=!0}}ge.callback!==null&&ge.lane!==0&&(l.flags|=64,ft=R.effects,ft===null?R.effects=[ge]:ft.push(ge))}else Dt={eventTime:Dt,lane:ft,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},ht===null?(He=ht=Dt,Se=gt):ht=ht.next=Dt,Y|=ft;if(ge=ge.next,ge===null){if(ge=R.shared.pending,ge===null)break;ft=ge,ge=ft.next,ft.next=null,R.lastBaseUpdate=ft,R.shared.pending=null}}while(!0);if(ht===null&&(Se=gt),R.baseState=Se,R.firstBaseUpdate=He,R.lastBaseUpdate=ht,c=R.shared.interleaved,c!==null){R=c;do Y|=R.lane,R=R.next;while(R!==c)}else L===null&&(R.shared.lanes=0);Lu|=Y,l.lanes=Y,l.memoizedState=gt}}function Dk(l,c,m){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var w=l[c],R=w.callback;if(R!==null){if(w.callback=null,w=m,typeof R!="function")throw Error(n(191,R));R.call(w)}}}var bp={},ea=yl(bp),vp=yl(bp),xp=yl(bp);function Fu(l){if(l===bp)throw Error(n(174));return l}function Cw(l,c){switch(sr(xp,c),sr(vp,l),sr(ea,bp),l=c.nodeType,l){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Xt(null,"");break;default:l=l===8?c.parentNode:c,c=l.namespaceURI||null,l=l.tagName,c=Xt(c,l)}hr(ea),sr(ea,c)}function id(){hr(ea),hr(vp),hr(xp)}function Lk(l){Fu(xp.current);var c=Fu(ea.current),m=Xt(c,l.type);c!==m&&(sr(vp,l),sr(ea,m))}function Tw(l){vp.current===l&&(hr(ea),hr(vp))}var jr=yl(0);function Cg(l){for(var c=l;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var jw=[];function Rw(){for(var l=0;l<jw.length;l++)jw[l]._workInProgressVersionPrimary=null;jw.length=0}var Tg=j.ReactCurrentDispatcher,Ow=j.ReactCurrentBatchConfig,Du=0,Rr=null,oi=null,fi=null,jg=!1,wp=!1,_p=0,JB=0;function Ti(){throw Error(n(321))}function Aw(l,c){if(c===null)return!1;for(var m=0;m<c.length&&m<l.length;m++)if(!So(l[m],c[m]))return!1;return!0}function qw(l,c,m,w,R,L){if(Du=L,Rr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Tg.current=l===null||l.memoizedState===null?e4:t4,l=m(w,R),wp){L=0;do{if(wp=!1,_p=0,25<=L)throw Error(n(301));L+=1,fi=oi=null,c.updateQueue=null,Tg.current=n4,l=m(w,R)}while(wp)}if(Tg.current=Ag,c=oi!==null&&oi.next!==null,Du=0,fi=oi=Rr=null,jg=!1,c)throw Error(n(300));return l}function Pw(){var l=_p!==0;return _p=0,l}function ta(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fi===null?Rr.memoizedState=fi=l:fi=fi.next=l,fi}function so(){if(oi===null){var l=Rr.alternate;l=l!==null?l.memoizedState:null}else l=oi.next;var c=fi===null?Rr.memoizedState:fi.next;if(c!==null)fi=c,oi=l;else{if(l===null)throw Error(n(310));oi=l,l={memoizedState:oi.memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},fi===null?Rr.memoizedState=fi=l:fi=fi.next=l}return fi}function Sp(l,c){return typeof c=="function"?c(l):c}function Fw(l){var c=so(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=l;var w=oi,R=w.baseQueue,L=m.pending;if(L!==null){if(R!==null){var Y=R.next;R.next=L.next,L.next=Y}w.baseQueue=R=L,m.pending=null}if(R!==null){L=R.next,w=w.baseState;var ge=Y=null,Se=null,He=L;do{var ht=He.lane;if((Du&ht)===ht)Se!==null&&(Se=Se.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),w=He.hasEagerState?He.eagerState:l(w,He.action);else{var gt={lane:ht,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Se===null?(ge=Se=gt,Y=w):Se=Se.next=gt,Rr.lanes|=ht,Lu|=ht}He=He.next}while(He!==null&&He!==L);Se===null?Y=w:Se.next=ge,So(w,c.memoizedState)||(ps=!0),c.memoizedState=w,c.baseState=Y,c.baseQueue=Se,m.lastRenderedState=w}if(l=m.interleaved,l!==null){R=l;do L=R.lane,Rr.lanes|=L,Lu|=L,R=R.next;while(R!==l)}else R===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function Dw(l){var c=so(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=l;var w=m.dispatch,R=m.pending,L=c.memoizedState;if(R!==null){m.pending=null;var Y=R=R.next;do L=l(L,Y.action),Y=Y.next;while(Y!==R);So(L,c.memoizedState)||(ps=!0),c.memoizedState=L,c.baseQueue===null&&(c.baseState=L),m.lastRenderedState=L}return[L,w]}function Mk(){}function $k(l,c){var m=Rr,w=so(),R=c(),L=!So(w.memoizedState,R);if(L&&(w.memoizedState=R,ps=!0),w=w.queue,Lw(Wk.bind(null,m,w,l),[l]),w.getSnapshot!==c||L||fi!==null&&fi.memoizedState.tag&1){if(m.flags|=2048,Ep(9,zk.bind(null,m,w,R,c),void 0,null),pi===null)throw Error(n(349));Du&30||Bk(m,c,R)}return R}function Bk(l,c,m){l.flags|=16384,l={getSnapshot:c,value:m},c=Rr.updateQueue,c===null?(c={lastEffect:null,stores:null},Rr.updateQueue=c,c.stores=[l]):(m=c.stores,m===null?c.stores=[l]:m.push(l))}function zk(l,c,m,w){c.value=m,c.getSnapshot=w,Uk(c)&&Vk(l)}function Wk(l,c,m){return m(function(){Uk(c)&&Vk(l)})}function Uk(l){var c=l.getSnapshot;l=l.value;try{var m=c();return!So(l,m)}catch{return!0}}function Vk(l){var c=Aa(l,1);c!==null&&Co(c,l,1,-1)}function Hk(l){var c=ta();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sp,lastRenderedState:l},c.queue=l,l=l.dispatch=XB.bind(null,Rr,l),[c.memoizedState,l]}function Ep(l,c,m,w){return l={tag:l,create:c,destroy:m,deps:w,next:null},c=Rr.updateQueue,c===null?(c={lastEffect:null,stores:null},Rr.updateQueue=c,c.lastEffect=l.next=l):(m=c.lastEffect,m===null?c.lastEffect=l.next=l:(w=m.next,m.next=l,l.next=w,c.lastEffect=l)),l}function Gk(){return so().memoizedState}function Rg(l,c,m,w){var R=ta();Rr.flags|=l,R.memoizedState=Ep(1|c,m,void 0,w===void 0?null:w)}function Og(l,c,m,w){var R=so();w=w===void 0?null:w;var L=void 0;if(oi!==null){var Y=oi.memoizedState;if(L=Y.destroy,w!==null&&Aw(w,Y.deps)){R.memoizedState=Ep(c,m,L,w);return}}Rr.flags|=l,R.memoizedState=Ep(1|c,m,L,w)}function Kk(l,c){return Rg(8390656,8,l,c)}function Lw(l,c){return Og(2048,8,l,c)}function Qk(l,c){return Og(4,2,l,c)}function Jk(l,c){return Og(4,4,l,c)}function Zk(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function Yk(l,c,m){return m=m!=null?m.concat([l]):null,Og(4,4,Zk.bind(null,c,l),m)}function Mw(){}function Xk(l,c){var m=so();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&Aw(c,w[1])?w[0]:(m.memoizedState=[l,c],l)}function eC(l,c){var m=so();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&Aw(c,w[1])?w[0]:(l=l(),m.memoizedState=[l,c],l)}function tC(l,c,m){return Du&21?(So(m,c)||(m=og(),Rr.lanes|=m,Lu|=m,l.baseState=!0),c):(l.baseState&&(l.baseState=!1,ps=!0),l.memoizedState=m)}function ZB(l,c){var m=zn;zn=m!==0&&4>m?m:4,l(!0);var w=Ow.transition;Ow.transition={};try{l(!1),c()}finally{zn=m,Ow.transition=w}}function nC(){return so().memoizedState}function YB(l,c,m){var w=Il(l);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},rC(l))iC(c,m);else if(m=qk(l,c,m,w),m!==null){var R=Ki();Co(m,l,w,R),sC(m,c,w)}}function XB(l,c,m){var w=Il(l),R={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(rC(l))iC(c,R);else{var L=l.alternate;if(l.lanes===0&&(L===null||L.lanes===0)&&(L=c.lastRenderedReducer,L!==null))try{var Y=c.lastRenderedState,ge=L(Y,m);if(R.hasEagerState=!0,R.eagerState=ge,So(ge,Y)){var Se=c.interleaved;Se===null?(R.next=R,Nw(c)):(R.next=Se.next,Se.next=R),c.interleaved=R;return}}catch{}finally{}m=qk(l,c,R,w),m!==null&&(R=Ki(),Co(m,l,w,R),sC(m,c,w))}}function rC(l){var c=l.alternate;return l===Rr||c!==null&&c===Rr}function iC(l,c){wp=jg=!0;var m=l.pending;m===null?c.next=c:(c.next=m.next,m.next=c),l.pending=c}function sC(l,c,m){if(m&4194240){var w=c.lanes;w&=l.pendingLanes,m|=w,c.lanes=m,np(l,m)}}var Ag={readContext:io,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useInsertionEffect:Ti,useLayoutEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useMutableSource:Ti,useSyncExternalStore:Ti,useId:Ti,unstable_isNewReconciler:!1},e4={readContext:io,useCallback:function(l,c){return ta().memoizedState=[l,c===void 0?null:c],l},useContext:io,useEffect:Kk,useImperativeHandle:function(l,c,m){return m=m!=null?m.concat([l]):null,Rg(4194308,4,Zk.bind(null,c,l),m)},useLayoutEffect:function(l,c){return Rg(4194308,4,l,c)},useInsertionEffect:function(l,c){return Rg(4,2,l,c)},useMemo:function(l,c){var m=ta();return c=c===void 0?null:c,l=l(),m.memoizedState=[l,c],l},useReducer:function(l,c,m){var w=ta();return c=m!==void 0?m(c):c,w.memoizedState=w.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},w.queue=l,l=l.dispatch=YB.bind(null,Rr,l),[w.memoizedState,l]},useRef:function(l){var c=ta();return l={current:l},c.memoizedState=l},useState:Hk,useDebugValue:Mw,useDeferredValue:function(l){return ta().memoizedState=l},useTransition:function(){var l=Hk(!1),c=l[0];return l=ZB.bind(null,l[1]),ta().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,m){var w=Rr,R=ta();if(br){if(m===void 0)throw Error(n(407));m=m()}else{if(m=c(),pi===null)throw Error(n(349));Du&30||Bk(w,c,m)}R.memoizedState=m;var L={value:m,getSnapshot:c};return R.queue=L,Kk(Wk.bind(null,w,L,l),[l]),w.flags|=2048,Ep(9,zk.bind(null,w,L,m,c),void 0,null),m},useId:function(){var l=ta(),c=pi.identifierPrefix;if(br){var m=Oa,w=Ra;m=(w&~(1<<32-ki(w)-1)).toString(32)+m,c=":"+c+"R"+m,m=_p++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=JB++,c=":"+c+"r"+m.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},t4={readContext:io,useCallback:Xk,useContext:io,useEffect:Lw,useImperativeHandle:Yk,useInsertionEffect:Qk,useLayoutEffect:Jk,useMemo:eC,useReducer:Fw,useRef:Gk,useState:function(){return Fw(Sp)},useDebugValue:Mw,useDeferredValue:function(l){var c=so();return tC(c,oi.memoizedState,l)},useTransition:function(){var l=Fw(Sp)[0],c=so().memoizedState;return[l,c]},useMutableSource:Mk,useSyncExternalStore:$k,useId:nC,unstable_isNewReconciler:!1},n4={readContext:io,useCallback:Xk,useContext:io,useEffect:Lw,useImperativeHandle:Yk,useInsertionEffect:Qk,useLayoutEffect:Jk,useMemo:eC,useReducer:Dw,useRef:Gk,useState:function(){return Dw(Sp)},useDebugValue:Mw,useDeferredValue:function(l){var c=so();return oi===null?c.memoizedState=l:tC(c,oi.memoizedState,l)},useTransition:function(){var l=Dw(Sp)[0],c=so().memoizedState;return[l,c]},useMutableSource:Mk,useSyncExternalStore:$k,useId:nC,unstable_isNewReconciler:!1};function Io(l,c){if(l&&l.defaultProps){c=oe({},c),l=l.defaultProps;for(var m in l)c[m]===void 0&&(c[m]=l[m]);return c}return c}function $w(l,c,m,w){c=l.memoizedState,m=m(w,c),m=m==null?c:oe({},c,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var qg={isMounted:function(l){return(l=l._reactInternals)?eo(l)===l:!1},enqueueSetState:function(l,c,m){l=l._reactInternals;var w=Ki(),R=Il(l),L=qa(w,R);L.payload=c,m!=null&&(L.callback=m),c=wl(l,L,R),c!==null&&(Co(c,l,R,w),Ng(c,l,R))},enqueueReplaceState:function(l,c,m){l=l._reactInternals;var w=Ki(),R=Il(l),L=qa(w,R);L.tag=1,L.payload=c,m!=null&&(L.callback=m),c=wl(l,L,R),c!==null&&(Co(c,l,R,w),Ng(c,l,R))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var m=Ki(),w=Il(l),R=qa(m,w);R.tag=2,c!=null&&(R.callback=c),c=wl(l,R,w),c!==null&&(Co(c,l,w,m),Ng(c,l,w))}};function oC(l,c,m,w,R,L,Y){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(w,L,Y):c.prototype&&c.prototype.isPureReactComponent?!cp(m,w)||!cp(R,L):!0}function aC(l,c,m){var w=!1,R=bl,L=c.contextType;return typeof L=="object"&&L!==null?L=io(L):(R=fs(c)?Ou:Ci.current,w=c.contextTypes,L=(w=w!=null)?Zc(l,R):bl),c=new c(m,L),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=qg,l.stateNode=c,c._reactInternals=l,w&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=R,l.__reactInternalMemoizedMaskedChildContext=L),c}function lC(l,c,m,w){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,w),c.state!==l&&qg.enqueueReplaceState(c,c.state,null)}function Bw(l,c,m,w){var R=l.stateNode;R.props=m,R.state=l.memoizedState,R.refs={},kw(l);var L=c.contextType;typeof L=="object"&&L!==null?R.context=io(L):(L=fs(c)?Ou:Ci.current,R.context=Zc(l,L)),R.state=l.memoizedState,L=c.getDerivedStateFromProps,typeof L=="function"&&($w(l,c,L,m),R.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(c=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),c!==R.state&&qg.enqueueReplaceState(R,R.state,null),kg(l,m,R,w),R.state=l.memoizedState),typeof R.componentDidMount=="function"&&(l.flags|=4194308)}function sd(l,c){try{var m="",w=c;do m+=we(w),w=w.return;while(w);var R=m}catch(L){R=`
Error generating stack: `+L.message+`
`+L.stack}return{value:l,source:c,stack:R,digest:null}}function zw(l,c,m){return{value:l,source:null,stack:m??null,digest:c??null}}function Ww(l,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var r4=typeof WeakMap=="function"?WeakMap:Map;function uC(l,c,m){m=qa(-1,m),m.tag=3,m.payload={element:null};var w=c.value;return m.callback=function(){Bg||(Bg=!0,i_=w),Ww(l,c)},m}function cC(l,c,m){m=qa(-1,m),m.tag=3;var w=l.type.getDerivedStateFromError;if(typeof w=="function"){var R=c.value;m.payload=function(){return w(R)},m.callback=function(){Ww(l,c)}}var L=l.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(m.callback=function(){Ww(l,c),typeof w!="function"&&(Sl===null?Sl=new Set([this]):Sl.add(this));var Y=c.stack;this.componentDidCatch(c.value,{componentStack:Y!==null?Y:""})}),m}function dC(l,c,m){var w=l.pingCache;if(w===null){w=l.pingCache=new r4;var R=new Set;w.set(c,R)}else R=w.get(c),R===void 0&&(R=new Set,w.set(c,R));R.has(m)||(R.add(m),l=y4.bind(null,l,c,m),c.then(l,l))}function fC(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function pC(l,c,m,w,R){return l.mode&1?(l.flags|=65536,l.lanes=R,l):(l===c?l.flags|=65536:(l.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=qa(-1,1),c.tag=2,wl(m,c,1))),m.lanes|=1),l)}var i4=j.ReactCurrentOwner,ps=!1;function Gi(l,c,m,w){c.child=l===null?Ak(c,null,m,w):td(c,l.child,m,w)}function hC(l,c,m,w,R){m=m.render;var L=c.ref;return rd(c,R),w=qw(l,c,m,w,L,R),m=Pw(),l!==null&&!ps?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~R,Pa(l,c,R)):(br&&m&&yw(c),c.flags|=1,Gi(l,c,w,R),c.child)}function mC(l,c,m,w,R){if(l===null){var L=m.type;return typeof L=="function"&&!d_(L)&&L.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=L,gC(l,c,L,w,R)):(l=Gg(m.type,null,w,c,c.mode,R),l.ref=c.ref,l.return=c,c.child=l)}if(L=l.child,!(l.lanes&R)){var Y=L.memoizedProps;if(m=m.compare,m=m!==null?m:cp,m(Y,w)&&l.ref===c.ref)return Pa(l,c,R)}return c.flags|=1,l=kl(L,w),l.ref=c.ref,l.return=c,c.child=l}function gC(l,c,m,w,R){if(l!==null){var L=l.memoizedProps;if(cp(L,w)&&l.ref===c.ref)if(ps=!1,c.pendingProps=w=L,(l.lanes&R)!==0)l.flags&131072&&(ps=!0);else return c.lanes=l.lanes,Pa(l,c,R)}return Uw(l,c,m,w,R)}function yC(l,c,m){var w=c.pendingProps,R=w.children,L=l!==null?l.memoizedState:null;if(w.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},sr(ad,Rs),Rs|=m;else{if(!(m&0x40000000))return l=L!==null?L.baseLanes|m:m,c.lanes=c.childLanes=0x40000000,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,sr(ad,Rs),Rs|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=L!==null?L.baseLanes:m,sr(ad,Rs),Rs|=w}else L!==null?(w=L.baseLanes|m,c.memoizedState=null):w=m,sr(ad,Rs),Rs|=w;return Gi(l,c,R,m),c.child}function bC(l,c){var m=c.ref;(l===null&&m!==null||l!==null&&l.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function Uw(l,c,m,w,R){var L=fs(m)?Ou:Ci.current;return L=Zc(c,L),rd(c,R),m=qw(l,c,m,w,L,R),w=Pw(),l!==null&&!ps?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~R,Pa(l,c,R)):(br&&w&&yw(c),c.flags|=1,Gi(l,c,m,R),c.child)}function vC(l,c,m,w,R){if(fs(m)){var L=!0;bg(c)}else L=!1;if(rd(c,R),c.stateNode===null)Fg(l,c),aC(c,m,w),Bw(c,m,w,R),w=!0;else if(l===null){var Y=c.stateNode,ge=c.memoizedProps;Y.props=ge;var Se=Y.context,He=m.contextType;typeof He=="object"&&He!==null?He=io(He):(He=fs(m)?Ou:Ci.current,He=Zc(c,He));var ht=m.getDerivedStateFromProps,gt=typeof ht=="function"||typeof Y.getSnapshotBeforeUpdate=="function";gt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ge!==w||Se!==He)&&lC(c,Y,w,He),xl=!1;var ft=c.memoizedState;Y.state=ft,kg(c,w,Y,R),Se=c.memoizedState,ge!==w||ft!==Se||ds.current||xl?(typeof ht=="function"&&($w(c,m,ht,w),Se=c.memoizedState),(ge=xl||oC(c,m,ge,w,ft,Se,He))?(gt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(c.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=Se),Y.props=w,Y.state=Se,Y.context=He,w=ge):(typeof Y.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{Y=c.stateNode,Pk(l,c),ge=c.memoizedProps,He=c.type===c.elementType?ge:Io(c.type,ge),Y.props=He,gt=c.pendingProps,ft=Y.context,Se=m.contextType,typeof Se=="object"&&Se!==null?Se=io(Se):(Se=fs(m)?Ou:Ci.current,Se=Zc(c,Se));var Dt=m.getDerivedStateFromProps;(ht=typeof Dt=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ge!==gt||ft!==Se)&&lC(c,Y,w,Se),xl=!1,ft=c.memoizedState,Y.state=ft,kg(c,w,Y,R);var Wt=c.memoizedState;ge!==gt||ft!==Wt||ds.current||xl?(typeof Dt=="function"&&($w(c,m,Dt,w),Wt=c.memoizedState),(He=xl||oC(c,m,He,w,ft,Wt,Se)||!1)?(ht||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(w,Wt,Se),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(w,Wt,Se)),typeof Y.componentDidUpdate=="function"&&(c.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ge===l.memoizedProps&&ft===l.memoizedState||(c.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ge===l.memoizedProps&&ft===l.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=Wt),Y.props=w,Y.state=Wt,Y.context=Se,w=He):(typeof Y.componentDidUpdate!="function"||ge===l.memoizedProps&&ft===l.memoizedState||(c.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ge===l.memoizedProps&&ft===l.memoizedState||(c.flags|=1024),w=!1)}return Vw(l,c,m,w,L,R)}function Vw(l,c,m,w,R,L){bC(l,c);var Y=(c.flags&128)!==0;if(!w&&!Y)return R&&Ek(c,m,!1),Pa(l,c,L);w=c.stateNode,i4.current=c;var ge=Y&&typeof m.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,l!==null&&Y?(c.child=td(c,l.child,null,L),c.child=td(c,null,ge,L)):Gi(l,c,ge,L),c.memoizedState=w.state,R&&Ek(c,m,!0),c.child}function xC(l){var c=l.stateNode;c.pendingContext?_k(l,c.pendingContext,c.pendingContext!==c.context):c.context&&_k(l,c.context,!1),Cw(l,c.containerInfo)}function wC(l,c,m,w,R){return ed(),ww(R),c.flags|=256,Gi(l,c,m,w),c.child}var Hw={dehydrated:null,treeContext:null,retryLane:0};function Gw(l){return{baseLanes:l,cachePool:null,transitions:null}}function _C(l,c,m){var w=c.pendingProps,R=jr.current,L=!1,Y=(c.flags&128)!==0,ge;if((ge=Y)||(ge=l!==null&&l.memoizedState===null?!1:(R&2)!==0),ge?(L=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(R|=1),sr(jr,R&1),l===null)return xw(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(c.mode&1?l.data==="$!"?c.lanes=8:c.lanes=0x40000000:c.lanes=1,null):(Y=w.children,l=w.fallback,L?(w=c.mode,L=c.child,Y={mode:"hidden",children:Y},!(w&1)&&L!==null?(L.childLanes=0,L.pendingProps=Y):L=Kg(Y,w,0,null),l=zu(l,w,m,null),L.return=c,l.return=c,L.sibling=l,c.child=L,c.child.memoizedState=Gw(m),c.memoizedState=Hw,l):Kw(c,Y));if(R=l.memoizedState,R!==null&&(ge=R.dehydrated,ge!==null))return s4(l,c,Y,w,ge,R,m);if(L){L=w.fallback,Y=c.mode,R=l.child,ge=R.sibling;var Se={mode:"hidden",children:w.children};return!(Y&1)&&c.child!==R?(w=c.child,w.childLanes=0,w.pendingProps=Se,c.deletions=null):(w=kl(R,Se),w.subtreeFlags=R.subtreeFlags&0xe00000),ge!==null?L=kl(ge,L):(L=zu(L,Y,m,null),L.flags|=2),L.return=c,w.return=c,w.sibling=L,c.child=w,w=L,L=c.child,Y=l.child.memoizedState,Y=Y===null?Gw(m):{baseLanes:Y.baseLanes|m,cachePool:null,transitions:Y.transitions},L.memoizedState=Y,L.childLanes=l.childLanes&~m,c.memoizedState=Hw,w}return L=l.child,l=L.sibling,w=kl(L,{mode:"visible",children:w.children}),!(c.mode&1)&&(w.lanes=m),w.return=c,w.sibling=null,l!==null&&(m=c.deletions,m===null?(c.deletions=[l],c.flags|=16):m.push(l)),c.child=w,c.memoizedState=null,w}function Kw(l,c){return c=Kg({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function Pg(l,c,m,w){return w!==null&&ww(w),td(c,l.child,null,m),l=Kw(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function s4(l,c,m,w,R,L,Y){if(m)return c.flags&256?(c.flags&=-257,w=zw(Error(n(422))),Pg(l,c,Y,w)):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(L=w.fallback,R=c.mode,w=Kg({mode:"visible",children:w.children},R,0,null),L=zu(L,R,Y,null),L.flags|=2,w.return=c,L.return=c,w.sibling=L,c.child=w,c.mode&1&&td(c,l.child,null,Y),c.child.memoizedState=Gw(Y),c.memoizedState=Hw,L);if(!(c.mode&1))return Pg(l,c,Y,null);if(R.data==="$!"){if(w=R.nextSibling&&R.nextSibling.dataset,w)var ge=w.dgst;return w=ge,L=Error(n(419)),w=zw(L,w,void 0),Pg(l,c,Y,w)}if(ge=(Y&l.childLanes)!==0,ps||ge){if(w=pi,w!==null){switch(Y&-Y){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:R=32;break;case 0x20000000:R=0x10000000;break;default:R=0}R=R&(w.suspendedLanes|Y)?0:R,R!==0&&R!==L.retryLane&&(L.retryLane=R,Aa(l,R),Co(w,l,R,-1))}return c_(),w=zw(Error(n(421))),Pg(l,c,Y,w)}return R.data==="$?"?(c.flags|=128,c.child=l.child,c=b4.bind(null,l),R._reactRetry=c,null):(l=L.treeContext,js=gl(R.nextSibling),Ts=c,br=!0,Eo=null,l!==null&&(no[ro++]=Ra,no[ro++]=Oa,no[ro++]=Au,Ra=l.id,Oa=l.overflow,Au=c),c=Kw(c,w.children),c.flags|=4096,c)}function SC(l,c,m){l.lanes|=c;var w=l.alternate;w!==null&&(w.lanes|=c),Iw(l.return,c,m)}function Qw(l,c,m,w,R){var L=l.memoizedState;L===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:R}:(L.isBackwards=c,L.rendering=null,L.renderingStartTime=0,L.last=w,L.tail=m,L.tailMode=R)}function EC(l,c,m){var w=c.pendingProps,R=w.revealOrder,L=w.tail;if(Gi(l,c,w.children,m),w=jr.current,w&2)w=w&1|2,c.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&SC(l,m,c);else if(l.tag===19)SC(l,m,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}w&=1}if(sr(jr,w),!(c.mode&1))c.memoizedState=null;else switch(R){case"forwards":for(m=c.child,R=null;m!==null;)l=m.alternate,l!==null&&Cg(l)===null&&(R=m),m=m.sibling;m=R,m===null?(R=c.child,c.child=null):(R=m.sibling,m.sibling=null),Qw(c,!1,R,m,L);break;case"backwards":for(m=null,R=c.child,c.child=null;R!==null;){if(l=R.alternate,l!==null&&Cg(l)===null){c.child=R;break}l=R.sibling,R.sibling=m,m=R,R=l}Qw(c,!0,m,null,L);break;case"together":Qw(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Fg(l,c){!(c.mode&1)&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function Pa(l,c,m){if(l!==null&&(c.dependencies=l.dependencies),Lu|=c.lanes,!(m&c.childLanes))return null;if(l!==null&&c.child!==l.child)throw Error(n(153));if(c.child!==null){for(l=c.child,m=kl(l,l.pendingProps),c.child=m,m.return=c;l.sibling!==null;)l=l.sibling,m=m.sibling=kl(l,l.pendingProps),m.return=c;m.sibling=null}return c.child}function o4(l,c,m){switch(c.tag){case 3:xC(c),ed();break;case 5:Lk(c);break;case 1:fs(c.type)&&bg(c);break;case 4:Cw(c,c.stateNode.containerInfo);break;case 10:var w=c.type._context,R=c.memoizedProps.value;sr(Eg,w._currentValue),w._currentValue=R;break;case 13:if(w=c.memoizedState,w!==null)return w.dehydrated!==null?(sr(jr,jr.current&1),c.flags|=128,null):m&c.child.childLanes?_C(l,c,m):(sr(jr,jr.current&1),l=Pa(l,c,m),l!==null?l.sibling:null);sr(jr,jr.current&1);break;case 19:if(w=(m&c.childLanes)!==0,l.flags&128){if(w)return EC(l,c,m);c.flags|=128}if(R=c.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),sr(jr,jr.current),w)break;return null;case 22:case 23:return c.lanes=0,yC(l,c,m)}return Pa(l,c,m)}var IC,Jw,NC,kC;IC=function(l,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)l.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Jw=function(){},NC=function(l,c,m,w){var R=l.memoizedProps;if(R!==w){l=c.stateNode,Fu(ea.current);var L=null;switch(m){case"input":R=Et(l,R),w=Et(l,w),L=[];break;case"select":R=oe({},R,{value:void 0}),w=oe({},w,{value:void 0}),L=[];break;case"textarea":R=Ve(l,R),w=Ve(l,w),L=[];break;default:typeof R.onClick!="function"&&typeof w.onClick=="function"&&(l.onclick=mg)}as(m,w);var Y;m=null;for(He in R)if(!w.hasOwnProperty(He)&&R.hasOwnProperty(He)&&R[He]!=null)if(He==="style"){var ge=R[He];for(Y in ge)ge.hasOwnProperty(Y)&&(m||(m={}),m[Y]="")}else He!=="dangerouslySetInnerHTML"&&He!=="children"&&He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&He!=="autoFocus"&&(i.hasOwnProperty(He)?L||(L=[]):(L=L||[]).push(He,null));for(He in w){var Se=w[He];if(ge=R?.[He],w.hasOwnProperty(He)&&Se!==ge&&(Se!=null||ge!=null))if(He==="style")if(ge){for(Y in ge)!ge.hasOwnProperty(Y)||Se&&Se.hasOwnProperty(Y)||(m||(m={}),m[Y]="");for(Y in Se)Se.hasOwnProperty(Y)&&ge[Y]!==Se[Y]&&(m||(m={}),m[Y]=Se[Y])}else m||(L||(L=[]),L.push(He,m)),m=Se;else He==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,ge=ge?ge.__html:void 0,Se!=null&&ge!==Se&&(L=L||[]).push(He,Se)):He==="children"?typeof Se!="string"&&typeof Se!="number"||(L=L||[]).push(He,""+Se):He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&(i.hasOwnProperty(He)?(Se!=null&&He==="onScroll"&&pr("scroll",l),L||ge===Se||(L=[])):(L=L||[]).push(He,Se))}m&&(L=L||[]).push("style",m);var He=L;(c.updateQueue=He)&&(c.flags|=4)}},kC=function(l,c,m,w){m!==w&&(c.flags|=4)};function Ip(l,c){if(!br)switch(l.tailMode){case"hidden":c=l.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:w.sibling=null}}function ji(l){var c=l.alternate!==null&&l.alternate.child===l.child,m=0,w=0;if(c)for(var R=l.child;R!==null;)m|=R.lanes|R.childLanes,w|=R.subtreeFlags&0xe00000,w|=R.flags&0xe00000,R.return=l,R=R.sibling;else for(R=l.child;R!==null;)m|=R.lanes|R.childLanes,w|=R.subtreeFlags,w|=R.flags,R.return=l,R=R.sibling;return l.subtreeFlags|=w,l.childLanes=m,c}function a4(l,c,m){var w=c.pendingProps;switch(bw(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(c),null;case 1:return fs(c.type)&&yg(),ji(c),null;case 3:return w=c.stateNode,id(),hr(ds),hr(Ci),Rw(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(l===null||l.child===null)&&(_g(c)?c.flags|=4:l===null||l.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,Eo!==null&&(a_(Eo),Eo=null))),Jw(l,c),ji(c),null;case 5:Tw(c);var R=Fu(xp.current);if(m=c.type,l!==null&&c.stateNode!=null)NC(l,c,m,w,R),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(n(166));return ji(c),null}if(l=Fu(ea.current),_g(c)){w=c.stateNode,m=c.type;var L=c.memoizedProps;switch(w[Xo]=c,w[mp]=L,l=(c.mode&1)!==0,m){case"dialog":pr("cancel",w),pr("close",w);break;case"iframe":case"object":case"embed":pr("load",w);break;case"video":case"audio":for(R=0;R<fp.length;R++)pr(fp[R],w);break;case"source":pr("error",w);break;case"img":case"image":case"link":pr("error",w),pr("load",w);break;case"details":pr("toggle",w);break;case"input":At(w,L),pr("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!L.multiple},pr("invalid",w);break;case"textarea":rt(w,L),pr("invalid",w)}as(m,L),R=null;for(var Y in L)if(L.hasOwnProperty(Y)){var ge=L[Y];Y==="children"?typeof ge=="string"?w.textContent!==ge&&(L.suppressHydrationWarning!==!0&&hg(w.textContent,ge,l),R=["children",ge]):typeof ge=="number"&&w.textContent!==""+ge&&(L.suppressHydrationWarning!==!0&&hg(w.textContent,ge,l),R=["children",""+ge]):i.hasOwnProperty(Y)&&ge!=null&&Y==="onScroll"&&pr("scroll",w)}switch(m){case"input":Xe(w),xe(w,L,!0);break;case"textarea":Xe(w),ct(w);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(w.onclick=mg)}w=R,c.updateQueue=w,w!==null&&(c.flags|=4)}else{Y=R.nodeType===9?R:R.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Yt(m)),l==="http://www.w3.org/1999/xhtml"?m==="script"?(l=Y.createElement("div"),l.innerHTML="<script></script>",l=l.removeChild(l.firstChild)):typeof w.is=="string"?l=Y.createElement(m,{is:w.is}):(l=Y.createElement(m),m==="select"&&(Y=l,w.multiple?Y.multiple=!0:w.size&&(Y.size=w.size))):l=Y.createElementNS(l,m),l[Xo]=c,l[mp]=w,IC(l,c,!1,!1),c.stateNode=l;e:{switch(Y=ls(m,w),m){case"dialog":pr("cancel",l),pr("close",l),R=w;break;case"iframe":case"object":case"embed":pr("load",l),R=w;break;case"video":case"audio":for(R=0;R<fp.length;R++)pr(fp[R],l);R=w;break;case"source":pr("error",l),R=w;break;case"img":case"image":case"link":pr("error",l),pr("load",l),R=w;break;case"details":pr("toggle",l),R=w;break;case"input":At(l,w),R=Et(l,w),pr("invalid",l);break;case"option":R=w;break;case"select":l._wrapperState={wasMultiple:!!w.multiple},R=oe({},w,{value:void 0}),pr("invalid",l);break;case"textarea":rt(l,w),R=Ve(l,w),pr("invalid",l);break;default:R=w}as(m,R),ge=R;for(L in ge)if(ge.hasOwnProperty(L)){var Se=ge[L];L==="style"?en(l,Se):L==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&dr(l,Se)):L==="children"?typeof Se=="string"?(m!=="textarea"||Se!=="")&&Bn(l,Se):typeof Se=="number"&&Bn(l,""+Se):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(i.hasOwnProperty(L)?Se!=null&&L==="onScroll"&&pr("scroll",l):Se!=null&&C(l,L,Se,Y))}switch(m){case"input":Xe(l),xe(l,w,!1);break;case"textarea":Xe(l),ct(l);break;case"option":w.value!=null&&l.setAttribute("value",""+Re(w.value));break;case"select":l.multiple=!!w.multiple,L=w.value,L!=null?qe(l,!!w.multiple,L,!1):w.defaultValue!=null&&qe(l,!!w.multiple,w.defaultValue,!0);break;default:typeof R.onClick=="function"&&(l.onclick=mg)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return ji(c),null;case 6:if(l&&c.stateNode!=null)kC(l,c,l.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(n(166));if(m=Fu(xp.current),Fu(ea.current),_g(c)){if(w=c.stateNode,m=c.memoizedProps,w[Xo]=c,(L=w.nodeValue!==m)&&(l=Ts,l!==null))switch(l.tag){case 3:hg(w.nodeValue,m,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&hg(w.nodeValue,m,(l.mode&1)!==0)}L&&(c.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[Xo]=c,c.stateNode=w}return ji(c),null;case 13:if(hr(jr),w=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(br&&js!==null&&c.mode&1&&!(c.flags&128))jk(),ed(),c.flags|=98560,L=!1;else if(L=_g(c),w!==null&&w.dehydrated!==null){if(l===null){if(!L)throw Error(n(318));if(L=c.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(n(317));L[Xo]=c}else ed(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;ji(c),L=!1}else Eo!==null&&(a_(Eo),Eo=null),L=!0;if(!L)return c.flags&65536?c:null}return c.flags&128?(c.lanes=m,c):(w=w!==null,w!==(l!==null&&l.memoizedState!==null)&&w&&(c.child.flags|=8192,c.mode&1&&(l===null||jr.current&1?ai===0&&(ai=3):c_())),c.updateQueue!==null&&(c.flags|=4),ji(c),null);case 4:return id(),Jw(l,c),l===null&&pp(c.stateNode.containerInfo),ji(c),null;case 10:return Ew(c.type._context),ji(c),null;case 17:return fs(c.type)&&yg(),ji(c),null;case 19:if(hr(jr),L=c.memoizedState,L===null)return ji(c),null;if(w=(c.flags&128)!==0,Y=L.rendering,Y===null)if(w)Ip(L,!1);else{if(ai!==0||l!==null&&l.flags&128)for(l=c.child;l!==null;){if(Y=Cg(l),Y!==null){for(c.flags|=128,Ip(L,!1),w=Y.updateQueue,w!==null&&(c.updateQueue=w,c.flags|=4),c.subtreeFlags=0,w=m,m=c.child;m!==null;)L=m,l=w,L.flags&=0xe00002,Y=L.alternate,Y===null?(L.childLanes=0,L.lanes=l,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=Y.childLanes,L.lanes=Y.lanes,L.child=Y.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=Y.memoizedProps,L.memoizedState=Y.memoizedState,L.updateQueue=Y.updateQueue,L.type=Y.type,l=Y.dependencies,L.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),m=m.sibling;return sr(jr,jr.current&1|2),c.child}l=l.sibling}L.tail!==null&&fr()>ld&&(c.flags|=128,w=!0,Ip(L,!1),c.lanes=4194304)}else{if(!w)if(l=Cg(Y),l!==null){if(c.flags|=128,w=!0,m=l.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),Ip(L,!0),L.tail===null&&L.tailMode==="hidden"&&!Y.alternate&&!br)return ji(c),null}else 2*fr()-L.renderingStartTime>ld&&m!==0x40000000&&(c.flags|=128,w=!0,Ip(L,!1),c.lanes=4194304);L.isBackwards?(Y.sibling=c.child,c.child=Y):(m=L.last,m!==null?m.sibling=Y:c.child=Y,L.last=Y)}return L.tail!==null?(c=L.tail,L.rendering=c,L.tail=c.sibling,L.renderingStartTime=fr(),c.sibling=null,m=jr.current,sr(jr,w?m&1|2:m&1),c):(ji(c),null);case 22:case 23:return u_(),w=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==w&&(c.flags|=8192),w&&c.mode&1?Rs&0x40000000&&(ji(c),c.subtreeFlags&6&&(c.flags|=8192)):ji(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function l4(l,c){switch(bw(c),c.tag){case 1:return fs(c.type)&&yg(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return id(),hr(ds),hr(Ci),Rw(),l=c.flags,l&65536&&!(l&128)?(c.flags=l&-65537|128,c):null;case 5:return Tw(c),null;case 13:if(hr(jr),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(n(340));ed()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return hr(jr),null;case 4:return id(),null;case 10:return Ew(c.type._context),null;case 22:case 23:return u_(),null;case 24:return null;default:return null}}var Dg=!1,Ri=!1,u4=typeof WeakSet=="function"?WeakSet:Set,zt=null;function od(l,c){var m=l.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){qr(l,c,w)}else m.current=null}function Zw(l,c,m){try{m()}catch(w){qr(l,c,w)}}var CC=!1;function c4(l,c){if(uw=Qe,l=ok(),tw(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var R=w.anchorOffset,L=w.focusNode;w=w.focusOffset;try{m.nodeType,L.nodeType}catch{m=null;break e}var Y=0,ge=-1,Se=-1,He=0,ht=0,gt=l,ft=null;t:for(;;){for(var Dt;gt!==m||R!==0&&gt.nodeType!==3||(ge=Y+R),gt!==L||w!==0&&gt.nodeType!==3||(Se=Y+w),gt.nodeType===3&&(Y+=gt.nodeValue.length),(Dt=gt.firstChild)!==null;)ft=gt,gt=Dt;for(;;){if(gt===l)break t;if(ft===m&&++He===R&&(ge=Y),ft===L&&++ht===w&&(Se=Y),(Dt=gt.nextSibling)!==null)break;gt=ft,ft=gt.parentNode}gt=Dt}m=ge===-1||Se===-1?null:{start:ge,end:Se}}else m=null}m=m||{start:0,end:0}}else m=null;for(cw={focusedElem:l,selectionRange:m},Qe=!1,zt=c;zt!==null;)if(c=zt,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,zt=l;else for(;zt!==null;){c=zt;try{var Wt=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Wt!==null){var Ht=Wt.memoizedProps,Vr=Wt.memoizedState,Fe=c.stateNode,Ce=Fe.getSnapshotBeforeUpdate(c.elementType===c.type?Ht:Io(c.type,Ht),Vr);Fe.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:var $e=c.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(vt){qr(c,c.return,vt)}if(l=c.sibling,l!==null){l.return=c.return,zt=l;break}zt=c.return}return Wt=CC,CC=!1,Wt}function Np(l,c,m){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var R=w=w.next;do{if((R.tag&l)===l){var L=R.destroy;R.destroy=void 0,L!==void 0&&Zw(c,m,L)}R=R.next}while(R!==w)}}function Lg(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&l)===l){var w=m.create;m.destroy=w()}m=m.next}while(m!==c)}}function Yw(l){var c=l.ref;if(c!==null){var m=l.stateNode;switch(l.tag){case 5:l=m;break;default:l=m}typeof c=="function"?c(l):c.current=l}}function TC(l){var c=l.alternate;c!==null&&(l.alternate=null,TC(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&(delete c[Xo],delete c[mp],delete c[hw],delete c[HB],delete c[GB])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function jC(l){return l.tag===5||l.tag===3||l.tag===4}function RC(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||jC(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Xw(l,c,m){var w=l.tag;if(w===5||w===6)l=l.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(l,c):m.insertBefore(l,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(l,m)):(c=m,c.appendChild(l)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=mg));else if(w!==4&&(l=l.child,l!==null))for(Xw(l,c,m),l=l.sibling;l!==null;)Xw(l,c,m),l=l.sibling}function e_(l,c,m){var w=l.tag;if(w===5||w===6)l=l.stateNode,c?m.insertBefore(l,c):m.appendChild(l);else if(w!==4&&(l=l.child,l!==null))for(e_(l,c,m),l=l.sibling;l!==null;)e_(l,c,m),l=l.sibling}var xi=null,No=!1;function _l(l,c,m){for(m=m.child;m!==null;)OC(l,c,m),m=m.sibling}function OC(l,c,m){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(fl,m)}catch{}switch(m.tag){case 5:Ri||od(m,c);case 6:var w=xi,R=No;xi=null,_l(l,c,m),xi=w,No=R,xi!==null&&(No?(l=xi,m=m.stateNode,l.nodeType===8?l.parentNode.removeChild(m):l.removeChild(m)):xi.removeChild(m.stateNode));break;case 18:xi!==null&&(No?(l=xi,m=m.stateNode,l.nodeType===8?pw(l.parentNode,m):l.nodeType===1&&pw(l,m),Te(l)):pw(xi,m.stateNode));break;case 4:w=xi,R=No,xi=m.stateNode.containerInfo,No=!0,_l(l,c,m),xi=w,No=R;break;case 0:case 11:case 14:case 15:if(!Ri&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){R=w=w.next;do{var L=R,Y=L.destroy;L=L.tag,Y!==void 0&&(L&2||L&4)&&Zw(m,c,Y),R=R.next}while(R!==w)}_l(l,c,m);break;case 1:if(!Ri&&(od(m,c),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(ge){qr(m,c,ge)}_l(l,c,m);break;case 21:_l(l,c,m);break;case 22:m.mode&1?(Ri=(w=Ri)||m.memoizedState!==null,_l(l,c,m),Ri=w):_l(l,c,m);break;default:_l(l,c,m)}}function AC(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var m=l.stateNode;m===null&&(m=l.stateNode=new u4),c.forEach(function(w){var R=v4.bind(null,l,w);m.has(w)||(m.add(w),w.then(R,R))})}}function ko(l,c){var m=c.deletions;if(m!==null)for(var w=0;w<m.length;w++){var R=m[w];try{var L=l,Y=c,ge=Y;e:for(;ge!==null;){switch(ge.tag){case 5:xi=ge.stateNode,No=!1;break e;case 3:xi=ge.stateNode.containerInfo,No=!0;break e;case 4:xi=ge.stateNode.containerInfo,No=!0;break e}ge=ge.return}if(xi===null)throw Error(n(160));OC(L,Y,R),xi=null,No=!1;var Se=R.alternate;Se!==null&&(Se.return=null),R.return=null}catch(He){qr(R,c,He)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)qC(c,l),c=c.sibling}function qC(l,c){var m=l.alternate,w=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(ko(c,l),na(l),w&4){try{Np(3,l,l.return),Lg(3,l)}catch(Ht){qr(l,l.return,Ht)}try{Np(5,l,l.return)}catch(Ht){qr(l,l.return,Ht)}}break;case 1:ko(c,l),na(l),w&512&&m!==null&&od(m,m.return);break;case 5:if(ko(c,l),na(l),w&512&&m!==null&&od(m,m.return),l.flags&32){var R=l.stateNode;try{Bn(R,"")}catch(Ht){qr(l,l.return,Ht)}}if(w&4&&(R=l.stateNode,R!=null)){var L=l.memoizedProps,Y=m!==null?m.memoizedProps:L,ge=l.type,Se=l.updateQueue;if(l.updateQueue=null,Se!==null)try{ge==="input"&&L.type==="radio"&&L.name!=null&&Gt(R,L),ls(ge,Y);var He=ls(ge,L);for(Y=0;Y<Se.length;Y+=2){var ht=Se[Y],gt=Se[Y+1];ht==="style"?en(R,gt):ht==="dangerouslySetInnerHTML"?dr(R,gt):ht==="children"?Bn(R,gt):C(R,ht,gt,He)}switch(ge){case"input":ln(R,L);break;case"textarea":Me(R,L);break;case"select":var ft=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!L.multiple;var Dt=L.value;Dt!=null?qe(R,!!L.multiple,Dt,!1):ft!==!!L.multiple&&(L.defaultValue!=null?qe(R,!!L.multiple,L.defaultValue,!0):qe(R,!!L.multiple,L.multiple?[]:"",!1))}R[mp]=L}catch(Ht){qr(l,l.return,Ht)}}break;case 6:if(ko(c,l),na(l),w&4){if(l.stateNode===null)throw Error(n(162));R=l.stateNode,L=l.memoizedProps;try{R.nodeValue=L}catch(Ht){qr(l,l.return,Ht)}}break;case 3:if(ko(c,l),na(l),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Te(c.containerInfo)}catch(Ht){qr(l,l.return,Ht)}break;case 4:ko(c,l),na(l);break;case 13:ko(c,l),na(l),R=l.child,R.flags&8192&&(L=R.memoizedState!==null,R.stateNode.isHidden=L,!L||R.alternate!==null&&R.alternate.memoizedState!==null||(r_=fr())),w&4&&AC(l);break;case 22:if(ht=m!==null&&m.memoizedState!==null,l.mode&1?(Ri=(He=Ri)||ht,ko(c,l),Ri=He):ko(c,l),na(l),w&8192){if(He=l.memoizedState!==null,(l.stateNode.isHidden=He)&&!ht&&l.mode&1)for(zt=l,ht=l.child;ht!==null;){for(gt=zt=ht;zt!==null;){switch(ft=zt,Dt=ft.child,ft.tag){case 0:case 11:case 14:case 15:Np(4,ft,ft.return);break;case 1:od(ft,ft.return);var Wt=ft.stateNode;if(typeof Wt.componentWillUnmount=="function"){w=ft,m=ft.return;try{c=w,Wt.props=c.memoizedProps,Wt.state=c.memoizedState,Wt.componentWillUnmount()}catch(Ht){qr(w,m,Ht)}}break;case 5:od(ft,ft.return);break;case 22:if(ft.memoizedState!==null){DC(gt);continue}}Dt!==null?(Dt.return=ft,zt=Dt):DC(gt)}ht=ht.sibling}e:for(ht=null,gt=l;;){if(gt.tag===5){if(ht===null){ht=gt;try{R=gt.stateNode,He?(L=R.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(ge=gt.stateNode,Se=gt.memoizedProps.style,Y=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,ge.style.display=Cr("display",Y))}catch(Ht){qr(l,l.return,Ht)}}}else if(gt.tag===6){if(ht===null)try{gt.stateNode.nodeValue=He?"":gt.memoizedProps}catch(Ht){qr(l,l.return,Ht)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===l)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===l)break e;for(;gt.sibling===null;){if(gt.return===null||gt.return===l)break e;ht===gt&&(ht=null),gt=gt.return}ht===gt&&(ht=null),gt.sibling.return=gt.return,gt=gt.sibling}}break;case 19:ko(c,l),na(l),w&4&&AC(l);break;case 21:break;default:ko(c,l),na(l)}}function na(l){var c=l.flags;if(c&2){try{e:{for(var m=l.return;m!==null;){if(jC(m)){var w=m;break e}m=m.return}throw Error(n(160))}switch(w.tag){case 5:var R=w.stateNode;w.flags&32&&(Bn(R,""),w.flags&=-33);var L=RC(l);e_(l,L,R);break;case 3:case 4:var Y=w.stateNode.containerInfo,ge=RC(l);Xw(l,ge,Y);break;default:throw Error(n(161))}}catch(Se){qr(l,l.return,Se)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function d4(l,c,m){zt=l,PC(l)}function PC(l,c,m){for(var w=(l.mode&1)!==0;zt!==null;){var R=zt,L=R.child;if(R.tag===22&&w){var Y=R.memoizedState!==null||Dg;if(!Y){var ge=R.alternate,Se=ge!==null&&ge.memoizedState!==null||Ri;ge=Dg;var He=Ri;if(Dg=Y,(Ri=Se)&&!He)for(zt=R;zt!==null;)Y=zt,Se=Y.child,Y.tag===22&&Y.memoizedState!==null?LC(R):Se!==null?(Se.return=Y,zt=Se):LC(R);for(;L!==null;)zt=L,PC(L),L=L.sibling;zt=R,Dg=ge,Ri=He}FC(l)}else R.subtreeFlags&8772&&L!==null?(L.return=R,zt=L):FC(l)}}function FC(l){for(;zt!==null;){var c=zt;if(c.flags&8772){var m=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:Ri||Lg(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!Ri)if(m===null)w.componentDidMount();else{var R=c.elementType===c.type?m.memoizedProps:Io(c.type,m.memoizedProps);w.componentDidUpdate(R,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var L=c.updateQueue;L!==null&&Dk(c,L,w);break;case 3:var Y=c.updateQueue;if(Y!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}Dk(c,Y,m)}break;case 5:var ge=c.stateNode;if(m===null&&c.flags&4){m=ge;var Se=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&m.focus();break;case"img":Se.src&&(m.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var He=c.alternate;if(He!==null){var ht=He.memoizedState;if(ht!==null){var gt=ht.dehydrated;gt!==null&&Te(gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ri||c.flags&512&&Yw(c)}catch(ft){qr(c,c.return,ft)}}if(c===l){zt=null;break}if(m=c.sibling,m!==null){m.return=c.return,zt=m;break}zt=c.return}}function DC(l){for(;zt!==null;){var c=zt;if(c===l){zt=null;break}var m=c.sibling;if(m!==null){m.return=c.return,zt=m;break}zt=c.return}}function LC(l){for(;zt!==null;){var c=zt;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{Lg(4,c)}catch(Se){qr(c,m,Se)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var R=c.return;try{w.componentDidMount()}catch(Se){qr(c,R,Se)}}var L=c.return;try{Yw(c)}catch(Se){qr(c,L,Se)}break;case 5:var Y=c.return;try{Yw(c)}catch(Se){qr(c,Y,Se)}}}catch(Se){qr(c,c.return,Se)}if(c===l){zt=null;break}var ge=c.sibling;if(ge!==null){ge.return=c.return,zt=ge;break}zt=c.return}}var f4=Math.ceil,Mg=j.ReactCurrentDispatcher,t_=j.ReactCurrentOwner,oo=j.ReactCurrentBatchConfig,Dn=0,pi=null,Xr=null,wi=0,Rs=0,ad=yl(0),ai=0,kp=null,Lu=0,$g=0,n_=0,Cp=null,hs=null,r_=0,ld=1/0,Fa=null,Bg=!1,i_=null,Sl=null,zg=!1,El=null,Wg=0,Tp=0,s_=null,Ug=-1,Vg=0;function Ki(){return Dn&6?fr():Ug!==-1?Ug:Ug=fr()}function Il(l){return l.mode&1?Dn&2&&wi!==0?wi&-wi:QB.transition!==null?(Vg===0&&(Vg=og()),Vg):(l=zn,l!==0||(l=window.event,l=l===void 0?16:Ee(l.type)),l):1}function Co(l,c,m,w){if(50<Tp)throw Tp=0,s_=null,Error(n(185));Tu(l,m,w),(!(Dn&2)||l!==pi)&&(l===pi&&(!(Dn&2)&&($g|=m),ai===4&&Nl(l,wi)),ms(l,w),m===1&&Dn===0&&!(c.mode&1)&&(ld=fr()+500,vg&&vl()))}function ms(l,c){var m=l.callbackNode;Gx(l,c);var w=hl(l,l===pi?wi:0);if(w===0)m!==null&&Nu(m),l.callbackNode=null,l.callbackPriority=0;else if(c=w&-w,l.callbackPriority!==c){if(m!=null&&Nu(m),c===1)l.tag===0?KB($C.bind(null,l)):Ik($C.bind(null,l)),UB(function(){!(Dn&6)&&vl()}),m=null;else{switch(ag(w)){case 1:m=ku;break;case 4:m=Wc;break;case 16:m=dl;break;case 0x20000000:m=Cu;break;default:m=dl}m=KC(m,MC.bind(null,l))}l.callbackPriority=c,l.callbackNode=m}}function MC(l,c){if(Ug=-1,Vg=0,Dn&6)throw Error(n(327));var m=l.callbackNode;if(ud()&&l.callbackNode!==m)return null;var w=hl(l,l===pi?wi:0);if(w===0)return null;if(w&30||w&l.expiredLanes||c)c=Hg(l,w);else{c=w;var R=Dn;Dn|=2;var L=zC();(pi!==l||wi!==c)&&(Fa=null,ld=fr()+500,$u(l,c));do try{m4();break}catch(ge){BC(l,ge)}while(!0);Sw(),Mg.current=L,Dn=R,Xr!==null?c=0:(pi=null,wi=0,c=ai)}if(c!==0){if(c===2&&(R=ep(l),R!==0&&(w=R,c=o_(l,R))),c===1)throw m=kp,$u(l,0),Nl(l,w),ms(l,fr()),m;if(c===6)Nl(l,w);else{if(R=l.current.alternate,!(w&30)&&!p4(R)&&(c=Hg(l,w),c===2&&(L=ep(l),L!==0&&(w=L,c=o_(l,L))),c===1))throw m=kp,$u(l,0),Nl(l,w),ms(l,fr()),m;switch(l.finishedWork=R,l.finishedLanes=w,c){case 0:case 1:throw Error(n(345));case 2:Bu(l,hs,Fa);break;case 3:if(Nl(l,w),(w&0x7c00000)===w&&(c=r_+500-fr(),10<c)){if(hl(l,0)!==0)break;if(R=l.suspendedLanes,(R&w)!==w){Ki(),l.pingedLanes|=l.suspendedLanes&R;break}l.timeoutHandle=fw(Bu.bind(null,l,hs,Fa),c);break}Bu(l,hs,Fa);break;case 4:if(Nl(l,w),(w&4194240)===w)break;for(c=l.eventTimes,R=-1;0<w;){var Y=31-ki(w);L=1<<Y,Y=c[Y],Y>R&&(R=Y),w&=~L}if(w=R,w=fr()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*f4(w/1960))-w,10<w){l.timeoutHandle=fw(Bu.bind(null,l,hs,Fa),w);break}Bu(l,hs,Fa);break;case 5:Bu(l,hs,Fa);break;default:throw Error(n(329))}}}return ms(l,fr()),l.callbackNode===m?MC.bind(null,l):null}function o_(l,c){var m=Cp;return l.current.memoizedState.isDehydrated&&($u(l,c).flags|=256),l=Hg(l,c),l!==2&&(c=hs,hs=m,c!==null&&a_(c)),l}function a_(l){hs===null?hs=l:hs.push.apply(hs,l)}function p4(l){for(var c=l;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var R=m[w],L=R.getSnapshot;R=R.value;try{if(!So(L(),R))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Nl(l,c){for(c&=~n_,c&=~$g,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var m=31-ki(c),w=1<<m;l[m]=-1,c&=~w}}function $C(l){if(Dn&6)throw Error(n(327));ud();var c=hl(l,0);if(!(c&1))return ms(l,fr()),null;var m=Hg(l,c);if(l.tag!==0&&m===2){var w=ep(l);w!==0&&(c=w,m=o_(l,w))}if(m===1)throw m=kp,$u(l,0),Nl(l,c),ms(l,fr()),m;if(m===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,Bu(l,hs,Fa),ms(l,fr()),null}function l_(l,c){var m=Dn;Dn|=1;try{return l(c)}finally{Dn=m,Dn===0&&(ld=fr()+500,vg&&vl())}}function Mu(l){El!==null&&El.tag===0&&!(Dn&6)&&ud();var c=Dn;Dn|=1;var m=oo.transition,w=zn;try{if(oo.transition=null,zn=1,l)return l()}finally{zn=w,oo.transition=m,Dn=c,!(Dn&6)&&vl()}}function u_(){Rs=ad.current,hr(ad)}function $u(l,c){l.finishedWork=null,l.finishedLanes=0;var m=l.timeoutHandle;if(m!==-1&&(l.timeoutHandle=-1,WB(m)),Xr!==null)for(m=Xr.return;m!==null;){var w=m;switch(bw(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&yg();break;case 3:id(),hr(ds),hr(Ci),Rw();break;case 5:Tw(w);break;case 4:id();break;case 13:hr(jr);break;case 19:hr(jr);break;case 10:Ew(w.type._context);break;case 22:case 23:u_()}m=m.return}if(pi=l,Xr=l=kl(l.current,null),wi=Rs=c,ai=0,kp=null,n_=$g=Lu=0,hs=Cp=null,Pu!==null){for(c=0;c<Pu.length;c++)if(m=Pu[c],w=m.interleaved,w!==null){m.interleaved=null;var R=w.next,L=m.pending;if(L!==null){var Y=L.next;L.next=R,w.next=Y}m.pending=w}Pu=null}return l}function BC(l,c){do{var m=Xr;try{if(Sw(),Tg.current=Ag,jg){for(var w=Rr.memoizedState;w!==null;){var R=w.queue;R!==null&&(R.pending=null),w=w.next}jg=!1}if(Du=0,fi=oi=Rr=null,wp=!1,_p=0,t_.current=null,m===null||m.return===null){ai=1,kp=c,Xr=null;break}e:{var L=l,Y=m.return,ge=m,Se=c;if(c=wi,ge.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var He=Se,ht=ge,gt=ht.tag;if(!(ht.mode&1)&&(gt===0||gt===11||gt===15)){var ft=ht.alternate;ft?(ht.updateQueue=ft.updateQueue,ht.memoizedState=ft.memoizedState,ht.lanes=ft.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var Dt=fC(Y);if(Dt!==null){Dt.flags&=-257,pC(Dt,Y,ge,L,c),Dt.mode&1&&dC(L,He,c),c=Dt,Se=He;var Wt=c.updateQueue;if(Wt===null){var Ht=new Set;Ht.add(Se),c.updateQueue=Ht}else Wt.add(Se);break e}else{if(!(c&1)){dC(L,He,c),c_();break e}Se=Error(n(426))}}else if(br&&ge.mode&1){var Vr=fC(Y);if(Vr!==null){!(Vr.flags&65536)&&(Vr.flags|=256),pC(Vr,Y,ge,L,c),ww(sd(Se,ge));break e}}L=Se=sd(Se,ge),ai!==4&&(ai=2),Cp===null?Cp=[L]:Cp.push(L),L=Y;do{switch(L.tag){case 3:L.flags|=65536,c&=-c,L.lanes|=c;var Fe=uC(L,Se,c);Fk(L,Fe);break e;case 1:ge=Se;var Ce=L.type,$e=L.stateNode;if(!(L.flags&128)&&(typeof Ce.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(Sl===null||!Sl.has($e)))){L.flags|=65536,c&=-c,L.lanes|=c;var vt=cC(L,ge,c);Fk(L,vt);break e}}L=L.return}while(L!==null)}UC(m)}catch(Kt){c=Kt,Xr===m&&m!==null&&(Xr=m=m.return);continue}break}while(!0)}function zC(){var l=Mg.current;return Mg.current=Ag,l===null?Ag:l}function c_(){(ai===0||ai===3||ai===2)&&(ai=4),pi===null||!(Lu&0xfffffff)&&!($g&0xfffffff)||Nl(pi,wi)}function Hg(l,c){var m=Dn;Dn|=2;var w=zC();(pi!==l||wi!==c)&&(Fa=null,$u(l,c));do try{h4();break}catch(R){BC(l,R)}while(!0);if(Sw(),Dn=m,Mg.current=w,Xr!==null)throw Error(n(261));return pi=null,wi=0,ai}function h4(){for(;Xr!==null;)WC(Xr)}function m4(){for(;Xr!==null&&!zc();)WC(Xr)}function WC(l){var c=GC(l.alternate,l,Rs);l.memoizedProps=l.pendingProps,c===null?UC(l):Xr=c,t_.current=null}function UC(l){var c=l;do{var m=c.alternate;if(l=c.return,c.flags&32768){if(m=l4(m,c),m!==null){m.flags&=32767,Xr=m;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{ai=6,Xr=null;return}}else if(m=a4(m,c,Rs),m!==null){Xr=m;return}if(c=c.sibling,c!==null){Xr=c;return}Xr=c=l}while(c!==null);ai===0&&(ai=5)}function Bu(l,c,m){var w=zn,R=oo.transition;try{oo.transition=null,zn=1,g4(l,c,m,w)}finally{oo.transition=R,zn=w}return null}function g4(l,c,m,w){do ud();while(El!==null);if(Dn&6)throw Error(n(327));m=l.finishedWork;var R=l.finishedLanes;if(m===null)return null;if(l.finishedWork=null,l.finishedLanes=0,m===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var L=m.lanes|m.childLanes;if(Kx(l,L),l===pi&&(Xr=pi=null,wi=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||zg||(zg=!0,KC(dl,function(){return ud(),null})),L=(m.flags&15990)!==0,m.subtreeFlags&15990||L){L=oo.transition,oo.transition=null;var Y=zn;zn=1;var ge=Dn;Dn|=4,t_.current=null,c4(l,m),qC(m,l),FB(cw),Qe=!!uw,cw=uw=null,l.current=m,d4(m),Gf(),Dn=ge,zn=Y,oo.transition=L}else l.current=m;if(zg&&(zg=!1,El=l,Wg=R),L=l.pendingLanes,L===0&&(Sl=null),Jf(m.stateNode),ms(l,fr()),c!==null)for(w=l.onRecoverableError,m=0;m<c.length;m++)R=c[m],w(R.value,{componentStack:R.stack,digest:R.digest});if(Bg)throw Bg=!1,l=i_,i_=null,l;return Wg&1&&l.tag!==0&&ud(),L=l.pendingLanes,L&1?l===s_?Tp++:(Tp=0,s_=l):Tp=0,vl(),null}function ud(){if(El!==null){var l=ag(Wg),c=oo.transition,m=zn;try{if(oo.transition=null,zn=16>l?16:l,El===null)var w=!1;else{if(l=El,El=null,Wg=0,Dn&6)throw Error(n(331));var R=Dn;for(Dn|=4,zt=l.current;zt!==null;){var L=zt,Y=L.child;if(zt.flags&16){var ge=L.deletions;if(ge!==null){for(var Se=0;Se<ge.length;Se++){var He=ge[Se];for(zt=He;zt!==null;){var ht=zt;switch(ht.tag){case 0:case 11:case 15:Np(8,ht,L)}var gt=ht.child;if(gt!==null)gt.return=ht,zt=gt;else for(;zt!==null;){ht=zt;var ft=ht.sibling,Dt=ht.return;if(TC(ht),ht===He){zt=null;break}if(ft!==null){ft.return=Dt,zt=ft;break}zt=Dt}}}var Wt=L.alternate;if(Wt!==null){var Ht=Wt.child;if(Ht!==null){Wt.child=null;do{var Vr=Ht.sibling;Ht.sibling=null,Ht=Vr}while(Ht!==null)}}zt=L}}if(L.subtreeFlags&2064&&Y!==null)Y.return=L,zt=Y;else e:for(;zt!==null;){if(L=zt,L.flags&2048)switch(L.tag){case 0:case 11:case 15:Np(9,L,L.return)}var Fe=L.sibling;if(Fe!==null){Fe.return=L.return,zt=Fe;break e}zt=L.return}}var Ce=l.current;for(zt=Ce;zt!==null;){Y=zt;var $e=Y.child;if(Y.subtreeFlags&2064&&$e!==null)$e.return=Y,zt=$e;else e:for(Y=Ce;zt!==null;){if(ge=zt,ge.flags&2048)try{switch(ge.tag){case 0:case 11:case 15:Lg(9,ge)}}catch(Kt){qr(ge,ge.return,Kt)}if(ge===Y){zt=null;break e}var vt=ge.sibling;if(vt!==null){vt.return=ge.return,zt=vt;break e}zt=ge.return}}if(Dn=R,vl(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(fl,l)}catch{}w=!0}return w}finally{zn=m,oo.transition=c}}return!1}function VC(l,c,m){c=sd(m,c),c=uC(l,c,1),l=wl(l,c,1),c=Ki(),l!==null&&(Tu(l,1,c),ms(l,c))}function qr(l,c,m){if(l.tag===3)VC(l,l,m);else for(;c!==null;){if(c.tag===3){VC(c,l,m);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Sl===null||!Sl.has(w))){l=sd(m,l),l=cC(c,l,1),c=wl(c,l,1),l=Ki(),c!==null&&(Tu(c,1,l),ms(c,l));break}}c=c.return}}function y4(l,c,m){var w=l.pingCache;w!==null&&w.delete(c),c=Ki(),l.pingedLanes|=l.suspendedLanes&m,pi===l&&(wi&m)===m&&(ai===4||ai===3&&(wi&0x7c00000)===wi&&500>fr()-r_?$u(l,0):n_|=m),ms(l,c)}function HC(l,c){c===0&&(l.mode&1?(c=pl,pl<<=1,!(pl&0x7c00000)&&(pl=4194304)):c=1);var m=Ki();l=Aa(l,c),l!==null&&(Tu(l,c,m),ms(l,m))}function b4(l){var c=l.memoizedState,m=0;c!==null&&(m=c.retryLane),HC(l,m)}function v4(l,c){var m=0;switch(l.tag){case 13:var w=l.stateNode,R=l.memoizedState;R!==null&&(m=R.retryLane);break;case 19:w=l.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(c),HC(l,m)}var GC;GC=function(l,c,m){if(l!==null)if(l.memoizedProps!==c.pendingProps||ds.current)ps=!0;else{if(!(l.lanes&m)&&!(c.flags&128))return ps=!1,o4(l,c,m);ps=!!(l.flags&131072)}else ps=!1,br&&c.flags&1048576&&Nk(c,wg,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;Fg(l,c),l=c.pendingProps;var R=Zc(c,Ci.current);rd(c,m),R=qw(null,c,w,l,R,m);var L=Pw();return c.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,fs(w)?(L=!0,bg(c)):L=!1,c.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,kw(c),R.updater=qg,c.stateNode=R,R._reactInternals=c,Bw(c,w,l,m),c=Vw(null,c,w,!0,L,m)):(c.tag=0,br&&L&&yw(c),Gi(null,c,R,m),c=c.child),c;case 16:w=c.elementType;e:{switch(Fg(l,c),l=c.pendingProps,R=w._init,w=R(w._payload),c.type=w,R=c.tag=w4(w),l=Io(w,l),R){case 0:c=Uw(null,c,w,l,m);break e;case 1:c=vC(null,c,w,l,m);break e;case 11:c=hC(null,c,w,l,m);break e;case 14:c=mC(null,c,w,Io(w.type,l),m);break e}throw Error(n(306,w,""))}return c;case 0:return w=c.type,R=c.pendingProps,R=c.elementType===w?R:Io(w,R),Uw(l,c,w,R,m);case 1:return w=c.type,R=c.pendingProps,R=c.elementType===w?R:Io(w,R),vC(l,c,w,R,m);case 3:e:{if(xC(c),l===null)throw Error(n(387));w=c.pendingProps,L=c.memoizedState,R=L.element,Pk(l,c),kg(c,w,null,m);var Y=c.memoizedState;if(w=Y.element,L.isDehydrated)if(L={element:w,isDehydrated:!1,cache:Y.cache,pendingSuspenseBoundaries:Y.pendingSuspenseBoundaries,transitions:Y.transitions},c.updateQueue.baseState=L,c.memoizedState=L,c.flags&256){R=sd(Error(n(423)),c),c=wC(l,c,w,m,R);break e}else if(w!==R){R=sd(Error(n(424)),c),c=wC(l,c,w,m,R);break e}else for(js=gl(c.stateNode.containerInfo.firstChild),Ts=c,br=!0,Eo=null,m=Ak(c,null,w,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(ed(),w===R){c=Pa(l,c,m);break e}Gi(l,c,w,m)}c=c.child}return c;case 5:return Lk(c),l===null&&xw(c),w=c.type,R=c.pendingProps,L=l!==null?l.memoizedProps:null,Y=R.children,dw(w,R)?Y=null:L!==null&&dw(w,L)&&(c.flags|=32),bC(l,c),Gi(l,c,Y,m),c.child;case 6:return l===null&&xw(c),null;case 13:return _C(l,c,m);case 4:return Cw(c,c.stateNode.containerInfo),w=c.pendingProps,l===null?c.child=td(c,null,w,m):Gi(l,c,w,m),c.child;case 11:return w=c.type,R=c.pendingProps,R=c.elementType===w?R:Io(w,R),hC(l,c,w,R,m);case 7:return Gi(l,c,c.pendingProps,m),c.child;case 8:return Gi(l,c,c.pendingProps.children,m),c.child;case 12:return Gi(l,c,c.pendingProps.children,m),c.child;case 10:e:{if(w=c.type._context,R=c.pendingProps,L=c.memoizedProps,Y=R.value,sr(Eg,w._currentValue),w._currentValue=Y,L!==null)if(So(L.value,Y)){if(L.children===R.children&&!ds.current){c=Pa(l,c,m);break e}}else for(L=c.child,L!==null&&(L.return=c);L!==null;){var ge=L.dependencies;if(ge!==null){Y=L.child;for(var Se=ge.firstContext;Se!==null;){if(Se.context===w){if(L.tag===1){Se=qa(-1,m&-m),Se.tag=2;var He=L.updateQueue;if(He!==null){He=He.shared;var ht=He.pending;ht===null?Se.next=Se:(Se.next=ht.next,ht.next=Se),He.pending=Se}}L.lanes|=m,Se=L.alternate,Se!==null&&(Se.lanes|=m),Iw(L.return,m,c),ge.lanes|=m;break}Se=Se.next}}else if(L.tag===10)Y=L.type===c.type?null:L.child;else if(L.tag===18){if(Y=L.return,Y===null)throw Error(n(341));Y.lanes|=m,ge=Y.alternate,ge!==null&&(ge.lanes|=m),Iw(Y,m,c),Y=L.sibling}else Y=L.child;if(Y!==null)Y.return=L;else for(Y=L;Y!==null;){if(Y===c){Y=null;break}if(L=Y.sibling,L!==null){L.return=Y.return,Y=L;break}Y=Y.return}L=Y}Gi(l,c,R.children,m),c=c.child}return c;case 9:return R=c.type,w=c.pendingProps.children,rd(c,m),R=io(R),w=w(R),c.flags|=1,Gi(l,c,w,m),c.child;case 14:return w=c.type,R=Io(w,c.pendingProps),R=Io(w.type,R),mC(l,c,w,R,m);case 15:return gC(l,c,c.type,c.pendingProps,m);case 17:return w=c.type,R=c.pendingProps,R=c.elementType===w?R:Io(w,R),Fg(l,c),c.tag=1,fs(w)?(l=!0,bg(c)):l=!1,rd(c,m),aC(c,w,R),Bw(c,w,R,m),Vw(null,c,w,!0,l,m);case 19:return EC(l,c,m);case 22:return yC(l,c,m)}throw Error(n(156,c.tag))};function KC(l,c){return Bc(l,c)}function x4(l,c,m,w){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ao(l,c,m,w){return new x4(l,c,m,w)}function d_(l){return l=l.prototype,!(!l||!l.isReactComponent)}function w4(l){if(typeof l=="function")return d_(l)?1:0;if(l!=null){if(l=l.$$typeof,l===W)return 11;if(l===X)return 14}return 2}function kl(l,c){var m=l.alternate;return m===null?(m=ao(l.tag,c,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=c,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&0xe00000,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,c=l.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m}function Gg(l,c,m,w,R,L){var Y=2;if(w=l,typeof l=="function")d_(l)&&(Y=1);else if(typeof l=="string")Y=5;else e:switch(l){case $:return zu(m.children,R,L,c);case P:Y=8,R|=8;break;case O:return l=ao(12,m,c,R|2),l.elementType=O,l.lanes=L,l;case V:return l=ao(13,m,c,R),l.elementType=V,l.lanes=L,l;case z:return l=ao(19,m,c,R),l.elementType=z,l.lanes=L,l;case le:return Kg(m,R,L,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case B:Y=10;break e;case D:Y=9;break e;case W:Y=11;break e;case X:Y=14;break e;case Z:Y=16,w=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return c=ao(Y,m,c,R),c.elementType=l,c.type=w,c.lanes=L,c}function zu(l,c,m,w){return l=ao(7,l,w,c),l.lanes=m,l}function Kg(l,c,m,w){return l=ao(22,l,w,c),l.elementType=le,l.lanes=m,l.stateNode={isHidden:!1},l}function f_(l,c,m){return l=ao(6,l,null,c),l.lanes=m,l}function p_(l,c,m){return c=ao(4,l.children!==null?l.children:[],l.key,c),c.lanes=m,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function _4(l,c,m,w,R){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tp(0),this.expirationTimes=tp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tp(0),this.identifierPrefix=w,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function h_(l,c,m,w,R,L,Y,ge,Se){return l=new _4(l,c,m,ge,Se),c===1?(c=1,L===!0&&(c|=8)):c=0,L=ao(3,null,null,c),l.current=L,L.stateNode=l,L.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},kw(L),l}function S4(l,c,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:w==null?null:""+w,children:l,containerInfo:c,implementation:m}}function QC(l){if(!l)return bl;l=l._reactInternals;e:{if(eo(l)!==l||l.tag!==1)throw Error(n(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(fs(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(l.tag===1){var m=l.type;if(fs(m))return Sk(l,m,c)}return c}function JC(l,c,m,w,R,L,Y,ge,Se){return l=h_(m,w,!0,l,R,L,Y,ge,Se),l.context=QC(null),m=l.current,w=Ki(),R=Il(m),L=qa(w,R),L.callback=c??null,wl(m,L,R),l.current.lanes=R,Tu(l,R,w),ms(l,w),l}function Qg(l,c,m,w){var R=c.current,L=Ki(),Y=Il(R);return m=QC(m),c.context===null?c.context=m:c.pendingContext=m,c=qa(L,Y),c.payload={element:l},w=w===void 0?null:w,w!==null&&(c.callback=w),l=wl(R,c,Y),l!==null&&(Co(l,R,Y,L),Ng(l,R,Y)),Y}function Jg(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function ZC(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<c?m:c}}function m_(l,c){ZC(l,c),(l=l.alternate)&&ZC(l,c)}var YC=typeof reportError=="function"?reportError:function(l){console.error(l)};function g_(l){this._internalRoot=l}Zg.prototype.render=g_.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(n(409));Qg(l,c,null,null)},Zg.prototype.unmount=g_.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;Mu(function(){Qg(null,l,null,null)}),c[Ta]=null}};function Zg(l){this._internalRoot=l}Zg.prototype.unstable_scheduleHydration=function(l){if(l){var c=ju();l={blockedOn:null,target:l,priority:c};for(var m=0;m<me.length&&c!==0&&c<me[m].priority;m++);me.splice(m,0,l),m===0&&Be(l)}};function y_(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Yg(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function XC(){}function E4(l,c,m,w,R){if(R){if(typeof w=="function"){var L=w;w=function(){var He=Jg(Y);L.call(He)}}var Y=JC(c,w,l,0,null,!1,!1,"",XC);return l._reactRootContainer=Y,l[Ta]=Y.current,pp(l.nodeType===8?l.parentNode:l),Mu(),Y}for(;R=l.lastChild;)l.removeChild(R);if(typeof w=="function"){var ge=w;w=function(){var He=Jg(Se);ge.call(He)}}var Se=h_(l,0,!1,null,null,!1,!1,"",XC);return l._reactRootContainer=Se,l[Ta]=Se.current,pp(l.nodeType===8?l.parentNode:l),Mu(function(){Qg(c,Se,m,w)}),Se}function Xg(l,c,m,w,R){var L=m._reactRootContainer;if(L){var Y=L;if(typeof R=="function"){var ge=R;R=function(){var Se=Jg(Y);ge.call(Se)}}Qg(c,Y,l,R)}else Y=E4(m,c,l,R,w);return Jg(Y)}rp=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var m=Hi(c.pendingLanes);m!==0&&(np(c,m|1),ms(c,fr()),!(Dn&6)&&(ld=fr()+500,vl()))}break;case 13:Mu(function(){var w=Aa(l,1);if(w!==null){var R=Ki();Co(w,l,1,R)}}),m_(l,1)}},he=function(l){if(l.tag===13){var c=Aa(l,0x8000000);if(c!==null){var m=Ki();Co(c,l,0x8000000,m)}m_(l,0x8000000)}},ip=function(l){if(l.tag===13){var c=Il(l),m=Aa(l,c);if(m!==null){var w=Ki();Co(m,l,c,w)}m_(l,c)}},ju=function(){return zn},sp=function(l,c){var m=zn;try{return zn=l,c()}finally{zn=m}},Su=function(l,c,m){switch(c){case"input":if(ln(l,m),c=m.name,m.type==="radio"&&c!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var w=m[c];if(w!==l&&w.form===l.form){var R=gg(w);if(!R)throw Error(n(90));Ue(w),ln(w,R)}}}break;case"textarea":Me(l,m);break;case"select":c=m.value,c!=null&&qe(l,!!m.multiple,c,!1)}},qc=l_,Pc=Mu;var I4={usingClientEntryPoint:!1,Events:[gp,Qc,gg,yn,Ac,l_]},jp={findFiberByHostInstance:Ru,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},N4={bundleType:jp.bundleType,version:jp.version,rendererPackageName:jp.rendererPackageName,rendererConfig:jp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Mc(l),l===null?null:l.stateNode},findFiberByHostInstance:jp.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ey=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ey.isDisabled&&ey.supportsFiber)try{fl=ey.inject(N4),cs=ey}catch{}}return gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I4,gs.createPortal=function(l,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y_(c))throw Error(n(200));return S4(l,c,null,m)},gs.createRoot=function(l,c){if(!y_(l))throw Error(n(299));var m=!1,w="",R=YC;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(R=c.onRecoverableError)),c=h_(l,1,!1,null,null,m,!1,w,R),l[Ta]=c.current,pp(l.nodeType===8?l.parentNode:l),new g_(c)},gs.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=Mc(c),l=l===null?null:l.stateNode,l},gs.flushSync=function(l){return Mu(l)},gs.hydrate=function(l,c,m){if(!Yg(c))throw Error(n(200));return Xg(null,l,c,!0,m)},gs.hydrateRoot=function(l,c,m){if(!y_(l))throw Error(n(405));var w=m!=null&&m.hydratedSources||null,R=!1,L="",Y=YC;if(m!=null&&(m.unstable_strictMode===!0&&(R=!0),m.identifierPrefix!==void 0&&(L=m.identifierPrefix),m.onRecoverableError!==void 0&&(Y=m.onRecoverableError)),c=JC(c,null,l,1,m??null,R,!1,L,Y),l[Ta]=c.current,pp(l),w)for(l=0;l<w.length;l++)m=w[l],R=m._getVersion,R=R(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,R]:c.mutableSourceEagerHydrationData.push(m,R);return new Zg(c)},gs.render=function(l,c,m){if(!Yg(c))throw Error(n(200));return Xg(null,l,c,!1,m)},gs.unmountComponentAtNode=function(l){if(!Yg(l))throw Error(n(40));return l._reactRootContainer?(Mu(function(){Xg(null,null,l,!1,function(){l._reactRootContainer=null,l[Ta]=null})}),!0):!1},gs.unstable_batchedUpdates=l_,gs.unstable_renderSubtreeIntoContainer=function(l,c,m,w){if(!Yg(m))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return Xg(l,c,m,!1,w)},gs.version="18.3.1-next-f1338f8080-20240426",gs}var jT;function nP(){if(jT)return O_.exports;jT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),O_.exports=aW(),O_.exports}var _m=nP();const lW="Error preloading route! ";function uW(t,e){const n=Qo(),[r,i]=H.useState(!1),s=H.useRef(!1),o=Pz(e),{activeProps:a=()=>({className:"active"}),inactiveProps:u=()=>({}),activeOptions:d,to:p,preload:h,preloadDelay:g,hashScrollIntoView:x,replace:_,startTransition:S,resetScroll:k,viewTransition:I,children:E,target:C,disabled:j,style:q,className:F,onClick:$,onFocus:P,onMouseEnter:O,onMouseLeave:B,onTouchStart:D,ignoreBlocker:W,...V}=t,{params:z,search:X,hash:Z,state:le,mask:ie,reloadDocument:ne,...oe}=V,te=H.useMemo(()=>{try{return new URL(`${p}`),"external"}catch{}return"internal"},[p]),ce=ts({select:Ne=>Ne.location.search,structuralSharing:!0});t={from:iu({strict:!1,select:Ne=>Ne.pathname}),...t};const ye=H.useMemo(()=>n.buildLocation(t),[n,t,ce]),we=H.useMemo(()=>t.reloadDocument?!1:h??n.options.defaultPreload,[n.options.defaultPreload,h,t.reloadDocument]),Ie=g??n.options.defaultPreloadDelay??0,ze=ts({select:Ne=>{if(d?.exact){if(!Dz(Ne.location.pathname,ye.pathname,n.basepath))return!1}else{const qe=Fb(Ne.location.pathname,n.basepath).split("/");if(!Fb(ye.pathname,n.basepath).split("/").every((Me,ct)=>Me===qe[ct]))return!1}return(d?.includeSearch??!0)&&!$d(Ne.location.search,ye.search,{partial:!d?.exact,ignoreUndefined:!d?.explicitUndefined})?!1:d?.includeHash?Ne.location.hash===ye.hash:!0}}),Re=H.useCallback(()=>{n.preloadRoute(t).catch(Ne=>{console.warn(Ne),console.warn(lW)})},[t,n]),De=H.useCallback(Ne=>{Ne?.isIntersecting&&Re()},[Re]);if(qz(o,De,{rootMargin:"100px"},{disabled:!!j||we!=="viewport"}),Qp(()=>{s.current||!j&&we==="render"&&(Re(),s.current=!0)},[j,Re,we]),te==="external")return{...oe,ref:o,type:te,href:p,...E&&{children:E},...C&&{target:C},...j&&{disabled:j},...q&&{style:q},...F&&{className:F},...$&&{onClick:$},...P&&{onFocus:P},...O&&{onMouseEnter:O},...B&&{onMouseLeave:B},...D&&{onTouchStart:D}};const Je=Ne=>{if(!j&&!dW(Ne)&&!Ne.defaultPrevented&&(!C||C==="_self")&&Ne.button===0){Ne.preventDefault(),_m.flushSync(()=>{i(!0)});const qe=n.subscribe("onResolved",()=>{qe(),i(!1)});return n.navigate({...t,replace:_,resetScroll:k,hashScrollIntoView:x,startTransition:S,viewTransition:I,ignoreBlocker:W})}},Xe=Ne=>{j||we&&Re()},Ue=Xe,ut=Ne=>{if(j)return;const qe=Ne.target||{};if(we){if(qe.preloadTimeout)return;qe.preloadTimeout=setTimeout(()=>{qe.preloadTimeout=null,Re()},Ie)}},Et=Ne=>{if(j)return;const qe=Ne.target||{};qe.preloadTimeout&&(clearTimeout(qe.preloadTimeout),qe.preloadTimeout=null)},At=Ne=>qe=>{var Ve;(Ve=qe.persist)==null||Ve.call(qe),Ne.filter(Boolean).forEach(rt=>{qe.defaultPrevented||rt(qe)})},Gt=ze?tc(a,{})??{}:{},ln=ze?{}:tc(u,{}),xe=[F,Gt.className,ln.className].filter(Boolean).join(" "),be={...q,...Gt.style,...ln.style};return{...oe,...Gt,...ln,href:j?void 0:ye.maskedLocation?n.history.createHref(ye.maskedLocation.href):n.history.createHref(ye.href),ref:o,onClick:At([$,Je]),onFocus:At([P,Xe]),onMouseEnter:At([O,ut]),onMouseLeave:At([B,Et]),onTouchStart:At([D,Ue]),disabled:!!j,target:C,...Object.keys(be).length&&{style:be},...xe&&{className:xe},...j&&{role:"link","aria-disabled":!0},...ze&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}function rP(t){return H.forwardRef(function(n,r){return f.jsx(cW,{...n,_asChild:t,ref:r})})}const cW=H.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:i,ref:s,...o}=uW(r,e),a=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof n>"u"&&delete o.disabled,H.createElement(n||"a",{...o,ref:s},a)});function dW(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fW(){const t=Qo(),e=H.useRef({router:t,mounted:!1}),n=ts({select:({isLoading:h})=>h}),[r,i]=H.useState(!1),s=ts({select:h=>h.matches.some(g=>g.status==="pending"),structuralSharing:!0}),o=T_(n),a=n||r||s,u=T_(a),d=n||s,p=T_(d);return t.isServer||(t.startReactTransition=h=>{i(!0),H.startTransition(()=>{h(),i(!1)})}),H.useEffect(()=>{const h=t.history.subscribe(t.load),g=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return nc(t.latestLocation.href)!==nc(g.href)&&t.commitLocation({...g,replace:!0}),()=>{h()}},[t,t.history]),Qp(()=>{var h;if(typeof window<"u"&&((h=window.__TSR__)!=null&&h.dehydrated)||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(x){console.error(x)}})()},[t]),Qp(()=>{if(o&&!n){const h=t.state.location,g=t.state.resolvedLocation,x=g.pathname!==h.pathname,_=g.href!==h.href;t.emit({type:"onLoad",fromLocation:g,toLocation:h,pathChanged:x,hrefChanged:_})}},[o,t,n]),Qp(()=>{if(p&&!d){const h=t.state.location,g=t.state.resolvedLocation,x=g.pathname!==h.pathname,_=g.href!==h.href;t.emit({type:"onBeforeRouteMount",fromLocation:g,toLocation:h,pathChanged:x,hrefChanged:_})}},[d,p,t]),Qp(()=>{if(u&&!a){const h=t.state.location,g=t.state.resolvedLocation,x=g.pathname!==h.pathname,_=g.href!==h.href;if(t.emit({type:"onResolved",fromLocation:g,toLocation:h,pathChanged:x,hrefChanged:_}),t.__store.setState(S=>({...S,status:"idle",resolvedLocation:S.location})),typeof document<"u"&&document.querySelector){const S=t.state.location.state.__hashScrollIntoViewOptions??!0;if(S&&t.state.location.hash!==""){const k=document.getElementById(t.state.location.hash);k&&k.scrollIntoView(S)}}}},[a,u,t]),null}function pW(){const t=Qo(),e=t.options.defaultPendingComponent?f.jsx(t.options.defaultPendingComponent,{}):null,n=t.isServer||typeof document<"u"&&window.__TSR__?Vy:H.Suspense,r=f.jsxs(n,{fallback:e,children:[f.jsx(fW,{}),f.jsx(hW,{})]});return t.options.InnerWrap?f.jsx(t.options.InnerWrap,{children:r}):r}function hW(){const t=ts({select:n=>{var r;return(r=n.matches[0])==null?void 0:r.id}}),e=ts({select:n=>n.loadedAt});return f.jsx(Wv.Provider,{value:t,children:f.jsx(n1,{getResetKey:()=>e,errorComponent:zv,onCatch:n=>{n.message||n.toString()},children:t?f.jsx(tP,{matchId:t}):null})})}function mW(){const t=Qo();return ts({select:e=>[e.location.href,e.resolvedLocation.href,e.status],structuralSharing:!0}),H.useCallback(e=>{const{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s,...o}=e;return t.matchRoute(o,{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s})},[t])}function gW({router:t,children:e,...n}){t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=K3(),i=f.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?f.jsx(t.options.Wrap,{children:i}):i}function yW({router:t,...e}){return f.jsx(gW,{router:t,...e,children:f.jsx(pW,{})})}const bW=typeof window<"u"?H.useLayoutEffect:H.useEffect,P_="window",RT="___";let F_=new WeakSet;const vW=typeof window<"u"&&window.sessionStorage,Oo=vW?(()=>{const t="tsr-scroll-restoration-v2";return{state:JSON.parse(window.sessionStorage.getItem(t)||"null")||{cached:{},next:{}},set:n=>{Oo.state=tc(n,Oo.state),window.sessionStorage.setItem(t,JSON.stringify(Oo.state))}}})():void 0,xW=t=>t.state.key||t.href;function wW(t){const e=Qo();bW(()=>{const n=t?.getKey||xW,{history:r}=window;r.scrollRestoration="manual";const i=a=>{if(F_.has(a.target))return;F_.add(a.target);let u="";if(a.target===document||a.target===window)u=P_;else{const d=a.target.getAttribute("data-scroll-restoration-id");d?u=`[data-scroll-restoration-id="${d}"]`:u=SW(a.target)}Oo.state.next[u]||Oo.set(d=>({...d,next:{...d.next,[u]:{scrollX:NaN,scrollY:NaN}}}))};typeof document<"u"&&document.addEventListener("scroll",i,!0);const s=e.subscribe("onBeforeLoad",a=>{if(a.hrefChanged){const u=n(a.fromLocation);for(const d in Oo.state.next){const p=Oo.state.next[d];if(d===P_)p.scrollX=window.scrollX||0,p.scrollY=window.scrollY||0;else if(d){const h=document.querySelector(d);p.scrollX=h?.scrollLeft||0,p.scrollY=h?.scrollTop||0}Oo.set(h=>{const g={...h.next};return delete g[d],{...h,next:g,cached:{...h.cached,[[u,d].join(RT)]:p}}})}}}),o=e.subscribe("onBeforeRouteMount",a=>{if(a.hrefChanged){if(!e.resetNextScroll)return;e.resetNextScroll=!0;const u=n(a.toLocation);let d=!1;for(const p in Oo.state.cached){const h=Oo.state.cached[p],[g,x]=p.split(RT);if(g===u){if(x===P_)d=!0,window.scrollTo({top:h.scrollY,left:h.scrollX,behavior:t?.scrollBehavior});else if(x){const _=document.querySelector(x);_&&(_.scrollLeft=h.scrollX,_.scrollTop=h.scrollY)}}}d||window.scrollTo(0,0),Oo.set(p=>({...p,next:{}})),F_=new WeakSet}});return()=>{document.removeEventListener("scroll",i),s(),o()}},[t?.getKey,e])}function _W(t){return wW(t),null}function SW(t){const e=[];let n;for(;n=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(n.children,t)+1})`),t=n;return`${e.join(" > ")}`.toLowerCase()}function gr(t){return iu({...t,select:e=>t.select?t.select(e.context):e.context})}let EW={data:""},IW=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||EW,NW=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,kW=/\/\*[^]*?\*\/|  +/g,OT=/\n+/g,Bl=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Bl(o,s):s+"{"+Bl(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Bl(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,a):a?a+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Bl.p?Bl.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Da={},iP=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+iP(t[n]);return e}return t},CW=(t,e,n,r,i)=>{let s=iP(t),o=Da[s]||(Da[s]=(u=>{let d=0,p=11;for(;d<u.length;)p=101*p+u.charCodeAt(d++)>>>0;return"go"+p})(s));if(!Da[o]){let u=s!==t?t:(d=>{let p,h,g=[{}];for(;p=NW.exec(d.replace(kW,""));)p[4]?g.shift():p[3]?(h=p[3].replace(OT," ").trim(),g.unshift(g[0][h]=g[0][h]||{})):g[0][p[1]]=p[2].replace(OT," ").trim();return g[0]})(t);Da[o]=Bl(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let a=n&&Da.g?Da.g:null;return n&&(Da.g=Da[o]),((u,d,p,h)=>{h?d.data=d.data.replace(h,u):d.data.indexOf(u)===-1&&(d.data=p?u+d.data:d.data+u)})(Da[o],e,r,a),o},TW=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),u=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=u?"."+u:a&&typeof a=="object"?a.props?"":Bl(a,""):a===!1?"":a}return r+i+(o??"")},"");function Uv(t){let e=this||{},n=t.call?t(e.p):t;return CW(n.unshift?n.raw?TW(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,IW(e.target),e.g,e.o,e.k)}let sP,PE,FE;Uv.bind({g:1});let el=Uv.bind({k:1});function jW(t,e,n,r){Bl.p=e,sP=t,PE=n,FE=r}function gu(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),u=a.className||i.className;n.p=Object.assign({theme:PE&&PE()},a),n.o=/ *go\d+/.test(u),a.className=Uv.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=a.as||t,delete a.as),FE&&d[0]&&FE(a),sP(d,a)}return i}}var RW=t=>typeof t=="function",Lb=(t,e)=>RW(t)?t(e):t,OW=(()=>{let t=0;return()=>(++t).toString()})(),oP=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),AW=20,aP=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,AW)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return aP(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},Hy=[],Gy={toasts:[],pausedAt:void 0},Nc=t=>{Gy=aP(Gy,t),Hy.forEach(e=>{e(Gy)})},qW={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},PW=(t={})=>{let[e,n]=H.useState(Gy);H.useEffect(()=>(Hy.push(n),()=>{let i=Hy.indexOf(n);i>-1&&Hy.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o,a;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((s=t[i.type])==null?void 0:s.removeDelay)||t?.removeDelay,duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||t?.duration||qW[i.type],style:{...t.style,...(a=t[i.type])==null?void 0:a.style,...i.style}}});return{...e,toasts:r}},FW=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||OW()}),Sm=t=>(e,n)=>{let r=FW(e,t,n);return Nc({type:2,toast:r}),r.id},qn=(t,e)=>Sm("blank")(t,e);qn.error=Sm("error");qn.success=Sm("success");qn.loading=Sm("loading");qn.custom=Sm("custom");qn.dismiss=t=>{Nc({type:3,toastId:t})};qn.remove=t=>Nc({type:4,toastId:t});qn.promise=(t,e,n)=>{let r=qn.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?Lb(e.success,i):void 0;return s?qn.success(s,{id:r,...n,...n?.success}):qn.dismiss(r),i}).catch(i=>{let s=e.error?Lb(e.error,i):void 0;s?qn.error(s,{id:r,...n,...n?.error}):qn.dismiss(r)}),t};var DW=(t,e)=>{Nc({type:1,toast:{id:t,height:e}})},LW=()=>{Nc({type:5,time:Date.now()})},hh=new Map,MW=1e3,$W=(t,e=MW)=>{if(hh.has(t))return;let n=setTimeout(()=>{hh.delete(t),Nc({type:4,toastId:t})},e);hh.set(t,n)},BW=t=>{let{toasts:e,pausedAt:n}=PW(t);H.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let u=(a.duration||0)+a.pauseDuration-(s-a.createdAt);if(u<0){a.visible&&qn.dismiss(a.id);return}return setTimeout(()=>qn.dismiss(a.id),u)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=H.useCallback(()=>{n&&Nc({type:6,time:Date.now()})},[n]),i=H.useCallback((s,o)=>{let{reverseOrder:a=!1,gutter:u=8,defaultPosition:d}=o||{},p=e.filter(x=>(x.position||d)===(s.position||d)&&x.height),h=p.findIndex(x=>x.id===s.id),g=p.filter((x,_)=>_<h&&x.visible).length;return p.filter(x=>x.visible).slice(...a?[g+1]:[0,g]).reduce((x,_)=>x+(_.height||0)+u,0)},[e]);return H.useEffect(()=>{e.forEach(s=>{if(s.dismissed)$W(s.id,s.removeDelay);else{let o=hh.get(s.id);o&&(clearTimeout(o),hh.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:DW,startPause:LW,endPause:r,calculateOffset:i}}},zW=el`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,WW=el`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,UW=el`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,VW=gu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${WW} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${UW} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,HW=el`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,GW=gu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${HW} 1s linear infinite;
`,KW=el`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,QW=el`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,JW=gu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${KW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${QW} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ZW=gu("div")`
  position: absolute;
`,YW=gu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,XW=el`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,e6=gu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${XW} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,t6=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?H.createElement(e6,null,e):e:n==="blank"?null:H.createElement(YW,null,H.createElement(GW,{...r}),n!=="loading"&&H.createElement(ZW,null,n==="error"?H.createElement(VW,{...r}):H.createElement(JW,{...r})))},n6=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,r6=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,i6="0%{opacity:0;} 100%{opacity:1;}",s6="0%{opacity:1;} 100%{opacity:0;}",o6=gu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,a6=gu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,l6=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=oP()?[i6,s6]:[n6(n),r6(n)];return{animation:e?`${el(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${el(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},u6=H.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?l6(t.position||e||"top-center",t.visible):{opacity:0},s=H.createElement(t6,{toast:t}),o=H.createElement(a6,{...t.ariaProps},Lb(t.message,t));return H.createElement(o6,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):H.createElement(H.Fragment,null,s,o))});jW(H.createElement);var c6=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=H.useCallback(o=>{if(o){let a=()=>{let u=o.getBoundingClientRect().height;r(t,u)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return H.createElement("div",{ref:s,className:e,style:n},i)},d6=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:oP()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},f6=Uv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ay=16,lP=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:u}=BW(n);return H.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:ay,left:ay,right:ay,bottom:ay,pointerEvents:"none",...s},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},a.map(d=>{let p=d.position||e,h=u.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),g=d6(p,h);return H.createElement(c6,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?f6:"",style:g},d.type==="custom"?Lb(d.message,d):i?i(d):H.createElement(u6,{toast:d,position:p}))}))},p6=qn;class kc extends Error{}class h6 extends kc{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class m6 extends kc{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class g6 extends kc{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Td extends kc{}class uP extends kc{constructor(e){super(`Invalid unit ${e}`)}}class Ai extends kc{}class Tl extends kc{constructor(){super("Zone is an abstract class")}}const Ot="numeric",Uo="short",Bs="long",Mb={year:Ot,month:Ot,day:Ot},cP={year:Ot,month:Uo,day:Ot},y6={year:Ot,month:Uo,day:Ot,weekday:Uo},dP={year:Ot,month:Bs,day:Ot},fP={year:Ot,month:Bs,day:Ot,weekday:Bs},pP={hour:Ot,minute:Ot},hP={hour:Ot,minute:Ot,second:Ot},mP={hour:Ot,minute:Ot,second:Ot,timeZoneName:Uo},gP={hour:Ot,minute:Ot,second:Ot,timeZoneName:Bs},yP={hour:Ot,minute:Ot,hourCycle:"h23"},bP={hour:Ot,minute:Ot,second:Ot,hourCycle:"h23"},vP={hour:Ot,minute:Ot,second:Ot,hourCycle:"h23",timeZoneName:Uo},xP={hour:Ot,minute:Ot,second:Ot,hourCycle:"h23",timeZoneName:Bs},wP={year:Ot,month:Ot,day:Ot,hour:Ot,minute:Ot},_P={year:Ot,month:Ot,day:Ot,hour:Ot,minute:Ot,second:Ot},SP={year:Ot,month:Uo,day:Ot,hour:Ot,minute:Ot},EP={year:Ot,month:Uo,day:Ot,hour:Ot,minute:Ot,second:Ot},b6={year:Ot,month:Uo,day:Ot,weekday:Uo,hour:Ot,minute:Ot},IP={year:Ot,month:Bs,day:Ot,hour:Ot,minute:Ot,timeZoneName:Uo},NP={year:Ot,month:Bs,day:Ot,hour:Ot,minute:Ot,second:Ot,timeZoneName:Uo},kP={year:Ot,month:Bs,day:Ot,weekday:Bs,hour:Ot,minute:Ot,timeZoneName:Bs},CP={year:Ot,month:Bs,day:Ot,weekday:Bs,hour:Ot,minute:Ot,second:Ot,timeZoneName:Bs};class Em{get type(){throw new Tl}get name(){throw new Tl}get ianaName(){return this.name}get isUniversal(){throw new Tl}offsetName(e,n){throw new Tl}formatOffset(e,n){throw new Tl}offset(e){throw new Tl}equals(e){throw new Tl}get isValid(){throw new Tl}}let D_=null;class Vv extends Em{static get instance(){return D_===null&&(D_=new Vv),D_}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return DP(e,n,r)}formatOffset(e,n){return mh(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Ky={};function v6(t){return Ky[t]||(Ky[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Ky[t]}const x6={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function w6(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,a,u,d,p]=r;return[o,i,s,a,u,d,p]}function _6(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],a=x6[s];s==="era"?r[a]=o:vn(a)||(r[a]=parseInt(o,10))}return r}let ly={};class tl extends Em{static create(e){return ly[e]||(ly[e]=new tl(e)),ly[e]}static resetCache(){ly={},Ky={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=tl.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return DP(e,n,r,this.name)}formatOffset(e,n){return mh(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const r=v6(this.name);let[i,s,o,a,u,d,p]=r.formatToParts?_6(r,n):w6(r,n);a==="BC"&&(i=-Math.abs(i)+1);const g=Gv({year:i,month:s,day:o,hour:u===24?0:u,minute:d,second:p,millisecond:0});let x=+n;const _=x%1e3;return x-=_>=0?_:1e3+_,(g-x)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let AT={};function S6(t,e={}){const n=JSON.stringify([t,e]);let r=AT[n];return r||(r=new Intl.ListFormat(t,e),AT[n]=r),r}let DE={};function LE(t,e={}){const n=JSON.stringify([t,e]);let r=DE[n];return r||(r=new Intl.DateTimeFormat(t,e),DE[n]=r),r}let ME={};function E6(t,e={}){const n=JSON.stringify([t,e]);let r=ME[n];return r||(r=new Intl.NumberFormat(t,e),ME[n]=r),r}let $E={};function I6(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=$E[i];return s||(s=new Intl.RelativeTimeFormat(t,e),$E[i]=s),s}let Zp=null;function N6(){return Zp||(Zp=new Intl.DateTimeFormat().resolvedOptions().locale,Zp)}let qT={};function k6(t){let e=qT[t];if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,qT[t]=e}return e}function C6(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=LE(t).resolvedOptions(),i=t}catch{const u=t.substring(0,n);r=LE(u).resolvedOptions(),i=u}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function T6(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function j6(t){const e=[];for(let n=1;n<=12;n++){const r=bn.utc(2009,n,1);e.push(t(r))}return e}function R6(t){const e=[];for(let n=1;n<=7;n++){const r=bn.utc(2016,11,13+n);e.push(t(r))}return e}function uy(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function O6(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class A6{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=E6(e,a)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):a1(e,3);return ei(n,this.padTo)}}}class q6{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&tl.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=LE(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class P6{constructor(e,n,r){this.opts={style:"long",...r},!n&&PP()&&(this.rtf=I6(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):iU(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const F6={firstDay:1,minimalDays:4,weekend:[6,7]};class Gn{static fromOpts(e){return Gn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){const o=e||Fr.defaultLocale,a=o||(s?"en-US":N6()),u=n||Fr.defaultNumberingSystem,d=r||Fr.defaultOutputCalendar,p=BE(i)||Fr.defaultWeekSettings;return new Gn(a,u,d,p,o)}static resetCache(){Zp=null,DE={},ME={},$E={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Gn.create(e,n,r,i)}constructor(e,n,r,i,s){const[o,a,u]=C6(e);this.locale=o,this.numberingSystem=n||a||null,this.outputCalendar=r||u||null,this.weekSettings=i,this.intl=T6(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=O6(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Gn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,BE(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return uy(this,e,$P,()=>{const r=n?{month:e,day:"numeric"}:{month:e},i=n?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=j6(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,n=!1){return uy(this,e,WP,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=R6(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return uy(this,void 0,()=>UP,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[bn.utc(2016,11,13,9),bn.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return uy(this,e,VP,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[bn.utc(-40,1,1),bn.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new A6(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new q6(e,this.intl,n)}relFormatter(e={}){return new P6(this.intl,this.isEnglish(),e)}listFormatter(e={}){return S6(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:FP()?k6(this.locale):F6}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let L_=null;class es extends Em{static get utcInstance(){return L_===null&&(L_=new es(0)),L_}static instance(e){return e===0?es.utcInstance:new es(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new es(Kv(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${mh(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${mh(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return mh(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class D6 extends Em{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function zl(t,e){if(vn(t)||t===null)return e;if(t instanceof Em)return t;if(W6(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?Vv.instance:n==="utc"||n==="gmt"?es.utcInstance:es.parseSpecifier(n)||tl.create(t)}else return Zl(t)?es.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new D6(t)}const r1={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},PT={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},L6=r1.hanidec.replace(/[\[|\]]/g,"").split("");function M6(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(r1.hanidec)!==-1)e+=L6.indexOf(t[n]);else for(const i in PT){const[s,o]=PT[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}let Id={};function $6(){Id={}}function To({numberingSystem:t},e=""){const n=t||"latn";return Id[n]||(Id[n]={}),Id[n][e]||(Id[n][e]=new RegExp(`${r1[n]}${e}`)),Id[n][e]}let FT=()=>Date.now(),DT="system",LT=null,MT=null,$T=null,BT=60,zT,WT=null;class Fr{static get now(){return FT}static set now(e){FT=e}static set defaultZone(e){DT=e}static get defaultZone(){return zl(DT,Vv.instance)}static get defaultLocale(){return LT}static set defaultLocale(e){LT=e}static get defaultNumberingSystem(){return MT}static set defaultNumberingSystem(e){MT=e}static get defaultOutputCalendar(){return $T}static set defaultOutputCalendar(e){$T=e}static get defaultWeekSettings(){return WT}static set defaultWeekSettings(e){WT=BE(e)}static get twoDigitCutoffYear(){return BT}static set twoDigitCutoffYear(e){BT=e%100}static get throwOnInvalid(){return zT}static set throwOnInvalid(e){zT=e}static resetCaches(){Gn.resetCache(),tl.resetCache(),bn.resetCache(),$6()}}class $o{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const TP=[0,31,59,90,120,151,181,212,243,273,304,334],jP=[0,31,60,91,121,152,182,213,244,274,305,335];function yo(t,e){return new $o("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function i1(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function RP(t,e,n){return n+(Im(t)?jP:TP)[e-1]}function OP(t,e){const n=Im(t)?jP:TP,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function s1(t,e){return(t-e+7)%7+1}function $b(t,e=4,n=1){const{year:r,month:i,day:s}=t,o=RP(r,i,s),a=s1(i1(r,i,s),n);let u=Math.floor((o-a+14-e)/7),d;return u<1?(d=r-1,u=jh(d,e,n)):u>jh(r,e,n)?(d=r+1,u=1):d=r,{weekYear:d,weekNumber:u,weekday:a,...Qv(t)}}function UT(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=t,o=s1(i1(r,1,e),n),a=Bd(r);let u=i*7+s-o-7+e,d;u<1?(d=r-1,u+=Bd(d)):u>a?(d=r+1,u-=Bd(r)):d=r;const{month:p,day:h}=OP(d,u);return{year:d,month:p,day:h,...Qv(t)}}function M_(t){const{year:e,month:n,day:r}=t,i=RP(e,n,r);return{year:e,ordinal:i,...Qv(t)}}function VT(t){const{year:e,ordinal:n}=t,{month:r,day:i}=OP(e,n);return{year:e,month:r,day:i,...Qv(t)}}function HT(t,e){if(!vn(t.localWeekday)||!vn(t.localWeekNumber)||!vn(t.localWeekYear)){if(!vn(t.weekday)||!vn(t.weekNumber)||!vn(t.weekYear))throw new Td("Cannot mix locale-based week fields with ISO-based week fields");return vn(t.localWeekday)||(t.weekday=t.localWeekday),vn(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),vn(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function B6(t,e=4,n=1){const r=Hv(t.weekYear),i=bo(t.weekNumber,1,jh(t.weekYear,e,n)),s=bo(t.weekday,1,7);return r?i?s?!1:yo("weekday",t.weekday):yo("week",t.weekNumber):yo("weekYear",t.weekYear)}function z6(t){const e=Hv(t.year),n=bo(t.ordinal,1,Bd(t.year));return e?n?!1:yo("ordinal",t.ordinal):yo("year",t.year)}function AP(t){const e=Hv(t.year),n=bo(t.month,1,12),r=bo(t.day,1,Bb(t.year,t.month));return e?n?r?!1:yo("day",t.day):yo("month",t.month):yo("year",t.year)}function qP(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=bo(e,0,23)||e===24&&n===0&&r===0&&i===0,o=bo(n,0,59),a=bo(r,0,59),u=bo(i,0,999);return s?o?a?u?!1:yo("millisecond",i):yo("second",r):yo("minute",n):yo("hour",e)}function vn(t){return typeof t>"u"}function Zl(t){return typeof t=="number"}function Hv(t){return typeof t=="number"&&t%1===0}function W6(t){return typeof t=="string"}function U6(t){return Object.prototype.toString.call(t)==="[object Date]"}function PP(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function FP(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function V6(t){return Array.isArray(t)?t:[t]}function GT(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function H6(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function rf(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function BE(t){if(t==null)return null;if(typeof t!="object")throw new Ai("Week settings must be an object");if(!bo(t.firstDay,1,7)||!bo(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!bo(e,1,7)))throw new Ai("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function bo(t,e,n){return Hv(t)&&t>=e&&t<=n}function G6(t,e){return t-e*Math.floor(t/e)}function ei(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Ll(t){if(!(vn(t)||t===null||t===""))return parseInt(t,10)}function Wu(t){if(!(vn(t)||t===null||t===""))return parseFloat(t)}function o1(t){if(!(vn(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function a1(t,e,n=!1){const r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function Im(t){return t%4===0&&(t%100!==0||t%400===0)}function Bd(t){return Im(t)?366:365}function Bb(t,e){const n=G6(e-1,12)+1,r=t+(e-n)/12;return n===2?Im(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Gv(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function KT(t,e,n){return-s1(i1(t,1,e),n)+e-1}function jh(t,e=4,n=1){const r=KT(t,e,n),i=KT(t+1,e,n);return(Bd(t)-r+i)/7}function zE(t){return t>99?t:t>Fr.twoDigitCutoffYear?1900+t:2e3+t}function DP(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function Kv(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function LP(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Ai(`Invalid unit value ${t}`);return e}function zb(t,e){const n={};for(const r in t)if(rf(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=LP(i)}return n}function mh(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${ei(n,2)}:${ei(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${ei(n,2)}${ei(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Qv(t){return H6(t,["hour","minute","second","millisecond"])}const K6=["January","February","March","April","May","June","July","August","September","October","November","December"],MP=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Q6=["J","F","M","A","M","J","J","A","S","O","N","D"];function $P(t){switch(t){case"narrow":return[...Q6];case"short":return[...MP];case"long":return[...K6];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const BP=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],zP=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],J6=["M","T","W","T","F","S","S"];function WP(t){switch(t){case"narrow":return[...J6];case"short":return[...zP];case"long":return[...BP];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const UP=["AM","PM"],Z6=["Before Christ","Anno Domini"],Y6=["BC","AD"],X6=["B","A"];function VP(t){switch(t){case"narrow":return[...X6];case"short":return[...Y6];case"long":return[...Z6];default:return null}}function eU(t){return UP[t.hour<12?0:1]}function tU(t,e){return WP(e)[t.weekday-1]}function nU(t,e){return $P(e)[t.month-1]}function rU(t,e){return VP(e)[t.year<0?0:1]}function iU(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),u=a===1,d=i[t],p=r?u?d[1]:d[2]||d[1]:u?i[t][0]:t;return o?`${a} ${p} ago`:`in ${a} ${p}`}function QT(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const sU={D:Mb,DD:cP,DDD:dP,DDDD:fP,t:pP,tt:hP,ttt:mP,tttt:gP,T:yP,TT:bP,TTT:vP,TTTT:xP,f:wP,ff:SP,fff:IP,ffff:kP,F:_P,FF:EP,FFF:NP,FFFF:CP};class Pi{static create(e,n={}){return new Pi(e,n)}static parseFormat(e){let n=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||a===n?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,n=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return sU[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return ei(e,n);const r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(x,_)=>this.loc.extract(e,x,_),o=x=>e.isOffsetFixed&&e.offset===0&&x.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,x.format):"",a=()=>r?eU(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(x,_)=>r?nU(e,x):s(_?{month:x}:{month:x,day:"numeric"},"month"),d=(x,_)=>r?tU(e,x):s(_?{weekday:x}:{weekday:x,month:"long",day:"numeric"},"weekday"),p=x=>{const _=Pi.macroTokenToFormatOpts(x);return _?this.formatWithSystemDefault(e,_):x},h=x=>r?rU(e,x):s({era:x},"era"),g=x=>{switch(x){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(x)}};return QT(Pi.parseFormat(n),g)}formatDurationFromString(e,n){const r=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=u=>d=>{const p=r(d);return p?this.num(u.get(p),d.length):d},s=Pi.parseFormat(n),o=s.reduce((u,{literal:d,val:p})=>d?u:u.concat(p),[]),a=e.shiftTo(...o.map(r).filter(u=>u));return QT(s,i(a))}}const HP=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function wf(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function _f(...t){return e=>t.reduce(([n,r,i],s)=>{const[o,a,u]=s(e,i);return[{...n,...o},a||r,u]},[{},null,1]).slice(0,2)}function Sf(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function GP(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=Ll(e[n+i]);return[r,null,n+i]}}const KP=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,oU=`(?:${KP.source}?(?:\\[(${HP.source})\\])?)?`,l1=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,QP=RegExp(`${l1.source}${oU}`),u1=RegExp(`(?:T${QP.source})?`),aU=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,lU=/(\d{4})-?W(\d\d)(?:-?(\d))?/,uU=/(\d{4})-?(\d{3})/,cU=GP("weekYear","weekNumber","weekDay"),dU=GP("year","ordinal"),fU=/(\d{4})-(\d\d)-(\d\d)/,JP=RegExp(`${l1.source} ?(?:${KP.source}|(${HP.source}))?`),pU=RegExp(`(?: ${JP.source})?`);function zd(t,e,n){const r=t[e];return vn(r)?n:Ll(r)}function hU(t,e){return[{year:zd(t,e),month:zd(t,e+1,1),day:zd(t,e+2,1)},null,e+3]}function Ef(t,e){return[{hours:zd(t,e,0),minutes:zd(t,e+1,0),seconds:zd(t,e+2,0),milliseconds:o1(t[e+3])},null,e+4]}function Nm(t,e){const n=!t[e]&&!t[e+1],r=Kv(t[e+1],t[e+2]),i=n?null:es.instance(r);return[{},i,e+3]}function km(t,e){const n=t[e]?tl.create(t[e]):null;return[{},n,e+1]}const mU=RegExp(`^T?${l1.source}$`),gU=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function yU(t){const[e,n,r,i,s,o,a,u,d]=t,p=e[0]==="-",h=u&&u[0]==="-",g=(x,_=!1)=>x!==void 0&&(_||x&&p)?-x:x;return[{years:g(Wu(n)),months:g(Wu(r)),weeks:g(Wu(i)),days:g(Wu(s)),hours:g(Wu(o)),minutes:g(Wu(a)),seconds:g(Wu(u),u==="-0"),milliseconds:g(o1(d),h)}]}const bU={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function c1(t,e,n,r,i,s,o){const a={year:e.length===2?zE(Ll(e)):Ll(e),month:MP.indexOf(n)+1,day:Ll(r),hour:Ll(i),minute:Ll(s)};return o&&(a.second=Ll(o)),t&&(a.weekday=t.length>3?BP.indexOf(t)+1:zP.indexOf(t)+1),a}const vU=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function xU(t){const[,e,n,r,i,s,o,a,u,d,p,h]=t,g=c1(e,i,r,n,s,o,a);let x;return u?x=bU[u]:d?x=0:x=Kv(p,h),[g,new es(x)]}function wU(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const _U=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,SU=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,EU=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function JT(t){const[,e,n,r,i,s,o,a]=t;return[c1(e,i,r,n,s,o,a),es.utcInstance]}function IU(t){const[,e,n,r,i,s,o,a]=t;return[c1(e,a,n,r,i,s,o),es.utcInstance]}const NU=wf(aU,u1),kU=wf(lU,u1),CU=wf(uU,u1),TU=wf(QP),ZP=_f(hU,Ef,Nm,km),jU=_f(cU,Ef,Nm,km),RU=_f(dU,Ef,Nm,km),OU=_f(Ef,Nm,km);function AU(t){return Sf(t,[NU,ZP],[kU,jU],[CU,RU],[TU,OU])}function qU(t){return Sf(wU(t),[vU,xU])}function PU(t){return Sf(t,[_U,JT],[SU,JT],[EU,IU])}function FU(t){return Sf(t,[gU,yU])}const DU=_f(Ef);function LU(t){return Sf(t,[mU,DU])}const MU=wf(fU,pU),$U=wf(JP),BU=_f(Ef,Nm,km);function zU(t){return Sf(t,[MU,ZP],[$U,BU])}const ZT="Invalid Duration",YP={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},WU={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...YP},lo=146097/400,cd=146097/4800,UU={years:{quarters:4,months:12,weeks:lo/7,days:lo,hours:lo*24,minutes:lo*24*60,seconds:lo*24*60*60,milliseconds:lo*24*60*60*1e3},quarters:{months:3,weeks:lo/28,days:lo/4,hours:lo*24/4,minutes:lo*24*60/4,seconds:lo*24*60*60/4,milliseconds:lo*24*60*60*1e3/4},months:{weeks:cd/7,days:cd,hours:cd*24,minutes:cd*24*60,seconds:cd*24*60*60,milliseconds:cd*24*60*60*1e3},...YP},rc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],VU=rc.slice(0).reverse();function jl(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Ln(r)}function XP(t,e){let n=e.milliseconds??0;for(const r of VU.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function YT(t,e){const n=XP(t,e)<0?-1:1;rc.reduceRight((r,i)=>{if(vn(e[i]))return r;if(r){const s=e[r]*n,o=t[i][r],a=Math.floor(s/o);e[i]+=a*n,e[r]-=a*o*n}return i},null),rc.reduce((r,i)=>{if(vn(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function HU(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class Ln{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?UU:WU;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Gn.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return Ln.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new Ai(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ln({values:zb(e,Ln.normalizeUnit),loc:Gn.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Zl(e))return Ln.fromMillis(e);if(Ln.isDuration(e))return e;if(typeof e=="object")return Ln.fromObject(e);throw new Ai(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=FU(e);return r?Ln.fromObject(r,n):Ln.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=LU(e);return r?Ln.fromObject(r,n):Ln.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new Ai("need to specify a reason the Duration is invalid");const r=e instanceof $o?e:new $o(e,n);if(Fr.throwOnInvalid)throw new g6(r);return new Ln({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new uP(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Pi.create(this.loc,r).formatDurationFromString(this,e):ZT}toHuman(e={}){if(!this.isValid)return ZT;const n=rc.map(r=>{const i=this.values[r];return vn(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=a1(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},bn.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?XP(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=Ln.fromDurationLike(e),r={};for(const i of rc)(rf(n.values,i)||rf(this.values,i))&&(r[i]=n.get(i)+this.get(i));return jl(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=Ln.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=LP(e(this.values[r],r));return jl(this,{values:n},!0)}get(e){return this[Ln.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...zb(e,Ln.normalizeUnit)};return jl(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return jl(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return YT(this.matrix,e),jl(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=HU(this.normalize().shiftToAll().toObject());return jl(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Ln.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of rc)if(e.indexOf(o)>=0){s=o;let a=0;for(const d in r)a+=this.matrix[d][o]*r[d],r[d]=0;Zl(i[o])&&(a+=i[o]);const u=Math.trunc(a);n[o]=u,r[o]=(a*1e3-u*1e3)/1e3}else Zl(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return YT(this.matrix,n),jl(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return jl(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of rc)if(!n(this.values[r],e.values[r]))return!1;return!0}}const dd="Invalid Interval";function GU(t,e){return!t||!t.isValid?Pr.invalid("missing or invalid start"):!e||!e.isValid?Pr.invalid("missing or invalid end"):e<t?Pr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Pr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new Ai("need to specify a reason the Interval is invalid");const r=e instanceof $o?e:new $o(e,n);if(Fr.throwOnInvalid)throw new m6(r);return new Pr({invalid:r})}static fromDateTimes(e,n){const r=Op(e),i=Op(n),s=GU(r,i);return s??new Pr({start:r,end:i})}static after(e,n){const r=Ln.fromDurationLike(n),i=Op(e);return Pr.fromDateTimes(i,i.plus(r))}static before(e,n){const r=Ln.fromDurationLike(n),i=Op(e);return Pr.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=bn.fromISO(r,n),o=s.isValid}catch{o=!1}let a,u;try{a=bn.fromISO(i,n),u=a.isValid}catch{u=!1}if(o&&u)return Pr.fromDateTimes(s,a);if(o){const d=Ln.fromISO(i,n);if(d.isValid)return Pr.after(s,d)}else if(u){const d=Ln.fromISO(r,n);if(d.isValid)return Pr.before(a,d)}}return Pr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Pr.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(Op).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;r.push(Pr.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(e){const n=Ln.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(n.mapUnits(u=>u*i));s=+a>+this.e?this.e:a,o.push(Pr.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:Pr.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Pr.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((u,d)=>u.time-d.time);for(const u of a)r+=u.type==="s"?1:-1,r===1?n=u.time:(n&&+n!=+u.time&&i.push(Pr.fromDateTimes(n,u.time)),n=null);return Pr.merge(i)}difference(...e){return Pr.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:dd}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Mb,n={}){return this.isValid?Pi.create(this.s.loc.clone(n),e).formatInterval(this):dd}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:dd}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:dd}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:dd}toFormat(e,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:dd}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):Ln.invalid(this.invalidReason)}mapEndpoints(e){return Pr.fromDateTimes(e(this.s),e(this.e))}}class cy{static hasDST(e=Fr.defaultZone){const n=bn.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return tl.isValidZone(e)}static normalizeZone(e){return zl(e,Fr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Gn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Gn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Gn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Gn.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Gn.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Gn.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Gn.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Gn.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Gn.create(n,null,"gregory").eras(e)}static features(){return{relative:PP(),localeWeek:FP()}}}function XT(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(Ln.fromMillis(r).as("days"))}function KU(t,e,n){const r=[["years",(u,d)=>d.year-u.year],["quarters",(u,d)=>d.quarter-u.quarter+(d.year-u.year)*4],["months",(u,d)=>d.month-u.month+(d.year-u.year)*12],["weeks",(u,d)=>{const p=XT(u,d);return(p-p%7)/7}],["days",XT]],i={},s=t;let o,a;for(const[u,d]of r)n.indexOf(u)>=0&&(o=u,i[u]=d(t,e),a=s.plus(i),a>e?(i[u]--,t=s.plus(i),t>e&&(a=t,i[u]--,t=s.plus(i))):t=a);return[t,i,a,o]}function QU(t,e,n,r){let[i,s,o,a]=KU(t,e,n);const u=e-i,d=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);d.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+u/(o-i)));const p=Ln.fromObject(s,r);return d.length>0?Ln.fromMillis(u,r).shiftTo(...d).plus(p):p}const JU="missing Intl.DateTimeFormat.formatToParts support";function Wn(t,e=n=>n){return{regex:t,deser:([n])=>e(M6(n))}}const ZU="\xa0",eF=`[ ${ZU}]`,tF=new RegExp(eF,"g");function YU(t){return t.replace(/\./g,"\\.?").replace(tF,eF)}function ej(t){return t.replace(/\./g,"").replace(tF," ").toLowerCase()}function jo(t,e){return t===null?null:{regex:RegExp(t.map(YU).join("|")),deser:([n])=>t.findIndex(r=>ej(n)===ej(r))+e}}function tj(t,e){return{regex:t,deser:([,n,r])=>Kv(n,r),groups:e}}function dy(t){return{regex:t,deser:([e])=>e}}function XU(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function eV(t,e){const n=To(e),r=To(e,"{2}"),i=To(e,"{3}"),s=To(e,"{4}"),o=To(e,"{6}"),a=To(e,"{1,2}"),u=To(e,"{1,3}"),d=To(e,"{1,6}"),p=To(e,"{1,9}"),h=To(e,"{2,4}"),g=To(e,"{4,6}"),x=k=>({regex:RegExp(XU(k.val)),deser:([I])=>I,literal:!0}),S=(k=>{if(t.literal)return x(k);switch(k.val){case"G":return jo(e.eras("short"),0);case"GG":return jo(e.eras("long"),0);case"y":return Wn(d);case"yy":return Wn(h,zE);case"yyyy":return Wn(s);case"yyyyy":return Wn(g);case"yyyyyy":return Wn(o);case"M":return Wn(a);case"MM":return Wn(r);case"MMM":return jo(e.months("short",!0),1);case"MMMM":return jo(e.months("long",!0),1);case"L":return Wn(a);case"LL":return Wn(r);case"LLL":return jo(e.months("short",!1),1);case"LLLL":return jo(e.months("long",!1),1);case"d":return Wn(a);case"dd":return Wn(r);case"o":return Wn(u);case"ooo":return Wn(i);case"HH":return Wn(r);case"H":return Wn(a);case"hh":return Wn(r);case"h":return Wn(a);case"mm":return Wn(r);case"m":return Wn(a);case"q":return Wn(a);case"qq":return Wn(r);case"s":return Wn(a);case"ss":return Wn(r);case"S":return Wn(u);case"SSS":return Wn(i);case"u":return dy(p);case"uu":return dy(a);case"uuu":return Wn(n);case"a":return jo(e.meridiems(),0);case"kkkk":return Wn(s);case"kk":return Wn(h,zE);case"W":return Wn(a);case"WW":return Wn(r);case"E":case"c":return Wn(n);case"EEE":return jo(e.weekdays("short",!1),1);case"EEEE":return jo(e.weekdays("long",!1),1);case"ccc":return jo(e.weekdays("short",!0),1);case"cccc":return jo(e.weekdays("long",!0),1);case"Z":case"ZZ":return tj(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return tj(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return dy(/[a-z_+-/]{1,256}?/i);case" ":return dy(/[^\S\n\r]/);default:return x(k)}})(t)||{invalidReason:JU};return S.token=t,S}const tV={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function nV(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const u=/^\s+$/.test(i);return{literal:!u,val:u?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=tV[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function rV(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function iV(t,e,n){const r=t.match(e);if(r){const i={};let s=1;for(const o in n)if(rf(n,o)){const a=n[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+u))),s+=u}return[r,i]}else return[r,{}]}function sV(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return vn(t.z)||(n=tl.create(t.z)),vn(t.Z)||(n||(n=new es(t.Z)),r=t.Z),vn(t.q)||(t.M=(t.q-1)*3+1),vn(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),vn(t.u)||(t.S=o1(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),n,r]}let $_=null;function oV(){return $_||($_=bn.fromMillis(0x16a2e5618e3)),$_}function aV(t,e){if(t.literal)return t;const n=Pi.macroTokenToFormatOpts(t.val),r=sF(n,e);return r==null||r.includes(void 0)?t:r}function nF(t,e){return Array.prototype.concat(...t.map(n=>aV(n,e)))}class rF{constructor(e,n){if(this.locale=e,this.format=n,this.tokens=nF(Pi.parseFormat(n),e),this.units=this.tokens.map(r=>eV(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=rV(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[n,r]=iV(e,this.regex,this.handlers),[i,s,o]=r?sV(r):[null,null,void 0];if(rf(r,"a")&&rf(r,"H"))throw new Td("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function iF(t,e,n){return new rF(t,n).explainFromTokens(e)}function lV(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=iF(t,e,n);return[r,i,s,o]}function sF(t,e){if(!t)return null;const r=Pi.create(e,t).dtFormatter(oV()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>nV(o,t,s))}const B_="Invalid DateTime",uV=864e13;function Yp(t){return new $o("unsupported zone",`the zone "${t.name}" is not supported`)}function z_(t){return t.weekData===null&&(t.weekData=$b(t.c)),t.weekData}function W_(t){return t.localWeekData===null&&(t.localWeekData=$b(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Uu(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new bn({...n,...e,old:n})}function oF(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function fy(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Qy(t,e,n){return oF(Gv(t),e,n)}function nj(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,Bb(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Ln.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=Gv(s);let[u,d]=oF(a,n,t.zone);return o!==0&&(u+=o,d=t.zone.offset(u)),{ts:u,o:d}}function fd(t,e,n,r,i,s){const{setZone:o,zone:a}=n;if(t&&Object.keys(t).length!==0||e){const u=e||a,d=bn.fromObject(t,{...n,zone:u,specificOffset:s});return o?d:d.setZone(a)}else return bn.invalid(new $o("unparsable",`the input "${i}" can't be parsed as ${r}`))}function py(t,e,n=!0){return t.isValid?Pi.create(Gn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function U_(t,e){const n=t.c.year>9999||t.c.year<0;let r="";return n&&t.c.year>=0&&(r+="+"),r+=ei(t.c.year,n?6:4),e?(r+="-",r+=ei(t.c.month),r+="-",r+=ei(t.c.day)):(r+=ei(t.c.month),r+=ei(t.c.day)),r}function rj(t,e,n,r,i,s){let o=ei(t.c.hour);return e?(o+=":",o+=ei(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=":")):o+=ei(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=ei(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=ei(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=ei(Math.trunc(-t.o/60)),o+=":",o+=ei(Math.trunc(-t.o%60))):(o+="+",o+=ei(Math.trunc(t.o/60)),o+=":",o+=ei(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const aF={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},cV={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},dV={ordinal:1,hour:0,minute:0,second:0,millisecond:0},lF=["year","month","day","hour","minute","second","millisecond"],fV=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],pV=["year","ordinal","hour","minute","second","millisecond"];function hV(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new uP(t);return e}function ij(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return hV(t)}}function mV(t){return Zy[t]||(Jy===void 0&&(Jy=Fr.now()),Zy[t]=t.offset(Jy)),Zy[t]}function sj(t,e){const n=zl(e.zone,Fr.defaultZone);if(!n.isValid)return bn.invalid(Yp(n));const r=Gn.fromObject(e);let i,s;if(vn(t.year))i=Fr.now();else{for(const u of lF)vn(t[u])&&(t[u]=aF[u]);const o=AP(t)||qP(t);if(o)return bn.invalid(o);const a=mV(n);[i,s]=Qy(t,a,n)}return new bn({ts:i,zone:n,loc:r,o:s})}function oj(t,e,n){const r=vn(n.round)?!0:n.round,i=(o,a)=>(o=a1(o,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(o,a)),s=o=>n.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(n.unit)return i(s(n.unit),n.unit);for(const o of n.units){const a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(t>e?-0:0,n.units[n.units.length-1])}function aj(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}let Jy,Zy={};class bn{constructor(e){const n=e.zone||Fr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new $o("invalid input"):null)||(n.isValid?null:Yp(n));this.ts=vn(e.ts)?Fr.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{const a=Zl(e.o)&&!e.old?e.o:n.offset(this.ts);i=fy(this.ts,a),r=Number.isNaN(i.year)?new $o("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=n,this.loc=e.loc||Gn.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new bn({})}static local(){const[e,n]=aj(arguments),[r,i,s,o,a,u,d]=n;return sj({year:r,month:i,day:s,hour:o,minute:a,second:u,millisecond:d},e)}static utc(){const[e,n]=aj(arguments),[r,i,s,o,a,u,d]=n;return e.zone=es.utcInstance,sj({year:r,month:i,day:s,hour:o,minute:a,second:u,millisecond:d},e)}static fromJSDate(e,n={}){const r=U6(e)?e.valueOf():NaN;if(Number.isNaN(r))return bn.invalid("invalid input");const i=zl(n.zone,Fr.defaultZone);return i.isValid?new bn({ts:r,zone:i,loc:Gn.fromObject(n)}):bn.invalid(Yp(i))}static fromMillis(e,n={}){if(Zl(e))return e<-864e13||e>uV?bn.invalid("Timestamp out of range"):new bn({ts:e,zone:zl(n.zone,Fr.defaultZone),loc:Gn.fromObject(n)});throw new Ai(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Zl(e))return new bn({ts:e*1e3,zone:zl(n.zone,Fr.defaultZone),loc:Gn.fromObject(n)});throw new Ai("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=zl(n.zone,Fr.defaultZone);if(!r.isValid)return bn.invalid(Yp(r));const i=Gn.fromObject(n),s=zb(e,ij),{minDaysInFirstWeek:o,startOfWeek:a}=HT(s,i),u=Fr.now(),d=vn(n.specificOffset)?r.offset(u):n.specificOffset,p=!vn(s.ordinal),h=!vn(s.year),g=!vn(s.month)||!vn(s.day),x=h||g,_=s.weekYear||s.weekNumber;if((x||p)&&_)throw new Td("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(g&&p)throw new Td("Can't mix ordinal dates with month/day");const S=_||s.weekday&&!x;let k,I,E=fy(u,d);S?(k=fV,I=cV,E=$b(E,o,a)):p?(k=pV,I=dV,E=M_(E)):(k=lF,I=aF);let C=!1;for(const B of k){const D=s[B];vn(D)?C?s[B]=I[B]:s[B]=E[B]:C=!0}const j=S?B6(s,o,a):p?z6(s):AP(s),q=j||qP(s);if(q)return bn.invalid(q);const F=S?UT(s,o,a):p?VT(s):s,[$,P]=Qy(F,d,r),O=new bn({ts:$,zone:r,o:P,loc:i});return s.weekday&&x&&e.weekday!==O.weekday?bn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${O.toISO()}`):O.isValid?O:bn.invalid(O.invalid)}static fromISO(e,n={}){const[r,i]=AU(e);return fd(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=qU(e);return fd(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=PU(e);return fd(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(vn(e)||vn(n))throw new Ai("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Gn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,u,d,p]=lV(o,e,n);return p?bn.invalid(p):fd(a,u,r,`format ${n}`,e,d)}static fromString(e,n,r={}){return bn.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=zU(e);return fd(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new Ai("need to specify a reason the DateTime is invalid");const r=e instanceof $o?e:new $o(e,n);if(Fr.throwOnInvalid)throw new h6(r);return new bn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=sF(e,Gn.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return nF(Pi.parseFormat(e),Gn.fromObject(n)).map(i=>i.val).join("")}static resetCache(){Jy=void 0,Zy={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?z_(this).weekYear:NaN}get weekNumber(){return this.isValid?z_(this).weekNumber:NaN}get weekday(){return this.isValid?z_(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?W_(this).weekday:NaN}get localWeekNumber(){return this.isValid?W_(this).weekNumber:NaN}get localWeekYear(){return this.isValid?W_(this).weekYear:NaN}get ordinal(){return this.isValid?M_(this.c).ordinal:NaN}get monthShort(){return this.isValid?cy.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?cy.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?cy.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?cy.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=Gv(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*n),a=this.zone.offset(r-s*n);if(o===a)return[this];const u=r-o*n,d=r-a*n,p=fy(u,o),h=fy(d,a);return p.hour===h.hour&&p.minute===h.minute&&p.second===h.second&&p.millisecond===h.millisecond?[Uu(this,{ts:u}),Uu(this,{ts:d})]:[this]}get isInLeapYear(){return Im(this.year)}get daysInMonth(){return Bb(this.year,this.month)}get daysInYear(){return this.isValid?Bd(this.year):NaN}get weeksInWeekYear(){return this.isValid?jh(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?jh(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=Pi.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(es.instance(e),n)}toLocal(){return this.setZone(Fr.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=zl(e,Fr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const s=e.offset(this.ts),o=this.toObject();[i]=Qy(o,s,e)}return Uu(this,{ts:i,zone:e})}else return bn.invalid(Yp(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return Uu(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=zb(e,ij),{minDaysInFirstWeek:r,startOfWeek:i}=HT(n,this.loc),s=!vn(n.weekYear)||!vn(n.weekNumber)||!vn(n.weekday),o=!vn(n.ordinal),a=!vn(n.year),u=!vn(n.month)||!vn(n.day),d=a||u,p=n.weekYear||n.weekNumber;if((d||o)&&p)throw new Td("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new Td("Can't mix ordinal dates with month/day");let h;s?h=UT({...$b(this.c,r,i),...n},r,i):vn(n.ordinal)?(h={...this.toObject(),...n},vn(n.day)&&(h.day=Math.min(Bb(h.year,h.month),h.day))):h=VT({...M_(this.c),...n});const[g,x]=Qy(h,this.o,this.zone);return Uu(this,{ts:g,o:x})}plus(e){if(!this.isValid)return this;const n=Ln.fromDurationLike(e);return Uu(this,nj(this,n))}minus(e){if(!this.isValid)return this;const n=Ln.fromDurationLike(e).negate();return Uu(this,nj(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=Ln.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?Pi.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):B_}toLocaleString(e=Mb,n={}){return this.isValid?Pi.create(this.loc.clone(n),e).formatDateTime(this):B_}toLocaleParts(e={}){return this.isValid?Pi.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=U_(this,o);return a+="T",a+=rj(this,o,n,r,i,s),a}toISODate({format:e="extended"}={}){return this.isValid?U_(this,e==="extended"):null}toISOWeekDate(){return py(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+rj(this,o==="extended",n,e,r,s):null}toRFC2822(){return py(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return py(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?U_(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),py(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():B_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return Ln.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=V6(n).map(Ln.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,u=o?e:this,d=QU(a,u,s,i);return o?d.negate():d}diffNow(e="milliseconds",n={}){return this.diff(bn.now(),e,n)}until(e){return this.isValid?Pr.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||bn.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),oj(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?oj(e.base||bn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(bn.isDateTime))throw new Ai("min requires all arguments be DateTimes");return GT(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(bn.isDateTime))throw new Ai("max requires all arguments be DateTimes");return GT(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Gn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return iF(o,e,n)}static fromStringExplain(e,n,r={}){return bn.fromFormatExplain(e,n,r)}static buildFormatParser(e,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Gn.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new rF(s,e)}static fromFormatParser(e,n,r={}){if(vn(e)||vn(n))throw new Ai("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Gn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new Ai(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:a,zone:u,specificOffset:d,invalidReason:p}=n.explainFromTokens(e);return p?bn.invalid(p):fd(a,u,r,`format ${n.format}`,e,d)}static get DATE_SHORT(){return Mb}static get DATE_MED(){return cP}static get DATE_MED_WITH_WEEKDAY(){return y6}static get DATE_FULL(){return dP}static get DATE_HUGE(){return fP}static get TIME_SIMPLE(){return pP}static get TIME_WITH_SECONDS(){return hP}static get TIME_WITH_SHORT_OFFSET(){return mP}static get TIME_WITH_LONG_OFFSET(){return gP}static get TIME_24_SIMPLE(){return yP}static get TIME_24_WITH_SECONDS(){return bP}static get TIME_24_WITH_SHORT_OFFSET(){return vP}static get TIME_24_WITH_LONG_OFFSET(){return xP}static get DATETIME_SHORT(){return wP}static get DATETIME_SHORT_WITH_SECONDS(){return _P}static get DATETIME_MED(){return SP}static get DATETIME_MED_WITH_SECONDS(){return EP}static get DATETIME_MED_WITH_WEEKDAY(){return b6}static get DATETIME_FULL(){return IP}static get DATETIME_FULL_WITH_SECONDS(){return NP}static get DATETIME_HUGE(){return kP}static get DATETIME_HUGE_WITH_SECONDS(){return CP}}function Op(t){if(bn.isDateTime(t))return t;if(t&&t.valueOf&&Zl(t.valueOf()))return bn.fromJSDate(t);if(t&&typeof t=="object")return bn.fromObject(t);throw new Ai(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function uF(t,e){return function(){return t.apply(e,arguments)}}const{toString:gV}=Object.prototype,{getPrototypeOf:d1}=Object,Jv=(t=>e=>{const n=gV.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Jo=t=>(t=t.toLowerCase(),e=>Jv(e)===t),Zv=t=>e=>typeof e===t,{isArray:If}=Array,Rh=Zv("undefined");function yV(t){return t!==null&&!Rh(t)&&t.constructor!==null&&!Rh(t.constructor)&&zs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const cF=Jo("ArrayBuffer");function bV(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&cF(t.buffer),e}const vV=Zv("string"),zs=Zv("function"),dF=Zv("number"),Yv=t=>t!==null&&typeof t=="object",xV=t=>t===!0||t===!1,Yy=t=>{if(Jv(t)!=="object")return!1;const e=d1(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},wV=Jo("Date"),_V=Jo("File"),SV=Jo("Blob"),EV=Jo("FileList"),IV=t=>Yv(t)&&zs(t.pipe),NV=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||zs(t.append)&&((e=Jv(t))==="formdata"||e==="object"&&zs(t.toString)&&t.toString()==="[object FormData]"))},kV=Jo("URLSearchParams"),[CV,TV,jV,RV]=["ReadableStream","Request","Response","Headers"].map(Jo),OV=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),If(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function fF(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const ic=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pF=t=>!Rh(t)&&t!==ic;function WE(){const{caseless:t}=pF(this)&&this||{},e={},n=(r,i)=>{const s=t&&fF(e,i)||i;Yy(e[s])&&Yy(r)?e[s]=WE(e[s],r):Yy(r)?e[s]=WE({},r):If(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Cm(arguments[r],n);return e}const AV=(t,e,n,{allOwnKeys:r}={})=>(Cm(e,(i,s)=>{n&&zs(i)?t[s]=uF(i,n):t[s]=i},{allOwnKeys:r}),t),qV=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),PV=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},FV=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&d1(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},DV=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},LV=t=>{if(!t)return null;if(If(t))return t;let e=t.length;if(!dF(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},MV=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&d1(Uint8Array)),$V=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},BV=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},zV=Jo("HTMLFormElement"),WV=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),lj=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),UV=Jo("RegExp"),hF=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Cm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},VV=t=>{hF(t,(e,n)=>{if(zs(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(zs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},HV=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return If(t)?r(t):r(String(t).split(e)),n},GV=()=>{},KV=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,V_="abcdefghijklmnopqrstuvwxyz",uj="0123456789",mF={DIGIT:uj,ALPHA:V_,ALPHA_DIGIT:V_+V_.toUpperCase()+uj},QV=(t=16,e=mF.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function JV(t){return!!(t&&zs(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const ZV=t=>{const e=new Array(10),n=(r,i)=>{if(Yv(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=If(r)?[]:{};return Cm(r,(o,a)=>{const u=n(o,i+1);!Rh(u)&&(s[a]=u)}),e[i]=void 0,s}}return r};return n(t,0)},YV=Jo("AsyncFunction"),XV=t=>t&&(Yv(t)||zs(t))&&zs(t.then)&&zs(t.catch),gF=((t,e)=>t?setImmediate:e?((n,r)=>(ic.addEventListener("message",({source:i,data:s})=>{i===ic&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),ic.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",zs(ic.postMessage)),e5=typeof queueMicrotask<"u"?queueMicrotask.bind(ic):typeof process<"u"&&process.nextTick||gF,Ye={isArray:If,isArrayBuffer:cF,isBuffer:yV,isFormData:NV,isArrayBufferView:bV,isString:vV,isNumber:dF,isBoolean:xV,isObject:Yv,isPlainObject:Yy,isReadableStream:CV,isRequest:TV,isResponse:jV,isHeaders:RV,isUndefined:Rh,isDate:wV,isFile:_V,isBlob:SV,isRegExp:UV,isFunction:zs,isStream:IV,isURLSearchParams:kV,isTypedArray:MV,isFileList:EV,forEach:Cm,merge:WE,extend:AV,trim:OV,stripBOM:qV,inherits:PV,toFlatObject:FV,kindOf:Jv,kindOfTest:Jo,endsWith:DV,toArray:LV,forEachEntry:$V,matchAll:BV,isHTMLForm:zV,hasOwnProperty:lj,hasOwnProp:lj,reduceDescriptors:hF,freezeMethods:VV,toObjectSet:HV,toCamelCase:WV,noop:GV,toFiniteNumber:KV,findKey:fF,global:ic,isContextDefined:pF,ALPHABET:mF,generateString:QV,isSpecCompliantForm:JV,toJSONObject:ZV,isAsyncFn:YV,isThenable:XV,setImmediate:gF,asap:e5};function Nn(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ye.inherits(Nn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ye.toJSONObject(this.config),code:this.code,status:this.status}}});const yF=Nn.prototype,bF={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{bF[t]={value:t}});Object.defineProperties(Nn,bF);Object.defineProperty(yF,"isAxiosError",{value:!0});Nn.from=(t,e,n,r,i,s)=>{const o=Object.create(yF);return Ye.toFlatObject(t,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),Nn.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const t5=null;function UE(t){return Ye.isPlainObject(t)||Ye.isArray(t)}function vF(t){return Ye.endsWith(t,"[]")?t.slice(0,-2):t}function cj(t,e,n){return t?t.concat(e).map(function(i,s){return i=vF(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function n5(t){return Ye.isArray(t)&&!t.some(UE)}const r5=Ye.toFlatObject(Ye,{},null,function(e){return/^is[A-Z]/.test(e)});function Xv(t,e,n){if(!Ye.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ye.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,k){return!Ye.isUndefined(k[S])});const r=n.metaTokens,i=n.visitor||p,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Ye.isSpecCompliantForm(e);if(!Ye.isFunction(i))throw new TypeError("visitor must be a function");function d(_){if(_===null)return"";if(Ye.isDate(_))return _.toISOString();if(!u&&Ye.isBlob(_))throw new Nn("Blob is not supported. Use a Buffer instead.");return Ye.isArrayBuffer(_)||Ye.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,S,k){let I=_;if(_&&!k&&typeof _=="object"){if(Ye.endsWith(S,"{}"))S=r?S:S.slice(0,-2),_=JSON.stringify(_);else if(Ye.isArray(_)&&n5(_)||(Ye.isFileList(_)||Ye.endsWith(S,"[]"))&&(I=Ye.toArray(_)))return S=vF(S),I.forEach(function(C,j){!(Ye.isUndefined(C)||C===null)&&e.append(o===!0?cj([S],j,s):o===null?S:S+"[]",d(C))}),!1}return UE(_)?!0:(e.append(cj(k,S,s),d(_)),!1)}const h=[],g=Object.assign(r5,{defaultVisitor:p,convertValue:d,isVisitable:UE});function x(_,S){if(!Ye.isUndefined(_)){if(h.indexOf(_)!==-1)throw Error("Circular reference detected in "+S.join("."));h.push(_),Ye.forEach(_,function(I,E){(!(Ye.isUndefined(I)||I===null)&&i.call(e,I,Ye.isString(E)?E.trim():E,S,g))===!0&&x(I,S?S.concat(E):[E])}),h.pop()}}if(!Ye.isObject(t))throw new TypeError("data must be an object");return x(t),e}function dj(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function f1(t,e){this._pairs=[],t&&Xv(t,this,e)}const xF=f1.prototype;xF.append=function(e,n){this._pairs.push([e,n])};xF.toString=function(e){const n=e?function(r){return e.call(this,r,dj)}:dj;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function i5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wF(t,e,n){if(!e)return t;const r=n&&n.encode||i5;Ye.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Ye.isURLSearchParams(e)?e.toString():new f1(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class fj{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const _F={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},s5=typeof URLSearchParams<"u"?URLSearchParams:f1,o5=typeof FormData<"u"?FormData:null,a5=typeof Blob<"u"?Blob:null,l5={isBrowser:!0,classes:{URLSearchParams:s5,FormData:o5,Blob:a5},protocols:["http","https","file","blob","url","data"]},p1=typeof window<"u"&&typeof document<"u",VE=typeof navigator=="object"&&navigator||void 0,u5=p1&&(!VE||["ReactNative","NativeScript","NS"].indexOf(VE.product)<0),c5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",d5=p1&&window.location.href||"http://localhost",f5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:p1,hasStandardBrowserEnv:u5,hasStandardBrowserWebWorkerEnv:c5,navigator:VE,origin:d5},Symbol.toStringTag,{value:"Module"})),Fi={...f5,...l5};function p5(t,e){return Xv(t,new Fi.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Fi.isNode&&Ye.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function h5(t){return Ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function m5(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function SF(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=s>=n.length;return o=!o&&Ye.isArray(i)?i.length:o,u?(Ye.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Ye.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Ye.isArray(i[o])&&(i[o]=m5(i[o])),!a)}if(Ye.isFormData(t)&&Ye.isFunction(t.entries)){const n={};return Ye.forEachEntry(t,(r,i)=>{e(h5(r),i,n,0)}),n}return null}function g5(t,e,n){if(Ye.isString(t))try{return(e||JSON.parse)(t),Ye.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Tm={transitional:_F,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Ye.isObject(e);if(s&&Ye.isHTMLForm(e)&&(e=new FormData(e)),Ye.isFormData(e))return i?JSON.stringify(SF(e)):e;if(Ye.isArrayBuffer(e)||Ye.isBuffer(e)||Ye.isStream(e)||Ye.isFile(e)||Ye.isBlob(e)||Ye.isReadableStream(e))return e;if(Ye.isArrayBufferView(e))return e.buffer;if(Ye.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return p5(e,this.formSerializer).toString();if((a=Ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Xv(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),g5(e)):e}],transformResponse:[function(e){const n=this.transitional||Tm.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Ye.isResponse(e)||Ye.isReadableStream(e))return e;if(e&&Ye.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Nn.from(a,Nn.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fi.classes.FormData,Blob:Fi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ye.forEach(["delete","get","head","post","put","patch"],t=>{Tm.headers[t]={}});const y5=Ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),b5=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&y5[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},pj=Symbol("internals");function Ap(t){return t&&String(t).trim().toLowerCase()}function Xy(t){return t===!1||t==null?t:Ye.isArray(t)?t.map(Xy):String(t)}function v5(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const x5=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function H_(t,e,n,r,i){if(Ye.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Ye.isString(e)){if(Ye.isString(r))return e.indexOf(r)!==-1;if(Ye.isRegExp(r))return r.test(e)}}function w5(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function _5(t,e){const n=Ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Ss=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,u,d){const p=Ap(u);if(!p)throw new Error("header name must be a non-empty string");const h=Ye.findKey(i,p);(!h||i[h]===void 0||d===!0||d===void 0&&i[h]!==!1)&&(i[h||u]=Xy(a))}const o=(a,u)=>Ye.forEach(a,(d,p)=>s(d,p,u));if(Ye.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Ye.isString(e)&&(e=e.trim())&&!x5(e))o(b5(e),n);else if(Ye.isHeaders(e))for(const[a,u]of e.entries())s(u,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Ap(e),e){const r=Ye.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return v5(i);if(Ye.isFunction(n))return n.call(this,i,r);if(Ye.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ap(e),e){const r=Ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||H_(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Ap(o),o){const a=Ye.findKey(r,o);a&&(!n||H_(r,r[a],a,n))&&(delete r[a],i=!0)}}return Ye.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||H_(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Ye.forEach(this,(i,s)=>{const o=Ye.findKey(r,s);if(o){n[o]=Xy(i),delete n[s];return}const a=e?w5(s):String(s).trim();a!==s&&delete n[s],n[a]=Xy(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ye.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Ye.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[pj]=this[pj]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Ap(o);r[a]||(_5(i,o),r[a]=!0)}return Ye.isArray(e)?e.forEach(s):s(e),this}};Ss.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ye.reduceDescriptors(Ss.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ye.freezeMethods(Ss);function G_(t,e){const n=this||Tm,r=e||n,i=Ss.from(r.headers);let s=r.data;return Ye.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function EF(t){return!!(t&&t.__CANCEL__)}function Nf(t,e,n){Nn.call(this,t??"canceled",Nn.ERR_CANCELED,e,n),this.name="CanceledError"}Ye.inherits(Nf,Nn,{__CANCEL__:!0});function IF(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Nn("Request failed with status code "+n.status,[Nn.ERR_BAD_REQUEST,Nn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function S5(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function E5(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),p=r[s];o||(o=d),n[i]=u,r[i]=d;let h=s,g=0;for(;h!==i;)g+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),d-o<e)return;const x=p&&d-p;return x?Math.round(g*1e3/x):void 0}}function I5(t,e){let n=0,r=1e3/e,i,s;const o=(d,p=Date.now())=>{n=p,i=null,s&&(clearTimeout(s),s=null),t.apply(null,d)};return[(...d)=>{const p=Date.now(),h=p-n;h>=r?o(d,p):(i=d,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const Wb=(t,e,n=3)=>{let r=0;const i=E5(50,250);return I5(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,u=o-r,d=i(u),p=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:d||void 0,estimated:d&&a&&p?(a-o)/d:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},hj=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},mj=t=>(...e)=>Ye.asap(()=>t(...e)),N5=Fi.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Fi.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Fi.origin),Fi.navigator&&/(msie|trident)/i.test(Fi.navigator.userAgent)):()=>!0,k5=Fi.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Ye.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ye.isString(r)&&o.push("path="+r),Ye.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function C5(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function T5(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function NF(t,e){return t&&!C5(e)?T5(t,e):e}const gj=t=>t instanceof Ss?{...t}:t;function gc(t,e){e=e||{};const n={};function r(d,p,h,g){return Ye.isPlainObject(d)&&Ye.isPlainObject(p)?Ye.merge.call({caseless:g},d,p):Ye.isPlainObject(p)?Ye.merge({},p):Ye.isArray(p)?p.slice():p}function i(d,p,h,g){if(Ye.isUndefined(p)){if(!Ye.isUndefined(d))return r(void 0,d,h,g)}else return r(d,p,h,g)}function s(d,p){if(!Ye.isUndefined(p))return r(void 0,p)}function o(d,p){if(Ye.isUndefined(p)){if(!Ye.isUndefined(d))return r(void 0,d)}else return r(void 0,p)}function a(d,p,h){if(h in e)return r(d,p);if(h in t)return r(void 0,d)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(d,p,h)=>i(gj(d),gj(p),h,!0)};return Ye.forEach(Object.keys(Object.assign({},t,e)),function(p){const h=u[p]||i,g=h(t[p],e[p],p);Ye.isUndefined(g)&&h!==a||(n[p]=g)}),n}const kF=t=>{const e=gc({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Ss.from(o),e.url=wF(NF(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(Ye.isFormData(n)){if(Fi.hasStandardBrowserEnv||Fi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[d,...p]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...p].join("; "))}}if(Fi.hasStandardBrowserEnv&&(r&&Ye.isFunction(r)&&(r=r(e)),r||r!==!1&&N5(e.url))){const d=i&&s&&k5.read(s);d&&o.set(i,d)}return e},j5=typeof XMLHttpRequest<"u",R5=j5&&function(t){return new Promise(function(n,r){const i=kF(t);let s=i.data;const o=Ss.from(i.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:d}=i,p,h,g,x,_;function S(){x&&x(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function I(){if(!k)return;const C=Ss.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),q={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:C,config:t,request:k};IF(function($){n($),S()},function($){r($),S()},q),k=null}"onloadend"in k?k.onloadend=I:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(I)},k.onabort=function(){k&&(r(new Nn("Request aborted",Nn.ECONNABORTED,t,k)),k=null)},k.onerror=function(){r(new Nn("Network Error",Nn.ERR_NETWORK,t,k)),k=null},k.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const q=i.transitional||_F;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),r(new Nn(j,q.clarifyTimeoutError?Nn.ETIMEDOUT:Nn.ECONNABORTED,t,k)),k=null},s===void 0&&o.setContentType(null),"setRequestHeader"in k&&Ye.forEach(o.toJSON(),function(j,q){k.setRequestHeader(q,j)}),Ye.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),a&&a!=="json"&&(k.responseType=i.responseType),d&&([g,_]=Wb(d,!0),k.addEventListener("progress",g)),u&&k.upload&&([h,x]=Wb(u),k.upload.addEventListener("progress",h),k.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(p=C=>{k&&(r(!C||C.type?new Nf(null,t,k):C),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const E=S5(i.url);if(E&&Fi.protocols.indexOf(E)===-1){r(new Nn("Unsupported protocol "+E+":",Nn.ERR_BAD_REQUEST,t));return}k.send(s||null)})},O5=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(d){if(!i){i=!0,a();const p=d instanceof Error?d:this.reason;r.abort(p instanceof Nn?p:new Nf(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,s(new Nn(`timeout ${e} of ms exceeded`,Nn.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),t=null)};t.forEach(d=>d.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>Ye.asap(a),u}},A5=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},q5=async function*(t,e){for await(const n of P5(t))yield*A5(n,e)},P5=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},yj=(t,e,n,r)=>{const i=q5(t,e);let s=0,o,a=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:p}=await i.next();if(d){a(),u.close();return}let h=p.byteLength;if(n){let g=s+=h;n(g)}u.enqueue(new Uint8Array(p))}catch(d){throw a(d),d}},cancel(u){return a(u),i.return()}},{highWaterMark:2})},ex=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",CF=ex&&typeof ReadableStream=="function",F5=ex&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),TF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},D5=CF&&TF(()=>{let t=!1;const e=new Request(Fi.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),bj=64*1024,HE=CF&&TF(()=>Ye.isReadableStream(new Response("").body)),Ub={stream:HE&&(t=>t.body)};ex&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ub[e]&&(Ub[e]=Ye.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Nn(`Response type '${e}' is not supported`,Nn.ERR_NOT_SUPPORT,r)})})})(new Response);const L5=async t=>{if(t==null)return 0;if(Ye.isBlob(t))return t.size;if(Ye.isSpecCompliantForm(t))return(await new Request(Fi.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ye.isArrayBufferView(t)||Ye.isArrayBuffer(t))return t.byteLength;if(Ye.isURLSearchParams(t)&&(t=t+""),Ye.isString(t))return(await F5(t)).byteLength},M5=async(t,e)=>{const n=Ye.toFiniteNumber(t.getContentLength());return n??L5(e)},$5=ex&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:u,responseType:d,headers:p,withCredentials:h="same-origin",fetchOptions:g}=kF(t);d=d?(d+"").toLowerCase():"text";let x=O5([i,s&&s.toAbortSignal()],o),_;const S=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let k;try{if(u&&D5&&n!=="get"&&n!=="head"&&(k=await M5(p,r))!==0){let q=new Request(e,{method:"POST",body:r,duplex:"half"}),F;if(Ye.isFormData(r)&&(F=q.headers.get("content-type"))&&p.setContentType(F),q.body){const[$,P]=hj(k,Wb(mj(u)));r=yj(q.body,bj,$,P)}}Ye.isString(h)||(h=h?"include":"omit");const I="credentials"in Request.prototype;_=new Request(e,{...g,signal:x,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:I?h:void 0});let E=await fetch(_);const C=HE&&(d==="stream"||d==="response");if(HE&&(a||C&&S)){const q={};["status","statusText","headers"].forEach(O=>{q[O]=E[O]});const F=Ye.toFiniteNumber(E.headers.get("content-length")),[$,P]=a&&hj(F,Wb(mj(a),!0))||[];E=new Response(yj(E.body,bj,$,()=>{P&&P(),S&&S()}),q)}d=d||"text";let j=await Ub[Ye.findKey(Ub,d)||"text"](E,t);return!C&&S&&S(),await new Promise((q,F)=>{IF(q,F,{data:j,headers:Ss.from(E.headers),status:E.status,statusText:E.statusText,config:t,request:_})})}catch(I){throw S&&S(),I&&I.name==="TypeError"&&/fetch/i.test(I.message)?Object.assign(new Nn("Network Error",Nn.ERR_NETWORK,t,_),{cause:I.cause||I}):Nn.from(I,I&&I.code,t,_)}}),GE={http:t5,xhr:R5,fetch:$5};Ye.forEach(GE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const vj=t=>`- ${t}`,B5=t=>Ye.isFunction(t)||t===null||t===!1,jF={getAdapter:t=>{t=Ye.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!B5(n)&&(r=GE[(o=String(n)).toLowerCase()],r===void 0))throw new Nn(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(vj).join(`
`):" "+vj(s[0]):"as no adapter specified";throw new Nn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:GE};function K_(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Nf(null,t)}function xj(t){return K_(t),t.headers=Ss.from(t.headers),t.data=G_.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),jF.getAdapter(t.adapter||Tm.adapter)(t).then(function(r){return K_(t),r.data=G_.call(t,t.transformResponse,r),r.headers=Ss.from(r.headers),r},function(r){return EF(r)||(K_(t),r&&r.response&&(r.response.data=G_.call(t,t.transformResponse,r.response),r.response.headers=Ss.from(r.response.headers))),Promise.reject(r)})}const RF="1.7.9",tx={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{tx[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const wj={};tx.transitional=function(e,n,r){function i(s,o){return"[Axios v"+RF+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Nn(i(o," has been removed"+(n?" in "+n:"")),Nn.ERR_DEPRECATED);return n&&!wj[o]&&(wj[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};tx.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function z5(t,e,n){if(typeof t!="object")throw new Nn("options must be an object",Nn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new Nn("option "+s+" must be "+u,Nn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Nn("Unknown option "+s,Nn.ERR_BAD_OPTION)}}const eb={assertOptions:z5,validators:tx},ra=eb.validators;let uc=class{constructor(e){this.defaults=e,this.interceptors={request:new fj,response:new fj}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=gc(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&eb.assertOptions(r,{silentJSONParsing:ra.transitional(ra.boolean),forcedJSONParsing:ra.transitional(ra.boolean),clarifyTimeoutError:ra.transitional(ra.boolean)},!1),i!=null&&(Ye.isFunction(i)?n.paramsSerializer={serialize:i}:eb.assertOptions(i,{encode:ra.function,serialize:ra.function},!0)),eb.assertOptions(n,{baseUrl:ra.spelling("baseURL"),withXsrfToken:ra.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ye.merge(s.common,s[n.method]);s&&Ye.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=Ss.concat(o,s);const a=[];let u=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(u=u&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const d=[];this.interceptors.response.forEach(function(S){d.push(S.fulfilled,S.rejected)});let p,h=0,g;if(!u){const _=[xj.bind(this),void 0];for(_.unshift.apply(_,a),_.push.apply(_,d),g=_.length,p=Promise.resolve(n);h<g;)p=p.then(_[h++],_[h++]);return p}g=a.length;let x=n;for(h=0;h<g;){const _=a[h++],S=a[h++];try{x=_(x)}catch(k){S.call(this,k);break}}try{p=xj.call(this,x)}catch(_){return Promise.reject(_)}for(h=0,g=d.length;h<g;)p=p.then(d[h++],d[h++]);return p}getUri(e){e=gc(this.defaults,e);const n=NF(e.baseURL,e.url);return wF(n,e.params,e.paramsSerializer)}};Ye.forEach(["delete","get","head","options"],function(e){uc.prototype[e]=function(n,r){return this.request(gc(r||{},{method:e,url:n,data:(r||{}).data}))}});Ye.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(gc(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}uc.prototype[e]=n(),uc.prototype[e+"Form"]=n(!0)});let W5=class OF{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Nf(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new OF(function(i){e=i}),cancel:e}}};function U5(t){return function(n){return t.apply(null,n)}}function V5(t){return Ye.isObject(t)&&t.isAxiosError===!0}const KE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(KE).forEach(([t,e])=>{KE[e]=t});function AF(t){const e=new uc(t),n=uF(uc.prototype.request,e);return Ye.extend(n,uc.prototype,e,{allOwnKeys:!0}),Ye.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return AF(gc(t,i))},n}const Qr=AF(Tm);Qr.Axios=uc;Qr.CanceledError=Nf;Qr.CancelToken=W5;Qr.isCancel=EF;Qr.VERSION=RF;Qr.toFormData=Xv;Qr.AxiosError=Nn;Qr.Cancel=Qr.CanceledError;Qr.all=function(e){return Promise.all(e)};Qr.spread=U5;Qr.isAxiosError=V5;Qr.mergeConfig=gc;Qr.AxiosHeaders=Ss;Qr.formToJSON=t=>SF(Ye.isHTMLForm(t)?new FormData(t):t);Qr.getAdapter=jF.getAdapter;Qr.HttpStatusCode=KE;Qr.default=Qr;const{Axios:Rfe,AxiosError:H5,CanceledError:Ofe,isCancel:Afe,CancelToken:qfe,VERSION:Pfe,all:Ffe,Cancel:Dfe,isAxiosError:Lfe,spread:Mfe,toFormData:$fe,AxiosHeaders:Bfe,HttpStatusCode:zfe,formToJSON:Wfe,getAdapter:Ufe,mergeConfig:Vfe}=Qr,h1=({error:t,schema:e,onError:n})=>{if(t instanceof H5){const i=e.safeParse(t.response?.data);return i.success&&n({error:t,data:i.data}),i.success}return!1};var Q_,_j;function G5(){if(_j)return Q_;_j=1;function t(r){this.queue=[],this.timeslotRequests=0,this.interceptors={request:null,response:null},this.handleRequest=this.handleRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.enable(r)}t.prototype.getMaxRPS=function(){var r=this.perMilliseconds/1e3;return this.maxRequests/r},t.prototype.getQueue=function(){return this.queue},t.prototype.setMaxRPS=function(r){this.setRateLimitOptions({maxRequests:r,perMilliseconds:1e3})},t.prototype.setRateLimitOptions=function(r){r.maxRPS?this.setMaxRPS(r.maxRPS):(this.perMilliseconds=r.perMilliseconds,this.maxRequests=r.maxRequests)},t.prototype.enable=function(r){function i(s){return Promise.reject(s)}this.interceptors.request=r.interceptors.request.use(this.handleRequest,i),this.interceptors.response=r.interceptors.response.use(this.handleResponse,i)};function e(r){r.cancelToken&&r.cancelToken.throwIfRequested()}t.prototype.handleRequest=function(r){return new Promise(function(i,s){this.push({resolve:function(){try{e(r)}catch(o){return s(o),!1}return i(r),!0}})}.bind(this))},t.prototype.handleResponse=function(r){return this.shift(),r},t.prototype.push=function(r){this.queue.push(r),this.shiftInitial()},t.prototype.shiftInitial=function(){setTimeout(function(){return this.shift()}.bind(this),0)},t.prototype.shift=function(){if(this.queue.length){if(this.timeslotRequests===this.maxRequests){this.timeoutId&&typeof this.timeoutId.ref=="function"&&this.timeoutId.ref();return}var r=this.queue.shift(),i=r.resolve();if(this.timeslotRequests===0&&(this.timeoutId=setTimeout(function(){this.timeslotRequests=0,this.shift()}.bind(this),this.perMilliseconds),typeof this.timeoutId.unref=="function"&&this.queue.length===0&&this.timeoutId.unref()),!i){this.shift();return}this.timeslotRequests+=1}};function n(r,i){var s=new t(r);return s.setRateLimitOptions(i),r.getQueue=t.prototype.getQueue.bind(s),r.getMaxRPS=t.prototype.getMaxRPS.bind(s),r.setMaxRPS=t.prototype.setMaxRPS.bind(s),r.setRateLimitOptions=t.prototype.setRateLimitOptions.bind(s),r}return Q_=n,Q_}var K5=G5();const Q5=Gs(K5),J5=({instance:t,limit:e}={})=>Q5(t||Qr,e||{maxRequests:5,perMilliseconds:100}),m1="-",Z5=t=>{const e=X5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(m1);return a[0]===""&&a.length!==1&&a.shift(),qF(a,e)||Y5(o)},getConflictingClassGroupIds:(o,a)=>{const u=n[o]||[];return a&&r[o]?[...u,...r[o]]:u}}},qF=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?qF(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(m1);return e.validators.find(({validator:o})=>o(s))?.classGroupId},Sj=/^\[(.+)\]$/,Y5=t=>{if(Sj.test(t)){const e=Sj.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},X5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return t8(Object.entries(t.classGroups),n).forEach(([s,o])=>{QE(o,r,s,e)}),r},QE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Ej(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(e8(i)){QE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{QE(o,Ej(e,s),n,r)})})},Ej=(t,e)=>{let n=t;return e.split(m1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},e8=t=>t.isThemeGetter,t8=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,n8=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},PF="!",r8=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const u=[];let d=0,p=0,h;for(let k=0;k<a.length;k++){let I=a[k];if(d===0){if(I===i&&(r||a.slice(k,k+s)===e)){u.push(a.slice(p,k)),p=k+s;continue}if(I==="/"){h=k;continue}}I==="["?d++:I==="]"&&d--}const g=u.length===0?a:a.substring(p),x=g.startsWith(PF),_=x?g.substring(1):g,S=h&&h>p?h-p:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:S}};return n?a=>n({className:a,parseClassName:o}):o},i8=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},s8=t=>({cache:n8(t.cacheSize),parseClassName:r8(t),...Z5(t)}),o8=/\s+/,a8=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(o8);let a="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:p,hasImportantModifier:h,baseClassName:g,maybePostfixModifierPosition:x}=n(d);let _=!!x,S=r(_?g.substring(0,x):g);if(!S){if(!_){a=d+(a.length>0?" "+a:a);continue}if(S=r(g),!S){a=d+(a.length>0?" "+a:a);continue}_=!1}const k=i8(p).join(":"),I=h?k+PF:k,E=I+S;if(s.includes(E))continue;s.push(E);const C=i(S,_);for(let j=0;j<C.length;++j){const q=C[j];s.push(I+q)}a=d+(a.length>0?" "+a:a)}return a};function l8(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=FF(e))&&(r&&(r+=" "),r+=n);return r}const FF=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=FF(t[r]))&&(n&&(n+=" "),n+=e);return n};function u8(t,...e){let n,r,i,s=o;function o(u){const d=e.reduce((p,h)=>h(p),t());return n=s8(d),r=n.cache.get,i=n.cache.set,s=a,a(u)}function a(u){const d=r(u);if(d)return d;const p=a8(u,n);return i(u,p),p}return function(){return s(l8.apply(null,arguments))}}const mr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},DF=/^\[(?:([a-z-]+):)?(.+)\]$/i,c8=/^\d+\/\d+$/,d8=new Set(["px","full","screen"]),f8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,p8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,h8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,m8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,g8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,La=t=>Wd(t)||d8.has(t)||c8.test(t),Rl=t=>kf(t,"length",E8),Wd=t=>!!t&&!Number.isNaN(Number(t)),J_=t=>kf(t,"number",Wd),qp=t=>!!t&&Number.isInteger(Number(t)),y8=t=>t.endsWith("%")&&Wd(t.slice(0,-1)),Cn=t=>DF.test(t),Ol=t=>f8.test(t),b8=new Set(["length","size","percentage"]),v8=t=>kf(t,b8,LF),x8=t=>kf(t,"position",LF),w8=new Set(["image","url"]),_8=t=>kf(t,w8,N8),S8=t=>kf(t,"",I8),Pp=()=>!0,kf=(t,e,n)=>{const r=DF.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},E8=t=>p8.test(t)&&!h8.test(t),LF=()=>!1,I8=t=>m8.test(t),N8=t=>g8.test(t),k8=()=>{const t=mr("colors"),e=mr("spacing"),n=mr("blur"),r=mr("brightness"),i=mr("borderColor"),s=mr("borderRadius"),o=mr("borderSpacing"),a=mr("borderWidth"),u=mr("contrast"),d=mr("grayscale"),p=mr("hueRotate"),h=mr("invert"),g=mr("gap"),x=mr("gradientColorStops"),_=mr("gradientColorStopPositions"),S=mr("inset"),k=mr("margin"),I=mr("opacity"),E=mr("padding"),C=mr("saturate"),j=mr("scale"),q=mr("sepia"),F=mr("skew"),$=mr("space"),P=mr("translate"),O=()=>["auto","contain","none"],B=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Cn,e],W=()=>[Cn,e],V=()=>["",La,Rl],z=()=>["auto",Wd,Cn],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>["start","end","center","between","around","evenly","stretch"],ne=()=>["","0",Cn],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[Wd,Cn];return{cacheSize:500,separator:":",theme:{colors:[Pp],spacing:[La,Rl],blur:["none","",Ol,Cn],brightness:te(),borderColor:[t],borderRadius:["none","","full",Ol,Cn],borderSpacing:W(),borderWidth:V(),contrast:te(),grayscale:ne(),hueRotate:te(),invert:ne(),gap:W(),gradientColorStops:[t],gradientColorStopPositions:[y8,Rl],inset:D(),margin:D(),opacity:te(),padding:W(),saturate:te(),scale:te(),sepia:ne(),skew:te(),space:W(),translate:W()},classGroups:{aspect:[{aspect:["auto","square","video",Cn]}],container:["container"],columns:[{columns:[Ol]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),Cn]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",qp,Cn]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Cn]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",qp,Cn]}],"grid-cols":[{"grid-cols":[Pp]}],"col-start-end":[{col:["auto",{span:["full",qp,Cn]},Cn]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[Pp]}],"row-start-end":[{row:["auto",{span:[qp,Cn]},Cn]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Cn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Cn]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...ie()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ie(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ie(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Cn,e]}],"min-w":[{"min-w":[Cn,e,"min","max","fit"]}],"max-w":[{"max-w":[Cn,e,"none","full","min","max","fit","prose",{screen:[Ol]},Ol]}],h:[{h:[Cn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Cn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Cn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Cn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ol,Rl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",J_]}],"font-family":[{font:[Pp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Cn]}],"line-clamp":[{"line-clamp":["none",Wd,J_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",La,Cn]}],"list-image":[{"list-image":["none",Cn]}],"list-style-type":[{list:["none","disc","decimal",Cn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[I]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[I]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",La,Rl]}],"underline-offset":[{"underline-offset":["auto",La,Cn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:W()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Cn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Cn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[I]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),x8]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",v8]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},_8]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[I]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[I]}],"divide-style":[{divide:Z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[La,Cn]}],"outline-w":[{outline:[La,Rl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[I]}],"ring-offset-w":[{"ring-offset":[La,Rl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ol,S8]}],"shadow-color":[{shadow:[Pp]}],opacity:[{opacity:[I]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Ol,Cn]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[h]}],saturate:[{saturate:[C]}],sepia:[{sepia:[q]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[I]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[q]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Cn]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",Cn]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",Cn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[qp,Cn]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Cn]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Cn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":W()}],"scroll-mx":[{"scroll-mx":W()}],"scroll-my":[{"scroll-my":W()}],"scroll-ms":[{"scroll-ms":W()}],"scroll-me":[{"scroll-me":W()}],"scroll-mt":[{"scroll-mt":W()}],"scroll-mr":[{"scroll-mr":W()}],"scroll-mb":[{"scroll-mb":W()}],"scroll-ml":[{"scroll-ml":W()}],"scroll-p":[{"scroll-p":W()}],"scroll-px":[{"scroll-px":W()}],"scroll-py":[{"scroll-py":W()}],"scroll-ps":[{"scroll-ps":W()}],"scroll-pe":[{"scroll-pe":W()}],"scroll-pt":[{"scroll-pt":W()}],"scroll-pr":[{"scroll-pr":W()}],"scroll-pb":[{"scroll-pb":W()}],"scroll-pl":[{"scroll-pl":W()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Cn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[La,Rl,J_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},MF=u8(k8),JE=new Proxy(()=>JE,{get:()=>JE});function En({use:t,slot:e,variant:n,match:r=[],defaults:i}){return({css:s,...o}={})=>({slots:new Proxy({},{get:(a,u)=>({css:d,...p}={})=>{const h=[],g=t,x={...g?.()?.config.defaults,...i,...o,...p};h.push(g?.(x)?.slots[u]?.(x)),h.push(Array.isArray(e[u])?e[u]:[e[u]]);for(const[_,S]of Object.entries(x)){const k=n[_]?.[S];k&&h.push(k)}for(const _ of r)Object.entries(_.if).every(([S,k])=>k===x[S])&&h.push(_.then?.[u]);return h.push(s?.[u]),h.push(d),MF(h)}}),config:{defaults:{...t?.()?.config.defaults,...i},values:{...t?.()?.config.defaults,...i,...o}},type:JE()})}const sn=MF;var Z_,Ij;function $F(){return Ij||(Ij=1,Z_=Object),Z_}var Y_,Nj;function C8(){return Nj||(Nj=1,Y_=Error),Y_}var X_,kj;function T8(){return kj||(kj=1,X_=EvalError),X_}var e0,Cj;function j8(){return Cj||(Cj=1,e0=RangeError),e0}var t0,Tj;function R8(){return Tj||(Tj=1,t0=ReferenceError),t0}var n0,jj;function O8(){return jj||(jj=1,n0=SyntaxError),n0}var r0,Rj;function BF(){return Rj||(Rj=1,r0=TypeError),r0}var i0,Oj;function A8(){return Oj||(Oj=1,i0=URIError),i0}var s0,Aj;function q8(){return Aj||(Aj=1,s0=Math.abs),s0}var o0,qj;function P8(){return qj||(qj=1,o0=Math.floor),o0}var a0,Pj;function F8(){return Pj||(Pj=1,a0=Math.max),a0}var l0,Fj;function D8(){return Fj||(Fj=1,l0=Math.min),l0}var u0,Dj;function L8(){return Dj||(Dj=1,u0=Math.pow),u0}var c0,Lj;function M8(){return Lj||(Lj=1,c0=Math.round),c0}var d0,Mj;function $8(){return Mj||(Mj=1,d0=Number.isNaN||function(e){return e!==e}),d0}var f0,$j;function B8(){if($j)return f0;$j=1;var t=$8();return f0=function(n){return t(n)||n===0?n:n<0?-1:1},f0}var p0,Bj;function z8(){return Bj||(Bj=1,p0=Object.getOwnPropertyDescriptor),p0}var h0,zj;function zF(){if(zj)return h0;zj=1;var t=z8();if(t)try{t([],"length")}catch{t=null}return h0=t,h0}var m0,Wj;function W8(){if(Wj)return m0;Wj=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return m0=t,m0}var g0,Uj;function WF(){return Uj||(Uj=1,g0=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,n);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),g0}var y0,Vj;function U8(){if(Vj)return y0;Vj=1;var t=typeof Symbol<"u"&&Symbol,e=WF();return y0=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},y0}var b0,Hj;function UF(){return Hj||(Hj=1,b0=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),b0}var v0,Gj;function VF(){if(Gj)return v0;Gj=1;var t=$F();return v0=t.getPrototypeOf||null,v0}var x0,Kj;function V8(){if(Kj)return x0;Kj=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(u,d){for(var p=[],h=0;h<u.length;h+=1)p[h]=u[h];for(var g=0;g<d.length;g+=1)p[g+u.length]=d[g];return p},s=function(u,d){for(var p=[],h=d,g=0;h<u.length;h+=1,g+=1)p[g]=u[h];return p},o=function(a,u){for(var d="",p=0;p<a.length;p+=1)d+=a[p],p+1<a.length&&(d+=u);return d};return x0=function(u){var d=this;if(typeof d!="function"||e.apply(d)!==r)throw new TypeError(t+d);for(var p=s(arguments,1),h,g=function(){if(this instanceof h){var I=d.apply(this,i(p,arguments));return Object(I)===I?I:this}return d.apply(u,i(p,arguments))},x=n(0,d.length-p.length),_=[],S=0;S<x;S++)_[S]="$"+S;if(h=Function("binder","return function ("+o(_,",")+"){ return binder.apply(this,arguments); }")(g),d.prototype){var k=function(){};k.prototype=d.prototype,h.prototype=new k,k.prototype=null}return h},x0}var w0,Qj;function nx(){if(Qj)return w0;Qj=1;var t=V8();return w0=Function.prototype.bind||t,w0}var _0,Jj;function g1(){return Jj||(Jj=1,_0=Function.prototype.call),_0}var S0,Zj;function HF(){return Zj||(Zj=1,S0=Function.prototype.apply),S0}var E0,Yj;function H8(){return Yj||(Yj=1,E0=typeof Reflect<"u"&&Reflect&&Reflect.apply),E0}var I0,Xj;function G8(){if(Xj)return I0;Xj=1;var t=nx(),e=HF(),n=g1(),r=H8();return I0=r||t.call(n,e),I0}var N0,eR;function GF(){if(eR)return N0;eR=1;var t=nx(),e=BF(),n=g1(),r=G8();return N0=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(t,n,s)},N0}var k0,tR;function K8(){if(tR)return k0;tR=1;var t=GF(),e=zF(),n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return k0=r&&typeof r.get=="function"?t([r.get]):typeof s=="function"?function(a){return s(a==null?a:i(a))}:!1,k0}var C0,nR;function Q8(){if(nR)return C0;nR=1;var t=UF(),e=VF(),n=K8();return C0=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:n?function(i){return n(i)}:null,C0}var T0,rR;function J8(){if(rR)return T0;rR=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=nx();return T0=n.call(t,e),T0}var j0,iR;function Z8(){if(iR)return j0;iR=1;var t,e=$F(),n=C8(),r=T8(),i=j8(),s=R8(),o=O8(),a=BF(),u=A8(),d=q8(),p=P8(),h=F8(),g=D8(),x=L8(),_=M8(),S=B8(),k=Function,I=function(De){try{return k('"use strict"; return ('+De+").constructor;")()}catch{}},E=zF(),C=W8(),j=function(){throw new a},q=E?function(){try{return arguments.callee,j}catch{try{return E(arguments,"callee").get}catch{return j}}}():j,F=U8()(),$=Q8(),P=VF(),O=UF(),B=HF(),D=g1(),W={},V=typeof Uint8Array>"u"||!$?t:$(Uint8Array),z={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":F&&$?$([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":W,"%AsyncGenerator%":W,"%AsyncGeneratorFunction%":W,"%AsyncIteratorPrototype%":W,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":k,"%GeneratorFunction%":W,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":F&&$?$($([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!F||!$?t:$(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":E,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!F||!$?t:$(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":F&&$?$(""[Symbol.iterator]()):t,"%Symbol%":F?Symbol:t,"%SyntaxError%":o,"%ThrowTypeError%":q,"%TypedArray%":V,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":D,"%Function.prototype.apply%":B,"%Object.defineProperty%":C,"%Object.getPrototypeOf%":P,"%Math.abs%":d,"%Math.floor%":p,"%Math.max%":h,"%Math.min%":g,"%Math.pow%":x,"%Math.round%":_,"%Math.sign%":S,"%Reflect.getPrototypeOf%":O};if($)try{null.error}catch(De){var X=$($(De));z["%Error.prototype%"]=X}var Z=function De(Je){var Xe;if(Je==="%AsyncFunction%")Xe=I("async function () {}");else if(Je==="%GeneratorFunction%")Xe=I("function* () {}");else if(Je==="%AsyncGeneratorFunction%")Xe=I("async function* () {}");else if(Je==="%AsyncGenerator%"){var Ue=De("%AsyncGeneratorFunction%");Ue&&(Xe=Ue.prototype)}else if(Je==="%AsyncIteratorPrototype%"){var ut=De("%AsyncGenerator%");ut&&$&&(Xe=$(ut.prototype))}return z[Je]=Xe,Xe},le={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ie=nx(),ne=J8(),oe=ie.call(D,Array.prototype.concat),te=ie.call(B,Array.prototype.splice),ce=ie.call(D,String.prototype.replace),de=ie.call(D,String.prototype.slice),ye=ie.call(D,RegExp.prototype.exec),we=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ie=/\\(\\)?/g,ze=function(Je){var Xe=de(Je,0,1),Ue=de(Je,-1);if(Xe==="%"&&Ue!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(Ue==="%"&&Xe!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ut=[];return ce(Je,we,function(Et,At,Gt,ln){ut[ut.length]=Gt?ce(ln,Ie,"$1"):At||Et}),ut},Re=function(Je,Xe){var Ue=Je,ut;if(ne(le,Ue)&&(ut=le[Ue],Ue="%"+ut[0]+"%"),ne(z,Ue)){var Et=z[Ue];if(Et===W&&(Et=Z(Ue)),typeof Et>"u"&&!Xe)throw new a("intrinsic "+Je+" exists, but is not available. Please file an issue!");return{alias:ut,name:Ue,value:Et}}throw new o("intrinsic "+Je+" does not exist!")};return j0=function(Je,Xe){if(typeof Je!="string"||Je.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Xe!="boolean")throw new a('"allowMissing" argument must be a boolean');if(ye(/^%?[^%]*%?$/,Je)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ue=ze(Je),ut=Ue.length>0?Ue[0]:"",Et=Re("%"+ut+"%",Xe),At=Et.name,Gt=Et.value,ln=!1,xe=Et.alias;xe&&(ut=xe[0],te(Ue,oe([0,1],xe)));for(var be=1,Ne=!0;be<Ue.length;be+=1){var qe=Ue[be],Ve=de(qe,0,1),rt=de(qe,-1);if((Ve==='"'||Ve==="'"||Ve==="`"||rt==='"'||rt==="'"||rt==="`")&&Ve!==rt)throw new o("property names with quotes must have matching quotes");if((qe==="constructor"||!Ne)&&(ln=!0),ut+="."+qe,At="%"+ut+"%",ne(z,At))Gt=z[At];else if(Gt!=null){if(!(qe in Gt)){if(!Xe)throw new a("base intrinsic for "+Je+" exists, but the property is not available.");return}if(E&&be+1>=Ue.length){var Me=E(Gt,qe);Ne=!!Me,Ne&&"get"in Me&&!("originalValue"in Me.get)?Gt=Me.get:Gt=Gt[qe]}else Ne=ne(Gt,qe),Gt=Gt[qe];Ne&&!ln&&(z[At]=Gt)}}return Gt},j0}var R0,sR;function Y8(){if(sR)return R0;sR=1;var t=Z8(),e=GF(),n=e([t("%String.prototype.indexOf%")]);return R0=function(i,s){var o=t(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?e([o]):o},R0}var O0,oR;function X8(){if(oR)return O0;oR=1;var t=WF();return O0=function(){return t()&&!!Symbol.toStringTag},O0}var A0,aR;function eH(){if(aR)return A0;aR=1;var t=Y8(),e=t("String.prototype.valueOf"),n=function(a){try{return e(a),!0}catch{return!1}},r=t("Object.prototype.toString"),i="[object String]",s=X8()();return A0=function(a){return typeof a=="string"?!0:!a||typeof a!="object"?!1:s?n(a):r(a)===i},A0}var tH=eH();const nH=Gs(tH),rx=t=>nH(t),rH=(t,e,n={})=>{const r=[];return t.filter((s,o)=>{const a=n.regionLowerCase?s.toLowerCase():s;if(e.includes(a))return r.push({index:o,appLocale:a}),!0;const{isAvailable:u,appLocale:d}=iH(a,e,n);return u&&r.push({index:o,appLocale:n.regionLowerCase?d.toLowerCase():d}),u}).map((s,o)=>!r||r.length===0?s:r[o]?.appLocale)},iH=(t,e,n={})=>{n?.languageOnly||(n.languageOnly=!1);let r=t;return{isAvailable:e.some(s=>{if(!tb()&&!n.languageOnly&&t.split("-")[1]===void 0)return!1;const o=tb()?new Intl.Locale(t).minimize().language:t.split("-")[0],a=tb()?new Intl.Locale(s).minimize().language:s.split("-")[0],u=o===a;return u&&(r=s),u}),appLocale:r}},sH=(t={})=>{t?.regionLowerCase||(t.regionLowerCase=!1);let e=[];return Intl&&"DateTimeFormat"in Intl?e=[Intl.DateTimeFormat().resolvedOptions().locale]:typeof window=="object"&&window?.navigator?.languages&&(e=[...window.navigator.languages]),e.map(n=>t.regionLowerCase?n.toLowerCase():n)},tb=()=>Intl&&"Locale"in Intl,oH=(t,e={})=>{e?.regionLowerCase||(e.regionLowerCase=!1),e?.languageOnly||(e.languageOnly=!1);const n=t.map(r=>{const i=r.split("-");if(e.languageOnly)return i[0];const s=tb()?new Intl.Locale(r).maximize():{language:i[0],script:i.length===3?i[1]:void 0,region:i.length===3?i[2]:i[1]},{language:o,script:a}=s;let{region:u}=s;return e.regionLowerCase&&u&&(u=u.toLowerCase()),i.length>2?`${o}-${a}-${u}`:u?`${o}-${u}`:o});return[...new Set(n)]},aH=(t,e,n={})=>{n.regionLowerCase||(n.regionLowerCase=!1),n.languageOnly||(n.languageOnly=!1);const r=sH(n),i=oH([...r,t],n);return rH(i,e,n)[0]||t},lH=({available:t,fallback:e})=>aH(e,t,{languageOnly:!0});var q0={exports:{}};const uH={},cH=Object.freeze(Object.defineProperty({__proto__:null,default:uH},Symbol.toStringTag,{value:"Module"})),lR=T4(cH);var uR;function dH(){return uR||(uR=1,function(t){(function(){var e="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",s=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?r=ec:i&&(r=self);var o=!r.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,a=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),d=[-0x80000000,8388608,32768,128],p=[24,16,8,0],h=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],g=["hex","array","digest","arrayBuffer"],x=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(F){return Object.prototype.toString.call(F)==="[object Array]"}),a&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(F){return typeof F=="object"&&F.buffer&&F.buffer.constructor===ArrayBuffer});var _=function(F,$){return function(P){return new C($,!0).update(P)[F]()}},S=function(F){var $=_("hex",F);s&&($=k($,F)),$.create=function(){return new C(F)},$.update=function(B){return $.create().update(B)};for(var P=0;P<g.length;++P){var O=g[P];$[O]=_(O,F)}return $},k=function(F,$){var P=lR,O=lR.Buffer,B=$?"sha224":"sha256",D;O.from&&!r.JS_SHA256_NO_BUFFER_FROM?D=O.from:D=function(V){return new O(V)};var W=function(V){if(typeof V=="string")return P.createHash(B).update(V,"utf8").digest("hex");if(V==null)throw new Error(e);return V.constructor===ArrayBuffer&&(V=new Uint8Array(V)),Array.isArray(V)||ArrayBuffer.isView(V)||V.constructor===O?P.createHash(B).update(D(V)).digest("hex"):F(V)};return W},I=function(F,$){return function(P,O){return new j(P,$,!0).update(O)[F]()}},E=function(F){var $=I("hex",F);$.create=function(B){return new j(B,F)},$.update=function(B,D){return $.create(B).update(D)};for(var P=0;P<g.length;++P){var O=g[P];$[O]=I(O,F)}return $};function C(F,$){$?(x[0]=x[16]=x[1]=x[2]=x[3]=x[4]=x[5]=x[6]=x[7]=x[8]=x[9]=x[10]=x[11]=x[12]=x[13]=x[14]=x[15]=0,this.blocks=x):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F?(this.h0=0xc1059ed8,this.h1=0x367cd507,this.h2=0x3070dd17,this.h3=0xf70e5939,this.h4=0xffc00b31,this.h5=0x68581511,this.h6=0x64f98fa7,this.h7=0xbefa4fa4):(this.h0=0x6a09e667,this.h1=0xbb67ae85,this.h2=0x3c6ef372,this.h3=0xa54ff53a,this.h4=0x510e527f,this.h5=0x9b05688c,this.h6=0x1f83d9ab,this.h7=0x5be0cd19),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=F}C.prototype.update=function(F){if(!this.finalized){var $,P=typeof F;if(P!=="string"){if(P==="object"){if(F===null)throw new Error(e);if(a&&F.constructor===ArrayBuffer)F=new Uint8Array(F);else if(!Array.isArray(F)&&(!a||!ArrayBuffer.isView(F)))throw new Error(e)}else throw new Error(e);$=!0}for(var O,B=0,D,W=F.length,V=this.blocks;B<W;){if(this.hashed&&(this.hashed=!1,V[0]=this.block,this.block=V[16]=V[1]=V[2]=V[3]=V[4]=V[5]=V[6]=V[7]=V[8]=V[9]=V[10]=V[11]=V[12]=V[13]=V[14]=V[15]=0),$)for(D=this.start;B<W&&D<64;++B)V[D>>>2]|=F[B]<<p[D++&3];else for(D=this.start;B<W&&D<64;++B)O=F.charCodeAt(B),O<128?V[D>>>2]|=O<<p[D++&3]:O<2048?(V[D>>>2]|=(192|O>>>6)<<p[D++&3],V[D>>>2]|=(128|O&63)<<p[D++&3]):O<55296||O>=57344?(V[D>>>2]|=(224|O>>>12)<<p[D++&3],V[D>>>2]|=(128|O>>>6&63)<<p[D++&3],V[D>>>2]|=(128|O&63)<<p[D++&3]):(O=65536+((O&1023)<<10|F.charCodeAt(++B)&1023),V[D>>>2]|=(240|O>>>18)<<p[D++&3],V[D>>>2]|=(128|O>>>12&63)<<p[D++&3],V[D>>>2]|=(128|O>>>6&63)<<p[D++&3],V[D>>>2]|=(128|O&63)<<p[D++&3]);this.lastByteIndex=D,this.bytes+=D-this.start,D>=64?(this.block=V[16],this.start=D-64,this.hash(),this.hashed=!0):this.start=D}return this.bytes>0xffffffff&&(this.hBytes+=this.bytes/0x100000000<<0,this.bytes=this.bytes%0x100000000),this}},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var F=this.blocks,$=this.lastByteIndex;F[16]=this.block,F[$>>>2]|=d[$&3],this.block=F[16],$>=56&&(this.hashed||this.hash(),F[0]=this.block,F[16]=F[1]=F[2]=F[3]=F[4]=F[5]=F[6]=F[7]=F[8]=F[9]=F[10]=F[11]=F[12]=F[13]=F[14]=F[15]=0),F[14]=this.hBytes<<3|this.bytes>>>29,F[15]=this.bytes<<3,this.hash()}},C.prototype.hash=function(){var F=this.h0,$=this.h1,P=this.h2,O=this.h3,B=this.h4,D=this.h5,W=this.h6,V=this.h7,z=this.blocks,X,Z,le,ie,ne,oe,te,ce,de,ye,we;for(X=16;X<64;++X)ne=z[X-15],Z=(ne>>>7|ne<<25)^(ne>>>18|ne<<14)^ne>>>3,ne=z[X-2],le=(ne>>>17|ne<<15)^(ne>>>19|ne<<13)^ne>>>10,z[X]=z[X-16]+Z+z[X-7]+le<<0;for(we=$&P,X=0;X<64;X+=4)this.first?(this.is224?(ce=300032,ne=z[0]-0x543c9a5b,V=ne-0x8f1a6c7<<0,O=ne+0x170e9b5<<0):(ce=0x2a01a605,ne=z[0]-0xc881298,V=ne-0x5ab00ac6<<0,O=ne+0x8909ae5<<0),this.first=!1):(Z=(F>>>2|F<<30)^(F>>>13|F<<19)^(F>>>22|F<<10),le=(B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7),ce=F&$,ie=ce^F&P^we,te=B&D^~B&W,ne=V+le+te+h[X]+z[X],oe=Z+ie,V=O+ne<<0,O=ne+oe<<0),Z=(O>>>2|O<<30)^(O>>>13|O<<19)^(O>>>22|O<<10),le=(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7),de=O&F,ie=de^O&$^ce,te=V&B^~V&D,ne=W+le+te+h[X+1]+z[X+1],oe=Z+ie,W=P+ne<<0,P=ne+oe<<0,Z=(P>>>2|P<<30)^(P>>>13|P<<19)^(P>>>22|P<<10),le=(W>>>6|W<<26)^(W>>>11|W<<21)^(W>>>25|W<<7),ye=P&O,ie=ye^P&F^de,te=W&V^~W&B,ne=D+le+te+h[X+2]+z[X+2],oe=Z+ie,D=$+ne<<0,$=ne+oe<<0,Z=($>>>2|$<<30)^($>>>13|$<<19)^($>>>22|$<<10),le=(D>>>6|D<<26)^(D>>>11|D<<21)^(D>>>25|D<<7),we=$&P,ie=we^$&O^ye,te=D&W^~D&V,ne=B+le+te+h[X+3]+z[X+3],oe=Z+ie,B=F+ne<<0,F=ne+oe<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+F<<0,this.h1=this.h1+$<<0,this.h2=this.h2+P<<0,this.h3=this.h3+O<<0,this.h4=this.h4+B<<0,this.h5=this.h5+D<<0,this.h6=this.h6+W<<0,this.h7=this.h7+V<<0},C.prototype.hex=function(){this.finalize();var F=this.h0,$=this.h1,P=this.h2,O=this.h3,B=this.h4,D=this.h5,W=this.h6,V=this.h7,z=u[F>>>28&15]+u[F>>>24&15]+u[F>>>20&15]+u[F>>>16&15]+u[F>>>12&15]+u[F>>>8&15]+u[F>>>4&15]+u[F&15]+u[$>>>28&15]+u[$>>>24&15]+u[$>>>20&15]+u[$>>>16&15]+u[$>>>12&15]+u[$>>>8&15]+u[$>>>4&15]+u[$&15]+u[P>>>28&15]+u[P>>>24&15]+u[P>>>20&15]+u[P>>>16&15]+u[P>>>12&15]+u[P>>>8&15]+u[P>>>4&15]+u[P&15]+u[O>>>28&15]+u[O>>>24&15]+u[O>>>20&15]+u[O>>>16&15]+u[O>>>12&15]+u[O>>>8&15]+u[O>>>4&15]+u[O&15]+u[B>>>28&15]+u[B>>>24&15]+u[B>>>20&15]+u[B>>>16&15]+u[B>>>12&15]+u[B>>>8&15]+u[B>>>4&15]+u[B&15]+u[D>>>28&15]+u[D>>>24&15]+u[D>>>20&15]+u[D>>>16&15]+u[D>>>12&15]+u[D>>>8&15]+u[D>>>4&15]+u[D&15]+u[W>>>28&15]+u[W>>>24&15]+u[W>>>20&15]+u[W>>>16&15]+u[W>>>12&15]+u[W>>>8&15]+u[W>>>4&15]+u[W&15];return this.is224||(z+=u[V>>>28&15]+u[V>>>24&15]+u[V>>>20&15]+u[V>>>16&15]+u[V>>>12&15]+u[V>>>8&15]+u[V>>>4&15]+u[V&15]),z},C.prototype.toString=C.prototype.hex,C.prototype.digest=function(){this.finalize();var F=this.h0,$=this.h1,P=this.h2,O=this.h3,B=this.h4,D=this.h5,W=this.h6,V=this.h7,z=[F>>>24&255,F>>>16&255,F>>>8&255,F&255,$>>>24&255,$>>>16&255,$>>>8&255,$&255,P>>>24&255,P>>>16&255,P>>>8&255,P&255,O>>>24&255,O>>>16&255,O>>>8&255,O&255,B>>>24&255,B>>>16&255,B>>>8&255,B&255,D>>>24&255,D>>>16&255,D>>>8&255,D&255,W>>>24&255,W>>>16&255,W>>>8&255,W&255];return this.is224||z.push(V>>>24&255,V>>>16&255,V>>>8&255,V&255),z},C.prototype.array=C.prototype.digest,C.prototype.arrayBuffer=function(){this.finalize();var F=new ArrayBuffer(this.is224?28:32),$=new DataView(F);return $.setUint32(0,this.h0),$.setUint32(4,this.h1),$.setUint32(8,this.h2),$.setUint32(12,this.h3),$.setUint32(16,this.h4),$.setUint32(20,this.h5),$.setUint32(24,this.h6),this.is224||$.setUint32(28,this.h7),F};function j(F,$,P){var O,B=typeof F;if(B==="string"){var D=[],W=F.length,V=0,z;for(O=0;O<W;++O)z=F.charCodeAt(O),z<128?D[V++]=z:z<2048?(D[V++]=192|z>>>6,D[V++]=128|z&63):z<55296||z>=57344?(D[V++]=224|z>>>12,D[V++]=128|z>>>6&63,D[V++]=128|z&63):(z=65536+((z&1023)<<10|F.charCodeAt(++O)&1023),D[V++]=240|z>>>18,D[V++]=128|z>>>12&63,D[V++]=128|z>>>6&63,D[V++]=128|z&63);F=D}else if(B==="object"){if(F===null)throw new Error(e);if(a&&F.constructor===ArrayBuffer)F=new Uint8Array(F);else if(!Array.isArray(F)&&(!a||!ArrayBuffer.isView(F)))throw new Error(e)}else throw new Error(e);F.length>64&&(F=new C($,!0).update(F).array());var X=[],Z=[];for(O=0;O<64;++O){var le=F[O]||0;X[O]=92^le,Z[O]=54^le}C.call(this,$,P),this.update(Z),this.oKeyPad=X,this.inner=!0,this.sharedMemory=P}j.prototype=new C,j.prototype.finalize=function(){if(C.prototype.finalize.call(this),this.inner){this.inner=!1;var F=this.array();C.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(F),C.prototype.finalize.call(this)}};var q=S();q.sha256=q,q.sha224=S(!0),q.sha256.hmac=E(),q.sha224.hmac=E(!0),o?t.exports=q:(r.sha256=q.sha256,r.sha224=q.sha224)})()}(q0)),q0.exports}var ZE=dH();const fH=ZE.sha224,KF=({index:t,key:e,fallback:n})=>t[fH(e)]?.value??t[e]?.value??n??e,pH=({index:t,key:e,fallback:n})=>KF({index:t,key:e,fallback:n}),hH=({index:t,key:e,fallback:n})=>KF({index:t,key:e,fallback:n}),Vo={index:{},push(t){this.index={...this.index,...t}},text:(t,e)=>pH({index:Vo.index,key:t,fallback:e}),rich:(t,e)=>hH({index:Vo.index,key:t,fallback:e})};function Yl(t){return typeof t>"u"||t===void 0}function Us(t){return typeof t=="string"}function ix(t){return typeof t=="number"}function Vb(t){return typeof t=="boolean"}function y1(t){return t===null}function mH(t){return t instanceof Date}function b1(t){return typeof t=="bigint"}function Qs(t){return typeof t=="function"}function oa(t){return typeof t=="object"&&t!==null}function Q(t){return Object.freeze(t)}function hy(t){return nl(t)?t:[t]}function nl(t){return Array.isArray(t)}function Xl(t){return t}const Yn=Q({is(t){return t.kind==="AlterTableNode"},create(t){return Q({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return Q({...t,...e})},cloneWithColumnAlteration(t,e){return Q({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),Er=Q({is(t){return t.kind==="IdentifierNode"},create(t){return Q({kind:"IdentifierNode",name:t})}}),Wa=Q({is(t){return t.kind==="CreateIndexNode"},create(t){return Q({kind:"CreateIndexNode",name:Er.create(t)})},cloneWith(t,e){return Q({...t,...e})},cloneWithColumns(t,e){return Q({...t,columns:[...t.columns||[],...e]})}}),QF=Q({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return Q({kind:"CreateSchemaNode",schema:Er.create(t),...e})},cloneWith(t,e){return Q({...t,...e})}}),gH=["preserve rows","delete rows","drop"],Os=Q({is(t){return t.kind==="CreateTableNode"},create(t){return Q({kind:"CreateTableNode",table:t,columns:Q([])})},cloneWithColumn(t,e){return Q({...t,columns:Q([...t.columns,e])})},cloneWithConstraint(t,e){return Q({...t,constraints:t.constraints?Q([...t.constraints,e]):Q([e])})},cloneWithFrontModifier(t,e){return Q({...t,frontModifiers:t.frontModifiers?Q([...t.frontModifiers,e]):Q([e])})},cloneWithEndModifier(t,e){return Q({...t,endModifiers:t.endModifiers?Q([...t.endModifiers,e]):Q([e])})},cloneWith(t,e){return Q({...t,...e})}}),su=Q({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return Q({kind:"SchemableIdentifierNode",identifier:Er.create(t)})},createWithSchema(t,e){return Q({kind:"SchemableIdentifierNode",schema:Er.create(t),identifier:Er.create(e)})}}),gh=Q({is(t){return t.kind==="DropIndexNode"},create(t,e){return Q({kind:"DropIndexNode",name:su.create(t),...e})},cloneWith(t,e){return Q({...t,...e})}}),YE=Q({is(t){return t.kind==="DropSchemaNode"},create(t,e){return Q({kind:"DropSchemaNode",schema:Er.create(t),...e})},cloneWith(t,e){return Q({...t,...e})}}),XE=Q({is(t){return t.kind==="DropTableNode"},create(t,e){return Q({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return Q({...t,...e})}}),yu=Q({is(t){return t.kind==="AliasNode"},create(t,e){return Q({kind:"AliasNode",node:t,alias:e})}}),eu=Q({is(t){return t.kind==="TableNode"},create(t){return Q({kind:"TableNode",table:su.create(t)})},createWithSchema(t,e){return Q({kind:"TableNode",table:su.createWithSchema(t,e)})}});function Ns(t){return oa(t)&&Qs(t.toOperationNode)}function yH(t){return oa(t)&&"expressionType"in t&&Ns(t)}function bH(t){return oa(t)&&"expression"in t&&Us(t.alias)&&Ns(t)}const Ma=Q({is(t){return t.kind==="SelectModifierNode"},create(t,e){return Q({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return Q({kind:"SelectModifierNode",rawModifier:t})}}),ou=Q({is(t){return t.kind==="AndNode"},create(t,e){return Q({kind:"AndNode",left:t,right:e})}}),Cf=Q({is(t){return t.kind==="OrNode"},create(t,e){return Q({kind:"OrNode",left:t,right:e})}}),P0=Q({is(t){return t.kind==="OnNode"},create(t){return Q({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return Q({...t,on:e==="And"?ou.create(t.on,n):Cf.create(t.on,n)})}}),yh=Q({is(t){return t.kind==="JoinNode"},create(t,e){return Q({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return Q({kind:"JoinNode",joinType:t,table:e,on:P0.create(n)})},cloneWithOn(t,e){return Q({...t,on:t.on?P0.cloneWithOperation(t.on,"And",e):P0.create(e)})}}),sf=Q({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return Q({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),vH=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],xH=["+","-","*","/","%","^","&","|","#","<<",">>"],JF=["->","->>"],wH=[...vH,...xH,"&&","||"],_H=["exists","not exists"],SH=["not","-",..._H],EH=[...wH,...JF,...SH,"between","between symmetric"],au=Q({is(t){return t.kind==="OperatorNode"},create(t){return Q({kind:"OperatorNode",operator:t})}});function cR(t){return Us(t)&&JF.includes(t)}const Jr=Q({is(t){return t.kind==="ColumnNode"},create(t){return Q({kind:"ColumnNode",column:Er.create(t)})}}),v1=Q({is(t){return t.kind==="SelectAllNode"},create(){return Q({kind:"SelectAllNode"})}}),sx=Q({is(t){return t.kind==="ReferenceNode"},create(t,e){return Q({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return Q({kind:"ReferenceNode",table:t,column:v1.create()})}});class IH{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return tD(this.#e)}}function ZF(t){return oa(t)&&Ns(t)&&Us(t.dynamicReference)}const eI=Q({is(t){return t.kind==="OrderByItemNode"},create(t,e){return Q({kind:"OrderByItemNode",orderBy:t,direction:e})}}),qi=Q({is(t){return t.kind==="RawNode"},create(t,e){return Q({kind:"RawNode",sqlFragments:Q(t),parameters:Q(e)})},createWithSql(t){return qi.create([t],[])},createWithChild(t){return qi.create(["",""],[t])},createWithChildren(t){return qi.create(new Array(t.length+1).fill(""),t)}});function YF(t){return t==="asc"||t==="desc"}function jm(t){if(t.length===2)return[F0(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>F0(n)):[F0(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function F0(t,e){const n=NH(t);if(eI.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return eI.create(n,XF(e))}function NH(t){if(Pm(t))return Cc(t);if(ZF(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!YF(n))throw new Error(`Invalid order by direction: ${n}`);return eI.create(rl(e),XF(n))}return rl(t)}function XF(t){if(t)return t==="asc"||t==="desc"?qi.createWithSql(t):t.toOperationNode()}const Hb=Q({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return Q({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return Q({...t,traversal:e})}}),eD=Q({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return Q({kind:"JSONOperatorChainNode",operator:t,values:Q([])})},cloneWithValue(t,e){return Q({...t,values:Q([...t.values,e])})}}),bh=Q({is(t){return t.kind==="JSONPathNode"},create(t){return Q({kind:"JSONPathNode",inOperator:t,pathLegs:Q([])})},cloneWithLeg(t,e){return Q({...t,pathLegs:Q([...t.pathLegs,e])})}});function tD(t){return Us(t)?rl(t):t.toOperationNode()}function Oh(t){return nl(t)?t.map(e=>Ls(e)):[Ls(t)]}function Ls(t){return Pm(t)?Cc(t):tD(t)}function kH(t,e){const n=rl(t);if(cR(e))return Hb.create(n,eD.create(au.create(e)));const r=e.slice(0,-1);if(cR(r))return Hb.create(n,bh.create(au.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function rl(t){const e=".";if(!t.includes(e))return sx.create(Jr.create(t));const n=t.split(e).map(x1);if(n.length===3)return TH(n);if(n.length===2)return jH(n);throw new Error(`invalid column reference ${t}`)}function CH(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(x1);return yu.create(rl(n),Er.create(r))}else return rl(t)}function nD(t){return Jr.create(t)}function Gb(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(x1);if(!YF(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return jm([n,r])[0]}else return nD(t)}function TH(t){const[e,n,r]=t;return sx.create(Jr.create(r),eu.createWithSchema(e,n))}function jH(t){const[e,n]=t;return sx.create(Jr.create(n),eu.create(e))}function x1(t){return t.trim()}const rD=Q({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return Q({kind:"PrimitiveValueListNode",values:Q([...t])})}}),w1=Q({is(t){return t.kind==="ValueListNode"},create(t){return Q({kind:"ValueListNode",values:Q(t)})}}),ma=Q({is(t){return t.kind==="ValueNode"},create(t){return Q({kind:"ValueNode",value:t})},createImmediate(t){return Q({kind:"ValueNode",value:t,immediate:!0})}});function RH(t){return nl(t)?OH(t):ni(t)}function ni(t){return Pm(t)?Cc(t):ma.create(t)}function _1(t){return ix(t)||Vb(t)||y1(t)}function S1(t){if(!_1(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return ma.createImmediate(t)}function OH(t){return t.some(Pm)?w1.create(t.map(e=>ni(e))):rD.create(t)}const of=Q({is(t){return t.kind==="ParensNode"},create(t){return Q({kind:"ParensNode",node:t})}});function Ni(t){if(t.length===3)return E1(t[0],t[1],t[2]);if(t.length===1)return ni(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function E1(t,e,n){return AH(e)&&iD(n)?sf.create(Ls(t),tI(e),ma.createImmediate(n)):sf.create(Ls(t),tI(e),RH(n))}function ga(t,e,n){return sf.create(Ls(t),tI(e),Ls(n))}function dR(t,e){return Kb(Object.entries(t).filter(([,n])=>!Yl(n)).map(([n,r])=>E1(n,iD(r)?"is":"=",r)),e)}function Kb(t,e,n=!0){const r=e==="and"?ou.create:Cf.create;if(t.length===0)return sf.create(ma.createImmediate(1),au.create("="),ma.createImmediate(e==="and"?1:0));let i=fR(t[0]);for(let s=1;s<t.length;++s)i=r(i,fR(t[s]));return t.length>1&&n?of.create(i):i}function AH(t){return t==="is"||t==="is not"}function iD(t){return y1(t)||Vb(t)}function tI(t){if(Us(t)&&EH.includes(t))return au.create(t);if(Ns(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function fR(t){return Ns(t)?t.toOperationNode():t}const lu=Q({is(t){return t.kind==="OrderByNode"},create(t){return Q({kind:"OrderByNode",items:Q([...t])})},cloneWithItems(t,e){return Q({...t,items:Q([...t.items,...e])})}}),pR=Q({is(t){return t.kind==="PartitionByNode"},create(t){return Q({kind:"PartitionByNode",items:Q(t)})},cloneWithItems(t,e){return Q({...t,items:Q([...t.items,...e])})}}),nI=Q({is(t){return t.kind==="OverNode"},create(){return Q({kind:"OverNode"})},cloneWithOrderByItems(t,e){return Q({...t,orderBy:t.orderBy?lu.cloneWithItems(t.orderBy,e):lu.create(e)})},cloneWithPartitionByItems(t,e){return Q({...t,partitionBy:t.partitionBy?pR.cloneWithItems(t.partitionBy,e):pR.create(e)})}}),Qb=Q({is(t){return t.kind==="FromNode"},create(t){return Q({kind:"FromNode",froms:Q(t)})},cloneWithFroms(t,e){return Q({...t,froms:Q([...t.froms,...e])})}}),hR=Q({is(t){return t.kind==="GroupByNode"},create(t){return Q({kind:"GroupByNode",items:Q(t)})},cloneWithItems(t,e){return Q({...t,items:Q([...t.items,...e])})}}),mR=Q({is(t){return t.kind==="HavingNode"},create(t){return Q({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return Q({...t,having:e==="And"?ou.create(t.having,n):Cf.create(t.having,n)})}}),Zn=Q({is(t){return t.kind==="SelectQueryNode"},create(t){return Q({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return Q({kind:"SelectQueryNode",from:Qb.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return Q({...t,selections:t.selections?Q([...t.selections,...e]):Q(e)})},cloneWithDistinctOn(t,e){return Q({...t,distinctOn:t.distinctOn?Q([...t.distinctOn,...e]):Q(e)})},cloneWithFrontModifier(t,e){return Q({...t,frontModifiers:t.frontModifiers?Q([...t.frontModifiers,e]):Q([e])})},cloneWithOrderByItems(t,e){return Q({...t,orderBy:t.orderBy?lu.cloneWithItems(t.orderBy,e):lu.create(e)})},cloneWithGroupByItems(t,e){return Q({...t,groupBy:t.groupBy?hR.cloneWithItems(t.groupBy,e):hR.create(e)})},cloneWithLimit(t,e){return Q({...t,limit:e})},cloneWithOffset(t,e){return Q({...t,offset:e})},cloneWithFetch(t,e){return Q({...t,fetch:e})},cloneWithHaving(t,e){return Q({...t,having:t.having?mR.cloneWithOperation(t.having,"And",e):mR.create(e)})},cloneWithSetOperations(t,e){return Q({...t,setOperations:t.setOperations?Q([...t.setOperations,...e]):Q([...e])})},cloneWithoutSelections(t){return Q({...t,selections:[]})},cloneWithoutLimit(t){return Q({...t,limit:void 0})},cloneWithoutOffset(t){return Q({...t,offset:void 0})},cloneWithoutOrderBy(t){return Q({...t,orderBy:void 0})},cloneWithoutGroupBy(t){return Q({...t,groupBy:void 0})}});function Tn(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}class Ud{#e;constructor(e){this.#e=Q(e)}on(...e){return new Ud({...this.#e,joinNode:yh.cloneWithOn(this.#e.joinNode,Ni(e))})}onRef(e,n,r){return new Ud({...this.#e,joinNode:yh.cloneWithOn(this.#e.joinNode,ga(e,n,r))})}onTrue(){return new Ud({...this.#e,joinNode:yh.cloneWithOn(this.#e.joinNode,qi.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}Tn(Ud,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const qH=Q({is(t){return t.kind==="PartitionByItemNode"},create(t){return Q({kind:"PartitionByItemNode",partitionBy:t})}});function PH(t){return Oh(t).map(qH.create)}class Ah{#e;constructor(e){this.#e=Q(e)}orderBy(e,n){return new Ah({overNode:nI.cloneWithOrderByItems(this.#e.overNode,jm([e,n]))})}partitionBy(e){return new Ah({overNode:nI.cloneWithPartitionByItems(this.#e.overNode,PH(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}Tn(Ah,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const vh=Q({is(t){return t.kind==="SelectionNode"},create(t){return Q({kind:"SelectionNode",selection:t})},createSelectAll(){return Q({kind:"SelectionNode",selection:v1.create()})},createSelectAllFromTable(t){return Q({kind:"SelectionNode",selection:sx.createSelectAll(t)})}});function Ho(t){return Qs(t)?Ho(t(jf())):nl(t)?t.map(e=>gR(e)):[gR(t)]}function gR(t){return Us(t)?vh.create(CH(t)):ZF(t)?vh.create(t.toOperationNode()):vh.create(yD(t))}function ya(t){return t?Array.isArray(t)?t.map(yR):[yR(t)]:[vh.createSelectAll()]}function yR(t){if(Us(t))return vh.createSelectAllFromTable(Gr(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const FH=Q({is(t){return t.kind==="ValuesNode"},create(t){return Q({kind:"ValuesNode",values:Q(t)})}}),DH=Q({is(t){return t.kind==="DefaultInsertValueNode"},create(){return Q({kind:"DefaultInsertValueNode"})}});function sD(t){const e=Qs(t)?t(jf()):t,n=nl(e)?e:Q([e]);return LH(n)}function LH(t){const e=MH(t);return[Q([...e.keys()].map(Jr.create)),FH.create(t.map(n=>$H(n,e)))]}function MH(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const i of r)!e.has(i)&&n[i]!==void 0&&e.set(i,e.size)}return e}function $H(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let i=!1;for(const o of n){const a=e.get(o);if(Yl(a))continue;const u=t[o];(Yl(u)||Pm(u))&&(i=!0),r[a]=u}if(n.length<e.size||i){const o=DH.create();return w1.create(r.map(a=>Yl(a)?o:ni(a)))}return rD.create(r)}const Ps=Q({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return Q({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},createWithoutInto(){return Q({kind:"InsertQueryNode"})},cloneWith(t,e){return Q({...t,...e})}}),Vd=Q({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return Q({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return Q({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return Q({...t,from:t.from?Qb.cloneWithFroms(t.from,e):Qb.create(e)})},cloneWithUpdates(t,e){return Q({...t,updates:t.updates?Q([...t.updates,...e]):e})},cloneWithLimit(t,e){return Q({...t,limit:e})}}),bR=Q({is(t){return t.kind==="UsingNode"},create(t){return Q({kind:"UsingNode",tables:Q(t)})},cloneWithTables(t,e){return Q({...t,tables:Q([...t.tables,...e])})}}),Zu=Q({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return Q({kind:"DeleteQueryNode",from:Qb.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return Q({...t,orderBy:t.orderBy?lu.cloneWithItems(t.orderBy,e):lu.create(e)})},cloneWithoutOrderBy(t){return Q({...t,orderBy:void 0})},cloneWithLimit(t,e){return Q({...t,limit:e})},cloneWithoutLimit(t){return Q({...t,limit:void 0})},cloneWithUsing(t,e){return Q({...t,using:t.using!==void 0?bR.cloneWithTables(t.using,e):bR.create(e)})}}),xs=Q({is(t){return t.kind==="WhereNode"},create(t){return Q({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return Q({...t,where:e==="And"?ou.create(t.where,n):Cf.create(t.where,n)})}}),vR=Q({is(t){return t.kind==="ReturningNode"},create(t){return Q({kind:"ReturningNode",selections:Q(t)})},cloneWithSelections(t,e){return Q({...t,selections:t.selections?Q([...t.selections,...e]):Q(e)})}}),BH=Q({is(t){return t.kind==="ExplainNode"},create(t,e){return Q({kind:"ExplainNode",format:t,options:e})}}),Rm=Q({is(t){return t.kind==="WhenNode"},create(t){return Q({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return Q({...t,result:e})}}),ws=Q({is(t){return t.kind==="MergeQueryNode"},create(t,e){return Q({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return Q({...t,using:e})},cloneWithWhen(t,e){return Q({...t,whens:t.whens?Q([...t.whens,e]):Q([e])})},cloneWithThen(t,e){return Q({...t,whens:t.whens?Q([...t.whens.slice(0,-1),Rm.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}}),xR=Q({is(t){return t.kind==="OutputNode"},create(t){return Q({kind:"OutputNode",selections:Q(t)})},cloneWithSelections(t,e){return Q({...t,selections:t.selections?Q([...t.selections,...e]):Q(e)})}}),$t=Q({is(t){return Zn.is(t)||Ps.is(t)||Vd.is(t)||Zu.is(t)||ws.is(t)},cloneWithEndModifier(t,e){return Q({...t,endModifiers:t.endModifiers?Q([...t.endModifiers,e]):Q([e])})},cloneWithWhere(t,e){return Q({...t,where:t.where?xs.cloneWithOperation(t.where,"And",e):xs.create(e)})},cloneWithJoin(t,e){return Q({...t,joins:t.joins?Q([...t.joins,e]):Q([e])})},cloneWithReturning(t,e){return Q({...t,returning:t.returning?vR.cloneWithSelections(t.returning,e):vR.create(e)})},cloneWithoutReturning(t){return Q({...t,returning:void 0})},cloneWithoutWhere(t){return Q({...t,where:void 0})},cloneWithExplain(t,e,n){return Q({...t,explain:BH.create(e,n?.toOperationNode())})},cloneWithTop(t,e){return Q({...t,top:e})},cloneWithOutput(t,e){return Q({...t,output:t.output?xR.cloneWithSelections(t.output,e):xR.create(e)})}}),oD=Q({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return Q({kind:"ColumnUpdateNode",column:t,value:e})}});function zH(...t){return t.length===2?[oD.create(Ls(t[0]),ni(t[1]))]:I1(t[0])}function I1(t){const e=Qs(t)?t(jf()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>oD.create(Jr.create(n),ni(r)))}const WH=Q({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return Q({kind:"OnDuplicateKeyNode",updates:t})}});class UH{insertId;numInsertedOrUpdatedRows;constructor(e,n){this.insertId=e,this.numInsertedOrUpdatedRows=n}}class Om extends Error{node;constructor(e){super("no result"),this.node=e}}function Am(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const As=Q({is(t){return t.kind==="OnConflictNode"},create(){return Q({kind:"OnConflictNode"})},cloneWith(t,e){return Q({...t,...e})},cloneWithIndexWhere(t,e){return Q({...t,indexWhere:t.indexWhere?xs.cloneWithOperation(t.indexWhere,"And",e):xs.create(e)})},cloneWithIndexOrWhere(t,e){return Q({...t,indexWhere:t.indexWhere?xs.cloneWithOperation(t.indexWhere,"Or",e):xs.create(e)})},cloneWithUpdateWhere(t,e){return Q({...t,updateWhere:t.updateWhere?xs.cloneWithOperation(t.updateWhere,"And",e):xs.create(e)})},cloneWithUpdateOrWhere(t,e){return Q({...t,updateWhere:t.updateWhere?xs.cloneWithOperation(t.updateWhere,"Or",e):xs.create(e)})},cloneWithoutIndexWhere(t){return Q({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return Q({...t,updateWhere:void 0})}});class sa{#e;constructor(e){this.#e=Q(e)}column(e){const n=Jr.create(e);return new sa({...this.#e,onConflictNode:As.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?Q([...this.#e.onConflictNode.columns,n]):Q([n])})})}columns(e){const n=e.map(Jr.create);return new sa({...this.#e,onConflictNode:As.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?Q([...this.#e.onConflictNode.columns,...n]):Q(n)})})}constraint(e){return new sa({...this.#e,onConflictNode:As.cloneWith(this.#e.onConflictNode,{constraint:Er.create(e)})})}expression(e){return new sa({...this.#e,onConflictNode:As.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new sa({...this.#e,onConflictNode:As.cloneWithIndexWhere(this.#e.onConflictNode,Ni(e))})}whereRef(e,n,r){return new sa({...this.#e,onConflictNode:As.cloneWithIndexWhere(this.#e.onConflictNode,ga(e,n,r))})}clearWhere(){return new sa({...this.#e,onConflictNode:As.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new aD({...this.#e,onConflictNode:As.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Hd({...this.#e,onConflictNode:As.cloneWith(this.#e.onConflictNode,{updates:I1(e)})})}$call(e){return e(this)}}Tn(sa,"don't await OnConflictBuilder instances.");class aD{#e;constructor(e){this.#e=Q(e)}toOperationNode(){return this.#e.onConflictNode}}Tn(aD,"don't await OnConflictDoNothingBuilder instances.");class Hd{#e;constructor(e){this.#e=Q(e)}where(...e){return new Hd({...this.#e,onConflictNode:As.cloneWithUpdateWhere(this.#e.onConflictNode,Ni(e))})}whereRef(e,n,r){return new Hd({...this.#e,onConflictNode:As.cloneWithUpdateWhere(this.#e.onConflictNode,ga(e,n,r))})}clearWhere(){return new Hd({...this.#e,onConflictNode:As.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}Tn(Hd,"don't await OnConflictUpdateBuilder instances.");const VH=Q({is(t){return t.kind==="TopNode"},create(t,e){return Q({kind:"TopNode",expression:t,modifiers:e})}});function Tf(t,e){if(!ix(t)&&!b1(t))throw new Error(`Invalid top expression: ${t}`);if(!Yl(e)&&!HH(e))throw new Error(`Invalid top modifiers: ${e}`);return VH.create(t,e)}function HH(t){return t==="percent"||t==="with ties"||t==="percent with ties"}class vr{#e;constructor(e){this.#e=Q(e)}values(e){const[n,r]=sD(e);return new vr({...this.#e,queryNode:Ps.cloneWith(this.#e.queryNode,{columns:n,values:r})})}columns(e){return new vr({...this.#e,queryNode:Ps.cloneWith(this.#e.queryNode,{columns:Q(e.map(Jr.create))})})}expression(e){return new vr({...this.#e,queryNode:Ps.cloneWith(this.#e.queryNode,{values:Cc(e)})})}defaultValues(){return new vr({...this.#e,queryNode:Ps.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new vr({...this.#e,queryNode:$t.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new vr({...this.#e,queryNode:Ps.cloneWith(this.#e.queryNode,{ignore:!0})})}top(e,n){return new vr({...this.#e,queryNode:$t.cloneWithTop(this.#e.queryNode,Tf(e,n))})}onConflict(e){return new vr({...this.#e,queryNode:Ps.cloneWith(this.#e.queryNode,{onConflict:e(new sa({onConflictNode:As.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new vr({...this.#e,queryNode:Ps.cloneWith(this.#e.queryNode,{onDuplicateKey:WH.create(I1(e))})})}returning(e){return new vr({...this.#e,queryNode:$t.cloneWithReturning(this.#e.queryNode,Ho(e))})}returningAll(){return new vr({...this.#e,queryNode:$t.cloneWithReturning(this.#e.queryNode,ya())})}output(e){return new vr({...this.#e,queryNode:$t.cloneWithOutput(this.#e.queryNode,Ho(e))})}outputAll(e){return new vr({...this.#e,queryNode:$t.cloneWithOutput(this.#e.queryNode,ya(e))})}clearReturning(){return new vr({...this.#e,queryNode:$t.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new vr({...this.#e})}$castTo(){return new vr(this.#e)}$narrowType(){return new vr(this.#e)}$assertType(){return new vr(this.#e)}withPlugin(e){return new vr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new UH(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Om){const n=await this.executeTakeFirst();if(n===void 0)throw Am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new vr({...this.#e,queryNode:$t.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Tn(vr,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class GH{numDeletedRows;constructor(e){this.numDeletedRows=e}}const N1=Q({is(t){return t.kind==="LimitNode"},create(t){return Q({kind:"LimitNode",limit:t})}});class Jn{#e;constructor(e){this.#e=Q(e)}where(...e){return new Jn({...this.#e,queryNode:$t.cloneWithWhere(this.#e.queryNode,Ni(e))})}whereRef(e,n,r){return new Jn({...this.#e,queryNode:$t.cloneWithWhere(this.#e.queryNode,ga(e,n,r))})}clearWhere(){return new Jn({...this.#e,queryNode:$t.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new Jn({...this.#e,queryNode:$t.cloneWithTop(this.#e.queryNode,Tf(e,n))})}using(e){return new Jn({...this.#e,queryNode:Zu.cloneWithUsing(this.#e.queryNode,Fh(e))})}innerJoin(...e){return new Jn({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("InnerJoin",e))})}leftJoin(...e){return new Jn({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("LeftJoin",e))})}rightJoin(...e){return new Jn({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("RightJoin",e))})}fullJoin(...e){return new Jn({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("FullJoin",e))})}returning(e){return new Jn({...this.#e,queryNode:$t.cloneWithReturning(this.#e.queryNode,Ho(e))})}returningAll(e){return new Jn({...this.#e,queryNode:$t.cloneWithReturning(this.#e.queryNode,ya(e))})}output(e){return new Jn({...this.#e,queryNode:$t.cloneWithOutput(this.#e.queryNode,Ho(e))})}outputAll(e){return new Jn({...this.#e,queryNode:$t.cloneWithOutput(this.#e.queryNode,ya(e))})}clearReturning(){return new Jn({...this.#e,queryNode:$t.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new Jn({...this.#e,queryNode:Zu.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new Jn({...this.#e,queryNode:Zu.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(e,n){return new Jn({...this.#e,queryNode:Zu.cloneWithOrderByItems(this.#e.queryNode,jm([e,n]))})}limit(e){return new Jn({...this.#e,queryNode:Zu.cloneWithLimit(this.#e.queryNode,N1.create(ni(e)))})}modifyEnd(e){return new Jn({...this.#e,queryNode:$t.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,n){return e?n(this):new Jn({...this.#e})}$castTo(){return new Jn(this.#e)}$narrowType(){return new Jn(this.#e)}$assertType(){return new Jn(this.#e)}withPlugin(e){return new Jn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new GH(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Om){const n=await this.executeTakeFirst();if(n===void 0)throw Am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Jn({...this.#e,queryNode:$t.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Tn(Jn,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class KH{numUpdatedRows;numChangedRows;constructor(e,n){this.numUpdatedRows=e,this.numChangedRows=n}}class nr{#e;constructor(e){this.#e=Q(e)}where(...e){return new nr({...this.#e,queryNode:$t.cloneWithWhere(this.#e.queryNode,Ni(e))})}whereRef(e,n,r){return new nr({...this.#e,queryNode:$t.cloneWithWhere(this.#e.queryNode,ga(e,n,r))})}clearWhere(){return new nr({...this.#e,queryNode:$t.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new nr({...this.#e,queryNode:$t.cloneWithTop(this.#e.queryNode,Tf(e,n))})}from(e){return new nr({...this.#e,queryNode:Vd.cloneWithFromItems(this.#e.queryNode,Fh(e))})}innerJoin(...e){return new nr({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("InnerJoin",e))})}leftJoin(...e){return new nr({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("LeftJoin",e))})}rightJoin(...e){return new nr({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("RightJoin",e))})}fullJoin(...e){return new nr({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("FullJoin",e))})}limit(e){return new nr({...this.#e,queryNode:Vd.cloneWithLimit(this.#e.queryNode,N1.create(ni(e)))})}set(...e){return new nr({...this.#e,queryNode:Vd.cloneWithUpdates(this.#e.queryNode,zH(...e))})}returning(e){return new nr({...this.#e,queryNode:$t.cloneWithReturning(this.#e.queryNode,Ho(e))})}returningAll(e){return new nr({...this.#e,queryNode:$t.cloneWithReturning(this.#e.queryNode,ya(e))})}output(e){return new nr({...this.#e,queryNode:$t.cloneWithOutput(this.#e.queryNode,Ho(e))})}outputAll(e){return new nr({...this.#e,queryNode:$t.cloneWithOutput(this.#e.queryNode,ya(e))})}modifyEnd(e){return new nr({...this.#e,queryNode:$t.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new nr({...this.#e,queryNode:$t.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new nr({...this.#e})}$castTo(){return new nr(this.#e)}$narrowType(){return new nr(this.#e)}$assertType(){return new nr(this.#e)}withPlugin(e){return new nr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new KH(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0),n.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Om){const n=await this.executeTakeFirst();if(n===void 0)throw Am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new nr({...this.#e,queryNode:$t.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Tn(nr,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const wR=Q({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return Q({kind:"CommonTableExpressionNameNode",table:eu.create(t),columns:e?Q(e.map(Jr.create)):void 0})}}),Jb=Q({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return Q({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return Q({...t,...e})}});class qh{#e;constructor(e){this.#e=Q(e)}materialized(){return new qh({...this.#e,node:Jb.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new qh({...this.#e,node:Jb.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}Tn(qh,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function _R(t,e){const n=e(oG()).toOperationNode();return Qs(t)?t(QH(n)).toOperationNode():Jb.create(lD(t),n)}function QH(t){return e=>new qh({node:Jb.create(lD(e),t)})}function lD(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(i=>i.trim());return wR.create(n,r)}else return wR.create(t)}const my=Q({is(t){return t.kind==="WithNode"},create(t,e){return Q({kind:"WithNode",expressions:Q([t]),...e})},cloneWithExpression(t,e){return Q({...t,expressions:Q([...t.expressions,e])})}}),SR=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function JH(t){let e="";for(let n=0;n<t;++n)e+=ZH();return e}function ZH(){return SR[~~(Math.random()*SR.length)]}function Xn(){return new YH}class YH{#e;get queryId(){return this.#e===void 0&&(this.#e=JH(8)),this.#e}}class uD{nodeStack=[];#e=Q({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),Q(n)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&Q(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:Q([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}const XH=Q({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});class eG extends uD{#e;#t=new Set;#n=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);const n=this.#s(e);for(const s of n)this.#n.add(s);const r=this.#i(e);for(const s of r)this.#t.add(s);const i=super.transformNodeImpl(e);for(const s of r)this.#t.delete(s);for(const s of n)this.#n.delete(s);return i}transformSchemableIdentifier(e){const n=super.transformSchemableIdentifier(e);return n.schema||!this.#t.has(e.identifier.name)?n:{...n,schema:Er.create(this.#e)}}transformReferences(e){const n=super.transformReferences(e);return n.table.table.schema?n:{...n,table:eu.createWithSchema(this.#e,n.table.table.identifier.name)}}#r(e){return e.kind in XH}#i(e){const n=new Set;if("name"in e&&e.name&&su.is(e.name)&&this.#a(e.name,n),"from"in e&&e.from)for(const r of e.from.froms)this.#o(r,n);if("into"in e&&e.into&&this.#o(e.into,n),"table"in e&&e.table&&this.#o(e.table,n),"joins"in e&&e.joins)for(const r of e.joins)this.#o(r.table,n);return"using"in e&&e.using&&this.#o(e.using,n),n}#s(e){const n=new Set;return"with"in e&&e.with&&this.#u(e.with,n),n}#o(e,n){const r=eu.is(e)?e:yu.is(e)&&eu.is(e.node)?e.node:null;r&&this.#a(r.table,n)}#a(e,n){const r=e.identifier.name;!this.#t.has(r)&&!this.#n.has(r)&&n.add(r)}#u(e,n){for(const r of e.expressions){const i=r.name.table.table.identifier.name;this.#n.has(i)||n.add(i)}}}class qm{#e;constructor(e){this.#e=new eG(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}}const tG=Q({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return Q({kind:"MatchedNode",not:t,bySource:e})}});function ER(t,e,n){return Rm.create(Kb([tG.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&n?ga(e[0],e[1],e[2]):Ni(e)]:[]],"and",!1))}function xh(t){return Us(t)?qi.create([t],[]):Ns(t)?t.toOperationNode():t}class IR{#e;#t;#n;constructor(){this.#e=new Promise((e,n)=>{this.#n=n,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#n&&this.#n(e)}}const NR=new Set;function nG(t){NR.has(t)||(NR.add(t),console.log(t))}const rG=Q([]);class cD{#e;constructor(e=rG){this.#e=e}get plugins(){return this.#e}transformQuery(e,n){for(const r of this.#e){const i=r.transformQuery({node:e,queryId:n});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const i=await r.executeQuery(e),s=await this.#t(i,n);return iG(i,s),s})}async *stream(e,n,r){const i=new IR,s=new IR;this.provideConnection(async a=>(i.resolve(a),await s.promise)).catch(a=>i.reject(a));const o=await i.promise;try{for await(const a of o.streamQuery(e,n))yield await this.#t(a,r)}finally{s.resolve()}}async #t(e,n){for(const r of this.#e)e=await r.transformResult({result:e,queryId:n});return e}}function iG(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||nG("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class jd extends cD{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new jd([...this.plugins,e])}withPlugins(e){return new jd([...this.plugins,...e])}withPluginAtFront(e){return new jd([e,...this.plugins])}withoutPlugins(){return new jd([])}}const ox=new jd;class sG{numChangedRows;constructor(e){this.numChangedRows=e}}class sc{#e;constructor(e){this.#e=Q(e)}modifyEnd(e){return new sc({...this.#e,queryNode:$t.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new sc({...this.#e,queryNode:$t.cloneWithTop(this.#e.queryNode,Tf(e,n))})}using(...e){return new Ms({...this.#e,queryNode:ws.cloneWithUsing(this.#e.queryNode,Zi("Using",e))})}output(e){return new sc({...this.#e,queryNode:$t.cloneWithOutput(this.#e.queryNode,Ho(e))})}outputAll(e){return new sc({...this.#e,queryNode:$t.cloneWithOutput(this.#e.queryNode,ya(e))})}}Tn(sc,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Ms{#e;constructor(e){this.#e=Q(e)}modifyEnd(e){return new Ms({...this.#e,queryNode:$t.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new Ms({...this.#e,queryNode:$t.cloneWithTop(this.#e.queryNode,Tf(e,n))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,n,r){return this.#t([e,n,r],!0)}#t(e,n){return new rI({...this.#e,queryNode:ws.cloneWithWhen(this.#e.queryNode,ER({isMatched:!0},e,n))})}whenNotMatched(){return this.#n([])}whenNotMatchedAnd(...e){return this.#n(e)}whenNotMatchedAndRef(e,n,r){return this.#n([e,n,r],!0)}whenNotMatchedBySource(){return this.#n([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#n(e,!1,!0)}whenNotMatchedBySourceAndRef(e,n,r){return this.#n([e,n,r],!0,!0)}output(e){return new Ms({...this.#e,queryNode:$t.cloneWithOutput(this.#e.queryNode,Ho(e))})}outputAll(e){return new Ms({...this.#e,queryNode:$t.cloneWithOutput(this.#e.queryNode,ya(e))})}#n(e,n=!1,r=!1){const i={...this.#e,queryNode:ws.cloneWithWhen(this.#e.queryNode,ER({isMatched:!1,bySource:r},e,n))},s=r?rI:dD;return new s(i)}$call(e){return e(this)}$if(e,n){return e?n(this):new Ms({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId);return e.query.output&&this.#e.executor.adapter.supportsOutput?n.rows:[new sG(n.numAffectedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Om){const n=await this.executeTakeFirst();if(n===void 0)throw Am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}}Tn(Ms,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class rI{#e;constructor(e){this.#e=Q(e)}thenDelete(){return new Ms({...this.#e,queryNode:ws.cloneWithThen(this.#e.queryNode,xh("delete"))})}thenDoNothing(){return new Ms({...this.#e,queryNode:ws.cloneWithThen(this.#e.queryNode,xh("do nothing"))})}thenUpdate(e){return new Ms({...this.#e,queryNode:ws.cloneWithThen(this.#e.queryNode,xh(e(new nr({queryId:this.#e.queryId,executor:ox,queryNode:Vd.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(n=>n.set(...e))}}Tn(rI,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class dD{#e;constructor(e){this.#e=Q(e)}thenDoNothing(){return new Ms({...this.#e,queryNode:ws.cloneWithThen(this.#e.queryNode,xh("do nothing"))})}thenInsertValues(e){const[n,r]=sD(e);return new Ms({...this.#e,queryNode:ws.cloneWithThen(this.#e.queryNode,xh(Ps.cloneWith(Ps.createWithoutInto(),{columns:n,values:r})))})}}Tn(dD,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Wl{#e;constructor(e){this.#e=Q(e)}selectFrom(e){return iI({queryId:Xn(),executor:this.#e.executor,queryNode:Zn.createFrom(Fh(e),this.#e.withNode)})}selectNoFrom(e){return iI({queryId:Xn(),executor:this.#e.executor,queryNode:Zn.cloneWithSelections(Zn.create(this.#e.withNode),Ho(e))})}insertInto(e){return new vr({queryId:Xn(),executor:this.#e.executor,queryNode:Ps.create(Gr(e),this.#e.withNode)})}replaceInto(e){return new vr({queryId:Xn(),executor:this.#e.executor,queryNode:Ps.create(Gr(e),this.#e.withNode,!0)})}deleteFrom(e){return new Jn({queryId:Xn(),executor:this.#e.executor,queryNode:Zu.create(Fh(e),this.#e.withNode)})}updateTable(e){return new nr({queryId:Xn(),executor:this.#e.executor,queryNode:Vd.create(Dh(e),this.#e.withNode)})}mergeInto(e){return new sc({queryId:Xn(),executor:this.#e.executor,queryNode:ws.create(bD(e),this.#e.withNode)})}with(e,n){const r=_R(e,n);return new Wl({...this.#e,withNode:this.#e.withNode?my.cloneWithExpression(this.#e.withNode,r):my.create(r)})}withRecursive(e,n){const r=_R(e,n);return new Wl({...this.#e,withNode:this.#e.withNode?my.cloneWithExpression(this.#e.withNode,r):my.create(r,{recursive:!0})})}withPlugin(e){return new Wl({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Wl({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Wl({...this.#e,executor:this.#e.executor.withPluginAtFront(new qm(e))})}}function oG(){return new Wl({executor:ox})}function aG(t,e){return new Ud({joinNode:yh.create(t,Dh(e))})}function lG(){return new Ah({overNode:nI.create()})}function Zi(t,e){if(e.length===3)return cG(t,e[0],e[1],e[2]);if(e.length===2)return uG(t,e[0],e[1]);throw new Error("not implemented")}function uG(t,e,n){return n(aG(t,e)).toOperationNode()}function cG(t,e,n,r){return yh.createWithOn(t,Dh(e),ga(n,"=",r))}const dG=Q({is(t){return t.kind==="OffsetNode"},create(t){return Q({kind:"OffsetNode",offset:t})}}),fG=Q({is(t){return t.kind==="GroupByItemNode"},create(t){return Q({kind:"GroupByItemNode",groupBy:t})}});function pG(t){return t=Qs(t)?t(jf()):t,Oh(t).map(fG.create)}const fD=Q({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return Q({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function pd(t,e,n){return Qs(e)&&(e=e(C1())),nl(e)||(e=[e]),e.map(r=>fD.create(t,Cc(r),n))}class rr{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new k1(this,e)}or(...e){return new Zb(Cf.create(this.#e,Ni(e)))}and(...e){return new Yb(ou.create(this.#e,Ni(e)))}$castTo(){return new rr(this.#e)}$notNull(){return new rr(this.#e)}toOperationNode(){return this.#e}}class k1{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return yu.create(this.#e.toOperationNode(),Ns(this.#t)?this.#t.toOperationNode():Er.create(this.#t))}}class Zb{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new k1(this,e)}or(...e){return new Zb(Cf.create(this.#e,Ni(e)))}$castTo(){return new Zb(this.#e)}toOperationNode(){return of.create(this.#e)}}class Yb{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new k1(this,e)}and(...e){return new Yb(ou.create(this.#e,Ni(e)))}$castTo(){return new Yb(this.#e)}toOperationNode(){return of.create(this.#e)}}const hG={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:ma.create(t),modifier:e}}};function mG(t,e){if(!ix(t)&&!b1(t))throw new Error(`Invalid fetch row count: ${t}`);if(!gG(e))throw new Error(`Invalid fetch modifier: ${e}`);return hG.create(t,e)}function gG(t){return t==="only"||t==="with ties"}class dn{#e;constructor(e){this.#e=Q(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new dn({...this.#e,queryNode:$t.cloneWithWhere(this.#e.queryNode,Ni(e))})}whereRef(e,n,r){return new dn({...this.#e,queryNode:$t.cloneWithWhere(this.#e.queryNode,ga(e,n,r))})}having(...e){return new dn({...this.#e,queryNode:Zn.cloneWithHaving(this.#e.queryNode,Ni(e))})}havingRef(e,n,r){return new dn({...this.#e,queryNode:Zn.cloneWithHaving(this.#e.queryNode,ga(e,n,r))})}select(e){return new dn({...this.#e,queryNode:Zn.cloneWithSelections(this.#e.queryNode,Ho(e))})}distinctOn(e){return new dn({...this.#e,queryNode:Zn.cloneWithDistinctOn(this.#e.queryNode,Oh(e))})}modifyFront(e){return new dn({...this.#e,queryNode:Zn.cloneWithFrontModifier(this.#e.queryNode,Ma.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new dn({...this.#e,queryNode:$t.cloneWithEndModifier(this.#e.queryNode,Ma.createWithExpression(e.toOperationNode()))})}distinct(){return new dn({...this.#e,queryNode:Zn.cloneWithFrontModifier(this.#e.queryNode,Ma.create("Distinct"))})}forUpdate(e){return new dn({...this.#e,queryNode:$t.cloneWithEndModifier(this.#e.queryNode,Ma.create("ForUpdate",e?hy(e).map(Gr):void 0))})}forShare(e){return new dn({...this.#e,queryNode:$t.cloneWithEndModifier(this.#e.queryNode,Ma.create("ForShare",e?hy(e).map(Gr):void 0))})}forKeyShare(e){return new dn({...this.#e,queryNode:$t.cloneWithEndModifier(this.#e.queryNode,Ma.create("ForKeyShare",e?hy(e).map(Gr):void 0))})}forNoKeyUpdate(e){return new dn({...this.#e,queryNode:$t.cloneWithEndModifier(this.#e.queryNode,Ma.create("ForNoKeyUpdate",e?hy(e).map(Gr):void 0))})}skipLocked(){return new dn({...this.#e,queryNode:$t.cloneWithEndModifier(this.#e.queryNode,Ma.create("SkipLocked"))})}noWait(){return new dn({...this.#e,queryNode:$t.cloneWithEndModifier(this.#e.queryNode,Ma.create("NoWait"))})}selectAll(e){return new dn({...this.#e,queryNode:Zn.cloneWithSelections(this.#e.queryNode,ya(e))})}innerJoin(...e){return new dn({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("InnerJoin",e))})}leftJoin(...e){return new dn({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("LeftJoin",e))})}rightJoin(...e){return new dn({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("RightJoin",e))})}fullJoin(...e){return new dn({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("FullJoin",e))})}innerJoinLateral(...e){return new dn({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("LateralInnerJoin",e))})}leftJoinLateral(...e){return new dn({...this.#e,queryNode:$t.cloneWithJoin(this.#e.queryNode,Zi("LateralLeftJoin",e))})}orderBy(...e){return new dn({...this.#e,queryNode:Zn.cloneWithOrderByItems(this.#e.queryNode,jm(e))})}groupBy(e){return new dn({...this.#e,queryNode:Zn.cloneWithGroupByItems(this.#e.queryNode,pG(e))})}limit(e){return new dn({...this.#e,queryNode:Zn.cloneWithLimit(this.#e.queryNode,N1.create(ni(e)))})}offset(e){return new dn({...this.#e,queryNode:Zn.cloneWithOffset(this.#e.queryNode,dG.create(ni(e)))})}fetch(e,n="only"){return new dn({...this.#e,queryNode:Zn.cloneWithFetch(this.#e.queryNode,mG(e,n))})}top(e,n){return new dn({...this.#e,queryNode:$t.cloneWithTop(this.#e.queryNode,Tf(e,n))})}union(e){return new dn({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,pd("union",e,!1))})}unionAll(e){return new dn({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,pd("union",e,!0))})}intersect(e){return new dn({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,pd("intersect",e,!1))})}intersectAll(e){return new dn({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,pd("intersect",e,!0))})}except(e){return new dn({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,pd("except",e,!1))})}exceptAll(e){return new dn({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,pd("except",e,!0))})}as(e){return new pD(this,e)}clearSelect(){return new dn({...this.#e,queryNode:Zn.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new dn({...this.#e,queryNode:$t.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new dn({...this.#e,queryNode:Zn.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new dn({...this.#e,queryNode:Zn.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new dn({...this.#e,queryNode:Zn.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new dn({...this.#e,queryNode:Zn.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new dn({...this.#e})}$castTo(){return new dn(this.#e)}$narrowType(){return new dn(this.#e)}$assertType(){return new dn(this.#e)}$asTuple(){return new rr(this.toOperationNode())}withPlugin(e){return new dn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Om){const n=await this.executeTakeFirst();if(n===void 0)throw Am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new dn({...this.#e,queryNode:$t.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Tn(dn,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function iI(t){return new dn(t)}class pD{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return yu.create(this.#e.toOperationNode(),Er.create(this.#t))}}Tn(pD,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Ul=Q({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return Q({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return Q({...t,distinct:!0})},cloneWithOrderBy(t,e){return Q({...t,orderBy:t.orderBy?lu.cloneWithItems(t.orderBy,e):lu.create(e)})},cloneWithFilter(t,e){return Q({...t,filter:t.filter?xs.cloneWithOperation(t.filter,"And",e):xs.create(e)})},cloneWithOrFilter(t,e){return Q({...t,filter:t.filter?xs.cloneWithOperation(t.filter,"Or",e):xs.create(e)})},cloneWithOver(t,e){return Q({...t,over:e})}}),kR=Q({is(t){return t.kind==="FunctionNode"},create(t,e){return Q({kind:"FunctionNode",func:t,arguments:e})}});class ho{#e;constructor(e){this.#e=Q(e)}get expressionType(){}as(e){return new yG(this,e)}distinct(){return new ho({...this.#e,aggregateFunctionNode:Ul.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(e,n){return new ho({...this.#e,aggregateFunctionNode:Ul.cloneWithOrderBy(this.#e.aggregateFunctionNode,jm([e,n]))})}filterWhere(...e){return new ho({...this.#e,aggregateFunctionNode:Ul.cloneWithFilter(this.#e.aggregateFunctionNode,Ni(e))})}filterWhereRef(e,n,r){return new ho({...this.#e,aggregateFunctionNode:Ul.cloneWithFilter(this.#e.aggregateFunctionNode,ga(e,n,r))})}over(e){const n=lG();return new ho({...this.#e,aggregateFunctionNode:Ul.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}$castTo(){return new ho(this.#e)}$notNull(){return new ho(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}Tn(ho,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class yG{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return yu.create(this.#e.toOperationNode(),Er.create(this.#t))}}function hD(){const t=(n,r)=>new rr(kR.create(n,Oh(r??[]))),e=(n,r)=>new ho({aggregateFunctionNode:Ul.create(n,r?Oh(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(...n){return t("coalesce",n)},count(n){return e("count",[n])},countAll(n){return new ho({aggregateFunctionNode:Ul.create("count",ya(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])},jsonAgg(n){return new ho({aggregateFunctionNode:Ul.create("json_agg",[Us(n)?Gr(n):n.toOperationNode()])})},toJson(n){return new rr(kR.create("to_json",[Us(n)?Gr(n):n.toOperationNode()]))}})}const bG=Q({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return Q({kind:"UnaryOperationNode",operator:t,operand:e})}});function vG(t,e){return bG.create(au.create(t),Ls(e))}const la=Q({is(t){return t.kind==="CaseNode"},create(t){return Q({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return Q({...t,when:Q(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return Q({...t,when:t.when?Q([...t.when.slice(0,-1),Rm.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return Q({...t,...e})}});class mD{#e;constructor(e){this.#e=Q(e)}when(...e){return new gD({...this.#e,node:la.cloneWithWhen(this.#e.node,Rm.create(Ni(e)))})}}class gD{#e;constructor(e){this.#e=Q(e)}then(e){return new xG({...this.#e,node:la.cloneWithThen(this.#e.node,_1(e)?S1(e):ni(e))})}}class xG{#e;constructor(e){this.#e=Q(e)}when(...e){return new gD({...this.#e,node:la.cloneWithWhen(this.#e.node,Rm.create(Ni(e)))})}else(e){return new wG({...this.#e,node:la.cloneWith(this.#e.node,{else:_1(e)?S1(e):ni(e)})})}end(){return new rr(la.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new rr(la.cloneWith(this.#e.node,{isStatement:!0}))}}class wG{#e;constructor(e){this.#e=Q(e)}end(){return new rr(la.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new rr(la.cloneWith(this.#e.node,{isStatement:!0}))}}const CR=Q({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return Q({kind:"JSONPathLegNode",type:t,value:e})}});class sI{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,n){return Hb.is(this.#e)?new Ph(Hb.cloneWithTraversal(this.#e,bh.is(this.#e.traversal)?bh.cloneWithLeg(this.#e.traversal,CR.create(e,n)):eD.cloneWithValue(this.#e.traversal,ma.createImmediate(n)))):new Ph(bh.cloneWithLeg(this.#e,CR.create(e,n)))}}class Ph extends sI{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new _G(this,e)}$castTo(){return new Ph(this.#e)}$notNull(){return new Ph(this.#e)}toOperationNode(){return this.#e}}class _G{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return yu.create(this.#e.toOperationNode(),Ns(this.#t)?this.#t.toOperationNode():Er.create(this.#t))}}const TR=Q({is(t){return t.kind==="TupleNode"},create(t){return Q({kind:"TupleNode",values:Q(t)})}}),SG=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],EG=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],IG=Q({is(t){return t.kind==="DataTypeNode"},create(t){return Q({kind:"DataTypeNode",dataType:t})}});function NG(t){return!!(SG.includes(t)||EG.some(e=>e.test(t)))}function yc(t){if(Ns(t))return t.toOperationNode();if(NG(t))return IG.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}const kG=Q({is(t){return t.kind==="CastNode"},create(t,e){return Q({kind:"CastNode",expression:t,dataType:e})}});function C1(t=ox){function e(i,s,o){return new rr(E1(i,s,o))}function n(i,s){return new rr(vG(i,s))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(i){return iI({queryId:Xn(),executor:t,queryNode:Zn.createFrom(Fh(i))})},case(i){return new mD({node:la.create(Yl(i)?void 0:Ls(i))})},ref(i,s){return Yl(s)?new rr(rl(i)):new sI(kH(i,s))},jsonPath(){return new sI(bh.create())},table(i){return new rr(Gr(i))},val(i){return new rr(ni(i))},refTuple(...i){return new rr(TR.create(i.map(Ls)))},tuple(...i){return new rr(TR.create(i.map(ni)))},lit(i){return new rr(S1(i))},unary:n,not(i){return n("not",i)},exists(i){return n("exists",i)},neg(i){return n("-",i)},between(i,s,o){return new rr(sf.create(Ls(i),au.create("between"),ou.create(ni(s),ni(o))))},betweenSymmetric(i,s,o){return new rr(sf.create(Ls(i),au.create("between symmetric"),ou.create(ni(s),ni(o))))},and(i){return nl(i)?new rr(Kb(i,"and")):new rr(dR(i,"and"))},or(i){return nl(i)?new rr(Kb(i,"or")):new rr(dR(i,"or"))},parens(...i){const s=Ni(i);return of.is(s)?new rr(s):new rr(of.create(s))},cast(i,s){return new rr(kG.create(Ls(i),yc(s)))},withSchema(i){return C1(t.withPluginAtFront(new qm(i)))}});return r.fn=hD(),r.eb=r,r}function jf(t){return C1()}function Cc(t){if(Ns(t))return t.toOperationNode();if(Qs(t))return t(jf()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function yD(t){if(Ns(t))return t.toOperationNode();if(Qs(t))return t(jf()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function Pm(t){return yH(t)||bH(t)||Qs(t)}function Fh(t){return nl(t)?t.map(e=>Dh(e)):[Dh(t)]}function Dh(t){return Us(t)?bD(t):yD(t)}function bD(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(vD);return yu.create(Gr(n),Er.create(r))}else return Gr(t)}function Gr(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(vD);return eu.createWithSchema(n,r)}else return eu.create(t)}function vD(t){return t.trim()}const xD=Q({is(t){return t.kind==="AddColumnNode"},create(t){return Q({kind:"AddColumnNode",column:t})}}),xr=Q({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return Q({kind:"ColumnDefinitionNode",column:Jr.create(t),dataType:e})},cloneWithFrontModifier(t,e){return Q({...t,frontModifiers:t.frontModifiers?Q([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return Q({...t,endModifiers:t.endModifiers?Q([...t.endModifiers,e]):[e]})},cloneWith(t,e){return Q({...t,...e})}}),wD=Q({is(t){return t.kind==="DropColumnNode"},create(t){return Q({kind:"DropColumnNode",column:Jr.create(t)})}}),_D=Q({is(t){return t.kind==="RenameColumnNode"},create(t,e){return Q({kind:"RenameColumnNode",column:Jr.create(t),renameTo:Jr.create(e)})}}),T1=Q({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return Q({kind:"CheckConstraintNode",expression:t,name:e?Er.create(e):void 0})}}),CG=["no action","restrict","cascade","set null","set default"],nb=Q({is(t){return t.kind==="ReferencesNode"},create(t,e){return Q({kind:"ReferencesNode",table:t,columns:Q([...e])})},cloneWithOnDelete(t,e){return Q({...t,onDelete:e})},cloneWithOnUpdate(t,e){return Q({...t,onUpdate:e})}});function SD(t){return Ns(t)?t.toOperationNode():ma.createImmediate(t)}const gy=Q({is(t){return t.kind==="GeneratedNode"},create(t){return Q({kind:"GeneratedNode",...t})},createWithExpression(t){return Q({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return Q({...t,...e})}}),TG=Q({is(t){return t.kind==="DefaultValueNode"},create(t){return Q({kind:"DefaultValueNode",defaultValue:t})}});function Xb(t){if(CG.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}class ar{#e;constructor(e){this.#e=e}autoIncrement(){return new ar(xr.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new ar(xr.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new ar(xr.cloneWith(this.#e,{primaryKey:!0}))}references(e){const n=rl(e);if(!n.table||v1.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new ar(xr.cloneWith(this.#e,{references:nb.create(n.table,[n.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new ar(xr.cloneWith(this.#e,{references:nb.cloneWithOnDelete(this.#e.references,Xb(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new ar(xr.cloneWith(this.#e,{references:nb.cloneWithOnUpdate(this.#e.references,Xb(e))}))}unique(){return new ar(xr.cloneWith(this.#e,{unique:!0}))}notNull(){return new ar(xr.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new ar(xr.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new ar(xr.cloneWith(this.#e,{defaultTo:TG.create(SD(e))}))}check(e){return new ar(xr.cloneWith(this.#e,{check:T1.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new ar(xr.cloneWith(this.#e,{generated:gy.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new ar(xr.cloneWith(this.#e,{generated:gy.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new ar(xr.cloneWith(this.#e,{generated:gy.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new ar(xr.cloneWith(this.#e,{generated:gy.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new ar(xr.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new ar(xr.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new ar(xr.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new ar(xr.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}Tn(ar,"don't await ColumnDefinitionBuilder instances directly.");const ED=Q({is(t){return t.kind==="ModifyColumnNode"},create(t){return Q({kind:"ModifyColumnNode",column:t})}}),ev=Q({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return Q({kind:"ForeignKeyConstraintNode",columns:t,references:nb.create(e,n),name:r?Er.create(r):void 0})},cloneWith(t,e){return Q({...t,...e})}});class af{#e;constructor(e){this.#e=e}onDelete(e){return new af(ev.cloneWith(this.#e,{onDelete:Xb(e)}))}onUpdate(e){return new af(ev.cloneWith(this.#e,{onUpdate:Xb(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}}Tn(af,"don't await ForeignKeyConstraintBuilder instances directly.");const rb=Q({is(t){return t.kind==="AddConstraintNode"},create(t){return Q({kind:"AddConstraintNode",constraint:t})}}),j1=Q({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,n){return Q({kind:"UniqueConstraintNode",columns:Q(t.map(Jr.create)),name:e?Er.create(e):void 0,nullsNotDistinct:n})},cloneWith(t,e){return Q({...t,...e})}}),ib=Q({is(t){return t.kind==="DropConstraintNode"},create(t){return Q({kind:"DropConstraintNode",constraintName:Er.create(t)})},cloneWith(t,e){return Q({...t,...e})}}),Fp=Q({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return Q({kind:"AlterColumnNode",column:Jr.create(t),[e]:n})}});class R1{#e;constructor(e){this.#e=e}setDataType(e){return new Nd(Fp.create(this.#e,"dataType",yc(e)))}setDefault(e){return new Nd(Fp.create(this.#e,"setDefault",SD(e)))}dropDefault(){return new Nd(Fp.create(this.#e,"dropDefault",!0))}setNotNull(){return new Nd(Fp.create(this.#e,"setNotNull",!0))}dropNotNull(){return new Nd(Fp.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}}Tn(R1,"don't await AlterColumnBuilder instances");class Nd{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}Tn(Nd,"don't await AlteredColumnBuilder instances");class Gu{#e;constructor(e){this.#e=Q(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Gu,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class Lh{#e;constructor(e){this.#e=Q(e)}onDelete(e){return new Lh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new Lh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Yn.cloneWithTableProps(this.#e.node,{addConstraint:rb.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Lh,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class Gd{#e;constructor(e){this.#e=Q(e)}ifExists(){return new Gd({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropConstraint:ib.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new Gd({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropConstraint:ib.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new Gd({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropConstraint:ib.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Gd,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const ID=Q({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return Q({kind:"PrimaryKeyConstraintNode",columns:Q(t.map(Jr.create)),name:e?Er.create(e):void 0})}}),kd=Q({is(t){return t.kind==="AddIndexNode"},create(t){return Q({kind:"AddIndexNode",name:Er.create(t)})},cloneWith(t,e){return Q({...t,...e})},cloneWithColumns(t,e){return Q({...t,columns:[...t.columns||[],...e]})}});class Vl{#e;constructor(e){this.#e=Q(e)}unique(){return new Vl({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:kd.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new Vl({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:kd.cloneWithColumns(this.#e.node.addIndex,[Gb(e)])})})}columns(e){return new Vl({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:kd.cloneWithColumns(this.#e.node.addIndex,e.map(Gb))})})}expression(e){return new Vl({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:kd.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new Vl({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:kd.cloneWith(this.#e.node.addIndex,{using:qi.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Vl,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class Fm{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}nullsNotDistinct(){return new Fm(j1.cloneWith(this.#e,{nullsNotDistinct:!0}))}}Tn(Fm,"don't await UniqueConstraintNodeBuilder instances directly.");class ND{#e;constructor(e){this.#e=Q(e)}renameTo(e){return new Gu({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{renameTo:Gr(e)})})}setSchema(e){return new Gu({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{setSchema:Er.create(e)})})}alterColumn(e,n){const r=n(new R1(e));return new go({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new go({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,wD.create(e))})}renameColumn(e,n){return new go({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,_D.create(e,n))})}addColumn(e,n,r=Xl){const i=r(new ar(xr.create(e,yc(n))));return new go({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,xD.create(i.toOperationNode()))})}modifyColumn(e,n,r=Xl){const i=r(new ar(xr.create(e,yc(n))));return new go({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,ED.create(i.toOperationNode()))})}addUniqueConstraint(e,n,r=Xl){const i=r(new Fm(j1.create(n,e)));return new Gu({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addConstraint:rb.create(i.toOperationNode())})})}addCheckConstraint(e,n){return new Gu({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addConstraint:rb.create(T1.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,i){return new Lh({...this.#e,constraintBuilder:new af(ev.create(n.map(Jr.create),Gr(r),i.map(Jr.create),e))})}addPrimaryKeyConstraint(e,n){return new Gu({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addConstraint:rb.create(ID.create(n,e))})})}dropConstraint(e){return new Gd({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropConstraint:ib.create(e)})})}addIndex(e){return new Vl({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:kd.create(e)})})}dropIndex(e){return new Gu({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropIndex:gh.create(e)})})}$call(e){return e(this)}}Tn(ND,"don't await AlterTableBuilder instances");class go{#e;constructor(e){this.#e=Q(e)}alterColumn(e,n){const r=n(new R1(e));return new go({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new go({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,wD.create(e))})}renameColumn(e,n){return new go({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,_D.create(e,n))})}addColumn(e,n,r=Xl){const i=r(new ar(xr.create(e,yc(n))));return new go({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,xD.create(i.toOperationNode()))})}modifyColumn(e,n,r=Xl){const i=r(new ar(xr.create(e,yc(n))));return new go({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,ED.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(go,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class kD extends uD{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class fo{#e;constructor(e){this.#e=Q(e)}ifNotExists(){return new fo({...this.#e,node:Wa.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new fo({...this.#e,node:Wa.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new fo({...this.#e,node:Wa.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new fo({...this.#e,node:Wa.cloneWith(this.#e.node,{table:Gr(e)})})}column(e){return new fo({...this.#e,node:Wa.cloneWithColumns(this.#e.node,[Gb(e)])})}columns(e){return new fo({...this.#e,node:Wa.cloneWithColumns(this.#e.node,e.map(Gb))})}expression(e){return new fo({...this.#e,node:Wa.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new fo({...this.#e,node:Wa.cloneWith(this.#e.node,{using:qi.createWithSql(e)})})}where(...e){const n=new kD;return new fo({...this.#e,node:$t.cloneWithWhere(this.#e.node,n.transformNode(Ni(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(fo,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class ax{#e;constructor(e){this.#e=Q(e)}ifNotExists(){return new ax({...this.#e,node:QF.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(ax,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function jG(t){if(gH.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}class ys{#e;constructor(e){this.#e=Q(e)}temporary(){return new ys({...this.#e,node:Os.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new ys({...this.#e,node:Os.cloneWith(this.#e.node,{onCommit:jG(e)})})}ifNotExists(){return new ys({...this.#e,node:Os.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,n,r=Xl){const i=r(new ar(xr.create(e,yc(n))));return new ys({...this.#e,node:Os.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new ys({...this.#e,node:Os.cloneWithConstraint(this.#e.node,ID.create(n,e))})}addUniqueConstraint(e,n,r=Xl){const i=r(new Fm(j1.create(n,e)));return new ys({...this.#e,node:Os.cloneWithConstraint(this.#e.node,i.toOperationNode())})}addCheckConstraint(e,n){return new ys({...this.#e,node:Os.cloneWithConstraint(this.#e.node,T1.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,i,s=Xl){const o=s(new af(ev.create(n.map(Jr.create),Gr(r),i.map(Jr.create),e)));return new ys({...this.#e,node:Os.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(e){return new ys({...this.#e,node:Os.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new ys({...this.#e,node:Os.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new ys({...this.#e,node:Os.cloneWith(this.#e.node,{selectQuery:Cc(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(ys,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class Kd{#e;constructor(e){this.#e=Q(e)}on(e){return new Kd({...this.#e,node:gh.cloneWith(this.#e.node,{table:Gr(e)})})}ifExists(){return new Kd({...this.#e,node:gh.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Kd({...this.#e,node:gh.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Kd,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class Mh{#e;constructor(e){this.#e=Q(e)}ifExists(){return new Mh({...this.#e,node:YE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Mh({...this.#e,node:YE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Mh,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class $h{#e;constructor(e){this.#e=Q(e)}ifExists(){return new $h({...this.#e,node:XE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new $h({...this.#e,node:XE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn($h,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const Ml=Q({is(t){return t.kind==="CreateViewNode"},create(t){return Q({kind:"CreateViewNode",name:su.create(t)})},cloneWith(t,e){return Q({...t,...e})}});class RG{#e=new kD;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class Ha{#e;constructor(e){this.#e=Q(e)}temporary(){return new Ha({...this.#e,node:Ml.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new Ha({...this.#e,node:Ml.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new Ha({...this.#e,node:Ml.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new Ha({...this.#e,node:Ml.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new Ha({...this.#e,node:Ml.cloneWith(this.#e.node,{columns:e.map(nD)})})}as(e){const n=e.withPlugin(new RG).toOperationNode();return new Ha({...this.#e,node:Ml.cloneWith(this.#e.node,{as:n})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Ha,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const sb=Q({is(t){return t.kind==="DropViewNode"},create(t){return Q({kind:"DropViewNode",name:su.create(t)})},cloneWith(t,e){return Q({...t,...e})}});class Qd{#e;constructor(e){this.#e=Q(e)}materialized(){return new Qd({...this.#e,node:sb.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new Qd({...this.#e,node:sb.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Qd({...this.#e,node:sb.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Qd,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const CD=Q({is(t){return t.kind==="CreateTypeNode"},create(t){return Q({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return Q({...t,enum:w1.create(e.map(n=>ma.createImmediate(n)))})}});class lx{#e;constructor(e){this.#e=Q(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new lx({...this.#e,node:CD.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(lx,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const TD=Q({is(t){return t.kind==="DropTypeNode"},create(t){return Q({kind:"DropTypeNode",name:t})},cloneWith(t,e){return Q({...t,...e})}});class ux{#e;constructor(e){this.#e=Q(e)}ifExists(){return new ux({...this.#e,node:TD.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(ux,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function jR(t){const e=".";if(t.includes(e)){const n=t.split(e).map(OG);if(n.length===2)return su.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return su.create(t)}function OG(t){return t.trim()}class wh{#e;constructor(e){this.#e=e}createTable(e){return new ys({queryId:Xn(),executor:this.#e,node:Os.create(Gr(e))})}dropTable(e){return new $h({queryId:Xn(),executor:this.#e,node:XE.create(Gr(e))})}createIndex(e){return new fo({queryId:Xn(),executor:this.#e,node:Wa.create(e)})}dropIndex(e){return new Kd({queryId:Xn(),executor:this.#e,node:gh.create(e)})}createSchema(e){return new ax({queryId:Xn(),executor:this.#e,node:QF.create(e)})}dropSchema(e){return new Mh({queryId:Xn(),executor:this.#e,node:YE.create(e)})}alterTable(e){return new ND({queryId:Xn(),executor:this.#e,node:Yn.create(Gr(e))})}createView(e){return new Ha({queryId:Xn(),executor:this.#e,node:Ml.create(e)})}dropView(e){return new Qd({queryId:Xn(),executor:this.#e,node:sb.create(e)})}createType(e){return new lx({queryId:Xn(),executor:this.#e,node:CD.create(jR(e))})}dropType(e){return new ux({queryId:Xn(),executor:this.#e,node:TD.create(jR(e))})}withPlugin(e){return new wh(this.#e.withPlugin(e))}withoutPlugins(){return new wh(this.#e.withoutPlugins())}withSchema(e){return new wh(this.#e.withPluginAtFront(new qm(e)))}}class AG{ref(e){return new IH(e)}}class qG{#e;constructor(e){this.#e=e}async provideConnection(e){const n=await this.#e.acquireConnection();try{return await e(n)}finally{await this.#e.releaseConnection(n)}}}class Yu extends cD{#e;#t;#n;constructor(e,n,r,i=[]){super(i),this.#e=e,this.#t=n,this.#n=r}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#n.provideConnection(e)}withPlugins(e){return new Yu(this.#e,this.#t,this.#n,[...this.plugins,...e])}withPlugin(e){return new Yu(this.#e,this.#t,this.#n,[...this.plugins,e])}withPluginAtFront(e){return new Yu(this.#e,this.#t,this.#n,[e,...this.plugins])}withConnectionProvider(e){return new Yu(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new Yu(this.#e,this.#t,this.#n,[])}}function RR(){return typeof performance<"u"&&Qs(performance.now)?performance.now():Date.now()}class PG{#e;#t;#n;#r;#i;#s=new WeakSet;constructor(e,n){this.#r=!1,this.#e=e,this.#t=n}async init(){if(this.#i)throw new Error("driver has already been destroyed");this.#n||(this.#n=this.#e.init().then(()=>{this.#r=!0}).catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n}async acquireConnection(){if(this.#i)throw new Error("driver has already been destroyed");this.#r||await this.init();const e=await this.#e.acquireConnection();return this.#s.has(e)||(this.#o()&&this.#a(e),this.#s.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,n){return this.#e.beginTransaction(e,n)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#n&&(await this.#n,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#o(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#a(e){const n=e.executeQuery;e.executeQuery=async r=>{let i;const s=RR();try{return await n.call(e,r)}catch(o){throw i=o,await this.#u(o,r,s),o}finally{i||await this.#l(r,s)}}}async #u(e,n,r){await this.#t.error(()=>({level:"error",error:e,query:n,queryDurationMillis:this.#c(r)}))}async #l(e,n){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#c(n)}))}#c(e){return RR()-e}}const FG=()=>{};class jD{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(FG);return this.#t=this.#n(e).finally(()=>{this.#t=void 0}),this.#t}async #n(e){return await e(this.#e)}}const DG=["read uncommitted","read committed","repeatable read","serializable","snapshot"];Q(["query","error"]);class LG{#e;#t;constructor(e){Qs(e)?(this.#t=e,this.#e=Q({query:!0,error:!0})):(this.#t=MG,this.#e=Q({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}function MG(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function $G(t){return oa(t)&&Qs(t.compile)}let O1=class Xp extends Wl{#e;constructor(e){let n,r;if(BG(e))n={executor:e.executor},r={...e};else{const i=e.dialect,s=i.createDriver(),o=i.createQueryCompiler(),a=i.createAdapter(),u=new LG(e.log??[]),d=new PG(s,u),p=new qG(d),h=new Yu(o,a,p,e.plugins??[]);n={executor:h},r={config:e,executor:h,dialect:i,driver:d}}super(n),this.#e=Q(r)}get schema(){return new wh(this.#e.executor)}get dynamic(){return new AG}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new mD({node:la.create(Yl(e)?void 0:Cc(e))})}get fn(){return hD()}transaction(){return new cx({...this.#e})}connection(){return new RD({...this.#e})}withPlugin(e){return new Xp({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Xp({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Xp({...this.#e,executor:this.#e.executor.withPluginAtFront(new qm(e))})}withTables(){return new Xp({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,n=Xn()){const r=$G(e)?e.compile():e;return this.getExecutor().executeQuery(r,n)}};class Rd extends O1{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new Rd({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Rd({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Rd({...this.#e,executor:this.#e.executor.withPluginAtFront(new qm(e))})}withTables(){return new Rd({...this.#e})}}function BG(t){return oa(t)&&oa(t.config)&&oa(t.driver)&&oa(t.executor)&&oa(t.dialect)}class RD{#e;constructor(e){this.#e=Q(e)}async execute(e){return this.#e.executor.provideConnection(async n=>{const r=this.#e.executor.withConnectionProvider(new jD(n)),i=new O1({...this.#e,executor:r});return await e(i)})}}Tn(RD,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class cx{#e;constructor(e){this.#e=Q(e)}setIsolationLevel(e){return new cx({...this.#e,isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=this.#e,i={isolationLevel:n};return zG(i),this.#e.executor.provideConnection(async s=>{const o=this.#e.executor.withConnectionProvider(new jD(s)),a=new Rd({...r,executor:o});try{await this.#e.driver.beginTransaction(s,i);const u=await e(a);return await this.#e.driver.commitTransaction(s),u}catch(u){throw await this.#e.driver.rollbackTransaction(s),u}})}}Tn(cx,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function zG(t){if(t.isolationLevel&&!DG.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}class Jd{#e;constructor(e){this.#e=Q(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new OD(this,e)}$castTo(){return new Jd({...this.#e})}$notNull(){return new Jd(this.#e)}withPlugin(e){return new Jd({...this.#e,plugins:this.#e.plugins!==void 0?Q([...this.#e.plugins,e]):Q([e])})}toOperationNode(){return this.#n(this.#t())}compile(e){return this.#r(this.#t(e))}async execute(e){const n=this.#t(e);return n.executeQuery(this.#r(n),this.#e.queryId)}#t(e){const n=e!==void 0?e.getExecutor():ox;return this.#e.plugins!==void 0?n.withPlugins(this.#e.plugins):n}#n(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#r(e){return e.compileQuery(this.#n(e),this.#e.queryId)}}function Al(t){return new Jd(t)}Tn(Jd,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class OD{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return yu.create(this.#e.toOperationNode(),Ns(this.#t)?this.#t.toOperationNode():Er.create(this.#t))}}Tn(OD,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const Sr=Object.assign((t,...e)=>Al({queryId:Xn(),rawNode:qi.create(t,e?.map(OR)??[])}),{ref(t){return Al({queryId:Xn(),rawNode:qi.createWithChild(rl(t))})},val(t){return Al({queryId:Xn(),rawNode:qi.createWithChild(ni(t))})},value(t){return this.val(t)},table(t){return Al({queryId:Xn(),rawNode:qi.createWithChild(Gr(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",Al({queryId:Xn(),rawNode:qi.create(e,t.map(Er.create))})},lit(t){return Al({queryId:Xn(),rawNode:qi.createWithChild(ma.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return Al({queryId:Xn(),rawNode:qi.createWithSql(t)})},join(t,e=Sr`, `){const n=new Array(2*t.length-1),r=e.toOperationNode();for(let i=0;i<t.length;++i)n[2*i]=OR(t[i]),i!==t.length-1&&(n[2*i+1]=r);return Al({queryId:Xn(),rawNode:qi.createWithChildren(n)})}});function OR(t){return Ns(t)?t.toOperationNode():ni(t)}class WG{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=Q({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}class UG extends WG{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),Q({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){const n=this.parentNode!==void 0&&!of.is(this.parentNode)&&!Ps.is(this.parentNode)&&!Os.is(this.parentNode)&&!Ml.is(this.parentNode)&&!fD.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),n&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,n=", "){const r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(n)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){const n=this.nodeStack.find($t.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!ws.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!ws.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){const n=this.nodeStack.find($t.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Us(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");const{values:n}=e;for(let r=0;r<n.length;++r)this.appendValue(n[r]),r!==n.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(HG[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){const{sqlFragments:n,parameters:r}=e;for(let i=0;i<n.length;++i)this.append(n[i]),r.length>i&&this.visitNode(r[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){const n=this.nodeStack.find($t.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!ws.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!ws.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),Vb(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(VG[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return au.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(const n of e.pathLegs)this.visitNode(n);this.append("'")}visitJSONPathLeg(e){const n=e.type==="ArrayLocation";this.append(n?"[":"."),this.append(String(e.value)),n&&this.append("]")}visitJSONOperatorChain(e){for(let n=0,r=e.values.length;n<r;n++)n===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[n])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){const n=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper();let i="";for(const s of e)i+=s,s===n?i+=n:s===r&&(i+=r);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Us(e))this.append(`'${e}'`);else if(ix(e)||Vb(e))this.append(e.toString());else if(y1(e))this.append("null");else if(mH(e))this.appendImmediateValue(e.toISOString());else if(b1(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((n,r)=>n.modifier&&r.modifier?AR[n.modifier]-AR[r.modifier]:1),Q(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}const VG=Q({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),AR=Q({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),HG=Q({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"});class GG{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}const KG=/"/g;class QG extends UG{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(KG,'""')}visitDefaultInsertValue(e){this.append("null")}}const JG="kysely_migration",ZG="kysely_migration_lock";Q({__noMigrations__:!0});class YG{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let n=this.#e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(n=n.where("name","!=",JG).where("name","!=",ZG));const r=await n.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(e){return{tables:await this.getTables(e)}}async #t(e){const n=this.#e,r=await n.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),i=r.sql?.split(/[\(\),]/)?.find(o=>o.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),s=await n.selectFrom(Sr`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:s.map(o=>({name:o.name,dataType:o.type,isNullable:!o.notnull,isAutoIncrementing:o.name===i,hasDefaultValue:o.dflt_value!=null,comment:void 0}))}}}class XG extends GG{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}const ca={jsonObject(t){const e=Sr.join(Object.entries(t).map(([n,r])=>Sr`${n}, ${r}`));return Sr`json_object(${e})`},jsonGroupArray(t){return Sr`json_group_array(${ca.jsonObject(t)})`}},AD={hash(t){return ZE.sha224(t)},verify(t,e){return ZE.sha224(t)===e}};var Pn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Pn||(Pn={}));var oI;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(oI||(oI={}));const Lt=Pn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ga=t=>{switch(typeof t){case"undefined":return Lt.undefined;case"string":return Lt.string;case"number":return isNaN(t)?Lt.nan:Lt.number;case"boolean":return Lt.boolean;case"function":return Lt.function;case"bigint":return Lt.bigint;case"symbol":return Lt.symbol;case"object":return Array.isArray(t)?Lt.array:t===null?Lt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Lt.promise:typeof Map<"u"&&t instanceof Map?Lt.map:typeof Set<"u"&&t instanceof Set?Lt.set:typeof Date<"u"&&t instanceof Date?Lt.date:Lt.object;default:return Lt.unknown}},yt=Pn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),eK=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ws extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(n(o))):a[d]=a[d]||{_errors:[]},a=a[d],u++}}};return i(this),r}static assert(e){if(!(e instanceof Ws))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Pn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ws.create=t=>new Ws(t);const lf=(t,e)=>{let n;switch(t.code){case yt.invalid_type:t.received===Lt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case yt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Pn.jsonStringifyReplacer)}`;break;case yt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Pn.joinValues(t.keys,", ")}`;break;case yt.invalid_union:n="Invalid input";break;case yt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Pn.joinValues(t.options)}`;break;case yt.invalid_enum_value:n=`Invalid enum value. Expected ${Pn.joinValues(t.options)}, received '${t.received}'`;break;case yt.invalid_arguments:n="Invalid function arguments";break;case yt.invalid_return_type:n="Invalid function return type";break;case yt.invalid_date:n="Invalid date";break;case yt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Pn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case yt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case yt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case yt.custom:n="Invalid input";break;case yt.invalid_intersection_types:n="Intersection results could not be merged";break;case yt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case yt.not_finite:n="Number must be finite";break;default:n=e.defaultError,Pn.assertNever(t)}return{message:n}};let qD=lf;function tK(t){qD=t}function tv(){return qD}const nv=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const u=r.filter(d=>!!d).slice().reverse();for(const d of u)a=d(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},nK=[];function Rt(t,e){const n=tv(),r=nv({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===lf?void 0:lf].filter(i=>!!i)});t.common.issues.push(r)}class Li{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return mn;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Li.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return mn;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const mn=Object.freeze({status:"aborted"}),Od=t=>({status:"dirty",value:t}),rs=t=>({status:"valid",value:t}),aI=t=>t.status==="aborted",lI=t=>t.status==="dirty",bc=t=>t.status==="valid",Bh=t=>typeof Promise<"u"&&t instanceof Promise;function rv(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function PD(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Qt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Qt||(Qt={}));var eh,th;class ba{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const qR=(t,e)=>{if(bc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ws(t.common.issues);return this._error=n,this._error}}};function kn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var u,d;const{message:p}=t;return o.code==="invalid_enum_value"?{message:p??a.defaultError}:typeof a.data>"u"?{message:(u=p??r)!==null&&u!==void 0?u:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(d=p??n)!==null&&d!==void 0?d:a.defaultError}},description:i}}class jn{get description(){return this._def.description}_getType(e){return Ga(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ga(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Li,ctx:{common:e.parent.common,data:e.data,parsedType:Ga(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Bh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ga(e)},s=this._parseSync({data:e,path:i.path,parent:i});return qR(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ga(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return bc(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>bc(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ga(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await (Bh(i)?i:Promise.resolve(i));return qR(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:yt.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Go({schema:this,typeName:pn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return da.create(this,this._def)}nullable(){return fu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Wo.create(this)}promise(){return cf.create(this,this._def)}or(e){return Vh.create([this,e],this._def)}and(e){return Hh.create(this,e,this._def)}transform(e){return new Go({...kn(this._def),schema:this,typeName:pn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Zh({...kn(this._def),innerType:this,defaultValue:n,typeName:pn.ZodDefault})}brand(){return new A1({typeName:pn.ZodBranded,type:this,...kn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Yh({...kn(this._def),innerType:this,catchValue:n,typeName:pn.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Dm.create(this,e)}readonly(){return Xh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const rK=/^c[^\s-]{8,}$/i,iK=/^[0-9a-z]+$/,sK=/^[0-9A-HJKMNP-TV-Z]{26}$/i,oK=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aK=/^[a-z0-9_-]{21}$/i,lK=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,uK=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,cK=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,dK="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let D0;const fK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,hK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,mK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gK=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,yK=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,FD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",bK=new RegExp(`^${FD}$`);function DD(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function vK(t){return new RegExp(`^${DD(t)}$`)}function LD(t){let e=`${FD}T${DD(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function xK(t,e){return!!((e==="v4"||!e)&&fK.test(t)||(e==="v6"||!e)&&hK.test(t))}function wK(t,e){if(!lK.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function _K(t,e){return!!((e==="v4"||!e)&&pK.test(t)||(e==="v6"||!e)&&mK.test(t))}class Bo extends jn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Lt.string){const s=this._getOrReturnCtx(e);return Rt(s,{code:yt.invalid_type,expected:Lt.string,received:s.parsedType}),mn}const r=new Li;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Rt(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Rt(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")cK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"email",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")D0||(D0=new RegExp(dK,"u")),D0.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"emoji",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")oK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"uuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")aK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"nanoid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")rK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"cuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")iK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"cuid2",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")sK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"ulid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Rt(i,{validation:"url",code:yt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"regex",code:yt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?LD(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?bK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?vK(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?uK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"duration",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?xK(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"ip",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?wK(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"jwt",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?_K(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"cidr",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?gK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"base64",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?yK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"base64url",code:yt.invalid_string,message:s.message}),r.dirty()):Pn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:yt.invalid_string,...Qt.errToObj(r)})}_addCheck(e){return new Bo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Qt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Qt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Qt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Qt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Qt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Qt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Qt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Qt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Qt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Qt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Qt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Qt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Qt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Qt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Qt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Qt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Qt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Qt.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Qt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Qt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Qt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Qt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Qt.errToObj(n)})}nonempty(e){return this.min(1,Qt.errToObj(e))}trim(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Bo.create=t=>{var e;return new Bo({checks:[],typeName:pn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...kn(t)})};function SK(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class uu extends jn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Lt.number){const s=this._getOrReturnCtx(e);return Rt(s,{code:yt.invalid_type,expected:Lt.number,received:s.parsedType}),mn}let r;const i=new Li;for(const s of this._def.checks)s.kind==="int"?Pn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?SK(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.not_finite,message:s.message}),i.dirty()):Pn.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Qt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Qt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Qt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Qt.toString(n))}setLimit(e,n,r,i){return new uu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Qt.toString(i)}]})}_addCheck(e){return new uu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Qt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Qt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Qt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Qt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Qt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Qt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Qt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Qt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Qt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Pn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}uu.create=t=>new uu({checks:[],typeName:pn.ZodNumber,coerce:t?.coerce||!1,...kn(t)});class cu extends jn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Lt.bigint)return this._getInvalidInput(e);let r;const i=new Li;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Pn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Rt(n,{code:yt.invalid_type,expected:Lt.bigint,received:n.parsedType}),mn}gte(e,n){return this.setLimit("min",e,!0,Qt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Qt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Qt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Qt.toString(n))}setLimit(e,n,r,i){return new cu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Qt.toString(i)}]})}_addCheck(e){return new cu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Qt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Qt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Qt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Qt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Qt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}cu.create=t=>{var e;return new cu({checks:[],typeName:pn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...kn(t)})};class zh extends jn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Lt.boolean){const r=this._getOrReturnCtx(e);return Rt(r,{code:yt.invalid_type,expected:Lt.boolean,received:r.parsedType}),mn}return rs(e.data)}}zh.create=t=>new zh({typeName:pn.ZodBoolean,coerce:t?.coerce||!1,...kn(t)});class vc extends jn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Lt.date){const s=this._getOrReturnCtx(e);return Rt(s,{code:yt.invalid_type,expected:Lt.date,received:s.parsedType}),mn}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Rt(s,{code:yt.invalid_date}),mn}const r=new Li;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Pn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new vc({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Qt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Qt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}vc.create=t=>new vc({checks:[],coerce:t?.coerce||!1,typeName:pn.ZodDate,...kn(t)});class iv extends jn{_parse(e){if(this._getType(e)!==Lt.symbol){const r=this._getOrReturnCtx(e);return Rt(r,{code:yt.invalid_type,expected:Lt.symbol,received:r.parsedType}),mn}return rs(e.data)}}iv.create=t=>new iv({typeName:pn.ZodSymbol,...kn(t)});class Wh extends jn{_parse(e){if(this._getType(e)!==Lt.undefined){const r=this._getOrReturnCtx(e);return Rt(r,{code:yt.invalid_type,expected:Lt.undefined,received:r.parsedType}),mn}return rs(e.data)}}Wh.create=t=>new Wh({typeName:pn.ZodUndefined,...kn(t)});class Uh extends jn{_parse(e){if(this._getType(e)!==Lt.null){const r=this._getOrReturnCtx(e);return Rt(r,{code:yt.invalid_type,expected:Lt.null,received:r.parsedType}),mn}return rs(e.data)}}Uh.create=t=>new Uh({typeName:pn.ZodNull,...kn(t)});class uf extends jn{constructor(){super(...arguments),this._any=!0}_parse(e){return rs(e.data)}}uf.create=t=>new uf({typeName:pn.ZodAny,...kn(t)});class cc extends jn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return rs(e.data)}}cc.create=t=>new cc({typeName:pn.ZodUnknown,...kn(t)});class il extends jn{_parse(e){const n=this._getOrReturnCtx(e);return Rt(n,{code:yt.invalid_type,expected:Lt.never,received:n.parsedType}),mn}}il.create=t=>new il({typeName:pn.ZodNever,...kn(t)});class sv extends jn{_parse(e){if(this._getType(e)!==Lt.undefined){const r=this._getOrReturnCtx(e);return Rt(r,{code:yt.invalid_type,expected:Lt.void,received:r.parsedType}),mn}return rs(e.data)}}sv.create=t=>new sv({typeName:pn.ZodVoid,...kn(t)});class Wo extends jn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Lt.array)return Rt(n,{code:yt.invalid_type,expected:Lt.array,received:n.parsedType}),mn;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(Rt(n,{code:o?yt.too_big:yt.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Rt(n,{code:yt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Rt(n,{code:yt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new ba(n,o,n.path,a)))).then(o=>Li.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new ba(n,o,n.path,a)));return Li.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Wo({...this._def,minLength:{value:e,message:Qt.toString(n)}})}max(e,n){return new Wo({...this._def,maxLength:{value:e,message:Qt.toString(n)}})}length(e,n){return new Wo({...this._def,exactLength:{value:e,message:Qt.toString(n)}})}nonempty(e){return this.min(1,e)}}Wo.create=(t,e)=>new Wo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:pn.ZodArray,...kn(e)});function Cd(t){if(t instanceof Ar){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=da.create(Cd(r))}return new Ar({...t._def,shape:()=>e})}else return t instanceof Wo?new Wo({...t._def,type:Cd(t.element)}):t instanceof da?da.create(Cd(t.unwrap())):t instanceof fu?fu.create(Cd(t.unwrap())):t instanceof va?va.create(t.items.map(e=>Cd(e))):t}class Ar extends jn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Pn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Lt.object){const d=this._getOrReturnCtx(e);return Rt(d,{code:yt.invalid_type,expected:Lt.object,received:d.parsedType}),mn}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof il&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||a.push(d);const u=[];for(const d of o){const p=s[d],h=i.data[d];u.push({key:{status:"valid",value:d},value:p._parse(new ba(i,h,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof il){const d=this._def.unknownKeys;if(d==="passthrough")for(const p of a)u.push({key:{status:"valid",value:p},value:{status:"valid",value:i.data[p]}});else if(d==="strict")a.length>0&&(Rt(i,{code:yt.unrecognized_keys,keys:a}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const p of a){const h=i.data[p];u.push({key:{status:"valid",value:p},value:d._parse(new ba(i,h,i.path,p)),alwaysSet:p in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const p of u){const h=await p.key,g=await p.value;d.push({key:h,value:g,alwaysSet:p.alwaysSet})}return d}).then(d=>Li.mergeObjectSync(r,d)):Li.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Qt.errToObj,new Ar({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const u=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Qt.errToObj(e).message)!==null&&a!==void 0?a:u}:{message:u}}}:{}})}strip(){return new Ar({...this._def,unknownKeys:"strip"})}passthrough(){return new Ar({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ar({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ar({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:pn.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ar({...this._def,catchall:e})}pick(e){const n={};return Pn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ar({...this._def,shape:()=>n})}omit(e){const n={};return Pn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ar({...this._def,shape:()=>n})}deepPartial(){return Cd(this)}partial(e){const n={};return Pn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Ar({...this._def,shape:()=>n})}required(e){const n={};return Pn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof da;)s=s._def.innerType;n[r]=s}}),new Ar({...this._def,shape:()=>n})}keyof(){return MD(Pn.objectKeys(this.shape))}}Ar.create=(t,e)=>new Ar({shape:()=>t,unknownKeys:"strip",catchall:il.create(),typeName:pn.ZodObject,...kn(e)});Ar.strictCreate=(t,e)=>new Ar({shape:()=>t,unknownKeys:"strict",catchall:il.create(),typeName:pn.ZodObject,...kn(e)});Ar.lazycreate=(t,e)=>new Ar({shape:t,unknownKeys:"strip",catchall:il.create(),typeName:pn.ZodObject,...kn(e)});class Vh extends jn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Ws(a.ctx.common.issues));return Rt(n,{code:yt.invalid_union,unionErrors:o}),mn}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const u of r){const d={...n,common:{...n.common,issues:[]},parent:null},p=u._parseSync({data:n.data,path:n.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(u=>new Ws(u));return Rt(n,{code:yt.invalid_union,unionErrors:a}),mn}}get options(){return this._def.options}}Vh.create=(t,e)=>new Vh({options:t,typeName:pn.ZodUnion,...kn(e)});const Ua=t=>t instanceof Kh?Ua(t.schema):t instanceof Go?Ua(t.innerType()):t instanceof Qh?[t.value]:t instanceof du?t.options:t instanceof Jh?Pn.objectValues(t.enum):t instanceof Zh?Ua(t._def.innerType):t instanceof Wh?[void 0]:t instanceof Uh?[null]:t instanceof da?[void 0,...Ua(t.unwrap())]:t instanceof fu?[null,...Ua(t.unwrap())]:t instanceof A1||t instanceof Xh?Ua(t.unwrap()):t instanceof Yh?Ua(t._def.innerType):[];class dx extends jn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Lt.object)return Rt(n,{code:yt.invalid_type,expected:Lt.object,received:n.parsedType}),mn;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(Rt(n,{code:yt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),mn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=Ua(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new dx({typeName:pn.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...kn(r)})}}function uI(t,e){const n=Ga(t),r=Ga(e);if(t===e)return{valid:!0,data:t};if(n===Lt.object&&r===Lt.object){const i=Pn.objectKeys(e),s=Pn.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const u=uI(t[a],e[a]);if(!u.valid)return{valid:!1};o[a]=u.data}return{valid:!0,data:o}}else if(n===Lt.array&&r===Lt.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],u=uI(o,a);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===Lt.date&&r===Lt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Hh extends jn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(aI(s)||aI(o))return mn;const a=uI(s.value,o.value);return a.valid?((lI(s)||lI(o))&&n.dirty(),{status:n.value,value:a.data}):(Rt(r,{code:yt.invalid_intersection_types}),mn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Hh.create=(t,e,n)=>new Hh({left:t,right:e,typeName:pn.ZodIntersection,...kn(n)});class va extends jn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Lt.array)return Rt(r,{code:yt.invalid_type,expected:Lt.array,received:r.parsedType}),mn;if(r.data.length<this._def.items.length)return Rt(r,{code:yt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mn;!this._def.rest&&r.data.length>this._def.items.length&&(Rt(r,{code:yt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const u=this._def.items[a]||this._def.rest;return u?u._parse(new ba(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Li.mergeArray(n,o)):Li.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new va({...this._def,rest:e})}}va.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new va({items:t,typeName:pn.ZodTuple,rest:null,...kn(e)})};class Gh extends jn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Lt.object)return Rt(r,{code:yt.invalid_type,expected:Lt.object,received:r.parsedType}),mn;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new ba(r,a,r.path,a)),value:o._parse(new ba(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Li.mergeObjectAsync(n,i):Li.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof jn?new Gh({keyType:e,valueType:n,typeName:pn.ZodRecord,...kn(r)}):new Gh({keyType:Bo.create(),valueType:e,typeName:pn.ZodRecord,...kn(n)})}}class ov extends jn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Lt.map)return Rt(r,{code:yt.invalid_type,expected:Lt.map,received:r.parsedType}),mn;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,u],d)=>({key:i._parse(new ba(r,a,r.path,[d,"key"])),value:s._parse(new ba(r,u,r.path,[d,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,p=await u.value;if(d.status==="aborted"||p.status==="aborted")return mn;(d.status==="dirty"||p.status==="dirty")&&n.dirty(),a.set(d.value,p.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const u of o){const d=u.key,p=u.value;if(d.status==="aborted"||p.status==="aborted")return mn;(d.status==="dirty"||p.status==="dirty")&&n.dirty(),a.set(d.value,p.value)}return{status:n.value,value:a}}}}ov.create=(t,e,n)=>new ov({valueType:e,keyType:t,typeName:pn.ZodMap,...kn(n)});class xc extends jn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Lt.set)return Rt(r,{code:yt.invalid_type,expected:Lt.set,received:r.parsedType}),mn;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Rt(r,{code:yt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Rt(r,{code:yt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(u){const d=new Set;for(const p of u){if(p.status==="aborted")return mn;p.status==="dirty"&&n.dirty(),d.add(p.value)}return{status:n.value,value:d}}const a=[...r.data.values()].map((u,d)=>s._parse(new ba(r,u,r.path,d)));return r.common.async?Promise.all(a).then(u=>o(u)):o(a)}min(e,n){return new xc({...this._def,minSize:{value:e,message:Qt.toString(n)}})}max(e,n){return new xc({...this._def,maxSize:{value:e,message:Qt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}xc.create=(t,e)=>new xc({valueType:t,minSize:null,maxSize:null,typeName:pn.ZodSet,...kn(e)});class Zd extends jn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Lt.function)return Rt(n,{code:yt.invalid_type,expected:Lt.function,received:n.parsedType}),mn;function r(a,u){return nv({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,tv(),lf].filter(d=>!!d),issueData:{code:yt.invalid_arguments,argumentsError:u}})}function i(a,u){return nv({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,tv(),lf].filter(d=>!!d),issueData:{code:yt.invalid_return_type,returnTypeError:u}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof cf){const a=this;return rs(async function(...u){const d=new Ws([]),p=await a._def.args.parseAsync(u,s).catch(x=>{throw d.addIssue(r(u,x)),d}),h=await Reflect.apply(o,this,p);return await a._def.returns._def.type.parseAsync(h,s).catch(x=>{throw d.addIssue(i(h,x)),d})})}else{const a=this;return rs(function(...u){const d=a._def.args.safeParse(u,s);if(!d.success)throw new Ws([r(u,d.error)]);const p=Reflect.apply(o,this,d.data),h=a._def.returns.safeParse(p,s);if(!h.success)throw new Ws([i(p,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Zd({...this._def,args:va.create(e).rest(cc.create())})}returns(e){return new Zd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Zd({args:e||va.create([]).rest(cc.create()),returns:n||cc.create(),typeName:pn.ZodFunction,...kn(r)})}}class Kh extends jn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Kh.create=(t,e)=>new Kh({getter:t,typeName:pn.ZodLazy,...kn(e)});class Qh extends jn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Rt(n,{received:n.data,code:yt.invalid_literal,expected:this._def.value}),mn}return{status:"valid",value:e.data}}get value(){return this._def.value}}Qh.create=(t,e)=>new Qh({value:t,typeName:pn.ZodLiteral,...kn(e)});function MD(t,e){return new du({values:t,typeName:pn.ZodEnum,...kn(e)})}class du extends jn{constructor(){super(...arguments),eh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Rt(n,{expected:Pn.joinValues(r),received:n.parsedType,code:yt.invalid_type}),mn}if(rv(this,eh)||PD(this,eh,new Set(this._def.values)),!rv(this,eh).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Rt(n,{received:n.data,code:yt.invalid_enum_value,options:r}),mn}return rs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return du.create(e,{...this._def,...n})}exclude(e,n=this._def){return du.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}eh=new WeakMap;du.create=MD;class Jh extends jn{constructor(){super(...arguments),th.set(this,void 0)}_parse(e){const n=Pn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Lt.string&&r.parsedType!==Lt.number){const i=Pn.objectValues(n);return Rt(r,{expected:Pn.joinValues(i),received:r.parsedType,code:yt.invalid_type}),mn}if(rv(this,th)||PD(this,th,new Set(Pn.getValidEnumValues(this._def.values))),!rv(this,th).has(e.data)){const i=Pn.objectValues(n);return Rt(r,{received:r.data,code:yt.invalid_enum_value,options:i}),mn}return rs(e.data)}get enum(){return this._def.values}}th=new WeakMap;Jh.create=(t,e)=>new Jh({values:t,typeName:pn.ZodNativeEnum,...kn(e)});class cf extends jn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Lt.promise&&n.common.async===!1)return Rt(n,{code:yt.invalid_type,expected:Lt.promise,received:n.parsedType}),mn;const r=n.parsedType===Lt.promise?n.data:Promise.resolve(n.data);return rs(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}cf.create=(t,e)=>new cf({type:t,typeName:pn.ZodPromise,...kn(e)});class Go extends jn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Rt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return mn;const u=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return u.status==="aborted"?mn:u.status==="dirty"||n.value==="dirty"?Od(u.value):u});{if(n.value==="aborted")return mn;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?mn:a.status==="dirty"||n.value==="dirty"?Od(a.value):a}}if(i.type==="refinement"){const o=a=>{const u=i.refinement(a,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?mn:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?mn:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!bc(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>bc(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);Pn.assertNever(i)}}Go.create=(t,e,n)=>new Go({schema:t,typeName:pn.ZodEffects,effect:e,...kn(n)});Go.createWithPreprocess=(t,e,n)=>new Go({schema:e,effect:{type:"preprocess",transform:t},typeName:pn.ZodEffects,...kn(n)});class da extends jn{_parse(e){return this._getType(e)===Lt.undefined?rs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}da.create=(t,e)=>new da({innerType:t,typeName:pn.ZodOptional,...kn(e)});class fu extends jn{_parse(e){return this._getType(e)===Lt.null?rs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fu.create=(t,e)=>new fu({innerType:t,typeName:pn.ZodNullable,...kn(e)});class Zh extends jn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Lt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Zh.create=(t,e)=>new Zh({innerType:t,typeName:pn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...kn(e)});class Yh extends jn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Bh(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ws(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ws(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Yh.create=(t,e)=>new Yh({innerType:t,typeName:pn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...kn(e)});class av extends jn{_parse(e){if(this._getType(e)!==Lt.nan){const r=this._getOrReturnCtx(e);return Rt(r,{code:yt.invalid_type,expected:Lt.nan,received:r.parsedType}),mn}return{status:"valid",value:e.data}}}av.create=t=>new av({typeName:pn.ZodNaN,...kn(t)});const EK=Symbol("zod_brand");class A1 extends jn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Dm extends jn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?mn:s.status==="dirty"?(n.dirty(),Od(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?mn:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Dm({in:e,out:n,typeName:pn.ZodPipeline})}}class Xh extends jn{_parse(e){const n=this._def.innerType._parse(e),r=i=>(bc(i)&&(i.value=Object.freeze(i.value)),i);return Bh(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Xh.create=(t,e)=>new Xh({innerType:t,typeName:pn.ZodReadonly,...kn(e)});function $D(t,e={},n){return t?uf.create().superRefine((r,i)=>{var s,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,d=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...d,fatal:u})}}):uf.create()}const IK={object:Ar.lazycreate};var pn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(pn||(pn={}));const NK=(t,e={message:`Input not instance of ${t.name}`})=>$D(n=>n instanceof t,e),BD=Bo.create,zD=uu.create,kK=av.create,CK=cu.create,WD=zh.create,TK=vc.create,jK=iv.create,RK=Wh.create,OK=Uh.create,AK=uf.create,qK=cc.create,PK=il.create,FK=sv.create,DK=Wo.create,LK=Ar.create,MK=Ar.strictCreate,$K=Vh.create,BK=dx.create,zK=Hh.create,WK=va.create,UK=Gh.create,VK=ov.create,HK=xc.create,GK=Zd.create,KK=Kh.create,QK=Qh.create,JK=du.create,ZK=Jh.create,YK=cf.create,PR=Go.create,XK=da.create,e9=fu.create,t9=Go.createWithPreprocess,n9=Dm.create,r9=()=>BD().optional(),i9=()=>zD().optional(),s9=()=>WD().optional(),o9={string:t=>Bo.create({...t,coerce:!0}),number:t=>uu.create({...t,coerce:!0}),boolean:t=>zh.create({...t,coerce:!0}),bigint:t=>cu.create({...t,coerce:!0}),date:t=>vc.create({...t,coerce:!0})},a9=mn;var M=Object.freeze({__proto__:null,defaultErrorMap:lf,setErrorMap:tK,getErrorMap:tv,makeIssue:nv,EMPTY_PATH:nK,addIssueToContext:Rt,ParseStatus:Li,INVALID:mn,DIRTY:Od,OK:rs,isAborted:aI,isDirty:lI,isValid:bc,isAsync:Bh,get util(){return Pn},get objectUtil(){return oI},ZodParsedType:Lt,getParsedType:Ga,ZodType:jn,datetimeRegex:LD,ZodString:Bo,ZodNumber:uu,ZodBigInt:cu,ZodBoolean:zh,ZodDate:vc,ZodSymbol:iv,ZodUndefined:Wh,ZodNull:Uh,ZodAny:uf,ZodUnknown:cc,ZodNever:il,ZodVoid:sv,ZodArray:Wo,ZodObject:Ar,ZodUnion:Vh,ZodDiscriminatedUnion:dx,ZodIntersection:Hh,ZodTuple:va,ZodRecord:Gh,ZodMap:ov,ZodSet:xc,ZodFunction:Zd,ZodLazy:Kh,ZodLiteral:Qh,ZodEnum:du,ZodNativeEnum:Jh,ZodPromise:cf,ZodEffects:Go,ZodTransformer:Go,ZodOptional:da,ZodNullable:fu,ZodDefault:Zh,ZodCatch:Yh,ZodNaN:av,BRAND:EK,ZodBranded:A1,ZodPipeline:Dm,ZodReadonly:Xh,custom:$D,Schema:jn,ZodSchema:jn,late:IK,get ZodFirstPartyTypeKind(){return pn},coerce:o9,any:AK,array:DK,bigint:CK,boolean:WD,date:TK,discriminatedUnion:BK,effect:PR,enum:JK,function:GK,instanceof:NK,intersection:zK,lazy:KK,literal:QK,map:VK,nan:kK,nativeEnum:ZK,never:PK,null:OK,nullable:e9,number:zD,object:LK,oboolean:s9,onumber:i9,optional:XK,ostring:r9,pipeline:n9,preprocess:t9,promise:YK,record:UK,set:HK,strictObject:MK,string:BD,symbol:jK,transformer:PR,tuple:WK,undefined:RK,union:$K,unknown:qK,void:FK,NEVER:a9,ZodIssueCode:yt,quotelessJson:eK,ZodError:Ws});const l9=M.object({page:M.number().gte(0,"Page must be greater than zero"),size:M.number().gte(1,"Page size must be greater than one to get any data")}),Bi=M.object({id:M.string().min(1)}),q1=M.object({message:M.string()}),zi=M.object({id:M.string().optional(),idIn:M.array(M.string()).optional(),fulltext:M.string().optional()}),u9=M.enum(["asc","desc"]),ns=()=>M.union([M.boolean(),M.number().int().refine(t=>t===0||t===1).transform(t=>typeof t=="boolean"?t:t===1)]),xo=()=>M.union([M.number(),M.string().transform(t=>parseFloat(t)).refine(t=>!isNaN(t))]),Fo=()=>M.union([M.number().int(),M.string().transform(t=>parseInt(t,10)).refine(t=>!isNaN(t))]),ci=t=>M.string().transform(e=>JSON.parse(e)).refine(e=>Array.isArray(e)).transform(e=>M.array(t).parse(e)),UD=t=>M.string().transform(e=>JSON.parse(e)).transform(e=>t.parse(e)),cI=new Proxy(()=>cI,{get:()=>cI}),Wi=({entity:t,shape:e,filter:n,sort:r})=>{const i=cI();return{entity:t,"~entity":i,"~entity-array":[],"~entity-partial-exclude-id":i,shape:e,"~shape":i,"~shape-partial":i,filter:n,"~filter":i,sort:M.array(M.object({name:M.enum(r),sort:u9})),"~sort":i,"~sort-keyof":i}},ql=(t,e)=>Array.from({length:e-t+1},(n,r)=>r+t),c9=({page:t,total:e,siblings:n=1,boundaries:r=1})=>{const i=Math.max(Math.trunc(e),0);if(n*2+3+r*2>=i)return{type:"simple",page:t,total:e,pages:ql(1,i),start:[],end:[]};const o=Math.max(t-n,r),a=Math.min(t+n,i-r),u=o>r+2,d=a<i-(r+1);return!u&&d?{type:"end",page:t,total:e,start:[],pages:ql(1,n*2+r+2),end:ql(e-(r-1),i)}:u&&!d?{type:"start",page:t,total:e,start:ql(1,r),pages:ql(e-(r+1+2*n),i),end:[]}:{type:"both",page:t,total:e,start:ql(1,r),pages:ql(o,a),end:ql(i-r+1,i)}};var hd={},$a={},or={},Pl={},FR;function VD(){if(FR)return Pl;FR=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.anumber=t,Pl.abytes=n,Pl.ahash=r,Pl.aexists=i,Pl.aoutput=s;function t(o){if(!Number.isSafeInteger(o)||o<0)throw new Error("positive integer expected, got "+o)}function e(o){return o instanceof Uint8Array||ArrayBuffer.isView(o)&&o.constructor.name==="Uint8Array"}function n(o,...a){if(!e(o))throw new Error("Uint8Array expected");if(a.length>0&&!a.includes(o.length))throw new Error("Uint8Array expected of length "+a+", got length="+o.length)}function r(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(o.outputLen),t(o.blockLen)}function i(o,a=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(a&&o.finished)throw new Error("Hash#digest() has already been called")}function s(o,a){n(o);const u=a.outputLen;if(o.length<u)throw new Error("digestInto() expects output buffer of length at least "+u)}return Pl}var xn={},DR;function d9(){if(DR)return xn;DR=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.add5L=xn.add5H=xn.add4H=xn.add4L=xn.add3H=xn.add3L=xn.rotlBL=xn.rotlBH=xn.rotlSL=xn.rotlSH=xn.rotr32L=xn.rotr32H=xn.rotrBL=xn.rotrBH=xn.rotrSL=xn.rotrSH=xn.shrSL=xn.shrSH=xn.toBig=void 0,xn.fromBig=n,xn.split=r,xn.add=I;const t=BigInt(2**32-1),e=BigInt(32);function n(O,B=!1){return B?{h:Number(O&t),l:Number(O>>e&t)}:{h:Number(O>>e&t)|0,l:Number(O&t)|0}}function r(O,B=!1){let D=new Uint32Array(O.length),W=new Uint32Array(O.length);for(let V=0;V<O.length;V++){const{h:z,l:X}=n(O[V],B);[D[V],W[V]]=[z,X]}return[D,W]}const i=(O,B)=>BigInt(O>>>0)<<e|BigInt(B>>>0);xn.toBig=i;const s=(O,B,D)=>O>>>D;xn.shrSH=s;const o=(O,B,D)=>O<<32-D|B>>>D;xn.shrSL=o;const a=(O,B,D)=>O>>>D|B<<32-D;xn.rotrSH=a;const u=(O,B,D)=>O<<32-D|B>>>D;xn.rotrSL=u;const d=(O,B,D)=>O<<64-D|B>>>D-32;xn.rotrBH=d;const p=(O,B,D)=>O>>>D-32|B<<64-D;xn.rotrBL=p;const h=(O,B)=>B;xn.rotr32H=h;const g=(O,B)=>O;xn.rotr32L=g;const x=(O,B,D)=>O<<D|B>>>32-D;xn.rotlSH=x;const _=(O,B,D)=>B<<D|O>>>32-D;xn.rotlSL=_;const S=(O,B,D)=>B<<D-32|O>>>64-D;xn.rotlBH=S;const k=(O,B,D)=>O<<D-32|B>>>64-D;xn.rotlBL=k;function I(O,B,D,W){const V=(B>>>0)+(W>>>0);return{h:O+D+(V/2**32|0)|0,l:V|0}}const E=(O,B,D)=>(O>>>0)+(B>>>0)+(D>>>0);xn.add3L=E;const C=(O,B,D,W)=>B+D+W+(O/2**32|0)|0;xn.add3H=C;const j=(O,B,D,W)=>(O>>>0)+(B>>>0)+(D>>>0)+(W>>>0);xn.add4L=j;const q=(O,B,D,W,V)=>B+D+W+V+(O/2**32|0)|0;xn.add4H=q;const F=(O,B,D,W,V)=>(O>>>0)+(B>>>0)+(D>>>0)+(W>>>0)+(V>>>0);xn.add5L=F;const $=(O,B,D,W,V,z)=>B+D+W+V+z+(O/2**32|0)|0;xn.add5H=$;const P={fromBig:n,split:r,toBig:i,shrSH:s,shrSL:o,rotrSH:a,rotrSL:u,rotrBH:d,rotrBL:p,rotr32H:h,rotr32L:g,rotlSH:x,rotlSL:_,rotlBH:S,rotlBL:k,add:I,add3L:E,add3H:C,add4L:j,add4H:q,add5H:$,add5L:F};return xn.default=P,xn}var L0={},Dp={},LR;function f9(){return LR||(LR=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.crypto=void 0,Dp.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),Dp}var MR;function p9(){return MR||(MR=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=r,t.u8=i,t.u32=s,t.createView=o,t.rotr=a,t.rotl=u,t.byteSwap=d,t.byteSwap32=p,t.bytesToHex=g,t.hexToBytes=S,t.asyncLoop=I,t.utf8ToBytes=E,t.toBytes=C,t.concatBytes=j,t.checkOpts=F,t.wrapConstructor=$,t.wrapConstructorWithOpts=P,t.wrapXOFConstructorWithOpts=O,t.randomBytes=B;const e=f9(),n=VD();function r(D){return D instanceof Uint8Array||ArrayBuffer.isView(D)&&D.constructor.name==="Uint8Array"}function i(D){return new Uint8Array(D.buffer,D.byteOffset,D.byteLength)}function s(D){return new Uint32Array(D.buffer,D.byteOffset,Math.floor(D.byteLength/4))}function o(D){return new DataView(D.buffer,D.byteOffset,D.byteLength)}function a(D,W){return D<<32-W|D>>>W}function u(D,W){return D<<W|D>>>32-W>>>0}t.isLE=new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]===68;function d(D){return D<<24&0xff000000|D<<8&0xff0000|D>>>8&65280|D>>>24&255}t.byteSwapIfBE=t.isLE?D=>D:D=>d(D);function p(D){for(let W=0;W<D.length;W++)D[W]=d(D[W])}const h=Array.from({length:256},(D,W)=>W.toString(16).padStart(2,"0"));function g(D){(0,n.abytes)(D);let W="";for(let V=0;V<D.length;V++)W+=h[D[V]];return W}const x={_0:48,_9:57,A:65,F:70,a:97,f:102};function _(D){if(D>=x._0&&D<=x._9)return D-x._0;if(D>=x.A&&D<=x.F)return D-(x.A-10);if(D>=x.a&&D<=x.f)return D-(x.a-10)}function S(D){if(typeof D!="string")throw new Error("hex string expected, got "+typeof D);const W=D.length,V=W/2;if(W%2)throw new Error("hex string expected, got unpadded hex of length "+W);const z=new Uint8Array(V);for(let X=0,Z=0;X<V;X++,Z+=2){const le=_(D.charCodeAt(Z)),ie=_(D.charCodeAt(Z+1));if(le===void 0||ie===void 0){const ne=D[Z]+D[Z+1];throw new Error('hex string expected, got non-hex character "'+ne+'" at index '+Z)}z[X]=le*16+ie}return z}const k=async()=>{};t.nextTick=k;async function I(D,W,V){let z=Date.now();for(let X=0;X<D;X++){V(X);const Z=Date.now()-z;Z>=0&&Z<W||(await (0,t.nextTick)(),z+=Z)}}function E(D){if(typeof D!="string")throw new Error("utf8ToBytes expected string, got "+typeof D);return new Uint8Array(new TextEncoder().encode(D))}function C(D){return typeof D=="string"&&(D=E(D)),(0,n.abytes)(D),D}function j(...D){let W=0;for(let z=0;z<D.length;z++){const X=D[z];(0,n.abytes)(X),W+=X.length}const V=new Uint8Array(W);for(let z=0,X=0;z<D.length;z++){const Z=D[z];V.set(Z,X),X+=Z.length}return V}class q{clone(){return this._cloneInto()}}t.Hash=q;function F(D,W){if(W!==void 0&&{}.toString.call(W)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(D,W)}function $(D){const W=z=>D().update(C(z)).digest(),V=D();return W.outputLen=V.outputLen,W.blockLen=V.blockLen,W.create=()=>D(),W}function P(D){const W=(z,X)=>D(X).update(C(z)).digest(),V=D({});return W.outputLen=V.outputLen,W.blockLen=V.blockLen,W.create=z=>D(z),W}function O(D){const W=(z,X)=>D(X).update(C(z)).digest(),V=D({});return W.outputLen=V.outputLen,W.blockLen=V.blockLen,W.create=z=>D(z),W}function B(D=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(D));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(D);throw new Error("crypto.getRandomValues must be defined")}}(L0)),L0}var $R;function h9(){if($R)return or;$R=1,Object.defineProperty(or,"__esModule",{value:!0}),or.shake256=or.shake128=or.keccak_512=or.keccak_384=or.keccak_256=or.keccak_224=or.sha3_512=or.sha3_384=or.sha3_256=or.sha3_224=or.Keccak=void 0,or.keccakP=k;const t=VD(),e=d9(),n=p9(),r=[],i=[],s=[],o=BigInt(0),a=BigInt(1),u=BigInt(2),d=BigInt(7),p=BigInt(256),h=BigInt(113);for(let j=0,q=a,F=1,$=0;j<24;j++){[F,$]=[$,(2*F+3*$)%5],r.push(2*(5*$+F)),i.push((j+1)*(j+2)/2%64);let P=o;for(let O=0;O<7;O++)q=(q<<a^(q>>d)*h)%p,q&u&&(P^=a<<(a<<BigInt(O))-a);s.push(P)}const[g,x]=(0,e.split)(s,!0),_=(j,q,F)=>F>32?(0,e.rotlBH)(j,q,F):(0,e.rotlSH)(j,q,F),S=(j,q,F)=>F>32?(0,e.rotlBL)(j,q,F):(0,e.rotlSL)(j,q,F);function k(j,q=24){const F=new Uint32Array(10);for(let $=24-q;$<24;$++){for(let B=0;B<10;B++)F[B]=j[B]^j[B+10]^j[B+20]^j[B+30]^j[B+40];for(let B=0;B<10;B+=2){const D=(B+8)%10,W=(B+2)%10,V=F[W],z=F[W+1],X=_(V,z,1)^F[D],Z=S(V,z,1)^F[D+1];for(let le=0;le<50;le+=10)j[B+le]^=X,j[B+le+1]^=Z}let P=j[2],O=j[3];for(let B=0;B<24;B++){const D=i[B],W=_(P,O,D),V=S(P,O,D),z=r[B];P=j[z],O=j[z+1],j[z]=W,j[z+1]=V}for(let B=0;B<50;B+=10){for(let D=0;D<10;D++)F[D]=j[B+D];for(let D=0;D<10;D++)j[B+D]^=~F[(D+2)%10]&F[(D+4)%10]}j[0]^=g[$],j[1]^=x[$]}F.fill(0)}class I extends n.Hash{constructor(q,F,$,P=!1,O=24){if(super(),this.blockLen=q,this.suffix=F,this.outputLen=$,this.enableXOF=P,this.rounds=O,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,t.anumber)($),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,n.u32)(this.state)}keccak(){n.isLE||(0,n.byteSwap32)(this.state32),k(this.state32,this.rounds),n.isLE||(0,n.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(q){(0,t.aexists)(this);const{blockLen:F,state:$}=this;q=(0,n.toBytes)(q);const P=q.length;for(let O=0;O<P;){const B=Math.min(F-this.pos,P-O);for(let D=0;D<B;D++)$[this.pos++]^=q[O++];this.pos===F&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:q,suffix:F,pos:$,blockLen:P}=this;q[$]^=F,F&128&&$===P-1&&this.keccak(),q[P-1]^=128,this.keccak()}writeInto(q){(0,t.aexists)(this,!1),(0,t.abytes)(q),this.finish();const F=this.state,{blockLen:$}=this;for(let P=0,O=q.length;P<O;){this.posOut>=$&&this.keccak();const B=Math.min($-this.posOut,O-P);q.set(F.subarray(this.posOut,this.posOut+B),P),this.posOut+=B,P+=B}return q}xofInto(q){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(q)}xof(q){return(0,t.anumber)(q),this.xofInto(new Uint8Array(q))}digestInto(q){if((0,t.aoutput)(q,this),this.finished)throw new Error("digest() was already called");return this.writeInto(q),this.destroy(),q}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(q){const{blockLen:F,suffix:$,outputLen:P,rounds:O,enableXOF:B}=this;return q||(q=new I(F,$,P,B,O)),q.state32.set(this.state32),q.pos=this.pos,q.posOut=this.posOut,q.finished=this.finished,q.rounds=O,q.suffix=$,q.outputLen=P,q.enableXOF=B,q.destroyed=this.destroyed,q}}or.Keccak=I;const E=(j,q,F)=>(0,n.wrapConstructor)(()=>new I(q,j,F));or.sha3_224=E(6,144,224/8),or.sha3_256=E(6,136,256/8),or.sha3_384=E(6,104,384/8),or.sha3_512=E(6,72,512/8),or.keccak_224=E(1,144,224/8),or.keccak_256=E(1,136,256/8),or.keccak_384=E(1,104,384/8),or.keccak_512=E(1,72,512/8);const C=(j,q,F)=>(0,n.wrapXOFConstructorWithOpts)(($={})=>new I(q,j,$.dkLen===void 0?F:$.dkLen,!0));return or.shake128=C(31,168,128/8),or.shake256=C(31,136,256/8),or}var BR;function m9(){if(BR)return $a;BR=1;const{sha3_512:t}=h9(),e=24,n=32,r=(_=4,S=Math.random)=>{let k="";for(;k.length<_;)k=k+Math.floor(S()*36).toString(36);return k};function i(_){let S=8n,k=0n;for(const I of _.values()){const E=BigInt(I);k=(k<<S)+E}return k}const s=(_="")=>i(t(_)).toString(36).slice(1),o=Array.from({length:26},(_,S)=>String.fromCharCode(S+97)),a=_=>o[Math.floor(_()*o.length)],u=({globalObj:_=typeof ec<"u"?ec:typeof window<"u"?window:{},random:S=Math.random}={})=>{const k=Object.keys(_).toString(),I=k.length?k+r(n,S):r(n,S);return s(I).substring(0,n)},d=_=>()=>_++,p=0x1c6b1f1f,h=({random:_=Math.random,counter:S=d(Math.floor(_()*p)),length:k=e,fingerprint:I=u({random:_})}={})=>function(){const C=a(_),j=Date.now().toString(36),q=S().toString(36),F=r(k,_),$=`${j+F+q+I}`;return`${C+s($).substring(1,k)}`},g=h(),x=(_,{minLength:S=2,maxLength:k=n}={})=>{const I=_.length,E=/^[0-9a-z]+$/;try{if(typeof _=="string"&&I>=S&&I<=k&&E.test(_))return!0}finally{}return!1};return $a.getConstants=()=>({defaultLength:e,bigLength:n}),$a.init=h,$a.createId=g,$a.bufToBigInt=i,$a.createCounter=d,$a.createFingerprint=u,$a.isCuid=x,$a}var zR;function g9(){if(zR)return hd;zR=1;const{createId:t,init:e,getConstants:n,isCuid:r}=m9();return hd.createId=t,hd.init=e,hd.getConstants=n,hd.isCuid=r,hd}var y9=g9();const wn=y9.createId;var M0,WR;function b9(){if(WR)return M0;WR=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(E){E!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(C){try{var j=t.call(C);return i.test(j)}catch{return!1}},o=function(C){try{return s(C)?!1:(t.call(C),!0)}catch{return!1}},a=Object.prototype.toString,u="[object Object]",d="[object Function]",p="[object GeneratorFunction]",h="[object HTMLAllCollection]",g="[object HTML document.all class]",x="[object HTMLCollection]",_=typeof Symbol=="function"&&!!Symbol.toStringTag,S=!(0 in[,]),k=function(){return!1};if(typeof document=="object"){var I=document.all;a.call(I)===a.call(document.all)&&(k=function(C){if((S||!C)&&(typeof C>"u"||typeof C=="object"))try{var j=a.call(C);return(j===h||j===g||j===x||j===u)&&C("")==null}catch{}return!1})}return M0=e?function(C){if(k(C))return!0;if(!C||typeof C!="function"&&typeof C!="object")return!1;try{e(C,null,n)}catch(j){if(j!==r)return!1}return!s(C)&&o(C)}:function(C){if(k(C))return!0;if(!C||typeof C!="function"&&typeof C!="object")return!1;if(_)return o(C);if(s(C))return!1;var j=a.call(C);return j!==d&&j!==p&&!/^\[object HTML/.test(j)?!1:o(C)},M0}var v9=b9();const x9=Gs(v9),w9=t=>x9(t);var ob={exports:{}},_9=ob.exports,UR;function S9(){return UR||(UR=1,function(t){(function(e,n){t.exports=n()})(_9,function(){var e=Object.prototype.toString;function n(h,g){return h==null?!1:Object.prototype.hasOwnProperty.call(h,g)}function r(h){if(!h||o(h)&&h.length===0)return!0;if(typeof h!="string"){for(var g in h)if(n(h,g))return!1;return!0}return!1}function i(h){return e.call(h)}function s(h){return typeof h=="object"&&i(h)==="[object Object]"}var o=Array.isArray||function(h){return e.call(h)==="[object Array]"};function a(h){return typeof h=="boolean"||i(h)==="[object Boolean]"}function u(h){var g=parseInt(h);return g.toString()===h?g:h}function d(h){h=h||{};var g=function(I){return Object.keys(g).reduce(function(E,C){return C==="create"||typeof g[C]=="function"&&(E[C]=g[C].bind(g,I)),E},{})},x;h.includeInheritedProps?x=function(){return!0}:x=function(I,E){return typeof E=="number"&&Array.isArray(I)||n(I,E)};function _(I,E){if(x(I,E))return I[E]}var S;h.includeInheritedProps?S=function(I,E){typeof E!="string"&&typeof E!="number"&&(E=String(E));var C=_(I,E);if(E==="__proto__"||E==="prototype"||E==="constructor"&&typeof C=="function")throw new Error("For security reasons, object's magic properties cannot be set");return C}:S=function(I,E){return _(I,E)};function k(I,E,C,j){if(typeof E=="number"&&(E=[E]),!E||E.length===0)return I;if(typeof E=="string")return k(I,E.split(".").map(u),C,j);var q=E[0],F=S(I,q);return E.length===1?((F===void 0||!j)&&(I[q]=C),F):(F===void 0&&(typeof E[1]=="number"?I[q]=[]:I[q]={}),k(I[q],E.slice(1),C,j))}return g.has=function(I,E){if(typeof E=="number"?E=[E]:typeof E=="string"&&(E=E.split(".")),!E||E.length===0)return!!I;for(var C=0;C<E.length;C++){var j=u(E[C]);if(typeof j=="number"&&o(I)&&j<I.length||(h.includeInheritedProps?j in Object(I):n(I,j)))I=I[j];else return!1}return!0},g.ensureExists=function(I,E,C){return k(I,E,C,!0)},g.set=function(I,E,C,j){return k(I,E,C,j)},g.insert=function(I,E,C,j){var q=g.get(I,E);j=~~j,o(q)||(q=[],g.set(I,E,q)),q.splice(j,0,C)},g.empty=function(I,E){if(!r(E)&&I!=null){var C,j;if(C=g.get(I,E)){if(typeof C=="string")return g.set(I,E,"");if(a(C))return g.set(I,E,!1);if(typeof C=="number")return g.set(I,E,0);if(o(C))C.length=0;else if(s(C))for(j in C)x(C,j)&&delete C[j];else return g.set(I,E,null)}}},g.push=function(I,E){var C=g.get(I,E);o(C)||(C=[],g.set(I,E,C)),C.push.apply(C,Array.prototype.slice.call(arguments,2))},g.coalesce=function(I,E,C){for(var j,q=0,F=E.length;q<F;q++)if((j=g.get(I,E[q]))!==void 0)return j;return C},g.get=function(I,E,C){if(typeof E=="number"&&(E=[E]),!E||E.length===0)return I;if(I==null)return C;if(typeof E=="string")return g.get(I,E.split("."),C);var j=u(E[0]),q=S(I,j);return q===void 0?C:E.length===1?q:g.get(I[j],E.slice(1),C)},g.del=function(E,C){if(typeof C=="number"&&(C=[C]),E==null||r(C))return E;if(typeof C=="string")return g.del(E,C.split("."));var j=u(C[0]);if(S(E,j),!x(E,j))return E;if(C.length===1)o(E)?E.splice(j,1):delete E[j];else return g.del(E[j],C.slice(1));return E},g}var p=d();return p.create=d,p.withInheritedProps=d({includeInheritedProps:!0}),p})}(ob)),ob.exports}var E9=S9();const VR=Gs(E9);function fn({number:t,empty:e="-",fraction:n=2}){if(t==null)return e;try{return t.toLocaleString(void 0,{maximumFractionDigits:n})}catch(r){return console.error("toHumanNumber",t,r),t.toFixed(2)}}const P1=({error:t,errors:e,onError:n})=>{const r=e.some(s=>s),i=t instanceof Error;return!r&&i&&n(t),r||i},HD=En({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-0.5","hover:bg-slate-100","text-slate-500","hover:text-blue-500","cursor-pointer"]},variant:{variant:{common:[],warning:["text-amber-500","hover:text-amber-600","hover:bg-amber-100"],danger:["text-red-500","hover:text-red-600","hover:bg-red-100"]},disabled:{true:["cursor-not-allowed","text-slate-300","bg-slate-100","hover:bg-slate-100"]}},defaults:{variant:"common",disabled:!1}}),I9=En({use:HD,slot:{},variant:{},defaults:{}}),F1=({icon:t,iconProps:e,variant:n,tva:r=I9,css:i,children:s,...o})=>{const a=r({...n,css:i}).slots;return f.jsxs("div",{className:a.base(),...o,children:[rx(t)?f.jsx(tn,{icon:t,...e}):t,s]})};function fx(){return typeof window<"u"}function bu(t){return GD(t)?(t.nodeName||"").toLowerCase():"#document"}function Es(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function xa(t){var e;return(e=(GD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function GD(t){return fx()?t instanceof Node||t instanceof Es(t).Node:!1}function lr(t){return fx()?t instanceof Element||t instanceof Es(t).Element:!1}function ri(t){return fx()?t instanceof HTMLElement||t instanceof Es(t).HTMLElement:!1}function dI(t){return!fx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Es(t).ShadowRoot}function Lm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=wo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function N9(t){return["table","td","th"].includes(bu(t))}function px(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function D1(t){const e=hx(),n=lr(t)?wo(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function k9(t){let e=sl(t);for(;ri(e)&&!Ja(e);){if(D1(e))return e;if(px(e))return null;e=sl(e)}return null}function hx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ja(t){return["html","body","#document"].includes(bu(t))}function wo(t){return Es(t).getComputedStyle(t)}function mx(t){return lr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function sl(t){if(bu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||dI(t)&&t.host||xa(t);return dI(e)?e.host:e}function KD(t){const e=sl(t);return Ja(e)?t.ownerDocument?t.ownerDocument.body:t.body:ri(e)&&Lm(e)?e:KD(e)}function tu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=KD(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Es(i);if(s){const a=fI(o);return e.concat(o,o.visualViewport||[],Lm(i)?i:[],a&&n?tu(a):[])}return e.concat(i,tu(i,[],n))}function fI(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Do(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function Si(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&dI(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function L1(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function QD(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function JD(t){return t.mozInputSource===0&&t.isTrusted?!0:pI()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function M1(t){return T9()?!1:!pI()&&t.width===0&&t.height===0||pI()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function ZD(){return/apple/i.test(navigator.vendor)}function pI(){const t=/android/i;return t.test(L1())||t.test(QD())}function C9(){return L1().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function T9(){return QD().includes("jsdom/")}function em(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function j9(t){return"nativeEvent"in t}function R9(t){return t.matches("html,body")}function Ei(t){return t?.ownerDocument||document}function $0(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Hl(t){return"composedPath"in t?t.composedPath()[0]:t.target}const O9="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function $1(t){return ri(t)&&t.matches(O9)}function Qi(t){t.preventDefault(),t.stopPropagation()}function YD(t){return t?t.getAttribute("role")==="combobox"&&$1(t):!1}const df=Math.min,Ds=Math.max,lv=Math.round,Ad=Math.floor,fa=t=>({x:t,y:t}),A9={left:"right",right:"left",bottom:"top",top:"bottom"},q9={start:"end",end:"start"};function HR(t,e,n){return Ds(t,df(e,n))}function Mm(t,e){return typeof t=="function"?t(e):t}function pu(t){return t.split("-")[0]}function $m(t){return t.split("-")[1]}function XD(t){return t==="x"?"y":"x"}function e2(t){return t==="y"?"height":"width"}function wc(t){return["top","bottom"].includes(pu(t))?"y":"x"}function t2(t){return XD(wc(t))}function P9(t,e,n){n===void 0&&(n=!1);const r=$m(t),i=t2(t),s=e2(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=uv(o)),[o,uv(o)]}function F9(t){const e=uv(t);return[hI(t),e,hI(e)]}function hI(t){return t.replace(/start|end/g,e=>q9[e])}function D9(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function L9(t,e,n,r){const i=$m(t);let s=D9(pu(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(hI)))),s}function uv(t){return t.replace(/left|right|bottom|top/g,e=>A9[e])}function M9(t){return{top:0,right:0,bottom:0,left:0,...t}}function $9(t){return typeof t!="number"?M9(t):{top:t,right:t,bottom:t,left:t}}function cv(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}var B9=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],dv=B9.join(","),n2=typeof Element>"u",ff=n2?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,fv=!n2&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},pv=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},z9=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},W9=function(e,n,r){if(pv(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(dv));return n&&ff.call(e,dv)&&i.unshift(e),i=i.filter(r),i},U9=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!pv(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),u=a.length?a:o.children,d=t(u,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:o,candidates:d})}else{var p=ff.call(o,dv);p&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),g=!pv(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&g){var x=t(h===!0?o.children:h.children,!0,r);r.flatten?i.push.apply(i,x):i.push({scopeParent:o,candidates:x})}else s.unshift.apply(s,o.children)}}return i},r2=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},i2=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||z9(e))&&!r2(e)?0:e.tabIndex},V9=function(e,n){var r=i2(e);return r<0&&n&&!r2(e)?0:r},H9=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},s2=function(e){return e.tagName==="INPUT"},G9=function(e){return s2(e)&&e.type==="hidden"},K9=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Q9=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},J9=function(e){if(!e.name)return!0;var n=e.form||fv(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=Q9(i,e.form);return!s||s===e},Z9=function(e){return s2(e)&&e.type==="radio"},Y9=function(e){return Z9(e)&&!J9(e)},X9=function(e){var n,r=e&&fv(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,u;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!s&&i;){var d,p,h;r=fv(i),i=(d=r)===null||d===void 0?void 0:d.host,s=!!((p=i)!==null&&p!==void 0&&(h=p.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return s},GR=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},e7=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=ff.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(ff.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var u=e.parentElement,d=fv(e);if(u&&!u.shadowRoot&&i(u)===!0)return GR(e);e.assignedSlot?e=e.assignedSlot:!u&&d!==e.ownerDocument?e=d.host:e=u}e=a}if(X9(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return GR(e);return!1},t7=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ff.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},n7=function(e,n){return!(n.disabled||pv(n)||G9(n)||e7(n,e)||K9(n)||t7(n))},mI=function(e,n){return!(Y9(n)||i2(n)<0||!n7(e,n))},r7=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},i7=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,u=V9(a,o),d=o?t(i.candidates):a;u===0?o?n.push.apply(n,d):n.push(a):r.push({documentOrder:s,tabIndex:u,item:i,isScope:o,content:d})}),r.sort(H9).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},gx=function(e,n){n=n||{};var r;return n.getShadowRoot?r=U9([e],n.includeContainer,{filter:mI.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:r7}):r=W9(e,n.includeContainer,mI.bind(null,n)),i7(r)},s7=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ff.call(e,dv)===!1?!1:mI(n,e)};function KR(t,e,n){let{reference:r,floating:i}=t;const s=wc(e),o=t2(e),a=e2(o),u=pu(e),d=s==="y",p=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,g=r[a]/2-i[a]/2;let x;switch(u){case"top":x={x:p,y:r.y-i.height};break;case"bottom":x={x:p,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:h};break;case"left":x={x:r.x-i.width,y:h};break;default:x={x:r.x,y:r.y}}switch($m(e)){case"start":x[o]-=g*(n&&d?-1:1);break;case"end":x[o]+=g*(n&&d?-1:1);break}return x}const o7=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await (o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:h}=KR(d,r,u),g=r,x={},_=0;for(let S=0;S<a.length;S++){const{name:k,fn:I}=a[S],{x:E,y:C,data:j,reset:q}=await I({x:p,y:h,initialPlacement:r,placement:g,strategy:i,middlewareData:x,rects:d,platform:o,elements:{reference:t,floating:e}});p=E??p,h=C??h,x={...x,[k]:{...x[k],...j}},q&&_<=50&&(_++,typeof q=="object"&&(q.placement&&(g=q.placement),q.rects&&(d=q.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):q.rects),{x:p,y:h}=KR(d,g,u)),S=-1)}return{x:p,y:h,placement:g,strategy:i,middlewareData:x}};async function B1(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:g=!1,padding:x=0}=Mm(e,t),_=$9(x),k=a[g?h==="floating"?"reference":"floating":h],I=cv(await s.getClippingRect({element:(n=await (s.isElement==null?void 0:s.isElement(k)))==null||n?k:k.contextElement||await (s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:d,rootBoundary:p,strategy:u})),E=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,C=await (s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),j=await (s.isElement==null?void 0:s.isElement(C))?await (s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},q=cv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:C,strategy:u}):E);return{top:(I.top-q.top+_.top)/j.y,bottom:(q.bottom-I.bottom+_.bottom)/j.y,left:(I.left-q.left+_.left)/j.x,right:(q.right-I.right+_.right)/j.x}}const a7=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:d}=e,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:g,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:S=!0,...k}=Mm(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const I=pu(i),E=wc(a),C=pu(a)===a,j=await (u.isRTL==null?void 0:u.isRTL(d.floating)),q=g||(C||!S?[uv(a)]:F9(a)),F=_!=="none";!g&&F&&q.push(...L9(a,S,_,j));const $=[a,...q],P=await B1(e,k),O=[];let B=((r=s.flip)==null?void 0:r.overflows)||[];if(p&&O.push(P[I]),h){const z=P9(i,o,j);O.push(P[z[0]],P[z[1]])}if(B=[...B,{placement:i,overflows:O}],!O.every(z=>z<=0)){var D,W;const z=(((D=s.flip)==null?void 0:D.index)||0)+1,X=$[z];if(X)return{data:{index:z,overflows:B},reset:{placement:X}};let Z=(W=B.filter(le=>le.overflows[0]<=0).sort((le,ie)=>le.overflows[1]-ie.overflows[1])[0])==null?void 0:W.placement;if(!Z)switch(x){case"bestFit":{var V;const le=(V=B.filter(ie=>{if(F){const ne=wc(ie.placement);return ne===E||ne==="y"}return!0}).map(ie=>[ie.placement,ie.overflows.filter(ne=>ne>0).reduce((ne,oe)=>ne+oe,0)]).sort((ie,ne)=>ie[1]-ne[1])[0])==null?void 0:V[0];le&&(Z=le);break}case"initialPlacement":Z=a;break}if(i!==Z)return{reset:{placement:Z}}}return{}}}};async function l7(t,e){const{placement:n,platform:r,elements:i}=t,s=await (r.isRTL==null?void 0:r.isRTL(i.floating)),o=pu(n),a=$m(n),u=wc(n)==="y",d=["left","top"].includes(o)?-1:1,p=s&&u?-1:1,h=Mm(e,t);let{mainAxis:g,crossAxis:x,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof _=="number"&&(x=a==="end"?_*-1:_),u?{x:x*p,y:g*d}:{x:g*d,y:x*p}}const u7=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,u=await l7(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},c7=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:k=>{let{x:I,y:E}=k;return{x:I,y:E}}},...u}=Mm(t,e),d={x:n,y:r},p=await B1(e,u),h=wc(pu(i)),g=XD(h);let x=d[g],_=d[h];if(s){const k=g==="y"?"top":"left",I=g==="y"?"bottom":"right",E=x+p[k],C=x-p[I];x=HR(E,x,C)}if(o){const k=h==="y"?"top":"left",I=h==="y"?"bottom":"right",E=_+p[k],C=_-p[I];_=HR(E,_,C)}const S=a.fn({...e,[g]:x,[h]:_});return{...S,data:{x:S.x-n,y:S.y-r,enabled:{[g]:s,[h]:o}}}}}},d7=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:u=()=>{},...d}=Mm(t,e),p=await B1(e,d),h=pu(i),g=$m(i),x=wc(i)==="y",{width:_,height:S}=s.floating;let k,I;h==="top"||h==="bottom"?(k=h,I=g===(await (o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(I=h,k=g==="end"?"top":"bottom");const E=S-p.top-p.bottom,C=_-p.left-p.right,j=df(S-p[k],E),q=df(_-p[I],C),F=!e.middlewareData.shift;let $=j,P=q;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&($=E),F&&!g){const B=Ds(p.left,0),D=Ds(p.right,0),W=Ds(p.top,0),V=Ds(p.bottom,0);x?P=_-2*(B!==0||D!==0?B+D:Ds(p.left,p.right)):$=S-2*(W!==0||V!==0?W+V:Ds(p.top,p.bottom))}await u({...e,availableWidth:P,availableHeight:$});const O=await o.getDimensions(a.floating);return _!==O.width||S!==O.height?{reset:{rects:!0}}:{}}}};function o2(t){const e=wo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ri(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=lv(n)!==s||lv(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function z1(t){return lr(t)?t:t.contextElement}function Yd(t){const e=z1(t);if(!ri(e))return fa(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=o2(e);let o=(s?lv(n.width):n.width)/r,a=(s?lv(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const f7=fa(0);function a2(t){const e=Es(t);return!hx()||!e.visualViewport?f7:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function p7(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Es(t)?!1:e}function _c(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=z1(t);let o=fa(1);e&&(r?lr(r)&&(o=Yd(r)):o=Yd(t));const a=p7(s,n,r)?a2(s):fa(0);let u=(i.left+a.x)/o.x,d=(i.top+a.y)/o.y,p=i.width/o.x,h=i.height/o.y;if(s){const g=Es(s),x=r&&lr(r)?Es(r):r;let _=g,S=fI(_);for(;S&&r&&x!==_;){const k=Yd(S),I=S.getBoundingClientRect(),E=wo(S),C=I.left+(S.clientLeft+parseFloat(E.paddingLeft))*k.x,j=I.top+(S.clientTop+parseFloat(E.paddingTop))*k.y;u*=k.x,d*=k.y,p*=k.x,h*=k.y,u+=C,d+=j,_=Es(S),S=fI(_)}}return cv({width:p,height:h,x:u,y:d})}function W1(t,e){const n=mx(t).scrollLeft;return e?e.left+n:_c(xa(t)).left+n}function l2(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:W1(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function h7(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=xa(r),a=e?px(e.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},d=fa(1);const p=fa(0),h=ri(r);if((h||!h&&!s)&&((bu(r)!=="body"||Lm(o))&&(u=mx(r)),ri(r))){const x=_c(r);d=Yd(r),p.x=x.x+r.clientLeft,p.y=x.y+r.clientTop}const g=o&&!h&&!s?l2(o,u,!0):fa(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+p.x+g.x,y:n.y*d.y-u.scrollTop*d.y+p.y+g.y}}function m7(t){return Array.from(t.getClientRects())}function g7(t){const e=xa(t),n=mx(t),r=t.ownerDocument.body,i=Ds(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ds(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+W1(t);const a=-n.scrollTop;return wo(r).direction==="rtl"&&(o+=Ds(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function y7(t,e){const n=Es(t),r=xa(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const d=hx();(!d||d&&e==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function b7(t,e){const n=_c(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=ri(t)?Yd(t):fa(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,u=i*s.x,d=r*s.y;return{width:o,height:a,x:u,y:d}}function QR(t,e,n){let r;if(e==="viewport")r=y7(t,n);else if(e==="document")r=g7(xa(t));else if(lr(e))r=b7(e,n);else{const i=a2(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return cv(r)}function u2(t,e){const n=sl(t);return n===e||!lr(n)||Ja(n)?!1:wo(n).position==="fixed"||u2(n,e)}function v7(t,e){const n=e.get(t);if(n)return n;let r=tu(t,[],!1).filter(a=>lr(a)&&bu(a)!=="body"),i=null;const s=wo(t).position==="fixed";let o=s?sl(t):t;for(;lr(o)&&!Ja(o);){const a=wo(o),u=D1(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Lm(o)&&!u&&u2(t,o))?r=r.filter(p=>p!==o):i=a,o=sl(o)}return e.set(t,r),r}function x7(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?px(e)?[]:v7(e,this._c):[].concat(n),r],a=o[0],u=o.reduce((d,p)=>{const h=QR(e,p,i);return d.top=Ds(h.top,d.top),d.right=df(h.right,d.right),d.bottom=df(h.bottom,d.bottom),d.left=Ds(h.left,d.left),d},QR(e,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function w7(t){const{width:e,height:n}=o2(t);return{width:e,height:n}}function _7(t,e,n){const r=ri(e),i=xa(e),s=n==="fixed",o=_c(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const u=fa(0);if(r||!r&&!s)if((bu(e)!=="body"||Lm(i))&&(a=mx(e)),r){const g=_c(e,!0,s,e);u.x=g.x+e.clientLeft,u.y=g.y+e.clientTop}else i&&(u.x=W1(i));const d=i&&!r&&!s?l2(i,a):fa(0),p=o.left+a.scrollLeft-u.x-d.x,h=o.top+a.scrollTop-u.y-d.y;return{x:p,y:h,width:o.width,height:o.height}}function B0(t){return wo(t).position==="static"}function JR(t,e){if(!ri(t)||wo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return xa(t)===n&&(n=n.ownerDocument.body),n}function c2(t,e){const n=Es(t);if(px(t))return n;if(!ri(t)){let i=sl(t);for(;i&&!Ja(i);){if(lr(i)&&!B0(i))return i;i=sl(i)}return n}let r=JR(t,e);for(;r&&N9(r)&&B0(r);)r=JR(r,e);return r&&Ja(r)&&B0(r)&&!D1(r)?n:r||k9(t)||n}const S7=async function(t){const e=this.getOffsetParent||c2,n=this.getDimensions,r=await n(t.floating);return{reference:_7(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function E7(t){return wo(t).direction==="rtl"}const I7={convertOffsetParentRelativeRectToViewportRelativeRect:h7,getDocumentElement:xa,getClippingRect:x7,getOffsetParent:c2,getElementRects:S7,getClientRects:m7,getDimensions:w7,getScale:Yd,isElement:lr,isRTL:E7};function d2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function N7(t,e){let n=null,r;const i=xa(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const d=t.getBoundingClientRect(),{left:p,top:h,width:g,height:x}=d;if(a||e(),!g||!x)return;const _=Ad(h),S=Ad(i.clientWidth-(p+g)),k=Ad(i.clientHeight-(h+x)),I=Ad(p),C={rootMargin:-_+"px "+-S+"px "+-k+"px "+-I+"px",threshold:Ds(0,df(1,u))||1};let j=!0;function q(F){const $=F[0].intersectionRatio;if($!==u){if(!j)return o();$?o(!1,$):r=setTimeout(()=>{o(!1,1e-7)},1e3)}$===1&&!d2(d,t.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(q,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(q,C)}n.observe(t)}return o(!0),s}function f2(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=z1(t),p=i||s?[...d?tu(d):[],...tu(e)]:[];p.forEach(I=>{i&&I.addEventListener("scroll",n,{passive:!0}),s&&I.addEventListener("resize",n)});const h=d&&a?N7(d,n):null;let g=-1,x=null;o&&(x=new ResizeObserver(I=>{let[E]=I;E&&E.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(e)})),n()}),d&&!u&&x.observe(d),x.observe(e));let _,S=u?_c(t):null;u&&k();function k(){const I=_c(t);S&&!d2(S,I)&&n(),S=I,_=requestAnimationFrame(k)}return n(),()=>{var I;p.forEach(E=>{i&&E.removeEventListener("scroll",n),s&&E.removeEventListener("resize",n)}),h?.(),(I=x)==null||I.disconnect(),x=null,u&&cancelAnimationFrame(_)}}const k7=u7,C7=c7,T7=a7,j7=d7,R7=(t,e,n)=>{const r=new Map,i={platform:I7,...n},s={...i.platform,_c:r};return o7(t,e,{...i,platform:s})};var ab=typeof document<"u"?H.useLayoutEffect:H.useEffect;function hv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!hv(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!hv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function p2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ZR(t,e){const n=p2(t);return Math.round(e*n)/n}function z0(t){const e=H.useRef(t);return ab(()=>{e.current=t}),e}function O7(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:d}=t,[p,h]=H.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,x]=H.useState(r);hv(g,r)||x(r);const[_,S]=H.useState(null),[k,I]=H.useState(null),E=H.useCallback(ie=>{ie!==F.current&&(F.current=ie,S(ie))},[]),C=H.useCallback(ie=>{ie!==$.current&&($.current=ie,I(ie))},[]),j=s||_,q=o||k,F=H.useRef(null),$=H.useRef(null),P=H.useRef(p),O=u!=null,B=z0(u),D=z0(i),W=z0(d),V=H.useCallback(()=>{if(!F.current||!$.current)return;const ie={placement:e,strategy:n,middleware:g};D.current&&(ie.platform=D.current),R7(F.current,$.current,ie).then(ne=>{const oe={...ne,isPositioned:W.current!==!1};z.current&&!hv(P.current,oe)&&(P.current=oe,_m.flushSync(()=>{h(oe)}))})},[g,e,n,D,W]);ab(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(ie=>({...ie,isPositioned:!1})))},[d]);const z=H.useRef(!1);ab(()=>(z.current=!0,()=>{z.current=!1}),[]),ab(()=>{if(j&&(F.current=j),q&&($.current=q),j&&q){if(B.current)return B.current(j,q,V);V()}},[j,q,V,B,O]);const X=H.useMemo(()=>({reference:F,floating:$,setReference:E,setFloating:C}),[E,C]),Z=H.useMemo(()=>({reference:j,floating:q}),[j,q]),le=H.useMemo(()=>{const ie={position:n,left:0,top:0};if(!Z.floating)return ie;const ne=ZR(Z.floating,p.x),oe=ZR(Z.floating,p.y);return a?{...ie,transform:"translate("+ne+"px, "+oe+"px)",...p2(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:oe}},[n,a,Z.floating,p.x,p.y]);return H.useMemo(()=>({...p,update:V,refs:X,elements:Z,floatingStyles:le}),[p,V,X,Z,le])}const h2=(t,e)=>({...k7(t),options:[t,e]}),A7=(t,e)=>({...C7(t),options:[t,e]}),m2=(t,e)=>({...T7(t),options:[t,e]}),q7=(t,e)=>({...j7(t),options:[t,e]});function YR(t){return H.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const g2={...X4},P7=g2.useInsertionEffect,F7=P7||(t=>t());function Yi(t){const e=H.useRef(()=>{});return F7(()=>{e.current=t}),H.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const U1="ArrowUp",Bm="ArrowDown",nu="ArrowLeft",ru="ArrowRight";function yy(t,e,n){return Math.floor(t/e)!==n}function _h(t,e){return e<0||e>=t.current.length}function W0(t,e){return Oi(t,{disabledIndices:e})}function XR(t,e){return Oi(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function Oi(t,e){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=e===void 0?{}:e;const o=t.current;let a=n;do a+=r?-s:s;while(a>=0&&a<=o.length-1&&lb(o,a,i));return a}function D7(t,e){let{event:n,orientation:r,loop:i,rtl:s,cols:o,disabledIndices:a,minIndex:u,maxIndex:d,prevIndex:p,stopEvent:h=!1}=e,g=p;if(n.key===U1){if(h&&Qi(n),p===-1)g=d;else if(g=Oi(t,{startingIndex:g,amount:o,decrement:!0,disabledIndices:a}),i&&(p-o<u||g<0)){const x=p%o,_=d%o,S=d-(_-x);_===x?g=d:g=_>x?S:S-o}_h(t,g)&&(g=p)}if(n.key===Bm&&(h&&Qi(n),p===-1?g=u:(g=Oi(t,{startingIndex:p,amount:o,disabledIndices:a}),i&&p+o>d&&(g=Oi(t,{startingIndex:p%o-o,amount:o,disabledIndices:a}))),_h(t,g)&&(g=p)),r==="both"){const x=Ad(p/o);n.key===(s?nu:ru)&&(h&&Qi(n),p%o!==o-1?(g=Oi(t,{startingIndex:p,disabledIndices:a}),i&&yy(g,o,x)&&(g=Oi(t,{startingIndex:p-p%o-1,disabledIndices:a}))):i&&(g=Oi(t,{startingIndex:p-p%o-1,disabledIndices:a})),yy(g,o,x)&&(g=p)),n.key===(s?ru:nu)&&(h&&Qi(n),p%o!==0?(g=Oi(t,{startingIndex:p,decrement:!0,disabledIndices:a}),i&&yy(g,o,x)&&(g=Oi(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:a}))):i&&(g=Oi(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:a})),yy(g,o,x)&&(g=p));const _=Ad(d/o)===x;_h(t,g)&&(i&&_?g=n.key===(s?ru:nu)?d:Oi(t,{startingIndex:p-p%o-1,disabledIndices:a}):g=p)}return g}function L7(t,e,n){const r=[];let i=0;return t.forEach((s,o)=>{let{width:a,height:u}=s,d=!1;for(n&&(i=0);!d;){const p=[];for(let h=0;h<a;h++)for(let g=0;g<u;g++)p.push(i+h+g*e);i%e+a<=e&&p.every(h=>r[h]==null)?(p.forEach(h=>{r[h]=o}),d=!0):i++}}),[...r]}function M7(t,e,n,r,i){if(t===-1)return-1;const s=n.indexOf(t),o=e[t];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(t)}}function $7(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function lb(t,e,n){if(n)return n.includes(e);const r=t[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}var _r=typeof document<"u"?H.useLayoutEffect:H.useEffect;let eO=!1,B7=0;const tO=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+B7++;function z7(){const[t,e]=H.useState(()=>eO?tO():void 0);return _r(()=>{t==null&&e(tO())},[]),H.useEffect(()=>{eO=!0},[]),t}const W7=g2.useId,V1=W7||z7;function y2(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const b2=H.createContext(null),v2=H.createContext(null),zm=()=>{var t;return((t=H.useContext(b2))==null?void 0:t.id)||null},Rf=()=>H.useContext(v2);function U7(t){const e=V1(),n=Rf(),i=zm();return _r(()=>{if(!e)return;const s={id:e,parentId:i};return n?.addNode(s),()=>{n?.removeNode(s)}},[n,e,i]),e}function V7(t){const{children:e,id:n}=t,r=zm();return f.jsx(b2.Provider,{value:H.useMemo(()=>({id:n,parentId:r}),[n,r]),children:e})}function H7(t){const{children:e}=t,n=H.useRef([]),r=H.useCallback(o=>{n.current=[...n.current,o]},[]),i=H.useCallback(o=>{n.current=n.current.filter(a=>a!==o)},[]),s=H.useState(()=>y2())[0];return f.jsx(v2.Provider,{value:H.useMemo(()=>({nodesRef:n,addNode:r,removeNode:i,events:s}),[r,i,s]),children:e})}function Sc(t){return"data-floating-ui-"+t}function Xi(t){const e=H.useRef(t);return _r(()=>{e.current=t}),e}const nO=Sc("safe-polygon");function U0(t,e,n){return n&&!em(n)?0:typeof t=="number"?t:t?.[e]}function G7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=t,{enabled:a=!0,delay:u=0,handleClose:d=null,mouseOnly:p=!1,restMs:h=0,move:g=!0}=e,x=Rf(),_=zm(),S=Xi(d),k=Xi(u),I=Xi(n),E=H.useRef(),C=H.useRef(-1),j=H.useRef(),q=H.useRef(-1),F=H.useRef(!0),$=H.useRef(!1),P=H.useRef(()=>{}),O=H.useRef(!1),B=H.useCallback(()=>{var le;const ie=(le=i.current.openEvent)==null?void 0:le.type;return ie?.includes("mouse")&&ie!=="mousedown"},[i]);H.useEffect(()=>{if(!a)return;function le(ie){let{open:ne}=ie;ne||(clearTimeout(C.current),clearTimeout(q.current),F.current=!0,O.current=!1)}return s.on("openchange",le),()=>{s.off("openchange",le)}},[a,s]),H.useEffect(()=>{if(!a||!S.current||!n)return;function le(ne){B()&&r(!1,ne,"hover")}const ie=Ei(o.floating).documentElement;return ie.addEventListener("mouseleave",le),()=>{ie.removeEventListener("mouseleave",le)}},[o.floating,n,r,a,S,B]);const D=H.useCallback(function(le,ie,ne){ie===void 0&&(ie=!0),ne===void 0&&(ne="hover");const oe=U0(k.current,"close",E.current);oe&&!j.current?(clearTimeout(C.current),C.current=window.setTimeout(()=>r(!1,le,ne),oe)):ie&&(clearTimeout(C.current),r(!1,le,ne))},[k,r]),W=Yi(()=>{P.current(),j.current=void 0}),V=Yi(()=>{if($.current){const le=Ei(o.floating).body;le.style.pointerEvents="",le.removeAttribute(nO),$.current=!1}}),z=Yi(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);H.useEffect(()=>{if(!a)return;function le(te){if(clearTimeout(C.current),F.current=!1,p&&!em(E.current)||h>0&&!U0(k.current,"open"))return;const ce=U0(k.current,"open",E.current);ce?C.current=window.setTimeout(()=>{I.current||r(!0,te,"hover")},ce):n||r(!0,te,"hover")}function ie(te){if(z())return;P.current();const ce=Ei(o.floating);if(clearTimeout(q.current),O.current=!1,S.current&&i.current.floatingContext){n||clearTimeout(C.current),j.current=S.current({...i.current.floatingContext,tree:x,x:te.clientX,y:te.clientY,onClose(){V(),W(),z()||D(te,!0,"safe-polygon")}});const ye=j.current;ce.addEventListener("mousemove",ye),P.current=()=>{ce.removeEventListener("mousemove",ye)};return}(E.current==="touch"?!Si(o.floating,te.relatedTarget):!0)&&D(te)}function ne(te){z()||i.current.floatingContext&&(S.current==null||S.current({...i.current.floatingContext,tree:x,x:te.clientX,y:te.clientY,onClose(){V(),W(),z()||D(te)}})(te))}if(lr(o.domReference)){var oe;const te=o.domReference;return n&&te.addEventListener("mouseleave",ne),(oe=o.floating)==null||oe.addEventListener("mouseleave",ne),g&&te.addEventListener("mousemove",le,{once:!0}),te.addEventListener("mouseenter",le),te.addEventListener("mouseleave",ie),()=>{var ce;n&&te.removeEventListener("mouseleave",ne),(ce=o.floating)==null||ce.removeEventListener("mouseleave",ne),g&&te.removeEventListener("mousemove",le),te.removeEventListener("mouseenter",le),te.removeEventListener("mouseleave",ie)}}},[o,a,t,p,h,g,D,W,V,r,n,I,x,k,S,i,z]),_r(()=>{var le;if(a&&n&&(le=S.current)!=null&&le.__options.blockPointerEvents&&B()){$.current=!0;const ne=o.floating;if(lr(o.domReference)&&ne){var ie;const oe=Ei(o.floating).body;oe.setAttribute(nO,"");const te=o.domReference,ce=x==null||(ie=x.nodesRef.current.find(de=>de.id===_))==null||(ie=ie.context)==null?void 0:ie.elements.floating;return ce&&(ce.style.pointerEvents=""),oe.style.pointerEvents="none",te.style.pointerEvents="auto",ne.style.pointerEvents="auto",()=>{oe.style.pointerEvents="",te.style.pointerEvents="",ne.style.pointerEvents=""}}}},[a,n,_,o,x,S,B]),_r(()=>{n||(E.current=void 0,O.current=!1,W(),V())},[n,W,V]),H.useEffect(()=>()=>{W(),clearTimeout(C.current),clearTimeout(q.current),V()},[a,o.domReference,W,V]);const X=H.useMemo(()=>{function le(ie){E.current=ie.pointerType}return{onPointerDown:le,onPointerEnter:le,onMouseMove(ie){const{nativeEvent:ne}=ie;function oe(){!F.current&&!I.current&&r(!0,ne,"hover")}p&&!em(E.current)||n||h===0||O.current&&ie.movementX**2+ie.movementY**2<2||(clearTimeout(q.current),E.current==="touch"?oe():(O.current=!0,q.current=window.setTimeout(oe,h)))}}},[p,r,n,I,h]),Z=H.useMemo(()=>({onMouseEnter(){clearTimeout(C.current)},onMouseLeave(le){z()||D(le.nativeEvent,!1)}}),[D,z]);return H.useMemo(()=>a?{reference:X,floating:Z}:{},[a,X,Z])}let rO=0;function Ku(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(rO);const s=()=>t?.focus({preventScroll:n});i?s():rO=requestAnimationFrame(s)}function iO(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s?.parentId,s&&(r=r.concat(s))}return r}function Xd(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}function K7(t,e){let n,r=-1;function i(s,o){o>r&&(n=s,r=o),Xd(t,s).forEach(u=>{i(u.id,o+1)})}return i(e,0),t.find(s=>s.id===n)}let md=new WeakMap,by=new WeakSet,vy={},V0=0;const Q7=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,x2=t=>t&&(t.host||x2(t.parentNode)),J7=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=x2(n);return t.contains(r)?r:null}).filter(n=>n!=null);function Z7(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=J7(e,t),a=new Set,u=new Set(o),d=[];vy[i]||(vy[i]=new WeakMap);const p=vy[i];o.forEach(h),g(e),a.clear();function h(x){!x||a.has(x)||(a.add(x),x.parentNode&&h(x.parentNode))}function g(x){!x||u.has(x)||[].forEach.call(x.children,_=>{if(bu(_)!=="script")if(a.has(_))g(_);else{const S=s?_.getAttribute(s):null,k=S!==null&&S!=="false",I=md.get(_)||0,E=s?I+1:I,C=(p.get(_)||0)+1;md.set(_,E),p.set(_,C),d.push(_),E===1&&k&&by.add(_),C===1&&_.setAttribute(i,""),!k&&s&&_.setAttribute(s,"true")}})}return V0++,()=>{d.forEach(x=>{const _=md.get(x)||0,S=s?_-1:_,k=(p.get(x)||0)-1;md.set(x,S),p.set(x,k),S||(!by.has(x)&&s&&x.removeAttribute(s),by.delete(x)),k||x.removeAttribute(i)}),V0--,V0||(md=new WeakMap,md=new WeakMap,by=new WeakSet,vy={})}}function sO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=Ei(t[0]).body;return Z7(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const yx=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function w2(t,e){const n=gx(t,yx());e==="prev"&&n.reverse();const r=n.indexOf(Do(Ei(t)));return n.slice(r+1)[0]}function _2(){return w2(document.body,"next")}function S2(){return w2(document.body,"prev")}function Sh(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Si(n,r)}function Y7(t){gx(t,yx()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function oO(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const bx={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let X7;function aO(t){t.key==="Tab"&&(t.target,clearTimeout(X7))}const mv=H.forwardRef(function(e,n){const[r,i]=H.useState();_r(()=>(ZD()&&i("button"),document.addEventListener("keydown",aO),()=>{document.removeEventListener("keydown",aO)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Sc("focus-guard")]:"",style:bx};return f.jsx("span",{...e,...s})}),E2=H.createContext(null),lO=Sc("portal");function eQ(t){t===void 0&&(t={});const{id:e,root:n}=t,r=V1(),i=I2(),[s,o]=H.useState(null),a=H.useRef(null);return _r(()=>()=>{s?.remove(),queueMicrotask(()=>{a.current=null})},[s]),_r(()=>{if(!r||a.current)return;const u=e?document.getElementById(e):null;if(!u)return;const d=document.createElement("div");d.id=r,d.setAttribute(lO,""),u.appendChild(d),a.current=d,o(d)},[e,r]),_r(()=>{if(n===null||!r||a.current)return;let u=n||i?.portalNode;u&&!lr(u)&&(u=u.current),u=u||document.body;let d=null;e&&(d=document.createElement("div"),d.id=e,u.appendChild(d));const p=document.createElement("div");p.id=r,p.setAttribute(lO,""),u=d||u,u.appendChild(p),a.current=p,o(p)},[e,n,r,i]),s}function H1(t){const{children:e,id:n,root:r,preserveTabOrder:i=!0}=t,s=eQ({id:n,root:r}),[o,a]=H.useState(null),u=H.useRef(null),d=H.useRef(null),p=H.useRef(null),h=H.useRef(null),g=o?.modal,x=o?.open,_=!!o&&!o.modal&&o.open&&i&&!!(r||s);return H.useEffect(()=>{if(!s||!i||g)return;function S(k){s&&Sh(k)&&(k.type==="focusin"?oO:Y7)(s)}return s.addEventListener("focusin",S,!0),s.addEventListener("focusout",S,!0),()=>{s.removeEventListener("focusin",S,!0),s.removeEventListener("focusout",S,!0)}},[s,i,g]),H.useEffect(()=>{s&&(x||oO(s))},[x,s]),f.jsxs(E2.Provider,{value:H.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:u,afterOutsideRef:d,beforeInsideRef:p,afterInsideRef:h,portalNode:s,setFocusManagerState:a}),[i,s]),children:[_&&s&&f.jsx(mv,{"data-type":"outside",ref:u,onFocus:S=>{if(Sh(S,s)){var k;(k=p.current)==null||k.focus()}else{const I=S2()||o?.domReference;I?.focus()}}}),_&&s&&f.jsx("span",{"aria-owns":s.id,style:bx}),s&&_m.createPortal(e,s),_&&s&&f.jsx(mv,{"data-type":"outside",ref:d,onFocus:S=>{if(Sh(S,s)){var k;(k=h.current)==null||k.focus()}else{const I=_2()||o?.domReference;I?.focus(),o?.closeOnFocusOut&&o?.onOpenChange(!1,S.nativeEvent,"focus-out")}}})]})}const I2=()=>H.useContext(E2),gI="data-floating-ui-focusable";function yI(t){return t?t.hasAttribute(gI)?t:t.querySelector("["+gI+"]")||t:null}const tQ=20;let Qu=[];function H0(t){Qu=Qu.filter(e=>e.isConnected),t&&bu(t)!=="body"&&(Qu.push(t),Qu.length>tQ&&(Qu=Qu.slice(-20)))}function uO(){return Qu.slice().reverse().find(t=>t.isConnected)}function nQ(t){const e=yx();return s7(t,e)?t:gx(t,e)[0]||t}const rQ=H.forwardRef(function(e,n){return f.jsx("button",{...e,type:"button",ref:n,tabIndex:-1,style:bx})});function N2(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:a=!0,restoreFocus:u=!1,modal:d=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:h=!0,outsideElementsInert:g=!1}=t,{open:x,onOpenChange:_,events:S,dataRef:k,elements:{domReference:I,floating:E}}=e,C=Yi(()=>{var De;return(De=k.current.floatingContext)==null?void 0:De.nodeId}),j=typeof o=="number"&&o<0,q=YD(I)&&j,F=Q7(),$=F?s:!0,P=!$||F&&g,O=Xi(i),B=Xi(o),D=Xi(a),W=Rf(),V=I2(),z=H.useRef(null),X=H.useRef(null),Z=H.useRef(!1),le=H.useRef(!1),ie=H.useRef(-1),ne=V!=null,oe=yI(E),te=Yi(function(De){return De===void 0&&(De=oe),De?gx(De,yx()):[]}),ce=Yi(De=>{const Je=te(De);return O.current.map(Xe=>I&&Xe==="reference"?I:oe&&Xe==="floating"?oe:Je).filter(Boolean).flat()});H.useEffect(()=>{if(r||!d)return;function De(Xe){if(Xe.key==="Tab"){Si(oe,Do(Ei(oe)))&&te().length===0&&!q&&Qi(Xe);const Ue=ce(),ut=Hl(Xe);O.current[0]==="reference"&&ut===I&&(Qi(Xe),Xe.shiftKey?Ku(Ue[Ue.length-1]):Ku(Ue[1])),O.current[1]==="floating"&&ut===oe&&Xe.shiftKey&&(Qi(Xe),Ku(Ue[0]))}}const Je=Ei(oe);return Je.addEventListener("keydown",De),()=>{Je.removeEventListener("keydown",De)}},[r,I,oe,d,O,q,te,ce]),H.useEffect(()=>{if(r||!E)return;function De(Je){const Xe=Hl(Je),ut=te().indexOf(Xe);ut!==-1&&(ie.current=ut)}return E.addEventListener("focusin",De),()=>{E.removeEventListener("focusin",De)}},[r,E,te]),H.useEffect(()=>{if(r||!h)return;function De(){le.current=!0,setTimeout(()=>{le.current=!1})}function Je(Xe){const Ue=Xe.relatedTarget;queueMicrotask(()=>{const ut=C(),Et=!(Si(I,Ue)||Si(E,Ue)||Si(Ue,E)||Si(V?.portalNode,Ue)||Ue!=null&&Ue.hasAttribute(Sc("focus-guard"))||W&&(Xd(W.nodesRef.current,ut).find(At=>{var Gt,ln;return Si((Gt=At.context)==null?void 0:Gt.elements.floating,Ue)||Si((ln=At.context)==null?void 0:ln.elements.domReference,Ue)})||iO(W.nodesRef.current,ut).find(At=>{var Gt,ln,xe;return[(Gt=At.context)==null?void 0:Gt.elements.floating,yI((ln=At.context)==null?void 0:ln.elements.floating)].includes(Ue)||((xe=At.context)==null?void 0:xe.elements.domReference)===Ue})));if(u&&Et&&Do(Ei(oe))===Ei(oe).body){ri(oe)&&oe.focus();const At=ie.current,Gt=te(),ln=Gt[At]||Gt[Gt.length-1]||oe;ri(ln)&&ln.focus()}(q||!d)&&Ue&&Et&&!le.current&&Ue!==uO()&&(Z.current=!0,_(!1,Xe,"focus-out"))})}if(E&&ri(I))return I.addEventListener("focusout",Je),I.addEventListener("pointerdown",De),E.addEventListener("focusout",Je),()=>{I.removeEventListener("focusout",Je),I.removeEventListener("pointerdown",De),E.removeEventListener("focusout",Je)}},[r,I,E,oe,d,W,V,_,h,u,te,q,C]);const de=H.useRef(null),ye=H.useRef(null),we=YR([de,V?.beforeInsideRef]),Ie=YR([ye,V?.afterInsideRef]);H.useEffect(()=>{var De;if(r||!E)return;const Je=Array.from((V==null||(De=V.portalNode)==null?void 0:De.querySelectorAll("["+Sc("portal")+"]"))||[]),Xe=W&&!d?iO(W?.nodesRef.current,C()).map(Et=>{var At;return(At=Et.context)==null?void 0:At.elements.floating}):[],Ue=[E,...Je,...Xe,z.current,X.current,de.current,ye.current,V?.beforeOutsideRef.current,V?.afterOutsideRef.current,O.current.includes("reference")||q?I:null].filter(Et=>Et!=null),ut=d||q?sO(Ue,!P,P):sO(Ue);return()=>{ut()}},[r,I,E,d,O,V,q,$,P,W,C]),_r(()=>{if(r||!ri(oe))return;const De=Ei(oe),Je=Do(De);queueMicrotask(()=>{const Xe=ce(oe),Ue=B.current,ut=(typeof Ue=="number"?Xe[Ue]:Ue.current)||oe,Et=Si(oe,Je);!j&&!Et&&x&&Ku(ut,{preventScroll:ut===oe})})},[r,x,oe,j,ce,B]),_r(()=>{if(r||!oe)return;let De=!1;const Je=Ei(oe),Xe=Do(Je);let ut=k.current.openEvent;H0(Xe);function Et(ln){let{open:xe,reason:be,event:Ne,nested:qe}=ln;xe&&(ut=Ne),be==="escape-key"&&I&&H0(I),["hover","safe-polygon"].includes(be)&&Ne.type==="mouseleave"&&(Z.current=!0),be==="outside-press"&&(qe?(Z.current=!1,De=!0):Z.current=!(JD(Ne)||M1(Ne)))}S.on("openchange",Et);const At=Je.createElement("span");At.setAttribute("tabindex","-1"),At.setAttribute("aria-hidden","true"),Object.assign(At.style,bx),ne&&I&&I.insertAdjacentElement("afterend",At);function Gt(){return typeof D.current=="boolean"?uO()||At:D.current.current||At}return()=>{S.off("openchange",Et);const ln=Do(Je),xe=Si(E,ln)||W&&Xd(W.nodesRef.current,C()).some(qe=>{var Ve;return Si((Ve=qe.context)==null?void 0:Ve.elements.floating,ln)});(xe||ut&&["click","mousedown"].includes(ut.type))&&I&&H0(I);const Ne=Gt();queueMicrotask(()=>{const qe=nQ(Ne);D.current&&!Z.current&&ri(qe)&&(!(qe!==ln&&ln!==Je.body)||xe)&&qe.focus({preventScroll:De}),At.remove()})}},[r,E,oe,D,k,S,W,ne,I,C]),H.useEffect(()=>{queueMicrotask(()=>{Z.current=!1})},[r]),_r(()=>{if(!r&&V)return V.setFocusManagerState({modal:d,closeOnFocusOut:h,open:x,onOpenChange:_,domReference:I}),()=>{V.setFocusManagerState(null)}},[r,V,d,x,_,h,I]),_r(()=>{if(r||!oe||typeof MutationObserver!="function"||j)return;const De=()=>{const Xe=oe.getAttribute("tabindex"),Ue=te(),ut=Do(Ei(E)),Et=Ue.indexOf(ut);Et!==-1&&(ie.current=Et),O.current.includes("floating")||ut!==I&&Ue.length===0?Xe!=="0"&&oe.setAttribute("tabindex","0"):Xe!=="-1"&&oe.setAttribute("tabindex","-1")};De();const Je=new MutationObserver(De);return Je.observe(oe,{childList:!0,subtree:!0,attributes:!0}),()=>{Je.disconnect()}},[r,E,oe,I,O,te,j]);function ze(De){return r||!p||!d?null:f.jsx(rQ,{ref:De==="start"?z:X,onClick:Je=>_(!1,Je.nativeEvent),children:typeof p=="string"?p:"Dismiss"})}const Re=!r&&$&&(d?!q:!0)&&(ne||d);return f.jsxs(f.Fragment,{children:[Re&&f.jsx(mv,{"data-type":"inside",ref:we,onFocus:De=>{if(d){const Xe=ce();Ku(i[0]==="reference"?Xe[0]:Xe[Xe.length-1])}else if(V!=null&&V.preserveTabOrder&&V.portalNode)if(Z.current=!1,Sh(De,V.portalNode)){const Xe=_2()||I;Xe?.focus()}else{var Je;(Je=V.beforeOutsideRef.current)==null||Je.focus()}}}),!q&&ze("start"),n,ze("end"),Re&&f.jsx(mv,{"data-type":"inside",ref:Ie,onFocus:De=>{if(d)Ku(ce()[0]);else if(V!=null&&V.preserveTabOrder&&V.portalNode)if(h&&(Z.current=!0),Sh(De,V.portalNode)){const Xe=S2()||I;Xe?.focus()}else{var Je;(Je=V.afterOutsideRef.current)==null||Je.focus()}}})]})}let xy=0;function iQ(){const t=/iP(hone|ad|od)|iOS/.test(L1()),e=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=e.left?parseFloat(e.left):window.scrollX,o=e.top?parseFloat(e.top):window.scrollY;if(e.overflow="hidden",i&&(e[r]=i+"px"),t){var a,u;const d=((a=window.visualViewport)==null?void 0:a.offsetLeft)||0,p=((u=window.visualViewport)==null?void 0:u.offsetTop)||0;Object.assign(e,{position:"fixed",top:-(o-Math.floor(p))+"px",left:-(s-Math.floor(d))+"px",right:"0"})}return()=>{Object.assign(e,{overflow:"",[r]:""}),t&&(Object.assign(e,{position:"",top:"",left:"",right:""}),window.scrollTo(s,o))}}let cO=()=>{};const sQ=H.forwardRef(function(e,n){const{lockScroll:r=!1,...i}=e;return _r(()=>{if(r)return xy++,xy===1&&(cO=iQ()),()=>{xy--,xy===0&&cO()}},[r]),f.jsx("div",{ref:n,...i,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}})});function dO(t){return ri(t.target)&&t.target.tagName==="BUTTON"}function fO(t){return $1(t)}function G1(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:a="click",toggle:u=!0,ignoreMouse:d=!1,keyboardHandlers:p=!0,stickIfOpen:h=!0}=e,g=H.useRef(),x=H.useRef(!1),_=H.useMemo(()=>({onPointerDown(S){g.current=S.pointerType},onMouseDown(S){const k=g.current;S.button===0&&a!=="click"&&(em(k,!0)&&d||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="mousedown")?r(!1,S.nativeEvent,"click"):(S.preventDefault(),r(!0,S.nativeEvent,"click"))))},onClick(S){const k=g.current;if(a==="mousedown"&&g.current){g.current=void 0;return}em(k,!0)&&d||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="click")?r(!1,S.nativeEvent,"click"):r(!0,S.nativeEvent,"click"))},onKeyDown(S){g.current=void 0,!(S.defaultPrevented||!p||dO(S))&&(S.key===" "&&!fO(s)&&(S.preventDefault(),x.current=!0),S.key==="Enter"&&r(!(n&&u),S.nativeEvent,"click"))},onKeyUp(S){S.defaultPrevented||!p||dO(S)||fO(s)||S.key===" "&&x.current&&(x.current=!1,r(!(n&&u),S.nativeEvent,"click"))}}),[i,s,a,d,p,r,n,h,u]);return H.useMemo(()=>o?{reference:_}:{},[o,_])}const oQ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},aQ={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},pO=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function K1(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=t,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:d="pointerdown",referencePress:p=!1,referencePressEvent:h="pointerdown",ancestorScroll:g=!1,bubbles:x,capture:_}=e,S=Rf(),k=Yi(typeof u=="function"?u:()=>!1),I=typeof u=="function"?k:u,E=H.useRef(!1),C=H.useRef(!1),{escapeKey:j,outsidePress:q}=pO(x),{escapeKey:F,outsidePress:$}=pO(_),P=H.useRef(!1),O=Yi(X=>{var Z;if(!n||!o||!a||X.key!=="Escape"||P.current)return;const le=(Z=s.current.floatingContext)==null?void 0:Z.nodeId,ie=S?Xd(S.nodesRef.current,le):[];if(!j&&(X.stopPropagation(),ie.length>0)){let ne=!0;if(ie.forEach(oe=>{var te;if((te=oe.context)!=null&&te.open&&!oe.context.dataRef.current.__escapeKeyBubbles){ne=!1;return}}),!ne)return}r(!1,j9(X)?X.nativeEvent:X,"escape-key")}),B=Yi(X=>{var Z;const le=()=>{var ie;O(X),(ie=Hl(X))==null||ie.removeEventListener("keydown",le)};(Z=Hl(X))==null||Z.addEventListener("keydown",le)}),D=Yi(X=>{var Z;const le=E.current;E.current=!1;const ie=C.current;if(C.current=!1,d==="click"&&ie||le||typeof I=="function"&&!I(X))return;const ne=Hl(X),oe="["+Sc("inert")+"]",te=Ei(i.floating).querySelectorAll(oe);let ce=lr(ne)?ne:null;for(;ce&&!Ja(ce);){const Ie=sl(ce);if(Ja(Ie)||!lr(Ie))break;ce=Ie}if(te.length&&lr(ne)&&!R9(ne)&&!Si(ne,i.floating)&&Array.from(te).every(Ie=>!Si(ce,Ie)))return;if(ri(ne)&&z){const Ie=Ja(ne),ze=wo(ne),Re=/auto|scroll/,De=Ie||Re.test(ze.overflowX),Je=Ie||Re.test(ze.overflowY),Xe=De&&ne.clientWidth>0&&ne.scrollWidth>ne.clientWidth,Ue=Je&&ne.clientHeight>0&&ne.scrollHeight>ne.clientHeight,ut=ze.direction==="rtl",Et=Ue&&(ut?X.offsetX<=ne.offsetWidth-ne.clientWidth:X.offsetX>ne.clientWidth),At=Xe&&X.offsetY>ne.clientHeight;if(Et||At)return}const de=(Z=s.current.floatingContext)==null?void 0:Z.nodeId,ye=S&&Xd(S.nodesRef.current,de).some(Ie=>{var ze;return $0(X,(ze=Ie.context)==null?void 0:ze.elements.floating)});if($0(X,i.floating)||$0(X,i.domReference)||ye)return;const we=S?Xd(S.nodesRef.current,de):[];if(we.length>0){let Ie=!0;if(we.forEach(ze=>{var Re;if((Re=ze.context)!=null&&Re.open&&!ze.context.dataRef.current.__outsidePressBubbles){Ie=!1;return}}),!Ie)return}r(!1,X,"outside-press")}),W=Yi(X=>{var Z;const le=()=>{var ie;D(X),(ie=Hl(X))==null||ie.removeEventListener(d,le)};(Z=Hl(X))==null||Z.addEventListener(d,le)});H.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=j,s.current.__outsidePressBubbles=q;let X=-1;function Z(te){r(!1,te,"ancestor-scroll")}function le(){window.clearTimeout(X),P.current=!0}function ie(){X=window.setTimeout(()=>{P.current=!1},hx()?5:0)}const ne=Ei(i.floating);a&&(ne.addEventListener("keydown",F?B:O,F),ne.addEventListener("compositionstart",le),ne.addEventListener("compositionend",ie)),I&&ne.addEventListener(d,$?W:D,$);let oe=[];return g&&(lr(i.domReference)&&(oe=tu(i.domReference)),lr(i.floating)&&(oe=oe.concat(tu(i.floating))),!lr(i.reference)&&i.reference&&i.reference.contextElement&&(oe=oe.concat(tu(i.reference.contextElement)))),oe=oe.filter(te=>{var ce;return te!==((ce=ne.defaultView)==null?void 0:ce.visualViewport)}),oe.forEach(te=>{te.addEventListener("scroll",Z,{passive:!0})}),()=>{a&&(ne.removeEventListener("keydown",F?B:O,F),ne.removeEventListener("compositionstart",le),ne.removeEventListener("compositionend",ie)),I&&ne.removeEventListener(d,$?W:D,$),oe.forEach(te=>{te.removeEventListener("scroll",Z)}),window.clearTimeout(X)}},[s,i,a,I,d,n,r,g,o,j,q,O,F,B,D,$,W]),H.useEffect(()=>{E.current=!1},[I,d]);const V=H.useMemo(()=>({onKeyDown:O,...p&&{[oQ[h]]:X=>{r(!1,X.nativeEvent,"reference-press")},...h!=="click"&&{onClick(X){r(!1,X.nativeEvent,"reference-press")}}}}),[O,r,p,h]),z=H.useMemo(()=>({onKeyDown:O,onMouseDown(){C.current=!0},onMouseUp(){C.current=!0},[aQ[d]]:()=>{E.current=!0}}),[O,d]);return H.useMemo(()=>o?{reference:V,floating:z}:{},[o,V,z])}function lQ(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=V1(),s=H.useRef({}),[o]=H.useState(()=>y2()),a=zm()!=null,[u,d]=H.useState(r.reference),p=Yi((x,_,S)=>{s.current.openEvent=x?_:void 0,o.emit("openchange",{open:x,event:_,reason:S,nested:a}),n?.(x,_,S)}),h=H.useMemo(()=>({setPositionReference:d}),[]),g=H.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return H.useMemo(()=>({dataRef:s,open:e,onOpenChange:p,elements:g,events:o,floatingId:i,refs:h}),[e,p,g,o,i,h])}function Q1(t){t===void 0&&(t={});const{nodeId:e}=t,n=lQ({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=H.useState(null),[a,u]=H.useState(null),p=i?.domReference||s,h=H.useRef(null),g=Rf();_r(()=>{p&&(h.current=p)},[p]);const x=O7({...t,elements:{...i,...a&&{reference:a}}}),_=H.useCallback(C=>{const j=lr(C)?{getBoundingClientRect:()=>C.getBoundingClientRect(),contextElement:C}:C;u(j),x.refs.setReference(j)},[x.refs]),S=H.useCallback(C=>{(lr(C)||C===null)&&(h.current=C,o(C)),(lr(x.refs.reference.current)||x.refs.reference.current===null||C!==null&&!lr(C))&&x.refs.setReference(C)},[x.refs]),k=H.useMemo(()=>({...x.refs,setReference:S,setPositionReference:_,domReference:h}),[x.refs,S,_]),I=H.useMemo(()=>({...x.elements,domReference:p}),[x.elements,p]),E=H.useMemo(()=>({...x,...r,refs:k,elements:I,nodeId:e}),[x,k,I,e,r]);return _r(()=>{r.dataRef.current.floatingContext=E;const C=g?.nodesRef.current.find(j=>j.id===e);C&&(C.context=E)}),H.useMemo(()=>({...x,context:E,refs:k,elements:I}),[x,k,I,E])}function uQ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=t,{enabled:a=!0,visibleOnly:u=!0}=e,d=H.useRef(!1),p=H.useRef(),h=H.useRef(!0);H.useEffect(()=>{if(!a)return;const x=Es(o.domReference);function _(){!n&&ri(o.domReference)&&o.domReference===Do(Ei(o.domReference))&&(d.current=!0)}function S(){h.current=!0}return x.addEventListener("blur",_),x.addEventListener("keydown",S,!0),()=>{x.removeEventListener("blur",_),x.removeEventListener("keydown",S,!0)}},[o.domReference,n,a]),H.useEffect(()=>{if(!a)return;function x(_){let{reason:S}=_;(S==="reference-press"||S==="escape-key")&&(d.current=!0)}return i.on("openchange",x),()=>{i.off("openchange",x)}},[i,a]),H.useEffect(()=>()=>{clearTimeout(p.current)},[]);const g=H.useMemo(()=>({onPointerDown(x){M1(x.nativeEvent)||(h.current=!1)},onMouseLeave(){d.current=!1},onFocus(x){if(d.current)return;const _=Hl(x.nativeEvent);if(u&&lr(_))try{if(ZD()&&C9())throw Error();if(!_.matches(":focus-visible"))return}catch{if(!h.current&&!$1(_))return}r(!0,x.nativeEvent,"focus")},onBlur(x){d.current=!1;const _=x.relatedTarget,S=x.nativeEvent,k=lr(_)&&_.hasAttribute(Sc("focus-guard"))&&_.getAttribute("data-type")==="outside";p.current=window.setTimeout(()=>{var I;const E=Do(o.domReference?o.domReference.ownerDocument:document);!_&&E===o.domReference||Si((I=s.current.floatingContext)==null?void 0:I.refs.floating.current,E)||Si(o.domReference,E)||k||r(!1,S,"focus")})}}),[s,o.domReference,r,u]);return H.useMemo(()=>a?{reference:g}:{},[a,g])}const hO="active",mO="selected";function G0(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[hO]:o,[mO]:a,...u}=t;s=u}return{...n==="floating"&&{tabIndex:-1,[gI]:""},...s,...e.map(o=>{const a=o?o[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[d,p]=u;if(!(i&&[hO,mO].includes(d)))if(d.indexOf("on")===0){if(r.has(d)||r.set(d,[]),typeof p=="function"){var h;(h=r.get(d))==null||h.push(p),o[d]=function(){for(var g,x=arguments.length,_=new Array(x),S=0;S<x;S++)_[S]=arguments[S];return(g=r.get(d))==null?void 0:g.map(k=>k(..._)).find(k=>k!==void 0)}}}else o[d]=p}),o),{})}}function J1(t){t===void 0&&(t=[]);const e=t.map(a=>a?.reference),n=t.map(a=>a?.floating),r=t.map(a=>a?.item),i=H.useCallback(a=>G0(a,t,"reference"),e),s=H.useCallback(a=>G0(a,t,"floating"),n),o=H.useCallback(a=>G0(a,t,"item"),r);return H.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function vx(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function gO(t,e){return vx(e,t===U1||t===Bm,t===nu||t===ru)}function K0(t,e,n){return vx(e,t===Bm,n?t===nu:t===ru)||t==="Enter"||t===" "||t===""}function cQ(t,e,n){return vx(e,n?t===nu:t===ru,t===Bm)}function yO(t,e,n){return vx(e,n?t===ru:t===nu,t===U1)}function dQ(t,e){const{open:n,onOpenChange:r,elements:i}=t,{listRef:s,activeIndex:o,onNavigate:a=()=>{},enabled:u=!0,selectedIndex:d=null,allowEscape:p=!1,loop:h=!1,nested:g=!1,rtl:x=!1,virtual:_=!1,focusItemOnOpen:S="auto",focusItemOnHover:k=!0,openOnArrowKeyDown:I=!0,disabledIndices:E=void 0,orientation:C="vertical",cols:j=1,scrollItemIntoView:q=!0,virtualItemRef:F,itemSizes:$,dense:P=!1}=e,O=yI(i.floating),B=Xi(O),D=zm(),W=Rf(),V=Yi(()=>{a(Z.current===-1?null:Z.current)}),z=YD(i.domReference),X=H.useRef(S),Z=H.useRef(d??-1),le=H.useRef(null),ie=H.useRef(!0),ne=H.useRef(V),oe=H.useRef(!!i.floating),te=H.useRef(n),ce=H.useRef(!1),de=H.useRef(!1),ye=Xi(E),we=Xi(n),Ie=Xi(q),ze=Xi(d),[Re,De]=H.useState(),[Je,Xe]=H.useState(),Ue=Yi(()=>{function be(Ve){_?(De(Ve.id),W?.events.emit("virtualfocus",Ve),F&&(F.current=Ve)):Ku(Ve,{sync:ce.current,preventScroll:!0})}const Ne=s.current[Z.current];Ne&&be(Ne),(ce.current?Ve=>Ve():requestAnimationFrame)(()=>{const Ve=s.current[Z.current]||Ne;if(!Ve)return;Ne||be(Ve);const rt=Ie.current;rt&&Et&&(de.current||!ie.current)&&(Ve.scrollIntoView==null||Ve.scrollIntoView(typeof rt=="boolean"?{block:"nearest",inline:"nearest"}:rt))})});_r(()=>{u&&(n&&i.floating?X.current&&d!=null&&(de.current=!0,Z.current=d,V()):oe.current&&(Z.current=-1,ne.current()))},[u,n,i.floating,d,V]),_r(()=>{if(u&&n&&i.floating)if(o==null){if(ce.current=!1,ze.current!=null)return;if(oe.current&&(Z.current=-1,Ue()),(!te.current||!oe.current)&&X.current&&(le.current!=null||X.current===!0&&le.current==null)){let be=0;const Ne=()=>{s.current[0]==null?(be<2&&(be?requestAnimationFrame:queueMicrotask)(Ne),be++):(Z.current=le.current==null||K0(le.current,C,x)||g?W0(s,ye.current):XR(s,ye.current),le.current=null,V())};Ne()}}else _h(s,o)||(Z.current=o,Ue(),de.current=!1)},[u,n,i.floating,o,ze,g,s,C,x,V,Ue,ye]),_r(()=>{var be;if(!u||i.floating||!W||_||!oe.current)return;const Ne=W.nodesRef.current,qe=(be=Ne.find(Me=>Me.id===D))==null||(be=be.context)==null?void 0:be.elements.floating,Ve=Do(Ei(i.floating)),rt=Ne.some(Me=>Me.context&&Si(Me.context.elements.floating,Ve));qe&&!rt&&ie.current&&qe.focus({preventScroll:!0})},[u,i.floating,W,D,_]),_r(()=>{if(!u||!W||!_||D)return;function be(Ne){Xe(Ne.id),F&&(F.current=Ne)}return W.events.on("virtualfocus",be),()=>{W.events.off("virtualfocus",be)}},[u,W,_,D,F]),_r(()=>{ne.current=V,te.current=n,oe.current=!!i.floating}),_r(()=>{n||(le.current=null)},[n]);const ut=o!=null,Et=H.useMemo(()=>{function be(qe){if(!n)return;const Ve=s.current.indexOf(qe);Ve!==-1&&Z.current!==Ve&&(Z.current=Ve,V())}return{onFocus(qe){let{currentTarget:Ve}=qe;ce.current=!0,be(Ve)},onClick:qe=>{let{currentTarget:Ve}=qe;return Ve.focus({preventScroll:!0})},...k&&{onMouseMove(qe){let{currentTarget:Ve}=qe;ce.current=!0,de.current=!1,be(Ve)},onPointerLeave(qe){let{pointerType:Ve}=qe;if(!(!ie.current||Ve==="touch")&&(ce.current=!0,Z.current=-1,V(),!_)){var rt;(rt=B.current)==null||rt.focus({preventScroll:!0})}}}}},[n,B,k,s,V,_]),At=Yi(be=>{if(ie.current=!1,ce.current=!0,be.which===229||!we.current&&be.currentTarget===B.current)return;if(g&&yO(be.key,C,x)){Qi(be),r(!1,be.nativeEvent,"list-navigation"),ri(i.domReference)&&(_?W?.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const Ne=Z.current,qe=W0(s,E),Ve=XR(s,E);if(z||(be.key==="Home"&&(Qi(be),Z.current=qe,V()),be.key==="End"&&(Qi(be),Z.current=Ve,V())),j>1){const rt=$||Array.from({length:s.current.length},()=>({width:1,height:1})),Me=L7(rt,j,P),ct=Me.findIndex(_n=>_n!=null&&!lb(s.current,_n,E)),Yt=Me.reduce((_n,dr,Bn)=>dr!=null&&!lb(s.current,dr,E)?Bn:_n,-1),Xt=Me[D7({current:Me.map(_n=>_n!=null?s.current[_n]:null)},{event:be,orientation:C,loop:h,rtl:x,cols:j,disabledIndices:$7([...E||s.current.map((_n,dr)=>lb(s.current,dr)?dr:void 0),void 0],Me),minIndex:ct,maxIndex:Yt,prevIndex:M7(Z.current>Ve?qe:Z.current,rt,Me,j,be.key===Bm?"bl":be.key===(x?nu:ru)?"tr":"tl"),stopEvent:!0})];if(Xt!=null&&(Z.current=Xt,V()),C==="both")return}if(gO(be.key,C)){if(Qi(be),n&&!_&&Do(be.currentTarget.ownerDocument)===be.currentTarget){Z.current=K0(be.key,C,x)?qe:Ve,V();return}K0(be.key,C,x)?h?Z.current=Ne>=Ve?p&&Ne!==s.current.length?-1:qe:Oi(s,{startingIndex:Ne,disabledIndices:E}):Z.current=Math.min(Ve,Oi(s,{startingIndex:Ne,disabledIndices:E})):h?Z.current=Ne<=qe?p&&Ne!==-1?s.current.length:Ve:Oi(s,{startingIndex:Ne,decrement:!0,disabledIndices:E}):Z.current=Math.max(qe,Oi(s,{startingIndex:Ne,decrement:!0,disabledIndices:E})),_h(s,Z.current)&&(Z.current=-1),V()}}),Gt=H.useMemo(()=>_&&n&&ut&&{"aria-activedescendant":Je||Re},[_,n,ut,Je,Re]),ln=H.useMemo(()=>({"aria-orientation":C==="both"?void 0:C,...z?{}:Gt,onKeyDown:At,onPointerMove(){ie.current=!0}}),[Gt,At,C,z]),xe=H.useMemo(()=>{function be(qe){S==="auto"&&JD(qe.nativeEvent)&&(X.current=!0)}function Ne(qe){X.current=S,S==="auto"&&M1(qe.nativeEvent)&&(X.current=!0)}return{...Gt,onKeyDown(qe){ie.current=!1;const Ve=qe.key.startsWith("Arrow"),rt=["Home","End"].includes(qe.key),Me=Ve||rt,ct=cQ(qe.key,C,x),Yt=yO(qe.key,C,x),Xt=gO(qe.key,C),_n=(g?ct:Xt)||qe.key==="Enter"||qe.key.trim()==="";if(_&&n){const Vi=W?.nodesRef.current.find(en=>en.parentId==null),Cr=W&&Vi?K7(W.nodesRef.current,Vi.id):null;if(Me&&Cr&&F){const en=new KeyboardEvent("keydown",{key:qe.key,bubbles:!0});if(ct||Yt){var dr,Bn;const os=((dr=Cr.context)==null?void 0:dr.elements.domReference)===qe.currentTarget,as=Yt&&!os?(Bn=Cr.context)==null?void 0:Bn.elements.domReference:ct?s.current.find(ls=>ls?.id===Re):null;as&&(Qi(qe),as.dispatchEvent(en),Xe(void 0))}if((Xt||rt)&&Cr.context&&Cr.context.open&&Cr.parentId&&qe.currentTarget!==Cr.context.elements.domReference){var Yr;Qi(qe),(Yr=Cr.context.elements.domReference)==null||Yr.dispatchEvent(en);return}}return At(qe)}if(!(!n&&!I&&Ve)){if(_n&&(le.current=g&&Xt?null:qe.key),g){ct&&(Qi(qe),n?(Z.current=W0(s,ye.current),V()):r(!0,qe.nativeEvent,"list-navigation"));return}Xt&&(d!=null&&(Z.current=d),Qi(qe),!n&&I?r(!0,qe.nativeEvent,"list-navigation"):At(qe),n&&V())}},onFocus(){n&&!_&&(Z.current=-1,V())},onPointerDown:Ne,onPointerEnter:Ne,onMouseDown:be,onClick:be}},[Re,Gt,At,ye,S,s,g,V,r,n,I,C,x,d,W,_,F]);return H.useMemo(()=>u?{reference:xe,floating:ln,item:Et}:{},[u,xe,ln,Et])}const bO=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function gd(t,e){return typeof t=="function"?t(e):t}function fQ(t,e){const[n,r]=H.useState(t);return t&&!n&&r(!0),H.useEffect(()=>{if(!t&&n){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,n,e]),n}function pQ(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[a,u]=H.useState("unmounted"),d=fQ(n,o);return!d&&a==="close"&&u("unmounted"),_r(()=>{if(r){if(n){u("initial");const p=requestAnimationFrame(()=>{u("open")});return()=>{cancelAnimationFrame(p)}}u("close")}},[n,r]),{isMounted:d,status:a}}function Z1(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:s,duration:o=250}=e,a=t.placement,u=a.split("-")[0],d=H.useMemo(()=>({side:u,placement:a}),[u,a]),p=typeof o=="number",h=(p?o:o.open)||0,g=(p?o:o.close)||0,[x,_]=H.useState(()=>({...gd(s,d),...gd(n,d)})),{isMounted:S,status:k}=pQ(t,{duration:o}),I=Xi(n),E=Xi(r),C=Xi(i),j=Xi(s);return _r(()=>{const q=gd(I.current,d),F=gd(C.current,d),$=gd(j.current,d),P=gd(E.current,d)||Object.keys(q).reduce((O,B)=>(O[B]="",O),{});if(k==="initial"&&_(O=>({transitionProperty:O.transitionProperty,...$,...q})),k==="open"&&_({transitionProperty:Object.keys(P).map(bO).join(","),transitionDuration:h+"ms",...$,...P}),k==="close"){const O=F||q;_({transitionProperty:Object.keys(O).map(bO).join(","),transitionDuration:g+"ms",...$,...O})}},[g,C,I,E,j,h,k,d]),{isMounted:S,styles:x}}const hQ=H.createContext({close(){}}),mQ=En({slot:{target:["flex","justify-center","items-center"],portal:[]},variant:{mounted:{true:[]}},match:[{if:{mounted:!1},then:{portal:["hidden"]}}],defaults:{mounted:!1}}),gQ=({target:t,action:e="hover",disabled:n=!1,closeOnClick:r=!1,delay:i=100,float:s,variant:o,tva:a=mQ,css:u,children:d})=>{const[p,h]=H.useState(!1),{refs:g,floatingStyles:x,context:_}=Q1({open:p,onOpenChange:h,placement:"top",whileElementsMounted:f2,middleware:[h2(10),m2({fallbackAxisSideDirection:"start"}),A7()],...s}),{getReferenceProps:S,getFloatingProps:k}=J1([G7(_,{enabled:e==="hover",delay:i}),G1(_,{enabled:e==="click"}),uQ(_),K1(_)]),{isMounted:I,styles:E}=Z1(_),C=a({mounted:I,...o,css:u}).slots;return f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",ref:g.setReference,...S(),disabled:n,className:C.target(),children:t}),f.jsx(H1,{children:f.jsx("div",{ref:g.setFloating,style:{...x,...E},className:C.portal(),...k(),onClick:r?()=>{h(!1)}:void 0,children:f.jsx(hQ.Provider,{value:{close(){h(!1)}},children:d})})})]})},k2="icon-[system-uicons--menu-hamburger]",C2=En({slot:{base:[]},variant:{size:{xs:"text-sm",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl"},disabled:{true:[]}},match:[{if:{disabled:!0},then:{base:["pointer-events-none","cursor-not-allowed","text-gray-400","opacity-50"]}}],defaults:{size:"xl",disabled:!1}}),tn=({icon:t,variant:e,tva:n=C2,css:r,...i})=>{const s=n({...e,css:r}).slots;return t?f.jsx("div",{className:s.base({css:[t]}),...i}):null},yQ=En({slot:{base:["p-1","bg-slate-50","border","border-slate-300","rounded-sm","shadow-md","text-slate-500","flex","flex-col","gap-2"]},variant:{},defaults:{}}),ur=({icon:t=k2,iconProps:e,children:n,variant:r,tva:i=yQ,css:s,...o})=>{const a=i({...r,css:s}).slots;return f.jsx(H7,{children:f.jsx(gQ,{action:"click",target:f.jsx(tn,{icon:t,...e}),delay:100,float:{placement:"bottom-start"},closeOnClick:!0,...o,children:f.jsx("div",{className:a.base(),children:n})})})},T2="icon-[svg-spinners--90-ring-with-bg]",bQ=En({slot:{base:["flex","items-center","justify-center","gap-2","group","w-fit","h-fit","rounded-sm","cursor-pointer","hover:shadow-md","hover:shadow-slate-200","transition-all","hover:bg-slate-200","text-slate-600","text-2xl","p-1"]},variant:{disabled:{true:["cursor-not-allowed","pointer-events-none"]},loading:{true:["cursor-not-allowed","pointer-events-none"]}},match:[{if:{disabled:!0},then:{base:["opacity-50","hover:bg-blue-400"]}}],defaults:{disabled:!1,loading:!1}}),Wm=({iconEnabled:t,iconDisabled:e,iconLoading:n=T2,disabled:r=!1,loading:i=!1,onClick:s,variant:o,tva:a=bQ,css:u,children:d,...p})=>{const h=a({disabled:r,loading:i,...o,css:u}).slots;return f.jsxs("div",{className:h.base(),onClick:r?void 0:s,...p,children:[r?f.jsx(tn,{icon:i?n:e??t}):f.jsx(tn,{icon:i?n:t}),d]})},Y1="icon-[iconamoon--close-light]",xx=H.createContext(void 0),vQ=En({slot:{base:["bg-slate-400/75","backdrop-blur-xs","flex","justify-center","py-12"],target:[],modal:["bg-white","rounded-lg","shadow-lg","p-4","w-fit","h-fit","max-h-full","overflow-y-auto","relative","w-2/3","max-w-1/2"]},variant:{disabled:{true:["pointer-events-none"]},loading:{true:[]}},match:[{if:{loading:!0},then:{base:["pointer-events-none","opacity-50"]}}],defaults:{disabled:!1,loading:!1}}),Tc=({target:t,icon:e,textTitle:n,disabled:r=!1,defaultOpen:i=!1,outside:s=!1,variant:o,css:a,tva:u=vQ,children:d})=>{const[p,h]=H.useState(i),g=U7(),{refs:x,context:_}=Q1({nodeId:g,open:p,onOpenChange:h}),S=G1(_),k=K1(_,{outsidePress:s}),{getReferenceProps:I,getFloatingProps:E}=J1([S,k]),{isMounted:C,styles:j}=Z1(_),q=u({disabled:r,...o,css:a}).slots;return f.jsxs(xx.Provider,{value:{close(){h(!1)}},children:[f.jsx("div",{ref:x.setReference,...I({disabled:r}),className:q.target(),children:t}),f.jsx(V7,{id:g,children:C&&f.jsx(f.Fragment,{children:f.jsx(H1,{children:f.jsx(sQ,{lockScroll:!0,style:j,className:q.base(),children:f.jsx(N2,{context:_,children:f.jsxs("div",{ref:x.setFloating,...E(),className:q.modal(),children:[f.jsxs("div",{className:"border-b border-slate-200 mb-2 py-1.5 flex flex-row items-center justify-between select-none",children:[f.jsxs("div",{className:"flex flex-row items-center gap-2 pr-4",children:[e&&(rx(e)?f.jsx(tn,{icon:e,variant:{size:"xl"}}):e),n&&f.jsx("div",{className:"text-lg font-semibold text-slate-700",children:n})]}),f.jsx(Wm,{iconEnabled:Y1,onClick:()=>h(!1)})]}),w9(d)?f.jsx(d,{close:()=>h(!1)}):d]})})})})})})]})},xQ=En({use:HD,slot:{},variant:{},defaults:{}}),Rn=({icon:t,iconProps:e,label:n,disabled:r=!1,hidden:i=!1,variant:s,tva:o=xQ,css:a,...u})=>{const d=o({...s,disabled:r,css:a}).slots;return i?null:f.jsxs("div",{className:d.base(),children:[rx(t)?f.jsx(tn,{icon:t,...e}):t,f.jsx(Tc,{icon:t,target:n,disabled:r,css:{modal:["w-1/2"]},...u})]})},wQ=En({slot:{base:["flex","flex-row","gap-2","items-center","rounded-2xl","bg-blue-50","border","border-blue-200","text-xs","px-4","py-0.5","font-bold"]},variant:{},defaults:{}}),Di=({variant:t,tva:e=wQ,css:n,...r})=>{const i=e({...t,css:n}).slots;return f.jsx("div",{className:i.base(),...r})},bI="icon-[material-symbols-light--check-small]",_Q="icon-[material-symbols-light--close-small]",SQ="icon-[material-symbols-light--check-indeterminate-small]",EQ=En({use:C2,slot:{},variant:{value:{true:"text-green-600",false:"text-amber-600"}},defaults:{value:!1}}),wx=({value:t,checkIcon:e=bI,unCheckIcon:n=_Q,undefinedIcon:r=SQ,tva:i=EQ,...s})=>t==null?f.jsx(tn,{icon:r,tva:i,...s}):f.jsx(tn,{icon:t?e:n,tva:o=>i({...o,value:t}),...s}),IQ=En({slot:{base:["flex","items-center","justify-between","text-sm","font-medium","text-slate-900","w-full"],switch:["relative","w-11","h-6","bg-gray-200","peer-focus:outline-hidden","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","peer-checked:rtl:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"]},variant:{},defaults:{}}),j2=({value:t,onChange:e,variant:n,tva:r=IQ,css:i,...s})=>{const o=r({...n,css:i}).slots;return f.jsx("div",{className:o.base(),children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:t,className:"sr-only peer",onChange:a=>{e(a.target.checked)},...s}),f.jsx("div",{className:o.switch()})]})})},NQ=En({slot:{base:["flex","flex-row","items-center","justify-center","gap-2","group","rounded-sm","transition-all","cursor-pointer"]},variant:{variant:{primary:["text-white"],secondary:["text-slate-700"],subtle:["text-slate-600"],danger:["text-slate-50"]},disabled:{true:"cursor-not-allowed"},size:{xs:[],sm:[],md:[]}},match:[{if:{variant:"primary"},then:{base:["bg-blue-400","hover:bg-blue-500"]}},{if:{variant:"primary",disabled:!0},then:{base:["opacity-50","bg-blue-600","hover:bg-blue-600","cursor-not-allowed"]}},{if:{variant:"secondary"},then:{base:["bg-amber-400","hover:bg-amber-500"]}},{if:{variant:"secondary",disabled:!0},then:{base:["opacity-50","bg-amber-600","hover:bg-amber-600","cursor-not-allowed"]}},{if:{variant:"subtle"},then:{base:["text-slate-600","hover:text-slate-800","hover:bg-blue-50"]}},{if:{variant:"subtle",disabled:!0},then:{base:["opacity-50","bg-blue-50","hover:bg-blue-50","cursor-not-allowed"]}},{if:{variant:"danger"},then:{base:["bg-red-400","hover:bg-red-500","hover:text-white"]}},{if:{size:"xs"},then:{base:["py-0.5","px-1"]}},{if:{size:"sm"},then:{base:["py-1","px-2"]}},{if:{size:"md"},then:{base:["py-2","px-4"]}}],defaults:{variant:"primary",disabled:!1,size:"md"}}),cn=({iconEnabled:t,iconDisabled:e,iconLoading:n=T2,iconProps:r,loading:i,variant:s,tva:o=NQ,css:a,children:u,...d})=>{const p=o({disabled:d.disabled,...s,css:a}).slots;return f.jsxs("button",{type:"button",className:p.base({disabled:d.disabled}),...d,children:[d.disabled?f.jsx(tn,{icon:i===!0?n:e,variant:{size:"xl"},...r}):f.jsx(tn,{icon:i===!0?n:t,variant:{size:"xl"},...r}),u]})},X1=H.createContext({inline:!1}),kQ=En({slot:{base:["border","border-slate-100","px-2","py-1","rounded-md"],label:["text-sm","font-semibold","text-slate-600","border-b","mb-2"],value:[]},variant:{inline:{true:[]},withBackground:{true:[]}},match:[{if:{inline:!0},then:{base:["border-none","flex","flex-row","items-center","gap-2"],label:["mb-0","font-light","text-md","text-slate-600","border-none"],value:["text-md","text-slate-800"]}},{if:{withBackground:!0},then:{base:["bg-slate-50","hover:bg-slate-100"]}}],defaults:{inline:!1,withBackground:!0}}),CQ=({inline:t,label:e,value:n,variant:r,tva:i=kQ,css:s})=>{const o=H.useContext(X1),a=t??o?.inline,u=i({inline:a,...r,css:s}).slots;return f.jsxs("div",{className:u.base(),children:[e?f.jsx("div",{className:u.label(),children:e}):null,f.jsx("div",{className:u.value(),children:n})]})},TQ=En({slot:{base:["flex","flex-col","gap-4","border","border-slate-100","p-4","rounded-lg"]},variant:{inline:{true:["flex-row","border-none","gap-1","p-0","flex-1"]}},defaults:{inline:!1}}),R2=({items:t,hidden:e=[],valueOfProps:n,entity:r,variant:i,tva:s=TQ,css:o,inline:a=!1})=>{const u=s({inline:a,...i,css:o}).slots;return f.jsx(X1.Provider,{value:{inline:a},children:f.jsx("div",{className:u.base(),children:t.filter(({id:d})=>!e.includes(d)).map(({id:d,render:p,...h})=>f.jsx(CQ,{value:f.jsx(p,{entity:r}),...n,...h},d))})})},jQ=En({slot:{base:["flex","flex-col","gap-2"]},variant:{},defaults:{}}),vO="icon-[tabler--dots]",RQ=En({slot:{base:["flex","items-center","justify-between","gap-2"],sums:["flex","items-center","gap-2","text-sm"]},variant:{},defaults:{}}),OQ=En({slot:{base:["select-none"],list:["flex","items-center","-space-x-px","text-xs","gap-2"],page:["flex","items-center","justify-center","w-12","px-2","py-1","rounded-sm","border","border-slate-200","hover:bg-slate-200","cursor-pointer","transition-all","duration-200"]},variant:{current:{true:[]}},match:[{if:{current:!0},then:{page:["bg-slate-100","hover:bg-slate-200","text-slate-800","font-bold"]}}],defaults:{current:!1}}),Q0=({pages:t,page:e,onPage:n,variant:r,tva:i=OQ,css:s})=>{const o=i({...r,css:s}).slots;return f.jsx("nav",{className:o.base(),children:f.jsx("ul",{className:o.list(),children:t.map((a,u)=>f.jsx("li",{className:o.page({current:e===a-1}),onClick:()=>n(a-1),children:a},`page-${a}-${u}`))})})},AQ=En({slot:{base:["cursor-pointer","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","p-2.5","hover:shadow-md","transition-all","group"],input:["flex","flex-row","items-center","justify-between","gap-2"],popup:["z-50","cursor-pointer","overflow-y-auto","rounded-sm","border","border-slate-300","bg-white","shadow-lg","focus:outline-hidden"],item:["focus:outline-hidden","py-2","px-2.5","flex","items-center","justify-between"]},variant:{disabled:{true:["cursor-not-allowed","hover:shadow-none","focus:border-slate-300","opacity-50"]},active:{true:[]},selected:{true:[]}},match:[{if:{selected:!0},then:{item:["bg-slate-100"]}},{if:{active:!0},then:{item:["bg-slate-200"]}}],defaults:{disabled:!1,selected:!1,active:!1}}),eN=({items:t,icon:e,defaultValue:n,render:r,textSelect:i,disabled:s=!1,onItem:o,onSelect:a,onChange:u,value:d,variant:p,tva:h=AQ,css:g})=>{const[x,_]=H.useState(!1),[S,k]=H.useState(null),[I,E]=H.useState(t.findIndex(ne=>ne.id===n));H.useEffect(()=>{E(t.findIndex(ne=>ne.id===d))},[d]);const{refs:C,floatingStyles:j,context:q}=Q1({placement:"bottom-start",open:x,onOpenChange:_,whileElementsMounted:f2,middleware:[h2(5),m2({padding:10}),q7({apply({rects:ne,elements:oe,availableHeight:te}){Object.assign(oe.floating.style,{maxHeight:`${te}px`,minWidth:`${ne.reference.width}px`})},padding:10})]}),F=H.useRef([]),$=H.useRef(!1),P=G1(q,{event:"mousedown"}),O=K1(q),B=dQ(q,{listRef:F,activeIndex:S,selectedIndex:I,onNavigate:k,loop:!0}),{getReferenceProps:D,getFloatingProps:W,getItemProps:V}=J1([O,B,P]),{isMounted:z,styles:X}=Z1(q),Z=ne=>{E(ne),_(!1);const oe=t[ne];oe&&o?.(oe),a?.(oe),u?.(oe?.id)},le=I===null?void 0:t[I],ie=h({disabled:s,...p,css:g}).slots;return f.jsxs(f.Fragment,{children:[f.jsx("div",{tabIndex:s?-1:0,ref:s?void 0:C.setReference,"aria-labelledby":"select-label","aria-autocomplete":"none",...s?{}:D(),className:ie.base(),children:f.jsxs("div",{className:ie.input(),children:[e?f.jsx(tn,{icon:e,variant:{size:"xl"},css:{base:["text-slate-400","group-hover:text-slate-600"]}}):null,le?f.jsx(r,{entity:le}):i||Vo.rich("Select item"),f.jsx(tn,{icon:"icon-[gg--select]",variant:{size:"xl"},css:{base:[!x&&"text-slate-400",x&&"text-slate-600","group-hover:text-slate-600"]}})]})}),z&&f.jsx(H1,{children:f.jsx(N2,{context:q,modal:!1,children:f.jsx("div",{ref:C.setFloating,style:{...j,...X},className:ie.popup(),...W(),children:t.map((ne,oe)=>f.jsxs("div",{ref:te=>{F.current[oe]=te},role:"option",tabIndex:oe===S?0:-1,"aria-selected":oe===I&&oe===S,className:ie.item({selected:oe===I,active:oe===S}),...V({onClick(){Z(oe)},onKeyDown(te){te.key==="Enter"&&(te.preventDefault(),Z(oe)),te.key===" "&&!$.current&&(te.preventDefault(),Z(oe))}}),children:[f.jsx(r,{entity:ne}),oe===I&&f.jsx(tn,{icon:"icon-[basil--check-outline]",variant:{size:"xl"}})]},ne.id))})})})]})},qQ=({sizes:t=[5,15,30,50,100],size:e,onSize:n,...r})=>f.jsx(eN,{items:t.map(i=>({id:`${i}`,size:i})),defaultValue:`${e}`,value:`${e}`,onItem:({size:i})=>n(i),render:({entity:{size:i}})=>i,css:{base:["px-8","py-1"],item:["px-8","py-1"]},...r}),xO=({cursor:t,count:e,textTotal:n,onPage:r,onSize:i,variant:s,tva:o=RQ,css:a})=>{const u=H.useMemo(()=>c9({page:t.page,total:Math.ceil(e.filter/t.size),siblings:1,boundaries:1}),[t.page,e.filter,t.size]),d=o({...s,css:a}).slots;return f.jsxs("div",{className:d.base(),children:[u.total>1?f.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[["both","start"].includes(u.type)&&f.jsxs(f.Fragment,{children:[f.jsx(Q0,{page:t.page,pages:u.start,onPage:r}),f.jsx(tn,{icon:vO})]}),f.jsx(Q0,{page:t.page,pages:u.pages,onPage:r}),["both","end"].includes(u.type)&&f.jsxs(f.Fragment,{children:[f.jsx(tn,{icon:vO}),f.jsx(Q0,{page:t.page,pages:u.end,onPage:r})]})]}):null,f.jsxs("div",{className:d.sums(),children:[f.jsx("div",{children:n}),f.jsx("div",{className:"font-bold",children:e.filter}),e.filter!==e.where&&f.jsxs(f.Fragment,{children:[f.jsx("div",{children:"/"}),f.jsx("div",{className:"font-semibold",children:e.where})]})]}),f.jsx(qQ,{size:t.size,onSize:i})]})},wO="function",qd="64e10b34-2bf7-4616-9668-f99de5aa046e",PQ="get",FQ="has",DQ="set",{isArray:ub}=Array;let{SharedArrayBuffer:gv,window:LQ}=globalThis,{notify:O2,wait:A2,waitAsync:yv}=Atomics,q2=null;yv||(yv=t=>({value:new Promise(e=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=e,n.postMessage(t)})}));try{new gv(4)}catch{gv=ArrayBuffer;const e=new WeakMap;if(LQ){const n=new Map,{prototype:{postMessage:r}}=Worker,i=s=>{const o=s.data?.[qd];if(!ub(o)){s.stopImmediatePropagation();const{id:a,sb:u}=o;n.get(a)(u)}};q2=function(s,...o){const a=s?.[qd];if(ub(a)){const[u,d]=a;e.set(d,u),this.addEventListener("message",i)}return r.call(this,s,...o)},yv=s=>({value:new Promise(o=>{n.set(e.get(s),o)}).then(o=>{n.delete(e.get(s)),e.delete(s);for(let a=0;a<o.length;a++)s[a]=o[a];return"ok"})})}else{const n=(r,i)=>({[qd]:{id:r,sb:i}});O2=r=>{postMessage(n(e.get(r),r))},addEventListener("message",r=>{const i=r.data?.[qd];if(ub(i)){const[s,o]=i;e.set(o,s)}})}}const{Int32Array:vI,Map:_O,Uint16Array:xI}=globalThis,{BYTES_PER_ELEMENT:SO}=vI,{BYTES_PER_ELEMENT:MQ}=xI,$Q=(t,e,n)=>{for(;A2(t,0,0,e)==="timed-out";)n()},wI=new WeakSet,J0=new WeakMap,BQ={value:{then:t=>t()}};let zQ=0;const tN=(t,{parse:e=JSON.parse,stringify:n=JSON.stringify,transform:r,interrupt:i}=JSON)=>{if(!J0.has(t)){const s=q2||t.postMessage,o=(g,...x)=>s.call(t,{[qd]:x},{transfer:g}),a=typeof i===wO?i:i?.handler,u=i?.delay||42,d=new TextDecoder("utf-16"),p=(g,x)=>g?yv(x,0):(a?$Q(x,u,a):A2(x,0),BQ);let h=!1;J0.set(t,new Proxy(new _O,{[FQ]:(g,x)=>typeof x=="string"&&!x.startsWith("_"),[PQ]:(g,x)=>x==="then"?null:(..._)=>{const S=zQ++;let k=new vI(new gv(SO*2)),I=[];wI.has(_.at(-1)||I)&&wI.delete(I=_.pop()),o(I,S,k,x,r?_.map(r):_);const E=t!==globalThis;let C=0;return h&&E&&(C=setTimeout(console.warn,1e3,` - Possible deadlock if proxy.${x}(...args) is awaited`)),p(E,k).value.then(()=>{clearTimeout(C);const j=k[1];if(!j)return;const q=MQ*j;return k=new vI(new gv(q+q%SO)),o([],S,k),p(E,k).value.then(()=>e(d.decode(new xI(k.buffer).slice(0,j))))})},[DQ](g,x,_){const S=typeof _;if(S!==wO)throw new Error(`Unable to assign ${x} as ${S}`);if(!g.size){const k=new _O;t.addEventListener("message",async I=>{const E=I.data?.[qd];if(ub(E)){I.stopImmediatePropagation();const[C,j,...q]=E;let F;if(q.length){const[$,P]=q;if(g.has($)){h=!0;try{const O=await g.get($)(...P);if(O!==void 0){const B=n(r?r(O):O);k.set(C,B),j[1]=B.length}}catch(O){F=O}finally{h=!1}}else F=new Error(`Unsupported action: ${$}`);j[0]=1}else{const $=k.get(C);k.delete(C);for(let P=new xI(j.buffer),O=0;O<$.length;O++)P[O]=$.charCodeAt(O)}if(O2(j,0),F)throw F}})}return!!g.set(x,_)}}))}return J0.get(t)};tN.transfer=(...t)=>(wI.add(t),t);var nN=(()=>{var t=import.meta.url;return function(e={}){var n,r=e,i,s,o=new Promise((y,b)=>{i=y,s=b}),a=typeof window=="object",u=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;const d=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,d.debugModule("globalThis.location =",globalThis.location);var p=Object.assign({},r),h="./this.program",g="";function x(y){return r.locateFile?r.locateFile(y,g):g+y}var _,S;(a||u)&&(u?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),t&&(g=t),g.startsWith("blob:")?g="":g=g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(S=y=>{var b=new XMLHttpRequest;return b.open("GET",y,!1),b.responseType="arraybuffer",b.send(null),new Uint8Array(b.response)}),_=y=>fetch(y,{credentials:"same-origin"}).then(b=>b.ok?b.arrayBuffer():Promise.reject(new Error(b.status+" : "+b.url))));var k=r.print||console.log.bind(console),I=r.printErr||console.error.bind(console);Object.assign(r,p),p=null,r.arguments&&r.arguments,r.thisProgram&&(h=r.thisProgram);var E=r.wasmBinary,C,j=!1,q,F,$,P,O,B;function D(){var y=C.buffer;r.HEAP8=q=new Int8Array(y),r.HEAP16=$=new Int16Array(y),r.HEAPU8=F=new Uint8Array(y),r.HEAPU16=new Uint16Array(y),r.HEAP32=P=new Int32Array(y),r.HEAPU32=O=new Uint32Array(y),r.HEAPF32=new Float32Array(y),r.HEAPF64=new Float64Array(y),r.HEAP64=B=new BigInt64Array(y),r.HEAPU64=new BigUint64Array(y)}if(r.wasmMemory)C=r.wasmMemory;else{var W=r.INITIAL_MEMORY||0x1000000;C=new WebAssembly.Memory({initial:W/65536,maximum:32768})}D();var V=[],z=[],X=[];function Z(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)ne(r.preRun.shift());xe(V)}function le(){!r.noFSInit&&!G.initialized&&G.init(),G.ignorePermissions=!1,xe(z)}function ie(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)te(r.postRun.shift());xe(X)}function ne(y){V.unshift(y)}function oe(y){z.unshift(y)}function te(y){X.unshift(y)}var ce=0,de=null;function ye(y){return y}function we(y){ce++,r.monitorRunDependencies?.(ce)}function Ie(y){if(ce--,r.monitorRunDependencies?.(ce),ce==0&&de){var b=de;de=null,b()}}function ze(y){r.onAbort?.(y),y="Aborted("+y+")",I(y),j=!0,y+=". Build with -sASSERTIONS for more info.";var b=new WebAssembly.RuntimeError(y);throw s(b),b}var Re="data:application/octet-stream;base64,",De=y=>y.startsWith(Re);function Je(){if(r.locateFile){var y="sqlite3.wasm";return De(y)?y:x(y)}return new URL("/assets/sqlite3-CgX3seBP.wasm",import.meta.url).href}var Xe;function Ue(y){if(y==Xe&&E)return new Uint8Array(E);if(S)return S(y);throw"both async and sync fetching of the wasm failed"}function ut(y){return E?Promise.resolve().then(()=>Ue(y)):_(y).then(b=>new Uint8Array(b),()=>Ue(y))}function Et(y,b,N){return ut(y).then(T=>WebAssembly.instantiate(T,b)).then(N,T=>{I(`failed to asynchronously prepare wasm: ${T}`),ze(T)})}function At(y,b,N,T){return!y&&typeof WebAssembly.instantiateStreaming=="function"&&!De(b)&&typeof fetch=="function"?fetch(b,{credentials:"same-origin"}).then(A=>{var U=WebAssembly.instantiateStreaming(A,N);return U.then(T,function(fe){return I(`wasm streaming compile failed: ${fe}`),I("falling back to ArrayBuffer instantiation"),Et(b,N,T)})}):Et(b,N,T)}function Gt(){return{env:rp,wasi_snapshot_preview1:rp}}function ln(){var y=Gt();function b(T,A){return he=T.exports,oe(he.__wasm_call_ctors),Ie(),he}we();function N(T){b(T.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(y,b)}catch(T){I(`Module.instantiateWasm callback failed with error: ${T}`),s(T)}return Xe||(Xe=Je()),At(E,Xe,y,N).catch(s),{}}var xe=y=>{for(;y.length>0;)y.shift()(r)};r.noExitRuntime;var be={isAbs:y=>y.charAt(0)==="/",splitPath:y=>{var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return b.exec(y).slice(1)},normalizeArray:(y,b)=>{for(var N=0,T=y.length-1;T>=0;T--){var A=y[T];A==="."?y.splice(T,1):A===".."?(y.splice(T,1),N++):N&&(y.splice(T,1),N--)}if(b)for(;N;N--)y.unshift("..");return y},normalize:y=>{var b=be.isAbs(y),N=y.substr(-1)==="/";return y=be.normalizeArray(y.split("/").filter(T=>!!T),!b).join("/"),!y&&!b&&(y="."),y&&N&&(y+="/"),(b?"/":"")+y},dirname:y=>{var b=be.splitPath(y),N=b[0],T=b[1];return!N&&!T?".":(T&&(T=T.substr(0,T.length-1)),N+T)},basename:y=>{if(y==="/")return"/";y=be.normalize(y),y=y.replace(/\/$/,"");var b=y.lastIndexOf("/");return b===-1?y:y.substr(b+1)},join:(...y)=>be.normalize(y.join("/")),join2:(y,b)=>be.normalize(y+"/"+b)},Ne=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return y=>crypto.getRandomValues(y);ze("initRandomDevice")},qe=y=>(qe=Ne())(y),Ve={resolve:(...y)=>{for(var b="",N=!1,T=y.length-1;T>=-1&&!N;T--){var A=T>=0?y[T]:G.cwd();if(typeof A!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!A)return"";b=A+"/"+b,N=be.isAbs(A)}return b=be.normalizeArray(b.split("/").filter(U=>!!U),!N).join("/"),(N?"/":"")+b||"."},relative:(y,b)=>{y=Ve.resolve(y).substr(1),b=Ve.resolve(b).substr(1);function N(tt){for(var at=0;at<tt.length&&tt[at]==="";at++);for(var mt=tt.length-1;mt>=0&&tt[mt]==="";mt--);return at>mt?[]:tt.slice(at,mt-at+1)}for(var T=N(y.split("/")),A=N(b.split("/")),U=Math.min(T.length,A.length),fe=U,me=0;me<U;me++)if(T[me]!==A[me]){fe=me;break}for(var Ge=[],me=fe;me<T.length;me++)Ge.push("..");return Ge=Ge.concat(A.slice(fe)),Ge.join("/")}},rt=typeof TextDecoder<"u"?new TextDecoder:void 0,Me=(y,b,N)=>{for(var T=b+N,A=b;y[A]&&!(A>=T);)++A;if(A-b>16&&y.buffer&&rt)return rt.decode(y.subarray(b,A));for(var U="";b<A;){var fe=y[b++];if(!(fe&128)){U+=String.fromCharCode(fe);continue}var me=y[b++]&63;if((fe&224)==192){U+=String.fromCharCode((fe&31)<<6|me);continue}var Ge=y[b++]&63;if((fe&240)==224?fe=(fe&15)<<12|me<<6|Ge:fe=(fe&7)<<18|me<<12|Ge<<6|y[b++]&63,fe<65536)U+=String.fromCharCode(fe);else{var tt=fe-65536;U+=String.fromCharCode(55296|tt>>10,56320|tt&1023)}}return U},ct=[],Yt=y=>{for(var b=0,N=0;N<y.length;++N){var T=y.charCodeAt(N);T<=127?b++:T<=2047?b+=2:T>=55296&&T<=57343?(b+=4,++N):b+=3}return b},Xt=(y,b,N,T)=>{if(!(T>0))return 0;for(var A=N,U=N+T-1,fe=0;fe<y.length;++fe){var me=y.charCodeAt(fe);if(me>=55296&&me<=57343){var Ge=y.charCodeAt(++fe);me=65536+((me&1023)<<10)|Ge&1023}if(me<=127){if(N>=U)break;b[N++]=me}else if(me<=2047){if(N+1>=U)break;b[N++]=192|me>>6,b[N++]=128|me&63}else if(me<=65535){if(N+2>=U)break;b[N++]=224|me>>12,b[N++]=128|me>>6&63,b[N++]=128|me&63}else{if(N+3>=U)break;b[N++]=240|me>>18,b[N++]=128|me>>12&63,b[N++]=128|me>>6&63,b[N++]=128|me&63}}return b[N]=0,N-A};function _n(y,b,N){var T=Yt(y)+1,A=new Array(T),U=Xt(y,A,0,A.length);return A.length=U,A}var dr=()=>{if(!ct.length){var y=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(y=window.prompt("Input: "),y!==null&&(y+=`
`)),!y)return null;ct=_n(y)}return ct.shift()},Bn={ttys:[],init(){},shutdown(){},register(y,b){Bn.ttys[y]={input:[],output:[],ops:b},G.registerDevice(y,Bn.stream_ops)},stream_ops:{open(y){var b=Bn.ttys[y.node.rdev];if(!b)throw new G.ErrnoError(43);y.tty=b,y.seekable=!1},close(y){y.tty.ops.fsync(y.tty)},fsync(y){y.tty.ops.fsync(y.tty)},read(y,b,N,T,A){if(!y.tty||!y.tty.ops.get_char)throw new G.ErrnoError(60);for(var U=0,fe=0;fe<T;fe++){var me;try{me=y.tty.ops.get_char(y.tty)}catch{throw new G.ErrnoError(29)}if(me===void 0&&U===0)throw new G.ErrnoError(6);if(me==null)break;U++,b[N+fe]=me}return U&&(y.node.timestamp=Date.now()),U},write(y,b,N,T,A){if(!y.tty||!y.tty.ops.put_char)throw new G.ErrnoError(60);try{for(var U=0;U<T;U++)y.tty.ops.put_char(y.tty,b[N+U])}catch{throw new G.ErrnoError(29)}return T&&(y.node.timestamp=Date.now()),U}},default_tty_ops:{get_char(y){return dr()},put_char(y,b){b===null||b===10?(k(Me(y.output,0)),y.output=[]):b!=0&&y.output.push(b)},fsync(y){y.output&&y.output.length>0&&(k(Me(y.output,0)),y.output=[])},ioctl_tcgets(y){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(y,b,N){return 0},ioctl_tiocgwinsz(y){return[24,80]}},default_tty1_ops:{put_char(y,b){b===null||b===10?(I(Me(y.output,0)),y.output=[]):b!=0&&y.output.push(b)},fsync(y){y.output&&y.output.length>0&&(I(Me(y.output,0)),y.output=[])}}},Yr=(y,b)=>(F.fill(0,y,y+b),y),Vi=(y,b)=>Math.ceil(y/b)*b,Cr=y=>{y=Vi(y,65536);var b=ip(65536,y);return b?Yr(b,y):0},en={ops_table:null,mount(y){return en.createNode(null,"/",16895,0)},createNode(y,b,N,T){if(G.isBlkdev(N)||G.isFIFO(N))throw new G.ErrnoError(63);en.ops_table||={dir:{node:{getattr:en.node_ops.getattr,setattr:en.node_ops.setattr,lookup:en.node_ops.lookup,mknod:en.node_ops.mknod,rename:en.node_ops.rename,unlink:en.node_ops.unlink,rmdir:en.node_ops.rmdir,readdir:en.node_ops.readdir,symlink:en.node_ops.symlink},stream:{llseek:en.stream_ops.llseek}},file:{node:{getattr:en.node_ops.getattr,setattr:en.node_ops.setattr},stream:{llseek:en.stream_ops.llseek,read:en.stream_ops.read,write:en.stream_ops.write,allocate:en.stream_ops.allocate,mmap:en.stream_ops.mmap,msync:en.stream_ops.msync}},link:{node:{getattr:en.node_ops.getattr,setattr:en.node_ops.setattr,readlink:en.node_ops.readlink},stream:{}},chrdev:{node:{getattr:en.node_ops.getattr,setattr:en.node_ops.setattr},stream:G.chrdev_stream_ops}};var A=G.createNode(y,b,N,T);return G.isDir(A.mode)?(A.node_ops=en.ops_table.dir.node,A.stream_ops=en.ops_table.dir.stream,A.contents={}):G.isFile(A.mode)?(A.node_ops=en.ops_table.file.node,A.stream_ops=en.ops_table.file.stream,A.usedBytes=0,A.contents=null):G.isLink(A.mode)?(A.node_ops=en.ops_table.link.node,A.stream_ops=en.ops_table.link.stream):G.isChrdev(A.mode)&&(A.node_ops=en.ops_table.chrdev.node,A.stream_ops=en.ops_table.chrdev.stream),A.timestamp=Date.now(),y&&(y.contents[b]=A,y.timestamp=A.timestamp),A},getFileDataAsTypedArray(y){return y.contents?y.contents.subarray?y.contents.subarray(0,y.usedBytes):new Uint8Array(y.contents):new Uint8Array(0)},expandFileStorage(y,b){var N=y.contents?y.contents.length:0;if(!(N>=b)){var T=1024*1024;b=Math.max(b,N*(N<T?2:1.125)>>>0),N!=0&&(b=Math.max(b,256));var A=y.contents;y.contents=new Uint8Array(b),y.usedBytes>0&&y.contents.set(A.subarray(0,y.usedBytes),0)}},resizeFileStorage(y,b){if(y.usedBytes!=b)if(b==0)y.contents=null,y.usedBytes=0;else{var N=y.contents;y.contents=new Uint8Array(b),N&&y.contents.set(N.subarray(0,Math.min(b,y.usedBytes))),y.usedBytes=b}},node_ops:{getattr(y){var b={};return b.dev=G.isChrdev(y.mode)?y.id:1,b.ino=y.id,b.mode=y.mode,b.nlink=1,b.uid=0,b.gid=0,b.rdev=y.rdev,G.isDir(y.mode)?b.size=4096:G.isFile(y.mode)?b.size=y.usedBytes:G.isLink(y.mode)?b.size=y.link.length:b.size=0,b.atime=new Date(y.timestamp),b.mtime=new Date(y.timestamp),b.ctime=new Date(y.timestamp),b.blksize=4096,b.blocks=Math.ceil(b.size/b.blksize),b},setattr(y,b){b.mode!==void 0&&(y.mode=b.mode),b.timestamp!==void 0&&(y.timestamp=b.timestamp),b.size!==void 0&&en.resizeFileStorage(y,b.size)},lookup(y,b){throw G.genericErrors[44]},mknod(y,b,N,T){return en.createNode(y,b,N,T)},rename(y,b,N){if(G.isDir(y.mode)){var T;try{T=G.lookupNode(b,N)}catch{}if(T)for(var A in T.contents)throw new G.ErrnoError(55)}delete y.parent.contents[y.name],y.parent.timestamp=Date.now(),y.name=N,b.contents[N]=y,b.timestamp=y.parent.timestamp},unlink(y,b){delete y.contents[b],y.timestamp=Date.now()},rmdir(y,b){var N=G.lookupNode(y,b);for(var T in N.contents)throw new G.ErrnoError(55);delete y.contents[b],y.timestamp=Date.now()},readdir(y){var b=[".",".."];for(var N of Object.keys(y.contents))b.push(N);return b},symlink(y,b,N){var T=en.createNode(y,b,41471,0);return T.link=N,T},readlink(y){if(!G.isLink(y.mode))throw new G.ErrnoError(28);return y.link}},stream_ops:{read(y,b,N,T,A){var U=y.node.contents;if(A>=y.node.usedBytes)return 0;var fe=Math.min(y.node.usedBytes-A,T);if(fe>8&&U.subarray)b.set(U.subarray(A,A+fe),N);else for(var me=0;me<fe;me++)b[N+me]=U[A+me];return fe},write(y,b,N,T,A,U){if(b.buffer===q.buffer&&(U=!1),!T)return 0;var fe=y.node;if(fe.timestamp=Date.now(),b.subarray&&(!fe.contents||fe.contents.subarray)){if(U)return fe.contents=b.subarray(N,N+T),fe.usedBytes=T,T;if(fe.usedBytes===0&&A===0)return fe.contents=b.slice(N,N+T),fe.usedBytes=T,T;if(A+T<=fe.usedBytes)return fe.contents.set(b.subarray(N,N+T),A),T}if(en.expandFileStorage(fe,A+T),fe.contents.subarray&&b.subarray)fe.contents.set(b.subarray(N,N+T),A);else for(var me=0;me<T;me++)fe.contents[A+me]=b[N+me];return fe.usedBytes=Math.max(fe.usedBytes,A+T),T},llseek(y,b,N){var T=b;if(N===1?T+=y.position:N===2&&G.isFile(y.node.mode)&&(T+=y.node.usedBytes),T<0)throw new G.ErrnoError(28);return T},allocate(y,b,N){en.expandFileStorage(y.node,b+N),y.node.usedBytes=Math.max(y.node.usedBytes,b+N)},mmap(y,b,N,T,A){if(!G.isFile(y.node.mode))throw new G.ErrnoError(43);var U,fe,me=y.node.contents;if(!(A&2)&&me&&me.buffer===q.buffer)fe=!1,U=me.byteOffset;else{if(fe=!0,U=Cr(b),!U)throw new G.ErrnoError(48);me&&((N>0||N+b<me.length)&&(me.subarray?me=me.subarray(N,N+b):me=Array.prototype.slice.call(me,N,N+b)),q.set(me,U))}return{ptr:U,allocated:fe}},msync(y,b,N,T,A){return en.stream_ops.write(y,b,0,T,N,!1),0}}},os=(y,b,N,T)=>{var A=`al ${y}`;_(y).then(U=>{b(new Uint8Array(U)),A&&Ie()},U=>{if(N)N();else throw`Loading data file "${y}" failed.`}),A&&we()},as=(y,b,N,T,A,U)=>{G.createDataFile(y,b,N,T,A,U)},ls=r.preloadPlugins||[],_o=(y,b,N,T)=>{typeof Browser<"u"&&Browser.init();var A=!1;return ls.forEach(U=>{A||U.canHandle(b)&&(U.handle(y,b,N,T),A=!0)}),A},Ea=(y,b,N,T,A,U,fe,me,Ge,tt)=>{var at=b?Ve.resolve(be.join2(y,b)):y;function mt(Be){function Oe(et){tt?.(),me||as(y,b,et,T,A,Ge),U?.(),Ie()}_o(Be,at,Oe,()=>{fe?.(),Ie()})||Oe(Be)}we(),typeof N=="string"?os(N,mt,fe):mt(N)},Su=y=>{var b={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},N=b[y];if(typeof N>"u")throw new Error(`Unknown file open mode: ${y}`);return N},Zs=(y,b)=>{var N=0;return y&&(N|=365),b&&(N|=146),N},G={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(y){this.name="ErrnoError",this.errno=y}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(y){this.node=y}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(y){this.shared.flags=y}get position(){return this.shared.position}set position(y){this.shared.position=y}},FSNode:class{constructor(y,b,N,T){y||(y=this),this.parent=y,this.mount=y.mount,this.mounted=null,this.id=G.nextInode++,this.name=b,this.mode=N,this.node_ops={},this.stream_ops={},this.rdev=T,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(y){y?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(y){y?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return G.isDir(this.mode)}get isDevice(){return G.isChrdev(this.mode)}},lookupPath(y,b={}){if(y=Ve.resolve(y),!y)return{path:"",node:null};var N={follow_mount:!0,recurse_count:0};if(b=Object.assign(N,b),b.recurse_count>8)throw new G.ErrnoError(32);for(var T=y.split("/").filter(mt=>!!mt),A=G.root,U="/",fe=0;fe<T.length;fe++){var me=fe===T.length-1;if(me&&b.parent)break;if(A=G.lookupNode(A,T[fe]),U=be.join2(U,T[fe]),G.isMountpoint(A)&&(!me||me&&b.follow_mount)&&(A=A.mounted.root),!me||b.follow)for(var Ge=0;G.isLink(A.mode);){var tt=G.readlink(U);U=Ve.resolve(be.dirname(U),tt);var at=G.lookupPath(U,{recurse_count:b.recurse_count+1});if(A=at.node,Ge++>40)throw new G.ErrnoError(32)}}return{path:U,node:A}},getPath(y){for(var b;;){if(G.isRoot(y)){var N=y.mount.mountpoint;return b?N[N.length-1]!=="/"?`${N}/${b}`:N+b:N}b=b?`${y.name}/${b}`:y.name,y=y.parent}},hashName(y,b){for(var N=0,T=0;T<b.length;T++)N=(N<<5)-N+b.charCodeAt(T)|0;return(y+N>>>0)%G.nameTable.length},hashAddNode(y){var b=G.hashName(y.parent.id,y.name);y.name_next=G.nameTable[b],G.nameTable[b]=y},hashRemoveNode(y){var b=G.hashName(y.parent.id,y.name);if(G.nameTable[b]===y)G.nameTable[b]=y.name_next;else for(var N=G.nameTable[b];N;){if(N.name_next===y){N.name_next=y.name_next;break}N=N.name_next}},lookupNode(y,b){var N=G.mayLookup(y);if(N)throw new G.ErrnoError(N);for(var T=G.hashName(y.id,b),A=G.nameTable[T];A;A=A.name_next){var U=A.name;if(A.parent.id===y.id&&U===b)return A}return G.lookup(y,b)},createNode(y,b,N,T){var A=new G.FSNode(y,b,N,T);return G.hashAddNode(A),A},destroyNode(y){G.hashRemoveNode(y)},isRoot(y){return y===y.parent},isMountpoint(y){return!!y.mounted},isFile(y){return(y&61440)===32768},isDir(y){return(y&61440)===16384},isLink(y){return(y&61440)===40960},isChrdev(y){return(y&61440)===8192},isBlkdev(y){return(y&61440)===24576},isFIFO(y){return(y&61440)===4096},isSocket(y){return(y&49152)===49152},flagsToPermissionString(y){var b=["r","w","rw"][y&3];return y&512&&(b+="w"),b},nodePermissions(y,b){return G.ignorePermissions?0:b.includes("r")&&!(y.mode&292)||b.includes("w")&&!(y.mode&146)||b.includes("x")&&!(y.mode&73)?2:0},mayLookup(y){if(!G.isDir(y.mode))return 54;var b=G.nodePermissions(y,"x");return b||(y.node_ops.lookup?0:2)},mayCreate(y,b){try{var N=G.lookupNode(y,b);return 20}catch{}return G.nodePermissions(y,"wx")},mayDelete(y,b,N){var T;try{T=G.lookupNode(y,b)}catch(U){return U.errno}var A=G.nodePermissions(y,"wx");if(A)return A;if(N){if(!G.isDir(T.mode))return 54;if(G.isRoot(T)||G.getPath(T)===G.cwd())return 10}else if(G.isDir(T.mode))return 31;return 0},mayOpen(y,b){return y?G.isLink(y.mode)?32:G.isDir(y.mode)&&(G.flagsToPermissionString(b)!=="r"||b&512)?31:G.nodePermissions(y,G.flagsToPermissionString(b)):44},MAX_OPEN_FDS:4096,nextfd(){for(var y=0;y<=G.MAX_OPEN_FDS;y++)if(!G.streams[y])return y;throw new G.ErrnoError(33)},getStreamChecked(y){var b=G.getStream(y);if(!b)throw new G.ErrnoError(8);return b},getStream:y=>G.streams[y],createStream(y,b=-1){return y=Object.assign(new G.FSStream,y),b==-1&&(b=G.nextfd()),y.fd=b,G.streams[b]=y,y},closeStream(y){G.streams[y]=null},dupStream(y,b=-1){var N=G.createStream(y,b);return N.stream_ops?.dup?.(N),N},chrdev_stream_ops:{open(y){var b=G.getDevice(y.node.rdev);y.stream_ops=b.stream_ops,y.stream_ops.open?.(y)},llseek(){throw new G.ErrnoError(70)}},major:y=>y>>8,minor:y=>y&255,makedev:(y,b)=>y<<8|b,registerDevice(y,b){G.devices[y]={stream_ops:b}},getDevice:y=>G.devices[y],getMounts(y){for(var b=[],N=[y];N.length;){var T=N.pop();b.push(T),N.push(...T.mounts)}return b},syncfs(y,b){typeof y=="function"&&(b=y,y=!1),G.syncFSRequests++,G.syncFSRequests>1&&I(`warning: ${G.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var N=G.getMounts(G.root.mount),T=0;function A(fe){return G.syncFSRequests--,b(fe)}function U(fe){if(fe)return U.errored?void 0:(U.errored=!0,A(fe));++T>=N.length&&A(null)}N.forEach(fe=>{if(!fe.type.syncfs)return U(null);fe.type.syncfs(fe,y,U)})},mount(y,b,N){var T=N==="/",A=!N,U;if(T&&G.root)throw new G.ErrnoError(10);if(!T&&!A){var fe=G.lookupPath(N,{follow_mount:!1});if(N=fe.path,U=fe.node,G.isMountpoint(U))throw new G.ErrnoError(10);if(!G.isDir(U.mode))throw new G.ErrnoError(54)}var me={type:y,opts:b,mountpoint:N,mounts:[]},Ge=y.mount(me);return Ge.mount=me,me.root=Ge,T?G.root=Ge:U&&(U.mounted=me,U.mount&&U.mount.mounts.push(me)),Ge},unmount(y){var b=G.lookupPath(y,{follow_mount:!1});if(!G.isMountpoint(b.node))throw new G.ErrnoError(28);var N=b.node,T=N.mounted,A=G.getMounts(T);Object.keys(G.nameTable).forEach(fe=>{for(var me=G.nameTable[fe];me;){var Ge=me.name_next;A.includes(me.mount)&&G.destroyNode(me),me=Ge}}),N.mounted=null;var U=N.mount.mounts.indexOf(T);N.mount.mounts.splice(U,1)},lookup(y,b){return y.node_ops.lookup(y,b)},mknod(y,b,N){var T=G.lookupPath(y,{parent:!0}),A=T.node,U=be.basename(y);if(!U||U==="."||U==="..")throw new G.ErrnoError(28);var fe=G.mayCreate(A,U);if(fe)throw new G.ErrnoError(fe);if(!A.node_ops.mknod)throw new G.ErrnoError(63);return A.node_ops.mknod(A,U,b,N)},create(y,b){return b=b!==void 0?b:438,b&=4095,b|=32768,G.mknod(y,b,0)},mkdir(y,b){return b=b!==void 0?b:511,b&=1023,b|=16384,G.mknod(y,b,0)},mkdirTree(y,b){for(var N=y.split("/"),T="",A=0;A<N.length;++A)if(N[A]){T+="/"+N[A];try{G.mkdir(T,b)}catch(U){if(U.errno!=20)throw U}}},mkdev(y,b,N){return typeof N>"u"&&(N=b,b=438),b|=8192,G.mknod(y,b,N)},symlink(y,b){if(!Ve.resolve(y))throw new G.ErrnoError(44);var N=G.lookupPath(b,{parent:!0}),T=N.node;if(!T)throw new G.ErrnoError(44);var A=be.basename(b),U=G.mayCreate(T,A);if(U)throw new G.ErrnoError(U);if(!T.node_ops.symlink)throw new G.ErrnoError(63);return T.node_ops.symlink(T,A,y)},rename(y,b){var N=be.dirname(y),T=be.dirname(b),A=be.basename(y),U=be.basename(b),fe,me,Ge;if(fe=G.lookupPath(y,{parent:!0}),me=fe.node,fe=G.lookupPath(b,{parent:!0}),Ge=fe.node,!me||!Ge)throw new G.ErrnoError(44);if(me.mount!==Ge.mount)throw new G.ErrnoError(75);var tt=G.lookupNode(me,A),at=Ve.relative(y,T);if(at.charAt(0)!==".")throw new G.ErrnoError(28);if(at=Ve.relative(b,N),at.charAt(0)!==".")throw new G.ErrnoError(55);var mt;try{mt=G.lookupNode(Ge,U)}catch{}if(tt!==mt){var Be=G.isDir(tt.mode),Oe=G.mayDelete(me,A,Be);if(Oe)throw new G.ErrnoError(Oe);if(Oe=mt?G.mayDelete(Ge,U,Be):G.mayCreate(Ge,U),Oe)throw new G.ErrnoError(Oe);if(!me.node_ops.rename)throw new G.ErrnoError(63);if(G.isMountpoint(tt)||mt&&G.isMountpoint(mt))throw new G.ErrnoError(10);if(Ge!==me&&(Oe=G.nodePermissions(me,"w"),Oe))throw new G.ErrnoError(Oe);G.hashRemoveNode(tt);try{me.node_ops.rename(tt,Ge,U),tt.parent=Ge}catch(et){throw et}finally{G.hashAddNode(tt)}}},rmdir(y){var b=G.lookupPath(y,{parent:!0}),N=b.node,T=be.basename(y),A=G.lookupNode(N,T),U=G.mayDelete(N,T,!0);if(U)throw new G.ErrnoError(U);if(!N.node_ops.rmdir)throw new G.ErrnoError(63);if(G.isMountpoint(A))throw new G.ErrnoError(10);N.node_ops.rmdir(N,T),G.destroyNode(A)},readdir(y){var b=G.lookupPath(y,{follow:!0}),N=b.node;if(!N.node_ops.readdir)throw new G.ErrnoError(54);return N.node_ops.readdir(N)},unlink(y){var b=G.lookupPath(y,{parent:!0}),N=b.node;if(!N)throw new G.ErrnoError(44);var T=be.basename(y),A=G.lookupNode(N,T),U=G.mayDelete(N,T,!1);if(U)throw new G.ErrnoError(U);if(!N.node_ops.unlink)throw new G.ErrnoError(63);if(G.isMountpoint(A))throw new G.ErrnoError(10);N.node_ops.unlink(N,T),G.destroyNode(A)},readlink(y){var b=G.lookupPath(y),N=b.node;if(!N)throw new G.ErrnoError(44);if(!N.node_ops.readlink)throw new G.ErrnoError(28);return Ve.resolve(G.getPath(N.parent),N.node_ops.readlink(N))},stat(y,b){var N=G.lookupPath(y,{follow:!b}),T=N.node;if(!T)throw new G.ErrnoError(44);if(!T.node_ops.getattr)throw new G.ErrnoError(63);return T.node_ops.getattr(T)},lstat(y){return G.stat(y,!0)},chmod(y,b,N){var T;if(typeof y=="string"){var A=G.lookupPath(y,{follow:!N});T=A.node}else T=y;if(!T.node_ops.setattr)throw new G.ErrnoError(63);T.node_ops.setattr(T,{mode:b&4095|T.mode&-4096,timestamp:Date.now()})},lchmod(y,b){G.chmod(y,b,!0)},fchmod(y,b){var N=G.getStreamChecked(y);G.chmod(N.node,b)},chown(y,b,N,T){var A;if(typeof y=="string"){var U=G.lookupPath(y,{follow:!T});A=U.node}else A=y;if(!A.node_ops.setattr)throw new G.ErrnoError(63);A.node_ops.setattr(A,{timestamp:Date.now()})},lchown(y,b,N){G.chown(y,b,N,!0)},fchown(y,b,N){var T=G.getStreamChecked(y);G.chown(T.node,b,N)},truncate(y,b){if(b<0)throw new G.ErrnoError(28);var N;if(typeof y=="string"){var T=G.lookupPath(y,{follow:!0});N=T.node}else N=y;if(!N.node_ops.setattr)throw new G.ErrnoError(63);if(G.isDir(N.mode))throw new G.ErrnoError(31);if(!G.isFile(N.mode))throw new G.ErrnoError(28);var A=G.nodePermissions(N,"w");if(A)throw new G.ErrnoError(A);N.node_ops.setattr(N,{size:b,timestamp:Date.now()})},ftruncate(y,b){var N=G.getStreamChecked(y);if(!(N.flags&2097155))throw new G.ErrnoError(28);G.truncate(N.node,b)},utime(y,b,N){var T=G.lookupPath(y,{follow:!0}),A=T.node;A.node_ops.setattr(A,{timestamp:Math.max(b,N)})},open(y,b,N){if(y==="")throw new G.ErrnoError(44);b=typeof b=="string"?Su(b):b,b&64?(N=typeof N>"u"?438:N,N=N&4095|32768):N=0;var T;if(typeof y=="object")T=y;else{y=be.normalize(y);try{var A=G.lookupPath(y,{follow:!(b&131072)});T=A.node}catch{}}var U=!1;if(b&64)if(T){if(b&128)throw new G.ErrnoError(20)}else T=G.mknod(y,N,0),U=!0;if(!T)throw new G.ErrnoError(44);if(G.isChrdev(T.mode)&&(b&=-513),b&65536&&!G.isDir(T.mode))throw new G.ErrnoError(54);if(!U){var fe=G.mayOpen(T,b);if(fe)throw new G.ErrnoError(fe)}b&512&&!U&&G.truncate(T,0),b&=-131713;var me=G.createStream({node:T,path:G.getPath(T),flags:b,seekable:!0,position:0,stream_ops:T.stream_ops,ungotten:[],error:!1});return me.stream_ops.open&&me.stream_ops.open(me),r.logReadFiles&&!(b&1)&&(G.readFiles||(G.readFiles={}),y in G.readFiles||(G.readFiles[y]=1)),me},close(y){if(G.isClosed(y))throw new G.ErrnoError(8);y.getdents&&(y.getdents=null);try{y.stream_ops.close&&y.stream_ops.close(y)}catch(b){throw b}finally{G.closeStream(y.fd)}y.fd=null},isClosed(y){return y.fd===null},llseek(y,b,N){if(G.isClosed(y))throw new G.ErrnoError(8);if(!y.seekable||!y.stream_ops.llseek)throw new G.ErrnoError(70);if(N!=0&&N!=1&&N!=2)throw new G.ErrnoError(28);return y.position=y.stream_ops.llseek(y,b,N),y.ungotten=[],y.position},read(y,b,N,T,A){if(T<0||A<0)throw new G.ErrnoError(28);if(G.isClosed(y))throw new G.ErrnoError(8);if((y.flags&2097155)===1)throw new G.ErrnoError(8);if(G.isDir(y.node.mode))throw new G.ErrnoError(31);if(!y.stream_ops.read)throw new G.ErrnoError(28);var U=typeof A<"u";if(!U)A=y.position;else if(!y.seekable)throw new G.ErrnoError(70);var fe=y.stream_ops.read(y,b,N,T,A);return U||(y.position+=fe),fe},write(y,b,N,T,A,U){if(T<0||A<0)throw new G.ErrnoError(28);if(G.isClosed(y))throw new G.ErrnoError(8);if(!(y.flags&2097155))throw new G.ErrnoError(8);if(G.isDir(y.node.mode))throw new G.ErrnoError(31);if(!y.stream_ops.write)throw new G.ErrnoError(28);y.seekable&&y.flags&1024&&G.llseek(y,0,2);var fe=typeof A<"u";if(!fe)A=y.position;else if(!y.seekable)throw new G.ErrnoError(70);var me=y.stream_ops.write(y,b,N,T,A,U);return fe||(y.position+=me),me},allocate(y,b,N){if(G.isClosed(y))throw new G.ErrnoError(8);if(b<0||N<=0)throw new G.ErrnoError(28);if(!(y.flags&2097155))throw new G.ErrnoError(8);if(!G.isFile(y.node.mode)&&!G.isDir(y.node.mode))throw new G.ErrnoError(43);if(!y.stream_ops.allocate)throw new G.ErrnoError(138);y.stream_ops.allocate(y,b,N)},mmap(y,b,N,T,A){if(T&2&&!(A&2)&&(y.flags&2097155)!==2)throw new G.ErrnoError(2);if((y.flags&2097155)===1)throw new G.ErrnoError(2);if(!y.stream_ops.mmap)throw new G.ErrnoError(43);if(!b)throw new G.ErrnoError(28);return y.stream_ops.mmap(y,b,N,T,A)},msync(y,b,N,T,A){return y.stream_ops.msync?y.stream_ops.msync(y,b,N,T,A):0},ioctl(y,b,N){if(!y.stream_ops.ioctl)throw new G.ErrnoError(59);return y.stream_ops.ioctl(y,b,N)},readFile(y,b={}){if(b.flags=b.flags||0,b.encoding=b.encoding||"binary",b.encoding!=="utf8"&&b.encoding!=="binary")throw new Error(`Invalid encoding type "${b.encoding}"`);var N,T=G.open(y,b.flags),A=G.stat(y),U=A.size,fe=new Uint8Array(U);return G.read(T,fe,0,U,0),b.encoding==="utf8"?N=Me(fe,0):b.encoding==="binary"&&(N=fe),G.close(T),N},writeFile(y,b,N={}){N.flags=N.flags||577;var T=G.open(y,N.flags,N.mode);if(typeof b=="string"){var A=new Uint8Array(Yt(b)+1),U=Xt(b,A,0,A.length);G.write(T,A,0,U,void 0,N.canOwn)}else if(ArrayBuffer.isView(b))G.write(T,b,0,b.byteLength,void 0,N.canOwn);else throw new Error("Unsupported data type");G.close(T)},cwd:()=>G.currentPath,chdir(y){var b=G.lookupPath(y,{follow:!0});if(b.node===null)throw new G.ErrnoError(44);if(!G.isDir(b.node.mode))throw new G.ErrnoError(54);var N=G.nodePermissions(b.node,"x");if(N)throw new G.ErrnoError(N);G.currentPath=b.path},createDefaultDirectories(){G.mkdir("/tmp"),G.mkdir("/home"),G.mkdir("/home/web_user")},createDefaultDevices(){G.mkdir("/dev"),G.registerDevice(G.makedev(1,3),{read:()=>0,write:(T,A,U,fe,me)=>fe}),G.mkdev("/dev/null",G.makedev(1,3)),Bn.register(G.makedev(5,0),Bn.default_tty_ops),Bn.register(G.makedev(6,0),Bn.default_tty1_ops),G.mkdev("/dev/tty",G.makedev(5,0)),G.mkdev("/dev/tty1",G.makedev(6,0));var y=new Uint8Array(1024),b=0,N=()=>(b===0&&(b=qe(y).byteLength),y[--b]);G.createDevice("/dev","random",N),G.createDevice("/dev","urandom",N),G.mkdir("/dev/shm"),G.mkdir("/dev/shm/tmp")},createSpecialDirectories(){G.mkdir("/proc");var y=G.mkdir("/proc/self");G.mkdir("/proc/self/fd"),G.mount({mount(){var b=G.createNode(y,"fd",16895,73);return b.node_ops={lookup(N,T){var A=+T,U=G.getStreamChecked(A),fe={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>U.path}};return fe.parent=fe,fe}},b}},{},"/proc/self/fd")},createStandardStreams(y,b,N){y?G.createDevice("/dev","stdin",y):G.symlink("/dev/tty","/dev/stdin"),b?G.createDevice("/dev","stdout",null,b):G.symlink("/dev/tty","/dev/stdout"),N?G.createDevice("/dev","stderr",null,N):G.symlink("/dev/tty1","/dev/stderr"),G.open("/dev/stdin",0),G.open("/dev/stdout",1),G.open("/dev/stderr",1)},staticInit(){[44].forEach(y=>{G.genericErrors[y]=new G.ErrnoError(y),G.genericErrors[y].stack="<generic error, no stack>"}),G.nameTable=new Array(4096),G.mount(en,{},"/"),G.createDefaultDirectories(),G.createDefaultDevices(),G.createSpecialDirectories(),G.filesystems={MEMFS:en}},init(y,b,N){G.initialized=!0,y??=r.stdin,b??=r.stdout,N??=r.stderr,G.createStandardStreams(y,b,N)},quit(){G.initialized=!1;for(var y=0;y<G.streams.length;y++){var b=G.streams[y];b&&G.close(b)}},findObject(y,b){var N=G.analyzePath(y,b);return N.exists?N.object:null},analyzePath(y,b){try{var N=G.lookupPath(y,{follow:!b});y=N.path}catch{}var T={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var N=G.lookupPath(y,{parent:!0});T.parentExists=!0,T.parentPath=N.path,T.parentObject=N.node,T.name=be.basename(y),N=G.lookupPath(y,{follow:!b}),T.exists=!0,T.path=N.path,T.object=N.node,T.name=N.node.name,T.isRoot=N.path==="/"}catch(A){T.error=A.errno}return T},createPath(y,b,N,T){y=typeof y=="string"?y:G.getPath(y);for(var A=b.split("/").reverse();A.length;){var U=A.pop();if(U){var fe=be.join2(y,U);try{G.mkdir(fe)}catch{}y=fe}}return fe},createFile(y,b,N,T,A){var U=be.join2(typeof y=="string"?y:G.getPath(y),b),fe=Zs(T,A);return G.create(U,fe)},createDataFile(y,b,N,T,A,U){var fe=b;y&&(y=typeof y=="string"?y:G.getPath(y),fe=b?be.join2(y,b):y);var me=Zs(T,A),Ge=G.create(fe,me);if(N){if(typeof N=="string"){for(var tt=new Array(N.length),at=0,mt=N.length;at<mt;++at)tt[at]=N.charCodeAt(at);N=tt}G.chmod(Ge,me|146);var Be=G.open(Ge,577);G.write(Be,N,0,N.length,0,U),G.close(Be),G.chmod(Ge,me)}},createDevice(y,b,N,T){var A=be.join2(typeof y=="string"?y:G.getPath(y),b),U=Zs(!!N,!!T);G.createDevice.major||(G.createDevice.major=64);var fe=G.makedev(G.createDevice.major++,0);return G.registerDevice(fe,{open(me){me.seekable=!1},close(me){T?.buffer?.length&&T(10)},read(me,Ge,tt,at,mt){for(var Be=0,Oe=0;Oe<at;Oe++){var et;try{et=N()}catch{throw new G.ErrnoError(29)}if(et===void 0&&Be===0)throw new G.ErrnoError(6);if(et==null)break;Be++,Ge[tt+Oe]=et}return Be&&(me.node.timestamp=Date.now()),Be},write(me,Ge,tt,at,mt){for(var Be=0;Be<at;Be++)try{T(Ge[tt+Be])}catch{throw new G.ErrnoError(29)}return at&&(me.node.timestamp=Date.now()),Be}}),G.mkdev(A,U,fe)},forceLoadFile(y){if(y.isDevice||y.isFolder||y.link||y.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{y.contents=S(y.url),y.usedBytes=y.contents.length}catch{throw new G.ErrnoError(29)}},createLazyFile(y,b,N,T,A){class U{constructor(){this.lengthKnown=!1,this.chunks=[]}get(Oe){if(!(Oe>this.length-1||Oe<0)){var et=Oe%this.chunkSize,ve=Oe/this.chunkSize|0;return this.getter(ve)[et]}}setDataGetter(Oe){this.getter=Oe}cacheLength(){var Oe=new XMLHttpRequest;if(Oe.open("HEAD",N,!1),Oe.send(null),!(Oe.status>=200&&Oe.status<300||Oe.status===304))throw new Error("Couldn't load "+N+". Status: "+Oe.status);var et=Number(Oe.getResponseHeader("Content-length")),ve,ke=(ve=Oe.getResponseHeader("Accept-Ranges"))&&ve==="bytes",Te=(ve=Oe.getResponseHeader("Content-Encoding"))&&ve==="gzip",Ze=1024*1024;ke||(Ze=et);var Qe=(Ke,It)=>{if(Ke>It)throw new Error("invalid range ("+Ke+", "+It+") or no bytes requested!");if(It>et-1)throw new Error("only "+et+" bytes available! programmer error!");var ee=new XMLHttpRequest;if(ee.open("GET",N,!1),et!==Ze&&ee.setRequestHeader("Range","bytes="+Ke+"-"+It),ee.responseType="arraybuffer",ee.overrideMimeType&&ee.overrideMimeType("text/plain; charset=x-user-defined"),ee.send(null),!(ee.status>=200&&ee.status<300||ee.status===304))throw new Error("Couldn't load "+N+". Status: "+ee.status);return ee.response!==void 0?new Uint8Array(ee.response||[]):_n(ee.responseText||"")},je=this;je.setDataGetter(Ke=>{var It=Ke*Ze,ee=(Ke+1)*Ze-1;if(ee=Math.min(ee,et-1),typeof je.chunks[Ke]>"u"&&(je.chunks[Ke]=Qe(It,ee)),typeof je.chunks[Ke]>"u")throw new Error("doXHR failed!");return je.chunks[Ke]}),(Te||!et)&&(Ze=et=1,et=this.getter(0).length,Ze=et,k("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=et,this._chunkSize=Ze,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var fe=new U,me={isDevice:!1,contents:fe}}else var me={isDevice:!1,url:N};var Ge=G.createFile(y,b,me,T,A);me.contents?Ge.contents=me.contents:me.url&&(Ge.contents=null,Ge.url=me.url),Object.defineProperties(Ge,{usedBytes:{get:function(){return this.contents.length}}});var tt={},at=Object.keys(Ge.stream_ops);at.forEach(Be=>{var Oe=Ge.stream_ops[Be];tt[Be]=(...et)=>(G.forceLoadFile(Ge),Oe(...et))});function mt(Be,Oe,et,ve,ke){var Te=Be.node.contents;if(ke>=Te.length)return 0;var Ze=Math.min(Te.length-ke,ve);if(Te.slice)for(var Qe=0;Qe<Ze;Qe++)Oe[et+Qe]=Te[ke+Qe];else for(var Qe=0;Qe<Ze;Qe++)Oe[et+Qe]=Te.get(ke+Qe);return Ze}return tt.read=(Be,Oe,et,ve,ke)=>(G.forceLoadFile(Ge),mt(Be,Oe,et,ve,ke)),tt.mmap=(Be,Oe,et,ve,ke)=>{G.forceLoadFile(Ge);var Te=Cr(Oe);if(!Te)throw new G.ErrnoError(48);return mt(Be,q,Te,Oe,et),{ptr:Te,allocated:!0}},Ge.stream_ops=tt,Ge}},Oc=(y,b)=>y?Me(F,y,b):"",yn={DEFAULT_POLLMASK:5,calculateAt(y,b,N){if(be.isAbs(b))return b;var T;if(y===-100)T=G.cwd();else{var A=yn.getStreamFromFD(y);T=A.path}if(b.length==0){if(!N)throw new G.ErrnoError(44);return T}return be.join2(T,b)},doStat(y,b,N){var T=y(b);P[N>>2]=T.dev,P[N+4>>2]=T.mode,O[N+8>>2]=T.nlink,P[N+12>>2]=T.uid,P[N+16>>2]=T.gid,P[N+20>>2]=T.rdev,B[N+24>>3]=BigInt(T.size),P[N+32>>2]=4096,P[N+36>>2]=T.blocks;var A=T.atime.getTime(),U=T.mtime.getTime(),fe=T.ctime.getTime();return B[N+40>>3]=BigInt(Math.floor(A/1e3)),O[N+48>>2]=A%1e3*1e3*1e3,B[N+56>>3]=BigInt(Math.floor(U/1e3)),O[N+64>>2]=U%1e3*1e3*1e3,B[N+72>>3]=BigInt(Math.floor(fe/1e3)),O[N+80>>2]=fe%1e3*1e3*1e3,B[N+88>>3]=BigInt(T.ino),0},doMsync(y,b,N,T,A){if(!G.isFile(b.node.mode))throw new G.ErrnoError(43);if(T&2)return 0;var U=F.slice(y,y+N);G.msync(b,U,A,N,T)},getStreamFromFD(y){var b=G.getStreamChecked(y);return b},varargs:void 0,getStr(y){var b=Oc(y);return b}};function Ac(y,b){try{return y=yn.getStr(y),G.chmod(y,b),0}catch(N){if(typeof G>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function qc(y,b,N,T){try{if(b=yn.getStr(b),b=yn.calculateAt(y,b),N&-8)return-28;var A=G.lookupPath(b,{follow:!0}),U=A.node;if(!U)return-44;var fe="";return N&4&&(fe+="r"),N&2&&(fe+="w"),N&1&&(fe+="x"),fe&&G.nodePermissions(U,fe)?-2:0}catch(me){if(typeof G>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function Pc(y,b){try{return G.fchmod(y,b),0}catch(N){if(typeof G>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function Eu(y,b,N){try{return G.fchown(y,b,N),0}catch(T){if(typeof G>"u"||T.name!=="ErrnoError")throw T;return-T.errno}}function Ia(){var y=P[+yn.varargs>>2];return yn.varargs+=4,y}var us=Ia;function Iu(y,b,N){yn.varargs=N;try{var T=yn.getStreamFromFD(y);switch(b){case 0:{var A=Ia();if(A<0)return-28;for(;G.streams[A];)A++;var U;return U=G.dupStream(T,A),U.fd}case 1:case 2:return 0;case 3:return T.flags;case 4:{var A=Ia();return T.flags|=A,0}case 12:{var A=us(),fe=0;return $[A+fe>>1]=2,0}case 13:case 14:return 0}return-28}catch(me){if(typeof G>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function Na(y,b){try{var N=yn.getStreamFromFD(y);return yn.doStat(G.stat,N.path,b)}catch(T){if(typeof G>"u"||T.name!=="ErrnoError")throw T;return-T.errno}}var Wf=0x20000000000000,ka=-0x20000000000000,Ys=y=>y<ka||y>Wf?NaN:Number(y);function cl(y,b){b=Ys(b);try{return isNaN(b)?61:(G.ftruncate(y,b),0)}catch(N){if(typeof G>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}var Xs=(y,b,N)=>Xt(y,F,b,N);function Uf(y,b){try{if(b===0)return-28;var N=G.cwd(),T=Yt(N)+1;return b<T?-68:(Xs(N,y,b),T)}catch(A){if(typeof G>"u"||A.name!=="ErrnoError")throw A;return-A.errno}}function Vf(y,b,N){yn.varargs=N;try{var T=yn.getStreamFromFD(y);switch(b){case 21509:return T.tty?0:-59;case 21505:{if(!T.tty)return-59;if(T.tty.ops.ioctl_tcgets){var A=T.tty.ops.ioctl_tcgets(T),U=us();P[U>>2]=A.c_iflag||0,P[U+4>>2]=A.c_oflag||0,P[U+8>>2]=A.c_cflag||0,P[U+12>>2]=A.c_lflag||0;for(var fe=0;fe<32;fe++)q[U+fe+17]=A.c_cc[fe]||0;return 0}return 0}case 21510:case 21511:case 21512:return T.tty?0:-59;case 21506:case 21507:case 21508:{if(!T.tty)return-59;if(T.tty.ops.ioctl_tcsets){for(var U=us(),me=P[U>>2],Ge=P[U+4>>2],tt=P[U+8>>2],at=P[U+12>>2],mt=[],fe=0;fe<32;fe++)mt.push(q[U+fe+17]);return T.tty.ops.ioctl_tcsets(T.tty,b,{c_iflag:me,c_oflag:Ge,c_cflag:tt,c_lflag:at,c_cc:mt})}return 0}case 21519:{if(!T.tty)return-59;var U=us();return P[U>>2]=0,0}case 21520:return T.tty?-28:-59;case 21531:{var U=us();return G.ioctl(T,b,U)}case 21523:{if(!T.tty)return-59;if(T.tty.ops.ioctl_tiocgwinsz){var Be=T.tty.ops.ioctl_tiocgwinsz(T.tty),U=us();$[U>>1]=Be[0],$[U+2>>1]=Be[1]}return 0}case 21524:return T.tty?0:-59;case 21515:return T.tty?0:-59;default:return-28}}catch(Oe){if(typeof G>"u"||Oe.name!=="ErrnoError")throw Oe;return-Oe.errno}}function Fc(y,b){try{return y=yn.getStr(y),yn.doStat(G.lstat,y,b)}catch(N){if(typeof G>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function eo(y,b,N){try{return b=yn.getStr(b),b=yn.calculateAt(y,b),b=be.normalize(b),b[b.length-1]==="/"&&(b=b.substr(0,b.length-1)),G.mkdir(b,N,0),0}catch(T){if(typeof G>"u"||T.name!=="ErrnoError")throw T;return-T.errno}}function Dc(y,b,N,T){try{b=yn.getStr(b);var A=T&256,U=T&4096;return T=T&-6401,b=yn.calculateAt(y,b,U),yn.doStat(A?G.lstat:G.stat,b,N)}catch(fe){if(typeof G>"u"||fe.name!=="ErrnoError")throw fe;return-fe.errno}}function Lc(y,b,N,T){yn.varargs=T;try{b=yn.getStr(b),b=yn.calculateAt(y,b);var A=T?Ia():0;return G.open(b,N,A).fd}catch(U){if(typeof G>"u"||U.name!=="ErrnoError")throw U;return-U.errno}}function Hf(y,b,N,T){try{if(b=yn.getStr(b),b=yn.calculateAt(y,b),T<=0)return-28;var A=G.readlink(b),U=Math.min(T,Yt(A)),fe=q[N+U];return Xs(A,N,T+1),q[N+U]=fe,U}catch(me){if(typeof G>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function Mc(y){try{return y=yn.getStr(y),G.rmdir(y),0}catch(b){if(typeof G>"u"||b.name!=="ErrnoError")throw b;return-b.errno}}function $c(y,b){try{return y=yn.getStr(y),yn.doStat(G.stat,y,b)}catch(N){if(typeof G>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function Bc(y,b,N){try{return b=yn.getStr(b),b=yn.calculateAt(y,b),N===0?G.unlink(b):N===512?G.rmdir(b):ze("Invalid flags passed to unlinkat"),0}catch(T){if(typeof G>"u"||T.name!=="ErrnoError")throw T;return-T.errno}}var Nu=y=>O[y>>2]+P[y+4>>2]*0x100000000;function zc(y,b,N,T){try{b=yn.getStr(b),b=yn.calculateAt(y,b,!0);var A=Date.now(),U,fe;if(!N)U=A,fe=A;else{var me=Nu(N),Ge=P[N+8>>2];Ge==0x3fffffff?U=A:Ge==0x3ffffffe?U=-1:U=me*1e3+Ge/(1e3*1e3),N+=16,me=Nu(N),Ge=P[N+8>>2],Ge==0x3fffffff?fe=A:Ge==0x3ffffffe?fe=-1:fe=me*1e3+Ge/(1e3*1e3)}return(fe!=-1||U!=-1)&&G.utime(b,U,fe),0}catch(tt){if(typeof G>"u"||tt.name!=="ErrnoError")throw tt;return-tt.errno}}var Gf=1,fr=()=>Gf,Kf=y=>y%4===0&&(y%100!==0||y%400===0),ku=[0,31,60,91,121,152,182,213,244,274,305,335],Wc=[0,31,59,90,120,151,181,212,243,273,304,334],dl=y=>{var b=Kf(y.getFullYear()),N=b?ku:Wc,T=N[y.getMonth()]+y.getDate()-1;return T};function Qf(y,b){y=Ys(y);var N=new Date(y*1e3);P[b>>2]=N.getSeconds(),P[b+4>>2]=N.getMinutes(),P[b+8>>2]=N.getHours(),P[b+12>>2]=N.getDate(),P[b+16>>2]=N.getMonth(),P[b+20>>2]=N.getFullYear()-1900,P[b+24>>2]=N.getDay();var T=dl(N)|0;P[b+28>>2]=T,P[b+36>>2]=-(N.getTimezoneOffset()*60);var A=new Date(N.getFullYear(),0,1),U=new Date(N.getFullYear(),6,1).getTimezoneOffset(),fe=A.getTimezoneOffset(),me=(U!=fe&&N.getTimezoneOffset()==Math.min(fe,U))|0;P[b+32>>2]=me}function Cu(y,b,N,T,A,U,fe){A=Ys(A);try{if(isNaN(A))return 61;var me=yn.getStreamFromFD(T),Ge=G.mmap(me,y,A,b,N),tt=Ge.ptr;return P[U>>2]=Ge.allocated,O[fe>>2]=tt,0}catch(at){if(typeof G>"u"||at.name!=="ErrnoError")throw at;return-at.errno}}function fl(y,b,N,T,A,U){U=Ys(U);try{var fe=yn.getStreamFromFD(A);N&2&&yn.doMsync(y,fe,b,T,U)}catch(me){if(typeof G>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}var cs=(y,b,N,T)=>{var A=new Date().getFullYear(),U=new Date(A,0,1),fe=new Date(A,6,1),me=U.getTimezoneOffset(),Ge=fe.getTimezoneOffset(),tt=Math.max(me,Ge);O[y>>2]=tt*60,P[b>>2]=+(me!=Ge);var at=Oe=>{var et=Oe>=0?"-":"+",ve=Math.abs(Oe),ke=String(Math.floor(ve/60)).padStart(2,"0"),Te=String(ve%60).padStart(2,"0");return`UTC${et}${ke}${Te}`},mt=at(me),Be=at(Ge);Ge<me?(Xs(mt,N,17),Xs(Be,T,17)):(Xs(mt,T,17),Xs(Be,N,17))},Jf=()=>Date.now(),ki;ki=()=>performance.now();var Zf=()=>0x80000000,Yf=y=>{var b=C.buffer,N=(y-b.byteLength+65535)/65536;try{return C.grow(N),D(),1}catch{}},Xf=y=>{var b=F.length;y>>>=0;var N=Zf();if(y>N)return!1;for(var T=1;T<=4;T*=2){var A=b*(1+.2/T);A=Math.min(A,y+0x6000000);var U=Math.min(N,Vi(Math.max(y,A),65536)),fe=Yf(U);if(fe)return!0}return!1},Yo={},pl=()=>h||"./this.program",Hi=()=>{if(!Hi.strings){var y=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",b={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:y,_:pl()};for(var N in Yo)Yo[N]===void 0?delete b[N]:b[N]=Yo[N];var T=[];for(var N in b)T.push(`${N}=${b[N]}`);Hi.strings=T}return Hi.strings},hl=(y,b)=>{for(var N=0;N<y.length;++N)q[b++]=y.charCodeAt(N);q[b]=0},Hx=(y,b)=>{var N=0;return Hi().forEach((T,A)=>{var U=b+N;O[y+A*4>>2]=U,hl(T,U),N+=T.length+1}),0},Gx=(y,b)=>{var N=Hi();O[y>>2]=N.length;var T=0;return N.forEach(A=>T+=A.length+1),O[b>>2]=T,0};function ep(y){try{var b=yn.getStreamFromFD(y);return G.close(b),0}catch(N){if(typeof G>"u"||N.name!=="ErrnoError")throw N;return N.errno}}function og(y,b){try{var N=0,T=0,A=0,U=yn.getStreamFromFD(y),fe=U.tty?2:G.isDir(U.mode)?3:G.isLink(U.mode)?7:4;return q[b]=fe,$[b+2>>1]=A,B[b+8>>3]=BigInt(N),B[b+16>>3]=BigInt(T),0}catch(me){if(typeof G>"u"||me.name!=="ErrnoError")throw me;return me.errno}}var tp=(y,b,N,T)=>{for(var A=0,U=0;U<N;U++){var fe=O[b>>2],me=O[b+4>>2];b+=8;var Ge=G.read(y,q,fe,me,T);if(Ge<0)return-1;if(A+=Ge,Ge<me)break}return A};function Tu(y,b,N,T){try{var A=yn.getStreamFromFD(y),U=tp(A,b,N);return O[T>>2]=U,0}catch(fe){if(typeof G>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}function Kx(y,b,N,T){b=Ys(b);try{if(isNaN(b))return 61;var A=yn.getStreamFromFD(y);return G.llseek(A,b,N),B[T>>3]=BigInt(A.position),A.getdents&&b===0&&N===0&&(A.getdents=null),0}catch(U){if(typeof G>"u"||U.name!=="ErrnoError")throw U;return U.errno}}function np(y){try{var b=yn.getStreamFromFD(y);return b.stream_ops?.fsync?b.stream_ops.fsync(b):0}catch(N){if(typeof G>"u"||N.name!=="ErrnoError")throw N;return N.errno}}var zn=(y,b,N,T)=>{for(var A=0,U=0;U<N;U++){var fe=O[b>>2],me=O[b+4>>2];b+=8;var Ge=G.write(y,q,fe,me,T);if(Ge<0)return-1;if(A+=Ge,Ge<me)break}return A};function ag(y,b,N,T){try{var A=yn.getStreamFromFD(y),U=zn(A,b,N);return O[T>>2]=U,0}catch(fe){if(typeof G>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}G.createPreloadedFile=Ea,G.staticInit();var rp={__syscall_chmod:Ac,__syscall_faccessat:qc,__syscall_fchmod:Pc,__syscall_fchown32:Eu,__syscall_fcntl64:Iu,__syscall_fstat64:Na,__syscall_ftruncate64:cl,__syscall_getcwd:Uf,__syscall_ioctl:Vf,__syscall_lstat64:Fc,__syscall_mkdirat:eo,__syscall_newfstatat:Dc,__syscall_openat:Lc,__syscall_readlinkat:Hf,__syscall_rmdir:Mc,__syscall_stat64:$c,__syscall_unlinkat:Bc,__syscall_utimensat:zc,_emscripten_get_now_is_monotonic:fr,_localtime_js:Qf,_mmap_js:Cu,_munmap_js:fl,_tzset_js:cs,emscripten_date_now:Jf,emscripten_get_now:ki,emscripten_resize_heap:Xf,environ_get:Hx,environ_sizes_get:Gx,fd_close:ep,fd_fdstat_get:og,fd_read:Tu,fd_seek:Kx,fd_sync:np,fd_write:ag,memory:C},he=ln();r._sqlite3_status64=(y,b,N,T)=>(r._sqlite3_status64=he.sqlite3_status64)(y,b,N,T),r._sqlite3_status=(y,b,N,T)=>(r._sqlite3_status=he.sqlite3_status)(y,b,N,T),r._sqlite3_db_status=(y,b,N,T,A)=>(r._sqlite3_db_status=he.sqlite3_db_status)(y,b,N,T,A),r._sqlite3_msize=y=>(r._sqlite3_msize=he.sqlite3_msize)(y),r._sqlite3_vfs_find=y=>(r._sqlite3_vfs_find=he.sqlite3_vfs_find)(y),r._sqlite3_initialize=()=>(r._sqlite3_initialize=he.sqlite3_initialize)(),r._sqlite3_malloc=y=>(r._sqlite3_malloc=he.sqlite3_malloc)(y),r._sqlite3_free=y=>(r._sqlite3_free=he.sqlite3_free)(y),r._sqlite3_vfs_register=(y,b)=>(r._sqlite3_vfs_register=he.sqlite3_vfs_register)(y,b),r._sqlite3_vfs_unregister=y=>(r._sqlite3_vfs_unregister=he.sqlite3_vfs_unregister)(y),r._sqlite3_malloc64=y=>(r._sqlite3_malloc64=he.sqlite3_malloc64)(y),r._sqlite3_realloc=(y,b)=>(r._sqlite3_realloc=he.sqlite3_realloc)(y,b),r._sqlite3_realloc64=(y,b)=>(r._sqlite3_realloc64=he.sqlite3_realloc64)(y,b),r._sqlite3_value_text=y=>(r._sqlite3_value_text=he.sqlite3_value_text)(y),r._sqlite3_randomness=(y,b)=>(r._sqlite3_randomness=he.sqlite3_randomness)(y,b),r._sqlite3_stricmp=(y,b)=>(r._sqlite3_stricmp=he.sqlite3_stricmp)(y,b),r._sqlite3_strnicmp=(y,b,N)=>(r._sqlite3_strnicmp=he.sqlite3_strnicmp)(y,b,N),r._sqlite3_uri_parameter=(y,b)=>(r._sqlite3_uri_parameter=he.sqlite3_uri_parameter)(y,b),r._sqlite3_uri_boolean=(y,b,N)=>(r._sqlite3_uri_boolean=he.sqlite3_uri_boolean)(y,b,N),r._sqlite3_serialize=(y,b,N,T)=>(r._sqlite3_serialize=he.sqlite3_serialize)(y,b,N,T),r._sqlite3_prepare_v2=(y,b,N,T,A)=>(r._sqlite3_prepare_v2=he.sqlite3_prepare_v2)(y,b,N,T,A),r._sqlite3_step=y=>(r._sqlite3_step=he.sqlite3_step)(y),r._sqlite3_column_int64=(y,b)=>(r._sqlite3_column_int64=he.sqlite3_column_int64)(y,b),r._sqlite3_reset=y=>(r._sqlite3_reset=he.sqlite3_reset)(y),r._sqlite3_exec=(y,b,N,T,A)=>(r._sqlite3_exec=he.sqlite3_exec)(y,b,N,T,A),r._sqlite3_column_int=(y,b)=>(r._sqlite3_column_int=he.sqlite3_column_int)(y,b),r._sqlite3_finalize=y=>(r._sqlite3_finalize=he.sqlite3_finalize)(y),r._sqlite3_file_control=(y,b,N,T)=>(r._sqlite3_file_control=he.sqlite3_file_control)(y,b,N,T),r._sqlite3_column_name=(y,b)=>(r._sqlite3_column_name=he.sqlite3_column_name)(y,b),r._sqlite3_column_text=(y,b)=>(r._sqlite3_column_text=he.sqlite3_column_text)(y,b),r._sqlite3_column_type=(y,b)=>(r._sqlite3_column_type=he.sqlite3_column_type)(y,b),r._sqlite3_errmsg=y=>(r._sqlite3_errmsg=he.sqlite3_errmsg)(y),r._sqlite3_deserialize=(y,b,N,T,A,U)=>(r._sqlite3_deserialize=he.sqlite3_deserialize)(y,b,N,T,A,U),r._sqlite3_clear_bindings=y=>(r._sqlite3_clear_bindings=he.sqlite3_clear_bindings)(y),r._sqlite3_value_blob=y=>(r._sqlite3_value_blob=he.sqlite3_value_blob)(y),r._sqlite3_value_bytes=y=>(r._sqlite3_value_bytes=he.sqlite3_value_bytes)(y),r._sqlite3_value_double=y=>(r._sqlite3_value_double=he.sqlite3_value_double)(y),r._sqlite3_value_int=y=>(r._sqlite3_value_int=he.sqlite3_value_int)(y),r._sqlite3_value_int64=y=>(r._sqlite3_value_int64=he.sqlite3_value_int64)(y),r._sqlite3_value_subtype=y=>(r._sqlite3_value_subtype=he.sqlite3_value_subtype)(y),r._sqlite3_value_pointer=(y,b)=>(r._sqlite3_value_pointer=he.sqlite3_value_pointer)(y,b),r._sqlite3_value_type=y=>(r._sqlite3_value_type=he.sqlite3_value_type)(y),r._sqlite3_value_nochange=y=>(r._sqlite3_value_nochange=he.sqlite3_value_nochange)(y),r._sqlite3_value_frombind=y=>(r._sqlite3_value_frombind=he.sqlite3_value_frombind)(y),r._sqlite3_value_dup=y=>(r._sqlite3_value_dup=he.sqlite3_value_dup)(y),r._sqlite3_value_free=y=>(r._sqlite3_value_free=he.sqlite3_value_free)(y),r._sqlite3_result_blob=(y,b,N,T)=>(r._sqlite3_result_blob=he.sqlite3_result_blob)(y,b,N,T),r._sqlite3_result_error_toobig=y=>(r._sqlite3_result_error_toobig=he.sqlite3_result_error_toobig)(y),r._sqlite3_result_error_nomem=y=>(r._sqlite3_result_error_nomem=he.sqlite3_result_error_nomem)(y),r._sqlite3_result_double=(y,b)=>(r._sqlite3_result_double=he.sqlite3_result_double)(y,b),r._sqlite3_result_error=(y,b,N)=>(r._sqlite3_result_error=he.sqlite3_result_error)(y,b,N),r._sqlite3_result_int=(y,b)=>(r._sqlite3_result_int=he.sqlite3_result_int)(y,b),r._sqlite3_result_int64=(y,b)=>(r._sqlite3_result_int64=he.sqlite3_result_int64)(y,b),r._sqlite3_result_null=y=>(r._sqlite3_result_null=he.sqlite3_result_null)(y),r._sqlite3_result_pointer=(y,b,N,T)=>(r._sqlite3_result_pointer=he.sqlite3_result_pointer)(y,b,N,T),r._sqlite3_result_subtype=(y,b)=>(r._sqlite3_result_subtype=he.sqlite3_result_subtype)(y,b),r._sqlite3_result_text=(y,b,N,T)=>(r._sqlite3_result_text=he.sqlite3_result_text)(y,b,N,T),r._sqlite3_result_zeroblob=(y,b)=>(r._sqlite3_result_zeroblob=he.sqlite3_result_zeroblob)(y,b),r._sqlite3_result_zeroblob64=(y,b)=>(r._sqlite3_result_zeroblob64=he.sqlite3_result_zeroblob64)(y,b),r._sqlite3_result_error_code=(y,b)=>(r._sqlite3_result_error_code=he.sqlite3_result_error_code)(y,b),r._sqlite3_user_data=y=>(r._sqlite3_user_data=he.sqlite3_user_data)(y),r._sqlite3_context_db_handle=y=>(r._sqlite3_context_db_handle=he.sqlite3_context_db_handle)(y),r._sqlite3_vtab_nochange=y=>(r._sqlite3_vtab_nochange=he.sqlite3_vtab_nochange)(y),r._sqlite3_vtab_in_first=(y,b)=>(r._sqlite3_vtab_in_first=he.sqlite3_vtab_in_first)(y,b),r._sqlite3_vtab_in_next=(y,b)=>(r._sqlite3_vtab_in_next=he.sqlite3_vtab_in_next)(y,b),r._sqlite3_aggregate_context=(y,b)=>(r._sqlite3_aggregate_context=he.sqlite3_aggregate_context)(y,b),r._sqlite3_get_auxdata=(y,b)=>(r._sqlite3_get_auxdata=he.sqlite3_get_auxdata)(y,b),r._sqlite3_set_auxdata=(y,b,N,T)=>(r._sqlite3_set_auxdata=he.sqlite3_set_auxdata)(y,b,N,T),r._sqlite3_column_count=y=>(r._sqlite3_column_count=he.sqlite3_column_count)(y),r._sqlite3_data_count=y=>(r._sqlite3_data_count=he.sqlite3_data_count)(y),r._sqlite3_column_blob=(y,b)=>(r._sqlite3_column_blob=he.sqlite3_column_blob)(y,b),r._sqlite3_column_bytes=(y,b)=>(r._sqlite3_column_bytes=he.sqlite3_column_bytes)(y,b),r._sqlite3_column_double=(y,b)=>(r._sqlite3_column_double=he.sqlite3_column_double)(y,b),r._sqlite3_column_value=(y,b)=>(r._sqlite3_column_value=he.sqlite3_column_value)(y,b),r._sqlite3_column_decltype=(y,b)=>(r._sqlite3_column_decltype=he.sqlite3_column_decltype)(y,b),r._sqlite3_bind_blob=(y,b,N,T,A)=>(r._sqlite3_bind_blob=he.sqlite3_bind_blob)(y,b,N,T,A),r._sqlite3_bind_double=(y,b,N)=>(r._sqlite3_bind_double=he.sqlite3_bind_double)(y,b,N),r._sqlite3_bind_int=(y,b,N)=>(r._sqlite3_bind_int=he.sqlite3_bind_int)(y,b,N),r._sqlite3_bind_int64=(y,b,N)=>(r._sqlite3_bind_int64=he.sqlite3_bind_int64)(y,b,N),r._sqlite3_bind_null=(y,b)=>(r._sqlite3_bind_null=he.sqlite3_bind_null)(y,b),r._sqlite3_bind_pointer=(y,b,N,T,A)=>(r._sqlite3_bind_pointer=he.sqlite3_bind_pointer)(y,b,N,T,A),r._sqlite3_bind_text=(y,b,N,T,A)=>(r._sqlite3_bind_text=he.sqlite3_bind_text)(y,b,N,T,A),r._sqlite3_bind_parameter_count=y=>(r._sqlite3_bind_parameter_count=he.sqlite3_bind_parameter_count)(y),r._sqlite3_bind_parameter_name=(y,b)=>(r._sqlite3_bind_parameter_name=he.sqlite3_bind_parameter_name)(y,b),r._sqlite3_bind_parameter_index=(y,b)=>(r._sqlite3_bind_parameter_index=he.sqlite3_bind_parameter_index)(y,b),r._sqlite3_db_handle=y=>(r._sqlite3_db_handle=he.sqlite3_db_handle)(y),r._sqlite3_stmt_readonly=y=>(r._sqlite3_stmt_readonly=he.sqlite3_stmt_readonly)(y),r._sqlite3_stmt_isexplain=y=>(r._sqlite3_stmt_isexplain=he.sqlite3_stmt_isexplain)(y),r._sqlite3_stmt_explain=(y,b)=>(r._sqlite3_stmt_explain=he.sqlite3_stmt_explain)(y,b),r._sqlite3_stmt_busy=y=>(r._sqlite3_stmt_busy=he.sqlite3_stmt_busy)(y),r._sqlite3_stmt_status=(y,b,N)=>(r._sqlite3_stmt_status=he.sqlite3_stmt_status)(y,b,N),r._sqlite3_sql=y=>(r._sqlite3_sql=he.sqlite3_sql)(y),r._sqlite3_expanded_sql=y=>(r._sqlite3_expanded_sql=he.sqlite3_expanded_sql)(y),r._sqlite3_preupdate_old=(y,b,N)=>(r._sqlite3_preupdate_old=he.sqlite3_preupdate_old)(y,b,N),r._sqlite3_preupdate_count=y=>(r._sqlite3_preupdate_count=he.sqlite3_preupdate_count)(y),r._sqlite3_preupdate_depth=y=>(r._sqlite3_preupdate_depth=he.sqlite3_preupdate_depth)(y),r._sqlite3_preupdate_blobwrite=y=>(r._sqlite3_preupdate_blobwrite=he.sqlite3_preupdate_blobwrite)(y),r._sqlite3_preupdate_new=(y,b,N)=>(r._sqlite3_preupdate_new=he.sqlite3_preupdate_new)(y,b,N),r._sqlite3_value_numeric_type=y=>(r._sqlite3_value_numeric_type=he.sqlite3_value_numeric_type)(y),r._sqlite3_set_authorizer=(y,b,N)=>(r._sqlite3_set_authorizer=he.sqlite3_set_authorizer)(y,b,N),r._sqlite3_strglob=(y,b)=>(r._sqlite3_strglob=he.sqlite3_strglob)(y,b),r._sqlite3_strlike=(y,b,N)=>(r._sqlite3_strlike=he.sqlite3_strlike)(y,b,N),r._sqlite3_auto_extension=y=>(r._sqlite3_auto_extension=he.sqlite3_auto_extension)(y),r._sqlite3_cancel_auto_extension=y=>(r._sqlite3_cancel_auto_extension=he.sqlite3_cancel_auto_extension)(y),r._sqlite3_reset_auto_extension=()=>(r._sqlite3_reset_auto_extension=he.sqlite3_reset_auto_extension)(),r._sqlite3_prepare_v3=(y,b,N,T,A,U)=>(r._sqlite3_prepare_v3=he.sqlite3_prepare_v3)(y,b,N,T,A,U),r._sqlite3_create_module=(y,b,N,T)=>(r._sqlite3_create_module=he.sqlite3_create_module)(y,b,N,T),r._sqlite3_create_module_v2=(y,b,N,T,A)=>(r._sqlite3_create_module_v2=he.sqlite3_create_module_v2)(y,b,N,T,A),r._sqlite3_drop_modules=(y,b)=>(r._sqlite3_drop_modules=he.sqlite3_drop_modules)(y,b),r._sqlite3_declare_vtab=(y,b)=>(r._sqlite3_declare_vtab=he.sqlite3_declare_vtab)(y,b),r._sqlite3_vtab_on_conflict=y=>(r._sqlite3_vtab_on_conflict=he.sqlite3_vtab_on_conflict)(y),r._sqlite3_vtab_collation=(y,b)=>(r._sqlite3_vtab_collation=he.sqlite3_vtab_collation)(y,b),r._sqlite3_vtab_in=(y,b,N)=>(r._sqlite3_vtab_in=he.sqlite3_vtab_in)(y,b,N),r._sqlite3_vtab_rhs_value=(y,b,N)=>(r._sqlite3_vtab_rhs_value=he.sqlite3_vtab_rhs_value)(y,b,N),r._sqlite3_vtab_distinct=y=>(r._sqlite3_vtab_distinct=he.sqlite3_vtab_distinct)(y),r._sqlite3_keyword_name=(y,b,N)=>(r._sqlite3_keyword_name=he.sqlite3_keyword_name)(y,b,N),r._sqlite3_keyword_count=()=>(r._sqlite3_keyword_count=he.sqlite3_keyword_count)(),r._sqlite3_keyword_check=(y,b)=>(r._sqlite3_keyword_check=he.sqlite3_keyword_check)(y,b),r._sqlite3_complete=y=>(r._sqlite3_complete=he.sqlite3_complete)(y),r._sqlite3_libversion=()=>(r._sqlite3_libversion=he.sqlite3_libversion)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=he.sqlite3_libversion_number)(),r._sqlite3_shutdown=()=>(r._sqlite3_shutdown=he.sqlite3_shutdown)(),r._sqlite3_last_insert_rowid=y=>(r._sqlite3_last_insert_rowid=he.sqlite3_last_insert_rowid)(y),r._sqlite3_set_last_insert_rowid=(y,b)=>(r._sqlite3_set_last_insert_rowid=he.sqlite3_set_last_insert_rowid)(y,b),r._sqlite3_changes64=y=>(r._sqlite3_changes64=he.sqlite3_changes64)(y),r._sqlite3_changes=y=>(r._sqlite3_changes=he.sqlite3_changes)(y),r._sqlite3_total_changes64=y=>(r._sqlite3_total_changes64=he.sqlite3_total_changes64)(y),r._sqlite3_total_changes=y=>(r._sqlite3_total_changes=he.sqlite3_total_changes)(y),r._sqlite3_txn_state=(y,b)=>(r._sqlite3_txn_state=he.sqlite3_txn_state)(y,b),r._sqlite3_close_v2=y=>(r._sqlite3_close_v2=he.sqlite3_close_v2)(y),r._sqlite3_busy_handler=(y,b,N)=>(r._sqlite3_busy_handler=he.sqlite3_busy_handler)(y,b,N),r._sqlite3_progress_handler=(y,b,N,T)=>(r._sqlite3_progress_handler=he.sqlite3_progress_handler)(y,b,N,T),r._sqlite3_busy_timeout=(y,b)=>(r._sqlite3_busy_timeout=he.sqlite3_busy_timeout)(y,b),r._sqlite3_interrupt=y=>(r._sqlite3_interrupt=he.sqlite3_interrupt)(y),r._sqlite3_is_interrupted=y=>(r._sqlite3_is_interrupted=he.sqlite3_is_interrupted)(y),r._sqlite3_create_function=(y,b,N,T,A,U,fe,me)=>(r._sqlite3_create_function=he.sqlite3_create_function)(y,b,N,T,A,U,fe,me),r._sqlite3_create_function_v2=(y,b,N,T,A,U,fe,me,Ge)=>(r._sqlite3_create_function_v2=he.sqlite3_create_function_v2)(y,b,N,T,A,U,fe,me,Ge),r._sqlite3_create_window_function=(y,b,N,T,A,U,fe,me,Ge,tt)=>(r._sqlite3_create_window_function=he.sqlite3_create_window_function)(y,b,N,T,A,U,fe,me,Ge,tt),r._sqlite3_overload_function=(y,b,N)=>(r._sqlite3_overload_function=he.sqlite3_overload_function)(y,b,N),r._sqlite3_trace_v2=(y,b,N,T)=>(r._sqlite3_trace_v2=he.sqlite3_trace_v2)(y,b,N,T),r._sqlite3_commit_hook=(y,b,N)=>(r._sqlite3_commit_hook=he.sqlite3_commit_hook)(y,b,N),r._sqlite3_update_hook=(y,b,N)=>(r._sqlite3_update_hook=he.sqlite3_update_hook)(y,b,N),r._sqlite3_rollback_hook=(y,b,N)=>(r._sqlite3_rollback_hook=he.sqlite3_rollback_hook)(y,b,N),r._sqlite3_preupdate_hook=(y,b,N)=>(r._sqlite3_preupdate_hook=he.sqlite3_preupdate_hook)(y,b,N),r._sqlite3_error_offset=y=>(r._sqlite3_error_offset=he.sqlite3_error_offset)(y),r._sqlite3_errcode=y=>(r._sqlite3_errcode=he.sqlite3_errcode)(y),r._sqlite3_extended_errcode=y=>(r._sqlite3_extended_errcode=he.sqlite3_extended_errcode)(y),r._sqlite3_errstr=y=>(r._sqlite3_errstr=he.sqlite3_errstr)(y),r._sqlite3_limit=(y,b,N)=>(r._sqlite3_limit=he.sqlite3_limit)(y,b,N),r._sqlite3_open=(y,b)=>(r._sqlite3_open=he.sqlite3_open)(y,b),r._sqlite3_open_v2=(y,b,N,T)=>(r._sqlite3_open_v2=he.sqlite3_open_v2)(y,b,N,T),r._sqlite3_create_collation=(y,b,N,T,A)=>(r._sqlite3_create_collation=he.sqlite3_create_collation)(y,b,N,T,A),r._sqlite3_create_collation_v2=(y,b,N,T,A,U)=>(r._sqlite3_create_collation_v2=he.sqlite3_create_collation_v2)(y,b,N,T,A,U),r._sqlite3_collation_needed=(y,b,N)=>(r._sqlite3_collation_needed=he.sqlite3_collation_needed)(y,b,N),r._sqlite3_get_autocommit=y=>(r._sqlite3_get_autocommit=he.sqlite3_get_autocommit)(y),r._sqlite3_table_column_metadata=(y,b,N,T,A,U,fe,me,Ge)=>(r._sqlite3_table_column_metadata=he.sqlite3_table_column_metadata)(y,b,N,T,A,U,fe,me,Ge),r._sqlite3_extended_result_codes=(y,b)=>(r._sqlite3_extended_result_codes=he.sqlite3_extended_result_codes)(y,b),r._sqlite3_uri_key=(y,b)=>(r._sqlite3_uri_key=he.sqlite3_uri_key)(y,b),r._sqlite3_uri_int64=(y,b,N)=>(r._sqlite3_uri_int64=he.sqlite3_uri_int64)(y,b,N),r._sqlite3_db_name=(y,b)=>(r._sqlite3_db_name=he.sqlite3_db_name)(y,b),r._sqlite3_db_filename=(y,b)=>(r._sqlite3_db_filename=he.sqlite3_db_filename)(y,b),r._sqlite3_db_readonly=(y,b)=>(r._sqlite3_db_readonly=he.sqlite3_db_readonly)(y,b),r._sqlite3_compileoption_used=y=>(r._sqlite3_compileoption_used=he.sqlite3_compileoption_used)(y),r._sqlite3_compileoption_get=y=>(r._sqlite3_compileoption_get=he.sqlite3_compileoption_get)(y),r._sqlite3session_diff=(y,b,N,T)=>(r._sqlite3session_diff=he.sqlite3session_diff)(y,b,N,T),r._sqlite3session_attach=(y,b)=>(r._sqlite3session_attach=he.sqlite3session_attach)(y,b),r._sqlite3session_create=(y,b,N)=>(r._sqlite3session_create=he.sqlite3session_create)(y,b,N),r._sqlite3session_delete=y=>(r._sqlite3session_delete=he.sqlite3session_delete)(y),r._sqlite3session_table_filter=(y,b,N)=>(r._sqlite3session_table_filter=he.sqlite3session_table_filter)(y,b,N),r._sqlite3session_changeset=(y,b,N)=>(r._sqlite3session_changeset=he.sqlite3session_changeset)(y,b,N),r._sqlite3session_changeset_strm=(y,b,N)=>(r._sqlite3session_changeset_strm=he.sqlite3session_changeset_strm)(y,b,N),r._sqlite3session_patchset_strm=(y,b,N)=>(r._sqlite3session_patchset_strm=he.sqlite3session_patchset_strm)(y,b,N),r._sqlite3session_patchset=(y,b,N)=>(r._sqlite3session_patchset=he.sqlite3session_patchset)(y,b,N),r._sqlite3session_enable=(y,b)=>(r._sqlite3session_enable=he.sqlite3session_enable)(y,b),r._sqlite3session_indirect=(y,b)=>(r._sqlite3session_indirect=he.sqlite3session_indirect)(y,b),r._sqlite3session_isempty=y=>(r._sqlite3session_isempty=he.sqlite3session_isempty)(y),r._sqlite3session_memory_used=y=>(r._sqlite3session_memory_used=he.sqlite3session_memory_used)(y),r._sqlite3session_object_config=(y,b,N)=>(r._sqlite3session_object_config=he.sqlite3session_object_config)(y,b,N),r._sqlite3session_changeset_size=y=>(r._sqlite3session_changeset_size=he.sqlite3session_changeset_size)(y),r._sqlite3changeset_start=(y,b,N)=>(r._sqlite3changeset_start=he.sqlite3changeset_start)(y,b,N),r._sqlite3changeset_start_v2=(y,b,N,T)=>(r._sqlite3changeset_start_v2=he.sqlite3changeset_start_v2)(y,b,N,T),r._sqlite3changeset_start_strm=(y,b,N)=>(r._sqlite3changeset_start_strm=he.sqlite3changeset_start_strm)(y,b,N),r._sqlite3changeset_start_v2_strm=(y,b,N,T)=>(r._sqlite3changeset_start_v2_strm=he.sqlite3changeset_start_v2_strm)(y,b,N,T),r._sqlite3changeset_next=y=>(r._sqlite3changeset_next=he.sqlite3changeset_next)(y),r._sqlite3changeset_op=(y,b,N,T,A)=>(r._sqlite3changeset_op=he.sqlite3changeset_op)(y,b,N,T,A),r._sqlite3changeset_pk=(y,b,N)=>(r._sqlite3changeset_pk=he.sqlite3changeset_pk)(y,b,N),r._sqlite3changeset_old=(y,b,N)=>(r._sqlite3changeset_old=he.sqlite3changeset_old)(y,b,N),r._sqlite3changeset_new=(y,b,N)=>(r._sqlite3changeset_new=he.sqlite3changeset_new)(y,b,N),r._sqlite3changeset_conflict=(y,b,N)=>(r._sqlite3changeset_conflict=he.sqlite3changeset_conflict)(y,b,N),r._sqlite3changeset_fk_conflicts=(y,b)=>(r._sqlite3changeset_fk_conflicts=he.sqlite3changeset_fk_conflicts)(y,b),r._sqlite3changeset_finalize=y=>(r._sqlite3changeset_finalize=he.sqlite3changeset_finalize)(y),r._sqlite3changeset_invert=(y,b,N,T)=>(r._sqlite3changeset_invert=he.sqlite3changeset_invert)(y,b,N,T),r._sqlite3changeset_invert_strm=(y,b,N,T)=>(r._sqlite3changeset_invert_strm=he.sqlite3changeset_invert_strm)(y,b,N,T),r._sqlite3changeset_apply_v2=(y,b,N,T,A,U,fe,me,Ge)=>(r._sqlite3changeset_apply_v2=he.sqlite3changeset_apply_v2)(y,b,N,T,A,U,fe,me,Ge),r._sqlite3changeset_apply=(y,b,N,T,A,U)=>(r._sqlite3changeset_apply=he.sqlite3changeset_apply)(y,b,N,T,A,U),r._sqlite3changeset_apply_v2_strm=(y,b,N,T,A,U,fe,me,Ge)=>(r._sqlite3changeset_apply_v2_strm=he.sqlite3changeset_apply_v2_strm)(y,b,N,T,A,U,fe,me,Ge),r._sqlite3changeset_apply_strm=(y,b,N,T,A,U)=>(r._sqlite3changeset_apply_strm=he.sqlite3changeset_apply_strm)(y,b,N,T,A,U),r._sqlite3changegroup_new=y=>(r._sqlite3changegroup_new=he.sqlite3changegroup_new)(y),r._sqlite3changegroup_add=(y,b,N)=>(r._sqlite3changegroup_add=he.sqlite3changegroup_add)(y,b,N),r._sqlite3changegroup_output=(y,b,N)=>(r._sqlite3changegroup_output=he.sqlite3changegroup_output)(y,b,N),r._sqlite3changegroup_add_strm=(y,b,N)=>(r._sqlite3changegroup_add_strm=he.sqlite3changegroup_add_strm)(y,b,N),r._sqlite3changegroup_output_strm=(y,b,N)=>(r._sqlite3changegroup_output_strm=he.sqlite3changegroup_output_strm)(y,b,N),r._sqlite3changegroup_delete=y=>(r._sqlite3changegroup_delete=he.sqlite3changegroup_delete)(y),r._sqlite3changeset_concat=(y,b,N,T,A,U)=>(r._sqlite3changeset_concat=he.sqlite3changeset_concat)(y,b,N,T,A,U),r._sqlite3changeset_concat_strm=(y,b,N,T,A,U)=>(r._sqlite3changeset_concat_strm=he.sqlite3changeset_concat_strm)(y,b,N,T,A,U),r._sqlite3session_config=(y,b)=>(r._sqlite3session_config=he.sqlite3session_config)(y,b),r._sqlite3_sourceid=()=>(r._sqlite3_sourceid=he.sqlite3_sourceid)(),r._sqlite3__wasm_pstack_ptr=()=>(r._sqlite3__wasm_pstack_ptr=he.sqlite3__wasm_pstack_ptr)(),r._sqlite3__wasm_pstack_restore=y=>(r._sqlite3__wasm_pstack_restore=he.sqlite3__wasm_pstack_restore)(y),r._sqlite3__wasm_pstack_alloc=y=>(r._sqlite3__wasm_pstack_alloc=he.sqlite3__wasm_pstack_alloc)(y),r._sqlite3__wasm_pstack_remaining=()=>(r._sqlite3__wasm_pstack_remaining=he.sqlite3__wasm_pstack_remaining)(),r._sqlite3__wasm_pstack_quota=()=>(r._sqlite3__wasm_pstack_quota=he.sqlite3__wasm_pstack_quota)(),r._sqlite3__wasm_db_error=(y,b,N)=>(r._sqlite3__wasm_db_error=he.sqlite3__wasm_db_error)(y,b,N),r._sqlite3__wasm_test_struct=y=>(r._sqlite3__wasm_test_struct=he.sqlite3__wasm_test_struct)(y),r._sqlite3__wasm_enum_json=()=>(r._sqlite3__wasm_enum_json=he.sqlite3__wasm_enum_json)(),r._sqlite3__wasm_vfs_unlink=(y,b)=>(r._sqlite3__wasm_vfs_unlink=he.sqlite3__wasm_vfs_unlink)(y,b),r._sqlite3__wasm_db_vfs=(y,b)=>(r._sqlite3__wasm_db_vfs=he.sqlite3__wasm_db_vfs)(y,b),r._sqlite3__wasm_db_reset=y=>(r._sqlite3__wasm_db_reset=he.sqlite3__wasm_db_reset)(y),r._sqlite3__wasm_db_export_chunked=(y,b)=>(r._sqlite3__wasm_db_export_chunked=he.sqlite3__wasm_db_export_chunked)(y,b),r._sqlite3__wasm_db_serialize=(y,b,N,T,A)=>(r._sqlite3__wasm_db_serialize=he.sqlite3__wasm_db_serialize)(y,b,N,T,A),r._sqlite3__wasm_vfs_create_file=(y,b,N,T)=>(r._sqlite3__wasm_vfs_create_file=he.sqlite3__wasm_vfs_create_file)(y,b,N,T),r._sqlite3__wasm_posix_create_file=(y,b,N)=>(r._sqlite3__wasm_posix_create_file=he.sqlite3__wasm_posix_create_file)(y,b,N),r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(y,b)=>(r._sqlite3__wasm_kvvfsMakeKeyOnPstack=he.sqlite3__wasm_kvvfsMakeKeyOnPstack)(y,b),r._sqlite3__wasm_kvvfs_methods=()=>(r._sqlite3__wasm_kvvfs_methods=he.sqlite3__wasm_kvvfs_methods)(),r._sqlite3__wasm_vtab_config=(y,b,N)=>(r._sqlite3__wasm_vtab_config=he.sqlite3__wasm_vtab_config)(y,b,N),r._sqlite3__wasm_db_config_ip=(y,b,N,T)=>(r._sqlite3__wasm_db_config_ip=he.sqlite3__wasm_db_config_ip)(y,b,N,T),r._sqlite3__wasm_db_config_pii=(y,b,N,T,A)=>(r._sqlite3__wasm_db_config_pii=he.sqlite3__wasm_db_config_pii)(y,b,N,T,A),r._sqlite3__wasm_db_config_s=(y,b,N)=>(r._sqlite3__wasm_db_config_s=he.sqlite3__wasm_db_config_s)(y,b,N),r._sqlite3__wasm_config_i=(y,b)=>(r._sqlite3__wasm_config_i=he.sqlite3__wasm_config_i)(y,b),r._sqlite3__wasm_config_ii=(y,b,N)=>(r._sqlite3__wasm_config_ii=he.sqlite3__wasm_config_ii)(y,b,N),r._sqlite3__wasm_config_j=(y,b)=>(r._sqlite3__wasm_config_j=he.sqlite3__wasm_config_j)(y,b),r._sqlite3__wasm_qfmt_token=(y,b)=>(r._sqlite3__wasm_qfmt_token=he.sqlite3__wasm_qfmt_token)(y,b),r._sqlite3__wasm_init_wasmfs=y=>(r._sqlite3__wasm_init_wasmfs=he.sqlite3__wasm_init_wasmfs)(y),r._sqlite3__wasm_test_intptr=y=>(r._sqlite3__wasm_test_intptr=he.sqlite3__wasm_test_intptr)(y),r._sqlite3__wasm_test_voidptr=y=>(r._sqlite3__wasm_test_voidptr=he.sqlite3__wasm_test_voidptr)(y),r._sqlite3__wasm_test_int64_max=()=>(r._sqlite3__wasm_test_int64_max=he.sqlite3__wasm_test_int64_max)(),r._sqlite3__wasm_test_int64_min=()=>(r._sqlite3__wasm_test_int64_min=he.sqlite3__wasm_test_int64_min)(),r._sqlite3__wasm_test_int64_times2=y=>(r._sqlite3__wasm_test_int64_times2=he.sqlite3__wasm_test_int64_times2)(y),r._sqlite3__wasm_test_int64_minmax=(y,b)=>(r._sqlite3__wasm_test_int64_minmax=he.sqlite3__wasm_test_int64_minmax)(y,b),r._sqlite3__wasm_test_int64ptr=y=>(r._sqlite3__wasm_test_int64ptr=he.sqlite3__wasm_test_int64ptr)(y),r._sqlite3__wasm_test_stack_overflow=y=>(r._sqlite3__wasm_test_stack_overflow=he.sqlite3__wasm_test_stack_overflow)(y),r._sqlite3__wasm_test_str_hello=y=>(r._sqlite3__wasm_test_str_hello=he.sqlite3__wasm_test_str_hello)(y),r._sqlite3__wasm_SQLTester_strglob=(y,b)=>(r._sqlite3__wasm_SQLTester_strglob=he.sqlite3__wasm_SQLTester_strglob)(y,b),r._malloc=y=>(r._malloc=he.malloc)(y),r._free=y=>(r._free=he.free)(y),r._realloc=(y,b)=>(r._realloc=he.realloc)(y,b);var ip=(y,b)=>(ip=he.emscripten_builtin_memalign)(y,b);r.wasmMemory=C;var ju;de=function y(){ju||sp(),ju||(de=y)};function sp(){if(ce>0||(Z(),ce>0))return;function y(){ju||(ju=!0,r.calledRun=!0,!j&&(le(),i(r),r.onRuntimeInitialized?.(),ie()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),y()},1)):y()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return sp(),r.postRun||(r.postRun=[]),r.postRun.push(function(y){if(globalThis.sqlite3ApiBootstrap=function b(N=globalThis.sqlite3ApiConfig||b.defaultConfig){if(b.sqlite3)return(b.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),b.sqlite3;const T=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof y<"u"&&y.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},N||{});Object.assign(T,{allocExportName:T.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:T.useStdAlloc?"free":"sqlite3_free",reallocExportName:T.useStdAlloc?"realloc":"sqlite3_realloc"},T),["exports","memory","wasmfsOpfsDir"].forEach(K=>{typeof T[K]=="function"&&(T[K]=T[K]())}),delete globalThis.sqlite3ApiConfig,delete b.defaultConfig;const A=Object.create(null),U=Object.create(null),fe=K=>A.sqlite3_js_rc_str&&A.sqlite3_js_rc_str(K)||"Unknown result code #"+K,me=K=>typeof K=="number"&&K===(K|0);class Ge extends Error{constructor(...re){let se;if(re.length)if(me(re[0]))if(se=re[0],re.length===1)super(fe(re[0]));else{const Le=fe(se);typeof re[1]=="object"?super(Le,re[1]):(re[0]=Le+":",super(re.join(" ")))}else re.length===2&&typeof re[1]=="object"?super(...re):super(re.join(" "));this.resultCode=se||A.SQLITE_ERROR,this.name="SQLite3Error"}}Ge.toss=(...K)=>{throw new Ge(...K)};const tt=Ge.toss;T.wasmfsOpfsDir&&!/^\/[^/]+$/.test(T.wasmfsOpfsDir)&&tt("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const at=K=>typeof K!="bigint"&&K===(K|0)&&K<=0x7fffffff&&K>=-0x80000000,mt=function K(re){return K._max||(K._max=BigInt("0x7fffffffffffffff"),K._min=~K._max),re>=K._min&&re<=K._max},Be=K=>K>=-2147483647n-1n&&K<=2147483647n,Oe=function K(re){return K._min||(K._min=Number.MIN_SAFE_INTEGER,K._max=Number.MAX_SAFE_INTEGER),re>=K._min&&re<=K._max},et=K=>K&&K.constructor&&at(K.constructor.BYTES_PER_ELEMENT)?K:!1,ve=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ke=K=>K.buffer instanceof ve,Te=(K,re,se)=>ke(K)?K.slice(re,se):K.subarray(re,se),Ze=K=>K&&(K instanceof Uint8Array||K instanceof Int8Array||K instanceof ArrayBuffer),Qe=K=>K&&(K instanceof Uint8Array||K instanceof Int8Array||K instanceof ArrayBuffer),je=K=>Ze(K)||tt("Value is not of a supported TypedArray type."),Ke=new TextDecoder("utf-8"),It=function(K,re,se){return Ke.decode(Te(K,re,se))},ee=function(K){return Qe(K)?It(K instanceof ArrayBuffer?new Uint8Array(K):K):Array.isArray(K)?K.join(""):(U.isPtr(K)&&(K=U.cstrToJs(K)),K)};class ue extends Error{constructor(...re){re.length===2&&typeof re[1]=="object"?super(...re):re.length?super(re.join(" ")):super("Allocation failed."),this.resultCode=A.SQLITE_NOMEM,this.name="WasmAllocError"}}ue.toss=(...K)=>{throw new ue(...K)},Object.assign(A,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(K,re,se,Le,it,qt,Vt,nn,lt)=>{},sqlite3_create_function:(K,re,se,Le,it,qt,Vt,nn)=>{},sqlite3_create_window_function:(K,re,se,Le,it,qt,Vt,nn,lt,_e)=>{},sqlite3_prepare_v3:(K,re,se,Le,it,qt)=>{},sqlite3_prepare_v2:(K,re,se,Le,it)=>{},sqlite3_exec:(K,re,se,Le,it)=>{},sqlite3_randomness:(K,re)=>{}});const Ee={affirmBindableTypedArray:je,flexibleString:ee,bigIntFits32:Be,bigIntFits64:mt,bigIntFitsDouble:Oe,isBindableTypedArray:Ze,isInt32:at,isSQLableTypedArray:Qe,isTypedArray:et,typedArrayToString:It,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:ke,toss:function(...K){throw new Error(K.join(" "))},toss3:tt,typedArrayPart:Te,affirmDbHeader:function(K){K instanceof ArrayBuffer&&(K=new Uint8Array(K));const re="SQLite format 3";re.length>K.byteLength&&tt("Input does not contain an SQLite3 database header.");for(let se=0;se<re.length;++se)re.charCodeAt(se)!==K[se]&&tt("Input does not contain an SQLite3 database header.")},affirmIsDb:function(K){K instanceof ArrayBuffer&&(K=new Uint8Array(K));const re=K.byteLength;(re<512||re%512!==0)&&tt("Byte array size",re,"is invalid for an SQLite3 db."),Ee.affirmDbHeader(K)}};Object.assign(U,{ptrSizeof:T.wasmPtrSizeof||4,ptrIR:T.wasmPtrIR||"i32",bigIntEnabled:!!T.bigIntEnabled,exports:T.exports||tt("Missing API config.exports (WASM module exports)."),memory:T.memory||T.exports.memory||tt("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),U.allocFromTypedArray=function(K){K instanceof ArrayBuffer&&(K=new Uint8Array(K)),je(K);const re=U.alloc(K.byteLength||1);return U.heapForSize(K.constructor).set(K.byteLength?K:[0],re),re};{const K=T.allocExportName,re=T.deallocExportName,se=T.reallocExportName;for(const Le of[K,re,se])U.exports[Le]instanceof Function||tt("Missing required exports[",Le,"] function.");U.alloc=function Le(it){return Le.impl(it)||ue.toss("Failed to allocate",it," bytes.")},U.alloc.impl=U.exports[K],U.realloc=function Le(it,qt){const Vt=Le.impl(it,qt);return qt?Vt||ue.toss("Failed to reallocate",qt," bytes."):0},U.realloc.impl=U.exports[se],U.dealloc=U.exports[re]}U.compileOptionUsed=function K(re){if(arguments.length){if(Array.isArray(re)){const se={};return re.forEach(Le=>{se[Le]=A.sqlite3_compileoption_used(Le)}),se}else if(typeof re=="object")return Object.keys(re).forEach(se=>{re[se]=A.sqlite3_compileoption_used(se)}),re}else{if(K._result)return K._result;K._opt||(K._rx=/^([^=]+)=(.+)/,K._rxInt=/^-?\d+$/,K._opt=function(Vt,nn){const lt=K._rx.exec(Vt);nn[0]=lt?lt[1]:Vt,nn[1]=lt?K._rxInt.test(lt[2])?+lt[2]:lt[2]:!0});const se={},Le=[0,0];let it=0,qt;for(;qt=A.sqlite3_compileoption_get(it++);)K._opt(qt,Le),se[Le[0]]=Le[1];return K._result=se}return typeof re=="string"?!!A.sqlite3_compileoption_used(re):!1},U.pstack=Object.assign(Object.create(null),{restore:U.exports.sqlite3__wasm_pstack_restore,alloc:function(K){return typeof K=="string"&&!(K=U.sizeofIR(K))&&ue.toss("Invalid value for pstack.alloc(",arguments[0],")"),U.exports.sqlite3__wasm_pstack_alloc(K)||ue.toss("Could not allocate",K,"bytes from the pstack.")},allocChunks:function(K,re){typeof re=="string"&&!(re=U.sizeofIR(re))&&ue.toss("Invalid size value for allocChunks(",arguments[1],")");const se=U.pstack.alloc(K*re),Le=[];let it=0,qt=0;for(;it<K;++it,qt+=re)Le.push(se+qt);return Le},allocPtr:(K=1,re=!0)=>K===1?U.pstack.alloc(re?8:U.ptrSizeof):U.pstack.allocChunks(K,re?8:U.ptrSizeof),call:function(K){const re=U.pstack.pointer;try{return K(pe)}finally{U.pstack.restore(re)}}}),Object.defineProperties(U.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:U.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:U.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:U.exports.sqlite3__wasm_pstack_remaining}}),A.sqlite3_randomness=(...K)=>{if(K.length===1&&Ee.isTypedArray(K[0])&&K[0].BYTES_PER_ELEMENT===1){const re=K[0];if(re.byteLength===0)return U.exports.sqlite3_randomness(0,0),re;const se=U.pstack.pointer;try{let Le=re.byteLength,it=0;const qt=U.exports.sqlite3_randomness,Vt=U.heap8u(),nn=Le<512?Le:512,lt=U.pstack.alloc(nn);do{const _e=Le>nn?nn:Le;qt(_e,lt),re.set(Te(Vt,lt,lt+_e),it),Le-=_e,it+=_e}while(Le>0)}catch(Le){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",Le)}finally{U.pstack.restore(se)}return re}U.exports.sqlite3_randomness(...K)};let st;if(A.sqlite3_wasmfs_opfs_dir=function(){if(st!==void 0)return st;const K=T.wasmfsOpfsDir;if(!K||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return st="";try{return K&&U.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],K)===0?st=K:st=""}catch{return st=""}},A.sqlite3_wasmfs_filename_is_persistent=function(K){const re=A.sqlite3_wasmfs_opfs_dir();return re&&K?K.startsWith(re+"/"):!1},A.sqlite3_js_db_uses_vfs=function(K,re,se=0){try{const Le=A.sqlite3_vfs_find(re);return Le?K?Le===A.sqlite3_js_db_vfs(K,se)?Le:!1:Le===A.sqlite3_vfs_find(0)?Le:!1:!1}catch{return!1}},A.sqlite3_js_vfs_list=function(){const K=[];let re=A.sqlite3_vfs_find(0);for(;re;){const se=new A.sqlite3_vfs(re);K.push(U.cstrToJs(se.$zName)),re=se.$pNext,se.dispose()}return K},A.sqlite3_js_db_export=function(K,re=0){K=U.xWrap.testConvertArg("sqlite3*",K),K||tt("Invalid sqlite3* argument."),U.bigIntEnabled||tt("BigInt64 support is not enabled.");const se=U.scopedAllocPush();let Le;try{const it=U.scopedAlloc(8+U.ptrSizeof),qt=it+8,Vt=re?U.isPtr(re)?re:U.scopedAllocCString(""+re):0;let nn=U.exports.sqlite3__wasm_db_serialize(K,Vt,qt,it,0);nn&&tt("Database serialization failed with code",pe.capi.sqlite3_js_rc_str(nn)),Le=U.peekPtr(qt);const lt=U.peek(it,"i64");return nn=lt?U.heap8u().slice(Le,Le+Number(lt)):new Uint8Array,nn}finally{Le&&U.exports.sqlite3_free(Le),U.scopedAllocPop(se)}},A.sqlite3_js_db_vfs=(K,re=0)=>Ee.sqlite3__wasm_db_vfs(K,re),A.sqlite3_js_aggregate_context=(K,re)=>A.sqlite3_aggregate_context(K,re)||(re?ue.toss("Cannot allocate",re,"bytes for sqlite3_aggregate_context()"):0),A.sqlite3_js_posix_create_file=function(K,re,se){let Le;re&&U.isPtr(re)?Le=re:re instanceof ArrayBuffer||re instanceof Uint8Array?(Le=U.allocFromTypedArray(re),(arguments.length<3||!Ee.isInt32(se)||se<0)&&(se=re.byteLength)):Ge.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!Ee.isInt32(se)||se<0)&&Ge.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const it=Ee.sqlite3__wasm_posix_create_file(K,Le,se);it&&Ge.toss("Creation of file failed with sqlite3 result code",A.sqlite3_js_rc_str(it))}finally{U.dealloc(Le)}},A.sqlite3_js_vfs_create_file=function(K,re,se,Le){T.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let it;se?(U.isPtr(se)?it=se:se instanceof ArrayBuffer&&(se=new Uint8Array(se)),se instanceof Uint8Array?(it=U.allocFromTypedArray(se),(arguments.length<4||!Ee.isInt32(Le)||Le<0)&&(Le=se.byteLength)):Ge.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):it=0,(!Ee.isInt32(Le)||Le<0)&&(U.dealloc(it),Ge.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const qt=Ee.sqlite3__wasm_vfs_create_file(K,re,it,Le);qt&&Ge.toss("Creation of file failed with sqlite3 result code",A.sqlite3_js_rc_str(qt))}finally{U.dealloc(it)}},A.sqlite3_js_sql_to_string=K=>{if(typeof K=="string")return K;const re=ee(v);return re===v?void 0:re},Ee.isUIThread()){const K=function(re){const se=Object.create(null);return se.prefix="kvvfs-"+re,se.stores=[],(re==="session"||re==="")&&se.stores.push(globalThis.sessionStorage),(re==="local"||re==="")&&se.stores.push(globalThis.localStorage),se};A.sqlite3_js_kvvfs_clear=function(re=""){let se=0;const Le=K(re);return Le.stores.forEach(it=>{const qt=[];let Vt;for(Vt=0;Vt<it.length;++Vt){const nn=it.key(Vt);nn.startsWith(Le.prefix)&&qt.push(nn)}qt.forEach(nn=>it.removeItem(nn)),se+=qt.length}),se},A.sqlite3_js_kvvfs_size=function(re=""){let se=0;const Le=K(re);return Le.stores.forEach(it=>{let qt;for(qt=0;qt<it.length;++qt){const Vt=it.key(qt);Vt.startsWith(Le.prefix)&&(se+=Vt.length,se+=it.getItem(Vt).length)}}),se*2}}A.sqlite3_db_config=function(K,re,...se){switch(this.s||(this.s=U.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=U.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=U.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),re){case A.SQLITE_DBCONFIG_ENABLE_FKEY:case A.SQLITE_DBCONFIG_ENABLE_TRIGGER:case A.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case A.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case A.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case A.SQLITE_DBCONFIG_ENABLE_QPSG:case A.SQLITE_DBCONFIG_TRIGGER_EQP:case A.SQLITE_DBCONFIG_RESET_DATABASE:case A.SQLITE_DBCONFIG_DEFENSIVE:case A.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case A.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case A.SQLITE_DBCONFIG_DQS_DML:case A.SQLITE_DBCONFIG_DQS_DDL:case A.SQLITE_DBCONFIG_ENABLE_VIEW:case A.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case A.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case A.SQLITE_DBCONFIG_STMT_SCANSTATUS:case A.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(K,re,se[0],se[1]||0);case A.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(K,re,se[0],se[1],se[2]);case A.SQLITE_DBCONFIG_MAINDBNAME:return this.s(K,re,se[0]);default:return A.SQLITE_MISUSE}}.bind(Object.create(null)),A.sqlite3_value_to_js=function(K,re=!0){let se;const Le=A.sqlite3_value_type(K);switch(Le){case A.SQLITE_INTEGER:U.bigIntEnabled?(se=A.sqlite3_value_int64(K),Ee.bigIntFitsDouble(se)&&(se=Number(se))):se=A.sqlite3_value_double(K);break;case A.SQLITE_FLOAT:se=A.sqlite3_value_double(K);break;case A.SQLITE_TEXT:se=A.sqlite3_value_text(K);break;case A.SQLITE_BLOB:{const it=A.sqlite3_value_bytes(K),qt=A.sqlite3_value_blob(K);it&&!qt&&pe.WasmAllocError.toss("Cannot allocate memory for blob argument of",it,"byte(s)"),se=it?U.heap8u().slice(qt,qt+Number(it)):null;break}case A.SQLITE_NULL:se=null;break;default:re&&tt(A.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",Le),se=void 0}return se},A.sqlite3_values_to_js=function(K,re,se=!0){let Le;const it=[];for(Le=0;Le<K;++Le)it.push(A.sqlite3_value_to_js(U.peekPtr(re+U.ptrSizeof*Le),se));return it},A.sqlite3_result_error_js=function(K,re){re instanceof ue?A.sqlite3_result_error_nomem(K):A.sqlite3_result_error(K,""+re,-1)},A.sqlite3_result_js=function(K,re){if(re instanceof Error){A.sqlite3_result_error_js(K,re);return}try{switch(typeof re){case"undefined":break;case"boolean":A.sqlite3_result_int(K,re?1:0);break;case"bigint":Ee.bigIntFits32(re)?A.sqlite3_result_int(K,Number(re)):Ee.bigIntFitsDouble(re)?A.sqlite3_result_double(K,Number(re)):U.bigIntEnabled?Ee.bigIntFits64(re)?A.sqlite3_result_int64(K,re):tt("BigInt value",re.toString(),"is too BigInt for int64."):tt("BigInt value",re.toString(),"is too BigInt.");break;case"number":{let se;Ee.isInt32(re)?se=A.sqlite3_result_int:U.bigIntEnabled&&Number.isInteger(re)&&Ee.bigIntFits64(BigInt(re))?se=A.sqlite3_result_int64:se=A.sqlite3_result_double,se(K,re);break}case"string":{const[se,Le]=U.allocCString(re,!0);A.sqlite3_result_text(K,se,Le,A.SQLITE_WASM_DEALLOC);break}case"object":if(re===null){A.sqlite3_result_null(K);break}else if(Ee.isBindableTypedArray(re)){const se=U.allocFromTypedArray(re);A.sqlite3_result_blob(K,se,re.byteLength,A.SQLITE_WASM_DEALLOC);break}default:tt("Don't not how to handle this UDF result value:",typeof re,re)}}catch(se){A.sqlite3_result_error_js(K,se)}},A.sqlite3_column_js=function(K,re,se=!0){const Le=A.sqlite3_column_value(K,re);return Le===0?void 0:A.sqlite3_value_to_js(Le,se)};const ae=function(K,re,se){se=A[se],this.ptr?U.pokePtr(this.ptr,0):this.ptr=U.allocPtr();const Le=se(K,re,this.ptr);if(Le)return Ge.toss(Le,arguments[2]+"() failed with code "+Le);const it=U.peekPtr(this.ptr);return it?A.sqlite3_value_to_js(it,!0):void 0}.bind(Object.create(null));A.sqlite3_preupdate_new_js=(K,re)=>ae(K,re,"sqlite3_preupdate_new"),A.sqlite3_preupdate_old_js=(K,re)=>ae(K,re,"sqlite3_preupdate_old"),A.sqlite3changeset_new_js=(K,re)=>ae(K,re,"sqlite3changeset_new"),A.sqlite3changeset_old_js=(K,re)=>ae(K,re,"sqlite3changeset_old");const pe={WasmAllocError:ue,SQLite3Error:Ge,capi:A,util:Ee,wasm:U,config:T,version:Object.create(null),client:void 0,asyncPostInit:async function K(){if(K.isReady instanceof Promise)return K.isReady;let re=b.initializersAsync;delete b.initializersAsync;const se=async()=>(pe.__isUnderTest||(delete pe.util,delete pe.StructBinder),pe),Le=qt=>{throw T.error("an async sqlite3 initializer failed:",qt),qt};if(!re||!re.length)return K.isReady=se().catch(Le);re=re.map(qt=>qt instanceof Function?async Vt=>qt(pe):qt),re.push(se);let it=Promise.resolve(pe);for(;re.length;)it=it.then(re.shift());return K.isReady=it.catch(Le)},scriptInfo:void 0};try{b.initializers.forEach(K=>{K(pe)})}catch(K){throw console.error("sqlite3 bootstrap initializer threw:",K),K}return delete b.initializers,b.sqlite3=pe,pe},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(b){b.bigIntEnabled===void 0&&(b.bigIntEnabled=!!globalThis.BigInt64Array);const N=(...ee)=>{throw new Error(ee.join(" "))};b.exports||Object.defineProperty(b,"exports",{enumerable:!0,configurable:!0,get:()=>b.instance&&b.instance.exports});const T=b.pointerIR||"i32",A=b.ptrSizeof=T==="i32"?4:T==="i64"?8:N("Unhandled ptrSizeof:",T),U=Object.create(null);U.heapSize=0,U.memory=null,U.freeFuncIndexes=[],U.scopedAlloc=[],U.utf8Decoder=new TextDecoder,U.utf8Encoder=new TextEncoder("utf-8"),b.sizeofIR=ee=>{switch(ee){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return A;default:return(""+ee).endsWith("*")?A:void 0}};const fe=function(){if(!U.memory)U.memory=b.memory instanceof WebAssembly.Memory?b.memory:b.exports.memory;else if(U.heapSize===U.memory.buffer.byteLength)return U;const ee=U.memory.buffer;return U.HEAP8=new Int8Array(ee),U.HEAP8U=new Uint8Array(ee),U.HEAP16=new Int16Array(ee),U.HEAP16U=new Uint16Array(ee),U.HEAP32=new Int32Array(ee),U.HEAP32U=new Uint32Array(ee),b.bigIntEnabled&&(U.HEAP64=new BigInt64Array(ee),U.HEAP64U=new BigUint64Array(ee)),U.HEAP32F=new Float32Array(ee),U.HEAP64F=new Float64Array(ee),U.heapSize=ee.byteLength,U};b.heap8=()=>fe().HEAP8,b.heap8u=()=>fe().HEAP8U,b.heap16=()=>fe().HEAP16,b.heap16u=()=>fe().HEAP16U,b.heap32=()=>fe().HEAP32,b.heap32u=()=>fe().HEAP32U,b.heapForSize=function(ee,ue=!0){const Ee=U.memory&&U.heapSize===U.memory.buffer.byteLength?U:fe();switch(ee){case Int8Array:return Ee.HEAP8;case Uint8Array:return Ee.HEAP8U;case Int16Array:return Ee.HEAP16;case Uint16Array:return Ee.HEAP16U;case Int32Array:return Ee.HEAP32;case Uint32Array:return Ee.HEAP32U;case 8:return ue?Ee.HEAP8U:Ee.HEAP8;case 16:return ue?Ee.HEAP16U:Ee.HEAP16;case 32:return ue?Ee.HEAP32U:Ee.HEAP32;case 64:if(Ee.HEAP64)return ue?Ee.HEAP64U:Ee.HEAP64;break;default:if(b.bigIntEnabled){if(ee===globalThis.BigUint64Array)return Ee.HEAP64U;if(ee===globalThis.BigInt64Array)return Ee.HEAP64;break}}N("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},b.functionTable=function(){return b.exports.__indirect_function_table},b.functionEntry=function(ee){const ue=b.functionTable();return ee<ue.length?ue.get(ee):void 0},b.jsFuncToWasm=function ee(ue,Ee){if(ee._||(ee._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(pe,K,re){re<128?pe[K](re):pe[K](re%128|128,re>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(pe){const K=ee._.rxJSig.exec(pe);return K?K[2]:pe.substr(1)},letterType:pe=>ee._.sigTypes[pe]||N("Invalid signature letter:",pe),pushSigType:(pe,K)=>pe.push(ee._.typeCodes[ee._.letterType(K)])}),typeof ue=="string"){const pe=Ee;Ee=ue,ue=pe}const st=ee._.sigParams(Ee),ae=[1,96];ee._.uleb128Encode(ae,"push",st.length);for(const pe of st)ee._.pushSigType(ae,pe);return Ee[0]==="v"?ae.push(0):(ae.push(1),ee._.pushSigType(ae,Ee[0])),ee._.uleb128Encode(ae,"unshift",ae.length),ae.unshift(0,97,115,109,1,0,0,0,1),ae.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(ae)),{e:{f:ue}}).exports.f};const me=function(ue,Ee,st){if(st&&!U.scopedAlloc.length&&N("No scopedAllocPush() scope is active."),typeof ue=="string"){const re=Ee;Ee=ue,ue=re}(typeof Ee!="string"||!(ue instanceof Function))&&N("Invalid arguments: expecting (function,signature) or (signature,function).");const ae=b.functionTable(),pe=ae.length;let K;for(;U.freeFuncIndexes.length&&(K=U.freeFuncIndexes.pop(),ae.get(K));){K=null;continue}K||(K=pe,ae.grow(1));try{return ae.set(K,ue),st&&U.scopedAlloc[U.scopedAlloc.length-1].push(K),K}catch(re){if(!(re instanceof TypeError))throw K===pe&&U.freeFuncIndexes.push(pe),re}try{const re=b.jsFuncToWasm(ue,Ee);ae.set(K,re),st&&U.scopedAlloc[U.scopedAlloc.length-1].push(K)}catch(re){throw K===pe&&U.freeFuncIndexes.push(pe),re}return K};b.installFunction=(ee,ue)=>me(ee,ue,!1),b.scopedInstallFunction=(ee,ue)=>me(ee,ue,!0),b.uninstallFunction=function(ee){if(!ee&&ee!==0)return;const ue=U.freeFuncIndexes,Ee=b.functionTable();ue.push(ee);const st=Ee.get(ee);return Ee.set(ee,null),st},b.peek=function(ue,Ee="i8"){Ee.endsWith("*")&&(Ee=T);const st=U.memory&&U.heapSize===U.memory.buffer.byteLength?U:fe(),ae=Array.isArray(ue)?[]:void 0;let pe;do{switch(ae&&(ue=arguments[0].shift()),Ee){case"i1":case"i8":pe=st.HEAP8[ue>>0];break;case"i16":pe=st.HEAP16[ue>>1];break;case"i32":pe=st.HEAP32[ue>>2];break;case"float":case"f32":pe=st.HEAP32F[ue>>2];break;case"double":case"f64":pe=Number(st.HEAP64F[ue>>3]);break;case"i64":if(b.bigIntEnabled){pe=BigInt(st.HEAP64[ue>>3]);break}default:N("Invalid type for peek():",Ee)}ae&&ae.push(pe)}while(ae&&arguments[0].length);return ae||pe},b.poke=function(ee,ue,Ee="i8"){Ee.endsWith("*")&&(Ee=T);const st=U.memory&&U.heapSize===U.memory.buffer.byteLength?U:fe();for(const ae of Array.isArray(ee)?ee:[ee])switch(Ee){case"i1":case"i8":st.HEAP8[ae>>0]=ue;continue;case"i16":st.HEAP16[ae>>1]=ue;continue;case"i32":st.HEAP32[ae>>2]=ue;continue;case"float":case"f32":st.HEAP32F[ae>>2]=ue;continue;case"double":case"f64":st.HEAP64F[ae>>3]=ue;continue;case"i64":if(st.HEAP64){st.HEAP64[ae>>3]=BigInt(ue);continue}default:N("Invalid type for poke(): "+Ee)}return this},b.peekPtr=(...ee)=>b.peek(ee.length===1?ee[0]:ee,T),b.pokePtr=(ee,ue=0)=>b.poke(ee,ue,T),b.peek8=(...ee)=>b.peek(ee.length===1?ee[0]:ee,"i8"),b.poke8=(ee,ue)=>b.poke(ee,ue,"i8"),b.peek16=(...ee)=>b.peek(ee.length===1?ee[0]:ee,"i16"),b.poke16=(ee,ue)=>b.poke(ee,ue,"i16"),b.peek32=(...ee)=>b.peek(ee.length===1?ee[0]:ee,"i32"),b.poke32=(ee,ue)=>b.poke(ee,ue,"i32"),b.peek64=(...ee)=>b.peek(ee.length===1?ee[0]:ee,"i64"),b.poke64=(ee,ue)=>b.poke(ee,ue,"i64"),b.peek32f=(...ee)=>b.peek(ee.length===1?ee[0]:ee,"f32"),b.poke32f=(ee,ue)=>b.poke(ee,ue,"f32"),b.peek64f=(...ee)=>b.peek(ee.length===1?ee[0]:ee,"f64"),b.poke64f=(ee,ue)=>b.poke(ee,ue,"f64"),b.getMemValue=b.peek,b.getPtrValue=b.peekPtr,b.setMemValue=b.poke,b.setPtrValue=b.pokePtr,b.isPtr32=ee=>typeof ee=="number"&&ee===(ee|0)&&ee>=0,b.isPtr=b.isPtr32,b.cstrlen=function(ee){if(!ee||!b.isPtr(ee))return null;const ue=fe().HEAP8U;let Ee=ee;for(;ue[Ee]!==0;++Ee);return Ee-ee};const Ge=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,tt=function(ee,ue,Ee){return U.utf8Decoder.decode(ee.buffer instanceof Ge?ee.slice(ue,Ee):ee.subarray(ue,Ee))};b.cstrToJs=function(ee){const ue=b.cstrlen(ee);return ue?tt(fe().HEAP8U,ee,ee+ue):ue===null?ue:""},b.jstrlen=function(ee){if(typeof ee!="string")return null;const ue=ee.length;let Ee=0;for(let st=0;st<ue;++st){let ae=ee.charCodeAt(st);ae>=55296&&ae<=57343&&(ae=65536+((ae&1023)<<10)|ee.charCodeAt(++st)&1023),ae<=127?++Ee:ae<=2047?Ee+=2:ae<=65535?Ee+=3:Ee+=4}return Ee},b.jstrcpy=function(ee,ue,Ee=0,st=-1,ae=!0){if((!ue||!(ue instanceof Int8Array)&&!(ue instanceof Uint8Array))&&N("jstrcpy() target must be an Int8Array or Uint8Array."),st<0&&(st=ue.length-Ee),!(st>0)||!(Ee>=0))return 0;let pe=0,K=ee.length;const re=Ee,se=Ee+st-(ae?1:0);for(;pe<K&&Ee<se;++pe){let Le=ee.charCodeAt(pe);if(Le>=55296&&Le<=57343&&(Le=65536+((Le&1023)<<10)|ee.charCodeAt(++pe)&1023),Le<=127){if(Ee>=se)break;ue[Ee++]=Le}else if(Le<=2047){if(Ee+1>=se)break;ue[Ee++]=192|Le>>6,ue[Ee++]=128|Le&63}else if(Le<=65535){if(Ee+2>=se)break;ue[Ee++]=224|Le>>12,ue[Ee++]=128|Le>>6&63,ue[Ee++]=128|Le&63}else{if(Ee+3>=se)break;ue[Ee++]=240|Le>>18,ue[Ee++]=128|Le>>12&63,ue[Ee++]=128|Le>>6&63,ue[Ee++]=128|Le&63}}return ae&&(ue[Ee++]=0),Ee-re},b.cstrncpy=function(ee,ue,Ee){if((!ee||!ue)&&N("cstrncpy() does not accept NULL strings."),Ee<0)Ee=b.cstrlen(strPtr)+1;else if(!(Ee>0))return 0;const st=b.heap8u();let ae=0,pe;for(;ae<Ee&&(pe=st[ue+ae]);++ae)st[ee+ae]=pe;return ae<Ee&&(st[ee+ae++]=0),ae},b.jstrToUintArray=(ee,ue=!1)=>U.utf8Encoder.encode(ue?ee+"\0":ee);const at=(ee,ue)=>{(!(ee.alloc instanceof Function)||!(ee.dealloc instanceof Function))&&N("Object is missing alloc() and/or dealloc() function(s)","required by",ue+"().")},mt=function(ee,ue,Ee,st){if(at(b,st),typeof ee!="string")return null;{const ae=U.utf8Encoder.encode(ee),pe=Ee(ae.length+1),K=fe().HEAP8U;return K.set(ae,pe),K[pe+ae.length]=0,ue?[pe,ae.length]:pe}};b.allocCString=(ee,ue=!1)=>mt(ee,ue,b.alloc,"allocCString()"),b.scopedAllocPush=function(){at(b,"scopedAllocPush");const ee=[];return U.scopedAlloc.push(ee),ee},b.scopedAllocPop=function(ee){at(b,"scopedAllocPop");const ue=arguments.length?U.scopedAlloc.indexOf(ee):U.scopedAlloc.length-1;ue<0&&N("Invalid state object for scopedAllocPop()."),arguments.length===0&&(ee=U.scopedAlloc[ue]),U.scopedAlloc.splice(ue,1);for(let Ee;Ee=ee.pop();)b.functionEntry(Ee)?b.uninstallFunction(Ee):b.dealloc(Ee)},b.scopedAlloc=function(ee){U.scopedAlloc.length||N("No scopedAllocPush() scope is active.");const ue=b.alloc(ee);return U.scopedAlloc[U.scopedAlloc.length-1].push(ue),ue},Object.defineProperty(b.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>U.scopedAlloc.length,set:()=>N("The 'active' property is read-only.")}),b.scopedAllocCString=(ee,ue=!1)=>mt(ee,ue,b.scopedAlloc,"scopedAllocCString()");const Be=function(ee,ue){const Ee=b[ee?"scopedAlloc":"alloc"]((ue.length+1)*b.ptrSizeof);let st=0;return ue.forEach(ae=>{b.pokePtr(Ee+b.ptrSizeof*st++,b[ee?"scopedAllocCString":"allocCString"](""+ae))}),b.pokePtr(Ee+b.ptrSizeof*st,0),Ee};b.scopedAllocMainArgv=ee=>Be(!0,ee),b.allocMainArgv=ee=>Be(!1,ee),b.cArgvToJs=(ee,ue)=>{const Ee=[];for(let st=0;st<ee;++st){const ae=b.peekPtr(ue+b.ptrSizeof*st);Ee.push(ae?b.cstrToJs(ae):null)}return Ee},b.scopedAllocCall=function(ee){b.scopedAllocPush();try{return ee()}finally{b.scopedAllocPop()}};const Oe=function(ee,ue,Ee){at(b,Ee);const st=ue?"i64":T;let ae=b[Ee](ee*(ue?8:A));if(b.poke(ae,0,st),ee===1)return ae;const pe=[ae];for(let K=1;K<ee;++K)ae+=ue?8:A,pe[K]=ae,b.poke(ae,0,st);return pe};b.allocPtr=(ee=1,ue=!0)=>Oe(ee,ue,"alloc"),b.scopedAllocPtr=(ee=1,ue=!0)=>Oe(ee,ue,"scopedAlloc"),b.xGet=function(ee){return b.exports[ee]||N("Cannot find exported symbol:",ee)};const et=(ee,ue)=>N(ee+"() requires",ue,"argument(s).");b.xCall=function(ee,...ue){const Ee=ee instanceof Function?ee:b.xGet(ee);return Ee instanceof Function||N("Exported symbol",ee,"is not a function."),Ee.length!==ue.length&&et(Ee===ee?Ee.name:ee,Ee.length),arguments.length===2&&Array.isArray(arguments[1])?Ee.apply(null,arguments[1]):Ee.apply(null,ue)},U.xWrap=Object.create(null),U.xWrap.convert=Object.create(null),U.xWrap.convert.arg=new Map,U.xWrap.convert.result=new Map;const ve=U.xWrap.convert.arg,ke=U.xWrap.convert.result;b.bigIntEnabled&&ve.set("i64",ee=>BigInt(ee));const Te=T==="i32"?ee=>ee|0:ee=>BigInt(ee)|BigInt(0);ve.set("i32",Te).set("i16",ee=>(ee|0)&65535).set("i8",ee=>(ee|0)&255).set("f32",ee=>Number(ee).valueOf()).set("float",ve.get("f32")).set("f64",ve.get("f32")).set("double",ve.get("f64")).set("int",ve.get("i32")).set("null",ee=>ee).set(null,ve.get("null")).set("**",Te).set("*",Te),ke.set("*",Te).set("pointer",Te).set("number",ee=>Number(ee)).set("void",ee=>{}).set("null",ee=>ee).set(null,ke.get("null"));{const ee=["i8","i16","i32","int","f32","float","f64","double"];b.bigIntEnabled&&ee.push("i64");const ue=ve.get(T);for(const Ee of ee)ve.set(Ee+"*",ue),ke.set(Ee+"*",ue),ke.set(Ee,ve.get(Ee)||N("Missing arg converter:",Ee))}const Ze=function(ee){return typeof ee=="string"?b.scopedAllocCString(ee):ee?Te(ee):null};ve.set("string",Ze).set("utf8",Ze).set("pointer",Ze),ke.set("string",ee=>b.cstrToJs(ee)).set("utf8",ke.get("string")).set("string:dealloc",ee=>{try{return ee?b.cstrToJs(ee):null}finally{b.dealloc(ee)}}).set("utf8:dealloc",ke.get("string:dealloc")).set("json",ee=>JSON.parse(b.cstrToJs(ee))).set("json:dealloc",ee=>{try{return ee?JSON.parse(b.cstrToJs(ee)):null}finally{b.dealloc(ee)}});const Qe=class{constructor(ee){this.name=ee.name||"unnamed adapter"}convertArg(ee,ue,Ee){N("AbstractArgAdapter must be subclassed.")}};ve.FuncPtrAdapter=class Va extends Qe{constructor(ue){super(ue),ve.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",ue),this.name=ue.name||"unnamed",this.signature=ue.signature,ue.contextKey instanceof Function&&(this.contextKey=ue.contextKey,ue.bindScope||(ue.bindScope="context")),this.bindScope=ue.bindScope||N("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Va.bindScopes.indexOf(ue.bindScope)<0&&N("Invalid options.bindScope ("+ue.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Va.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=ue.callProxy instanceof Function?ue.callProxy:void 0}contextKey(ue,Ee){return this}contextMap(ue){const Ee=this.__cmap||(this.__cmap=new Map);let st=Ee.get(ue);return st===void 0&&Ee.set(ue,st=[]),st}convertArg(ue,Ee,st){let ae=this.singleton;if(!ae&&this.isContext&&(ae=this.contextMap(this.contextKey(Ee,st))),ae&&ae[0]===ue)return ae[1];if(ue instanceof Function){this.callProxy&&(ue=this.callProxy(ue));const pe=me(ue,this.signature,this.isTransient);if(Va.debugFuncInstall&&Va.debugOut("FuncPtrAdapter installed",this,this.contextKey(Ee,st),"@"+pe,ue),ae){if(ae[1]){Va.debugFuncInstall&&Va.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ue);try{U.scopedAlloc[U.scopedAlloc.length-1].push(ae[1])}catch{}}ae[0]=ue,ae[1]=pe}return pe}else if(b.isPtr(ue)||ue===null||ue===void 0){if(ae&&ae[1]&&ae[1]!==ue){Va.debugFuncInstall&&Va.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ue);try{U.scopedAlloc[U.scopedAlloc.length-1].push(ae[1])}catch{}ae[0]=ae[1]=ue|0}return ue||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},ve.FuncPtrAdapter.warnOnUse=!1,ve.FuncPtrAdapter.debugFuncInstall=!1,ve.FuncPtrAdapter.debugOut=console.debug.bind(console),ve.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const je=ee=>ve.get(ee)||N("Argument adapter not found:",ee),Ke=ee=>ke.get(ee)||N("Result adapter not found:",ee);U.xWrap.convertArg=(ee,...ue)=>je(ee)(...ue),U.xWrap.convertArgNoCheck=(ee,...ue)=>ve.get(ee)(...ue),U.xWrap.convertResult=(ee,ue)=>ee===null?ue:ee?Ke(ee)(ue):void 0,U.xWrap.convertResultNoCheck=(ee,ue)=>ee===null?ue:ee?ke.get(ee)(ue):void 0,b.xWrap=function(ee,ue,...Ee){arguments.length===3&&Array.isArray(arguments[2])&&(Ee=arguments[2]),b.isPtr(ee)&&(ee=b.functionEntry(ee)||N("Function pointer not found in WASM function table."));const st=ee instanceof Function,ae=st?ee:b.xGet(ee);if(st&&(ee=ae.name||"unnamed function"),Ee.length!==ae.length&&et(ee,ae.length),ue===null&&ae.length===0)return ae;ue!=null&&Ke(ue);for(const K of Ee)K instanceof Qe?ve.set(K,(...re)=>K.convertArg(...re)):je(K);const pe=U.xWrap;return ae.length===0?(...K)=>K.length?et(ee,ae.length):pe.convertResult(ue,ae.call(null)):function(...K){K.length!==ae.length&&et(ee,ae.length);const re=b.scopedAllocPush();try{let se=0;for(;se<K.length;++se)K[se]=pe.convertArgNoCheck(Ee[se],K[se],K,se);return pe.convertResultNoCheck(ue,ae.apply(null,K))}finally{b.scopedAllocPop(re)}}};const It=function(ee,ue,Ee,st,ae,pe){if(typeof Ee=="string"){if(ue===1)return pe.get(Ee);if(ue===2){if(st)st instanceof Function||N(ae,"requires a function argument.");else return delete pe.get(Ee),ee;return pe.set(Ee,st),ee}}N("Invalid arguments to",ae)};return b.xWrap.resultAdapter=function ee(ue,Ee){return It(ee,arguments.length,ue,Ee,"resultAdapter()",ke)},b.xWrap.argAdapter=function ee(ue,Ee){return It(ee,arguments.length,ue,Ee,"argAdapter()",ve)},b.xWrap.FuncPtrAdapter=ve.FuncPtrAdapter,b.xCallWrapped=function(ee,ue,Ee,...st){return Array.isArray(arguments[3])&&(st=arguments[3]),b.xWrap(ee,ue,Ee||[]).apply(null,st||[])},b.xWrap.testConvertArg=U.xWrap.convertArg,b.xWrap.testConvertResult=U.xWrap.convertResult,b},globalThis.WhWasmUtilInstaller.yawl=function(b){const N=()=>fetch(b.uri,{credentials:"same-origin"}),T=this,A=function(fe){if(b.wasmUtilTarget){const me=(...tt)=>{throw new Error(tt.join(" "))},Ge=b.wasmUtilTarget;if(Ge.module=fe.module,Ge.instance=fe.instance,Ge.instance.exports.memory||(Ge.memory=b.imports&&b.imports.env&&b.imports.env.memory||me("Missing 'memory' object!")),!Ge.alloc&&fe.instance.exports.malloc){const tt=fe.instance.exports;Ge.alloc=function(at){return tt.malloc(at)||me("Allocation of",at,"bytes failed.")},Ge.dealloc=function(at){tt.free(at)}}T(Ge)}return b.onload&&b.onload(fe,b),fe};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(N(),b.imports||{}).then(A)}:function(){return N().then(me=>me.arrayBuffer()).then(me=>WebAssembly.instantiate(me,b.imports||{})).then(A)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function b(N){const T=(...We)=>{throw new Error(We.join(" "))};!(N.heap instanceof WebAssembly.Memory)&&!(N.heap instanceof Function)&&T("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(We){N[We]instanceof Function||T("Config option '"+We+"' must be a function.")});const A=b,U=N.heap instanceof Function?N.heap:()=>new Uint8Array(N.heap.buffer),fe=N.alloc,me=N.dealloc,Ge=N.log||console.log.bind(console),tt=N.memberPrefix||"",at=N.memberSuffix||"",mt=N.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!N.bigIntEnabled,Be=globalThis.BigInt,Oe=globalThis.BigInt64Array,et=N.ptrSizeof||4,ve=N.ptrIR||"i32";A.debugFlags||(A.__makeDebugFlags=function(We=null){We&&We.__flags&&(We=We.__flags);const bt=function _t(Tt){return arguments.length===0?_t.__flags:(Tt<0?(delete _t.__flags.getter,delete _t.__flags.setter,delete _t.__flags.alloc,delete _t.__flags.dealloc):(_t.__flags.getter=(1&Tt)!==0,_t.__flags.setter=(2&Tt)!==0,_t.__flags.alloc=(4&Tt)!==0,_t.__flags.dealloc=(8&Tt)!==0),_t._flags)};return Object.defineProperty(bt,"__flags",{iterable:!1,writable:!1,value:Object.create(We)}),We||bt(0),bt},A.debugFlags=A.__makeDebugFlags());const ke=function(){const We=new ArrayBuffer(2);return new DataView(We).setInt16(0,256,!0),new Int16Array(We)[0]===256}(),Te=We=>We[1]==="(",Ze=We=>We==="P",Qe=We=>Te(We)?"p":We[0],je=function(We){switch(Qe(We)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return ve;case"j":return"i64";case"f":return"float";case"d":return"double"}T("Unhandled signature IR:",We)},Ke=Oe?()=>!0:()=>T("BigInt64Array is not available."),It=function(We){switch(Qe(We)){case"p":case"P":case"s":{switch(et){case 4:return"getInt32";case 8:return Ke()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return Ke()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}T("Unhandled DataView getter for signature:",We)},ee=function(We){switch(Qe(We)){case"p":case"P":case"s":{switch(et){case 4:return"setInt32";case 8:return Ke()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return Ke()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}T("Unhandled DataView setter for signature:",We)},ue=function(We){switch(Qe(We)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return Ke()&&Be;case"p":case"P":case"s":switch(et){case 4:return Number;case 8:return Ke()&&Be}break}T("Unhandled DataView set wrapper for signature:",We)},Ee=(We,bt)=>We+"::"+bt,st=function(We,bt){return()=>T(Ee(We,bt),"is read-only.")},ae=new WeakMap,pe="(pointer-is-external)",K=function(We,bt,_t){if(_t||(_t=ae.get(bt)),_t){if(ae.delete(bt),Array.isArray(bt.ondispose)){let Tt;for(;Tt=bt.ondispose.shift();)try{Tt instanceof Function?Tt.call(bt):Tt instanceof Ut?Tt.dispose():typeof Tt=="number"&&me(Tt)}catch(In){console.warn("ondispose() for",We.structName,"@",_t,"threw. NOT propagating it.",In)}}else if(bt.ondispose instanceof Function)try{bt.ondispose()}catch(Tt){console.warn("ondispose() for",We.structName,"@",_t,"threw. NOT propagating it.",Tt)}delete bt.ondispose,We.debugFlags.__flags.dealloc&&Ge("debug.dealloc:",bt[pe]?"EXTERNAL":"",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+_t),bt[pe]||me(_t)}},re=We=>({configurable:!1,writable:!1,iterable:!1,value:We}),se=function(We,bt,_t){let Tt=!_t;_t?Object.defineProperty(bt,pe,re(_t)):(_t=fe(We.structInfo.sizeof),_t||T("Allocation of",We.structName,"structure failed."));try{We.debugFlags.__flags.alloc&&Ge("debug.alloc:",Tt?"":"EXTERNAL",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+_t),Tt&&U().fill(0,_t,_t+We.structInfo.sizeof),ae.set(bt,_t)}catch(In){throw K(We,bt,_t),In}},Le=function(){const We=this.pointer;return We?new Uint8Array(U().slice(We,We+this.structInfo.sizeof)):null},qt=re(We=>tt+We+at),Vt=function(We,bt,_t=!0){let Tt=We.members[bt];if(!Tt&&(tt||at)){for(const In of Object.values(We.members))if(In.key===bt){Tt=In;break}!Tt&&_t&&T(Ee(We.name,bt),"is not a mapped struct member.")}return Tt},nn=function We(bt,_t,Tt=!1){We._||(We._=Qn=>Qn.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const In=Vt(bt.structInfo,_t,!0);return Tt?We._(In.signature):In.signature},lt={configurable:!1,enumerable:!1,get:function(){return ae.get(this)},set:()=>T("Cannot assign the 'pointer' property of a struct.")},_e=re(function(){const We=[];for(const bt of Object.keys(this.structInfo.members))We.push(this.memberKey(bt));return We}),Pe=new TextDecoder("utf-8"),ot=new TextEncoder,pt=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Bt=function(We,bt,_t){return Pe.decode(We.buffer instanceof pt?We.slice(bt,_t):We.subarray(bt,_t))},rn=function(We,bt,_t=!1){const Tt=Vt(We.structInfo,bt,_t);return Tt&&Tt.signature.length===1&&Tt.signature[0]==="s"?Tt:!1},Ae=function(We){We.signature!=="s"&&T("Invalid member type signature for C-string value:",JSON.stringify(We))},nt=function(bt,_t){const Tt=Vt(bt.structInfo,_t,!0);Ae(Tt);const In=bt[Tt.key];if(!In)return null;let Qn=In;const Vn=U();for(;Vn[Qn]!==0;++Qn);return In===Qn?"":Bt(Vn,In,Qn)},dt=function(We,...bt){We.ondispose?Array.isArray(We.ondispose)||(We.ondispose=[We.ondispose]):We.ondispose=[],We.ondispose.push(...bt)},Ct=function(We){const bt=ot.encode(We),_t=fe(bt.length+1);_t||T("Allocation error while duplicating string:",We);const Tt=U();return Tt.set(bt,_t),Tt[_t+bt.length]=0,_t},wt=function(We,bt,_t){const Tt=Vt(We.structInfo,bt,!0);Ae(Tt);const In=Ct(_t);return We[Tt.key]=In,dt(We,In),We},Ut=function(bt,_t){arguments[2]!==re&&T("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:re(bt),structInfo:re(_t)})};Ut.prototype=Object.create(null,{dispose:re(function(){K(this.constructor,this)}),lookupMember:re(function(We,bt=!0){return Vt(this.structInfo,We,bt)}),memberToJsString:re(function(We){return nt(this,We)}),memberIsString:re(function(We,bt=!0){return rn(this,We,bt)}),memberKey:qt,memberKeys:_e,memberSignature:re(function(We,bt=!1){return nn(this,We,bt)}),memoryDump:re(Le),pointer:lt,setMemberCString:re(function(We,bt){return wt(this,We,bt)})}),Object.assign(Ut.prototype,{addOnDispose:function(...We){return dt(this,...We),this}}),Object.defineProperties(Ut,{allocCString:re(Ct),isA:re(We=>We instanceof Ut),hasExternalPointer:re(We=>We instanceof Ut&&!!We[pe]),memberKey:qt});const Sn=We=>Number.isFinite(We)||We instanceof(Be||Number),Pt=function We(bt,_t,Tt){if(!We._){We._={getters:{},setters:{},sw:{}};const vi=["i","c","C","p","P","s","f","d","v()"];mt&&vi.push("j"),vi.forEach(function(to){We._.getters[to]=It(to),We._.setters[to]=ee(to),We._.sw[to]=ue(to)});const Qx=/^[ipPsjfdcC]$/,Jx=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;We.sigCheck=function(to,Zx,lg,op){Object.prototype.hasOwnProperty.call(to,lg)&&T(to.structName,"already has a property named",lg+"."),Qx.test(op)||Jx.test(op)||T("Malformed signature for",Ee(to.structName,Zx)+":",op)}}const In=bt.memberKey(_t);We.sigCheck(bt.prototype,_t,In,Tt.signature),Tt.key=In,Tt.name=_t;const Qn=Qe(Tt.signature),Vn=Ee(bt.prototype.structName,In),Kn=bt.prototype.debugFlags.__flags,Ca=Object.create(null);Ca.configurable=!1,Ca.enumerable=!1,Ca.get=function(){Kn.getter&&Ge("debug.getter:",We._.getters[Qn],"for",je(Qn),Vn,"@",this.pointer,"+",Tt.offset,"sz",Tt.sizeof);let vi=new DataView(U().buffer,this.pointer+Tt.offset,Tt.sizeof)[We._.getters[Qn]](0,ke);return Kn.getter&&Ge("debug.getter:",Vn,"result =",vi),vi},Tt.readOnly?Ca.set=st(bt.prototype.structName,In):Ca.set=function(vi){if(Kn.setter&&Ge("debug.setter:",We._.setters[Qn],"for",je(Qn),Vn,"@",this.pointer,"+",Tt.offset,"sz",Tt.sizeof,vi),this.pointer||T("Cannot set struct property on disposed instance."),vi===null)vi=0;else for(;!Sn(vi);){if(Ze(Tt.signature)&&vi instanceof Ut){vi=vi.pointer||0,Kn.setter&&Ge("debug.setter:",Vn,"resolved to",vi);break}T("Invalid value for pointer-type",Vn+".")}new DataView(U().buffer,this.pointer+Tt.offset,Tt.sizeof)[We._.setters[Qn]](0,We._.sw[Qn](vi),ke)},Object.defineProperty(bt.prototype,In,Ca)},Tr=function We(bt,_t){arguments.length===1?(_t=bt,bt=_t.name):_t.name||(_t.name=bt),bt||T("Struct name is required.");let Tt=!1;Object.keys(_t.members).forEach(Vn=>{const Kn=_t.members[Vn];Kn.sizeof?Kn.sizeof===1?Kn.signature==="c"||Kn.signature==="C"||T("Unexpected sizeof==1 member",Ee(_t.name,Vn),"with signature",Kn.signature):(Kn.sizeof%4!==0&&(console.warn("Invalid struct member description =",Kn,"from",_t),T(bt,"member",Vn,"sizeof is not aligned. sizeof="+Kn.sizeof)),Kn.offset%4!==0&&(console.warn("Invalid struct member description =",Kn,"from",_t),T(bt,"member",Vn,"offset is not aligned. offset="+Kn.offset))):T(bt,"member",Vn,"is missing sizeof."),(!Tt||Tt.offset<Kn.offset)&&(Tt=Kn)}),Tt?_t.sizeof<Tt.offset+Tt.sizeof&&T("Invalid struct config:",bt,"max member offset ("+Tt.offset+") ","extends past end of struct (sizeof="+_t.sizeof+")."):T("No member property descriptions found.");const In=re(A.__makeDebugFlags(We.debugFlags)),Qn=function Vn(Kn){this instanceof Vn?arguments.length?((Kn!==(Kn|0)||Kn<=0)&&T("Invalid pointer value for",bt,"constructor."),se(Vn,this,Kn)):se(Vn,this):T("The",bt,"constructor may only be called via 'new'.")};return Object.defineProperties(Qn,{debugFlags:In,isA:re(Vn=>Vn instanceof Qn),memberKey:qt,memberKeys:_e,methodInfoForKey:re(function(Vn){}),structInfo:re(_t),structName:re(bt)}),Qn.prototype=new Ut(bt,_t,re),Object.defineProperties(Qn.prototype,{debugFlags:In,constructor:re(Qn)}),Object.keys(_t.members).forEach(Vn=>Pt(Qn,Vn,_t.members[Vn])),Qn};return Tr.StructType=Ut,Tr.config=N,Tr.allocCString=Ct,Tr.debugFlags||(Tr.debugFlags=A.__makeDebugFlags(A.debugFlags)),Tr},globalThis.sqlite3ApiBootstrap.initializers.push(function(b){const N=(...ve)=>{throw new Error(ve.join(" "))};b.SQLite3Error.toss;const T=b.capi,A=b.wasm,U=b.util;if(globalThis.WhWasmUtilInstaller(A),delete globalThis.WhWasmUtilInstaller,A.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new A.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(ve,ke)=>ve[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new A.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:ve=>ve[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new A.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:ve=>{let ke;return(Te,Ze,Qe,je)=>{try{const Ke=A.cArgvToJs(Ze,Qe);return ke||(ke=A.cArgvToJs(Ze,je)),ve(Ke,ke)|0}catch(Ke){return Ke.resultCode||T.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new A.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:ve=>ve[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new A.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(ve,ke)=>ve[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new A.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(ve,ke)=>ve[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],A.exports.sqlite3_progress_handler&&A.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new A.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(ve,ke)=>ve[0]}),"*"]]),A.exports.sqlite3_stmt_explain&&A.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),A.exports.sqlite3_set_authorizer&&A.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new A.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(ve,ke)=>ve[0],callProxy:ve=>(ke,Te,Ze,Qe,je,Ke)=>{try{return Ze=Ze&&A.cstrToJs(Ze),Qe=Qe&&A.cstrToJs(Qe),je=je&&A.cstrToJs(je),Ke=Ke&&A.cstrToJs(Ke),ve(ke,Te,Ze,Qe,je,Ke)||0}catch(It){return It.resultCode||T.SQLITE_ERROR}}}),"*"]]),A.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new A.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:ve=>ve[0],callProxy:ve=>(ke,Te,Ze,Qe,je)=>{ve(ke,Te,A.cstrToJs(Ze),A.cstrToJs(Qe),je)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],A.bigIntEnabled&&A.exports.sqlite3_declare_vtab&&A.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),A.bigIntEnabled&&A.exports.sqlite3_preupdate_hook&&A.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new A.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:ve=>ve[0],callProxy:ve=>(ke,Te,Ze,Qe,je,Ke,It)=>{ve(ke,Te,Ze,A.cstrToJs(Qe),A.cstrToJs(je),Ke,It)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),A.bigIntEnabled&&A.exports.sqlite3changegroup_add&&A.exports.sqlite3session_create&&A.exports.sqlite3_preupdate_hook){const ve={signature:"i(ps)",callProxy:ke=>(Te,Ze)=>{try{return ke(Te,A.cstrToJs(Ze))|0}catch(Qe){return Qe.resultCode||T.SQLITE_ERROR}}};A.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new A.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new A.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new A.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new A.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new A.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new A.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new A.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new A.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new A.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new A.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new A.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new A.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new A.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new A.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new A.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new A.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new A.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new A.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new A.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new A.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new A.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new A.xWrap.FuncPtrAdapter({name:"xFilter",...ve,contextKey:(ke,Te)=>ke[0]}),"*"]])}A.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],b.StructBinder=globalThis.Jaccwabyt({heap:A.heap8u,alloc:A.alloc,dealloc:A.dealloc,bigIntEnabled:A.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const ve=A.xWrap.argAdapter("string");A.xWrap.argAdapter("string:flexible",je=>ve(U.flexibleString(je))),A.xWrap.argAdapter("string:static",function(je){return A.isPtr(je)?je:(je=""+je,this[je]||(this[je]=A.allocCString(je)))}.bind(Object.create(null)));const ke=A.xWrap.argAdapter("*"),Te=function(){};A.xWrap.argAdapter("sqlite3_filename",ke)("sqlite3_context*",ke)("sqlite3_value*",ke)("void*",ke)("sqlite3_changegroup*",ke)("sqlite3_changeset_iter*",ke)("sqlite3_session*",ke)("sqlite3_stmt*",je=>ke(je instanceof(b?.oo1?.Stmt||Te)?je.pointer:je))("sqlite3*",je=>ke(je instanceof(b?.oo1?.DB||Te)?je.pointer:je))("sqlite3_vfs*",je=>typeof je=="string"?T.sqlite3_vfs_find(je)||b.SQLite3Error.toss(T.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",je):ke(je instanceof(T.sqlite3_vfs||Te)?je.pointer:je)),A.exports.sqlite3_declare_vtab&&A.xWrap.argAdapter("sqlite3_index_info*",je=>ke(je instanceof(T.sqlite3_index_info||Te)?je.pointer:je))("sqlite3_module*",je=>ke(je instanceof(T.sqlite3_module||Te)?je.pointer:je));const Ze=A.xWrap.resultAdapter("*");A.xWrap.resultAdapter("sqlite3*",Ze)("sqlite3_context*",Ze)("sqlite3_stmt*",Ze)("sqlite3_value*",Ze)("sqlite3_vfs*",Ze)("void*",Ze),A.exports.sqlite3_step.length===0&&(A.xWrap.doArgcCheck=!1,b.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const je of A.bindingSignatures)T[je[0]]=A.xWrap.apply(null,je);for(const je of A.bindingSignatures.wasmInternal)U[je[0]]=A.xWrap.apply(null,je);const Qe=function(je){return()=>N(je+"() is unavailable due to lack","of BigInt support in this build.")};for(const je of A.bindingSignatures.int64)T[je[0]]=A.bigIntEnabled?A.xWrap.apply(null,je):Qe(je[0]);if(delete A.bindingSignatures,A.exports.sqlite3__wasm_db_error){const je=A.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");U.sqlite3__wasm_db_error=function(Ke,It,ee){return It instanceof b.WasmAllocError?(It=T.SQLITE_NOMEM,ee=0):It instanceof Error&&(ee=ee||""+It,It=It.resultCode||T.SQLITE_ERROR),Ke?je(Ke,It,ee):It}}else U.sqlite3__wasm_db_error=function(je,Ke,It){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),Ke}}{const ve=A.xCall("sqlite3__wasm_enum_json");ve||N("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),A.ctype=JSON.parse(A.cstrToJs(ve));const ke=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];A.bigIntEnabled&&ke.push("serialize","session","vtab");for(const Qe of ke)for(const je of Object.entries(A.ctype[Qe]))T[je[0]]=je[1];A.functionEntry(T.SQLITE_WASM_DEALLOC)||N("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+T.SQLITE_WASM_DEALLOC+").");const Te=Object.create(null);for(const Qe of["resultCodes"])for(const je of Object.entries(A.ctype[Qe]))Te[je[1]]=je[0];T.sqlite3_js_rc_str=Qe=>Te[Qe];const Ze=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!U.isUIThread(),sqlite3_index_info:!A.bigIntEnabled,sqlite3_index_constraint:!A.bigIntEnabled,sqlite3_index_orderby:!A.bigIntEnabled,sqlite3_index_constraint_usage:!A.bigIntEnabled});for(const Qe of A.ctype.structs)Ze[Qe.name]||(T[Qe.name]=b.StructBinder(Qe));if(T.sqlite3_index_info){for(const Qe of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])T.sqlite3_index_info[Qe]=T[Qe],delete T[Qe];T.sqlite3_vtab_config=A.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const fe=(ve,ke,Te)=>U.sqlite3__wasm_db_error(ve,T.SQLITE_MISUSE,ke+"() requires "+Te+" argument"+(Te===1?"":"s")+"."),me=ve=>U.sqlite3__wasm_db_error(ve,T.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),Ge=ve=>A.xWrap.argAdapter("sqlite3*")(ve),tt=ve=>A.isPtr(ve)?A.cstrToJs(ve):ve,at=function(ve,ke){ve=Ge(ve);let Te=this.dbMap.get(ve);if(ke)!Te&&ke>0&&this.dbMap.set(ve,Te=Object.create(null));else return this.dbMap.delete(ve),Te;return Te}.bind(Object.assign(Object.create(null),{dbMap:new Map}));at.addCollation=function(ve,ke){const Te=at(ve,1);Te.collation||(Te.collation=new Set),Te.collation.add(tt(ke).toLowerCase())},at._addUDF=function(ve,ke,Te,Ze){ke=tt(ke).toLowerCase();let Qe=Ze.get(ke);Qe||Ze.set(ke,Qe=new Set),Qe.add(Te<0?-1:Te)},at.addFunction=function(ve,ke,Te){const Ze=at(ve,1);Ze.udf||(Ze.udf=new Map),this._addUDF(ve,ke,Te,Ze.udf)},A.exports.sqlite3_create_window_function&&(at.addWindowFunc=function(ve,ke,Te){const Ze=at(ve,1);Ze.wudf||(Ze.wudf=new Map),this._addUDF(ve,ke,Te,Ze.wudf)}),at.cleanup=function(ve){ve=Ge(ve);const ke=[ve];for(const Qe of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const je=A.exports[Qe];if(je){ke.length=je.length;try{T[Qe](...ke)}catch(Ke){b.config.warn("close-time call of",Qe+"(",ke,") threw:",Ke)}}}const Te=at(ve,0);if(!Te)return;if(Te.collation){for(const Qe of Te.collation)try{T.sqlite3_create_collation_v2(ve,Qe,T.SQLITE_UTF8,0,0,0)}catch{}delete Te.collation}let Ze;for(Ze=0;Ze<2;++Ze){const Qe=Ze?Te.wudf:Te.udf;if(!Qe)continue;const je=Ze?T.sqlite3_create_window_function:T.sqlite3_create_function_v2;for(const Ke of Qe){const It=Ke[0],ee=Ke[1],ue=[ve,It,0,T.SQLITE_UTF8,0,0,0,0,0];Ze&&ue.push(0);for(const Ee of ee)try{ue[2]=Ee,je.apply(null,ue)}catch{}ee.clear()}Qe.clear()}delete Te.udf,delete Te.wudf};{const ve=A.xWrap("sqlite3_close_v2","int","sqlite3*");T.sqlite3_close_v2=function(ke){if(arguments.length!==1)return fe(ke,"sqlite3_close_v2",1);if(ke)try{at.cleanup(ke)}catch{}return ve(ke)}}if(T.sqlite3session_create){const ve=A.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);T.sqlite3session_delete=function(ke){if(arguments.length!==1)return fe(pDb,"sqlite3session_delete",1);ke&&T.sqlite3session_table_filter(ke,0,0),ve(ke)}}{const ve=(Te,Ze)=>"argv["+Ze+"]:"+Te[0]+":"+A.cstrToJs(Te[1]).toLowerCase(),ke=A.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new A.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:ve}),new A.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:ve})]);T.sqlite3_create_collation_v2=function(Te,Ze,Qe,je,Ke,It){if(arguments.length!==6)return fe(Te,"sqlite3_create_collation_v2",6);if(!(Qe&15))Qe|=T.SQLITE_UTF8;else if(T.SQLITE_UTF8!==(Qe&15))return me(Te);try{const ee=ke(Te,Ze,Qe,je,Ke,It);return ee===0&&Ke instanceof Function&&at.addCollation(Te,Ze),ee}catch(ee){return U.sqlite3__wasm_db_error(Te,ee)}},T.sqlite3_create_collation=(Te,Ze,Qe,je,Ke)=>arguments.length===5?T.sqlite3_create_collation_v2(Te,Ze,Qe,je,Ke,0):fe(Te,"sqlite3_create_collation",5)}{const ve=function(Qe,je){return Qe[0]+":"+(Qe[2]<0?-1:Qe[2])+":"+je+":"+A.cstrToJs(Qe[1]).toLowerCase()},ke=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:ve,callProxy:Qe=>(je,Ke,It)=>{try{Qe(je,...T.sqlite3_values_to_js(Ke,It))}catch(ee){T.sqlite3_result_error_js(je,ee)}}},xFinalAndValue:{signature:"v(p)",contextKey:ve,callProxy:Qe=>je=>{try{T.sqlite3_result_js(je,Qe(je))}catch(Ke){T.sqlite3_result_error_js(je,Ke)}}},xFunc:{signature:"v(pip)",contextKey:ve,callProxy:Qe=>(je,Ke,It)=>{try{T.sqlite3_result_js(je,Qe(je,...T.sqlite3_values_to_js(Ke,It)))}catch(ee){T.sqlite3_result_error_js(je,ee)}}},xDestroy:{signature:"v(p)",contextKey:ve,callProxy:Qe=>je=>{try{Qe(je)}catch(Ke){console.error("UDF xDestroy method threw:",Ke)}}}}),Te=A.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new A.xWrap.FuncPtrAdapter({name:"xFunc",...ke.xFunc}),new A.xWrap.FuncPtrAdapter({name:"xStep",...ke.xInverseAndStep}),new A.xWrap.FuncPtrAdapter({name:"xFinal",...ke.xFinalAndValue}),new A.xWrap.FuncPtrAdapter({name:"xDestroy",...ke.xDestroy})]),Ze=A.exports.sqlite3_create_window_function?A.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new A.xWrap.FuncPtrAdapter({name:"xStep",...ke.xInverseAndStep}),new A.xWrap.FuncPtrAdapter({name:"xFinal",...ke.xFinalAndValue}),new A.xWrap.FuncPtrAdapter({name:"xValue",...ke.xFinalAndValue}),new A.xWrap.FuncPtrAdapter({name:"xInverse",...ke.xInverseAndStep}),new A.xWrap.FuncPtrAdapter({name:"xDestroy",...ke.xDestroy})]):void 0;T.sqlite3_create_function_v2=function Qe(je,Ke,It,ee,ue,Ee,st,ae,pe){if(Qe.length!==arguments.length)return fe(je,"sqlite3_create_function_v2",Qe.length);if(!(ee&15))ee|=T.SQLITE_UTF8;else if(T.SQLITE_UTF8!==(ee&15))return me(je);try{const K=Te(je,Ke,It,ee,ue,Ee,st,ae,pe);return K===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function)&&at.addFunction(je,Ke,It),K}catch(K){return console.error("sqlite3_create_function_v2() setup threw:",K),U.sqlite3__wasm_db_error(je,K,"Creation of UDF threw: "+K)}},T.sqlite3_create_function=function Qe(je,Ke,It,ee,ue,Ee,st,ae){return Qe.length===arguments.length?T.sqlite3_create_function_v2(je,Ke,It,ee,ue,Ee,st,ae,0):fe(je,"sqlite3_create_function",Qe.length)},Ze?T.sqlite3_create_window_function=function Qe(je,Ke,It,ee,ue,Ee,st,ae,pe,K){if(Qe.length!==arguments.length)return fe(je,"sqlite3_create_window_function",Qe.length);if(!(ee&15))ee|=T.SQLITE_UTF8;else if(T.SQLITE_UTF8!==(ee&15))return me(je);try{const re=Ze(je,Ke,It,ee,ue,Ee,st,ae,pe,K);return re===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function||K instanceof Function)&&at.addWindowFunc(je,Ke,It),re}catch(re){return console.error("sqlite3_create_window_function() setup threw:",re),U.sqlite3__wasm_db_error(je,re,"Creation of UDF threw: "+re)}}:delete T.sqlite3_create_window_function,T.sqlite3_create_function_v2.udfSetResult=T.sqlite3_create_function.udfSetResult=T.sqlite3_result_js,T.sqlite3_create_window_function&&(T.sqlite3_create_window_function.udfSetResult=T.sqlite3_result_js),T.sqlite3_create_function_v2.udfConvertArgs=T.sqlite3_create_function.udfConvertArgs=T.sqlite3_values_to_js,T.sqlite3_create_window_function&&(T.sqlite3_create_window_function.udfConvertArgs=T.sqlite3_values_to_js),T.sqlite3_create_function_v2.udfSetError=T.sqlite3_create_function.udfSetError=T.sqlite3_result_error_js,T.sqlite3_create_window_function&&(T.sqlite3_create_window_function.udfSetError=T.sqlite3_result_error_js)}{const ve=(Te,Ze)=>(typeof Te=="string"?Ze=-1:U.isSQLableTypedArray(Te)?(Ze=Te.byteLength,Te=U.typedArrayToString(Te instanceof ArrayBuffer?new Uint8Array(Te):Te)):Array.isArray(Te)&&(Te=Te.join(""),Ze=-1),[Te,Ze]),ke={basic:A.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:A.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};T.sqlite3_prepare_v3=function Te(Ze,Qe,je,Ke,It,ee){if(Te.length!==arguments.length)return fe(Ze,"sqlite3_prepare_v3",Te.length);const[ue,Ee]=ve(Qe,je);switch(typeof ue){case"string":return ke.basic(Ze,ue,Ee,Ke,It,null);case"number":return ke.full(Ze,ue,Ee,Ke,It,ee);default:return U.sqlite3__wasm_db_error(Ze,T.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},T.sqlite3_prepare_v2=function Te(Ze,Qe,je,Ke,It){return Te.length===arguments.length?T.sqlite3_prepare_v3(Ze,Qe,je,0,Ke,It):fe(Ze,"sqlite3_prepare_v2",Te.length)}}{const ve=A.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),ke=A.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);T.sqlite3_bind_text=function Te(Ze,Qe,je,Ke,It){if(Te.length!==arguments.length)return fe(T.sqlite3_db_handle(Ze),"sqlite3_bind_text",Te.length);if(A.isPtr(je)||je===null)return ve(Ze,Qe,je,Ke,It);je instanceof ArrayBuffer?je=new Uint8Array(je):Array.isArray(pMem)&&(je=pMem.join(""));let ee,ue;try{if(U.isSQLableTypedArray(je))ee=A.allocFromTypedArray(je),ue=je.byteLength;else if(typeof je=="string")[ee,ue]=A.allocCString(je);else return U.sqlite3__wasm_db_error(T.sqlite3_db_handle(Ze),T.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return ve(Ze,Qe,ee,ue,T.SQLITE_WASM_DEALLOC)}catch(Ee){return A.dealloc(ee),U.sqlite3__wasm_db_error(T.sqlite3_db_handle(Ze),Ee)}},T.sqlite3_bind_blob=function Te(Ze,Qe,je,Ke,It){if(Te.length!==arguments.length)return fe(T.sqlite3_db_handle(Ze),"sqlite3_bind_blob",Te.length);if(A.isPtr(je)||je===null)return ke(Ze,Qe,je,Ke,It);je instanceof ArrayBuffer?je=new Uint8Array(je):Array.isArray(je)&&(je=je.join(""));let ee,ue;try{if(U.isBindableTypedArray(je))ee=A.allocFromTypedArray(je),ue=Ke>=0?Ke:je.byteLength;else if(typeof je=="string")[ee,ue]=A.allocCString(je);else return U.sqlite3__wasm_db_error(T.sqlite3_db_handle(Ze),T.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return ke(Ze,Qe,ee,ue,T.SQLITE_WASM_DEALLOC)}catch(Ee){return A.dealloc(ee),U.sqlite3__wasm_db_error(T.sqlite3_db_handle(Ze),Ee)}}}T.sqlite3_config=function(ve,...ke){if(arguments.length<2)return T.SQLITE_MISUSE;switch(ve){case T.SQLITE_CONFIG_COVERING_INDEX_SCAN:case T.SQLITE_CONFIG_MEMSTATUS:case T.SQLITE_CONFIG_SMALL_MALLOC:case T.SQLITE_CONFIG_SORTERREF_SIZE:case T.SQLITE_CONFIG_STMTJRNL_SPILL:case T.SQLITE_CONFIG_URI:return A.exports.sqlite3__wasm_config_i(ve,ke[0]);case T.SQLITE_CONFIG_LOOKASIDE:return A.exports.sqlite3__wasm_config_ii(ve,ke[0],ke[1]);case T.SQLITE_CONFIG_MEMDB_MAXSIZE:return A.exports.sqlite3__wasm_config_j(ve,ke[0]);case T.SQLITE_CONFIG_GETMALLOC:case T.SQLITE_CONFIG_GETMUTEX:case T.SQLITE_CONFIG_GETPCACHE2:case T.SQLITE_CONFIG_GETPCACHE:case T.SQLITE_CONFIG_HEAP:case T.SQLITE_CONFIG_LOG:case T.SQLITE_CONFIG_MALLOC:case T.SQLITE_CONFIG_MMAP_SIZE:case T.SQLITE_CONFIG_MULTITHREAD:case T.SQLITE_CONFIG_MUTEX:case T.SQLITE_CONFIG_PAGECACHE:case T.SQLITE_CONFIG_PCACHE2:case T.SQLITE_CONFIG_PCACHE:case T.SQLITE_CONFIG_PCACHE_HDRSZ:case T.SQLITE_CONFIG_PMASZ:case T.SQLITE_CONFIG_SERIALIZED:case T.SQLITE_CONFIG_SINGLETHREAD:case T.SQLITE_CONFIG_SQLLOG:case T.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return T.SQLITE_NOTFOUND}};{const ve=new Set;T.sqlite3_auto_extension=function(ke){if(ke instanceof Function)ke=A.installFunction("i(ppp)",ke);else if(arguments.length!==1||!A.isPtr(ke))return T.SQLITE_MISUSE;const Te=A.exports.sqlite3_auto_extension(ke);return ke!==arguments[0]&&(Te===0?ve.add(ke):A.uninstallFunction(ke)),Te},T.sqlite3_cancel_auto_extension=function(ke){return!ke||arguments.length!==1||!A.isPtr(ke)?0:A.exports.sqlite3_cancel_auto_extension(ke)},T.sqlite3_reset_auto_extension=function(){A.exports.sqlite3_reset_auto_extension();for(const ke of ve)A.uninstallFunction(ke);ve.clear()}}const mt=T.sqlite3_vfs_find("kvvfs");if(mt)if(U.isUIThread()){const ve=new T.sqlite3_kvvfs_methods(A.exports.sqlite3__wasm_kvvfs_methods());delete T.sqlite3_kvvfs_methods;const ke=A.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,Te=A.pstack,Ze=je=>A.peek(je)===115?sessionStorage:localStorage,Qe={xRead:(je,Ke,It,ee)=>{const ue=Te.pointer,Ee=A.scopedAllocPush();try{const st=ke(je,Ke);if(!st)return-3;const ae=A.cstrToJs(st),pe=Ze(je).getItem(ae);if(!pe)return-1;const K=pe.length;if(ee<=0)return K;if(ee===1)return A.poke(It,0),K;const re=A.scopedAllocCString(pe);return ee>K+1&&(ee=K+1),A.heap8u().copyWithin(It,re,re+ee-1),A.poke(It+ee-1,0),ee-1}catch(st){return console.error("kvstorageRead()",st),-2}finally{Te.restore(ue),A.scopedAllocPop(Ee)}},xWrite:(je,Ke,It)=>{const ee=Te.pointer;try{const ue=ke(je,Ke);if(!ue)return 1;const Ee=A.cstrToJs(ue);return Ze(je).setItem(Ee,A.cstrToJs(It)),0}catch(ue){return console.error("kvstorageWrite()",ue),T.SQLITE_IOERR}finally{Te.restore(ee)}},xDelete:(je,Ke)=>{const It=Te.pointer;try{const ee=ke(je,Ke);return ee?(Ze(je).removeItem(A.cstrToJs(ee)),0):1}catch(ee){return console.error("kvstorageDelete()",ee),T.SQLITE_IOERR}finally{Te.restore(It)}}};for(const je of Object.keys(Qe))ve[ve.memberKey(je)]=A.installFunction(ve.memberSignature(je),Qe[je])}else T.sqlite3_vfs_unregister(mt);A.xWrap.FuncPtrAdapter.warnOnUse=!0;const Be=b.StructBinder,Oe=function ve(ke,Te,Ze,Qe=ve.installMethodArgcCheck){if(ke instanceof Be.StructType?!(Ze instanceof Function)&&!A.isPtr(Ze)&&N("Usage errror: expecting a Function or WASM pointer to one."):N("Usage error: target object is-not-a StructType."),arguments.length===1)return(ee,ue)=>ve(ke,ee,ue,Qe);ve.argcProxy||(ve.argcProxy=function(ee,ue,Ee,st){return function(...ae){return Ee.length!==arguments.length&&N("Argument mismatch for",ee.structInfo.name+"::"+ue+": Native signature is:",st),Ee.apply(this,ae)}},ve.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((ee,ue)=>{if(typeof ee=="number")try{A.uninstallFunction(ee)}catch{}}),delete this.ondispose.__removeFuncList)});const je=ke.memberSignature(Te);je.length<2&&N("Member",Te,"does not have a function pointer signature:",je);const Ke=ke.memberKey(Te),It=Qe&&!A.isPtr(Ze)?ve.argcProxy(ke,Ke,Ze,je):Ze;if(A.isPtr(It))It&&!A.functionEntry(It)&&N("Pointer",It,"is not a WASM function table entry."),ke[Ke]=It;else{const ee=A.installFunction(It,ke.memberSignature(Te,!0));ke[Ke]=ee,(!ke.ondispose||!ke.ondispose.__removeFuncList)&&(ke.addOnDispose("ondispose.__removeFuncList handler",ve.removeFuncList),ke.ondispose.__removeFuncList=[]),ke.ondispose.__removeFuncList.push(Ke,ee)}return(ee,ue)=>ve(ke,ee,ue,Qe)};Oe.installMethodArgcCheck=!1;const et=function(ve,ke,Te=Oe.installMethodArgcCheck){const Ze=new Map;for(const Qe of Object.keys(ke)){const je=ke[Qe],Ke=Ze.get(je);if(Ke){const It=ve.memberKey(Qe);ve[It]=ve[ve.memberKey(Ke)]}else Oe(ve,Qe,je,Te),Ze.set(je,Qe)}return ve};Be.StructType.prototype.installMethod=function(ke,Te,Ze=Oe.installMethodArgcCheck){return arguments.length<3&&ke&&typeof ke=="object"?et(this,...arguments):Oe(this,...arguments)},Be.StructType.prototype.installMethods=function(ve,ke=Oe.installMethodArgcCheck){return et(this,ve,ke)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){b.version={libVersion:"3.47.1",libVersionNumber:3047001,sourceId:"2024-11-25 12:07:48 b95d11e958643b969c47a8e5857f3793b9e69700b8f1469371386369a26e577e",downloadVersion:3470100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){const N=(...ae)=>{throw new b.SQLite3Error(...ae)},T=b.capi,A=b.wasm,U=b.util,fe=new WeakMap,me=new WeakMap,Ge=(ae,pe,K)=>{const re=Object.getOwnPropertyDescriptor(ae,pe);return re?re.value:K},tt=function(ae,pe){return pe&&(ae instanceof Oe&&(ae=ae.pointer),N(pe,"sqlite3 result code",pe+":",ae?T.sqlite3_errmsg(ae):T.sqlite3_errstr(pe))),arguments[0]},at=A.installFunction("i(ippp)",function(ae,pe,K,re){T.SQLITE_TRACE_STMT===ae&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+pe+":",A.cstrToJs(re))}.bind({counter:0})),mt=Object.create(null),Be=function ae(...pe){if(!ae._name2vfs){ae._name2vfs=Object.create(null);const _e=typeof importScripts=="function"?Pe=>N("The VFS for",Pe,"is only available in the main window thread."):!1;ae._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:_e||(()=>"local")},ae._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:_e||(()=>"session")}}const K=ae.normalizeArgs(...pe);let re=K.filename,se=K.vfs,Le=K.flags;(typeof re!="string"&&typeof re!="number"||typeof Le!="string"||se&&typeof se!="string"&&typeof se!="number")&&(b.config.error("Invalid DB ctor args",K,arguments),N("Invalid arguments for DB constructor."));let it=typeof re=="number"?A.cstrToJs(re):re;const qt=ae._name2vfs[it];qt&&(se=qt.vfs,re=it=qt.filename(it));let Vt,nn=0;Le.indexOf("c")>=0&&(nn|=T.SQLITE_OPEN_CREATE|T.SQLITE_OPEN_READWRITE),Le.indexOf("w")>=0&&(nn|=T.SQLITE_OPEN_READWRITE),nn===0&&(nn|=T.SQLITE_OPEN_READONLY),nn|=T.SQLITE_OPEN_EXRESCODE;const lt=A.pstack.pointer;try{const _e=A.pstack.allocPtr();let Pe=T.sqlite3_open_v2(re,_e,nn,se||0);Vt=A.peekPtr(_e),tt(Vt,Pe),T.sqlite3_extended_result_codes(Vt,1),Le.indexOf("t")>=0&&T.sqlite3_trace_v2(Vt,T.SQLITE_TRACE_STMT,at,Vt)}catch(_e){throw Vt&&T.sqlite3_close_v2(Vt),_e}finally{A.pstack.restore(lt)}this.filename=it,fe.set(this,Vt),me.set(this,Object.create(null));try{const _e=T.sqlite3_js_db_vfs(Vt)||N("Internal error: cannot get VFS for new db handle."),Pe=mt[_e];Pe&&(Pe instanceof Function?Pe(this,b):tt(Vt,T.sqlite3_exec(Vt,Pe,0,0,0)))}catch(_e){throw this.close(),_e}};Be.setVfsPostOpenCallback=function(ae,pe){pe instanceof Function||N("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),mt[ae]=pe},Be.normalizeArgs=function(ae=":memory:",pe="c",K=null){const re={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(re,arguments[0]),re.flags===void 0&&(re.flags="c"),re.vfs===void 0&&(re.vfs=null),re.filename===void 0&&(re.filename=":memory:")):(re.filename=ae,re.flags=pe,re.vfs=K),re};const Oe=function(...ae){Be.apply(this,ae)};Oe.dbCtorHelper=Be;const et={null:1,number:2,string:3,boolean:4,blob:5};et.undefined==et.null,A.bigIntEnabled&&(et.bigint=et.number);const ve=function(){et!==arguments[2]&&N(T.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],fe.set(this,arguments[1]),this.parameterCount=T.sqlite3_bind_parameter_count(this.pointer)},ke=function(ae){return ae.pointer||N("DB has been closed."),ae},Te=function(ae,pe){return(pe!==(pe|0)||pe<0||pe>=ae.columnCount)&&N("Column index",pe,"is out of range."),ae},Ze=function(ae,pe){const K=Object.create(null);switch(K.opt=Object.create(null),pe.length){case 1:typeof pe[0]=="string"||U.isSQLableTypedArray(pe[0])||Array.isArray(pe[0])?K.sql=pe[0]:pe[0]&&typeof pe[0]=="object"&&(K.opt=pe[0],K.sql=K.opt.sql);break;case 2:K.sql=pe[0],K.opt=pe[1];break;default:N("Invalid argument count for exec().")}K.sql=U.flexibleString(K.sql),typeof K.sql!="string"&&N("Missing SQL argument or unsupported SQL value type.");const re=K.opt;switch(re.returnValue){case"resultRows":re.resultRows||(re.resultRows=[]),K.returnVal=()=>re.resultRows;break;case"saveSql":re.saveSql||(re.saveSql=[]),K.returnVal=()=>re.saveSql;break;case void 0:case"this":K.returnVal=()=>ae;break;default:N("Invalid returnValue value:",re.returnValue)}if(!re.callback&&!re.returnValue&&re.rowMode!==void 0&&(re.resultRows||(re.resultRows=[]),K.returnVal=()=>re.resultRows),re.callback||re.resultRows)switch(re.rowMode===void 0?"array":re.rowMode){case"object":K.cbArg=(se,Le)=>{Le.columnNames||(Le.columnNames=se.getColumnNames([]));const it=se.get([]),qt=Object.create(null);for(const Vt in Le.columnNames)qt[Le.columnNames[Vt]]=it[Vt];return qt};break;case"array":K.cbArg=se=>se.get([]);break;case"stmt":Array.isArray(re.resultRows)&&N("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),K.cbArg=se=>se;break;default:if(U.isInt32(re.rowMode)){K.cbArg=se=>se.get(re.rowMode);break}else if(typeof re.rowMode=="string"&&re.rowMode.length>1&&re.rowMode[0]==="$"){const se=re.rowMode.substr(1);K.cbArg=Le=>{const it=Le.get(Object.create(null))[se];return it===void 0?N(T.SQLITE_NOTFOUND,"exec(): unknown result column:",se):it};break}N("Invalid rowMode:",re.rowMode)}return K},Qe=(ae,pe,K,...re)=>{const se=ae.prepare(pe);try{const Le=se.bind(K).step()?se.get(...re):void 0;return se.reset(),Le}finally{se.finalize()}},je=(ae,pe,K,re)=>ae.exec({sql:pe,bind:K,rowMode:re,returnValue:"resultRows"});Oe.checkRc=(ae,pe)=>tt(ae,pe),Oe.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return ke(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const ae=this.pointer;if(Object.keys(me.get(this)).forEach((pe,K)=>{if(K&&K.pointer)try{K.finalize()}catch{}}),fe.delete(this),me.delete(this),T.sqlite3_close_v2(ae),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(ae=!1,pe=!1){const K=ke(this).pointer;return ae?pe?T.sqlite3_total_changes64(K):T.sqlite3_total_changes(K):pe?T.sqlite3_changes64(K):T.sqlite3_changes(K)},dbFilename:function(ae="main"){return T.sqlite3_db_filename(ke(this).pointer,ae)},dbName:function(ae=0){return T.sqlite3_db_name(ke(this).pointer,ae)},dbVfsName:function(ae=0){let pe;const K=T.sqlite3_js_db_vfs(ke(this).pointer,ae);if(K){const re=new T.sqlite3_vfs(K);try{pe=A.cstrToJs(re.$zName)}finally{re.dispose()}}return pe},prepare:function(ae){ke(this);const pe=A.pstack.pointer;let K,re;try{K=A.pstack.alloc(8),Oe.checkRc(this,T.sqlite3_prepare_v2(this.pointer,ae,-1,K,null)),re=A.peekPtr(K)}finally{A.pstack.restore(pe)}re||N("Cannot prepare empty SQL.");const se=new ve(this,re,et);return me.get(this)[re]=se,se},exec:function(){ke(this);const ae=Ze(this,arguments);if(!ae.sql)return N("exec() requires an SQL string.");const pe=ae.opt,K=pe.callback,re=Array.isArray(pe.resultRows)?pe.resultRows:void 0;let se,Le=pe.bind,it=!!(ae.cbArg||pe.columnNames||re);const qt=A.scopedAllocPush(),Vt=Array.isArray(pe.saveSql)?pe.saveSql:void 0;try{const nn=U.isSQLableTypedArray(ae.sql);let lt=nn?ae.sql.byteLength:A.jstrlen(ae.sql);const _e=A.scopedAlloc(2*A.ptrSizeof+(lt+1)),Pe=_e+A.ptrSizeof;let ot=Pe+A.ptrSizeof;const pt=ot+lt;for(nn?A.heap8().set(ae.sql,ot):A.jstrcpy(ae.sql,A.heap8(),ot,lt,!1),A.poke(ot+lt,0);ot&&A.peek(ot,"i8");){A.pokePtr([_e,Pe],0),Oe.checkRc(this,T.sqlite3_prepare_v3(this.pointer,ot,lt,0,_e,Pe));const Bt=A.peekPtr(_e);if(ot=A.peekPtr(Pe),lt=pt-ot,!!Bt){if(Vt&&Vt.push(T.sqlite3_sql(Bt).trim()),se=new ve(this,Bt,et),Le&&se.parameterCount&&(se.bind(Le),Le=null),it&&se.columnCount){let rn=Array.isArray(pe.columnNames)?0:1;if(it=!1,ae.cbArg||re){const Ae=Object.create(null);for(;se.step();se._lockedByExec=!1){rn++===0&&se.getColumnNames(Ae.columnNames=pe.columnNames||[]),se._lockedByExec=!0;const nt=ae.cbArg(se,Ae);if(re&&re.push(nt),K&&K.call(pe,nt,se)===!1)break}se._lockedByExec=!1}rn===0&&se.getColumnNames(pe.columnNames)}else se.step();se.reset().finalize(),se=null}}}finally{A.scopedAllocPop(qt),se&&(delete se._lockedByExec,se.finalize())}return ae.returnVal()},createFunction:function(pe,K,re){const se=Ae=>Ae instanceof Function;switch(arguments.length){case 1:re=pe,pe=re.name,K=re.xFunc||0;break;case 2:se(K)||(re=K,K=re.xFunc||0);break}re||(re={}),typeof pe!="string"&&N("Invalid arguments: missing function name.");let Le=re.xStep||0,it=re.xFinal||0;const qt=re.xValue||0,Vt=re.xInverse||0;let nn;se(K)?(nn=!1,(se(Le)||se(it))&&N("Ambiguous arguments: scalar or aggregate?"),Le=it=null):se(Le)?(se(it)||N("Missing xFinal() callback for aggregate or window UDF."),K=null):se(it)?N("Missing xStep() callback for aggregate or window UDF."):N("Missing function-type properties."),nn===!1?(se(qt)||se(Vt))&&N("xValue and xInverse are not permitted for non-window UDFs."):se(qt)?(se(Vt)||N("xInverse must be provided if xValue is."),nn=!0):se(Vt)&&N("xValue must be provided if xInverse is.");const lt=re.pApp;lt!=null&&(typeof lt!="number"||!U.isInt32(lt))&&N("Invalid value for pApp property. Must be a legal WASM pointer value.");const _e=re.xDestroy||0;_e&&!se(_e)&&N("xDestroy property must be a function.");let Pe=0;Ge(re,"deterministic")&&(Pe|=T.SQLITE_DETERMINISTIC),Ge(re,"directOnly")&&(Pe|=T.SQLITE_DIRECTONLY),Ge(re,"innocuous")&&(Pe|=T.SQLITE_INNOCUOUS),pe=pe.toLowerCase();const ot=K||Le,pt=Ge(re,"arity"),Bt=typeof pt=="number"?pt:ot.length?ot.length-1:0;let rn;return nn?rn=T.sqlite3_create_window_function(this.pointer,pe,Bt,T.SQLITE_UTF8|Pe,lt||0,Le,it,qt,Vt,_e):rn=T.sqlite3_create_function_v2(this.pointer,pe,Bt,T.SQLITE_UTF8|Pe,lt||0,K,Le,it,_e),Oe.checkRc(this,rn),this},selectValue:function(ae,pe,K){return Qe(this,ae,pe,0,K)},selectValues:function(ae,pe,K){const re=this.prepare(ae),se=[];try{for(re.bind(pe);re.step();)se.push(re.get(0,K));re.reset()}finally{re.finalize()}return se},selectArray:function(ae,pe){return Qe(this,ae,pe,[])},selectObject:function(ae,pe){return Qe(this,ae,pe,{})},selectArrays:function(ae,pe){return je(this,ae,pe,"array")},selectObjects:function(ae,pe){return je(this,ae,pe,"object")},openStatementCount:function(){return this.pointer?Object.keys(me.get(this)).length:0},transaction:function(ae){let pe="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&N(T.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),pe+=" "+arguments[0],ae=arguments[1]),ke(this).exec(pe);try{const K=ae(this);return this.exec("COMMIT"),K}catch(K){throw this.exec("ROLLBACK"),K}},savepoint:function(ae){ke(this).exec("SAVEPOINT oo1");try{const pe=ae(this);return this.exec("RELEASE oo1"),pe}catch(pe){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),pe}},checkRc:function(ae){return tt(this,ae)}};const Ke=function(ae){return ae.pointer||N("Stmt has been closed."),ae},It=function(ae){let pe=et[ae==null?"null":typeof ae];switch(pe){case et.boolean:case et.null:case et.number:case et.string:return pe;case et.bigint:if(A.bigIntEnabled)return pe;default:return U.isBindableTypedArray(ae)?et.blob:void 0}},ee=function(ae){return It(ae)||N("Unsupported bind() argument type:",typeof ae)},ue=function(ae,pe){const K=typeof pe=="number"?pe:T.sqlite3_bind_parameter_index(ae.pointer,pe);return K===0||!U.isInt32(K)?N("Invalid bind() parameter name: "+pe):(K<1||K>ae.parameterCount)&&N("Bind index",pe,"is out of range."),K},Ee=function(ae,pe){return ae._lockedByExec&&N("Operation is illegal when statement is locked:",pe),ae},st=function ae(pe,K,re,se){Ee(Ke(pe),"bind()"),ae._||(ae._tooBigInt=it=>N("BigInt value is too big to store without precision loss:",it),ae._={string:function(it,qt,Vt,nn){const[lt,_e]=A.allocCString(Vt,!0);return(nn?T.sqlite3_bind_blob:T.sqlite3_bind_text)(it.pointer,qt,lt,_e,T.SQLITE_WASM_DEALLOC)}}),ee(se),K=ue(pe,K);let Le=0;switch(se==null?et.null:re){case et.null:Le=T.sqlite3_bind_null(pe.pointer,K);break;case et.string:Le=ae._.string(pe,K,se,!1);break;case et.number:{let it;U.isInt32(se)?it=T.sqlite3_bind_int:typeof se=="bigint"?U.bigIntFits64(se)?A.bigIntEnabled?it=T.sqlite3_bind_int64:U.bigIntFitsDouble(se)?(se=Number(se),it=T.sqlite3_bind_double):ae._tooBigInt(se):ae._tooBigInt(se):(se=Number(se),A.bigIntEnabled&&Number.isInteger(se)?it=T.sqlite3_bind_int64:it=T.sqlite3_bind_double),Le=it(pe.pointer,K,se);break}case et.boolean:Le=T.sqlite3_bind_int(pe.pointer,K,se?1:0);break;case et.blob:{if(typeof se=="string"){Le=ae._.string(pe,K,se,!0);break}else se instanceof ArrayBuffer?se=new Uint8Array(se):U.isBindableTypedArray(se)||N("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const it=A.alloc(se.byteLength||1);A.heap8().set(se.byteLength?se:[0],it),Le=T.sqlite3_bind_blob(pe.pointer,K,it,se.byteLength,T.SQLITE_WASM_DEALLOC);break}default:b.config.warn("Unsupported bind() argument type:",se),N("Unsupported bind() argument type: "+typeof se)}return Le&&Oe.checkRc(pe.db.pointer,Le),pe._mayGet=!1,pe};ve.prototype={finalize:function(){if(this.pointer){Ee(this,"finalize()");const ae=T.sqlite3_finalize(this.pointer);return delete me.get(this.db)[this.pointer],fe.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,ae}},clearBindings:function(){return Ee(Ke(this),"clearBindings()"),T.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(ae){Ee(this,"reset()"),ae&&this.clearBindings();const pe=T.sqlite3_reset(Ke(this).pointer);return this._mayGet=!1,tt(this.db,pe),this},bind:function(){Ke(this);let ae,pe;switch(arguments.length){case 1:ae=1,pe=arguments[0];break;case 2:ae=arguments[0],pe=arguments[1];break;default:N("Invalid bind() arguments.")}return pe===void 0?this:(this.parameterCount||N("This statement has no bindable parameters."),this._mayGet=!1,pe===null?st(this,ae,et.null,pe):Array.isArray(pe)?(arguments.length!==1&&N("When binding an array, an index argument is not permitted."),pe.forEach((K,re)=>st(this,re+1,ee(K),K)),this):(pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe)),typeof pe=="object"&&!U.isBindableTypedArray(pe)?(arguments.length!==1&&N("When binding an object, an index argument is not permitted."),Object.keys(pe).forEach(K=>st(this,K,ee(pe[K]),pe[K])),this):st(this,ae,ee(pe),pe)))},bindAsBlob:function(ae,pe){Ke(this),arguments.length===1&&(pe=ae,ae=1);const K=ee(pe);return et.string!==K&&et.blob!==K&&et.null!==K&&N("Invalid value type for bindAsBlob()"),st(this,ae,et.blob,pe)},step:function(){Ee(this,"step()");const ae=T.sqlite3_step(Ke(this).pointer);switch(ae){case T.SQLITE_DONE:return this._mayGet=!1;case T.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,b.config.warn("sqlite3_step() rc=",ae,T.sqlite3_js_rc_str(ae),"SQL =",T.sqlite3_sql(this.pointer)),Oe.checkRc(this.db.pointer,ae)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const ae=this.step();return this.reset(),ae}finally{try{this.finalize()}catch{}}},get:function(ae,pe){if(Ke(this)._mayGet||N("Stmt.step() has not (recently) returned true."),Array.isArray(ae)){let K=0;const re=this.columnCount;for(;K<re;)ae[K]=this.get(K++);return ae}else if(ae&&typeof ae=="object"){let K=0;const re=this.columnCount;for(;K<re;)ae[T.sqlite3_column_name(this.pointer,K)]=this.get(K++);return ae}switch(Te(this,ae),pe===void 0?T.sqlite3_column_type(this.pointer,ae):pe){case T.SQLITE_NULL:return null;case T.SQLITE_INTEGER:if(A.bigIntEnabled){const K=T.sqlite3_column_int64(this.pointer,ae);return K>=Number.MIN_SAFE_INTEGER&&K<=Number.MAX_SAFE_INTEGER?Number(K).valueOf():K}else{const K=T.sqlite3_column_double(this.pointer,ae);return(K>Number.MAX_SAFE_INTEGER||K<Number.MIN_SAFE_INTEGER)&&N("Integer is out of range for JS integer range: "+K),U.isInt32(K)?K|0:K}case T.SQLITE_FLOAT:return T.sqlite3_column_double(this.pointer,ae);case T.SQLITE_TEXT:return T.sqlite3_column_text(this.pointer,ae);case T.SQLITE_BLOB:{const K=T.sqlite3_column_bytes(this.pointer,ae),re=T.sqlite3_column_blob(this.pointer,ae),se=new Uint8Array(K);return K&&se.set(A.heap8u().slice(re,re+K),0),K&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(se.buffer),se}default:N("Don't know how to translate","type of result column #"+ae+".")}N("Not reached.")},getInt:function(ae){return this.get(ae,T.SQLITE_INTEGER)},getFloat:function(ae){return this.get(ae,T.SQLITE_FLOAT)},getString:function(ae){return this.get(ae,T.SQLITE_TEXT)},getBlob:function(ae){return this.get(ae,T.SQLITE_BLOB)},getJSON:function(ae){const pe=this.get(ae,T.SQLITE_STRING);return pe===null?pe:JSON.parse(pe)},getColumnName:function(ae){return T.sqlite3_column_name(Te(Ke(this),ae).pointer,ae)},getColumnNames:function(ae=[]){Te(Ke(this),0);const pe=this.columnCount;for(let K=0;K<pe;++K)ae.push(T.sqlite3_column_name(this.pointer,K));return ae},getParamIndex:function(ae){return Ke(this).parameterCount?T.sqlite3_bind_parameter_index(this.pointer,ae):void 0},getParamName:function(ae){return Ke(this).parameterCount?T.sqlite3_bind_parameter_name(this.pointer,ae):void 0},isBusy:function(){return T.sqlite3_stmt_busy(Ke(this))!==0},isReadOnly:function(){return T.sqlite3_stmt_readonly(Ke(this))!==0}};{const ae={enumerable:!0,get:function(){return fe.get(this)},set:()=>N("The pointer property is read-only.")};Object.defineProperty(ve.prototype,"pointer",ae),Object.defineProperty(Oe.prototype,"pointer",ae)}if(Object.defineProperty(ve.prototype,"columnCount",{enumerable:!1,get:function(){return T.sqlite3_column_count(this.pointer)},set:()=>N("The columnCount property is read-only.")}),b.oo1={DB:Oe,Stmt:ve},U.isUIThread()){b.oo1.JsStorageDb=function(pe="session"){const K=Be.normalizeArgs(...arguments);pe=K.filename,pe!=="session"&&pe!=="local"&&N("JsStorageDb db name must be one of 'session' or 'local'."),K.vfs="kvvfs",Be.call(this,K)};const ae=b.oo1.JsStorageDb;ae.prototype=Object.create(Oe.prototype),ae.clearStorage=T.sqlite3_js_kvvfs_clear,ae.prototype.clearStorage=function(){return ae.clearStorage(ke(this).filename)},ae.storageSize=T.sqlite3_js_kvvfs_size,ae.prototype.storageSize=function(){return ae.storageSize(ke(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){const N=b.util;b.initWorker1API=function(){const T=(...Be)=>{throw new Error(Be.join(" "))};globalThis.WorkerGlobalScope instanceof Function||T("initWorker1API() must be run from a Worker thread.");const A=this.sqlite3||T("Missing this.sqlite3 object."),U=A.oo1.DB,fe=function(Be){let Oe=me.idMap.get(Be);return Oe||(Oe="db#"+ ++me.idSeq+"@"+Be.pointer,me.idMap.set(Be,Oe),Oe)},me={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(Be){const Oe=new U(Be);return this.dbs[fe(Oe)]=Oe,this.dbList.indexOf(Oe)<0&&this.dbList.push(Oe),Oe},close:function(Be,Oe){if(Be){delete this.dbs[fe(Be)];const et=Be.filename,ve=N.sqlite3__wasm_db_vfs(Be.pointer,0);Be.close();const ke=this.dbList.indexOf(Be);ke>=0&&this.dbList.splice(ke,1),Oe&&et&&ve&&N.sqlite3__wasm_vfs_unlink(ve,et)}},post:function(Be,Oe){Oe&&Oe.length?(globalThis.postMessage(Be,Array.from(Oe)),Oe.length=0):globalThis.postMessage(Be)},dbs:Object.create(null),getDb:function(Be,Oe=!0){return this.dbs[Be]||(Oe?T("Unknown (or closed) DB ID:",Be):void 0)}},Ge=function(Be=me.dbList[0]){return Be&&Be.pointer?Be:T("DB is not opened.")},tt=function(Be,Oe=!0){const et=me.getDb(Be.dbId,!1)||me.dbList[0];return Oe?Ge(et):et},at=function(){return me.dbList[0]&&fe(me.dbList[0])},mt={open:function(Be){const Oe=Object.create(null),et=Be.args||Object.create(null);et.simulateError&&T("Throwing because of simulateError flag.");const ve=Object.create(null);Oe.vfs=et.vfs,Oe.filename=et.filename||"";const ke=me.open(Oe);return ve.filename=ke.filename,ve.persistent=!!A.capi.sqlite3_js_db_uses_vfs(ke.pointer,"opfs"),ve.dbId=fe(ke),ve.vfs=ke.dbVfsName(),ve},close:function(Be){const Oe=tt(Be,!1),et={filename:Oe&&Oe.filename};if(Oe){const ve=Be.args&&typeof Be.args=="object"?!!Be.args.unlink:!1;me.close(Oe,ve)}return et},exec:function(Be){const Oe=typeof Be.args=="string"?{sql:Be.args}:Be.args||Object.create(null);Oe.rowMode==="stmt"?T("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):Oe.sql||T("'exec' requires input SQL.");const et=tt(Be);(Oe.callback||Array.isArray(Oe.resultRows))&&(et._blobXfer=me.xfer);const ve=Oe.callback;let ke=0;const Te=!!Oe.columnNames;typeof ve=="string"&&(Te||(Oe.columnNames=[]),Oe.callback=function(Ze,Qe){me.post({type:ve,columnNames:Oe.columnNames,rowNumber:++ke,row:Ze},me.xfer)});try{const Ze=Oe.countChanges?et.changes(!0,Oe.countChanges===64):void 0;et.exec(Oe),Ze!==void 0&&(Oe.changeCount=et.changes(!0,Oe.countChanges===64)-Ze),Oe.callback instanceof Function&&(Oe.callback=ve,me.post({type:ve,columnNames:Oe.columnNames,rowNumber:null,row:void 0}))}finally{delete et._blobXfer,Oe.callback&&(Oe.callback=ve)}return Oe},"config-get":function(){const Be=Object.create(null),Oe=A.config;return["bigIntEnabled"].forEach(function(et){Object.getOwnPropertyDescriptor(Oe,et)&&(Be[et]=Oe[et])}),Be.version=A.version,Be.vfsList=A.capi.sqlite3_js_vfs_list(),Be},export:function(Be){const Oe=tt(Be),et={byteArray:A.capi.sqlite3_js_db_export(Oe.pointer),filename:Oe.filename,mimetype:"application/x-sqlite3"};return me.xfer.push(et.byteArray.buffer),et},toss:function(Be){T("Testing worker exception")}};globalThis.onmessage=async function(Be){Be=Be.data;let Oe,et=Be.dbId,ve=Be.type;const ke=performance.now();try{mt.hasOwnProperty(ve)&&mt[ve]instanceof Function?Oe=await mt[ve](Be):T("Unknown db worker message type:",Be.type)}catch(Te){ve="error",Oe={operation:Be.type,message:Te.message,errorClass:Te.name,input:Be},Te.stack&&(Oe.stack=typeof Te.stack=="string"?Te.stack.split(/\n\s*/):Te.stack)}et||(et=Oe.dbId||at()),me.post({type:ve,dbId:et,messageId:Be.messageId,workerReceivedTime:ke,workerRespondTime:performance.now(),departureTime:Be.departureTime,result:Oe},me.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:b})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){const N=b.wasm,T=b.capi,A=b.util.toss3,U=Object.create(null);b.vfs=U,T.sqlite3_vfs.prototype.registerVfs=function(fe=!1){this instanceof b.capi.sqlite3_vfs||A("Expecting a sqlite3_vfs-type argument.");const me=T.sqlite3_vfs_register(this,fe?1:0);return me&&A("sqlite3_vfs_register(",this,") failed with rc",me),this.pointer!==T.sqlite3_vfs_find(this.$zName)&&A("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},U.installVfs=function(fe){let me=0;const Ge=["io","vfs"];for(const tt of Ge){const at=fe[tt];at&&(++me,at.struct.installMethods(at.methods,!!at.applyArgcCheck),tt==="vfs"&&(!at.struct.$zName&&typeof at.name=="string"&&at.struct.addOnDispose(at.struct.$zName=N.allocCString(at.name)),at.struct.registerVfs(!!at.asDefault)))}return me||A("Misuse: installVfs() options object requires at least","one of:",Ge),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){if(!b.wasm.exports.sqlite3_declare_vtab)return;const N=b.wasm,T=b.capi,A=b.util.toss3,U=Object.create(null);b.vtab=U;const fe=T.sqlite3_index_info;fe.prototype.nthConstraint=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraint+fe.sqlite3_index_constraint.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint(mt)},fe.prototype.nthConstraintUsage=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraintUsage+fe.sqlite3_index_constraint_usage.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint_usage(mt)},fe.prototype.nthOrderBy=function(tt,at=!1){if(tt<0||tt>=this.$nOrderBy)return!1;const mt=this.$aOrderBy+fe.sqlite3_index_orderby.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_orderby(mt)};const me=function(tt,at){return function(mt,Be=!1){if(arguments.length===0&&(mt=new at),mt instanceof at)return this.set(mt.pointer,mt),mt;N.isPtr(mt)||b.SQLite3Error.toss("Invalid argument to",tt+"()");let Oe=this.get(mt);return Be&&this.delete(mt),Oe}.bind(new Map)},Ge=function(tt,at){const mt=me(tt,at);return Object.assign(Object.create(null),{StructType:at,create:Be=>{const Oe=mt();return N.pokePtr(Be,Oe.pointer),Oe},get:Be=>mt(Be),unget:Be=>mt(Be,!0),dispose:Be=>{const Oe=mt(Be,!0);Oe&&Oe.dispose()}})};U.xVtab=Ge("xVtab",T.sqlite3_vtab),U.xCursor=Ge("xCursor",T.sqlite3_vtab_cursor),U.xIndexInfo=tt=>new T.sqlite3_index_info(tt),U.xError=function tt(at,mt,Be){if(tt.errorReporter instanceof Function)try{tt.errorReporter("sqlite3_module::"+at+"(): "+mt.message)}catch{}let Oe;return mt instanceof b.WasmAllocError?Oe=T.SQLITE_NOMEM:arguments.length>2?Oe=Be:mt instanceof b.SQLite3Error&&(Oe=mt.resultCode),Oe||T.SQLITE_ERROR},U.xError.errorReporter=console.error.bind(console),U.xRowid=(tt,at)=>N.poke(tt,at,"i64"),U.setupModule=function(tt){let at=!1;const mt=this instanceof T.sqlite3_module?this:tt.struct||(at=new T.sqlite3_module);try{const Be=tt.methods||A("Missing 'methods' object.");for(const Oe of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const et=Oe[0],ve=Oe[1];Be[et]===!0?Be[et]=Be[ve]:Be[ve]===!0&&(Be[ve]=Be[et])}if(tt.catchExceptions){const Oe=function(ke,Te){return["xConnect","xCreate"].indexOf(ke)>=0?function(Ze,Qe,je,Ke,It,ee){try{return Te(...arguments)||0}catch(ue){return ue instanceof b.WasmAllocError||(N.dealloc(N.peekPtr(ee)),N.pokePtr(ee,N.allocCString(ue.message))),U.xError(ke,ue)}}:function(...Ze){try{return Te(...Ze)||0}catch(Qe){return U.xError(ke,Qe)}}},et=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],ve=Object.create(null);for(const ke of et){const Te=Be[ke];if(Te instanceof Function)ke==="xConnect"&&Be.xCreate===Te?ve[ke]=Be.xCreate:ke==="xCreate"&&Be.xConnect===Te?ve[ke]=Be.xConnect:ve[ke]=Oe(ke,Te);else continue}mt.installMethods(ve,!1)}else mt.installMethods(Be,!!tt.applyArgcCheck);if(mt.$iVersion===0){let Oe;typeof tt.iVersion=="number"?Oe=tt.iVersion:mt.$xShadowName?Oe=3:mt.$xSavePoint||mt.$xRelease||mt.$xRollbackTo?Oe=2:Oe=1,mt.$iVersion=Oe}}catch(Be){throw at&&at.dispose(),Be}return mt},T.sqlite3_module.prototype.setupModule=function(tt){return U.setupModule.call(this,tt)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){const N=function T(A){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!A||typeof A!="object")&&(A=Object.create(null));const U=new URL(globalThis.location.href).searchParams;return U.has("opfs-disable")?Promise.resolve(b):(A.verbose===void 0&&(A.verbose=U.has("opfs-verbose")?+U.get("opfs-verbose")||2:1),A.sanityChecks===void 0&&(A.sanityChecks=U.has("opfs-sanity-check")),A.proxyUri===void 0&&(A.proxyUri=T.defaultProxyUri),typeof A.proxyUri=="function"&&(A.proxyUri=A.proxyUri()),new Promise(function(me,Ge){const tt=[b.config.error,b.config.warn,b.config.log],at=(Ae,...nt)=>{A.verbose>Ae&&tt[Ae]("OPFS syncer:",...nt)},mt=(...Ae)=>at(2,...Ae),Be=(...Ae)=>at(1,...Ae),Oe=(...Ae)=>at(0,...Ae),et=b.util.toss,ve=b.capi,ke=b.util,Te=b.wasm,Ze=ve.sqlite3_vfs,Qe=ve.sqlite3_file,je=ve.sqlite3_io_methods,Ke=Object.create(null),It=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;Ke.metrics={dump:function(){let Ae,nt=0,dt=0,Ct=0;for(Ae in se.opIds){const wt=Le[Ae];nt+=wt.count,dt+=wt.time,Ct+=wt.wait,wt.avgTime=wt.count&&wt.time?wt.time/wt.count:0,wt.avgWait=wt.count&&wt.wait?wt.wait/wt.count:0}b.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",Le,`
Total of`,nt,"op(s) for",dt,"ms (incl. "+Ct+" ms of waiting on the async side)"),b.config.log("Serialization metrics:",Le.s11n),pe.postMessage({type:"opfs-async-metrics"})},reset:function(){let Ae;const nt=Ct=>Ct.count=Ct.time=Ct.wait=0;for(Ae in se.opIds)nt(Le[Ae]=Object.create(null));let dt=Le.s11n=Object.create(null);dt=dt.serialize=Object.create(null),dt.count=dt.time=0,dt=Le.s11n.deserialize=Object.create(null),dt.count=dt.time=0}};const ee=new je,ue=new Ze().addOnDispose(()=>ee.dispose());let Ee;const st=Ae=>(Ee=!0,ue.dispose(),Ge(Ae)),ae=()=>(Ee=!1,me(b)),pe=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-C_otN2ZJ.js",import.meta.url));setTimeout(()=>{Ee===void 0&&st(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),pe._originalOnError=pe.onerror,pe.onerror=function(Ae){Oe("Error initializing OPFS asyncer:",Ae),st(new Error("Loading OPFS async Worker failed for unknown reasons."))};const K=ve.sqlite3_vfs_find(null),re=K?new Ze(K):null;ee.$iVersion=1,ue.$iVersion=2,ue.$szOsFile=ve.sqlite3_file.structInfo.sizeof,ue.$mxPathname=1024,ue.$zName=Te.allocCString("opfs"),ue.$xDlOpen=ue.$xDlError=ue.$xDlSym=ue.$xDlClose=null,ue.addOnDispose("$zName",ue.$zName,"cleanup default VFS wrapper",()=>re?re.dispose():null);const se=Object.create(null);se.verbose=A.verbose,se.littleEndian=(()=>{const Ae=new ArrayBuffer(2);return new DataView(Ae).setInt16(0,256,!0),new Int16Array(Ae)[0]===256})(),se.asyncIdleWaitTime=150,se.asyncS11nExceptions=1,se.fileBufferSize=1024*64,se.sabS11nOffset=se.fileBufferSize,se.sabS11nSize=ue.$mxPathname*2,se.sabIO=new SharedArrayBuffer(se.fileBufferSize+se.sabS11nSize),se.opIds=Object.create(null);const Le=Object.create(null);{let Ae=0;se.opIds.whichOp=Ae++,se.opIds.rc=Ae++,se.opIds.xAccess=Ae++,se.opIds.xClose=Ae++,se.opIds.xDelete=Ae++,se.opIds.xDeleteNoWait=Ae++,se.opIds.xFileSize=Ae++,se.opIds.xLock=Ae++,se.opIds.xOpen=Ae++,se.opIds.xRead=Ae++,se.opIds.xSleep=Ae++,se.opIds.xSync=Ae++,se.opIds.xTruncate=Ae++,se.opIds.xUnlock=Ae++,se.opIds.xWrite=Ae++,se.opIds.mkdir=Ae++,se.opIds["opfs-async-metrics"]=Ae++,se.opIds["opfs-async-shutdown"]=Ae++,se.opIds.retry=Ae++,se.sabOP=new SharedArrayBuffer(Ae*4),Ke.metrics.reset()}se.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(Ae=>{(se.sq3Codes[Ae]=ve[Ae])===void 0&&et("Maintenance required: not found:",Ae)}),se.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const it=(Ae,...nt)=>{const dt=se.opIds[Ae]||et("Invalid op ID:",Ae);se.s11n.serialize(...nt),Atomics.store(se.sabOPView,se.opIds.rc,-1),Atomics.store(se.sabOPView,se.opIds.whichOp,dt),Atomics.notify(se.sabOPView,se.opIds.whichOp);const Ct=performance.now();for(;Atomics.wait(se.sabOPView,se.opIds.rc,-1)!=="not-equal";);const wt=Atomics.load(se.sabOPView,se.opIds.rc);if(Le[Ae].wait+=performance.now()-Ct,wt&&se.asyncS11nExceptions){const Ut=se.s11n.deserialize();Ut&&Oe(Ae+"() async error:",...Ut)}return wt};Ke.debug={asyncShutdown:()=>{Be("Shutting down OPFS async listener. The OPFS VFS will no longer work."),it("opfs-async-shutdown")},asyncRestart:()=>{Be("Attempting to restart OPFS VFS async listener. Might work, might not."),pe.postMessage({type:"opfs-async-restart"})}};const qt=()=>{if(se.s11n)return se.s11n;const Ae=new TextDecoder,nt=new TextEncoder("utf-8"),dt=new Uint8Array(se.sabIO,se.sabS11nOffset,se.sabS11nSize),Ct=new DataView(se.sabIO,se.sabS11nOffset,se.sabS11nSize);se.s11n=Object.create(null);const wt=Object.create(null);wt.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},wt.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},wt.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},wt.string={id:4};const Ut=Pt=>wt[typeof Pt]||et("Maintenance required: this value type cannot be serialized.",Pt),Sn=Pt=>{switch(Pt){case wt.number.id:return wt.number;case wt.bigint.id:return wt.bigint;case wt.boolean.id:return wt.boolean;case wt.string.id:return wt.string;default:et("Invalid type ID:",Pt)}};return se.s11n.deserialize=function(Pt=!1){++Le.s11n.deserialize.count;const Tr=performance.now(),We=dt[0],bt=We?[]:null;if(We){const _t=[];let Tt=1,In,Qn,Vn;for(In=0;In<We;++In,++Tt)_t.push(Sn(dt[Tt]));for(In=0;In<We;++In){const Kn=_t[In];Kn.getter?(Vn=Ct[Kn.getter](Tt,se.littleEndian),Tt+=Kn.size):(Qn=Ct.getInt32(Tt,se.littleEndian),Tt+=4,Vn=Ae.decode(dt.slice(Tt,Tt+Qn)),Tt+=Qn),bt.push(Vn)}}return Pt&&(dt[0]=0),Le.s11n.deserialize.time+=performance.now()-Tr,bt},se.s11n.serialize=function(...Pt){const Tr=performance.now();if(++Le.s11n.serialize.count,Pt.length){const We=[];let bt=0,_t=1;for(dt[0]=Pt.length&255;bt<Pt.length;++bt,++_t)We.push(Ut(Pt[bt])),dt[_t]=We[bt].id;for(bt=0;bt<Pt.length;++bt){const Tt=We[bt];if(Tt.setter)Ct[Tt.setter](_t,Pt[bt],se.littleEndian),_t+=Tt.size;else{const In=nt.encode(Pt[bt]);Ct.setInt32(_t,In.byteLength,se.littleEndian),_t+=4,dt.set(In,_t),_t+=In.byteLength}}}else dt[0]=0;Le.s11n.serialize.time+=performance.now()-Tr},se.s11n},Vt=function Ae(nt=16){Ae._chars||(Ae._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",Ae._n=Ae._chars.length);const dt=[];let Ct=0;for(;Ct<nt;++Ct){const wt=Math.random()*(Ae._n*64)%Ae._n|0;dt[Ct]=Ae._chars[wt]}return dt.join("")},nn=Object.create(null),lt=Object.create(null);lt.op=void 0,lt.start=void 0;const _e=Ae=>{lt.start=performance.now(),lt.op=Ae,++Le[Ae].count},Pe=()=>Le[lt.op].time+=performance.now()-lt.start,ot={xCheckReservedLock:function(Ae,nt){return Te.poke(nt,0,"i32"),0},xClose:function(Ae){_e("xClose");let nt=0;const dt=nn[Ae];return dt&&(delete nn[Ae],nt=it("xClose",Ae),dt.sq3File&&dt.sq3File.dispose()),Pe(),nt},xDeviceCharacteristics:function(Ae){return ve.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(Ae,nt,dt){return ve.SQLITE_NOTFOUND},xFileSize:function(Ae,nt){_e("xFileSize");let dt=it("xFileSize",Ae);if(dt==0)try{const Ct=se.s11n.deserialize()[0];Te.poke(nt,Ct,"i64")}catch(Ct){Oe("Unexpected error reading xFileSize() result:",Ct),dt=se.sq3Codes.SQLITE_IOERR}return Pe(),dt},xLock:function(Ae,nt){_e("xLock");const dt=nn[Ae];let Ct=0;return dt.lockType?dt.lockType=nt:(Ct=it("xLock",Ae,nt),Ct===0&&(dt.lockType=nt)),Pe(),Ct},xRead:function(Ae,nt,dt,Ct){_e("xRead");const wt=nn[Ae];let Ut;try{Ut=it("xRead",Ae,dt,Number(Ct)),(Ut===0||ve.SQLITE_IOERR_SHORT_READ===Ut)&&Te.heap8u().set(wt.sabView.subarray(0,dt),nt)}catch(Sn){Oe("xRead(",arguments,") failed:",Sn,wt),Ut=ve.SQLITE_IOERR_READ}return Pe(),Ut},xSync:function(Ae,nt){_e("xSync"),++Le.xSync.count;const dt=it("xSync",Ae,nt);return Pe(),dt},xTruncate:function(Ae,nt){_e("xTruncate");const dt=it("xTruncate",Ae,Number(nt));return Pe(),dt},xUnlock:function(Ae,nt){_e("xUnlock");const dt=nn[Ae];let Ct=0;return ve.SQLITE_LOCK_NONE===nt&&dt.lockType&&(Ct=it("xUnlock",Ae,nt)),Ct===0&&(dt.lockType=nt),Pe(),Ct},xWrite:function(Ae,nt,dt,Ct){_e("xWrite");const wt=nn[Ae];let Ut;try{wt.sabView.set(Te.heap8u().subarray(nt,nt+dt)),Ut=it("xWrite",Ae,dt,Number(Ct))}catch(Sn){Oe("xWrite(",arguments,") failed:",Sn,wt),Ut=ve.SQLITE_IOERR_WRITE}return Pe(),Ut}},pt={xAccess:function(Ae,nt,dt,Ct){_e("xAccess");const wt=it("xAccess",Te.cstrToJs(nt));return Te.poke(Ct,wt?0:1,"i32"),Pe(),0},xCurrentTime:function(Ae,nt){return Te.poke(nt,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(Ae,nt){return Te.poke(nt,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(Ae,nt,dt){_e("xDelete");const Ct=it("xDelete",Te.cstrToJs(nt),dt,!1);return Pe(),Ct},xFullPathname:function(Ae,nt,dt,Ct){return Te.cstrncpy(Ct,nt,dt)<dt?0:ve.SQLITE_CANTOPEN},xGetLastError:function(Ae,nt,dt){return Be("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(nt,dt,Ct,wt,Ut){_e("xOpen");let Sn=0;dt===0?dt=Vt():Te.isPtr(dt)&&(ve.sqlite3_uri_boolean(dt,"opfs-unlock-asap",0)&&(Sn|=se.opfsFlags.OPFS_UNLOCK_ASAP),ve.sqlite3_uri_boolean(dt,"delete-before-open",0)&&(Sn|=se.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),dt=Te.cstrToJs(dt));const Pt=Object.create(null);Pt.fid=Ct,Pt.filename=dt,Pt.sab=new SharedArrayBuffer(se.fileBufferSize),Pt.flags=wt,Pt.readOnly=!(b.SQLITE_OPEN_CREATE&wt)&&!!(wt&ve.SQLITE_OPEN_READONLY);const Tr=it("xOpen",Ct,dt,wt,Sn);return Tr||(Pt.readOnly&&Te.poke(Ut,ve.SQLITE_OPEN_READONLY,"i32"),nn[Ct]=Pt,Pt.sabView=se.sabFileBufView,Pt.sq3File=new Qe(Ct),Pt.sq3File.$pMethods=ee.pointer,Pt.lockType=ve.SQLITE_LOCK_NONE),Pe(),Tr}};re&&(ue.$xRandomness=re.$xRandomness,ue.$xSleep=re.$xSleep),ue.$xRandomness||(pt.xRandomness=function(Ae,nt,dt){const Ct=Te.heap8u();let wt=0;for(;wt<nt;++wt)Ct[dt+wt]=Math.random()*255e3&255;return wt}),ue.$xSleep||(pt.xSleep=function(Ae,nt){return Atomics.wait(se.sabOPView,se.opIds.xSleep,0,nt),0}),Ke.getResolvedPath=function(Ae,nt){const dt=new URL(Ae,"file://irrelevant").pathname;return nt?dt.split("/").filter(Ct=>!!Ct):dt},Ke.getDirForFilename=async function(nt,dt=!1){const Ct=Ke.getResolvedPath(nt,!0),wt=Ct.pop();let Ut=Ke.rootDirectory;for(const Sn of Ct)Sn&&(Ut=await Ut.getDirectoryHandle(Sn,{create:!!dt}));return[Ut,wt]},Ke.mkdir=async function(Ae){try{return await Ke.getDirForFilename(Ae+"/filepart",!0),!0}catch{return!1}},Ke.entryExists=async function(Ae){try{const[nt,dt]=await Ke.getDirForFilename(Ae);return await nt.getFileHandle(dt),!0}catch{return!1}},Ke.randomFilename=Vt,Ke.treeList=async function(){const Ae=async function dt(Ct,wt){wt.name=Ct.name,wt.dirs=[],wt.files=[];for await(const Ut of Ct.values())if(Ut.kind==="directory"){const Sn=Object.create(null);wt.dirs.push(Sn),await dt(Ut,Sn)}else wt.files.push(Ut.name)},nt=Object.create(null);return await Ae(Ke.rootDirectory,nt),nt},Ke.rmfr=async function(){const Ae=Ke.rootDirectory,nt={recurse:!0};for await(const dt of Ae.values())Ae.removeEntry(dt.name,nt)},Ke.unlink=async function(Ae,nt=!1,dt=!1){try{const[Ct,wt]=await Ke.getDirForFilename(Ae,!1);return await Ct.removeEntry(wt,{recursive:nt}),!0}catch(Ct){if(dt)throw new Error("unlink(",arguments[0],") failed: "+Ct.message,{cause:Ct});return!1}},Ke.traverse=async function(Ae){const nt={recursive:!0,directory:Ke.rootDirectory};typeof Ae=="function"&&(Ae={callback:Ae}),Ae=Object.assign(nt,Ae||{}),async function Ct(wt,Ut){for await(const Sn of wt.values()){if(Ae.callback(Sn,wt,Ut)===!1)return!1;if(Ae.recursive&&Sn.kind==="directory"&&await Ct(Sn,Ut+1)===!1)break}}(Ae.directory,0)};const Bt=async function(Ae,nt){const[dt,Ct]=await Ke.getDirForFilename(Ae,!0);let Ut=await (await dt.getFileHandle(Ct,{create:!0})).createSyncAccessHandle(),Sn=0,Pt,Tr=!1;try{for(Ut.truncate(0);(Pt=await nt())!==void 0;)Pt instanceof ArrayBuffer&&(Pt=new Uint8Array(Pt)),Sn===0&&Pt.byteLength>=15&&(ke.affirmDbHeader(Pt),Tr=!0),Ut.write(Pt,{at:Sn}),Sn+=Pt.byteLength;if((Sn<512||Sn%512!==0)&&et("Input size",Sn,"is not correct for an SQLite database."),!Tr){const We=new Uint8Array(20);Ut.read(We,{at:0}),ke.affirmDbHeader(We)}return Ut.write(new Uint8Array([1,1]),{at:18}),Sn}catch(We){throw await Ut.close(),Ut=void 0,await dt.removeEntry(Ct).catch(()=>{}),We}finally{Ut&&await Ut.close()}};if(Ke.importDb=async function(Ae,nt){if(nt instanceof Function)return Bt(Ae,nt);nt instanceof ArrayBuffer&&(nt=new Uint8Array(nt)),ke.affirmIsDb(nt);const dt=nt.byteLength,[Ct,wt]=await Ke.getDirForFilename(Ae,!0);let Ut,Sn=0;try{return Ut=await (await Ct.getFileHandle(wt,{create:!0})).createSyncAccessHandle(),Ut.truncate(0),Sn=Ut.write(nt,{at:0}),Sn!=dt&&et("Expected to write "+dt+" bytes but wrote "+Sn+"."),Ut.write(new Uint8Array([1,1]),{at:18}),Sn}catch(Pt){throw Ut&&(await Ut.close(),Ut=void 0),await Ct.removeEntry(wt).catch(()=>{}),Pt}finally{Ut&&await Ut.close()}},b.oo1){const Ae=function(...nt){const dt=b.oo1.DB.dbCtorHelper.normalizeArgs(...nt);dt.vfs=ue.$zName,b.oo1.DB.dbCtorHelper.call(this,dt)};Ae.prototype=Object.create(b.oo1.DB.prototype),b.oo1.OpfsDb=Ae,Ae.importDb=Ke.importDb,b.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(ue.pointer,function(nt,dt){dt.capi.sqlite3_busy_timeout(nt,1e4)})}const rn=function(){const Ae=Te.scopedAllocPush(),nt=new Qe;try{const dt=nt.pointer,Ct=ve.SQLITE_OPEN_CREATE|ve.SQLITE_OPEN_READWRITE|ve.SQLITE_OPEN_MAIN_DB,wt=Te.scopedAlloc(8),Ut="/sanity/check/file"+Vt(8),Sn=Te.scopedAllocCString(Ut);let Pt;if(se.s11n.serialize("This is \xe4 string."),Pt=se.s11n.deserialize(),mt("deserialize() says:",Pt),Pt[0]!=="This is \xe4 string."&&et("String d13n error."),pt.xAccess(ue.pointer,Sn,0,wt),Pt=Te.peek(wt,"i32"),mt("xAccess(",Ut,") exists ?=",Pt),Pt=pt.xOpen(ue.pointer,Sn,dt,Ct,wt),mt("open rc =",Pt,"state.sabOPView[xOpen] =",se.sabOPView[se.opIds.xOpen]),Pt!==0){Oe("open failed with code",Pt);return}pt.xAccess(ue.pointer,Sn,0,wt),Pt=Te.peek(wt,"i32"),Pt||et("xAccess() failed to detect file."),Pt=ot.xSync(nt.pointer,0),Pt&&et("sync failed w/ rc",Pt),Pt=ot.xTruncate(nt.pointer,1024),Pt&&et("truncate failed w/ rc",Pt),Te.poke(wt,0,"i64"),Pt=ot.xFileSize(nt.pointer,wt),Pt&&et("xFileSize failed w/ rc",Pt),mt("xFileSize says:",Te.peek(wt,"i64")),Pt=ot.xWrite(nt.pointer,Sn,10,1),Pt&&et("xWrite() failed!");const Tr=Te.scopedAlloc(16);Pt=ot.xRead(nt.pointer,Tr,6,2),Te.poke(Tr+6,0);let We=Te.cstrToJs(Tr);mt("xRead() got:",We),We!=="sanity"&&et("Unexpected xRead() value."),pt.xSleep&&(mt("xSleep()ing before close()ing..."),pt.xSleep(ue.pointer,2e3),mt("waking up from xSleep()")),Pt=ot.xClose(dt),mt("xClose rc =",Pt,"sabOPView =",se.sabOPView),mt("Deleting file:",Ut),pt.xDelete(ue.pointer,Sn,4660),pt.xAccess(ue.pointer,Sn,0,wt),Pt=Te.peek(wt,"i32"),Pt&&et("Expecting 0 from xAccess(",Ut,") after xDelete()."),Be("End of OPFS sanity checks.")}finally{nt.dispose(),Te.scopedAllocPop(Ae)}};pe.onmessage=function({data:Ae}){switch(Ae.type){case"opfs-unavailable":st(new Error(Ae.payload.join(" ")));break;case"opfs-async-loaded":pe.postMessage({type:"opfs-async-init",args:se});break;case"opfs-async-inited":{if(Ee===!0)break;try{b.vfs.installVfs({io:{struct:ee,methods:ot},vfs:{struct:ue,methods:pt}}),se.sabOPView=new Int32Array(se.sabOP),se.sabFileBufView=new Uint8Array(se.sabIO,0,se.fileBufferSize),se.sabS11nView=new Uint8Array(se.sabIO,se.sabS11nOffset,se.sabS11nSize),qt(),A.sanityChecks&&(Be("Running sanity checks because of opfs-sanity-check URL arg..."),rn()),It()?navigator.storage.getDirectory().then(nt=>{pe.onerror=pe._originalOnError,delete pe._originalOnError,b.opfs=Ke,Ke.rootDirectory=nt,mt("End of OPFS sqlite3_vfs setup.",ue),ae()}).catch(st):ae()}catch(nt){Oe(nt),st(nt)}break}default:{const nt="Unexpected message from the OPFS async worker: "+JSON.stringify(Ae);Oe(nt),st(new Error(nt));break}}}}))};N.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async T=>{try{let A=N.defaultProxyUri;return T.scriptInfo.sqlite3Dir&&(N.defaultProxyUri=T.scriptInfo.sqlite3Dir+A),N().catch(U=>{T.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",U.message)})}catch(A){return T.config.error("installOpfsVfs() exception:",A),Promise.reject(A)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){const N=b.util.toss,T=b.util.toss3,A=Object.create(null),U=b.capi,fe=b.util,me=b.wasm,Ge=4096,tt=512,at=4,mt=8,Be=tt+at,Oe=tt,et=Be,ve=Ge,ke=U.SQLITE_OPEN_MAIN_DB|U.SQLITE_OPEN_MAIN_JOURNAL|U.SQLITE_OPEN_SUPER_JOURNAL|U.SQLITE_OPEN_WAL,Te=".opaque",Ze=()=>Math.random().toString(36).slice(2),Qe=new TextDecoder,je=new TextEncoder,Ke=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),It=[b.config.error,b.config.warn,b.config.log];b.config.log;const ee=b.config.warn;b.config.error;const ue=new Map,Ee=lt=>ue.get(lt),st=(lt,_e)=>{_e?ue.set(lt,_e):ue.delete(lt)},ae=new Map,pe=lt=>ae.get(lt),K=(lt,_e)=>{_e?ae.set(lt,_e):ae.delete(lt)},re={xCheckReservedLock:function(lt,_e){const Pe=pe(lt);return Pe.log("xCheckReservedLock"),Pe.storeErr(),me.poke32(_e,1),0},xClose:function(lt){const _e=pe(lt);_e.storeErr();const Pe=_e.getOFileForS3File(lt);if(Pe)try{_e.log(`xClose ${Pe.path}`),_e.mapS3FileToOFile(lt,!1),Pe.sah.flush(),Pe.flags&U.SQLITE_OPEN_DELETEONCLOSE&&_e.deletePath(Pe.path)}catch(ot){return _e.storeErr(ot,U.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(lt){return U.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(lt,_e,Pe){return U.SQLITE_NOTFOUND},xFileSize:function(lt,_e){const Pe=pe(lt);Pe.log("xFileSize");const pt=Pe.getOFileForS3File(lt).sah.getSize()-ve;return me.poke64(_e,BigInt(pt)),0},xLock:function(lt,_e){const Pe=pe(lt);Pe.log(`xLock ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xRead:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Bt=pt.getOFileForS3File(lt);pt.log(`xRead ${Bt.path} ${Pe} @ ${ot}`);try{const rn=Bt.sah.read(me.heap8u().subarray(_e,_e+Pe),{at:ve+Number(ot)});return rn<Pe?(me.heap8u().fill(0,_e+rn,_e+Pe),U.SQLITE_IOERR_SHORT_READ):0}catch(rn){return pt.storeErr(rn,U.SQLITE_IOERR)}},xSectorSize:function(lt){return Ge},xSync:function(lt,_e){const Pe=pe(lt);Pe.log(`xSync ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.flush(),0}catch(pt){return Pe.storeErr(pt,U.SQLITE_IOERR)}},xTruncate:function(lt,_e){const Pe=pe(lt);Pe.log(`xTruncate ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.truncate(ve+Number(_e)),0}catch(pt){return Pe.storeErr(pt,U.SQLITE_IOERR)}},xUnlock:function(lt,_e){const Pe=pe(lt);Pe.log("xUnlock");const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xWrite:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Bt=pt.getOFileForS3File(lt);pt.log(`xWrite ${Bt.path} ${Pe} ${ot}`);try{const rn=Bt.sah.write(me.heap8u().subarray(_e,_e+Pe),{at:ve+Number(ot)});return Pe===rn?0:N("Unknown write() failure.")}catch(rn){return pt.storeErr(rn,U.SQLITE_IOERR)}}},se=new U.sqlite3_io_methods;se.$iVersion=1,b.vfs.installVfs({io:{struct:se,methods:re}});const Le={xAccess:function(lt,_e,Pe,ot){const pt=Ee(lt);pt.storeErr();try{const Bt=pt.getPath(_e);me.poke32(ot,pt.hasFilename(Bt)?1:0)}catch{me.poke32(ot,0)}return 0},xCurrentTime:function(lt,_e){return me.poke(_e,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(lt,_e){return me.poke(_e,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(lt,_e,Pe){const ot=Ee(lt);ot.log(`xDelete ${me.cstrToJs(_e)}`),ot.storeErr();try{return ot.deletePath(ot.getPath(_e)),0}catch(pt){return ot.storeErr(pt),U.SQLITE_IOERR_DELETE}},xFullPathname:function(lt,_e,Pe,ot){return me.cstrncpy(ot,_e,Pe)<Pe?0:U.SQLITE_CANTOPEN},xGetLastError:function(lt,_e,Pe){const ot=Ee(lt),pt=ot.popErr();if(ot.log(`xGetLastError ${_e} e =`,pt),pt){const Bt=me.scopedAllocPush();try{const[rn,Ae]=me.scopedAllocCString(pt.message,!0);me.cstrncpy(Pe,rn,_e),Ae>_e&&me.poke8(Pe+_e-1,0)}catch{return U.SQLITE_NOMEM}finally{me.scopedAllocPop(Bt)}}return pt?pt.sqlite3Rc||U.SQLITE_IOERR:0},xOpen:function(_e,Pe,ot,pt,Bt){const rn=Ee(_e);try{rn.log(`xOpen ${me.cstrToJs(Pe)} ${pt}`);const Ae=Pe&&me.peek8(Pe)?rn.getPath(Pe):Ze();let nt=rn.getSAHForPath(Ae);!nt&&pt&U.SQLITE_OPEN_CREATE&&(rn.getFileCount()<rn.getCapacity()?(nt=rn.nextAvailableSAH(),rn.setAssociatedPath(nt,Ae,pt)):N("SAH pool is full. Cannot create file",Ae)),nt||N("file not found:",Ae);const dt={path:Ae,flags:pt,sah:nt};rn.mapS3FileToOFile(ot,dt),dt.lockType=U.SQLITE_LOCK_NONE;const Ct=new U.sqlite3_file(ot);return Ct.$pMethods=se.pointer,Ct.dispose(),me.poke32(Bt,pt),0}catch(Ae){return rn.storeErr(Ae),U.SQLITE_CANTOPEN}}},it=function(lt){b.capi.sqlite3_vfs_find(lt)&&T("VFS name is already registered:",lt);const _e=new U.sqlite3_vfs,Pe=U.sqlite3_vfs_find(null),ot=Pe?new U.sqlite3_vfs(Pe):null;return _e.$iVersion=2,_e.$szOsFile=U.sqlite3_file.structInfo.sizeof,_e.$mxPathname=tt,_e.addOnDispose(_e.$zName=me.allocCString(lt),()=>st(_e.pointer,0)),ot&&(_e.$xRandomness=ot.$xRandomness,_e.$xSleep=ot.$xSleep,ot.dispose()),!_e.$xRandomness&&!Le.xRandomness&&(Le.xRandomness=function(pt,Bt,rn){const Ae=me.heap8u();let nt=0;for(;nt<Bt;++nt)Ae[rn+nt]=Math.random()*255e3&255;return nt}),!_e.$xSleep&&!Le.xSleep&&(Le.xSleep=(pt,Bt)=>0),b.vfs.installVfs({vfs:{struct:_e,methods:Le}}),_e};class qt{vfsDir;#e;#t;#n;#r=new Map;#i=new Map;#s=new Set;#o=new Map;#a=new Uint8Array(Be);#u;#l;#c;constructor(_e=Object.create(null)){this.#c=_e.verbosity??Ke.verbosity,this.vfsName=_e.name||Ke.name,this.#l=it(this.vfsName),st(this.#l.pointer,this),this.vfsDir=_e.directory||"."+this.vfsName,this.#u=new DataView(this.#a.buffer,this.#a.byteOffset),this.isReady=this.reset(!!(_e.clearOnInit??Ke.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(_e.initialCapacity||Ke.initialCapacity)})}#d(_e,...Pe){this.#c>_e&&It[_e](this.vfsName+":",...Pe)}log(..._e){this.#d(2,..._e)}warn(..._e){this.#d(1,..._e)}error(..._e){this.#d(0,..._e)}getVfs(){return this.#l}getCapacity(){return this.#r.size}getFileCount(){return this.#i.size}getFileNames(){const _e=[],Pe=this.#i.keys();for(const ot of Pe)_e.push(ot);return _e}async addCapacity(_e){for(let Pe=0;Pe<_e;++Pe){const ot=Ze(),Bt=await (await this.#t.getFileHandle(ot,{create:!0})).createSyncAccessHandle();this.#r.set(Bt,ot),this.setAssociatedPath(Bt,"",0)}return this.getCapacity()}async reduceCapacity(_e){let Pe=0;for(const ot of Array.from(this.#s)){if(Pe===_e||this.getFileCount()===this.getCapacity())break;const pt=this.#r.get(ot);ot.close(),await this.#t.removeEntry(pt),this.#r.delete(ot),this.#s.delete(ot),++Pe}return Pe}releaseAccessHandles(){for(const _e of this.#r.keys())_e.close();this.#r.clear(),this.#i.clear(),this.#s.clear()}async acquireAccessHandles(_e){const Pe=[];for await(const[ot,pt]of this.#t)pt.kind==="file"&&Pe.push([ot,pt]);return Promise.all(Pe.map(async([ot,pt])=>{try{const Bt=await pt.createSyncAccessHandle();if(this.#r.set(Bt,ot),_e)Bt.truncate(ve),this.setAssociatedPath(Bt,"",0);else{const rn=this.getAssociatedPath(Bt);rn?this.#i.set(rn,Bt):this.#s.add(Bt)}}catch(Bt){throw this.storeErr(Bt),this.releaseAccessHandles(),Bt}}))}getAssociatedPath(_e){_e.read(this.#a,{at:0});const Pe=this.#u.getUint32(Oe);if(this.#a[0]&&(Pe&U.SQLITE_OPEN_DELETEONCLOSE||!(Pe&ke)))return ee(`Removing file with unexpected flags ${Pe.toString(16)}`,this.#a),this.setAssociatedPath(_e,"",0),"";const ot=new Uint32Array(mt/4);_e.read(ot,{at:et});const pt=this.computeDigest(this.#a);if(ot.every((Bt,rn)=>Bt===pt[rn])){const Bt=this.#a.findIndex(rn=>rn===0);return Bt===0&&_e.truncate(ve),Bt?Qe.decode(this.#a.subarray(0,Bt)):""}else return ee("Disassociating file with bad digest."),this.setAssociatedPath(_e,"",0),""}setAssociatedPath(_e,Pe,ot){const pt=je.encodeInto(Pe,this.#a);tt<=pt.written+1&&N("Path too long:",Pe),this.#a.fill(0,pt.written,tt),this.#u.setUint32(Oe,ot);const Bt=this.computeDigest(this.#a);_e.write(this.#a,{at:0}),_e.write(Bt,{at:et}),_e.flush(),Pe?(this.#i.set(Pe,_e),this.#s.delete(_e)):(_e.truncate(ve),this.#s.add(_e))}computeDigest(_e){let Pe=0xdeadbeef,ot=0x41c6ce57;for(const pt of _e)Pe=31*Pe+pt*307,ot=31*ot+pt*307;return new Uint32Array([Pe>>>0,ot>>>0])}async reset(_e){await this.isReady;let Pe=await navigator.storage.getDirectory(),ot;for(const pt of this.vfsDir.split("/"))pt&&(ot=Pe,Pe=await Pe.getDirectoryHandle(pt,{create:!0}));return this.#e=Pe,this.#n=ot,this.#t=await this.#e.getDirectoryHandle(Te,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(_e)}getPath(_e){return me.isPtr(_e)&&(_e=me.cstrToJs(_e)),(_e instanceof URL?_e:new URL(_e,"file://localhost/")).pathname}deletePath(_e){const Pe=this.#i.get(_e);return Pe&&(this.#i.delete(_e),this.setAssociatedPath(Pe,"",0)),!!Pe}storeErr(_e,Pe){return _e&&(_e.sqlite3Rc=Pe||U.SQLITE_IOERR,this.error(_e)),this.$error=_e,Pe}popErr(){const _e=this.$error;return this.$error=void 0,_e}nextAvailableSAH(){const[_e]=this.#s.keys();return _e}getOFileForS3File(_e){return this.#o.get(_e)}mapS3FileToOFile(_e,Pe){Pe?(this.#o.set(_e,Pe),K(_e,this)):(this.#o.delete(_e),K(_e,!1))}hasFilename(_e){return this.#i.has(_e)}getSAHForPath(_e){return this.#i.get(_e)}async removeVfs(){if(!this.#l.pointer||!this.#t)return!1;U.sqlite3_vfs_unregister(this.#l.pointer),this.#l.dispose(),delete A[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(Te,{recursive:!0}),this.#t=void 0,await this.#n.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#n=void 0}catch(_e){b.config.error(this.vfsName,"removeVfs() failed:",_e)}return!0}exportFile(_e){const Pe=this.#i.get(_e)||N("File not found:",_e),ot=Pe.getSize()-ve,pt=new Uint8Array(ot>0?ot:0);if(ot>0){const Bt=Pe.read(pt,{at:ve});Bt!=ot&&N("Expected to read "+ot+" bytes but read "+Bt+".")}return pt}async importDbChunked(_e,Pe){const ot=this.#i.get(_e)||this.nextAvailableSAH()||N("No available handles to import to.");ot.truncate(0);let pt=0,Bt,rn=!1;try{for(;(Bt=await Pe())!==void 0;)Bt instanceof ArrayBuffer&&(Bt=new Uint8Array(Bt)),pt===0&&Bt.byteLength>=15&&(fe.affirmDbHeader(Bt),rn=!0),ot.write(Bt,{at:ve+pt}),pt+=Bt.byteLength;if((pt<512||pt%512!==0)&&N("Input size",pt,"is not correct for an SQLite database."),!rn){const Ae=new Uint8Array(20);ot.read(Ae,{at:0}),fe.affirmDbHeader(Ae)}ot.write(new Uint8Array([1,1]),{at:ve+18})}catch(Ae){throw this.setAssociatedPath(ot,"",0),Ae}return this.setAssociatedPath(ot,_e,U.SQLITE_OPEN_MAIN_DB),pt}importDb(_e,Pe){if(Pe instanceof ArrayBuffer)Pe=new Uint8Array(Pe);else if(Pe instanceof Function)return this.importDbChunked(_e,Pe);const ot=this.#i.get(_e)||this.nextAvailableSAH()||N("No available handles to import to."),pt=Pe.byteLength;(pt<512||pt%512!=0)&&N("Byte array size is invalid for an SQLite db.");const Bt="SQLite format 3";for(let Ae=0;Ae<Bt.length;++Ae)Bt.charCodeAt(Ae)!==Pe[Ae]&&N("Input does not contain an SQLite database header.");const rn=ot.write(Pe,{at:ve});return rn!=pt?(this.setAssociatedPath(ot,"",0),N("Expected to write "+pt+" bytes but wrote "+rn+".")):(ot.write(new Uint8Array([1,1]),{at:ve+18}),this.setAssociatedPath(ot,_e,U.SQLITE_OPEN_MAIN_DB)),rn}}class Vt{#e;constructor(_e){this.#e=_e,this.vfsName=_e.vfsName}async addCapacity(_e){return this.#e.addCapacity(_e)}async reduceCapacity(_e){return this.#e.reduceCapacity(_e)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(_e){const Pe=this.#e.getCapacity();return Pe<_e?this.#e.addCapacity(_e-Pe):Pe}exportFile(_e){return this.#e.exportFile(_e)}importDb(_e,Pe){return this.#e.importDb(_e,Pe)}async wipeFiles(){return this.#e.reset(!0)}unlink(_e){return this.#e.deletePath(_e)}async removeVfs(){return this.#e.removeVfs()}}const nn=async()=>{const lt=await navigator.storage.getDirectory(),_e=".opfs-sahpool-sync-check-"+Ze(),pt=(await (await lt.getFileHandle(_e,{create:!0})).createSyncAccessHandle()).close();return await pt,await lt.removeEntry(_e),pt?.then&&N("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};b.installOpfsSAHPoolVfs=async function(lt=Object.create(null)){lt=Object.assign(Object.create(null),Ke,lt||{});const _e=lt.name;if(lt.$testThrowPhase1)throw lt.$testThrowPhase1;if(A[_e])try{return await A[_e]}catch(Pe){if(lt.forceReinitIfPreviouslyFailed)delete A[_e];else throw Pe}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?A[_e]=Promise.reject(new Error("Missing required OPFS APIs.")):A[_e]=nn().then(async function(){if(lt.$testThrowPhase2)throw lt.$testThrowPhase2;const Pe=new qt(lt);return Pe.isReady.then(async()=>{const ot=new Vt(Pe);if(b.oo1){const pt=b.oo1,Bt=Pe.getVfs(),rn=function(...Ae){const nt=pt.DB.dbCtorHelper.normalizeArgs(...Ae);nt.vfs=Bt.$zName,pt.DB.dbCtorHelper.call(this,nt)};rn.prototype=Object.create(pt.DB.prototype),ot.OpfsSAHPoolDb=rn}return Pe.log("VFS initialized."),ot}).catch(async ot=>{throw await Pe.removeVfs().catch(()=>{}),ot})}).catch(Pe=>A[_e]=Promise.reject(Pe))}}),typeof y<"u"){const b=Object.assign(Object.create(null),{exports:typeof he>"u"?y.asm:he,memory:y.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=b;let N;try{N=globalThis.sqlite3ApiBootstrap()}catch(T){throw console.error("sqlite3ApiBootstrap() error:",T),T}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}y.sqlite3=N}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),n=o,n}})();const WQ=function(){const t=nN;if(!t)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...n)=>console.warn("sqlite3.debugModule:",...n):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const n=e.moduleScript.src.split("/");n.pop(),e.sqlite3Dir=n.join("/")+"/"}if(globalThis.sqlite3InitModule=function n(...r){return t(...r).then(i=>{const s=i.sqlite3;s.scriptInfo=e,n.__isUnderTest&&(s.__isUnderTest=!0);const o=s.asyncPostInit;return delete s.asyncPostInit,o()}).catch(i=>{throw console.error("Exception loading sqlite3 module:",i),i})},globalThis.sqlite3InitModule.ready=t.ready,globalThis.sqlite3InitModuleState.moduleScript){const n=globalThis.sqlite3InitModuleState;let r=n.moduleScript.src.split("/");r.pop(),n.scriptDir=r.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();nN=WQ;const UQ=nN;globalThis.sqlite3Worker1Promiser=function t(e=t.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const h=e;e=Object.assign(Object.create(null),t.defaultConfig),e.onready=h}else e=Object.assign(Object.create(null),t.defaultConfig,e);const n=Object.create(null),r=function(){},i=e.onerror||r,s=e.debug||r,o=e.generateMessageId?void 0:Object.create(null),a=e.generateMessageId||function(h){return h.type+"#"+(o[h.type]=(o[h.type]||0)+1)},u=(...h)=>{throw new Error(h.join(" "))};e.worker||(e.worker=t.defaultConfig.worker),typeof e.worker=="function"&&(e.worker=e.worker());let d,p;return e.worker.onmessage=function(h){h=h.data,s("worker1.onmessage",h);let g=n[h.messageId];if(!g){if(h&&h.type==="sqlite3-api"&&h.result==="worker1-ready"){e.onready&&e.onready(p);return}if(g=n[h.type],g&&g.onrow){g.onrow(h);return}e.onunhandled?e.onunhandled(arguments[0]):i("sqlite3Worker1Promiser() unhandled worker message:",h);return}switch(delete n[h.messageId],h.type){case"error":g.reject(h);return;case"open":d||(d=h.dbId);break;case"close":h.dbId===d&&(d=void 0);break}try{g.resolve(h)}catch(x){g.reject(x)}},p=function(){let h;arguments.length===1?h=arguments[0]:arguments.length===2?(h=Object.create(null),h.type=arguments[0],h.args=arguments[1],h.dbId=h.args.dbId):u("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!h.dbId&&h.type!=="open"&&(h.dbId=d),h.messageId=a(h),h.departureTime=performance.now();const g=Object.create(null);g.message=h;let x;h.type==="exec"&&h.args&&(typeof h.args.callback=="function"?(x=h.messageId+":row",g.onrow=h.args.callback,h.args.callback=x,n[x]=g):typeof h.args.callback=="string"&&u("exec callback may not be a string when using the Promise interface."));let _=new Promise(function(S,k){g.resolve=S,g.reject=k,n[h.messageId]=g,s("Posting",h.type,"message to Worker dbId="+(d||"default")+":",h),e.worker.postMessage(h)});return x&&(_=_.finally(()=>delete n[x])),_}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-BF9rosUC.js",import.meta.url),{type:"module"})},onerror:(...t)=>console.error("worker1 promiser error",...t)};sqlite3Worker1Promiser.v2=function(t){let e;typeof t=="function"?(e=t,t={}):typeof t?.onready=="function"&&(e=t.onready,delete t.onready);const n=Object.create(null);t=Object.assign(t||Object.create(null),{onready:async function(i){try{e&&await e(i),n.resolve(i)}catch(s){n.reject(s)}}});const r=new Promise(function(i,s){n.resolve=i,n.reject=s});try{this.original(t)}catch(i){n.reject(i)}return r}.bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;function EO(){let t,e;return{lock:async()=>{for(;t;)await t;t=new Promise(i=>{e=i})},unlock:async()=>{const i=e;t=void 0,e=void 0,i?.()}}}function Z0(t,e){const n={rows:[],columns:[]},r=t.exec({sql:e.sql,bind:e.params,returnValue:"resultRows",rowMode:"array",columnNames:n.columns});switch(e.method){case"run":break;case"get":n.rows=r[0]??[];break;case"all":default:n.rows=r;break}return n}function P2(t){const e=t.split(/[\\/]/).filter(s=>s!==""),n=e.pop();if(!n)throw new Error("Database path is invalid.");const r=["journal","wal","shm"].map(s=>`${n}-${s}`);return{directories:e,fileName:n,tempFileNames:r,getDirectoryHandle:async()=>{let s=await navigator.storage.getDirectory();for(let o of e)s=await s.getDirectoryHandle(o);return s}}}async function _I(t,e){let n;if(t instanceof Blob?n=t.stream():n=t,n instanceof ReadableStream&&e){const i=n.getReader();switch(e){case"callback":return async()=>(await i.read()).value;case"buffer":const s=[];let o=!1;for(;!o;){const p=await i.read();p.value&&s.push(p.value),o=p.done}const a=s.reduce((p,h)=>p+h.length,0),u=new Uint8Array(a);let d=0;return s.forEach(p=>{u.set(p,d),d+=p.length}),u}}else return n}class VQ{constructor(e){Object.defineProperty(this,"sqlite3",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"db",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dbStorageType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"pointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userFunctions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"initMutex",{enumerable:!0,configurable:!0,writable:!0,value:EO()}),Object.defineProperty(this,"transactionMutex",{enumerable:!0,configurable:!0,writable:!0,value:EO()}),Object.defineProperty(this,"transactionKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"init",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;await this.initMutex.lock();const{databasePath:i,readOnly:s,verbose:o}=this.config,a=[s===!0?"r":"cw",o===!0?"t":""].join("");try{this.sqlite3||(this.sqlite3=await UQ()),this.db&&this.destroy(),"opfs"in this.sqlite3&&i!==":memory:"?(this.db=new this.sqlite3.oo1.OpfsDb(i,a),this.dbStorageType="opfs"):(this.db=new this.sqlite3.oo1.DB(i,a),this.dbStorageType="memory",i!==":memory:"&&console.warn(`The origin private file system is not available, so ${i} will not be persisted. Make sure your web server is configured to use the correct HTTP response headers (See https://sqlocal.dallashoffman.com/guide/setup#cross-origin-isolation).`)),this.dbStorageType!=="memory"&&(this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${i})`),this.reinitChannel.onmessage=u=>{this.config.clientKey!==u.data.clientKey&&this.init(u.data.reason)}),this.userFunctions.forEach(this.initUserFunction),this.execInitStatements(),this.emitMessage({type:"event",event:"connect",reason:r})}catch(u){this.emitMessage({type:"error",error:u,queryKey:null}),this.destroy()}finally{await this.initMutex.unlock()}}}),Object.defineProperty(this,"postMessage",{enumerable:!0,configurable:!0,writable:!0,value:async(r,i)=>{const s=r instanceof MessageEvent?r.data:r;switch(await this.initMutex.lock(),s.type){case"config":this.editConfig(s);break;case"query":case"batch":case"transaction":this.exec(s);break;case"function":this.createUserFunction(s);break;case"getinfo":this.getDatabaseInfo(s);break;case"import":this.importDb(s);break;case"export":this.exportDb(s);break;case"delete":this.deleteDb(s);break;case"destroy":this.destroy(s);break}await this.initMutex.unlock()}}),Object.defineProperty(this,"emitMessage",{enumerable:!0,configurable:!0,writable:!0,value:(r,i=[])=>{this.onmessage&&this.onmessage(r,i)}}),Object.defineProperty(this,"editConfig",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.config=r.config,this.init("initial")}}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(this.db)try{const i={type:"data",queryKey:r.queryKey,data:[]};switch(r.type){case"query":const s=this.transactionKey!==null&&this.transactionKey===r.transactionKey;try{s||await this.transactionMutex.lock();const o=Z0(this.db,r);i.data.push(o)}finally{s||await this.transactionMutex.unlock()}break;case"batch":try{await this.transactionMutex.lock(),this.db.transaction(o=>{for(let a of r.statements){const u=Z0(o,a);i.data.push(u)}})}finally{await this.transactionMutex.unlock()}break;case"transaction":if(r.action==="begin"&&(await this.transactionMutex.lock(),this.transactionKey=r.transactionKey,this.db.exec({sql:"BEGIN"})),(r.action==="commit"||r.action==="rollback")&&this.transactionKey!==null&&this.transactionKey===r.transactionKey){const o=r.action==="commit"?"COMMIT":"ROLLBACK";this.db.exec({sql:o}),this.transactionKey=null,await this.transactionMutex.unlock()}break}this.emitMessage(i)}catch(i){this.emitMessage({type:"error",error:i,queryKey:r.queryKey})}}}),Object.defineProperty(this,"execInitStatements",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.db&&this.config.onInitStatements)for(let r of this.config.onInitStatements)Z0(this.db,r)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{try{const i=this.config.databasePath,s=this.dbStorageType,o=s!==void 0?s!=="memory"?await navigator.storage?.persisted():!1:void 0,u=this.db?.exec({sql:"SELECT page_count * page_size AS size FROM pragma_page_count(), pragma_page_size()",returnValue:"resultRows",rowMode:"array"})?.[0]?.[0],d=typeof u=="number"?u:void 0;this.emitMessage({type:"info",queryKey:r.queryKey,info:{databasePath:i,databaseSizeBytes:d,storageType:s,persisted:o}})}catch(i){this.emitMessage({type:"error",queryKey:r.queryKey,error:i})}}}),Object.defineProperty(this,"createUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{const{functionName:i,functionType:s,queryKey:o}=r;let a;if(this.userFunctions.has(i)){this.emitMessage({type:"error",error:new Error(`A user-defined function with the name "${i}" has already been created for this SQLocal instance.`),queryKey:o});return}s==="callback"?a=(...u)=>{this.emitMessage({type:"callback",name:i,args:u})}:a=this.proxy[`_sqlocal_func_${i}`];try{this.initUserFunction({type:s,name:i,func:a}),this.emitMessage({type:"success",queryKey:o})}catch(u){this.emitMessage({type:"error",error:u,queryKey:o})}}}),Object.defineProperty(this,"initUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.createFunction({name:r.name,xFunc:(i,...s)=>r.func(...s),arity:-1}),this.userFunctions.set(r.name,r))}}),Object.defineProperty(this,"importDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.sqlite3||!this.config.databasePath||!this.db)return;const{queryKey:i,database:s}=r;let o=!1;try{if(this.dbStorageType==="opfs"){this.destroy();const a=await _I(s,"callback");await this.sqlite3.oo1.OpfsDb.importDb(this.config.databasePath,a)}else{const a=await _I(s,"buffer"),u=this.sqlite3.wasm.allocFromTypedArray(a);this.pointers.push(u);const d=this.sqlite3.capi.sqlite3_deserialize(this.db,"main",u,a.byteLength,a.byteLength,this.config.readOnly?this.sqlite3.capi.SQLITE_DESERIALIZE_READONLY:this.sqlite3.capi.SQLITE_DESERIALIZE_RESIZEABLE);this.db.checkRc(d),this.execInitStatements()}}catch(a){this.emitMessage({type:"error",error:a,queryKey:i}),o=!0}finally{this.dbStorageType!=="memory"&&await this.init("overwrite")}o||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"exportDb",{enumerable:!0,configurable:!0,writable:!0,value:r=>{if(!this.sqlite3||!this.db)return;const{queryKey:i}=r;try{const s=this.sqlite3.capi.sqlite3_js_db_export(this.db);this.emitMessage({type:"buffer",queryKey:i,buffer:s},[s])}catch(s){this.emitMessage({type:"error",error:s,queryKey:i})}}}),Object.defineProperty(this,"deleteDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;const{queryKey:i}=r;let s=!1;try{if(this.dbStorageType==="opfs"){const{getDirectoryHandle:o,fileName:a,tempFileNames:u}=P2(this.config.databasePath),d=await o(),p=[a,...u];this.destroy(),await Promise.all(p.map(async h=>d.removeEntry(h).catch(g=>{if(!(g instanceof DOMException&&g.name==="NotFoundError"))throw g})))}else this.destroy()}catch(o){this.emitMessage({type:"error",error:o,queryKey:i}),s=!0}finally{await this.init("delete")}s||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.exec({sql:"PRAGMA optimize"}),this.db.close(),this.db=void 0,this.dbStorageType=void 0),this.reinitChannel&&(this.reinitChannel.close(),this.reinitChannel=void 0),this.pointers.forEach(i=>this.sqlite3?.wasm.dealloc(i)),this.pointers=[],r&&this.emitMessage({type:"success",queryKey:r.queryKey})}});const n=e?globalThis:tN(globalThis);this.proxy=n,this.init("initial")}}function bv(t,...e){return{sql:t.join("?"),params:e}}function HQ(t){return!t.some(e=>!Array.isArray(e))}function Y0(t,e){let n;return HQ(t)?n=t:n=[t],n.map(r=>{const i={};return e.forEach((s,o)=>{i[s]=r[o]}),i})}function GQ(t){return typeof t=="object"&&t!==null&&"getSQL"in t&&typeof t.getSQL=="function"}function KQ(t){return typeof t=="object"&&t!==null&&"sql"in t&&typeof t.sql=="string"&&"params"in t}function QQ(t){if(typeof t=="function"&&(t=t(bv)),GQ(t))try{if(!("toSQL"in t&&typeof t.toSQL=="function"))throw 1;const r=t.toSQL();if(!KQ(r))throw 2;return r}catch{throw new Error("The passed statement could not be parsed.")}const e=t.sql;let n=[];return"params"in t?n=t.params:"parameters"in t&&(n=t.parameters),{sql:e,params:n}}function X0(){return crypto.randomUUID()}function IO(t,e){let n;return typeof t=="string"?n={sql:t,params:e}:n=bv(t,...e),n}async function wy(t,e,n,r){return!e&&"locks"in navigator?navigator.locks.request(`_sqlocal_mutation_(${n.databasePath})`,{mode:t},r):r()}class JQ{constructor(e){Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"bypassMutationLock",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"userCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"queriesInProgress",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processMessageEvent",{enumerable:!0,configurable:!0,writable:!0,value:o=>{const a=o instanceof MessageEvent?o.data:o,u=this.queriesInProgress;switch(a.type){case"success":case"data":case"buffer":case"info":case"error":if(a.queryKey&&u.has(a.queryKey)){const[p,h]=u.get(a.queryKey);a.type==="error"?h(a.error):p(a),u.delete(a.queryKey)}else if(a.type==="error")throw a.error;break;case"callback":const d=this.userCallbacks.get(a.name);d&&d(...a.args??[]);break;case"event":this.config.onConnect?.(a.reason);break}}}),Object.defineProperty(this,"createQuery",{enumerable:!0,configurable:!0,writable:!0,value:async o=>wy("shared",this.bypassMutationLock||o.type==="import"||o.type==="delete",this.config,async()=>{if(this.isDestroyed===!0)throw new Error("This SQLocal client has been destroyed. You will need to initialize a new client in order to make further queries.");const a=X0();switch(o.type){case"import":this.processor.postMessage({...o,queryKey:a},[o.database]);break;default:this.processor.postMessage({...o,queryKey:a});break}return new Promise((u,d)=>{this.queriesInProgress.set(a,[u,d])})})}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async(o,a,u="all",d)=>{const p=await this.createQuery({type:"query",transactionKey:d,sql:o,params:a,method:u}),h={rows:[],columns:[]};return p.type==="data"&&(h.rows=p.data[0]?.rows??[],h.columns=p.data[0]?.columns??[]),h}}),Object.defineProperty(this,"execBatch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const a=await this.createQuery({type:"batch",statements:o}),u=new Array(o.length).fill({rows:[],columns:[]});return a.type==="data"&&a.data.forEach((d,p)=>{u[p]=d}),u}}),Object.defineProperty(this,"sql",{enumerable:!0,configurable:!0,writable:!0,value:async(o,...a)=>{const u=IO(o,a),{rows:d,columns:p}=await this.exec(u.sql,u.params,"all");return Y0(d,p)}}),Object.defineProperty(this,"batch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const a=o(bv);return(await this.execBatch(a)).map(({rows:d,columns:p})=>Y0(d,p))}}),Object.defineProperty(this,"beginTransaction",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=X0();await this.createQuery({type:"transaction",transactionKey:o,action:"begin"});const a=async h=>{const g=QQ(h),{rows:x,columns:_}=await this.exec(g.sql,g.params,"all",o);return Y0(x,_)};return{query:a,sql:async(h,...g)=>{const x=IO(h,g);return await a(x)},commit:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"commit"})},rollback:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"rollback"})}}}}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:async o=>wy("exclusive",!1,this.config,async()=>{let a;this.bypassMutationLock=!0;try{a=await this.beginTransaction();const u=await o({sql:a.sql,query:a.query});return await a.commit(),u}catch(u){throw await a?.rollback(),u}finally{this.bypassMutationLock=!1}})}),Object.defineProperty(this,"createCallbackFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,a)=>{await this.createQuery({type:"function",functionName:o,functionType:"callback"}),this.userCallbacks.set(o,a)}}),Object.defineProperty(this,"createScalarFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,a)=>{const u=`_sqlocal_func_${o}`;this.proxy===globalThis&&(this.proxy[u]=a),await this.createQuery({type:"function",functionName:o,functionType:"scalar"}),this.proxy!==globalThis&&(this.proxy[u]=a)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=await this.createQuery({type:"getinfo"});if(o.type==="info")return o.info;throw new Error("The database failed to return valid information.")}}),Object.defineProperty(this,"getDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{let o,a;const{storageType:u}=await this.getDatabaseInfo();if(u==="opfs"){const d=P2(this.config.databasePath),{directories:p,getDirectoryHandle:h}=d;o=d.fileName;const g=`backup-${Date.now()}--${o}`,x=`${p.join("/")}/${g}`;await this.exec("VACUUM INTO ?",[x]);const _=await h();a=await (await (await _.getFileHandle(g)).getFile()).arrayBuffer(),await _.removeEntry(g)}else{const d=await this.createQuery({type:"export"});if(d.type==="buffer")o="database.sqlite3",a=d.buffer;else throw new Error("The database failed to export.")}return new File([a],o,{type:"application/x-sqlite3"})}}),Object.defineProperty(this,"overwriteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async(o,a)=>{await wy("exclusive",!1,this.config,async()=>{try{const u=await _I(o);await this.createQuery({type:"import",database:u}),typeof a=="function"&&(this.bypassMutationLock=!0,await a()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"overwrite"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"deleteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{await wy("exclusive",!1,this.config,async()=>{try{await this.createQuery({type:"delete"}),typeof o=="function"&&(this.bypassMutationLock=!0,await o()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"delete"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{await this.createQuery({type:"destroy"}),this.processor instanceof Worker&&(this.processor.removeEventListener("message",this.processMessageEvent),this.processor.terminate()),this.queriesInProgress.clear(),this.userCallbacks.clear(),this.reinitChannel.close(),this.isDestroyed=!0}});const n=typeof e=="string"?{databasePath:e}:e,{onInit:r,onConnect:i,...s}=n;this.config=n,this.clientKey=X0(),this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${s.databasePath})`),typeof globalThis.Worker<"u"&&s.databasePath!==":memory:"?(this.processor=new Worker(new URL("/assets/worker-DxuAzsZq.js",import.meta.url),{type:"module"}),this.processor.addEventListener("message",this.processMessageEvent),this.proxy=tN(this.processor)):(this.processor=new VQ(!0),this.processor.onmessage=o=>this.processMessageEvent(o),this.proxy=globalThis),this.processor.postMessage({type:"config",config:{...s,clientKey:this.clientKey,onInitStatements:r?.(bv)??[]}})}}class ZQ extends JQ{constructor(){super(...arguments),Object.defineProperty(this,"dialect",{enumerable:!0,configurable:!0,writable:!0,value:{createAdapter:()=>new XG,createDriver:()=>new YQ(this),createIntrospector:e=>new YG(e),createQueryCompiler:()=>new QG}})}}class YQ{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e})}async init(){}async acquireConnection(){return new XQ(this.client)}async releaseConnection(){}async beginTransaction(e){e.transaction=await this.client.beginTransaction()}async commitTransaction(e){await e.transaction?.commit(),e.transaction=null}async rollbackTransaction(e){await e.transaction?.rollback(),e.transaction=null}async destroy(){await this.client.destroy()}}class XQ{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:null})}async executeQuery(e){let n;return this.transaction===null?n=await this.client.sql(e.sql,...e.parameters):n=await this.transaction.query(e),{rows:n}}async *streamQuery(){throw new Error("SQLite3 does not support streaming.")}}const eJ=({database:t,bootstrap:e})=>{const{dialect:n}=new ZQ({databasePath:`${t}.sqlite3`,onInit(i){return[i`PRAGMA foreign_keys = ON;`]}}),r=new O1({dialect:n});return{kysely:r,async bootstrap(){return e({kysely:r})}}},gi=En({slot:{base:["border","border-gray-300","rounded-md","p-4","flex","flex-col","gap-2","items-center"],input:["w-full","border","border-gray-300","rounded-md","p-2","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"]},variant:{isLoading:{true:[]},isSubmitting:{true:[]}},match:[{if:{isSubmitting:!0},then:{base:["opacity-50","pointer-events-none","select-none"]}}],defaults:{isLoading:!1,isSubmitting:!1}}),tJ="icon-[material-symbols--error-outline]",nJ=En({slot:{base:["flex","flex-row","gap-1","items-center","text-red-600","p-2"]},variant:{highlight:{true:[]},compact:{true:[]}},match:[{if:{highlight:!0},then:{base:["bg-red-100","p-2","font-bold","border","border-red-200","rounded-md","w-full"]}},{if:{compact:!0},then:{base:["p-0"]}}],defaults:{highlight:!1,compact:!1}}),di=({error:t,variant:e,tva:n=nJ,css:r})=>{const i=n({...e,css:r}).slots;return t?.message?f.jsxs("div",{className:i.base(),children:[f.jsx(tn,{icon:tJ}),f.jsx("span",{children:Vo.rich(t.message)})]}):null},rJ=En({slot:{base:["flex","flex-col","gap-1","w-full"],input:[]},variant:{required:{true:[]},disabled:{true:[]},isSubmitting:{true:[]},isLoading:{true:[]},isError:{true:[]}},match:[{if:{isError:!0},then:{base:["text-red-600"]}},{if:{required:!0},then:{base:["text-emerald-600","font-bold"]}}],defaults:{required:!1,disabled:!1,isSubmitting:!1,isLoading:!1,isError:!1}}),hn=({label:t,hint:e,required:n=!1,formState:r,name:i,children:s,variant:o,tva:a=rJ,css:u})=>{const d=a({isSubmitting:r.isSubmitting,isLoading:r.isLoading,isError:!!r.errors[i],required:n,...o,css:u}).slots;return f.jsxs("div",{className:d.base(),children:[f.jsxs("div",{className:"flex flex-row justify-between",children:[t?f.jsx("label",{htmlFor:i,children:t}):null,f.jsx(di,{variant:{compact:!0},error:r.errors[i]})]}),e?f.jsx("div",{className:"text-sm italic",children:e}):null,f.jsx("div",{className:d.input(),children:s})]})},Ui=({form:t,mutation:e})=>{const n=t.handleSubmit(async r=>e.mutateAsync(r,{onError:i=>{P1({error:i,errors:[h1({error:i,schema:q1,onError:({data:s})=>{t.setError("root",{message:s.message})}})],onError:s=>{t.setError("root",{message:s.message})}})}}).catch(()=>{}));return r=>{r.stopPropagation(),n(r)}};function iJ(t,e,n,r={leading:!1}){const[i,s]=H.useState(t),[o,a]=H.useState(t),u=H.useRef(null),d=H.useRef(!0),p=()=>window.clearTimeout(u.current||void 0);H.useEffect(()=>p,[]),H.useEffect(()=>{e(i)},[i]),H.useEffect(()=>{a(t),s(t)},[t]);const h=H.useCallback(g=>{a(g),p(),d.current&&r.leading?s(g):u.current=window.setTimeout(()=>{d.current=!0,s(g)},n),d.current=!1},[r.leading]);return[o,h]}const sJ=En({slot:{base:["relative","w-full"],search:["absolute","inset-y-0","left-2","flex","items-center","pointer-events-none","text-slate-500"],input:["pl-8","py-1","w-full","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","block"],clear:["absolute","inset-y-0","right-2","flex","items-center","cursor-pointer","text-slate-300","hover:text-slate-500"]},variant:{},defaults:{}}),F2=({value:t="",onFulltext:e,textPlaceholder:n,variant:r,tva:i=sJ,css:s})=>{const o=i({...r,css:s}).slots,[a,u]=iJ(t,d=>{e(d||"")},500);return f.jsxs("div",{className:o.base(),children:[f.jsx("div",{className:o.search(),children:f.jsx(tn,{icon:"icon-[material-symbols-light--search]",variant:{size:"xl"}})}),f.jsx("input",{value:a||"",className:o.input(),type:"text",placeholder:n||Vo.text("Fulltext (placeholder)"),onChange:d=>{u(d.target.value)}}),t&&f.jsx("div",{className:o.clear(),onClick:()=>{e("")},children:f.jsx(tn,{icon:"icon-[gridicons--cross]",variant:{size:"md"}})})]})},oJ="icon-[fluent--arrow-down-12-regular]",aJ="icon-[fluent--arrow-up-12-regular]",Is="icon-[pajamas--go-back]",vv="icon-[line-md--confirm-circle]",D2="icon-[mage--edit]",lJ="icon-[arcticons--nothing-x]",uJ="icon-[tabler--filter-plus]",NO="icon-[tabler--filter-minus]",_x="icon-[ph--list-dashes-thin]",cJ="icon-[svg-spinners--3-dots-scale]",rN="icon-[material-symbols-light--logout-sharp]",dJ="icon-[fluent--shape-intersect-20-regular]",Sx="icon-[fluent--checkbox-unchecked-20-regular]",Ex="icon-[fluent--checkbox-checked-20-regular]",tm="icon-[teenyicons--tag-outline]",Dr="icon-[ph--trash]",fJ="icon-[clarity--upload-cloud-line]",iN="icon-[ph--user]",pJ=async({queryClient:t,keys:e})=>{for await(const n of e)await t.invalidateQueries({queryKey:n,refetchType:"all"})},Fn=t=>{const e=$v(),n=Qo();return async()=>{await pJ({keys:t,queryClient:e}),await n.invalidate()}};var eS={exports:{}},tS,kO;function hJ(){if(kO)return tS;kO=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return tS=t,tS}var nS,CO;function mJ(){if(CO)return nS;CO=1;var t=hJ();function e(){}function n(){}return n.resetWarningCache=e,nS=function(){function r(o,a,u,d,p,h){if(h!==t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},nS}var TO;function gJ(){return TO||(TO=1,eS.exports=mJ()()),eS.exports}var yJ=gJ();const tr=Gs(yJ);function jc(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(p){try{d(r.next(p))}catch(h){o(h)}}function u(p){try{d(r.throw(p))}catch(h){o(h)}}function d(p){p.done?s(p.value):i(p.value).then(a,u)}d((r=r.apply(t,e||[])).next())})}const bJ=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function pf(t,e,n){const r=vJ(t),{webkitRelativePath:i}=t,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&jO(r,"path",s),jO(r,"relativePath",s),r}function vJ(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=bJ.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function jO(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const xJ=[".DS_Store","Thumbs.db"];function wJ(t){return jc(this,void 0,void 0,function*(){return xv(t)&&_J(t.dataTransfer)?NJ(t.dataTransfer,t.type):SJ(t)?EJ(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?IJ(t):[]})}function _J(t){return xv(t)}function SJ(t){return xv(t)&&xv(t.target)}function xv(t){return typeof t=="object"&&t!==null}function EJ(t){return SI(t.target.files).map(e=>pf(e))}function IJ(t){return jc(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>pf(n))})}function NJ(t,e){return jc(this,void 0,void 0,function*(){if(t.items){const n=SI(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(kJ));return RO(L2(r))}return RO(SI(t.files).map(n=>pf(n)))})}function RO(t){return t.filter(e=>xJ.indexOf(e.name)===-1)}function SI(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function kJ(t){if(typeof t.webkitGetAsEntry!="function")return OO(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?M2(e):OO(t,e)}function L2(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?L2(n):[n]],[])}function OO(t,e){return jc(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const s=yield t.getAsFileSystemHandle();if(s===null)throw new Error(`${t} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,pf(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return pf(r,(n=e?.fullPath)!==null&&n!==void 0?n:void 0)})}function CJ(t){return jc(this,void 0,void 0,function*(){return t.isDirectory?M2(t):TJ(t)})}function M2(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function s(){e.readEntries(o=>jc(this,void 0,void 0,function*(){if(o.length){const a=Promise.all(o.map(CJ));i.push(a),s()}else try{const a=yield Promise.all(i);n(a)}catch(a){r(a)}}),o=>{r(o)})}s()})}function TJ(t){return jc(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=pf(r,t.fullPath);e(i)},r=>{n(r)})})})}var _y={},AO;function jJ(){return AO||(AO=1,_y.__esModule=!0,_y.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0}),_y}var RJ=jJ();const rS=Gs(RJ);function qO(t){return qJ(t)||AJ(t)||B2(t)||OJ()}function OJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qJ(t){if(Array.isArray(t))return EI(t)}function PO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PO(Object(n),!0).forEach(function(r){$2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nm(t,e){return DJ(t)||FJ(t,e)||B2(t,e)||PJ()}function PJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B2(t,e){if(t){if(typeof t=="string")return EI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EI(t,e)}}function EI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FJ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,a=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function DJ(t){if(Array.isArray(t))return t}var LJ=typeof rS=="function"?rS:rS.default,z2="file-invalid-type",W2="file-too-large",U2="file-too-small",V2="too-many-files",MJ={FileInvalidType:z2,FileTooLarge:W2,FileTooSmall:U2,TooManyFiles:V2},$J=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:z2,message:"File type must be ".concat(r)}},DO=function(e){return{code:W2,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},LO=function(e){return{code:U2,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},BJ={code:V2,message:"Too many files"};function H2(t,e){var n=t.type==="application/x-moz-file"||LJ(t,e);return[n,n?null:$J(e)]}function G2(t,e,n){if(Xu(t.size))if(Xu(e)&&Xu(n)){if(t.size>n)return[!1,DO(n)];if(t.size<e)return[!1,LO(e)]}else{if(Xu(e)&&t.size<e)return[!1,LO(e)];if(Xu(n)&&t.size>n)return[!1,DO(n)]}return[!0,null]}function Xu(t){return t!=null}function zJ(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,a=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(u){var d=H2(u,n),p=nm(d,1),h=p[0],g=G2(u,r,i),x=nm(g,1),_=x[0],S=a?a(u):null;return h&&_&&!S})}function wv(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Sy(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function MO(t){t.preventDefault()}function WJ(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function UJ(t){return t.indexOf("Edge/")!==-1}function VJ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return WJ(t)||UJ(t)}function ia(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!wv(r)&&a&&a.apply(void 0,[r].concat(s)),wv(r)})}}function HJ(){return"showOpenFilePicker"in window}function GJ(t){if(Xu(t)){var e=Object.entries(t).filter(function(n){var r=nm(n,2),i=r[0],s=r[1],o=!0;return K2(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(Q2))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=nm(r,2),s=i[0],o=i[1];return FO(FO({},n),{},$2({},s,o))},{});return[{description:"Files",accept:e}]}return t}function KJ(t){if(Xu(t))return Object.entries(t).reduce(function(e,n){var r=nm(n,2),i=r[0],s=r[1];return[].concat(qO(e),[i],qO(s))},[]).filter(function(e){return K2(e)||Q2(e)}).join(",")}function QJ(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function JJ(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function K2(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function Q2(t){return/^.*\.[\w]+$/.test(t)}var ZJ=["children"],YJ=["open"],XJ=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],eZ=["refKey","onChange","onClick"];function tZ(t){return iZ(t)||rZ(t)||J2(t)||nZ()}function nZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iZ(t){if(Array.isArray(t))return II(t)}function iS(t,e){return aZ(t)||oZ(t,e)||J2(t,e)||sZ()}function sZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J2(t,e){if(t){if(typeof t=="string")return II(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return II(t,e)}}function II(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oZ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,a=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function aZ(t){if(Array.isArray(t))return t}function $O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$O(Object(n),!0).forEach(function(r){NI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$O(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NI(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _v(t,e){if(t==null)return{};var n=lZ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lZ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Ix=H.forwardRef(function(t,e){var n=t.children,r=_v(t,ZJ),i=Y2(r),s=i.open,o=_v(i,YJ);return H.useImperativeHandle(e,function(){return{open:s}},[s]),Un.createElement(H.Fragment,null,n(Or(Or({},o),{},{open:s})))});Ix.displayName="Dropzone";var Z2={disabled:!1,getFilesFromEvent:wJ,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Ix.defaultProps=Z2;Ix.propTypes={children:tr.func,accept:tr.objectOf(tr.arrayOf(tr.string)),multiple:tr.bool,preventDropOnDocument:tr.bool,noClick:tr.bool,noKeyboard:tr.bool,noDrag:tr.bool,noDragEventsBubbling:tr.bool,minSize:tr.number,maxSize:tr.number,maxFiles:tr.number,disabled:tr.bool,getFilesFromEvent:tr.func,onFileDialogCancel:tr.func,onFileDialogOpen:tr.func,useFsAccessApi:tr.bool,autoFocus:tr.bool,onDragEnter:tr.func,onDragLeave:tr.func,onDragOver:tr.func,onDrop:tr.func,onDropAccepted:tr.func,onDropRejected:tr.func,onError:tr.func,validator:tr.func};var kI={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Y2(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Or(Or({},Z2),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,u=e.maxFiles,d=e.onDragEnter,p=e.onDragLeave,h=e.onDragOver,g=e.onDrop,x=e.onDropAccepted,_=e.onDropRejected,S=e.onFileDialogCancel,k=e.onFileDialogOpen,I=e.useFsAccessApi,E=e.autoFocus,C=e.preventDropOnDocument,j=e.noClick,q=e.noKeyboard,F=e.noDrag,$=e.noDragEventsBubbling,P=e.onError,O=e.validator,B=H.useMemo(function(){return KJ(n)},[n]),D=H.useMemo(function(){return GJ(n)},[n]),W=H.useMemo(function(){return typeof k=="function"?k:BO},[k]),V=H.useMemo(function(){return typeof S=="function"?S:BO},[S]),z=H.useRef(null),X=H.useRef(null),Z=H.useReducer(uZ,kI),le=iS(Z,2),ie=le[0],ne=le[1],oe=ie.isFocused,te=ie.isFileDialogActive,ce=H.useRef(typeof window<"u"&&window.isSecureContext&&I&&HJ()),de=function(){!ce.current&&te&&setTimeout(function(){if(X.current){var ct=X.current.files;ct.length||(ne({type:"closeDialog"}),V())}},300)};H.useEffect(function(){return window.addEventListener("focus",de,!1),function(){window.removeEventListener("focus",de,!1)}},[X,te,V,ce]);var ye=H.useRef([]),we=function(ct){z.current&&z.current.contains(ct.target)||(ct.preventDefault(),ye.current=[])};H.useEffect(function(){return C&&(document.addEventListener("dragover",MO,!1),document.addEventListener("drop",we,!1)),function(){C&&(document.removeEventListener("dragover",MO),document.removeEventListener("drop",we))}},[z,C]),H.useEffect(function(){return!r&&E&&z.current&&z.current.focus(),function(){}},[z,E,r]);var Ie=H.useCallback(function(Me){P?P(Me):console.error(Me)},[P]),ze=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me),ye.current=[].concat(tZ(ye.current),[Me.target]),Sy(Me)&&Promise.resolve(i(Me)).then(function(ct){if(!(wv(Me)&&!$)){var Yt=ct.length,Xt=Yt>0&&zJ({files:ct,accept:B,minSize:o,maxSize:s,multiple:a,maxFiles:u,validator:O}),_n=Yt>0&&!Xt;ne({isDragAccept:Xt,isDragReject:_n,isDragActive:!0,type:"setDraggedFiles"}),d&&d(Me)}}).catch(function(ct){return Ie(ct)})},[i,d,Ie,$,B,o,s,a,u,O]),Re=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me);var ct=Sy(Me);if(ct&&Me.dataTransfer)try{Me.dataTransfer.dropEffect="copy"}catch{}return ct&&h&&h(Me),!1},[h,$]),De=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me);var ct=ye.current.filter(function(Xt){return z.current&&z.current.contains(Xt)}),Yt=ct.indexOf(Me.target);Yt!==-1&&ct.splice(Yt,1),ye.current=ct,!(ct.length>0)&&(ne({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Sy(Me)&&p&&p(Me))},[z,p,$]),Je=H.useCallback(function(Me,ct){var Yt=[],Xt=[];Me.forEach(function(_n){var dr=H2(_n,B),Bn=iS(dr,2),Yr=Bn[0],Vi=Bn[1],Cr=G2(_n,o,s),en=iS(Cr,2),os=en[0],as=en[1],ls=O?O(_n):null;if(Yr&&os&&!ls)Yt.push(_n);else{var _o=[Vi,as];ls&&(_o=_o.concat(ls)),Xt.push({file:_n,errors:_o.filter(function(Ea){return Ea})})}}),(!a&&Yt.length>1||a&&u>=1&&Yt.length>u)&&(Yt.forEach(function(_n){Xt.push({file:_n,errors:[BJ]})}),Yt.splice(0)),ne({acceptedFiles:Yt,fileRejections:Xt,isDragReject:Xt.length>0,type:"setFiles"}),g&&g(Yt,Xt,ct),Xt.length>0&&_&&_(Xt,ct),Yt.length>0&&x&&x(Yt,ct)},[ne,a,B,o,s,u,g,x,_,O]),Xe=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me),ye.current=[],Sy(Me)&&Promise.resolve(i(Me)).then(function(ct){wv(Me)&&!$||Je(ct,Me)}).catch(function(ct){return Ie(ct)}),ne({type:"reset"})},[i,Je,Ie,$]),Ue=H.useCallback(function(){if(ce.current){ne({type:"openDialog"}),W();var Me={multiple:a,types:D};window.showOpenFilePicker(Me).then(function(ct){return i(ct)}).then(function(ct){Je(ct,null),ne({type:"closeDialog"})}).catch(function(ct){QJ(ct)?(V(ct),ne({type:"closeDialog"})):JJ(ct)?(ce.current=!1,X.current?(X.current.value=null,X.current.click()):Ie(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ie(ct)});return}X.current&&(ne({type:"openDialog"}),W(),X.current.value=null,X.current.click())},[ne,W,V,I,Je,Ie,D,a]),ut=H.useCallback(function(Me){!z.current||!z.current.isEqualNode(Me.target)||(Me.key===" "||Me.key==="Enter"||Me.keyCode===32||Me.keyCode===13)&&(Me.preventDefault(),Ue())},[z,Ue]),Et=H.useCallback(function(){ne({type:"focus"})},[]),At=H.useCallback(function(){ne({type:"blur"})},[]),Gt=H.useCallback(function(){j||(VJ()?setTimeout(Ue,0):Ue())},[j,Ue]),ln=function(ct){return r?null:ct},xe=function(ct){return q?null:ln(ct)},be=function(ct){return F?null:ln(ct)},Ne=function(ct){$&&ct.stopPropagation()},qe=H.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ct=Me.refKey,Yt=ct===void 0?"ref":ct,Xt=Me.role,_n=Me.onKeyDown,dr=Me.onFocus,Bn=Me.onBlur,Yr=Me.onClick,Vi=Me.onDragEnter,Cr=Me.onDragOver,en=Me.onDragLeave,os=Me.onDrop,as=_v(Me,XJ);return Or(Or(NI({onKeyDown:xe(ia(_n,ut)),onFocus:xe(ia(dr,Et)),onBlur:xe(ia(Bn,At)),onClick:ln(ia(Yr,Gt)),onDragEnter:be(ia(Vi,ze)),onDragOver:be(ia(Cr,Re)),onDragLeave:be(ia(en,De)),onDrop:be(ia(os,Xe)),role:typeof Xt=="string"&&Xt!==""?Xt:"presentation"},Yt,z),!r&&!q?{tabIndex:0}:{}),as)}},[z,ut,Et,At,Gt,ze,Re,De,Xe,q,F,r]),Ve=H.useCallback(function(Me){Me.stopPropagation()},[]),rt=H.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ct=Me.refKey,Yt=ct===void 0?"ref":ct,Xt=Me.onChange,_n=Me.onClick,dr=_v(Me,eZ),Bn=NI({accept:B,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:ln(ia(Xt,Xe)),onClick:ln(ia(_n,Ve)),tabIndex:-1},Yt,X);return Or(Or({},Bn),dr)}},[X,n,a,Xe,r]);return Or(Or({},ie),{},{isFocused:oe&&!r,getRootProps:qe,getInputProps:rt,rootRef:z,inputRef:X,open:ln(Ue)})}function uZ(t,e){switch(e.type){case"focus":return Or(Or({},t),{},{isFocused:!0});case"blur":return Or(Or({},t),{},{isFocused:!1});case"openDialog":return Or(Or({},kI),{},{isFileDialogActive:!0});case"closeDialog":return Or(Or({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Or(Or({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Or(Or({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Or({},kI);default:return t}}function BO(){}const cZ=Object.freeze(Object.defineProperty({__proto__:null,ErrorCode:MJ,default:Ix,useDropzone:Y2},Symbol.toStringTag,{value:"Module"})),dZ=En({slot:{base:["flex","items-center","justify-center","w-full"],label:["flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100"],zone:["flex","flex-col","items-center","justify-center","pt-5","pb-6","text-slate-500"]},variant:{active:{true:[]},rejected:{true:[]}},match:[{if:{active:!0},then:{label:["text-blue-400"],zone:["text-blue-400"]}},{if:{rejected:!0},then:{label:["text-red-400"],zone:["text-red-400"]}}],defaults:{active:!1,rejected:!1}}),{useDropzone:fZ}=cZ,pZ=({id:t,accept:e,text:n,variant:r,tva:i=dZ,css:s,...o})=>{const{getRootProps:a,getInputProps:u,isDragActive:d,isDragReject:p}=fZ({noClick:!0,multiple:!1,accept:e,maxFiles:1,minSize:0,maxSize:8388608,...o}),h=i({active:d,rejected:p,...r,css:s}).slots;return f.jsx("div",{...a(),className:h.base(),children:f.jsxs("label",{htmlFor:t,className:h.label(),children:[f.jsxs("div",{className:h.zone(),children:[f.jsx(tn,{icon:fJ,variant:{size:"4xl"}}),f.jsx("p",{className:"mb-2 text-sm font-semibold",children:n?.title||Vo.rich("Drag 'n' drop a file here")}),n?.message?f.jsx("p",{className:"text-xs",children:n.message}):null]}),f.jsx("input",{id:t,type:"file",className:"hidden",...u()})]})})},hZ=En({slot:{base:["min-h-screen","flex","flex-col"],header:["flex","flex-row","items-center","bg-slate-50","shadow-xs","border-b","border-b-slate-200","w-full","gap-4","p-4"],content:["grow","h-full","border-b","border-b-slate-200","p-2"]},variant:{},defaults:{}}),X2=({logo:t,menu:e,actions:n,variant:r,tva:i=hZ,css:s,children:o})=>{const a=i({...r,css:s}).slots;return f.jsxs("div",{className:a.base(),children:[f.jsx(lP,{position:"top-right"}),f.jsxs("div",{className:a.header(),children:[f.jsx("div",{children:t}),f.jsx("div",{className:"grow",children:e}),f.jsx("div",{className:"flex flex-row gap-2 items-center",children:n})]}),f.jsx("div",{className:a.content(),children:o??f.jsx(Ks,{})})]})},mZ=En({slot:{base:["flex","flex-row","gap-2","items-center","justify-between","text-blue-500","rounded-sm","px-1","py-0.5","hover:text-blue-700","focus:outline-hidden","w-fit"]},variant:{},defaults:{}}),gZ=H.forwardRef(({icon:t,iconProps:e,variant:n,tva:r=mZ,css:i,children:s,...o},a)=>{const u=r({...n,css:i}).slots;return f.jsxs("a",{...o,ref:a,className:u.base(),children:[t&&f.jsx(tn,{icon:t,...e}),s]})}),yZ=rP(gZ),St=t=>f.jsx(yZ,{preload:"intent",...t}),bZ=En({slot:{base:["fixed","inset-0","h-full","items-center","justify-center","bg-slate-100","flex","transition-all","duration-200","z-10","pointer-events-none","bg-opacity-0","backdrop-blur-none"]},variant:{show:{true:["bg-opacity-50","backdrop-blur-xs","pointer-events-auto"]}},defaults:{show:!0}}),vZ=({show:t=!0,variant:e,tva:n=bZ,css:r})=>{const i=n({show:t,...e,css:r}).slots;return t?f.jsx("div",{className:i.base(),children:f.jsx(tn,{icon:"icon-[svg-spinners--pulse-rings-multiple]",variant:{size:"8xl"},css:{base:["text-sky-400"]}})}):null};var cb={exports:{}},xZ=cb.exports,zO;function wZ(){return zO||(zO=1,function(t,e){(function(n,r){t.exports=r()})(xZ,()=>(()=>{var n={d:(_,S)=>{for(var k in S)n.o(S,k)&&!n.o(_,k)&&Object.defineProperty(_,k,{enumerable:!0,get:S[k]})},o:(_,S)=>Object.prototype.hasOwnProperty.call(_,S)},r={};n.d(r,{default:()=>x});const i=(..._)=>{},s=_=>_!==null&&_?.constructor.name==="Object";let o,a;const u=()=>{if(!o){o=!0;try{a=h.storage||localStorage,a.getItem("")}catch{a=(()=>{const _={getItem:k=>S[k]||null,setItem:(k,I)=>{S[k]=I},removeItem:k=>{S[k]=void 0},clear:()=>{S={__proto__:_}}};let S={__proto__:_};return S})()}g()}},d="\0",p=(_,S,k=!0)=>k?[...JSON.stringify(_)].map(I=>String.fromCharCode(I.charCodeAt(0)+S)).join(""):JSON.parse([..._].map(I=>String.fromCharCode(I.charCodeAt(0)-S)).join("")),h={ttl:null,encrypt:!1,encrypter:p,decrypter:(_,S)=>p(_,S,!1),secret:75,storage:void 0};Object.seal(h);const g=(_=!1)=>{u();for(const S of Object.keys(a)){const k=a.getItem(S);let I;try{I=JSON.parse(k||"")}catch{continue}s(I)&&d in I&&(Date.now()>I.ttl||_)&&a.removeItem(S)}},x={config:h,set:(_,S,k={})=>{u();const I={...h,...k,encrypt:k.encrypt!==!1&&(k.encrypt||h.encrypt),ttl:k.ttl===null?null:k.ttl||h.ttl};try{const E=I.ttl&&!isNaN(I.ttl)&&I.ttl>0;let C=E?{[d]:S,ttl:Date.now()+1e3*I.ttl}:S;I.encrypt&&(E?C[d]=(I.encrypter||i)(C[d],I.secret):C=(I.encrypter||i)(C,I.secret)),a.setItem(_,JSON.stringify(C))}catch{return!1}},get:(_,S={})=>{u();const k=a.getItem(_),I={...h,...S,encrypt:S.encrypt!==!1&&(S.encrypt||h.encrypt),ttl:S.ttl===null?null:S.ttl||h.ttl};let E,C;try{E=JSON.parse(k||""),C=s(E)&&d in E,(I.decrypt||I.encrypt)&&(C?E[d]=(I.decrypter||i)(E[d],I.secret):E=(I.decrypter||i)(E,I.secret))}catch{}return C?Date.now()>E.ttl?(a.removeItem(_),null):E[d]:E!==void 0?E:k},flush:g,clear:()=>{u(),a.clear()},remove:_=>{u(),a.removeItem(_)}};return r.default})())}(cb)),cb.exports}var _Z=wZ();const SZ=Gs(_Z),Of=SZ,EZ=En({slot:{base:["flex","flex-row","gap-2","items-center"]},variant:{},defaults:{}}),Rc=({variant:t,tva:e=EZ,css:n,children:r})=>{const i=e({...t,css:n}).slots;return f.jsx("div",{className:i.base(),children:r})},eL=En({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-1","border","border-b-2","border-transparent","hover:text-slate-500"]},variant:{active:{true:[]},inner:{true:[]},subtle:{true:[]}},match:[{if:{active:!0,inner:!1},then:{base:["border","border-b-2","border-blue-400","bg-blue-50","hover:border-blue-500","text-slate-800","hover:text-blue-800"]}},{if:{active:!0,inner:!0},then:{base:["border-none","text-blue-600","hover:text-blue-800"]}},{if:{subtle:!0},then:{base:["hover:bg-slate-50","hover:border-slate-300","hover:text-slate-600"]}},{if:{active:!0,subtle:!0},then:{base:["bg-slate-100","border-slate-400"]}}],defaults:{active:!1,inner:!1,subtle:!1}}),IZ=H.forwardRef(({icon:t=null,variant:e,tva:n=eL,css:r,children:i,...s},o)=>{const a=n({...e,css:r}).slots;return f.jsxs("a",{...s,className:a.base(),ref:o,children:[rx(t)?f.jsx(tn,{icon:t}):t,i]})}),NZ=rP(IZ),ir=({match:t=[],variant:e,tva:n=eL,css:r,...i})=>{const s=mW(),o=t.some(a=>!!s(a));return f.jsx(NZ,{preload:"intent",variant:{active:!!s({to:i.to,params:i.params})||o,...e},tva:n,css:r,...i})},kZ=En({slot:{base:["flex","flex-row","flex-wrap","items-center","gap-2","text-sm","font-semibold"],item:["border","border-blue-200","bg-blue-50","rounded-md","px-2","py-1"]},variant:{},defaults:{}}),hu=({textTitle:t,textEmpty:e,items:n,render:r,limit:i,variant:s,tva:o=kZ,css:a})=>{const u=i?n.slice(0,i):n,d=o({...s,css:a}).slots;return f.jsxs("div",{className:d.base(),children:[n.length?null:e,u.map(p=>f.jsx(r,{entity:p},`items-${p.id}`)),i&&n.length>i&&f.jsx(Tc,{textTitle:t,target:f.jsx(Wm,{iconEnabled:k2}),outside:!0,children:f.jsx("div",{className:"flex flex-col gap-2",children:n.map(p=>f.jsx(r,{entity:p},`items-${p.id}`))})})]})},CZ=En({slot:{base:[]},variant:{},defaults:{}}),J=({label:t,fallback:e,variant:n,tva:r=CZ,css:i})=>{const s=r({...n,css:i}).slots;return f.jsx("div",{className:s.base(),children:Vo.rich(t,e)})},tL=En({slot:{base:["flex","flex-col","gap-2"],input:["py-2","px-2","flex","flex-row","gap-2","items-center","cursor-pointer","hover:bg-slate-50","border","border-gray-300","rounded-md","text-slate-400","hover:text-slate-700","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],content:[],footer:["flex","items-center","justify-between","gap-2","border-t-2","border-slate-100","mt-4","pt-2"]},variant:{loading:{true:[]},selected:{true:[]}},match:[{if:{loading:!0},then:{input:["text-slate-300"]}},{if:{selected:!0},then:{input:["bg-slate-50","text-slate-700","hover:bg-slate-100","hover:text-slate-800"]}}],defaults:{loading:!1,selected:!1}}),TZ=En({use:tL,slot:{},variant:{},defaults:{}}),nL=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:a,query:u,value:d,onChange:p,variant:h,tva:g=TZ,css:x})=>{const _=g({...h,css:x}).slots,[S,k]=H.useState(0),[I,E]=H.useState(15),[C,j]=H.useState(d||[]),[q,F]=H.useState(void 0),$=qb({queryKey:[a,"PopupMultiSelect","data",{fulltext:q,page:S,size:I}],async queryFn(){return u({filter:{fulltext:q},cursor:{page:S,size:I}})}}),P=qb({queryKey:[a,"PopupMultiSelect","selected",{value:d}],async queryFn(){return u({filter:{idIn:d}})},enabled:!!d});return f.jsx(Tc,{icon:t,target:f.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data.length}),children:[f.jsx(tn,{icon:P.data?.data?.length?Ex:Sx}),P.data&&P.data.data.length?f.jsx(s,{entities:P.data.data}):n||f.jsx(J,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:$.isLoading},disabled:$.isLoading,...r,children:f.jsxs("div",{className:_.base(),children:[f.jsx("div",{className:_.content(),children:f.jsx(i,{cursor:{cursor:{page:S,size:I},count:$.data?.count?$.data.count:{filter:-1,total:-1,where:-1},textTotal:f.jsx(J,{label:"Total count of items (label)"}),onPage(O){k(O)},onSize(O){E(O),k(0)}},fulltext:{value:q,set(O){F(O),k(0)}},table:{data:$.data?.data??[],selection:{type:"multi",value:C,set(O){j(O)}}}})}),f.jsx(xx.Consumer,{children:O=>f.jsxs("div",{className:_.footer(),children:[f.jsx(cn,{iconEnabled:Is,iconDisabled:Is,onClick:()=>{O?.close()},variant:{variant:"subtle"},children:f.jsx(J,{label:"Close (label)"})}),f.jsx(cn,{iconEnabled:vv,iconDisabled:vv,disabled:!C.length&&!o,onClick:()=>{p(C),O?.close()},children:f.jsx(J,{label:"Confirm selection (label)"})})]})})]})})},rL=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:a,query:u,value:d,onChange:p,variant:h,tva:g=tL,css:x})=>{const _=g({...h,css:x}).slots,[S,k]=H.useState(0),[I,E]=H.useState(15),[C,j]=H.useState(d?[d]:[]),[q,F]=H.useState(void 0),$=qb({queryKey:[a,"PopupSelect","data",{fulltext:q,page:S,size:I}],async queryFn(){return u({filter:{fulltext:q},cursor:{page:S,size:I}})}}),P=qb({queryKey:[a,"PopupSelect","selected",{value:d}],async queryFn(){return u({filter:{id:d||void 0}})},enabled:!!d});return f.jsx(Tc,{icon:t,target:f.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data?.length}),children:[f.jsx(tn,{icon:P.data?.data?.[0]?Ex:Sx}),P.data?.data?.[0]?f.jsx(s,{entity:P.data?.data?.[0]}):n||f.jsx(J,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:$.isLoading},disabled:$.isLoading,...r,children:f.jsxs("div",{className:_.base(),children:[f.jsx("div",{className:_.content(),children:f.jsx(i,{cursor:{cursor:{page:S,size:I},count:$.data?.count?$.data.count:{filter:-1,total:-1,where:-1},textTotal:f.jsx(J,{label:"Total count of items (label)"}),onPage(O){k(O)},onSize(O){E(O),k(0)}},fulltext:{value:q,set(O){F(O),k(0)}},table:{data:$.data?.data??[],selection:{type:"single",value:C,set(O){j(O)}}}})}),f.jsx(xx.Consumer,{children:O=>f.jsxs("div",{className:_.footer(),children:[f.jsx(cn,{iconEnabled:Is,iconDisabled:Is,onClick:()=>{O?.close()},variant:{variant:"subtle"},children:f.jsx(J,{label:"Close (label)"})}),f.jsx(cn,{iconEnabled:vv,iconDisabled:vv,disabled:!C.length&&!o,onClick:()=>{p(C?.[0]),O?.close()},children:f.jsx(J,{label:"Confirm selection (label)"})})]})})]})})},jZ=En({slot:{base:["bg-blue-50","p-2","rounded-md","border","border-blue-200"],container:["grid","grid-cols-2","grid-rows-2","gap-1"],title:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2"],links:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2","flex","flex-row","items-center","gap-4","justify-end"],actions:["col-span-1","row-span-1","flex","flex-row","items-center","gap-4"],extra:["col-span-1","row-span-1","flex","flex-row","gap-4","justify-end"]},variant:{},defaults:{}}),Af=({entity:t,title:e=()=>null,links:n=()=>null,actions:r=()=>null,extra:i=()=>null,variant:s,tva:o=jZ,css:a})=>{const u=o({...s,css:a}).slots;return f.jsx(X1.Provider,{value:{inline:!0},children:f.jsx("div",{className:u.base(),children:f.jsxs("div",{className:u.container(),children:[f.jsx("div",{className:u.title(),children:f.jsx(e,{entity:t})}),f.jsx("div",{className:u.links(),children:f.jsx(n,{entity:t})}),f.jsx("div",{className:u.actions(),children:f.jsx(r,{entity:t})}),f.jsx("div",{className:u.extra(),children:f.jsx(i,{entity:t})})]})})})},RZ=En({slot:{base:["w-full","bg-slate-200","rounded-sm","transition-all"],progress:["h-full","bg-blue-400","rounded-sm","leading-none","transition-all"]},variant:{size:{xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-4"}},defaults:{size:"md"}}),qf=({value:t,variant:e,tva:n=RZ,css:r})=>{const i=n({...e,css:r}).slots;return f.jsx("div",{className:i.base(),children:f.jsx("div",{style:{width:`${t}%`},className:i.progress()})})},OZ=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,page:e}})})},AZ=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,size:e,page:0}})})},Lr=t=>({onPage:OZ(t),onSize:AZ(t)}),Mr=t=>e=>t({search:({cursor:n,...r})=>({...r,filter:e,cursor:{...n,page:0}})}),$r=t=>e=>{t({search:({cursor:n,filter:r,...i})=>({...i,filter:{...r,fulltext:e},cursor:{...n,page:e?0:n.page}}),replace:!!e})},ks=t=>e=>{t({search(n){return{...n,selection:e}}})},si=t=>({loading:f.jsx(J,{label:`${t} - Loading (label)`}),success:f.jsx(J,{label:`${t} - Success (label)`}),error:f.jsx(J,{label:`${t} - Error (label)`})}),qZ=En({slot:{base:["flex","flex-col","gap-4"],content:["text-bold","text-red-500","font-bold"],footer:["flex","flex-row","items-center","justify-between","gap-4"]},variant:{},defaults:{}}),Cs=({textContent:t,textToast:e,callback:n,onCancel:r,invalidator:i,variant:s,tva:o=qZ,css:a})=>{const u=o({...s,css:a}).slots,d=H.useContext(xx),p=Jt({async mutationFn(){return p6.promise(n(),si(e))},async onSuccess(){await i?.(),d?.close()}});return f.jsxs("div",{className:u.base(),children:[f.jsx("div",{className:u.content(),children:t}),f.jsxs("div",{className:u.footer(),children:[f.jsx(cn,{variant:{variant:"subtle",size:"sm"},iconEnabled:Is,onClick:()=>{d?.close(),r?.()},children:f.jsx(J,{label:"Cancel (button)"})}),f.jsx(cn,{variant:{variant:"danger",size:"md"},iconEnabled:Dr,onClick:()=>{p.mutate()},children:f.jsx(J,{label:"Delete (button)"})})]})]})},PZ=async({select:t,query:e=()=>t,filter:n,where:r})=>({total:(await t.clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,filter:(await e({select:e({select:t,where:r}),where:n}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,where:(await e({select:t,where:r}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count}),wa=async({select:t,query:e=()=>t,output:n,filter:r,where:i})=>n.parse(await e({select:e({select:t,where:i}),where:r}).executeTakeFirstOrThrow()),wr=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>{const o=a=>{let u=a;return s&&(u=a.limit(s.size).offset(s.page*s.size)),u};return M.array(n).parse(await o(e({select:e({select:t,where:i}),where:r})).execute())},cr=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>({data:await wr({select:t,output:n,where:i,filter:r,query:e,cursor:s}),count:await PZ({select:t,where:i,filter:r,query:e})}),yr=t=>{const e="input"in t?t.input:"input",n="output"in t?t.output:"output",r="schema"in t?t.schema._input:t._input,i="schema"in t?t.schema._output:t._output;return{types:{input:e==="output"?i:r,output:n==="input"?r:i},parse:s=>"schema"in t?t.schema.parse(s):t.parse(s)}},Ey=(t,e)=>M.custom().pipe(t.catch(e)),Br=({filter:t},{size:e=30}={size:30})=>M.object({filter:Ey(t.optional(),void 0),cursor:Ey(l9,{page:0,size:e}).default({page:0,size:e}),sort:Ey(M.any().optional(),[]).default([]),selection:Ey(M.array(M.string()),[]).default([])}),FZ=En({slot:{base:["w-full","flex","flex-col","items-center","justify-center"],title:["text-xl","text-bold"],message:["text-base","text-slate-500"],body:["pt-2"]},variant:{},defaults:{}}),iL=({textTitle:t,textMessage:e,icon:n,iconProps:r,variant:i,tva:s=FZ,css:o,children:a})=>{const u=s({...i,css:o}).slots;return f.jsxs("div",{className:u.base(),children:[n?f.jsx(tn,{icon:n,variant:{size:"6xl"},css:{base:["text-slate-500","opacity-50"]},...r}):null,f.jsx("div",{className:u.title(),children:t}),f.jsx("div",{className:u.message(),children:e}),f.jsx("div",{className:u.body(),children:a})]})},sN=En({slot:{base:["min-w-full","flex","flex-col","gap-2","text-sm"],table:["min-w-full","w-max","table-fixed"],thead:["border","border-slate-200","bg-slate-100"],th:["text-left","px-2","py-1","border-t","border-b","border-slate-300"],tbody:[],tr:["border-b","border-b-slate-200","odd:bg-slate-50","hover:bg-purple-100","hover:border-purple-300"],td:["px-2","py-1"],tfoot:[],select:["cursor-pointer","text-slate-400","hover:text-slate-600"]},variant:{selected:{true:[]}},match:[{if:{selected:!0},then:{tr:["bg-blue-100","odd:bg-blue-50","border-blue-300"],select:["text-slate-600"]}}],defaults:{selected:!1}}),DZ=({table:t,cell:{column:e,data:n,value:r},variant:i,tva:s=sN,css:o})=>{const a=e.def.render,u=s({...i,css:o}).slots;return f.jsx("td",{className:u.td(),children:f.jsxs("div",{className:"group flex flex-row items-center gap-2 justify-between",children:[f.jsx(a,{table:t,data:n,value:r,context:t.context}),e.filter&&!e.filter.is()?f.jsx(tn,{icon:uJ,css:{base:["group-hover:visible","invisible","opacity-50 hover:opacity-100","cursor-pointer"]},variant:{size:"xl"},onClick:()=>{e.filter&&(e.def.filter?.onFilter({data:n,filter:e.filter}),window.scrollTo({top:0,behavior:"smooth"}))}}):null]})})},LZ=({table:t,row:e,action:n,variant:r,tva:i=sN,css:s})=>{const o=i({...r,css:s}).slots,a=n?.table,u=n?.row;return f.jsxs("tr",{className:o.tr({selected:t.selection.isSelected(e)}),children:[a||u||t.selection.enabled?f.jsx("td",{className:"w-0",children:f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?f.jsx(tn,{icon:t.selection.isSelected(e)?Ex:Sx,css:{base:o.select({selected:t.selection.isSelected(e)})},onClick:t.selection.withRowHandler(e)}):null,u?f.jsx(u,{table:t,data:e.data}):null]})}):null,e.cells.map(d=>f.jsx(DZ,{table:t,cell:d,variant:r,tva:i,css:s},`${e.id}-${d.column.id}`)),f.jsx("td",{})]})},zr=({table:t,fulltext:e,cursor:n,empty:r=()=>f.jsx(iL,{icon:lJ,textTitle:f.jsx(J,{label:"Nothing here"}),textMessage:f.jsx(J,{label:"There is nothing to see right now."})}),action:i,variant:s,tva:o=sN,css:a})=>{const u=o({...s,css:a}).slots,d=i?.table,p=i?.row;return f.jsxs("div",{className:u.base(),children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center gap-6 w-1/3",children:e?f.jsx(F2,{value:e.value,onFulltext:e.set}):null}),f.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[f.jsx(xO,{...n}),t.filter.is()&&f.jsx(Wm,{iconEnabled:NO,css:{base:["text-amber-500"]},onClick:()=>t.filter.reset()})]})]}),f.jsx("div",{className:"relative overflow-x-auto",children:f.jsxs("table",{className:u.table(),children:[f.jsx("thead",{className:u.thead(),children:f.jsxs("tr",{children:[d||p||t.selection.enabled?f.jsx("th",{className:"w-0",children:f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?f.jsx(tn,{icon:t.selection.isAll()?Ex:t.selection.isAny()?dJ:Sx,variant:{disabled:t.selection.isSingle},css:{base:u.select({selected:t.selection.isAny()})},onClick:t.selection.withAllHandler()}):null,d?f.jsx(d,{table:t}):null]})}):null,t.visible.map(h=>{const g=h.def.header||(()=>null);return f.jsx("th",{className:u.th(),style:h.def.size?{width:`${h.def.size}rem`}:void 0,children:f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx(g,{table:t}),f.jsx("div",{className:"flex flex-row items-center gap-2",children:h.filter?.is()&&f.jsx(tn,{icon:NO,variant:{size:"md"},css:{base:["opacity-50","hover:opacity-100","cursor-pointer"]},onClick:()=>{h.filter?.reset()}})})]})},h.id)}),f.jsx("th",{})]})}),t.isEmpty?null:f.jsx("tbody",{className:u.tbody(),children:t.rows?.map(h=>f.jsx(LZ,{row:h,table:t,action:i,variant:s,tva:o,css:a},h.id))})]})}),t.isEmpty?f.jsx(r,{}):null,f.jsxs("div",{className:"flex flex-row items-center justify-end gap-2",children:[f.jsx("div",{}),f.jsx(xO,{...n})]})]})},_i=[];for(let t=0;t<256;++t)_i.push((t+256).toString(16).slice(1));function MZ(t,e=0){return(_i[t[e+0]]+_i[t[e+1]]+_i[t[e+2]]+_i[t[e+3]]+"-"+_i[t[e+4]]+_i[t[e+5]]+"-"+_i[t[e+6]]+_i[t[e+7]]+"-"+_i[t[e+8]]+_i[t[e+9]]+"-"+_i[t[e+10]]+_i[t[e+11]]+_i[t[e+12]]+_i[t[e+13]]+_i[t[e+14]]+_i[t[e+15]]).toLowerCase()}let sS;const $Z=new Uint8Array(16);function BZ(){if(!sS){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");sS=crypto.getRandomValues.bind(crypto)}return sS($Z)}const zZ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),WO={randomUUID:zZ};function UO(t,e,n){if(WO.randomUUID&&!t)return WO.randomUUID();t=t||{};const r=t.random??t.rng?.()??BZ();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,MZ(r)}const Wr=({columns:t,order:e=t.map(u=>u.name),hidden:n=[],visible:r=t.map(u=>u.name),data:i,filter:s,selection:o,context:a})=>{const u={...s?.value||{}},d=VR(u),p=new Set(o?.value),h=t.map(x=>({id:UO(),def:x,filter:x.filter?{is(){return x.filter?d.get(x.filter.path)!==void 0:!1},reset(){x.filter&&d.set(x.filter.path,void 0),s?.set({...u})},shallow(_,S){x.filter&&d.set(_,S),s?.set({...u})},set(_){s?.set({..._})}}:void 0})),g=h.filter(x=>r.includes(x.def.name)&&!n.includes(x.def.name)).sort((x,_)=>{const S=e.indexOf(x.def.name),k=e.indexOf(_.def.name);return(S===-1?1/0:S)-(k===-1?1/0:k)});return{columns:h,visible:g,rows:i?.map(x=>({id:UO(),data:x,cells:g.map(_=>({column:_,data:x,value:VR(x).get(_.def.name)}))})),isEmpty:i.length===0,filter:{is(){return h.some(x=>x.filter?.is())},reset(){s?.set({})},set(x){s?.set({...x})},shallow(x,_){d.set(x,_)}},selection:{enabled:!!o&&i.length>0,selection:Array.from(p),isSingle:o?.type==="single",isMulti:o?.type==="multi",isSelected({data:x}){return p.has(x.id)||!1},isAll(){return i.every(x=>p.has(x.id))},isAny(){return i.some(x=>p.has(x.id))},withRowHandler({data:x}){return()=>{if(o?.type==="single"){const _=p.has(x.id);p.clear(),_?p.delete(x.id):p.add(x.id)}else p.has(x.id)?p.delete(x.id):p.add(x.id);o?.set(Array.from(p))}},withAllHandler(){return()=>{i.every(x=>p.has(x.id))?p.clear():i.forEach(({id:x})=>p.add(x)),o?.set(Array.from(p))}}},context:a}},Ur=()=>t=>t,sL=({tags:t=[],render:e=({tag:i})=>i.label,onClick:n,textEmpty:r})=>{const i=t.filter(Boolean).sort((s,o)=>s.sort-o.sort);return f.jsx("div",{className:"flex flex-wrap flex-row gap-2 items-center",children:i.length?i.map(s=>f.jsx(Di,{onClick:()=>n?.(s),children:e({tag:s})},s.id)):r||f.jsx(J,{label:"No tags (label)"})})},WZ=En({slot:{base:["flex","flex-row","gap-2","items-center"],title:["flex","flex-row","gap-2","items-center","text-lg","text-slate-500","font-bold"],subtitle:["flex","flex-row","gap-4","items-center","text-lg"]},variant:{withSubtitle:{true:[]}},match:[{if:{withSubtitle:!0},then:{title:["border-r","border-r-slate-300","pr-2"]}}],defaults:{withSubtitle:!1}}),Pf=({icon:t,title:e,subtitle:n,variant:r,tva:i=WZ,css:s})=>{const o=i({withSubtitle:!!n,...r,css:s}).slots;return f.jsxs("div",{className:o.base(),children:[f.jsxs("div",{className:o.title(),children:[t?f.jsx(tn,{icon:t}):null,e]}),n?f.jsx("div",{className:o.subtitle(),children:n}):null]})};var Iy={},VO;function UZ(){if(VO)return Iy;VO=1;var t=nP();return Iy.createRoot=t.createRoot,Iy.hydrateRoot=t.hydrateRoot,Iy}var VZ=UZ();const HZ=Gs(VZ),oN=eW()({component:()=>f.jsxs(f.Fragment,{children:[f.jsx(_W,{}),f.jsx(Ks,{})]})}),GZ="modulepreload",KZ=function(t){return"/"+t},HO={},GO=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(n.map(u=>{if(u=KZ(u),u in HO)return;HO[u]=!0;const d=u.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":GZ,d||(h.as="script"),h.crossOrigin="",h.href=u,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((g,x)=>{h.addEventListener("load",g),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},QZ=Mt("/$locale")({component:Ks,loader:async({params:{locale:t}})=>{try{Vo.push((await JZ(`../translation/${t}.yaml`)).default)}catch(e){console.error(e)}}});function JZ(t){switch(t){case"../translation/cs":case"../translation/cs.yaml":return GO(()=>import("./cs-BCRVUnSq.js"),[]);case"../translation/en":case"../translation/en.yaml":return GO(()=>import("./en-DT21Y_dS.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const oL="cs",ZZ=[oL,"en"],YZ=Mt("/")({loader:async()=>{throw wm({to:"/$locale",params:{locale:lH({available:ZZ,fallback:oL})}})}}),XZ=Mt("/$locale/")({component:()=>{const{locale:t}=Zt({from:"/$locale"});return f.jsx("div",{className:"flex flex-col items-center justify-center h-screen w-screen",children:f.jsxs("div",{className:"rounded-sm bg-slate-50 p-4 shadow-md border border-slate-300",children:[f.jsx("h1",{className:"text-3xl text-center",children:"Apps"}),f.jsx("ul",{children:f.jsx("li",{children:f.jsx(St,{icon:"icon-[bx--game]",to:"/$locale/apps/derivean/public/login",params:{locale:t},children:"DeRivean"})})})]})})}}),{kysely:Nt,bootstrap:eY}=eJ({database:"derivean",async bootstrap({kysely:t}){const e="varchar(36)";try{await t.selectFrom("User").select(n=>n.fn.countAll().as("count")).executeTakeFirstOrThrow()}catch{await t.schema.createTable("User").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("login","varchar(128)",r=>r.notNull()).addColumn("password","varchar(256)",r=>r.notNull()).addUniqueConstraint("[User] login",["login"]).execute(),await t.schema.createTable("Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("code","varchar(64)",r=>r.notNull()).addColumn("label","varchar(128)",r=>r.notNull()).addColumn("group","varchar(64)").addColumn("sort","integer",r=>r.notNull().defaultTo(0)).addUniqueConstraint("Tag_code_group",["code","group"]).execute(),await t.schema.createTable("Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("transport","float4",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Resource] name",["name"]).execute(),await t.schema.createTable("Resource_Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("tagId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] tagId",["tagId"],"Tag",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Resource_Tag] resourceId-tagId",["resourceId","tagId"]).execute();for await(const r of["resourceId","tagId"])await t.schema.createIndex(`[Resource_Tag] ${r}`).on("Resource_Tag").columns([r]).execute();await t.schema.createTable("Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("limit","float4",r=>r.notNull()).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).execute(),await t.schema.createIndex("[Inventory] resourceId").on("Inventory").columns(["resourceId"]).execute(),await t.schema.createTable("Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(128)",r=>r.notNull()).addColumn("color","varchar(128)",r=>r.notNull().defaultTo("slate")).addColumn("minWidth","integer",r=>r.notNull()).addColumn("maxWidth","integer",r=>r.notNull()).addColumn("minHeight","integer",r=>r.notNull()).addColumn("maxHeight","integer",r=>r.notNull()).addColumn("probability","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull()).execute(),await t.schema.createTable("Region_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("minAmount","float4",r=>r.notNull()).addColumn("maxAmount","float4",r=>r.notNull()).addColumn("minLimit","float4",r=>r.notNull()).addColumn("maxLimit","float4",r=>r.notNull()).addUniqueConstraint("[Region_Inventory] regionId-resourceId",["regionId","resourceId"]).execute();for await(const r of["regionId","resourceId"])await t.schema.createIndex(`[Region_Inventory] ${r}`).on("Region_Inventory").columns([r]).execute();await t.schema.createTable("Map").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Map] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("name","varchar(128)",r=>r.notNull()).addUniqueConstraint("[Map] userId-name",["userId","name"]).execute(),await t.schema.createIndex("[Map] userId").on("Map").columns(["userId"]).execute(),await t.schema.createTable("Cycle").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("stamp","datetime",r=>r.defaultTo(Sr`CURRENT_TIMESTAMP`).notNull()).execute();for await(const r of["userId","mapId"])await t.schema.createIndex(`[Cycle] ${r}`).on("Cycle").columns([r]).execute();await t.schema.createTable("Land").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","integer",r=>r.notNull()).addColumn("y","integer",r=>r.notNull()).addColumn("width","integer",r=>r.notNull()).addColumn("height","integer",r=>r.notNull()).execute();for await(const r of["mapId","regionId"])await t.schema.createIndex(`[Land] ${r}`).on("Land").columns([r]).execute();await t.schema.createTable("Land_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Land_Inventory] landId-inventoryId",["landId","inventoryId"]).execute();for await(const r of["landId","inventoryId"])await t.schema.createIndex(`[Land_Inventory] ${r}`).on("Land_Inventory").columns([r]).execute();await t.schema.createTable("Blueprint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).addColumn("sort","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Blueprint] name",["name"]).execute(),await t.schema.createTable("Blueprint_Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Region] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Region] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Region] blueprintId-regionId",["blueprintId","regionId"]).execute(),await t.schema.createTable("Blueprint_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Inventory] blueprintId-inventoryId",["blueprintId","inventoryId"]).execute(),await t.schema.createTable("Blueprint_Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).execute(),await t.schema.createTable("Blueprint_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Requirement] blueprintId-requirementId",["blueprintId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("dependencyId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] dependencyId",["dependencyId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Dependency] blueprintId-dependencyId",["blueprintId","dependencyId"]).execute(),await t.schema.createTable("Blueprint_Conflict").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("conflictId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] conflictId",["conflictId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Conflict] blueprintId-conflictId",["blueprintId","conflictId"]).execute(),await t.schema.createTable("Blueprint_Production_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Requirement] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Production_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-blueprintId",["blueprintProductionId","blueprintId"]).execute(),await t.schema.createTable("Blueprint_Production_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Construction").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Construction] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("plan","boolean",r=>r.notNull().defaultTo(!0)).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("constructionId",e).addForeignKeyConstraint("[Building] constructionId",["constructionId"],"Construction",["id"],r=>r.onDelete("set null").onUpdate("set null")).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("productionId",e).addForeignKeyConstraint("[Building] productionId",["productionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("recurringProductionId",e).addForeignKeyConstraint("[Building] recurringProductionId",["recurringProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","float4",r=>r.notNull().defaultTo(0)).addColumn("y","float4",r=>r.notNull().defaultTo(0)).addColumn("valid","boolean",r=>r.notNull().defaultTo(!0)).execute();for await(const r of["userId","blueprintId","constructionId","landId","productionId","recurringProductionId"])await t.schema.createIndex(`[Building] ${r}`).on("Building").columns([r]).execute();await t.schema.createTable("Building_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Inventory] buildingId-inventoryId",["buildingId","inventoryId"]).execute(),await t.schema.createTable("Waypoint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Waypoint] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Waypoint] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","float4",r=>r.notNull().defaultTo(0)).addColumn("y","float4",r=>r.notNull().defaultTo(0)).execute();for await(const r of["userId","mapId"])await t.schema.createIndex(`[Waypoint] ${r}`).on("Waypoint").columns([r]).execute();await t.schema.createTable("Building_Waypoint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Waypoint] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("waypointId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Waypoint] waypointId",["waypointId"],"Waypoint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Waypoint] buildingId-waypointId",["buildingId","waypointId"]).execute();for await(const r of["buildingId","waypointId"])await t.schema.createIndex(`[Building_Waypoint] ${r}`).on("Building_Waypoint").columns([r]).execute();await t.schema.createTable("Route").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("fromId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] fromId",["fromId"],"Waypoint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("toId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] toId",["toId"],"Waypoint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Route] fromId-toId",["fromId","toId"]).execute();for await(const r of["userId","mapId","fromId","toId"])await t.schema.createIndex(`[Route] ${r}`).on("Route").columns([r]).execute();await t.schema.createTable("Building_Route_Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Route_Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Route_Building] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Route_Building] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("linkId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Route_Building] linkId",["linkId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Route_Building] buildingId-linkId",["buildingId","linkId"]).execute();for await(const r of["userId","mapId","buildingId","linkId"])await t.schema.createIndex(`[Building_Route_Building] ${r}`).on("Building_Route_Building").columns([r]).execute();await t.schema.createTable("Supply").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Supply] buildingId-resourceId",["buildingId","resourceId"]).execute(),await t.schema.createTable("Demand").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Demand] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Demand] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("priority","integer",r=>r.notNull().defaultTo(0)).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).addUniqueConstraint("[Demand] buildingId-resourceId",["buildingId","resourceId"]).execute(),await t.schema.createTable("Transport").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("sourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] sourceId",["sourceId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("waypointId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] waypointId",["waypointId"],"Waypoint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("targetId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] targetId",["targetId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).execute();for await(const r of["userId","mapId","resourceId","sourceId","waypointId","targetId"])await t.schema.createIndex(`[Transport] ${r}`).on("Transport").columns([r]).execute()}}}),tY=Mt("/$locale/apps/derivean")({loader:eY}),aL="icon-[proicons--game]",nY=En({slot:{base:["text-orange-500","font-bold","text-2xl","shadow-md","hover:shadow-lg","hover:text-orange-600","rounded-sm","px-2","py-1","bg-slate-100"]},variant:{},defaults:{}}),lL=({variant:t,tva:e=nY,css:n})=>{const r=e({...t,css:n}).slots;return f.jsx("div",{className:r.base(),children:"DeRivean"})},is="icon-[fluent--building-shop-20-regular]",Sv="icon-[oui--vis-map-region]",Ir="icon-[hugeicons--resources-add]",rY=t=>{const{locale:e}=Zt({from:"/$locale"});return f.jsxs(Rc,{...t,children:[f.jsx(ir,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},children:f.jsx(J,{label:"Editor (menu)"})}),f.jsx(ir,{icon:is,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/blueprint/$id/view"},{to:"/$locale/apps/derivean/root/blueprint/$id/dependencies"},{to:"/$locale/apps/derivean/root/blueprint/$id/production"},{to:"/$locale/apps/derivean/root/blueprint/$id/requirements"},{to:"/$locale/apps/derivean/root/blueprint/$id/edit"},{to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements"}],children:f.jsx(J,{label:"Blueprint list (menu)"})}),f.jsx(ir,{icon:Sv,to:"/$locale/apps/derivean/root/region/list",params:{locale:e},children:f.jsx(J,{label:"Region list (menu)"})}),f.jsx(ir,{icon:Ir,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:f.jsx(J,{label:"Resource list (menu)"})}),f.jsx(ir,{icon:iN,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/user/$id/view"},{to:"/$locale/apps/derivean/root/user/$id/building/list"}],children:f.jsx(J,{label:"User list (menu)"})}),f.jsx(ir,{icon:tm,to:"/$locale/apps/derivean/root/tag/list",params:{locale:e},children:f.jsx(J,{label:"Tag list (menu)"})})]})},Um=M.object({id:M.string(),name:M.string(),login:M.string()}),iY=Mt("/$locale/apps/derivean/root")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return Um.parse(Of.get("session"))}catch{throw wm({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{session:t}}){return{session:await t()}},component:()=>{const{locale:t}=Zt({from:"/$locale"}),{session:e}=mi({from:"/$locale/apps/derivean/root"});return f.jsx(X2,{logo:f.jsx(St,{to:"/$locale/apps/derivean/root",params:{locale:t},children:f.jsx(lL,{})}),menu:f.jsx(rY,{}),actions:f.jsxs(f.Fragment,{children:[e.name,f.jsx(St,{icon:aL,to:"/$locale/apps/derivean/game",params:{locale:t}}),f.jsx(St,{icon:rN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]})})}}),sY=Mt("/$locale/apps/derivean/map")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return Um.parse(Of.get("session"))}catch{throw wm({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},component(){return f.jsxs(f.Fragment,{children:[f.jsx(lP,{position:"top-right"}),f.jsx(Ks,{})]})}}),oY=Mt("/$locale/apps/derivean/game")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return Um.parse(Of.get("session"))}catch{throw wm({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{session:r,cycle:await t.ensureQueryData({queryKey:["Cycle"],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{locale:t}=Zt({from:"/$locale"}),{session:e}=mi({from:"/$locale/apps/derivean/game"}),n=fz({filters:{status:"pending",mutationKey:["useCycleMutation"]},select(r){return r.state.status}});return f.jsx(X2,{logo:f.jsx(St,{to:"/$locale/apps/derivean/game",params:{locale:t},children:f.jsx(lL,{})}),actions:f.jsxs(f.Fragment,{children:[e.name,f.jsx(St,{icon:"icon-[clarity--crown-line]",to:"/$locale/apps/derivean/root",params:{locale:t}}),f.jsx(St,{icon:rN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]}),css:{base:n.length?["select-none","pointer-events-none","opacity-50"]:void 0},children:f.jsx(Ks,{})})}});var db={exports:{}},aY=db.exports,KO;function lY(){return KO||(KO=1,function(t,e){(function(n,r){r()})(aY,function(){function n(d,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function r(d,p,h){var g=new XMLHttpRequest;g.open("GET",d),g.responseType="blob",g.onload=function(){u(g.response,p,h)},g.onerror=function(){console.error("could not download file")},g.send()}function i(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function s(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ec=="object"&&ec.global===ec?ec:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(d,p,h){var g=o.URL||o.webkitURL,x=document.createElement("a");p=p||d.name||"download",x.download=p,x.rel="noopener",typeof d=="string"?(x.href=d,x.origin===location.origin?s(x):i(x.href)?r(d,p,h):s(x,x.target="_blank")):(x.href=g.createObjectURL(d),setTimeout(function(){g.revokeObjectURL(x.href)},4e4),setTimeout(function(){s(x)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,h){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,h),p);else if(i(d))r(d,p,h);else{var g=document.createElement("a");g.href=d,g.target="_blank",setTimeout(function(){s(g)})}}:function(d,p,h,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof d=="string")return r(d,p,h);var x=d.type==="application/octet-stream",_=/constructor/i.test(o.HTMLElement)||o.safari,S=/CriOS\/[\d]+/.test(navigator.userAgent);if((S||x&&_||a)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var C=k.result;C=S?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=C:location=C,g=null},k.readAsDataURL(d)}else{var I=o.URL||o.webkitURL,E=I.createObjectURL(d);g?g.location=E:location.href=E,g=null,setTimeout(function(){I.revokeObjectURL(E)},4e4)}});o.saveAs=u.saveAs=u,t.exports=u})}(db)),db.exports}var uY=lY();const cY=Gs(uY),oS=["Tag","Resource","Resource_Tag","Blueprint","Inventory","Region","Region_Inventory","Blueprint_Inventory","Blueprint_Region","Blueprint_Dependency","Blueprint_Conflict","Blueprint_Requirement","Blueprint_Production","Blueprint_Production_Requirement","Blueprint_Production_Dependency","Blueprint_Production_Resource"],dY=Mt("/$locale/apps/derivean/root/")({component(){const t=Jt({mutationKey:["export"],async mutationFn(){return qn.promise((async()=>{const e=[];await Nt.transaction().execute(async n=>{for await(const r of oS)e.push({source:r,entities:await n.selectFrom(r).selectAll().execute()})}),cY.saveAs(new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"}),"export.json")})(),si("Export game files"))}});return f.jsxs("div",{className:"flex flex-col gap-4 w-2/3 mx-auto",children:[f.jsx(pZ,{onDrop:async e=>{const[n]=e;if(!n)return;const r=JSON.parse(await n.text());await Sr`PRAGMA foreign_keys = OFF`.execute(Nt),await qn.promise(Nt.transaction().execute(async i=>{for await(const{source:s}of r){const o=oS.find(a=>a===s);o&&await i.deleteFrom(o).execute()}for await(const{source:s,entities:o}of r){const a=oS.find(u=>u===s);if(a)for await(const u of Object.values(o))await i.insertInto(a).values(u).execute()}await Sr`
                                    DELETE FROM Inventory
                                    WHERE NOT EXISTS (
                                        SELECT 1 FROM Blueprint_Inventory 
                                        WHERE Blueprint_Inventory.inventoryId = Inventory.id
                                    )
                                `.execute(i)}),si("Import game files")),await Sr`PRAGMA foreign_keys = ON`.execute(Nt)}}),f.jsx("div",{className:"flex items-center justify-center mt-10 gap-4",children:f.jsx(cn,{iconEnabled:aL,loading:t.isPending,onClick:()=>t.mutate(),variant:{variant:"subtle"},children:f.jsx(J,{label:"Export game files (label)"})})}),f.jsx("h2",{children:"TODO"}),f.jsxs("ul",{className:"flex flex-col gap-2",children:[f.jsx("li",{children:"Add supply/demand buttons; demand will set Demand with the current inventory limit until fullfilled (if the user don't want more, it could be simply removed from demands)."}),f.jsx("li",{children:"Resolve transport priority?"}),f.jsx("li",{children:"Add notification center like inventory is full, production is full and so on."}),f.jsx("li",{children:'Upgrades: Put everything into the building, drive upgrades by passive "Research" points'}),f.jsx("li",{children:"Bundle default gameplay as exported json (put into public); add button to root to load default/selected gameplay; idea is a few buttons: Settler like, Fantasy, AoE and so on."}),f.jsx("li",{children:"Define game ending rules: amount of resources in (individual resourece per required cycle), required building in a cycle. When a player fail, game end with the ability to reset. Each game rule may have an ending message to show."}),f.jsx("li",{children:"Define winning rules: amount of resources / building built in specific cycle. When rules are not met, it's like a fail."}),f.jsx("li",{children:"Add something like world available resources + the ability to drain and add resources to the world. Something like Wolrd_Inventory where 0 means unlimited resources."}),f.jsx("li",{children:"World renewal resources: a list of resources with cycles and amount when they got renewed (world_renewal_queue)."}),f.jsx("li",{children:"Defines seasons: list of cyclic seasons with their length; resource production may be bound to specific season(s)."}),f.jsx("li",{children:"Add maintenance cost for a building: when a cycle ends, cost is deducted from the inventory. If there is not enough resources, building will be marked as offline (closed for production)."}),f.jsx("li",{children:"Dispaly resources per season (some resources will be available only in specific season)"}),f.jsx("li",{children:"Add resource probability drop: some resources may have not be produces (like a crop). This should be thinked out."})]})]})}});var Vm=t=>t.type==="checkbox",oc=t=>t instanceof Date,Ji=t=>t==null;const uL=t=>typeof t=="object";var Kr=t=>!Ji(t)&&!Array.isArray(t)&&uL(t)&&!oc(t),cL=t=>Kr(t)&&t.target?Vm(t.target)?t.target.checked:t.target.value:t,fY=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,dL=(t,e)=>t.has(fY(e)),pY=t=>{const e=t.constructor&&t.constructor.prototype;return Kr(e)&&e.hasOwnProperty("isPrototypeOf")},aN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function bs(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(aN&&(t instanceof Blob||r))&&(n||Kr(t)))if(e=n?[]:{},!n&&!pY(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=bs(t[i]));else return t;return e}var Nx=t=>Array.isArray(t)?t.filter(Boolean):[],Hr=t=>t===void 0,kt=(t,e,n)=>{if(!e||!Kr(t))return n;const r=Nx(e.split(/[,[\].]+?/)).reduce((i,s)=>Ji(i)?i:i[s],t);return Hr(r)||r===t?Hr(t[e])?n:t[e]:r},mo=t=>typeof t=="boolean",lN=t=>/^\w*$/.test(t),fL=t=>Nx(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Hn=(t,e,n)=>{let r=-1;const i=lN(e)?[e]:fL(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let u=n;if(r!==o){const d=t[a];u=Kr(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=u,t=t[a]}return t};const Ev={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Lo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ba={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},hY=Un.createContext(null),uN=()=>Un.useContext(hY);var pL=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Lo.all&&(e._proxyFormState[o]=!r||Lo.all),n&&(n[o]=!0),t[o]}});return i},vs=t=>Kr(t)&&!Object.keys(t).length,hL=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return vs(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Lo.all))},Eh=t=>Array.isArray(t)?t:[t],mL=(t,e,n)=>!t||!e||t===e||Eh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function cN(t){const e=Un.useRef(t);e.current=t,Un.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function mY(t){const e=uN(),{control:n=e.control,disabled:r,name:i,exact:s}=t,[o,a]=Un.useState(n._formState),u=Un.useRef(!0),d=Un.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=Un.useRef(i);return p.current=i,cN({disabled:r,next:h=>u.current&&mL(p.current,h.name,s)&&hL(h,d.current,n._updateFormState)&&a({...n._formState,...h}),subject:n._subjects.state}),Un.useEffect(()=>(u.current=!0,d.current.isValid&&n._updateValid(!0),()=>{u.current=!1}),[n]),Un.useMemo(()=>pL(o,n,d.current,!1),[o,n])}var ua=t=>typeof t=="string",gL=(t,e,n,r,i)=>ua(t)?(r&&e.watch.add(t),kt(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),kt(n,s))):(r&&(e.watchAll=!0),n);function gY(t){const e=uN(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t,a=Un.useRef(r);a.current=r,cN({disabled:s,subject:n._subjects.values,next:p=>{mL(a.current,p.name,o)&&d(bs(gL(a.current,n._names,p.values||n._formValues,!1,i)))}});const[u,d]=Un.useState(n._getWatch(r,i));return Un.useEffect(()=>n._removeUnmounted()),u}function yY(t){const e=uN(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=dL(i._names.array,n),a=gY({control:i,name:n,defaultValue:kt(i._formValues,n,kt(i._defaultValues,n,t.defaultValue)),exact:!0}),u=mY({control:i,name:n,exact:!0}),d=Un.useRef(i.register(n,{...t.rules,value:a,...mo(t.disabled)?{disabled:t.disabled}:{}})),p=Un.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!kt(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!kt(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!kt(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!kt(u.validatingFields,n)},error:{enumerable:!0,get:()=>kt(u.errors,n)}}),[u,n]),h=Un.useMemo(()=>({name:n,value:a,...mo(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:g=>d.current.onChange({target:{value:cL(g),name:n},type:Ev.CHANGE}),onBlur:()=>d.current.onBlur({target:{value:kt(i._formValues,n),name:n},type:Ev.BLUR}),ref:g=>{const x=kt(i._fields,n);x&&g&&(x._f.ref={focus:()=>g.focus(),select:()=>g.select(),setCustomValidity:_=>g.setCustomValidity(_),reportValidity:()=>g.reportValidity()})}}),[n,i._formValues,r,u.disabled,a,i._fields]);return Un.useEffect(()=>{const g=i._options.shouldUnregister||s,x=(_,S)=>{const k=kt(i._fields,_);k&&k._f&&(k._f.mount=S)};if(x(n,!0),g){const _=bs(kt(i._options.defaultValues,n));Hn(i._defaultValues,n,_),Hr(kt(i._formValues,n))&&Hn(i._formValues,n,_)}return!o&&i.register(n),()=>{(o?g&&!i._state.action:g)?i.unregister(n):x(n,!1)}},[n,i,o,s]),Un.useEffect(()=>{i._updateDisabledField({disabled:r,fields:i._fields,name:n})},[r,n,i]),Un.useMemo(()=>({field:h,formState:u,fieldState:p}),[h,u,p])}const Mi=t=>t.render(yY(t));var yL=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},QO=t=>({isOnSubmit:!t||t===Lo.onSubmit,isOnBlur:t===Lo.onBlur,isOnChange:t===Lo.onChange,isOnAll:t===Lo.all,isOnTouch:t===Lo.onTouched}),JO=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Ih=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=kt(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Ih(a,e))break}else if(Kr(a)&&Ih(a,e))break}}};var bY=(t,e,n)=>{const r=Eh(kt(t,n));return Hn(r,"root",e[n]),Hn(t,n,r),t},dN=t=>t.type==="file",aa=t=>typeof t=="function",Iv=t=>{if(!aN)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},fb=t=>ua(t),fN=t=>t.type==="radio",Nv=t=>t instanceof RegExp;const ZO={value:!1,isValid:!1},YO={value:!0,isValid:!0};var bL=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Hr(t[0].attributes.value)?Hr(t[0].value)||t[0].value===""?YO:{value:t[0].value,isValid:!0}:YO:ZO}return ZO};const XO={isValid:!1,value:null};var vL=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,XO):XO;function eA(t,e,n="validate"){if(fb(t)||Array.isArray(t)&&t.every(fb)||mo(t)&&!t)return{type:n,message:fb(t)?t:"",ref:e}}var yd=t=>Kr(t)&&!Nv(t)?t:{value:t,message:""},tA=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:u,maxLength:d,minLength:p,min:h,max:g,pattern:x,validate:_,name:S,valueAsNumber:k,mount:I}=t._f,E=kt(n,S);if(!I||e.has(S))return{};const C=a?a[0]:o,j=W=>{i&&C.reportValidity&&(C.setCustomValidity(mo(W)?"":W||""),C.reportValidity())},q={},F=fN(o),$=Vm(o),P=F||$,O=(k||dN(o))&&Hr(o.value)&&Hr(E)||Iv(o)&&o.value===""||E===""||Array.isArray(E)&&!E.length,B=yL.bind(null,S,r,q),D=(W,V,z,X=Ba.maxLength,Z=Ba.minLength)=>{const le=W?V:z;q[S]={type:W?X:Z,message:le,ref:o,...B(W?X:Z,le)}};if(s?!Array.isArray(E)||!E.length:u&&(!P&&(O||Ji(E))||mo(E)&&!E||$&&!bL(a).isValid||F&&!vL(a).isValid)){const{value:W,message:V}=fb(u)?{value:!!u,message:u}:yd(u);if(W&&(q[S]={type:Ba.required,message:V,ref:C,...B(Ba.required,V)},!r))return j(V),q}if(!O&&(!Ji(h)||!Ji(g))){let W,V;const z=yd(g),X=yd(h);if(!Ji(E)&&!isNaN(E)){const Z=o.valueAsNumber||E&&+E;Ji(z.value)||(W=Z>z.value),Ji(X.value)||(V=Z<X.value)}else{const Z=o.valueAsDate||new Date(E),le=oe=>new Date(new Date().toDateString()+" "+oe),ie=o.type=="time",ne=o.type=="week";ua(z.value)&&E&&(W=ie?le(E)>le(z.value):ne?E>z.value:Z>new Date(z.value)),ua(X.value)&&E&&(V=ie?le(E)<le(X.value):ne?E<X.value:Z<new Date(X.value))}if((W||V)&&(D(!!W,z.message,X.message,Ba.max,Ba.min),!r))return j(q[S].message),q}if((d||p)&&!O&&(ua(E)||s&&Array.isArray(E))){const W=yd(d),V=yd(p),z=!Ji(W.value)&&E.length>+W.value,X=!Ji(V.value)&&E.length<+V.value;if((z||X)&&(D(z,W.message,V.message),!r))return j(q[S].message),q}if(x&&!O&&ua(E)){const{value:W,message:V}=yd(x);if(Nv(W)&&!E.match(W)&&(q[S]={type:Ba.pattern,message:V,ref:o,...B(Ba.pattern,V)},!r))return j(V),q}if(_){if(aa(_)){const W=await _(E,n),V=eA(W,C);if(V&&(q[S]={...V,...B(Ba.validate,V.message)},!r))return j(V.message),q}else if(Kr(_)){let W={};for(const V in _){if(!vs(W)&&!r)break;const z=eA(await _[V](E,n),C,V);z&&(W={...z,...B(V,z.message)},j(z.message),r&&(q[S]=W))}if(!vs(W)&&(q[S]={ref:C,...W},!r))return q}}return j(!0),q};function vY(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Hr(t)?r++:t[e[r++]];return t}function xY(t){for(const e in t)if(t.hasOwnProperty(e)&&!Hr(t[e]))return!1;return!0}function li(t,e){const n=Array.isArray(e)?e:lN(e)?[e]:fL(e),r=n.length===1?t:vY(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Kr(r)&&vs(r)||Array.isArray(r)&&xY(r))&&li(t,n.slice(0,-1)),t}var aS=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},CI=t=>Ji(t)||!uL(t);function Gl(t,e){if(CI(t)||CI(e))return t===e;if(oc(t)&&oc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(oc(s)&&oc(o)||Kr(s)&&Kr(o)||Array.isArray(s)&&Array.isArray(o)?!Gl(s,o):s!==o)return!1}}return!0}var xL=t=>t.type==="select-multiple",wY=t=>fN(t)||Vm(t),lS=t=>Iv(t)&&t.isConnected,wL=t=>{for(const e in t)if(aa(t[e]))return!0;return!1};function kv(t,e={}){const n=Array.isArray(t);if(Kr(t)||n)for(const r in t)Array.isArray(t[r])||Kr(t[r])&&!wL(t[r])?(e[r]=Array.isArray(t[r])?[]:{},kv(t[r],e[r])):Ji(t[r])||(e[r]=!0);return e}function _L(t,e,n){const r=Array.isArray(t);if(Kr(t)||r)for(const i in t)Array.isArray(t[i])||Kr(t[i])&&!wL(t[i])?Hr(e)||CI(n[i])?n[i]=Array.isArray(t[i])?kv(t[i],[]):{...kv(t[i])}:_L(t[i],Ji(e)?{}:e[i],n[i]):n[i]=!Gl(t[i],e[i]);return n}var Lp=(t,e)=>_L(t,e,kv(e)),SL=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Hr(t)?t:e?t===""?NaN:t&&+t:n&&ua(t)?new Date(t):r?r(t):t;function uS(t){const e=t.ref;return dN(e)?e.files:fN(e)?vL(t.refs).value:xL(e)?[...e.selectedOptions].map(({value:n})=>n):Vm(e)?bL(t.refs).value:SL(Hr(e.value)?t.ref.value:e.value,t)}var _Y=(t,e,n,r)=>{const i={};for(const s of t){const o=kt(e,s);o&&Hn(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Mp=t=>Hr(t)?t:Nv(t)?t.source:Kr(t)?Nv(t.value)?t.value.source:t.value:t;const nA="AsyncFunction";var SY=t=>!!t&&!!t.validate&&!!(aa(t.validate)&&t.validate.constructor.name===nA||Kr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===nA)),EY=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function rA(t,e,n){const r=kt(t,n);if(r||lN(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=kt(e,s),a=kt(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var IY=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,NY=(t,e)=>!Nx(kt(t,e)).length&&li(t,e);const kY={mode:Lo.onSubmit,reValidateMode:Lo.onChange,shouldFocusError:!0};function CY(t={}){let e={...kY,...t},n={submitCount:0,isDirty:!1,isLoading:aa(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Kr(e.defaultValues)||Kr(e.values)?bs(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:bs(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,d=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:aS(),array:aS(),state:aS()},g=QO(e.mode),x=QO(e.reValidateMode),_=e.criteriaMode===Lo.all,S=xe=>be=>{clearTimeout(d),d=setTimeout(xe,be)},k=async xe=>{if(!e.disabled&&(p.isValid||xe)){const be=e.resolver?vs((await P()).errors):await B(r,!0);be!==n.isValid&&h.state.next({isValid:be})}},I=(xe,be)=>{!e.disabled&&(p.isValidating||p.validatingFields)&&((xe||Array.from(a.mount)).forEach(Ne=>{Ne&&(be?Hn(n.validatingFields,Ne,be):li(n.validatingFields,Ne))}),h.state.next({validatingFields:n.validatingFields,isValidating:!vs(n.validatingFields)}))},E=(xe,be=[],Ne,qe,Ve=!0,rt=!0)=>{if(qe&&Ne&&!e.disabled){if(o.action=!0,rt&&Array.isArray(kt(r,xe))){const Me=Ne(kt(r,xe),qe.argA,qe.argB);Ve&&Hn(r,xe,Me)}if(rt&&Array.isArray(kt(n.errors,xe))){const Me=Ne(kt(n.errors,xe),qe.argA,qe.argB);Ve&&Hn(n.errors,xe,Me),NY(n.errors,xe)}if(p.touchedFields&&rt&&Array.isArray(kt(n.touchedFields,xe))){const Me=Ne(kt(n.touchedFields,xe),qe.argA,qe.argB);Ve&&Hn(n.touchedFields,xe,Me)}p.dirtyFields&&(n.dirtyFields=Lp(i,s)),h.state.next({name:xe,isDirty:W(xe,be),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Hn(s,xe,be)},C=(xe,be)=>{Hn(n.errors,xe,be),h.state.next({errors:n.errors})},j=xe=>{n.errors=xe,h.state.next({errors:n.errors,isValid:!1})},q=(xe,be,Ne,qe)=>{const Ve=kt(r,xe);if(Ve){const rt=kt(s,xe,Hr(Ne)?kt(i,xe):Ne);Hr(rt)||qe&&qe.defaultChecked||be?Hn(s,xe,be?rt:uS(Ve._f)):X(xe,rt),o.mount&&k()}},F=(xe,be,Ne,qe,Ve)=>{let rt=!1,Me=!1;const ct={name:xe};if(!e.disabled){const Yt=!!(kt(r,xe)&&kt(r,xe)._f&&kt(r,xe)._f.disabled);if(!Ne||qe){p.isDirty&&(Me=n.isDirty,n.isDirty=ct.isDirty=W(),rt=Me!==ct.isDirty);const Xt=Yt||Gl(kt(i,xe),be);Me=!!(!Yt&&kt(n.dirtyFields,xe)),Xt||Yt?li(n.dirtyFields,xe):Hn(n.dirtyFields,xe,!0),ct.dirtyFields=n.dirtyFields,rt=rt||p.dirtyFields&&Me!==!Xt}if(Ne){const Xt=kt(n.touchedFields,xe);Xt||(Hn(n.touchedFields,xe,Ne),ct.touchedFields=n.touchedFields,rt=rt||p.touchedFields&&Xt!==Ne)}rt&&Ve&&h.state.next(ct)}return rt?ct:{}},$=(xe,be,Ne,qe)=>{const Ve=kt(n.errors,xe),rt=p.isValid&&mo(be)&&n.isValid!==be;if(e.delayError&&Ne?(u=S(()=>C(xe,Ne)),u(e.delayError)):(clearTimeout(d),u=null,Ne?Hn(n.errors,xe,Ne):li(n.errors,xe)),(Ne?!Gl(Ve,Ne):Ve)||!vs(qe)||rt){const Me={...qe,...rt&&mo(be)?{isValid:be}:{},errors:n.errors,name:xe};n={...n,...Me},h.state.next(Me)}},P=async xe=>{I(xe,!0);const be=await e.resolver(s,e.context,_Y(xe||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return I(xe),be},O=async xe=>{const{errors:be}=await P(xe);if(xe)for(const Ne of xe){const qe=kt(be,Ne);qe?Hn(n.errors,Ne,qe):li(n.errors,Ne)}else n.errors=be;return be},B=async(xe,be,Ne={valid:!0})=>{for(const qe in xe){const Ve=xe[qe];if(Ve){const{_f:rt,...Me}=Ve;if(rt){const ct=a.array.has(rt.name),Yt=Ve._f&&SY(Ve._f);Yt&&p.validatingFields&&I([qe],!0);const Xt=await tA(Ve,a.disabled,s,_,e.shouldUseNativeValidation&&!be,ct);if(Yt&&p.validatingFields&&I([qe]),Xt[rt.name]&&(Ne.valid=!1,be))break;!be&&(kt(Xt,rt.name)?ct?bY(n.errors,Xt,rt.name):Hn(n.errors,rt.name,Xt[rt.name]):li(n.errors,rt.name))}!vs(Me)&&await B(Me,be,Ne)}}return Ne.valid},D=()=>{for(const xe of a.unMount){const be=kt(r,xe);be&&(be._f.refs?be._f.refs.every(Ne=>!lS(Ne)):!lS(be._f.ref))&&Ie(xe)}a.unMount=new Set},W=(xe,be)=>!e.disabled&&(xe&&be&&Hn(s,xe,be),!Gl(te(),i)),V=(xe,be,Ne)=>gL(xe,a,{...o.mount?s:Hr(be)?i:ua(xe)?{[xe]:be}:be},Ne,be),z=xe=>Nx(kt(o.mount?s:i,xe,e.shouldUnregister?kt(i,xe,[]):[])),X=(xe,be,Ne={})=>{const qe=kt(r,xe);let Ve=be;if(qe){const rt=qe._f;rt&&(!rt.disabled&&Hn(s,xe,SL(be,rt)),Ve=Iv(rt.ref)&&Ji(be)?"":be,xL(rt.ref)?[...rt.ref.options].forEach(Me=>Me.selected=Ve.includes(Me.value)):rt.refs?Vm(rt.ref)?rt.refs.length>1?rt.refs.forEach(Me=>(!Me.defaultChecked||!Me.disabled)&&(Me.checked=Array.isArray(Ve)?!!Ve.find(ct=>ct===Me.value):Ve===Me.value)):rt.refs[0]&&(rt.refs[0].checked=!!Ve):rt.refs.forEach(Me=>Me.checked=Me.value===Ve):dN(rt.ref)?rt.ref.value="":(rt.ref.value=Ve,rt.ref.type||h.values.next({name:xe,values:{...s}})))}(Ne.shouldDirty||Ne.shouldTouch)&&F(xe,Ve,Ne.shouldTouch,Ne.shouldDirty,!0),Ne.shouldValidate&&oe(xe)},Z=(xe,be,Ne)=>{for(const qe in be){const Ve=be[qe],rt=`${xe}.${qe}`,Me=kt(r,rt);(a.array.has(xe)||Kr(Ve)||Me&&!Me._f)&&!oc(Ve)?Z(rt,Ve,Ne):X(rt,Ve,Ne)}},le=(xe,be,Ne={})=>{const qe=kt(r,xe),Ve=a.array.has(xe),rt=bs(be);Hn(s,xe,rt),Ve?(h.array.next({name:xe,values:{...s}}),(p.isDirty||p.dirtyFields)&&Ne.shouldDirty&&h.state.next({name:xe,dirtyFields:Lp(i,s),isDirty:W(xe,rt)})):qe&&!qe._f&&!Ji(rt)?Z(xe,rt,Ne):X(xe,rt,Ne),JO(xe,a)&&h.state.next({...n}),h.values.next({name:o.mount?xe:void 0,values:{...s}})},ie=async xe=>{o.mount=!0;const be=xe.target;let Ne=be.name,qe=!0;const Ve=kt(r,Ne),rt=()=>be.type?uS(Ve._f):cL(xe),Me=ct=>{qe=Number.isNaN(ct)||oc(ct)&&isNaN(ct.getTime())||Gl(ct,kt(s,Ne,ct))};if(Ve){let ct,Yt;const Xt=rt(),_n=xe.type===Ev.BLUR||xe.type===Ev.FOCUS_OUT,dr=!EY(Ve._f)&&!e.resolver&&!kt(n.errors,Ne)&&!Ve._f.deps||IY(_n,kt(n.touchedFields,Ne),n.isSubmitted,x,g),Bn=JO(Ne,a,_n);Hn(s,Ne,Xt),_n?(Ve._f.onBlur&&Ve._f.onBlur(xe),u&&u(0)):Ve._f.onChange&&Ve._f.onChange(xe);const Yr=F(Ne,Xt,_n,!1),Vi=!vs(Yr)||Bn;if(!_n&&h.values.next({name:Ne,type:xe.type,values:{...s}}),dr)return p.isValid&&(e.mode==="onBlur"&&_n?k():_n||k()),Vi&&h.state.next({name:Ne,...Bn?{}:Yr});if(!_n&&Bn&&h.state.next({...n}),e.resolver){const{errors:Cr}=await P([Ne]);if(Me(Xt),qe){const en=rA(n.errors,r,Ne),os=rA(Cr,r,en.name||Ne);ct=os.error,Ne=os.name,Yt=vs(Cr)}}else I([Ne],!0),ct=(await tA(Ve,a.disabled,s,_,e.shouldUseNativeValidation))[Ne],I([Ne]),Me(Xt),qe&&(ct?Yt=!1:p.isValid&&(Yt=await B(r,!0)));qe&&(Ve._f.deps&&oe(Ve._f.deps),$(Ne,Yt,ct,Yr))}},ne=(xe,be)=>{if(kt(n.errors,be)&&xe.focus)return xe.focus(),1},oe=async(xe,be={})=>{let Ne,qe;const Ve=Eh(xe);if(e.resolver){const rt=await O(Hr(xe)?xe:Ve);Ne=vs(rt),qe=xe?!Ve.some(Me=>kt(rt,Me)):Ne}else xe?(qe=(await Promise.all(Ve.map(async rt=>{const Me=kt(r,rt);return await B(Me&&Me._f?{[rt]:Me}:Me)}))).every(Boolean),!(!qe&&!n.isValid)&&k()):qe=Ne=await B(r);return h.state.next({...!ua(xe)||p.isValid&&Ne!==n.isValid?{}:{name:xe},...e.resolver||!xe?{isValid:Ne}:{},errors:n.errors}),be.shouldFocus&&!qe&&Ih(r,ne,xe?Ve:a.mount),qe},te=xe=>{const be={...o.mount?s:i};return Hr(xe)?be:ua(xe)?kt(be,xe):xe.map(Ne=>kt(be,Ne))},ce=(xe,be)=>({invalid:!!kt((be||n).errors,xe),isDirty:!!kt((be||n).dirtyFields,xe),error:kt((be||n).errors,xe),isValidating:!!kt(n.validatingFields,xe),isTouched:!!kt((be||n).touchedFields,xe)}),de=xe=>{xe&&Eh(xe).forEach(be=>li(n.errors,be)),h.state.next({errors:xe?n.errors:{}})},ye=(xe,be,Ne)=>{const qe=(kt(r,xe,{_f:{}})._f||{}).ref,Ve=kt(n.errors,xe)||{},{ref:rt,message:Me,type:ct,...Yt}=Ve;Hn(n.errors,xe,{...Yt,...be,ref:qe}),h.state.next({name:xe,errors:n.errors,isValid:!1}),Ne&&Ne.shouldFocus&&qe&&qe.focus&&qe.focus()},we=(xe,be)=>aa(xe)?h.values.subscribe({next:Ne=>xe(V(void 0,be),Ne)}):V(xe,be,!0),Ie=(xe,be={})=>{for(const Ne of xe?Eh(xe):a.mount)a.mount.delete(Ne),a.array.delete(Ne),be.keepValue||(li(r,Ne),li(s,Ne)),!be.keepError&&li(n.errors,Ne),!be.keepDirty&&li(n.dirtyFields,Ne),!be.keepTouched&&li(n.touchedFields,Ne),!be.keepIsValidating&&li(n.validatingFields,Ne),!e.shouldUnregister&&!be.keepDefaultValue&&li(i,Ne);h.values.next({values:{...s}}),h.state.next({...n,...be.keepDirty?{isDirty:W()}:{}}),!be.keepIsValid&&k()},ze=({disabled:xe,name:be,field:Ne,fields:qe})=>{(mo(xe)&&o.mount||xe||a.disabled.has(be))&&(xe?a.disabled.add(be):a.disabled.delete(be),F(be,uS(Ne?Ne._f:kt(qe,be)._f),!1,!1,!0))},Re=(xe,be={})=>{let Ne=kt(r,xe);const qe=mo(be.disabled)||mo(e.disabled);return Hn(r,xe,{...Ne||{},_f:{...Ne&&Ne._f?Ne._f:{ref:{name:xe}},name:xe,mount:!0,...be}}),a.mount.add(xe),Ne?ze({field:Ne,disabled:mo(be.disabled)?be.disabled:e.disabled,name:xe}):q(xe,!0,be.value),{...qe?{disabled:be.disabled||e.disabled}:{},...e.progressive?{required:!!be.required,min:Mp(be.min),max:Mp(be.max),minLength:Mp(be.minLength),maxLength:Mp(be.maxLength),pattern:Mp(be.pattern)}:{},name:xe,onChange:ie,onBlur:ie,ref:Ve=>{if(Ve){Re(xe,be),Ne=kt(r,xe);const rt=Hr(Ve.value)&&Ve.querySelectorAll&&Ve.querySelectorAll("input,select,textarea")[0]||Ve,Me=wY(rt),ct=Ne._f.refs||[];if(Me?ct.find(Yt=>Yt===rt):rt===Ne._f.ref)return;Hn(r,xe,{_f:{...Ne._f,...Me?{refs:[...ct.filter(lS),rt,...Array.isArray(kt(i,xe))?[{}]:[]],ref:{type:rt.type,name:xe}}:{ref:rt}}}),q(xe,!1,void 0,rt)}else Ne=kt(r,xe,{}),Ne._f&&(Ne._f.mount=!1),(e.shouldUnregister||be.shouldUnregister)&&!(dL(a.array,xe)&&o.action)&&a.unMount.add(xe)}}},De=()=>e.shouldFocusError&&Ih(r,ne,a.mount),Je=xe=>{mo(xe)&&(h.state.next({disabled:xe}),Ih(r,(be,Ne)=>{const qe=kt(r,Ne);qe&&(be.disabled=qe._f.disabled||xe,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(Ve=>{Ve.disabled=qe._f.disabled||xe}))},0,!1))},Xe=(xe,be)=>async Ne=>{let qe;Ne&&(Ne.preventDefault&&Ne.preventDefault(),Ne.persist&&Ne.persist());let Ve=bs(s);if(a.disabled.size)for(const rt of a.disabled)Hn(Ve,rt,void 0);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:rt,values:Me}=await P();n.errors=rt,Ve=Me}else await B(r);if(li(n.errors,"root"),vs(n.errors)){h.state.next({errors:{}});try{await xe(Ve,Ne)}catch(rt){qe=rt}}else be&&await be({...n.errors},Ne),De(),setTimeout(De);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:vs(n.errors)&&!qe,submitCount:n.submitCount+1,errors:n.errors}),qe)throw qe},Ue=(xe,be={})=>{kt(r,xe)&&(Hr(be.defaultValue)?le(xe,bs(kt(i,xe))):(le(xe,be.defaultValue),Hn(i,xe,bs(be.defaultValue))),be.keepTouched||li(n.touchedFields,xe),be.keepDirty||(li(n.dirtyFields,xe),n.isDirty=be.defaultValue?W(xe,bs(kt(i,xe))):W()),be.keepError||(li(n.errors,xe),p.isValid&&k()),h.state.next({...n}))},ut=(xe,be={})=>{const Ne=xe?bs(xe):i,qe=bs(Ne),Ve=vs(xe),rt=Ve?i:qe;if(be.keepDefaultValues||(i=Ne),!be.keepValues){if(be.keepDirtyValues){const Me=new Set([...a.mount,...Object.keys(Lp(i,s))]);for(const ct of Array.from(Me))kt(n.dirtyFields,ct)?Hn(rt,ct,kt(s,ct)):le(ct,kt(rt,ct))}else{if(aN&&Hr(xe))for(const Me of a.mount){const ct=kt(r,Me);if(ct&&ct._f){const Yt=Array.isArray(ct._f.refs)?ct._f.refs[0]:ct._f.ref;if(Iv(Yt)){const Xt=Yt.closest("form");if(Xt){Xt.reset();break}}}}r={}}s=e.shouldUnregister?be.keepDefaultValues?bs(i):{}:bs(rt),h.array.next({values:{...rt}}),h.values.next({values:{...rt}})}a={mount:be.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!p.isValid||!!be.keepIsValid||!!be.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:be.keepSubmitCount?n.submitCount:0,isDirty:Ve?!1:be.keepDirty?n.isDirty:!!(be.keepDefaultValues&&!Gl(xe,i)),isSubmitted:be.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ve?{}:be.keepDirtyValues?be.keepDefaultValues&&s?Lp(i,s):n.dirtyFields:be.keepDefaultValues&&xe?Lp(i,xe):be.keepDirty?n.dirtyFields:{},touchedFields:be.keepTouched?n.touchedFields:{},errors:be.keepErrors?n.errors:{},isSubmitSuccessful:be.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Et=(xe,be)=>ut(aa(xe)?xe(s):xe,be);return{control:{register:Re,unregister:Ie,getFieldState:ce,handleSubmit:Xe,setError:ye,_executeSchema:P,_getWatch:V,_getDirty:W,_updateValid:k,_removeUnmounted:D,_updateFieldArray:E,_updateDisabledField:ze,_getFieldArray:z,_reset:ut,_resetDefaultValues:()=>aa(e.defaultValues)&&e.defaultValues().then(xe=>{Et(xe,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:xe=>{n={...n,...xe}},_disableForm:Je,_subjects:h,_proxyFormState:p,_setErrors:j,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(xe){o=xe},get _defaultValues(){return i},get _names(){return a},set _names(xe){a=xe},get _formState(){return n},set _formState(xe){n=xe},get _options(){return e},set _options(xe){e={...e,...xe}}},trigger:oe,register:Re,handleSubmit:Xe,watch:we,setValue:le,getValues:te,reset:Et,resetField:Ue,clearErrors:de,unregister:Ie,setError:ye,setFocus:(xe,be={})=>{const Ne=kt(r,xe),qe=Ne&&Ne._f;if(qe){const Ve=qe.refs?qe.refs[0]:qe.ref;Ve.focus&&(Ve.focus(),be.shouldSelect&&aa(Ve.select)&&Ve.select())}},getFieldState:ce}}function yi(t={}){const e=Un.useRef(void 0),n=Un.useRef(void 0),[r,i]=Un.useState({isDirty:!1,isValidating:!1,isLoading:aa(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:aa(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...CY(t),formState:r});const s=e.current.control;return s._options=t,cN({subject:s._subjects.state,next:o=>{hL(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),Un.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Un.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Un.useEffect(()=>{t.values&&!Gl(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),Un.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),Un.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Un.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=pL(r,s),e.current}const iA=(t,e,n)=>{if(t&&"reportValidity"in t){const r=kt(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},EL=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?iA(r.ref,n,t):r.refs&&r.refs.forEach(i=>iA(i,n,t))}},TY=(t,e)=>{e.shouldUseNativeValidation&&EL(t,e);const n={};for(const r in t){const i=kt(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(jY(e.names||Object.keys(t),r)){const o=Object.assign({},kt(n,r));Hn(o,"root",s),Hn(n,r,o)}else Hn(n,r,s)}return n},jY=(t,e)=>t.some(n=>n.startsWith(e+"."));var RY=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(p){return p.errors.forEach(function(h){return t.push(h)})}),e){var u=n[o].types,d=u&&u[r.code];n[o]=yL(o,e,n,i,d?[].concat(d,r.message):r.message)}t.shift()}return n},bi=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return s.shouldUseNativeValidation&&EL({},s),{errors:{},values:n.raw?r:d}})}catch(d){return a(d)}return u&&u.then?u.then(void 0,a):u}(0,function(o){if(function(a){return Array.isArray(a?.errors)}(o))return{values:{},errors:TY(RY(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}};const rm="icon-[cil--arrow-right]",IL="icon-[et--map]",OY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({name:M.string().min(1),cycles:M.number().int(),sort:M.number().int(),limit:M.number().int()})),shape:t,filter:e,sort:["id","name","cycles","sort","limit"]}),AY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintId:M.string().min(1),conflictId:M.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","conflictId"]}),qY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintId:M.string().min(1),dependencyId:M.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","dependencyId"]}),PY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintId:M.string().min(1),inventoryId:M.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","inventoryId"]}),FY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintId:M.string().min(1),resourceId:M.string().min(1),amount:M.number(),cycles:M.number().int()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","cycles"]}),DY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintProductionId:M.string().min(1),blueprintId:M.string().min(1)})),shape:t,filter:e,sort:["id","blueprintProductionId","blueprintId"]}),LY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintProductionId:M.string().min(1),resourceId:M.string().min(1),amount:M.number(),passive:ns()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount","passive"]}),MY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintProductionId:M.string().min(1),resourceId:M.string().min(1),amount:M.number()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount"]}),$Y=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintId:M.string().min(1),resourceId:M.string().min(1),amount:M.number(),passive:ns()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","passive"]}),BY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({userId:M.string().min(1),blueprintId:M.string().min(1),constructionId:M.string().nullish(),landId:M.string().min(1),productionId:M.string().nullish(),recurringProductionId:M.string().nullish(),x:M.number(),y:M.number(),valid:ns()})),shape:t,filter:e,sort:["id","userId","blueprintId","constructionId","landId","productionId","recurringProductionId","x","y","valid"]}),zY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({resourceId:M.string().min(1),amount:M.number(),limit:M.number(),type:M.string().min(1)})),shape:t,filter:e,sort:["id","resourceId","amount","limit","type"]}),WY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({userId:M.string().min(1),name:M.string().min(1)})),shape:t,filter:e,sort:["id","userId","name"]}),UY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({name:M.string().min(1),color:M.string().min(1),minWidth:M.number().int(),maxWidth:M.number().int(),minHeight:M.number().int(),maxHeight:M.number().int(),probability:M.number().int(),limit:M.number().int()})),shape:t,filter:e,sort:["id","name","color","minWidth","maxWidth","minHeight","maxHeight","probability","limit"]}),VY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({name:M.string().min(1),transport:M.number()})),shape:t,filter:e,sort:["id","name","transport"]}),HY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({code:M.string().min(1),label:M.string().min(1),group:M.string().nullish(),sort:M.number().int()})),shape:t,filter:e,sort:["id","code","label","group","sort"]}),GY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({name:M.string().min(1),login:M.string().min(1),password:M.string().min(1)})),shape:t,filter:e,sort:["id","name","login","password"]}),KY=WY({shape:M.object({name:M.string().min(1)}),filter:zi});function QY(t){return Math.random()<t/100}function JY(t=20480,e=32){const n=()=>Math.floor(Math.random()*(t/e))*e;return{x:n(),y:n()}}async function ZY(t,e,n,r){return!!await t.selectFrom("Land as l").where("l.mapId","=",e).where(s=>s.not(s.or([s("l.x",">=",n.x+r.width),s(Sr`l.x + l.width`,"<=",n.x),s("l.y",">=",n.y+r.height),s(Sr`l.y + l.height`,"<=",n.y)]))).select("id").executeTakeFirst()}const YY=async({tx:t,userId:e,name:n,size:r={world:24,land:384*2}})=>{const i=await t.insertInto("Map").values({id:wn(),userId:e,name:n}).returning("id").executeTakeFirstOrThrow(),s=await t.selectFrom("Region").selectAll().execute();for await(const{id:o,probability:a,limit:u,minWidth:d,maxWidth:p,minHeight:h,maxHeight:g}of s)for(let x=0;x<u;x++){if(!QY(a))continue;let _=0;const S=6;for(;_<S;){const E=JY(2048*r.world,2048);if(!await ZY(t,i.id,E,{width:2048,height:2048})){await t.insertInto("Land").values({id:wn(),height:2048,width:2048,regionId:o,mapId:i.id,...E}).execute();break}_++}}return i},XY=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(KY.shape),defaultValues:{name:"",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"name",label:f.jsx(J,{label:"Map name (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:IL,type:"submit",children:f.jsx(J,{label:"Create map (submit)"})})})]})},NL=Mt("/$locale/apps/derivean/game/")({async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{user:r,map:await t.ensureQueryData({queryKey:["GameMap","map",r.id],async queryFn(){return e.transaction().execute(i=>wr({select:i.selectFrom("Map as m").select(["m.id","m.name"]).where("m.userId","=",r.id),output:M.object({id:M.string().min(1),name:M.string().min(1)})}))}})}},component(){const{user:t,map:e}=NL.useLoaderData(),{tva:n}=gr({from:"__root__"}),r=n().slots,i=Fn([["GameMap"]]),{locale:s}=Zt({from:"/$locale"}),o=mu(),a=Jt({async mutationFn({id:u}){return Nt.transaction().execute(async d=>d.deleteFrom("Map").where("id","=",u).where("userId","=",t.id).execute())},async onSuccess(){await i()}});return f.jsxs("div",{className:r.base({css:["w-1/2","mx-auto","mt-24","flex","flex-col","gap-6"]}),children:[f.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:f.jsx(J,{label:"Map list (label)"})}),e.length>0?e.map(u=>f.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsx(St,{icon:rm,to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:u.id},children:u.name}),f.jsx("div",{children:f.jsx(cn,{iconEnabled:Dr,variant:{variant:"danger"},loading:a.isPending,onClick:()=>{a.mutate({id:u.id})}})})]},u.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(J,{label:"There are no maps (label)"})}),f.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:f.jsx(J,{label:"New map (label)"})}),f.jsx("div",{children:f.jsx(XY,{mutation:Jt({async mutationFn(u){return qn.promise(Nt.transaction().execute(d=>YY({tx:d,userId:t.id,...u})),si("Map generator"))},async onSuccess(u){o({to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:u.id}}),await i()}})})})]})}});var cS,sA;function pN(){if(sA)return cS;sA=1;var t="\0",e="\0",n="\x01";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(p){p&&(this._isDirected=Object.hasOwn(p,"directed")?p.directed:!0,this._isMultigraph=Object.hasOwn(p,"multigraph")?p.multigraph:!1,this._isCompound=Object.hasOwn(p,"compound")?p.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(p){return this._label=p,this}graph(){return this._label}setDefaultNodeLabel(p){return this._defaultNodeLabelFn=p,typeof p!="function"&&(this._defaultNodeLabelFn=()=>p),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var p=this;return this.nodes().filter(h=>Object.keys(p._in[h]).length===0)}sinks(){var p=this;return this.nodes().filter(h=>Object.keys(p._out[h]).length===0)}setNodes(p,h){var g=arguments,x=this;return p.forEach(function(_){g.length>1?x.setNode(_,h):x.setNode(_)}),this}setNode(p,h){return Object.hasOwn(this._nodes,p)?(arguments.length>1&&(this._nodes[p]=h),this):(this._nodes[p]=arguments.length>1?h:this._defaultNodeLabelFn(p),this._isCompound&&(this._parent[p]=e,this._children[p]={},this._children[e][p]=!0),this._in[p]={},this._preds[p]={},this._out[p]={},this._sucs[p]={},++this._nodeCount,this)}node(p){return this._nodes[p]}hasNode(p){return Object.hasOwn(this._nodes,p)}removeNode(p){var h=this;if(Object.hasOwn(this._nodes,p)){var g=x=>h.removeEdge(h._edgeObjs[x]);delete this._nodes[p],this._isCompound&&(this._removeFromParentsChildList(p),delete this._parent[p],this.children(p).forEach(function(x){h.setParent(x)}),delete this._children[p]),Object.keys(this._in[p]).forEach(g),delete this._in[p],delete this._preds[p],Object.keys(this._out[p]).forEach(g),delete this._out[p],delete this._sucs[p],--this._nodeCount}return this}setParent(p,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(h===void 0)h=e;else{h+="";for(var g=h;g!==void 0;g=this.parent(g))if(g===p)throw new Error("Setting "+h+" as parent of "+p+" would create a cycle");this.setNode(h)}return this.setNode(p),this._removeFromParentsChildList(p),this._parent[p]=h,this._children[h][p]=!0,this}_removeFromParentsChildList(p){delete this._children[this._parent[p]][p]}parent(p){if(this._isCompound){var h=this._parent[p];if(h!==e)return h}}children(p=e){if(this._isCompound){var h=this._children[p];if(h)return Object.keys(h)}else{if(p===e)return this.nodes();if(this.hasNode(p))return[]}}predecessors(p){var h=this._preds[p];if(h)return Object.keys(h)}successors(p){var h=this._sucs[p];if(h)return Object.keys(h)}neighbors(p){var h=this.predecessors(p);if(h){const x=new Set(h);for(var g of this.successors(p))x.add(g);return Array.from(x.values())}}isLeaf(p){var h;return this.isDirected()?h=this.successors(p):h=this.neighbors(p),h.length===0}filterNodes(p){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var g=this;Object.entries(this._nodes).forEach(function([S,k]){p(S)&&h.setNode(S,k)}),Object.values(this._edgeObjs).forEach(function(S){h.hasNode(S.v)&&h.hasNode(S.w)&&h.setEdge(S,g.edge(S))});var x={};function _(S){var k=g.parent(S);return k===void 0||h.hasNode(k)?(x[S]=k,k):k in x?x[k]:_(k)}return this._isCompound&&h.nodes().forEach(S=>h.setParent(S,_(S))),h}setDefaultEdgeLabel(p){return this._defaultEdgeLabelFn=p,typeof p!="function"&&(this._defaultEdgeLabelFn=()=>p),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(p,h){var g=this,x=arguments;return p.reduce(function(_,S){return x.length>1?g.setEdge(_,S,h):g.setEdge(_,S),S}),this}setEdge(){var p,h,g,x,_=!1,S=arguments[0];typeof S=="object"&&S!==null&&"v"in S?(p=S.v,h=S.w,g=S.name,arguments.length===2&&(x=arguments[1],_=!0)):(p=S,h=arguments[1],g=arguments[3],arguments.length>2&&(x=arguments[2],_=!0)),p=""+p,h=""+h,g!==void 0&&(g=""+g);var k=o(this._isDirected,p,h,g);if(Object.hasOwn(this._edgeLabels,k))return _&&(this._edgeLabels[k]=x),this;if(g!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(p),this.setNode(h),this._edgeLabels[k]=_?x:this._defaultEdgeLabelFn(p,h,g);var I=a(this._isDirected,p,h,g);return p=I.v,h=I.w,Object.freeze(I),this._edgeObjs[k]=I,i(this._preds[h],p),i(this._sucs[p],h),this._in[h][k]=I,this._out[p][k]=I,this._edgeCount++,this}edge(p,h,g){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,g);return this._edgeLabels[x]}edgeAsObj(){const p=this.edge(...arguments);return typeof p!="object"?{label:p}:p}hasEdge(p,h,g){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,g);return Object.hasOwn(this._edgeLabels,x)}removeEdge(p,h,g){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,g),_=this._edgeObjs[x];return _&&(p=_.v,h=_.w,delete this._edgeLabels[x],delete this._edgeObjs[x],s(this._preds[h],p),s(this._sucs[p],h),delete this._in[h][x],delete this._out[p][x],this._edgeCount--),this}inEdges(p,h){var g=this._in[p];if(g){var x=Object.values(g);return h?x.filter(_=>_.v===h):x}}outEdges(p,h){var g=this._out[p];if(g){var x=Object.values(g);return h?x.filter(_=>_.w===h):x}}nodeEdges(p,h){var g=this.inEdges(p,h);if(g)return g.concat(this.outEdges(p,h))}}function i(d,p){d[p]?d[p]++:d[p]=1}function s(d,p){--d[p]||delete d[p]}function o(d,p,h,g){var x=""+p,_=""+h;if(!d&&x>_){var S=x;x=_,_=S}return x+n+_+n+(g===void 0?t:g)}function a(d,p,h,g){var x=""+p,_=""+h;if(!d&&x>_){var S=x;x=_,_=S}var k={v:x,w:_};return g&&(k.name=g),k}function u(d,p){return o(d,p.v,p.w,p.name)}return cS=r,cS}var dS,oA;function eX(){return oA||(oA=1,dS="2.2.4"),dS}var fS,aA;function tX(){return aA||(aA=1,fS={Graph:pN(),version:eX()}),fS}var pS,lA;function nX(){if(lA)return pS;lA=1;var t=pN();pS={write:e,read:i};function e(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:r(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function n(s){return s.nodes().map(function(o){var a=s.node(o),u=s.parent(o),d={v:o};return a!==void 0&&(d.value=a),u!==void 0&&(d.parent=u),d})}function r(s){return s.edges().map(function(o){var a=s.edge(o),u={v:o.v,w:o.w};return o.name!==void 0&&(u.name=o.name),a!==void 0&&(u.value=a),u})}function i(s){var o=new t(s.options).setGraph(s.value);return s.nodes.forEach(function(a){o.setNode(a.v,a.value),a.parent&&o.setParent(a.v,a.parent)}),s.edges.forEach(function(a){o.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),o}return pS}var hS,uA;function rX(){if(uA)return hS;uA=1,hS=t;function t(e){var n={},r=[],i;function s(o){Object.hasOwn(n,o)||(n[o]=!0,i.push(o),e.successors(o).forEach(s),e.predecessors(o).forEach(s))}return e.nodes().forEach(function(o){i=[],s(o),i.length&&r.push(i)}),r}return hS}var mS,cA;function kL(){if(cA)return mS;cA=1;class t{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))}_decrease(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s}_swap(n,r){var i=this._arr,s=this._keyIndices,o=i[n],a=i[r];i[n]=a,i[r]=o,s[a.key]=n,s[o.key]=r}}return mS=t,mS}var gS,dA;function CL(){if(dA)return gS;dA=1;var t=kL();gS=n;var e=()=>1;function n(i,s,o,a){return r(i,String(s),o||e,a||function(u){return i.outEdges(u)})}function r(i,s,o,a){var u={},d=new t,p,h,g=function(x){var _=x.v!==p?x.v:x.w,S=u[_],k=o(x),I=h.distance+k;if(k<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+k);I<S.distance&&(S.distance=I,S.predecessor=p,d.decrease(_,I))};for(i.nodes().forEach(function(x){var _=x===s?0:Number.POSITIVE_INFINITY;u[x]={distance:_},d.add(x,_)});d.size()>0&&(p=d.removeMin(),h=u[p],h.distance!==Number.POSITIVE_INFINITY);)a(p).forEach(g);return u}return gS}var yS,fA;function iX(){if(fA)return yS;fA=1;var t=CL();yS=e;function e(n,r,i){return n.nodes().reduce(function(s,o){return s[o]=t(n,o,r,i),s},{})}return yS}var bS,pA;function TL(){if(pA)return bS;pA=1,bS=t;function t(e){var n=0,r=[],i={},s=[];function o(a){var u=i[a]={onStack:!0,lowlink:n,index:n++};if(r.push(a),e.successors(a).forEach(function(h){Object.hasOwn(i,h)?i[h].onStack&&(u.lowlink=Math.min(u.lowlink,i[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,i[h].lowlink))}),u.lowlink===u.index){var d=[],p;do p=r.pop(),i[p].onStack=!1,d.push(p);while(a!==p);s.push(d)}}return e.nodes().forEach(function(a){Object.hasOwn(i,a)||o(a)}),s}return bS}var vS,hA;function sX(){if(hA)return vS;hA=1;var t=TL();vS=e;function e(n){return t(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return vS}var xS,mA;function oX(){if(mA)return xS;mA=1,xS=e;var t=()=>1;function e(r,i,s){return n(r,i||t,s||function(o){return r.outEdges(o)})}function n(r,i,s){var o={},a=r.nodes();return a.forEach(function(u){o[u]={},o[u][u]={distance:0},a.forEach(function(d){u!==d&&(o[u][d]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(d){var p=d.v===u?d.w:d.v,h=i(d);o[u][p]={distance:h,predecessor:u}})}),a.forEach(function(u){var d=o[u];a.forEach(function(p){var h=o[p];a.forEach(function(g){var x=h[u],_=d[g],S=h[g],k=x.distance+_.distance;k<S.distance&&(S.distance=k,S.predecessor=_.predecessor)})})}),o}return xS}var wS,gA;function jL(){if(gA)return wS;gA=1;function t(n){var r={},i={},s=[];function o(a){if(Object.hasOwn(i,a))throw new e;Object.hasOwn(r,a)||(i[a]=!0,r[a]=!0,n.predecessors(a).forEach(o),delete i[a],s.push(a))}if(n.sinks().forEach(o),Object.keys(r).length!==n.nodeCount())throw new e;return s}class e extends Error{constructor(){super(...arguments)}}return wS=t,t.CycleException=e,wS}var _S,yA;function aX(){if(yA)return _S;yA=1;var t=jL();_S=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return _S}var SS,bA;function RL(){if(bA)return SS;bA=1,SS=t;function t(i,s,o){Array.isArray(s)||(s=[s]);var a=i.isDirected()?h=>i.successors(h):h=>i.neighbors(h),u=o==="post"?e:n,d=[],p={};return s.forEach(h=>{if(!i.hasNode(h))throw new Error("Graph does not have node: "+h);u(h,a,p,d)}),d}function e(i,s,o,a){for(var u=[[i,!1]];u.length>0;){var d=u.pop();d[1]?a.push(d[0]):Object.hasOwn(o,d[0])||(o[d[0]]=!0,u.push([d[0],!0]),r(s(d[0]),p=>u.push([p,!1])))}}function n(i,s,o,a){for(var u=[i];u.length>0;){var d=u.pop();Object.hasOwn(o,d)||(o[d]=!0,a.push(d),r(s(d),p=>u.push(p)))}}function r(i,s){for(var o=i.length;o--;)s(i[o],o,i);return i}return SS}var ES,vA;function lX(){if(vA)return ES;vA=1;var t=RL();ES=e;function e(n,r){return t(n,r,"post")}return ES}var IS,xA;function uX(){if(xA)return IS;xA=1;var t=RL();IS=e;function e(n,r){return t(n,r,"pre")}return IS}var NS,wA;function cX(){if(wA)return NS;wA=1;var t=pN(),e=kL();NS=n;function n(r,i){var s=new t,o={},a=new e,u;function d(h){var g=h.v===u?h.w:h.v,x=a.priority(g);if(x!==void 0){var _=i(h);_<x&&(o[g]=u,a.decrease(g,_))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(h){a.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),a.decrease(r.nodes()[0],0);for(var p=!1;a.size()>0;){if(u=a.removeMin(),Object.hasOwn(o,u))s.setEdge(u,o[u]);else{if(p)throw new Error("Input graph is not connected: "+r);p=!0}r.nodeEdges(u).forEach(d)}return s}return NS}var kS,_A;function dX(){return _A||(_A=1,kS={components:rX(),dijkstra:CL(),dijkstraAll:iX(),findCycles:sX(),floydWarshall:oX(),isAcyclic:aX(),postorder:lX(),preorder:uX(),prim:cX(),tarjan:TL(),topsort:jL()}),kS}var CS,SA;function Ko(){if(SA)return CS;SA=1;var t=tX();return CS={Graph:t.Graph,json:nX(),alg:dX(),version:t.version},CS}var TS,EA;function fX(){if(EA)return TS;EA=1;class t{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return e(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&e(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,o=s._prev;for(;o!==s;)i.push(JSON.stringify(o,n)),o=o._prev;return"["+i.join(", ")+"]"}}function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return TS=t,TS}var jS,IA;function pX(){if(IA)return jS;IA=1;let t=Ko().Graph,e=fX();jS=r;let n=()=>1;function r(d,p){if(d.nodeCount()<=1)return[];let h=o(d,p||n);return i(h.graph,h.buckets,h.zeroIdx).flatMap(x=>d.outEdges(x.v,x.w))}function i(d,p,h){let g=[],x=p[p.length-1],_=p[0],S;for(;d.nodeCount();){for(;S=_.dequeue();)s(d,p,h,S);for(;S=x.dequeue();)s(d,p,h,S);if(d.nodeCount()){for(let k=p.length-2;k>0;--k)if(S=p[k].dequeue(),S){g=g.concat(s(d,p,h,S,!0));break}}}return g}function s(d,p,h,g,x){let _=x?[]:void 0;return d.inEdges(g.v).forEach(S=>{let k=d.edge(S),I=d.node(S.v);x&&_.push({v:S.v,w:S.w}),I.out-=k,a(p,h,I)}),d.outEdges(g.v).forEach(S=>{let k=d.edge(S),I=S.w,E=d.node(I);E.in-=k,a(p,h,E)}),d.removeNode(g.v),_}function o(d,p){let h=new t,g=0,x=0;d.nodes().forEach(k=>{h.setNode(k,{v:k,in:0,out:0})}),d.edges().forEach(k=>{let I=h.edge(k.v,k.w)||0,E=p(k),C=I+E;h.setEdge(k.v,k.w,C),x=Math.max(x,h.node(k.v).out+=E),g=Math.max(g,h.node(k.w).in+=E)});let _=u(x+g+3).map(()=>new e),S=g+1;return h.nodes().forEach(k=>{a(_,S,h.node(k))}),{graph:h,buckets:_,zeroIdx:S}}function a(d,p,h){h.out?h.in?d[h.out-h.in+p].enqueue(h):d[d.length-1].enqueue(h):d[0].enqueue(h)}function u(d){const p=[];for(let h=0;h<d;h++)p.push(h);return p}return jS}var RS,NA;function ii(){if(NA)return RS;NA=1;let t=Ko().Graph;RS={addBorderNode:p,addDummyNode:e,applyWithChunking:x,asNonCompoundGraph:r,buildLayerMatrix:a,intersectRect:o,mapValues:F,maxRank:_,normalizeRanks:u,notime:I,partition:S,pick:q,predecessorWeights:s,range:j,removeEmptyRanks:d,simplify:n,successorWeights:i,time:k,uniqueId:C,zipObject:$};function e(P,O,B,D){let W;do W=C(D);while(P.hasNode(W));return B.dummy=O,P.setNode(W,B),W}function n(P){let O=new t().setGraph(P.graph());return P.nodes().forEach(B=>O.setNode(B,P.node(B))),P.edges().forEach(B=>{let D=O.edge(B.v,B.w)||{weight:0,minlen:1},W=P.edge(B);O.setEdge(B.v,B.w,{weight:D.weight+W.weight,minlen:Math.max(D.minlen,W.minlen)})}),O}function r(P){let O=new t({multigraph:P.isMultigraph()}).setGraph(P.graph());return P.nodes().forEach(B=>{P.children(B).length||O.setNode(B,P.node(B))}),P.edges().forEach(B=>{O.setEdge(B,P.edge(B))}),O}function i(P){let O=P.nodes().map(B=>{let D={};return P.outEdges(B).forEach(W=>{D[W.w]=(D[W.w]||0)+P.edge(W).weight}),D});return $(P.nodes(),O)}function s(P){let O=P.nodes().map(B=>{let D={};return P.inEdges(B).forEach(W=>{D[W.v]=(D[W.v]||0)+P.edge(W).weight}),D});return $(P.nodes(),O)}function o(P,O){let B=P.x,D=P.y,W=O.x-B,V=O.y-D,z=P.width/2,X=P.height/2;if(!W&&!V)throw new Error("Not possible to find intersection inside of the rectangle");let Z,le;return Math.abs(V)*z>Math.abs(W)*X?(V<0&&(X=-X),Z=X*W/V,le=X):(W<0&&(z=-z),Z=z,le=z*V/W),{x:B+Z,y:D+le}}function a(P){let O=j(_(P)+1).map(()=>[]);return P.nodes().forEach(B=>{let D=P.node(B),W=D.rank;W!==void 0&&(O[W][D.order]=B)}),O}function u(P){let O=P.nodes().map(D=>{let W=P.node(D).rank;return W===void 0?Number.MAX_VALUE:W}),B=x(Math.min,O);P.nodes().forEach(D=>{let W=P.node(D);Object.hasOwn(W,"rank")&&(W.rank-=B)})}function d(P){let O=P.nodes().map(z=>P.node(z).rank),B=x(Math.min,O),D=[];P.nodes().forEach(z=>{let X=P.node(z).rank-B;D[X]||(D[X]=[]),D[X].push(z)});let W=0,V=P.graph().nodeRankFactor;Array.from(D).forEach((z,X)=>{z===void 0&&X%V!==0?--W:z!==void 0&&W&&z.forEach(Z=>P.node(Z).rank+=W)})}function p(P,O,B,D){let W={width:0,height:0};return arguments.length>=4&&(W.rank=B,W.order=D),e(P,"border",W,O)}function h(P,O=g){const B=[];for(let D=0;D<P.length;D+=O){const W=P.slice(D,D+O);B.push(W)}return B}const g=65535;function x(P,O){if(O.length>g){const B=h(O);return P.apply(null,B.map(D=>P.apply(null,D)))}else return P.apply(null,O)}function _(P){const B=P.nodes().map(D=>{let W=P.node(D).rank;return W===void 0?Number.MIN_VALUE:W});return x(Math.max,B)}function S(P,O){let B={lhs:[],rhs:[]};return P.forEach(D=>{O(D)?B.lhs.push(D):B.rhs.push(D)}),B}function k(P,O){let B=Date.now();try{return O()}finally{console.log(P+" time: "+(Date.now()-B)+"ms")}}function I(P,O){return O()}let E=0;function C(P){var O=++E;return toString(P)+O}function j(P,O,B=1){O==null&&(O=P,P=0);let D=V=>V<O;B<0&&(D=V=>O<V);const W=[];for(let V=P;D(V);V+=B)W.push(V);return W}function q(P,O){const B={};for(const D of O)P[D]!==void 0&&(B[D]=P[D]);return B}function F(P,O){let B=O;return typeof O=="string"&&(B=D=>D[O]),Object.entries(P).reduce((D,[W,V])=>(D[W]=B(V,W),D),{})}function $(P,O){return P.reduce((B,D,W)=>(B[D]=O[W],B),{})}return RS}var OS,kA;function hX(){if(kA)return OS;kA=1;let t=pX(),e=ii().uniqueId;OS={run:n,undo:i};function n(s){(s.graph().acyclicer==="greedy"?t(s,a(s)):r(s)).forEach(u=>{let d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,e("rev"))});function a(u){return d=>u.edge(d).weight}}function r(s){let o=[],a={},u={};function d(p){Object.hasOwn(u,p)||(u[p]=!0,a[p]=!0,s.outEdges(p).forEach(h=>{Object.hasOwn(a,h.w)?o.push(h):d(h.w)}),delete a[p])}return s.nodes().forEach(d),o}function i(s){s.edges().forEach(o=>{let a=s.edge(o);if(a.reversed){s.removeEdge(o);let u=a.forwardName;delete a.reversed,delete a.forwardName,s.setEdge(o.w,o.v,a,u)}})}return OS}var AS,CA;function mX(){if(CA)return AS;CA=1;let t=ii();AS={run:e,undo:r};function e(i){i.graph().dummyChains=[],i.edges().forEach(s=>n(i,s))}function n(i,s){let o=s.v,a=i.node(o).rank,u=s.w,d=i.node(u).rank,p=s.name,h=i.edge(s),g=h.labelRank;if(d===a+1)return;i.removeEdge(s);let x,_,S;for(S=0,++a;a<d;++S,++a)h.points=[],_={width:0,height:0,edgeLabel:h,edgeObj:s,rank:a},x=t.addDummyNode(i,"edge",_,"_d"),a===g&&(_.width=h.width,_.height=h.height,_.dummy="edge-label",_.labelpos=h.labelpos),i.setEdge(o,x,{weight:h.weight},p),S===0&&i.graph().dummyChains.push(x),o=x;i.setEdge(o,u,{weight:h.weight},p)}function r(i){i.graph().dummyChains.forEach(s=>{let o=i.node(s),a=o.edgeLabel,u;for(i.setEdge(o.edgeObj,a);o.dummy;)u=i.successors(s)[0],i.removeNode(s),a.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(a.x=o.x,a.y=o.y,a.width=o.width,a.height=o.height),s=u,o=i.node(s)})}return AS}var qS,TA;function Cv(){if(TA)return qS;TA=1;const{applyWithChunking:t}=ii();qS={longestPath:e,slack:n};function e(r){var i={};function s(o){var a=r.node(o);if(Object.hasOwn(i,o))return a.rank;i[o]=!0;let u=r.outEdges(o).map(p=>p==null?Number.POSITIVE_INFINITY:s(p.w)-r.edge(p).minlen);var d=t(Math.min,u);return d===Number.POSITIVE_INFINITY&&(d=0),a.rank=d}r.sources().forEach(s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return qS}var PS,jA;function OL(){if(jA)return PS;jA=1;var t=Ko().Graph,e=Cv().slack;PS=n;function n(o){var a=new t({directed:!1}),u=o.nodes()[0],d=o.nodeCount();a.setNode(u,{});for(var p,h;r(a,o)<d;)p=i(a,o),h=a.hasNode(p.v)?e(o,p):-e(o,p),s(a,o,h);return a}function r(o,a){function u(d){a.nodeEdges(d).forEach(p=>{var h=p.v,g=d===h?p.w:h;!o.hasNode(g)&&!e(a,p)&&(o.setNode(g,{}),o.setEdge(d,g,{}),u(g))})}return o.nodes().forEach(u),o.nodeCount()}function i(o,a){return a.edges().reduce((d,p)=>{let h=Number.POSITIVE_INFINITY;return o.hasNode(p.v)!==o.hasNode(p.w)&&(h=e(a,p)),h<d[0]?[h,p]:d},[Number.POSITIVE_INFINITY,null])[1]}function s(o,a,u){o.nodes().forEach(d=>a.node(d).rank+=u)}return PS}var FS,RA;function gX(){if(RA)return FS;RA=1;var t=OL(),e=Cv().slack,n=Cv().longestPath,r=Ko().alg.preorder,i=Ko().alg.postorder,s=ii().simplify;FS=o,o.initLowLimValues=p,o.initCutValues=a,o.calcCutValue=d,o.leaveEdge=g,o.enterEdge=x,o.exchangeEdges=_;function o(E){E=s(E),n(E);var C=t(E);p(C),a(C,E);for(var j,q;j=g(C);)q=x(C,E,j),_(C,E,j,q)}function a(E,C){var j=i(E,E.nodes());j=j.slice(0,j.length-1),j.forEach(q=>u(E,C,q))}function u(E,C,j){var q=E.node(j),F=q.parent;E.edge(j,F).cutvalue=d(E,C,j)}function d(E,C,j){var q=E.node(j),F=q.parent,$=!0,P=C.edge(j,F),O=0;return P||($=!1,P=C.edge(F,j)),O=P.weight,C.nodeEdges(j).forEach(B=>{var D=B.v===j,W=D?B.w:B.v;if(W!==F){var V=D===$,z=C.edge(B).weight;if(O+=V?z:-z,k(E,j,W)){var X=E.edge(j,W).cutvalue;O+=V?-X:X}}}),O}function p(E,C){arguments.length<2&&(C=E.nodes()[0]),h(E,{},1,C)}function h(E,C,j,q,F){var $=j,P=E.node(q);return C[q]=!0,E.neighbors(q).forEach(O=>{Object.hasOwn(C,O)||(j=h(E,C,j,O,q))}),P.low=$,P.lim=j++,F?P.parent=F:delete P.parent,j}function g(E){return E.edges().find(C=>E.edge(C).cutvalue<0)}function x(E,C,j){var q=j.v,F=j.w;C.hasEdge(q,F)||(q=j.w,F=j.v);var $=E.node(q),P=E.node(F),O=$,B=!1;$.lim>P.lim&&(O=P,B=!0);var D=C.edges().filter(W=>B===I(E,E.node(W.v),O)&&B!==I(E,E.node(W.w),O));return D.reduce((W,V)=>e(C,V)<e(C,W)?V:W)}function _(E,C,j,q){var F=j.v,$=j.w;E.removeEdge(F,$),E.setEdge(q.v,q.w,{}),p(E),a(E,C),S(E,C)}function S(E,C){var j=E.nodes().find(F=>!C.node(F).parent),q=r(E,j);q=q.slice(1),q.forEach(F=>{var $=E.node(F).parent,P=C.edge(F,$),O=!1;P||(P=C.edge($,F),O=!0),C.node(F).rank=C.node($).rank+(O?P.minlen:-P.minlen)})}function k(E,C,j){return E.hasEdge(C,j)}function I(E,C,j){return j.low<=C.lim&&C.lim<=j.lim}return FS}var DS,OA;function yX(){if(OA)return DS;OA=1;var t=Cv(),e=t.longestPath,n=OL(),r=gX();DS=i;function i(u){switch(u.graph().ranker){case"network-simplex":a(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:a(u)}}var s=e;function o(u){e(u),n(u)}function a(u){r(u)}return DS}var LS,AA;function bX(){if(AA)return LS;AA=1,LS=t;function t(r){let i=n(r);r.graph().dummyChains.forEach(s=>{let o=r.node(s),a=o.edgeObj,u=e(r,i,a.v,a.w),d=u.path,p=u.lca,h=0,g=d[h],x=!0;for(;s!==a.w;){if(o=r.node(s),x){for(;(g=d[h])!==p&&r.node(g).maxRank<o.rank;)h++;g===p&&(x=!1)}if(!x){for(;h<d.length-1&&r.node(g=d[h+1]).minRank<=o.rank;)h++;g=d[h]}r.setParent(s,g),s=r.successors(s)[0]}})}function e(r,i,s,o){let a=[],u=[],d=Math.min(i[s].low,i[o].low),p=Math.max(i[s].lim,i[o].lim),h,g;h=s;do h=r.parent(h),a.push(h);while(h&&(i[h].low>d||p>i[h].lim));for(g=h,h=o;(h=r.parent(h))!==g;)u.push(h);return{path:a.concat(u.reverse()),lca:g}}function n(r){let i={},s=0;function o(a){let u=s;r.children(a).forEach(o),i[a]={low:u,lim:s++}}return r.children().forEach(o),i}return LS}var MS,qA;function vX(){if(qA)return MS;qA=1;let t=ii();MS={run:e,cleanup:s};function e(o){let a=t.addDummyNode(o,"root",{},"_root"),u=r(o),d=Object.values(u),p=t.applyWithChunking(Math.max,d)-1,h=2*p+1;o.graph().nestingRoot=a,o.edges().forEach(x=>o.edge(x).minlen*=h);let g=i(o)+1;o.children().forEach(x=>n(o,a,h,g,p,u,x)),o.graph().nodeRankFactor=h}function n(o,a,u,d,p,h,g){let x=o.children(g);if(!x.length){g!==a&&o.setEdge(a,g,{weight:0,minlen:u});return}let _=t.addBorderNode(o,"_bt"),S=t.addBorderNode(o,"_bb"),k=o.node(g);o.setParent(_,g),k.borderTop=_,o.setParent(S,g),k.borderBottom=S,x.forEach(I=>{n(o,a,u,d,p,h,I);let E=o.node(I),C=E.borderTop?E.borderTop:I,j=E.borderBottom?E.borderBottom:I,q=E.borderTop?d:2*d,F=C!==j?1:p-h[g]+1;o.setEdge(_,C,{weight:q,minlen:F,nestingEdge:!0}),o.setEdge(j,S,{weight:q,minlen:F,nestingEdge:!0})}),o.parent(g)||o.setEdge(a,_,{weight:0,minlen:p+h[g]})}function r(o){var a={};function u(d,p){var h=o.children(d);h&&h.length&&h.forEach(g=>u(g,p+1)),a[d]=p}return o.children().forEach(d=>u(d,1)),a}function i(o){return o.edges().reduce((a,u)=>a+o.edge(u).weight,0)}function s(o){var a=o.graph();o.removeNode(a.nestingRoot),delete a.nestingRoot,o.edges().forEach(u=>{var d=o.edge(u);d.nestingEdge&&o.removeEdge(u)})}return MS}var $S,PA;function xX(){if(PA)return $S;PA=1;let t=ii();$S=e;function e(r){function i(s){let o=r.children(s),a=r.node(s);if(o.length&&o.forEach(i),Object.hasOwn(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(let u=a.minRank,d=a.maxRank+1;u<d;++u)n(r,"borderLeft","_bl",s,a,u),n(r,"borderRight","_br",s,a,u)}}r.children().forEach(i)}function n(r,i,s,o,a,u){let d={width:0,height:0,rank:u,borderType:i},p=a[i][u-1],h=t.addDummyNode(r,"border",d,s);a[i][u]=h,r.setParent(h,o),p&&r.setEdge(p,h,{weight:1})}return $S}var BS,FA;function wX(){if(FA)return BS;FA=1,BS={adjust:t,undo:e};function t(u){let d=u.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&n(u)}function e(u){let d=u.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&i(u),(d==="lr"||d==="rl")&&(o(u),n(u))}function n(u){u.nodes().forEach(d=>r(u.node(d))),u.edges().forEach(d=>r(u.edge(d)))}function r(u){let d=u.width;u.width=u.height,u.height=d}function i(u){u.nodes().forEach(d=>s(u.node(d))),u.edges().forEach(d=>{let p=u.edge(d);p.points.forEach(s),Object.hasOwn(p,"y")&&s(p)})}function s(u){u.y=-u.y}function o(u){u.nodes().forEach(d=>a(u.node(d))),u.edges().forEach(d=>{let p=u.edge(d);p.points.forEach(a),Object.hasOwn(p,"x")&&a(p)})}function a(u){let d=u.x;u.x=u.y,u.y=d}return BS}var zS,DA;function _X(){if(DA)return zS;DA=1;let t=ii();zS=e;function e(n){let r={},i=n.nodes().filter(p=>!n.children(p).length),s=i.map(p=>n.node(p).rank),o=t.applyWithChunking(Math.max,s),a=t.range(o+1).map(()=>[]);function u(p){if(r[p])return;r[p]=!0;let h=n.node(p);a[h.rank].push(p),n.successors(p).forEach(u)}return i.sort((p,h)=>n.node(p).rank-n.node(h).rank).forEach(u),a}return zS}var WS,LA;function SX(){if(LA)return WS;LA=1;let t=ii().zipObject;WS=e;function e(r,i){let s=0;for(let o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){let o=t(s,s.map((g,x)=>x)),a=i.flatMap(g=>r.outEdges(g).map(x=>({pos:o[x.w],weight:r.edge(x).weight})).sort((x,_)=>x.pos-_.pos)),u=1;for(;u<s.length;)u<<=1;let d=2*u-1;u-=1;let p=new Array(d).fill(0),h=0;return a.forEach(g=>{let x=g.pos+u;p[x]+=g.weight;let _=0;for(;x>0;)x%2&&(_+=p[x+1]),x=x-1>>1,p[x]+=g.weight;h+=g.weight*_}),h}return WS}var US,MA;function EX(){if(MA)return US;MA=1,US=t;function t(e,n=[]){return n.map(r=>{let i=e.inEdges(r);if(i.length){let s=i.reduce((o,a)=>{let u=e.edge(a),d=e.node(a.v);return{sum:o.sum+u.weight*d.order,weight:o.weight+u.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return US}var VS,$A;function IX(){if($A)return VS;$A=1;let t=ii();VS=e;function e(i,s){let o={};i.forEach((u,d)=>{let p=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};u.barycenter!==void 0&&(p.barycenter=u.barycenter,p.weight=u.weight)}),s.edges().forEach(u=>{let d=o[u.v],p=o[u.w];d!==void 0&&p!==void 0&&(p.indegree++,d.out.push(o[u.w]))});let a=Object.values(o).filter(u=>!u.indegree);return n(a)}function n(i){let s=[];function o(u){return d=>{d.merged||(d.barycenter===void 0||u.barycenter===void 0||d.barycenter>=u.barycenter)&&r(u,d)}}function a(u){return d=>{d.in.push(u),--d.indegree===0&&i.push(d)}}for(;i.length;){let u=i.pop();s.push(u),u.in.reverse().forEach(o(u)),u.out.forEach(a(u))}return s.filter(u=>!u.merged).map(u=>t.pick(u,["vs","i","barycenter","weight"]))}function r(i,s){let o=0,a=0;i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),s.weight&&(o+=s.barycenter*s.weight,a+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/a,i.weight=a,i.i=Math.min(s.i,i.i),s.merged=!0}return VS}var HS,BA;function NX(){if(BA)return HS;BA=1;let t=ii();HS=e;function e(i,s){let o=t.partition(i,_=>Object.hasOwn(_,"barycenter")),a=o.lhs,u=o.rhs.sort((_,S)=>S.i-_.i),d=[],p=0,h=0,g=0;a.sort(r(!!s)),g=n(d,u,g),a.forEach(_=>{g+=_.vs.length,d.push(_.vs),p+=_.barycenter*_.weight,h+=_.weight,g=n(d,u,g)});let x={vs:d.flat(!0)};return h&&(x.barycenter=p/h,x.weight=h),x}function n(i,s,o){let a;for(;s.length&&(a=s[s.length-1]).i<=o;)s.pop(),i.push(a.vs),o++;return o}function r(i){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}return HS}var GS,zA;function kX(){if(zA)return GS;zA=1;let t=EX(),e=IX(),n=NX();GS=r;function r(o,a,u,d){let p=o.children(a),h=o.node(a),g=h?h.borderLeft:void 0,x=h?h.borderRight:void 0,_={};g&&(p=p.filter(E=>E!==g&&E!==x));let S=t(o,p);S.forEach(E=>{if(o.children(E.v).length){let C=r(o,E.v,u,d);_[E.v]=C,Object.hasOwn(C,"barycenter")&&s(E,C)}});let k=e(S,u);i(k,_);let I=n(k,d);if(g&&(I.vs=[g,I.vs,x].flat(!0),o.predecessors(g).length)){let E=o.node(o.predecessors(g)[0]),C=o.node(o.predecessors(x)[0]);Object.hasOwn(I,"barycenter")||(I.barycenter=0,I.weight=0),I.barycenter=(I.barycenter*I.weight+E.order+C.order)/(I.weight+2),I.weight+=2}return I}function i(o,a){o.forEach(u=>{u.vs=u.vs.flatMap(d=>a[d]?a[d].vs:d)})}function s(o,a){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight):(o.barycenter=a.barycenter,o.weight=a.weight)}return GS}var KS,WA;function CX(){if(WA)return KS;WA=1;let t=Ko().Graph,e=ii();KS=n;function n(i,s,o){let a=r(i),u=new t({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(d=>i.node(d));return i.nodes().forEach(d=>{let p=i.node(d),h=i.parent(d);(p.rank===s||p.minRank<=s&&s<=p.maxRank)&&(u.setNode(d),u.setParent(d,h||a),i[o](d).forEach(g=>{let x=g.v===d?g.w:g.v,_=u.edge(x,d),S=_!==void 0?_.weight:0;u.setEdge(x,d,{weight:i.edge(g).weight+S})}),Object.hasOwn(p,"minRank")&&u.setNode(d,{borderLeft:p.borderLeft[s],borderRight:p.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return KS}var QS,UA;function TX(){if(UA)return QS;UA=1,QS=t;function t(e,n,r){let i={},s;r.forEach(o=>{let a=e.parent(o),u,d;for(;a;){if(u=e.parent(a),u?(d=i[u],i[u]=a):(d=s,s=a),d&&d!==a){n.setEdge(d,a);return}a=u}})}return QS}var JS,VA;function jX(){if(VA)return JS;VA=1;let t=_X(),e=SX(),n=kX(),r=CX(),i=TX(),s=Ko().Graph,o=ii();JS=a;function a(h,g){if(g&&typeof g.customOrder=="function"){g.customOrder(h,a);return}let x=o.maxRank(h),_=u(h,o.range(1,x+1),"inEdges"),S=u(h,o.range(x-1,-1,-1),"outEdges"),k=t(h);if(p(h,k),g&&g.disableOptimalOrderHeuristic)return;let I=Number.POSITIVE_INFINITY,E;for(let C=0,j=0;j<4;++C,++j){d(C%2?_:S,C%4>=2),k=o.buildLayerMatrix(h);let q=e(h,k);q<I&&(j=0,E=Object.assign({},k),I=q)}p(h,E)}function u(h,g,x){return g.map(function(_){return r(h,_,x)})}function d(h,g){let x=new s;h.forEach(function(_){let S=_.graph().root,k=n(_,S,x,g);k.vs.forEach((I,E)=>_.node(I).order=E),i(_,x,k.vs)})}function p(h,g){Object.values(g).forEach(x=>x.forEach((_,S)=>h.node(_).order=S))}return JS}var ZS,HA;function RX(){if(HA)return ZS;HA=1;let t=Ko().Graph,e=ii();ZS={positionX:x,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:o,verticalAlignment:a,horizontalCompaction:u,alignCoordinates:h,findSmallestWidthAlignment:p,balance:g};function n(k,I){let E={};function C(j,q){let F=0,$=0,P=j.length,O=q[q.length-1];return q.forEach((B,D)=>{let W=i(k,B),V=W?k.node(W).order:P;(W||B===O)&&(q.slice($,D+1).forEach(z=>{k.predecessors(z).forEach(X=>{let Z=k.node(X),le=Z.order;(le<F||V<le)&&!(Z.dummy&&k.node(z).dummy)&&s(E,X,z)})}),$=D+1,F=V)}),q}return I.length&&I.reduce(C),E}function r(k,I){let E={};function C(q,F,$,P,O){let B;e.range(F,$).forEach(D=>{B=q[D],k.node(B).dummy&&k.predecessors(B).forEach(W=>{let V=k.node(W);V.dummy&&(V.order<P||V.order>O)&&s(E,W,B)})})}function j(q,F){let $=-1,P,O=0;return F.forEach((B,D)=>{if(k.node(B).dummy==="border"){let W=k.predecessors(B);W.length&&(P=k.node(W[0]).order,C(F,O,D,$,P),O=D,$=P)}C(F,O,F.length,P,q.length)}),F}return I.length&&I.reduce(j),E}function i(k,I){if(k.node(I).dummy)return k.predecessors(I).find(E=>k.node(E).dummy)}function s(k,I,E){if(I>E){let j=I;I=E,E=j}let C=k[I];C||(k[I]=C={}),C[E]=!0}function o(k,I,E){if(I>E){let C=I;I=E,E=C}return!!k[I]&&Object.hasOwn(k[I],E)}function a(k,I,E,C){let j={},q={},F={};return I.forEach($=>{$.forEach((P,O)=>{j[P]=P,q[P]=P,F[P]=O})}),I.forEach($=>{let P=-1;$.forEach(O=>{let B=C(O);if(B.length){B=B.sort((W,V)=>F[W]-F[V]);let D=(B.length-1)/2;for(let W=Math.floor(D),V=Math.ceil(D);W<=V;++W){let z=B[W];q[O]===O&&P<F[z]&&!o(E,O,z)&&(q[z]=O,q[O]=j[O]=j[z],P=F[z])}}})}),{root:j,align:q}}function u(k,I,E,C,j){let q={},F=d(k,I,E,j),$=j?"borderLeft":"borderRight";function P(D,W){let V=F.nodes(),z=V.pop(),X={};for(;z;)X[z]?D(z):(X[z]=!0,V.push(z),V=V.concat(W(z))),z=V.pop()}function O(D){q[D]=F.inEdges(D).reduce((W,V)=>Math.max(W,q[V.v]+F.edge(V)),0)}function B(D){let W=F.outEdges(D).reduce((z,X)=>Math.min(z,q[X.w]-F.edge(X)),Number.POSITIVE_INFINITY),V=k.node(D);W!==Number.POSITIVE_INFINITY&&V.borderType!==$&&(q[D]=Math.max(q[D],W))}return P(O,F.predecessors.bind(F)),P(B,F.successors.bind(F)),Object.keys(C).forEach(D=>q[D]=q[E[D]]),q}function d(k,I,E,C){let j=new t,q=k.graph(),F=_(q.nodesep,q.edgesep,C);return I.forEach($=>{let P;$.forEach(O=>{let B=E[O];if(j.setNode(B),P){var D=E[P],W=j.edge(D,B);j.setEdge(D,B,Math.max(F(k,O,P),W||0))}P=O})}),j}function p(k,I){return Object.values(I).reduce((E,C)=>{let j=Number.NEGATIVE_INFINITY,q=Number.POSITIVE_INFINITY;Object.entries(C).forEach(([$,P])=>{let O=S(k,$)/2;j=Math.max(P+O,j),q=Math.min(P-O,q)});const F=j-q;return F<E[0]&&(E=[F,C]),E},[Number.POSITIVE_INFINITY,null])[1]}function h(k,I){let E=Object.values(I),C=e.applyWithChunking(Math.min,E),j=e.applyWithChunking(Math.max,E);["u","d"].forEach(q=>{["l","r"].forEach(F=>{let $=q+F,P=k[$];if(P===I)return;let O=Object.values(P),B=C-e.applyWithChunking(Math.min,O);F!=="l"&&(B=j-e.applyWithChunking(Math.max,O)),B&&(k[$]=e.mapValues(P,D=>D+B))})})}function g(k,I){return e.mapValues(k.ul,(E,C)=>{if(I)return k[I.toLowerCase()][C];{let j=Object.values(k).map(q=>q[C]).sort((q,F)=>q-F);return(j[1]+j[2])/2}})}function x(k){let I=e.buildLayerMatrix(k),E=Object.assign(n(k,I),r(k,I)),C={},j;["u","d"].forEach(F=>{j=F==="u"?I:Object.values(I).reverse(),["l","r"].forEach($=>{$==="r"&&(j=j.map(D=>Object.values(D).reverse()));let P=(F==="u"?k.predecessors:k.successors).bind(k),O=a(k,j,E,P),B=u(k,j,O.root,O.align,$==="r");$==="r"&&(B=e.mapValues(B,D=>-D)),C[F+$]=B})});let q=p(k,C);return h(C,q),g(C,k.graph().align)}function _(k,I,E){return(C,j,q)=>{let F=C.node(j),$=C.node(q),P=0,O;if(P+=F.width/2,Object.hasOwn(F,"labelpos"))switch(F.labelpos.toLowerCase()){case"l":O=-F.width/2;break;case"r":O=F.width/2;break}if(O&&(P+=E?O:-O),O=0,P+=(F.dummy?I:k)/2,P+=($.dummy?I:k)/2,P+=$.width/2,Object.hasOwn($,"labelpos"))switch($.labelpos.toLowerCase()){case"l":O=$.width/2;break;case"r":O=-$.width/2;break}return O&&(P+=E?O:-O),O=0,P}}function S(k,I){return k.node(I).width}return ZS}var YS,GA;function OX(){if(GA)return YS;GA=1;let t=ii(),e=RX().positionX;YS=n;function n(i){i=t.asNonCompoundGraph(i),r(i),Object.entries(e(i)).forEach(([s,o])=>i.node(s).x=o)}function r(i){let s=t.buildLayerMatrix(i),o=i.graph().ranksep,a=0;s.forEach(u=>{const d=u.reduce((p,h)=>{const g=i.node(h).height;return p>g?p:g},0);u.forEach(p=>i.node(p).y=a+d/2),a+=d+o})}return YS}var XS,KA;function AX(){if(KA)return XS;KA=1;let t=hX(),e=mX(),n=yX(),r=ii().normalizeRanks,i=bX(),s=ii().removeEmptyRanks,o=vX(),a=xX(),u=wX(),d=jX(),p=OX(),h=ii(),g=Ko().Graph;XS=x;function x(de,ye){let we=ye&&ye.debugTiming?h.time:h.notime;we("layout",()=>{let Ie=we("  buildLayoutGraph",()=>P(de));we("  runLayout",()=>_(Ie,we,ye)),we("  updateInputGraph",()=>S(de,Ie))})}function _(de,ye,we){ye("    makeSpaceForEdgeLabels",()=>O(de)),ye("    removeSelfEdges",()=>ie(de)),ye("    acyclic",()=>t.run(de)),ye("    nestingGraph.run",()=>o.run(de)),ye("    rank",()=>n(h.asNonCompoundGraph(de))),ye("    injectEdgeLabelProxies",()=>B(de)),ye("    removeEmptyRanks",()=>s(de)),ye("    nestingGraph.cleanup",()=>o.cleanup(de)),ye("    normalizeRanks",()=>r(de)),ye("    assignRankMinMax",()=>D(de)),ye("    removeEdgeLabelProxies",()=>W(de)),ye("    normalize.run",()=>e.run(de)),ye("    parentDummyChains",()=>i(de)),ye("    addBorderSegments",()=>a(de)),ye("    order",()=>d(de,we)),ye("    insertSelfEdges",()=>ne(de)),ye("    adjustCoordinateSystem",()=>u.adjust(de)),ye("    position",()=>p(de)),ye("    positionSelfEdges",()=>oe(de)),ye("    removeBorderNodes",()=>le(de)),ye("    normalize.undo",()=>e.undo(de)),ye("    fixupEdgeLabelCoords",()=>X(de)),ye("    undoCoordinateSystem",()=>u.undo(de)),ye("    translateGraph",()=>V(de)),ye("    assignNodeIntersects",()=>z(de)),ye("    reversePoints",()=>Z(de)),ye("    acyclic.undo",()=>t.undo(de))}function S(de,ye){de.nodes().forEach(we=>{let Ie=de.node(we),ze=ye.node(we);Ie&&(Ie.x=ze.x,Ie.y=ze.y,Ie.rank=ze.rank,ye.children(we).length&&(Ie.width=ze.width,Ie.height=ze.height))}),de.edges().forEach(we=>{let Ie=de.edge(we),ze=ye.edge(we);Ie.points=ze.points,Object.hasOwn(ze,"x")&&(Ie.x=ze.x,Ie.y=ze.y)}),de.graph().width=ye.graph().width,de.graph().height=ye.graph().height}let k=["nodesep","edgesep","ranksep","marginx","marginy"],I={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},E=["acyclicer","ranker","rankdir","align"],C=["width","height"],j={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],F={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},$=["labelpos"];function P(de){let ye=new g({multigraph:!0,compound:!0}),we=ce(de.graph());return ye.setGraph(Object.assign({},I,te(we,k),h.pick(we,E))),de.nodes().forEach(Ie=>{let ze=ce(de.node(Ie));const Re=te(ze,C);Object.keys(j).forEach(De=>{Re[De]===void 0&&(Re[De]=j[De])}),ye.setNode(Ie,Re),ye.setParent(Ie,de.parent(Ie))}),de.edges().forEach(Ie=>{let ze=ce(de.edge(Ie));ye.setEdge(Ie,Object.assign({},F,te(ze,q),h.pick(ze,$)))}),ye}function O(de){let ye=de.graph();ye.ranksep/=2,de.edges().forEach(we=>{let Ie=de.edge(we);Ie.minlen*=2,Ie.labelpos.toLowerCase()!=="c"&&(ye.rankdir==="TB"||ye.rankdir==="BT"?Ie.width+=Ie.labeloffset:Ie.height+=Ie.labeloffset)})}function B(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(we.width&&we.height){let Ie=de.node(ye.v),Re={rank:(de.node(ye.w).rank-Ie.rank)/2+Ie.rank,e:ye};h.addDummyNode(de,"edge-proxy",Re,"_ep")}})}function D(de){let ye=0;de.nodes().forEach(we=>{let Ie=de.node(we);Ie.borderTop&&(Ie.minRank=de.node(Ie.borderTop).rank,Ie.maxRank=de.node(Ie.borderBottom).rank,ye=Math.max(ye,Ie.maxRank))}),de.graph().maxRank=ye}function W(de){de.nodes().forEach(ye=>{let we=de.node(ye);we.dummy==="edge-proxy"&&(de.edge(we.e).labelRank=we.rank,de.removeNode(ye))})}function V(de){let ye=Number.POSITIVE_INFINITY,we=0,Ie=Number.POSITIVE_INFINITY,ze=0,Re=de.graph(),De=Re.marginx||0,Je=Re.marginy||0;function Xe(Ue){let ut=Ue.x,Et=Ue.y,At=Ue.width,Gt=Ue.height;ye=Math.min(ye,ut-At/2),we=Math.max(we,ut+At/2),Ie=Math.min(Ie,Et-Gt/2),ze=Math.max(ze,Et+Gt/2)}de.nodes().forEach(Ue=>Xe(de.node(Ue))),de.edges().forEach(Ue=>{let ut=de.edge(Ue);Object.hasOwn(ut,"x")&&Xe(ut)}),ye-=De,Ie-=Je,de.nodes().forEach(Ue=>{let ut=de.node(Ue);ut.x-=ye,ut.y-=Ie}),de.edges().forEach(Ue=>{let ut=de.edge(Ue);ut.points.forEach(Et=>{Et.x-=ye,Et.y-=Ie}),Object.hasOwn(ut,"x")&&(ut.x-=ye),Object.hasOwn(ut,"y")&&(ut.y-=Ie)}),Re.width=we-ye+De,Re.height=ze-Ie+Je}function z(de){de.edges().forEach(ye=>{let we=de.edge(ye),Ie=de.node(ye.v),ze=de.node(ye.w),Re,De;we.points?(Re=we.points[0],De=we.points[we.points.length-1]):(we.points=[],Re=ze,De=Ie),we.points.unshift(h.intersectRect(Ie,Re)),we.points.push(h.intersectRect(ze,De))})}function X(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(Object.hasOwn(we,"x"))switch((we.labelpos==="l"||we.labelpos==="r")&&(we.width-=we.labeloffset),we.labelpos){case"l":we.x-=we.width/2+we.labeloffset;break;case"r":we.x+=we.width/2+we.labeloffset;break}})}function Z(de){de.edges().forEach(ye=>{let we=de.edge(ye);we.reversed&&we.points.reverse()})}function le(de){de.nodes().forEach(ye=>{if(de.children(ye).length){let we=de.node(ye),Ie=de.node(we.borderTop),ze=de.node(we.borderBottom),Re=de.node(we.borderLeft[we.borderLeft.length-1]),De=de.node(we.borderRight[we.borderRight.length-1]);we.width=Math.abs(De.x-Re.x),we.height=Math.abs(ze.y-Ie.y),we.x=Re.x+we.width/2,we.y=Ie.y+we.height/2}}),de.nodes().forEach(ye=>{de.node(ye).dummy==="border"&&de.removeNode(ye)})}function ie(de){de.edges().forEach(ye=>{if(ye.v===ye.w){var we=de.node(ye.v);we.selfEdges||(we.selfEdges=[]),we.selfEdges.push({e:ye,label:de.edge(ye)}),de.removeEdge(ye)}})}function ne(de){var ye=h.buildLayerMatrix(de);ye.forEach(we=>{var Ie=0;we.forEach((ze,Re)=>{var De=de.node(ze);De.order=Re+Ie,(De.selfEdges||[]).forEach(Je=>{h.addDummyNode(de,"selfedge",{width:Je.label.width,height:Je.label.height,rank:De.rank,order:Re+ ++Ie,e:Je.e,label:Je.label},"_se")}),delete De.selfEdges})})}function oe(de){de.nodes().forEach(ye=>{var we=de.node(ye);if(we.dummy==="selfedge"){var Ie=de.node(we.e.v),ze=Ie.x+Ie.width/2,Re=Ie.y,De=we.x-ze,Je=Ie.height/2;de.setEdge(we.e,we.label),de.removeNode(ye),we.label.points=[{x:ze+2*De/3,y:Re-Je},{x:ze+5*De/6,y:Re-Je},{x:ze+De,y:Re},{x:ze+5*De/6,y:Re+Je},{x:ze+2*De/3,y:Re+Je}],we.label.x=we.x,we.label.y=we.y}})}function te(de,ye){return h.mapValues(h.pick(de,ye),Number)}function ce(de){var ye={};return de&&Object.entries(de).forEach(([we,Ie])=>{typeof we=="string"&&(we=we.toLowerCase()),ye[we]=Ie}),ye}return XS}var eE,QA;function qX(){if(QA)return eE;QA=1;let t=ii(),e=Ko().Graph;eE={debugOrdering:n};function n(r){let i=t.buildLayerMatrix(r),s=new e({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+r.node(o).rank)}),r.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),i.forEach((o,a)=>{let u="layer"+a;s.setNode(u,{rank:"same"}),o.reduce((d,p)=>(s.setEdge(d,p,{style:"invis"}),p))}),s}return eE}var tE,JA;function PX(){return JA||(JA=1,tE="1.1.4"),tE}var nE,ZA;function FX(){return ZA||(ZA=1,nE={graphlib:Ko(),layout:AX(),debug:qX(),util:{time:ii().time,notime:ii().notime},version:PX()}),nE}var DX=FX();const AL=Gs(DX);function Zr(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Zr(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var LX={value:()=>{}};function kx(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new pb(n)}function pb(t){this._=t}function MX(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}pb.prototype=kx.prototype={constructor:pb,on:function(t,e){var n=this._,r=MX(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=$X(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=YA(n[i],t.name,e);else if(e==null)for(i in n)n[i]=YA(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new pb(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function $X(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function YA(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=LX,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var TI="http://www.w3.org/1999/xhtml";const XA={svg:"http://www.w3.org/2000/svg",xhtml:TI,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cx(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),XA.hasOwnProperty(e)?{space:XA[e],local:t}:t}function BX(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===TI&&e.documentElement.namespaceURI===TI?e.createElement(t):e.createElementNS(n,t)}}function zX(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function qL(t){var e=Cx(t);return(e.local?zX:BX)(e)}function WX(){}function hN(t){return t==null?WX:function(){return this.querySelector(t)}}function UX(t){typeof t!="function"&&(t=hN(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),u,d,p=0;p<o;++p)(u=s[p])&&(d=t.call(u,u.__data__,p,s))&&("__data__"in u&&(d.__data__=u.__data__),a[p]=d);return new Vs(r,this._parents)}function VX(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function HX(){return[]}function PL(t){return t==null?HX:function(){return this.querySelectorAll(t)}}function GX(t){return function(){return VX(t.apply(this,arguments))}}function KX(t){typeof t=="function"?t=GX(t):t=PL(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,u,d=0;d<a;++d)(u=o[d])&&(r.push(t.call(u,u.__data__,d,o)),i.push(u));return new Vs(r,i)}function FL(t){return function(){return this.matches(t)}}function DL(t){return function(e){return e.matches(t)}}var QX=Array.prototype.find;function JX(t){return function(){return QX.call(this.children,t)}}function ZX(){return this.firstElementChild}function YX(t){return this.select(t==null?ZX:JX(typeof t=="function"?t:DL(t)))}var XX=Array.prototype.filter;function eee(){return Array.from(this.children)}function tee(t){return function(){return XX.call(this.children,t)}}function nee(t){return this.selectAll(t==null?eee:tee(typeof t=="function"?t:DL(t)))}function ree(t){typeof t!="function"&&(t=FL(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&t.call(u,u.__data__,d,s)&&a.push(u);return new Vs(r,this._parents)}function LL(t){return new Array(t.length)}function iee(){return new Vs(this._enter||this._groups.map(LL),this._parents)}function Tv(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Tv.prototype={constructor:Tv,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function see(t){return function(){return t}}function oee(t,e,n,r,i,s){for(var o=0,a,u=e.length,d=s.length;o<d;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new Tv(t,s[o]);for(;o<u;++o)(a=e[o])&&(i[o]=a)}function aee(t,e,n,r,i,s,o){var a,u,d=new Map,p=e.length,h=s.length,g=new Array(p),x;for(a=0;a<p;++a)(u=e[a])&&(g[a]=x=o.call(u,u.__data__,a,e)+"",d.has(x)?i[a]=u:d.set(x,u));for(a=0;a<h;++a)x=o.call(t,s[a],a,s)+"",(u=d.get(x))?(r[a]=u,u.__data__=s[a],d.delete(x)):n[a]=new Tv(t,s[a]);for(a=0;a<p;++a)(u=e[a])&&d.get(g[a])===u&&(i[a]=u)}function lee(t){return t.__data__}function uee(t,e){if(!arguments.length)return Array.from(this,lee);var n=e?aee:oee,r=this._parents,i=this._groups;typeof t!="function"&&(t=see(t));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),d=0;d<s;++d){var p=r[d],h=i[d],g=h.length,x=cee(t.call(p,p&&p.__data__,d,r)),_=x.length,S=a[d]=new Array(_),k=o[d]=new Array(_),I=u[d]=new Array(g);n(p,h,S,k,I,x,e);for(var E=0,C=0,j,q;E<_;++E)if(j=S[E]){for(E>=C&&(C=E+1);!(q=k[C])&&++C<_;);j._next=q||null}}return o=new Vs(o,r),o._enter=a,o._exit=u,o}function cee(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function dee(){return new Vs(this._exit||this._groups.map(LL),this._parents)}function fee(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function pee(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var d=n[u],p=r[u],h=d.length,g=a[u]=new Array(h),x,_=0;_<h;++_)(x=d[_]||p[_])&&(g[_]=x);for(;u<i;++u)a[u]=n[u];return new Vs(a,this._parents)}function hee(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function mee(t){t||(t=gee);function e(h,g){return h&&g?t(h.__data__,g.__data__):!h-!g}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),d,p=0;p<a;++p)(d=o[p])&&(u[p]=d);u.sort(e)}return new Vs(i,this._parents).order()}function gee(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function yee(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function bee(){return Array.from(this)}function vee(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function xee(){let t=0;for(const e of this)++t;return t}function wee(){return!this.node()}function _ee(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function See(t){return function(){this.removeAttribute(t)}}function Eee(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Iee(t,e){return function(){this.setAttribute(t,e)}}function Nee(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function kee(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Cee(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Tee(t,e){var n=Cx(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Eee:See:typeof e=="function"?n.local?Cee:kee:n.local?Nee:Iee)(n,e))}function ML(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function jee(t){return function(){this.style.removeProperty(t)}}function Ree(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Oee(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Aee(t,e,n){return arguments.length>1?this.each((e==null?jee:typeof e=="function"?Oee:Ree)(t,e,n??"")):hf(this.node(),t)}function hf(t,e){return t.style.getPropertyValue(e)||ML(t).getComputedStyle(t,null).getPropertyValue(e)}function qee(t){return function(){delete this[t]}}function Pee(t,e){return function(){this[t]=e}}function Fee(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Dee(t,e){return arguments.length>1?this.each((e==null?qee:typeof e=="function"?Fee:Pee)(t,e)):this.node()[t]}function $L(t){return t.trim().split(/^|\s+/)}function mN(t){return t.classList||new BL(t)}function BL(t){this._node=t,this._names=$L(t.getAttribute("class")||"")}BL.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function zL(t,e){for(var n=mN(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function WL(t,e){for(var n=mN(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Lee(t){return function(){zL(this,t)}}function Mee(t){return function(){WL(this,t)}}function $ee(t,e){return function(){(e.apply(this,arguments)?zL:WL)(this,t)}}function Bee(t,e){var n=$L(t+"");if(arguments.length<2){for(var r=mN(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?$ee:e?Lee:Mee)(n,e))}function zee(){this.textContent=""}function Wee(t){return function(){this.textContent=t}}function Uee(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Vee(t){return arguments.length?this.each(t==null?zee:(typeof t=="function"?Uee:Wee)(t)):this.node().textContent}function Hee(){this.innerHTML=""}function Gee(t){return function(){this.innerHTML=t}}function Kee(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Qee(t){return arguments.length?this.each(t==null?Hee:(typeof t=="function"?Kee:Gee)(t)):this.node().innerHTML}function Jee(){this.nextSibling&&this.parentNode.appendChild(this)}function Zee(){return this.each(Jee)}function Yee(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xee(){return this.each(Yee)}function ete(t){var e=typeof t=="function"?t:qL(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function tte(){return null}function nte(t,e){var n=typeof t=="function"?t:qL(t),r=e==null?tte:typeof e=="function"?e:hN(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function rte(){var t=this.parentNode;t&&t.removeChild(this)}function ite(){return this.each(rte)}function ste(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ote(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ate(t){return this.select(t?ote:ste)}function lte(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ute(t){return function(e){t.call(this,e,this.__data__)}}function cte(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function dte(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function fte(t,e,n){return function(){var r=this.__on,i,s=ute(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function pte(t,e,n){var r=cte(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,d=a.length,p;u<d;++u)for(i=0,p=a[u];i<s;++i)if((o=r[i]).type===p.type&&o.name===p.name)return p.value}return}for(a=e?fte:dte,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function UL(t,e,n){var r=ML(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function hte(t,e){return function(){return UL(this,t,e)}}function mte(t,e){return function(){return UL(this,t,e.apply(this,arguments))}}function gte(t,e){return this.each((typeof e=="function"?mte:hte)(t,e))}function*yte(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var VL=[null];function Vs(t,e){this._groups=t,this._parents=e}function Hm(){return new Vs([[document.documentElement]],VL)}function bte(){return this}Vs.prototype=Hm.prototype={constructor:Vs,select:UX,selectAll:KX,selectChild:YX,selectChildren:nee,filter:ree,data:uee,enter:iee,exit:dee,join:fee,merge:pee,selection:bte,order:hee,sort:mee,call:yee,nodes:bee,node:vee,size:xee,empty:wee,each:_ee,attr:Tee,style:Aee,property:Dee,classed:Bee,text:Vee,html:Qee,raise:Zee,lower:Xee,append:ete,insert:nte,remove:ite,clone:ate,datum:lte,on:pte,dispatch:gte,[Symbol.iterator]:yte};function $s(t){return typeof t=="string"?new Vs([[document.querySelector(t)]],[document.documentElement]):new Vs([[t]],VL)}function vte(t){let e;for(;e=t.sourceEvent;)t=e;return t}function qo(t,e){if(t=vte(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const xte={passive:!1},im={capture:!0,passive:!1};function rE(t){t.stopImmediatePropagation()}function ef(t){t.preventDefault(),t.stopImmediatePropagation()}function HL(t){var e=t.document.documentElement,n=$s(t).on("dragstart.drag",ef,im);"onselectstart"in e?n.on("selectstart.drag",ef,im):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function GL(t,e){var n=t.document.documentElement,r=$s(t).on("dragstart.drag",null);e&&(r.on("click.drag",ef,im),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ny=t=>()=>t;function jI(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:u,dy:d,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:p}})}jI.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function wte(t){return!t.ctrlKey&&!t.button}function _te(){return this.parentNode}function Ste(t,e){return e??{x:t.x,y:t.y}}function Ete(){return navigator.maxTouchPoints||"ontouchstart"in this}function KL(){var t=wte,e=_te,n=Ste,r=Ete,i={},s=kx("start","drag","end"),o=0,a,u,d,p,h=0;function g(j){j.on("mousedown.drag",x).filter(r).on("touchstart.drag",k).on("touchmove.drag",I,xte).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(j,q){if(!(p||!t.call(this,j,q))){var F=C(this,e.call(this,j,q),j,q,"mouse");F&&($s(j.view).on("mousemove.drag",_,im).on("mouseup.drag",S,im),HL(j.view),rE(j),d=!1,a=j.clientX,u=j.clientY,F("start",j))}}function _(j){if(ef(j),!d){var q=j.clientX-a,F=j.clientY-u;d=q*q+F*F>h}i.mouse("drag",j)}function S(j){$s(j.view).on("mousemove.drag mouseup.drag",null),GL(j.view,d),ef(j),i.mouse("end",j)}function k(j,q){if(t.call(this,j,q)){var F=j.changedTouches,$=e.call(this,j,q),P=F.length,O,B;for(O=0;O<P;++O)(B=C(this,$,j,q,F[O].identifier,F[O]))&&(rE(j),B("start",j,F[O]))}}function I(j){var q=j.changedTouches,F=q.length,$,P;for($=0;$<F;++$)(P=i[q[$].identifier])&&(ef(j),P("drag",j,q[$]))}function E(j){var q=j.changedTouches,F=q.length,$,P;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),$=0;$<F;++$)(P=i[q[$].identifier])&&(rE(j),P("end",j,q[$]))}function C(j,q,F,$,P,O){var B=s.copy(),D=qo(O||F,q),W,V,z;if((z=n.call(j,new jI("beforestart",{sourceEvent:F,target:g,identifier:P,active:o,x:D[0],y:D[1],dx:0,dy:0,dispatch:B}),$))!=null)return W=z.x-D[0]||0,V=z.y-D[1]||0,function X(Z,le,ie){var ne=D,oe;switch(Z){case"start":i[P]=X,oe=o++;break;case"end":delete i[P],--o;case"drag":D=qo(ie||le,q),oe=o;break}B.call(Z,j,new jI(Z,{sourceEvent:le,subject:z,target:g,identifier:P,active:oe,x:D[0]+W,y:D[1]+V,dx:D[0]-ne[0],dy:D[1]-ne[1],dispatch:B}),$)}}return g.filter=function(j){return arguments.length?(t=typeof j=="function"?j:Ny(!!j),g):t},g.container=function(j){return arguments.length?(e=typeof j=="function"?j:Ny(j),g):e},g.subject=function(j){return arguments.length?(n=typeof j=="function"?j:Ny(j),g):n},g.touchable=function(j){return arguments.length?(r=typeof j=="function"?j:Ny(!!j),g):r},g.on=function(){var j=s.on.apply(s,arguments);return j===s?g:j},g.clickDistance=function(j){return arguments.length?(h=(j=+j)*j,g):Math.sqrt(h)},g}function gN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function QL(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Gm(){}var sm=.7,jv=1/sm,tf="\\s*([+-]?\\d+)\\s*",om="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ite=/^#([0-9a-f]{3,8})$/,Nte=new RegExp(`^rgb\\(${tf},${tf},${tf}\\)$`),kte=new RegExp(`^rgb\\(${pa},${pa},${pa}\\)$`),Cte=new RegExp(`^rgba\\(${tf},${tf},${tf},${om}\\)$`),Tte=new RegExp(`^rgba\\(${pa},${pa},${pa},${om}\\)$`),jte=new RegExp(`^hsl\\(${om},${pa},${pa}\\)$`),Rte=new RegExp(`^hsla\\(${om},${pa},${pa},${om}\\)$`),eq={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};gN(Gm,am,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:tq,formatHex:tq,formatHex8:Ote,formatHsl:Ate,formatRgb:nq,toString:nq});function tq(){return this.rgb().formatHex()}function Ote(){return this.rgb().formatHex8()}function Ate(){return JL(this).formatHsl()}function nq(){return this.rgb().formatRgb()}function am(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ite.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rq(e):n===3?new _s(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ky(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ky(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Nte.exec(t))?new _s(e[1],e[2],e[3],1):(e=kte.exec(t))?new _s(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Cte.exec(t))?ky(e[1],e[2],e[3],e[4]):(e=Tte.exec(t))?ky(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=jte.exec(t))?oq(e[1],e[2]/100,e[3]/100,1):(e=Rte.exec(t))?oq(e[1],e[2]/100,e[3]/100,e[4]):eq.hasOwnProperty(t)?rq(eq[t]):t==="transparent"?new _s(NaN,NaN,NaN,0):null}function rq(t){return new _s(t>>16&255,t>>8&255,t&255,1)}function ky(t,e,n,r){return r<=0&&(t=e=n=NaN),new _s(t,e,n,r)}function qte(t){return t instanceof Gm||(t=am(t)),t?(t=t.rgb(),new _s(t.r,t.g,t.b,t.opacity)):new _s}function RI(t,e,n,r){return arguments.length===1?qte(t):new _s(t,e,n,r??1)}function _s(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}gN(_s,RI,QL(Gm,{brighter(t){return t=t==null?jv:Math.pow(jv,t),new _s(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?sm:Math.pow(sm,t),new _s(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _s(dc(this.r),dc(this.g),dc(this.b),Rv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iq,formatHex:iq,formatHex8:Pte,formatRgb:sq,toString:sq}));function iq(){return`#${ac(this.r)}${ac(this.g)}${ac(this.b)}`}function Pte(){return`#${ac(this.r)}${ac(this.g)}${ac(this.b)}${ac((isNaN(this.opacity)?1:this.opacity)*255)}`}function sq(){const t=Rv(this.opacity);return`${t===1?"rgb(":"rgba("}${dc(this.r)}, ${dc(this.g)}, ${dc(this.b)}${t===1?")":`, ${t})`}`}function Rv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function dc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ac(t){return t=dc(t),(t<16?"0":"")+t.toString(16)}function oq(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Mo(t,e,n,r)}function JL(t){if(t instanceof Mo)return new Mo(t.h,t.s,t.l,t.opacity);if(t instanceof Gm||(t=am(t)),!t)return new Mo;if(t instanceof Mo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Mo(o,a,u,t.opacity)}function Fte(t,e,n,r){return arguments.length===1?JL(t):new Mo(t,e,n,r??1)}function Mo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}gN(Mo,Fte,QL(Gm,{brighter(t){return t=t==null?jv:Math.pow(jv,t),new Mo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?sm:Math.pow(sm,t),new Mo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new _s(iE(t>=240?t-240:t+120,i,r),iE(t,i,r),iE(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Mo(aq(this.h),Cy(this.s),Cy(this.l),Rv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Rv(this.opacity);return`${t===1?"hsl(":"hsla("}${aq(this.h)}, ${Cy(this.s)*100}%, ${Cy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function aq(t){return t=(t||0)%360,t<0?t+360:t}function Cy(t){return Math.max(0,Math.min(1,t||0))}function iE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ZL=t=>()=>t;function Dte(t,e){return function(n){return t+n*e}}function Lte(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Mte(t){return(t=+t)==1?YL:function(e,n){return n-e?Lte(e,n,t):ZL(isNaN(e)?n:e)}}function YL(t,e){var n=e-t;return n?Dte(t,n):ZL(isNaN(t)?e:t)}const lq=function t(e){var n=Mte(e);function r(i,s){var o=n((i=RI(i)).r,(s=RI(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),d=YL(i.opacity,s.opacity);return function(p){return i.r=o(p),i.g=a(p),i.b=u(p),i.opacity=d(p),i+""}}return r.gamma=t,r}(1);function $l(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var OI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sE=new RegExp(OI.source,"g");function $te(t){return function(){return t}}function Bte(t){return function(e){return t(e)+""}}function zte(t,e){var n=OI.lastIndex=sE.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(t=t+"",e=e+"";(r=OI.exec(t))&&(i=sE.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:$l(r,i)})),n=sE.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Bte(u[0].x):$te(e):(e=u.length,function(d){for(var p=0,h;p<e;++p)a[(h=u[p]).i]=h.x(d);return a.join("")})}var uq=180/Math.PI,AI={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function XL(t,e,n,r,i,s){var o,a,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*uq,skewX:Math.atan(u)*uq,scaleX:o,scaleY:a}}var Ty;function Wte(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?AI:XL(e.a,e.b,e.c,e.d,e.e,e.f)}function Ute(t){return t==null||(Ty||(Ty=document.createElementNS("http://www.w3.org/2000/svg","g")),Ty.setAttribute("transform",t),!(t=Ty.transform.baseVal.consolidate()))?AI:(t=t.matrix,XL(t.a,t.b,t.c,t.d,t.e,t.f))}function eM(t,e,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,p,h,g,x,_){if(d!==h||p!==g){var S=x.push("translate(",null,e,null,n);_.push({i:S-4,x:$l(d,h)},{i:S-2,x:$l(p,g)})}else(h||g)&&x.push("translate("+h+e+g+n)}function o(d,p,h,g){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),g.push({i:h.push(i(h)+"rotate(",null,r)-2,x:$l(d,p)})):p&&h.push(i(h)+"rotate("+p+r)}function a(d,p,h,g){d!==p?g.push({i:h.push(i(h)+"skewX(",null,r)-2,x:$l(d,p)}):p&&h.push(i(h)+"skewX("+p+r)}function u(d,p,h,g,x,_){if(d!==h||p!==g){var S=x.push(i(x)+"scale(",null,",",null,")");_.push({i:S-4,x:$l(d,h)},{i:S-2,x:$l(p,g)})}else(h!==1||g!==1)&&x.push(i(x)+"scale("+h+","+g+")")}return function(d,p){var h=[],g=[];return d=t(d),p=t(p),s(d.translateX,d.translateY,p.translateX,p.translateY,h,g),o(d.rotate,p.rotate,h,g),a(d.skewX,p.skewX,h,g),u(d.scaleX,d.scaleY,p.scaleX,p.scaleY,h,g),d=p=null,function(x){for(var _=-1,S=g.length,k;++_<S;)h[(k=g[_]).i]=k.x(x);return h.join("")}}}var Vte=eM(Wte,"px, ","px)","deg)"),Hte=eM(Ute,", ",")",")"),Gte=1e-12;function cq(t){return((t=Math.exp(t))+1/t)/2}function Kte(t){return((t=Math.exp(t))-1/t)/2}function Qte(t){return((t=Math.exp(2*t))-1)/(t+1)}const Jte=function t(e,n,r){function i(s,o){var a=s[0],u=s[1],d=s[2],p=o[0],h=o[1],g=o[2],x=p-a,_=h-u,S=x*x+_*_,k,I;if(S<Gte)I=Math.log(g/d)/e,k=function($){return[a+$*x,u+$*_,d*Math.exp(e*$*I)]};else{var E=Math.sqrt(S),C=(g*g-d*d+r*S)/(2*d*n*E),j=(g*g-d*d-r*S)/(2*g*n*E),q=Math.log(Math.sqrt(C*C+1)-C),F=Math.log(Math.sqrt(j*j+1)-j);I=(F-q)/e,k=function($){var P=$*I,O=cq(q),B=d/(n*E)*(O*Qte(e*P+q)-Kte(q));return[a+B*x,u+B*_,d*O/cq(e*P+q)]}}return k.duration=I*1e3*e/Math.SQRT2,k}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return t(o,a,u)},i}(Math.SQRT2,2,4);var mf=0,nh=0,$p=0,tM=1e3,Ov,rh,Av=0,Ec=0,Tx=0,lm=typeof performance=="object"&&performance.now?performance:Date,nM=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function yN(){return Ec||(nM(Zte),Ec=lm.now()+Tx)}function Zte(){Ec=0}function qv(){this._call=this._time=this._next=null}qv.prototype=rM.prototype={constructor:qv,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?yN():+n)+(e==null?0:+e),!this._next&&rh!==this&&(rh?rh._next=this:Ov=this,rh=this),this._call=t,this._time=n,qI()},stop:function(){this._call&&(this._call=null,this._time=1/0,qI())}};function rM(t,e,n){var r=new qv;return r.restart(t,e,n),r}function Yte(){yN(),++mf;for(var t=Ov,e;t;)(e=Ec-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mf}function dq(){Ec=(Av=lm.now())+Tx,mf=nh=0;try{Yte()}finally{mf=0,ene(),Ec=0}}function Xte(){var t=lm.now(),e=t-Av;e>tM&&(Tx-=e,Av=t)}function ene(){for(var t,e=Ov,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ov=n);rh=t,qI(r)}function qI(t){if(!mf){nh&&(nh=clearTimeout(nh));var e=t-Ec;e>24?(t<1/0&&(nh=setTimeout(dq,t-lm.now()-Tx)),$p&&($p=clearInterval($p))):($p||(Av=lm.now(),$p=setInterval(Xte,tM)),mf=1,nM(dq))}}function fq(t,e,n){var r=new qv;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var tne=kx("start","end","cancel","interrupt"),nne=[],iM=0,pq=1,PI=2,hb=3,hq=4,FI=5,mb=6;function jx(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;rne(t,n,{name:e,index:r,group:i,on:tne,tween:nne,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:iM})}function bN(t,e){var n=Zo(t,e);if(n.state>iM)throw new Error("too late; already scheduled");return n}function _a(t,e){var n=Zo(t,e);if(n.state>hb)throw new Error("too late; already running");return n}function Zo(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function rne(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=rM(s,0,n.time);function s(d){n.state=pq,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var p,h,g,x;if(n.state!==pq)return u();for(p in r)if(x=r[p],x.name===n.name){if(x.state===hb)return fq(o);x.state===hq?(x.state=mb,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[p]):+p<e&&(x.state=mb,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[p])}if(fq(function(){n.state===hb&&(n.state=hq,n.timer.restart(a,n.delay,n.time),a(d))}),n.state=PI,n.on.call("start",t,t.__data__,n.index,n.group),n.state===PI){for(n.state=hb,i=new Array(g=n.tween.length),p=0,h=-1;p<g;++p)(x=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=x);i.length=h+1}}function a(d){for(var p=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=FI,1),h=-1,g=i.length;++h<g;)i[h].call(t,p);n.state===FI&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=mb,n.timer.stop(),delete r[e];for(var d in r)return;delete t.__transition}}function gb(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>PI&&r.state<FI,r.state=mb,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function ine(t){return this.each(function(){gb(this,t)})}function sne(t,e){var n,r;return function(){var i=_a(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function one(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=_a(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===e){i[u]=a;break}u===d&&i.push(a)}s.tween=i}}function ane(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Zo(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?sne:one)(n,t,e))}function vN(t,e,n){var r=t._id;return t.each(function(){var i=_a(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Zo(i,r).value[e]}}function sM(t,e){var n;return(typeof e=="number"?$l:e instanceof am?lq:(n=am(e))?(e=n,lq):zte)(t,e)}function lne(t){return function(){this.removeAttribute(t)}}function une(t){return function(){this.removeAttributeNS(t.space,t.local)}}function cne(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function dne(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function fne(t,e,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a)))}}function pne(t,e,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a)))}}function hne(t,e){var n=Cx(t),r=n==="transform"?Hte:sM;return this.attrTween(t,typeof e=="function"?(n.local?pne:fne)(n,r,vN(this,"attr."+t,e)):e==null?(n.local?une:lne)(n):(n.local?dne:cne)(n,r,e))}function mne(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function gne(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function yne(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&gne(t,s)),n}return i._value=e,i}function bne(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&mne(t,s)),n}return i._value=e,i}function vne(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Cx(t);return this.tween(n,(r.local?yne:bne)(r,e))}function xne(t,e){return function(){bN(this,t).delay=+e.apply(this,arguments)}}function wne(t,e){return e=+e,function(){bN(this,t).delay=e}}function _ne(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?xne:wne)(e,t)):Zo(this.node(),e).delay}function Sne(t,e){return function(){_a(this,t).duration=+e.apply(this,arguments)}}function Ene(t,e){return e=+e,function(){_a(this,t).duration=e}}function Ine(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Sne:Ene)(e,t)):Zo(this.node(),e).duration}function Nne(t,e){if(typeof e!="function")throw new Error;return function(){_a(this,t).ease=e}}function kne(t){var e=this._id;return arguments.length?this.each(Nne(e,t)):Zo(this.node(),e).ease}function Cne(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;_a(this,t).ease=n}}function Tne(t){if(typeof t!="function")throw new Error;return this.each(Cne(this._id,t))}function jne(t){typeof t!="function"&&(t=FL(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&t.call(u,u.__data__,d,s)&&a.push(u);return new ol(r,this._parents,this._name,this._id)}function Rne(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=e[a],d=n[a],p=u.length,h=o[a]=new Array(p),g,x=0;x<p;++x)(g=u[x]||d[x])&&(h[x]=g);for(;a<r;++a)o[a]=e[a];return new ol(o,this._parents,this._name,this._id)}function One(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ane(t,e,n){var r,i,s=One(e)?bN:_a;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function qne(t,e){var n=this._id;return arguments.length<2?Zo(this.node(),n).on.on(t):this.each(Ane(n,t,e))}function Pne(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Fne(){return this.on("end.remove",Pne(this._id))}function Dne(t){var e=this._name,n=this._id;typeof t!="function"&&(t=hN(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,d=s[o]=new Array(u),p,h,g=0;g<u;++g)(p=a[g])&&(h=t.call(p,p.__data__,g,a))&&("__data__"in p&&(h.__data__=p.__data__),d[g]=h,jx(d[g],e,n,g,d,Zo(p,n)));return new ol(s,this._parents,e,n)}function Lne(t){var e=this._name,n=this._id;typeof t!="function"&&(t=PL(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],d=u.length,p,h=0;h<d;++h)if(p=u[h]){for(var g=t.call(p,p.__data__,h,u),x,_=Zo(p,n),S=0,k=g.length;S<k;++S)(x=g[S])&&jx(x,e,n,S,g,_);s.push(g),o.push(p)}return new ol(s,o,e,n)}var Mne=Hm.prototype.constructor;function $ne(){return new Mne(this._groups,this._parents)}function Bne(t,e){var n,r,i;return function(){var s=hf(this,t),o=(this.style.removeProperty(t),hf(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function oM(t){return function(){this.style.removeProperty(t)}}function zne(t,e,n){var r,i=n+"",s;return function(){var o=hf(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function Wne(t,e,n){var r,i,s;return function(){var o=hf(this,t),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(t),hf(this,t))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a))}}function Une(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var u=_a(this,t),d=u.on,p=u.value[s]==null?a||(a=oM(e)):void 0;(d!==n||i!==p)&&(r=(n=d).copy()).on(o,i=p),u.on=r}}function Vne(t,e,n){var r=(t+="")=="transform"?Vte:sM;return e==null?this.styleTween(t,Bne(t,r)).on("end.style."+t,oM(t)):typeof e=="function"?this.styleTween(t,Wne(t,r,vN(this,"style."+t,e))).each(Une(this._id,t)):this.styleTween(t,zne(t,r,e),n).on("end.style."+t,null)}function Hne(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Gne(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Hne(t,o,n)),r}return s._value=e,s}function Kne(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Gne(t,e,n??""))}function Qne(t){return function(){this.textContent=t}}function Jne(t){return function(){var e=t(this);this.textContent=e??""}}function Zne(t){return this.tween("text",typeof t=="function"?Jne(vN(this,"text",t)):Qne(t==null?"":t+""))}function Yne(t){return function(e){this.textContent=t.call(this,e)}}function Xne(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Yne(i)),e}return r._value=t,r}function ere(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Xne(t))}function tre(){for(var t=this._name,e=this._id,n=aM(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,d=0;d<a;++d)if(u=o[d]){var p=Zo(u,e);jx(u,t,n,d,o,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ol(r,this._parents,t,n)}function nre(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=_a(this,r),p=d.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),d.on=e}),i===0&&s()})}var rre=0;function ol(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function aM(){return++rre}var za=Hm.prototype;ol.prototype={constructor:ol,select:Dne,selectAll:Lne,selectChild:za.selectChild,selectChildren:za.selectChildren,filter:jne,merge:Rne,selection:$ne,transition:tre,call:za.call,nodes:za.nodes,node:za.node,size:za.size,empty:za.empty,each:za.each,on:qne,attr:hne,attrTween:vne,style:Vne,styleTween:Kne,text:Zne,textTween:ere,remove:Fne,tween:ane,delay:_ne,duration:Ine,ease:kne,easeVarying:Tne,end:nre,[Symbol.iterator]:za[Symbol.iterator]};function ire(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var sre={time:null,delay:0,duration:250,ease:ire};function ore(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function are(t){var e,n;t instanceof ol?(e=t._id,t=t._name):(e=aM(),(n=sre).time=yN(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,d=0;d<a;++d)(u=o[d])&&jx(u,t,e,d,o,n||ore(u,e));return new ol(r,this._parents,t,e)}Hm.prototype.interrupt=ine;Hm.prototype.transition=are;const jy=t=>()=>t;function lre(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ka(t,e,n){this.k=t,this.x=e,this.y=n}Ka.prototype={constructor:Ka,scale:function(t){return t===1?this:new Ka(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ka(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Rx=new Ka(1,0,0);lM.prototype=Ka.prototype;function lM(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Rx;return t.__zoom}function oE(t){t.stopImmediatePropagation()}function Bp(t){t.preventDefault(),t.stopImmediatePropagation()}function ure(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function cre(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function mq(){return this.__zoom||Rx}function dre(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function fre(){return navigator.maxTouchPoints||"ontouchstart"in this}function pre(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function uM(){var t=ure,e=cre,n=pre,r=dre,i=fre,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Jte,d=kx("start","zoom","end"),p,h,g,x=500,_=150,S=0,k=10;function I(z){z.property("__zoom",mq).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",B).filter(i).on("touchstart.zoom",D).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}I.transform=function(z,X,Z,le){var ie=z.selection?z.selection():z;ie.property("__zoom",mq),z!==ie?q(z,X,Z,le):ie.interrupt().each(function(){F(this,arguments).event(le).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},I.scaleBy=function(z,X,Z,le){I.scaleTo(z,function(){var ie=this.__zoom.k,ne=typeof X=="function"?X.apply(this,arguments):X;return ie*ne},Z,le)},I.scaleTo=function(z,X,Z,le){I.transform(z,function(){var ie=e.apply(this,arguments),ne=this.__zoom,oe=Z==null?j(ie):typeof Z=="function"?Z.apply(this,arguments):Z,te=ne.invert(oe),ce=typeof X=="function"?X.apply(this,arguments):X;return n(C(E(ne,ce),oe,te),ie,o)},Z,le)},I.translateBy=function(z,X,Z,le){I.transform(z,function(){return n(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof Z=="function"?Z.apply(this,arguments):Z),e.apply(this,arguments),o)},null,le)},I.translateTo=function(z,X,Z,le,ie){I.transform(z,function(){var ne=e.apply(this,arguments),oe=this.__zoom,te=le==null?j(ne):typeof le=="function"?le.apply(this,arguments):le;return n(Rx.translate(te[0],te[1]).scale(oe.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof Z=="function"?-Z.apply(this,arguments):-Z),ne,o)},le,ie)};function E(z,X){return X=Math.max(s[0],Math.min(s[1],X)),X===z.k?z:new Ka(X,z.x,z.y)}function C(z,X,Z){var le=X[0]-Z[0]*z.k,ie=X[1]-Z[1]*z.k;return le===z.x&&ie===z.y?z:new Ka(z.k,le,ie)}function j(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function q(z,X,Z,le){z.on("start.zoom",function(){F(this,arguments).event(le).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(le).end()}).tween("zoom",function(){var ie=this,ne=arguments,oe=F(ie,ne).event(le),te=e.apply(ie,ne),ce=Z==null?j(te):typeof Z=="function"?Z.apply(ie,ne):Z,de=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),ye=ie.__zoom,we=typeof X=="function"?X.apply(ie,ne):X,Ie=u(ye.invert(ce).concat(de/ye.k),we.invert(ce).concat(de/we.k));return function(ze){if(ze===1)ze=we;else{var Re=Ie(ze),De=de/Re[2];ze=new Ka(De,ce[0]-Re[0]*De,ce[1]-Re[1]*De)}oe.zoom(null,ze)}})}function F(z,X,Z){return!Z&&z.__zooming||new $(z,X)}function $(z,X){this.that=z,this.args=X,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,X),this.taps=0}$.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,X){return this.mouse&&z!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var X=$s(this.that).datum();d.call(z,this.that,new lre(z,{sourceEvent:this.sourceEvent,target:I,type:z,transform:this.that.__zoom,dispatch:d}),X)}};function P(z,...X){if(!t.apply(this,arguments))return;var Z=F(this,X).event(z),le=this.__zoom,ie=Math.max(s[0],Math.min(s[1],le.k*Math.pow(2,r.apply(this,arguments)))),ne=qo(z);if(Z.wheel)(Z.mouse[0][0]!==ne[0]||Z.mouse[0][1]!==ne[1])&&(Z.mouse[1]=le.invert(Z.mouse[0]=ne)),clearTimeout(Z.wheel);else{if(le.k===ie)return;Z.mouse=[ne,le.invert(ne)],gb(this),Z.start()}Bp(z),Z.wheel=setTimeout(oe,_),Z.zoom("mouse",n(C(E(le,ie),Z.mouse[0],Z.mouse[1]),Z.extent,o));function oe(){Z.wheel=null,Z.end()}}function O(z,...X){if(g||!t.apply(this,arguments))return;var Z=z.currentTarget,le=F(this,X,!0).event(z),ie=$s(z.view).on("mousemove.zoom",ce,!0).on("mouseup.zoom",de,!0),ne=qo(z,Z),oe=z.clientX,te=z.clientY;HL(z.view),oE(z),le.mouse=[ne,this.__zoom.invert(ne)],gb(this),le.start();function ce(ye){if(Bp(ye),!le.moved){var we=ye.clientX-oe,Ie=ye.clientY-te;le.moved=we*we+Ie*Ie>S}le.event(ye).zoom("mouse",n(C(le.that.__zoom,le.mouse[0]=qo(ye,Z),le.mouse[1]),le.extent,o))}function de(ye){ie.on("mousemove.zoom mouseup.zoom",null),GL(ye.view,le.moved),Bp(ye),le.event(ye).end()}}function B(z,...X){if(t.apply(this,arguments)){var Z=this.__zoom,le=qo(z.changedTouches?z.changedTouches[0]:z,this),ie=Z.invert(le),ne=Z.k*(z.shiftKey?.5:2),oe=n(C(E(Z,ne),le,ie),e.apply(this,X),o);Bp(z),a>0?$s(this).transition().duration(a).call(q,oe,le,z):$s(this).call(I.transform,oe,le,z)}}function D(z,...X){if(t.apply(this,arguments)){var Z=z.touches,le=Z.length,ie=F(this,X,z.changedTouches.length===le).event(z),ne,oe,te,ce;for(oE(z),oe=0;oe<le;++oe)te=Z[oe],ce=qo(te,this),ce=[ce,this.__zoom.invert(ce),te.identifier],ie.touch0?!ie.touch1&&ie.touch0[2]!==ce[2]&&(ie.touch1=ce,ie.taps=0):(ie.touch0=ce,ne=!0,ie.taps=1+!!p);p&&(p=clearTimeout(p)),ne&&(ie.taps<2&&(h=ce[0],p=setTimeout(function(){p=null},x)),gb(this),ie.start())}}function W(z,...X){if(this.__zooming){var Z=F(this,X).event(z),le=z.changedTouches,ie=le.length,ne,oe,te,ce;for(Bp(z),ne=0;ne<ie;++ne)oe=le[ne],te=qo(oe,this),Z.touch0&&Z.touch0[2]===oe.identifier?Z.touch0[0]=te:Z.touch1&&Z.touch1[2]===oe.identifier&&(Z.touch1[0]=te);if(oe=Z.that.__zoom,Z.touch1){var de=Z.touch0[0],ye=Z.touch0[1],we=Z.touch1[0],Ie=Z.touch1[1],ze=(ze=we[0]-de[0])*ze+(ze=we[1]-de[1])*ze,Re=(Re=Ie[0]-ye[0])*Re+(Re=Ie[1]-ye[1])*Re;oe=E(oe,Math.sqrt(ze/Re)),te=[(de[0]+we[0])/2,(de[1]+we[1])/2],ce=[(ye[0]+Ie[0])/2,(ye[1]+Ie[1])/2]}else if(Z.touch0)te=Z.touch0[0],ce=Z.touch0[1];else return;Z.zoom("touch",n(C(oe,te,ce),Z.extent,o))}}function V(z,...X){if(this.__zooming){var Z=F(this,X).event(z),le=z.changedTouches,ie=le.length,ne,oe;for(oE(z),g&&clearTimeout(g),g=setTimeout(function(){g=null},x),ne=0;ne<ie;++ne)oe=le[ne],Z.touch0&&Z.touch0[2]===oe.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===oe.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&(oe=qo(oe,this),Math.hypot(h[0]-oe[0],h[1]-oe[1])<k)){var te=$s(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return I.wheelDelta=function(z){return arguments.length?(r=typeof z=="function"?z:jy(+z),I):r},I.filter=function(z){return arguments.length?(t=typeof z=="function"?z:jy(!!z),I):t},I.touchable=function(z){return arguments.length?(i=typeof z=="function"?z:jy(!!z),I):i},I.extent=function(z){return arguments.length?(e=typeof z=="function"?z:jy([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),I):e},I.scaleExtent=function(z){return arguments.length?(s[0]=+z[0],s[1]=+z[1],I):[s[0],s[1]]},I.translateExtent=function(z){return arguments.length?(o[0][0]=+z[0][0],o[1][0]=+z[1][0],o[0][1]=+z[0][1],o[1][1]=+z[1][1],I):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},I.constrain=function(z){return arguments.length?(n=z,I):n},I.duration=function(z){return arguments.length?(a=+z,I):a},I.interpolate=function(z){return arguments.length?(u=z,I):u},I.on=function(){var z=d.on.apply(d,arguments);return z===d?I:z},I.clickDistance=function(z){return arguments.length?(S=(z=+z)*z,I):Math.sqrt(S)},I.tapDistance=function(z){return arguments.length?(k=+z,I):k},I}const al={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},um=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],cM=["Enter"," ","Escape"];var gf;(function(t){t.Strict="strict",t.Loose="loose"})(gf||(gf={}));var fc;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(fc||(fc={}));var cm;(function(t){t.Partial="partial",t.Full="full"})(cm||(cm={}));const dM={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Kl;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Kl||(Kl={}));var Jl;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Jl||(Jl={}));var jt;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(jt||(jt={}));const gq={[jt.Left]:jt.Right,[jt.Right]:jt.Left,[jt.Top]:jt.Bottom,[jt.Bottom]:jt.Top};function fM(t){return t===null?null:t?"valid":"invalid"}const pM=t=>"id"in t&&"source"in t&&"target"in t,hre=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),xN=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Km=(t,e=[0,0])=>{const{width:n,height:r}=ll(t),i=t.origin??e,s=n*i[0],o=r*i[1];return{x:t.position.x-s,y:t.position.y-o}},mre=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):xN(i)?i:e.nodeLookup.get(i.id));const a=o?Pv(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ox(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ax(n)},Ff=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=Pv(r);n=Ox(n,i)}}),Ax(n)},hM=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const a={...Qm(e,[n,r,i]),width:e.width/i,height:e.height/i},u=[];for(const d of t.values()){const{measured:p,selectable:h=!0,hidden:g=!1}=d;if(o&&!h||g)continue;const x=p.width??d.width??d.initialWidth??null,_=p.height??d.height??d.initialHeight??null,S=dm(a,bf(d)),k=(x??0)*(_??0),I=s&&S>0;(!d.internals.handleBounds||I||S>=k||d.dragging)&&u.push(d)}return u},gre=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function DI(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function LI({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(t.size===0)return Promise.resolve(!1);const a=Ff(t),u=wN(a,e,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(u,{duration:o?.duration}),Promise.resolve(!0)}function mM({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(t),a=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=a?a.internals.positionAbsolute:{x:0,y:0},p=o.origin??r;let h=i;if(o.extent==="parent"&&!o.expandParent)if(!a)s?.("005",al.error005());else{const x=a.measured.width,_=a.measured.height;x&&_&&(h=[[u,d],[u+x,d+_]])}else a&&vf(o.extent)&&(h=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const g=vf(h)?Ic(e,h,o.measured):e;return{position:{x:g.x-u+o.measured.width*p[0],y:g.y-d+o.measured.height*p[1]},positionAbsolute:g}}async function yre({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(g=>g.id)),o=[];for(const g of n){if(g.deletable===!1)continue;const x=s.has(g.id),_=!x&&g.parentId&&o.find(S=>S.id===g.parentId);(x||_)&&o.push(g)}const a=new Set(e.map(g=>g.id)),u=r.filter(g=>g.deletable!==!1),p=gre(o,u);for(const g of u)a.has(g.id)&&!p.find(_=>_.id===g.id)&&p.push(g);if(!i)return{edges:p,nodes:o};const h=await i({nodes:o,edges:p});return typeof h=="boolean"?h?{edges:p,nodes:o}:{edges:[],nodes:[]}:h}const yf=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Ic=(t={x:0,y:0},e,n)=>({x:yf(t.x,e[0][0],e[1][0]-(n?.width??0)),y:yf(t.y,e[0][1],e[1][1]-(n?.height??0))});function gM(t,e,n){const{width:r,height:i}=ll(n),{x:s,y:o}=n.internals.positionAbsolute;return Ic(t,[[s,o],[s+r,o+i]],e)}const yq=(t,e,n)=>t<e?yf(Math.abs(t-e),1,e)/e:t>n?-yf(Math.abs(t-n),1,e)/e:0,yM=(t,e,n=15,r=40)=>{const i=yq(t.x,r,e.width-r)*n,s=yq(t.y,r,e.height-r)*n;return[i,s]},Ox=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),MI=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),Ax=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),bf=(t,e=[0,0])=>{const{x:n,y:r}=xN(t)?t.internals.positionAbsolute:Km(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Pv=(t,e=[0,0])=>{const{x:n,y:r}=xN(t)?t.internals.positionAbsolute:Km(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},bM=(t,e)=>Ax(Ox(MI(t),MI(e))),dm=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},bq=t=>zo(t.width)&&zo(t.height)&&zo(t.x)&&zo(t.y),zo=t=>!isNaN(t)&&isFinite(t),bre=(t,e)=>{},qx=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Qm=({x:t,y:e},[n,r,i],s=!1,o=[1,1])=>{const a={x:(t-n)/i,y:(e-r)/i};return s?qx(a,o):a},vM=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),wN=(t,e,n,r,i,s)=>{const o=e/(t.width*(1+s)),a=n/(t.height*(1+s)),u=Math.min(o,a),d=yf(u,r,i),p=t.x+t.width/2,h=t.y+t.height/2,g=e/2-p*d,x=n/2-h*d;return{x:g,y:x,zoom:d}},Fv=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function vf(t){return t!==void 0&&t!=="parent"}function ll(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function xM(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function wM(t,e={width:0,height:0},n,r,i){const s={...t},o=r.get(n);if(o){const a=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*a[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*a[1]}return s}function vq(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function Nh(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=Za(t),a=Qm({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?qx(a,e):a;return{xSnapped:u,ySnapped:d,...a}}const Px=t=>({width:t.offsetWidth,height:t.offsetHeight}),_M=t=>t?.getRootNode?.()||window?.document,vre=["INPUT","SELECT","TEXTAREA"];function $I(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:vre.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const SM=t=>"clientX"in t,Za=(t,e)=>{const n=SM(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},xq=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:t,nodeId:i,position:o.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Px(o)}})};function EM({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const u=t*.125+i*.375+o*.375+n*.125,d=e*.125+s*.375+a*.375+r*.125,p=Math.abs(u-t),h=Math.abs(d-e);return[u,d,p,h]}function Ry(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function wq({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case jt.Left:return[e-Ry(e-r,s),n];case jt.Right:return[e+Ry(r-e,s),n];case jt.Top:return[e,n-Ry(n-i,s)];case jt.Bottom:return[e,n+Ry(i-n,s)]}}function _N({sourceX:t,sourceY:e,sourcePosition:n=jt.Bottom,targetX:r,targetY:i,targetPosition:s=jt.Top,curvature:o=.25}){const[a,u]=wq({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[d,p]=wq({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[h,g,x,_]=EM({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:d,targetControlY:p});return[`M${t},${e} C${a},${u} ${d},${p} ${r},${i}`,h,g,x,_]}function IM({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,a=r<e?r+o:r-o;return[s,a,i,o]}function xre({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const s=n||e.selected||t.selected,o=Math.max(t.internals.z||0,e.internals.z||0,1e3);return r+(s?o:0)}function wre({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=Ox(Pv(t),Pv(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return dm(o,Ax(s))>0}const _re=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,Sre=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Ere=(t,e)=>{if(!t.source||!t.target)return e;let n;return pM(t)?n={...t}:n={...t,id:_re(t)},Sre(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function Jm({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,a]=IM({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,a]}const _q={[jt.Left]:{x:-1,y:0},[jt.Right]:{x:1,y:0},[jt.Top]:{x:0,y:-1},[jt.Bottom]:{x:0,y:1}},Ire=({source:t,sourcePosition:e=jt.Bottom,target:n})=>e===jt.Left||e===jt.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Sq=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Nre({source:t,sourcePosition:e=jt.Bottom,target:n,targetPosition:r=jt.Top,center:i,offset:s}){const o=_q[e],a=_q[r],u={x:t.x+o.x*s,y:t.y+o.y*s},d={x:n.x+a.x*s,y:n.y+a.y*s},p=Ire({source:u,sourcePosition:e,target:d}),h=p.x!==0?"x":"y",g=p[h];let x=[],_,S;const k={x:0,y:0},I={x:0,y:0},[E,C,j,q]=IM({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[h]*a[h]===-1){_=i.x??E,S=i.y??C;const $=[{x:_,y:u.y},{x:_,y:d.y}],P=[{x:u.x,y:S},{x:d.x,y:S}];o[h]===g?x=h==="x"?$:P:x=h==="x"?P:$}else{const $=[{x:u.x,y:d.y}],P=[{x:d.x,y:u.y}];if(h==="x"?x=o.x===g?P:$:x=o.y===g?$:P,e===r){const V=Math.abs(t[h]-n[h]);if(V<=s){const z=Math.min(s-1,s-V);o[h]===g?k[h]=(u[h]>t[h]?-1:1)*z:I[h]=(d[h]>n[h]?-1:1)*z}}if(e!==r){const V=h==="x"?"y":"x",z=o[h]===a[V],X=u[V]>d[V],Z=u[V]<d[V];(o[h]===1&&(!z&&X||z&&Z)||o[h]!==1&&(!z&&Z||z&&X))&&(x=h==="x"?$:P)}const O={x:u.x+k.x,y:u.y+k.y},B={x:d.x+I.x,y:d.y+I.y},D=Math.max(Math.abs(O.x-x[0].x),Math.abs(B.x-x[0].x)),W=Math.max(Math.abs(O.y-x[0].y),Math.abs(B.y-x[0].y));D>=W?(_=(O.x+B.x)/2,S=x[0].y):(_=x[0].x,S=(O.y+B.y)/2)}return[[t,{x:u.x+k.x,y:u.y+k.y},...x,{x:d.x+I.x,y:d.y+I.y},n],_,S,j,q]}function kre(t,e,n,r){const i=Math.min(Sq(t,e)/2,Sq(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const d=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*p}`}const a=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*a},${o}`}function BI({sourceX:t,sourceY:e,sourcePosition:n=jt.Bottom,targetX:r,targetY:i,targetPosition:s=jt.Top,borderRadius:o=5,centerX:a,centerY:u,offset:d=20}){const[p,h,g,x,_]=Nre({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:u},offset:d});return[p.reduce((k,I,E)=>{let C="";return E>0&&E<p.length-1?C=kre(p[E-1],I,p[E+1],o):C=`${E===0?"M":"L"}${I.x} ${I.y}`,k+=C,k},""),h,g,x,_]}function Eq(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Cre(t){const{sourceNode:e,targetNode:n}=t;if(!Eq(e)||!Eq(n))return null;const r=e.internals.handleBounds||Iq(e.handles),i=n.internals.handleBounds||Iq(n.handles),s=Nq(r?.source??[],t.sourceHandle),o=Nq(t.connectionMode===gf.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!s||!o)return t.onError?.("008",al.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const a=s?.position||jt.Bottom,u=o?.position||jt.Top,d=fm(e,s,a),p=fm(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:p.x,targetY:p.y,sourcePosition:a,targetPosition:u}}function Iq(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function fm(t,e,n=jt.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:o,height:a}=e??ll(t);if(r)return{x:i+o/2,y:s+a/2};switch(e?.position??n){case jt.Top:return{x:i+o/2,y:s};case jt.Right:return{x:i+o,y:s+a/2};case jt.Bottom:return{x:i+o/2,y:s+a};case jt.Left:return{x:i,y:s+a/2}}}function Nq(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function zI(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function Tre(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((o,a)=>([a.markerStart||r,a.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=zI(u,e);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}function jre(t,e,n,r,i){let s=.5;i==="start"?s=0:i==="end"&&(s=1);let o=[(t.x+t.width*s)*e.zoom+e.x,t.y*e.zoom+e.y-r],a=[-100*s,-100];switch(n){case jt.Right:o=[(t.x+t.width)*e.zoom+e.x+r,(t.y+t.height*s)*e.zoom+e.y],a=[0,-100*s];break;case jt.Bottom:o[1]=(t.y+t.height)*e.zoom+e.y+r,a[1]=0;break;case jt.Left:o=[t.x*e.zoom+e.x-r,(t.y+t.height*s)*e.zoom+e.y],a=[-100,-100*s];break}return`translate(${o[0]}px, ${o[1]}px) translate(${a[0]}%, ${a[1]}%)`}const SN={nodeOrigin:[0,0],nodeExtent:um,elevateNodesOnSelect:!0,defaults:{}},Rre={...SN,checkEquality:!0};function EN(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function Ore(t,e,n){const r=EN(SN,n);for(const i of t.values())if(i.parentId)IN(i,t,e,r);else{const s=Km(i,r.nodeOrigin),o=vf(i.extent)?i.extent:r.nodeExtent,a=Ic(s,o,ll(i));i.internals.positionAbsolute=a}}function WI(t,e,n,r){const i=EN(Rre,r),s=new Map(e),o=i?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const a of t){let u=s.get(a.id);if(i.checkEquality&&a===u?.internals.userNode)e.set(a.id,u);else{const d=Km(a,i.nodeOrigin),p=vf(a.extent)?a.extent:i.nodeExtent,h=Ic(d,p,ll(a));u={...i.defaults,...a,measured:{width:a.measured?.width,height:a.measured?.height},internals:{positionAbsolute:h,handleBounds:a.measured?u?.internals.handleBounds:void 0,z:NM(a,o),userNode:a}},e.set(a.id,u)}a.parentId&&IN(u,e,n,r)}}function Are(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function IN(t,e,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=EN(SN,r),a=t.parentId,u=e.get(a);if(!u){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Are(t,n);const d=i?1e3:0,{x:p,y:h,z:g}=qre(t,u,s,o,d),{positionAbsolute:x}=t.internals,_=p!==x.x||h!==x.y;(_||g!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:_?{x:p,y:h}:x,z:g}})}function NM(t,e){return(zo(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function qre(t,e,n,r,i){const{x:s,y:o}=e.internals.positionAbsolute,a=ll(t),u=Km(t,n),d=vf(t.extent)?Ic(u,t.extent,a):u;let p=Ic({x:s+d.x,y:o+d.y},r,a);t.extent==="parent"&&(p=gM(p,a,e));const h=NM(t,i),g=e.internals.z??0;return{x:p.x,y:p.y,z:g>h?g:h}}function NN(t,e,n,r=[0,0]){const i=[],s=new Map;for(const o of t){const a=e.get(o.parentId);if(!a)continue;const u=s.get(o.parentId)?.expandedRect??bf(a),d=bM(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:a})}return s.size>0&&s.forEach(({expandedRect:o,parent:a},u)=>{const d=a.internals.positionAbsolute,p=ll(a),h=a.origin??r,g=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,x=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,_=Math.max(p.width,Math.round(o.width)),S=Math.max(p.height,Math.round(o.height)),k=(_-p.width)*h[0],I=(S-p.height)*h[1];(g>0||x>0||k||I)&&(i.push({id:u,type:"position",position:{x:a.position.x-g+k,y:a.position.y-x+I}}),n.get(u)?.forEach(E=>{t.some(C=>C.id===E.id)||i.push({id:E.id,type:"position",position:{x:E.position.x+g,y:E.position.y+x}})})),(p.width<o.width||p.height<o.height||g||x)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:_+(g?h[0]*g-k:0),height:S+(x?h[1]*x-I:0)}})}),i}function Pre(t,e,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let a=!1;if(!o)return{changes:[],updatedInternals:a};const u=[],d=window.getComputedStyle(o),{m22:p}=new window.DOMMatrixReadOnly(d.transform),h=[];for(const g of t.values()){const x=e.get(g.id);if(!x)continue;if(x.hidden){e.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),a=!0;continue}const _=Px(g.nodeElement),S=x.measured.width!==_.width||x.measured.height!==_.height;if(!!(_.width&&_.height&&(S||!x.internals.handleBounds||g.force))){const I=g.nodeElement.getBoundingClientRect(),E=vf(x.extent)?x.extent:s;let{positionAbsolute:C}=x.internals;x.parentId&&x.extent==="parent"?C=gM(C,_,e.get(x.parentId)):E&&(C=Ic(C,E,_));const j={...x,measured:_,internals:{...x.internals,positionAbsolute:C,handleBounds:{source:xq("source",g.nodeElement,I,p,x.id),target:xq("target",g.nodeElement,I,p,x.id)}}};e.set(x.id,j),x.parentId&&IN(j,e,n,{nodeOrigin:i}),a=!0,S&&(u.push({id:x.id,type:"dimensions",dimensions:_}),x.expandParent&&x.parentId&&h.push({id:x.id,parentId:x.parentId,rect:bf(j,i)}))}}if(h.length>0){const g=NN(h,e,n,i);u.push(...g)}return{changes:u,updatedInternals:a}}async function Fre({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),a=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(a)}function kq(t,e,n,r,i,s){let o=i;const a=r.get(o)||new Map;r.set(o,a.set(n,e)),o=`${i}-${t}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,e)),s){o=`${i}-${t}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,e))}}function kM(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:a=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:a},d=`${i}-${o}--${s}-${a}`,p=`${s}-${a}--${i}-${o}`;kq("source",u,p,t,i,o),kq("target",u,d,t,s,a),e.set(r.id,r)}}function CM(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:CM(n,e):!1}function Cq(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function Dre(t,e,n,r){const i=new Map;for(const[s,o]of t)if((o.selected||o.id===r)&&(!o.parentId||!CM(o,t))&&(o.draggable||e&&typeof o.draggable>"u")){const a=t.get(s);a&&i.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function aE({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,a]of e){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:a.position,dragging:r})}if(!t)return[i[0],i];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:r}:i[0],i]}function Lre({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,a=new Map,u=!1,d={x:0,y:0},p=null,h=!1,g=null,x=!1;function _({noDragClassName:k,handleSelector:I,domNode:E,isSelectable:C,nodeId:j,nodeClickDistance:q=0}){g=$s(E);function F({x:B,y:D},W){const{nodeLookup:V,nodeExtent:z,snapGrid:X,snapToGrid:Z,nodeOrigin:le,onNodeDrag:ie,onSelectionDrag:ne,onError:oe,updateNodePositions:te}=e();s={x:B,y:D};let ce=!1,de={x:0,y:0,x2:0,y2:0};if(a.size>1&&z){const ye=Ff(a);de=MI(ye)}for(const[ye,we]of a){if(!V.has(ye))continue;let Ie={x:B-we.distance.x,y:D-we.distance.y};Z&&(Ie=qx(Ie,X));let ze=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];if(a.size>1&&z&&!we.extent){const{positionAbsolute:Je}=we.internals,Xe=Je.x-de.x+z[0][0],Ue=Je.x+we.measured.width-de.x2+z[1][0],ut=Je.y-de.y+z[0][1],Et=Je.y+we.measured.height-de.y2+z[1][1];ze=[[Xe,ut],[Ue,Et]]}const{position:Re,positionAbsolute:De}=mM({nodeId:ye,nextPosition:Ie,nodeLookup:V,nodeExtent:ze,nodeOrigin:le,onError:oe});ce=ce||we.position.x!==Re.x||we.position.y!==Re.y,we.position=Re,we.internals.positionAbsolute=De}if(ce&&(te(a,!0),W&&(r||ie||!j&&ne))){const[ye,we]=aE({nodeId:j,dragItems:a,nodeLookup:V});r?.(W,a,ye,we),ie?.(W,ye,we),j||ne?.(W,we)}}async function $(){if(!p)return;const{transform:B,panBy:D,autoPanSpeed:W}=e(),[V,z]=yM(d,p,W);(V!==0||z!==0)&&(s.x=(s.x??0)-V/B[2],s.y=(s.y??0)-z/B[2],await D({x:V,y:z})&&F(s,null)),o=requestAnimationFrame($)}function P(B){const{nodeLookup:D,multiSelectionActive:W,nodesDraggable:V,transform:z,snapGrid:X,snapToGrid:Z,selectNodesOnDrag:le,onNodeDragStart:ie,onSelectionDragStart:ne,unselectNodesAndEdges:oe}=e();h=!0,(!le||!C)&&!W&&j&&(D.get(j)?.selected||oe()),C&&le&&j&&t?.(j);const te=Nh(B.sourceEvent,{transform:z,snapGrid:X,snapToGrid:Z,containerBounds:p});if(s=te,a=Dre(D,V,te,j),a.size>0&&(n||ie||!j&&ne)){const[ce,de]=aE({nodeId:j,dragItems:a,nodeLookup:D});n?.(B.sourceEvent,a,ce,de),ie?.(B.sourceEvent,ce,de),j||ne?.(B.sourceEvent,de)}}const O=KL().clickDistance(q).on("start",B=>{const{domNode:D,nodeDragThreshold:W,transform:V,snapGrid:z,snapToGrid:X}=e();p=D?.getBoundingClientRect()||null,x=!1,W===0&&P(B),s=Nh(B.sourceEvent,{transform:V,snapGrid:z,snapToGrid:X,containerBounds:p}),d=Za(B.sourceEvent,p)}).on("drag",B=>{const{autoPanOnNodeDrag:D,transform:W,snapGrid:V,snapToGrid:z,nodeDragThreshold:X,nodeLookup:Z}=e(),le=Nh(B.sourceEvent,{transform:W,snapGrid:V,snapToGrid:z,containerBounds:p});if((B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1||j&&!Z.has(j))&&(x=!0),!x){if(!u&&D&&h&&(u=!0,$()),!h){const ie=le.xSnapped-(s.x??0),ne=le.ySnapped-(s.y??0);Math.sqrt(ie*ie+ne*ne)>X&&P(B)}(s.x!==le.xSnapped||s.y!==le.ySnapped)&&a&&h&&(d=Za(B.sourceEvent,p),F(le,B.sourceEvent))}}).on("end",B=>{if(!(!h||x)&&(u=!1,h=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:D,updateNodePositions:W,onNodeDragStop:V,onSelectionDragStop:z}=e();if(W(a,!1),i||V||!j&&z){const[X,Z]=aE({nodeId:j,dragItems:a,nodeLookup:D,dragging:!1});i?.(B.sourceEvent,a,X,Z),V?.(B.sourceEvent,X,Z),j||z?.(B.sourceEvent,Z)}}}).filter(B=>{const D=B.target;return!B.button&&(!k||!Cq(D,`.${k}`,E))&&(!I||Cq(D,I,E))});g.call(O)}function S(){g?.on(".drag",null)}return{update:_,destroy:S}}function Mre(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())dm(i,bf(s))>0&&r.push(s);return r}const $re=250;function Bre(t,e,n,r){let i=[],s=1/0;const o=Mre(t,n,e+$re);for(const a of o){const u=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:p,y:h}=fm(a,d,d.position,!0),g=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(h-t.y,2));g>e||(g<s?(i=[{...d,x:p,y:h}],s=g):g===s&&i.push({...d,x:p,y:h}))}}if(!i.length)return null;if(i.length>1){const a=r.type==="source"?"target":"source";return i.find(u=>u.type===a)??i[0]}return i[0]}function TM(t,e,n,r,i,s=!1){const o=r.get(t);if(!o)return null;const a=i==="strict"?o.internals.handleBounds?.[e]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?a?.find(d=>d.id===n):a?.[0])??null;return u&&s?{...u,...fm(o,u,u.position,!0)}:u}function jM(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function zre(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const RM=()=>!0;function Wre(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:a,nodeLookup:u,lib:d,autoPanOnConnect:p,flowId:h,panBy:g,cancelConnection:x,onConnectStart:_,onConnect:S,onConnectEnd:k,isValidConnection:I=RM,onReconnectEnd:E,updateConnection:C,getTransform:j,getFromHandle:q,autoPanSpeed:F}){const $=_M(t.target);let P=0,O;const{x:B,y:D}=Za(t),W=$?.elementFromPoint(B,D),V=jM(s,W),z=a?.getBoundingClientRect();if(!z||!V)return;const X=TM(i,V,r,u,e);if(!X)return;let Z=Za(t,z),le=!1,ie=null,ne=!1,oe=null;function te(){if(!p||!z)return;const[De,Je]=yM(Z,z,F);g({x:De,y:Je}),P=requestAnimationFrame(te)}const ce={...X,nodeId:i,type:V,position:X.position},de=u.get(i),we={inProgress:!0,isValid:null,from:fm(de,ce,jt.Left,!0),fromHandle:ce,fromPosition:ce.position,fromNode:de,to:Z,toHandle:null,toPosition:gq[ce.position],toNode:null};C(we);let Ie=we;_?.(t,{nodeId:i,handleId:r,handleType:V});function ze(De){if(!q()||!ce){Re(De);return}const Je=j();Z=Za(De,z),O=Bre(Qm(Z,Je,!1,[1,1]),n,u,ce),le||(te(),le=!0);const Xe=OM(De,{handle:O,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:I,doc:$,lib:d,flowId:h,nodeLookup:u});oe=Xe.handleDomNode,ie=Xe.connection,ne=zre(!!O,Xe.isValid);const Ue={...Ie,isValid:ne,to:O&&ne?vM({x:O.x,y:O.y},Je):Z,toHandle:Xe.toHandle,toPosition:ne&&Xe.toHandle?Xe.toHandle.position:gq[ce.position],toNode:Xe.toHandle?u.get(Xe.toHandle.nodeId):null};ne&&O&&Ie.toHandle&&Ue.toHandle&&Ie.toHandle.type===Ue.toHandle.type&&Ie.toHandle.nodeId===Ue.toHandle.nodeId&&Ie.toHandle.id===Ue.toHandle.id&&Ie.to.x===Ue.to.x&&Ie.to.y===Ue.to.y||(C(Ue),Ie=Ue)}function Re(De){(O||oe)&&ie&&ne&&S?.(ie);const{inProgress:Je,...Xe}=Ie,Ue={...Xe,toPosition:Ie.toHandle?Ie.toPosition:null};k?.(De,Ue),s&&E?.(De,Ue),x(),cancelAnimationFrame(P),le=!1,ne=!1,ie=null,oe=null,$.removeEventListener("mousemove",ze),$.removeEventListener("mouseup",Re),$.removeEventListener("touchmove",ze),$.removeEventListener("touchend",Re)}$.addEventListener("mousemove",ze),$.addEventListener("mouseup",Re),$.addEventListener("touchmove",ze),$.addEventListener("touchend",Re)}function OM(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:a,flowId:u,isValidConnection:d=RM,nodeLookup:p}){const h=s==="target",g=e?o.querySelector(`.${a}-flow__handle[data-id="${u}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x,y:_}=Za(t),S=o.elementFromPoint(x,_),k=S?.classList.contains(`${a}-flow__handle`)?S:g,I={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const E=jM(void 0,k),C=k.getAttribute("data-nodeid"),j=k.getAttribute("data-handleid"),q=k.classList.contains("connectable"),F=k.classList.contains("connectableend");if(!C||!E)return I;const $={source:h?C:r,sourceHandle:h?j:i,target:h?r:C,targetHandle:h?i:j};I.connection=$;const O=q&&F&&(n===gf.Strict?h&&E==="source"||!h&&E==="target":C!==r||j!==i);I.isValid=O&&d($),I.toHandle=TM(C,E,j,p,n,!1)}return I}const UI={onPointerDown:Wre,isValid:OM};function Ure({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=$s(t);function s({translateExtent:a,width:u,height:d,zoomStep:p=10,pannable:h=!0,zoomable:g=!0,inversePan:x=!1}){const _=C=>{const j=n();if(C.sourceEvent.type!=="wheel"||!e)return;const q=-C.sourceEvent.deltaY*(C.sourceEvent.deltaMode===1?.05:C.sourceEvent.deltaMode?1:.002)*p,F=j[2]*Math.pow(2,q);e.scaleTo(F)};let S=[0,0];const k=C=>{(C.sourceEvent.type==="mousedown"||C.sourceEvent.type==="touchstart")&&(S=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY])},I=C=>{const j=n();if(C.sourceEvent.type!=="mousemove"&&C.sourceEvent.type!=="touchmove"||!e)return;const q=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY],F=[q[0]-S[0],q[1]-S[1]];S=q;const $=r()*Math.max(j[2],Math.log(j[2]))*(x?-1:1),P={x:j[0]-F[0]*$,y:j[1]-F[1]*$},O=[[0,0],[u,d]];e.setViewportConstrained({x:P.x,y:P.y,zoom:j[2]},O,a)},E=uM().on("start",k).on("zoom",h?I:null).on("zoom.wheel",g?_:null);i.call(E,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:qo}}const Vre=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Fx=t=>({x:t.x,y:t.y,zoom:t.k}),lE=({x:t,y:e,zoom:n})=>Rx.translate(t,e).scale(n),Pd=(t,e)=>t.target.closest(`.${e}`),AM=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),uE=(t,e=0,n=()=>{})=>{const r=typeof e=="number"&&e>0;return r||n(),r?t.transition().duration(e).on("end",n):t},qM=t=>{const e=t.ctrlKey&&Fv()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function Hre({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:u,onPanZoomEnd:d}){return p=>{if(Pd(p,e))return!1;p.preventDefault(),p.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(p.ctrlKey&&o){const k=qo(p),I=qM(p),E=h*Math.pow(2,I);r.scaleTo(n,E,k,p);return}const g=p.deltaMode===1?20:1;let x=i===fc.Vertical?0:p.deltaX*g,_=i===fc.Horizontal?0:p.deltaY*g;!Fv()&&p.shiftKey&&i!==fc.Vertical&&(x=p.deltaY*g,_=0),r.translateBy(n,-(x/h)*s,-(_/h)*s,{internal:!0});const S=Fx(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,a?.(p,S)),t.isPanScrolling&&(u?.(p,S),t.panScrollTimeout=setTimeout(()=>{d?.(p,S),t.isPanScrolling=!1},150))}}function Gre({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){if(!e&&r.type==="wheel"&&!r.ctrlKey||Pd(r,t))return null;r.preventDefault(),n.call(this,r,i)}}function Kre({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=Fx(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function Qre({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{t.usedRightMouseButton=!!(n&&AM(e,t.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,Fx(s.transform))}}function Jre({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&AM(e,t.mouseButton??0)&&!t.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&Vre(t.prevViewport,o.transform))){const a=Fx(o.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(o.sourceEvent,a)},n?150:0)}}}function Zre({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:a,noPanClassName:u,lib:d}){return p=>{const h=t||e,g=n&&p.ctrlKey;if(p.button===1&&p.type==="mousedown"&&(Pd(p,`${d}-flow__node`)||Pd(p,`${d}-flow__edge`)))return!0;if(!r&&!h&&!i&&!s&&!n||o||Pd(p,a)&&p.type==="wheel"||Pd(p,u)&&(p.type!=="wheel"||i&&p.type==="wheel"&&!t)||!n&&p.ctrlKey&&p.type==="wheel")return!1;if(!n&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!h&&!i&&!g&&p.type==="wheel"||!r&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(r)&&!r.includes(p.button)&&p.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||p.type==="wheel")&&x}}function Yre({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:a,onPanZoomEnd:u,onDraggingChange:d}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),g=uM().clickDistance(!zo(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(i),x=$s(t).call(g);C({x:s.x,y:s.y,zoom:yf(s.zoom,e,n)},[[0,0],[h.width,h.height]],i);const _=x.on("wheel.zoom"),S=x.on("dblclick.zoom");g.wheelDelta(qM);function k(W,V){return x?new Promise(z=>{g?.transform(uE(x,V?.duration,()=>z(!0)),W)}):Promise.resolve(!1)}function I({noWheelClassName:W,noPanClassName:V,onPaneContextMenu:z,userSelectionActive:X,panOnScroll:Z,panOnDrag:le,panOnScrollMode:ie,panOnScrollSpeed:ne,preventScrolling:oe,zoomOnPinch:te,zoomOnScroll:ce,zoomOnDoubleClick:de,zoomActivationKeyPressed:ye,lib:we,onTransformChange:Ie}){X&&!p.isZoomingOrPanning&&E();const Re=Z&&!ye&&!X?Hre({zoomPanValues:p,noWheelClassName:W,d3Selection:x,d3Zoom:g,panOnScrollMode:ie,panOnScrollSpeed:ne,zoomOnPinch:te,onPanZoomStart:a,onPanZoom:o,onPanZoomEnd:u}):Gre({noWheelClassName:W,preventScrolling:oe,d3ZoomHandler:_});if(x.on("wheel.zoom",Re,{passive:!1}),!X){const Je=Kre({zoomPanValues:p,onDraggingChange:d,onPanZoomStart:a});g.on("start",Je);const Xe=Qre({zoomPanValues:p,panOnDrag:le,onPaneContextMenu:!!z,onPanZoom:o,onTransformChange:Ie});g.on("zoom",Xe);const Ue=Jre({zoomPanValues:p,panOnDrag:le,panOnScroll:Z,onPaneContextMenu:z,onPanZoomEnd:u,onDraggingChange:d});g.on("end",Ue)}const De=Zre({zoomActivationKeyPressed:ye,panOnDrag:le,zoomOnScroll:ce,panOnScroll:Z,zoomOnDoubleClick:de,zoomOnPinch:te,userSelectionActive:X,noPanClassName:V,noWheelClassName:W,lib:we});g.filter(De),de?x.on("dblclick.zoom",S):x.on("dblclick.zoom",null)}function E(){g.on("zoom",null)}async function C(W,V,z){const X=lE(W),Z=g?.constrain()(X,V,z);return Z&&await k(Z),new Promise(le=>le(Z))}async function j(W,V){const z=lE(W);return await k(z,V),new Promise(X=>X(z))}function q(W){if(x){const V=lE(W),z=x.property("__zoom");(z.k!==W.zoom||z.x!==W.x||z.y!==W.y)&&g?.transform(x,V,null,{sync:!0})}}function F(){const W=x?lM(x.node()):{x:0,y:0,k:1};return{x:W.x,y:W.y,zoom:W.k}}function $(W,V){return x?new Promise(z=>{g?.scaleTo(uE(x,V?.duration,()=>z(!0)),W)}):Promise.resolve(!1)}function P(W,V){return x?new Promise(z=>{g?.scaleBy(uE(x,V?.duration,()=>z(!0)),W)}):Promise.resolve(!1)}function O(W){g?.scaleExtent(W)}function B(W){g?.translateExtent(W)}function D(W){const V=!zo(W)||W<0?0:W;g?.clickDistance(V)}return{update:I,destroy:E,setViewport:j,setViewportConstrained:C,getViewport:F,scaleTo:$,scaleBy:P,setScaleExtent:O,setTranslateExtent:B,syncViewport:q,setClickDistance:D}}var kh;(function(t){t.Line="line",t.Handle="handle"})(kh||(kh={}));function Xre({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=t-e,a=n-r,u=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(u[0]=u[0]*-1),a&&s&&(u[1]=u[1]*-1),u}function eie(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function Fl(t,e){return Math.max(0,e-t)}function Dl(t,e){return Math.max(0,t-e)}function Oy(t,e,n){return Math.max(0,e-t,t-n)}function Tq(t,e){return t?!e:e}function tie(t,e,n,r,i,s,o,a){let{affectsX:u,affectsY:d}=e;const{isHorizontal:p,isVertical:h}=e,g=p&&h,{xSnapped:x,ySnapped:_}=n,{minWidth:S,maxWidth:k,minHeight:I,maxHeight:E}=r,{x:C,y:j,width:q,height:F,aspectRatio:$}=t;let P=Math.floor(p?x-t.pointerX:0),O=Math.floor(h?_-t.pointerY:0);const B=q+(u?-P:P),D=F+(d?-O:O),W=-s[0]*q,V=-s[1]*F;let z=Oy(B,S,k),X=Oy(D,I,E);if(o){let ie=0,ne=0;u&&P<0?ie=Fl(C+P+W,o[0][0]):!u&&P>0&&(ie=Dl(C+B+W,o[1][0])),d&&O<0?ne=Fl(j+O+V,o[0][1]):!d&&O>0&&(ne=Dl(j+D+V,o[1][1])),z=Math.max(z,ie),X=Math.max(X,ne)}if(a){let ie=0,ne=0;u&&P>0?ie=Dl(C+P,a[0][0]):!u&&P<0&&(ie=Fl(C+B,a[1][0])),d&&O>0?ne=Dl(j+O,a[0][1]):!d&&O<0&&(ne=Fl(j+D,a[1][1])),z=Math.max(z,ie),X=Math.max(X,ne)}if(i){if(p){const ie=Oy(B/$,I,E)*$;if(z=Math.max(z,ie),o){let ne=0;!u&&!d||u&&!d&&g?ne=Dl(j+V+B/$,o[1][1])*$:ne=Fl(j+V+(u?P:-P)/$,o[0][1])*$,z=Math.max(z,ne)}if(a){let ne=0;!u&&!d||u&&!d&&g?ne=Fl(j+B/$,a[1][1])*$:ne=Dl(j+(u?P:-P)/$,a[0][1])*$,z=Math.max(z,ne)}}if(h){const ie=Oy(D*$,S,k)/$;if(X=Math.max(X,ie),o){let ne=0;!u&&!d||d&&!u&&g?ne=Dl(C+D*$+W,o[1][0])/$:ne=Fl(C+(d?O:-O)*$+W,o[0][0])/$,X=Math.max(X,ne)}if(a){let ne=0;!u&&!d||d&&!u&&g?ne=Fl(C+D*$,a[1][0])/$:ne=Dl(C+(d?O:-O)*$,a[0][0])/$,X=Math.max(X,ne)}}}O=O+(O<0?X:-X),P=P+(P<0?z:-z),i&&(g?B>D*$?O=(Tq(u,d)?-P:P)/$:P=(Tq(u,d)?-O:O)*$:p?(O=P/$,d=u):(P=O*$,u=d));const Z=u?C+P:C,le=d?j+O:j;return{width:q+(u?-P:P),height:F+(d?-O:O),x:s[0]*P*(u?-1:1)+Z,y:s[1]*O*(d?-1:1)+le}}const PM={width:0,height:0,x:0,y:0},nie={...PM,pointerX:0,pointerY:0,aspectRatio:1};function rie(t){return[[0,0],[t.measured.width,t.measured.height]]}function iie(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,o=t.measured.height??0,a=n[0]*s,u=n[1]*o;return[[r-a,i-u],[r+s-a,i+o-u]]}function sie({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=$s(t);function o({controlPosition:u,boundaries:d,keepAspectRatio:p,onResizeStart:h,onResize:g,onResizeEnd:x,shouldResize:_}){let S={...PM},k={...nie};const I=eie(u);let E,C=null,j=[],q,F,$;const P=KL().on("start",O=>{const{nodeLookup:B,transform:D,snapGrid:W,snapToGrid:V,nodeOrigin:z,paneDomNode:X}=n();if(E=B.get(e),!E)return;C=X?.getBoundingClientRect()??null;const{xSnapped:Z,ySnapped:le}=Nh(O.sourceEvent,{transform:D,snapGrid:W,snapToGrid:V,containerBounds:C});S={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},k={...S,pointerX:Z,pointerY:le,aspectRatio:S.width/S.height},q=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(q=B.get(E.parentId),F=q&&E.extent==="parent"?rie(q):void 0),j=[],$=void 0;for(const[ie,ne]of B)if(ne.parentId===e&&(j.push({id:ie,position:{...ne.position},extent:ne.extent}),ne.extent==="parent"||ne.expandParent)){const oe=iie(ne,E,ne.origin??z);$?$=[[Math.min(oe[0][0],$[0][0]),Math.min(oe[0][1],$[0][1])],[Math.max(oe[1][0],$[1][0]),Math.max(oe[1][1],$[1][1])]]:$=oe}h?.(O,{...S})}).on("drag",O=>{const{transform:B,snapGrid:D,snapToGrid:W,nodeOrigin:V}=n(),z=Nh(O.sourceEvent,{transform:B,snapGrid:D,snapToGrid:W,containerBounds:C}),X=[];if(!E)return;const{x:Z,y:le,width:ie,height:ne}=S,oe={},te=E.origin??V,{width:ce,height:de,x:ye,y:we}=tie(k,I,z,d,p,te,F,$),Ie=ce!==ie,ze=de!==ne,Re=ye!==Z&&Ie,De=we!==le&&ze;if(!Re&&!De&&!Ie&&!ze)return;if((Re||De||te[0]===1||te[1]===1)&&(oe.x=Re?ye:S.x,oe.y=De?we:S.y,S.x=oe.x,S.y=oe.y,j.length>0)){const ut=ye-Z,Et=we-le;for(const At of j)At.position={x:At.position.x-ut+te[0]*(ce-ie),y:At.position.y-Et+te[1]*(de-ne)},X.push(At)}if((Ie||ze)&&(oe.width=Ie?ce:S.width,oe.height=ze?de:S.height,S.width=oe.width,S.height=oe.height),q&&E.expandParent){const ut=te[0]*(oe.width??0);oe.x&&oe.x<ut&&(S.x=ut,k.x=k.x-(oe.x-ut));const Et=te[1]*(oe.height??0);oe.y&&oe.y<Et&&(S.y=Et,k.y=k.y-(oe.y-Et))}const Je=Xre({width:S.width,prevWidth:ie,height:S.height,prevHeight:ne,affectsX:I.affectsX,affectsY:I.affectsY}),Xe={...S,direction:Je};_?.(O,Xe)!==!1&&(g?.(O,Xe),r(oe,X))}).on("end",O=>{x?.(O,{...S}),i?.()});s.call(P)}function a(){s.on(".drag",null)}return{update:o,destroy:a}}const jq=t=>{let e;const n=new Set,r=(p,h)=>{const g=typeof p=="function"?p(e):p;if(!Object.is(g,e)){const x=e;e=h??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(_=>_(e,x))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{n.clear()}},d=e=t(r,i,u);return u},oie=t=>t?jq(t):jq,{useDebugValue:aie}=Un,{useSyncExternalStoreWithSelector:lie}=wz,uie=t=>t;function FM(t,e=uie,n){const r=lie(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return aie(r),r}const Rq=(t,e)=>{const n=oie(t),r=(i,s=e)=>FM(n,i,s);return Object.assign(r,n),r},cie=(t,e)=>t?Rq(t,e):Rq;function Nr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const Dx=H.createContext(null),die=Dx.Provider,DM=al.error001();function An(t,e){const n=H.useContext(Dx);if(n===null)throw new Error(DM);return FM(n,t,e)}function kr(){const t=H.useContext(Dx);if(t===null)throw new Error(DM);return H.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Oq={display:"none"},fie={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},LM="react-flow__node-desc",MM="react-flow__edge-desc",pie="react-flow__aria-live",hie=t=>t.ariaLiveMessage;function mie({rfId:t}){const e=An(hie);return f.jsx("div",{id:`${pie}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:fie,children:e})}function gie({rfId:t,disableKeyboardA11y:e}){return f.jsxs(f.Fragment,{children:[f.jsxs("div",{id:`${LM}-${t}`,style:Oq,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),f.jsx("div",{id:`${MM}-${t}`,style:Oq,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&f.jsx(mie,{rfId:t})]})}const yie=t=>t.userSelectionActive?"none":"all",kN=H.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const o=An(yie),a=`${t}`.split("-");return f.jsx("div",{className:Zr(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},ref:s,...i,children:e})});function bie({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:f.jsx(kN,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:f.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const vie=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},Ay=t=>t.id;function xie(t,e){return Nr(t.selectedNodes.map(Ay),e.selectedNodes.map(Ay))&&Nr(t.selectedEdges.map(Ay),e.selectedEdges.map(Ay))}function wie({onSelectionChange:t}){const e=kr(),{selectedNodes:n,selectedEdges:r}=An(vie,xie);return H.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const _ie=t=>!!t.onSelectionChangeHandlers;function Sie({onSelectionChange:t}){const e=An(_ie);return t||e?f.jsx(wie,{onSelectionChange:t}):null}const $M=[0,0],Eie={x:0,y:0,zoom:1},Iie=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Aq=[...Iie,"rfId"],Nie=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),qq={translateExtent:um,nodeOrigin:$M,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function kie(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=An(Nie,Nr),p=kr();H.useEffect(()=>(u(t.defaultNodes,t.defaultEdges),()=>{h.current=qq,a()}),[]);const h=H.useRef(qq);return H.useEffect(()=>{for(const g of Aq){const x=t[g],_=h.current[g];x!==_&&(typeof t[g]>"u"||(g==="nodes"?e(x):g==="edges"?n(x):g==="minZoom"?r(x):g==="maxZoom"?i(x):g==="translateExtent"?s(x):g==="nodeExtent"?o(x):g==="paneClickDistance"?d(x):g==="fitView"?p.setState({fitViewOnInit:x}):g==="fitViewOptions"?p.setState({fitViewOnInitOptions:x}):p.setState({[g]:x})))}h.current=t},Aq.map(g=>t[g])),null}function Pq(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Cie(t){const[e,n]=H.useState(t==="system"?null:t);return H.useEffect(()=>{if(t!=="system"){n(t);return}const r=Pq(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:Pq()?.matches?"dark":"light"}const Fq=typeof document<"u"?document:null;function pm(t=null,e={target:Fq,actInsideInputWithModifier:!0}){const[n,r]=H.useState(!1),i=H.useRef(!1),s=H.useRef(new Set([])),[o,a]=H.useMemo(()=>{if(t!==null){const d=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=d.reduce((h,g)=>h.concat(...g),[]);return[d,p]}return[[],[]]},[t]);return H.useEffect(()=>{const u=e?.target||Fq;if(t!==null){const d=g=>{if(i.current=g.ctrlKey||g.metaKey||g.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&$I(g))return!1;const _=Lq(g.code,a);s.current.add(g[_]),Dq(o,s.current,!1)&&(g.preventDefault(),r(!0))},p=g=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&$I(g))return!1;const _=Lq(g.code,a);Dq(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(g[_]),g.key==="Meta"&&s.current.clear(),i.current=!1},h=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",d),u?.addEventListener("keyup",p),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{u?.removeEventListener("keydown",d),u?.removeEventListener("keyup",p),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[t,r]),n}function Dq(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function Lq(t,e){return e.includes(t)?"code":"key"}const Tie=()=>{const t=kr();return H.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:o}=t.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},fitView:e=>{const{nodeLookup:n,minZoom:r,maxZoom:i,panZoom:s,domNode:o}=t.getState();if(!s||!o)return Promise.resolve(!1);const a=DI(n,e),{width:u,height:d}=Px(o);return LI({nodes:a,width:u,height:d,minZoom:r,maxZoom:i,panZoom:s},e)},setCenter:async(e,n,r)=>{const{width:i,height:s,maxZoom:o,panZoom:a}=t.getState(),u=typeof r?.zoom<"u"?r.zoom:o,d=i/2-e*u,p=s/2-n*u;return a?(await a.setViewport({x:d,y:p,zoom:u},{duration:r?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:a}=t.getState(),u=wN(e,r,i,s,o,n?.padding??.1);return a?(await a.setViewport(u,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={snapToGrid:!0})=>{const{transform:r,snapGrid:i,domNode:s}=t.getState();if(!s)return e;const{x:o,y:a}=s.getBoundingClientRect(),u={x:e.x-o,y:e.y-a};return Qm(u,r,n.snapToGrid,i)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=vM(e,n);return{x:o.x+i,y:o.y+s}}}),[])};function BM(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const a={...s};for(const u of o)jie(u,a);n.push(a)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function jie(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&(e.width=t.dimensions.width,e.height=t.dimensions.height)),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function CN(t,e){return BM(t,e)}function zM(t,e){return BM(t,e)}function Ju(t,e){return{id:t,type:"select",selected:e}}function Fd(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(Ju(s.id,o)))}return r}function Mq({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const o=e.get(s.id),a=o?.internals?.userNode??o;a!==void 0&&a!==s&&n.push({id:s.id,item:s,type:"replace"}),a===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function $q(t){return{id:t.id,type:"remove"}}const Bq=t=>hre(t),Rie=t=>pM(t);function WM(t){return H.forwardRef(t)}const Oie=typeof window<"u"?H.useLayoutEffect:H.useEffect;function zq(t){const[e,n]=H.useState(BigInt(0)),[r]=H.useState(()=>Aie(()=>n(i=>i+BigInt(1))));return Oie(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function Aie(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const UM=H.createContext(null);function qie({children:t}){const e=kr(),n=H.useCallback(a=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:p,onNodesChange:h,nodeLookup:g}=e.getState();let x=u;for(const _ of a)x=typeof _=="function"?_(x):_;p?d(x):h&&h(Mq({items:x,lookup:g}))},[]),r=zq(n),i=H.useCallback(a=>{const{edges:u=[],setEdges:d,hasDefaultEdges:p,onEdgesChange:h,edgeLookup:g}=e.getState();let x=u;for(const _ of a)x=typeof _=="function"?_(x):_;p?d(x):h&&h(Mq({items:x,lookup:g}))},[]),s=zq(i),o=H.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return f.jsx(UM.Provider,{value:o,children:t})}function Pie(){const t=H.useContext(UM);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const Fie=t=>!!t.panZoom;function Df(){const t=Tie(),e=kr(),n=Pie(),r=An(Fie),i=H.useMemo(()=>{const s=h=>e.getState().nodeLookup.get(h),o=h=>{n.nodeQueue.push(h)},a=h=>{n.edgeQueue.push(h)},u=h=>{const{nodeLookup:g,nodeOrigin:x}=e.getState(),_=Bq(h)?h:g.get(h.id),S=_.parentId?wM(_.position,_.measured,_.parentId,g,x):_.position,k={..._,position:S,width:_.measured?.width??_.width,height:_.measured?.height??_.height};return bf(k)},d=(h,g,x={replace:!1})=>{o(_=>_.map(S=>{if(S.id===h){const k=typeof g=="function"?g(S):g;return x.replace&&Bq(k)?k:{...S,...k}}return S}))},p=(h,g,x={replace:!1})=>{a(_=>_.map(S=>{if(S.id===h){const k=typeof g=="function"?g(S):g;return x.replace&&Rie(k)?k:{...S,...k}}return S}))};return{getNodes:()=>e.getState().nodes.map(h=>({...h})),getNode:h=>s(h)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:h=[]}=e.getState();return h.map(g=>({...g}))},getEdge:h=>e.getState().edgeLookup.get(h),setNodes:o,setEdges:a,addNodes:h=>{const g=Array.isArray(h)?h:[h];n.nodeQueue.push(x=>[...x,...g])},addEdges:h=>{const g=Array.isArray(h)?h:[h];n.edgeQueue.push(x=>[...x,...g])},toObject:()=>{const{nodes:h=[],edges:g=[],transform:x}=e.getState(),[_,S,k]=x;return{nodes:h.map(I=>({...I})),edges:g.map(I=>({...I})),viewport:{x:_,y:S,zoom:k}}},deleteElements:async({nodes:h=[],edges:g=[]})=>{const{nodes:x,edges:_,onNodesDelete:S,onEdgesDelete:k,triggerNodeChanges:I,triggerEdgeChanges:E,onDelete:C,onBeforeDelete:j}=e.getState(),{nodes:q,edges:F}=await yre({nodesToRemove:h,edgesToRemove:g,nodes:x,edges:_,onBeforeDelete:j}),$=F.length>0,P=q.length>0;if($){const O=F.map($q);k?.(F),E(O)}if(P){const O=q.map($q);S?.(q),I(O)}return(P||$)&&C?.({nodes:q,edges:F}),{deletedNodes:q,deletedEdges:F}},getIntersectingNodes:(h,g=!0,x)=>{const _=bq(h),S=_?h:u(h),k=x!==void 0;return S?(x||e.getState().nodes).filter(I=>{const E=e.getState().nodeLookup.get(I.id);if(E&&!_&&(I.id===h.id||!E.internals.positionAbsolute))return!1;const C=bf(k?I:E),j=dm(C,S);return g&&j>0||j>=S.width*S.height}):[]},isNodeIntersecting:(h,g,x=!0)=>{const S=bq(h)?h:u(h);if(!S)return!1;const k=dm(S,g);return x&&k>0||k>=S.width*S.height},updateNode:d,updateNodeData:(h,g,x={replace:!1})=>{d(h,_=>{const S=typeof g=="function"?g(_):g;return x.replace?{..._,data:S}:{..._,data:{..._.data,...S}}},x)},updateEdge:p,updateEdgeData:(h,g,x={replace:!1})=>{p(h,_=>{const S=typeof g=="function"?g(_):g;return x.replace?{..._,data:S}:{..._,data:{..._.data,...S}}},x)},getNodesBounds:h=>{const{nodeLookup:g,nodeOrigin:x}=e.getState();return mre(h,{nodeLookup:g,nodeOrigin:x})},getHandleConnections:({type:h,id:g,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}-${h}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:h,handleId:g,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}${h?g?`-${h}-${g}`:`-${h}`:""}`)?.values()??[])}},[]);return H.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const Wq=t=>t.selected,Die={actInsideInputWithModifier:!1},Lie=typeof window<"u"?window:void 0;function Mie({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=kr(),{deleteElements:r}=Df(),i=pm(t,Die),s=pm(e,{target:Lie});H.useEffect(()=>{if(i){const{edges:o,nodes:a}=n.getState();r({nodes:a.filter(Wq),edges:o.filter(Wq)}),n.setState({nodesSelectionActive:!1})}},[i]),H.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function $ie(t){const e=kr();H.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=Px(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",al.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const Lx={position:"absolute",width:"100%",height:"100%",top:0,left:0},Bie=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function zie({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=fc.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:u,translateExtent:d,minZoom:p,maxZoom:h,zoomActivationKeyCode:g,preventScrolling:x=!0,children:_,noWheelClassName:S,noPanClassName:k,onViewportChange:I,isControlledViewport:E,paneClickDistance:C}){const j=kr(),q=H.useRef(null),{userSelectionActive:F,lib:$}=An(Bie,Nr),P=pm(g),O=H.useRef();$ie(q);const B=H.useCallback(D=>{I?.({x:D[0],y:D[1],zoom:D[2]}),E||j.setState({transform:D})},[I,E]);return H.useEffect(()=>{if(q.current){O.current=Yre({domNode:q.current,minZoom:p,maxZoom:h,translateExtent:d,viewport:u,paneClickDistance:C,onDraggingChange:z=>j.setState({paneDragging:z}),onPanZoomStart:(z,X)=>{const{onViewportChangeStart:Z,onMoveStart:le}=j.getState();le?.(z,X),Z?.(X)},onPanZoom:(z,X)=>{const{onViewportChange:Z,onMove:le}=j.getState();le?.(z,X),Z?.(X)},onPanZoomEnd:(z,X)=>{const{onViewportChangeEnd:Z,onMoveEnd:le}=j.getState();le?.(z,X),Z?.(X)}});const{x:D,y:W,zoom:V}=O.current.getViewport();return j.setState({panZoom:O.current,transform:[D,W,V],domNode:q.current.closest(".react-flow")}),()=>{O.current?.destroy()}}},[]),H.useEffect(()=>{O.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:P,preventScrolling:x,noPanClassName:k,userSelectionActive:F,noWheelClassName:S,lib:$,onTransformChange:B})},[t,e,n,r,i,s,o,a,P,x,k,F,S,$,B]),f.jsx("div",{className:"react-flow__renderer",ref:q,style:Lx,children:_})}const Wie=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Uie(){const{userSelectionActive:t,userSelectionRect:e}=An(Wie,Nr);return t&&e?f.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const cE=(t,e)=>n=>{n.target===e.current&&t?.(n)},Vie=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging});function Hie({isSelecting:t,selectionKeyPressed:e,selectionMode:n=cm.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:a,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:p,onPaneMouseMove:h,onPaneMouseLeave:g,children:x}){const _=kr(),{userSelectionActive:S,elementsSelectable:k,dragging:I}=An(Vie,Nr),E=k&&(t||S),C=H.useRef(null),j=H.useRef(),q=H.useRef(new Set),F=H.useRef(new Set),$=H.useRef(!1),P=H.useRef(!1),O=Z=>{if($.current){$.current=!1;return}a?.(Z),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},B=Z=>{if(Array.isArray(r)&&r?.includes(2)){Z.preventDefault();return}u?.(Z)},D=d?Z=>d(Z):void 0,W=Z=>{const{resetSelectedElements:le,domNode:ie}=_.getState();if(j.current=ie?.getBoundingClientRect(),!k||!t||Z.button!==0||Z.target!==C.current||!j.current)return;Z.target?.setPointerCapture?.(Z.pointerId),P.current=!0,$.current=!1;const{x:ne,y:oe}=Za(Z.nativeEvent,j.current);le(),_.setState({userSelectionRect:{width:0,height:0,startX:ne,startY:oe,x:ne,y:oe}}),s?.(Z)},V=Z=>{const{userSelectionRect:le,transform:ie,nodeLookup:ne,edgeLookup:oe,connectionLookup:te,triggerNodeChanges:ce,triggerEdgeChanges:de,defaultEdgeOptions:ye}=_.getState();if(!j.current||!le)return;$.current=!0;const{x:we,y:Ie}=Za(Z.nativeEvent,j.current),{startX:ze,startY:Re}=le,De={startX:ze,startY:Re,x:we<ze?we:ze,y:Ie<Re?Ie:Re,width:Math.abs(we-ze),height:Math.abs(Ie-Re)},Je=q.current,Xe=F.current;q.current=new Set(hM(ne,De,ie,n===cm.Partial,!0).map(ut=>ut.id)),F.current=new Set;const Ue=ye?.selectable??!0;for(const ut of q.current){const Et=te.get(ut);if(Et)for(const{edgeId:At}of Et.values()){const Gt=oe.get(At);Gt&&(Gt.selectable??Ue)&&F.current.add(At)}}if(!vq(Je,q.current)){const ut=Fd(ne,q.current,!0);ce(ut)}if(!vq(Xe,F.current)){const ut=Fd(oe,F.current);de(ut)}_.setState({userSelectionRect:De,userSelectionActive:!0,nodesSelectionActive:!1})},z=Z=>{if(Z.button!==0||!P.current)return;Z.target?.releasePointerCapture?.(Z.pointerId);const{userSelectionRect:le}=_.getState();!S&&le&&Z.target===C.current&&O?.(Z),_.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:q.current.size>0}),o?.(Z),(e||i)&&($.current=!1),P.current=!1},X=r===!0||Array.isArray(r)&&r.includes(0);return f.jsxs("div",{className:Zr(["react-flow__pane",{draggable:X,dragging:I,selection:t}]),onClick:E?void 0:cE(O,C),onContextMenu:cE(B,C),onWheel:cE(D,C),onPointerEnter:E?void 0:p,onPointerDown:E?W:h,onPointerMove:E?V:h,onPointerUp:E?z:void 0,onPointerLeave:g,ref:C,style:Lx,children:[x,f.jsx(Uie,{})]})}function VI({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:a,onError:u}=e.getState(),d=a.get(t);if(!d){u?.("012",al.error012(t));return}e.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function VM({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const a=kr(),[u,d]=H.useState(!1),p=H.useRef();return H.useEffect(()=>{p.current=Lre({getStoreItems:()=>a.getState(),onNodeMouseDown:h=>{VI({id:h,store:a,nodeRef:t})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),H.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{p.current?.destroy()}},[n,r,e,s,t,i]),u}const Gie=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function HM(){const t=kr();return H.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:a,updateNodePositions:u,nodeLookup:d,nodeOrigin:p}=t.getState(),h=new Map,g=Gie(o),x=i?s[0]:5,_=i?s[1]:5,S=n.direction.x*x*n.factor,k=n.direction.y*_*n.factor;for(const[,I]of d){if(!g(I))continue;let E={x:I.internals.positionAbsolute.x+S,y:I.internals.positionAbsolute.y+k};i&&(E=qx(E,s));const{position:C,positionAbsolute:j}=mM({nodeId:I.id,nextPosition:E,nodeLookup:d,nodeExtent:r,nodeOrigin:p,onError:a});I.position=C,I.internals.positionAbsolute=j,h.set(I.id,I)}u(h)},[])}const TN=H.createContext(null),Kie=TN.Provider;TN.Consumer;const jN=()=>H.useContext(TN),Qie=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),Jie=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:a,toHandle:u,isValid:d}=o,p=u?.nodeId===t&&u?.id===e&&u?.type===n;return{connectingFrom:a?.nodeId===t&&a?.id===e&&a?.type===n,connectingTo:p,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:s===gf.Strict?a?.type!==n:t!==a?.nodeId||e!==a?.id,connectionInProcess:!!a,valid:p&&d}};function Zie({type:t="source",position:e=jt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:u,className:d,onMouseDown:p,onTouchStart:h,...g},x){const _=o||null,S=t==="target",k=kr(),I=jN(),{connectOnClick:E,noPanClassName:C,rfId:j}=An(Qie,Nr),{connectingFrom:q,connectingTo:F,clickConnecting:$,isPossibleEndHandle:P,connectionInProcess:O,valid:B}=An(Jie(I,_,t),Nr);I||k.getState().onError?.("010",al.error010());const D=z=>{const{defaultEdgeOptions:X,onConnect:Z,hasDefaultEdges:le}=k.getState(),ie={...X,...z};if(le){const{edges:ne,setEdges:oe}=k.getState();oe(Ere(ie,ne))}Z?.(ie),a?.(ie)},W=z=>{if(!I)return;const X=SM(z.nativeEvent);if(i&&(X&&z.button===0||!X)){const Z=k.getState();UI.onPointerDown(z.nativeEvent,{autoPanOnConnect:Z.autoPanOnConnect,connectionMode:Z.connectionMode,connectionRadius:Z.connectionRadius,domNode:Z.domNode,nodeLookup:Z.nodeLookup,lib:Z.lib,isTarget:S,handleId:_,nodeId:I,flowId:Z.rfId,panBy:Z.panBy,cancelConnection:Z.cancelConnection,onConnectStart:Z.onConnectStart,onConnectEnd:Z.onConnectEnd,updateConnection:Z.updateConnection,onConnect:D,isValidConnection:n||Z.isValidConnection,getTransform:()=>k.getState().transform,getFromHandle:()=>k.getState().connection.fromHandle,autoPanSpeed:Z.autoPanSpeed})}X?p?.(z):h?.(z)},V=z=>{const{onClickConnectStart:X,onClickConnectEnd:Z,connectionClickStartHandle:le,connectionMode:ie,isValidConnection:ne,lib:oe,rfId:te,nodeLookup:ce,connection:de}=k.getState();if(!I||!le&&!i)return;if(!le){X?.(z.nativeEvent,{nodeId:I,handleId:_,handleType:t}),k.setState({connectionClickStartHandle:{nodeId:I,type:t,id:_}});return}const ye=_M(z.target),we=n||ne,{connection:Ie,isValid:ze}=UI.isValid(z.nativeEvent,{handle:{nodeId:I,id:_,type:t},connectionMode:ie,fromNodeId:le.nodeId,fromHandleId:le.id||null,fromType:le.type,isValidConnection:we,flowId:te,doc:ye,lib:oe,nodeLookup:ce});ze&&Ie&&D(Ie);const Re=structuredClone(de);delete Re.inProgress,Re.toPosition=Re.toHandle?Re.toHandle.position:null,Z?.(z,Re),k.setState({connectionClickStartHandle:null})};return f.jsx("div",{"data-handleid":_,"data-nodeid":I,"data-handlepos":e,"data-id":`${j}-${I}-${_}-${t}`,className:Zr(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",C,d,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,clickconnecting:$,connectingfrom:q,connectingto:F,valid:B,connectionindicator:r&&(!O||P)&&(O?s:i)}]),onMouseDown:W,onTouchStart:W,onClick:E?V:void 0,ref:x,...g,children:u})}const $i=H.memo(WM(Zie));function Yie({data:t,isConnectable:e,sourcePosition:n=jt.Bottom}){return f.jsxs(f.Fragment,{children:[t?.label,f.jsx($i,{type:"source",position:n,isConnectable:e})]})}function Xie({data:t,isConnectable:e,targetPosition:n=jt.Top,sourcePosition:r=jt.Bottom}){return f.jsxs(f.Fragment,{children:[f.jsx($i,{type:"target",position:n,isConnectable:e}),t?.label,f.jsx($i,{type:"source",position:r,isConnectable:e})]})}function ese(){return null}function tse({data:t,isConnectable:e,targetPosition:n=jt.Top}){return f.jsxs(f.Fragment,{children:[f.jsx($i,{type:"target",position:n,isConnectable:e}),t?.label]})}const Dv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Uq={input:Yie,default:Xie,output:tse,group:ese};function nse(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const rse=t=>{const{width:e,height:n,x:r,y:i}=Ff(t.nodeLookup,{filter:s=>!!s.selected});return{width:zo(e)?e:null,height:zo(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function ise({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=kr(),{width:i,height:s,transformString:o,userSelectionActive:a}=An(rse,Nr),u=HM(),d=H.useRef(null);if(H.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),VM({nodeRef:d}),a||!i||!s)return null;const p=t?g=>{const x=r.getState().nodes.filter(_=>_.selected);t(g,x)}:void 0,h=g=>{Object.prototype.hasOwnProperty.call(Dv,g.key)&&(g.preventDefault(),u({direction:Dv[g.key],factor:g.shiftKey?4:1}))};return f.jsx("div",{className:Zr(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:f.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s}})})}const Vq=typeof window<"u"?window:void 0,sse=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function GM({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:a,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:p,selectionMode:h,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:_,panActivationKeyCode:S,zoomActivationKeyCode:k,elementsSelectable:I,zoomOnScroll:E,zoomOnPinch:C,panOnScroll:j,panOnScrollSpeed:q,panOnScrollMode:F,zoomOnDoubleClick:$,panOnDrag:P,defaultViewport:O,translateExtent:B,minZoom:D,maxZoom:W,preventScrolling:V,onSelectionContextMenu:z,noWheelClassName:X,noPanClassName:Z,disableKeyboardA11y:le,onViewportChange:ie,isControlledViewport:ne}){const{nodesSelectionActive:oe,userSelectionActive:te}=An(sse),ce=pm(d,{target:Vq}),de=pm(S,{target:Vq}),ye=de||P,we=de||j,Ie=p&&ye!==!0,ze=ce||te||Ie;return Mie({deleteKeyCode:u,multiSelectionKeyCode:_}),f.jsx(zie,{onPaneContextMenu:s,elementsSelectable:I,zoomOnScroll:E,zoomOnPinch:C,panOnScroll:we,panOnScrollSpeed:q,panOnScrollMode:F,zoomOnDoubleClick:$,panOnDrag:!ce&&ye,defaultViewport:O,translateExtent:B,minZoom:D,maxZoom:W,zoomActivationKeyCode:k,preventScrolling:V,noWheelClassName:X,noPanClassName:Z,onViewportChange:ie,isControlledViewport:ne,paneClickDistance:a,children:f.jsxs(Hie,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ye,isSelecting:!!ze,selectionMode:h,selectionKeyPressed:ce,selectionOnDrag:Ie,children:[t,oe&&f.jsx(ise,{onSelectionContextMenu:z,noPanClassName:Z,disableKeyboardA11y:le})]})})}GM.displayName="FlowRenderer";const ose=H.memo(GM),ase=t=>e=>t?hM(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function lse(t){return An(H.useCallback(ase(t),[t]),Nr)}const use=t=>t.updateNodeInternals;function cse(){const t=An(use),[e]=H.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return H.useEffect(()=>()=>{e?.disconnect()},[e]),e}function dse({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=kr(),s=H.useRef(null),o=H.useRef(null),a=H.useRef(t.sourcePosition),u=H.useRef(t.targetPosition),d=H.useRef(e),p=n&&!!t.internals.handleBounds;return H.useEffect(()=>{s.current&&!t.hidden&&(!p||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[p,t.hidden]),H.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),H.useEffect(()=>{if(s.current){const h=d.current!==e,g=a.current!==t.sourcePosition,x=u.current!==t.targetPosition;(h||g||x)&&(d.current=e,a.current=t.sourcePosition,u.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function fse({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:a,elementsSelectable:u,nodesConnectable:d,nodesFocusable:p,resizeObserver:h,noDragClassName:g,noPanClassName:x,disableKeyboardA11y:_,rfId:S,nodeTypes:k,nodeExtent:I,nodeClickDistance:E,onError:C}){const{node:j,internals:q,isParent:F}=An(Re=>{const De=Re.nodeLookup.get(t),Je=Re.parentLookup.has(t);return{node:De,internals:De.internals,isParent:Je}},Nr);let $=j.type||"default",P=k?.[$]||Uq[$];P===void 0&&(C?.("003",al.error003($)),$="default",P=Uq.default);const O=!!(j.draggable||a&&typeof j.draggable>"u"),B=!!(j.selectable||u&&typeof j.selectable>"u"),D=!!(j.connectable||d&&typeof j.connectable>"u"),W=!!(j.focusable||p&&typeof j.focusable>"u"),V=kr(),z=xM(j),X=dse({node:j,nodeType:$,hasDimensions:z,resizeObserver:h}),Z=VM({nodeRef:X,disabled:j.hidden||!O,noDragClassName:g,handleSelector:j.dragHandle,nodeId:t,isSelectable:B,nodeClickDistance:E}),le=HM();if(j.hidden)return null;const ie=ll(j),ne=nse(j),oe=B||O||e||n||r||i,te=n?Re=>n(Re,{...q.userNode}):void 0,ce=r?Re=>r(Re,{...q.userNode}):void 0,de=i?Re=>i(Re,{...q.userNode}):void 0,ye=s?Re=>s(Re,{...q.userNode}):void 0,we=o?Re=>o(Re,{...q.userNode}):void 0,Ie=Re=>{const{selectNodesOnDrag:De,nodeDragThreshold:Je}=V.getState();B&&(!De||!O||Je>0)&&VI({id:t,store:V,nodeRef:X}),e&&e(Re,{...q.userNode})},ze=Re=>{if(!($I(Re.nativeEvent)||_))if(cM.includes(Re.key)&&B){const De=Re.key==="Escape";VI({id:t,store:V,unselect:De,nodeRef:X})}else O&&j.selected&&Object.prototype.hasOwnProperty.call(Dv,Re.key)&&(Re.preventDefault(),V.setState({ariaLiveMessage:`Moved selected node ${Re.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~q.positionAbsolute.x}, y: ${~~q.positionAbsolute.y}`}),le({direction:Dv[Re.key],factor:Re.shiftKey?4:1}))};return f.jsx("div",{className:Zr(["react-flow__node",`react-flow__node-${$}`,{[x]:O},j.className,{selected:j.selected,selectable:B,parent:F,draggable:O,dragging:Z}]),ref:X,style:{zIndex:q.z,transform:`translate(${q.positionAbsolute.x}px,${q.positionAbsolute.y}px)`,pointerEvents:oe?"all":"none",visibility:z?"visible":"hidden",...j.style,...ne},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:te,onMouseMove:ce,onMouseLeave:de,onContextMenu:ye,onClick:Ie,onDoubleClick:we,onKeyDown:W?ze:void 0,tabIndex:W?0:void 0,role:W?"button":void 0,"aria-describedby":_?void 0:`${LM}-${S}`,"aria-label":j.ariaLabel,children:f.jsx(Kie,{value:t,children:f.jsx(P,{id:t,data:j.data,type:$,positionAbsoluteX:q.positionAbsolute.x,positionAbsoluteY:q.positionAbsolute.y,selected:j.selected??!1,selectable:B,draggable:O,deletable:j.deletable??!0,isConnectable:D,sourcePosition:j.sourcePosition,targetPosition:j.targetPosition,dragging:Z,dragHandle:j.dragHandle,zIndex:q.z,parentId:j.parentId,...ie})})})}const pse=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function KM(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=An(pse,Nr),o=lse(t.onlyRenderVisibleElements),a=cse();return f.jsx("div",{className:"react-flow__nodes",style:Lx,children:o.map(u=>f.jsx(fse,{id:u,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:a,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},u))})}KM.displayName="NodeRenderer";const hse=H.memo(KM);function mse(t){return An(H.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&wre({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),Nr)}const gse=({color:t="none",strokeWidth:e=1})=>f.jsx("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),yse=({color:t="none",strokeWidth:e=1})=>f.jsx("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Hq={[Jl.Arrow]:gse,[Jl.ArrowClosed]:yse};function bse(t){const e=kr();return H.useMemo(()=>Object.prototype.hasOwnProperty.call(Hq,t)?Hq[t]:(e.getState().onError?.("009",al.error009(t)),null),[t])}const vse=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const u=bse(e);return u?f.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:f.jsx(u,{color:n,strokeWidth:o})}):null},QM=({defaultColor:t,rfId:e})=>{const n=An(s=>s.edges),r=An(s=>s.defaultEdgeOptions),i=H.useMemo(()=>Tre(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?f.jsx("svg",{className:"react-flow__marker",children:f.jsx("defs",{children:i.map(s=>f.jsx(vse,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};QM.displayName="MarkerDefinitions";var xse=H.memo(QM);function JM({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:u,className:d,...p}){const[h,g]=H.useState({x:1,y:0,width:0,height:0}),x=Zr(["react-flow__edge-textwrapper",d]),_=H.useRef(null);return H.useEffect(()=>{if(_.current){const S=_.current.getBBox();g({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),typeof n>"u"||!n?null:f.jsxs("g",{transform:`translate(${t-h.width/2} ${e-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...p,children:[i&&f.jsx("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),f.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:_,style:r,children:n}),u]})}JM.displayName="EdgeText";const wse=H.memo(JM);function Zm({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:u,interactionWidth:d=20,...p}){return f.jsxs(f.Fragment,{children:[f.jsx("path",{...p,d:t,fill:"none",className:Zr(["react-flow__edge-path",p.className])}),d&&f.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r&&zo(e)&&zo(n)?f.jsx(wse,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:u}):null]})}function Gq({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===jt.Left||t===jt.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function ZM({sourceX:t,sourceY:e,sourcePosition:n=jt.Bottom,targetX:r,targetY:i,targetPosition:s=jt.Top}){const[o,a]=Gq({pos:n,x1:t,y1:e,x2:r,y2:i}),[u,d]=Gq({pos:s,x1:r,y1:i,x2:t,y2:e}),[p,h,g,x]=EM({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${a} ${u},${d} ${r},${i}`,p,h,g,x]}function YM(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=jt.Bottom,targetPosition:a=jt.Top,label:u,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:x,style:_,markerEnd:S,markerStart:k,interactionWidth:I})=>{const[E,C,j]=ZM({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a}),q=t.isInternal?void 0:e;return f.jsx(Zm,{id:q,path:E,labelX:C,labelY:j,label:u,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:x,style:_,markerEnd:S,markerStart:k,interactionWidth:I})})}const _se=YM({isInternal:!1}),XM=YM({isInternal:!0});_se.displayName="SimpleBezierEdge";XM.displayName="SimpleBezierEdgeInternal";function e$(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:g,sourcePosition:x=jt.Bottom,targetPosition:_=jt.Top,markerEnd:S,markerStart:k,pathOptions:I,interactionWidth:E})=>{const[C,j,q]=BI({sourceX:n,sourceY:r,sourcePosition:x,targetX:i,targetY:s,targetPosition:_,borderRadius:I?.borderRadius,offset:I?.offset}),F=t.isInternal?void 0:e;return f.jsx(Zm,{id:F,path:C,labelX:j,labelY:q,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:g,markerEnd:S,markerStart:k,interactionWidth:E})})}const t$=e$({isInternal:!1}),n$=e$({isInternal:!0});t$.displayName="SmoothStepEdge";n$.displayName="SmoothStepEdgeInternal";function r$(t){return H.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return f.jsx(t$,{...n,id:r,pathOptions:H.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Sse=r$({isInternal:!1}),i$=r$({isInternal:!0});Sse.displayName="StepEdge";i$.displayName="StepEdgeInternal";function s$(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:g,markerEnd:x,markerStart:_,interactionWidth:S})=>{const[k,I,E]=Jm({sourceX:n,sourceY:r,targetX:i,targetY:s}),C=t.isInternal?void 0:e;return f.jsx(Zm,{id:C,path:k,labelX:I,labelY:E,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:g,markerEnd:x,markerStart:_,interactionWidth:S})})}const Ese=s$({isInternal:!1}),o$=s$({isInternal:!0});Ese.displayName="StraightEdge";o$.displayName="StraightEdgeInternal";function a$(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=jt.Bottom,targetPosition:a=jt.Top,label:u,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:x,style:_,markerEnd:S,markerStart:k,pathOptions:I,interactionWidth:E})=>{const[C,j,q]=_N({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a,curvature:I?.curvature}),F=t.isInternal?void 0:e;return f.jsx(Zm,{id:F,path:C,labelX:j,labelY:q,label:u,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:x,style:_,markerEnd:S,markerStart:k,interactionWidth:E})})}const Ise=a$({isInternal:!1}),l$=a$({isInternal:!0});Ise.displayName="BezierEdge";l$.displayName="BezierEdgeInternal";const Kq={default:l$,straight:o$,step:i$,smoothstep:n$,simplebezier:XM},Qq={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Nse=(t,e,n)=>n===jt.Left?t-e:n===jt.Right?t+e:t,kse=(t,e,n)=>n===jt.Top?t-e:n===jt.Bottom?t+e:t,Jq="react-flow__edgeupdater";function Zq({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a}){return f.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Zr([Jq,`${Jq}-${a}`]),cx:Nse(e,r,t),cy:kse(n,r,t),r,stroke:"transparent",fill:"transparent"})}function Cse({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:a,targetPosition:u,onReconnect:d,onReconnectStart:p,onReconnectEnd:h,setReconnecting:g,setUpdateHover:x}){const _=kr(),S=(j,q)=>{if(j.button!==0)return;const{autoPanOnConnect:F,domNode:$,isValidConnection:P,connectionMode:O,connectionRadius:B,lib:D,onConnectStart:W,onConnectEnd:V,cancelConnection:z,nodeLookup:X,rfId:Z,panBy:le,updateConnection:ie}=_.getState(),ne=q.type==="target";g(!0),p?.(j,n,q.type);const oe=(ce,de)=>{g(!1),h?.(ce,n,q.type,de)},te=ce=>d?.(n,ce);UI.onPointerDown(j.nativeEvent,{autoPanOnConnect:F,connectionMode:O,connectionRadius:B,domNode:$,handleId:q.id,nodeId:q.nodeId,nodeLookup:X,isTarget:ne,edgeUpdaterType:q.type,lib:D,flowId:Z,cancelConnection:z,panBy:le,isValidConnection:P,onConnect:te,onConnectStart:W,onConnectEnd:V,onReconnectEnd:oe,updateConnection:ie,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle})},k=j=>S(j,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),I=j=>S(j,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),E=()=>x(!0),C=()=>x(!1);return f.jsxs(f.Fragment,{children:[(t===!0||t==="source")&&f.jsx(Zq,{position:a,centerX:r,centerY:i,radius:e,onMouseDown:k,onMouseEnter:E,onMouseOut:C,type:"source"}),(t===!0||t==="target")&&f.jsx(Zq,{position:u,centerX:s,centerY:o,radius:e,onMouseDown:I,onMouseEnter:E,onMouseOut:C,type:"target"})]})}function Tse({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:a,onMouseMove:u,onMouseLeave:d,reconnectRadius:p,onReconnect:h,onReconnectStart:g,onReconnectEnd:x,rfId:_,edgeTypes:S,noPanClassName:k,onError:I,disableKeyboardA11y:E}){let C=An(Ue=>Ue.edgeLookup.get(t));const j=An(Ue=>Ue.defaultEdgeOptions);C=j?{...j,...C}:C;let q=C.type||"default",F=S?.[q]||Kq[q];F===void 0&&(I?.("011",al.error011(q)),q="default",F=Kq.default);const $=!!(C.focusable||e&&typeof C.focusable>"u"),P=typeof h<"u"&&(C.reconnectable||n&&typeof C.reconnectable>"u"),O=!!(C.selectable||r&&typeof C.selectable>"u"),B=H.useRef(null),[D,W]=H.useState(!1),[V,z]=H.useState(!1),X=kr(),{zIndex:Z,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ce}=An(H.useCallback(Ue=>{const ut=Ue.nodeLookup.get(C.source),Et=Ue.nodeLookup.get(C.target);if(!ut||!Et)return{zIndex:C.zIndex,...Qq};const At=Cre({id:t,sourceNode:ut,targetNode:Et,sourceHandle:C.sourceHandle||null,targetHandle:C.targetHandle||null,connectionMode:Ue.connectionMode,onError:I});return{zIndex:xre({selected:C.selected,zIndex:C.zIndex,sourceNode:ut,targetNode:Et,elevateOnSelect:Ue.elevateEdgesOnSelect}),...At||Qq}},[C.source,C.target,C.sourceHandle,C.targetHandle,C.selected,C.zIndex]),Nr),de=H.useMemo(()=>C.markerStart?`url('#${zI(C.markerStart,_)}')`:void 0,[C.markerStart,_]),ye=H.useMemo(()=>C.markerEnd?`url('#${zI(C.markerEnd,_)}')`:void 0,[C.markerEnd,_]);if(C.hidden||le===null||ie===null||ne===null||oe===null)return null;const we=Ue=>{const{addSelectedEdges:ut,unselectNodesAndEdges:Et,multiSelectionActive:At}=X.getState();O&&(X.setState({nodesSelectionActive:!1}),C.selected&&At?(Et({nodes:[],edges:[C]}),B.current?.blur()):ut([t])),i&&i(Ue,C)},Ie=s?Ue=>{s(Ue,{...C})}:void 0,ze=o?Ue=>{o(Ue,{...C})}:void 0,Re=a?Ue=>{a(Ue,{...C})}:void 0,De=u?Ue=>{u(Ue,{...C})}:void 0,Je=d?Ue=>{d(Ue,{...C})}:void 0,Xe=Ue=>{if(!E&&cM.includes(Ue.key)&&O){const{unselectNodesAndEdges:ut,addSelectedEdges:Et}=X.getState();Ue.key==="Escape"?(B.current?.blur(),ut({edges:[C]})):Et([t])}};return f.jsx("svg",{style:{zIndex:Z},children:f.jsxs("g",{className:Zr(["react-flow__edge",`react-flow__edge-${q}`,C.className,k,{selected:C.selected,animated:C.animated,inactive:!O&&!i,updating:D,selectable:O}]),onClick:we,onDoubleClick:Ie,onContextMenu:ze,onMouseEnter:Re,onMouseMove:De,onMouseLeave:Je,onKeyDown:$?Xe:void 0,tabIndex:$?0:void 0,role:$?"button":"img","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":C.ariaLabel===null?void 0:C.ariaLabel||`Edge from ${C.source} to ${C.target}`,"aria-describedby":$?`${MM}-${_}`:void 0,ref:B,children:[!V&&f.jsx(F,{id:t,source:C.source,target:C.target,type:C.type,selected:C.selected,animated:C.animated,selectable:O,deletable:C.deletable??!0,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ce,data:C.data,style:C.style,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerStart:de,markerEnd:ye,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth}),P&&f.jsx(Cse,{edge:C,isReconnectable:P,reconnectRadius:p,onReconnect:h,onReconnectStart:g,onReconnectEnd:x,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ce,setUpdateHover:W,setReconnecting:z})]})})}const jse=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function u$({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:p,reconnectRadius:h,onEdgeDoubleClick:g,onReconnectStart:x,onReconnectEnd:_,disableKeyboardA11y:S}){const{edgesFocusable:k,edgesReconnectable:I,elementsSelectable:E,onError:C}=An(jse,Nr),j=mse(e);return f.jsxs("div",{className:"react-flow__edges",children:[f.jsx(xse,{defaultColor:t,rfId:n}),j.map(q=>f.jsx(Tse,{id:q,edgesFocusable:k,edgesReconnectable:I,elementsSelectable:E,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:a,onMouseMove:u,onMouseLeave:d,onClick:p,reconnectRadius:h,onDoubleClick:g,onReconnectStart:x,onReconnectEnd:_,rfId:n,onError:C,edgeTypes:r,disableKeyboardA11y:S},q))]})}u$.displayName="EdgeRenderer";const Rse=H.memo(u$),Ose=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Ase({children:t}){const e=An(Ose);return f.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function qse(t){const e=Df(),n=H.useRef(!1);H.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const Pse=t=>t.panZoom?.syncViewport;function Fse(t){const e=An(Pse),n=kr();return H.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function Dse(t){return t.connection.inProgress?{...t.connection,to:Qm(t.connection.to,t.transform)}:{...t.connection}}function Lse(t){return Dse}function RN(t){const e=Lse();return An(e,Nr)}const Mse=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function $se({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:a,inProgress:u}=An(Mse,Nr);return!(s&&i&&u)?null:f.jsx("svg",{style:t,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:f.jsx("g",{className:Zr(["react-flow__connection",fM(a)]),children:f.jsx(c$,{style:e,type:n,CustomComponent:r,isValid:a})})})}const c$=({style:t,type:e=Kl.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:a,fromPosition:u,to:d,toNode:p,toHandle:h,toPosition:g}=RN();if(!i)return;if(n)return f.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:o,fromHandle:a,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:g,connectionStatus:fM(r),toNode:p,toHandle:h});let x="";const _={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:g};switch(e){case Kl.Bezier:[x]=_N(_);break;case Kl.SimpleBezier:[x]=ZM(_);break;case Kl.Step:[x]=BI({..._,borderRadius:0});break;case Kl.SmoothStep:[x]=BI(_);break;default:[x]=Jm(_)}return f.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};c$.displayName="ConnectionLine";const Bse={};function Yq(t=Bse){H.useRef(t),kr(),H.useEffect(()=>{},[t])}function zse(){kr(),H.useRef(!1),H.useEffect(()=>{},[])}function d$({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:g,onSelectionEnd:x,connectionLineType:_,connectionLineStyle:S,connectionLineComponent:k,connectionLineContainerStyle:I,selectionKeyCode:E,selectionOnDrag:C,selectionMode:j,multiSelectionKeyCode:q,panActivationKeyCode:F,zoomActivationKeyCode:$,deleteKeyCode:P,onlyRenderVisibleElements:O,elementsSelectable:B,defaultViewport:D,translateExtent:W,minZoom:V,maxZoom:z,preventScrolling:X,defaultMarkerColor:Z,zoomOnScroll:le,zoomOnPinch:ie,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:te,zoomOnDoubleClick:ce,panOnDrag:de,onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ie,onPaneMouseLeave:ze,onPaneScroll:Re,onPaneContextMenu:De,paneClickDistance:Je,nodeClickDistance:Xe,onEdgeContextMenu:Ue,onEdgeMouseEnter:ut,onEdgeMouseMove:Et,onEdgeMouseLeave:At,reconnectRadius:Gt,onReconnect:ln,onReconnectStart:xe,onReconnectEnd:be,noDragClassName:Ne,noWheelClassName:qe,noPanClassName:Ve,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ct,viewport:Yt,onViewportChange:Xt}){return Yq(t),Yq(e),zse(),qse(n),Fse(Yt),f.jsx(ose,{onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ie,onPaneMouseLeave:ze,onPaneContextMenu:De,onPaneScroll:Re,paneClickDistance:Je,deleteKeyCode:P,selectionKeyCode:E,selectionOnDrag:C,selectionMode:j,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:q,panActivationKeyCode:F,zoomActivationKeyCode:$,elementsSelectable:B,zoomOnScroll:le,zoomOnPinch:ie,zoomOnDoubleClick:ce,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:te,panOnDrag:de,defaultViewport:D,translateExtent:W,minZoom:V,maxZoom:z,onSelectionContextMenu:h,preventScrolling:X,noDragClassName:Ne,noWheelClassName:qe,noPanClassName:Ve,disableKeyboardA11y:rt,onViewportChange:Xt,isControlledViewport:!!Yt,children:f.jsxs(Ase,{children:[f.jsx(Rse,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:ln,onReconnectStart:xe,onReconnectEnd:be,onlyRenderVisibleElements:O,onEdgeContextMenu:Ue,onEdgeMouseEnter:ut,onEdgeMouseMove:Et,onEdgeMouseLeave:At,reconnectRadius:Gt,defaultMarkerColor:Z,noPanClassName:Ve,disableKeyboardA11y:rt,rfId:ct}),f.jsx($se,{style:S,type:_,component:k,containerStyle:I}),f.jsx("div",{className:"react-flow__edgelabel-renderer"}),f.jsx(hse,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:p,nodeClickDistance:Xe,onlyRenderVisibleElements:O,noPanClassName:Ve,noDragClassName:Ne,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ct}),f.jsx("div",{className:"react-flow__viewport-portal"})]})})}d$.displayName="GraphView";const Wse=H.memo(d$),Xq=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:u}={})=>{const d=new Map,p=new Map,h=new Map,g=new Map,x=r??e??[],_=n??t??[],S=a??[0,0],k=u??um;kM(h,g,x),WI(_,d,p,{nodeOrigin:S,nodeExtent:k,elevateNodesOnSelect:!1});let I=[0,0,1];if(o&&i&&s){const E=Ff(d,{filter:F=>!!((F.width||F.initialWidth)&&(F.height||F.initialHeight))}),{x:C,y:j,zoom:q}=wN(E,i,s,.5,2,.1);I=[C,j,q]}return{rfId:"1",width:0,height:0,transform:I,nodes:_,nodeLookup:d,parentLookup:p,edges:x,edgeLookup:g,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:um,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:gf.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...dM},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:bre,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Use=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:u})=>cie((d,p)=>({...Xq({nodes:t,edges:e,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:u,defaultNodes:n,defaultEdges:r}),setNodes:h=>{const{nodeLookup:g,parentLookup:x,nodeOrigin:_,elevateNodesOnSelect:S}=p();WI(h,g,x,{nodeOrigin:_,nodeExtent:u,elevateNodesOnSelect:S,checkEquality:!0}),d({nodes:h})},setEdges:h=>{const{connectionLookup:g,edgeLookup:x}=p();kM(g,x,h),d({edges:h})},setDefaultNodesAndEdges:(h,g)=>{if(h){const{setNodes:x}=p();x(h),d({hasDefaultNodes:!0})}if(g){const{setEdges:x}=p();x(g),d({hasDefaultEdges:!0})}},updateNodeInternals:(h,g={triggerFitView:!0})=>{const{triggerNodeChanges:x,nodeLookup:_,parentLookup:S,fitViewOnInit:k,fitViewDone:I,fitViewOnInitOptions:E,domNode:C,nodeOrigin:j,nodeExtent:q,debug:F,fitViewSync:$}=p(),{changes:P,updatedInternals:O}=Pre(h,_,S,C,j,q);if(O){if(Ore(_,S,{nodeOrigin:j,nodeExtent:q}),g.triggerFitView){let B=I;!I&&k&&(B=$({...E,nodes:E?.nodes})),d({fitViewDone:B})}else d({});P?.length>0&&(F&&console.log("React Flow: trigger node changes",P),x?.(P))}},updateNodePositions:(h,g=!1)=>{const x=[],_=[];for(const[S,k]of h){const I=!!(k?.expandParent&&k?.parentId&&k?.position),E={id:S,type:"position",position:I?{x:Math.max(0,k.position.x),y:Math.max(0,k.position.y)}:k.position,dragging:g};I&&x.push({id:S,parentId:k.parentId,rect:{...k.internals.positionAbsolute,width:k.measured.width,height:k.measured.height}}),_.push(E)}if(x.length>0){const{nodeLookup:S,parentLookup:k,nodeOrigin:I}=p(),E=NN(x,S,k,I);_.push(...E)}p().triggerNodeChanges(_)},triggerNodeChanges:h=>{const{onNodesChange:g,setNodes:x,nodes:_,hasDefaultNodes:S,debug:k}=p();if(h?.length){if(S){const I=CN(h,_);x(I)}k&&console.log("React Flow: trigger node changes",h),g?.(h)}},triggerEdgeChanges:h=>{const{onEdgesChange:g,setEdges:x,edges:_,hasDefaultEdges:S,debug:k}=p();if(h?.length){if(S){const I=zM(h,_);x(I)}k&&console.log("React Flow: trigger edge changes",h),g?.(h)}},addSelectedNodes:h=>{const{multiSelectionActive:g,edgeLookup:x,nodeLookup:_,triggerNodeChanges:S,triggerEdgeChanges:k}=p();if(g){const I=h.map(E=>Ju(E,!0));S(I);return}S(Fd(_,new Set([...h]),!0)),k(Fd(x))},addSelectedEdges:h=>{const{multiSelectionActive:g,edgeLookup:x,nodeLookup:_,triggerNodeChanges:S,triggerEdgeChanges:k}=p();if(g){const I=h.map(E=>Ju(E,!0));k(I);return}k(Fd(x,new Set([...h]))),S(Fd(_,new Set,!0))},unselectNodesAndEdges:({nodes:h,edges:g}={})=>{const{edges:x,nodes:_,nodeLookup:S,triggerNodeChanges:k,triggerEdgeChanges:I}=p(),E=h||_,C=g||x,j=E.map(F=>{const $=S.get(F.id);return $&&($.selected=!1),Ju(F.id,!1)}),q=C.map(F=>Ju(F.id,!1));k(j),I(q)},setMinZoom:h=>{const{panZoom:g,maxZoom:x}=p();g?.setScaleExtent([h,x]),d({minZoom:h})},setMaxZoom:h=>{const{panZoom:g,minZoom:x}=p();g?.setScaleExtent([x,h]),d({maxZoom:h})},setTranslateExtent:h=>{p().panZoom?.setTranslateExtent(h),d({translateExtent:h})},setPaneClickDistance:h=>{p().panZoom?.setClickDistance(h)},resetSelectedElements:()=>{const{edges:h,nodes:g,triggerNodeChanges:x,triggerEdgeChanges:_}=p(),S=g.reduce((I,E)=>E.selected?[...I,Ju(E.id,!1)]:I,[]),k=h.reduce((I,E)=>E.selected?[...I,Ju(E.id,!1)]:I,[]);x(S),_(k)},setNodeExtent:h=>{const{nodes:g,nodeLookup:x,parentLookup:_,nodeOrigin:S,elevateNodesOnSelect:k,nodeExtent:I}=p();h[0][0]===I[0][0]&&h[0][1]===I[0][1]&&h[1][0]===I[1][0]&&h[1][1]===I[1][1]||(WI(g,x,_,{nodeOrigin:S,nodeExtent:h,elevateNodesOnSelect:k,checkEquality:!1}),d({nodeExtent:h}))},panBy:h=>{const{transform:g,width:x,height:_,panZoom:S,translateExtent:k}=p();return Fre({delta:h,panZoom:S,transform:g,translateExtent:k,width:x,height:_})},fitView:h=>{const{panZoom:g,width:x,height:_,minZoom:S,maxZoom:k,nodeLookup:I}=p();if(!g)return Promise.resolve(!1);const E=DI(I,h);return LI({nodes:E,width:x,height:_,panZoom:g,minZoom:S,maxZoom:k},h)},fitViewSync:h=>{const{panZoom:g,width:x,height:_,minZoom:S,maxZoom:k,nodeLookup:I}=p();if(!g)return!1;const E=DI(I,h);return LI({nodes:E,width:x,height:_,panZoom:g,minZoom:S,maxZoom:k},h),E.size>0},cancelConnection:()=>{d({connection:{...dM}})},updateConnection:h=>{d({connection:h})},reset:()=>d({...Xq()})}),Object.is);function f$({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:o,nodeOrigin:a,nodeExtent:u,children:d}){const[p]=H.useState(()=>Use({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:u}));return f.jsx(die,{value:p,children:f.jsx(qie,{children:d})})}function Vse({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:a,nodeOrigin:u,nodeExtent:d}){return H.useContext(Dx)?f.jsx(f.Fragment,{children:t}):f.jsx(f$,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:a,nodeOrigin:u,nodeExtent:d,children:t})}const Hse={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Gse({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:a,onEdgeClick:u,onInit:d,onMove:p,onMoveStart:h,onMoveEnd:g,onConnect:x,onConnectStart:_,onConnectEnd:S,onClickConnectStart:k,onClickConnectEnd:I,onNodeMouseEnter:E,onNodeMouseMove:C,onNodeMouseLeave:j,onNodeContextMenu:q,onNodeDoubleClick:F,onNodeDragStart:$,onNodeDrag:P,onNodeDragStop:O,onNodesDelete:B,onEdgesDelete:D,onDelete:W,onSelectionChange:V,onSelectionDragStart:z,onSelectionDrag:X,onSelectionDragStop:Z,onSelectionContextMenu:le,onSelectionStart:ie,onSelectionEnd:ne,onBeforeDelete:oe,connectionMode:te,connectionLineType:ce=Kl.Bezier,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,deleteKeyCode:Ie="Backspace",selectionKeyCode:ze="Shift",selectionOnDrag:Re=!1,selectionMode:De=cm.Full,panActivationKeyCode:Je="Space",multiSelectionKeyCode:Xe=Fv()?"Meta":"Control",zoomActivationKeyCode:Ue=Fv()?"Meta":"Control",snapToGrid:ut,snapGrid:Et,onlyRenderVisibleElements:At=!1,selectNodesOnDrag:Gt,nodesDraggable:ln,nodesConnectable:xe,nodesFocusable:be,nodeOrigin:Ne=$M,edgesFocusable:qe,edgesReconnectable:Ve,elementsSelectable:rt=!0,defaultViewport:Me=Eie,minZoom:ct=.5,maxZoom:Yt=2,translateExtent:Xt=um,preventScrolling:_n=!0,nodeExtent:dr,defaultMarkerColor:Bn="#b1b1b7",zoomOnScroll:Yr=!0,zoomOnPinch:Vi=!0,panOnScroll:Cr=!1,panOnScrollSpeed:en=.5,panOnScrollMode:os=fc.Free,zoomOnDoubleClick:as=!0,panOnDrag:ls=!0,onPaneClick:_o,onPaneMouseEnter:Ea,onPaneMouseMove:Su,onPaneMouseLeave:Zs,onPaneScroll:G,onPaneContextMenu:Oc,paneClickDistance:yn=0,nodeClickDistance:Ac=0,children:qc,onReconnect:Pc,onReconnectStart:Eu,onReconnectEnd:Ia,onEdgeContextMenu:us,onEdgeDoubleClick:Iu,onEdgeMouseEnter:Na,onEdgeMouseMove:Wf,onEdgeMouseLeave:ka,reconnectRadius:Ys=10,onNodesChange:cl,onEdgesChange:Xs,noDragClassName:Uf="nodrag",noWheelClassName:Vf="nowheel",noPanClassName:Fc="nopan",fitView:eo,fitViewOptions:Dc,connectOnClick:Lc,attributionPosition:Hf,proOptions:Mc,defaultEdgeOptions:$c,elevateNodesOnSelect:Bc,elevateEdgesOnSelect:Nu,disableKeyboardA11y:zc=!1,autoPanOnConnect:Gf,autoPanOnNodeDrag:fr,autoPanSpeed:Kf,connectionRadius:ku,isValidConnection:Wc,onError:dl,style:Qf,id:Cu,nodeDragThreshold:fl,viewport:cs,onViewportChange:Jf,width:ki,height:Zf,colorMode:Yf="light",debug:Xf,...Yo},pl){const Hi=Cu||"1",hl=Cie(Yf);return f.jsx("div",{"data-testid":"rf__wrapper",...Yo,style:{...Qf,...Hse},ref:pl,className:Zr(["react-flow",i,hl]),id:Cu,children:f.jsxs(Vse,{nodes:t,edges:e,width:ki,height:Zf,fitView:eo,nodeOrigin:Ne,nodeExtent:dr,children:[f.jsx(Wse,{onInit:d,onNodeClick:a,onEdgeClick:u,onNodeMouseEnter:E,onNodeMouseMove:C,onNodeMouseLeave:j,onNodeContextMenu:q,onNodeDoubleClick:F,nodeTypes:s,edgeTypes:o,connectionLineType:ce,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,selectionKeyCode:ze,selectionOnDrag:Re,selectionMode:De,deleteKeyCode:Ie,multiSelectionKeyCode:Xe,panActivationKeyCode:Je,zoomActivationKeyCode:Ue,onlyRenderVisibleElements:At,defaultViewport:Me,translateExtent:Xt,minZoom:ct,maxZoom:Yt,preventScrolling:_n,zoomOnScroll:Yr,zoomOnPinch:Vi,zoomOnDoubleClick:as,panOnScroll:Cr,panOnScrollSpeed:en,panOnScrollMode:os,panOnDrag:ls,onPaneClick:_o,onPaneMouseEnter:Ea,onPaneMouseMove:Su,onPaneMouseLeave:Zs,onPaneScroll:G,onPaneContextMenu:Oc,paneClickDistance:yn,nodeClickDistance:Ac,onSelectionContextMenu:le,onSelectionStart:ie,onSelectionEnd:ne,onReconnect:Pc,onReconnectStart:Eu,onReconnectEnd:Ia,onEdgeContextMenu:us,onEdgeDoubleClick:Iu,onEdgeMouseEnter:Na,onEdgeMouseMove:Wf,onEdgeMouseLeave:ka,reconnectRadius:Ys,defaultMarkerColor:Bn,noDragClassName:Uf,noWheelClassName:Vf,noPanClassName:Fc,rfId:Hi,disableKeyboardA11y:zc,nodeExtent:dr,viewport:cs,onViewportChange:Jf}),f.jsx(kie,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:x,onConnectStart:_,onConnectEnd:S,onClickConnectStart:k,onClickConnectEnd:I,nodesDraggable:ln,nodesConnectable:xe,nodesFocusable:be,edgesFocusable:qe,edgesReconnectable:Ve,elementsSelectable:rt,elevateNodesOnSelect:Bc,elevateEdgesOnSelect:Nu,minZoom:ct,maxZoom:Yt,nodeExtent:dr,onNodesChange:cl,onEdgesChange:Xs,snapToGrid:ut,snapGrid:Et,connectionMode:te,translateExtent:Xt,connectOnClick:Lc,defaultEdgeOptions:$c,fitView:eo,fitViewOptions:Dc,onNodesDelete:B,onEdgesDelete:D,onDelete:W,onNodeDragStart:$,onNodeDrag:P,onNodeDragStop:O,onSelectionDrag:X,onSelectionDragStart:z,onSelectionDragStop:Z,onMove:p,onMoveStart:h,onMoveEnd:g,noPanClassName:Fc,nodeOrigin:Ne,rfId:Hi,autoPanOnConnect:Gf,autoPanOnNodeDrag:fr,autoPanSpeed:Kf,onError:dl,connectionRadius:ku,isValidConnection:Wc,selectNodesOnDrag:Gt,nodeDragThreshold:fl,onBeforeDelete:oe,paneClickDistance:yn,debug:Xf}),f.jsx(Sie,{onSelectionChange:V}),qc,f.jsx(bie,{proOptions:Mc,position:Hf}),f.jsx(gie,{rfId:Hi,disableKeyboardA11y:zc})]})})}var p$=WM(Gse);const Kse=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function Qse({children:t}){const e=An(Kse);return e?_m.createPortal(t,e):null}function Jse(t){const[e,n]=H.useState(t),r=H.useCallback(i=>n(s=>CN(i,s)),[]);return[e,n,r]}function Zse(t){const[e,n]=H.useState(t),r=H.useCallback(i=>n(s=>zM(i,s)),[]);return[e,n,r]}function Lv(t){return An(H.useCallback(n=>n.nodeLookup.get(t),[t]),Nr)}function Yse({dimensions:t,lineWidth:e,variant:n,className:r}){return f.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Zr(["react-flow__background-pattern",n,r])})}function Xse({radius:t,className:e}){return f.jsx("circle",{cx:t,cy:t,r:t,className:Zr(["react-flow__background-pattern","dots",e])})}var ha;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ha||(ha={}));const eoe={[ha.Dots]:1,[ha.Lines]:1,[ha.Cross]:6},toe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function h$({id:t,variant:e=ha.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:a,style:u,className:d,patternClassName:p}){const h=H.useRef(null),{transform:g,patternId:x}=An(toe,Nr),_=r||eoe[e],S=e===ha.Dots,k=e===ha.Cross,I=Array.isArray(n)?n:[n,n],E=[I[0]*g[2]||1,I[1]*g[2]||1],C=_*g[2],j=Array.isArray(s)?s:[s,s],q=k?[C,C]:E,F=[j[0]*g[2]||1+q[0]/2,j[1]*g[2]||1+q[1]/2],$=`${x}${t||""}`;return f.jsxs("svg",{className:Zr(["react-flow__background",d]),style:{...u,...Lx,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:h,"data-testid":"rf__background",children:[f.jsx("pattern",{id:$,x:g[0]%E[0],y:g[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`,children:S?f.jsx(Xse,{radius:C/2,className:p}):f.jsx(Yse,{dimensions:q,lineWidth:i,variant:e,className:p})}),f.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${$})`})]})}h$.displayName="Background";const m$=H.memo(h$);function noe(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:f.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function roe(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:f.jsx("path",{d:"M0 0h32v4.2H0z"})})}function ioe(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:f.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function soe(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ooe(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function qy({children:t,className:e,...n}){return f.jsx("button",{type:"button",className:Zr(["react-flow__controls-button",e]),...n,children:t})}const aoe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom});function g$({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:u,className:d,children:p,position:h="bottom-left",orientation:g="vertical","aria-label":x="React Flow controls"}){const _=kr(),{isInteractive:S,minZoomReached:k,maxZoomReached:I}=An(aoe,Nr),{zoomIn:E,zoomOut:C,fitView:j}=Df(),q=()=>{E(),s?.()},F=()=>{C(),o?.()},$=()=>{j(i),a?.()},P=()=>{_.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),u?.(!S)},O=g==="horizontal"?"horizontal":"vertical";return f.jsxs(kN,{className:Zr(["react-flow__controls",O,d]),position:h,style:t,"data-testid":"rf__controls","aria-label":x,children:[e&&f.jsxs(f.Fragment,{children:[f.jsx(qy,{onClick:q,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:I,children:f.jsx(noe,{})}),f.jsx(qy,{onClick:F,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k,children:f.jsx(roe,{})})]}),n&&f.jsx(qy,{className:"react-flow__controls-fitview",onClick:$,title:"fit view","aria-label":"fit view",children:f.jsx(ioe,{})}),r&&f.jsx(qy,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:S?f.jsx(ooe,{}):f.jsx(soe,{})}),p]})}g$.displayName="Controls";const y$=H.memo(g$);function loe({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:u,className:d,borderRadius:p,shapeRendering:h,selected:g,onClick:x}){const{background:_,backgroundColor:S}=s||{},k=o||_||S;return f.jsx("rect",{className:Zr(["react-flow__minimap-node",{selected:g},d]),x:e,y:n,rx:p,ry:p,width:r,height:i,style:{fill:k,stroke:a,strokeWidth:u},shapeRendering:h,onClick:x?I=>x(I,t):void 0})}const uoe=H.memo(loe),coe=t=>t.nodes.map(e=>e.id),dE=t=>t instanceof Function?t:()=>t;function doe({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=uoe,onClick:o}){const a=An(coe,Nr),u=dE(e),d=dE(t),p=dE(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return f.jsx(f.Fragment,{children:a.map(g=>f.jsx(poe,{id:g,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:h},g))})}function foe({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:a,onClick:u}){const{node:d,x:p,y:h,width:g,height:x}=An(_=>{const S=_.nodeLookup.get(t),{x:k,y:I}=S.internals.positionAbsolute,{width:E,height:C}=ll(S);return{node:S,x:k,y:I,width:E,height:C}},Nr);return!d||d.hidden||!xM(d)?null:f.jsx(a,{x:p,y:h,width:g,height:x,style:d.style,selected:!!d.selected,className:r(d),color:e(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const poe=H.memo(foe);var hoe=H.memo(doe);const moe=200,goe=150,yoe=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?bM(Ff(t.nodeLookup),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height}},boe="react-flow__minimap-desc";function b$({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:u,maskColor:d,maskStrokeColor:p,maskStrokeWidth:h,position:g="bottom-right",onClick:x,onNodeClick:_,pannable:S=!1,zoomable:k=!1,ariaLabel:I="React Flow mini map",inversePan:E,zoomStep:C=10,offsetScale:j=5}){const q=kr(),F=H.useRef(null),{boundingRect:$,viewBB:P,rfId:O,panZoom:B,translateExtent:D,flowWidth:W,flowHeight:V}=An(yoe,Nr),z=t?.width??moe,X=t?.height??goe,Z=$.width/z,le=$.height/X,ie=Math.max(Z,le),ne=ie*z,oe=ie*X,te=j*ie,ce=$.x-(ne-$.width)/2-te,de=$.y-(oe-$.height)/2-te,ye=ne+te*2,we=oe+te*2,Ie=`${boe}-${O}`,ze=H.useRef(0),Re=H.useRef();ze.current=ie,H.useEffect(()=>{if(F.current&&B)return Re.current=Ure({domNode:F.current,panZoom:B,getTransform:()=>q.getState().transform,getViewScale:()=>ze.current}),()=>{Re.current?.destroy()}},[B]),H.useEffect(()=>{Re.current?.update({translateExtent:D,width:W,height:V,inversePan:E,pannable:S,zoomStep:C,zoomable:k})},[S,k,E,C,D,W,V]);const De=x?Xe=>{const[Ue,ut]=Re.current?.pointer(Xe)||[0,0];x(Xe,{x:Ue,y:ut})}:void 0,Je=_?H.useCallback((Xe,Ue)=>{const ut=q.getState().nodeLookup.get(Ue);_(Xe,ut)},[]):void 0;return f.jsx(kN,{position:g,style:{...t,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*ie:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:Zr(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:f.jsxs("svg",{width:z,height:X,viewBox:`${ce} ${de} ${ye} ${we}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Ie,ref:F,onClick:De,children:[I&&f.jsx("title",{id:Ie,children:I}),f.jsx(hoe,{onClick:Je,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),f.jsx("path",{className:"react-flow__minimap-mask",d:`M${ce-te},${de-te}h${ye+te*2}v${we+te*2}h${-ye-te*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}b$.displayName="MiniMap";const v$=H.memo(b$);function voe({nodeId:t,position:e,variant:n=kh.Handle,className:r,style:i={},children:s,color:o,minWidth:a=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:g,onResizeStart:x,onResize:_,onResizeEnd:S}){const k=jN(),I=typeof t=="string"?t:k,E=kr(),C=H.useRef(null),j=n===kh.Line?"right":"bottom-right",q=e??j,F=H.useRef(null);H.useEffect(()=>{if(!(!C.current||!I))return F.current||(F.current=sie({domNode:C.current,nodeId:I,getStoreItems:()=>{const{nodeLookup:B,transform:D,snapGrid:W,snapToGrid:V,nodeOrigin:z,domNode:X}=E.getState();return{nodeLookup:B,transform:D,snapGrid:W,snapToGrid:V,nodeOrigin:z,paneDomNode:X}},onChange:(B,D)=>{const{triggerNodeChanges:W,nodeLookup:V,parentLookup:z,nodeOrigin:X}=E.getState(),Z=[],le={x:B.x,y:B.y},ie=V.get(I);if(ie&&ie.expandParent&&ie.parentId){const ne=ie.origin??X,oe=B.width??ie.measured.width,te=B.height??ie.measured.height,ce={id:ie.id,parentId:ie.parentId,rect:{width:oe,height:te,...wM({x:B.x??ie.position.x,y:B.y??ie.position.y},{width:oe,height:te},ie.parentId,V,ne)}},de=NN([ce],V,z,X);Z.push(...de),le.x=B.x?Math.max(ne[0]*oe,B.x):void 0,le.y=B.y?Math.max(ne[1]*te,B.y):void 0}if(le.x!==void 0&&le.y!==void 0){const ne={id:I,type:"position",position:{...le}};Z.push(ne)}if(B.width!==void 0&&B.height!==void 0){const ne={id:I,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:B.width,height:B.height}};Z.push(ne)}for(const ne of D){const oe={...ne,type:"position"};Z.push(oe)}W(Z)},onEnd:()=>{const B={id:I,type:"dimensions",resizing:!1};E.getState().triggerNodeChanges([B])}})),F.current.update({controlPosition:q,boundaries:{minWidth:a,minHeight:u,maxWidth:d,maxHeight:p},keepAspectRatio:h,onResizeStart:x,onResize:_,onResizeEnd:S,shouldResize:g}),()=>{F.current?.destroy()}},[q,a,u,d,p,h,x,_,S,g]);const $=q.split("-"),P=n===kh.Line?"borderColor":"backgroundColor",O=o?{...i,[P]:o}:i;return f.jsx("div",{className:Zr(["react-flow__resize-control","nodrag",...$,n,r]),ref:C,style:O,children:s})}H.memo(voe);const xoe=t=>t.domNode?.querySelector(".react-flow__renderer");function woe({children:t}){const e=An(xoe);return e?_m.createPortal(t,e):null}const _oe=(t,e)=>t?.internals.positionAbsolute.x!==e?.internals.positionAbsolute.x||t?.internals.positionAbsolute.y!==e?.internals.positionAbsolute.y||t?.measured.width!==e?.measured.width||t?.measured.height!==e?.measured.height||t?.selected!==e?.selected||t?.internals.z!==e?.internals.z,Soe=(t,e)=>{if(t.size!==e.size)return!1;for(const[n,r]of t)if(_oe(r,e.get(n)))return!1;return!0},Eoe=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2],selectedNodesCount:t.nodes.filter(e=>e.selected).length});function ON({nodeId:t,children:e,className:n,style:r,isVisible:i,position:s=jt.Top,offset:o=10,align:a="center",...u}){const d=jN(),p=H.useCallback(q=>(Array.isArray(t)?t:[t||d||""]).reduce((P,O)=>{const B=q.nodeLookup.get(O);return B&&P.set(B.id,B),P},new Map),[t,d]),h=An(p,Soe),{x:g,y:x,zoom:_,selectedNodesCount:S}=An(Eoe,Nr);if(!(typeof i=="boolean"?i:h.size===1&&h.values().next().value.selected&&S===1)||!h.size)return null;const I=Ff(h),E=Array.from(h.values()),C=Math.max(...E.map(q=>q.internals.z+1)),j={position:"absolute",transform:jre(I,{x:g,y:x,zoom:_},s,o,a),zIndex:C,...r};return f.jsx(woe,{children:f.jsx("div",{style:j,className:Zr(["react-flow__node-toolbar",n]),...u,"data-id":E.reduce((q,F)=>`${q}${F.id} `,"").trim(),children:e})})}const Mn="icon-[solar--home-outline]",Ioe=["bg-blue-200","bg-blue-400","bg-blue-600","bg-green-200","bg-green-400","bg-green-600","bg-green-600","bg-orange-200","bg-orange-400","bg-orange-600","bg-slate-200","bg-slate-400","bg-slate-600","bg-gray-200","bg-gray-400","bg-gray-600","bg-purple-200","bg-purple-400","bg-purple-600","bg-purple-800"],AN=UY({shape:M.object({name:M.string().min(1),color:M.string().min(1),minWidth:Fo(),maxWidth:Fo(),minHeight:Fo(),maxHeight:Fo(),probability:Fo(),limit:Fo()}),filter:zi}),e3=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(AN.shape),defaultValues:{name:"",color:"slate",minWidth:1,maxWidth:4,minHeight:1,maxHeight:4,limit:32,probability:100,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"name",label:f.jsx(J,{label:"Region name (label)"}),children:f.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),f.jsxs("div",{className:"flex flex-row gap-4 items-center w-full",children:[f.jsx(hn,{formState:s.formState,name:"minWidth",label:f.jsx(J,{label:"Region min width (label)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("minWidth")})}),f.jsx(hn,{formState:s.formState,name:"maxWidth",label:f.jsx(J,{label:"Region max width (label)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("maxWidth")})})]}),f.jsxs("div",{className:"flex flex-row gap-4 items-center w-full",children:[f.jsx(hn,{formState:s.formState,name:"minHeight",label:f.jsx(J,{label:"Region min height (label)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("minHeight")})}),f.jsx(hn,{formState:s.formState,name:"maxHeight",label:f.jsx(J,{label:"Region max height (label)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("maxHeight")})})]}),f.jsx(hn,{formState:s.formState,name:"probability",label:f.jsx(J,{label:"Region spawn probability (label)"}),hint:f.jsx(J,{label:"Region spawn probability (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:.5,max:100,step:.5,...s.register("probability")})}),f.jsx(hn,{formState:s.formState,name:"limit",label:f.jsx(J,{label:"Region limit (label)"}),hint:f.jsx(J,{label:"Region limit (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("limit")})}),f.jsx(hn,{formState:s.formState,name:"color",label:f.jsx(J,{label:"Color (label)"}),children:f.jsx(Mi,{control:s.control,name:"color",render:({field:{ref:a,...u}})=>f.jsx(eN,{items:Ioe.map(d=>({id:d,color:d})),render:({entity:d})=>f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx("div",{className:sn("w-4","h-4",d.color)}),d.color]}),...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:IL,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},zp=Ur(),Noe=[zp({name:"name",header(){return f.jsx(J,{label:"Region name (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsx(St,{to:"/$locale/apps/derivean/root/region/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),zp({name:"width",header(){return f.jsx(J,{label:"Region width (label)"})},render({data:t}){return f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx("div",{children:fn({number:t.minWidth})}),f.jsx("div",{children:f.jsx(tn,{icon:rm,variant:{size:"xs"}})}),f.jsx("div",{children:fn({number:t.maxWidth})})]})},size:16}),zp({name:"height",header(){return f.jsx(J,{label:"Region height (label)"})},render({data:t}){return f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx("div",{children:fn({number:t.minHeight})}),f.jsx("div",{children:f.jsx(tn,{icon:rm,variant:{size:"xs"}})}),f.jsx("div",{children:fn({number:t.maxHeight})})]})},size:12}),zp({name:"probability",header(){return f.jsx(J,{label:"Region probability (label)"})},render({value:t}){return f.jsxs(Di,{children:[fn({number:t}),"%"]})},size:14}),zp({name:"limit",header(){return f.jsx(J,{label:"Region limit (label)"})},render({value:t}){return fn({number:t})},size:18})],x$=({table:t,...e})=>{const n=Fn([["Region"]]);return f.jsx(zr,{table:Wr({...t,columns:Noe}),action:{table(){return f.jsx(ur,{children:f.jsx(Rn,{label:f.jsx(J,{label:"Create region (menu)"}),textTitle:f.jsx(J,{label:"Create region (modal)"}),icon:Sv,children:({close:r})=>f.jsx(e3,{mutation:Jt({async mutationFn(i){return Nt.transaction().execute(async s=>s.insertInto("Region").values({id:wn(),...i}).execute())},async onSuccess(){await n(),r()}})})})})},row({data:r}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit region (modal)"}),icon:Sv,children:({close:i})=>f.jsx(e3,{defaultValues:r,mutation:Jt({async mutationFn(s){return Nt.transaction().execute(async o=>o.updateTable("Region").set(s).where("id","=",r.id).execute())},async onSuccess(){await n(),i()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete region (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async i=>i.deleteFrom("Region").where("id","=",r.id).execute()),textContent:f.jsx(J,{label:"Delete region (content)"}),textToast:"Delete region",invalidator:n})})]})}},...e})},koe=t=>f.jsx(nL,{icon:Sv,table:x$,textTitle:f.jsx(J,{label:"Select regions (title)"}),render:({entities:e})=>f.jsx(hu,{items:e,css:{base:["flex","flex-row","gap-2"]},render:({entity:n})=>f.jsx("div",{className:sn(["p-2","border","border-blue-300","bg-blue-50","rounded-sm"]),children:n.name})}),queryKey:"Region",query:async({filter:e,cursor:n})=>Nt.transaction().execute(async r=>cr({select:r.selectFrom("Region as r").selectAll(),output:AN.entity,query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("r.id","=",s.id)),s?.idIn&&(o=o.where("r.id","in",s.idIn)),s?.fulltext){const a=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("r.id","like",a),u("r.name","like",a)]))}return o},filter:e,cursor:n})),...t}),qN=OY({shape:M.object({name:M.string().min(1),cycles:Fo(),sort:Fo(),limit:Fo(),regionIds:M.array(M.string()).optional()}),filter:zi.merge(M.object({name:M.string().optional()}))}),Mv=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(qN.shape),defaultValues:{cycles:1,sort:0,limit:1,regionIds:[],...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"name",label:f.jsx(J,{label:"Building name (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),f.jsx(hn,{formState:s.formState,name:"cycles",label:f.jsx(J,{label:"Construction cycles (label)"}),hint:f.jsx(J,{label:"Amount of cycles to build this building (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,...s.register("cycles")})}),f.jsx(hn,{formState:s.formState,name:"limit",label:f.jsx(J,{label:"Building limit (label)"}),hint:f.jsx(J,{label:"Maximum number of building a player can build (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,...s.register("limit")})}),f.jsx(hn,{formState:s.formState,name:"sort",label:f.jsx(J,{label:"Blueprint sort (label)"}),hint:f.jsx(J,{label:"Sort blueprints by this number (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:0,...s.register("sort")})}),f.jsx(hn,{formState:s.formState,name:"regionIds",label:f.jsx(J,{label:"Regions (label)"}),children:f.jsx(Mi,{control:s.control,name:"regionIds",render:({field:{ref:a,...u}})=>f.jsx(koe,{...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:Mn,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},Hs="icon-[fluent-mdl2--production-floor-management]",Coe=({id:t,data:e,isConnectable:n})=>{const{locale:r}=Zt({from:"/$locale"}),i=mu();return f.jsxs("div",{className:"min-w-[14rem]",onClick:()=>{i({to:"/$locale/apps/derivean/root/editor",params:{locale:r},search:{zoomTo:t}})},onDoubleClick:()=>{i({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t}})},children:[f.jsx($i,{type:"target",position:jt.Left,className:"w-4 h-4"}),f.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[f.jsx("div",{className:"flex flex-row items-center gap-2",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:f.jsx(St,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t},children:e.name})}),f.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 border bg-slate-50 border-slate-200 rounded-sm w-full p-1",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:[f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsx(St,{icon:Ir,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:r,id:t}}),f.jsx(St,{icon:Hs,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:r,id:t}}),f.jsx(St,{icon:D2,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:r,id:t}})]}),f.jsx("div",{children:f.jsx(Tc,{target:f.jsx(Wm,{iconEnabled:Dr,css:{base:["text-red-500"]}}),outside:!0,textTitle:f.jsx(J,{label:"Delete blueprint (modal)"}),css:{modal:["w-1/3"]},children:()=>{const s=Fn([["Editor"]]);return f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",e.id).execute()),textContent:f.jsx(J,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:s})}})})]})]}),f.jsx($i,{type:"source",position:jt.Right,isConnectable:n,className:"w-4 h-4"})]})},Toe=({nodeId:t})=>{const{fitView:e}=Df();return H.useEffect(()=>{t&&setTimeout(()=>{e({nodes:[{id:t}],duration:750,minZoom:1,maxZoom:1})},50)},[t]),null},joe=({data:t,zoomTo:e})=>{const n=Fn([]),r=Jt({async mutationFn({blueprintId:i,dependencyId:s}){return Nt.transaction().execute(async o=>o.insertInto("Blueprint_Dependency").values({id:wn(),blueprintId:i,dependencyId:s}).execute())},async onSuccess(){await n()}});return f.jsx("div",{className:"w-fit h-fit mx-auto border border-slate-300 rounded-md shadow-md m-8",children:f.jsx("div",{style:{width:"95vw",height:"85vh"},children:f.jsxs(p$,{nodes:t.nodes,edges:t.edges,onConnect:i=>{r.mutate({blueprintId:i.target,dependencyId:i.source})},fitView:!0,snapGrid:[16,16],elementsSelectable:!1,nodeTypes:H.useMemo(()=>({blueprint(i){return f.jsx(Coe,{...i})}}),[]),edgeTypes:H.useMemo(()=>({dependency({id:i,sourceX:s,sourceY:o,targetX:a,targetY:u,sourcePosition:d,targetPosition:p,style:h={},markerEnd:g}){const{setEdges:x}=Df(),[_,S,k]=_N({sourceX:s,sourceY:o,sourcePosition:d,targetX:a,targetY:u,targetPosition:p}),I=Fn([]),E=Jt({async mutationFn({id:C}){return Nt.transaction().execute(async j=>{await j.deleteFrom("Blueprint_Dependency").where("id","=",C).execute()})},async onSuccess(){x(C=>C.filter(j=>j.id!==i)),await I()}});return f.jsxs(f.Fragment,{children:[f.jsx(Zm,{path:_,markerEnd:g,style:h}),f.jsx(Qse,{children:f.jsx("div",{className:sn("nodrag nopan",["flex","items-center","justify-center","cursor-pointer","bg-red-200","text-red-500","border","border-red-300","hover:border-red-600","hover:bg-red-300","hover:text-red-700","rounded-full","w-4","h-4","z-20"]),style:{position:"absolute",pointerEvents:"all",transformOrigin:"center",transform:`translate(-50%, -50%) translate(${S}px,${k}px)`},children:f.jsx(tn,{icon:E.isPending?cJ:Y1,onClick:()=>{E.mutate({id:i})}})})})]})}}),[]),children:[f.jsx(Toe,{nodeId:e}),f.jsx(y$,{orientation:"horizontal",showInteractive:!1,showZoom:!1,children:f.jsx(Tc,{target:f.jsx(Wm,{className:"react-flow__controls-button",iconEnabled:Mn}),outside:!1,textTitle:f.jsx(J,{label:"Create blueprint (modal)"}),css:{modal:["w-1/3"]},children:({close:i})=>{const s=Fn([["Editor"]]),{locale:o}=Zt({from:"/$locale"}),a=mu();return f.jsx(Mv,{mutation:Jt({async mutationFn(u){return qn.promise(Nt.transaction().execute(d=>d.insertInto("Blueprint").values({id:wn(),...u}).returningAll().executeTakeFirstOrThrow()),si("Create blueprint"))},async onSuccess(u){await s(),a({to:"/$locale/apps/derivean/root/editor",params:{locale:o},search:{zoomTo:u.id}}),i()}})})}})}),f.jsx(v$,{}),f.jsx(m$,{variant:ha.Dots,gap:12,size:1})]})})})},Roe=({graph:t,nodes:e,edges:n,size:r={width:344,height:36}})=>(t.setGraph({rankdir:"LR",nodesep:125,edgesep:65,ranksep:50}),e.forEach(i=>{t.setNode(i.id,{width:r.width,height:r.height})}),n.forEach(i=>{t.setEdge(i.source,i.target)}),AL.layout(t,{}),{nodes:e.map(i=>{const s=t.node(i.id);return{...i,targetPosition:"left",sourcePosition:"right",position:{x:s.x-r.width/2,y:s.y-r.height/2}}}),edges:n}),HI=Mt("/$locale/apps/derivean/root/editor")({validateSearch:yr(M.object({zoomTo:M.string().optional()})),async loader({context:{kysely:t}}){const e=(await t.selectFrom("Blueprint").select(["id","name","cycles","sort"]).execute()).map(r=>({id:r.id,position:{x:0,y:0},data:r,type:"blueprint"})),n=(await t.selectFrom("Blueprint_Dependency").select(["id","blueprintId","dependencyId"]).execute()).map(({id:r,blueprintId:i,dependencyId:s})=>({id:r,source:s,target:i,type:"dependency"}));return Roe({graph:new AL.graphlib.Graph().setDefaultEdgeLabel(()=>({})),nodes:[...e],edges:[...n]})},component(){const t=HI.useLoaderData(),{zoomTo:e}=HI.useSearch();return f.jsx(joe,{data:t,zoomTo:e})}}),Ooe=()=>Jt({mutationKey:["useRegisterMutation"],async mutationFn({login:t,name:e,password1:n}){return Nt.transaction().execute(async r=>Um.parse(await r.insertInto("User").values({id:wn(),name:e,login:t,password:AD.hash(n)}).returning(["User.id","User.name","User.login"]).executeTakeFirstOrThrow()))}}),Aoe=M.object({name:M.string().min(1),login:M.string().min(1),password1:M.string().min(1),password2:M.string().min(1)}).refine(t=>t.password1===t.password2,{message:"Passwords must match",path:["password1"]}),qoe=({onSuccess:t})=>{const e=Ooe(),n=yi({resolver:bi(Aoe)}),r=gi({isLoading:n.formState.isLoading,isSubmitting:n.formState.isSubmitting}).slots;return f.jsxs("form",{className:r.base(),onSubmit:n.handleSubmit(async i=>e.mutateAsync(i,{onSuccess:t,onError:s=>{P1({error:s,errors:[h1({error:s,schema:q1,onError:({data:o})=>{n.setError("root",{message:o.message})}})],onError:o=>{n.setError("root",{message:o.message})}})}}).catch(()=>{})),children:[f.jsx(di,{variant:{highlight:!0},error:n.formState.errors.root}),f.jsx(hn,{formState:n.formState,name:"name",label:f.jsx(J,{label:"Name (label)"}),children:f.jsx("input",{type:"text",className:r.input(),...n.register("name")})}),f.jsx(hn,{formState:n.formState,name:"login",label:f.jsx(J,{label:"Login (label)"}),children:f.jsx("input",{type:"text",className:r.input(),...n.register("login")})}),f.jsx(hn,{formState:n.formState,name:"password1",label:f.jsx(J,{label:"Password 1 (label)"}),children:f.jsx("input",{type:"password",className:r.input(),...n.register("password1")})}),f.jsx(hn,{formState:n.formState,name:"password2",label:f.jsx(J,{label:"Password 2 (label)"}),children:f.jsx("input",{type:"password",className:r.input(),...n.register("password2")})}),f.jsx(cn,{iconEnabled:"icon-[mdi--register-outline]",iconDisabled:"icon-[mdi--register-outline]",type:"submit",children:f.jsx(J,{label:"Register (submit)"})})]})},Poe=Mt("/$locale/apps/derivean/public/register")({component:()=>{const t=mu();return f.jsx("div",{className:sn(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:f.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[f.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),f.jsx(qoe,{onSuccess:async e=>{Of.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),Foe=Mt("/$locale/apps/derivean/public/logout")({pendingComponent(){return f.jsx("div",{className:sn(["flex items-center justify-center h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:f.jsx(iL,{icon:rN,textTitle:f.jsx(J,{label:"Logout (label)"}),textMessage:f.jsx(J,{label:"Logout in progress..."}),css:{base:["p-4","bg-slate-200","rounded-sm"]}})})},async loader({params:{locale:t}}){throw Of.remove("session"),wm({to:"/$locale/apps/derivean/public/login",params:{locale:t}})}}),Doe=()=>Jt({mutationKey:["useLoginMutation"],async mutationFn({login:t,password:e}){return Nt.transaction().execute(async n=>{const r=await n.selectFrom("User as u").select(["u.id","u.login","u.name"]).where("u.login","=",t).where("u.password","=",AD.hash(e)).executeTakeFirstOrThrow();return{id:r.id,login:r.login,name:r.name}})}}),Loe=M.object({login:M.string().min(1),password:M.string().min(1)}),Moe=({onSuccess:t})=>{const{locale:e}=Zt({from:"/$locale"}),n=Doe(),r=yi({resolver:bi(Loe)}),i=gi({isLoading:r.formState.isLoading,isSubmitting:r.formState.isSubmitting}).slots;return f.jsxs("form",{className:i.base(),onSubmit:r.handleSubmit(async s=>n.mutateAsync(s,{onSuccess:t,onError:o=>{P1({error:o,errors:[h1({error:o,schema:q1,onError:({data:a})=>{r.setError("root",{message:a.message})}})],onError:a=>{r.setError("root",{message:a.message})}})}}).catch(()=>{})),children:[f.jsx(di,{variant:{highlight:!0},error:r.formState.errors.root}),f.jsx(hn,{formState:r.formState,name:"login",label:f.jsx(J,{label:"Login (label)"}),children:f.jsx("input",{type:"text",className:i.input(),...r.register("login")})}),f.jsx(hn,{formState:r.formState,name:"password",label:f.jsx(J,{label:"Password (label)"}),children:f.jsx("input",{type:"password",className:i.input(),...r.register("password")})}),f.jsxs("div",{className:"flex flex-row justify-between gap-8",children:[f.jsx(St,{icon:"icon-[mdi--register-outline]",to:"/$locale/apps/derivean/public/register",params:{locale:e},children:f.jsx(J,{label:"Register (link)"})}),f.jsx(cn,{iconEnabled:"icon-[uiw--login]",iconDisabled:"icon-[uiw--login]",type:"submit",children:f.jsx(J,{label:"Login (submit)"})})]})]})},$oe=Mt("/$locale/apps/derivean/public/login")({component:()=>{const t=mu();return f.jsx("div",{className:sn(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:f.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[f.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),f.jsx(Moe,{onSuccess:async e=>{Of.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}});var Py={exports:{}},t3;function Boe(){if(t3)return Py.exports;t3=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(q,F,$){return Function.prototype.apply.call(q,F,$)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(q){return Object.getOwnPropertyNames(q).concat(Object.getOwnPropertySymbols(q))}:n=function(q){return Object.getOwnPropertyNames(q)};function r(j){console&&console.warn&&console.warn(j)}var i=Number.isNaN||function(q){return q!==q};function s(){s.init.call(this)}Py.exports=s,Py.exports.once=I,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(j){if(typeof j!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(j){if(typeof j!="number"||j<0||i(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");o=j}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(q){if(typeof q!="number"||q<0||i(q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+q+".");return this._maxListeners=q,this};function u(j){return j._maxListeners===void 0?s.defaultMaxListeners:j._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(q){for(var F=[],$=1;$<arguments.length;$++)F.push(arguments[$]);var P=q==="error",O=this._events;if(O!==void 0)P=P&&O.error===void 0;else if(!P)return!1;if(P){var B;if(F.length>0&&(B=F[0]),B instanceof Error)throw B;var D=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw D.context=B,D}var W=O[q];if(W===void 0)return!1;if(typeof W=="function")e(W,this,F);else for(var V=W.length,z=_(W,V),$=0;$<V;++$)e(z[$],this,F);return!0};function d(j,q,F,$){var P,O,B;if(a(F),O=j._events,O===void 0?(O=j._events=Object.create(null),j._eventsCount=0):(O.newListener!==void 0&&(j.emit("newListener",q,F.listener?F.listener:F),O=j._events),B=O[q]),B===void 0)B=O[q]=F,++j._eventsCount;else if(typeof B=="function"?B=O[q]=$?[F,B]:[B,F]:$?B.unshift(F):B.push(F),P=u(j),P>0&&B.length>P&&!B.warned){B.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=j,D.type=q,D.count=B.length,r(D)}return j}s.prototype.addListener=function(q,F){return d(this,q,F,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(q,F){return d(this,q,F,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(j,q,F){var $={fired:!1,wrapFn:void 0,target:j,type:q,listener:F},P=p.bind($);return P.listener=F,$.wrapFn=P,P}s.prototype.once=function(q,F){return a(F),this.on(q,h(this,q,F)),this},s.prototype.prependOnceListener=function(q,F){return a(F),this.prependListener(q,h(this,q,F)),this},s.prototype.removeListener=function(q,F){var $,P,O,B,D;if(a(F),P=this._events,P===void 0)return this;if($=P[q],$===void 0)return this;if($===F||$.listener===F)--this._eventsCount===0?this._events=Object.create(null):(delete P[q],P.removeListener&&this.emit("removeListener",q,$.listener||F));else if(typeof $!="function"){for(O=-1,B=$.length-1;B>=0;B--)if($[B]===F||$[B].listener===F){D=$[B].listener,O=B;break}if(O<0)return this;O===0?$.shift():S($,O),$.length===1&&(P[q]=$[0]),P.removeListener!==void 0&&this.emit("removeListener",q,D||F)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(q){var F,$,P;if($=this._events,$===void 0)return this;if($.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):$[q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete $[q]),this;if(arguments.length===0){var O=Object.keys($),B;for(P=0;P<O.length;++P)B=O[P],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(F=$[q],typeof F=="function")this.removeListener(q,F);else if(F!==void 0)for(P=F.length-1;P>=0;P--)this.removeListener(q,F[P]);return this};function g(j,q,F){var $=j._events;if($===void 0)return[];var P=$[q];return P===void 0?[]:typeof P=="function"?F?[P.listener||P]:[P]:F?k(P):_(P,P.length)}s.prototype.listeners=function(q){return g(this,q,!0)},s.prototype.rawListeners=function(q){return g(this,q,!1)},s.listenerCount=function(j,q){return typeof j.listenerCount=="function"?j.listenerCount(q):x.call(j,q)},s.prototype.listenerCount=x;function x(j){var q=this._events;if(q!==void 0){var F=q[j];if(typeof F=="function")return 1;if(F!==void 0)return F.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function _(j,q){for(var F=new Array(q),$=0;$<q;++$)F[$]=j[$];return F}function S(j,q){for(;q+1<j.length;q++)j[q]=j[q+1];j.pop()}function k(j){for(var q=new Array(j.length),F=0;F<q.length;++F)q[F]=j[F].listener||j[F];return q}function I(j,q){return new Promise(function(F,$){function P(B){j.removeListener(q,O),$(B)}function O(){typeof j.removeListener=="function"&&j.removeListener("error",P),F([].slice.call(arguments))}C(j,q,O,{once:!0}),q!=="error"&&E(j,P,{once:!0})})}function E(j,q,F){typeof j.on=="function"&&C(j,"error",q,F)}function C(j,q,F,$){if(typeof j.on=="function")$.once?j.once(q,F):j.on(q,F);else if(typeof j.addEventListener=="function")j.addEventListener(q,function P(O){$.once&&j.removeEventListener(q,P),F(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j)}return Py.exports}var zoe=Boe();function Woe(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let ui=Woe;typeof Object.assign=="function"&&(ui=Object.assign);function vo(t,e,n,r){const i=t._nodes.get(e);let s=null;return i&&(r==="mixed"?s=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?s=i.out&&i.out[n]:s=i.undirected&&i.undirected[n]),s}function Ii(t){return typeof t=="object"&&t!==null}function w$(t){let e;for(e in t)return!1;return!0}function uo(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Ro(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function n3(t){return!(!Ii(t)||t.attributes&&!Array.isArray(t.attributes))}function Uoe(){let t=Math.floor(Math.random()*256)&255;return()=>t++}function Ya(){const t=arguments;let e=null,n=-1;return{[Symbol.iterator](){return this},next(){let r=null;do{if(e===null){if(n++,n>=t.length)return{done:!0};e=t[n][Symbol.iterator]()}if(r=e.next(),r.done){e=null;continue}break}while(!0);return r}}}function Lf(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class PN extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class Ft extends PN{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ft.prototype.constructor)}}class xt extends PN{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,xt.prototype.constructor)}}class un extends PN{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,un.prototype.constructor)}}function _$(t,e){this.key=t,this.attributes=e,this.clear()}_$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function S$(t,e){this.key=t,this.attributes=e,this.clear()}S$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function E$(t,e){this.key=t,this.attributes=e,this.clear()}E$.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Mf(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}Mf.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};Mf.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],s=i[r];if(typeof s>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}s.previous=this,this.next=s,i[r]=this,this.target[e][n]=this};Mf.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};Mf.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const I$=0,N$=1,Voe=2,k$=3;function ul(t,e,n,r,i,s,o){let a,u,d,p;if(r=""+r,n===I$){if(a=t._nodes.get(r),!a)throw new xt(`Graph.${e}: could not find the "${r}" node in the graph.`);d=i,p=s}else if(n===k$){if(i=""+i,u=t._edges.get(i),!u)throw new xt(`Graph.${e}: could not find the "${i}" edge in the graph.`);const h=u.source.key,g=u.target.key;if(r===h)a=u.target;else if(r===g)a=u.source;else throw new xt(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${h}, ${g}).`);d=s,p=o}else{if(u=t._edges.get(r),!u)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===N$?a=u.source:a=u.target,d=i,p=s}return[a,d,p]}function Hoe(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=ul(this,e,n,r,i,s);return o.attributes[a]}}function Goe(t,e,n){t.prototype[e]=function(r,i){const[s]=ul(this,e,n,r,i);return s.attributes}}function Koe(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=ul(this,e,n,r,i,s);return o.attributes.hasOwnProperty(a)}}function Qoe(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,u,d]=ul(this,e,n,r,i,s,o);return a.attributes[u]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:u}),this}}function Joe(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,u,d]=ul(this,e,n,r,i,s,o);if(typeof d!="function")throw new Ft(`Graph.${e}: updater should be a function.`);const p=a.attributes,h=d(p[u]);return p[u]=h,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:u}),this}}function Zoe(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=ul(this,e,n,r,i,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Yoe(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=ul(this,e,n,r,i,s);if(!Ii(a))throw new Ft(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Xoe(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=ul(this,e,n,r,i,s);if(!Ii(a))throw new Ft(`Graph.${e}: provided attributes are not a plain object.`);return ui(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function eae(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=ul(this,e,n,r,i,s);if(typeof a!="function")throw new Ft(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const tae=[{name:t=>`get${t}Attribute`,attacher:Hoe},{name:t=>`get${t}Attributes`,attacher:Goe},{name:t=>`has${t}Attribute`,attacher:Koe},{name:t=>`set${t}Attribute`,attacher:Qoe},{name:t=>`update${t}Attribute`,attacher:Joe},{name:t=>`remove${t}Attribute`,attacher:Zoe},{name:t=>`replace${t}Attributes`,attacher:Yoe},{name:t=>`merge${t}Attributes`,attacher:Xoe},{name:t=>`update${t}Attributes`,attacher:eae}];function nae(t){tae.forEach(function({name:e,attacher:n}){n(t,e("Node"),I$),n(t,e("Source"),N$),n(t,e("Target"),Voe),n(t,e("Opposite"),k$)})}function rae(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new un(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new un(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=vo(this,o,a,n),!s)throw new xt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new un(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]}}function iae(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new un(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new un(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,o=""+arguments[1];if(i=vo(this,s,o,n),!i)throw new xt(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new un(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function sae(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new un(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new un(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=vo(this,o,a,n),!s)throw new xt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new un(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes.hasOwnProperty(i)}}function oae(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new un(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new un(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,u=""+i;if(i=arguments[2],s=arguments[3],o=vo(this,a,u,n),!o)throw new xt(`Graph.${e}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if(n!=="mixed")throw new un(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function aae(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new un(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new un(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,u=""+i;if(i=arguments[2],s=arguments[3],o=vo(this,a,u,n),!o)throw new xt(`Graph.${e}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if(n!=="mixed")throw new un(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof s!="function")throw new Ft(`Graph.${e}: updater should be a function.`);return o.attributes[i]=s(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function lae(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new un(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new un(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=vo(this,o,a,n),!s)throw new xt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new un(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete s.attributes[i],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:i}),this}}function uae(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new un(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new un(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=vo(this,o,a,n),!s)throw new xt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new un(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Ii(i))throw new Ft(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=i,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function cae(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new un(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new un(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=vo(this,o,a,n),!s)throw new xt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new un(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Ii(i))throw new Ft(`Graph.${e}: provided attributes are not a plain object.`);return ui(s.attributes,i),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:i}),this}}function dae(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new un(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new un(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=vo(this,o,a,n),!s)throw new xt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new un(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new Ft(`Graph.${e}: provided updater is not a function.`);return s.attributes=i(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const fae=[{name:t=>`get${t}Attribute`,attacher:rae},{name:t=>`get${t}Attributes`,attacher:iae},{name:t=>`has${t}Attribute`,attacher:sae},{name:t=>`set${t}Attribute`,attacher:oae},{name:t=>`update${t}Attribute`,attacher:aae},{name:t=>`remove${t}Attribute`,attacher:lae},{name:t=>`replace${t}Attributes`,attacher:uae},{name:t=>`merge${t}Attributes`,attacher:cae},{name:t=>`update${t}Attributes`,attacher:dae}];function pae(t){fae.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const hae=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function mae(t,e,n,r){let i=!1;for(const s in e){if(s===r)continue;const o=e[s];if(i=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&i)return o.key}}function gae(t,e,n,r){let i,s,o,a=!1;for(const u in e)if(u!==r){i=e[u];do{if(s=i.source,o=i.target,a=n(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function fE(t,e){const n=Object.keys(t),r=n.length;let i,s=0;return{[Symbol.iterator](){return this},next(){do if(i)i=i.next;else{if(s>=r)return{done:!0};const o=n[s++];if(o===e){i=void 0;continue}i=t[o]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}}}}function yae(t,e,n,r){const i=e[n];if(!i)return;const s=i.source,o=i.target;if(r(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected)&&t)return i.key}function bae(t,e,n,r){let i=e[n];if(!i)return;let s=!1;do{if(s=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}function pE(t,e){let n=t[e];if(n.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}};let r=!1;return{[Symbol.iterator](){return this},next(){return r===!0?{done:!0}:(r=!0,{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}})}}}function vae(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return Array.from(t._edges.keys());const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",s=t._edges.values();let o=0,a,u;for(;a=s.next(),a.done!==!0;)u=a.value,u.undirected===i&&(r[o++]=u.key);return r}function C$(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,u=!1;const d=e._edges.values();for(;o=d.next(),o.done!==!0;){if(a=o.value,i&&a.undirected!==s)continue;const{key:p,attributes:h,source:g,target:x}=a;if(u=r(p,h,g.key,x.key,g.attributes,x.attributes,a.undirected),t&&u)return p}}function xae(t,e){if(t.size===0)return Lf();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return{[Symbol.iterator](){return this},next(){let s,o;for(;;){if(s=i.next(),s.done)return s;if(o=s.value,!(n&&o.undirected!==r))break}return{value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected},done:!1}}}}function FN(t,e,n,r,i,s){const o=e?gae:mae;let a;if(n!=="undirected"&&(r!=="out"&&(a=o(t,i.in,s),t&&a)||r!=="in"&&(a=o(t,i.out,s,r?void 0:i.key),t&&a))||n!=="directed"&&(a=o(t,i.undirected,s),t&&a))return a}function wae(t,e,n,r){const i=[];return FN(!1,t,e,n,r,function(s){i.push(s)}),i}function _ae(t,e,n){let r=Lf();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=Ya(r,fE(n.in))),e!=="in"&&typeof n.out<"u"&&(r=Ya(r,fE(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=Ya(r,fE(n.undirected))),r}function DN(t,e,n,r,i,s,o){const a=n?bae:yae;let u;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(u=a(t,i.in,s,o),t&&u)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==s)&&(u=a(t,i.out,s,o),t&&u))||e!=="directed"&&typeof i.undirected<"u"&&(u=a(t,i.undirected,s,o),t&&u))return u}function Sae(t,e,n,r,i){const s=[];return DN(!1,t,e,n,r,i,function(o){s.push(o)}),s}function Eae(t,e,n,r){let i=Lf();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=Ya(i,pE(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=Ya(i,pE(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Ya(i,pE(n.undirected,r))),i}function Iae(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return vae(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new xt(`Graph.${n}: could not find the "${s}" node in the graph.`);return wae(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new xt(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new xt(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return Sae(r,this.multi,i,a,o)}throw new Ft(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Nae(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(d,p,h){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return h=d,C$(!1,this,r,h);if(arguments.length===2){d=""+d,h=p;const g=this._nodes.get(d);if(typeof g>"u")throw new xt(`Graph.${s}: could not find the "${d}" node in the graph.`);return FN(!1,this.multi,r==="mixed"?this.type:r,i,g,h)}if(arguments.length===3){d=""+d,p=""+p;const g=this._nodes.get(d);if(!g)throw new xt(`Graph.${s}:  could not find the "${d}" source node in the graph.`);if(!this._nodes.has(p))throw new xt(`Graph.${s}:  could not find the "${p}" target node in the graph.`);return DN(!1,r,this.multi,i,g,p,h)}throw new Ft(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop();let h;if(d.length===0){let g=0;r!=="directed"&&(g+=this.undirectedSize),r!=="undirected"&&(g+=this.directedSize),h=new Array(g);let x=0;d.push((_,S,k,I,E,C,j)=>{h[x++]=p(_,S,k,I,E,C,j)})}else h=[],d.push((g,x,_,S,k,I,E)=>{h.push(p(g,x,_,S,k,I,E))});return this[s].apply(this,d),h};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop(),h=[];return d.push((g,x,_,S,k,I,E)=>{p(g,x,_,S,k,I,E)&&h.push(g)}),this[s].apply(this,d),h};const u="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[u]=function(){let d=Array.prototype.slice.call(arguments);if(d.length<2||d.length>4)throw new Ft(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${d.length}).`);if(typeof d[d.length-1]=="function"&&typeof d[d.length-2]!="function")throw new Ft(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let p,h;d.length===2?(p=d[0],h=d[1],d=[]):d.length===3?(p=d[1],h=d[2],d=[d[0]]):d.length===4&&(p=d[2],h=d[3],d=[d[0],d[1]]);let g=h;return d.push((x,_,S,k,I,E,C)=>{g=p(g,x,_,S,k,I,E,C)}),this[s].apply(this,d),g}}function kae(t,e){const{name:n,type:r,direction:i}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return p=u,C$(!0,this,r,p);if(arguments.length===2){u=""+u,p=d;const h=this._nodes.get(u);if(typeof h>"u")throw new xt(`Graph.${s}: could not find the "${u}" node in the graph.`);return FN(!0,this.multi,r==="mixed"?this.type:r,i,h,p)}if(arguments.length===3){u=""+u,d=""+d;const h=this._nodes.get(u);if(!h)throw new xt(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(d))throw new xt(`Graph.${s}:  could not find the "${d}" target node in the graph.`);return DN(!0,r,this.multi,i,h,d,p)}throw new Ft(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),d=u.pop();return u.push((h,g,x,_,S,k,I)=>d(h,g,x,_,S,k,I)),!!this[s].apply(this,u)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),d=u.pop();return u.push((h,g,x,_,S,k,I)=>!d(h,g,x,_,S,k,I)),!this[s].apply(this,u)}}function Cae(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Lf();if(!arguments.length)return xae(this,r);if(arguments.length===1){o=""+o;const u=this._nodes.get(o);if(!u)throw new xt(`Graph.${s}: could not find the "${o}" node in the graph.`);return _ae(r,i,u)}if(arguments.length===2){o=""+o,a=""+a;const u=this._nodes.get(o);if(!u)throw new xt(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new xt(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Eae(r,i,u,a)}throw new Ft(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Tae(t){hae.forEach(e=>{Iae(t,e),Nae(t,e),kae(t,e),Cae(t,e)})}const jae=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Mx(){this.A=null,this.B=null}Mx.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Mx.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Wp(t,e,n,r,i){for(const s in r){const o=r[s],a=o.source,u=o.target,d=a===n?u:a;if(e&&e.has(d.key))continue;const p=i(d.key,d.attributes);if(t&&p)return d.key}}function LN(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return Wp(t,null,r,r.undirected,i);if(typeof n=="string")return Wp(t,null,r,r[n],i)}const s=new Mx;let o;if(e!=="undirected"){if(n!=="out"){if(o=Wp(t,null,r,r.in,i),t&&o)return o;s.wrap(r.in)}if(n!=="in"){if(o=Wp(t,s,r,r.out,i),t&&o)return o;s.wrap(r.out)}}if(e!=="directed"&&(o=Wp(t,s,r,r.undirected,i),t&&o))return o}function Rae(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return LN(!1,t,e,n,function(i){r.push(i)}),r}function Up(t,e,n){const r=Object.keys(n),i=r.length;let s=0;return{[Symbol.iterator](){return this},next(){let o=null;do{if(s>=i)return t&&t.wrap(n),{done:!0};const a=n[r[s++]],u=a.source,d=a.target;if(o=u===e?d:u,t&&t.has(o.key)){o=null;continue}}while(o===null);return{done:!1,value:{neighbor:o.key,attributes:o.attributes}}}}}function Oae(t,e,n){if(t!=="mixed"){if(t==="undirected")return Up(null,n,n.undirected);if(typeof e=="string")return Up(null,n,n[e])}let r=Lf();const i=new Mx;return t!=="undirected"&&(e!=="out"&&(r=Ya(r,Up(i,n,n.in))),e!=="in"&&(r=Ya(r,Up(i,n,n.out)))),t!=="directed"&&(r=Ya(r,Up(i,n,n.undirected))),r}function Aae(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new xt(`Graph.${n}: could not find the "${s}" node in the graph.`);return Rae(r==="mixed"?this.type:r,i,o)}}function qae(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;d=""+d;const h=this._nodes.get(d);if(typeof h>"u")throw new xt(`Graph.${s}: could not find the "${d}" node in the graph.`);LN(!1,r==="mixed"?this.type:r,i,h,p)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(d,p){const h=[];return this[s](d,(g,x)=>{h.push(p(g,x))}),h};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(d,p){const h=[];return this[s](d,(g,x)=>{p(g,x)&&h.push(g)}),h};const u="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[u]=function(d,p,h){if(arguments.length<3)throw new Ft(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let g=h;return this[s](d,(x,_)=>{g=p(g,x,_)}),g}}function Pae(t,e){const{name:n,type:r,direction:i}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;d=""+d;const h=this._nodes.get(d);if(typeof h>"u")throw new xt(`Graph.${o}: could not find the "${d}" node in the graph.`);return LN(!0,r==="mixed"?this.type:r,i,h,p)};const a="some"+s;t.prototype[a]=function(d,p){return!!this[o](d,p)};const u="every"+s;t.prototype[u]=function(d,p){return!this[o](d,(g,x)=>!p(g,x))}}function Fae(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Lf();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new xt(`Graph.${s}: could not find the "${o}" node in the graph.`);return Oae(r==="mixed"?this.type:r,i,a)}}function Dae(t){jae.forEach(e=>{Aae(t,e),qae(t,e),Pae(t,e),Fae(t,e)})}function Fy(t,e,n,r,i){const s=r._nodes.values(),o=r.type;let a,u,d,p,h,g;for(;a=s.next(),a.done!==!0;){let x=!1;if(u=a.value,o!=="undirected"){p=u.out;for(d in p){h=p[d];do g=h.target,x=!0,i(u.key,g.key,u.attributes,g.attributes,h.key,h.attributes,h.undirected),h=h.next;while(h)}}if(o!=="directed"){p=u.undirected;for(d in p)if(!(e&&u.key>d)){h=p[d];do g=h.target,g.key!==d&&(g=h.source),x=!0,i(u.key,g.key,u.attributes,g.attributes,h.key,h.attributes,h.undirected),h=h.next;while(h)}}n&&!x&&i(u.key,null,u.attributes,null,null,null,null)}}function Lae(t,e){const n={key:t};return w$(e.attributes)||(n.attributes=ui({},e.attributes)),n}function Mae(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return w$(n.attributes)||(r.attributes=ui({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function $ae(t){if(!Ii(t))throw new Ft('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new Ft("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Ii(t.attributes)||t.attributes===null))throw new Ft("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Bae(t){if(!Ii(t))throw new Ft('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new Ft("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new Ft("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Ii(t.attributes)||t.attributes===null))throw new Ft("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new Ft("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const zae=Uoe(),Wae=new Set(["directed","undirected","mixed"]),r3=new Set(["domain","_events","_eventsCount","_maxListeners"]),Uae=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Vae={allowSelfLoops:!0,multi:!1,type:"mixed"};function Hae(t,e,n){if(n&&!Ii(n))throw new Ft(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new un(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function i3(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function T$(t,e,n,r,i,s,o,a){if(!r&&t.type==="undirected")throw new un(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new un(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Ii(a))throw new Ft(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new un(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=t._nodes.get(s),d=t._nodes.get(o);if(!u)throw new xt(`Graph.${e}: source node "${s}" not found.`);if(!d)throw new xt(`Graph.${e}: target node "${o}" not found.`);const p={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new un(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof u.undirected[o]<"u":typeof u.out[o]<"u"))throw new un(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const h=new Mf(r,i,u,d,a);t._edges.set(i,h);const g=s===o;return r?(u.undirectedDegree++,d.undirectedDegree++,g&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,g&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),r?t._undirectedSize++:t._directedSize++,p.key=i,t.emit("edgeAdded",p),i}function Gae(t,e,n,r,i,s,o,a,u){if(!r&&t.type==="undirected")throw new un(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new un(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(u){if(typeof a!="function")throw new Ft(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Ii(a))throw new Ft(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let d;if(u&&(d=a,a=void 0),!t.allowSelfLoops&&s===o)throw new un(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let p=t._nodes.get(s),h=t._nodes.get(o),g,x;if(!n&&(g=t._edges.get(i),g)){if((g.source.key!==s||g.target.key!==o)&&(!r||g.source.key!==o||g.target.key!==s))throw new un(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${s}" source & "${o}" target vs. ("${g.source.key}", "${g.target.key}").`);x=g}if(!x&&!t.multi&&p&&(x=r?p.undirected[o]:p.out[o]),x){const E=[x.key,!1,!1,!1];if(u?!d:!a)return E;if(u){const C=x.attributes;x.attributes=d(C),t.emit("edgeAttributesUpdated",{type:"replace",key:x.key,attributes:x.attributes})}else ui(x.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:x.key,attributes:x.attributes,data:a});return E}a=a||{},u&&d&&(a=d(a));const _={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new un(`Graph.${e}: the "${i}" edge already exists in the graph.`);let S=!1,k=!1;p||(p=i3(t,s,{}),S=!0,s===o&&(h=p,k=!0)),h||(h=i3(t,o,{}),k=!0),g=new Mf(r,i,p,h,a),t._edges.set(i,g);const I=s===o;return r?(p.undirectedDegree++,h.undirectedDegree++,I&&(p.undirectedLoops++,t._undirectedSelfLoopCount++)):(p.outDegree++,h.inDegree++,I&&(p.directedLoops++,t._directedSelfLoopCount++)),t.multi?g.attachMulti():g.attach(),r?t._undirectedSize++:t._directedSize++,_.key=i,t.emit("edgeAdded",_),[i,!0,S,k]}function bd(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,s=e.undirected,o=n===r;s?(n.undirectedDegree--,r.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:s})}class er extends zoe.EventEmitter{constructor(e){if(super(),e=ui({},Vae,e),typeof e.multi!="boolean")throw new Ft(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Wae.has(e.type))throw new Ft(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new Ft(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?_$:e.type==="directed"?S$:E$;uo(this,"NodeDataClass",n);const r="geid_"+zae()+"_";let i=0;const s=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};uo(this,"_attributes",{}),uo(this,"_nodes",new Map),uo(this,"_edges",new Map),uo(this,"_directedSize",0),uo(this,"_undirectedSize",0),uo(this,"_directedSelfLoopCount",0),uo(this,"_undirectedSelfLoopCount",0),uo(this,"_edgeKeyGenerator",s),uo(this,"_options",e),r3.forEach(o=>uo(this,o,this[o])),Ro(this,"order",()=>this._nodes.size),Ro(this,"size",()=>this._edges.size),Ro(this,"directedSize",()=>this._directedSize),Ro(this,"undirectedSize",()=>this._undirectedSize),Ro(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Ro(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Ro(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Ro(this,"multi",this._options.multi),Ro(this,"type",this._options.type),Ro(this,"allowSelfLoops",this._options.allowSelfLoops),Ro(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new Ft(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new Ft(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new Ft(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new un("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new xt(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new xt(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new un("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new xt(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new xt(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new un("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new xt(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new xt(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new xt(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new xt(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new xt(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,s=r.target.key;if(e===i)return s;if(e===s)return i;throw new xt(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new xt(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new xt(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new xt(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new xt(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Hae(this,e,n).key}mergeNode(e,n){if(n&&!Ii(n))throw new Ft(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(ui(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new Ft(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const s=r.attributes;r.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do bd(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do bd(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do bd(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=vo(this,r,i,this.type),!n)throw new xt(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new xt(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return bd(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new un("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new un("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=vo(this,e,n,"directed");if(!r)throw new xt(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return bd(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new un("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new un("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=vo(this,e,n,"undirected");if(!r)throw new xt(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return bd(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new Ft("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Ii(e))throw new Ft("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Ii(e))throw new Ft("Graph.mergeAttributes: provided attributes are not a plain object.");return ui(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new Ft("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new Ft("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!n3(n))throw new Ft("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new Ft("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!n3(n))throw new Ft("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,s,o,a;for(;i=r.next(),i.done!==!0;)s=i.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new Ft("Graph.forEachAdjacencyEntry: expecting a callback.");Fy(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ft("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Fy(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new Ft("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Fy(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ft("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Fy(!1,!0,!0,this,e)}nodes(){return Array.from(this._nodes.keys())}forEachNode(e){if(typeof e!="function")throw new Ft("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new Ft("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new Ft("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const s=new Array(this.order);let o=0;for(;r=n.next(),r.done!==!0;)i=r.value,s[o++]=e(i.key,i.attributes);return s}someNode(e){if(typeof e!="function")throw new Ft("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new Ft("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new Ft("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const s=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&s.push(i.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new Ft("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Ft("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let s,o;for(;s=i.next(),s.done!==!0;)o=s.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return{[Symbol.iterator](){return this},next(){const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}}}}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,s)=>{e[n++]=Lae(s,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,s)=>{r[n++]=Mae(this.type,s,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof er)return e.forEachNode((u,d)=>{n?this.mergeNode(u,d):this.addNode(u,d)}),e.forEachEdge((u,d,p,h,g,x,_)=>{n?_?this.mergeUndirectedEdgeWithKey(u,p,h,d):this.mergeDirectedEdgeWithKey(u,p,h,d):_?this.addUndirectedEdgeWithKey(u,p,h,d):this.addDirectedEdgeWithKey(u,p,h,d)}),this;if(!Ii(e))throw new Ft("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Ii(e.attributes))throw new Ft("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new Ft("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=s.length;r<i;r++){o=s[r],$ae(o);const{key:u,attributes:d}=o;n?this.mergeNode(u,d):this.addNode(u,d)}}if(e.edges){let u=!1;if(this.type==="undirected"&&(u=!0),s=e.edges,!Array.isArray(s))throw new Ft("Graph.import: invalid edges. Expecting an array.");for(r=0,i=s.length;r<i;r++){a=s[r],Bae(a);const{source:d,target:p,attributes:h,undirected:g=u}=a;let x;"key"in a?(x=n?g?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:g?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,x.call(this,a.key,d,p,h)):(x=n?g?this.mergeUndirectedEdge:this.mergeDirectedEdge:g?this.addUndirectedEdge:this.addDirectedEdge,x.call(this,d,p,h))}}return this}nullCopy(e){const n=new er(ui({},this._options,e));return n.replaceAttributes(ui({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const s=ui({},r.attributes);r=new n.NodeDataClass(i,s),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new un(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new un("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new un("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,T$(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,ui({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},r={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let u="",d=s.source.key,p=s.target.key,h;s.undirected&&d>p&&(h=d,d=p,p=h);const g=`(${d})${a}(${p})`;o.startsWith("geid_")?this.multi&&(typeof r[g]>"u"?r[g]=0:r[g]++,u+=`${r[g]}. `):u+=`[${o}]: `,u+=g,n[u]=s.attributes});const i={};for(const s in this)this.hasOwnProperty(s)&&!r3.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(i[s]=this[s]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,uo(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(er.prototype[Symbol.for("nodejs.util.inspect.custom")]=er.prototype.inspect);Uae.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?T$:Gae;t.generateKey?er.prototype[n]=function(i,s,o){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,s,o,e==="update")}:er.prototype[n]=function(i,s,o,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,s,o,a,e==="update")}})});nae(er);pae(er);Tae(er);Dae(er);class j$ extends er{constructor(e){const n=ui({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new Ft("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new Ft('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class R$ extends er{constructor(e){const n=ui({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new Ft("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new Ft('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class O$ extends er{constructor(e){const n=ui({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Ft("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class A$ extends er{constructor(e){const n=ui({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Ft("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new Ft('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class q$ extends er{constructor(e){const n=ui({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Ft("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new Ft('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function $f(t){t.from=function(e,n){const r=ui({},e.options,n),i=new t(r);return i.import(e),i}}$f(er);$f(j$);$f(R$);$f(O$);$f(A$);$f(q$);er.Graph=er;er.DirectedGraph=j$;er.UndirectedGraph=R$;er.MultiGraph=O$;er.MultiDirectedGraph=A$;er.MultiUndirectedGraph=q$;er.InvalidArgumentsGraphError=Ft;er.NotFoundGraphError=xt;er.UsageGraphError=un;const hm=async({tx:t,userId:e,mapId:n})=>{const r=await t.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").select(["b.id"]).where("b.userId","=",e).where("l.mapId","=",n).execute(),i=await t.selectFrom("Waypoint as w").select("w.id").where("w.mapId","=",n).where("w.userId","=",e).execute(),s=await t.selectFrom("Building_Waypoint as bw").select(["bw.buildingId","bw.waypointId"]).where("bw.buildingId","in",t.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").select(["b.id"]).where("b.userId","=",e).where("l.mapId","=",n)).execute(),o=await t.selectFrom("Route as r").select(["r.fromId","r.toId"]).where("r.userId","=",e).where("r.mapId","=",n).execute(),a=new er({allowSelfLoops:!0,multi:!1,type:"undirected"});return r.forEach(({id:u})=>a.addNode(u,{type:"building"})),i.forEach(({id:u})=>{a.addNode(u,{type:"waypoint"})}),s.forEach(({buildingId:u,waypointId:d})=>{a.addEdge(u,d,{type:"building-waypoint",weight:100})}),o.forEach(({fromId:u,toId:d})=>{a.addEdge(u,d,{type:"route",weight:0})}),{buildings:r,graph:a}};var Dy={},hE,s3;function P$(){return s3||(s3=1,hE=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),hE}var mE,o3;function Kae(){if(o3)return mE;o3=1;function t(e){this.graph=e,this.stack=new Array(e.order),this.seen=new Set,this.size=0}return t.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},t.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},t.prototype.forEachNodeYetUnseen=function(e){var n=this.seen,r=this.graph;r.someNode(function(i,s){if(n.size===r.order)return!0;if(n.has(i))return!1;var o=e(i,s);return!!o})},t.prototype.has=function(e){return this.seen.has(e)},t.prototype.push=function(e){var n=this.seen.size;return this.seen.add(e),n===this.seen.size?!1:(this.stack[this.size++]=e,!0)},t.prototype.pushWith=function(e,n){var r=this.seen.size;return this.seen.add(e),r===this.seen.size?!1:(this.stack[this.size++]=n,!0)},t.prototype.pop=function(){if(this.size!==0)return this.stack[--this.size]},mE=t,mE}var Ly={},a3;function Qae(){if(a3)return Ly;a3=1;function t(n,r,i){this.node=n,this.attributes=r,this.depth=i}function e(n){return n[0].toUpperCase()+n.slice(1)}return Ly.TraversalRecord=t,Ly.capitalize=e,Ly}var l3;function Jae(){if(l3)return Dy;l3=1;var t=P$(),e=Kae(),n=Qae(),r=n.TraversalRecord,i=n.capitalize;function s(o,a,u,d){if(d=d||{},!t(o))throw new Error("graphology-traversal/dfs: expecting a graphology instance.");if(typeof u!="function")throw new Error("graphology-traversal/dfs: given callback is not a function.");if(o.order===0)return;var p=new e(o),h=o["forEach"+i(d.mode||"outbound")+"Neighbor"].bind(o),g;a===null?g=p.forEachNodeYetUnseen.bind(p):g=function(k){a=""+a,k(a,o.getNodeAttributes(a))};var x,_;function S(k,I){p.pushWith(k,new r(k,I,x.depth+1))}g(function(k,I){for(p.pushWith(k,new r(k,I,0));p.size!==0;)x=p.pop(),_=u(x.node,x.attributes,x.depth),_!==!0&&h(x.node,S)})}return Dy.dfs=function(o,a,u){return s(o,null,a,u)},Dy.dfsFromNode=s,Dy}var Zae=Jae(),Vp={},Hp={},u3;function Yae(){if(u3)return Hp;u3=1;function t(r){return typeof r!="number"||isNaN(r)?1:r}function e(r,i){var s={},o=function(d){return typeof d>"u"?i:d};typeof i=="function"&&(o=i);var a=function(d){return o(d[r])},u=function(){return o(void 0)};return typeof r=="string"?(s.fromAttributes=a,s.fromGraph=function(d,p){return a(d.getNodeAttributes(p))},s.fromEntry=function(d,p){return a(p)}):typeof r=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},s.fromGraph=function(d,p){return o(r(p,d.getNodeAttributes(p)))},s.fromEntry=function(d,p){return o(r(d,p))}):(s.fromAttributes=u,s.fromGraph=u,s.fromEntry=u),s}function n(r,i){var s={},o=function(d){return typeof d>"u"?i:d};typeof i=="function"&&(o=i);var a=function(d){return o(d[r])},u=function(){return o(void 0)};return typeof r=="string"?(s.fromAttributes=a,s.fromGraph=function(d,p){return a(d.getEdgeAttributes(p))},s.fromEntry=function(d,p){return a(p)},s.fromPartialEntry=s.fromEntry,s.fromMinimalEntry=s.fromEntry):typeof r=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},s.fromGraph=function(d,p){var h=d.extremities(p);return o(r(p,d.getEdgeAttributes(p),h[0],h[1],d.getNodeAttributes(h[0]),d.getNodeAttributes(h[1]),d.isUndirected(p)))},s.fromEntry=function(d,p,h,g,x,_,S){return o(r(d,p,h,g,x,_,S))},s.fromPartialEntry=function(d,p,h,g){return o(r(d,p,h,g))},s.fromMinimalEntry=function(d,p){return o(r(d,p))}):(s.fromAttributes=u,s.fromGraph=u,s.fromEntry=u,s.fromMinimalEntry=u),s}return Hp.createNodeValueGetter=e,Hp.createEdgeValueGetter=n,Hp.createEdgeWeightGetter=function(r){return n(r,t)},Hp}var My={},c3;function Xae(){return c3||(c3=1,My.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",My.SYMBOL_SUPPORT=typeof Symbol<"u"),My}var gE,d3;function F$(){if(d3)return gE;d3=1;var t=Xae(),e=t.ARRAY_BUFFER_SUPPORT,n=t.SYMBOL_SUPPORT;return gE=function(i,s){var o,a,u,d,p;if(!i)throw new Error("obliterator/forEach: invalid iterable.");if(typeof s!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(i)||e&&ArrayBuffer.isView(i)||typeof i=="string"||i.toString()==="[object Arguments]"){for(u=0,d=i.length;u<d;u++)s(i[u],u);return}if(typeof i.forEach=="function"){i.forEach(s);return}if(n&&Symbol.iterator in i&&typeof i.next!="function"&&(i=i[Symbol.iterator]()),typeof i.next=="function"){for(o=i,u=0;p=o.next(),p.done!==!0;)s(p.value,u),u++;return}for(a in i)i.hasOwnProperty(a)&&s(i[a],a)},gE}var vd={},f3;function ele(){if(f3)return vd;f3=1;var t=function(i,s){return i<s?-1:i>s?1:0},e=function(i,s){return i<s?1:i>s?-1:0};function n(i){return function(s,o){return i(o,s)}}function r(i){return i===2?function(s,o){return s[0]<o[0]?-1:s[0]>o[0]?1:s[1]<o[1]?-1:s[1]>o[1]?1:0}:function(s,o){for(var a=0;a<i;){if(s[a]<o[a])return-1;if(s[a]>o[a])return 1;a++}return 0}}return vd.DEFAULT_COMPARATOR=t,vd.DEFAULT_REVERSE_COMPARATOR=e,vd.reverseComparator=n,vd.createTupleComparator=r,vd}var xd={},yE={},p3;function tle(){return p3||(p3=1,function(t){var e=Math.pow(2,8)-1,n=Math.pow(2,16)-1,r=Math.pow(2,32)-1,i=Math.pow(2,7)-1,s=Math.pow(2,15)-1,o=Math.pow(2,31)-1;t.getPointerArray=function(u){var d=u-1;if(d<=e)return Uint8Array;if(d<=n)return Uint16Array;if(d<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},t.getSignedPointerArray=function(u){var d=u-1;return d<=i?Int8Array:d<=s?Int16Array:d<=o?Int32Array:Float64Array},t.getNumberType=function(u){return u===(u|0)?Math.sign(u)===-1?u<=127&&u>=-128?Int8Array:u<=32767&&u>=-32768?Int16Array:Int32Array:u<=255?Uint8Array:u<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};t.getMinimalRepresentation=function(u,d){var p=null,h=0,g,x,_,S,k;for(S=0,k=u.length;S<k;S++)_=d?d(u[S]):u[S],x=t.getNumberType(_),g=a[x.name],g>h&&(h=g,p=x);return p},t.isTypedArray=function(u){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(u)},t.concat=function(){var u=0,d,p,h;for(d=0,h=arguments.length;d<h;d++)u+=arguments[d].length;var g=new arguments[0].constructor(u);for(d=0,p=0;d<h;d++)g.set(arguments[d],p),p+=arguments[d].length;return g},t.indices=function(u){for(var d=t.getPointerArray(u),p=new d(u),h=0;h<u;h++)p[h]=h;return p}}(yE)),yE}var h3;function nle(){if(h3)return xd;h3=1;var t=F$(),e=tle();function n(o){return Array.isArray(o)||e.isTypedArray(o)}function r(o){if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size}function i(o){var a=r(o),u=typeof a=="number"?new Array(a):[],d=0;return t(o,function(p){u[d++]=p}),u}function s(o){var a=r(o),u=typeof a=="number"?e.getPointerArray(a):Array,d=typeof a=="number"?new Array(a):[],p=typeof a=="number"?new u(a):[],h=0;return t(o,function(g){d[h]=g,p[h]=h++}),[d,p]}return xd.isArrayLike=n,xd.guessLength=r,xd.toArray=i,xd.toArrayWithIndices=s,xd}var bE,m3;function rle(){if(m3)return bE;m3=1;var t=F$(),e=ele(),n=nle(),r=e.DEFAULT_COMPARATOR,i=e.reverseComparator;function s(I,E,C,j){for(var q=E[j],F,$;j>C;){if(F=j-1>>1,$=E[F],I(q,$)<0){E[j]=$,j=F;continue}break}E[j]=q}function o(I,E,C){for(var j=E.length,q=C,F=E[C],$=2*C+1,P;$<j;)P=$+1,P<j&&I(E[$],E[P])>=0&&($=P),E[C]=E[$],C=$,$=2*C+1;E[C]=F,s(I,E,q,C)}function a(I,E,C){E.push(C),s(I,E,0,E.length-1)}function u(I,E){var C=E.pop();if(E.length!==0){var j=E[0];return E[0]=C,o(I,E,0),j}return C}function d(I,E,C){if(E.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var j=E[0];return E[0]=C,o(I,E,0),j}function p(I,E,C){var j;return E.length!==0&&I(E[0],C)<0&&(j=E[0],E[0]=C,C=j,o(I,E,0)),C}function h(I,E){for(var C=E.length,j=C>>1,q=j;--q>=0;)o(I,E,q)}function g(I,E){for(var C=E.length,j=0,q=new Array(C);j<C;)q[j++]=u(I,E);return q}function x(I,E,C){arguments.length===2&&(C=E,E=I,I=r);var j=i(I),q,F,$,P=1/0,O;if(E===1){if(n.isArrayLike(C)){for(q=0,F=C.length;q<F;q++)$=C[q],(P===1/0||I($,P)<0)&&(P=$);return O=new C.constructor(1),O[0]=P,O}return t(C,function(D){(P===1/0||I(D,P)<0)&&(P=D)}),[P]}if(n.isArrayLike(C)){if(E>=C.length)return C.slice().sort(I);for(O=C.slice(0,E),h(j,O),q=E,F=C.length;q<F;q++)j(C[q],O[0])>0&&d(j,O,C[q]);return O.sort(I)}var B=n.guessLength(C);return B!==null&&B<E&&(E=B),O=new Array(E),q=0,t(C,function(D){q<E?O[q]=D:(q===E&&h(j,O),j(D,O[0])>0&&d(j,O,D)),q++}),O.length>q&&(O.length=q),O.sort(I)}function _(I,E,C){arguments.length===2&&(C=E,E=I,I=r);var j=i(I),q,F,$,P=-1/0,O;if(E===1){if(n.isArrayLike(C)){for(q=0,F=C.length;q<F;q++)$=C[q],(P===-1/0||I($,P)>0)&&(P=$);return O=new C.constructor(1),O[0]=P,O}return t(C,function(D){(P===-1/0||I(D,P)>0)&&(P=D)}),[P]}if(n.isArrayLike(C)){if(E>=C.length)return C.slice().sort(j);for(O=C.slice(0,E),h(I,O),q=E,F=C.length;q<F;q++)I(C[q],O[0])>0&&d(I,O,C[q]);return O.sort(j)}var B=n.guessLength(C);return B!==null&&B<E&&(E=B),O=new Array(E),q=0,t(C,function(D){q<E?O[q]=D:(q===E&&h(I,O),I(D,O[0])>0&&d(I,O,D)),q++}),O.length>q&&(O.length=q),O.sort(j)}function S(I){if(this.clear(),this.comparator=I||r,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}S.prototype.clear=function(){this.items=[],this.size=0},S.prototype.push=function(I){return a(this.comparator,this.items,I),++this.size},S.prototype.peek=function(){return this.items[0]},S.prototype.pop=function(){return this.size!==0&&this.size--,u(this.comparator,this.items)},S.prototype.replace=function(I){return d(this.comparator,this.items,I)},S.prototype.pushpop=function(I){return p(this.comparator,this.items,I)},S.prototype.consume=function(){return this.size=0,g(this.comparator,this.items)},S.prototype.toArray=function(){return g(this.comparator,this.items.slice())},S.prototype.inspect=function(){var I=this.toArray();return Object.defineProperty(I,"constructor",{value:S,enumerable:!1}),I},typeof Symbol<"u"&&(S.prototype[Symbol.for("nodejs.util.inspect.custom")]=S.prototype.inspect);function k(I){if(this.clear(),this.comparator=I||r,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=i(this.comparator)}return k.prototype=S.prototype,S.from=function(I,E){var C=new S(E),j;return n.isArrayLike(I)?j=I.slice():j=n.toArray(I),h(C.comparator,j),C.items=j,C.size=j.length,C},k.from=function(I,E){var C=new k(E),j;return n.isArrayLike(I)?j=I.slice():j=n.toArray(I),h(C.comparator,j),C.items=j,C.size=j.length,C},S.siftUp=o,S.siftDown=s,S.push=a,S.pop=u,S.replace=d,S.pushpop=p,S.heapify=h,S.consume=g,S.nsmallest=x,S.nlargest=_,S.MinHeap=S,S.MaxHeap=k,bE=S,bE}var g3;function ile(){if(g3)return Vp;g3=1;var t=P$(),e=Yae().createEdgeWeightGetter,n=rle(),r="weight";function i(h,g){return h[0]>g[0]?1:h[0]<g[0]?-1:h[1]>g[1]?1:h[1]<g[1]?-1:h[2]>g[2]?1:h[2]<g[2]?-1:0}function s(h,g){return h[0]>g[0]?1:h[0]<g[0]?-1:h[1]>g[1]?1:h[1]<g[1]?-1:h[2]>g[2]?1:h[2]<g[2]?-1:h[3]>g[3]?1:h[3]<g[3]?-1:0}function o(h,g,x,_){if(g=""+g,x=""+x,!t(h))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(g&&!h.hasNode(g))throw new Error('graphology-shortest-path/dijkstra: the "'+g+'" source node does not exist in the given graph.');if(x&&!h.hasNode(x))throw new Error('graphology-shortest-path/dijkstra: the "'+x+'" target node does not exist in the given graph.');if(_=e(_||r).fromMinimalEntry,g===x)return[0,[g]];var S=[{},{}],k=[{},{}],I=[new n(i),new n(i)],E=[{},{}];k[0][g]=[g],k[1][x]=[x],E[0][g]=0,E[1][x]=0;var C=[],j=1/0,q=0,F=1,$,P,O,B,D,W,V,z,X;for(I[0].push([0,q++,g]),I[1].push([0,q++,x]);I[0].size&&I[1].size;)if(F=1-F,$=I[F].pop(),B=$[0],D=$[2],!(D in S[F])){if(S[F][D]=B,D in S[1-F])return[j,C];for(P=F===1?h.inboundEdges(D):h.outboundEdges(D),z=0,X=P.length;z<X;z++){if(V=P[z],W=h.opposite(D,V),O=S[F][D]+_(V,h.getEdgeAttributes(V)),W in S[F]&&O<S[F][W])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(W in E[F])||O<E[F][W])&&(E[F][W]=O,I[F].push([O,q++,W]),k[F][W]=k[F][D].concat(W),W in E[0]&&W in E[1]&&(B=E[0][W]+E[1][W],(C.length===0||j>B)&&(j=B,C=k[0][W].concat(k[1][W].slice(0,-1).reverse()))))}}return[1/0,null]}function a(h,g,x,_,S,k){if(!t(h))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");x=e(x||r).fromMinimalEntry;var I={},E={},C=new n(i),j=0,q,F,$,P,O,B,D,W,V,z,X;for(W=0,z=g.length;W<z;W++)P=g[W],E[P]=0,C.push([0,j++,P]),k[P]=[P];for(;C.size;)if(F=C.pop(),D=F[0],P=F[2],!(P in I)){if(I[P]=D,P===S)break;for(q=h.outboundEdges(P),V=0,X=q.length;V<X;V++){if(B=q[V],O=h.opposite(P,B),$=x(B,h.getEdgeAttributes(B))+I[P],O in I&&$<I[O])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(O in E)||$<E[O])&&(E[O]=$,C.push([$,j++,O]),k[O]=k[P].concat(O))}}return I}function u(h,g,x){var _={};return a(h,[g],x,0,null,_),_}function d(h,g,x,_){return o(h,g,x,_)[1]}function p(h,g,x){g=""+g,x=e(x||r).fromMinimalEntry;var _=[],S={},k={},I=h.nodes(),E,C,j,q,F,$,P,O,B,D;for(B=0,D=I.length;B<D;B++)$=I[B],S[$]=[],k[$]=0;var W={};k[g]=1;var V={};V[g]=0;var z=0,X=new n(s);for(X.push([0,z++,g,g]);X.size;)if(C=X.pop(),q=C[0],j=C[2],$=C[3],!($ in W))for(k[$]+=k[j],_.push($),W[$]=q,E=h.outboundEdges($),B=0,D=E.length;B<D;B++)O=E[B],P=h.opposite($,O),F=q+x(O,h.getEdgeAttributes(O)),!(P in W)&&(!(P in V)||F<V[P])?(V[P]=F,X.push([F,z++,$,P]),k[P]=0,S[P]=[$]):F===V[P]&&(k[P]+=k[$],S[P].push($));return[_,S,k]}return Vp.bidirectional=d,Vp.singleSource=u,Vp.brandes=p,Vp}var sle=ile();const ole=Gs(sle),mm=({graph:t,from:e,to:n,mode:r})=>{const i=ole.bidirectional(t,e,n,"weight");if(!i)return!1;switch(r){case"path":return i;case"waypoint":return i.slice(1,-1).every(o=>t.getNodeAttribute(o,"type")==="waypoint")?i:void 0}},ale=({graph:t,buildings:e})=>{const n=new Map;for(const{id:r}of e)Zae.dfsFromNode(t,r,(i,s,o)=>(s.type==="building"&&r!==i&&n.set(`${r}-${i}`,{buildingId:r,linkId:i}),o>=50));return[...n.values()].filter(({buildingId:r,linkId:i})=>!!mm({mode:"waypoint",graph:t,from:r,to:i}))},$x=async({tx:t,userId:e,mapId:n})=>{console.info("	=== Building Route Building"),await t.deleteFrom("Building_Route_Building as brb").where("brb.userId","=",e).execute();const r=ale(await hm({tx:t,userId:e,mapId:n})),i=r.map(o=>({id:wn(),mapId:n,userId:e,...o})),s=(await t.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").select(["b.id","bl.name"]).where("b.id","in",r.map(({buildingId:o})=>o)).where("b.id","in",r.map(({linkId:o})=>o)).execute()).reduce((o,{id:a,name:u})=>(o[a]=u,o),{});console.info("		-- Related buildings",r.map(({buildingId:o,linkId:a})=>({building:s[o],link:s[a]}))),i.length>0&&await t.insertInto("Building_Route_Building").values(i).execute(),console.info("	-- Done")},lle=async({tx:t,userId:e,mapId:n})=>{console.info("	=== Construction");const r=await t.selectFrom(t.selectFrom("Building as b").innerJoin("Construction as c","c.id","b.constructionId").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").select(["b.id as buildingId","c.id","b.blueprintId","bl.name","c.cycle","bl.cycles",i=>i.case().when(i.not(i.exists(i.selectFrom("Blueprint_Requirement as br").select(i.lit(1).as("one")).whereRef("br.blueprintId","=","b.blueprintId").where(s=>s.not(s.exists(s.selectFrom("Inventory as i").select(s.lit(1).as("one")).where("i.id","in",s.selectFrom("Building_Inventory").select("inventoryId").whereRef("buildingId","=","b.id")).where("i.type","=","construction").whereRef("i.resourceId","=","br.resourceId").whereRef("i.amount",">=","br.amount"))))))).then(i.lit(!0)).else(i.lit(!1)).end().as("withAvailableResources")]).where("b.userId","=",e).where("l.mapId","=",n).where("c.plan","=",!1).as("building")).where("building.withAvailableResources","=",!0).selectAll().execute();r.length||console.info("		-- No construction in queue or not enough resource to proceed");for await(const{id:i,cycle:s,cycles:o,buildingId:a,blueprintId:u,name:d}of r){if(console.info("			-- Resolving construction",{name:d}),s>=o){await t.deleteFrom("Construction").where("id","=",i).execute();const p=await t.selectFrom("Blueprint_Production as bp").select(["bp.resourceId"]).where("bp.blueprintId","=",u).execute();for await(const{resourceId:h}of p)try{await t.insertInto("Supply").values({id:wn(),mapId:n,userId:e,buildingId:a,resourceId:h}).execute()}catch{}continue}await t.updateTable("Construction").set("cycle",s+1).where("id","=",i).execute()}console.info("	-- Done")},ule=async({tx:t,userId:e,mapId:n})=>{console.info("		=== Construction demand");const r=await t.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").where("b.userId","=",e).where("l.mapId","=",n).where("b.constructionId","is not",null).where("b.valid","=",!0).select(["b.id","b.blueprintId","bl.name"]).execute();r.length||console.info("			-- Construction queue is empty");for await(const{id:i,name:s,blueprintId:o}of r){console.info("			-- Resolving construction demand",{name:s});const a=await t.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.resourceId","br.amount","r.name"]).where("br.blueprintId","=",o).where(u=>u.not(u.exists(u.selectFrom("Transport as t").select(["t.id"]).where("t.targetId","=",i).whereRef("t.resourceId","=","br.resourceId")))).where(u=>u.not(u.exists(u.selectFrom("Demand as d").select(["d.id"]).where("d.buildingId","=",i).whereRef("d.resourceId","=","br.resourceId")))).where(u=>u.not(u.exists(u.selectFrom("Inventory as i").select(["i.id"]).innerJoin("Building_Inventory as bi",d=>d.on("bi.buildingId","=",i).onRef("bi.inventoryId","=","i.id")).whereRef("i.resourceId","=","br.resourceId").whereRef("i.amount",">=","br.amount").where("i.type","=","construction")))).execute();a.length||console.info("				-- No required resources or resources already demanded/on the way.");for await(const{resourceId:u,name:d,amount:p}of a){const h=await t.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.resourceId","i.amount","r.name"]).where("i.id","in",t.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).where("i.resourceId","=",u).where("i.type","=","construction").executeTakeFirst();if(!h){console.warn(`Wrong building [${s}] configuration: requested resource [${d}] not found in the inventory`);continue}console.log("				-- Inventory",{resource:h.name,amount:h.amount}),h.amount<p&&(console.info("					-- Demanding resource",{resource:d,amount:Math.max(0,p-h.amount)}),await t.insertInto("Demand").values({id:wn(),mapId:n,userId:e,amount:Math.max(0,p-h.amount),buildingId:i,priority:10,resourceId:u,type:"construction"}).onConflict(g=>g.columns(["buildingId","resourceId"]).doUpdateSet({amount:Math.max(0,p-h.amount)})).execute())}}console.info("		-- Done")},cle=async({tx:t,userId:e,mapId:n})=>{console.info("	=== Demand"),await ule({tx:t,userId:e,mapId:n}),console.info("	-- Done")},dle=async({tx:t,userId:e,mapId:n})=>{console.info("	=== Production");const r=await t.selectFrom("Production as p").innerJoin("Building as b","b.id","p.buildingId").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","p.buildingId","bl.name as building","p.cycle","p.cycles","bp.resourceId","p.blueprintProductionId","r.name as resource","bp.amount"]).where("p.userId","=",e).where("l.mapId","=",n).execute();r.length||console.info("		-- Production queue is empty");for await(const{id:i,buildingId:s,resourceId:o,cycle:a,cycles:u,amount:d,building:p,resource:h}of r){if(console.info("		-- Resolving production",{building:p,cycle:a,cycles:u,amount:d,resource:h}),a<u){console.info("			-- Not ready yet"),await t.updateTable("Production").set("cycle",a+1).where("id","=",i).execute();continue}const g=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",s)).where("i.resourceId","=",o).where("i.type","=","storage").executeTakeFirst();if(g&&(!(g.limit>0)||g.amount+d<=g.limit)){console.info("			-- Resources produced, moving to inventory",{amount:d}),await t.updateTable("Inventory").set({amount:g.amount+d}).where("id","=",g.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",i).execute();continue}console.info("			-- Not enough storage capacity")}console.info("	-- Done")},y3=async({tx:t,userId:e,mapId:n,buildingId:r,blueprintProductionId:i})=>{const s=await t.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as b","b.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.cycles","r.name as resource","bp.amount","bp.cycles","b.name as blueprint"]).where("bp.id","=",i).executeTakeFirstOrThrow();console.info("	=== Production Queue",{building:s.blueprint,resource:s.resource,amount:s.amount,cycles:s.cycles});const o=await t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).execute();o.length||console.info("		-- No production requirements");let a=!0;const u=new Map;for await(const{resourceId:d,amount:p,passive:h}of o){const g=await t.selectFrom("Inventory as i").innerJoin("Building_Inventory as bi","bi.inventoryId","i.id").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.amount","r.name"]).where("bi.buildingId","=",r).where("i.resourceId","=",d).where("i.type","=","storage").executeTakeFirstOrThrow();if(console.info("		-- Checking inventory",{resource:g.name,amount:g.amount}),g.amount<p){if(console.info("			-- Not enough resources in inventory, creating demand",{amount:p-g.amount}),a=!1,await t.selectFrom("Transport as t").select(["t.amount"]).where("t.resourceId","=",d).where("t.targetId","=",r).where("t.amount",">=",p-g.amount).executeTakeFirst()){console.info("			-- Transport already on the way, waiting for it to arrive");continue}await t.insertInto("Demand").values({id:wn(),amount:p-g.amount,userId:e,mapId:n,buildingId:r,priority:10,resourceId:d,type:"storage"}).onConflict(_=>_.columns(["buildingId","resourceId"]).doUpdateSet({amount:p-g.amount})).execute();continue}h||u.set(g.id,g.amount-p)}if(a){console.info("		-- Adding production to queue");for await(const[d,p]of u)await t.updateTable("Inventory").set("amount",p).where("id","=",d).execute();await t.insertInto("Production").values({id:wn(),buildingId:r,blueprintProductionId:i,userId:e,cycle:0,cycles:s.cycles}).execute()}else console.info("		-- Not enough resources to proceed");return console.info("	-- Done"),a},fle=async({tx:t,userId:e,mapId:n})=>{console.info("	=== Production Plan");const r=await t.selectFrom("Building as b").select(["b.id as buildingId","b.productionId"]).where("b.userId","=",e).where("b.productionId","is not",null).execute();r.length||console.info("		-- Production queue is empty");for await(const{buildingId:s,productionId:o}of r)try{const{count:a}=await t.selectFrom("Production as p").where("p.buildingId","=",s).select(d=>d.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(a>0)continue;await y3({tx:t,userId:e,mapId:n,blueprintProductionId:o,buildingId:s})&&await t.updateTable("Building").set({productionId:null}).where("id","=",s).execute()}catch(a){console.error(a)}const i=await t.selectFrom("Building as b").select(["b.id as buildingId","b.recurringProductionId"]).where("b.userId","=",e).where("b.recurringProductionId","is not",null).execute();i.length||console.info("		-- Recurring production queue is empty");for await(const{buildingId:s,recurringProductionId:o}of i)try{const{count:a}=await t.selectFrom("Production as p").where("p.buildingId","=",s).select(u=>u.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(a>0)continue;await y3({tx:t,userId:e,mapId:n,blueprintProductionId:o,buildingId:s})}catch(a){console.error(a)}console.info("	-- Done")},ple=async({tx:t,userId:e,mapId:n})=>{console.info("	=== Transport");const r=await t.selectFrom("Demand as d").innerJoin("Building as b","b.id","d.buildingId").innerJoin("Blueprint as bp","bp.id","b.blueprintId").innerJoin("Resource as r","r.id","d.resourceId").select(["d.id","d.amount","d.resourceId","d.buildingId","bp.name as building","d.type","r.name as resource"]).where("d.userId","=",e).where("d.mapId","=",n).orderBy("d.priority","desc").execute();r.length||console.info("		-- No demands");const{graph:i}=await hm({tx:t,userId:e,mapId:n});for await(const{id:s,amount:o,resourceId:a,resource:u,building:d,buildingId:p,type:h}of r){console.info("		-- Resolving demand",{building:d,resource:u,amount:o,type:h});const g=await t.selectFrom("Supply as s").innerJoin("Building as b","b.id","s.buildingId").innerJoin("Blueprint as bp","bp.id","b.blueprintId").innerJoin("Building_Inventory as bi","bi.buildingId","s.buildingId").innerJoin("Inventory as i","i.id","bi.inventoryId").select(["s.buildingId","bp.name as building","i.id as inventoryId","i.amount as available"]).where("s.userId","=",e).where("s.mapId","=",n).where("s.resourceId","=",a).where("i.type","=","storage").whereRef("i.resourceId","=","s.resourceId").where("i.amount",">",0).execute();if(!g.length){console.info("			-- Demanded resource is not available");continue}let x=o;for await(const{inventoryId:_,building:S,buildingId:k,available:I}of g){if(console.info("			-- Resolving supply from",{building:S,available:I,remaining:x}),x<=0){console.info("				-- Demand fulfilled");break}const E=mm({mode:"waypoint",graph:i,from:k,to:p});if(!E){console.info("				-- No path available for this transport");continue}const j=E.slice(1,-1).shift();if(!j){console.info("				-- No waypoint available for this transport (path too short?)");continue}const q=Math.min(x,I);await t.updateTable("Inventory").set({amount:I-q}).where("id","=",_).execute(),x-=q,console.info("				-- Transporting",{transfer:q}),await t.insertInto("Transport").values({id:wn(),userId:e,mapId:n,sourceId:k,targetId:p,resourceId:a,amount:q,type:h,waypointId:j}).execute()}await t.updateTable("Demand").set({amount:x}).where("id","=",s).execute(),console.info("		-- Done")}console.info("	-- Done")},hle=async({tx:t,userId:e,mapId:n})=>{console.info("		=== Planning transports");const r=new Map,{graph:i}=await hm({tx:t,userId:e,mapId:n}),s=await t.selectFrom("Transport as t").innerJoin("Resource as r","r.id","t.resourceId").innerJoin("Building as bt","bt.id","t.targetId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").innerJoin("Building as bs","bs.id","t.sourceId").innerJoin("Blueprint as bls","bls.id","bs.blueprintId").select(["t.id","t.waypointId","t.amount","t.targetId","blt.name as target","bls.name as source","t.resourceId","t.type","r.name as resource"]).where("t.userId","=",e).where("t.mapId","=",n).execute();s.length||console.info("			-- No current transports");for await(const{id:o,waypointId:a,targetId:u,resourceId:d,amount:p,type:h,resource:g,source:x,target:_}of s){console.info("			-- Resolving transport",{source:x,target:_,resource:g,type:h,amount:p});const S=`${a}-${u}`;if(!r.has(S)){const E=mm({mode:"waypoint",graph:i,from:a,to:u});if(!E){console.info("				-- There is no available path (through waypoints)");continue}r.set(S,E),console.info("				-- Path found",E)}const I=[...r.get(S)||[]].slice(1,-1);if(!I.length){console.log("				-- Resolving inventory transaction (transport at destination)");const E=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.resourceId","=",d).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",u)).where("i.type","=",h).executeTakeFirst();if(!E){console.warn("Target building does not support this resource",{targetId:u,resourceId:d});continue}const C=Math.min(p,E.limit-E.amount);console.info("				-- Moving goods to target building",{amount:C}),await t.updateTable("Inventory").set({amount:E.amount+C}).where("id","=",E.id).execute(),await t.updateTable("Transport").set({amount:p-C}).where("id","=",o).execute();continue}console.info("				-- Moving to next waypoint",{waypointId:I[0]}),await t.updateTable("Transport").set({waypointId:I.shift()}).where("id","=",o).execute()}console.info("		-- Done")},mle=async({tx:t,userId:e,mapId:n})=>{await hle({tx:t,userId:e,mapId:n}),await ple({tx:t,userId:e,mapId:n})},D$=async({tx:t,userId:e,mapId:n})=>{try{console.info("=== Starting a new Cycle"),await t.insertInto("Cycle").values({id:wn(),stamp:bn.now().toUTC().toSQLTime(),userId:e,mapId:n}).execute(),await $x({tx:t,userId:e,mapId:n}),await cle({tx:t,userId:e,mapId:n}),await lle({tx:t,userId:e,mapId:n}),await dle({tx:t,userId:e,mapId:n}),await fle({tx:t,userId:e,mapId:n}),await mle({tx:t,userId:e,mapId:n}),await t.deleteFrom("Demand").where("amount","<=",0).execute(),await t.deleteFrom("Transport").where("amount","<=",0).execute(),console.info("	-- Cycle finished")}catch(r){throw console.error(r),r}},gle=({userId:t,mapId:e,...n})=>{const r=Fn([["GameMap"]]),[i,s]=H.useState(!1),o=Jt({mutationKey:["useCycleMutation"],async mutationFn({userId:a}){return Nt.transaction().execute(async u=>D$({tx:u,userId:a,mapId:e}))},async onSuccess(){await r()}});return H.useEffect(()=>{if(i&&!o.isPending){const a=setInterval(()=>{o.mutate({userId:t})},1e3);return()=>clearInterval(a)}},[i]),f.jsx(cn,{iconEnabled:i?"icon-[fluent--pause-24-regular]":"icon-[hugeicons--play]",onClick:()=>{s(a=>!a)},loading:o.isPending,...n})},gm="icon-[gala--clock]",yle=({userId:t,mapId:e,cycle:n,...r})=>{const i=Fn([["Cycle"],["GameMap"]]),s=Jt({mutationKey:["useCycleMutation"],async mutationFn({userId:o}){return Nt.transaction().execute(async a=>D$({tx:a,userId:o,mapId:e}))},async onSuccess(){await i()}});return f.jsxs(cn,{iconEnabled:gm,iconDisabled:gm,onClick:()=>{s.mutate({userId:t})},loading:s.isPending,...r,children:[f.jsx(J,{css:{base:["font-bold"]},label:"New cycle (label)"}),f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx("div",{className:"font-light text-sm",children:fn({number:n})}),f.jsx(tn,{icon:"icon-[solar--arrow-right-linear]"}),f.jsx("div",{className:"font-bold",children:fn({number:n+1})})]})]})},ble=({fromX:t,fromY:e,toX:n,toY:r,connectionLineStyle:i})=>{const[s]=Jm({sourceX:t,sourceY:e,targetX:n,targetY:r});return f.jsx("g",{children:f.jsx("path",{style:i,fill:"none",d:s})})};function b3(t,e){const n={...t.internals.positionAbsolute,...t},r=Math.round(n.x),i=Math.round(n.y),s=Math.round(e.x),o=Math.round(e.y);return s<=r+1?jt.Left:s>=r+n.measured.width-1?jt.Right:o<=i+1?jt.Top:o>=n.y+n.measured.height-1?jt.Bottom:jt.Top}function v3(t,e){const{width:n,height:r}=t.measured,i=t.internals.positionAbsolute,s=e.internals.positionAbsolute,o=n/2,a=r/2,u=i.x+o,d=i.y+a,p=s.x+e.measured.width/2,h=s.y+e.measured.height/2,g=(p-u)/(2*o)-(h-d)/(2*a),x=(p-u)/(2*o)+(h-d)/(2*a),_=1/(Math.abs(g)+Math.abs(x)||1),S=_*g,k=_*x,I=o*(S+k)+u,E=a*(-S+k)+d;return{x:I,y:E}}function L$(t,e){const n=v3(t,e),r=v3(e,t);return{sx:n.x,sy:n.y,tx:r.x,ty:r.y,sourcePos:b3(t,n),targetPos:b3(e,r)}}const vle=({id:t,source:e,target:n,markerStart:r,markerEnd:i,style:s})=>{const o=Lv(e),a=Lv(n);if(!o||!a)return null;const{sx:u,sy:d,tx:p,ty:h}=L$(o,a),[g]=Jm({sourceX:u,sourceY:d,targetX:p,targetY:h});return f.jsx("path",{id:t,className:"react-flow__edge-path",d:g,markerStart:r,markerEnd:i,style:s})},xle=({id:t,source:e,target:n,markerEnd:r,markerStart:i,style:s})=>{const o=Lv(e),a=Lv(n);if(!o||!a)return null;const{sx:u,sy:d,tx:p,ty:h}=L$(o,a),[g]=Jm({sourceX:u,sourceY:d,targetX:p,targetY:h});return f.jsx("path",{id:t,className:"react-flow__edge-path",d:g,markerStart:i,markerEnd:r,style:s})},Bx="icon-[lucide--land-plot]",wle=()=>{const{locale:t,mapId:e}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsxs("div",{className:"react-flow__panel flex flex-row p-2 border bg-white border-slate-300 shadow-xs",children:[f.jsx(St,{to:"/$locale/apps/derivean/game",params:{locale:t},children:f.jsx(cn,{iconEnabled:Is,variant:{variant:"subtle"}})}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/list",params:{locale:t,mapId:e},children:f.jsx(cn,{iconEnabled:is,variant:{variant:"subtle"}})}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/land/list",params:{locale:t,mapId:e},children:f.jsx(cn,{iconEnabled:Bx,variant:{variant:"subtle"}})})]})},MN=["flex","flex-row","gap-2","items-center","p-4","bg-white","rounded-md","border","shadow-md","border-slate-300"],Xa="icon-[mingcute--inventory-line]",GI="icon-[tabler--basket]",M$="icon-[oui--refresh]",ym="icon-[hugeicons--package-sent]",_le=({id:t,data:e})=>{const{mapId:n,locale:r}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsxs(f.Fragment,{children:[f.jsx(ON,{className:sn(MN),children:f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[f.jsx(St,{icon:is,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:t},css:{base:["font-bold"]},children:e.name}),f.jsxs("div",{className:"flex flex-row gap-1 items-end",children:[f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:r,mapId:n,buildingId:t},children:f.jsx(cn,{iconEnabled:Hs,variant:{variant:"subtle",size:"sm"}})}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:r,mapId:n,buildingId:t},children:f.jsx(cn,{iconEnabled:Xa,variant:{variant:"subtle",size:"sm"}})}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:{locale:r,mapId:n,buildingId:t},children:f.jsx(cn,{iconEnabled:ym,variant:{variant:"subtle",size:"sm"}})})]})]})}),f.jsxs("div",{className:sn(["flex","flex-col","gap-1","w-full","h-full","justify-between","items-start"]),children:[f.jsx("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(tn,{icon:is}),f.jsx("div",{children:e.name})]})}),f.jsxs("div",{className:"flex flex-row items-center justify-between w-full",children:[f.jsx("div",{children:e.productionName?f.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400",children:[f.jsx(tn,{icon:GI,variant:{size:"xs"}}),f.jsx("div",{children:e.productionName})]}):e.recurringProductionName?f.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400",children:[f.jsx(tn,{icon:M$,variant:{size:"xs"}}),f.jsx("div",{children:e.recurringProductionName})]}):null}),e.production?f.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400 font-bold",children:[f.jsx(tn,{icon:rm}),f.jsx("div",{children:e.production.name})]}):null]}),e.production?f.jsx(qf,{value:100*e.production.cycle/e.production.cycles}):null,f.jsx($i,{className:"hidden",position:jt.Right,type:"source",isConnectable:!1}),f.jsx($i,{className:"hidden",position:jt.Left,type:"target",isConnectable:!1})]})]})},Sle="icon-[gis--route-end]",Ele=({id:t,data:e})=>{const n=RN(),r=n.inProgress&&n.fromNode.id!==t;return f.jsxs("div",{className:"flex flex-row gap-2 w-full h-full items-center justify-center ",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-center text-xl",children:[f.jsx(tn,{icon:Sle,css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:e.name})]}),f.jsxs("div",{className:"w-full h-full absolute top-0 left-0",children:[!n.inProgress&&f.jsx($i,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:jt.Right,type:"source"}),(!n.inProgress||r)&&f.jsx($i,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:jt.Left,type:"target",isConnectableStart:!1})]})]})},Ile=({data:t})=>{const e=Fn([["GameMap"]]),n=Jt({async mutationFn({constructionId:r}){return Nt.transaction().execute(async i=>{i.updateTable("Construction").set({plan:!1}).where("id","=",r).execute()})},async onSuccess(){await e()}});return f.jsxs("div",{className:"flex flex-row gap-2 items-start justify-between w-full h-full",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(tn,{icon:"icon-[carbon--floorplan]",css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:t.name})]}),f.jsx(cn,{iconEnabled:bI,iconDisabled:bI,loading:n.isPending,disabled:!t.valid,onClick:()=>{n.mutate({constructionId:t.constructionId})}})]})},bm="icon-[emojione-monotone--construction]",Nle=({data:t})=>{const{mapId:e,locale:n}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsxs(f.Fragment,{children:[f.jsx(ON,{position:jt.Top,className:sn(MN),children:f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:n,mapId:e,landId:t.id},children:f.jsx(cn,{iconEnabled:bm,variant:{variant:"subtle"},children:f.jsx(J,{label:"Construction (label)"})})})}),f.jsx("div",{children:f.jsx("div",{className:"text-9xl font-bold font-slate-800",children:t.name})})]})},kle=({data:t})=>{const{mapId:e,locale:n}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[f.jsx("div",{className:"flex flex-row gap-2 items-center",children:f.jsx(St,{icon:bm,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:n,mapId:e,buildingId:t.id},css:{base:["font-bold"]},children:t.name})}),f.jsx(qf,{value:100*t.cycle/t.cycles}),f.jsx($i,{className:"hidden",position:jt.Right,type:"source",isConnectable:!1}),f.jsx($i,{className:"hidden",position:jt.Left,type:"target",isConnectable:!1})]})},zx="icon-[icon-park-outline--transport]",$$="icon-[lets-icons--pin-alt-light]",Cle=({id:t,data:{mapId:e,userId:n}})=>{const{locale:r}=Zt({from:"/$locale"}),i=Fn([["GameMap"]]),s=Jt({async mutationFn({id:o,userId:a,mapId:u}){return Nt.transaction().execute(async d=>{await d.deleteFrom("Waypoint").where("id","=",o).execute(),setTimeout(async()=>{await $x({tx:d,mapId:u,userId:a}),await i()},0)})},async onSuccess(){await i()}});return f.jsxs(f.Fragment,{children:[f.jsx(ON,{className:sn(MN),children:f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/waypoint/$waypointId/transport",params:{locale:r,mapId:e,waypointId:t},children:f.jsx(cn,{iconEnabled:zx,variant:{variant:"subtle"}})}),f.jsx(cn,{iconEnabled:Dr,variant:{variant:"danger"},loading:s.isPending,onClick:()=>{s.mutate({id:t,mapId:e,userId:n})}})]})}),f.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[f.jsx(tn,{icon:$$,variant:{size:"5xl"}}),f.jsx($i,{className:"hidden",position:jt.Right,type:"source",isConnectable:!1}),f.jsx($i,{className:"hidden",position:jt.Left,type:"target",isConnectable:!1})]})]})},Tle=({id:t})=>{const e=RN(),n=e.inProgress&&e.fromNode.id!==t;return f.jsxs("div",{className:"w-full h-full flex items-center justify-center ",children:[f.jsx(tn,{icon:$$,css:{base:["text-amber-600"]},variant:{size:"5xl"}}),f.jsxs("div",{className:"w-full h-full absolute top-0 left-0",children:[!e.inProgress&&f.jsx($i,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:jt.Right,type:"source"}),(!e.inProgress||n)&&f.jsx($i,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:jt.Left,type:"target",isConnectableStart:!1})]})]})},jle=()=>{const t=Fn([["GameMap"]]);return Jt({async mutationFn({id:e,x:n,y:r}){return Nt.transaction().execute(async i=>{await i.updateTable("Building").set({x:n,y:r}).where("id","=",e).execute()})},async onSuccess(){await t()}})},Rle=()=>{const t=Fn([["GameMap"]]);return Jt({async mutationFn({mapId:e,userId:n,buildingId:r,waypointId:i}){return Nt.transaction().execute(async s=>{await s.insertInto("Building_Waypoint").values({id:wn(),buildingId:r,waypointId:i}).execute(),setTimeout(async()=>{await $x({tx:s,mapId:e,userId:n}),await t()},0)})},async onSuccess(){await t()},onError(e){console.error(e)}})},Ole=()=>{const t=Fn([["GameMap"]]);return Jt({async mutationFn({mapId:e,userId:n,fromId:r,toId:i}){return Nt.transaction().execute(async s=>{await s.insertInto("Route").values({id:wn(),fromId:r,toId:i,userId:n,mapId:e}).execute(),setTimeout(async()=>{await $x({tx:s,mapId:e,userId:n}),await t()},0)})},async onSuccess(){await t()},onError(e){console.error(e)}})},Ale=()=>{const t=Fn([["GameMap"]]);return Jt({async mutationFn({userId:e,mapId:n,x:r,y:i}){return Nt.transaction().execute(async s=>await s.insertInto("Waypoint").values({id:wn(),userId:e,mapId:n,x:r,y:i}).returning("id").executeTakeFirstOrThrow())},async onSuccess(){await t()},onError(e){console.error(e)}})},qle=()=>Jt({async mutationFn({id:t,x:e,y:n}){return Nt.transaction().execute(async r=>r.updateTable("Waypoint").set({x:e,y:n}).where("id","=",t).execute())}}),Ple={stroke:"#DD44AA",strokeWidth:3},Fle={land:Nle,construction:Ile,queue:kle,building:_le,"building-route":Ele,waypoint:Cle,"waypoint-route":Tle},Dle={route:xle,"building-waypoint":vle},Lle=({userId:t,cycle:e,defaultNodes:n,defaultEdges:r,zoomToId:i,routing:s})=>{const o=Fn([["GameMap"]]),{mapId:a}=Zt({from:"/$locale/apps/derivean/map/$mapId"}),u=mu(),[d,p]=Jse(n),[h,g]=Zse(r),{getIntersectingNodes:x,fitView:_,getNode:S,getNodes:k,screenToFlowPosition:I}=Df();H.useEffect(()=>{p(n)},[n]),H.useEffect(()=>{g(r)},[r]),H.useEffect(()=>{i&&setTimeout(()=>{_({nodes:[{id:i}],duration:750})},250)},[_,i]);const E=jle(),C=Jt({async mutationFn(){return Nt.transaction().execute(async V=>{const z=k().filter(X=>x(X).filter(Z=>Z.type!=="land").length>0).map(X=>X.id);await V.updateTable("Building").where("id","in",V.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").where("l.mapId","=",a).select("b.id")).set({valid:!0}).execute(),await V.updateTable("Building").set({valid:!1}).where("id","in",z).execute()})},async onSuccess(){await o()}}),j=Ale(),q=qle(),F=Ole(),$=Rle(),P=H.useCallback(V=>{p(z=>CN(V,z))},[p]),O=H.useCallback((V,z)=>{p(X=>X.map(Z=>Z.id===z.id?{...Z,selected:!1}:Z))},[]),B=H.useCallback((V,z)=>{switch(z.type){case"construction":case"queue":case"building":E.mutate({id:z.id,x:z.position.x,y:z.position.y},{onSuccess(){C.mutate()}});break;case"waypoint":q.mutate({id:z.id,x:z.position.x,y:z.position.y});break}},[x,E]),D=H.useCallback(V=>{const z=S(V.source),X=S(V.target);if(!(!z||!X))switch(`${z.type}:${X.type}`){case"building-route:waypoint-route":$.mutate({userId:t,mapId:a,buildingId:z.id,waypointId:X.id});break;case"waypoint-route:building-route":$.mutate({userId:t,mapId:a,buildingId:X.id,waypointId:z.id});break;case"waypoint-route:waypoint-route":F.mutate({userId:t,mapId:a,fromId:z.id,toId:X.id});break;default:console.warn(`Unknown connection: ${z.type}:${X.type}`);break}},[F]),W=H.useCallback((V,z)=>{if(!z.isValid&&z.fromNode){const{clientX:X,clientY:Z}="changedTouches"in V?V.changedTouches[0]:V,le=I({x:X-48,y:Z-48}),ie=z.fromNode.id,{type:ne}=z.fromNode;j.mutate({userId:t,mapId:a,...le},{async onSuccess({id:oe}){switch(ne){case"building-route":$.mutate({userId:t,mapId:a,buildingId:ie,waypointId:oe});break;case"waypoint-route":F.mutate({userId:t,mapId:a,fromId:ie,toId:oe});break}}})}},[I,j,F]);return f.jsx(f.Fragment,{children:f.jsxs("div",{className:"flex flex-row",children:[f.jsxs(p$,{nodes:d,edges:h,onNodesChange:P,onNodeDragStart:O,onNodeDragStop:B,onConnect:D,onConnectEnd:W,className:"grow h-screen",fitView:!0,snapToGrid:!0,snapGrid:[32,32],elementsSelectable:!1,nodeTypes:Fle,edgeTypes:Dle,connectionLineComponent:ble,connectionLineStyle:Ple,maxZoom:2,minZoom:.1,onDoubleClick:H.useCallback(()=>{u({search:{routing:!s}})},[u,s]),zoomOnDoubleClick:!1,children:[f.jsx(yle,{userId:t,mapId:a,cycle:e,css:{base:["react-flow__panel","absolute","top-1","right-16"]},onDoubleClick:V=>{V.preventDefault(),V.stopPropagation()}}),f.jsx(gle,{userId:t,mapId:a,css:{base:["react-flow__panel","absolute","top-1","right-1"]}}),f.jsx(y$,{orientation:"horizontal",showZoom:!1,showFitView:!1}),f.jsx(v$,{zoomable:!0,draggable:!0,pannable:!0,maskColor:"rgba(0,0,0,0.2)"}),f.jsx(m$,{variant:ha.Lines,className:"bg-slate-50",gap:32,size:1}),f.jsx(wle,{})]}),f.jsx(Ks,{})]})})},Mle=({cycle:t,userId:e,nodes:n,edges:r,zoomToId:i,routing:s})=>f.jsx(f$,{children:f.jsx(Lle,{userId:e,cycle:t,defaultNodes:n,defaultEdges:r,zoomToId:i,routing:s})}),vE=384,xE=128,$y=["p-2","bg-white","rounded-lg","border-[4px]","border-slate-300"],KI=Mt("/$locale/apps/derivean/map/$mapId")({validateSearch:yr(M.object({zoomToId:M.string().optional(),routing:M.boolean().optional()})),loaderDeps:({search:{routing:t}})=>({routing:t}),async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r},deps:{routing:i}}){const s=await n();return{user:s,land:await t.ensureQueryData({queryKey:["GameMap",r,"land","list"],async queryFn(){return e.transaction().execute(async o=>(await wr({select:o.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","r.color","l.x","l.y","l.width","l.height"]).where("l.mapId","=",r).orderBy("r.name"),output:M.object({id:M.string().min(1),name:M.string().min(1),color:M.string().min(1),x:M.number().int(),y:M.number().int(),width:M.number().int(),height:M.number().int()})})).map(u=>({id:u.id,position:{x:u.x,y:u.y},width:u.width,height:u.height,selectable:!0,draggable:!1,data:u,type:"land",className:sn($y,[u.color,"border-slate-600","opacity-25"]),zIndex:-1})))}}),construction:await t.ensureQueryData({queryKey:["GameMap",r,"construction"],async queryFn(){return e.transaction().execute(async o=>(await wr({select:o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bg.constructionId","bl.name","bg.x","bg.y","bg.valid"]).where("c.plan","=",!0).where("l.mapId","=",r).where("bg.userId","=",s.id),output:M.object({id:M.string().min(1),blueprintId:M.string().min(1),landId:M.string().min(1),constructionId:M.string().min(1),name:M.string().min(1),x:M.number(),y:M.number(),valid:ns()})})).map(u=>({id:u.id,data:u,position:{x:u.x,y:u.y},type:"construction",width:vE,height:xE,selectable:!1,className:sn($y,[u.valid?["border-green-500"]:["border-red-500"]]),extent:"parent",parentId:u.landId})))}}),queue:await t.ensureQueryData({queryKey:["GameMap",r,"queue",{routing:i}],async queryFn(){return e.transaction().execute(async o=>(await wr({select:o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bl.name","bg.x","bg.y","bg.valid","c.cycles","c.cycle"]).where("c.plan","=",!1).where("l.mapId","=",r).where("bg.userId","=",s.id),output:M.object({id:M.string().min(1),blueprintId:M.string().min(1),landId:M.string().min(1),name:M.string().min(1),x:M.number(),y:M.number(),cycles:M.number().int().nonnegative(),cycle:M.number().int().nonnegative(),valid:ns()})})).map(u=>({id:u.id,data:u,position:{x:u.x,y:u.y},type:i?"building-route":"queue",width:vE,height:xE,selectable:!1,className:sn($y,["border-amber-400","bg-amber-50"],u.valid?void 0:["border-red-500"]),extent:"parent",parentId:u.landId})))}}),building:await t.ensureQueryData({queryKey:["GameMap",r,"building",{routing:i}],async queryFn(){return e.transaction().execute(async o=>(await wr({select:o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bg.productionId","bg.recurringProductionId","bg.valid","bg.userId",u=>u.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.productionId").select("r.name").as("productionName"),u=>u.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.recurringProductionId").select("r.name").as("recurringProductionName"),u=>u.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(d=>ca.jsonObject({id:d.ref("p.id"),name:d.ref("r.name"),cycle:d.ref("p.cycle"),cycles:d.ref("p.cycles")}).as("production")).whereRef("p.buildingId","=","bg.id").as("production"),"bl.name","bg.x","bg.y"]).where("bg.constructionId","is",null).where("l.mapId","=",r).where("bg.userId","=",s.id),output:M.object({id:M.string().min(1),blueprintId:M.string().min(1),landId:M.string().min(1),userId:M.string().min(1),name:M.string().min(1),productionId:M.string().nullish(),recurringProductionId:M.string().nullish(),productionName:M.string().nullish(),recurringProductionName:M.string().nullish(),production:UD(M.object({id:M.string().min(1),name:M.string().min(1),cycle:M.number().int().nonnegative(),cycles:M.number().int().nonnegative()})).nullish(),x:M.number(),y:M.number(),valid:ns()})})).map(u=>({id:u.id,data:u,position:{x:u.x,y:u.y},type:i?"building-route":"building",width:vE,height:xE,selectable:!0,className:sn($y,u.valid?void 0:["border-red-500"]),extent:"parent",parentId:u.landId})))}}),waypoint:await t.ensureQueryData({queryKey:["GameMap",r,"waypoint","list",{routing:i}],async queryFn(){return e.transaction().execute(async o=>(await wr({select:o.selectFrom("Waypoint as wp").select(["wp.id","wp.x","wp.y","wp.mapId","wp.userId",u=>u.selectFrom("Transport as t").whereRef("t.waypointId","=","wp.id").select(d=>d.fn.count("t.id").as("transport")).as("transport")]).where("wp.mapId","=",r),output:M.object({id:M.string().min(1),mapId:M.string().min(1),userId:M.string().min(1),x:M.number(),y:M.number(),transport:M.number().int().nonnegative()})})).map(u=>({id:u.id,data:u,position:{x:u.x,y:u.y},type:i?"waypoint-route":"waypoint",width:96,height:96,selectable:!0,className:sn(["rounded-md","bg-slate-50","border","border-slate-500","text-slate-500","p-2",u.transport>0?["text-green-600","bg-green-100","border-green-600","border-2"]:void 0])})))}}),route:await t.ensureQueryData({queryKey:["GameMap",r,"route","list"],async queryFn(){return e.transaction().execute(async o=>{const a=await wr({select:o.selectFrom("Route as r").select(["r.id","r.fromId","r.toId",d=>d.selectFrom("Transport as t").where(p=>p.or([p("t.waypointId","=",p.ref("r.fromId")),p("t.waypointId","=",p.ref("r.toId"))])).select(p=>ca.jsonGroupArray({id:p.ref("t.id"),sourceId:p.ref("t.sourceId"),waypointId:p.ref("t.waypointId"),targetId:p.ref("t.targetId")}).as("transports")).as("transports")]).where("r.mapId","=",r).where("r.userId","=",s.id),output:M.object({id:M.string().min(1),fromId:M.string().min(1),toId:M.string().min(1),transports:ci(M.object({id:M.string().min(1),sourceId:M.string().min(1),waypointId:M.string().min(1),targetId:M.string().min(1)}))})}),{graph:u}=await hm({tx:o,userId:s.id,mapId:r});return a.map(d=>{const p=d.transports.map(x=>{const _=mm({mode:"path",graph:u,from:x.waypointId,to:x.targetId});return _?{transport:x,path:_,mark:_.includes(d.fromId)&&_.includes(d.toId),fromIndex:_.indexOf(x.targetId)-_.indexOf(d.fromId),toIndex:_.indexOf(x.targetId)-_.indexOf(d.toId)}:{path:void 0,mark:!1,fromIndex:0,toIndex:0}}).filter(({path:x})=>!!x),h=p.some(({mark:x,fromIndex:_,toIndex:S})=>x&&_<S),g=p.some(({mark:x,fromIndex:_,toIndex:S})=>x&&_>S);return{id:d.id,source:d.fromId,target:d.toId,type:"route",animated:h||g,markerStart:h?{type:Jl.ArrowClosed,color:"#23BC43"}:void 0,markerEnd:g?{type:Jl.ArrowClosed,color:"#23BC43"}:void 0,style:p.some(({mark:x})=>x)?{stroke:"#23BC43",strokeWidth:8}:{stroke:"#b1b1b7",strokeWidth:3}}})})}}),buildingWaypoint:await t.ensureQueryData({queryKey:["GameMap",r,"buildingWaypoint","list"],async queryFn(){return e.transaction().execute(async o=>{const a=await wr({select:o.selectFrom("Building_Waypoint as bw").select(["bw.id","bw.buildingId","bw.waypointId",d=>d.selectFrom("Transport as t").where(p=>p.or([p("t.waypointId","=",p.ref("bw.waypointId"))])).select(p=>ca.jsonGroupArray({id:p.ref("t.id"),sourceId:p.ref("t.sourceId"),waypointId:p.ref("t.waypointId"),targetId:p.ref("t.targetId")}).as("transports")).as("transports")]).leftJoin("Building as b","b.id","bw.buildingId").leftJoin("Land as l","l.id","b.landId").where("b.userId","=",s.id).where("l.mapId","=",r),output:M.object({id:M.string().min(1),buildingId:M.string().min(1),waypointId:M.string().min(1),transports:ci(M.object({id:M.string().min(1),sourceId:M.string().min(1),waypointId:M.string().min(1),targetId:M.string().min(1)}))})}),{graph:u}=await hm({tx:o,userId:s.id,mapId:r});return a.map(d=>{const p=d.transports.map(h=>{const g=mm({mode:"path",graph:u,from:h.sourceId,to:h.targetId});return g?{transport:h,path:g,mark:g.includes(d.buildingId),outbound:g.indexOf(h.waypointId)>g.indexOf(d.buildingId)}:{path:void 0,mark:!1,fromIndex:0,toIndex:0}}).filter(({path:h,mark:g})=>!!h&&g);return{id:d.id,source:d.buildingId,target:d.waypointId,type:"building-waypoint",animated:p.length>0,markerStart:p.some(({outbound:h})=>!h)?{type:Jl.ArrowClosed,color:"#23BC43"}:void 0,markerEnd:p.some(({outbound:h})=>h)?{type:Jl.ArrowClosed,color:"#23BC43"}:void 0,style:p.length>0?{stroke:"#23BC43",strokeWidth:8}:{stroke:"#b1b1b7",strokeWidth:3}}})})}}),cycle:await t.ensureQueryData({queryKey:["GameMap",r,"cycle"],async queryFn(){return e.transaction().execute(async o=>(await o.selectFrom("Cycle as c").select(a=>a.fn.count("c.id").as("count")).where("c.userId","=",s.id).executeTakeFirstOrThrow()).count)}})}},component(){const{user:t,land:e,construction:n,queue:r,building:i,waypoint:s,route:o,buildingWaypoint:a,cycle:u}=KI.useLoaderData(),{zoomToId:d,routing:p}=KI.useSearch(),h=H.useMemo(()=>[...e,...n,...r,...i,...s],[n,r,i,s,e]),g=H.useMemo(()=>[...o,...a],[o,a]);return f.jsx(Mle,{userId:t.id,cycle:u,nodes:h,edges:g,zoomToId:d,routing:p})}}),B$=Mt("/$locale/apps/derivean/db/schema")({async loader({context:{kysely:t}}){return{tables:await t.introspection.getTables()}},component(){const{tables:t}=B$.useLoaderData(),e=({dataType:i,isNullable:s})=>{const o=i.toLowerCase();let a=`z.never({message: '${i}'})`;switch(o){case"integer":{a="z.number().int()";break}case"float4":{a="z.number()";break}case"datetime":{a="z.string()";break}case"boolean":{a="withBoolSchema()";break}}return o.startsWith("varchar")&&(a=`z.string()${s?"":".min(1)"}`),`
// ${i} / ${s?"nullable":"not nullable"}
${a}${s?".nullish()":""}
`},n=t.map(i=>{const s=i.name.replaceAll("_","");return`
export const with${s}Schema = <
    TShapeSchema extends ShapeSchema,
    TFilterSchema extends FilterSchema,
>({
    shape,
    filter,
}: {
    shape: TShapeSchema;
    filter: TFilterSchema;
}) => {
    return withSourceSchema({
        entity: IdentitySchema.merge(z.object({
                ${i.columns.filter(({name:o})=>o!=="id").map(o=>`
    "${o.name}": ${e(o)}
        `.trim()).join(`,
			`)},
        })),
        shape,
        filter,
        sort: [${i.columns.map(o=>`"${o.name}"`).join(", ")}],
    });
}

export type ${s}Entity = ReturnType<typeof with${s}Schema>['~entity'];
            `.trim()}),r=t.map(i=>{const s=i.name.replaceAll("_","");return`${i.name}: ${s}Entity;`});return f.jsxs("pre",{children:[`
import {
    IdentitySchema,
    withSourceSchema,
    type FilterSchema,
    type ShapeSchema,
    withBoolSchema,
} from "@use-pico/common";
import { z } from "zod";
            `.trim(),`

${n.join(`

`)}`,`

export interface Database {
    ${r.join(`
	`)}
}
                `]})}}),x3=Ur(),$le=[x3({name:"name",header(){return f.jsx(J,{label:"User name (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsx(St,{to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:e})},size:14}),x3({name:"login",header(){return f.jsx(J,{label:"User login (label)"})},render({value:t}){return t},size:14})],Ble=({table:t,...e})=>{const n=Fn([["GameMap"],["Management"],["User_Inventory"]]),r=Jt({async mutationFn({userId:i}){return Nt.transaction().execute(async s=>{await s.deleteFrom("Map").where("userId","=",i).execute()})},async onSuccess(){await n()}});return f.jsx(zr,{table:Wr({...t,columns:$le}),action:{row({data:i}){return f.jsx(ur,{children:f.jsx(F1,{icon:Dr,onClick:()=>{r.mutateAsync({userId:i.id})},children:f.jsx(J,{label:"Reset game (menu)"})})})}},...e})},zle=GY({shape:M.object({name:M.string().min(1),login:M.string().min(1),password:M.string().min(1)}),filter:zi.merge(M.object({login:M.string().optional(),password:M.string().optional()}))}),yb=Mt("/$locale/apps/derivean/root/user/list")({validateSearch:yr(Br(zle)),loaderDeps({search:{filter:t,cursor:e}}){return{filter:t,cursor:e}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["User","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>cr({select:i.selectFrom("User as u").select(["u.id","u.name","u.login"]),output:M.object({id:M.string().min(1),name:M.string().min(1),login:M.string().min(1)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=yb.useLoaderData(),{filter:n,cursor:r,selection:i}=yb.useSearch(),s=yb.useNavigate(),{tva:o}=gr({from:"__root__"}),a=o().slots;return f.jsx("div",{className:a.base(),children:f.jsx(Ble,{table:{data:t,filter:{value:n,set:Mr(s)},selection:{type:"multi",value:i,set:ks(s)}},fulltext:{value:n?.fulltext,set:$r(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of users (label)"}),...Lr(s)}})})}}),Wle=({entity:t,...e})=>{const{locale:n}=Zt({from:"/$locale"});return f.jsxs(Rc,{...e,children:[f.jsx(ir,{icon:iN,to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:f.jsx(J,{label:"View detail (menu)"})}),f.jsx(ir,{icon:is,to:"/$locale/apps/derivean/root/user/$id/building/list",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Building list (menu)"})})]})},Ule=t=>{const{locale:e}=Zt({from:"/$locale"});return f.jsx(Af,{title:({entity:n})=>f.jsx(Pf,{icon:iN,title:n.name}),actions:()=>f.jsx(f.Fragment,{children:f.jsx(St,{icon:_x,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},children:f.jsx(J,{label:"User list (label)"})})}),...t})},z$=Mt("/$locale/apps/derivean/root/user/$id")({async loader({context:{kysely:t},params:{id:e}}){return t.transaction().execute(async n=>({entity:await wa({select:n.selectFrom("User as u").select(["u.id","u.name"]).where("u.id","=",e),output:M.object({id:M.string().min(1),name:M.string().min(1)})})}))},component(){const{tva:t}=gr({from:"__root__"}),{entity:e}=z$.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(Ule,{entity:e}),f.jsx(Wle,{entity:e}),f.jsx(Ks,{})]})}}),Ym=HY({shape:M.object({code:M.string().min(1),label:M.string().min(1),group:M.string().nullish(),sort:Fo()}),filter:zi.merge(M.object({code:M.string().optional(),group:M.string().optional()}))}),w3=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(Ym.shape),defaultValues:{sort:0,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"code",label:f.jsx(J,{label:"Tag code (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("code")})}),f.jsx(hn,{formState:s.formState,name:"label",label:f.jsx(J,{label:"Tag label (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("label")})}),f.jsx(hn,{formState:s.formState,name:"group",label:f.jsx(J,{label:"Tag group (label)"}),children:f.jsx("input",{type:"text",className:o.input(),...s.register("group")})}),f.jsx(hn,{formState:s.formState,name:"sort",label:f.jsx(J,{label:"Tag sort (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("sort")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:tm,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},wE=Ur(),Vle=[wE({name:"label",header(){return f.jsx(J,{label:"Tag label (label)"})},render({value:t}){return t},size:14}),wE({name:"code",header(){return f.jsx(J,{label:"Tag code (label)"})},render({value:t}){return t},size:14}),wE({name:"group",header(){return f.jsx(J,{label:"Tag group (label)"})},render({value:t}){return t},filter:{path:"group",onFilter({data:t,filter:e}){e.shallow("group",t.group)}},size:24})],W$=({group:t,table:e,...n})=>{const r=Fn([["Tag"],["Resource"]]);return f.jsx(zr,{table:Wr({...e,columns:Vle}),action:{table(){return f.jsx(ur,{children:f.jsx(Rn,{label:f.jsx(J,{label:"Create tag (menu)"}),textTitle:f.jsx(J,{label:"Create tag (modal)"}),icon:tm,children:f.jsx(w3,{defaultValues:{group:t},mutation:Jt({async mutationFn(i){return qn.promise(Nt.transaction().execute(s=>s.insertInto("Tag").values({id:wn(),...i}).returningAll().executeTakeFirstOrThrow()),si("Create tag"))},async onSuccess(){await r()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit tag (modal)"}),icon:tm,children:f.jsx(w3,{defaultValues:{group:t,...i},mutation:Jt({async mutationFn(s){return qn.promise(Nt.transaction().execute(o=>o.updateTable("Tag").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),si("Edit tag"))},async onSuccess(){await r()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete tag (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>{await Nt.transaction().execute(s=>s.deleteFrom("Tag").where("id","=",i.id).execute())},textContent:f.jsx(J,{label:"Tag delete (content)"}),textToast:"Tag delete",invalidator:r})})]})}},...n})},bb=Mt("/$locale/apps/derivean/root/tag/list")({validateSearch:yr(Br(Ym)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Tag","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async i=>cr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]).orderBy("t.sort","desc"),output:M.object({id:M.string().min(1),code:M.string().min(1),label:M.string().min(1),group:M.string().nullish(),sort:M.number().int().nonnegative()}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=bb.useLoaderData(),{filter:n,cursor:r,selection:i}=bb.useSearch(),s=bb.useNavigate(),{tva:o}=gr({from:"__root__"}),a=o().slots;return f.jsx("div",{className:a.base(),children:f.jsx(W$,{table:{data:t,filter:{value:n,set:Mr(s)},selection:{type:"multi",value:i,set:ks(s)}},fulltext:{value:n?.fulltext,set:$r(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of items"}),...Lr(s)}})})}}),Hle=({group:t,...e})=>f.jsx(nL,{icon:tm,table:n=>f.jsx(W$,{group:t,...n}),render:({entities:n})=>f.jsx(sL,{tags:n}),queryKey:"Tag",query:async({filter:n,cursor:r})=>Nt.transaction().execute(async i=>cr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]),output:Ym.entity,query({select:s,where:o}){let a=s;if(o?.id&&(a=a.where("t.id","=",o.id)),o?.idIn&&(a=a.where("t.id","in",o.idIn)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("t.code","like",u),d("t.group","like",u),d("t.label","like",u),d("t.id","like",u)]))}return a},filter:n,cursor:r})),...e}),U$=VY({shape:M.object({name:M.string().min(1),transport:xo(),tagIds:M.array(M.string()).optional()}),filter:zi.merge(M.object({name:M.string().optional()}))}),_3=({group:t="resource",mutation:e,defaultValues:n,variant:r,tva:i=gi,css:s})=>{const o=yi({resolver:bi(U$.shape),defaultValues:{transport:1,...n}}),a=i({...r,isLoading:o.formState.isLoading,isSubmitting:o.formState.isSubmitting,css:s}).slots;return f.jsxs("form",{className:a.base(),onSubmit:Ui({form:o,mutation:e}),children:[f.jsx(di,{variant:{highlight:!0},error:o.formState.errors.root}),f.jsx(hn,{formState:o.formState,name:"name",label:f.jsx(J,{label:"Resource name (label)"}),children:f.jsx("input",{type:"text",className:a.input(),...o.register("name")})}),f.jsx(hn,{formState:o.formState,name:"transport",label:f.jsx(J,{label:"Resource transport (label)"}),hint:f.jsx(J,{label:"Amount of resources transported per cycle (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:a.input(),min:.5,step:.5,...o.register("transport")})}),f.jsx(hn,{formState:o.formState,name:"tagIds",label:f.jsx(J,{label:"Resource tags (label)"}),children:f.jsx(Mi,{control:o.control,name:"tagIds",render:({field:{ref:u,...d}})=>f.jsx(Hle,{group:t,textTitle:f.jsx(J,{label:"Select resource tags (title)"}),textSelect:f.jsx(J,{label:"Select resource tags (label)"}),allowEmpty:!0,...d})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:Ir,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},wd=Ur(),Gle=[wd({name:"name",header(){return f.jsx(J,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsx(St,{to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),wd({name:"transport",header(){return f.jsx(J,{label:"Resource transport (label)"})},render({value:t}){return fn({number:t})},size:12}),wd({name:"countProduction",header(){return f.jsx(J,{label:"Resource production count (label)"})},render({value:t}){return f.jsx(Di,{css:{base:t!==void 0&&t===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:fn({number:t})})},size:12}),wd({name:"countRequirement",header(){return f.jsx(J,{label:"Resource requirement count (label)"})},render({data:t,value:e}){return f.jsx(Di,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:fn({number:e})})},size:12}),wd({name:"countProductionRequirement",header(){return f.jsx(J,{label:"Resource production requirement count (label)"})},render({data:t,value:e}){return f.jsx(Di,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:fn({number:e})})},size:18}),wd({name:"tags",header(){return f.jsx(J,{label:"Resource tags (label)"})},render({value:t}){return f.jsx(sL,{tags:t})},size:32})],V$=({group:t,table:e,...n})=>{const r=Fn([["Resource"],["Resource_Tag"]]);return f.jsx(zr,{table:Wr({...e,columns:Gle}),action:{table(){return f.jsx(ur,{children:f.jsx(Rn,{label:f.jsx(J,{label:"Create resource (menu)"}),textTitle:f.jsx(J,{label:"Create resource (modal)"}),icon:Ir,children:({close:i})=>f.jsx(_3,{group:t,mutation:Jt({async mutationFn({name:s,transport:o,tagIds:a=[]}){return Nt.transaction().execute(async u=>{const d=await u.insertInto("Resource").values({id:wn(),name:s,transport:o}).returningAll().executeTakeFirstOrThrow();return a.length&&await u.insertInto("Resource_Tag").values(a.map(p=>({id:wn(),resourceId:d.id,tagId:p}))).execute(),d})},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit resource (modal)"}),icon:Ir,children:({close:s})=>f.jsx(_3,{defaultValues:{...i,tagIds:i.tags.map(({id:o})=>o)},mutation:Jt({async mutationFn({tagIds:o,...a}){return qn.promise(Nt.transaction().execute(async u=>{const d=await u.updateTable("Resource").set(a).where("id","=",i.id).returningAll().executeTakeFirstOrThrow();return await u.deleteFrom("Resource_Tag").where("resourceId","=",d.id).execute(),o?.length&&await u.insertInto("Resource_Tag").values(o.map(p=>({id:wn(),resourceId:d.id,tagId:p}))).execute(),d}),si("Update resource"))},async onSuccess(){await r(),s()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete resource (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async s=>s.deleteFrom("Resource").where("id","=",i.id).execute()),textContent:f.jsx(J,{label:"Resource delete (content)"}),textToast:"Resource delete",invalidator:r})})]})}},...n})},vb=Mt("/$locale/apps/derivean/root/resource/list")({validateSearch:yr(Br(U$)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Resource","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>cr({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>Sr`json_group_array(json_object(
                                            'id', ${o.ref("t.id")},
                                            'code', ${o.ref("t.code")},
                                            'group', ${o.ref("t.group")},
                                            'sort', ${o.ref("t.sort")},
                                            'label', ${o.ref("t.label")}
                                        ))`.as("tags")).where("t.id","in",s.selectFrom("Resource_Tag as rt").select("rt.tagId").whereRef("rt.resourceId","=","r.id")).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("r.id","like",u),d("r.name","like",u),d("r.id","in",d.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return a},output:M.object({id:M.string().min(1),name:M.string().min(1),transport:xo(),countRequirement:M.number().nonnegative(),countProduction:M.number().nonnegative(),countProductionRequirement:M.number().nonnegative(),tags:ci(Ym.entity)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=vb.useLoaderData(),{filter:n,cursor:r,selection:i}=vb.useSearch(),s=vb.useNavigate(),{tva:o}=gr({from:"__root__"}),a=o().slots;return f.jsx("div",{className:a.base(),children:f.jsx(V$,{table:{data:t,filter:{value:n,set:Mr(s)},selection:{type:"multi",value:i,set:ks(s)}},fulltext:{value:n?.fulltext,set:$r(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of items"}),...Lr(s)}})})}}),Kle=({entity:t,...e})=>{const{locale:n}=Zt({from:"/$locale"});return f.jsx(Rc,{...e,children:f.jsx(ir,{icon:Ir,to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:f.jsx(J,{label:"View detail (menu)"})})})},Qle=t=>{const{locale:e}=Zt({from:"/$locale"});return f.jsx(Af,{title:({entity:n})=>f.jsx(Pf,{icon:Ir,title:n.name}),actions:()=>f.jsx(f.Fragment,{children:f.jsx(St,{icon:_x,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:f.jsx(J,{label:"Resource list (label)"})})}),...t})},H$=Mt("/$locale/apps/derivean/root/resource/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Resource",n],async queryFn(){return e.transaction().execute(async r=>({entity:await wa({select:r.selectFrom("Resource as r").select(["r.id","r.name"]).where("r.id","=",n),output:M.object({id:M.string().min(1),name:M.string().min(1)})})}))}})},component:()=>{const{tva:t}=gr({from:"__root__"}),{entity:e}=H$.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(Qle,{entity:e}),f.jsx(Kle,{entity:e}),f.jsx(Ks,{})]})}}),xb=Mt("/$locale/apps/derivean/root/region/list")({validateSearch:yr(Br(AN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Region","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>cr({select:i.selectFrom("Region as r").select(["r.id","r.name","r.color","r.minWidth","r.maxWidth","r.minHeight","r.maxHeight","r.probability","r.limit"]).orderBy("r.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("r.id","like",u),d("r.name","like",u)]))}return a},output:M.object({id:M.string().min(1),name:M.string().min(1),color:M.string().min(1),minWidth:M.number().int().min(0),maxWidth:M.number().int().min(0),minHeight:M.number().int().min(0),maxHeight:M.number().int().min(0),probability:M.number().int().min(0),limit:M.number().int().min(0)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=xb.useLoaderData(),{filter:n,cursor:r,selection:i}=xb.useSearch(),s=xb.useNavigate(),{tva:o}=gr({from:"__root__"}),a=o().slots;return f.jsx("div",{className:a.base(),children:f.jsx(x$,{table:{data:t,filter:{value:n,set:Mr(s)},selection:{type:"multi",value:i,set:ks(s)}},fulltext:{value:n?.fulltext,set:$r(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of items"}),...Lr(s)}})})}}),Jle=En({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2","bg-sky-100","border-sky-300","text-sky-500"]},variant:{missing:{true:[]}},match:[{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{missing:!1}}),G$=({dependencies:t,variant:e,tva:n=Jle,css:r,...i})=>{const s=n({...e,css:r}).slots;return f.jsx(hu,{items:t,render:({entity:o})=>f.jsx("div",{className:s.item(),children:f.jsx("div",{children:o.name})}),...i})};var By={},S3;function Zle(){if(S3)return By;S3=1;function t(r,i,s,o){var a=new Set;return function(u){if(!a.has(u)){var d=new Set,p=[],h=[];for(h.push({node:u,processed:!1});h.length>0;){var g=h[h.length-1],x=g.processed,_=g.node;if(x)h.pop(),p.pop(),d.delete(_),a.add(_),(!i||r.get(_).length===0)&&s.push(_);else{if(a.has(_)){h.pop();continue}else if(d.has(_)){if(o){h.pop();continue}throw p.push(_),new n(p)}d.add(_),p.push(_);for(var S=r.get(_),k=S.length-1;k>=0;k--)h.push({node:S[k],processed:!1});g.processed=!0}}}}}var e=By.DepGraph=function(i){this.nodes=new Map,this.outgoingEdges=new Map,this.incomingEdges=new Map,this.circular=i&&!!i.circular};e.prototype={size:function(){return this.nodes.size},addNode:function(r,i){this.hasNode(r)||(arguments.length===2?this.nodes.set(r,i):this.nodes.set(r,r),this.outgoingEdges.set(r,[]),this.incomingEdges.set(r,[]))},removeNode:function(r){this.hasNode(r)&&(this.nodes.delete(r),this.outgoingEdges.delete(r),this.incomingEdges.delete(r),[this.incomingEdges,this.outgoingEdges].forEach(function(i){i.forEach(function(s){var o=s.indexOf(r);o>=0&&s.splice(o,1)})}))},hasNode:function(r){return this.nodes.has(r)},getNodeData:function(r){if(this.hasNode(r))return this.nodes.get(r);throw new Error("Node does not exist: "+r)},setNodeData:function(r,i){if(this.hasNode(r))this.nodes.set(r,i);else throw new Error("Node does not exist: "+r)},addDependency:function(r,i){if(!this.hasNode(r))throw new Error("Node does not exist: "+r);if(!this.hasNode(i))throw new Error("Node does not exist: "+i);return this.outgoingEdges.get(r).indexOf(i)===-1&&this.outgoingEdges.get(r).push(i),this.incomingEdges.get(i).indexOf(r)===-1&&this.incomingEdges.get(i).push(r),!0},removeDependency:function(r,i){var s;this.hasNode(r)&&(s=this.outgoingEdges.get(r).indexOf(i),s>=0&&this.outgoingEdges.get(r).splice(s,1)),this.hasNode(i)&&(s=this.incomingEdges.get(i).indexOf(r),s>=0&&this.incomingEdges.get(i).splice(s,1))},clone:function(){var r=this,i=new e;return r.nodes.forEach(function(s,o){i.nodes.set(o,s),i.outgoingEdges.set(o,r.outgoingEdges.get(o).slice(0)),i.incomingEdges.set(o,r.incomingEdges.get(o).slice(0))}),i.circular=r.circular,i},directDependenciesOf:function(r){if(this.hasNode(r))return this.outgoingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},directDependantsOf:function(r){if(this.hasNode(r))return this.incomingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},dependenciesOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.outgoingEdges,i,s,this.circular);o(r);var a=s.indexOf(r);return a>=0&&s.splice(a,1),s}else throw new Error("Node does not exist: "+r)},dependantsOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.incomingEdges,i,s,this.circular);o(r);var a=s.indexOf(r);return a>=0&&s.splice(a,1),s}else throw new Error("Node does not exist: "+r)},overallOrder:function(r){var i=this,s=[],o=Array.from(this.nodes.keys());if(o.length===0)return s;if(!this.circular){var a=t(this.outgoingEdges,!1,[],this.circular);o.forEach(function(d){a(d)})}var u=t(this.outgoingEdges,r,s,this.circular);return o.filter(function(d){return i.incomingEdges.get(d).length===0}).forEach(function(d){u(d)}),this.circular&&o.filter(function(d){return s.indexOf(d)===-1}).forEach(function(d){u(d)}),s},entryNodes:function(){var r=this;return Array.from(this.nodes.keys()).filter(function(i){return r.incomingEdges.get(i).length===0})}},e.prototype.directDependentsOf=e.prototype.directDependantsOf,e.prototype.dependentsOf=e.prototype.dependantsOf;var n=By.DepGraphCycleError=function(r){var i="Dependency Cycle Found: "+r.join(" -> "),s=new Error(i);return s.cyclePath=r,Object.setPrototypeOf(s,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(s,n),s};return n.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(n,Error),By}var K$=Zle();const Xm=async({tx:t})=>{const e=new K$.DepGraph({circular:!1});for await(const{id:n,name:r}of await t.selectFrom("Blueprint").select(["id","name"]).execute())e.addNode(n,r);for await(const{blueprintId:n,dependencyId:r}of await t.selectFrom("Blueprint_Dependency").select(["blueprintId","dependencyId"]).execute())e.addDependency(n,r);return e},vm=async({tx:t})=>{const e=Xm({tx:t}),n=await t.selectFrom("Blueprint as bl").select(["bl.id"]).execute();for await(const r of n){const i=(await e).dependenciesOf(r.id);await t.updateTable("Blueprint").set({sort:i.length}).where("id","=",r.id).execute()}},Q$=async({tx:t,blueprintId:e})=>{await t.deleteFrom("Blueprint_Inventory").where("blueprintId","=",e).execute();const n=await t.selectFrom("Blueprint_Requirement").select(["resourceId","amount"]).where("blueprintId","=",e).execute();for await(const{resourceId:i,amount:s}of n)await t.insertInto("Blueprint_Inventory").values({id:wn(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:wn(),resourceId:i,amount:0,limit:s,type:"construction"}).returning("id").executeTakeFirstOrThrow()).id}).execute();const r=await t.selectFrom(t.selectFrom("Blueprint_Production").select(["resourceId","amount"]).where("blueprintId","=",e).union(t.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).union(t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).as("resources")).select(["resourceId",i=>i.fn.max("amount").as("amount")]).groupBy("resourceId").orderBy("amount","desc").execute();for await(const{resourceId:i,amount:s}of r)await t.insertInto("Blueprint_Inventory").values({id:wn(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:wn(),resourceId:i,amount:0,limit:s*5,type:"storage"}).returning("id").executeTakeFirstOrThrow()).id}).execute()},Yle=En({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]},variant:{passive:{true:[]},missing:{true:[]}},match:[{if:{passive:!0},then:{item:["bg-purple-100","border-purple-300","text-purple-500"]}},{if:{passive:!1},then:{item:["bg-sky-100","border-sky-300","text-sky-500"]}},{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{passive:!1,missing:!1}}),Wx=({requirements:t,diff:e,variant:n,tva:r=Yle,css:i,...s})=>{const o=r({...n,css:i}).slots;return f.jsx(hu,{items:t,render:({entity:a})=>{const u=e?.find(p=>p.resourceId===a.resourceId),d=u?.amount?u.amount-a.amount:-a.amount;return f.jsxs("div",{className:o.item({css:!e||d>=0?[]:["text-red-700","bg-red-100","border-red-300"],passive:a.passive}),children:[f.jsx("div",{children:a.name}),f.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",fn({number:a.amount})]}),e?d>=0?f.jsx(tn,{icon:"icon-[pajamas--check-sm]",css:{base:["text-emerald-600"]}}):f.jsxs("div",{className:"flex flex-row gao-2 items-center text-sm text-red-500",children:[f.jsx(tn,{icon:"icon-[charm--cross]",css:{base:["text-red-500"]}}),"(",fn({number:d}),")"]}):null]})},...s})},Gp=Ur(),Xle=[Gp({name:"name",header(){return f.jsx(J,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(St,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:n},search:{zoomTo:t.id}}),f.jsx(St,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),Gp({name:"dependencies",header(){return f.jsx(J,{label:"Blueprint dependencies (label)"})},render({value:t}){return t.length>0?f.jsxs("div",{className:"flex flex-col flex-wrap gap-2 w-full",children:[f.jsx(G$,{textTitle:f.jsx(J,{label:"Blueprint dependencies (title)"}),dependencies:t}),f.jsx("div",{className:"border-b border-slate-200"})]}):f.jsx(J,{label:"No dependencies (label)"})},size:32}),Gp({name:"requirements",header(){return f.jsx(J,{label:"Required resources (label)"})},render({value:t}){return f.jsx(Wx,{textTitle:f.jsx(J,{label:"Blueprint requirements (title)"}),textEmpty:f.jsx(J,{label:"No requirements (label)"}),requirements:t})},size:32}),Gp({name:"cycles",header(){return f.jsx(J,{label:"Construction cycles (label)"})},render({value:t}){return f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx(tn,{icon:gm}),fn({number:t})]})},size:8}),Gp({name:"limit",header(){return f.jsx(J,{label:"Building limit (label)"})},render({value:t}){return fn({number:t})},size:8})],J$=({dependencies:t,table:e,...n})=>{const r=Fn([["Blueprint_Inventory"],["Blueprint"],["Inventory"]]),i=Jt({async mutationFn(){return Nt.transaction().execute(async s=>{const o=await s.selectFrom("Blueprint").select(["id"]).execute();for await(const{id:a}of o)await Q$({tx:s,blueprintId:a})})},async onSuccess(){await r()},onError(s){console.error(s)}});return f.jsx(zr,{table:Wr({...e,columns:Xle,context:{dependencies:t}}),action:{table(){return f.jsxs(ur,{children:[f.jsx(F1,{icon:Xa,onClick:()=>{qn.promise(i.mutateAsync(),si("Fill inventories"))},children:f.jsx(J,{label:"Fill inventories (label)"})}),f.jsx(Rn,{label:f.jsx(J,{label:"Create blueprint (menu)"}),textTitle:f.jsx(J,{label:"Create blueprint (modal)"}),icon:Mn,children:({close:s})=>f.jsx(Mv,{mutation:Jt({async mutationFn({regionIds:o,...a}){Nt.transaction().execute(async u=>{const d=await u.insertInto("Blueprint").values({id:wn(),...a}).returningAll().executeTakeFirstOrThrow();return o?.length&&await u.insertInto("Blueprint_Region").values(o.map(p=>({id:wn(),blueprintId:d.id,regionId:p}))).execute(),await vm({tx:u}),d})},async onSuccess(){await r(),s()}})})})]})},row({data:s}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit blueprint (modal)"}),icon:Mn,children:({close:o})=>f.jsx(Mv,{defaultValues:{...s,regionIds:s.regions.map(a=>a.id)},mutation:Jt({async mutationFn({regionIds:a,...u}){return qn.promise(Nt.transaction().execute(async d=>{const p=await d.updateTable("Blueprint").set(u).where("id","=",s.id).returningAll().executeTakeFirstOrThrow();return await d.deleteFrom("Blueprint_Region").where("blueprintId","=",p.id).execute(),a?.length&&await d.insertInto("Blueprint_Region").values(a.map(h=>({id:wn(),blueprintId:p.id,regionId:h}))).execute(),await vm({tx:d}),p}),si("Update blueprint"))},async onSuccess(){await r(),o()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete blueprint (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",s.id).execute()),textContent:f.jsx(J,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:r})})]})}},...n})},vu=qY({shape:M.object({dependencyId:M.string().min(1)}),filter:zi.merge(M.object({blueprintId:M.string().optional(),dependencyId:M.string().optional()}))}),Bf=$Y({shape:M.object({resourceId:M.string().min(1),amount:xo(),passive:M.boolean()}),filter:zi.merge(M.object({blueprintId:M.string().optional(),resourceId:M.string().optional()}))}),wb=Mt("/$locale/apps/derivean/root/blueprint/list")({validateSearch:yr(Br(qN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles","bl.limit",o=>o.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(a=>ca.jsonGroupArray({id:a.ref("r.id"),name:a.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","bl.id").as("regions"),o=>o.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(a=>Sr`json_group_array(json_object(
                                                'id', ${a.ref("br.id")},
                                                'amount', ${a.ref("br.amount")},
                                                'passive', ${a.ref("br.passive")},
                                                'resourceId', ${a.ref("br.resourceId")},
                                                'blueprintId', ${a.ref("br.blueprintId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),o=>o.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(a=>Sr`json_group_array(json_object(
                                                        'id', ${a.ref("bd.id")},
                                                        'dependencyId', ${a.ref("bd.dependencyId")},
                                                        'blueprintId', ${a.ref("bd.blueprintId")},
                                                        'name', ${a.ref("bl2.name")}
                                                    ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;if(a?.id&&(u=u.where("bl.id","=",a.id)),a?.fulltext){const d=`%${a.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bl.id","like",d),p("bl.name","like",d)]))}return u},output:M.object({id:M.string().min(1),name:M.string().min(1),cycles:M.number().nonnegative(),sort:M.number().nonnegative(),limit:M.number().nonnegative(),regions:ci(M.object({id:M.string().min(1),name:M.string().min(1)})),requirements:ci(Bf.entity.merge(M.object({name:M.string().min(1)}))),dependencies:ci(vu.entity.merge(M.object({name:M.string().min(1)})))}),filter:n,cursor:r}))}}),dependencies:await e.transaction().execute(async s=>Xm({tx:s}))}},component(){const{data:{data:t,count:e},dependencies:n}=wb.useLoaderData(),{filter:r,cursor:i,selection:s}=wb.useSearch(),o=wb.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(J$,{dependencies:n,table:{data:t,filter:{value:r,set:Mr(o)},selection:{type:"multi",value:s,set:ks(o)}},fulltext:{value:r?.fulltext,set:$r(o)},cursor:{count:e,cursor:i,textTotal:f.jsx(J,{label:"Number of blueprints"}),...Lr(o)}})})}}),eue=({entity:t,...e})=>{const{locale:n}=Zt({from:"/$locale"});return f.jsxs(Rc,{...e,children:[f.jsx(ir,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:f.jsx(J,{label:"View detail (menu)"})}),f.jsx(ir,{icon:is,to:"/$locale/apps/derivean/root/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Blueprint dependencies (menu)"})}),f.jsx(ir,{icon:Ir,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Required resources (menu)"})}),f.jsx(ir,{icon:Hs,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Resource production (menu)"})}),f.jsx(ir,{icon:Xa,to:"/$locale/apps/derivean/root/blueprint/$id/inventory",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Blueprint inventory (menu)"})}),f.jsx(ir,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Blueprint conflicts (menu)"})}),f.jsx(ir,{icon:D2,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Edit (menu)"})})]})},tue=t=>{const{locale:e}=Zt({from:"/$locale"});return f.jsx(Af,{title:({entity:n})=>f.jsx(Pf,{icon:Mn,title:n.name}),actions:({entity:n})=>f.jsxs(f.Fragment,{children:[f.jsx(St,{icon:_x,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},children:f.jsx(J,{label:"Blueprint list (label)"})}),f.jsx(St,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},search:{zoomTo:n.id},children:f.jsx(J,{label:"Editor (label)"})})]}),...t})},Z$=Mt("/$locale/apps/derivean/root/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>wa({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",s=>s.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(o=>ca.jsonGroupArray({id:o.ref("r.id"),name:o.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","bl.id").as("regions"),s=>s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(o=>ca.jsonGroupArray({id:o.ref("br.id"),amount:o.ref("br.amount"),passive:o.ref("br.passive"),resourceId:o.ref("br.resourceId"),blueprintId:o.ref("br.blueprintId"),name:o.ref("r.name")}).as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),s=>s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(o=>ca.jsonGroupArray({id:o.ref("bd.id"),dependencyId:o.ref("bd.dependencyId"),blueprintId:o.ref("bd.blueprintId"),name:o.ref("bl2.name")}).as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("bl.id","like",u),d("bl.name","like",u),d("bl.id","in",d.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),d("bl.id","in",d.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return a},output:M.object({id:M.string().min(1),name:M.string().min(1),cycles:M.number().nonnegative(),sort:M.number().nonnegative(),regions:ci(M.object({id:M.string().min(1),name:M.string().min(1)})),requirements:ci(Bf.entity.merge(M.object({name:M.string().min(1)}))),dependencies:ci(vu.entity.merge(M.object({name:M.string().min(1)})))})}))}}),graph:await e.transaction().execute(async i=>Xm({tx:i}))}},component(){const{tva:t}=gr({from:"__root__"}),{entity:e}=Z$.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(tue,{entity:e}),f.jsx(eue,{entity:e}),f.jsx(Ks,{})]})}}),nue=Mt("/$locale/apps/derivean/map/$mapId/view")({}),E3=Ur(),rue=[E3({name:"name",header(){return f.jsx(J,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(St,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/game",params:{locale:n},search:{blueprintId:t.id}}),f.jsx(St,{icon:Mn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),E3({name:"cycles",header(){return f.jsx(J,{label:"Construction cycles (label)"})},render({value:t}){return f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx(tn,{icon:gm}),fn({number:t})]})},size:8})],iue=({table:t,...e})=>f.jsx(zr,{table:Wr({...t,columns:rue}),...e}),_b=Mt("/$locale/apps/derivean/game/blueprint/list")({validateSearch:yr(Br(qN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{filter:r,cursor:i}}){const s=await n();return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:r,cursor:i}],async queryFn(){return e.transaction().execute(async a=>cr({select:a.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","in",a.selectFrom("Building as bg").select("bg.blueprintId").where("bg.userId","=",s.id)).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:u,where:d}){let p=u;if(d?.id&&(p=p.where("bl.id","=",d.id)),d?.fulltext){const h=`%${d.fulltext}%`.toLowerCase();p=p.where(g=>g.or([g("bl.id","like",h),g("bl.name","like",h)]))}return p},output:M.object({id:M.string().min(1),name:M.string().min(1),cycles:M.number().nonnegative()}),filter:r,cursor:i}))}})}},component(){const{data:{data:t,count:e}}=_b.useLoaderData(),{filter:n,cursor:r}=_b.useSearch(),i=_b.useNavigate(),{tva:s}=gr({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(iue,{table:{data:t,filter:{value:n,set:Mr(i)}},fulltext:{value:n?.fulltext,set:$r(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of blueprints"}),...Lr(i)}})})}}),sue=({entity:t,...e})=>{const{locale:n}=Zt({from:"/$locale"});return f.jsxs(Rc,{...e,children:[f.jsx(ir,{icon:Mn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:f.jsx(J,{label:"View detail (menu)"})}),f.jsx(ir,{icon:is,to:"/$locale/apps/derivean/game/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Blueprint dependencies (menu)"})}),f.jsx(ir,{icon:Ir,to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Required resources (menu)"})}),f.jsx(ir,{icon:Hs,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Resource production (menu)"})}),f.jsx(ir,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Blueprint conflicts (menu)"})})]})},oue=t=>{const{locale:e}=Zt({from:"/$locale"});return f.jsx(Af,{title:({entity:n})=>f.jsx(Pf,{icon:Mn,title:n.name}),actions:()=>f.jsx(f.Fragment,{children:f.jsx(St,{icon:_x,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:e},children:f.jsx(J,{label:"Blueprint list (label)"})})}),...t})},Y$=Mt("/$locale/apps/derivean/game/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>wa({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("bl.id","like",u),d("bl.name","like",u),d("bl.id","in",d.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),d("bl.id","in",d.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return a},output:M.object({id:M.string().min(1),name:M.string().min(1),cycles:M.number().nonnegative()})}))}}),graph:await e.transaction().execute(async i=>Xm({tx:i}))}},component(){const{tva:t}=gr({from:"__root__"}),{entity:e}=Y$.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(oue,{entity:e}),f.jsx(sue,{entity:e}),f.jsx(Ks,{})]})}}),aue=Mt("/$locale/apps/derivean/root/user/$id/view")({component(){return"yep"}}),lue=Mt("/$locale/apps/derivean/root/resource/$id/view")({component(){return f.jsx("div",{children:'Hello "/$locale/apps/derivean/root/resource/$id/view/"!'})}}),uue=Mt("/$locale/apps/derivean/root/region/$id/view")({component(){return"view"}}),$N="icon-[carbon--document-requirements]",cue=({entity:t,...e})=>{const{locale:n}=Zt({from:"/$locale"});return f.jsxs(Rc,{...e,children:[f.jsx(ir,{icon:$N,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Production requirements (menu)"})}),f.jsx(ir,{icon:Ir,to:"/$locale/apps/derivean/root/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Production resource requirements (menu)"})}),f.jsx(ir,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Production resource dependencies (menu)"})})]})},due=t=>{const{locale:e}=Zt({from:"/$locale"});return f.jsx(Af,{title:({entity:n})=>f.jsx(Pf,{icon:Hs,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>f.jsx(f.Fragment,{children:f.jsx(St,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:f.jsx(J,{label:"Building base detail (label)"})})}),...t})},X$=Mt("/$locale/apps/derivean/root/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await wa({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:M.object({id:M.string().min(1),resource:M.string().min(1),blueprint:M.string().min(1),blueprintId:M.string().min(1),amount:M.number().nonnegative(),cycles:M.number().int().nonnegative()})})}))}})},component(){const{entity:t}=X$.useLoaderData(),{tva:e}=gr({from:"__root__"}),n=e().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(due,{entity:t}),f.jsx(cue,{entity:t}),f.jsx(Ks,{})]})}}),fue=({graph:t,blueprintId:e,mode:n="dependencies",reverse:r=!1})=>{try{const i=(s=>r?s.reverse():s)(n==="dependants"?t.dependantsOf(e):t.dependenciesOf(e));return f.jsxs("div",{className:sn(["flex","flex-row","flex-wrap","gap-2","items-center"]),children:[i.length>0?f.jsx(tn,{css:{base:["text-emerald-500"]},icon:"icon-[charm--circle-tick]"}):f.jsx(tn,{css:{base:["text-amber-500"]},icon:"icon-[fe--question]"}),i.length>0?i.map(s=>f.jsx(Di,{css:{base:["bg-emerald-200","text-emerald-700","border-emerald-500"]},children:t.getNodeData(s)},wn())):f.jsx(J,{css:{base:["text-amber-500","font-bold"]},label:"No dependents (label)"})]})}catch(i){return i instanceof K$.DepGraphCycleError?f.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center"]),children:[f.jsx(tn,{css:{base:["text-red-500"]},icon:"icon-[charm--circle-cross]"}),i.cyclePath.map(s=>f.jsx(Di,{css:{base:["bg-red-200","text-red-700","border-red-500"]},children:t.getNodeData(s)},wn()))]}):"kaboom"}},pue=({dependencies:t,...e})=>f.jsx(R2,{items:[{id:"name",label:f.jsx(J,{label:"Building name (label)"}),render({entity:n}){return n.name}},{id:"cycles",label:f.jsx(J,{label:"Construction cycles (label)"}),render({entity:n}){return fn({number:n.cycles})}},{id:"regions",label:f.jsx(J,{label:"Regions (label)"}),render({entity:n}){return f.jsx(hu,{items:n.regions,css:{base:["flex","flex-row","gap-2"]},textEmpty:f.jsx(J,{label:"No regions (label)"}),render:({entity:r})=>f.jsx("div",{className:sn(["p-2","border","border-blue-300","bg-blue-50","rounded-sm"]),children:r.name})})}},{id:"requirements",label:f.jsx(J,{label:"Required resources (label)"}),render({entity:n}){return f.jsx(Wx,{requirements:n.requirements,textEmpty:f.jsx(J,{label:"No requirements (label)"})})}},{id:"dependencies",label:f.jsx(J,{label:"Blueprint dependencies (label)"}),render({entity:n}){return f.jsx(G$,{dependencies:n.dependencies,textEmpty:f.jsx(J,{label:"No dependencies (label)"})})}},{id:"deps",label:f.jsx(J,{label:"Blueprint dependency graph (label)"}),render({entity:n}){return f.jsx(fue,{graph:t,blueprintId:n.id})}}],...e}),eB=Mt("/$locale/apps/derivean/root/blueprint/$id/view")({async loader({context:{kysely:t}}){return{dependencies:await t.transaction().execute(async e=>Xm({tx:e}))}},component(){const{dependencies:t}=eB.useLoaderData(),{entity:e}=mi({from:"/$locale/apps/derivean/root/blueprint/$id"});return f.jsx("div",{className:"w-1/2 mx-auto",children:f.jsx(pue,{dependencies:t,entity:e})})}}),eg=({group:t,...e})=>f.jsx(rL,{icon:Ir,textTitle:f.jsx(J,{label:"Select resource (title)"}),textSelect:f.jsx(J,{label:"Select resource (label)"}),table:n=>f.jsx(V$,{group:t,...n}),render:({entity:n})=>n.name,queryKey:"Resource",query:async({filter:n,cursor:r})=>Nt.transaction().execute(async i=>cr({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>Sr`json_group_array(json_object(
                                                'id', ${o.ref("t.id")},
                                                'code', ${o.ref("t.code")},
                                                'group', ${o.ref("t.group")},
                                                'sort', ${o.ref("t.sort")},
                                                'label', ${o.ref("t.label")}
                                            ))`.as("tags")).where("t.id","in",i.selectFrom("Resource_Tag as rt").select("rt.tagId").where("rt.resourceId","=",s.ref("r.id"))).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let a=s;if(o?.id&&(a=a.where("r.id","=",o.id)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("r.id","like",u),d("r.name","like",u),d("r.id","in",d.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return a},output:M.object({id:M.string().min(1),name:M.string().min(1),transport:xo(),tags:ci(Ym.entity),countRequirement:M.number().nonnegative(),countProduction:M.number().nonnegative(),countProductionRequirement:M.number().nonnegative()}),filter:n,cursor:r})),...e}),I3=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(Bf.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"resourceId",label:f.jsx(J,{label:"Requirement (label)"}),children:f.jsx(Mi,{control:s.control,name:"resourceId",render:({field:{ref:a,...u}})=>f.jsx(eg,{allowEmpty:!0,...u})})}),f.jsx(hn,{formState:s.formState,name:"amount",label:f.jsx(J,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(hn,{formState:s.formState,name:"passive",label:f.jsx(J,{label:"Passive requirement (label)"}),hint:f.jsx(J,{label:"Passive requirement (hint)"}),children:f.jsx(Mi,{control:s.control,name:"passive",render:({field:{ref:a,...u}})=>f.jsx(j2,{...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:Ir,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},_E=Ur(),hue=[_E({name:"name",header(){return f.jsx(J,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),_E({name:"amount",header(){return f.jsx(J,{label:"Amount (label)"})},render({value:t}){return fn({number:t})},size:10}),_E({name:"passive",header(){return f.jsx(J,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx(wx,{value:t})},size:10})],mue=({blueprintId:t,table:e,...n})=>{const r=Fn([["Blueprint"],["Blueprint_Requirement"],["Blueprint_Resource_Requirement"],["Resource"]]);return f.jsx(zr,{table:Wr({...e,columns:hue}),action:{table(){return f.jsx(ur,{children:f.jsx(Rn,{label:f.jsx(J,{label:"Create requirement item (menu)"}),textTitle:f.jsx(J,{label:"Create requirement item (modal)"}),icon:Ir,children:f.jsx(I3,{mutation:Jt({async mutationFn(i){return Nt.transaction().execute(async s=>s.insertInto("Blueprint_Requirement").values({id:wn(),...i,blueprintId:t}).execute())},async onSuccess(){await r()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit requirement item (modal)"}),icon:Ir,children:f.jsx(I3,{defaultValues:i,mutation:Jt({async mutationFn(s){return Nt.transaction().execute(async o=>o.updateTable("Blueprint_Requirement").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete requirement item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async s=>s.deleteFrom("Blueprint_Requirement").where("id","=",i.id).execute()),textContent:f.jsx(J,{label:"Delete requirement item (content)"}),textToast:"Delete requirement item",invalidator:r})})]})}},...n})},ih=Mt("/$locale/apps/derivean/root/blueprint/$id/requirements")({validateSearch:yr(Br(Bf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("br.id","=",a.id)),a?.idIn&&(u=u.where("br.id","in",a.idIn)),a?.resourceId&&(u=u.where("br.resourceId","=",a.resourceId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),passive:ns()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=ih.useLoaderData(),{filter:n,cursor:r,selection:i}=ih.useSearch(),{id:s}=ih.useParams(),o=ih.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(mue,{blueprintId:s,table:{data:t,filter:{value:n,set:Mr(o)},selection:{type:"multi",value:i,set:ks(o)}},fulltext:{value:n?.fulltext,set:$r(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of requirements (label)"}),...Lr(o)}})})}}),BN=FY({shape:M.object({resourceId:M.string().min(1),amount:xo(),cycles:Fo()}),filter:zi.merge(M.object({blueprintId:M.string().optional(),resourceId:M.string().optional()}))}),N3=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(BN.shape),defaultValues:{amount:1,cycles:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"resourceId",label:f.jsx(J,{label:"Resource name (label)"}),children:f.jsx(Mi,{control:s.control,name:"resourceId",render:({field:{ref:a,...u}})=>f.jsx(eg,{textTitle:f.jsx(J,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),f.jsx(hn,{formState:s.formState,name:"amount",label:f.jsx(J,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(hn,{formState:s.formState,name:"cycles",label:f.jsx(J,{label:"Production cycles (label)"}),hint:f.jsx(J,{label:"Production cycles (hint)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("cycles")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:Hs,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},tg=t=>f.jsx(rL,{icon:Mn,textTitle:f.jsx(J,{label:"Select blueprint (title)"}),table:({table:e,...n})=>f.jsx(J$,{table:{...e,hidden:["requirements","dependencies"]},...n}),render:({entity:e})=>e.name,queryKey:"Blueprint",query:async({filter:e,cursor:n})=>Nt.transaction().execute(async r=>cr({select:r.selectFrom("Blueprint as b").select(["b.id","b.name","b.sort","b.cycles","b.limit",i=>i.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(s=>ca.jsonGroupArray({id:s.ref("r.id"),name:s.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","b.id").as("regions"),i=>i.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(s=>Sr`json_group_array(json_object(
                                                    'id', ${s.ref("br.id")},
                                                    'amount', ${s.ref("br.amount")},
                                                    'passive', ${s.ref("br.passive")},
                                                    'resourceId', ${s.ref("br.resourceId")},
                                                    'blueprintId', ${s.ref("br.blueprintId")},
                                                    'name', ${s.ref("r.name")}
                                                ))`.as("requirements")).whereRef("br.blueprintId","=","b.id").as("requirements"),i=>i.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.blueprintId").select(s=>Sr`json_group_array(json_object(
                                                    'id', ${s.ref("bd.id")},
                                                    'dependencyId', ${s.ref("bd.dependencyId")},
                                                    'blueprintId', ${s.ref("bd.blueprintId")},
                                                    'name', ${s.ref("b.name")}
                                                ))`.as("requirements")).whereRef("bd.blueprintId","=","b.id").as("dependencies")]).orderBy("b.name","asc"),query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("b.id","=",s.id)),s?.fulltext){const a=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("b.id","like",a),u("b.name","like",a)]))}return o},output:M.object({id:M.string().min(1),name:M.string().min(1),cycles:M.number().nonnegative(),sort:M.number().nonnegative(),limit:M.number().nonnegative(),regions:ci(M.object({id:M.string().min(1),name:M.string().min(1)})),requirements:ci(Bf.entity.merge(M.object({name:M.string().min(1)}))),dependencies:ci(vu.entity.merge(M.object({name:M.string().min(1)})))}),filter:e,cursor:n})),...t}),gue=M.object({blueprintId:M.string().min(1)}),yue=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(gue),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"blueprintId",label:f.jsx(J,{label:"Target blueprint (label)"}),children:f.jsx(Mi,{control:s.control,name:"blueprintId",render:({field:{ref:a,...u}})=>f.jsx(tg,{allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:Mn,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},_d=Ur(),bue=[_d({name:"name",header(){return f.jsx(J,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsx(St,{icon:Hs,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),_d({name:"amount",header(){return f.jsx(J,{label:"Amount (label)"})},render({value:t}){return fn({number:t})},size:8}),_d({name:"cycles",header(){return f.jsx(J,{label:"Production cycles (label)"})},render({value:t}){return fn({number:t})},size:8}),_d({name:"requirements",header(){return f.jsx(J,{label:"Required resources (label)"})},render({value:t}){return f.jsx(Wx,{textTitle:f.jsx(J,{label:"Resource requirements (title)"}),textEmpty:f.jsx(J,{label:"No requirements (label)"}),requirements:t})},size:32}),_d({name:"resources",header(){return f.jsx(J,{label:"Required production resources (label)"})},render({value:t}){return f.jsx(hu,{items:t,render:({entity:e})=>f.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[f.jsx("div",{children:e.name}),f.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",fn({number:e.amount})]})]})})},size:32}),_d({name:"dependencies",header(){return f.jsx(J,{label:"Required production dependencies (label)"})},render({value:t}){return f.jsx(hu,{items:t,render:({entity:e})=>f.jsx("div",{className:sn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:f.jsx("div",{children:e.name})})})},size:32})],vue=({blueprintId:t,table:e,...n})=>{const r=Fn([["Blueprint"],["Blueprint_Production"],["Blueprint_Production_Requirement"],["Resource"]]);return f.jsx(zr,{table:Wr({...e,columns:bue}),action:{table(){return f.jsx(ur,{children:f.jsx(Rn,{label:f.jsx(J,{label:"Create blueprint production (menu)"}),textTitle:f.jsx(J,{label:"Create blueprint production (modal)"}),icon:Hs,children:({close:i})=>f.jsx(N3,{mutation:Jt({async mutationFn(s){return Nt.transaction().execute(async o=>await o.insertInto("Blueprint_Production").values({id:wn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit blueprint production (modal)"}),icon:Hs,children:f.jsx(N3,{defaultValues:i,mutation:Jt({async mutationFn(s){return Nt.transaction().execute(async o=>o.updateTable("Blueprint_Production").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),f.jsx(Rn,{label:f.jsx(J,{label:"Move production to (menu)"}),textTitle:f.jsx(J,{label:"Move production to (modal)"}),icon:Ir,children:({close:s})=>f.jsx(yue,{mutation:Jt({async mutationFn(o){return Nt.transaction().execute(async a=>{await a.updateTable("Blueprint_Production").set({blueprintId:o.blueprintId}).where("id","=",i.id).execute()})},async onSuccess(){await r(),s()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete blueprint production (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production").where("id","=",i.id).execute()),textContent:f.jsx(J,{label:"Delete blueprint production (content)"}),textToast:"Delete blueprint production",invalidator:r})})]})}},...n})},ng=DY({shape:M.object({blueprintId:M.string().min(1)}),filter:zi}),rg=LY({shape:M.object({resourceId:M.string().min(1),amount:xo(),passive:M.boolean()}),filter:zi.merge(M.object({blueprintProductionId:M.string().optional(),resourceId:M.string().optional()}))}),ig=MY({shape:M.object({resourceId:M.string().min(1),amount:xo()}),filter:zi.merge(M.object({resourceId:M.string().optional()}))}),sh=Mt("/$locale/apps/derivean/root/blueprint/$id/production")({validateSearch:yr(Br(BN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>Sr`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'passive', ${a.ref("bpr.passive")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>Sr`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(a=>Sr`json_group_array(json_object(
                                                'id', ${a.ref("bpd.id")},
                                                'blueprintProductionId', ${a.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${a.ref("bpd.blueprintId")},
                                                'name', ${a.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),cycles:M.number().nonnegative(),requirements:ci(rg.entity.merge(M.object({name:M.string().min(1)}))),resources:ci(ig.entity.merge(M.object({name:M.string().min(1)}))),dependencies:ci(ng.entity.merge(M.object({name:M.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=sh.useLoaderData(),{filter:n,cursor:r,selection:i}=sh.useSearch(),{id:s}=sh.useParams(),o=sh.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(vue,{blueprintId:s,table:{data:t,filter:{value:n,set:Mr(o)},selection:{type:"multi",value:i,set:ks(o)}},fulltext:{value:n?.fulltext,set:$r(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of productions (label)"}),...Lr(o)}})})}}),xue=({label:t,...e})=>f.jsx(J,{label:`Inventory type - ${t}`,...e}),wue=zY({shape:M.object({resourceId:M.string().min(1),amount:xo(),limit:xo(),type:M.enum(["storage","construction"])}),filter:zi.merge(M.object({resourceId:M.string().optional(),type:M.enum(["storage","construction"]).optional()}))}),k3=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(wue.shape),defaultValues:{amount:0,limit:0,type:"storage",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"resourceId",label:f.jsx(J,{label:"Resource name (label)"}),children:f.jsx(Mi,{control:s.control,name:"resourceId",render:({field:{ref:a,...u}})=>f.jsx(eg,{textTitle:f.jsx(J,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),f.jsx(hn,{formState:s.formState,name:"type",label:f.jsx(J,{label:"Inventory type (label)"}),children:f.jsx(Mi,{control:s.control,name:"type",render:({field:{ref:a,...u}})=>f.jsx(eN,{items:[{id:"storage",value:Vo.text("Inventory type - storage")},{id:"construction",value:Vo.text("Inventory type - construction")}],render:({entity:d})=>d.value,...u})})}),f.jsx(hn,{formState:s.formState,name:"amount",label:f.jsx(J,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(hn,{formState:s.formState,name:"limit",label:f.jsx(J,{label:"Inventory limit (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("limit")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:Xa,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},zy=Ur(),_ue=[zy({name:"name",header(){return f.jsx(J,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),zy({name:"type",header(){return f.jsx(J,{label:"Inventory type (label)"})},render({value:t}){return f.jsx(xue,{label:t})},filter:{path:"type",onFilter({data:t,filter:e}){e.shallow("type",t.type)}},size:12}),zy({name:"amount",header(){return f.jsx(J,{label:"Amount (label)"})},render({value:t}){return fn({number:t})},size:12}),zy({name:"limit",header(){return f.jsx(J,{label:"Inventory limit (label)"})},render({value:t,data:e}){return f.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[f.jsx("div",{children:fn({number:t})}),f.jsx(qf,{value:100*e.amount/e.limit})]})},size:14})],Sue=({blueprintId:t,table:e,...n})=>{const r=Fn([["Blueprint_Inventory"]]),i=Jt({async mutationFn(){return Nt.transaction().execute(async s=>Q$({tx:s,blueprintId:t}))},async onSuccess(){await r()},onError(s){console.error(s)}});return f.jsx(zr,{table:Wr({...e,columns:_ue}),action:{table(){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Create inventory item (menu)"}),textTitle:f.jsx(J,{label:"Create inventory item (modal)"}),icon:Xa,children:f.jsx(k3,{mutation:Jt({async mutationFn(s){return qn.promise(Nt.transaction().execute(async o=>o.insertInto("Blueprint_Inventory").values({id:wn(),blueprintId:t,inventoryId:(await o.insertInto("Inventory").values({id:wn(),...s}).returningAll().executeTakeFirstOrThrow()).id}).returningAll().executeTakeFirstOrThrow()),si("Create inventory item"))},async onSuccess(){await r()}})})}),f.jsx(F1,{icon:Xa,onClick:()=>{i.mutate()},children:f.jsx(J,{label:"Fill inventory (label)"})})]})},row({data:s}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit inventory item (modal)"}),icon:Xa,children:f.jsx(k3,{defaultValues:s,mutation:Jt({async mutationFn(o){return qn.promise(Nt.transaction().execute(async a=>a.updateTable("Inventory").set(o).where("id","=",s.inventoryId).returningAll().executeTakeFirstOrThrow()),si("Update inventory item"))},async onSuccess(){await r()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async o=>o.deleteFrom("Inventory").where("id","=",s.inventoryId).execute()),textContent:f.jsx(J,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:r})})]})}},...n})},Eue=PY({shape:M.object({blueprintId:M.string().min(1),inventoryId:M.string().min(1)}),filter:zi.merge(M.object({blueprintId:M.string().optional(),inventoryId:M.string().optional()}))}),oh=Mt("/$locale/apps/derivean/root/blueprint/$id/inventory")({validateSearch:yr(Br(Eue)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Inventory","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>cr({select:s.selectFrom("Blueprint_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").innerJoin("Resource as r","r.id","i.resourceId").select(["bi.id","r.name","i.amount","i.limit","i.type","i.resourceId","bi.blueprintId","bi.inventoryId"]).where("bi.blueprintId","=",i).orderBy("i.type","asc").orderBy("r.name","asc"),query({select:o,where:a}){let u=o;if(a?.id&&(u=u.where("bi.id","=",a.id)),a?.idIn&&(u=u.where("bi.id","in",a.idIn)),a?.fulltext){const d=`%${a.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bi.id","like",`%${d}%`),p("r.id","like",`%${d}%`),p("r.name","like",`%${d}%`),p("r.id","in",p.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(h=>h.or([h("t.code","like",d),h("t.label","like",d),h("t.group","like",d)])))]))}return u},output:M.object({id:M.string().min(1),name:M.string().min(1),type:M.enum(["storage","construction"]),resourceId:M.string().min(1),blueprintId:M.string().min(1),inventoryId:M.string().min(1),amount:M.number().nonnegative(),limit:M.number().int().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=oh.useLoaderData(),{filter:n,cursor:r,selection:i}=oh.useSearch(),{id:s}=oh.useParams(),o=oh.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(Sue,{blueprintId:s,table:{data:t,filter:{value:n,set:Mr(o)},selection:{type:"multi",value:i,set:ks(o)}},fulltext:{value:n?.fulltext,set:$r(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of items"}),...Lr(o)}})})}}),tB=Mt("/$locale/apps/derivean/root/blueprint/$id/edit")({component:()=>{const{entity:t}=mi({from:"/$locale/apps/derivean/root/blueprint/$id"}),e=tB.useNavigate(),n=Fn([["Blueprint"]]);return f.jsx("div",{className:"w-1/2 mx-auto",children:f.jsx(Mv,{defaultValues:t,mutation:Jt({async mutationFn(r){return qn.promise(Nt.transaction().execute(async i=>i.updateTable("Blueprint").set(r).where("id","=",t.id).returningAll().executeTakeFirstOrThrow()),si("Update blueprint"))},async onSuccess(){await n(),e({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{id:t.id}})}})})})}}),C3=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(vu.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"dependencyId",label:f.jsx(J,{label:"Blueprint dependency (label)"}),children:f.jsx(Mi,{control:s.control,name:"dependencyId",render:({field:{ref:a,...u}})=>f.jsx(tg,{textTitle:f.jsx(J,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:Mn,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},Iue=Ur(),Nue=[Iue({name:"name",header(){return f.jsx(J,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsx(St,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],kue=({blueprintId:t,table:e,...n})=>{const r=Fn([["Blueprint_Dependency"],["Blueprint"]]);return f.jsx(zr,{table:Wr({...e,columns:Nue}),action:{table(){return f.jsx(ur,{children:f.jsx(Rn,{label:f.jsx(J,{label:"Create blueprint dependency (menu)"}),textTitle:f.jsx(J,{label:"Create blueprint dependency (modal)"}),icon:Mn,children:({close:i})=>f.jsx(C3,{mutation:Jt({async mutationFn(s){return qn.promise(Nt.transaction().execute(async o=>{const a=o.insertInto("Blueprint_Dependency").values({id:wn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await vm({tx:o}),a}),si("Create blueprint dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit blueprint dependency (modal)"}),icon:Mn,children:({close:s})=>f.jsx(C3,{defaultValues:i,mutation:Jt({async mutationFn(o){return qn.promise(Nt.transaction().execute(async a=>a.updateTable("Blueprint_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),si("Update blueprint dependency"))},async onSuccess(){await r(),s()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete blueprint dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async s=>s.deleteFrom("Blueprint_Dependency").where("id","=",i.id).execute()),textContent:f.jsx(J,{label:"Delete blueprint dependency (content)"}),textToast:"Delete blueprint dependency",invalidator:r})})]})}},...n})},ah=Mt("/$locale/apps/derivean/root/blueprint/$id/dependencies")({validateSearch:yr(Br(vu)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bd.id","=",a.id)),a?.idIn&&(u=u.where("bd.id","in",a.idIn)),a?.blueprintId&&(u=u.where("bd.blueprintId","=",a.blueprintId)),a?.dependencyId&&(u=u.where("bd.dependencyId","=",a.dependencyId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1),dependencyId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=ah.useLoaderData(),{filter:n,cursor:r,selection:i}=ah.useSearch(),{id:s}=ah.useParams(),o=ah.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(kue,{blueprintId:s,table:{data:t,filter:{value:n,set:Mr(o)},selection:{type:"multi",value:i,set:ks(o)}},fulltext:{value:n?.fulltext,set:$r(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of requirements (label)"}),...Lr(o)}})})}}),Cue=AY({shape:M.object({conflictId:M.string().min(1)}),filter:zi}),T3=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(Cue.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"conflictId",label:f.jsx(J,{label:"Blueprint conflict (label)"}),hint:f.jsx(J,{label:"Blueprint conflict (hint)"}),children:f.jsx(Mi,{control:s.control,name:"conflictId",render:({field:{ref:a,...u}})=>f.jsx(tg,{textTitle:f.jsx(J,{label:"Select blueprint conflict (title)"}),allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:Mn,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},Tue=Ur(),jue=[Tue({name:"name",header(){return f.jsx(J,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsx(St,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],Rue=({blueprintId:t,table:e,...n})=>{const r=Fn([["Blueprint_Conflict"],["Blueprint"]]);return f.jsx(zr,{table:Wr({...e,columns:jue}),action:{table(){return f.jsx(ur,{children:f.jsx(Rn,{label:f.jsx(J,{label:"Create blueprint conflict (menu)"}),textTitle:f.jsx(J,{label:"Create blueprint conflict (modal)"}),icon:Mn,children:({close:i})=>f.jsx(T3,{mutation:Jt({async mutationFn(s){return qn.promise(Nt.transaction().execute(async o=>{const a=o.insertInto("Blueprint_Conflict").values({id:wn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await vm({tx:o}),a}),si("Create blueprint conflict"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit blueprint conflict (modal)"}),icon:Mn,children:({close:s})=>f.jsx(T3,{defaultValues:i,mutation:Jt({async mutationFn(o){return qn.promise(Nt.transaction().execute(async a=>a.updateTable("Blueprint_Conflict").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),si("Update blueprint conflict"))},async onSuccess(){await r(),s()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete blueprint conflict (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async s=>s.deleteFrom("Blueprint_Conflict").where("id","=",i.id).execute()),textContent:f.jsx(J,{label:"Delete blueprint conflict (content)"}),textToast:"Delete blueprint conflict",invalidator:r})})]})}},...n})},lh=Mt("/$locale/apps/derivean/root/blueprint/$id/conflicts")({validateSearch:yr(Br(vu)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bc.id","=",a.id)),a?.idIn&&(u=u.where("bc.id","in",a.idIn)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1),conflictId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=lh.useLoaderData(),{filter:n,cursor:r,selection:i}=lh.useSearch(),{id:s}=lh.useParams(),o=lh.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(Rue,{blueprintId:s,table:{data:t,filter:{value:n,set:Mr(o)},selection:{type:"multi",value:i,set:ks(o)}},fulltext:{value:n?.fulltext,set:$r(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of conflicts (label)"}),...Lr(o)}})})}}),Oue=Mt("/$locale/apps/derivean/map/$mapId/waypoint/$waypointId")({}),Aue=({land:t})=>{const{mapId:e,locale:n}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx("div",{className:sn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/land/list",params:{locale:n,mapId:e},search:{zoomToId:t.id},children:t.name}),f.jsxs("div",{className:"flex flex-col items-end text-xs",children:[f.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[f.jsx("div",{className:"font-bold",children:fn({number:t.x})}),f.jsx("div",{children:":"}),f.jsx("div",{className:"font-bold",children:fn({number:t.y})})]}),f.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[f.jsx("div",{className:"font-bold",children:fn({number:t.width})}),f.jsx("div",{children:"x"}),f.jsx("div",{className:"font-bold",children:fn({number:t.height})})]})]})]})})},que=En({slot:{base:["flex","flex-col","gap-4","w-4/12","border-l-2","border-slate-200","shadow-xs","relative","max-h-screen"],title:["flex","flex-row","justify-between","items-center","px-4","py-4","shadow-md"],content:["flex","flex-col","gap-2","max-h-full","overflow-y-auto","px-4","mb-4"]},variant:{},defaults:{}}),ss=({icon:t,textTitle:e,textSubTitle:n,variant:r,tva:i=que,css:s,children:o})=>{const{mapId:a,locale:u}=Zt({from:"/$locale/apps/derivean/map/$mapId"}),d=i({...r,css:s}).slots;return f.jsxs("div",{className:d.base(),children:[f.jsxs("div",{className:d.title(),children:[f.jsxs("div",{className:"flex flex-col gap-2 font-bold",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(tn,{icon:t,css:{base:["text-slate-500"]}}),e]}),n?f.jsx("div",{className:"flex flex-row gap-2 items-center text-sm text-slate-500",children:n}):null]}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:u,mapId:a},children:f.jsx(cn,{iconEnabled:Y1,variant:{variant:"subtle"}})})]}),f.jsx("div",{className:d.content(),children:o})]})},Pue=({land:t,...e})=>f.jsx(ss,{icon:Bx,textTitle:f.jsx(J,{label:"Land list (label)"}),...e,children:t.map(n=>f.jsx(Aue,{land:n},n.id))}),nB=Mt("/$locale/apps/derivean/map/$mapId/land/list")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n}}){return{land:await t.ensureQueryData({queryKey:["GameMap",n,"land","list"],async queryFn(){return e.transaction().execute(async r=>wr({select:r.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId","l.x","l.y","l.width","l.height"]).where("l.mapId","=",n).orderBy("r.name").orderBy("l.width","desc").orderBy("l.height","desc"),output:M.object({id:M.string().min(1),name:M.string().min(1),mapId:M.string().min(1),x:M.number(),y:M.number(),width:M.number(),height:M.number()})}))}})}},component(){const{land:t}=nB.useLoaderData();return f.jsx(Pue,{land:t})}}),Fue=Mt("/$locale/apps/derivean/map/$mapId/land/$landId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,landId:r}}){return{land:await t.ensureQueryData({queryKey:["GameMap",n,"land",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>wa({select:i.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId"]).where("l.id","=",r),output:M.object({id:M.string().min(1),name:M.string().min(1),mapId:M.string().min(1)})}))}})}}}),Due=({building:t})=>{const{mapId:e,locale:n}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx("div",{className:sn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx(St,{icon:is,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:n,mapId:e,buildingId:t.id},children:t.name}),f.jsx(St,{icon:Bx,to:"/$locale/apps/derivean/map/$mapId/building/list",params:{locale:n,mapId:e},search:{zoomToId:t.landId},children:t.land})]})})},Lue=({building:t,...e})=>f.jsx(ss,{icon:is,textTitle:f.jsx(J,{label:"Building list (label)"}),...e,children:t.length>0?t.map(n=>f.jsx(Due,{building:n},n.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(J,{label:"No buildings yet. (label)"})})}),rB=Mt("/$locale/apps/derivean/map/$mapId/building/list")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n}}){return{building:await t.ensureQueryData({queryKey:["GameMap",n,"building","list"],async queryFn(){return e.transaction().execute(async r=>wr({select:r.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","b.landId","r.name as land"]).where("l.mapId","=",n).orderBy("bl.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),landId:M.string().min(1),land:M.string().min(1)})}))}})}},component(){const{building:t}=rB.useLoaderData();return f.jsx(Lue,{building:t})}}),Mue=Mt("/$locale/apps/derivean/map/$mapId/building/$buildingId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{building:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>wa({select:i.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","r.name as land","b.constructionId","b.productionId","b.recurringProductionId"]).where("b.id","=",r),output:M.object({id:M.string().min(1),name:M.string().min(1),land:M.string().min(1),constructionId:M.string().nullish(),productionId:M.string().nullish(),recurringProductionId:M.string().nullish()})}))}})}}}),$ue=Mt("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId")({async loader({context:{queryClient:t,kysely:e},params:{blueprintId:n}}){return{blueprint:await t.ensureQueryData({queryKey:["GameMap","blueprint",n,"fetch"],async queryFn(){return e.transaction().execute(async r=>wa({select:r.selectFrom("Blueprint as b").select(["b.id","b.name"]).where("b.id","=",n),output:M.object({id:M.string().min(1),name:M.string().min(1)})}))}})}}}),Bue=({entity:t,...e})=>{const{locale:n}=Zt({from:"/$locale"});return f.jsxs(Rc,{...e,children:[f.jsx(ir,{icon:$N,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Production requirements (menu)"})}),f.jsx(ir,{icon:Ir,to:"/$locale/apps/derivean/game/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Production resource requirements (menu)"})}),f.jsx(ir,{icon:Mn,to:"/$locale/apps/derivean/game/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(J,{label:"Production resource dependencies (menu)"})})]})},zue=t=>{const{locale:e}=Zt({from:"/$locale"});return f.jsx(Af,{title:({entity:n})=>f.jsx(Pf,{icon:Hs,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>f.jsx(f.Fragment,{children:f.jsx(St,{icon:Mn,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:f.jsx(J,{label:"Building base detail (label)"})})}),...t})},iB=Mt("/$locale/apps/derivean/game/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await wa({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:M.object({id:M.string().min(1),resource:M.string().min(1),blueprint:M.string().min(1),blueprintId:M.string().min(1),amount:M.number().nonnegative(),cycles:M.number().int().nonnegative()})})}))}})},component(){const{entity:t}=iB.useLoaderData(),{tva:e}=gr({from:"__root__"}),n=e().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(zue,{entity:t}),f.jsx(Bue,{entity:t}),f.jsx(Ks,{})]})}}),Wue=t=>f.jsx(R2,{items:[{id:"name",label:f.jsx(J,{label:"Building name (label)"}),render({entity:e}){return e.name}},{id:"cycles",label:f.jsx(J,{label:"Construction cycles (label)"}),render({entity:e}){return fn({number:e.cycles})}}],...t}),Uue=Mt("/$locale/apps/derivean/game/blueprint/$id/view")({component(){const{entity:t}=mi({from:"/$locale/apps/derivean/game/blueprint/$id"});return f.jsx("div",{className:"w-1/2 mx-auto",children:f.jsx(Wue,{entity:t})})}}),SE=Ur(),Vue=[SE({name:"name",header(){return f.jsx(J,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),SE({name:"amount",header(){return f.jsx(J,{label:"Amount (label)"})},render({value:t}){return fn({number:t})},size:10}),SE({name:"passive",header(){return f.jsx(J,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx(wx,{value:t})},size:10})],Hue=({table:t,...e})=>f.jsx(zr,{table:Wr({...t,columns:Vue}),...e}),Sb=Mt("/$locale/apps/derivean/game/blueprint/$id/requirements")({validateSearch:yr(Br(Bf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("br.id","=",a.id)),a?.idIn&&(u=u.where("br.id","in",a.idIn)),a?.resourceId&&(u=u.where("br.resourceId","=",a.resourceId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),passive:ns()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Sb.useLoaderData(),{filter:n,cursor:r}=Sb.useSearch(),i=Sb.useNavigate(),{tva:s}=gr({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Hue,{table:{data:t,filter:{value:n,set:Mr(i)}},fulltext:{value:n?.fulltext,set:$r(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of requirements (label)"}),...Lr(i)}})})}}),Sd=Ur(),Gue=[Sd({name:"name",header(){return f.jsx(J,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsx(St,{icon:Hs,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),Sd({name:"amount",header(){return f.jsx(J,{label:"Amount (label)"})},render({value:t}){return fn({number:t})},size:8}),Sd({name:"cycles",header(){return f.jsx(J,{label:"Production cycles (label)"})},render({value:t}){return fn({number:t})},size:8}),Sd({name:"requirements",header(){return f.jsx(J,{label:"Required resources (label)"})},render({value:t}){return f.jsx(Wx,{textTitle:f.jsx(J,{label:"Resource requirements (title)"}),textEmpty:f.jsx(J,{label:"No requirements (label)"}),requirements:t})},size:32}),Sd({name:"resources",header(){return f.jsx(J,{label:"Required production resources (label)"})},render({value:t}){return f.jsx(hu,{items:t,render:({entity:e})=>f.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[f.jsx("div",{children:e.name}),f.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",fn({number:e.amount})]})]})})},size:32}),Sd({name:"dependencies",header(){return f.jsx(J,{label:"Required production dependencies (label)"})},render({value:t}){const{locale:e}=Zt({from:"/$locale"});return f.jsx(hu,{items:t,render:({entity:n})=>f.jsx("div",{className:sn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:f.jsx(St,{to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:e,id:n.blueprintId},children:n.name})})})},size:32})],Kue=({table:t,...e})=>f.jsx(zr,{table:Wr({...t,columns:Gue}),...e}),Eb=Mt("/$locale/apps/derivean/game/blueprint/$id/production")({validateSearch:yr(Br(BN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>Sr`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'passive', ${a.ref("bpr.passive")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>Sr`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(a=>Sr`json_group_array(json_object(
                                                'id', ${a.ref("bpd.id")},
                                                'blueprintProductionId', ${a.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${a.ref("bpd.blueprintId")},
                                                'name', ${a.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),cycles:M.number().nonnegative(),requirements:ci(rg.entity.merge(M.object({name:M.string().min(1)}))),resources:ci(ig.entity.merge(M.object({name:M.string().min(1)}))),dependencies:ci(ng.entity.merge(M.object({name:M.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Eb.useLoaderData(),{filter:n,cursor:r}=Eb.useSearch(),i=Eb.useNavigate(),{tva:s}=gr({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Kue,{table:{data:t,filter:{value:n,set:Mr(i)}},fulltext:{value:n?.fulltext,set:$r(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of productions (label)"}),...Lr(i)}})})}}),Que=Ur(),Jue=[Que({name:"name",header(){return f.jsx(J,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsx(St,{icon:Mn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],Zue=({table:t,...e})=>f.jsx(zr,{table:Wr({...t,columns:Jue}),...e}),Ib=Mt("/$locale/apps/derivean/game/blueprint/$id/dependencies")({validateSearch:yr(Br(vu)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bd.id","=",a.id)),a?.idIn&&(u=u.where("bd.id","in",a.idIn)),a?.blueprintId&&(u=u.where("bd.blueprintId","=",a.blueprintId)),a?.dependencyId&&(u=u.where("bd.dependencyId","=",a.dependencyId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1),dependencyId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Ib.useLoaderData(),{filter:n,cursor:r}=Ib.useSearch(),i=Ib.useNavigate(),{tva:s}=gr({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Zue,{table:{data:t,filter:{value:n,set:Mr(i)}},fulltext:{value:n?.fulltext,set:$r(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of dependencies (label)"}),...Lr(i)}})})}}),Yue=Ur(),Xue=[Yue({name:"name",header(){return f.jsx(J,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsx(St,{icon:Mn,to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],ece=({table:t,...e})=>f.jsx(zr,{table:Wr({...t,columns:Xue}),...e}),Nb=Mt("/$locale/apps/derivean/game/blueprint/$id/conflicts")({validateSearch:yr(Br(vu)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bc.id","=",a.id)),a?.idIn&&(u=u.where("bc.id","in",a.idIn)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1),conflictId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Nb.useLoaderData(),{filter:n,cursor:r}=Nb.useSearch(),i=Nb.useNavigate(),{tva:s}=gr({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(ece,{table:{data:t,filter:{value:n,set:Mr(i)}},fulltext:{value:n?.fulltext,set:$r(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of conflicts (label)"}),...Lr(i)}})})}}),sB=BY({shape:M.object({blueprintId:M.string().min(1),constructionId:M.string().optional(),productionId:M.string().optional(),recurringProductionId:M.string().optional(),x:xo(),y:xo()}),filter:zi.merge(M.object({userId:M.string().optional(),blueprintId:M.string().optional(),name:M.string().optional()}))}),tce=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(sB.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"blueprintId",label:f.jsx(J,{label:"Select blueprint (label)"}),children:f.jsx(Mi,{control:s.control,name:"blueprintId",render:({field:{ref:a,...u}})=>f.jsx(tg,{allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:is,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},nce=Ur(),rce=[nce({name:"name",header(){return f.jsx(J,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsx(St,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId}}),e]})},size:14})],ice=({table:t,...e})=>{const n=Fn([["Building"]]);return f.jsx(zr,{table:Wr({...t,columns:rce}),action:{row({data:r}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit building (modal)"}),icon:is,children:f.jsx(tce,{defaultValues:r,mutation:Jt({async mutationFn(i){return qn.promise(Nt.transaction().execute(s=>s.updateTable("Building").set(i).where("id","=",r.id).returningAll().executeTakeFirstOrThrow()),si("Edit building"))},async onSuccess(){await n()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete building (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async i=>i.deleteFrom("Building").where("id","=",r.id).execute()),textContent:f.jsx(J,{label:"Building delete (content)"}),textToast:"Building delete",invalidator:n})})]})}},...e})},kb=Mt("/$locale/apps/derivean/root/user/$id/building/list")({validateSearch:yr(Br(sB)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Building","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>cr({select:s.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name","b.blueprintId"]).where("b.userId","=",i),output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=kb.useLoaderData(),{filter:n,cursor:r,selection:i}=kb.useSearch(),s=kb.useNavigate(),{tva:o}=gr({from:"__root__"}),a=o().slots;return f.jsx("div",{className:a.base(),children:f.jsx(ice,{table:{data:t,filter:{value:n,set:Mr(s)},selection:{type:"multi",value:i,set:ks(s)}},fulltext:{value:n?.fulltext,set:$r(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of buildings (label)"}),...Lr(s)}})})}}),j3=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(ig.shape),defaultValues:{amount:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"resourceId",label:f.jsx(J,{label:"Requirement (label)"}),children:f.jsx(Mi,{control:s.control,name:"resourceId",render:({field:{ref:a,...u}})=>f.jsx(eg,{allowEmpty:!0,...u})})}),f.jsx(hn,{formState:s.formState,name:"amount",label:f.jsx(J,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:Ir,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},R3=Ur(),sce=[R3({name:"name",header(){return f.jsx(J,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),R3({name:"amount",header(){return f.jsx(J,{label:"Amount (label)"})},render({value:t}){return fn({number:t})},size:10})],oce=({blueprintProductionId:t,table:e,...n})=>{const r=Fn([["Blueprint_Production_Resource"],["Blueprint_Production"],["Resource"]]);return f.jsx(zr,{table:Wr({...e,columns:sce}),action:{table(){return f.jsx(ur,{children:f.jsx(Rn,{label:f.jsx(J,{label:"Create production resource requirement (menu)"}),textTitle:f.jsx(J,{label:"Create production resource requirement (modal)"}),icon:Ir,children:({close:i})=>f.jsx(j3,{mutation:Jt({async mutationFn(s){return Nt.transaction().execute(async o=>o.insertInto("Blueprint_Production_Resource").values({id:wn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit production resource requirement (modal)"}),icon:Ir,children:({close:s})=>f.jsx(j3,{defaultValues:i,mutation:Jt({async mutationFn(o){return Nt.transaction().execute(async a=>a.updateTable("Blueprint_Production_Resource").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete production resource requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Resource").where("id","=",i.id).execute()),textContent:f.jsx(J,{label:"Delete production resource requirement (content)"}),textToast:"Delete production resource requirement item",invalidator:r})})]})}},...n})},uh=Mt("/$locale/apps/derivean/root/blueprint/production/$id/resources")({validateSearch:yr(Br(ig)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bpr.id","=",a.id)),a?.idIn&&(u=u.where("bpr.id","in",a.idIn)),a?.resourceId&&(u=u.where("bpr.resourceId","=",a.resourceId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=uh.useLoaderData(),{filter:n,cursor:r,selection:i}=uh.useSearch(),{id:s}=uh.useParams(),o=uh.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(oce,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:Mr(o)},selection:{type:"multi",value:i,set:ks(o)}},fulltext:{value:n?.fulltext,set:$r(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of production resource requirements (label)"}),...Lr(o)}})})}}),O3=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(rg.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"resourceId",label:f.jsx(J,{label:"Requirement (label)"}),children:f.jsx(Mi,{control:s.control,name:"resourceId",render:({field:{ref:a,...u}})=>f.jsx(eg,{allowEmpty:!0,...u})})}),f.jsx(hn,{formState:s.formState,name:"amount",label:f.jsx(J,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(hn,{formState:s.formState,name:"passive",label:f.jsx(J,{label:"Passive requirement (label)"}),hint:f.jsx(J,{label:"Passive requirement (hint)"}),children:f.jsx(Mi,{control:s.control,name:"passive",render:({field:{ref:a,...u}})=>f.jsx(j2,{...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:Ir,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},EE=Ur(),ace=[EE({name:"name",header(){return f.jsx(J,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),EE({name:"amount",header(){return f.jsx(J,{label:"Amount (label)"})},render({value:t}){return fn({number:t})},size:10}),EE({name:"passive",header(){return f.jsx(J,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx(wx,{value:t})},size:10})],lce=({blueprintProductionId:t,table:e,...n})=>{const r=Fn([["Blueprint_Production_Requirement"],["Blueprint_Production"],["Resource"]]);return f.jsx(zr,{table:Wr({...e,columns:ace}),action:{table(){return f.jsx(ur,{children:f.jsx(Rn,{label:f.jsx(J,{label:"Create production requirement (menu)"}),textTitle:f.jsx(J,{label:"Create production requirement (modal)"}),icon:Ir,children:({close:i})=>f.jsx(O3,{mutation:Jt({async mutationFn(s){return Nt.transaction().execute(async o=>o.insertInto("Blueprint_Production_Requirement").values({id:wn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit production requirement (modal)"}),icon:Ir,children:({close:s})=>f.jsx(O3,{defaultValues:i,mutation:Jt({async mutationFn(o){return Nt.transaction().execute(async a=>a.updateTable("Blueprint_Production_Requirement").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete production requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Requirement").where("id","=",i.id).execute()),textContent:f.jsx(J,{label:"Delete production requirement (content)"}),textToast:"Delete production requirement item",invalidator:r})})]})}},...n})},ch=Mt("/$locale/apps/derivean/root/blueprint/production/$id/requirements")({validateSearch:yr(Br(rg)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bpr.id","=",a.id)),a?.idIn&&(u=u.where("bpr.id","in",a.idIn)),a?.resourceId&&(u=u.where("bpr.resourceId","=",a.resourceId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),passive:ns()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=ch.useLoaderData(),{filter:n,cursor:r,selection:i}=ch.useSearch(),{id:s}=ch.useParams(),o=ch.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(lce,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:Mr(o)},selection:{type:"multi",value:i,set:ks(o)}},fulltext:{value:n?.fulltext,set:$r(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of production requirements (label)"}),...Lr(o)}})})}}),A3=({mutation:t,defaultValues:e,variant:n,tva:r=gi,css:i})=>{const s=yi({resolver:bi(ng.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ui({form:s,mutation:t}),children:[f.jsx(di,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(hn,{formState:s.formState,name:"blueprintId",label:f.jsx(J,{label:"Blueprint dependency (label)"}),children:f.jsx(Mi,{control:s.control,name:"blueprintId",render:({field:{ref:a,...u}})=>f.jsx(tg,{textTitle:f.jsx(J,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(cn,{iconEnabled:Mn,type:"submit",children:f.jsx(J,{label:"Save (submit)"})})})]})},uce=Ur(),cce=[uce({name:"name",header(){return f.jsx(J,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsx(St,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],dce=({blueprintProductionId:t,table:e,...n})=>{const r=Fn([["Blueprint_Production_Dependency"],["Blueprint"]]);return f.jsx(zr,{table:Wr({...e,columns:cce}),action:{table(){return f.jsx(ur,{children:f.jsx(Rn,{label:f.jsx(J,{label:"Create blueprint production dependency (menu)"}),textTitle:f.jsx(J,{label:"Create blueprint production dependency (modal)"}),icon:Mn,children:({close:i})=>f.jsx(A3,{mutation:Jt({async mutationFn(s){return qn.promise(Nt.transaction().execute(async o=>{const a=o.insertInto("Blueprint_Production_Dependency").values({id:wn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow();return await vm({tx:o}),a}),si("Create blueprint production dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(Rn,{label:f.jsx(J,{label:"Edit (menu)"}),textTitle:f.jsx(J,{label:"Edit blueprint production dependency (modal)"}),icon:Mn,children:({close:s})=>f.jsx(A3,{defaultValues:i,mutation:Jt({async mutationFn(o){return qn.promise(Nt.transaction().execute(async a=>a.updateTable("Blueprint_Production_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),si("Update blueprint production dependency"))},async onSuccess(){await r(),s()}})})}),f.jsx(Rn,{icon:Dr,label:f.jsx(J,{label:"Delete (menu)"}),textTitle:f.jsx(J,{label:"Delete blueprint production dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Cs,{callback:async()=>Nt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Dependency").where("id","=",i.id).execute()),textContent:f.jsx(J,{label:"Delete blueprint production dependency (content)"}),textToast:"Delete blueprint production dependency",invalidator:r})})]})}},...n})},dh=Mt("/$locale/apps/derivean/root/blueprint/production/$id/dependencies")({validateSearch:yr(Br(ng)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bpd.id","=",a.id)),a?.idIn&&(u=u.where("bpd.id","in",a.idIn)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=dh.useLoaderData(),{filter:n,cursor:r,selection:i}=dh.useSearch(),{id:s}=dh.useParams(),o=dh.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(dce,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:Mr(o)},selection:{type:"multi",value:i,set:ks(o)}},fulltext:{value:n?.fulltext,set:$r(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of dependencies (label)"}),...Lr(o)}})})}}),fce=({transport:t})=>{const{locale:e,mapId:n}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx("div",{className:sn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx("div",{className:sn(["flex","flex-row","gap-2","items-center"]),children:f.jsx("div",{className:"font-bold",children:t.name})}),f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:e,mapId:n,buildingId:t.sourceId},css:{base:["text-slate-500","font-light"]},children:t.source}),f.jsx(tn,{icon:rm,css:{base:["text-slate-500"]}}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:e,mapId:n,buildingId:t.targetId},css:{base:["text-slate-500","font-bold"]},children:t.target})]}),f.jsxs(Di,{children:["x",fn({number:t.amount})]})]})})},pce=({transport:t,...e})=>f.jsx(ss,{icon:zx,textTitle:f.jsx(J,{label:"Transport (label)"}),...e,children:t.length>0?t.map(n=>f.jsx(fce,{transport:n},n.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(J,{label:"There are no resources transported on this waypoint. (label)"})})}),oB=Mt("/$locale/apps/derivean/map/$mapId/waypoint/$waypointId/transport")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,waypointId:r}}){return{transport:await t.ensureQueryData({queryKey:["GameMap",n,"waypoint",r,"transport"],async queryFn(){return e.transaction().execute(async i=>wr({select:i.selectFrom("Transport as t").innerJoin("Resource as r","r.id","t.resourceId").innerJoin("Building as b1","b1.id","t.sourceId").innerJoin("Building as b2","b2.id","t.targetId").innerJoin("Blueprint as bl1","bl1.id","b1.blueprintId").innerJoin("Blueprint as bl2","bl2.id","b2.blueprintId").select(["t.id","t.amount","r.name","t.sourceId","t.targetId","bl1.name as source","bl2.name as target"]).where("t.waypointId","=",r).orderBy("r.name"),output:M.object({id:M.string().min(1),name:M.string().min(1),source:M.string().min(1),sourceId:M.string().min(1),target:M.string().min(1),targetId:M.string().min(1),amount:M.number()})}))}})}},component(){const{transport:t}=oB.useLoaderData();return f.jsx(pce,{transport:t})}}),hce=En({slot:{base:["flex","flex-col","gap-2","rounded-md","bg-white","border","border-slate-300","p-2","hover:bg-slate-100","cursor-draggable"]},variant:{isDragging:{true:[]}},match:[{if:{isDragging:!0},then:{base:["cursor-grabbing","bg-slate-100"]}}],defaults:{isDragging:!1}}),mce=async({userId:t,blueprintId:e,landId:n,x:r,y:i,plan:s,valid:o})=>Nt.transaction().execute(async a=>{const u=await a.selectFrom("Blueprint as b").select(["b.cycles"]).where("b.id","=",e).executeTakeFirstOrThrow(),d=await a.insertInto("Building").values({id:wn(),userId:t,blueprintId:e,landId:n,constructionId:(await a.insertInto("Construction").values({id:wn(),userId:t,cycle:0,cycles:u.cycles,plan:s}).returning("id").executeTakeFirstOrThrow()).id,x:r,y:i,valid:o}).returningAll().executeTakeFirstOrThrow(),p=await a.selectFrom("Inventory as i").select(["i.amount","i.limit","i.resourceId","i.type"]).where("i.id","in",a.selectFrom("Blueprint_Inventory as bi").select("bi.inventoryId").where("bi.blueprintId","=",e)).execute();for await(const{amount:h,limit:g,resourceId:x,type:_}of p)await a.insertInto("Building_Inventory").values({id:wn(),buildingId:d.id,inventoryId:(await a.insertInto("Inventory").values({id:wn(),amount:h,limit:g,resourceId:x,type:_}).returning("id").executeTakeFirstOrThrow()).id}).execute();return d}),zN=({cycles:t})=>f.jsxs("div",{className:sn(["flex","flex-row","items-center","gap-2"]),children:[f.jsx(tn,{css:{base:["text-slate-400"]},icon:gm}),f.jsx("div",{className:"font-bold text-md",children:fn({number:t})})]}),gce=({blueprint:t,land:e,userId:n,variant:r,tva:i=hce,css:s})=>{const{mapId:o,locale:a}=Zt({from:"/$locale/apps/derivean/map/$mapId"}),u=mu(),d=Fn([["GameMap"]]),p=Jt({async mutationFn({blueprintId:g,landId:x}){const _=await mce({userId:n,blueprintId:g,landId:x,x:0,y:0,plan:!0,valid:!1});u({to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:a,mapId:o,landId:e.id},search:{zoomToId:_.id}})},async onSuccess(){await d()},onError(g){console.error(g)}}),h=i({...r,css:s}).slots;return f.jsx("div",{className:h.base(),children:f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between",children:[f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsxs(Di,{children:["x",t.count]}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements",params:{locale:a,mapId:o,blueprintId:t.id},css:{base:["font-bold"]},children:t.name})]}),f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsx(zN,{cycles:t.cycles}),f.jsx(cn,{iconEnabled:bm,iconDisabled:bm,loading:p.isPending,onClick:()=>{p.mutate({blueprintId:t.id,landId:e.id})}})]})]})})},yce=({userId:t,land:e,blueprints:n,...r})=>f.jsx(ss,{icon:bm,textTitle:f.jsx(J,{label:"Construction (label)"}),textSubTitle:e.name,...r,children:n.length>0?n.map(i=>f.jsx(gce,{blueprint:i,userId:t,land:e},i.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(J,{label:"There are no available blueprints (label)"})})}),aB=Mt("/$locale/apps/derivean/map/$mapId/land/$landId/construction")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,landId:i}}){const s=await n();return{user:s,blueprints:await t.ensureQueryData({queryKey:["GameMap",r,"land",i,"construction","list"],async queryFn(){return e.transaction().execute(async o=>wr({select:o.selectFrom(o.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",a=>a.selectFrom("Building as bg").select(u=>u.fn.count("bg.id").as("count")).whereRef("bg.blueprintId","=","bl.id").where("bg.userId","=",s.id).where("bg.landId","is",i).as("count"),a=>a.case().when(a.not(a.exists(a.selectFrom("Blueprint_Dependency as bd").select(a.lit(1).as("one")).whereRef("bd.blueprintId","=","bl.id").where(u=>u.not(u.exists(u.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").select(u.lit(1).as("one")).where("b.constructionId","is",null).where("b.userId","=",s.id).where("l.mapId","=",r).whereRef("b.blueprintId","=","bd.dependencyId"))))))).then(a.lit(!0)).else(a.lit(!1)).end().as("withAvailableBuildings")]).where("bl.id","not in",o.selectFrom("Blueprint_Conflict as bc").select("bc.conflictId").where("bc.blueprintId","in",o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").select("bg.blueprintId").where("bg.userId","=",s.id).where("l.mapId","=",r))).where("bl.id","in",o.selectFrom("Blueprint_Region as br").innerJoin("Land as l","l.regionId","br.regionId").select("br.blueprintId").where("l.id","=",i)).as("blueprint")).selectAll().where("withAvailableBuildings","=",!0).orderBy("blueprint.sort","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),count:M.number().int().nonnegative(),cycles:M.number().int().nonnegative(),sort:M.number().int().nonnegative(),withAvailableBuildings:ns()})}))}})}},component(){const{user:t,blueprints:e}=aB.useLoaderData(),{land:n}=mi({from:"/$locale/apps/derivean/map/$mapId/land/$landId"});return f.jsx(yce,{userId:t.id,land:n,blueprints:e})}}),pc="icon-[hugeicons--package-receive]",QI="icon-[heroicons--queue-list]",Vu=["p-4","border","border-slate-300","w-full","justify-start"],bce=({building:t})=>{const{mapId:e,locale:n}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsxs(ss,{icon:is,textTitle:f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:n,mapId:e,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),textSubTitle:t.land,children:[f.jsx(St,{icon:Hs,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Vu},children:f.jsx(J,{label:"Building production (label)"})}),f.jsx(St,{icon:QI,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Vu},children:f.jsx(J,{label:"Production queue (label)"})}),f.jsx(St,{icon:Xa,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Vu},children:f.jsx(J,{label:"Building inventory (label)"})}),f.jsx(St,{icon:ym,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Vu},children:f.jsx(J,{label:"Supply list (label)"})}),f.jsx(St,{icon:pc,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/demand",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Vu},children:f.jsx(J,{label:"Demand list (label)"})}),f.jsx(St,{icon:zx,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/transport",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Vu},children:f.jsx(J,{label:"Transport list (label)"})}),f.jsx(St,{icon:is,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/link",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Vu},children:f.jsx(J,{label:"Building links (label)"})})]})},WN="icon-[hugeicons--package]",vce=({requirement:t})=>{const e=t.available||0;return f.jsxs("div",{className:sn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",t.supply?["bg-purple-50","border-purple-400","hover:bg-purple-50","hover:border-purple-400"]:["bg-red-50","border-red-400","hover:bg-red-50","hover:border-red-400"],t.transport||e>=t.amount?["bg-green-50","border-green-400","hover:bg-green-50","hover:border-green-400"]:void 0]),children:[f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center",t.supply?["text-purple-600"]:["text-red-600"],t.transport||e>=t.amount?["text-green-600"]:void 0]),children:[t.supply||e>=t.amount?f.jsx(tn,{icon:pc}):f.jsx(tn,{icon:WN}),f.jsx("div",{className:"font-bold",children:t.name})]}),f.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[f.jsx("div",{children:fn({number:e})}),f.jsx("div",{children:"/"}),f.jsx("div",{className:"font-bold",children:fn({number:t.amount})})]})]}),f.jsx(qf,{value:100*e/t.amount,css:{progress:e>=t.amount?["bg-green-500"]:void 0}})]})},xce=({building:t,requirement:e,...n})=>{const{locale:r,mapId:i}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(ss,{icon:$N,textTitle:f.jsx(J,{label:"Construction requirements (label)"}),textSubTitle:f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),...n,children:e.length>0?e.map(s=>f.jsx(vce,{requirement:s},s.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(J,{label:"There are no construction requirements (label)"})})})},lB=Mt("/$locale/apps/derivean/map/$mapId/building/$buildingId/view")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"construction","requirement"],async queryFn(){return e.transaction().execute(async i=>wr({select:i.selectFrom("Blueprint_Requirement as br").innerJoin("Building as bg",s=>s.onRef("bg.blueprintId","=","br.blueprintId").on("bg.id","=",r)).innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive",s=>s.selectFrom("Transport as t").select(o=>o.fn.count("t.id").as("transport")).whereRef("t.targetId","=","bg.id").whereRef("t.resourceId","=","br.resourceId").as("transport"),s=>s.selectFrom("Supply as s").innerJoin("Building as b","b.id","s.buildingId").innerJoin("Blueprint as bp","bp.id","b.blueprintId").select(o=>ca.jsonObject({id:o.ref("s.id"),buildingId:o.ref("s.buildingId"),name:o.ref("bp.name")}).as("supply")).whereRef("s.resourceId","=","br.resourceId").where("s.buildingId","in",s.selectFrom("Building_Route_Building as brb").select("brb.linkId").where("brb.buildingId","=",r)).as("supply"),s=>s.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","br.resourceId").where("i.type","=","construction").limit(1).as("available")]).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number().nonnegative(),transport:M.number().nonnegative(),available:M.number().nonnegative().nullish(),supply:UD(M.object({id:M.string().min(1),buildingId:M.string().min(1),name:M.string().min(1)})).nullish(),passive:ns()})}))}})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{requirement:e}=lB.useLoaderData();return t.constructionId?f.jsx(xce,{building:t,requirement:e}):f.jsx(bce,{building:t})}}),wce=({transport:t})=>f.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsx("div",{className:"font-bold",children:t.name}),f.jsxs(Di,{children:["x",t.amount]})]}),_ce=({building:t,transport:e,...n})=>{const{mapId:r,locale:i}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(ss,{icon:zx,textTitle:f.jsx(J,{label:"Transport list (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(St,{icon:Is,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/transport",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>f.jsx(wce,{transport:s},s.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(J,{label:"There is nothing on the way to this building. (label)"})})})},uB=Mt("/$locale/apps/derivean/map/$mapId/building/$buildingId/transport")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{transport:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"transport","list"],queryFn:async()=>e.transaction().execute(async i=>wr({select:i.selectFrom("Transport as t").innerJoin("Resource as r","r.id","t.resourceId").select(["t.id","r.name","t.amount"]).where("t.targetId","=",r).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number()})}))})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{transport:e}=uB.useLoaderData();return f.jsx(_ce,{building:t,transport:e})}}),Sce=({supply:t})=>{const e=Fn([["GameMap"]]),n=Jt({async mutationFn({supplyId:r}){return Nt.transaction().execute(async i=>i.deleteFrom("Supply").where("id","=",r).execute())},async onSuccess(){await e()}});return f.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsx("div",{className:"flex flex-row gap-2 items-center",children:t.name}),f.jsx(cn,{iconEnabled:Dr,loading:n.isPending,onClick:()=>{n.mutate({supplyId:t.id})},variant:{variant:"danger"}})]})},Ece=({building:t,supply:e,...n})=>{const{mapId:r,locale:i}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(ss,{icon:ym,textTitle:f.jsx(J,{label:"Supply of (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(St,{icon:Is,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>f.jsx(Sce,{supply:s},s.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(J,{label:"This building does not supply anything. (label)"})})})},cB=Mt("/$locale/apps/derivean/map/$mapId/building/$buildingId/supply")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{supply:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"supply","list"],queryFn:async()=>e.transaction().execute(async i=>wr({select:i.selectFrom("Supply as s").innerJoin("Resource as r","r.id","s.resourceId").select(["s.id","r.name"]).where("s.buildingId","=",r).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1)})}))})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{supply:e}=cB.useLoaderData();return f.jsx(Ece,{building:t,supply:e})}}),Ice=({building:t,link:e})=>{const{mapId:n,locale:r}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx("div",{className:sn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx(St,{icon:is,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:e.id},search:{zoomToId:e.id},children:e.name}),f.jsx(St,{icon:Bx,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/link",params:{locale:r,mapId:n,buildingId:t.id},search:{zoomToId:e.landId},children:e.land})]})})},Nce=({building:t,link:e,...n})=>{const{locale:r,mapId:i}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(ss,{icon:is,textTitle:f.jsx(J,{label:"Building links (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(St,{icon:Is,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:i,buildingId:t.id}}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/link",params:{locale:r,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>f.jsx(Ice,{building:t,link:s},s.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(J,{label:"No linked buildings. (label)"})})})},dB=Mt("/$locale/apps/derivean/map/$mapId/building/$buildingId/link")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{link:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"link"],async queryFn(){return e.transaction().execute(async i=>wr({select:i.selectFrom("Building_Route_Building as brb").innerJoin("Building as b","b.id","brb.linkId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").innerJoin("Blueprint as bp","bp.id","b.blueprintId").select(["brb.id","bp.name","b.landId","r.name as land"]).where("brb.buildingId","=",r).orderBy("bp.name"),output:M.object({id:M.string().min(1),name:M.string().min(1),landId:M.string().min(1),land:M.string().min(1)})}))}})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{link:e}=dB.useLoaderData();return f.jsx(Nce,{link:e,building:t})}}),kce=M.object({buildingId:M.string().min(1),resourceId:M.string().min(1),mapId:M.string().min(1),userId:M.string().min(1),amount:xo()}),Cce=({mapId:t,userId:e,inventory:n})=>{const r=Fn([["GameMap"]]),i=Jt({async mutationFn({buildingId:u,resourceId:d,supplyId:p,mapId:h,userId:g}){return Nt.transaction().execute(async x=>p?x.deleteFrom("Supply").where("id","=",p).execute():x.insertInto("Supply").values({id:wn(),buildingId:u,resourceId:d,mapId:h,userId:g}).execute())},async onSuccess(){await r()}}),s=Jt({async mutationFn({buildingId:u,resourceId:d,demandId:p,mapId:h,userId:g,amount:x}){return Nt.transaction().execute(async _=>{if(p)return _.deleteFrom("Demand").where("id","=",p).execute();const{sum:S}=await _.selectFrom("Transport as t").select(I=>I.fn.sum("t.amount").as("sum")).where("t.resourceId","=",d).where("t.targetId","=",u).executeTakeFirstOrThrow(),k=x+(S||0);if(n.limit>0&&k<=0){qn.error(Vo.text("Not enough space (inventory is full/all resources are already on the way) (toast)"));return}return _.insertInto("Demand").values({id:wn(),buildingId:u,resourceId:d,mapId:h,userId:g,amount:n.limit>0?k:1,priority:0,type:"storage"}).execute()})},async onSuccess(){await r()}}),o=yi({resolver:bi(kce),defaultValues:{mapId:t,userId:e,buildingId:n.buildingId,resourceId:n.resourceId,amount:n.limit>0?n.limit-n.amount:1}}),a=gi({isLoading:o.formState.isLoading,isSubmitting:o.formState.isSubmitting}).slots;return f.jsxs("div",{className:sn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",n.limit>0&&n.amount>=n.limit?["border-amber-400","bg-amber-50","hover:bg-amber-50","hover:border-amber-600"]:void 0,n.supplyId||n.demandId?["bg-purple-50","border-purple-400","hover:bg-purple-50","hover:border-purple-400"]:void 0]),children:[f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center",n.supplyId||n.demandId?["text-purple-600"]:void 0]),children:[f.jsx("div",{className:"font-bold",children:n.name}),n.supplyId?f.jsx(tn,{icon:ym}):null,n.demandId?f.jsx(tn,{icon:pc}):null]}),fn({number:n.amount})," /"," ",fn({number:n.limit})]}),f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between",children:[f.jsx(cn,{iconEnabled:n.supplyId?Dr:ym,loading:i.isPending,onClick:()=>{i.mutate({mapId:t,userId:e,buildingId:n.buildingId,resourceId:n.resourceId,supplyId:n.supplyId})},variant:{variant:"subtle"},children:n.supplyId?f.jsx(J,{label:"Cancel supply (label)"}):f.jsx(J,{label:"Supply resource (label)"})}),n.demandId?f.jsx(cn,{iconEnabled:Dr,loading:s.isPending,onClick:()=>{s.mutate({mapId:t,userId:e,buildingId:n.buildingId,resourceId:n.resourceId,amount:0,demandId:n.demandId})},variant:{variant:"subtle"},children:f.jsx(J,{label:"Cancel demand (label)"})}):f.jsx(Tc,{textTitle:f.jsx(J,{label:"Demand resource (title)"}),target:f.jsx(cn,{iconEnabled:pc,variant:{variant:"subtle"},children:f.jsx(J,{label:"Demand resource (label)"})}),css:{modal:["w-1/3"]},children:f.jsxs("form",{className:a.base(),onSubmit:Ui({form:o,mutation:s}),children:[f.jsx(di,{variant:{highlight:!0},error:o.formState.errors.root}),f.jsx(hn,{formState:o.formState,name:"amount",label:f.jsx(J,{label:"Demanded amount (label)"}),children:f.jsx("input",{type:"number",min:1,max:n.limit-n.amount,className:a.input(),...o.register("amount")})}),f.jsx(cn,{iconEnabled:pc,iconDisabled:WN,type:"submit",children:f.jsx(J,{label:"Submit demand (submit)"})})]})})]}),n.limit>0?f.jsx(qf,{variant:{size:"md"},value:100*n.amount/n.limit,css:{progress:n.amount>=n.limit?["bg-amber-500"]:void 0}}):null]})},Tce=({building:t,userId:e,inventory:n,fulltextProps:r,...i})=>{const{locale:s,mapId:o}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsxs(ss,{icon:Xa,textTitle:f.jsx(J,{label:"Inventory (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(St,{icon:Is,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:o,buildingId:t.id}}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:s,mapId:o,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...i,children:[f.jsx(F2,{...r}),f.jsx("div",{children:f.jsx(J,{label:"Inventory - storage (label)",css:{base:["font-bold","text-slate-500"]}})}),n.length>0?n.map(a=>f.jsx(Cce,{mapId:o,userId:e,inventory:a},a.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(J,{label:"No inventory storage. (label)"})})]})},Cb=Mt("/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory")({validateSearch:yr(M.object({fulltext:M.string().optional()})),loaderDeps({search:{fulltext:t}}){return{fulltext:t}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{fulltext:r},params:{mapId:i,buildingId:s}}){return{user:await n(),inventory:await t.ensureQueryData({queryKey:["GameMap",i,"building",s,"inventory","storage",{fulltext:r}],async queryFn(){return e.transaction().execute(async a=>wr({select:a.selectFrom("Inventory as i").innerJoin("Building_Inventory as bi",u=>u.on("bi.buildingId","=",s).onRef("bi.inventoryId","=","i.id")).innerJoin("Resource as r","r.id","i.resourceId").leftJoin("Supply as s",u=>u.onRef("s.resourceId","=","i.resourceId").on("s.buildingId","=",s)).leftJoin("Demand as d",u=>u.onRef("d.resourceId","=","i.resourceId").on("d.buildingId","=",s)).select(["i.id","i.amount","i.limit","r.name","bi.buildingId","i.resourceId","s.id as supplyId","d.id as demandId"]).where("i.type","in",["storage"]).orderBy("r.name"),query({select:u,where:d}){let p=u;if(d?.fulltext){const h=`%${d.fulltext}%`.toLowerCase();p=p.where(g=>g.or([g("r.name","like",h)]))}return p},output:M.object({id:M.string().min(1),buildingId:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),limit:M.number().nonnegative(),name:M.string().min(1),supplyId:M.string().nullish(),demandId:M.string().nullish()}),filter:{fulltext:r}}))}})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{fulltext:e}=Cb.useSearch(),n=Cb.useNavigate(),{user:r,inventory:i}=Cb.useLoaderData();return f.jsx(Tce,{building:t,userId:r.id,inventory:i,fulltextProps:{value:e,onFulltext(s){n({search:{fulltext:s}})}}})}}),jce=({mapId:t,userId:e,demand:n})=>{const r=Fn([["GameMap"]]),i=Jt({async mutationFn({demandId:a}){return Nt.transaction().execute(async u=>u.deleteFrom("Demand").where("id","=",a).execute())},async onSuccess(){await r()}}),s=Jt({async mutationFn({demandId:a}){return Nt.transaction().execute(async u=>{const{priority:d}=await u.selectFrom("Demand as d").select(p=>p.fn.max("d.priority").as("priority")).where("d.mapId","=",t).where("d.userId","=",e).where("d.id","!=",a).executeTakeFirstOrThrow();return u.updateTable("Demand").set({priority:d+1}).where("id","=",a).execute()})},async onSuccess(){await r()}}),o=Jt({async mutationFn({demandId:a}){return Nt.transaction().execute(async u=>{const{priority:d}=await u.selectFrom("Demand as d").select(p=>p.fn.min("d.priority").as("priority")).where("d.mapId","=",t).where("d.userId","=",e).where("d.id","!=",a).executeTakeFirstOrThrow();return u.updateTable("Demand").set({priority:d-1}).where("id","=",a).execute()})},async onSuccess(){await r()}});return f.jsxs("div",{className:sn(["flex","flex-col","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200",n.transport?["text-green-600","bg-green-50","border-green-400"]:void 0]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[(n.transport||0)>0?f.jsx(tn,{icon:pc}):f.jsx(tn,{icon:WN}),f.jsx("div",{className:"font-bold",children:n.name})]}),f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsxs(Di,{css:{base:n.transport?["bg-green-50","border-green-400","hover:bg-green-50","hover:border-green-400"]:void 0},children:["x",fn({number:n.amount})]}),f.jsx(cn,{iconEnabled:Dr,loading:i.isPending,onClick:()=>{i.mutate({demandId:n.id})},variant:{variant:"danger"}})]})]}),f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[f.jsx(cn,{iconEnabled:aJ,variant:{variant:"subtle"},loading:s.isPending||o.isPending,onClick:()=>{s.mutate({demandId:n.id})},children:f.jsx(J,{label:"Priority up (label)"})}),f.jsx(Di,{css:{base:["bg-purple-50","border-purple-400","text-purple-600"]},children:n.priority}),f.jsx(cn,{iconEnabled:oJ,variant:{variant:"subtle"},loading:s.isPending||o.isPending,onClick:()=>{o.mutate({demandId:n.id})},children:f.jsx(J,{label:"Priority down (label)"})})]})]})},Rce=({userId:t,building:e,demand:n,...r})=>{const{mapId:i,locale:s}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(ss,{icon:pc,textTitle:f.jsx(J,{label:"Demand (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(St,{icon:Is,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:e.id}}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/demand",params:{locale:s,mapId:i,buildingId:e.id},search:{zoomToId:e.id},children:e.name})]}),...r,children:n.length>0?n.map(o=>f.jsx(jce,{mapId:i,userId:t,demand:o},o.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(J,{label:"This building does not demand anything. (label)"})})})},fB=Mt("/$locale/apps/derivean/map/$mapId/building/$buildingId/demand")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,buildingId:i}}){return{user:await n(),demand:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"demand","list"],queryFn:async()=>e.transaction().execute(async o=>wr({select:o.selectFrom("Demand as d").innerJoin("Building_Inventory as bi","bi.buildingId","d.buildingId").innerJoin("Inventory as i",a=>a.onRef("i.id","=","bi.inventoryId").onRef("i.resourceId","=","d.resourceId")).innerJoin("Resource as r","r.id","d.resourceId").select(["d.id","r.name","d.amount","i.limit","d.priority","i.amount as available",a=>a.selectFrom("Transport as t").select(u=>u.fn.sum("t.amount").as("transport")).whereRef("t.targetId","=","d.buildingId").whereRef("t.resourceId","=","d.resourceId").as("transport")]).where("d.buildingId","=",i).where("i.type","=","storage").where("d.type","=","storage").orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number(),available:M.number(),priority:M.number(),limit:M.number(),transport:M.number().nullish()})}))})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{user:e,demand:n}=fB.useLoaderData();return f.jsx(Rce,{userId:e.id,building:t,demand:n})}}),pB=({requirement:t})=>{const e=(t.available||0)>=t.amount;return f.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.passive?["border-purple-300","hover:border-purple-500","hover:bg-purple-100"]:void 0,t.available===void 0||e?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),children:[f.jsx("div",{className:"font-bold",children:t.name}),t.available===void 0?f.jsxs(Di,{children:["x",fn({number:t.amount})]}):f.jsxs(Di,{css:{base:e?["bg-green-200","border-green-500"]:["bg-red-200","border-red-500"]},children:[f.jsx("div",{className:"font-bold",children:fn({number:t.available})}),f.jsx("div",{children:"/"}),f.jsx("div",{className:"font-light",children:fn({number:t.amount})})]})]})},Oce=({blueprint:t,requirement:e,...n})=>f.jsx(ss,{icon:Ir,textTitle:f.jsx(J,{label:"Building requirements (label)"}),textSubTitle:t.name,...n,children:e.length>0?e.map(r=>f.jsx(pB,{requirement:r},r.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(J,{label:"There are no requirements. (label)"})})}),hB=Mt("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{blueprintId:n}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","blueprint",n,"requirements"],async queryFn(){return e.transaction().execute(async r=>wr({select:r.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive"]).where("br.blueprintId","=",n),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number().nonnegative(),passive:ns()})}))}})}},component(){const{blueprint:t}=mi({from:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId"}),{requirement:e}=hB.useLoaderData();return f.jsx(Oce,{blueprint:t,requirement:e})}}),q3=Ur(),Ace=[q3({name:"name",header(){return f.jsx(J,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),q3({name:"amount",header(){return f.jsx(J,{label:"Amount (label)"})},render({value:t}){return fn({number:t})},size:10})],qce=({table:t,...e})=>f.jsx(zr,{table:Wr({...t,columns:Ace}),...e}),Tb=Mt("/$locale/apps/derivean/game/blueprint/production/$id/resources")({validateSearch:yr(Br(ig)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bpr.id","=",a.id)),a?.idIn&&(u=u.where("bpr.id","in",a.idIn)),a?.resourceId&&(u=u.where("bpr.resourceId","=",a.resourceId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Tb.useLoaderData(),{filter:n,cursor:r}=Tb.useSearch(),i=Tb.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(qce,{table:{data:t,filter:{value:n,set:Mr(i)}},fulltext:{value:n?.fulltext,set:$r(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of production resource requirements (label)"}),...Lr(i)}})})}}),IE=Ur(),Pce=[IE({name:"name",header(){return f.jsx(J,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),IE({name:"amount",header(){return f.jsx(J,{label:"Amount (label)"})},render({value:t}){return fn({number:t})},size:10}),IE({name:"passive",header(){return f.jsx(J,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx(wx,{value:t})},size:10})],Fce=({table:t,...e})=>f.jsx(zr,{table:Wr({...t,columns:Pce}),...e}),jb=Mt("/$locale/apps/derivean/game/blueprint/production/$id/requirements")({validateSearch:yr(Br(rg)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bpr.id","=",a.id)),a?.idIn&&(u=u.where("bpr.id","in",a.idIn)),a?.resourceId&&(u=u.where("bpr.resourceId","=",a.resourceId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),passive:ns()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=jb.useLoaderData(),{filter:n,cursor:r}=jb.useSearch(),i=jb.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(Fce,{table:{data:t,filter:{value:n,set:Mr(i)}},fulltext:{value:n?.fulltext,set:$r(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of production requirements (label)"}),...Lr(i)}})})}}),Dce=Ur(),Lce=[Dce({name:"name",header(){return f.jsx(J,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=Zt({from:"/$locale"});return f.jsx(St,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],Mce=({table:t,...e})=>f.jsx(zr,{table:Wr({...t,columns:Lce}),...e}),Rb=Mt("/$locale/apps/derivean/game/blueprint/production/$id/dependencies")({validateSearch:yr(Br(ng)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bpd.id","=",a.id)),a?.idIn&&(u=u.where("bpd.id","in",a.idIn)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Rb.useLoaderData(),{filter:n,cursor:r}=Rb.useSearch(),i=Rb.useNavigate(),{tva:s}=gr({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Mce,{table:{data:t,filter:{value:n,set:Mr(i)}},fulltext:{value:n?.fulltext,set:$r(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(J,{label:"Number of dependencies (label)"}),...Lr(i)}})})}}),$ce=({queue:t,inventory:e})=>{const n=e.find(i=>i.resourceId===t.resourceId),r=n&&n.amount+t.amount>n.limit;return f.jsxs("div",{className:sn(["flex","flex-col","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300",r?["border-red-400","hover:border-red-600"]:void 0]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[f.jsx("div",{className:"font-bold",children:t.name}),f.jsx("div",{className:"flex flex-row gap-2 items-center",children:f.jsxs(Di,{children:["x",fn({number:t.amount})]})}),f.jsx(zN,{cycles:t.cycles})]}),f.jsx(qf,{css:{progress:r?["bg-red-500"]:void 0},value:100*t.cycle/t.cycles})]})},Bce=({building:t,queue:e,inventory:n,...r})=>{const{mapId:i,locale:s}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(ss,{icon:QI,textTitle:f.jsx(J,{label:"Production queue (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(St,{icon:Is,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:t.id}}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...r,children:e.length>0?e.map(o=>f.jsx($ce,{queue:o,inventory:n},o.id)):f.jsxs("div",{className:sn(["flex","flex-col","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:[f.jsx(J,{label:"Production queue is empty. (label)"}),f.jsx(St,{icon:QI,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id},children:f.jsx(J,{label:"Plan queue (label)"})})]})})},mB=Mt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{queue:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production","queue"],async queryFn(){return e.transaction().execute(async i=>wr({select:i.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","r.name","bp.resourceId","p.cycle","bp.amount","bp.cycles"]).where("p.buildingId","=",r),output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),cycle:M.number().int().nonnegative(),cycles:M.number().int().nonnegative()})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"inventory","list"],async queryFn(){return e.transaction().execute(async i=>wr({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","i.amount","i.limit","r.name"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).orderBy("r.name"),query({select:s,where:o}){let a=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("r.name","like",u)]))}return a},output:M.object({id:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),limit:M.number().nonnegative(),name:M.string().min(1)})}))}})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{queue:e,inventory:n}=mB.useLoaderData();return f.jsx(Bce,{building:t,queue:e,inventory:n})}}),zce=({building:t,production:e})=>{const{mapId:n,locale:r}=Zt({from:"/$locale/apps/derivean/map/$mapId"}),i=Fn([["GameMap"]]),s=Jt({async mutationFn({blueprintProductionId:d,buildingId:p}){return Nt.transaction().execute(async h=>h.updateTable("Building").set({productionId:d}).where("id","=",p).execute())},async onSuccess(){await i()}}),o=Jt({async mutationFn({buildingId:d}){return Nt.transaction().execute(async p=>p.updateTable("Building").set({productionId:null}).where("id","=",d).execute())},async onSuccess(){await i()}}),a=Jt({async mutationFn({blueprintProductionId:d,buildingId:p}){return Nt.transaction().execute(async h=>h.updateTable("Building").set({recurringProductionId:d}).where("id","=",p).execute())},async onSuccess(){await i()}}),u=Jt({async mutationFn({buildingId:d}){return Nt.transaction().execute(async p=>p.updateTable("Building").set({recurringProductionId:null}).where("id","=",d).execute())},async onSuccess(){await i()}});return f.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200",e.withAvailableResources?["bg-green-50","border-green-500"]:["bg-red-50","border-red-500"]]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[t.productionId===e.id?f.jsx(cn,{iconEnabled:GI,loading:o.isPending,onClick:()=>{o.mutate({buildingId:t.id})}}):f.jsx(cn,{iconEnabled:"icon-[solar--play-outline]",loading:s.isPending,onClick:()=>{s.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),t.recurringProductionId===e.id?f.jsx(cn,{iconEnabled:GI,loading:u.isPending,onClick:()=>{u.mutate({buildingId:t.id})}}):f.jsx(cn,{iconEnabled:M$,loading:a.isPending,onClick:()=>{a.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),f.jsxs(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements",params:{locale:r,mapId:n,buildingId:t.id,productionId:e.id},children:[e.name,f.jsxs(Di,{children:["x",fn({number:e.amount})]})]})]}),f.jsx(zN,{cycles:e.cycles})]})},Wce=({building:t,production:e,...n})=>{const{mapId:r,locale:i}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(ss,{icon:Hs,textTitle:f.jsx(J,{label:"Building production (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(St,{icon:Is,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>f.jsx(zce,{building:t,production:s},s.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(J,{label:"This building does not produce anything. (label)"})})})},gB=Mt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,buildingId:i}}){const s=await n();return{production:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"production","list"],async queryFn(){return e.transaction().execute(async o=>wr({select:o.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.cycles",a=>a.case().when(a.not(a.exists(a.selectFrom("Blueprint_Production_Requirement as bpr").select(a.lit(1).as("one")).whereRef("bpr.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Inventory as i").select(u.lit(1).as("one")).where("i.id","in",u.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).where("i.type","in",["storage"]).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))).then(a.lit(!0)).else(a.lit(!1)).end().as("withAvailableResources")]).where("bp.blueprintId","=",o.selectFrom("Building as b").select("b.blueprintId").where("b.id","=",i)).where(a=>a.not(a.exists(a.selectFrom("Blueprint_Production_Dependency as bpd").select("bpd.blueprintProductionId").whereRef("bpd.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Building as b").select("b.blueprintId").where("b.userId","=",s.id).where("b.constructionId","is",null).whereRef("b.blueprintId","=","bpd.blueprintId"))))))).where(a=>a.not(a.exists(a.selectFrom("Blueprint_Production_Resource as bpr").select("bpr.blueprintProductionId").whereRef("bpr.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Inventory as i").select("i.resourceId").where("i.id","in",u.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))).orderBy("r.name"),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number().nonnegative(),cycles:M.number().int().nonnegative(),withAvailableResources:ns()})}))}})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=gB.useLoaderData();return f.jsx(Wce,{building:t,production:e})}}),Uce=Mt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r,productionId:i}}){return{production:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production",i,"fetch"],async queryFn(){return e.transaction().execute(async s=>wa({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","bp.amount","r.name"]).where("bp.id","=",i),output:M.object({id:M.string().min(1),amount:M.number().nonnegative(),name:M.string().min(1)})}))}})}}}),Vce=({building:t,production:e,requirement:n,...r})=>{const{mapId:i,locale:s}=Zt({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(ss,{icon:Ir,textTitle:f.jsx(J,{label:"Production requirements (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(St,{icon:Is,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id}}),f.jsx(St,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),f.jsx("div",{children:e.name})]}),...r,children:n.length>0?n.map(o=>f.jsx(pB,{requirement:o},o.id)):f.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(J,{label:"There are no requirements. (label)"})})})},yB=Mt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r,productionId:i}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production",i,"requirement","list"],async queryFn(){return e.transaction().execute(async s=>wr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.amount","bpr.passive",o=>o.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",s.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","bpr.resourceId").where("i.type","=","storage").orderBy("i.amount","desc").limit(1).as("available")]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number().nonnegative(),available:M.number().nonnegative().nullish(),passive:ns()})}))}})}},component(){const{building:t}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=mi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId"}),{requirement:n}=yB.useLoaderData();return f.jsx(Vce,{building:t,production:e,requirement:n})}}),UN=QZ.update({id:"/$locale",path:"/$locale",getParentRoute:()=>oN}),Hce=YZ.update({id:"/",path:"/",getParentRoute:()=>oN}),Gce=XZ.update({id:"/",path:"/",getParentRoute:()=>UN}),xu=tY.update({id:"/apps/derivean",path:"/apps/derivean",getParentRoute:()=>UN}),Js=iY.update({id:"/root",path:"/root",getParentRoute:()=>xu}),bB=sY.update({id:"/map",path:"/map",getParentRoute:()=>xu}),sg=oY.update({id:"/game",path:"/game",getParentRoute:()=>xu}),Kce=dY.update({id:"/",path:"/",getParentRoute:()=>Js}),Qce=NL.update({id:"/",path:"/",getParentRoute:()=>sg}),Jce=HI.update({id:"/editor",path:"/editor",getParentRoute:()=>Js}),Zce=Poe.update({id:"/public/register",path:"/public/register",getParentRoute:()=>xu}),Yce=Foe.update({id:"/public/logout",path:"/public/logout",getParentRoute:()=>xu}),Xce=$oe.update({id:"/public/login",path:"/public/login",getParentRoute:()=>xu}),wu=KI.update({id:"/$mapId",path:"/$mapId",getParentRoute:()=>bB}),ede=B$.update({id:"/db/schema",path:"/db/schema",getParentRoute:()=>xu}),tde=yb.update({id:"/user/list",path:"/user/list",getParentRoute:()=>Js}),VN=z$.update({id:"/user/$id",path:"/user/$id",getParentRoute:()=>Js}),nde=bb.update({id:"/tag/list",path:"/tag/list",getParentRoute:()=>Js}),rde=vb.update({id:"/resource/list",path:"/resource/list",getParentRoute:()=>Js}),vB=H$.update({id:"/resource/$id",path:"/resource/$id",getParentRoute:()=>Js}),ide=xb.update({id:"/region/list",path:"/region/list",getParentRoute:()=>Js}),sde=wb.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>Js}),_u=Z$.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>Js}),ode=nue.update({id:"/view",path:"/view",getParentRoute:()=>wu}),ade=_b.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>sg}),zf=Y$.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>sg}),lde=aue.update({id:"/view",path:"/view",getParentRoute:()=>VN}),ude=lue.update({id:"/view",path:"/view",getParentRoute:()=>vB}),cde=uue.update({id:"/region/$id/view",path:"/region/$id/view",getParentRoute:()=>Js}),Ux=X$.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>Js}),dde=eB.update({id:"/view",path:"/view",getParentRoute:()=>_u}),fde=ih.update({id:"/requirements",path:"/requirements",getParentRoute:()=>_u}),pde=sh.update({id:"/production",path:"/production",getParentRoute:()=>_u}),hde=oh.update({id:"/inventory",path:"/inventory",getParentRoute:()=>_u}),mde=tB.update({id:"/edit",path:"/edit",getParentRoute:()=>_u}),gde=ah.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>_u}),yde=lh.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>_u}),xB=Oue.update({id:"/waypoint/$waypointId",path:"/waypoint/$waypointId",getParentRoute:()=>wu}),bde=nB.update({id:"/land/list",path:"/land/list",getParentRoute:()=>wu}),wB=Fue.update({id:"/land/$landId",path:"/land/$landId",getParentRoute:()=>wu}),vde=rB.update({id:"/building/list",path:"/building/list",getParentRoute:()=>wu}),Sa=Mue.update({id:"/building/$buildingId",path:"/building/$buildingId",getParentRoute:()=>wu}),_B=$ue.update({id:"/blueprint/$blueprintId",path:"/blueprint/$blueprintId",getParentRoute:()=>wu}),Vx=iB.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>sg}),xde=Uue.update({id:"/view",path:"/view",getParentRoute:()=>zf}),wde=Sb.update({id:"/requirements",path:"/requirements",getParentRoute:()=>zf}),_de=Eb.update({id:"/production",path:"/production",getParentRoute:()=>zf}),Sde=Ib.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>zf}),Ede=Nb.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>zf}),Ide=kb.update({id:"/building/list",path:"/building/list",getParentRoute:()=>VN}),Nde=uh.update({id:"/resources",path:"/resources",getParentRoute:()=>Ux}),kde=ch.update({id:"/requirements",path:"/requirements",getParentRoute:()=>Ux}),Cde=dh.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>Ux}),Tde=oB.update({id:"/transport",path:"/transport",getParentRoute:()=>xB}),jde=aB.update({id:"/construction",path:"/construction",getParentRoute:()=>wB}),Rde=lB.update({id:"/view",path:"/view",getParentRoute:()=>Sa}),Ode=uB.update({id:"/transport",path:"/transport",getParentRoute:()=>Sa}),Ade=cB.update({id:"/supply",path:"/supply",getParentRoute:()=>Sa}),qde=dB.update({id:"/link",path:"/link",getParentRoute:()=>Sa}),Pde=Cb.update({id:"/inventory",path:"/inventory",getParentRoute:()=>Sa}),Fde=fB.update({id:"/demand",path:"/demand",getParentRoute:()=>Sa}),Dde=hB.update({id:"/requirements",path:"/requirements",getParentRoute:()=>_B}),Lde=Tb.update({id:"/resources",path:"/resources",getParentRoute:()=>Vx}),Mde=jb.update({id:"/requirements",path:"/requirements",getParentRoute:()=>Vx}),$de=Rb.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>Vx}),Bde=mB.update({id:"/production/queue",path:"/production/queue",getParentRoute:()=>Sa}),zde=gB.update({id:"/production/list",path:"/production/list",getParentRoute:()=>Sa}),SB=Uce.update({id:"/production/$productionId",path:"/production/$productionId",getParentRoute:()=>Sa}),Wde=yB.update({id:"/requirements",path:"/requirements",getParentRoute:()=>SB}),Ude={LocaleAppsDeriveanGameBlueprintIdConflictsRoute:Ede,LocaleAppsDeriveanGameBlueprintIdDependenciesRoute:Sde,LocaleAppsDeriveanGameBlueprintIdProductionRoute:_de,LocaleAppsDeriveanGameBlueprintIdRequirementsRoute:wde,LocaleAppsDeriveanGameBlueprintIdViewRoute:xde},Vde=zf._addFileChildren(Ude),Hde={LocaleAppsDeriveanGameBlueprintProductionIdDependenciesRoute:$de,LocaleAppsDeriveanGameBlueprintProductionIdRequirementsRoute:Mde,LocaleAppsDeriveanGameBlueprintProductionIdResourcesRoute:Lde},Gde=Vx._addFileChildren(Hde),Kde={LocaleAppsDeriveanGameIndexRoute:Qce,LocaleAppsDeriveanGameBlueprintIdRoute:Vde,LocaleAppsDeriveanGameBlueprintListRoute:ade,LocaleAppsDeriveanGameBlueprintProductionIdRoute:Gde},Qde=sg._addFileChildren(Kde),Jde={LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRequirementsRoute:Dde},Zde=_B._addFileChildren(Jde),Yde={LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRequirementsRoute:Wde},Xde=SB._addFileChildren(Yde),efe={LocaleAppsDeriveanMapMapIdBuildingBuildingIdDemandRoute:Fde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdInventoryRoute:Pde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdLinkRoute:qde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdSupplyRoute:Ade,LocaleAppsDeriveanMapMapIdBuildingBuildingIdTransportRoute:Ode,LocaleAppsDeriveanMapMapIdBuildingBuildingIdViewRoute:Rde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRoute:Xde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionListRoute:zde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionQueueRoute:Bde},tfe=Sa._addFileChildren(efe),nfe={LocaleAppsDeriveanMapMapIdLandLandIdConstructionRoute:jde},rfe=wB._addFileChildren(nfe),ife={LocaleAppsDeriveanMapMapIdWaypointWaypointIdTransportRoute:Tde},sfe=xB._addFileChildren(ife),ofe={LocaleAppsDeriveanMapMapIdViewRoute:ode,LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRoute:Zde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdRoute:tfe,LocaleAppsDeriveanMapMapIdBuildingListRoute:vde,LocaleAppsDeriveanMapMapIdLandLandIdRoute:rfe,LocaleAppsDeriveanMapMapIdLandListRoute:bde,LocaleAppsDeriveanMapMapIdWaypointWaypointIdRoute:sfe},afe=wu._addFileChildren(ofe),lfe={LocaleAppsDeriveanMapMapIdRoute:afe},ufe=bB._addFileChildren(lfe),cfe={LocaleAppsDeriveanRootBlueprintIdConflictsRoute:yde,LocaleAppsDeriveanRootBlueprintIdDependenciesRoute:gde,LocaleAppsDeriveanRootBlueprintIdEditRoute:mde,LocaleAppsDeriveanRootBlueprintIdInventoryRoute:hde,LocaleAppsDeriveanRootBlueprintIdProductionRoute:pde,LocaleAppsDeriveanRootBlueprintIdRequirementsRoute:fde,LocaleAppsDeriveanRootBlueprintIdViewRoute:dde},dfe=_u._addFileChildren(cfe),ffe={LocaleAppsDeriveanRootResourceIdViewRoute:ude},pfe=vB._addFileChildren(ffe),hfe={LocaleAppsDeriveanRootUserIdViewRoute:lde,LocaleAppsDeriveanRootUserIdBuildingListRoute:Ide},mfe=VN._addFileChildren(hfe),gfe={LocaleAppsDeriveanRootBlueprintProductionIdDependenciesRoute:Cde,LocaleAppsDeriveanRootBlueprintProductionIdRequirementsRoute:kde,LocaleAppsDeriveanRootBlueprintProductionIdResourcesRoute:Nde},yfe=Ux._addFileChildren(gfe),bfe={LocaleAppsDeriveanRootEditorRoute:Jce,LocaleAppsDeriveanRootIndexRoute:Kce,LocaleAppsDeriveanRootBlueprintIdRoute:dfe,LocaleAppsDeriveanRootBlueprintListRoute:sde,LocaleAppsDeriveanRootRegionListRoute:ide,LocaleAppsDeriveanRootResourceIdRoute:pfe,LocaleAppsDeriveanRootResourceListRoute:rde,LocaleAppsDeriveanRootTagListRoute:nde,LocaleAppsDeriveanRootUserIdRoute:mfe,LocaleAppsDeriveanRootUserListRoute:tde,LocaleAppsDeriveanRootBlueprintProductionIdRoute:yfe,LocaleAppsDeriveanRootRegionIdViewRoute:cde},vfe=Js._addFileChildren(bfe),xfe={LocaleAppsDeriveanGameRoute:Qde,LocaleAppsDeriveanMapRoute:ufe,LocaleAppsDeriveanRootRoute:vfe,LocaleAppsDeriveanDbSchemaRoute:ede,LocaleAppsDeriveanPublicLoginRoute:Xce,LocaleAppsDeriveanPublicLogoutRoute:Yce,LocaleAppsDeriveanPublicRegisterRoute:Zce},wfe=xu._addFileChildren(xfe),_fe={LocaleIndexRoute:Gce,LocaleAppsDeriveanRoute:wfe},Sfe=UN._addFileChildren(_fe),Efe={IndexRoute:Hce,LocaleRoute:Sfe},Ife=oN._addFileChildren(Efe)._addFileTypes(),EB=new K4({defaultOptions:{queries:{placeholderData:P4}}}),Nfe=Vz({routeTree:Ife,context:{queryClient:EB,tva:jQ,async session(){return Um.parse(null)},kysely:Nt},defaultPendingComponent:vZ,defaultPreload:"intent",defaultPreloadStaleTime:0,defaultPendingMinMs:200}),P3=document.getElementById("app");J5({limit:{maxRequests:10,perMilliseconds:100}});P3.innerHTML||HZ.createRoot(P3).render(f.jsx(ez,{client:EB,children:f.jsx(yW,{router:Nfe})}))})();