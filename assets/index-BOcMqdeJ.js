(async()=>{function vG(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var mp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Co(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function xG(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var SC={exports:{}},ix={},EC={exports:{}},Vn={};var tL;function bG(){if(tL)return Vn;tL=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function p(Y){return Y===null||typeof Y!="object"?null:(Y=f&&Y[f]||Y["@@iterator"],typeof Y=="function"?Y:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function _(Y,oe,ce){this.props=Y,this.context=oe,this.refs=S,this.updater=ce||g}_.prototype.isReactComponent={},_.prototype.setState=function(Y,oe){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,oe,"setState")},_.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function b(){}b.prototype=_.prototype;function E(Y,oe,ce){this.props=Y,this.context=oe,this.refs=S,this.updater=ce||g}var M=E.prototype=new b;M.constructor=E,x(M,_.prototype),M.isPureReactComponent=!0;var T=Array.isArray,k=Object.prototype.hasOwnProperty,N={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function L(Y,oe,ce){var ie,ue={},de=null,be=null;if(oe!=null)for(ie in oe.ref!==void 0&&(be=oe.ref),oe.key!==void 0&&(de=""+oe.key),oe)k.call(oe,ie)&&!D.hasOwnProperty(ie)&&(ue[ie]=oe[ie]);var we=arguments.length-2;if(we===1)ue.children=ce;else if(1<we){for(var Ce=Array(we),Ie=0;Ie<we;Ie++)Ce[Ie]=arguments[Ie+2];ue.children=Ce}if(Y&&Y.defaultProps)for(ie in we=Y.defaultProps,we)ue[ie]===void 0&&(ue[ie]=we[ie]);return{$$typeof:t,type:Y,key:de,ref:be,props:ue,_owner:N.current}}function R(Y,oe){return{$$typeof:t,type:Y.type,key:oe,ref:Y.ref,props:Y.props,_owner:Y._owner}}function A(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function P(Y){var oe={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(ce){return oe[ce]})}var j=/\/+/g;function U(Y,oe){return typeof Y=="object"&&Y!==null&&Y.key!=null?P(""+Y.key):oe.toString(36)}function B(Y,oe,ce,ie,ue){var de=typeof Y;(de==="undefined"||de==="boolean")&&(Y=null);var be=!1;if(Y===null)be=!0;else switch(de){case"string":case"number":be=!0;break;case"object":switch(Y.$$typeof){case t:case e:be=!0}}if(be)return be=Y,ue=ue(be),Y=ie===""?"."+U(be,0):ie,T(ue)?(ce="",Y!=null&&(ce=Y.replace(j,"$&/")+"/"),B(ue,oe,ce,"",function(Ie){return Ie})):ue!=null&&(A(ue)&&(ue=R(ue,ce+(!ue.key||be&&be.key===ue.key?"":(""+ue.key).replace(j,"$&/")+"/")+Y)),oe.push(ue)),1;if(be=0,ie=ie===""?".":ie+":",T(Y))for(var we=0;we<Y.length;we++){de=Y[we];var Ce=ie+U(de,we);be+=B(de,oe,ce,Ce,ue)}else if(Ce=p(Y),typeof Ce=="function")for(Y=Ce.call(Y),we=0;!(de=Y.next()).done;)de=de.value,Ce=ie+U(de,we++),be+=B(de,oe,ce,Ce,ue);else if(de==="object")throw oe=String(Y),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.");return be}function $(Y,oe,ce){if(Y==null)return Y;var ie=[],ue=0;return B(Y,ie,"","",function(de){return oe.call(ce,de,ue++)}),ie}function q(Y){if(Y._status===-1){var oe=Y._result;oe=oe(),oe.then(function(ce){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=ce)},function(ce){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=ce)}),Y._status===-1&&(Y._status=0,Y._result=oe)}if(Y._status===1)return Y._result.default;throw Y._result}var te={current:null},W={transition:null},Z={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:W,ReactCurrentOwner:N};function J(){throw Error("act(...) is not supported in production builds of React.")}return Vn.Children={map:$,forEach:function(Y,oe,ce){$(Y,function(){oe.apply(this,arguments)},ce)},count:function(Y){var oe=0;return $(Y,function(){oe++}),oe},toArray:function(Y){return $(Y,function(oe){return oe})||[]},only:function(Y){if(!A(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Vn.Component=_,Vn.Fragment=n,Vn.Profiler=i,Vn.PureComponent=E,Vn.StrictMode=r,Vn.Suspense=l,Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,Vn.act=J,Vn.cloneElement=function(Y,oe,ce){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var ie=x({},Y.props),ue=Y.key,de=Y.ref,be=Y._owner;if(oe!=null){if(oe.ref!==void 0&&(de=oe.ref,be=N.current),oe.key!==void 0&&(ue=""+oe.key),Y.type&&Y.type.defaultProps)var we=Y.type.defaultProps;for(Ce in oe)k.call(oe,Ce)&&!D.hasOwnProperty(Ce)&&(ie[Ce]=oe[Ce]===void 0&&we!==void 0?we[Ce]:oe[Ce])}var Ce=arguments.length-2;if(Ce===1)ie.children=ce;else if(1<Ce){we=Array(Ce);for(var Ie=0;Ie<Ce;Ie++)we[Ie]=arguments[Ie+2];ie.children=we}return{$$typeof:t,type:Y.type,key:ue,ref:de,props:ie,_owner:be}},Vn.createContext=function(Y){return Y={$$typeof:o,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:s,_context:Y},Y.Consumer=Y},Vn.createElement=L,Vn.createFactory=function(Y){var oe=L.bind(null,Y);return oe.type=Y,oe},Vn.createRef=function(){return{current:null}},Vn.forwardRef=function(Y){return{$$typeof:a,render:Y}},Vn.isValidElement=A,Vn.lazy=function(Y){return{$$typeof:u,_payload:{_status:-1,_result:Y},_init:q}},Vn.memo=function(Y,oe){return{$$typeof:c,type:Y,compare:oe===void 0?null:oe}},Vn.startTransition=function(Y){var oe=W.transition;W.transition={};try{Y()}finally{W.transition=oe}},Vn.unstable_act=J,Vn.useCallback=function(Y,oe){return te.current.useCallback(Y,oe)},Vn.useContext=function(Y){return te.current.useContext(Y)},Vn.useDebugValue=function(){},Vn.useDeferredValue=function(Y){return te.current.useDeferredValue(Y)},Vn.useEffect=function(Y,oe){return te.current.useEffect(Y,oe)},Vn.useId=function(){return te.current.useId()},Vn.useImperativeHandle=function(Y,oe,ce){return te.current.useImperativeHandle(Y,oe,ce)},Vn.useInsertionEffect=function(Y,oe){return te.current.useInsertionEffect(Y,oe)},Vn.useLayoutEffect=function(Y,oe){return te.current.useLayoutEffect(Y,oe)},Vn.useMemo=function(Y,oe){return te.current.useMemo(Y,oe)},Vn.useReducer=function(Y,oe,ce){return te.current.useReducer(Y,oe,ce)},Vn.useRef=function(Y){return te.current.useRef(Y)},Vn.useState=function(Y){return te.current.useState(Y)},Vn.useSyncExternalStore=function(Y,oe,ce){return te.current.useSyncExternalStore(Y,oe,ce)},Vn.useTransition=function(){return te.current.useTransition()},Vn.version="18.3.1",Vn}var nL;function qy(){return nL||(nL=1,EC.exports=bG()),EC.exports}var rL;function wG(){if(rL)return ix;rL=1;var t=qy(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,f={},p=null,g=null;c!==void 0&&(p=""+c),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(g=l.ref);for(u in l)r.call(l,u)&&!s.hasOwnProperty(u)&&(f[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)f[u]===void 0&&(f[u]=l[u]);return{$$typeof:e,type:a,key:p,ref:g,props:f,_owner:i.current}}return ix.Fragment=n,ix.jsx=o,ix.jsxs=o,ix}var iL;function _G(){return iL||(iL=1,SC.exports=wG()),SC.exports}var v=_G(),Hy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Dp=typeof window>"u"||"Deno"in globalThis;function Qa(){}function SG(t,e){return typeof t=="function"?t(e):t}function mN(t){return typeof t=="number"&&t>=0&&t!==1/0}function Kz(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ry(t,e){return typeof t=="function"?t(e):t}function Ul(t,e){return typeof t=="function"?t(e):t}function sL(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==QP(o,e.options))return!1}else if(!g0(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function oL(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Fp(e.options.mutationKey)!==Fp(s))return!1}else if(!g0(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function QP(t,e){return(e?.queryKeyHashFn||Fp)(t)}function Fp(t){return JSON.stringify(t,(e,n)=>gN(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function g0(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!g0(t[n],e[n])):!1}function e2(t,e){if(t===e)return t;const n=aL(t)&&aL(e);if(n||gN(t)&&gN(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{};let l=0;for(let c=0;c<o;c++){const u=n?c:s[c];(!n&&r.includes(u)||n)&&t[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=e2(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return i===o&&l===i?t:a}return e}function b1(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function aL(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function gN(t){if(!lL(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!lL(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function lL(t){return Object.prototype.toString.call(t)==="[object Object]"}function EG(t){return new Promise(e=>{setTimeout(e,t)})}function yN(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?e2(t,e):e}function MG(t){return t}function TG(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function CG(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var t2=Symbol();function Yz(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===t2?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var IG=class extends Hy{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Dp&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},n2=new IG,RG=class extends Hy{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Dp&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},w1=new RG;function vN(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function AG(t){return Math.min(1e3*2**t,3e4)}function Zz(t){return(t??"online")==="online"?w1.isOnline():!0}var Jz=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function MC(t){return t instanceof Jz}function Qz(t){let e=!1,n=0,r=!1,i;const s=vN(),o=S=>{r||(p(new Jz(S)),t.abort?.())},a=()=>{e=!0},l=()=>{e=!1},c=()=>n2.isFocused()&&(t.networkMode==="always"||w1.isOnline())&&t.canRun(),u=()=>Zz(t.networkMode)&&t.canRun(),f=S=>{r||(r=!0,t.onSuccess?.(S),i?.(),s.resolve(S))},p=S=>{r||(r=!0,t.onError?.(S),i?.(),s.reject(S))},g=()=>new Promise(S=>{i=_=>{(r||c())&&S(_)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),x=()=>{if(r)return;let S;const _=n===0?t.initialPromise:void 0;try{S=_??t.fn()}catch(b){S=Promise.reject(b)}Promise.resolve(S).then(f).catch(b=>{if(r)return;const E=t.retry??(Dp?0:3),M=t.retryDelay??AG,T=typeof M=="function"?M(n,b):M,k=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,b);if(e||!k){p(b);return}n++,t.onFail?.(n,b),EG(T).then(()=>c()?void 0:g()).then(()=>{e?p(b):x()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?x():g().then(x),s)}}function NG(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Di=NG(),e4=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mN(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Dp?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},PG=class extends e4{#e;#t;#n;#r;#i;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=kG(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(t){this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=yN(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#i?.promise;return this.#i?.cancel(t),e?e.then(Qa).catch(Qa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Ul(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===t2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Kz(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#i&&(this.#o?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(t&&this.setOptions(t),!this.options.queryFn){const a=this.observers.find(l=>l.options.queryFn);a&&this.setOptions(a.options)}const n=new AbortController,r=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},i=()=>{const a=Yz(this.options,e),l={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(l),this.#o=!1,this.options.persister?this.options.persister(a,l,this):a(l)},s={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:i};r(s),this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#s({type:"fetch",meta:s.fetchOptions?.meta});const o=a=>{MC(a)&&a.silent||this.#s({type:"error",error:a}),MC(a)||(this.#n.config.onError?.(a,this),this.#n.config.onSettled?.(this.state.data,a,this)),this.scheduleGc()};return this.#i=Qz({initialPromise:e?.initialPromise,fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:a=>{if(a===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(a)}catch(l){o(l);return}this.#n.config.onSuccess?.(a,this),this.#n.config.onSettled?.(a,this.state.error,this),this.scheduleGc()},onError:o,onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#i.start()}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...t4(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return MC(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Di.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function t4(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Zz(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function kG(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var OG=class extends Hy{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??QP(r,e);let s=this.get(i);return s||(s=new PG({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Di.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>sL(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>sL(t,n)):e}notify(t){Di.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Di.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Di.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},LG=class extends e4{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||n4(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=Qz({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,i)=>{this.#r({type:"failed",failureCount:r,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:n})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#r({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#r({type:"error",error:r})}}finally{this.#t.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Di.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function n4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var DG=class extends Hy{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new LG({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=a_(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=a_(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=a_(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=a_(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Di.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>oL(e,n))}findAll(t={}){return this.getAll().filter(e=>oL(t,e))}notify(t){Di.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Di.batch(()=>Promise.all(t.map(e=>e.continue().catch(Qa))))}};function a_(t){return t.options.scope?.id}function cL(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let u=!1;const f=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},p=Yz(e.options,e.fetchOptions),g=async(x,S,_)=>{if(u)return Promise.reject();if(S==null&&x.pages.length)return Promise.resolve(x);const b={client:e.client,queryKey:e.queryKey,pageParam:S,direction:_?"backward":"forward",meta:e.options.meta};f(b);const E=await p(b),{maxPages:M}=e.options,T=_?CG:TG;return{pages:T(x.pages,E,M),pageParams:T(x.pageParams,S,M)}};if(i&&s.length){const x=i==="backward",S=x?FG:uL,_={pages:s,pageParams:o},b=S(r,_);a=await g(_,b,x)}else{const x=t??s.length;do{const S=l===0?o[0]??r.initialPageParam:uL(r,a);if(l>0&&S==null)break;a=await g(a,S),l++}while(l<x)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=c}}}function uL(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function FG(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var BG=class{#e;#t;#n;#r;#i;#a;#o;#s;constructor(t={}){this.#e=t.queryCache||new OG,this.#t=t.mutationCache||new DG,this.#n=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=n2.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=w1.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ry(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,o=SG(e,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Di.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Di.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,r={type:"active",...t};return Di.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Di.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Qa).catch(Qa)}invalidateQueries(t,e={}){return Di.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none")return Promise.resolve();const n={...t,type:t?.refetchType??t?.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Di.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Qa)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Qa)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(ry(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Qa).catch(Qa)}fetchInfiniteQuery(t){return t.behavior=cL(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Qa).catch(Qa)}ensureInfiniteQueryData(t){return t.behavior=cL(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return w1.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Fp(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{g0(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(Fp(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()];let n={};return e.forEach(r=>{g0(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=QP(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===t2&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},jG=class extends Hy{constructor(t,e){super(),this.options=e,this.#e=t,this.#s=null,this.#o=vN(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#a;#o;#s;#l;#u;#c;#f;#h;#d;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),dL(this.#t,this.options)?this.#p():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return xN(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return xN(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ul(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!b1(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&fL(this.#t,r,this.options,n)&&this.#p(),this.updateResult(e),i&&(this.#t!==r||Ul(this.options.enabled,this.#t)!==Ul(n.enabled,this.#t)||ry(this.options.staleTime,this.#t)!==ry(n.staleTime,this.#t))&&this.#g();const s=this.#y();i&&(this.#t!==r||Ul(this.options.enabled,this.#t)!==Ul(n.enabled,this.#t)||s!==this.#d)&&this.#v(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return zG(this,n)&&(this.#r=n,this.#a=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#p({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#p(t){this.#_();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Qa)),e}#g(){this.#b();const t=ry(this.options.staleTime,this.#t);if(Dp||this.#r.isStale||!mN(t))return;const n=Kz(this.#r.dataUpdatedAt,t)+1;this.#f=setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#w(),this.#d=t,!(Dp||Ul(this.options.enabled,this.#t)===!1||!mN(this.#d)||this.#d===0)&&(this.#h=setInterval(()=>{(this.options.refetchIntervalInBackground||n2.isFocused())&&this.#p()},this.#d))}#x(){this.#g(),this.#v(this.#y())}#b(){this.#f&&(clearTimeout(this.#f),this.#f=void 0)}#w(){this.#h&&(clearInterval(this.#h),this.#h=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#r,s=this.#i,o=this.#a,l=t!==n?t.state:this.#n,{state:c}=t;let u={...c},f=!1,p;if(e._optimisticResults){const D=this.hasListeners(),L=!D&&dL(t,e),R=D&&fL(t,n,e,r);(L||R)&&(u={...u,...t4(c.data,t.options)}),e._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:g,errorUpdatedAt:x,status:S}=u;if(e.select&&u.data!==void 0)if(i&&u.data===s?.data&&e.select===this.#l)p=this.#u;else try{this.#l=e.select,p=e.select(u.data),p=yN(i?.data,p,e),this.#u=p,this.#s=null}catch(D){this.#s=D}else p=u.data;if(e.placeholderData!==void 0&&p===void 0&&S==="pending"){let D;if(i?.isPlaceholderData&&e.placeholderData===o?.placeholderData)D=i.data;else if(D=typeof e.placeholderData=="function"?e.placeholderData(this.#c?.state.data,this.#c):e.placeholderData,e.select&&D!==void 0)try{D=e.select(D),this.#s=null}catch(L){this.#s=L}D!==void 0&&(S="success",p=yN(i?.data,D,e),f=!0)}this.#s&&(g=this.#s,p=this.#u,x=Date.now(),S="error");const _=u.fetchStatus==="fetching",b=S==="pending",E=S==="error",M=b&&_,T=p!==void 0,N={status:S,fetchStatus:u.fetchStatus,isPending:b,isSuccess:S==="success",isError:E,isInitialLoading:M,isLoading:M,data:p,dataUpdatedAt:u.dataUpdatedAt,error:g,errorUpdatedAt:x,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:_,isRefetching:_&&!b,isLoadingError:E&&!T,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:E&&T,isStale:r2(t,e),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const D=A=>{N.status==="error"?A.reject(N.error):N.data!==void 0&&A.resolve(N.data)},L=()=>{const A=this.#o=N.promise=vN();D(A)},R=this.#o;switch(R.status){case"pending":t.queryHash===n.queryHash&&D(R);break;case"fulfilled":(N.status==="error"||N.data!==R.value)&&L();break;case"rejected":(N.status!=="error"||N.error!==R.reason)&&L();break}}return N}updateResult(t){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#a=this.options,this.#i.data!==void 0&&(this.#c=this.#t),b1(n,e))return;this.#r=n;const r={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#m.size)return!0;const a=new Set(o??this.#m);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const c=l;return this.#r[c]!==e[c]&&a.has(c)})};t?.listeners!==!1&&i()&&(r.listeners=!0),this.#S({...r,...t})}#_(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#S(t){Di.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function UG(t,e){return Ul(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function dL(t,e){return UG(t,e)||t.state.data!==void 0&&xN(t,e,e.refetchOnMount)}function xN(t,e,n){if(Ul(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&r2(t,e)}return!1}function fL(t,e,n,r){return(t!==e||Ul(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&r2(t,n)}function r2(t,e){return Ul(e.enabled,t)!==!1&&t.isStaleByTime(ry(e.staleTime,t))}function zG(t,e){return!b1(t.getCurrentResult(),e)}var VG=class extends Hy{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),b1(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Fp(n.mutationKey)!==Fp(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#a()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??n4();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){Di.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},X=qy();const rr=Co(X),WG=vG({__proto__:null,default:rr},[X]);var r4=X.createContext(void 0),gM=t=>{const e=X.useContext(r4);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},qG=({client:t,children:e})=>(X.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),v.jsx(r4.Provider,{value:t,children:e})),i4=X.createContext(!1),HG=()=>X.useContext(i4);i4.Provider;function $G(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var GG=X.createContext($G()),XG=()=>X.useContext(GG);function s4(t,e){return typeof t=="function"?t(...e):!!t}function bN(){}var KG=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},YG=t=>{X.useEffect(()=>{t.clearReset()},[t])},ZG=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||s4(n,[t.error,r])),JG=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},QG=(t,e)=>t.isLoading&&t.isFetching&&!e,e9=(t,e)=>t?.suspense&&e.isPending,hL=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function t9(t,e,n){const r=gM(),i=HG(),s=XG(),o=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=i?"isRestoring":"optimistic",JG(o),KG(o,s),YG(s);const a=!r.getQueryCache().get(o.queryHash),[l]=X.useState(()=>new e(r,o)),c=l.getOptimisticResult(o),u=!i&&t.subscribed!==!1;if(X.useSyncExternalStore(X.useCallback(f=>{const p=u?l.subscribe(Di.batchCalls(f)):bN;return l.updateResult(),p},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),X.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),e9(o,c))throw hL(o,l,s);if(ZG({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,c),o.experimental_prefetchInRender&&!Dp&&QG(c,i)&&(a?hL(o,l,s):r.getQueryCache().get(o.queryHash)?.promise)?.catch(bN).finally(()=>{l.updateResult()}),o.notifyOnChangeProps?c:l.trackResult(c)}function y0(t,e){return t9(t,jG)}function pL(t,e){return t.findAll(e.filters).map(n=>e.select?e.select(n):n.state)}function n9(t={},e){const n=gM().getMutationCache(),r=X.useRef(t),i=X.useRef(null);return i.current||(i.current=pL(n,t)),X.useEffect(()=>{r.current=t}),X.useSyncExternalStore(X.useCallback(s=>n.subscribe(()=>{const o=e2(i.current,pL(n,r.current));i.current!==o&&(i.current=o,Di.schedule(s))}),[n]),()=>i.current,()=>i.current)}function rn(t,e){const n=gM(),[r]=X.useState(()=>new VG(n,t));X.useEffect(()=>{r.setOptions(t)},[r,t]);const i=X.useSyncExternalStore(X.useCallback(o=>r.subscribe(Di.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=X.useCallback((o,a)=>{r.mutate(o,a).catch(bN)},[r]);if(i.error&&s4(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}var r9="Invariant failed";function Hl(t,e){if(!t)throw new Error(r9)}function iy(t){const e=t.resolvedLocation,n=t.location,r=e?.pathname!==n.pathname,i=e?.href!==n.href,s=e?.hash!==n.hash;return{fromLocation:e,toLocation:n,pathChanged:r,hrefChanged:i,hashChanged:s}}const i9="Error preloading route! ☝️";function Hx(t){return t[t.length-1]}function s9(t){return typeof t=="function"}function gp(t,e){return s9(t)?t(e):t}function wN(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Za(t,e){if(t===e)return t;const n=e,r=gL(t)&&gL(n);if(r||_1(t)&&_1(n)){const i=r?t:Object.keys(t),s=i.length,o=r?n:Object.keys(n),a=o.length,l=r?[]:{};let c=0;for(let u=0;u<a;u++){const f=r?u:o[u];(!r&&i.includes(f)||r)&&t[f]===void 0&&n[f]===void 0?(l[f]=void 0,c++):(l[f]=Za(t[f],n[f]),l[f]===t[f]&&t[f]!==void 0&&c++)}return s===a&&c===s?t:l}return n}function _1(t){if(!mL(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!mL(n)||!n.hasOwnProperty("isPrototypeOf"))}function mL(t){return Object.prototype.toString.call(t)==="[object Object]"}function gL(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function yL(t,e){let n=Object.keys(t);return e&&(n=n.filter(r=>t[r]!==void 0)),n}function sy(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(_1(t)&&_1(e)){const r=n?.ignoreUndefined??!0,i=yL(t,r),s=yL(e,r);return!n?.partial&&i.length!==s.length?!1:s.every(o=>sy(t[o],e[o],n))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((r,i)=>!sy(r,e[i],n)):!1}function Dg(t){let e,n;const r=new Promise((i,s)=>{e=i,n=s});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,e(i),t?.(i)},r.reject=i=>{r.status="rejected",n(i)},r}function Ku(t){return yM(t.filter(e=>e!==void 0).join("/"))}function yM(t){return t.replace(/\/{2,}/g,"/")}function i2(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function yp(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function o9(t){return yp(i2(t))}function S1(t,e){return t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function a9(t,e,n){return S1(t,n)===S1(e,n)}function l9({basepath:t,base:e,to:n,trailingSlash:r="never",caseSensitive:i}){var s,o;e=E1(t,e,i),n=E1(t,n,i);let a=wy(e);const l=wy(n);a.length>1&&((s=Hx(a))==null?void 0:s.value)==="/"&&a.pop(),l.forEach((u,f)=>{u.value==="/"?f?f===l.length-1&&a.push(u):a=[u]:u.value===".."?a.pop():u.value==="."||a.push(u)}),a.length>1&&(((o=Hx(a))==null?void 0:o.value)==="/"?r==="never"&&a.pop():r==="always"&&a.push({type:"pathname",value:"/"}));const c=Ku([t,...a.map(u=>u.value)]);return yM(c)}function wy(t){if(!t)return[];t=yM(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const n=t.split("/").filter(Boolean);return e.push(...n.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function l_({path:t,params:e,leaveWildcards:n,leaveParams:r,decodeCharMap:i}){const s=wy(t);function o(c){const u=e[c],f=typeof u=="string";return["*","_splat"].includes(c)?f?encodeURI(u):u:f?c9(u,i):u}const a={},l=Ku(s.map(c=>{if(c.type==="wildcard"){a._splat=e._splat;const u=o("_splat");return n?`${c.value}${u??""}`:u}if(c.type==="param"){const u=c.value.substring(1);if(a[u]=e[u],r){const f=o(c.value);return`${c.value}${f??""}`}return o(u)??"undefined"}return c.value}));return{usedParams:a,interpolatedPath:l}}function c9(t,e){let n=encodeURIComponent(t);if(e)for(const[r,i]of e)n=n.replaceAll(r,i);return n}function c_(t,e,n){const r=u9(t,e,n);if(!(n.to&&!r))return r??{}}function E1(t,e,n=!1){const r=n?t:t.toLowerCase(),i=n?e:e.toLowerCase();switch(!0){case r==="/":return e;case i===r:return"";case e.length<t.length:return e;case i[r.length]!=="/":return e;case i.startsWith(r):return e.slice(t.length);default:return e}}function u9(t,e,n){if(t!=="/"&&!e.startsWith(t))return;e=E1(t,e,n.caseSensitive);const r=E1(t,`${n.to??"$"}`,n.caseSensitive),i=wy(e),s=wy(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"}),r.startsWith("/")||s.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let l=0;l<Math.max(i.length,s.length);l++){const c=i[l],u=s[l],f=l>=i.length-1,p=l>=s.length-1;if(u){if(u.type==="wildcard"){const g=decodeURI(Ku(i.slice(l).map(x=>x.value)));return o["*"]=g,o._splat=g,!0}if(u.type==="pathname"){if(u.value==="/"&&!c?.value)return!0;if(c){if(n.caseSensitive){if(u.value!==c.value)return!1}else if(u.value.toLowerCase()!==c.value.toLowerCase())return!1}}if(!c)return!1;if(u.type==="param"){if(c.value==="/")return!1;c.value.charAt(0)!=="$"&&(o[u.value.substring(1)]=decodeURIComponent(c.value))}}if(!f&&p)return o["**"]=Ku(i.slice(l+1).map(g=>g.value)),!!n.fuzzy&&u?.value!=="/"}return!0})()?o:void 0}function d9(t,e){let n,r,i,s="";for(n in t)if((i=t[n])!==void 0)if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i);return""+s}function vL(t){if(!t)return"";const e=decodeURIComponent(t);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function f9(t,e){let n,r;const i={},s=t.split("&");for(;n=s.shift();){const o=n.indexOf("=");if(o!==-1){r=n.slice(0,o),r=decodeURIComponent(r);const a=n.slice(o+1);i[r]!==void 0?i[r]=[].concat(i[r],vL(a)):i[r]=vL(a)}else r=n,r=decodeURIComponent(r),i[r]=""}return i}const Xo="__root__",h9=m9(JSON.parse),p9=g9(JSON.stringify,JSON.parse);function m9(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const n=f9(e);for(const r in n){const i=n[r];if(typeof i=="string")try{n[r]=t(i)}catch{}}return n}}function g9(t,e){function n(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(s=>{const o=r[s];typeof o>"u"||o===void 0?delete r[s]:r[s]=n(o)});const i=d9(r).toString();return i?`?${i}`:""}}const Sf="__TSR_index",xL="popstate",bL="beforeunload";function o4(t){let e=t.getLocation();const n=new Set,r=o=>{e=t.getLocation(),n.forEach(a=>a({location:e,action:o}))},i=o=>{t.notifyOnIndexChange??!0?r(o):e=t.getLocation()},s=async({task:o,navigateOpts:a,...l})=>{var c,u;if(a?.ignoreBlocker??!1){o();return}const p=((c=t.getBlockers)==null?void 0:c.call(t))??[],g=l.type==="PUSH"||l.type==="REPLACE";if(typeof document<"u"&&p.length&&g)for(const x of p){const S=v0(l.path,l.state);if(await x.blockerFn({currentLocation:e,nextLocation:S,action:l.type})){(u=t.onBlocked)==null||u.call(t);return}}o()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,a,l)=>{const c=e.state[Sf];a=_N(c+1,a),s({task:()=>{t.pushState(o,a),r({type:"PUSH"})},navigateOpts:l,type:"PUSH",path:o,state:a})},replace:(o,a,l)=>{const c=e.state[Sf];a=_N(c,a),s({task:()=>{t.replaceState(o,a),r({type:"REPLACE"})},navigateOpts:l,type:"REPLACE",path:o,state:a})},go:(o,a)=>{s({task:()=>{t.go(o),i({type:"GO",index:o})},navigateOpts:a,type:"GO"})},back:o=>{s({task:()=>{t.back(o?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{s({task:()=>{t.forward(o?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>e.state[Sf]!==0,createHref:o=>t.createHref(o),block:o=>{var a;if(!t.setBlockers)return()=>{};const l=((a=t.getBlockers)==null?void 0:a.call(t))??[];return t.setBlockers([...l,o]),()=>{var c,u;const f=((c=t.getBlockers)==null?void 0:c.call(t))??[];(u=t.setBlockers)==null||u.call(t,f.filter(p=>p!==o))}},flush:()=>{var o;return(o=t.flush)==null?void 0:o.call(t)},destroy:()=>{var o;return(o=t.destroy)==null?void 0:o.call(t)},notify:r}}function _N(t,e){return e||(e={}),{...e,key:s2(),[Sf]:t}}function y9(t){var e;const n=typeof document<"u"?window:void 0,r=n.history.pushState,i=n.history.replaceState;let s=[];const o=()=>s,a=R=>s=R,l=R=>R,c=()=>v0(`${n.location.pathname}${n.location.search}${n.location.hash}`,n.history.state);(e=n.history.state)!=null&&e.key||n.history.replaceState({[Sf]:0,key:s2()},"");let u=c(),f,p=!1,g=!1,x=!1,S=!1;const _=()=>u;let b,E;const M=()=>{b&&(L._ignoreSubscribers=!0,(b.isPush?n.history.pushState:n.history.replaceState)(b.state,"",b.href),L._ignoreSubscribers=!1,b=void 0,E=void 0,f=void 0)},T=(R,A,P)=>{const j=l(A);E||(f=u),u=v0(A,P),b={href:j,state:P,isPush:b?.isPush||R==="push"},E||(E=Promise.resolve().then(()=>M()))},k=R=>{u=c(),L.notify({type:R})},N=async()=>{if(g){g=!1;return}const R=c(),A=R.state[Sf]-u.state[Sf],P=A===1,j=A===-1,U=!P&&!j||p;p=!1;const B=U?"GO":j?"BACK":"FORWARD",$=U?{type:"GO",index:A}:{type:j?"BACK":"FORWARD"};if(x)x=!1;else{const q=o();if(typeof document<"u"&&q.length){for(const te of q)if(await te.blockerFn({currentLocation:u,nextLocation:R,action:B})){g=!0,n.history.go(1),L.notify($);return}}}u=c(),L.notify($)},D=R=>{if(S){S=!1;return}let A=!1;const P=o();if(typeof document<"u"&&P.length)for(const j of P){const U=j.enableBeforeUnload??!0;if(U===!0){A=!0;break}if(typeof U=="function"&&U()===!0){A=!0;break}}if(A)return R.preventDefault(),R.returnValue=""},L=o4({getLocation:_,getLength:()=>n.history.length,pushState:(R,A)=>T("push",R,A),replaceState:(R,A)=>T("replace",R,A),back:R=>(R&&(x=!0),S=!0,n.history.back()),forward:R=>{R&&(x=!0),S=!0,n.history.forward()},go:R=>{p=!0,n.history.go(R)},createHref:R=>l(R),flush:M,destroy:()=>{n.history.pushState=r,n.history.replaceState=i,n.removeEventListener(bL,D,{capture:!0}),n.removeEventListener(xL,N)},onBlocked:()=>{f&&u!==f&&(u=f)},getBlockers:o,setBlockers:a,notifyOnIndexChange:!1});return n.addEventListener(bL,D,{capture:!0}),n.addEventListener(xL,N),n.history.pushState=function(...R){const A=r.apply(n.history,R);return L._ignoreSubscribers||k("PUSH"),A},n.history.replaceState=function(...R){const A=i.apply(n.history,R);return L._ignoreSubscribers||k("REPLACE"),A},L}function v9(t={initialEntries:["/"]}){const e=t.initialEntries;let n=t.initialIndex?Math.min(Math.max(t.initialIndex,0),e.length-1):e.length-1;const r=e.map((s,o)=>_N(o,void 0));return o4({getLocation:()=>v0(e[n],r[n]),getLength:()=>e.length,pushState:(s,o)=>{n<e.length-1&&(e.splice(n+1),r.splice(n+1)),r.push(o),e.push(s),n=Math.max(e.length-1,0)},replaceState:(s,o)=>{r[n]=o,e[n]=s},back:()=>{n=Math.max(n-1,0)},forward:()=>{n=Math.min(n+1,e.length-1)},go:s=>{n=Math.min(Math.max(n+s,0),e.length-1)},createHref:s=>s})}function v0(t,e){const n=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[Sf]:0,key:s2()}}}function s2(){return(Math.random()+1).toString(36).substring(7)}function o2(t){const e=t.errorComponent??vM;return v.jsx(x9,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?X.createElement(e,{error:n,reset:r}):t.children})}class x9 extends X.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function vM({error:t}){const[e,n]=X.useState(!1);return v.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[v.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),v.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),v.jsx("div",{style:{height:".25rem"}}),e?v.jsx("div",{children:v.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?v.jsx("code",{children:t.message}):null})}):null]})}var TC={exports:{}},CC={},IC={exports:{}},RC={};var wL;function b9(){if(wL)return RC;wL=1;var t=qy();function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(f,p){var g=p(),x=r({inst:{value:g,getSnapshot:p}}),S=x[0].inst,_=x[1];return s(function(){S.value=g,S.getSnapshot=p,l(S)&&_({inst:S})},[f,g,p]),i(function(){return l(S)&&_({inst:S}),f(function(){l(S)&&_({inst:S})})},[f]),o(g),g}function l(f){var p=f.getSnapshot;f=f.value;try{var g=p();return!n(f,g)}catch{return!0}}function c(f,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return RC.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,RC}var _L;function w9(){return _L||(_L=1,IC.exports=b9()),IC.exports}var SL;function _9(){if(SL)return CC;SL=1;var t=qy(),e=w9();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return CC.useSyncExternalStoreWithSelector=function(c,u,f,p,g){var x=s(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=a(function(){function b(N){if(!E){if(E=!0,M=N,N=p(N),g!==void 0&&S.hasValue){var D=S.value;if(g(D,N))return T=D}return T=N}if(D=T,r(M,N))return D;var L=p(N);return g!==void 0&&g(D,L)?(M=N,D):(M=N,T=L)}var E=!1,M,T,k=f===void 0?null:f;return[function(){return b(u())},k===null?void 0:function(){return b(k())}]},[u,f,p,g]);var _=i(c,x[0],x[1]);return o(function(){S.hasValue=!0,S.value=_},[_]),l(_),_},CC}var EL;function S9(){return EL||(EL=1,TC.exports=_9()),TC.exports}var a4=S9();const E9=Co(a4),oy=new WeakMap,NS=new WeakMap,M1={current:[]};let AC=!1,$x=0;const Ix=new Set,u_=new Map;function l4(t){const e=Array.from(t).sort((n,r)=>n instanceof ay&&n.options.deps.includes(r)?1:r instanceof ay&&r.options.deps.includes(n)?-1:0);for(const n of e){if(M1.current.includes(n))continue;M1.current.push(n),n.recompute();const r=NS.get(n);if(r)for(const i of r){const s=oy.get(i);s&&l4(s)}}}function M9(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function T9(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function c4(t){if($x>0&&!u_.has(t)&&u_.set(t,t.prevState),Ix.add(t),!($x>0)&&!AC)try{for(AC=!0;Ix.size>0;){const e=Array.from(Ix);Ix.clear();for(const n of e){const r=u_.get(n)??n.prevState;n.prevState=r,M9(n)}for(const n of e){const r=oy.get(n);r&&(M1.current.push(n),l4(r))}for(const n of e){const r=oy.get(n);if(r)for(const i of r)T9(i)}}}finally{AC=!1,M1.current=[],u_.clear()}}function NC(t){$x++;try{t()}finally{if($x--,$x===0){const e=Array.from(Ix)[0];e&&c4(e)}}}class SN{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var i,s;this.listeners.add(r);const o=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),o?.()}},this.setState=r=>{var i,s,o;this.prevState=this.state,this.state=(i=this.options)!=null&&i.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(s=this.options)==null?void 0:s.onUpdate)==null||o.call(s),c4(this)},this.prevState=e,this.state=e,this.options=n}}class ay{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const i of this.options.deps)n.push(i.prevState),r.push(i.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:i,currDepVals:s,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:s,prevVal:o}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const s of this.options.deps)s instanceof ay&&s.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==r[s]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,i;this.listeners.add(n);const s=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),s?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const n of e)if(n instanceof ay)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof SN){let r=oy.get(n);r||(r=new Set,oy.set(n,r)),r.add(this);let i=NS.get(this);i||(i=new Set,NS.set(this,i)),i.add(n)}}unregisterFromGraph(e=this.options.deps){for(const n of e)if(n instanceof ay)this.unregisterFromGraph(n.options.deps);else if(n instanceof SN){const r=oy.get(n);r&&r.delete(this);const i=NS.get(this);i&&i.delete(n)}}}function C9(t,e=n=>n){return a4.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,I9)}function I9(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}const PC=X.createContext(null);function u4(){return typeof document>"u"?PC:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=PC,PC)}function al(t){const e=X.useContext(u4());return t?.warn,e}function Hs(t){const e=al({warn:t?.router===void 0}),n=t?.router||e,r=X.useRef(void 0);return C9(n.__store,i=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const s=Za(r.current,t.select(i));return r.current=s,s}return t.select(i)}return i})}const xM=X.createContext(void 0),R9=X.createContext(void 0);function Pf(t){const e=X.useContext(t.from?R9:xM);return Hs({select:r=>{const i=r.matches.find(s=>t.from?t.from===s.routeId:s.id===e);if(Hl(!((t.shouldThrow??!0)&&!i),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),i!==void 0)return t.select?t.select(i):i},structuralSharing:t.structuralSharing})}function zi(t){return Pf({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function A9(t){const{select:e,...n}=t;return Pf({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function Jt(t){return Pf({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function N9(t){return Pf({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function el(t){return!!t?.isNotFound}function P9(t){const e=Hs({select:n=>`not-found-${n.location.pathname}-${n.status}`});return v.jsx(o2,{getResetKey:()=>e,onCatch:(n,r)=>{var i;if(el(n))(i=t.onCatch)==null||i.call(t,n,r);else throw n},errorComponent:({error:n})=>{var r;if(el(n))return(r=t.fallback)==null?void 0:r.call(t,n);throw n},children:t.children})}function k9(){return v.jsx("p",{children:"Not Found"})}function em(t){const{navigate:e}=al();return X.useCallback(n=>e({...n}),[e])}let d4=class{constructor(e){this.init=n=>{var r,i;this.originalIndex=n.originalIndex;const s=this.options,o=!s?.path&&!s?.id;this.parentRoute=(i=(r=this.options).getParentRoute)==null?void 0:i.call(r),o?this._path=Xo:Hl(this.parentRoute);let a=o?Xo:s.path;a&&a!=="/"&&(a=i2(a));const l=s?.id||a;let c=o?Xo:Ku([this.parentRoute.id===Xo?"":this.parentRoute.id,l]);a===Xo&&(a="/"),c!==Xo&&(c=Ku(["/",c]));const u=c===Xo?"/":Ku([this.parentRoute.fullPath,a]);this._path=a,this._id=c,this._fullPath=u,this._to=u,this._ssr=s?.ssr??n.defaultSsr??!0},this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.useMatch=n=>Pf({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Pf({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>N9({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>Jt({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>A9({...n,from:this.id}),this.useLoaderData=n=>zi({...n,from:this.id}),this.useNavigate=()=>em({from:this.id}),this.options=e||{},this.isRoot=!e?.getParentRoute,Hl(!(e?.id&&e?.path)),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(e){return this._addFileChildren(e)}_addFileChildren(e){return Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this}};function O9(t){return new d4(t)}function L9(){return t=>F9(t)}class D9 extends d4{constructor(e){super(e)}addChildren(e){return super.addChildren(e),this}_addFileChildren(e){return super._addFileChildren(e),this}_addFileTypes(){return this}}function F9(t){return new D9(t)}function Pt(t){return new B9(t,{silent:!0}).createRoute}class B9{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const i=O9(r);return i.isRoot=!1,i},this.silent=n?.silent}}function wb(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},!t.reloadDocument){t.reloadDocument=!1;try{new URL(`${t.href}`),t.reloadDocument=!0}catch{}}if(t.throw)throw t;return t}function rp(t){return!!t?.isRedirect}function kC(t){return!!t?.isRedirect&&t.href}function PS(t){return v.jsx(v.Fragment,{children:t.children})}function f4(t,e,n){return e.options.notFoundComponent?v.jsx(e.options.notFoundComponent,{data:n}):t.options.defaultNotFoundComponent?v.jsx(t.options.defaultNotFoundComponent,{data:n}):v.jsx(k9,{})}var OC,ML;function j9(){if(ML)return OC;ML=1;const t={},e=t.hasOwnProperty,n=(L,R)=>{for(const A in L)e.call(L,A)&&R(A,L[A])},r=(L,R)=>(R&&n(R,(A,P)=>{L[A]=P}),L),i=(L,R)=>{const A=L.length;let P=-1;for(;++P<A;)R(L[P])},s=L=>"\\u"+("0000"+L).slice(-4),o=(L,R)=>{let A=L.toString(16);return R?A:A.toUpperCase()},a=t.toString,l=Array.isArray,c=L=>typeof Buffer=="function"&&Buffer.isBuffer(L),u=L=>a.call(L)=="[object Object]",f=L=>typeof L=="string"||a.call(L)=="[object String]",p=L=>typeof L=="number"||a.call(L)=="[object Number]",g=L=>typeof L=="bigint",x=L=>typeof L=="function",S=L=>a.call(L)=="[object Map]",_=L=>a.call(L)=="[object Set]",b={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},E=/[\\\b\f\n\r\t]/,M=/[0-9]/,T=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,k=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,N=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,D=(L,R)=>{const A=()=>{te=q,++R.indentLevel,q=R.indent.repeat(R.indentLevel)},P={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},j=R&&R.json;j&&(P.quotes="double",P.wrap=!0),R=r(P,R),R.quotes!="single"&&R.quotes!="double"&&R.quotes!="backtick"&&(R.quotes="single");const U=R.quotes=="double"?'"':R.quotes=="backtick"?"`":"'",B=R.compact,$=R.lowercaseHex;let q=R.indent.repeat(R.indentLevel),te="";const W=R.__inline1__,Z=R.__inline2__,J=B?"":`
`;let Y,oe=!0;const ce=R.numbers=="binary",ie=R.numbers=="octal",ue=R.numbers=="decimal",de=R.numbers=="hexadecimal";if(j&&L&&x(L.toJSON)&&(L=L.toJSON()),!f(L)){if(S(L))return L.size==0?"new Map()":(B||(R.__inline1__=!0,R.__inline2__=!1),"new Map("+D(Array.from(L),R)+")");if(_(L))return L.size==0?"new Set()":"new Set("+D(Array.from(L),R)+")";if(c(L))return L.length==0?"Buffer.from([])":"Buffer.from("+D(Array.from(L),R)+")";if(l(L))return Y=[],R.wrap=!0,W&&(R.__inline1__=!1,R.__inline2__=!0),Z||A(),i(L,we=>{oe=!1,Z&&(R.__inline2__=!1),Y.push((B||Z?"":q)+D(we,R))}),oe?"[]":Z?"["+Y.join(", ")+"]":"["+J+Y.join(","+J)+J+(B?"":te)+"]";if(p(L)||g(L)){if(j)return JSON.stringify(Number(L));let we;if(ue)we=String(L);else if(de){let Ce=L.toString(16);$||(Ce=Ce.toUpperCase()),we="0x"+Ce}else ce?we="0b"+L.toString(2):ie&&(we="0o"+L.toString(8));return g(L)?we+"n":we}else return g(L)?j?JSON.stringify(Number(L)):L+"n":u(L)?(Y=[],R.wrap=!0,A(),n(L,(we,Ce)=>{oe=!1,Y.push((B?"":q)+D(we,R)+":"+(B?"":" ")+D(Ce,R))}),oe?"{}":"{"+J+Y.join(","+J)+J+(B?"":te)+"}"):j?JSON.stringify(L)||"null":String(L)}const be=R.escapeEverything?k:N;return Y=L.replace(be,(we,Ce,Ie,Fe,ve,_e)=>{if(Ce){if(R.minimal)return Ce;const $e=Ce.charCodeAt(0),je=Ce.charCodeAt(1);if(R.es6){const Ze=($e-55296)*1024+je-56320+65536;return"\\u{"+o(Ze,$)+"}"}return s(o($e,$))+s(o(je,$))}if(Ie)return s(o(Ie.charCodeAt(0),$));if(we=="\0"&&!j&&!M.test(_e.charAt(ve+1)))return"\\0";if(Fe)return Fe==U||R.escapeEverything?"\\"+Fe:Fe;if(E.test(we))return b[we];if(R.minimal&&!T.test(we))return we;const se=o(we.charCodeAt(0),$);return j||se.length>2?s(se):"\\x"+("00"+se).slice(-2)}),U=="`"&&(Y=Y.replace(/\$\{/g,"\\${")),R.isScriptContext&&(Y=Y.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,j?"\\u003C!--":"\\x3C!--")),R.wrap&&(Y=U+Y+U),Y};return D.version="3.0.2",OC=D,OC}j9();function U9({children:t,log:e}){return typeof document<"u"?null:v.jsx("script",{className:"tsr-once",dangerouslySetInnerHTML:{__html:[t,"",'if (typeof __TSR_SSR__ !== "undefined") __TSR_SSR__.cleanScripts()'].filter(Boolean).join(`
`)}})}const T1="tsr-scroll-restoration-v1_3",z9=typeof window<"u"&&window.sessionStorage,V9=(t,e)=>{let n;return(...r)=>{n||(n=setTimeout(()=>{t(...r),n=null},e))}},Wg=z9?{state:JSON.parse(window.sessionStorage.getItem(T1)||"null")||{},set:e=>(Wg.state=gp(e,Wg.state)||Wg.state,window.sessionStorage.setItem(T1,JSON.stringify(Wg.state)))}:void 0,EN=t=>t.state.key||t.href;function W9(t){const e=[];let n;for(;n=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(n.children,t)+1})`),t=n;return`${e.join(" > ")}`.toLowerCase()}let C1=!1;function h4(t,e,n,r){var i;let s;try{s=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(l){console.error(l);return}const o=e||((i=window.history.state)==null?void 0:i.key),a=s[o];C1=!0,(()=>{if(r&&a){for(const c in a){const u=a[c];if(c==="window")window.scrollTo({top:u.scrollY,left:u.scrollX,behavior:n});else if(c){const f=document.querySelector(c);f&&(f.scrollLeft=u.scrollX,f.scrollTop=u.scrollY)}}return}const l=window.location.hash.split("#")[1];if(l){const c=(window.history.state||{}).__hashScrollIntoViewOptions??!0;if(c){const u=document.getElementById(l);u&&u.scrollIntoView(c)}return}window.scrollTo({top:0,left:0,behavior:n})})(),C1=!1}function q9(t,e){if((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),typeof document>"u"||t.isScrollRestorationSetup)return;t.isScrollRestorationSetup=!0,C1=!1;const r=t.options.getScrollRestorationKey||EN;window.history.scrollRestoration="manual";const i=s=>{if(C1||!t.isScrollRestoring)return;let o="";if(s.target===document||s.target===window)o="window";else{const l=s.target.getAttribute("data-scroll-restoration-id");l?o=`[data-scroll-restoration-id="${l}"]`:o=W9(s.target)}const a=r(t.state.location);Wg.set(l=>{const c=l[a]=l[a]||{},u=c[o]=c[o]||{};if(o==="window")u.scrollX=window.scrollX||0,u.scrollY=window.scrollY||0;else if(o){const f=document.querySelector(o);f&&(u.scrollX=f.scrollLeft||0,u.scrollY=f.scrollTop||0)}return l})};typeof document<"u"&&document.addEventListener("scroll",V9(i,100),!0),t.subscribe("onRendered",s=>{const o=r(s.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}h4(T1,o,t.options.scrollRestorationBehavior,t.isScrollRestoring),t.isScrollRestoring&&Wg.set(a=>(a[o]=a[o]||{},a))})}function H9(){const t=al(),n=(t.options.getScrollRestorationKey||EN)(t.latestLocation),r=n!==EN(t.latestLocation)?n:null;return!t.isScrollRestoring||!t.isServer?null:v.jsx(U9,{children:`(${h4.toString()})(${JSON.stringify(T1)},${JSON.stringify(r)}, undefined, true)`,log:!1})}const p4=X.memo(function({matchId:e}){var n,r;const i=al(),s=Hs({select:b=>{var E;return(E=b.matches.find(M=>M.id===e))==null?void 0:E.routeId}});Hl(s);const o=i.routesById[s],a=o.options.pendingComponent??i.options.defaultPendingComponent,l=a?v.jsx(a,{}):null,c=o.options.errorComponent??i.options.defaultErrorComponent,u=o.options.onCatch??i.options.defaultOnCatch,f=o.isRoot?o.options.notFoundComponent??((n=i.options.notFoundRoute)==null?void 0:n.options.component):o.options.notFoundComponent,p=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??a??((r=o.options.errorComponent)==null?void 0:r.preload))?X.Suspense:PS,g=c?o2:PS,x=f?P9:PS,S=Hs({select:b=>b.loadedAt}),_=Hs({select:b=>{var E;const M=b.matches.findIndex(T=>T.id===e);return(E=b.matches[M-1])==null?void 0:E.routeId}});return v.jsxs(v.Fragment,{children:[v.jsx(xM.Provider,{value:e,children:v.jsx(p,{fallback:l,children:v.jsx(g,{getResetKey:()=>S,errorComponent:c||vM,onCatch:(b,E)=>{if(el(b))throw b;u?.(b,E)},children:v.jsx(x,{fallback:b=>{if(!f||b.routeId&&b.routeId!==s||!b.routeId&&!o.isRoot)throw b;return X.createElement(f,b)},children:v.jsx(G9,{matchId:e})})})})}),_===Xo?v.jsxs(v.Fragment,{children:[v.jsx($9,{}),v.jsx(H9,{})]}):null]})});function $9(){var t;const e=al(),n=X.useRef(void 0);return v.jsx("script",{suppressHydrationWarning:!0,ref:r=>{r?e.emit({type:"onRendered",...iy(e.state)}):n.current=e.state.resolvedLocation}},(t=e.state.resolvedLocation)==null?void 0:t.state.key)}const G9=X.memo(function({matchId:e}){var n,r,i;const s=al(),{match:o,key:a,routeId:l}=Hs({select:p=>{const g=p.matches.findIndex(M=>M.id===e),x=p.matches[g],S=x.routeId,_=s.routesById[S].options.remountDeps??s.options.defaultRemountDeps,b=_?.({routeId:S,loaderDeps:x.loaderDeps,params:x._strictParams,search:x._strictSearch});return{key:b?JSON.stringify(b):void 0,routeId:S,match:wN(x,["id","status","error"])}},structuralSharing:!0}),c=s.routesById[l],u=X.useMemo(()=>{const p=c.options.component??s.options.defaultComponent;return p?v.jsx(p,{},a):v.jsx(ll,{})},[a,c.options.component,s.options.defaultComponent]),f=(c.options.errorComponent??s.options.defaultErrorComponent)||vM;if(o.status==="notFound")return Hl(el(o.error)),f4(s,c,o.error);if(o.status==="redirected")throw Hl(rp(o.error)),(n=s.getMatch(o.id))==null?void 0:n.loadPromise;if(o.status==="error"){if(s.isServer)return v.jsx(f,{error:o.error,reset:void 0,info:{componentStack:""}});throw o.error}if(o.status==="pending"){const p=c.options.pendingMinMs??s.options.defaultPendingMinMs;if(p&&!((r=s.getMatch(o.id))!=null&&r.minPendingPromise)&&!s.isServer){const g=Dg();Promise.resolve().then(()=>{s.updateMatch(o.id,x=>({...x,minPendingPromise:g}))}),setTimeout(()=>{g.resolve(),s.updateMatch(o.id,x=>({...x,minPendingPromise:void 0}))},p)}throw(i=s.getMatch(o.id))==null?void 0:i.loadPromise}return u}),ll=X.memo(function(){const e=al(),n=X.useContext(xM),r=Hs({select:c=>{var u;return(u=c.matches.find(f=>f.id===n))==null?void 0:u.routeId}}),i=e.routesById[r],s=Hs({select:c=>{const f=c.matches.find(p=>p.id===n);return Hl(f),f.globalNotFound}}),o=Hs({select:c=>{var u;const f=c.matches,p=f.findIndex(g=>g.id===n);return(u=f[p+1])==null?void 0:u.id}});if(s)return f4(e,i,void 0);if(!o)return null;const a=v.jsx(p4,{matchId:o}),l=e.options.defaultPendingComponent?v.jsx(e.options.defaultPendingComponent,{}):null;return n===Xo?v.jsx(X.Suspense,{fallback:l,children:a}):a});var LC={exports:{}},zo={},DC={exports:{}},FC={};var TL;function X9(){return TL||(TL=1,function(t){function e(W,Z){var J=W.length;W.push(Z);e:for(;0<J;){var Y=J-1>>>1,oe=W[Y];if(0<i(oe,Z))W[Y]=Z,W[J]=oe,J=Y;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Z=W[0],J=W.pop();if(J!==Z){W[0]=J;e:for(var Y=0,oe=W.length,ce=oe>>>1;Y<ce;){var ie=2*(Y+1)-1,ue=W[ie],de=ie+1,be=W[de];if(0>i(ue,J))de<oe&&0>i(be,ue)?(W[Y]=be,W[de]=J,Y=de):(W[Y]=ue,W[ie]=J,Y=ie);else if(de<oe&&0>i(be,J))W[Y]=be,W[de]=J,Y=de;else break e}}return Z}function i(W,Z){var J=W.sortIndex-Z.sortIndex;return J!==0?J:W.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,g=!1,x=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(W){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=W)r(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(c)}}function T(W){if(S=!1,M(W),!x)if(n(l)!==null)x=!0,q(k);else{var Z=n(c);Z!==null&&te(T,Z.startTime-W)}}function k(W,Z){x=!1,S&&(S=!1,b(L),L=-1),g=!0;var J=p;try{for(M(Z),f=n(l);f!==null&&(!(f.expirationTime>Z)||W&&!P());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var oe=Y(f.expirationTime<=Z);Z=t.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(l)&&r(l),M(Z)}else r(l);f=n(l)}if(f!==null)var ce=!0;else{var ie=n(c);ie!==null&&te(T,ie.startTime-Z),ce=!1}return ce}finally{f=null,p=J,g=!1}}var N=!1,D=null,L=-1,R=5,A=-1;function P(){return!(t.unstable_now()-A<R)}function j(){if(D!==null){var W=t.unstable_now();A=W;var Z=!0;try{Z=D(!0,W)}finally{Z?U():(N=!1,D=null)}}else N=!1}var U;if(typeof E=="function")U=function(){E(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,$=B.port2;B.port1.onmessage=j,U=function(){$.postMessage(null)}}else U=function(){_(j,0)};function q(W){D=W,N||(N=!0,U())}function te(W,Z){L=_(function(){W(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,q(k))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var J=p;p=Z;try{return W()}finally{p=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Z){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var J=p;p=W;try{return Z()}finally{p=J}},t.unstable_scheduleCallback=function(W,Z,J){var Y=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Y+J:Y):J=Y,W){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=0x3fffffff;break;case 4:oe=1e4;break;default:oe=5e3}return oe=J+oe,W={id:u++,callback:Z,priorityLevel:W,startTime:J,expirationTime:oe,sortIndex:-1},J>Y?(W.sortIndex=J,e(c,W),n(l)===null&&W===n(c)&&(S?(b(L),L=-1):S=!0,te(T,J-Y))):(W.sortIndex=oe,e(l,W),x||g||(x=!0,q(k))),W},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(W){var Z=p;return function(){var J=p;p=Z;try{return W.apply(this,arguments)}finally{p=J}}}}(FC)),FC}var CL;function K9(){return CL||(CL=1,DC.exports=X9()),DC.exports}var IL;function Y9(){if(IL)return zo;IL=1;var t=qy(),e=K9();function n(d){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+d,w=1;w<arguments.length;w++)h+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(d,h){o(d,h),o(d+"Capture",h)}function o(d,h){for(i[d]=h,d=0;d<h.length;d++)r.add(h[d])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},f={};function p(d){return l.call(f,d)?!0:l.call(u,d)?!1:c.test(d)?f[d]=!0:(u[d]=!0,!1)}function g(d,h,w,I){if(w!==null&&w.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return I?!1:w!==null?!w.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function x(d,h,w,I){if(h===null||typeof h>"u"||g(d,h,w,I))return!0;if(I)return!1;if(w!==null)switch(w.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function S(d,h,w,I,F,V,re){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=I,this.attributeNamespace=F,this.mustUseProperty=w,this.propertyName=d,this.type=h,this.sanitizeURL=V,this.removeEmptyString=re}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){_[d]=new S(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var h=d[0];_[h]=new S(h,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){_[d]=new S(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){_[d]=new S(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){_[d]=new S(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){_[d]=new S(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){_[d]=new S(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){_[d]=new S(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){_[d]=new S(d,5,!1,d.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function E(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var h=d.replace(b,E);_[h]=new S(h,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var h=d.replace(b,E);_[h]=new S(h,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var h=d.replace(b,E);_[h]=new S(h,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){_[d]=new S(d,1,!1,d.toLowerCase(),null,!1,!1)}),_.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){_[d]=new S(d,1,!1,d.toLowerCase(),null,!0,!0)});function M(d,h,w,I){var F=_.hasOwnProperty(h)?_[h]:null;(F!==null?F.type!==0:I||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(x(h,w,F,I)&&(w=null),I||F===null?p(h)&&(w===null?d.removeAttribute(h):d.setAttribute(h,""+w)):F.mustUseProperty?d[F.propertyName]=w===null?F.type===3?!1:"":w:(h=F.attributeName,I=F.attributeNamespace,w===null?d.removeAttribute(h):(F=F.type,w=F===3||F===4&&w===!0?"":""+w,I?d.setAttributeNS(I,h,w):d.setAttribute(h,w))))}var T=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),N=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),P=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),W=Symbol.iterator;function Z(d){return d===null||typeof d!="object"?null:(d=W&&d[W]||d["@@iterator"],typeof d=="function"?d:null)}var J=Object.assign,Y;function oe(d){if(Y===void 0)try{throw Error()}catch(w){var h=w.stack.trim().match(/\n( *(at )?)/);Y=h&&h[1]||""}return`
`+Y+d}var ce=!1;function ie(d,h){if(!d||ce)return"";ce=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(We){var I=We}Reflect.construct(d,[],h)}else{try{h.call()}catch(We){I=We}d.call(h.prototype)}else{try{throw Error()}catch(We){I=We}d()}}catch(We){if(We&&I&&typeof We.stack=="string"){for(var F=We.stack.split(`
`),V=I.stack.split(`
`),re=F.length-1,xe=V.length-1;1<=re&&0<=xe&&F[re]!==V[xe];)xe--;for(;1<=re&&0<=xe;re--,xe--)if(F[re]!==V[xe]){if(re!==1||xe!==1)do if(re--,xe--,0>xe||F[re]!==V[xe]){var Me=`
`+F[re].replace(" at new "," at ");return d.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",d.displayName)),Me}while(1<=re&&0<=xe);break}}}finally{ce=!1,Error.prepareStackTrace=w}return(d=d?d.displayName||d.name:"")?oe(d):""}function ue(d){switch(d.tag){case 5:return oe(d.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 2:case 15:return d=ie(d.type,!1),d;case 11:return d=ie(d.type.render,!1),d;case 1:return d=ie(d.type,!0),d;default:return""}}function de(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case D:return"Fragment";case N:return"Portal";case R:return"Profiler";case L:return"StrictMode";case U:return"Suspense";case B:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case P:return(d.displayName||"Context")+".Consumer";case A:return(d._context.displayName||"Context")+".Provider";case j:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case $:return h=d.displayName||null,h!==null?h:de(d.type)||"Memo";case q:h=d._payload,d=d._init;try{return de(d(h))}catch{}}return null}function be(d){var h=d.type;switch(d.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=h.render,d=d.displayName||d.name||"",h.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(h);case 8:return h===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function we(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Ce(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Ie(d){var h=Ce(d)?"checked":"value",w=Object.getOwnPropertyDescriptor(d.constructor.prototype,h),I=""+d[h];if(!d.hasOwnProperty(h)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var F=w.get,V=w.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return F.call(this)},set:function(re){I=""+re,V.call(this,re)}}),Object.defineProperty(d,h,{enumerable:w.enumerable}),{getValue:function(){return I},setValue:function(re){I=""+re},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function Fe(d){d._valueTracker||(d._valueTracker=Ie(d))}function ve(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var w=h.getValue(),I="";return d&&(I=Ce(d)?d.checked?"true":"false":d.value),d=I,d!==w?(h.setValue(d),!0):!1}function _e(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function se(d,h){var w=h.checked;return J({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??d._wrapperState.initialChecked})}function $e(d,h){var w=h.defaultValue==null?"":h.defaultValue,I=h.checked!=null?h.checked:h.defaultChecked;w=we(h.value!=null?h.value:w),d._wrapperState={initialChecked:I,initialValue:w,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function je(d,h){h=h.checked,h!=null&&M(d,"checked",h,!1)}function Ze(d,h){je(d,h);var w=we(h.value),I=h.type;if(w!=null)I==="number"?(w===0&&d.value===""||d.value!=w)&&(d.value=""+w):d.value!==""+w&&(d.value=""+w);else if(I==="submit"||I==="reset"){d.removeAttribute("value");return}h.hasOwnProperty("value")?ge(d,h.type,w):h.hasOwnProperty("defaultValue")&&ge(d,h.type,we(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(d.defaultChecked=!!h.defaultChecked)}function le(d,h,w){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var I=h.type;if(!(I!=="submit"&&I!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+d._wrapperState.initialValue,w||h===d.value||(d.value=h),d.defaultValue=h}w=d.name,w!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,w!==""&&(d.name=w)}function ge(d,h,w){(h!=="number"||_e(d.ownerDocument)!==d)&&(w==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+w&&(d.defaultValue=""+w))}var fe=Array.isArray;function Q(d,h,w,I){if(d=d.options,h){h={};for(var F=0;F<w.length;F++)h["$"+w[F]]=!0;for(w=0;w<d.length;w++)F=h.hasOwnProperty("$"+d[w].value),d[w].selected!==F&&(d[w].selected=F),F&&I&&(d[w].defaultSelected=!0)}else{for(w=""+we(w),h=null,F=0;F<d.length;F++){if(d[F].value===w){d[F].selected=!0,I&&(d[F].defaultSelected=!0);return}h!==null||d[F].disabled||(h=d[F])}h!==null&&(h.selected=!0)}}function G(d,h){if(h.dangerouslySetInnerHTML!=null)throw Error(n(91));return J({},h,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function me(d,h){var w=h.value;if(w==null){if(w=h.children,h=h.defaultValue,w!=null){if(h!=null)throw Error(n(92));if(fe(w)){if(1<w.length)throw Error(n(93));w=w[0]}h=w}h==null&&(h=""),w=h}d._wrapperState={initialValue:we(w)}}function he(d,h){var w=we(h.value),I=we(h.defaultValue);w!=null&&(w=""+w,w!==d.value&&(d.value=w),h.defaultValue==null&&d.defaultValue!==w&&(d.defaultValue=w)),I!=null&&(d.defaultValue=""+I)}function Te(d){var h=d.textContent;h===d._wrapperState.initialValue&&h!==""&&h!==null&&(d.value=h)}function Oe(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qe(d,h){return d==null||d==="http://www.w3.org/1999/xhtml"?Oe(h):d==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var Ye,at=function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,w,I,F){MSApp.execUnsafeLocalFunction(function(){return d(h,w,I,F)})}:d}(function(d,h){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=h;else{for(Ye=Ye||document.createElement("div"),Ye.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Ye.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;h.firstChild;)d.appendChild(h.firstChild)}});function Ft(d,h){if(h){var w=d.firstChild;if(w&&w===d.lastChild&&w.nodeType===3){w.nodeValue=h;return}}d.textContent=h}var et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];Object.keys(et).forEach(function(d){gt.forEach(function(h){h=h+d.charAt(0).toUpperCase()+d.substring(1),et[h]=et[d]})});function kt(d,h,w){return h==null||typeof h=="boolean"||h===""?"":w||typeof h!="number"||h===0||et.hasOwnProperty(d)&&et[d]?(""+h).trim():h+"px"}function Bt(d,h){d=d.style;for(var w in h)if(h.hasOwnProperty(w)){var I=w.indexOf("--")===0,F=kt(w,h[w],I);w==="float"&&(w="cssFloat"),I?d.setProperty(w,F):d[w]=F}}var dt=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(d,h){if(h){if(dt[d]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(n(137,d));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(n(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(n(61))}if(h.style!=null&&typeof h.style!="object")throw Error(n(62))}}function He(d,h){if(d.indexOf("-")===-1)return typeof h.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ft=null;function Se(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var nt=null,Ve=null,Ke=null;function vt(d){if(d=bl(d)){if(typeof nt!="function")throw Error(n(280));var h=d.stateNode;h&&(h=Vm(h),nt(d.stateNode,d.type,h))}}function pt(d){Ve?Ke?Ke.push(d):Ke=[d]:Ve=d}function Xt(){if(Ve){var d=Ve,h=Ke;if(Ke=Ve=null,vt(d),h)for(d=0;d<h.length;d++)vt(h[d])}}function Dn(d,h){return d(h)}function sr(){}var yn=!1;function Or(d,h,w){if(yn)return d(h,w);yn=!0;try{return Dn(d,h,w)}finally{yn=!1,(Ve!==null||Ke!==null)&&(sr(),Xt())}}function jr(d,h){var w=d.stateNode;if(w===null)return null;var I=Vm(w);if(I===null)return null;w=I[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(d=d.type,I=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!I;break e;default:d=!1}if(d)return null;if(w&&typeof w!="function")throw Error(n(231,h,typeof w));return w}var oc=!1;if(a)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){oc=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{oc=!1}function Ro(d,h,w,I,F,V,re,xe,Me){var We=Array.prototype.slice.call(arguments,3);try{h.apply(w,We)}catch(it){this.onError(it)}}var to=!1,ul=null,no=!1,Ba=null,md={onError:function(d){to=!0,ul=d}};function ac(d,h,w,I,F,V,re,xe,Me){to=!1,ul=null,Ro.apply(md,arguments)}function Kc(d,h,w,I,F,V,re,xe,Me){if(ac.apply(this,arguments),to){if(to){var We=ul;to=!1,ul=null}else throw Error(n(198));no||(no=!0,Ba=We)}}function ro(d){var h=d,w=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,h.flags&4098&&(w=h.return),d=h.return;while(d)}return h.tag===3?w:null}function gd(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function yd(d){if(ro(d)!==d)throw Error(n(188))}function vd(d){var h=d.alternate;if(!h){if(h=ro(d),h===null)throw Error(n(188));return h!==d?null:d}for(var w=d,I=h;;){var F=w.return;if(F===null)break;var V=F.alternate;if(V===null){if(I=F.return,I!==null){w=I;continue}break}if(F.child===V.child){for(V=F.child;V;){if(V===w)return yd(F),d;if(V===I)return yd(F),h;V=V.sibling}throw Error(n(188))}if(w.return!==I.return)w=F,I=V;else{for(var re=!1,xe=F.child;xe;){if(xe===w){re=!0,w=F,I=V;break}if(xe===I){re=!0,I=F,w=V;break}xe=xe.sibling}if(!re){for(xe=V.child;xe;){if(xe===w){re=!0,w=V,I=F;break}if(xe===I){re=!0,I=V,w=F;break}xe=xe.sibling}if(!re)throw Error(n(189))}}if(w.alternate!==I)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?d:h}function xd(d){return d=vd(d),d!==null?bd(d):null}function bd(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var h=bd(d);if(h!==null)return h;d=d.sibling}return null}var wd=e.unstable_scheduleCallback,ae=e.unstable_cancelCallback,Ne=e.unstable_shouldYield,ze=e.unstable_requestPaint,Le=e.unstable_now,Pe=e.unstable_getCurrentPriorityLevel,rt=e.unstable_ImmediatePriority,mt=e.unstable_UserBlockingPriority,_t=e.unstable_NormalPriority,Tt=e.unstable_LowPriority,Kt=e.unstable_IdlePriority,Ht=null,lt=null;function Ut(d){if(lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(Ht,d,void 0,(d.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:vn,In=Math.log,Rn=Math.LN2;function vn(d){return d>>>=0,d===0?32:31-(In(d)/Rn|0)|0}var jt=64,Fn=4194304;function mn(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return d&0x7c00000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return d}}function mi(d,h){var w=d.pendingLanes;if(w===0)return 0;var I=0,F=d.suspendedLanes,V=d.pingedLanes,re=w&0xfffffff;if(re!==0){var xe=re&~F;xe!==0?I=mn(xe):(V&=re,V!==0&&(I=mn(V)))}else re=w&~F,re!==0?I=mn(re):V!==0&&(I=mn(V));if(I===0)return 0;if(h!==0&&h!==I&&!(h&F)&&(F=I&-I,V=h&-h,F>=V||F===16&&(V&4194240)!==0))return h;if(I&4&&(I|=w&16),h=d.entangledLanes,h!==0)for(d=d.entanglements,h&=I;0<h;)w=31-Qt(h),F=1<<w,I|=d[w],h&=~F;return I}function dl(d,h){switch(d){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return-1;case 0x8000000:case 0x10000000:case 0x20000000:case 0x40000000:return-1;default:return-1}}function Ci(d,h){for(var w=d.suspendedLanes,I=d.pingedLanes,F=d.expirationTimes,V=d.pendingLanes;0<V;){var re=31-Qt(V),xe=1<<re,Me=F[re];Me===-1?(!(xe&w)||xe&I)&&(F[re]=dl(xe,h)):Me<=h&&(d.expiredLanes|=xe),V&=~xe}}function ja(d){return d=d.pendingLanes&-0x40000001,d!==0?d:d&0x40000000?0x40000000:0}function Bn(){var d=jt;return jt<<=1,!(jt&4194240)&&(jt=64),d}function ns(d){for(var h=[],w=0;31>w;w++)h.push(d);return h}function Ii(d,h,w){d.pendingLanes|=h,h!==0x20000000&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,h=31-Qt(h),d[h]=w}function Wi(d,h){var w=d.pendingLanes&~h;d.pendingLanes=h,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=h,d.mutableReadLanes&=h,d.entangledLanes&=h,h=d.entanglements;var I=d.eventTimes;for(d=d.expirationTimes;0<w;){var F=31-Qt(w),V=1<<F;h[F]=0,I[F]=-1,d[F]=-1,w&=~V}}function Kr(d,h){var w=d.entangledLanes|=h;for(d=d.entanglements;w;){var I=31-Qt(w),F=1<<I;F&h|d[I]&h&&(d[I]|=h),w&=~F}}var zn=0;function As(d){return d&=-d,1<d?4<d?d&0xfffffff?16:0x20000000:4:1}var nh,uv,mw,um,dm,Yc=!1,fm=[],Ua=null,An=null,fl=null,Zc=new Map,_d=new Map,lc=[],XT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gi(d,h){switch(d){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":fl=null;break;case"pointerover":case"pointerout":Zc.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":_d.delete(h.pointerId)}}function Jc(d,h,w,I,F,V){return d===null||d.nativeEvent!==V?(d={blockedOn:h,domEventName:w,eventSystemFlags:I,nativeEvent:V,targetContainers:[F]},h!==null&&(h=bl(h),h!==null&&uv(h)),d):(d.eventSystemFlags|=I,h=d.targetContainers,F!==null&&h.indexOf(F)===-1&&h.push(F),d)}function KT(d,h,w,I,F){switch(h){case"focusin":return Ua=Jc(Ua,d,h,w,I,F),!0;case"dragenter":return An=Jc(An,d,h,w,I,F),!0;case"mouseover":return fl=Jc(fl,d,h,w,I,F),!0;case"pointerover":var V=F.pointerId;return Zc.set(V,Jc(Zc.get(V)||null,d,h,w,I,F)),!0;case"gotpointercapture":return V=F.pointerId,_d.set(V,Jc(_d.get(V)||null,d,h,w,I,F)),!0}return!1}function hm(d){var h=mc(d.target);if(h!==null){var w=ro(h);if(w!==null){if(h=w.tag,h===13){if(h=gd(w),h!==null){d.blockedOn=h,dm(d.priority,function(){mw(w)});return}}else if(h===3&&w.stateNode.current.memoizedState.isDehydrated){d.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}d.blockedOn=null}function pm(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var w=No(d.domEventName,d.eventSystemFlags,h[0],d.nativeEvent);if(w===null){w=d.nativeEvent;var I=new w.constructor(w.type,w);ft=I,w.target.dispatchEvent(I),ft=null}else return h=bl(w),h!==null&&uv(h),d.blockedOn=w,!1;h.shift()}return!0}function rh(d,h,w){pm(d)&&w.delete(h)}function za(){Yc=!1,Ua!==null&&pm(Ua)&&(Ua=null),An!==null&&pm(An)&&(An=null),fl!==null&&pm(fl)&&(fl=null),Zc.forEach(rh),_d.forEach(rh)}function ih(d,h){d.blockedOn===h&&(d.blockedOn=null,Yc||(Yc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,za)))}function sh(d){function h(F){return ih(F,d)}if(0<fm.length){ih(fm[0],d);for(var w=1;w<fm.length;w++){var I=fm[w];I.blockedOn===d&&(I.blockedOn=null)}}for(Ua!==null&&ih(Ua,d),An!==null&&ih(An,d),fl!==null&&ih(fl,d),Zc.forEach(h),_d.forEach(h),w=0;w<lc.length;w++)I=lc[w],I.blockedOn===d&&(I.blockedOn=null);for(;0<lc.length&&(w=lc[0],w.blockedOn===null);)hm(w),w.blockedOn===null&&lc.shift()}var hs=T.ReactCurrentBatchConfig,Ao=!0;function mm(d,h,w,I){var F=zn,V=hs.transition;hs.transition=null;try{zn=1,gm(d,h,w,I)}finally{zn=F,hs.transition=V}}function dv(d,h,w,I){var F=zn,V=hs.transition;hs.transition=null;try{zn=4,gm(d,h,w,I)}finally{zn=F,hs.transition=V}}function gm(d,h,w,I){if(Ao){var F=No(d,h,w,I);if(F===null)Dm(d,h,I,ym,w),gi(d,I);else if(KT(F,d,h,w,I))I.stopPropagation();else if(gi(d,I),h&4&&-1<XT.indexOf(d)){for(;F!==null;){var V=bl(F);if(V!==null&&nh(V),V=No(d,h,w,I),V===null&&Dm(d,h,I,ym,w),V===F)break;F=V}F!==null&&I.stopPropagation()}else Dm(d,h,I,null,w)}}var ym=null;function No(d,h,w,I){if(ym=null,d=Se(I),d=mc(d),d!==null)if(h=ro(d),h===null)d=null;else if(w=h.tag,w===13){if(d=gd(h),d!==null)return d;d=null}else if(w===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null);return ym=d,null}function gw(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pe()){case rt:return 1;case mt:return 4;case _t:case Tt:return 16;case Kt:return 0x20000000;default:return 16}default:return 16}}var la=null,fv=null,Ns=null;function oh(){if(Ns)return Ns;var d,h=fv,w=h.length,I,F="value"in la?la.value:la.textContent,V=F.length;for(d=0;d<w&&h[d]===F[d];d++);var re=w-d;for(I=1;I<=re&&h[w-I]===F[V-I];I++);return Ns=F.slice(d,1<I?1-I:void 0)}function Qc(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function hl(){return!0}function vm(){return!1}function ps(d){function h(w,I,F,V,re){this._reactName=w,this._targetInst=F,this.type=I,this.nativeEvent=V,this.target=re,this.currentTarget=null;for(var xe in d)d.hasOwnProperty(xe)&&(w=d[xe],this[xe]=w?w(V):V[xe]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?hl:vm,this.isPropagationStopped=vm,this}return J(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),h}var eu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ah=ps(eu),tu=J({},eu,{view:0,detail:0}),Sd=ps(tu),Ps,Po,ko,Ed=J({},tu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uc,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==ko&&(ko&&d.type==="mousemove"?(Ps=d.screenX-ko.screenX,Po=d.screenY-ko.screenY):Po=Ps=0,ko=d),Ps)},movementY:function(d){return"movementY"in d?d.movementY:Po}}),hv=ps(Ed),pl=J({},Ed,{dataTransfer:0}),cc=ps(pl),xm=J({},tu,{relatedTarget:0}),bm=ps(xm),wm=J({},eu,{animationName:0,elapsedTime:0,pseudoElement:0}),yw=ps(wm),vw=J({},eu,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),pv=ps(vw),_m=J({},eu,{data:0}),mv=ps(_m),xw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Md(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=gv[d])?!!h[d]:!1}function uc(){return Md}var Sm=J({},tu,{key:function(d){if(d.key){var h=xw[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=Qc(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?bw[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uc,charCode:function(d){return d.type==="keypress"?Qc(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Qc(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Em=ps(Sm),Oo=J({},Ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),io=ps(Oo),nu=J({},tu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uc}),ml=ps(nu),gl=J({},eu,{propertyName:0,elapsedTime:0,pseudoElement:0}),ru=ps(gl),ww=J({},Ed,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),yv=ps(ww),vv=[9,13,27,32],ms=a&&"CompositionEvent"in window,qi=null;a&&"documentMode"in document&&(qi=document.documentMode);var Mr=a&&"TextEvent"in window&&!qi,Td=a&&(!ms||qi&&8<qi&&11>=qi),Lo=" ",xv=!1;function bv(d,h){switch(d){case"keyup":return vv.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mm(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var dc=!1;function _w(d,h){switch(d){case"compositionend":return Mm(h);case"keypress":return h.which!==32?null:(xv=!0,Lo);case"textInput":return d=h.data,d===Lo&&xv?null:d;default:return null}}function lh(d,h){if(dc)return d==="compositionend"||!ms&&bv(d,h)?(d=oh(),Ns=fv=la=null,dc=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Td&&h.locale!=="ko"?null:h.data;default:return null}}var Cd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!Cd[d.type]:h==="textarea"}function Id(d,h,w,I){pt(I),h=Fm(h,"onChange"),0<h.length&&(w=new ah("onChange","change",null,w,I),d.push({event:w,listeners:h}))}var fc=null,Rd=null;function Sw(d){kd(d,0)}function yl(d){var h=Yr(d);if(ve(h))return d}function Ew(d,h){if(d==="change")return h}var Ad=!1;if(a){var ks;if(a){var iu="oninput"in document;if(!iu){var su=document.createElement("div");su.setAttribute("oninput","return;"),iu=typeof su.oninput=="function"}ks=iu}else ks=!1;Ad=ks&&(!document.documentMode||9<document.documentMode)}function ca(){fc&&(fc.detachEvent("onpropertychange",Cm),Rd=fc=null)}function Cm(d){if(d.propertyName==="value"&&yl(Rd)){var h=[];Id(h,Rd,d,Se(d)),Or(Sw,h)}}function Nd(d,h,w){d==="focusin"?(ca(),fc=h,Rd=w,fc.attachEvent("onpropertychange",Cm)):d==="focusout"&&ca()}function Mw(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return yl(Rd)}function wv(d,h){if(d==="click")return yl(h)}function Lr(d,h){if(d==="input"||d==="change")return yl(h)}function Im(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var so=typeof Object.is=="function"?Object.is:Im;function ou(d,h){if(so(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var w=Object.keys(d),I=Object.keys(h);if(w.length!==I.length)return!1;for(I=0;I<w.length;I++){var F=w[I];if(!l.call(h,F)||!so(d[F],h[F]))return!1}return!0}function ch(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function oo(d,h){var w=ch(d);d=0;for(var I;w;){if(w.nodeType===3){if(I=d+w.textContent.length,d<=h&&I>=h)return{node:w,offset:h-d};d=I}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=ch(w)}}function au(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?au(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function Dr(){for(var d=window,h=_e();h instanceof d.HTMLIFrameElement;){try{var w=typeof h.contentWindow.location.href=="string"}catch{w=!1}if(w)d=h.contentWindow;else break;h=_e(d.document)}return h}function Ri(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}function Ai(d){var h=Dr(),w=d.focusedElem,I=d.selectionRange;if(h!==w&&w&&w.ownerDocument&&au(w.ownerDocument.documentElement,w)){if(I!==null&&Ri(w)){if(h=I.start,d=I.end,d===void 0&&(d=h),"selectionStart"in w)w.selectionStart=h,w.selectionEnd=Math.min(d,w.value.length);else if(d=(h=w.ownerDocument||document)&&h.defaultView||window,d.getSelection){d=d.getSelection();var F=w.textContent.length,V=Math.min(I.start,F);I=I.end===void 0?V:Math.min(I.end,F),!d.extend&&V>I&&(F=I,I=V,V=F),F=oo(w,V);var re=oo(w,I);F&&re&&(d.rangeCount!==1||d.anchorNode!==F.node||d.anchorOffset!==F.offset||d.focusNode!==re.node||d.focusOffset!==re.offset)&&(h=h.createRange(),h.setStart(F.node,F.offset),d.removeAllRanges(),V>I?(d.addRange(h),d.extend(re.node,re.offset)):(h.setEnd(re.node,re.offset),d.addRange(h)))}}for(h=[],d=w;d=d.parentNode;)d.nodeType===1&&h.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<h.length;w++)d=h[w],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var Rm=a&&"documentMode"in document&&11>=document.documentMode,Va=null,lu=null,uh=null,Ni=!1;function Am(d,h,w){var I=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;Ni||Va==null||Va!==_e(I)||(I=Va,"selectionStart"in I&&Ri(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),uh&&ou(uh,I)||(uh=I,I=Fm(lu,"onSelect"),0<I.length&&(h=new ah("onSelect","select",null,h,w),d.push({event:h,listeners:I}),h.target=Va)))}function Pd(d,h){var w={};return w[d.toLowerCase()]=h.toLowerCase(),w["Webkit"+d]="webkit"+h,w["Moz"+d]="moz"+h,w}var hc={animationend:Pd("Animation","AnimationEnd"),animationiteration:Pd("Animation","AnimationIteration"),animationstart:Pd("Animation","AnimationStart"),transitionend:Pd("Transition","TransitionEnd")},ua={},da={};a&&(da=document.createElement("div").style,"AnimationEvent"in window||(delete hc.animationend.animation,delete hc.animationiteration.animation,delete hc.animationstart.animation),"TransitionEvent"in window||delete hc.transitionend.transition);function Wa(d){if(ua[d])return ua[d];if(!hc[d])return d;var h=hc[d],w;for(w in h)if(h.hasOwnProperty(w)&&w in da)return ua[d]=h[w];return d}var dh=Wa("animationend"),fh=Wa("animationiteration"),_v=Wa("animationstart"),Sv=Wa("transitionend"),Ev=new Map,Mv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vl(d,h){Ev.set(d,h),s(h,[d])}for(var Nm=0;Nm<Mv.length;Nm++){var hh=Mv[Nm],ph=hh.toLowerCase(),Tw=hh[0].toUpperCase()+hh.slice(1);vl(ph,"on"+Tw)}vl(dh,"onAnimationEnd"),vl(fh,"onAnimationIteration"),vl(_v,"onAnimationStart"),vl("dblclick","onDoubleClick"),vl("focusin","onFocus"),vl("focusout","onBlur"),vl(Sv,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pm=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function km(d,h,w){var I=d.type||"unknown-event";d.currentTarget=w,Kc(I,h,void 0,d),d.currentTarget=null}function kd(d,h){h=(h&4)!==0;for(var w=0;w<d.length;w++){var I=d[w],F=I.event;I=I.listeners;e:{var V=void 0;if(h)for(var re=I.length-1;0<=re;re--){var xe=I[re],Me=xe.instance,We=xe.currentTarget;if(xe=xe.listener,Me!==V&&F.isPropagationStopped())break e;km(F,xe,We),V=Me}else for(re=0;re<I.length;re++){if(xe=I[re],Me=xe.instance,We=xe.currentTarget,xe=xe.listener,Me!==V&&F.isPropagationStopped())break e;km(F,xe,We),V=Me}}}if(no)throw d=Ba,no=!1,Ba=null,d}function dr(d,h){var w=h[du];w===void 0&&(w=h[du]=new Set);var I=d+"__bubble";w.has(I)||(Lm(h,d,2,!1),w.add(I))}function Om(d,h,w){var I=0;h&&(I|=4),Lm(w,d,I,h)}var mh="_reactListening"+Math.random().toString(36).slice(2);function Od(d){if(!d[mh]){d[mh]=!0,r.forEach(function(w){w!=="selectionchange"&&(Pm.has(w)||Om(w,!1,d),Om(w,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[mh]||(h[mh]=!0,Om("selectionchange",!1,h))}}function Lm(d,h,w,I){switch(gw(h)){case 1:var F=mm;break;case 4:F=dv;break;default:F=gm}w=F.bind(null,h,w,d),F=void 0,!oc||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(F=!0),I?F!==void 0?d.addEventListener(h,w,{capture:!0,passive:F}):d.addEventListener(h,w,!0):F!==void 0?d.addEventListener(h,w,{passive:F}):d.addEventListener(h,w,!1)}function Dm(d,h,w,I,F){var V=I;if(!(h&1)&&!(h&2)&&I!==null)e:for(;;){if(I===null)return;var re=I.tag;if(re===3||re===4){var xe=I.stateNode.containerInfo;if(xe===F||xe.nodeType===8&&xe.parentNode===F)break;if(re===4)for(re=I.return;re!==null;){var Me=re.tag;if((Me===3||Me===4)&&(Me=re.stateNode.containerInfo,Me===F||Me.nodeType===8&&Me.parentNode===F))return;re=re.return}for(;xe!==null;){if(re=mc(xe),re===null)return;if(Me=re.tag,Me===5||Me===6){I=V=re;continue e}xe=xe.parentNode}}I=I.return}Or(function(){var We=V,it=Se(w),st=[];e:{var tt=Ev.get(d);if(tt!==void 0){var Ct=ah,zt=d;switch(d){case"keypress":if(Qc(w)===0)break e;case"keydown":case"keyup":Ct=Em;break;case"focusin":zt="focus",Ct=bm;break;case"focusout":zt="blur",Ct=bm;break;case"beforeblur":case"afterblur":Ct=bm;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ct=hv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ct=cc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ct=ml;break;case dh:case fh:case _v:Ct=yw;break;case Sv:Ct=ru;break;case"scroll":Ct=Sd;break;case"wheel":Ct=yv;break;case"copy":case"cut":case"paste":Ct=pv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ct=io}var Vt=(h&4)!==0,vi=!Vt&&d==="scroll",De=Vt?tt!==null?tt+"Capture":null:tt;Vt=[];for(var Re=We,Be;Re!==null;){Be=Re;var ut=Be.stateNode;if(Be.tag===5&&ut!==null&&(Be=ut,De!==null&&(ut=jr(Re,De),ut!=null&&Vt.push(Ld(Re,ut,Be)))),vi)break;Re=Re.return}0<Vt.length&&(tt=new Ct(tt,zt,null,w,it),st.push({event:tt,listeners:Vt}))}}if(!(h&7)){e:{if(tt=d==="mouseover"||d==="pointerover",Ct=d==="mouseout"||d==="pointerout",tt&&w!==ft&&(zt=w.relatedTarget||w.fromElement)&&(mc(zt)||zt[ao]))break e;if((Ct||tt)&&(tt=it.window===it?it:(tt=it.ownerDocument)?tt.defaultView||tt.parentWindow:window,Ct?(zt=w.relatedTarget||w.toElement,Ct=We,zt=zt?mc(zt):null,zt!==null&&(vi=ro(zt),zt!==vi||zt.tag!==5&&zt.tag!==6)&&(zt=null)):(Ct=null,zt=We),Ct!==zt)){if(Vt=hv,ut="onMouseLeave",De="onMouseEnter",Re="mouse",(d==="pointerout"||d==="pointerover")&&(Vt=io,ut="onPointerLeave",De="onPointerEnter",Re="pointer"),vi=Ct==null?tt:Yr(Ct),Be=zt==null?tt:Yr(zt),tt=new Vt(ut,Re+"leave",Ct,w,it),tt.target=vi,tt.relatedTarget=Be,ut=null,mc(it)===We&&(Vt=new Vt(De,Re+"enter",zt,w,it),Vt.target=Be,Vt.relatedTarget=vi,ut=Vt),vi=ut,Ct&&zt)t:{for(Vt=Ct,De=zt,Re=0,Be=Vt;Be;Be=cu(Be))Re++;for(Be=0,ut=De;ut;ut=cu(ut))Be++;for(;0<Re-Be;)Vt=cu(Vt),Re--;for(;0<Be-Re;)De=cu(De),Be--;for(;Re--;){if(Vt===De||De!==null&&Vt===De.alternate)break t;Vt=cu(Vt),De=cu(De)}Vt=null}else Vt=null;Ct!==null&&Cw(st,tt,Ct,Vt,!1),zt!==null&&vi!==null&&Cw(st,vi,zt,Vt,!0)}}e:{if(tt=We?Yr(We):window,Ct=tt.nodeName&&tt.nodeName.toLowerCase(),Ct==="select"||Ct==="input"&&tt.type==="file")var $t=Ew;else if(Tm(tt))if(Ad)$t=Lr;else{$t=Mw;var en=Nd}else(Ct=tt.nodeName)&&Ct.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&($t=wv);if($t&&($t=$t(d,We))){Id(st,$t,w,it);break e}en&&en(d,tt,We),d==="focusout"&&(en=tt._wrapperState)&&en.controlled&&tt.type==="number"&&ge(tt,"number",tt.value)}switch(en=We?Yr(We):window,d){case"focusin":(Tm(en)||en.contentEditable==="true")&&(Va=en,lu=We,uh=null);break;case"focusout":uh=lu=Va=null;break;case"mousedown":Ni=!0;break;case"contextmenu":case"mouseup":case"dragend":Ni=!1,Am(st,w,it);break;case"selectionchange":if(Rm)break;case"keydown":case"keyup":Am(st,w,it)}var tn;if(ms)e:{switch(d){case"compositionstart":var un="onCompositionStart";break e;case"compositionend":un="onCompositionEnd";break e;case"compositionupdate":un="onCompositionUpdate";break e}un=void 0}else dc?bv(d,w)&&(un="onCompositionEnd"):d==="keydown"&&w.keyCode===229&&(un="onCompositionStart");un&&(Td&&w.locale!=="ko"&&(dc||un!=="onCompositionStart"?un==="onCompositionEnd"&&dc&&(tn=oh()):(la=it,fv="value"in la?la.value:la.textContent,dc=!0)),en=Fm(We,un),0<en.length&&(un=new mv(un,d,null,w,it),st.push({event:un,listeners:en}),tn?un.data=tn:(tn=Mm(w),tn!==null&&(un.data=tn)))),(tn=Mr?_w(d,w):lh(d,w))&&(We=Fm(We,"onBeforeInput"),0<We.length&&(it=new mv("onBeforeInput","beforeinput",null,w,it),st.push({event:it,listeners:We}),it.data=tn))}kd(st,h)})}function Ld(d,h,w){return{instance:d,listener:h,currentTarget:w}}function Fm(d,h){for(var w=h+"Capture",I=[];d!==null;){var F=d,V=F.stateNode;F.tag===5&&V!==null&&(F=V,V=jr(d,w),V!=null&&I.unshift(Ld(d,V,F)),V=jr(d,h),V!=null&&I.push(Ld(d,V,F))),d=d.return}return I}function cu(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function Cw(d,h,w,I,F){for(var V=h._reactName,re=[];w!==null&&w!==I;){var xe=w,Me=xe.alternate,We=xe.stateNode;if(Me!==null&&Me===I)break;xe.tag===5&&We!==null&&(xe=We,F?(Me=jr(w,V),Me!=null&&re.unshift(Ld(w,Me,xe))):F||(Me=jr(w,V),Me!=null&&re.push(Ld(w,Me,xe)))),w=w.return}re.length!==0&&d.push({event:h,listeners:re})}var YT=/\r\n?/g,Iw=/\u0000|\uFFFD/g;function Tv(d){return(typeof d=="string"?d:""+d).replace(YT,`
`).replace(Iw,"")}function gh(d,h,w){if(h=Tv(h),Tv(d)!==h&&w)throw Error(n(425))}function yh(){}var Dd=null,Cv=null;function Iv(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Rv=typeof setTimeout=="function"?setTimeout:void 0,Av=typeof clearTimeout=="function"?clearTimeout:void 0,Bm=typeof Promise=="function"?Promise:void 0,ZT=typeof queueMicrotask=="function"?queueMicrotask:typeof Bm<"u"?function(d){return Bm.resolve(null).then(d).catch(Rw)}:Rv;function Rw(d){setTimeout(function(){throw d})}function jm(d,h){var w=h,I=0;do{var F=w.nextSibling;if(d.removeChild(w),F&&F.nodeType===8)if(w=F.data,w==="/$"){if(I===0){d.removeChild(F),sh(h);return}I--}else w!=="$"&&w!=="$?"&&w!=="$!"||I++;w=F}while(w);sh(h)}function xl(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return d}function Nv(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var w=d.data;if(w==="$"||w==="$!"||w==="$?"){if(h===0)return d;h--}else w==="/$"&&h++}d=d.previousSibling}return null}var uu=Math.random().toString(36).slice(2),yi="__reactFiber$"+uu,Fd="__reactProps$"+uu,ao="__reactContainer$"+uu,du="__reactEvents$"+uu,Um="__reactListeners$"+uu,zm="__reactHandles$"+uu;function mc(d){var h=d[yi];if(h)return h;for(var w=d.parentNode;w;){if(h=w[ao]||w[yi]){if(w=h.alternate,h.child!==null||w!==null&&w.child!==null)for(d=Nv(d);d!==null;){if(w=d[yi])return w;d=Nv(d)}return h}d=w,w=d.parentNode}return null}function bl(d){return d=d[yi]||d[ao],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Yr(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(n(33))}function Vm(d){return d[Fd]||null}var Pv=[],Pi=-1;function Ur(d){return{current:d}}function fr(d){0>Pi||(d.current=Pv[Pi],Pv[Pi]=null,Pi--)}function cr(d,h){Pi++,Pv[Pi]=d.current,d.current=h}var wl={},Hi=Ur(wl),gs=Ur(!1),_l=wl;function fu(d,h){var w=d.type.contextTypes;if(!w)return wl;var I=d.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===h)return I.__reactInternalMemoizedMaskedChildContext;var F={},V;for(V in w)F[V]=h[V];return I&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=h,d.__reactInternalMemoizedMaskedChildContext=F),F}function rs(d){return d=d.childContextTypes,d!=null}function vh(){fr(gs),fr(Hi)}function kv(d,h,w){if(Hi.current!==wl)throw Error(n(168));cr(Hi,h),cr(gs,w)}function xh(d,h,w){var I=d.stateNode;if(h=h.childContextTypes,typeof I.getChildContext!="function")return w;I=I.getChildContext();for(var F in I)if(!(F in h))throw Error(n(108,be(d)||"Unknown",F));return J({},w,I)}function hu(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||wl,_l=Hi.current,cr(Hi,d),cr(gs,gs.current),!0}function Ov(d,h,w){var I=d.stateNode;if(!I)throw Error(n(169));w?(d=xh(d,h,_l),I.__reactInternalMemoizedMergedChildContext=d,fr(gs),fr(Hi),cr(Hi,d)):fr(gs),cr(gs,w)}var fa=null,bh=!1,Wm=!1;function wh(d){fa===null?fa=[d]:fa.push(d)}function Aw(d){bh=!0,wh(d)}function qa(){if(!Wm&&fa!==null){Wm=!0;var d=0,h=zn;try{var w=fa;for(zn=1;d<w.length;d++){var I=w[d];do I=I(!0);while(I!==null)}fa=null,bh=!1}catch(F){throw fa!==null&&(fa=fa.slice(d+1)),wd(rt,qa),F}finally{zn=h,Wm=!1}}return null}var pu=[],Os=0,qm=null,Hm=0,ys=[],ki=0,mu=null,ht=1,Do="";function Sl(d,h){pu[Os++]=Hm,pu[Os++]=qm,qm=d,Hm=h}function Lv(d,h,w){ys[ki++]=ht,ys[ki++]=Do,ys[ki++]=mu,mu=d;var I=ht;d=Do;var F=32-Qt(I)-1;I&=~(1<<F),w+=1;var V=32-Qt(h)+F;if(30<V){var re=F-F%5;V=(I&(1<<re)-1).toString(32),I>>=re,F-=re,ht=1<<32-Qt(h)+F|w<<F|I,Do=V+d}else ht=1<<V|w<<F|I,Do=d}function Dv(d){d.return!==null&&(Sl(d,1),Lv(d,1,0))}function El(d){for(;d===qm;)qm=pu[--Os],pu[Os]=null,Hm=pu[--Os],pu[Os]=null;for(;d===mu;)mu=ys[--ki],ys[ki]=null,Do=ys[--ki],ys[ki]=null,ht=ys[--ki],ys[ki]=null}var $i=null,vs=null,xr=!1,Fo=null;function Fv(d,h){var w=Ka(5,null,null,0);w.elementType="DELETED",w.stateNode=h,w.return=d,h=d.deletions,h===null?(d.deletions=[w],d.flags|=16):h.push(w)}function Bv(d,h){switch(d.tag){case 5:var w=d.type;return h=h.nodeType!==1||w.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(d.stateNode=h,$i=d,vs=xl(h.firstChild),!0):!1;case 6:return h=d.pendingProps===""||h.nodeType!==3?null:h,h!==null?(d.stateNode=h,$i=d,vs=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(w=mu!==null?{id:ht,overflow:Do}:null,d.memoizedState={dehydrated:h,treeContext:w,retryLane:0x40000000},w=Ka(18,null,null,0),w.stateNode=h,w.return=d,d.child=w,$i=d,vs=null,!0):!1;default:return!1}}function $m(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Gm(d){if(xr){var h=vs;if(h){var w=h;if(!Bv(d,h)){if($m(d))throw Error(n(418));h=xl(w.nextSibling);var I=$i;h&&Bv(d,h)?Fv(I,w):(d.flags=d.flags&-4097|2,xr=!1,$i=d)}}else{if($m(d))throw Error(n(418));d.flags=d.flags&-4097|2,xr=!1,$i=d}}}function Xm(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;$i=d}function Bd(d){if(d!==$i)return!1;if(!xr)return Xm(d),xr=!0,!1;var h;if((h=d.tag!==3)&&!(h=d.tag!==5)&&(h=d.type,h=h!=="head"&&h!=="body"&&!Iv(d.type,d.memoizedProps)),h&&(h=vs)){if($m(d))throw jv(),Error(n(418));for(;h;)Fv(d,h),h=xl(h.nextSibling)}if(Xm(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));e:{for(d=d.nextSibling,h=0;d;){if(d.nodeType===8){var w=d.data;if(w==="/$"){if(h===0){vs=xl(d.nextSibling);break e}h--}else w!=="$"&&w!=="$!"&&w!=="$?"||h++}d=d.nextSibling}vs=null}}else vs=$i?xl(d.stateNode.nextSibling):null;return!0}function jv(){for(var d=vs;d;)d=xl(d.nextSibling)}function gc(){vs=$i=null,xr=!1}function jd(d){Fo===null?Fo=[d]:Fo.push(d)}var JT=T.ReactCurrentBatchConfig;function _h(d,h,w){if(d=w.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var I=w.stateNode}if(!I)throw Error(n(147,d));var F=I,V=""+d;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===V?h.ref:(h=function(re){var xe=F.refs;re===null?delete xe[V]:xe[V]=re},h._stringRef=V,h)}if(typeof d!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,d))}return d}function Sh(d,h){throw d=Object.prototype.toString.call(h),Error(n(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d))}function Uv(d){var h=d._init;return h(d._payload)}function zv(d){function h(De,Re){if(d){var Be=De.deletions;Be===null?(De.deletions=[Re],De.flags|=16):Be.push(Re)}}function w(De,Re){if(!d)return null;for(;Re!==null;)h(De,Re),Re=Re.sibling;return null}function I(De,Re){for(De=new Map;Re!==null;)Re.key!==null?De.set(Re.key,Re):De.set(Re.index,Re),Re=Re.sibling;return De}function F(De,Re){return De=Yd(De,Re),De.index=0,De.sibling=null,De}function V(De,Re,Be){return De.index=Be,d?(Be=De.alternate,Be!==null?(Be=Be.index,Be<Re?(De.flags|=2,Re):Be):(De.flags|=2,Re)):(De.flags|=1048576,Re)}function re(De){return d&&De.alternate===null&&(De.flags|=2),De}function xe(De,Re,Be,ut){return Re===null||Re.tag!==6?(Re=yC(Be,De.mode,ut),Re.return=De,Re):(Re=F(Re,Be),Re.return=De,Re)}function Me(De,Re,Be,ut){var $t=Be.type;return $t===D?it(De,Re,Be.props.children,ut,Be.key):Re!==null&&(Re.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===q&&Uv($t)===Re.type)?(ut=F(Re,Be.props),ut.ref=_h(De,Re,Be),ut.return=De,ut):(ut=Qw(Be.type,Be.key,Be.props,null,De.mode,ut),ut.ref=_h(De,Re,Be),ut.return=De,ut)}function We(De,Re,Be,ut){return Re===null||Re.tag!==4||Re.stateNode.containerInfo!==Be.containerInfo||Re.stateNode.implementation!==Be.implementation?(Re=vC(Be,De.mode,ut),Re.return=De,Re):(Re=F(Re,Be.children||[]),Re.return=De,Re)}function it(De,Re,Be,ut,$t){return Re===null||Re.tag!==7?(Re=Uh(Be,De.mode,ut,$t),Re.return=De,Re):(Re=F(Re,Be),Re.return=De,Re)}function st(De,Re,Be){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return Re=yC(""+Re,De.mode,Be),Re.return=De,Re;if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case k:return Be=Qw(Re.type,Re.key,Re.props,null,De.mode,Be),Be.ref=_h(De,null,Re),Be.return=De,Be;case N:return Re=vC(Re,De.mode,Be),Re.return=De,Re;case q:var ut=Re._init;return st(De,ut(Re._payload),Be)}if(fe(Re)||Z(Re))return Re=Uh(Re,De.mode,Be,null),Re.return=De,Re;Sh(De,Re)}return null}function tt(De,Re,Be,ut){var $t=Re!==null?Re.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number")return $t!==null?null:xe(De,Re,""+Be,ut);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case k:return Be.key===$t?Me(De,Re,Be,ut):null;case N:return Be.key===$t?We(De,Re,Be,ut):null;case q:return $t=Be._init,tt(De,Re,$t(Be._payload),ut)}if(fe(Be)||Z(Be))return $t!==null?null:it(De,Re,Be,ut,null);Sh(De,Be)}return null}function Ct(De,Re,Be,ut,$t){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return De=De.get(Be)||null,xe(Re,De,""+ut,$t);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case k:return De=De.get(ut.key===null?Be:ut.key)||null,Me(Re,De,ut,$t);case N:return De=De.get(ut.key===null?Be:ut.key)||null,We(Re,De,ut,$t);case q:var en=ut._init;return Ct(De,Re,Be,en(ut._payload),$t)}if(fe(ut)||Z(ut))return De=De.get(Be)||null,it(Re,De,ut,$t,null);Sh(Re,ut)}return null}function zt(De,Re,Be,ut){for(var $t=null,en=null,tn=Re,un=Re=0,as=null;tn!==null&&un<Be.length;un++){tn.index>un?(as=tn,tn=null):as=tn.sibling;var tr=tt(De,tn,Be[un],ut);if(tr===null){tn===null&&(tn=as);break}d&&tn&&tr.alternate===null&&h(De,tn),Re=V(tr,Re,un),en===null?$t=tr:en.sibling=tr,en=tr,tn=as}if(un===Be.length)return w(De,tn),xr&&Sl(De,un),$t;if(tn===null){for(;un<Be.length;un++)tn=st(De,Be[un],ut),tn!==null&&(Re=V(tn,Re,un),en===null?$t=tn:en.sibling=tn,en=tn);return xr&&Sl(De,un),$t}for(tn=I(De,tn);un<Be.length;un++)as=Ct(tn,De,un,Be[un],ut),as!==null&&(d&&as.alternate!==null&&tn.delete(as.key===null?un:as.key),Re=V(as,Re,un),en===null?$t=as:en.sibling=as,en=as);return d&&tn.forEach(function(Zd){return h(De,Zd)}),xr&&Sl(De,un),$t}function Vt(De,Re,Be,ut){var $t=Z(Be);if(typeof $t!="function")throw Error(n(150));if(Be=$t.call(Be),Be==null)throw Error(n(151));for(var en=$t=null,tn=Re,un=Re=0,as=null,tr=Be.next();tn!==null&&!tr.done;un++,tr=Be.next()){tn.index>un?(as=tn,tn=null):as=tn.sibling;var Zd=tt(De,tn,tr.value,ut);if(Zd===null){tn===null&&(tn=as);break}d&&tn&&Zd.alternate===null&&h(De,tn),Re=V(Zd,Re,un),en===null?$t=Zd:en.sibling=Zd,en=Zd,tn=as}if(tr.done)return w(De,tn),xr&&Sl(De,un),$t;if(tn===null){for(;!tr.done;un++,tr=Be.next())tr=st(De,tr.value,ut),tr!==null&&(Re=V(tr,Re,un),en===null?$t=tr:en.sibling=tr,en=tr);return xr&&Sl(De,un),$t}for(tn=I(De,tn);!tr.done;un++,tr=Be.next())tr=Ct(tn,De,un,tr.value,ut),tr!==null&&(d&&tr.alternate!==null&&tn.delete(tr.key===null?un:tr.key),Re=V(tr,Re,un),en===null?$t=tr:en.sibling=tr,en=tr);return d&&tn.forEach(function(yG){return h(De,yG)}),xr&&Sl(De,un),$t}function vi(De,Re,Be,ut){if(typeof Be=="object"&&Be!==null&&Be.type===D&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case k:e:{for(var $t=Be.key,en=Re;en!==null;){if(en.key===$t){if($t=Be.type,$t===D){if(en.tag===7){w(De,en.sibling),Re=F(en,Be.props.children),Re.return=De,De=Re;break e}}else if(en.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===q&&Uv($t)===en.type){w(De,en.sibling),Re=F(en,Be.props),Re.ref=_h(De,en,Be),Re.return=De,De=Re;break e}w(De,en);break}else h(De,en);en=en.sibling}Be.type===D?(Re=Uh(Be.props.children,De.mode,ut,Be.key),Re.return=De,De=Re):(ut=Qw(Be.type,Be.key,Be.props,null,De.mode,ut),ut.ref=_h(De,Re,Be),ut.return=De,De=ut)}return re(De);case N:e:{for(en=Be.key;Re!==null;){if(Re.key===en)if(Re.tag===4&&Re.stateNode.containerInfo===Be.containerInfo&&Re.stateNode.implementation===Be.implementation){w(De,Re.sibling),Re=F(Re,Be.children||[]),Re.return=De,De=Re;break e}else{w(De,Re);break}else h(De,Re);Re=Re.sibling}Re=vC(Be,De.mode,ut),Re.return=De,De=Re}return re(De);case q:return en=Be._init,vi(De,Re,en(Be._payload),ut)}if(fe(Be))return zt(De,Re,Be,ut);if(Z(Be))return Vt(De,Re,Be,ut);Sh(De,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"?(Be=""+Be,Re!==null&&Re.tag===6?(w(De,Re.sibling),Re=F(Re,Be),Re.return=De,De=Re):(w(De,Re),Re=yC(Be,De.mode,ut),Re.return=De,De=Re),re(De)):w(De,Re)}return vi}var gu=zv(!0),Eh=zv(!1),yu=Ur(null),vu=null,Ml=null,Ud=null;function xu(){Ud=Ml=vu=null}function Mh(d){var h=yu.current;fr(yu),d._currentValue=h}function Th(d,h,w){for(;d!==null;){var I=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,I!==null&&(I.childLanes|=h)):I!==null&&(I.childLanes&h)!==h&&(I.childLanes|=h),d===w)break;d=d.return}}function yc(d,h){vu=d,Ud=Ml=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&h&&(En=!0),d.firstContext=null)}function lo(d){var h=d._currentValue;if(Ud!==d)if(d={context:d,memoizedValue:h,next:null},Ml===null){if(vu===null)throw Error(n(308));Ml=d,vu.dependencies={lanes:0,firstContext:d}}else Ml=Ml.next=d;return h}var Tl=null;function Vv(d){Tl===null?Tl=[d]:Tl.push(d)}function Ch(d,h,w,I){var F=h.interleaved;return F===null?(w.next=w,Vv(h)):(w.next=F.next,F.next=w),h.interleaved=w,ha(d,I)}function ha(d,h){d.lanes|=h;var w=d.alternate;for(w!==null&&(w.lanes|=h),w=d,d=d.return;d!==null;)d.childLanes|=h,w=d.alternate,w!==null&&(w.childLanes|=h),w=d,d=d.return;return w.tag===3?w.stateNode:null}var or=!1;function wn(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zr(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function ar(d,h){return{eventTime:d,lane:h,tag:0,payload:null,callback:null,next:null}}function Tr(d,h,w){var I=d.updateQueue;if(I===null)return null;if(I=I.shared,Zn&2){var F=I.pending;return F===null?h.next=h:(h.next=F.next,F.next=h),I.pending=h,ha(d,w)}return F=I.interleaved,F===null?(h.next=h,Vv(I)):(h.next=F.next,F.next=h),I.interleaved=h,ha(d,w)}function is(d,h,w){if(h=h.updateQueue,h!==null&&(h=h.shared,(w&4194240)!==0)){var I=h.lanes;I&=d.pendingLanes,w|=I,h.lanes=w,Kr(d,w)}}function bu(d,h){var w=d.updateQueue,I=d.alternate;if(I!==null&&(I=I.updateQueue,w===I)){var F=null,V=null;if(w=w.firstBaseUpdate,w!==null){do{var re={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};V===null?F=V=re:V=V.next=re,w=w.next}while(w!==null);V===null?F=V=h:V=V.next=h}else F=V=h;w={baseState:I.baseState,firstBaseUpdate:F,lastBaseUpdate:V,shared:I.shared,effects:I.effects},d.updateQueue=w;return}d=w.lastBaseUpdate,d===null?w.firstBaseUpdate=h:d.next=h,w.lastBaseUpdate=h}function zr(d,h,w,I){var F=d.updateQueue;or=!1;var V=F.firstBaseUpdate,re=F.lastBaseUpdate,xe=F.shared.pending;if(xe!==null){F.shared.pending=null;var Me=xe,We=Me.next;Me.next=null,re===null?V=We:re.next=We,re=Me;var it=d.alternate;it!==null&&(it=it.updateQueue,xe=it.lastBaseUpdate,xe!==re&&(xe===null?it.firstBaseUpdate=We:xe.next=We,it.lastBaseUpdate=Me))}if(V!==null){var st=F.baseState;re=0,it=We=Me=null,xe=V;do{var tt=xe.lane,Ct=xe.eventTime;if((I&tt)===tt){it!==null&&(it=it.next={eventTime:Ct,lane:0,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null});e:{var zt=d,Vt=xe;switch(tt=h,Ct=w,Vt.tag){case 1:if(zt=Vt.payload,typeof zt=="function"){st=zt.call(Ct,st,tt);break e}st=zt;break e;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=Vt.payload,tt=typeof zt=="function"?zt.call(Ct,st,tt):zt,tt==null)break e;st=J({},st,tt);break e;case 2:or=!0}}xe.callback!==null&&xe.lane!==0&&(d.flags|=64,tt=F.effects,tt===null?F.effects=[xe]:tt.push(xe))}else Ct={eventTime:Ct,lane:tt,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},it===null?(We=it=Ct,Me=st):it=it.next=Ct,re|=tt;if(xe=xe.next,xe===null){if(xe=F.shared.pending,xe===null)break;tt=xe,xe=tt.next,tt.next=null,F.lastBaseUpdate=tt,F.shared.pending=null}}while(!0);if(it===null&&(Me=st),F.baseState=Me,F.firstBaseUpdate=We,F.lastBaseUpdate=it,h=F.shared.interleaved,h!==null){F=h;do re|=F.lane,F=F.next;while(F!==h)}else V===null&&(F.shared.lanes=0);Dh|=re,d.lanes=re,d.memoizedState=st}}function zd(d,h,w){if(d=h.effects,h.effects=null,d!==null)for(h=0;h<d.length;h++){var I=d[h],F=I.callback;if(F!==null){if(I.callback=null,I=w,typeof F!="function")throw Error(n(191,F));F.call(I)}}}var Ha={},co=Ur(Ha),wu=Ur(Ha),Cl=Ur(Ha);function ti(d){if(d===Ha)throw Error(n(174));return d}function Ih(d,h){switch(cr(Cl,h),cr(wu,d),cr(co,Ha),d=h.nodeType,d){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Qe(null,"");break;default:d=d===8?h.parentNode:h,h=d.namespaceURI||null,d=d.tagName,h=Qe(h,d)}fr(co),cr(co,h)}function vc(){fr(co),fr(wu),fr(Cl)}function _u(d){ti(Cl.current);var h=ti(co.current),w=Qe(h,d.type);h!==w&&(cr(wu,d),cr(co,w))}function Vd(d){wu.current===d&&(fr(co),fr(wu))}var br=Ur(0);function pa(d){for(var h=d;h!==null;){if(h.tag===13){var w=h.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Wd=[];function $a(){for(var d=0;d<Wd.length;d++)Wd[d]._workInProgressVersionPrimary=null;Wd.length=0}var Su=T.ReactCurrentDispatcher,Eu=T.ReactCurrentBatchConfig,Il=0,hr=null,Vr=null,Gn=null,ma=!1,ss=!1,xc=0,Ls=0;function Gi(){throw Error(n(321))}function Rh(d,h){if(h===null)return!1;for(var w=0;w<h.length&&w<d.length;w++)if(!so(d[w],h[w]))return!1;return!0}function Ah(d,h,w,I,F,V){if(Il=V,hr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Su.current=d===null||d.memoizedState===null?Fw:Bw,d=w(I,F),ss){V=0;do{if(ss=!1,xc=0,25<=V)throw Error(n(301));V+=1,Gn=Vr=null,h.updateQueue=null,Su.current=jw,d=w(I,F)}while(ss)}if(Su.current=tg,h=Vr!==null&&Vr.next!==null,Il=0,Gn=Vr=hr=null,ma=!1,h)throw Error(n(300));return d}function Wv(){var d=xc!==0;return xc=0,d}function Xi(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?hr.memoizedState=Gn=d:Gn=Gn.next=d,Gn}function uo(){if(Vr===null){var d=hr.alternate;d=d!==null?d.memoizedState:null}else d=Vr.next;var h=Gn===null?hr.memoizedState:Gn.next;if(h!==null)Gn=h,Vr=d;else{if(d===null)throw Error(n(310));Vr=d,d={memoizedState:Vr.memoizedState,baseState:Vr.baseState,baseQueue:Vr.baseQueue,queue:Vr.queue,next:null},Gn===null?hr.memoizedState=Gn=d:Gn=Gn.next=d}return Gn}function qd(d,h){return typeof h=="function"?h(d):h}function Nh(d){var h=uo(),w=h.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var I=Vr,F=I.baseQueue,V=w.pending;if(V!==null){if(F!==null){var re=F.next;F.next=V.next,V.next=re}I.baseQueue=F=V,w.pending=null}if(F!==null){V=F.next,I=I.baseState;var xe=re=null,Me=null,We=V;do{var it=We.lane;if((Il&it)===it)Me!==null&&(Me=Me.next={lane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),I=We.hasEagerState?We.eagerState:d(I,We.action);else{var st={lane:it,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null};Me===null?(xe=Me=st,re=I):Me=Me.next=st,hr.lanes|=it,Dh|=it}We=We.next}while(We!==null&&We!==V);Me===null?re=I:Me.next=xe,so(I,h.memoizedState)||(En=!0),h.memoizedState=I,h.baseState=re,h.baseQueue=Me,w.lastRenderedState=I}if(d=w.interleaved,d!==null){F=d;do V=F.lane,hr.lanes|=V,Dh|=V,F=F.next;while(F!==d)}else F===null&&(w.lanes=0);return[h.memoizedState,w.dispatch]}function Rl(d){var h=uo(),w=h.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var I=w.dispatch,F=w.pending,V=h.memoizedState;if(F!==null){w.pending=null;var re=F=F.next;do V=d(V,re.action),re=re.next;while(re!==F);so(V,h.memoizedState)||(En=!0),h.memoizedState=V,h.baseQueue===null&&(h.baseState=V),w.lastRenderedState=V}return[V,I]}function qv(){}function Hv(d,h){var w=hr,I=uo(),F=h(),V=!so(I.memoizedState,F);if(V&&(I.memoizedState=F,En=!0),I=I.queue,Xv(Nw.bind(null,w,I,d),[d]),I.getSnapshot!==h||V||Gn!==null&&Gn.memoizedState.tag&1){if(w.flags|=2048,ga(9,Ph.bind(null,w,I,F,h),void 0,null),os===null)throw Error(n(349));Il&30||Km(w,h,F)}return F}function Km(d,h,w){d.flags|=16384,d={getSnapshot:h,value:w},h=hr.updateQueue,h===null?(h={lastEffect:null,stores:null},hr.updateQueue=h,h.stores=[d]):(w=h.stores,w===null?h.stores=[d]:w.push(d))}function Ph(d,h,w,I){h.value=w,h.getSnapshot=I,Pw(h)&&$v(d)}function Nw(d,h,w){return w(function(){Pw(h)&&$v(d)})}function Pw(d){var h=d.getSnapshot;d=d.value;try{var w=h();return!so(d,w)}catch{return!0}}function $v(d){var h=ha(d,1);h!==null&&Ol(h,d,1,-1)}function Gv(d){var h=Xi();return typeof d=="function"&&(d=d()),h.memoizedState=h.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qd,lastRenderedState:d},h.queue=d,d=d.dispatch=Mu.bind(null,hr,d),[h.memoizedState,d]}function ga(d,h,w,I){return d={tag:d,create:h,destroy:w,deps:I,next:null},h=hr.updateQueue,h===null?(h={lastEffect:null,stores:null},hr.updateQueue=h,h.lastEffect=d.next=d):(w=h.lastEffect,w===null?h.lastEffect=d.next=d:(I=w.next,w.next=d,d.next=I,h.lastEffect=d)),d}function kw(){return uo().memoizedState}function Ga(d,h,w,I){var F=Xi();hr.flags|=d,F.memoizedState=ga(1|h,w,void 0,I===void 0?null:I)}function kh(d,h,w,I){var F=uo();I=I===void 0?null:I;var V=void 0;if(Vr!==null){var re=Vr.memoizedState;if(V=re.destroy,I!==null&&Rh(I,re.deps)){F.memoizedState=ga(h,w,V,I);return}}hr.flags|=d,F.memoizedState=ga(1|h,w,V,I)}function xs(d,h){return Ga(8390656,8,d,h)}function Xv(d,h){return kh(2048,8,d,h)}function Kv(d,h){return kh(4,2,d,h)}function Ow(d,h){return kh(4,4,d,h)}function Lw(d,h){if(typeof h=="function")return d=d(),h(d),function(){h(null)};if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function Yv(d,h,w){return w=w!=null?w.concat([d]):null,kh(4,4,Lw.bind(null,h,d),w)}function Ym(){}function Dw(d,h){var w=uo();h=h===void 0?null:h;var I=w.memoizedState;return I!==null&&h!==null&&Rh(h,I[1])?I[0]:(w.memoizedState=[d,h],d)}function fo(d,h){var w=uo();h=h===void 0?null:h;var I=w.memoizedState;return I!==null&&h!==null&&Rh(h,I[1])?I[0]:(d=d(),w.memoizedState=[d,h],d)}function Zm(d,h,w){return Il&21?(so(w,h)||(w=Bn(),hr.lanes|=w,Dh|=w,d.baseState=!0),h):(d.baseState&&(d.baseState=!1,En=!0),d.memoizedState=w)}function QT(d,h){var w=zn;zn=w!==0&&4>w?w:4,d(!0);var I=Eu.transition;Eu.transition={};try{d(!1),h()}finally{zn=w,Eu.transition=I}}function Al(){return uo().memoizedState}function Jm(d,h,w){var I=Xd(d);if(w={lane:I,action:w,hasEagerState:!1,eagerState:null,next:null},Oh(d))Qm(h,w);else if(w=Ch(d,h,w,I),w!==null){var F=po();Ol(w,d,I,F),eg(w,h,I)}}function Mu(d,h,w){var I=Xd(d),F={lane:I,action:w,hasEagerState:!1,eagerState:null,next:null};if(Oh(d))Qm(h,F);else{var V=d.alternate;if(d.lanes===0&&(V===null||V.lanes===0)&&(V=h.lastRenderedReducer,V!==null))try{var re=h.lastRenderedState,xe=V(re,w);if(F.hasEagerState=!0,F.eagerState=xe,so(xe,re)){var Me=h.interleaved;Me===null?(F.next=F,Vv(h)):(F.next=Me.next,Me.next=F),h.interleaved=F;return}}catch{}finally{}w=Ch(d,h,F,I),w!==null&&(F=po(),Ol(w,d,I,F),eg(w,h,I))}}function Oh(d){var h=d.alternate;return d===hr||h!==null&&h===hr}function Qm(d,h){ss=ma=!0;var w=d.pending;w===null?h.next=h:(h.next=w.next,w.next=h),d.pending=h}function eg(d,h,w){if(w&4194240){var I=h.lanes;I&=d.pendingLanes,w|=I,h.lanes=w,Kr(d,w)}}var tg={readContext:lo,useCallback:Gi,useContext:Gi,useEffect:Gi,useImperativeHandle:Gi,useInsertionEffect:Gi,useLayoutEffect:Gi,useMemo:Gi,useReducer:Gi,useRef:Gi,useState:Gi,useDebugValue:Gi,useDeferredValue:Gi,useTransition:Gi,useMutableSource:Gi,useSyncExternalStore:Gi,useId:Gi,unstable_isNewReconciler:!1},Fw={readContext:lo,useCallback:function(d,h){return Xi().memoizedState=[d,h===void 0?null:h],d},useContext:lo,useEffect:xs,useImperativeHandle:function(d,h,w){return w=w!=null?w.concat([d]):null,Ga(4194308,4,Lw.bind(null,h,d),w)},useLayoutEffect:function(d,h){return Ga(4194308,4,d,h)},useInsertionEffect:function(d,h){return Ga(4,2,d,h)},useMemo:function(d,h){var w=Xi();return h=h===void 0?null:h,d=d(),w.memoizedState=[d,h],d},useReducer:function(d,h,w){var I=Xi();return h=w!==void 0?w(h):h,I.memoizedState=I.baseState=h,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:h},I.queue=d,d=d.dispatch=Jm.bind(null,hr,d),[I.memoizedState,d]},useRef:function(d){var h=Xi();return d={current:d},h.memoizedState=d},useState:Gv,useDebugValue:Ym,useDeferredValue:function(d){return Xi().memoizedState=d},useTransition:function(){var d=Gv(!1),h=d[0];return d=QT.bind(null,d[1]),Xi().memoizedState=d,[h,d]},useMutableSource:function(){},useSyncExternalStore:function(d,h,w){var I=hr,F=Xi();if(xr){if(w===void 0)throw Error(n(407));w=w()}else{if(w=h(),os===null)throw Error(n(349));Il&30||Km(I,h,w)}F.memoizedState=w;var V={value:w,getSnapshot:h};return F.queue=V,xs(Nw.bind(null,I,V,d),[d]),I.flags|=2048,ga(9,Ph.bind(null,I,V,w,h),void 0,null),w},useId:function(){var d=Xi(),h=os.identifierPrefix;if(xr){var w=Do,I=ht;w=(I&~(1<<32-Qt(I)-1)).toString(32)+w,h=":"+h+"R"+w,w=xc++,0<w&&(h+="H"+w.toString(32)),h+=":"}else w=Ls++,h=":"+h+"r"+w.toString(32)+":";return d.memoizedState=h},unstable_isNewReconciler:!1},Bw={readContext:lo,useCallback:Dw,useContext:lo,useEffect:Xv,useImperativeHandle:Yv,useInsertionEffect:Kv,useLayoutEffect:Ow,useMemo:fo,useReducer:Nh,useRef:kw,useState:function(){return Nh(qd)},useDebugValue:Ym,useDeferredValue:function(d){var h=uo();return Zm(h,Vr.memoizedState,d)},useTransition:function(){var d=Nh(qd)[0],h=uo().memoizedState;return[d,h]},useMutableSource:qv,useSyncExternalStore:Hv,useId:Al,unstable_isNewReconciler:!1},jw={readContext:lo,useCallback:Dw,useContext:lo,useEffect:Xv,useImperativeHandle:Yv,useInsertionEffect:Kv,useLayoutEffect:Ow,useMemo:fo,useReducer:Rl,useRef:kw,useState:function(){return Rl(qd)},useDebugValue:Ym,useDeferredValue:function(d){var h=uo();return Vr===null?h.memoizedState=d:Zm(h,Vr.memoizedState,d)},useTransition:function(){var d=Rl(qd)[0],h=uo().memoizedState;return[d,h]},useMutableSource:qv,useSyncExternalStore:Hv,useId:Al,unstable_isNewReconciler:!1};function Bo(d,h){if(d&&d.defaultProps){h=J({},h),d=d.defaultProps;for(var w in d)h[w]===void 0&&(h[w]=d[w]);return h}return h}function Lh(d,h,w,I){h=d.memoizedState,w=w(I,h),w=w==null?h:J({},h,w),d.memoizedState=w,d.lanes===0&&(d.updateQueue.baseState=w)}var ng={isMounted:function(d){return(d=d._reactInternals)?ro(d)===d:!1},enqueueSetState:function(d,h,w){d=d._reactInternals;var I=po(),F=Xd(d),V=ar(I,F);V.payload=h,w!=null&&(V.callback=w),h=Tr(d,V,F),h!==null&&(Ol(h,d,F,I),is(h,d,F))},enqueueReplaceState:function(d,h,w){d=d._reactInternals;var I=po(),F=Xd(d),V=ar(I,F);V.tag=1,V.payload=h,w!=null&&(V.callback=w),h=Tr(d,V,F),h!==null&&(Ol(h,d,F,I),is(h,d,F))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var w=po(),I=Xd(d),F=ar(w,I);F.tag=2,h!=null&&(F.callback=h),h=Tr(d,F,I),h!==null&&(Ol(h,d,I,w),is(h,d,I))}};function Uw(d,h,w,I,F,V,re){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(I,V,re):h.prototype&&h.prototype.isPureReactComponent?!ou(w,I)||!ou(F,V):!0}function m(d,h,w){var I=!1,F=wl,V=h.contextType;return typeof V=="object"&&V!==null?V=lo(V):(F=rs(h)?_l:Hi.current,I=h.contextTypes,V=(I=I!=null)?fu(d,F):wl),h=new h(w,V),d.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=ng,d.stateNode=h,h._reactInternals=d,I&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=F,d.__reactInternalMemoizedMaskedChildContext=V),h}function y(d,h,w,I){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(w,I),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(w,I),h.state!==d&&ng.enqueueReplaceState(h,h.state,null)}function C(d,h,w,I){var F=d.stateNode;F.props=w,F.state=d.memoizedState,F.refs={},wn(d);var V=h.contextType;typeof V=="object"&&V!==null?F.context=lo(V):(V=rs(h)?_l:Hi.current,F.context=fu(d,V)),F.state=d.memoizedState,V=h.getDerivedStateFromProps,typeof V=="function"&&(Lh(d,h,V,w),F.state=d.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(h=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),h!==F.state&&ng.enqueueReplaceState(F,F.state,null),zr(d,w,F,I),F.state=d.memoizedState),typeof F.componentDidMount=="function"&&(d.flags|=4194308)}function O(d,h){try{var w="",I=h;do w+=ue(I),I=I.return;while(I);var F=w}catch(V){F=`
Error generating stack: `+V.message+`
`+V.stack}return{value:d,source:h,stack:F,digest:null}}function z(d,h,w){return{value:d,source:null,stack:w??null,digest:h??null}}function K(d,h){try{console.error(h.value)}catch(w){setTimeout(function(){throw w})}}var ye=typeof WeakMap=="function"?WeakMap:Map;function Ae(d,h,w){w=ar(-1,w),w.tag=3,w.payload={element:null};var I=h.value;return w.callback=function(){Gw||(Gw=!0,cC=I),K(d,h)},w}function Xe(d,h,w){w=ar(-1,w),w.tag=3;var I=d.type.getDerivedStateFromError;if(typeof I=="function"){var F=h.value;w.payload=function(){return I(F)},w.callback=function(){K(d,h)}}var V=d.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(w.callback=function(){K(d,h),typeof I!="function"&&($d===null?$d=new Set([this]):$d.add(this));var re=h.stack;this.componentDidCatch(h.value,{componentStack:re!==null?re:""})}),w}function ct(d,h,w){var I=d.pingCache;if(I===null){I=d.pingCache=new ye;var F=new Set;I.set(h,F)}else F=I.get(h),F===void 0&&(F=new Set,I.set(h,F));F.has(w)||(F.add(w),d=oG.bind(null,d,h,w),h.then(d,d))}function Ot(d){do{var h;if((h=d.tag===13)&&(h=d.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return d;d=d.return}while(d!==null);return null}function dn(d,h,w,I,F){return d.mode&1?(d.flags|=65536,d.lanes=F,d):(d===h?d.flags|=65536:(d.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(h=ar(-1,1),h.tag=2,Tr(w,h,1))),w.lanes|=1),d)}var Zt=T.ReactCurrentOwner,En=!1;function St(d,h,w,I){h.child=d===null?Eh(h,null,w,I):gu(h,d.child,w,I)}function Ki(d,h,w,I,F){w=w.render;var V=h.ref;return yc(h,F),I=Ah(d,h,w,I,V,F),w=Wv(),d!==null&&!En?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~F,Tu(d,h,F)):(xr&&w&&Dv(h),h.flags|=1,St(d,h,I,F),h.child)}function ho(d,h,w,I,F){if(d===null){var V=w.type;return typeof V=="function"&&!gC(V)&&V.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(h.tag=15,h.type=V,Ue(d,h,V,I,F)):(d=Qw(w.type,null,I,h,h.mode,F),d.ref=h.ref,d.return=h,h.child=d)}if(V=d.child,!(d.lanes&F)){var re=V.memoizedProps;if(w=w.compare,w=w!==null?w:ou,w(re,I)&&d.ref===h.ref)return Tu(d,h,F)}return h.flags|=1,d=Yd(V,I),d.ref=h.ref,d.return=h,h.child=d}function Ue(d,h,w,I,F){if(d!==null){var V=d.memoizedProps;if(ou(V,I)&&d.ref===h.ref)if(En=!1,h.pendingProps=I=V,(d.lanes&F)!==0)d.flags&131072&&(En=!0);else return h.lanes=d.lanes,Tu(d,h,F)}return xt(d,h,w,I,F)}function ke(d,h,w){var I=h.pendingProps,F=I.children,V=d!==null?d.memoizedState:null;if(I.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null,transitions:null},cr(ig,ya),ya|=w;else{if(!(w&0x40000000))return d=V!==null?V.baseLanes|w:w,h.lanes=h.childLanes=0x40000000,h.memoizedState={baseLanes:d,cachePool:null,transitions:null},h.updateQueue=null,cr(ig,ya),ya|=d,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},I=V!==null?V.baseLanes:w,cr(ig,ya),ya|=I}else V!==null?(I=V.baseLanes|w,h.memoizedState=null):I=w,cr(ig,ya),ya|=I;return St(d,h,F,w),h.child}function qe(d,h){var w=h.ref;(d===null&&w!==null||d!==null&&d.ref!==w)&&(h.flags|=512,h.flags|=2097152)}function xt(d,h,w,I,F){var V=rs(w)?_l:Hi.current;return V=fu(h,V),yc(h,F),w=Ah(d,h,w,I,V,F),I=Wv(),d!==null&&!En?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~F,Tu(d,h,F)):(xr&&I&&Dv(h),h.flags|=1,St(d,h,w,F),h.child)}function Wt(d,h,w,I,F){if(rs(w)){var V=!0;hu(h)}else V=!1;if(yc(h,F),h.stateNode===null)Vw(d,h),m(h,w,I),C(h,w,I,F),I=!0;else if(d===null){var re=h.stateNode,xe=h.memoizedProps;re.props=xe;var Me=re.context,We=w.contextType;typeof We=="object"&&We!==null?We=lo(We):(We=rs(w)?_l:Hi.current,We=fu(h,We));var it=w.getDerivedStateFromProps,st=typeof it=="function"||typeof re.getSnapshotBeforeUpdate=="function";st||typeof re.UNSAFE_componentWillReceiveProps!="function"&&typeof re.componentWillReceiveProps!="function"||(xe!==I||Me!==We)&&y(h,re,I,We),or=!1;var tt=h.memoizedState;re.state=tt,zr(h,I,re,F),Me=h.memoizedState,xe!==I||tt!==Me||gs.current||or?(typeof it=="function"&&(Lh(h,w,it,I),Me=h.memoizedState),(xe=or||Uw(h,w,xe,I,tt,Me,We))?(st||typeof re.UNSAFE_componentWillMount!="function"&&typeof re.componentWillMount!="function"||(typeof re.componentWillMount=="function"&&re.componentWillMount(),typeof re.UNSAFE_componentWillMount=="function"&&re.UNSAFE_componentWillMount()),typeof re.componentDidMount=="function"&&(h.flags|=4194308)):(typeof re.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=I,h.memoizedState=Me),re.props=I,re.state=Me,re.context=We,I=xe):(typeof re.componentDidMount=="function"&&(h.flags|=4194308),I=!1)}else{re=h.stateNode,Zr(d,h),xe=h.memoizedProps,We=h.type===h.elementType?xe:Bo(h.type,xe),re.props=We,st=h.pendingProps,tt=re.context,Me=w.contextType,typeof Me=="object"&&Me!==null?Me=lo(Me):(Me=rs(w)?_l:Hi.current,Me=fu(h,Me));var Ct=w.getDerivedStateFromProps;(it=typeof Ct=="function"||typeof re.getSnapshotBeforeUpdate=="function")||typeof re.UNSAFE_componentWillReceiveProps!="function"&&typeof re.componentWillReceiveProps!="function"||(xe!==st||tt!==Me)&&y(h,re,I,Me),or=!1,tt=h.memoizedState,re.state=tt,zr(h,I,re,F);var zt=h.memoizedState;xe!==st||tt!==zt||gs.current||or?(typeof Ct=="function"&&(Lh(h,w,Ct,I),zt=h.memoizedState),(We=or||Uw(h,w,We,I,tt,zt,Me)||!1)?(it||typeof re.UNSAFE_componentWillUpdate!="function"&&typeof re.componentWillUpdate!="function"||(typeof re.componentWillUpdate=="function"&&re.componentWillUpdate(I,zt,Me),typeof re.UNSAFE_componentWillUpdate=="function"&&re.UNSAFE_componentWillUpdate(I,zt,Me)),typeof re.componentDidUpdate=="function"&&(h.flags|=4),typeof re.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof re.componentDidUpdate!="function"||xe===d.memoizedProps&&tt===d.memoizedState||(h.flags|=4),typeof re.getSnapshotBeforeUpdate!="function"||xe===d.memoizedProps&&tt===d.memoizedState||(h.flags|=1024),h.memoizedProps=I,h.memoizedState=zt),re.props=I,re.state=zt,re.context=Me,I=We):(typeof re.componentDidUpdate!="function"||xe===d.memoizedProps&&tt===d.memoizedState||(h.flags|=4),typeof re.getSnapshotBeforeUpdate!="function"||xe===d.memoizedProps&&tt===d.memoizedState||(h.flags|=1024),I=!1)}return xn(d,h,w,I,V,F)}function xn(d,h,w,I,F,V){qe(d,h);var re=(h.flags&128)!==0;if(!I&&!re)return F&&Ov(h,w,!1),Tu(d,h,V);I=h.stateNode,Zt.current=h;var xe=re&&typeof w.getDerivedStateFromError!="function"?null:I.render();return h.flags|=1,d!==null&&re?(h.child=gu(h,d.child,null,V),h.child=gu(h,null,xe,V)):St(d,h,xe,V),h.memoizedState=I.state,F&&Ov(h,w,!0),h.child}function fn(d){var h=d.stateNode;h.pendingContext?kv(d,h.pendingContext,h.pendingContext!==h.context):h.context&&kv(d,h.context,!1),Ih(d,h.containerInfo)}function $n(d,h,w,I,F){return gc(),jd(F),h.flags|=256,St(d,h,w,I),h.child}var ni={dehydrated:null,treeContext:null,retryLane:0};function qn(d){return{baseLanes:d,cachePool:null,transitions:null}}function Nl(d,h,w){var I=h.pendingProps,F=br.current,V=!1,re=(h.flags&128)!==0,xe;if((xe=re)||(xe=d!==null&&d.memoizedState===null?!1:(F&2)!==0),xe?(V=!0,h.flags&=-129):(d===null||d.memoizedState!==null)&&(F|=1),cr(br,F&1),d===null)return Gm(h),d=h.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(h.mode&1?d.data==="$!"?h.lanes=8:h.lanes=0x40000000:h.lanes=1,null):(re=I.children,d=I.fallback,V?(I=h.mode,V=h.child,re={mode:"hidden",children:re},!(I&1)&&V!==null?(V.childLanes=0,V.pendingProps=re):V=e_(re,I,0,null),d=Uh(d,I,w,null),V.return=h,d.return=h,V.sibling=d,h.child=V,h.child.memoizedState=qn(w),h.memoizedState=ni,d):Zv(h,re));if(F=d.memoizedState,F!==null&&(xe=F.dehydrated,xe!==null))return X8(d,h,re,I,xe,F,w);if(V){V=I.fallback,re=h.mode,F=d.child,xe=F.sibling;var Me={mode:"hidden",children:I.children};return!(re&1)&&h.child!==F?(I=h.child,I.childLanes=0,I.pendingProps=Me,h.deletions=null):(I=Yd(F,Me),I.subtreeFlags=F.subtreeFlags&0xe00000),xe!==null?V=Yd(xe,V):(V=Uh(V,re,w,null),V.flags|=2),V.return=h,I.return=h,I.sibling=V,h.child=I,I=V,V=h.child,re=d.child.memoizedState,re=re===null?qn(w):{baseLanes:re.baseLanes|w,cachePool:null,transitions:re.transitions},V.memoizedState=re,V.childLanes=d.childLanes&~w,h.memoizedState=ni,I}return V=d.child,d=V.sibling,I=Yd(V,{mode:"visible",children:I.children}),!(h.mode&1)&&(I.lanes=w),I.return=h,I.sibling=null,d!==null&&(w=h.deletions,w===null?(h.deletions=[d],h.flags|=16):w.push(d)),h.child=I,h.memoizedState=null,I}function Zv(d,h){return h=e_({mode:"visible",children:h},d.mode,0,null),h.return=d,d.child=h}function zw(d,h,w,I){return I!==null&&jd(I),gu(h,d.child,null,w),d=Zv(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function X8(d,h,w,I,F,V,re){if(w)return h.flags&256?(h.flags&=-257,I=z(Error(n(422))),zw(d,h,re,I)):h.memoizedState!==null?(h.child=d.child,h.flags|=128,null):(V=I.fallback,F=h.mode,I=e_({mode:"visible",children:I.children},F,0,null),V=Uh(V,F,re,null),V.flags|=2,I.return=h,V.return=h,I.sibling=V,h.child=I,h.mode&1&&gu(h,d.child,null,re),h.child.memoizedState=qn(re),h.memoizedState=ni,V);if(!(h.mode&1))return zw(d,h,re,null);if(F.data==="$!"){if(I=F.nextSibling&&F.nextSibling.dataset,I)var xe=I.dgst;return I=xe,V=Error(n(419)),I=z(V,I,void 0),zw(d,h,re,I)}if(xe=(re&d.childLanes)!==0,En||xe){if(I=os,I!==null){switch(re&-re){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:F=32;break;case 0x20000000:F=0x10000000;break;default:F=0}F=F&(I.suspendedLanes|re)?0:F,F!==0&&F!==V.retryLane&&(V.retryLane=F,ha(d,F),Ol(I,d,F,-1))}return mC(),I=z(Error(n(421))),zw(d,h,re,I)}return F.data==="$?"?(h.flags|=128,h.child=d.child,h=aG.bind(null,d),F._reactRetry=h,null):(d=V.treeContext,vs=xl(F.nextSibling),$i=h,xr=!0,Fo=null,d!==null&&(ys[ki++]=ht,ys[ki++]=Do,ys[ki++]=mu,ht=d.id,Do=d.overflow,mu=h),h=Zv(h,I.children),h.flags|=4096,h)}function EO(d,h,w){d.lanes|=h;var I=d.alternate;I!==null&&(I.lanes|=h),Th(d.return,h,w)}function eC(d,h,w,I,F){var V=d.memoizedState;V===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:I,tail:w,tailMode:F}:(V.isBackwards=h,V.rendering=null,V.renderingStartTime=0,V.last=I,V.tail=w,V.tailMode=F)}function MO(d,h,w){var I=h.pendingProps,F=I.revealOrder,V=I.tail;if(St(d,h,I.children,w),I=br.current,I&2)I=I&1|2,h.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&EO(d,w,h);else if(d.tag===19)EO(d,w,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}I&=1}if(cr(br,I),!(h.mode&1))h.memoizedState=null;else switch(F){case"forwards":for(w=h.child,F=null;w!==null;)d=w.alternate,d!==null&&pa(d)===null&&(F=w),w=w.sibling;w=F,w===null?(F=h.child,h.child=null):(F=w.sibling,w.sibling=null),eC(h,!1,F,w,V);break;case"backwards":for(w=null,F=h.child,h.child=null;F!==null;){if(d=F.alternate,d!==null&&pa(d)===null){h.child=F;break}d=F.sibling,F.sibling=w,w=F,F=d}eC(h,!0,w,null,V);break;case"together":eC(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Vw(d,h){!(h.mode&1)&&d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2)}function Tu(d,h,w){if(d!==null&&(h.dependencies=d.dependencies),Dh|=h.lanes,!(w&h.childLanes))return null;if(d!==null&&h.child!==d.child)throw Error(n(153));if(h.child!==null){for(d=h.child,w=Yd(d,d.pendingProps),h.child=w,w.return=h;d.sibling!==null;)d=d.sibling,w=w.sibling=Yd(d,d.pendingProps),w.return=h;w.sibling=null}return h.child}function K8(d,h,w){switch(h.tag){case 3:fn(h),gc();break;case 5:_u(h);break;case 1:rs(h.type)&&hu(h);break;case 4:Ih(h,h.stateNode.containerInfo);break;case 10:var I=h.type._context,F=h.memoizedProps.value;cr(yu,I._currentValue),I._currentValue=F;break;case 13:if(I=h.memoizedState,I!==null)return I.dehydrated!==null?(cr(br,br.current&1),h.flags|=128,null):w&h.child.childLanes?Nl(d,h,w):(cr(br,br.current&1),d=Tu(d,h,w),d!==null?d.sibling:null);cr(br,br.current&1);break;case 19:if(I=(w&h.childLanes)!==0,d.flags&128){if(I)return MO(d,h,w);h.flags|=128}if(F=h.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),cr(br,br.current),I)break;return null;case 22:case 23:return h.lanes=0,ke(d,h,w)}return Tu(d,h,w)}var TO,tC,CO,IO;TO=function(d,h){for(var w=h.child;w!==null;){if(w.tag===5||w.tag===6)d.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},tC=function(){},CO=function(d,h,w,I){var F=d.memoizedProps;if(F!==I){d=h.stateNode,ti(co.current);var V=null;switch(w){case"input":F=se(d,F),I=se(d,I),V=[];break;case"select":F=J({},F,{value:void 0}),I=J({},I,{value:void 0}),V=[];break;case"textarea":F=G(d,F),I=G(d,I),V=[];break;default:typeof F.onClick!="function"&&typeof I.onClick=="function"&&(d.onclick=yh)}Ee(w,I);var re;w=null;for(We in F)if(!I.hasOwnProperty(We)&&F.hasOwnProperty(We)&&F[We]!=null)if(We==="style"){var xe=F[We];for(re in xe)xe.hasOwnProperty(re)&&(w||(w={}),w[re]="")}else We!=="dangerouslySetInnerHTML"&&We!=="children"&&We!=="suppressContentEditableWarning"&&We!=="suppressHydrationWarning"&&We!=="autoFocus"&&(i.hasOwnProperty(We)?V||(V=[]):(V=V||[]).push(We,null));for(We in I){var Me=I[We];if(xe=F?.[We],I.hasOwnProperty(We)&&Me!==xe&&(Me!=null||xe!=null))if(We==="style")if(xe){for(re in xe)!xe.hasOwnProperty(re)||Me&&Me.hasOwnProperty(re)||(w||(w={}),w[re]="");for(re in Me)Me.hasOwnProperty(re)&&xe[re]!==Me[re]&&(w||(w={}),w[re]=Me[re])}else w||(V||(V=[]),V.push(We,w)),w=Me;else We==="dangerouslySetInnerHTML"?(Me=Me?Me.__html:void 0,xe=xe?xe.__html:void 0,Me!=null&&xe!==Me&&(V=V||[]).push(We,Me)):We==="children"?typeof Me!="string"&&typeof Me!="number"||(V=V||[]).push(We,""+Me):We!=="suppressContentEditableWarning"&&We!=="suppressHydrationWarning"&&(i.hasOwnProperty(We)?(Me!=null&&We==="onScroll"&&dr("scroll",d),V||xe===Me||(V=[])):(V=V||[]).push(We,Me))}w&&(V=V||[]).push("style",w);var We=V;(h.updateQueue=We)&&(h.flags|=4)}},IO=function(d,h,w,I){w!==I&&(h.flags|=4)};function Jv(d,h){if(!xr)switch(d.tailMode){case"hidden":h=d.tail;for(var w=null;h!==null;)h.alternate!==null&&(w=h),h=h.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var I=null;w!==null;)w.alternate!==null&&(I=w),w=w.sibling;I===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:I.sibling=null}}function Ds(d){var h=d.alternate!==null&&d.alternate.child===d.child,w=0,I=0;if(h)for(var F=d.child;F!==null;)w|=F.lanes|F.childLanes,I|=F.subtreeFlags&0xe00000,I|=F.flags&0xe00000,F.return=d,F=F.sibling;else for(F=d.child;F!==null;)w|=F.lanes|F.childLanes,I|=F.subtreeFlags,I|=F.flags,F.return=d,F=F.sibling;return d.subtreeFlags|=I,d.childLanes=w,h}function Y8(d,h,w){var I=h.pendingProps;switch(El(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ds(h),null;case 1:return rs(h.type)&&vh(),Ds(h),null;case 3:return I=h.stateNode,vc(),fr(gs),fr(Hi),$a(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(d===null||d.child===null)&&(Bd(h)?h.flags|=4:d===null||d.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Fo!==null&&(fC(Fo),Fo=null))),tC(d,h),Ds(h),null;case 5:Vd(h);var F=ti(Cl.current);if(w=h.type,d!==null&&h.stateNode!=null)CO(d,h,w,I,F),d.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!I){if(h.stateNode===null)throw Error(n(166));return Ds(h),null}if(d=ti(co.current),Bd(h)){I=h.stateNode,w=h.type;var V=h.memoizedProps;switch(I[yi]=h,I[Fd]=V,d=(h.mode&1)!==0,w){case"dialog":dr("cancel",I),dr("close",I);break;case"iframe":case"object":case"embed":dr("load",I);break;case"video":case"audio":for(F=0;F<pc.length;F++)dr(pc[F],I);break;case"source":dr("error",I);break;case"img":case"image":case"link":dr("error",I),dr("load",I);break;case"details":dr("toggle",I);break;case"input":$e(I,V),dr("invalid",I);break;case"select":I._wrapperState={wasMultiple:!!V.multiple},dr("invalid",I);break;case"textarea":me(I,V),dr("invalid",I)}Ee(w,V),F=null;for(var re in V)if(V.hasOwnProperty(re)){var xe=V[re];re==="children"?typeof xe=="string"?I.textContent!==xe&&(V.suppressHydrationWarning!==!0&&gh(I.textContent,xe,d),F=["children",xe]):typeof xe=="number"&&I.textContent!==""+xe&&(V.suppressHydrationWarning!==!0&&gh(I.textContent,xe,d),F=["children",""+xe]):i.hasOwnProperty(re)&&xe!=null&&re==="onScroll"&&dr("scroll",I)}switch(w){case"input":Fe(I),le(I,V,!0);break;case"textarea":Fe(I),Te(I);break;case"select":case"option":break;default:typeof V.onClick=="function"&&(I.onclick=yh)}I=F,h.updateQueue=I,I!==null&&(h.flags|=4)}else{re=F.nodeType===9?F:F.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=Oe(w)),d==="http://www.w3.org/1999/xhtml"?w==="script"?(d=re.createElement("div"),d.innerHTML="<script></script>",d=d.removeChild(d.firstChild)):typeof I.is=="string"?d=re.createElement(w,{is:I.is}):(d=re.createElement(w),w==="select"&&(re=d,I.multiple?re.multiple=!0:I.size&&(re.size=I.size))):d=re.createElementNS(d,w),d[yi]=h,d[Fd]=I,TO(d,h,!1,!1),h.stateNode=d;e:{switch(re=He(w,I),w){case"dialog":dr("cancel",d),dr("close",d),F=I;break;case"iframe":case"object":case"embed":dr("load",d),F=I;break;case"video":case"audio":for(F=0;F<pc.length;F++)dr(pc[F],d);F=I;break;case"source":dr("error",d),F=I;break;case"img":case"image":case"link":dr("error",d),dr("load",d),F=I;break;case"details":dr("toggle",d),F=I;break;case"input":$e(d,I),F=se(d,I),dr("invalid",d);break;case"option":F=I;break;case"select":d._wrapperState={wasMultiple:!!I.multiple},F=J({},I,{value:void 0}),dr("invalid",d);break;case"textarea":me(d,I),F=G(d,I),dr("invalid",d);break;default:F=I}Ee(w,F),xe=F;for(V in xe)if(xe.hasOwnProperty(V)){var Me=xe[V];V==="style"?Bt(d,Me):V==="dangerouslySetInnerHTML"?(Me=Me?Me.__html:void 0,Me!=null&&at(d,Me)):V==="children"?typeof Me=="string"?(w!=="textarea"||Me!=="")&&Ft(d,Me):typeof Me=="number"&&Ft(d,""+Me):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(i.hasOwnProperty(V)?Me!=null&&V==="onScroll"&&dr("scroll",d):Me!=null&&M(d,V,Me,re))}switch(w){case"input":Fe(d),le(d,I,!1);break;case"textarea":Fe(d),Te(d);break;case"option":I.value!=null&&d.setAttribute("value",""+we(I.value));break;case"select":d.multiple=!!I.multiple,V=I.value,V!=null?Q(d,!!I.multiple,V,!1):I.defaultValue!=null&&Q(d,!!I.multiple,I.defaultValue,!0);break;default:typeof F.onClick=="function"&&(d.onclick=yh)}switch(w){case"button":case"input":case"select":case"textarea":I=!!I.autoFocus;break e;case"img":I=!0;break e;default:I=!1}}I&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Ds(h),null;case 6:if(d&&h.stateNode!=null)IO(d,h,d.memoizedProps,I);else{if(typeof I!="string"&&h.stateNode===null)throw Error(n(166));if(w=ti(Cl.current),ti(co.current),Bd(h)){if(I=h.stateNode,w=h.memoizedProps,I[yi]=h,(V=I.nodeValue!==w)&&(d=$i,d!==null))switch(d.tag){case 3:gh(I.nodeValue,w,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&gh(I.nodeValue,w,(d.mode&1)!==0)}V&&(h.flags|=4)}else I=(w.nodeType===9?w:w.ownerDocument).createTextNode(I),I[yi]=h,h.stateNode=I}return Ds(h),null;case 13:if(fr(br),I=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(xr&&vs!==null&&h.mode&1&&!(h.flags&128))jv(),gc(),h.flags|=98560,V=!1;else if(V=Bd(h),I!==null&&I.dehydrated!==null){if(d===null){if(!V)throw Error(n(318));if(V=h.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(n(317));V[yi]=h}else gc(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;Ds(h),V=!1}else Fo!==null&&(fC(Fo),Fo=null),V=!0;if(!V)return h.flags&65536?h:null}return h.flags&128?(h.lanes=w,h):(I=I!==null,I!==(d!==null&&d.memoizedState!==null)&&I&&(h.child.flags|=8192,h.mode&1&&(d===null||br.current&1?Yi===0&&(Yi=3):mC())),h.updateQueue!==null&&(h.flags|=4),Ds(h),null);case 4:return vc(),tC(d,h),d===null&&Od(h.stateNode.containerInfo),Ds(h),null;case 10:return Mh(h.type._context),Ds(h),null;case 17:return rs(h.type)&&vh(),Ds(h),null;case 19:if(fr(br),V=h.memoizedState,V===null)return Ds(h),null;if(I=(h.flags&128)!==0,re=V.rendering,re===null)if(I)Jv(V,!1);else{if(Yi!==0||d!==null&&d.flags&128)for(d=h.child;d!==null;){if(re=pa(d),re!==null){for(h.flags|=128,Jv(V,!1),I=re.updateQueue,I!==null&&(h.updateQueue=I,h.flags|=4),h.subtreeFlags=0,I=w,w=h.child;w!==null;)V=w,d=I,V.flags&=0xe00002,re=V.alternate,re===null?(V.childLanes=0,V.lanes=d,V.child=null,V.subtreeFlags=0,V.memoizedProps=null,V.memoizedState=null,V.updateQueue=null,V.dependencies=null,V.stateNode=null):(V.childLanes=re.childLanes,V.lanes=re.lanes,V.child=re.child,V.subtreeFlags=0,V.deletions=null,V.memoizedProps=re.memoizedProps,V.memoizedState=re.memoizedState,V.updateQueue=re.updateQueue,V.type=re.type,d=re.dependencies,V.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),w=w.sibling;return cr(br,br.current&1|2),h.child}d=d.sibling}V.tail!==null&&Le()>sg&&(h.flags|=128,I=!0,Jv(V,!1),h.lanes=4194304)}else{if(!I)if(d=pa(re),d!==null){if(h.flags|=128,I=!0,w=d.updateQueue,w!==null&&(h.updateQueue=w,h.flags|=4),Jv(V,!0),V.tail===null&&V.tailMode==="hidden"&&!re.alternate&&!xr)return Ds(h),null}else 2*Le()-V.renderingStartTime>sg&&w!==0x40000000&&(h.flags|=128,I=!0,Jv(V,!1),h.lanes=4194304);V.isBackwards?(re.sibling=h.child,h.child=re):(w=V.last,w!==null?w.sibling=re:h.child=re,V.last=re)}return V.tail!==null?(h=V.tail,V.rendering=h,V.tail=h.sibling,V.renderingStartTime=Le(),h.sibling=null,w=br.current,cr(br,I?w&1|2:w&1),h):(Ds(h),null);case 22:case 23:return pC(),I=h.memoizedState!==null,d!==null&&d.memoizedState!==null!==I&&(h.flags|=8192),I&&h.mode&1?ya&0x40000000&&(Ds(h),h.subtreeFlags&6&&(h.flags|=8192)):Ds(h),null;case 24:return null;case 25:return null}throw Error(n(156,h.tag))}function Z8(d,h){switch(El(h),h.tag){case 1:return rs(h.type)&&vh(),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return vc(),fr(gs),fr(Hi),$a(),d=h.flags,d&65536&&!(d&128)?(h.flags=d&-65537|128,h):null;case 5:return Vd(h),null;case 13:if(fr(br),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(n(340));gc()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return fr(br),null;case 4:return vc(),null;case 10:return Mh(h.type._context),null;case 22:case 23:return pC(),null;case 24:return null;default:return null}}var Ww=!1,Fs=!1,J8=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function rg(d,h){var w=d.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(I){ri(d,h,I)}else w.current=null}function nC(d,h,w){try{w()}catch(I){ri(d,h,I)}}var RO=!1;function Q8(d,h){if(Dd=Ao,d=Dr(),Ri(d)){if("selectionStart"in d)var w={start:d.selectionStart,end:d.selectionEnd};else e:{w=(w=d.ownerDocument)&&w.defaultView||window;var I=w.getSelection&&w.getSelection();if(I&&I.rangeCount!==0){w=I.anchorNode;var F=I.anchorOffset,V=I.focusNode;I=I.focusOffset;try{w.nodeType,V.nodeType}catch{w=null;break e}var re=0,xe=-1,Me=-1,We=0,it=0,st=d,tt=null;t:for(;;){for(var Ct;st!==w||F!==0&&st.nodeType!==3||(xe=re+F),st!==V||I!==0&&st.nodeType!==3||(Me=re+I),st.nodeType===3&&(re+=st.nodeValue.length),(Ct=st.firstChild)!==null;)tt=st,st=Ct;for(;;){if(st===d)break t;if(tt===w&&++We===F&&(xe=re),tt===V&&++it===I&&(Me=re),(Ct=st.nextSibling)!==null)break;st=tt,tt=st.parentNode}st=Ct}w=xe===-1||Me===-1?null:{start:xe,end:Me}}else w=null}w=w||{start:0,end:0}}else w=null;for(Cv={focusedElem:d,selectionRange:w},Ao=!1,Dt=h;Dt!==null;)if(h=Dt,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,Dt=d;else for(;Dt!==null;){h=Dt;try{var zt=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(zt!==null){var Vt=zt.memoizedProps,vi=zt.memoizedState,De=h.stateNode,Re=De.getSnapshotBeforeUpdate(h.elementType===h.type?Vt:Bo(h.type,Vt),vi);De.__reactInternalSnapshotBeforeUpdate=Re}break;case 3:var Be=h.stateNode.containerInfo;Be.nodeType===1?Be.textContent="":Be.nodeType===9&&Be.documentElement&&Be.removeChild(Be.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ut){ri(h,h.return,ut)}if(d=h.sibling,d!==null){d.return=h.return,Dt=d;break}Dt=h.return}return zt=RO,RO=!1,zt}function Qv(d,h,w){var I=h.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var F=I=I.next;do{if((F.tag&d)===d){var V=F.destroy;F.destroy=void 0,V!==void 0&&nC(h,w,V)}F=F.next}while(F!==I)}}function qw(d,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var w=h=h.next;do{if((w.tag&d)===d){var I=w.create;w.destroy=I()}w=w.next}while(w!==h)}}function rC(d){var h=d.ref;if(h!==null){var w=d.stateNode;switch(d.tag){case 5:d=w;break;default:d=w}typeof h=="function"?h(d):h.current=d}}function AO(d){var h=d.alternate;h!==null&&(d.alternate=null,AO(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&(delete h[yi],delete h[Fd],delete h[du],delete h[Um],delete h[zm])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function NO(d){return d.tag===5||d.tag===3||d.tag===4}function PO(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||NO(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function iC(d,h,w){var I=d.tag;if(I===5||I===6)d=d.stateNode,h?w.nodeType===8?w.parentNode.insertBefore(d,h):w.insertBefore(d,h):(w.nodeType===8?(h=w.parentNode,h.insertBefore(d,w)):(h=w,h.appendChild(d)),w=w._reactRootContainer,w!=null||h.onclick!==null||(h.onclick=yh));else if(I!==4&&(d=d.child,d!==null))for(iC(d,h,w),d=d.sibling;d!==null;)iC(d,h,w),d=d.sibling}function sC(d,h,w){var I=d.tag;if(I===5||I===6)d=d.stateNode,h?w.insertBefore(d,h):w.appendChild(d);else if(I!==4&&(d=d.child,d!==null))for(sC(d,h,w),d=d.sibling;d!==null;)sC(d,h,w),d=d.sibling}var bs=null,Pl=!1;function Hd(d,h,w){for(w=w.child;w!==null;)kO(d,h,w),w=w.sibling}function kO(d,h,w){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(Ht,w)}catch{}switch(w.tag){case 5:Fs||rg(w,h);case 6:var I=bs,F=Pl;bs=null,Hd(d,h,w),bs=I,Pl=F,bs!==null&&(Pl?(d=bs,w=w.stateNode,d.nodeType===8?d.parentNode.removeChild(w):d.removeChild(w)):bs.removeChild(w.stateNode));break;case 18:bs!==null&&(Pl?(d=bs,w=w.stateNode,d.nodeType===8?jm(d.parentNode,w):d.nodeType===1&&jm(d,w),sh(d)):jm(bs,w.stateNode));break;case 4:I=bs,F=Pl,bs=w.stateNode.containerInfo,Pl=!0,Hd(d,h,w),bs=I,Pl=F;break;case 0:case 11:case 14:case 15:if(!Fs&&(I=w.updateQueue,I!==null&&(I=I.lastEffect,I!==null))){F=I=I.next;do{var V=F,re=V.destroy;V=V.tag,re!==void 0&&(V&2||V&4)&&nC(w,h,re),F=F.next}while(F!==I)}Hd(d,h,w);break;case 1:if(!Fs&&(rg(w,h),I=w.stateNode,typeof I.componentWillUnmount=="function"))try{I.props=w.memoizedProps,I.state=w.memoizedState,I.componentWillUnmount()}catch(xe){ri(w,h,xe)}Hd(d,h,w);break;case 21:Hd(d,h,w);break;case 22:w.mode&1?(Fs=(I=Fs)||w.memoizedState!==null,Hd(d,h,w),Fs=I):Hd(d,h,w);break;default:Hd(d,h,w)}}function OO(d){var h=d.updateQueue;if(h!==null){d.updateQueue=null;var w=d.stateNode;w===null&&(w=d.stateNode=new J8),h.forEach(function(I){var F=lG.bind(null,d,I);w.has(I)||(w.add(I),I.then(F,F))})}}function kl(d,h){var w=h.deletions;if(w!==null)for(var I=0;I<w.length;I++){var F=w[I];try{var V=d,re=h,xe=re;e:for(;xe!==null;){switch(xe.tag){case 5:bs=xe.stateNode,Pl=!1;break e;case 3:bs=xe.stateNode.containerInfo,Pl=!0;break e;case 4:bs=xe.stateNode.containerInfo,Pl=!0;break e}xe=xe.return}if(bs===null)throw Error(n(160));kO(V,re,F),bs=null,Pl=!1;var Me=F.alternate;Me!==null&&(Me.return=null),F.return=null}catch(We){ri(F,h,We)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)LO(h,d),h=h.sibling}function LO(d,h){var w=d.alternate,I=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(kl(h,d),bc(d),I&4){try{Qv(3,d,d.return),qw(3,d)}catch(Vt){ri(d,d.return,Vt)}try{Qv(5,d,d.return)}catch(Vt){ri(d,d.return,Vt)}}break;case 1:kl(h,d),bc(d),I&512&&w!==null&&rg(w,w.return);break;case 5:if(kl(h,d),bc(d),I&512&&w!==null&&rg(w,w.return),d.flags&32){var F=d.stateNode;try{Ft(F,"")}catch(Vt){ri(d,d.return,Vt)}}if(I&4&&(F=d.stateNode,F!=null)){var V=d.memoizedProps,re=w!==null?w.memoizedProps:V,xe=d.type,Me=d.updateQueue;if(d.updateQueue=null,Me!==null)try{xe==="input"&&V.type==="radio"&&V.name!=null&&je(F,V),He(xe,re);var We=He(xe,V);for(re=0;re<Me.length;re+=2){var it=Me[re],st=Me[re+1];it==="style"?Bt(F,st):it==="dangerouslySetInnerHTML"?at(F,st):it==="children"?Ft(F,st):M(F,it,st,We)}switch(xe){case"input":Ze(F,V);break;case"textarea":he(F,V);break;case"select":var tt=F._wrapperState.wasMultiple;F._wrapperState.wasMultiple=!!V.multiple;var Ct=V.value;Ct!=null?Q(F,!!V.multiple,Ct,!1):tt!==!!V.multiple&&(V.defaultValue!=null?Q(F,!!V.multiple,V.defaultValue,!0):Q(F,!!V.multiple,V.multiple?[]:"",!1))}F[Fd]=V}catch(Vt){ri(d,d.return,Vt)}}break;case 6:if(kl(h,d),bc(d),I&4){if(d.stateNode===null)throw Error(n(162));F=d.stateNode,V=d.memoizedProps;try{F.nodeValue=V}catch(Vt){ri(d,d.return,Vt)}}break;case 3:if(kl(h,d),bc(d),I&4&&w!==null&&w.memoizedState.isDehydrated)try{sh(h.containerInfo)}catch(Vt){ri(d,d.return,Vt)}break;case 4:kl(h,d),bc(d);break;case 13:kl(h,d),bc(d),F=d.child,F.flags&8192&&(V=F.memoizedState!==null,F.stateNode.isHidden=V,!V||F.alternate!==null&&F.alternate.memoizedState!==null||(lC=Le())),I&4&&OO(d);break;case 22:if(it=w!==null&&w.memoizedState!==null,d.mode&1?(Fs=(We=Fs)||it,kl(h,d),Fs=We):kl(h,d),bc(d),I&8192){if(We=d.memoizedState!==null,(d.stateNode.isHidden=We)&&!it&&d.mode&1)for(Dt=d,it=d.child;it!==null;){for(st=Dt=it;Dt!==null;){switch(tt=Dt,Ct=tt.child,tt.tag){case 0:case 11:case 14:case 15:Qv(4,tt,tt.return);break;case 1:rg(tt,tt.return);var zt=tt.stateNode;if(typeof zt.componentWillUnmount=="function"){I=tt,w=tt.return;try{h=I,zt.props=h.memoizedProps,zt.state=h.memoizedState,zt.componentWillUnmount()}catch(Vt){ri(I,w,Vt)}}break;case 5:rg(tt,tt.return);break;case 22:if(tt.memoizedState!==null){BO(st);continue}}Ct!==null?(Ct.return=tt,Dt=Ct):BO(st)}it=it.sibling}e:for(it=null,st=d;;){if(st.tag===5){if(it===null){it=st;try{F=st.stateNode,We?(V=F.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none"):(xe=st.stateNode,Me=st.memoizedProps.style,re=Me!=null&&Me.hasOwnProperty("display")?Me.display:null,xe.style.display=kt("display",re))}catch(Vt){ri(d,d.return,Vt)}}}else if(st.tag===6){if(it===null)try{st.stateNode.nodeValue=We?"":st.memoizedProps}catch(Vt){ri(d,d.return,Vt)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===d)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===d)break e;for(;st.sibling===null;){if(st.return===null||st.return===d)break e;it===st&&(it=null),st=st.return}it===st&&(it=null),st.sibling.return=st.return,st=st.sibling}}break;case 19:kl(h,d),bc(d),I&4&&OO(d);break;case 21:break;default:kl(h,d),bc(d)}}function bc(d){var h=d.flags;if(h&2){try{e:{for(var w=d.return;w!==null;){if(NO(w)){var I=w;break e}w=w.return}throw Error(n(160))}switch(I.tag){case 5:var F=I.stateNode;I.flags&32&&(Ft(F,""),I.flags&=-33);var V=PO(d);sC(d,V,F);break;case 3:case 4:var re=I.stateNode.containerInfo,xe=PO(d);iC(d,xe,re);break;default:throw Error(n(161))}}catch(Me){ri(d,d.return,Me)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function eG(d,h,w){Dt=d,DO(d)}function DO(d,h,w){for(var I=(d.mode&1)!==0;Dt!==null;){var F=Dt,V=F.child;if(F.tag===22&&I){var re=F.memoizedState!==null||Ww;if(!re){var xe=F.alternate,Me=xe!==null&&xe.memoizedState!==null||Fs;xe=Ww;var We=Fs;if(Ww=re,(Fs=Me)&&!We)for(Dt=F;Dt!==null;)re=Dt,Me=re.child,re.tag===22&&re.memoizedState!==null?jO(F):Me!==null?(Me.return=re,Dt=Me):jO(F);for(;V!==null;)Dt=V,DO(V),V=V.sibling;Dt=F,Ww=xe,Fs=We}FO(d)}else F.subtreeFlags&8772&&V!==null?(V.return=F,Dt=V):FO(d)}}function FO(d){for(;Dt!==null;){var h=Dt;if(h.flags&8772){var w=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Fs||qw(5,h);break;case 1:var I=h.stateNode;if(h.flags&4&&!Fs)if(w===null)I.componentDidMount();else{var F=h.elementType===h.type?w.memoizedProps:Bo(h.type,w.memoizedProps);I.componentDidUpdate(F,w.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var V=h.updateQueue;V!==null&&zd(h,V,I);break;case 3:var re=h.updateQueue;if(re!==null){if(w=null,h.child!==null)switch(h.child.tag){case 5:w=h.child.stateNode;break;case 1:w=h.child.stateNode}zd(h,re,w)}break;case 5:var xe=h.stateNode;if(w===null&&h.flags&4){w=xe;var Me=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":Me.autoFocus&&w.focus();break;case"img":Me.src&&(w.src=Me.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var We=h.alternate;if(We!==null){var it=We.memoizedState;if(it!==null){var st=it.dehydrated;st!==null&&sh(st)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Fs||h.flags&512&&rC(h)}catch(tt){ri(h,h.return,tt)}}if(h===d){Dt=null;break}if(w=h.sibling,w!==null){w.return=h.return,Dt=w;break}Dt=h.return}}function BO(d){for(;Dt!==null;){var h=Dt;if(h===d){Dt=null;break}var w=h.sibling;if(w!==null){w.return=h.return,Dt=w;break}Dt=h.return}}function jO(d){for(;Dt!==null;){var h=Dt;try{switch(h.tag){case 0:case 11:case 15:var w=h.return;try{qw(4,h)}catch(Me){ri(h,w,Me)}break;case 1:var I=h.stateNode;if(typeof I.componentDidMount=="function"){var F=h.return;try{I.componentDidMount()}catch(Me){ri(h,F,Me)}}var V=h.return;try{rC(h)}catch(Me){ri(h,V,Me)}break;case 5:var re=h.return;try{rC(h)}catch(Me){ri(h,re,Me)}}}catch(Me){ri(h,h.return,Me)}if(h===d){Dt=null;break}var xe=h.sibling;if(xe!==null){xe.return=h.return,Dt=xe;break}Dt=h.return}}var tG=Math.ceil,Hw=T.ReactCurrentDispatcher,oC=T.ReactCurrentOwner,Xa=T.ReactCurrentBatchConfig,Zn=0,os=null,Oi=null,ws=0,ya=0,ig=Ur(0),Yi=0,ex=null,Dh=0,$w=0,aC=0,tx=null,jo=null,lC=0,sg=1/0,Cu=null,Gw=!1,cC=null,$d=null,Xw=!1,Gd=null,Kw=0,nx=0,uC=null,Yw=-1,Zw=0;function po(){return Zn&6?Le():Yw!==-1?Yw:Yw=Le()}function Xd(d){return d.mode&1?Zn&2&&ws!==0?ws&-ws:JT.transition!==null?(Zw===0&&(Zw=Bn()),Zw):(d=zn,d!==0||(d=window.event,d=d===void 0?16:gw(d.type)),d):1}function Ol(d,h,w,I){if(50<nx)throw nx=0,uC=null,Error(n(185));Ii(d,w,I),(!(Zn&2)||d!==os)&&(d===os&&(!(Zn&2)&&($w|=w),Yi===4&&Kd(d,ws)),Uo(d,I),w===1&&Zn===0&&!(h.mode&1)&&(sg=Le()+500,bh&&qa()))}function Uo(d,h){var w=d.callbackNode;Ci(d,h);var I=mi(d,d===os?ws:0);if(I===0)w!==null&&ae(w),d.callbackNode=null,d.callbackPriority=0;else if(h=I&-I,d.callbackPriority!==h){if(w!=null&&ae(w),h===1)d.tag===0?Aw(zO.bind(null,d)):wh(zO.bind(null,d)),ZT(function(){!(Zn&6)&&qa()}),w=null;else{switch(As(I)){case 1:w=rt;break;case 4:w=mt;break;case 16:w=_t;break;case 0x20000000:w=Kt;break;default:w=_t}w=KO(w,UO.bind(null,d))}d.callbackPriority=h,d.callbackNode=w}}function UO(d,h){if(Yw=-1,Zw=0,Zn&6)throw Error(n(327));var w=d.callbackNode;if(og()&&d.callbackNode!==w)return null;var I=mi(d,d===os?ws:0);if(I===0)return null;if(I&30||I&d.expiredLanes||h)h=Jw(d,I);else{h=I;var F=Zn;Zn|=2;var V=WO();(os!==d||ws!==h)&&(Cu=null,sg=Le()+500,Bh(d,h));do try{iG();break}catch(xe){VO(d,xe)}while(!0);xu(),Hw.current=V,Zn=F,Oi!==null?h=0:(os=null,ws=0,h=Yi)}if(h!==0){if(h===2&&(F=ja(d),F!==0&&(I=F,h=dC(d,F))),h===1)throw w=ex,Bh(d,0),Kd(d,I),Uo(d,Le()),w;if(h===6)Kd(d,I);else{if(F=d.current.alternate,!(I&30)&&!nG(F)&&(h=Jw(d,I),h===2&&(V=ja(d),V!==0&&(I=V,h=dC(d,V))),h===1))throw w=ex,Bh(d,0),Kd(d,I),Uo(d,Le()),w;switch(d.finishedWork=F,d.finishedLanes=I,h){case 0:case 1:throw Error(n(345));case 2:jh(d,jo,Cu);break;case 3:if(Kd(d,I),(I&0x7c00000)===I&&(h=lC+500-Le(),10<h)){if(mi(d,0)!==0)break;if(F=d.suspendedLanes,(F&I)!==I){po(),d.pingedLanes|=d.suspendedLanes&F;break}d.timeoutHandle=Rv(jh.bind(null,d,jo,Cu),h);break}jh(d,jo,Cu);break;case 4:if(Kd(d,I),(I&4194240)===I)break;for(h=d.eventTimes,F=-1;0<I;){var re=31-Qt(I);V=1<<re,re=h[re],re>F&&(F=re),I&=~V}if(I=F,I=Le()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*tG(I/1960))-I,10<I){d.timeoutHandle=Rv(jh.bind(null,d,jo,Cu),I);break}jh(d,jo,Cu);break;case 5:jh(d,jo,Cu);break;default:throw Error(n(329))}}}return Uo(d,Le()),d.callbackNode===w?UO.bind(null,d):null}function dC(d,h){var w=tx;return d.current.memoizedState.isDehydrated&&(Bh(d,h).flags|=256),d=Jw(d,h),d!==2&&(h=jo,jo=w,h!==null&&fC(h)),d}function fC(d){jo===null?jo=d:jo.push.apply(jo,d)}function nG(d){for(var h=d;;){if(h.flags&16384){var w=h.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var I=0;I<w.length;I++){var F=w[I],V=F.getSnapshot;F=F.value;try{if(!so(V(),F))return!1}catch{return!1}}}if(w=h.child,h.subtreeFlags&16384&&w!==null)w.return=h,h=w;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Kd(d,h){for(h&=~aC,h&=~$w,d.suspendedLanes|=h,d.pingedLanes&=~h,d=d.expirationTimes;0<h;){var w=31-Qt(h),I=1<<w;d[w]=-1,h&=~I}}function zO(d){if(Zn&6)throw Error(n(327));og();var h=mi(d,0);if(!(h&1))return Uo(d,Le()),null;var w=Jw(d,h);if(d.tag!==0&&w===2){var I=ja(d);I!==0&&(h=I,w=dC(d,I))}if(w===1)throw w=ex,Bh(d,0),Kd(d,h),Uo(d,Le()),w;if(w===6)throw Error(n(345));return d.finishedWork=d.current.alternate,d.finishedLanes=h,jh(d,jo,Cu),Uo(d,Le()),null}function hC(d,h){var w=Zn;Zn|=1;try{return d(h)}finally{Zn=w,Zn===0&&(sg=Le()+500,bh&&qa())}}function Fh(d){Gd!==null&&Gd.tag===0&&!(Zn&6)&&og();var h=Zn;Zn|=1;var w=Xa.transition,I=zn;try{if(Xa.transition=null,zn=1,d)return d()}finally{zn=I,Xa.transition=w,Zn=h,!(Zn&6)&&qa()}}function pC(){ya=ig.current,fr(ig)}function Bh(d,h){d.finishedWork=null,d.finishedLanes=0;var w=d.timeoutHandle;if(w!==-1&&(d.timeoutHandle=-1,Av(w)),Oi!==null)for(w=Oi.return;w!==null;){var I=w;switch(El(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&vh();break;case 3:vc(),fr(gs),fr(Hi),$a();break;case 5:Vd(I);break;case 4:vc();break;case 13:fr(br);break;case 19:fr(br);break;case 10:Mh(I.type._context);break;case 22:case 23:pC()}w=w.return}if(os=d,Oi=d=Yd(d.current,null),ws=ya=h,Yi=0,ex=null,aC=$w=Dh=0,jo=tx=null,Tl!==null){for(h=0;h<Tl.length;h++)if(w=Tl[h],I=w.interleaved,I!==null){w.interleaved=null;var F=I.next,V=w.pending;if(V!==null){var re=V.next;V.next=F,I.next=re}w.pending=I}Tl=null}return d}function VO(d,h){do{var w=Oi;try{if(xu(),Su.current=tg,ma){for(var I=hr.memoizedState;I!==null;){var F=I.queue;F!==null&&(F.pending=null),I=I.next}ma=!1}if(Il=0,Gn=Vr=hr=null,ss=!1,xc=0,oC.current=null,w===null||w.return===null){Yi=1,ex=h,Oi=null;break}e:{var V=d,re=w.return,xe=w,Me=h;if(h=ws,xe.flags|=32768,Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var We=Me,it=xe,st=it.tag;if(!(it.mode&1)&&(st===0||st===11||st===15)){var tt=it.alternate;tt?(it.updateQueue=tt.updateQueue,it.memoizedState=tt.memoizedState,it.lanes=tt.lanes):(it.updateQueue=null,it.memoizedState=null)}var Ct=Ot(re);if(Ct!==null){Ct.flags&=-257,dn(Ct,re,xe,V,h),Ct.mode&1&&ct(V,We,h),h=Ct,Me=We;var zt=h.updateQueue;if(zt===null){var Vt=new Set;Vt.add(Me),h.updateQueue=Vt}else zt.add(Me);break e}else{if(!(h&1)){ct(V,We,h),mC();break e}Me=Error(n(426))}}else if(xr&&xe.mode&1){var vi=Ot(re);if(vi!==null){!(vi.flags&65536)&&(vi.flags|=256),dn(vi,re,xe,V,h),jd(O(Me,xe));break e}}V=Me=O(Me,xe),Yi!==4&&(Yi=2),tx===null?tx=[V]:tx.push(V),V=re;do{switch(V.tag){case 3:V.flags|=65536,h&=-h,V.lanes|=h;var De=Ae(V,Me,h);bu(V,De);break e;case 1:xe=Me;var Re=V.type,Be=V.stateNode;if(!(V.flags&128)&&(typeof Re.getDerivedStateFromError=="function"||Be!==null&&typeof Be.componentDidCatch=="function"&&($d===null||!$d.has(Be)))){V.flags|=65536,h&=-h,V.lanes|=h;var ut=Xe(V,xe,h);bu(V,ut);break e}}V=V.return}while(V!==null)}HO(w)}catch($t){h=$t,Oi===w&&w!==null&&(Oi=w=w.return);continue}break}while(!0)}function WO(){var d=Hw.current;return Hw.current=tg,d===null?tg:d}function mC(){(Yi===0||Yi===3||Yi===2)&&(Yi=4),os===null||!(Dh&0xfffffff)&&!($w&0xfffffff)||Kd(os,ws)}function Jw(d,h){var w=Zn;Zn|=2;var I=WO();(os!==d||ws!==h)&&(Cu=null,Bh(d,h));do try{rG();break}catch(F){VO(d,F)}while(!0);if(xu(),Zn=w,Hw.current=I,Oi!==null)throw Error(n(261));return os=null,ws=0,Yi}function rG(){for(;Oi!==null;)qO(Oi)}function iG(){for(;Oi!==null&&!Ne();)qO(Oi)}function qO(d){var h=XO(d.alternate,d,ya);d.memoizedProps=d.pendingProps,h===null?HO(d):Oi=h,oC.current=null}function HO(d){var h=d;do{var w=h.alternate;if(d=h.return,h.flags&32768){if(w=Z8(w,h),w!==null){w.flags&=32767,Oi=w;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Yi=6,Oi=null;return}}else if(w=Y8(w,h,ya),w!==null){Oi=w;return}if(h=h.sibling,h!==null){Oi=h;return}Oi=h=d}while(h!==null);Yi===0&&(Yi=5)}function jh(d,h,w){var I=zn,F=Xa.transition;try{Xa.transition=null,zn=1,sG(d,h,w,I)}finally{Xa.transition=F,zn=I}return null}function sG(d,h,w,I){do og();while(Gd!==null);if(Zn&6)throw Error(n(327));w=d.finishedWork;var F=d.finishedLanes;if(w===null)return null;if(d.finishedWork=null,d.finishedLanes=0,w===d.current)throw Error(n(177));d.callbackNode=null,d.callbackPriority=0;var V=w.lanes|w.childLanes;if(Wi(d,V),d===os&&(Oi=os=null,ws=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||Xw||(Xw=!0,KO(_t,function(){return og(),null})),V=(w.flags&15990)!==0,w.subtreeFlags&15990||V){V=Xa.transition,Xa.transition=null;var re=zn;zn=1;var xe=Zn;Zn|=4,oC.current=null,Q8(d,w),LO(w,d),Ai(Cv),Ao=!!Dd,Cv=Dd=null,d.current=w,eG(w),ze(),Zn=xe,zn=re,Xa.transition=V}else d.current=w;if(Xw&&(Xw=!1,Gd=d,Kw=F),V=d.pendingLanes,V===0&&($d=null),Ut(w.stateNode),Uo(d,Le()),h!==null)for(I=d.onRecoverableError,w=0;w<h.length;w++)F=h[w],I(F.value,{componentStack:F.stack,digest:F.digest});if(Gw)throw Gw=!1,d=cC,cC=null,d;return Kw&1&&d.tag!==0&&og(),V=d.pendingLanes,V&1?d===uC?nx++:(nx=0,uC=d):nx=0,qa(),null}function og(){if(Gd!==null){var d=As(Kw),h=Xa.transition,w=zn;try{if(Xa.transition=null,zn=16>d?16:d,Gd===null)var I=!1;else{if(d=Gd,Gd=null,Kw=0,Zn&6)throw Error(n(331));var F=Zn;for(Zn|=4,Dt=d.current;Dt!==null;){var V=Dt,re=V.child;if(Dt.flags&16){var xe=V.deletions;if(xe!==null){for(var Me=0;Me<xe.length;Me++){var We=xe[Me];for(Dt=We;Dt!==null;){var it=Dt;switch(it.tag){case 0:case 11:case 15:Qv(8,it,V)}var st=it.child;if(st!==null)st.return=it,Dt=st;else for(;Dt!==null;){it=Dt;var tt=it.sibling,Ct=it.return;if(AO(it),it===We){Dt=null;break}if(tt!==null){tt.return=Ct,Dt=tt;break}Dt=Ct}}}var zt=V.alternate;if(zt!==null){var Vt=zt.child;if(Vt!==null){zt.child=null;do{var vi=Vt.sibling;Vt.sibling=null,Vt=vi}while(Vt!==null)}}Dt=V}}if(V.subtreeFlags&2064&&re!==null)re.return=V,Dt=re;else e:for(;Dt!==null;){if(V=Dt,V.flags&2048)switch(V.tag){case 0:case 11:case 15:Qv(9,V,V.return)}var De=V.sibling;if(De!==null){De.return=V.return,Dt=De;break e}Dt=V.return}}var Re=d.current;for(Dt=Re;Dt!==null;){re=Dt;var Be=re.child;if(re.subtreeFlags&2064&&Be!==null)Be.return=re,Dt=Be;else e:for(re=Re;Dt!==null;){if(xe=Dt,xe.flags&2048)try{switch(xe.tag){case 0:case 11:case 15:qw(9,xe)}}catch($t){ri(xe,xe.return,$t)}if(xe===re){Dt=null;break e}var ut=xe.sibling;if(ut!==null){ut.return=xe.return,Dt=ut;break e}Dt=xe.return}}if(Zn=F,qa(),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(Ht,d)}catch{}I=!0}return I}finally{zn=w,Xa.transition=h}}return!1}function $O(d,h,w){h=O(w,h),h=Ae(d,h,1),d=Tr(d,h,1),h=po(),d!==null&&(Ii(d,1,h),Uo(d,h))}function ri(d,h,w){if(d.tag===3)$O(d,d,w);else for(;h!==null;){if(h.tag===3){$O(h,d,w);break}else if(h.tag===1){var I=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&($d===null||!$d.has(I))){d=O(w,d),d=Xe(h,d,1),h=Tr(h,d,1),d=po(),h!==null&&(Ii(h,1,d),Uo(h,d));break}}h=h.return}}function oG(d,h,w){var I=d.pingCache;I!==null&&I.delete(h),h=po(),d.pingedLanes|=d.suspendedLanes&w,os===d&&(ws&w)===w&&(Yi===4||Yi===3&&(ws&0x7c00000)===ws&&500>Le()-lC?Bh(d,0):aC|=w),Uo(d,h)}function GO(d,h){h===0&&(d.mode&1?(h=Fn,Fn<<=1,!(Fn&0x7c00000)&&(Fn=4194304)):h=1);var w=po();d=ha(d,h),d!==null&&(Ii(d,h,w),Uo(d,w))}function aG(d){var h=d.memoizedState,w=0;h!==null&&(w=h.retryLane),GO(d,w)}function lG(d,h){var w=0;switch(d.tag){case 13:var I=d.stateNode,F=d.memoizedState;F!==null&&(w=F.retryLane);break;case 19:I=d.stateNode;break;default:throw Error(n(314))}I!==null&&I.delete(h),GO(d,w)}var XO;XO=function(d,h,w){if(d!==null)if(d.memoizedProps!==h.pendingProps||gs.current)En=!0;else{if(!(d.lanes&w)&&!(h.flags&128))return En=!1,K8(d,h,w);En=!!(d.flags&131072)}else En=!1,xr&&h.flags&1048576&&Lv(h,Hm,h.index);switch(h.lanes=0,h.tag){case 2:var I=h.type;Vw(d,h),d=h.pendingProps;var F=fu(h,Hi.current);yc(h,w),F=Ah(null,h,I,d,F,w);var V=Wv();return h.flags|=1,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,rs(I)?(V=!0,hu(h)):V=!1,h.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,wn(h),F.updater=ng,h.stateNode=F,F._reactInternals=h,C(h,I,d,w),h=xn(null,h,I,!0,V,w)):(h.tag=0,xr&&V&&Dv(h),St(null,h,F,w),h=h.child),h;case 16:I=h.elementType;e:{switch(Vw(d,h),d=h.pendingProps,F=I._init,I=F(I._payload),h.type=I,F=h.tag=uG(I),d=Bo(I,d),F){case 0:h=xt(null,h,I,d,w);break e;case 1:h=Wt(null,h,I,d,w);break e;case 11:h=Ki(null,h,I,d,w);break e;case 14:h=ho(null,h,I,Bo(I.type,d),w);break e}throw Error(n(306,I,""))}return h;case 0:return I=h.type,F=h.pendingProps,F=h.elementType===I?F:Bo(I,F),xt(d,h,I,F,w);case 1:return I=h.type,F=h.pendingProps,F=h.elementType===I?F:Bo(I,F),Wt(d,h,I,F,w);case 3:e:{if(fn(h),d===null)throw Error(n(387));I=h.pendingProps,V=h.memoizedState,F=V.element,Zr(d,h),zr(h,I,null,w);var re=h.memoizedState;if(I=re.element,V.isDehydrated)if(V={element:I,isDehydrated:!1,cache:re.cache,pendingSuspenseBoundaries:re.pendingSuspenseBoundaries,transitions:re.transitions},h.updateQueue.baseState=V,h.memoizedState=V,h.flags&256){F=O(Error(n(423)),h),h=$n(d,h,I,w,F);break e}else if(I!==F){F=O(Error(n(424)),h),h=$n(d,h,I,w,F);break e}else for(vs=xl(h.stateNode.containerInfo.firstChild),$i=h,xr=!0,Fo=null,w=Eh(h,null,I,w),h.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(gc(),I===F){h=Tu(d,h,w);break e}St(d,h,I,w)}h=h.child}return h;case 5:return _u(h),d===null&&Gm(h),I=h.type,F=h.pendingProps,V=d!==null?d.memoizedProps:null,re=F.children,Iv(I,F)?re=null:V!==null&&Iv(I,V)&&(h.flags|=32),qe(d,h),St(d,h,re,w),h.child;case 6:return d===null&&Gm(h),null;case 13:return Nl(d,h,w);case 4:return Ih(h,h.stateNode.containerInfo),I=h.pendingProps,d===null?h.child=gu(h,null,I,w):St(d,h,I,w),h.child;case 11:return I=h.type,F=h.pendingProps,F=h.elementType===I?F:Bo(I,F),Ki(d,h,I,F,w);case 7:return St(d,h,h.pendingProps,w),h.child;case 8:return St(d,h,h.pendingProps.children,w),h.child;case 12:return St(d,h,h.pendingProps.children,w),h.child;case 10:e:{if(I=h.type._context,F=h.pendingProps,V=h.memoizedProps,re=F.value,cr(yu,I._currentValue),I._currentValue=re,V!==null)if(so(V.value,re)){if(V.children===F.children&&!gs.current){h=Tu(d,h,w);break e}}else for(V=h.child,V!==null&&(V.return=h);V!==null;){var xe=V.dependencies;if(xe!==null){re=V.child;for(var Me=xe.firstContext;Me!==null;){if(Me.context===I){if(V.tag===1){Me=ar(-1,w&-w),Me.tag=2;var We=V.updateQueue;if(We!==null){We=We.shared;var it=We.pending;it===null?Me.next=Me:(Me.next=it.next,it.next=Me),We.pending=Me}}V.lanes|=w,Me=V.alternate,Me!==null&&(Me.lanes|=w),Th(V.return,w,h),xe.lanes|=w;break}Me=Me.next}}else if(V.tag===10)re=V.type===h.type?null:V.child;else if(V.tag===18){if(re=V.return,re===null)throw Error(n(341));re.lanes|=w,xe=re.alternate,xe!==null&&(xe.lanes|=w),Th(re,w,h),re=V.sibling}else re=V.child;if(re!==null)re.return=V;else for(re=V;re!==null;){if(re===h){re=null;break}if(V=re.sibling,V!==null){V.return=re.return,re=V;break}re=re.return}V=re}St(d,h,F.children,w),h=h.child}return h;case 9:return F=h.type,I=h.pendingProps.children,yc(h,w),F=lo(F),I=I(F),h.flags|=1,St(d,h,I,w),h.child;case 14:return I=h.type,F=Bo(I,h.pendingProps),F=Bo(I.type,F),ho(d,h,I,F,w);case 15:return Ue(d,h,h.type,h.pendingProps,w);case 17:return I=h.type,F=h.pendingProps,F=h.elementType===I?F:Bo(I,F),Vw(d,h),h.tag=1,rs(I)?(d=!0,hu(h)):d=!1,yc(h,w),m(h,I,F),C(h,I,F,w),xn(null,h,I,!0,d,w);case 19:return MO(d,h,w);case 22:return ke(d,h,w)}throw Error(n(156,h.tag))};function KO(d,h){return wd(d,h)}function cG(d,h,w,I){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ka(d,h,w,I){return new cG(d,h,w,I)}function gC(d){return d=d.prototype,!(!d||!d.isReactComponent)}function uG(d){if(typeof d=="function")return gC(d)?1:0;if(d!=null){if(d=d.$$typeof,d===j)return 11;if(d===$)return 14}return 2}function Yd(d,h){var w=d.alternate;return w===null?(w=Ka(d.tag,h,d.key,d.mode),w.elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=h,w.type=d.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=d.flags&0xe00000,w.childLanes=d.childLanes,w.lanes=d.lanes,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,h=d.dependencies,w.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w}function Qw(d,h,w,I,F,V){var re=2;if(I=d,typeof d=="function")gC(d)&&(re=1);else if(typeof d=="string")re=5;else e:switch(d){case D:return Uh(w.children,F,V,h);case L:re=8,F|=8;break;case R:return d=Ka(12,w,h,F|2),d.elementType=R,d.lanes=V,d;case U:return d=Ka(13,w,h,F),d.elementType=U,d.lanes=V,d;case B:return d=Ka(19,w,h,F),d.elementType=B,d.lanes=V,d;case te:return e_(w,F,V,h);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case A:re=10;break e;case P:re=9;break e;case j:re=11;break e;case $:re=14;break e;case q:re=16,I=null;break e}throw Error(n(130,d==null?d:typeof d,""))}return h=Ka(re,w,h,F),h.elementType=d,h.type=I,h.lanes=V,h}function Uh(d,h,w,I){return d=Ka(7,d,I,h),d.lanes=w,d}function e_(d,h,w,I){return d=Ka(22,d,I,h),d.elementType=te,d.lanes=w,d.stateNode={isHidden:!1},d}function yC(d,h,w){return d=Ka(6,d,null,h),d.lanes=w,d}function vC(d,h,w){return h=Ka(4,d.children!==null?d.children:[],d.key,h),h.lanes=w,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}function dG(d,h,w,I,F){this.tag=h,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ns(0),this.expirationTimes=ns(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ns(0),this.identifierPrefix=I,this.onRecoverableError=F,this.mutableSourceEagerHydrationData=null}function xC(d,h,w,I,F,V,re,xe,Me){return d=new dG(d,h,w,xe,Me),h===1?(h=1,V===!0&&(h|=8)):h=0,V=Ka(3,null,null,h),d.current=V,V.stateNode=d,V.memoizedState={element:I,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},wn(V),d}function fG(d,h,w){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:I==null?null:""+I,children:d,containerInfo:h,implementation:w}}function YO(d){if(!d)return wl;d=d._reactInternals;e:{if(ro(d)!==d||d.tag!==1)throw Error(n(170));var h=d;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(rs(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(n(171))}if(d.tag===1){var w=d.type;if(rs(w))return xh(d,w,h)}return h}function ZO(d,h,w,I,F,V,re,xe,Me){return d=xC(w,I,!0,d,F,V,re,xe,Me),d.context=YO(null),w=d.current,I=po(),F=Xd(w),V=ar(I,F),V.callback=h??null,Tr(w,V,F),d.current.lanes=F,Ii(d,F,I),Uo(d,I),d}function t_(d,h,w,I){var F=h.current,V=po(),re=Xd(F);return w=YO(w),h.context===null?h.context=w:h.pendingContext=w,h=ar(V,re),h.payload={element:d},I=I===void 0?null:I,I!==null&&(h.callback=I),d=Tr(F,h,re),d!==null&&(Ol(d,F,re,V),is(d,F,re)),re}function n_(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function JO(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var w=d.retryLane;d.retryLane=w!==0&&w<h?w:h}}function bC(d,h){JO(d,h),(d=d.alternate)&&JO(d,h)}function hG(){return null}var QO=typeof reportError=="function"?reportError:function(d){console.error(d)};function wC(d){this._internalRoot=d}r_.prototype.render=wC.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(n(409));t_(d,h,null,null)},r_.prototype.unmount=wC.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;Fh(function(){t_(null,d,null,null)}),h[ao]=null}};function r_(d){this._internalRoot=d}r_.prototype.unstable_scheduleHydration=function(d){if(d){var h=um();d={blockedOn:null,target:d,priority:h};for(var w=0;w<lc.length&&h!==0&&h<lc[w].priority;w++);lc.splice(w,0,d),w===0&&hm(d)}};function _C(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function i_(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function eL(){}function pG(d,h,w,I,F){if(F){if(typeof I=="function"){var V=I;I=function(){var We=n_(re);V.call(We)}}var re=ZO(h,I,d,0,null,!1,!1,"",eL);return d._reactRootContainer=re,d[ao]=re.current,Od(d.nodeType===8?d.parentNode:d),Fh(),re}for(;F=d.lastChild;)d.removeChild(F);if(typeof I=="function"){var xe=I;I=function(){var We=n_(Me);xe.call(We)}}var Me=xC(d,0,!1,null,null,!1,!1,"",eL);return d._reactRootContainer=Me,d[ao]=Me.current,Od(d.nodeType===8?d.parentNode:d),Fh(function(){t_(h,Me,w,I)}),Me}function s_(d,h,w,I,F){var V=w._reactRootContainer;if(V){var re=V;if(typeof F=="function"){var xe=F;F=function(){var Me=n_(re);xe.call(Me)}}t_(h,re,d,F)}else re=pG(w,h,d,F,I);return n_(re)}nh=function(d){switch(d.tag){case 3:var h=d.stateNode;if(h.current.memoizedState.isDehydrated){var w=mn(h.pendingLanes);w!==0&&(Kr(h,w|1),Uo(h,Le()),!(Zn&6)&&(sg=Le()+500,qa()))}break;case 13:Fh(function(){var I=ha(d,1);if(I!==null){var F=po();Ol(I,d,1,F)}}),bC(d,1)}},uv=function(d){if(d.tag===13){var h=ha(d,0x8000000);if(h!==null){var w=po();Ol(h,d,0x8000000,w)}bC(d,0x8000000)}},mw=function(d){if(d.tag===13){var h=Xd(d),w=ha(d,h);if(w!==null){var I=po();Ol(w,d,h,I)}bC(d,h)}},um=function(){return zn},dm=function(d,h){var w=zn;try{return zn=d,h()}finally{zn=w}},nt=function(d,h,w){switch(h){case"input":if(Ze(d,w),h=w.name,w.type==="radio"&&h!=null){for(w=d;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<w.length;h++){var I=w[h];if(I!==d&&I.form===d.form){var F=Vm(I);if(!F)throw Error(n(90));ve(I),Ze(I,F)}}}break;case"textarea":he(d,w);break;case"select":h=w.value,h!=null&&Q(d,!!w.multiple,h,!1)}},Dn=hC,sr=Fh;var mG={usingClientEntryPoint:!1,Events:[bl,Yr,Vm,pt,Xt,hC]},rx={findFiberByHostInstance:mc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gG={bundleType:rx.bundleType,version:rx.version,rendererPackageName:rx.rendererPackageName,rendererConfig:rx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=xd(d),d===null?null:d.stateNode},findFiberByHostInstance:rx.findFiberByHostInstance||hG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var o_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!o_.isDisabled&&o_.supportsFiber)try{Ht=o_.inject(gG),lt=o_}catch{}}return zo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mG,zo.createPortal=function(d,h){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_C(h))throw Error(n(200));return fG(d,h,null,w)},zo.createRoot=function(d,h){if(!_C(d))throw Error(n(299));var w=!1,I="",F=QO;return h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(I=h.identifierPrefix),h.onRecoverableError!==void 0&&(F=h.onRecoverableError)),h=xC(d,1,!1,null,null,w,!1,I,F),d[ao]=h.current,Od(d.nodeType===8?d.parentNode:d),new wC(h)},zo.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(n(188)):(d=Object.keys(d).join(","),Error(n(268,d)));return d=xd(h),d=d===null?null:d.stateNode,d},zo.flushSync=function(d){return Fh(d)},zo.hydrate=function(d,h,w){if(!i_(h))throw Error(n(200));return s_(null,d,h,!0,w)},zo.hydrateRoot=function(d,h,w){if(!_C(d))throw Error(n(405));var I=w!=null&&w.hydratedSources||null,F=!1,V="",re=QO;if(w!=null&&(w.unstable_strictMode===!0&&(F=!0),w.identifierPrefix!==void 0&&(V=w.identifierPrefix),w.onRecoverableError!==void 0&&(re=w.onRecoverableError)),h=ZO(h,null,d,1,w??null,F,!1,V,re),d[ao]=h.current,Od(d),I)for(d=0;d<I.length;d++)w=I[d],F=w._getVersion,F=F(w._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[w,F]:h.mutableSourceEagerHydrationData.push(w,F);return new r_(h)},zo.render=function(d,h,w){if(!i_(h))throw Error(n(200));return s_(null,d,h,!1,w)},zo.unmountComponentAtNode=function(d){if(!i_(d))throw Error(n(40));return d._reactRootContainer?(Fh(function(){s_(null,null,d,!1,function(){d._reactRootContainer=null,d[ao]=null})}),!0):!1},zo.unstable_batchedUpdates=hC,zo.unstable_renderSubtreeIntoContainer=function(d,h,w,I){if(!i_(w))throw Error(n(200));if(d==null||d._reactInternals===void 0)throw Error(n(38));return s_(d,h,w,!1,I)},zo.version="18.3.1-next-f1338f8080-20240426",zo}var RL;function m4(){if(RL)return LC.exports;RL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),LC.exports=Y9(),LC.exports}var bM=m4();const Rx=typeof window<"u"?X.useLayoutEffect:X.useEffect;function BC(t){const e=X.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function Z9(t,e,n={},r={}){const i=X.useRef(typeof IntersectionObserver=="function"),s=X.useRef(null);return X.useEffect(()=>{if(!(!t.current||!i.current||r.disabled))return s.current=new IntersectionObserver(([o])=>{e(o)},n),s.current.observe(t.current),()=>{var o;(o=s.current)==null||o.disconnect()}},[e,n,r.disabled,t]),s.current}function J9(t){const e=X.useRef(null);return X.useImperativeHandle(t,()=>e.current,[]),e}function Q9(t,e){const n=al(),[r,i]=X.useState(!1),s=X.useRef(!1),o=J9(e),{activeProps:a=()=>({className:"active"}),inactiveProps:l=()=>({}),activeOptions:c,to:u,preload:f,preloadDelay:p,hashScrollIntoView:g,replace:x,startTransition:S,resetScroll:_,viewTransition:b,children:E,target:M,disabled:T,style:k,className:N,onClick:D,onFocus:L,onMouseEnter:R,onMouseLeave:A,onTouchStart:P,ignoreBlocker:j,...U}=t,{params:B,search:$,hash:q,state:te,mask:W,reloadDocument:Z,...J}=U,Y=X.useMemo(()=>{try{return new URL(`${u}`),"external"}catch{}return"internal"},[u]),oe=Hs({select:fe=>fe.location.search,structuralSharing:!0});t={from:Pf({strict:!1,select:fe=>fe.pathname}),...t};const ie=X.useMemo(()=>n.buildLocation(t),[n,t,oe]),ue=X.useMemo(()=>t.reloadDocument?!1:f??n.options.defaultPreload,[n.options.defaultPreload,f,t.reloadDocument]),de=p??n.options.defaultPreloadDelay??0,be=Hs({select:fe=>{if(c?.exact){if(!a9(fe.location.pathname,ie.pathname,n.basepath))return!1}else{const Q=S1(fe.location.pathname,n.basepath).split("/");if(!S1(ie.pathname,n.basepath).split("/").every((he,Te)=>he===Q[Te]))return!1}return(c?.includeSearch??!0)&&!sy(fe.location.search,ie.search,{partial:!c?.exact,ignoreUndefined:!c?.explicitUndefined})?!1:c?.includeHash?fe.location.hash===ie.hash:!0}}),we=X.useCallback(()=>{n.preloadRoute(t).catch(fe=>{console.warn(fe),console.warn(i9)})},[t,n]),Ce=X.useCallback(fe=>{fe?.isIntersecting&&we()},[we]);if(Z9(o,Ce,{rootMargin:"100px"},{disabled:!!T||ue!=="viewport"}),Rx(()=>{s.current||!T&&ue==="render"&&(we(),s.current=!0)},[T,we,ue]),Y==="external")return{...J,ref:o,type:Y,href:u,...E&&{children:E},...M&&{target:M},...T&&{disabled:T},...k&&{style:k},...N&&{className:N},...D&&{onClick:D},...L&&{onFocus:L},...R&&{onMouseEnter:R},...A&&{onMouseLeave:A},...P&&{onTouchStart:P}};const Ie=fe=>{if(!T&&!t7(fe)&&!fe.defaultPrevented&&(!M||M==="_self")&&fe.button===0){fe.preventDefault(),bM.flushSync(()=>{i(!0)});const Q=n.subscribe("onResolved",()=>{Q(),i(!1)});return n.navigate({...t,replace:x,resetScroll:_,hashScrollIntoView:g,startTransition:S,viewTransition:b,ignoreBlocker:j})}},Fe=fe=>{T||ue&&we()},ve=Fe,_e=fe=>{if(T)return;const Q=fe.target||{};if(ue){if(Q.preloadTimeout)return;Q.preloadTimeout=setTimeout(()=>{Q.preloadTimeout=null,we()},de)}},se=fe=>{if(T)return;const Q=fe.target||{};Q.preloadTimeout&&(clearTimeout(Q.preloadTimeout),Q.preloadTimeout=null)},$e=fe=>Q=>{var G;(G=Q.persist)==null||G.call(Q),fe.filter(Boolean).forEach(me=>{Q.defaultPrevented||me(Q)})},je=be?gp(a,{})??{}:{},Ze=be?{}:gp(l,{}),le=[N,je.className,Ze.className].filter(Boolean).join(" "),ge={...k,...je.style,...Ze.style};return{...J,...je,...Ze,href:T?void 0:ie.maskedLocation?n.history.createHref(ie.maskedLocation.href):n.history.createHref(ie.href),ref:o,onClick:$e([D,Ie]),onFocus:$e([L,Fe]),onMouseEnter:$e([R,_e]),onMouseLeave:$e([A,se]),onTouchStart:$e([P,ve]),disabled:!!T,target:M,...Object.keys(ge).length&&{style:ge},...le&&{className:le},...T&&{role:"link","aria-disabled":!0},...be&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}function g4(t){return X.forwardRef(function(n,r){return v.jsx(e7,{...n,_asChild:t,ref:r})})}const e7=X.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:i,ref:s,...o}=Q9(r,e),a=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof n>"u"&&delete o.disabled,X.createElement(n||"a",{...o,ref:s},a)});function t7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function n7(){const t=al(),e=X.useRef({router:t,mounted:!1}),n=Hs({select:({isLoading:f})=>f}),[r,i]=X.useState(!1),s=Hs({select:f=>f.matches.some(p=>p.status==="pending"),structuralSharing:!0}),o=BC(n),a=n||r||s,l=BC(a),c=n||s,u=BC(c);return t.isServer||(t.startReactTransition=f=>{i(!0),X.startTransition(()=>{f(),i(!1)})}),X.useEffect(()=>{const f=t.history.subscribe(t.load),p=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return yp(t.latestLocation.href)!==yp(p.href)&&t.commitLocation({...p,replace:!0}),()=>{f()}},[t,t.history]),Rx(()=>{if(typeof window<"u"&&t.clientSsr||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(p){console.error(p)}})()},[t]),Rx(()=>{o&&!n&&t.emit({type:"onLoad",...iy(t.state)})},[o,t,n]),Rx(()=>{u&&!c&&t.emit({type:"onBeforeRouteMount",...iy(t.state)})},[c,u,t]),Rx(()=>{l&&!a&&(t.emit({type:"onResolved",...iy(t.state)}),t.__store.setState(f=>({...f,status:"idle",resolvedLocation:f.location})))},[a,l,t]),null}function r7(){const t=al(),e=t.options.defaultPendingComponent?v.jsx(t.options.defaultPendingComponent,{}):null,n=t.isServer||typeof document<"u"&&t.clientSsr?PS:X.Suspense,r=v.jsxs(n,{fallback:e,children:[v.jsx(n7,{}),v.jsx(i7,{})]});return t.options.InnerWrap?v.jsx(t.options.InnerWrap,{children:r}):r}function i7(){const t=Hs({select:n=>{var r;return(r=n.matches[0])==null?void 0:r.id}}),e=Hs({select:n=>n.loadedAt});return v.jsx(xM.Provider,{value:t,children:v.jsx(o2,{getResetKey:()=>e,errorComponent:vM,onCatch:n=>{n.message||n.toString()},children:t?v.jsx(p4,{matchId:t}):null})})}function s7(){const t=al();return Hs({select:e=>{var n;return[e.location.href,(n=e.resolvedLocation)==null?void 0:n.href,e.status]},structuralSharing:!0}),X.useCallback(e=>{const{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s,...o}=e;return t.matchRoute(o,{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s})},[t])}const y4=["component","errorComponent","pendingComponent","notFoundComponent"];function o7(t){var e;for(const n of y4)if((e=t.options[n])!=null&&e.preload)return!0;return!1}function jC(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new I1("Async validation not supported");if(n.issues)throw new I1(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function a7(t){return new l7(t)}class l7{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startReactTransition=n=>n(),this.update=n=>{var r;n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options;this.options={...this.options,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(s=>[encodeURIComponent(s),s])):void 0,(!this.basepath||n.basepath&&n.basepath!==i.basepath)&&(n.basepath===void 0||n.basepath===""||n.basepath==="/"?this.basepath="/":this.basepath=`/${o9(n.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?v9({initialEntries:[this.basepath||"/"]}):y9()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new SN(u7(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}}),q9(this)),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const n=this.options.notFoundRoute;n&&(n.init({originalIndex:0x174876e7ff,defaultSsr:this.options.defaultSsr}),this.routesById[n.id]=n);const r=o=>{o.forEach((a,l)=>{a.init({originalIndex:l,defaultSsr:this.options.defaultSsr});const c=this.routesById[a.id];if(Hl(!c,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const f=yp(a.fullPath);(!this.routesByPath[f]||a.fullPath.endsWith("/"))&&(this.routesByPath[f]=a)}const u=a.children;u?.length&&r(u)})};r([this.routeTree]);const i=[];Object.values(this.routesById).forEach((o,a)=>{var l;if(o.isRoot||!o.path)return;const c=i2(o.fullPath),u=wy(c);for(;u.length>1&&((l=u[0])==null?void 0:l.value)==="/";)u.shift();const f=u.map(p=>p.value==="/"?.75:p.type==="param"?.5:p.type==="wildcard"?.25:1);i.push({child:o,trimmed:c,parsed:u,index:a,scores:f})}),this.flatRoutes=i.sort((o,a)=>{const l=Math.min(o.scores.length,a.scores.length);for(let c=0;c<l;c++)if(o.scores[c]!==a.scores[c])return a.scores[c]-o.scores[c];if(o.scores.length!==a.scores.length)return a.scores.length-o.scores.length;for(let c=0;c<l;c++)if(o.parsed[c].value!==a.parsed[c].value)return o.parsed[c].value>a.parsed[c].value?1:-1;return o.index-a.index}).map((o,a)=>(o.child.rank=a,o.child))},this.subscribe=(n,r)=>{const i={eventType:n,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const i=({pathname:l,search:c,hash:u,state:f})=>{const p=this.options.parseSearch(c),g=this.options.stringifySearch(p);return{pathname:l,searchStr:g,search:Za(n?.search,p),hash:u.split("#").reverse()[0]??"",href:`${l}${g}${u}`,state:Za(n?.state,f)}},s=i(r??this.history.location),{__tempLocation:o,__tempKey:a}=s.state;if(o&&(!a||a===this.tempLocationKey)){const l=i(o);return l.state.key=s.state.key,delete l.state.__tempLocation,{...l,maskedLocation:s}}return s},this.resolvePathWithBase=(n,r)=>l9({basepath:this.basepath,base:n,to:yM(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(n,r)=>{let i={};const s=yp(n.pathname),o=u=>c_(this.basepath,s,{to:u.fullPath,caseSensitive:u.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let a=r?.to!==void 0?this.routesByPath[r.to]:void 0;a?i=o(a):a=this.flatRoutes.find(u=>{const f=o(u);return f?(i=f,!0):!1});let l=a||this.routesById[Xo];const c=[l];for(;l.parentRoute;)l=l.parentRoute,c.unshift(l);return{matchedRoutes:c,routeParams:i,foundRoute:a}},this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var n;(n=this.state.pendingMatches)==null||n.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=n=>{const r=(s={},o)=>{var a,l,c,u,f,p;const g=s._fromLocation?this.matchRoutes(s._fromLocation,{_buildLocation:!0}):this.state.matches,x=s.from!=null?g.find(P=>c_(this.basepath,yp(P.pathname),{to:s.from,caseSensitive:!1,fuzzy:!1})):void 0,S=x?.pathname||this.latestLocation.pathname;Hl(s.from==null||x!=null,"Could not find match for from: "+s.from);const _=(a=this.state.pendingMatches)!=null&&a.length?(l=Hx(this.state.pendingMatches))==null?void 0:l.search:((c=Hx(g))==null?void 0:c.search)||this.latestLocation.search,b=o?.matchedRoutes.filter(P=>g.find(j=>j.routeId===P.id));let E;if(s.to)E=this.resolvePathWithBase(S,`${s.to}`);else{const P=this.routesById[(u=b?.find(j=>{const U=l_({path:j.fullPath,params:o?.routeParams??{},decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;return Ku([this.basepath,U])===S}))==null?void 0:u.id];E=this.resolvePathWithBase(S,P?.to??S)}const M={...(f=Hx(g))==null?void 0:f.params};let T=(s.params??!0)===!0?M:{...M,...gp(s.params,M)};Object.keys(T).length>0&&o?.matchedRoutes.map(P=>{var j;return((j=P.options.params)==null?void 0:j.stringify)??P.options.stringifyParams}).filter(Boolean).forEach(P=>{T={...T,...P(T)}}),E=l_({path:E,params:T??{},leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;let k=_;if(n._includeValidateSearch&&((p=this.options.search)!=null&&p.strict)){let P={};o?.matchedRoutes.forEach(j=>{try{j.options.validateSearch&&(P={...P,...jC(j.options.validateSearch,{...P,...k})??{}})}catch{}}),k=P}k=(P=>{const j=o?.matchedRoutes.reduce(($,q)=>{var te;const W=[];if("search"in q.options)(te=q.options.search)!=null&&te.middlewares&&W.push(...q.options.search.middlewares);else if(q.options.preSearchFilters||q.options.postSearchFilters){const Z=({search:J,next:Y})=>{let oe=J;"preSearchFilters"in q.options&&q.options.preSearchFilters&&(oe=q.options.preSearchFilters.reduce((ie,ue)=>ue(ie),J));const ce=Y(oe);return"postSearchFilters"in q.options&&q.options.postSearchFilters?q.options.postSearchFilters.reduce((ie,ue)=>ue(ie),ce):ce};W.push(Z)}if(n._includeValidateSearch&&q.options.validateSearch){const Z=({search:J,next:Y})=>{try{const oe=Y(J);return{...oe,...jC(q.options.validateSearch,oe)??{}}}catch{}};W.push(Z)}return $.concat(W)},[])??[],U=({search:$})=>s.search?s.search===!0?$:gp(s.search,$):{};j.push(U);const B=($,q)=>{if($>=j.length)return q;const te=j[$];return te({search:q,next:Z=>B($+1,Z)})};return B(0,P)})(k),k=Za(_,k);const D=this.options.stringifySearch(k),L=s.hash===!0?this.latestLocation.hash:s.hash?gp(s.hash,this.latestLocation.hash):void 0,R=L?`#${L}`:"";let A=s.state===!0?this.latestLocation.state:s.state?gp(s.state,this.latestLocation.state):{};return A=Za(this.latestLocation.state,A),{pathname:E,search:k,searchStr:D,state:A,hash:L??"",href:`${E}${D}${R}`,unmaskOnReload:s.unmaskOnReload}},i=(s={},o)=>{var a;const l=r(s);let c=o?r(o):void 0;if(!c){let p={};const g=(a=this.options.routeMasks)==null?void 0:a.find(x=>{const S=c_(this.basepath,l.pathname,{to:x.from,caseSensitive:!1,fuzzy:!1});return S?(p=S,!0):!1});if(g){const{from:x,...S}=g;o={...wN(n,["from"]),...S,params:p},c=r(o)}}const u=this.getMatchedRoutes(l,s),f=r(s,u);if(c){const p=this.getMatchedRoutes(c,o),g=r(o,p);f.maskedLocation=g}return f};return n.mask?i(n,{...wN(n,["from"]),...n.mask}):i(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...i})=>{const s=()=>{const l=["key","__TSR_index","__hashScrollIntoViewOptions"];l.forEach(u=>{i.state[u]=this.latestLocation.state[u]});const c=sy(i.state,this.latestLocation.state);return l.forEach(u=>{delete i.state[u]}),c},o=this.latestLocation.href===i.href,a=this.commitLocationPromise;if(this.commitLocationPromise=Dg(()=>{a?.resolve()}),o&&s())this.load();else{let{maskedLocation:l,hashScrollIntoView:c,...u}=i;l&&(u={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...u,search:u.searchStr,state:{...u.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(u.unmaskOnReload??this.options.unmaskOnReload??!1)&&(u.state.__tempKey=this.tempLocationKey)),u.state.__hashScrollIntoViewOptions=c??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](u.href,u.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:i,viewTransition:s,ignoreBlocker:o,href:a,...l}={})=>{if(a){const u=this.history.location.state.__TSR_index,f=v0(a,{__TSR_index:n?u:u+1});l.to=f.pathname,l.search=this.options.parseSearch(f.search),l.hash=f.hash.slice(1)}const c=this.buildLocation({...l,_includeValidateSearch:!0});return this.commitLocation({...c,viewTransition:s,replace:n,resetScroll:r,hashScrollIntoView:i,ignoreBlocker:o})},this.navigate=({to:n,reloadDocument:r,href:i,...s})=>{if(r){if(!i){const o=this.buildLocation({to:n,...s});i=this.history.createHref(o.href)}s.replace?window.location.replace(i):window.location.href=i;return}return this.buildAndCommitLocation({...s,href:i,to:n})},this.load=async n=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,i,s;for(s=new Promise(o=>{this.startReactTransition(async()=>{var a;try{const l=this.latestLocation,c=this.state.resolvedLocation;this.cancelMatches();let u;NC(()=>{u=this.matchRoutes(l),this.__store.setState(f=>({...f,status:"pending",isLoading:!0,location:l,pendingMatches:u,cachedMatches:f.cachedMatches.filter(p=>!u.find(g=>g.id===p.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",...iy({resolvedLocation:c,location:l})}),this.emit({type:"onBeforeLoad",...iy({resolvedLocation:c,location:l})}),await this.loadMatches({sync:n?.sync,matches:u,location:l,onReady:async()=>{this.startViewTransition(async()=>{let f,p,g;NC(()=>{this.__store.setState(x=>{const S=x.matches,_=x.pendingMatches||x.matches;return f=S.filter(b=>!_.find(E=>E.id===b.id)),p=_.filter(b=>!S.find(E=>E.id===b.id)),g=S.filter(b=>_.find(E=>E.id===b.id)),{...x,isLoading:!1,loadedAt:Date.now(),matches:_,pendingMatches:void 0,cachedMatches:[...x.cachedMatches,...f.filter(b=>b.status!=="error")]}}),this.clearExpiredCache()}),[[f,"onLeave"],[p,"onEnter"],[g,"onStay"]].forEach(([x,S])=>{x.forEach(_=>{var b,E;(E=(b=this.looseRoutesById[_.routeId].options)[S])==null||E.call(b,_)})})})}})}catch(l){kC(l)?(r=l,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):el(l)&&(i=l),this.__store.setState(c=>({...c,statusCode:r?r.statusCode:i?404:c.matches.some(u=>u.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&((a=this.commitLocationPromise)==null||a.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(o=>({...o,statusCode:404}))},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;typeof r=="object"&&this.isViewTransitionTypesSupported?i={update:n,types:r.types}:i=n,document.startViewTransition(i)}else n()},this.updateMatch=(n,r)=>{var i;let s;const o=(i=this.state.pendingMatches)==null?void 0:i.find(u=>u.id===n),a=this.state.matches.find(u=>u.id===n),l=this.state.cachedMatches.find(u=>u.id===n),c=o?"pendingMatches":a?"matches":l?"cachedMatches":"";return c&&this.__store.setState(u=>{var f;return{...u,[c]:(f=u[c])==null?void 0:f.map(p=>p.id===n?s=r(p):p)}}),s},this.getMatch=n=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===n),this.loadMatches=async({location:n,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch,sync:a})=>{let l,c=!1;const u=async()=>{c||(c=!0,await s?.())},f=g=>!!(i&&!this.state.matches.find(x=>x.id===g));!this.isServer&&!this.state.matches.length&&u();const p=(g,x)=>{var S,_,b,E;if(kC(x)&&!x.reloadDocument)throw x;if(rp(x)||el(x)){if(o(g.id,M=>({...M,status:rp(x)?"redirected":el(x)?"notFound":"error",isFetching:!1,error:x,beforeLoadPromise:void 0,loaderPromise:void 0})),x.routeId||(x.routeId=g.routeId),(S=g.beforeLoadPromise)==null||S.resolve(),(_=g.loaderPromise)==null||_.resolve(),(b=g.loadPromise)==null||b.resolve(),rp(x))throw c=!0,x=this.resolveRedirect({...x,_fromLocation:n}),x;if(el(x))throw this._handleNotFound(r,x,{updateMatch:o}),(E=this.serverSsr)==null||E.onMatchSettled({router:this,match:this.getMatch(g.id)}),x}};try{await new Promise((g,x)=>{(async()=>{var S,_,b;try{const E=(k,N,D)=>{var L,R;const{id:A,routeId:P}=r[k],j=this.looseRoutesById[P];if(N instanceof Promise)throw N;N.routerCode=D,l=l??k,p(this.getMatch(A),N);try{(R=(L=j.options).onError)==null||R.call(L,N)}catch(U){N=U,p(this.getMatch(A),N)}o(A,U=>{var B,$;return(B=U.beforeLoadPromise)==null||B.resolve(),($=U.loadPromise)==null||$.resolve(),{...U,error:N,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[k,{id:N,routeId:D}]of r.entries()){const L=this.getMatch(N),R=(S=r[k-1])==null?void 0:S.id,A=this.looseRoutesById[D],P=A.options.pendingMs??this.options.defaultPendingMs,j=!!(s&&!this.isServer&&!f(N)&&(A.options.loader||A.options.beforeLoad)&&typeof P=="number"&&P!==1/0&&(A.options.pendingComponent??this.options.defaultPendingComponent));let U=!0;if((L.beforeLoadPromise||L.loaderPromise)&&(j&&setTimeout(()=>{try{u()}catch{}},P),await L.beforeLoadPromise,U=this.getMatch(N).status!=="success"),U){try{o(N,de=>({...de,loadPromise:Dg(()=>{var be;(be=de.loadPromise)==null||be.resolve()}),beforeLoadPromise:Dg()}));const B=new AbortController;let $;j&&($=setTimeout(()=>{try{u()}catch{}},P));const{paramsError:q,searchError:te}=this.getMatch(N);q&&E(k,q,"PARSE_PARAMS"),te&&E(k,te,"VALIDATE_SEARCH");const W=()=>R?this.getMatch(R).context:this.options.context??{};o(N,de=>({...de,isFetching:"beforeLoad",fetchCount:de.fetchCount+1,abortController:B,pendingTimeout:$,context:{...W(),...de.__routeContext}}));const{search:Z,params:J,context:Y,cause:oe}=this.getMatch(N),ce=f(N),ie={search:Z,abortController:B,params:J,preload:ce,context:Y,location:n,navigate:de=>this.navigate({...de,_fromLocation:n}),buildLocation:this.buildLocation,cause:ce?"preload":oe,matches:r},ue=await ((b=(_=A.options).beforeLoad)==null?void 0:b.call(_,ie))??{};(rp(ue)||el(ue))&&E(k,ue,"BEFORE_LOAD"),o(N,de=>({...de,__beforeLoadContext:ue,context:{...W(),...de.__routeContext,...ue},abortController:B}))}catch(B){E(k,B,"BEFORE_LOAD")}o(N,B=>{var $;return($=B.beforeLoadPromise)==null||$.resolve(),{...B,beforeLoadPromise:void 0,isFetching:!1}})}}const M=r.slice(0,l),T=[];M.forEach(({id:k,routeId:N},D)=>{T.push((async()=>{const{loaderPromise:L}=this.getMatch(k);let R=!1,A=!1;if(L){await L;const P=this.getMatch(k);P.error&&p(P,P.error)}else{const P=T[D-1],j=this.looseRoutesById[N],U=()=>{const{params:oe,loaderDeps:ce,abortController:ie,context:ue,cause:de}=this.getMatch(k),be=f(k);return{params:oe,deps:ce,preload:!!be,parentMatchPromise:P,abortController:ie,context:ue,location:n,navigate:we=>this.navigate({...we,_fromLocation:n}),cause:be?"preload":de,route:j}},B=Date.now()-this.getMatch(k).updatedAt,$=f(k),q=$?j.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:j.options.staleTime??this.options.defaultStaleTime??0,te=j.options.shouldReload,W=typeof te=="function"?te(U()):te;o(k,oe=>({...oe,loaderPromise:Dg(),preload:!!$&&!this.state.matches.find(ce=>ce.id===k)}));const Z=async()=>{var oe,ce,ie,ue,de,be,we,Ce,Ie;try{const Fe=async()=>{const ve=this.getMatch(k);ve.minPendingPromise&&await ve.minPendingPromise};try{this.loadRouteChunk(j),o(k,le=>({...le,isFetching:"loader"}));const ve=await ((ce=(oe=j.options).loader)==null?void 0:ce.call(oe,U()));p(this.getMatch(k),ve),await j._lazyPromise,await Fe();const _e=(ue=(ie=j.options).head)==null?void 0:ue.call(ie,{matches:r,match:this.getMatch(k),params:this.getMatch(k).params,loaderData:ve}),se=_e?.meta,$e=_e?.links,je=_e?.scripts,Ze=(be=(de=j.options).headers)==null?void 0:be.call(de,{loaderData:ve});o(k,le=>({...le,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:ve,meta:se,links:$e,scripts:je,headers:Ze}))}catch(ve){let _e=ve;await Fe(),p(this.getMatch(k),ve);try{(Ce=(we=j.options).onError)==null||Ce.call(we,ve)}catch(se){_e=se,p(this.getMatch(k),se)}o(k,se=>({...se,error:_e,status:"error",isFetching:!1}))}(Ie=this.serverSsr)==null||Ie.onMatchSettled({router:this,match:this.getMatch(k)}),await j._componentsPromise}catch(Fe){o(k,ve=>({...ve,loaderPromise:void 0})),p(this.getMatch(k),Fe)}},{status:J,invalid:Y}=this.getMatch(k);R=J==="success"&&(Y||(W??B>q)),$&&j.options.preload===!1||(R&&!a?(A=!0,(async()=>{try{await Z();const{loaderPromise:oe,loadPromise:ce}=this.getMatch(k);oe?.resolve(),ce?.resolve(),o(k,ie=>({...ie,loaderPromise:void 0}))}catch(oe){kC(oe)&&await this.navigate(oe)}})()):(J!=="success"||R&&a)&&await Z())}if(!A){const{loaderPromise:P,loadPromise:j}=this.getMatch(k);P?.resolve(),j?.resolve()}return o(k,P=>({...P,isFetching:A?P.isFetching:!1,loaderPromise:A?P.loaderPromise:void 0,invalid:!1})),this.getMatch(k)})())}),await Promise.all(T),g()}catch(E){x(E)}})()}),await u()}catch(g){if(rp(g)||el(g))throw el(g)&&!i&&await u(),g}return r},this.invalidate=n=>{const r=i=>{var s;return((s=n?.filter)==null?void 0:s.call(n,i))??!0?{...i,invalid:!0,...i.status==="error"?{status:"pending",error:void 0}:{}}:i};return this.__store.setState(i=>{var s;return{...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:(s=i.pendingMatches)==null?void 0:s.map(r)}}),this.load({sync:n?.sync})},this.resolveRedirect=n=>{const r=n;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(s=>!r(s))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const s=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<s)};this.clearCache({filter:n})},this.loadRouteChunk=n=>(n._lazyPromise===void 0&&(n.lazyFn?n._lazyPromise=n.lazyFn().then(r=>{const{id:i,...s}=r.options;Object.assign(n.options,s)}):n._lazyPromise=Promise.resolve()),n._componentsPromise===void 0&&(n._componentsPromise=n._lazyPromise.then(()=>Promise.all(y4.map(async r=>{const i=n.options[r];i?.preload&&await i.preload()})))),n._componentsPromise),this.preloadRoute=async n=>{const r=this.buildLocation(n);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),o=new Set([...s,...this.state.cachedMatches.map(a=>a.id)]);NC(()=>{i.forEach(a=>{o.has(a.id)||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,a]}))})});try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(a,l)=>{s.has(a)?i=i.map(c=>c.id===a?l(c):c):this.updateMatch(a,l)}}),i}catch(a){if(rp(a))return a.reloadDocument?void 0:await this.preloadRoute({...a,_fromLocation:r});el(a)||console.error(a);return}},this.matchRoute=(n,r)=>{const i={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(i);if(r?.pending&&this.state.status!=="pending")return!1;const a=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,l=c_(this.basepath,a.pathname,{...r,to:s.pathname});return!l||n.params&&!sy(l,n.params,{partial:!0})?!1:l&&(r?.includeSearch??!0)?sy(a.search,s.search,{partial:!0})?l:!1:l},this._handleNotFound=(n,r,{updateMatch:i=this.updateMatch}={})=>{const s=Object.fromEntries(n.map(l=>[l.routeId,l]));let o=(r.global?this.looseRoutesById[Xo]:this.looseRoutesById[r.routeId])||this.looseRoutesById[Xo];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==Xo;)o=o.parentRoute,Hl(o);const a=s[o.id];Hl(a,"Could not find match for route: "+o.id),i(a.id,l=>({...l,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(n,r,{updateMatch:i}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??p9,parseSearch:e.parseSearch??h9}),typeof document<"u"&&(window.__TSR_ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(e,n,r){return typeof e=="string"?this.matchRoutesInternal({pathname:e,search:n},r):this.matchRoutesInternal(e,n)}matchRoutesInternal(e,n){const{foundRoute:r,matchedRoutes:i,routeParams:s}=this.getMatchedRoutes(e,n?.dest);let o=!1;(r?r.path!=="/"&&s["**"]:yp(e.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const a=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let f=i.length-1;f>=0;f--){const p=i[f];if(p.children)return p.id}return Xo}})(),l=i.map(f=>{var p;let g;const x=((p=f.options.params)==null?void 0:p.parse)??f.options.parseParams;if(x)try{const S=x(s);Object.assign(s,S)}catch(S){if(g=new c7(S.message,{cause:S}),n?.throwOnError)throw g;return g}}),c=[],u=f=>f?.id?f.context??this.options.context??{}:this.options.context??{};return i.forEach((f,p)=>{var g,x,S,_;const b=c[p-1],[E,M,T]=(()=>{const $=b?.search??e.search,q=b?._strictSearch??{};try{const te=jC(f.options.validateSearch,{...$})??{};return[{...$,...te},{...q,...te},void 0]}catch(te){let W=te;if(te instanceof I1||(W=new I1(te.message,{cause:te})),n?.throwOnError)throw W;return[$,{},W]}})(),k=((x=(g=f.options).loaderDeps)==null?void 0:x.call(g,{search:E}))??"",N=k?JSON.stringify(k):"",{usedParams:D,interpolatedPath:L}=l_({path:f.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),R=l_({path:f.id,params:s,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath+N,A=this.getMatch(R),P=this.state.matches.find($=>$.routeId===f.id),j=P?"stay":"enter";let U;if(A)U={...A,cause:j,params:P?Za(P.params,s):s,_strictParams:D,search:Za(P?P.search:A.search,E),_strictSearch:M};else{const $=f.options.loader||f.options.beforeLoad||f.lazyFn||o7(f)?"pending":"success";U={id:R,index:p,routeId:f.id,params:P?Za(P.params,s):s,_strictParams:D,pathname:Ku([this.basepath,L]),updatedAt:Date.now(),search:P?Za(P.search,E):E,_strictSearch:M,searchError:void 0,status:$,isFetching:!1,error:void 0,paramsError:l[p],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:j,loaderDeps:P?Za(P.loaderDeps,k):k,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:f.options.staticData||{},loadPromise:Dg(),fullPath:f.fullPath}}U.status==="success"&&(U.headers=(_=(S=f.options).headers)==null?void 0:_.call(S,{loaderData:U.loaderData})),n?.preload||(U.globalNotFound=a===f.id),U.searchError=T;const B=u(b);U.context={...B,...U.__routeContext,...U.__beforeLoadContext},c.push(U)}),c.forEach((f,p)=>{var g,x,S,_;const b=this.looseRoutesById[f.routeId];if(!this.getMatch(f.id)&&n?._buildLocation!==!0){const T=c[p-1],k=u(T),N={deps:f.loaderDeps,params:f.params,context:k,location:e,navigate:D=>this.navigate({...D,_fromLocation:e}),buildLocation:this.buildLocation,cause:f.cause,abortController:f.abortController,preload:!!f.preload,matches:c};f.__routeContext=((x=(g=b.options).context)==null?void 0:x.call(g,N))??{},f.context={...k,...f.__routeContext,...f.__beforeLoadContext}}const M=(_=(S=b.options).head)==null?void 0:_.call(S,{matches:c,match:f,params:f.params,loaderData:f.loaderData??void 0});f.links=M?.links,f.scripts=M?.scripts,f.meta=M?.meta}),c}}class I1 extends Error{}class c7 extends Error{}function u7(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function d7({router:t,children:e,...n}){t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=u4(),i=v.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?v.jsx(t.options.Wrap,{children:i}):i}function f7({router:t,...e}){return v.jsx(d7,{router:t,...e,children:v.jsx(r7,{})})}function Pr(t){return Pf({...t,select:e=>t.select?t.select(e.context):e.context})}let h7={data:""},p7=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||h7,m7=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,g7=/\/\*[^]*?\*\/|  +/g,AL=/\n+/g,mf=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?mf(o,s):s+"{"+mf(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=mf(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=mf.p?mf.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Iu={},v4=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+v4(t[n]);return e}return t},y7=(t,e,n,r,i)=>{let s=v4(t),o=Iu[s]||(Iu[s]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(s));if(!Iu[o]){let l=s!==t?t:(c=>{let u,f,p=[{}];for(;u=m7.exec(c.replace(g7,""));)u[4]?p.shift():u[3]?(f=u[3].replace(AL," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][u[1]]=u[2].replace(AL," ").trim();return p[0]})(t);Iu[o]=mf(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Iu.g?Iu.g:null;return n&&(Iu.g=Iu[o]),((l,c,u,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Iu[o],e,r,a),o},v7=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":mf(a,""):a===!1?"":a}return r+i+(o??"")},"");function wM(t){let e=this||{},n=t.call?t(e.p):t;return y7(n.unshift?n.raw?v7(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,p7(e.target),e.g,e.o,e.k)}let x4,MN,TN;wM.bind({g:1});let nd=wM.bind({k:1});function x7(t,e,n,r){mf.p=e,x4=t,MN=n,TN=r}function Hf(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:MN&&MN()},a),n.o=/ *go\d+/.test(l),a.className=wM.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),TN&&c[0]&&TN(a),x4(c,a)}return e?e(i):i}}var b7=t=>typeof t=="function",R1=(t,e)=>b7(t)?t(e):t,w7=(()=>{let t=0;return()=>(++t).toString()})(),b4=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),_7=20,w4=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,_7)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return w4(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},kS=[],OS={toasts:[],pausedAt:void 0},tm=t=>{OS=w4(OS,t),kS.forEach(e=>{e(OS)})},S7={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},E7=(t={})=>{let[e,n]=X.useState(OS);X.useEffect(()=>(kS.push(n),()=>{let i=kS.indexOf(n);i>-1&&kS.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o,a;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((s=t[i.type])==null?void 0:s.removeDelay)||t?.removeDelay,duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||t?.duration||S7[i.type],style:{...t.style,...(a=t[i.type])==null?void 0:a.style,...i.style}}});return{...e,toasts:r}},M7=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||w7()}),_b=t=>(e,n)=>{let r=M7(e,t,n);return tm({type:2,toast:r}),r.id},nr=(t,e)=>_b("blank")(t,e);nr.error=_b("error");nr.success=_b("success");nr.loading=_b("loading");nr.custom=_b("custom");nr.dismiss=t=>{tm({type:3,toastId:t})};nr.remove=t=>tm({type:4,toastId:t});nr.promise=(t,e,n)=>{let r=nr.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?R1(e.success,i):void 0;return s?nr.success(s,{id:r,...n,...n?.success}):nr.dismiss(r),i}).catch(i=>{let s=e.error?R1(e.error,i):void 0;s?nr.error(s,{id:r,...n,...n?.error}):nr.dismiss(r)}),t};var T7=(t,e)=>{tm({type:1,toast:{id:t,height:e}})},C7=()=>{tm({type:5,time:Date.now()})},Gx=new Map,I7=1e3,R7=(t,e=I7)=>{if(Gx.has(t))return;let n=setTimeout(()=>{Gx.delete(t),tm({type:4,toastId:t})},e);Gx.set(t,n)},A7=t=>{let{toasts:e,pausedAt:n}=E7(t);X.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(s-a.createdAt);if(l<0){a.visible&&nr.dismiss(a.id);return}return setTimeout(()=>nr.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=X.useCallback(()=>{n&&tm({type:6,time:Date.now()})},[n]),i=X.useCallback((s,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=o||{},u=e.filter(g=>(g.position||c)===(s.position||c)&&g.height),f=u.findIndex(g=>g.id===s.id),p=u.filter((g,x)=>x<f&&g.visible).length;return u.filter(g=>g.visible).slice(...a?[p+1]:[0,p]).reduce((g,x)=>g+(x.height||0)+l,0)},[e]);return X.useEffect(()=>{e.forEach(s=>{if(s.dismissed)R7(s.id,s.removeDelay);else{let o=Gx.get(s.id);o&&(clearTimeout(o),Gx.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:T7,startPause:C7,endPause:r,calculateOffset:i}}},N7=nd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,P7=nd`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,k7=nd`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,O7=Hf("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${N7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${P7} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${k7} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,L7=nd`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,D7=Hf("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${L7} 1s linear infinite;
`,F7=nd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,B7=nd`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,j7=Hf("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${F7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${B7} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,U7=Hf("div")`
  position: absolute;
`,z7=Hf("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,V7=nd`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,W7=Hf("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${V7} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,q7=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?X.createElement(W7,null,e):e:n==="blank"?null:X.createElement(z7,null,X.createElement(D7,{...r}),n!=="loading"&&X.createElement(U7,null,n==="error"?X.createElement(O7,{...r}):X.createElement(j7,{...r})))},H7=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,$7=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,G7="0%{opacity:0;} 100%{opacity:1;}",X7="0%{opacity:1;} 100%{opacity:0;}",K7=Hf("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Y7=Hf("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Z7=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=b4()?[G7,X7]:[H7(n),$7(n)];return{animation:e?`${nd(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${nd(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},J7=X.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?Z7(t.position||e||"top-center",t.visible):{opacity:0},s=X.createElement(q7,{toast:t}),o=X.createElement(Y7,{...t.ariaProps},R1(t.message,t));return X.createElement(K7,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):X.createElement(X.Fragment,null,s,o))});x7(X.createElement);var Q7=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=X.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return X.createElement("div",{ref:s,className:e,style:n},i)},eX=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:b4()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},tX=wM`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,d_=16,_4=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:l}=A7(n);return X.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:d_,left:d_,right:d_,bottom:d_,pointerEvents:"none",...s},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let u=c.position||e,f=l.calculateOffset(c,{reverseOrder:t,gutter:r,defaultPosition:e}),p=eX(u,f);return X.createElement(Q7,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?tX:"",style:p},c.type==="custom"?R1(c.message,c):i?i(c):X.createElement(J7,{toast:c,position:u}))}))},nX=nr;function S4(t,e){return function(){return t.apply(e,arguments)}}const{toString:rX}=Object.prototype,{getPrototypeOf:a2}=Object,_M=(t=>e=>{const n=rX.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),tc=t=>(t=t.toLowerCase(),e=>_M(e)===t),SM=t=>e=>typeof e===t,{isArray:$y}=Array,x0=SM("undefined");function iX(t){return t!==null&&!x0(t)&&t.constructor!==null&&!x0(t.constructor)&&Ca(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const E4=tc("ArrayBuffer");function sX(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&E4(t.buffer),e}const oX=SM("string"),Ca=SM("function"),M4=SM("number"),EM=t=>t!==null&&typeof t=="object",aX=t=>t===!0||t===!1,LS=t=>{if(_M(t)!=="object")return!1;const e=a2(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},lX=tc("Date"),cX=tc("File"),uX=tc("Blob"),dX=tc("FileList"),fX=t=>EM(t)&&Ca(t.pipe),hX=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ca(t.append)&&((e=_M(t))==="formdata"||e==="object"&&Ca(t.toString)&&t.toString()==="[object FormData]"))},pX=tc("URLSearchParams"),[mX,gX,yX,vX]=["ReadableStream","Request","Response","Headers"].map(tc),xX=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sb(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),$y(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function T4(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const vp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,C4=t=>!x0(t)&&t!==vp;function CN(){const{caseless:t}=C4(this)&&this||{},e={},n=(r,i)=>{const s=t&&T4(e,i)||i;LS(e[s])&&LS(r)?e[s]=CN(e[s],r):LS(r)?e[s]=CN({},r):$y(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Sb(arguments[r],n);return e}const bX=(t,e,n,{allOwnKeys:r}={})=>(Sb(e,(i,s)=>{n&&Ca(i)?t[s]=S4(i,n):t[s]=i},{allOwnKeys:r}),t),wX=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),_X=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},SX=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&a2(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},EX=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},MX=t=>{if(!t)return null;if($y(t))return t;let e=t.length;if(!M4(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},TX=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&a2(Uint8Array)),CX=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},IX=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},RX=tc("HTMLFormElement"),AX=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),NL=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),NX=tc("RegExp"),I4=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Sb(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},PX=t=>{I4(t,(e,n)=>{if(Ca(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ca(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},kX=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return $y(t)?r(t):r(String(t).split(e)),n},OX=()=>{},LX=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,UC="abcdefghijklmnopqrstuvwxyz",PL="0123456789",R4={DIGIT:PL,ALPHA:UC,ALPHA_DIGIT:UC+UC.toUpperCase()+PL},DX=(t=16,e=R4.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function FX(t){return!!(t&&Ca(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const BX=t=>{const e=new Array(10),n=(r,i)=>{if(EM(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=$y(r)?[]:{};return Sb(r,(o,a)=>{const l=n(o,i+1);!x0(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},jX=tc("AsyncFunction"),UX=t=>t&&(EM(t)||Ca(t))&&Ca(t.then)&&Ca(t.catch),A4=((t,e)=>t?setImmediate:e?((n,r)=>(vp.addEventListener("message",({source:i,data:s})=>{i===vp&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),vp.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ca(vp.postMessage)),zX=typeof queueMicrotask<"u"?queueMicrotask.bind(vp):typeof process<"u"&&process.nextTick||A4,Ge={isArray:$y,isArrayBuffer:E4,isBuffer:iX,isFormData:hX,isArrayBufferView:sX,isString:oX,isNumber:M4,isBoolean:aX,isObject:EM,isPlainObject:LS,isReadableStream:mX,isRequest:gX,isResponse:yX,isHeaders:vX,isUndefined:x0,isDate:lX,isFile:cX,isBlob:uX,isRegExp:NX,isFunction:Ca,isStream:fX,isURLSearchParams:pX,isTypedArray:TX,isFileList:dX,forEach:Sb,merge:CN,extend:bX,trim:xX,stripBOM:wX,inherits:_X,toFlatObject:SX,kindOf:_M,kindOfTest:tc,endsWith:EX,toArray:MX,forEachEntry:CX,matchAll:IX,isHTMLForm:RX,hasOwnProperty:NL,hasOwnProp:NL,reduceDescriptors:I4,freezeMethods:PX,toObjectSet:kX,toCamelCase:AX,noop:OX,toFiniteNumber:LX,findKey:T4,global:vp,isContextDefined:C4,ALPHABET:R4,generateString:DX,isSpecCompliantForm:FX,toJSONObject:BX,isAsyncFn:jX,isThenable:UX,setImmediate:A4,asap:zX};function Tn(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ge.inherits(Tn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ge.toJSONObject(this.config),code:this.code,status:this.status}}});const N4=Tn.prototype,P4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{P4[t]={value:t}});Object.defineProperties(Tn,P4);Object.defineProperty(N4,"isAxiosError",{value:!0});Tn.from=(t,e,n,r,i,s)=>{const o=Object.create(N4);return Ge.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Tn.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const VX=null;function IN(t){return Ge.isPlainObject(t)||Ge.isArray(t)}function k4(t){return Ge.endsWith(t,"[]")?t.slice(0,-2):t}function kL(t,e,n){return t?t.concat(e).map(function(i,s){return i=k4(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function WX(t){return Ge.isArray(t)&&!t.some(IN)}const qX=Ge.toFlatObject(Ge,{},null,function(e){return/^is[A-Z]/.test(e)});function MM(t,e,n){if(!Ge.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ge.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,_){return!Ge.isUndefined(_[S])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Ge.isSpecCompliantForm(e);if(!Ge.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Ge.isDate(x))return x.toISOString();if(!l&&Ge.isBlob(x))throw new Tn("Blob is not supported. Use a Buffer instead.");return Ge.isArrayBuffer(x)||Ge.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,S,_){let b=x;if(x&&!_&&typeof x=="object"){if(Ge.endsWith(S,"{}"))S=r?S:S.slice(0,-2),x=JSON.stringify(x);else if(Ge.isArray(x)&&WX(x)||(Ge.isFileList(x)||Ge.endsWith(S,"[]"))&&(b=Ge.toArray(x)))return S=k4(S),b.forEach(function(M,T){!(Ge.isUndefined(M)||M===null)&&e.append(o===!0?kL([S],T,s):o===null?S:S+"[]",c(M))}),!1}return IN(x)?!0:(e.append(kL(_,S,s),c(x)),!1)}const f=[],p=Object.assign(qX,{defaultVisitor:u,convertValue:c,isVisitable:IN});function g(x,S){if(!Ge.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+S.join("."));f.push(x),Ge.forEach(x,function(b,E){(!(Ge.isUndefined(b)||b===null)&&i.call(e,b,Ge.isString(E)?E.trim():E,S,p))===!0&&g(b,S?S.concat(E):[E])}),f.pop()}}if(!Ge.isObject(t))throw new TypeError("data must be an object");return g(t),e}function OL(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function l2(t,e){this._pairs=[],t&&MM(t,this,e)}const O4=l2.prototype;O4.append=function(e,n){this._pairs.push([e,n])};O4.toString=function(e){const n=e?function(r){return e.call(this,r,OL)}:OL;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function HX(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function L4(t,e,n){if(!e)return t;const r=n&&n.encode||HX;Ge.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Ge.isURLSearchParams(e)?e.toString():new l2(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class LL{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ge.forEach(this.handlers,function(r){r!==null&&e(r)})}}const D4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$X=typeof URLSearchParams<"u"?URLSearchParams:l2,GX=typeof FormData<"u"?FormData:null,XX=typeof Blob<"u"?Blob:null,KX={isBrowser:!0,classes:{URLSearchParams:$X,FormData:GX,Blob:XX},protocols:["http","https","file","blob","url","data"]},c2=typeof window<"u"&&typeof document<"u",RN=typeof navigator=="object"&&navigator||void 0,YX=c2&&(!RN||["ReactNative","NativeScript","NS"].indexOf(RN.product)<0),ZX=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",JX=c2&&window.location.href||"http://localhost",QX=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:c2,hasStandardBrowserEnv:YX,hasStandardBrowserWebWorkerEnv:ZX,navigator:RN,origin:JX},Symbol.toStringTag,{value:"Module"})),Ws={...QX,...KX};function eK(t,e){return MM(t,new Ws.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ws.isNode&&Ge.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function tK(t){return Ge.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function nK(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function F4(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Ge.isArray(i)?i.length:o,l?(Ge.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Ge.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Ge.isArray(i[o])&&(i[o]=nK(i[o])),!a)}if(Ge.isFormData(t)&&Ge.isFunction(t.entries)){const n={};return Ge.forEachEntry(t,(r,i)=>{e(tK(r),i,n,0)}),n}return null}function rK(t,e,n){if(Ge.isString(t))try{return(e||JSON.parse)(t),Ge.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Eb={transitional:D4,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Ge.isObject(e);if(s&&Ge.isHTMLForm(e)&&(e=new FormData(e)),Ge.isFormData(e))return i?JSON.stringify(F4(e)):e;if(Ge.isArrayBuffer(e)||Ge.isBuffer(e)||Ge.isStream(e)||Ge.isFile(e)||Ge.isBlob(e)||Ge.isReadableStream(e))return e;if(Ge.isArrayBufferView(e))return e.buffer;if(Ge.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return eK(e,this.formSerializer).toString();if((a=Ge.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return MM(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),rK(e)):e}],transformResponse:[function(e){const n=this.transitional||Eb.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Ge.isResponse(e)||Ge.isReadableStream(e))return e;if(e&&Ge.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Tn.from(a,Tn.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ws.classes.FormData,Blob:Ws.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ge.forEach(["delete","get","head","post","put","patch"],t=>{Eb.headers[t]={}});const iK=Ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sK=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&iK[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},DL=Symbol("internals");function sx(t){return t&&String(t).trim().toLowerCase()}function DS(t){return t===!1||t==null?t:Ge.isArray(t)?t.map(DS):String(t)}function oK(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const aK=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function zC(t,e,n,r,i){if(Ge.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Ge.isString(e)){if(Ge.isString(r))return e.indexOf(r)!==-1;if(Ge.isRegExp(r))return r.test(e)}}function lK(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function cK(t,e){const n=Ge.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let ea=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const u=sx(l);if(!u)throw new Error("header name must be a non-empty string");const f=Ge.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=DS(a))}const o=(a,l)=>Ge.forEach(a,(c,u)=>s(c,u,l));if(Ge.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Ge.isString(e)&&(e=e.trim())&&!aK(e))o(sK(e),n);else if(Ge.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=sx(e),e){const r=Ge.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return oK(i);if(Ge.isFunction(n))return n.call(this,i,r);if(Ge.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=sx(e),e){const r=Ge.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||zC(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=sx(o),o){const a=Ge.findKey(r,o);a&&(!n||zC(r,r[a],a,n))&&(delete r[a],i=!0)}}return Ge.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||zC(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Ge.forEach(this,(i,s)=>{const o=Ge.findKey(r,s);if(o){n[o]=DS(i),delete n[s];return}const a=e?lK(s):String(s).trim();a!==s&&delete n[s],n[a]=DS(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ge.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Ge.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[DL]=this[DL]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=sx(o);r[a]||(cK(i,o),r[a]=!0)}return Ge.isArray(e)?e.forEach(s):s(e),this}};ea.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ge.reduceDescriptors(ea.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ge.freezeMethods(ea);function VC(t,e){const n=this||Eb,r=e||n,i=ea.from(r.headers);let s=r.data;return Ge.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function B4(t){return!!(t&&t.__CANCEL__)}function Gy(t,e,n){Tn.call(this,t??"canceled",Tn.ERR_CANCELED,e,n),this.name="CanceledError"}Ge.inherits(Gy,Tn,{__CANCEL__:!0});function j4(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Tn("Request failed with status code "+n.status,[Tn.ERR_BAD_REQUEST,Tn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function uK(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function dK(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),n[i]=l,r[i]=c;let f=s,p=0;for(;f!==i;)p+=n[f++],f=f%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const g=u&&c-u;return g?Math.round(p*1e3/g):void 0}}function fK(t,e){let n=0,r=1e3/e,i,s;const o=(c,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),f=u-n;f>=r?o(c,u):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-f)))},()=>i&&o(i)]}const A1=(t,e,n=3)=>{let r=0;const i=dK(50,250);return fK(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),u=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},n)},FL=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},BL=t=>(...e)=>Ge.asap(()=>t(...e)),hK=Ws.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ws.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ws.origin),Ws.navigator&&/(msie|trident)/i.test(Ws.navigator.userAgent)):()=>!0,pK=Ws.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Ge.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ge.isString(r)&&o.push("path="+r),Ge.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function mK(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function gK(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function U4(t,e){return t&&!mK(e)?gK(t,e):e}const jL=t=>t instanceof ea?{...t}:t;function Bp(t,e){e=e||{};const n={};function r(c,u,f,p){return Ge.isPlainObject(c)&&Ge.isPlainObject(u)?Ge.merge.call({caseless:p},c,u):Ge.isPlainObject(u)?Ge.merge({},u):Ge.isArray(u)?u.slice():u}function i(c,u,f,p){if(Ge.isUndefined(u)){if(!Ge.isUndefined(c))return r(void 0,c,f,p)}else return r(c,u,f,p)}function s(c,u){if(!Ge.isUndefined(u))return r(void 0,u)}function o(c,u){if(Ge.isUndefined(u)){if(!Ge.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,f){if(f in e)return r(c,u);if(f in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,f)=>i(jL(c),jL(u),f,!0)};return Ge.forEach(Object.keys(Object.assign({},t,e)),function(u){const f=l[u]||i,p=f(t[u],e[u],u);Ge.isUndefined(p)&&f!==a||(n[u]=p)}),n}const z4=t=>{const e=Bp({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=ea.from(o),e.url=L4(U4(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Ge.isFormData(n)){if(Ws.hasStandardBrowserEnv||Ws.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Ws.hasStandardBrowserEnv&&(r&&Ge.isFunction(r)&&(r=r(e)),r||r!==!1&&hK(e.url))){const c=i&&s&&pK.read(s);c&&o.set(i,c)}return e},yK=typeof XMLHttpRequest<"u",vK=yK&&function(t){return new Promise(function(n,r){const i=z4(t);let s=i.data;const o=ea.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,f,p,g,x;function S(){g&&g(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let _=new XMLHttpRequest;_.open(i.method.toUpperCase(),i.url,!0),_.timeout=i.timeout;function b(){if(!_)return;const M=ea.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),k={data:!a||a==="text"||a==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:M,config:t,request:_};j4(function(D){n(D),S()},function(D){r(D),S()},k),_=null}"onloadend"in _?_.onloadend=b:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(b)},_.onabort=function(){_&&(r(new Tn("Request aborted",Tn.ECONNABORTED,t,_)),_=null)},_.onerror=function(){r(new Tn("Network Error",Tn.ERR_NETWORK,t,_)),_=null},_.ontimeout=function(){let T=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||D4;i.timeoutErrorMessage&&(T=i.timeoutErrorMessage),r(new Tn(T,k.clarifyTimeoutError?Tn.ETIMEDOUT:Tn.ECONNABORTED,t,_)),_=null},s===void 0&&o.setContentType(null),"setRequestHeader"in _&&Ge.forEach(o.toJSON(),function(T,k){_.setRequestHeader(k,T)}),Ge.isUndefined(i.withCredentials)||(_.withCredentials=!!i.withCredentials),a&&a!=="json"&&(_.responseType=i.responseType),c&&([p,x]=A1(c,!0),_.addEventListener("progress",p)),l&&_.upload&&([f,g]=A1(l),_.upload.addEventListener("progress",f),_.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(u=M=>{_&&(r(!M||M.type?new Gy(null,t,_):M),_.abort(),_=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const E=uK(i.url);if(E&&Ws.protocols.indexOf(E)===-1){r(new Tn("Unsupported protocol "+E+":",Tn.ERR_BAD_REQUEST,t));return}_.send(s||null)})},xK=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof Tn?u:new Gy(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new Tn(`timeout ${e} of ms exceeded`,Tn.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Ge.asap(a),l}},bK=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},wK=async function*(t,e){for await(const n of _K(t))yield*bK(n,e)},_K=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},UL=(t,e,n,r)=>{const i=wK(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let f=u.byteLength;if(n){let p=s+=f;n(p)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},TM=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",V4=TM&&typeof ReadableStream=="function",SK=TM&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),W4=(t,...e)=>{try{return!!t(...e)}catch{return!1}},EK=V4&&W4(()=>{let t=!1;const e=new Request(Ws.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),zL=64*1024,AN=V4&&W4(()=>Ge.isReadableStream(new Response("").body)),N1={stream:AN&&(t=>t.body)};TM&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!N1[e]&&(N1[e]=Ge.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Tn(`Response type '${e}' is not supported`,Tn.ERR_NOT_SUPPORT,r)})})})(new Response);const MK=async t=>{if(t==null)return 0;if(Ge.isBlob(t))return t.size;if(Ge.isSpecCompliantForm(t))return(await new Request(Ws.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ge.isArrayBufferView(t)||Ge.isArrayBuffer(t))return t.byteLength;if(Ge.isURLSearchParams(t)&&(t=t+""),Ge.isString(t))return(await SK(t)).byteLength},TK=async(t,e)=>{const n=Ge.toFiniteNumber(t.getContentLength());return n??MK(e)},CK=TM&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:f="same-origin",fetchOptions:p}=z4(t);c=c?(c+"").toLowerCase():"text";let g=xK([i,s&&s.toAbortSignal()],o),x;const S=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let _;try{if(l&&EK&&n!=="get"&&n!=="head"&&(_=await TK(u,r))!==0){let k=new Request(e,{method:"POST",body:r,duplex:"half"}),N;if(Ge.isFormData(r)&&(N=k.headers.get("content-type"))&&u.setContentType(N),k.body){const[D,L]=FL(_,A1(BL(l)));r=UL(k.body,zL,D,L)}}Ge.isString(f)||(f=f?"include":"omit");const b="credentials"in Request.prototype;x=new Request(e,{...p,signal:g,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:b?f:void 0});let E=await fetch(x);const M=AN&&(c==="stream"||c==="response");if(AN&&(a||M&&S)){const k={};["status","statusText","headers"].forEach(R=>{k[R]=E[R]});const N=Ge.toFiniteNumber(E.headers.get("content-length")),[D,L]=a&&FL(N,A1(BL(a),!0))||[];E=new Response(UL(E.body,zL,D,()=>{L&&L(),S&&S()}),k)}c=c||"text";let T=await N1[Ge.findKey(N1,c)||"text"](E,t);return!M&&S&&S(),await new Promise((k,N)=>{j4(k,N,{data:T,headers:ea.from(E.headers),status:E.status,statusText:E.statusText,config:t,request:x})})}catch(b){throw S&&S(),b&&b.name==="TypeError"&&/fetch/i.test(b.message)?Object.assign(new Tn("Network Error",Tn.ERR_NETWORK,t,x),{cause:b.cause||b}):Tn.from(b,b&&b.code,t,x)}}),NN={http:VX,xhr:vK,fetch:CK};Ge.forEach(NN,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const VL=t=>`- ${t}`,IK=t=>Ge.isFunction(t)||t===null||t===!1,q4={getAdapter:t=>{t=Ge.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!IK(n)&&(r=NN[(o=String(n)).toLowerCase()],r===void 0))throw new Tn(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(VL).join(`
`):" "+VL(s[0]):"as no adapter specified";throw new Tn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:NN};function WC(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Gy(null,t)}function WL(t){return WC(t),t.headers=ea.from(t.headers),t.data=VC.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),q4.getAdapter(t.adapter||Eb.adapter)(t).then(function(r){return WC(t),r.data=VC.call(t,t.transformResponse,r),r.headers=ea.from(r.headers),r},function(r){return B4(r)||(WC(t),r&&r.response&&(r.response.data=VC.call(t,t.transformResponse,r.response),r.response.headers=ea.from(r.response.headers))),Promise.reject(r)})}const H4="1.7.9",CM={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{CM[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const qL={};CM.transitional=function(e,n,r){function i(s,o){return"[Axios v"+H4+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Tn(i(o," has been removed"+(n?" in "+n:"")),Tn.ERR_DEPRECATED);return n&&!qL[o]&&(qL[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};CM.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function RK(t,e,n){if(typeof t!="object")throw new Tn("options must be an object",Tn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Tn("option "+s+" must be "+l,Tn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Tn("Unknown option "+s,Tn.ERR_BAD_OPTION)}}const FS={assertOptions:RK,validators:CM},wc=FS.validators;let Tp=class{constructor(e){this.defaults=e,this.interceptors={request:new LL,response:new LL}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Bp(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&FS.assertOptions(r,{silentJSONParsing:wc.transitional(wc.boolean),forcedJSONParsing:wc.transitional(wc.boolean),clarifyTimeoutError:wc.transitional(wc.boolean)},!1),i!=null&&(Ge.isFunction(i)?n.paramsSerializer={serialize:i}:FS.assertOptions(i,{encode:wc.function,serialize:wc.function},!0)),FS.assertOptions(n,{baseUrl:wc.spelling("baseURL"),withXsrfToken:wc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ge.merge(s.common,s[n.method]);s&&Ge.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=ea.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(l=l&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const c=[];this.interceptors.response.forEach(function(S){c.push(S.fulfilled,S.rejected)});let u,f=0,p;if(!l){const x=[WL.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),p=x.length,u=Promise.resolve(n);f<p;)u=u.then(x[f++],x[f++]);return u}p=a.length;let g=n;for(f=0;f<p;){const x=a[f++],S=a[f++];try{g=x(g)}catch(_){S.call(this,_);break}}try{u=WL.call(this,g)}catch(x){return Promise.reject(x)}for(f=0,p=c.length;f<p;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=Bp(this.defaults,e);const n=U4(e.baseURL,e.url);return L4(n,e.params,e.paramsSerializer)}};Ge.forEach(["delete","get","head","options"],function(e){Tp.prototype[e]=function(n,r){return this.request(Bp(r||{},{method:e,url:n,data:(r||{}).data}))}});Ge.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Bp(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Tp.prototype[e]=n(),Tp.prototype[e+"Form"]=n(!0)});let AK=class $4{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Gy(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new $4(function(i){e=i}),cancel:e}}};function NK(t){return function(n){return t.apply(null,n)}}function PK(t){return Ge.isObject(t)&&t.isAxiosError===!0}const PN={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(PN).forEach(([t,e])=>{PN[e]=t});function G4(t){const e=new Tp(t),n=S4(Tp.prototype.request,e);return Ge.extend(n,Tp.prototype,e,{allOwnKeys:!0}),Ge.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return G4(Bp(t,i))},n}const Ei=G4(Eb);Ei.Axios=Tp;Ei.CanceledError=Gy;Ei.CancelToken=AK;Ei.isCancel=B4;Ei.VERSION=H4;Ei.toFormData=MM;Ei.AxiosError=Tn;Ei.Cancel=Ei.CanceledError;Ei.all=function(e){return Promise.all(e)};Ei.spread=NK;Ei.isAxiosError=PK;Ei.mergeConfig=Bp;Ei.AxiosHeaders=ea;Ei.formToJSON=t=>F4(Ge.isHTMLForm(t)?new FormData(t):t);Ei.getAdapter=q4.getAdapter;Ei.HttpStatusCode=PN;Ei.default=Ei;const{Axios:cMe,AxiosError:kK,CanceledError:uMe,isCancel:dMe,CancelToken:fMe,VERSION:hMe,all:pMe,Cancel:mMe,isAxiosError:gMe,spread:yMe,toFormData:vMe,AxiosHeaders:xMe,HttpStatusCode:bMe,formToJSON:wMe,getAdapter:_Me,mergeConfig:SMe}=Ei,u2=({error:t,schema:e,onError:n})=>{if(t instanceof kK){const i=e.safeParse(t.response?.data);return i.success&&n({error:t,data:i.data}),i.success}return!1};var qC,HL;function OK(){if(HL)return qC;HL=1;function t(r){this.queue=[],this.timeslotRequests=0,this.interceptors={request:null,response:null},this.handleRequest=this.handleRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.enable(r)}t.prototype.getMaxRPS=function(){var r=this.perMilliseconds/1e3;return this.maxRequests/r},t.prototype.getQueue=function(){return this.queue},t.prototype.setMaxRPS=function(r){this.setRateLimitOptions({maxRequests:r,perMilliseconds:1e3})},t.prototype.setRateLimitOptions=function(r){r.maxRPS?this.setMaxRPS(r.maxRPS):(this.perMilliseconds=r.perMilliseconds,this.maxRequests=r.maxRequests)},t.prototype.enable=function(r){function i(s){return Promise.reject(s)}this.interceptors.request=r.interceptors.request.use(this.handleRequest,i),this.interceptors.response=r.interceptors.response.use(this.handleResponse,i)};function e(r){r.cancelToken&&r.cancelToken.throwIfRequested()}t.prototype.handleRequest=function(r){return new Promise(function(i,s){this.push({resolve:function(){try{e(r)}catch(o){return s(o),!1}return i(r),!0}})}.bind(this))},t.prototype.handleResponse=function(r){return this.shift(),r},t.prototype.push=function(r){this.queue.push(r),this.shiftInitial()},t.prototype.shiftInitial=function(){setTimeout(function(){return this.shift()}.bind(this),0)},t.prototype.shift=function(){if(this.queue.length){if(this.timeslotRequests===this.maxRequests){this.timeoutId&&typeof this.timeoutId.ref=="function"&&this.timeoutId.ref();return}var r=this.queue.shift(),i=r.resolve();if(this.timeslotRequests===0&&(this.timeoutId=setTimeout(function(){this.timeslotRequests=0,this.shift()}.bind(this),this.perMilliseconds),typeof this.timeoutId.unref=="function"&&this.queue.length===0&&this.timeoutId.unref()),!i){this.shift();return}this.timeslotRequests+=1}};function n(r,i){var s=new t(r);return s.setRateLimitOptions(i),r.getQueue=t.prototype.getQueue.bind(s),r.getMaxRPS=t.prototype.getMaxRPS.bind(s),r.setMaxRPS=t.prototype.setMaxRPS.bind(s),r.setRateLimitOptions=t.prototype.setRateLimitOptions.bind(s),r}return qC=n,qC}var LK=OK();const DK=Co(LK),FK=({instance:t,limit:e}={})=>DK(t||Ei,e||{maxRequests:5,perMilliseconds:100}),d2="-",BK=t=>{const e=UK(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(d2);return a[0]===""&&a.length!==1&&a.shift(),X4(a,e)||jK(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},X4=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?X4(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(d2);return e.validators.find(({validator:o})=>o(s))?.classGroupId},$L=/^\[(.+)\]$/,jK=t=>{if($L.test(t)){const e=$L.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},UK=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)kN(n[i],r,i,e);return r},kN=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:GL(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(zK(i)){kN(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{kN(o,GL(e,s),n,r)})})},GL=(t,e)=>{let n=t;return e.split(d2).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},zK=t=>t.isThemeGetter,VK=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},ON="!",LN=":",WK=LN.length,qK=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,l=0,c;for(let x=0;x<i.length;x++){let S=i[x];if(o===0&&a===0){if(S===LN){s.push(i.slice(l,x)),l=x+WK;continue}if(S==="/"){c=x;continue}}S==="["?o++:S==="]"?o--:S==="("?a++:S===")"&&a--}const u=s.length===0?i:i.substring(l),f=HK(u),p=f!==u,g=c&&c>l?c-l:void 0;return{modifiers:s,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:g}};if(e){const i=e+LN,s=r;r=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},HK=t=>t.endsWith(ON)?t.substring(0,t.length-1):t.startsWith(ON)?t.substring(1):t,$K=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(o=>{o[0]==="["||e[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},GK=t=>({cache:VK(t.cacheSize),parseClassName:qK(t),sortModifiers:$K(t),...BK(t)}),XK=/\s+/,KK=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(XK);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:f,modifiers:p,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:S}=n(u);if(f){l=u+(l.length>0?" "+l:l);continue}let _=!!S,b=r(_?x.substring(0,S):x);if(!b){if(!_){l=u+(l.length>0?" "+l:l);continue}if(b=r(x),!b){l=u+(l.length>0?" "+l:l);continue}_=!1}const E=s(p).join(":"),M=g?E+ON:E,T=M+b;if(o.includes(T))continue;o.push(T);const k=i(b,_);for(let N=0;N<k.length;++N){const D=k[N];o.push(M+D)}l=u+(l.length>0?" "+l:l)}return l};function YK(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=K4(e))&&(r&&(r+=" "),r+=n);return r}const K4=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=K4(t[r]))&&(n&&(n+=" "),n+=e);return n};function ZK(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((u,f)=>f(u),t());return n=GK(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=KK(l,n);return i(l,u),u}return function(){return s(YK.apply(null,arguments))}}const ls=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Y4=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Z4=/^\((?:(\w[\w-]*):)?(.+)\)$/i,JK=/^\d+\/\d+$/,QK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eY=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tY=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,nY=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rY=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ag=t=>JK.test(t),Hn=t=>!!t&&!Number.isNaN(Number(t)),zh=t=>!!t&&Number.isInteger(Number(t)),XL=t=>t.endsWith("%")&&Hn(t.slice(0,-1)),Jd=t=>QK.test(t),iY=()=>!0,sY=t=>eY.test(t)&&!tY.test(t),f2=()=>!1,oY=t=>nY.test(t),aY=t=>rY.test(t),lY=t=>!It(t)&&!Rt(t),cY=t=>Xy(t,eV,f2),It=t=>Y4.test(t),Vh=t=>Xy(t,tV,sY),HC=t=>Xy(t,bY,Hn),uY=t=>Xy(t,J4,f2),dY=t=>Xy(t,Q4,aY),fY=t=>Xy(t,f2,oY),Rt=t=>Z4.test(t),f_=t=>Ky(t,tV),hY=t=>Ky(t,wY),pY=t=>Ky(t,J4),mY=t=>Ky(t,eV),gY=t=>Ky(t,Q4),yY=t=>Ky(t,_Y,!0),Xy=(t,e,n)=>{const r=Y4.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Ky=(t,e,n=!1)=>{const r=Z4.exec(t);return r?r[1]?e(r[1]):n:!1},J4=t=>t==="position",vY=new Set(["image","url"]),Q4=t=>vY.has(t),xY=new Set(["length","size","percentage"]),eV=t=>xY.has(t),tV=t=>t==="length",bY=t=>t==="number",wY=t=>t==="family-name",_Y=t=>t==="shadow",SY=()=>{const t=ls("color"),e=ls("font"),n=ls("text"),r=ls("font-weight"),i=ls("tracking"),s=ls("leading"),o=ls("breakpoint"),a=ls("container"),l=ls("spacing"),c=ls("radius"),u=ls("shadow"),f=ls("inset-shadow"),p=ls("drop-shadow"),g=ls("blur"),x=ls("perspective"),S=ls("aspect"),_=ls("ease"),b=ls("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],T=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],N=()=>[ag,"px","full","auto",Rt,It,l],D=()=>[zh,"none","subgrid",Rt,It],L=()=>["auto",{span:["full",zh,Rt,It]},Rt,It],R=()=>[zh,"auto",Rt,It],A=()=>["auto","min","max","fr",Rt,It],P=()=>[Rt,It,l],j=()=>["start","end","center","between","around","evenly","stretch","baseline"],U=()=>["start","end","center","stretch"],B=()=>[Rt,It,l],$=()=>["px",...B()],q=()=>["px","auto",...B()],te=()=>[ag,"auto","px","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",Rt,It,l],W=()=>[t,Rt,It],Z=()=>[XL,Vh],J=()=>["","none","full",c,Rt,It],Y=()=>["",Hn,f_,Vh],oe=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>["","none",g,Rt,It],ue=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Rt,It],de=()=>["none",Hn,Rt,It],be=()=>["none",Hn,Rt,It],we=()=>[Hn,Rt,It],Ce=()=>[ag,"full","px",Rt,It,l];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Jd],breakpoint:[Jd],color:[iY],container:[Jd],"drop-shadow":[Jd],ease:["in","out","in-out"],font:[lY],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Jd],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Jd],shadow:[Jd],spacing:[Hn],text:[Jd],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ag,It,Rt,S]}],container:["container"],columns:[{columns:[Hn,It,Rt,a]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),It,Rt]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[zh,"auto",Rt,It]}],basis:[{basis:[ag,"full","auto",Rt,It,a,l]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Hn,ag,"auto","initial","none",It]}],grow:[{grow:["",Hn,Rt,It]}],shrink:[{shrink:["",Hn,Rt,It]}],order:[{order:[zh,"first","last","none",Rt,It]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":A()}],"auto-rows":[{"auto-rows":A()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...j(),"normal"]}],"justify-items":[{"justify-items":[...U(),"normal"]}],"justify-self":[{"justify-self":["auto",...U()]}],"align-content":[{content:["normal",...j()]}],"align-items":[{items:[...U(),"baseline"]}],"align-self":[{self:["auto",...U(),"baseline"]}],"place-content":[{"place-content":j()}],"place-items":[{"place-items":[...U(),"baseline"]}],"place-self":[{"place-self":["auto",...U()]}],p:[{p:$()}],px:[{px:$()}],py:[{py:$()}],ps:[{ps:$()}],pe:[{pe:$()}],pt:[{pt:$()}],pr:[{pr:$()}],pb:[{pb:$()}],pl:[{pl:$()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":B()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":B()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[a,"screen",...te()]}],"min-w":[{"min-w":[a,"screen","none",...te()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...te()]}],h:[{h:["screen",...te()]}],"min-h":[{"min-h":["screen","none",...te()]}],"max-h":[{"max-h":["screen",...te()]}],"font-size":[{text:["base",n,f_,Vh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Rt,HC]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",XL,It]}],"font-family":[{font:[hY,It,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Rt,It]}],"line-clamp":[{"line-clamp":[Hn,"none",Rt,HC]}],leading:[{leading:[Rt,It,s,l]}],"list-image":[{"list-image":["none",Rt,It]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Rt,It]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Hn,"from-font","auto",Rt,Vh]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[Hn,"auto",Rt,It]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:["px",...B()]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Rt,It]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Rt,It]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),pY,uY]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",mY,cY]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},zh,Rt,It],radial:["",Rt,It],conic:[zh,Rt,It]},gY,dY]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:J()}],"rounded-s":[{"rounded-s":J()}],"rounded-e":[{"rounded-e":J()}],"rounded-t":[{"rounded-t":J()}],"rounded-r":[{"rounded-r":J()}],"rounded-b":[{"rounded-b":J()}],"rounded-l":[{"rounded-l":J()}],"rounded-ss":[{"rounded-ss":J()}],"rounded-se":[{"rounded-se":J()}],"rounded-ee":[{"rounded-ee":J()}],"rounded-es":[{"rounded-es":J()}],"rounded-tl":[{"rounded-tl":J()}],"rounded-tr":[{"rounded-tr":J()}],"rounded-br":[{"rounded-br":J()}],"rounded-bl":[{"rounded-bl":J()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...oe(),"hidden","none"]}],"divide-style":[{divide:[...oe(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Hn,Rt,It]}],"outline-w":[{outline:["",Hn,f_,Vh]}],"outline-color":[{outline:[t]}],shadow:[{shadow:["","none",u,yY,fY]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",Rt,It,f]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[Hn,Vh]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":W()}],opacity:[{opacity:[Hn,Rt,It]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],filter:[{filter:["","none",Rt,It]}],blur:[{blur:ie()}],brightness:[{brightness:[Hn,Rt,It]}],contrast:[{contrast:[Hn,Rt,It]}],"drop-shadow":[{"drop-shadow":["","none",p,Rt,It]}],grayscale:[{grayscale:["",Hn,Rt,It]}],"hue-rotate":[{"hue-rotate":[Hn,Rt,It]}],invert:[{invert:["",Hn,Rt,It]}],saturate:[{saturate:[Hn,Rt,It]}],sepia:[{sepia:["",Hn,Rt,It]}],"backdrop-filter":[{"backdrop-filter":["","none",Rt,It]}],"backdrop-blur":[{"backdrop-blur":ie()}],"backdrop-brightness":[{"backdrop-brightness":[Hn,Rt,It]}],"backdrop-contrast":[{"backdrop-contrast":[Hn,Rt,It]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Hn,Rt,It]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Hn,Rt,It]}],"backdrop-invert":[{"backdrop-invert":["",Hn,Rt,It]}],"backdrop-opacity":[{"backdrop-opacity":[Hn,Rt,It]}],"backdrop-saturate":[{"backdrop-saturate":[Hn,Rt,It]}],"backdrop-sepia":[{"backdrop-sepia":["",Hn,Rt,It]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":B()}],"border-spacing-x":[{"border-spacing-x":B()}],"border-spacing-y":[{"border-spacing-y":B()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Rt,It]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Hn,"initial",Rt,It]}],ease:[{ease:["linear","initial",_,Rt,It]}],delay:[{delay:[Hn,Rt,It]}],animate:[{animate:["none",b,Rt,It]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,Rt,It]}],"perspective-origin":[{"perspective-origin":ue()}],rotate:[{rotate:de()}],"rotate-x":[{"rotate-x":de()}],"rotate-y":[{"rotate-y":de()}],"rotate-z":[{"rotate-z":de()}],scale:[{scale:be()}],"scale-x":[{"scale-x":be()}],"scale-y":[{"scale-y":be()}],"scale-z":[{"scale-z":be()}],"scale-3d":["scale-3d"],skew:[{skew:we()}],"skew-x":[{"skew-x":we()}],"skew-y":[{"skew-y":we()}],transform:[{transform:[Rt,It,"","none","gpu","cpu"]}],"transform-origin":[{origin:ue()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ce()}],"translate-x":[{"translate-x":Ce()}],"translate-y":[{"translate-y":Ce()}],"translate-z":[{"translate-z":Ce()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Rt,It]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Rt,It]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[Hn,f_,Vh,HC]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},nV=ZK(SY),DN=new Proxy(()=>DN,{get:()=>DN});function Sn({use:t,slot:e,variant:n,match:r=[],defaults:i}){return({css:s,...o}={})=>({slots:new Proxy({},{get:(a,l)=>({css:c,...u}={})=>{const f=[],p=t,g={...p?.()?.config.defaults,...i,...o,...u};f.push(p?.(g)?.slots[l]?.(g)),f.push(Array.isArray(e[l])?e[l]:[e[l]]);for(const[x,S]of Object.entries(g)){const _=n[x]?.[S];_&&f.push(_)}for(const x of r)Object.entries(x.if).every(([S,_])=>_===g[S])&&f.push(x.then?.[l]);return f.push(s?.[l]),f.push(c),nV(f)}}),config:{defaults:{...t?.()?.config.defaults,...i},values:{...t?.()?.config.defaults,...i,...o}},type:DN()})}const ln=nV;var $C,KL;function rV(){return KL||(KL=1,$C=Object),$C}var GC,YL;function EY(){return YL||(YL=1,GC=Error),GC}var XC,ZL;function MY(){return ZL||(ZL=1,XC=EvalError),XC}var KC,JL;function TY(){return JL||(JL=1,KC=RangeError),KC}var YC,QL;function CY(){return QL||(QL=1,YC=ReferenceError),YC}var ZC,eD;function IY(){return eD||(eD=1,ZC=SyntaxError),ZC}var JC,tD;function iV(){return tD||(tD=1,JC=TypeError),JC}var QC,nD;function RY(){return nD||(nD=1,QC=URIError),QC}var eI,rD;function AY(){return rD||(rD=1,eI=Math.abs),eI}var tI,iD;function NY(){return iD||(iD=1,tI=Math.floor),tI}var nI,sD;function PY(){return sD||(sD=1,nI=Math.max),nI}var rI,oD;function kY(){return oD||(oD=1,rI=Math.min),rI}var iI,aD;function OY(){return aD||(aD=1,iI=Math.pow),iI}var sI,lD;function LY(){return lD||(lD=1,sI=Math.round),sI}var oI,cD;function DY(){return cD||(cD=1,oI=Number.isNaN||function(e){return e!==e}),oI}var aI,uD;function FY(){if(uD)return aI;uD=1;var t=DY();return aI=function(n){return t(n)||n===0?n:n<0?-1:1},aI}var lI,dD;function BY(){return dD||(dD=1,lI=Object.getOwnPropertyDescriptor),lI}var cI,fD;function sV(){if(fD)return cI;fD=1;var t=BY();if(t)try{t([],"length")}catch{t=null}return cI=t,cI}var uI,hD;function jY(){if(hD)return uI;hD=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return uI=t,uI}var dI,pD;function oV(){return pD||(pD=1,dI=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,n);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),dI}var fI,mD;function UY(){if(mD)return fI;mD=1;var t=typeof Symbol<"u"&&Symbol,e=oV();return fI=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},fI}var hI,gD;function aV(){return gD||(gD=1,hI=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),hI}var pI,yD;function lV(){if(yD)return pI;yD=1;var t=rV();return pI=t.getPrototypeOf||null,pI}var mI,vD;function zY(){if(vD)return mI;vD=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(l,c){for(var u=[],f=0;f<l.length;f+=1)u[f]=l[f];for(var p=0;p<c.length;p+=1)u[p+l.length]=c[p];return u},s=function(l,c){for(var u=[],f=c,p=0;f<l.length;f+=1,p+=1)u[p]=l[f];return u},o=function(a,l){for(var c="",u=0;u<a.length;u+=1)c+=a[u],u+1<a.length&&(c+=l);return c};return mI=function(l){var c=this;if(typeof c!="function"||e.apply(c)!==r)throw new TypeError(t+c);for(var u=s(arguments,1),f,p=function(){if(this instanceof f){var b=c.apply(this,i(u,arguments));return Object(b)===b?b:this}return c.apply(l,i(u,arguments))},g=n(0,c.length-u.length),x=[],S=0;S<g;S++)x[S]="$"+S;if(f=Function("binder","return function ("+o(x,",")+"){ return binder.apply(this,arguments); }")(p),c.prototype){var _=function(){};_.prototype=c.prototype,f.prototype=new _,_.prototype=null}return f},mI}var gI,xD;function IM(){if(xD)return gI;xD=1;var t=zY();return gI=Function.prototype.bind||t,gI}var yI,bD;function h2(){return bD||(bD=1,yI=Function.prototype.call),yI}var vI,wD;function cV(){return wD||(wD=1,vI=Function.prototype.apply),vI}var xI,_D;function VY(){return _D||(_D=1,xI=typeof Reflect<"u"&&Reflect&&Reflect.apply),xI}var bI,SD;function WY(){if(SD)return bI;SD=1;var t=IM(),e=cV(),n=h2(),r=VY();return bI=r||t.call(n,e),bI}var wI,ED;function uV(){if(ED)return wI;ED=1;var t=IM(),e=iV(),n=h2(),r=WY();return wI=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(t,n,s)},wI}var _I,MD;function qY(){if(MD)return _I;MD=1;var t=uV(),e=sV(),n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return _I=r&&typeof r.get=="function"?t([r.get]):typeof s=="function"?function(a){return s(a==null?a:i(a))}:!1,_I}var SI,TD;function HY(){if(TD)return SI;TD=1;var t=aV(),e=lV(),n=qY();return SI=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:n?function(i){return n(i)}:null,SI}var EI,CD;function $Y(){if(CD)return EI;CD=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=IM();return EI=n.call(t,e),EI}var MI,ID;function GY(){if(ID)return MI;ID=1;var t,e=rV(),n=EY(),r=MY(),i=TY(),s=CY(),o=IY(),a=iV(),l=RY(),c=AY(),u=NY(),f=PY(),p=kY(),g=OY(),x=LY(),S=FY(),_=Function,b=function(Ce){try{return _('"use strict"; return ('+Ce+").constructor;")()}catch{}},E=sV(),M=jY(),T=function(){throw new a},k=E?function(){try{return arguments.callee,T}catch{try{return E(arguments,"callee").get}catch{return T}}}():T,N=UY()(),D=HY(),L=lV(),R=aV(),A=cV(),P=h2(),j={},U=typeof Uint8Array>"u"||!D?t:D(Uint8Array),B={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":N&&D?D([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":j,"%AsyncGenerator%":j,"%AsyncGeneratorFunction%":j,"%AsyncIteratorPrototype%":j,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":_,"%GeneratorFunction%":j,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":N&&D?D(D([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!N||!D?t:D(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":E,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!N||!D?t:D(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":N&&D?D(""[Symbol.iterator]()):t,"%Symbol%":N?Symbol:t,"%SyntaxError%":o,"%ThrowTypeError%":k,"%TypedArray%":U,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":l,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":P,"%Function.prototype.apply%":A,"%Object.defineProperty%":M,"%Object.getPrototypeOf%":L,"%Math.abs%":c,"%Math.floor%":u,"%Math.max%":f,"%Math.min%":p,"%Math.pow%":g,"%Math.round%":x,"%Math.sign%":S,"%Reflect.getPrototypeOf%":R};if(D)try{null.error}catch(Ce){var $=D(D(Ce));B["%Error.prototype%"]=$}var q=function Ce(Ie){var Fe;if(Ie==="%AsyncFunction%")Fe=b("async function () {}");else if(Ie==="%GeneratorFunction%")Fe=b("function* () {}");else if(Ie==="%AsyncGeneratorFunction%")Fe=b("async function* () {}");else if(Ie==="%AsyncGenerator%"){var ve=Ce("%AsyncGeneratorFunction%");ve&&(Fe=ve.prototype)}else if(Ie==="%AsyncIteratorPrototype%"){var _e=Ce("%AsyncGenerator%");_e&&D&&(Fe=D(_e.prototype))}return B[Ie]=Fe,Fe},te={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},W=IM(),Z=$Y(),J=W.call(P,Array.prototype.concat),Y=W.call(A,Array.prototype.splice),oe=W.call(P,String.prototype.replace),ce=W.call(P,String.prototype.slice),ie=W.call(P,RegExp.prototype.exec),ue=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,de=/\\(\\)?/g,be=function(Ie){var Fe=ce(Ie,0,1),ve=ce(Ie,-1);if(Fe==="%"&&ve!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(ve==="%"&&Fe!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var _e=[];return oe(Ie,ue,function(se,$e,je,Ze){_e[_e.length]=je?oe(Ze,de,"$1"):$e||se}),_e},we=function(Ie,Fe){var ve=Ie,_e;if(Z(te,ve)&&(_e=te[ve],ve="%"+_e[0]+"%"),Z(B,ve)){var se=B[ve];if(se===j&&(se=q(ve)),typeof se>"u"&&!Fe)throw new a("intrinsic "+Ie+" exists, but is not available. Please file an issue!");return{alias:_e,name:ve,value:se}}throw new o("intrinsic "+Ie+" does not exist!")};return MI=function(Ie,Fe){if(typeof Ie!="string"||Ie.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Fe!="boolean")throw new a('"allowMissing" argument must be a boolean');if(ie(/^%?[^%]*%?$/,Ie)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ve=be(Ie),_e=ve.length>0?ve[0]:"",se=we("%"+_e+"%",Fe),$e=se.name,je=se.value,Ze=!1,le=se.alias;le&&(_e=le[0],Y(ve,J([0,1],le)));for(var ge=1,fe=!0;ge<ve.length;ge+=1){var Q=ve[ge],G=ce(Q,0,1),me=ce(Q,-1);if((G==='"'||G==="'"||G==="`"||me==='"'||me==="'"||me==="`")&&G!==me)throw new o("property names with quotes must have matching quotes");if((Q==="constructor"||!fe)&&(Ze=!0),_e+="."+Q,$e="%"+_e+"%",Z(B,$e))je=B[$e];else if(je!=null){if(!(Q in je)){if(!Fe)throw new a("base intrinsic for "+Ie+" exists, but the property is not available.");return}if(E&&ge+1>=ve.length){var he=E(je,Q);fe=!!he,fe&&"get"in he&&!("originalValue"in he.get)?je=he.get:je=je[Q]}else fe=Z(je,Q),je=je[Q];fe&&!Ze&&(B[$e]=je)}}return je},MI}var TI,RD;function XY(){if(RD)return TI;RD=1;var t=GY(),e=uV(),n=e([t("%String.prototype.indexOf%")]);return TI=function(i,s){var o=t(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?e([o]):o},TI}var CI,AD;function KY(){if(AD)return CI;AD=1;var t=oV();return CI=function(){return t()&&!!Symbol.toStringTag},CI}var II,ND;function YY(){if(ND)return II;ND=1;var t=XY(),e=t("String.prototype.valueOf"),n=function(a){try{return e(a),!0}catch{return!1}},r=t("Object.prototype.toString"),i="[object String]",s=KY()();return II=function(a){return typeof a=="string"?!0:!a||typeof a!="object"?!1:s?n(a):r(a)===i},II}var ZY=YY();const JY=Co(ZY),Mb=t=>JY(t),QY=(t,e,n={})=>{const r=[];return t.filter((s,o)=>{const a=n.regionLowerCase?s.toLowerCase():s;if(e.includes(a))return r.push({index:o,appLocale:a}),!0;const{isAvailable:l,appLocale:c}=eZ(a,e,n);return l&&r.push({index:o,appLocale:n.regionLowerCase?c.toLowerCase():c}),l}).map((s,o)=>!r||r.length===0?s:r[o]?.appLocale)},eZ=(t,e,n={})=>{n?.languageOnly||(n.languageOnly=!1);let r=t;return{isAvailable:e.some(s=>{if(!BS()&&!n.languageOnly&&t.split("-")[1]===void 0)return!1;const o=BS()?new Intl.Locale(t).minimize().language:t.split("-")[0],a=BS()?new Intl.Locale(s).minimize().language:s.split("-")[0],l=o===a;return l&&(r=s),l}),appLocale:r}},tZ=(t={})=>{t?.regionLowerCase||(t.regionLowerCase=!1);let e=[];return Intl&&"DateTimeFormat"in Intl?e=[Intl.DateTimeFormat().resolvedOptions().locale]:typeof window=="object"&&window?.navigator?.languages&&(e=[...window.navigator.languages]),e.map(n=>t.regionLowerCase?n.toLowerCase():n)},BS=()=>Intl&&"Locale"in Intl,nZ=(t,e={})=>{e?.regionLowerCase||(e.regionLowerCase=!1),e?.languageOnly||(e.languageOnly=!1);const n=t.map(r=>{const i=r.split("-");if(e.languageOnly)return i[0];const s=BS()?new Intl.Locale(r).maximize():{language:i[0],script:i.length===3?i[1]:void 0,region:i.length===3?i[2]:i[1]},{language:o,script:a}=s;let{region:l}=s;return e.regionLowerCase&&l&&(l=l.toLowerCase()),i.length>2?`${o}-${a}-${l}`:l?`${o}-${l}`:o});return[...new Set(n)]},rZ=(t,e,n={})=>{n.regionLowerCase||(n.regionLowerCase=!1),n.languageOnly||(n.languageOnly=!1);const r=tZ(n),i=nZ([...r,t],n);return QY(i,e,n)[0]||t},iZ=({available:t,fallback:e})=>rZ(e,t,{languageOnly:!0});var RI={exports:{}};const sZ={},oZ=Object.freeze(Object.defineProperty({__proto__:null,default:sZ},Symbol.toStringTag,{value:"Module"})),PD=xG(oZ);var kD;function aZ(){return kD||(kD=1,function(t){(function(){var e="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",s=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?r=mp:i&&(r=self);var o=!r.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,a=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),c=[-0x80000000,8388608,32768,128],u=[24,16,8,0],f=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],p=["hex","array","digest","arrayBuffer"],g=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(N){return Object.prototype.toString.call(N)==="[object Array]"}),a&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(N){return typeof N=="object"&&N.buffer&&N.buffer.constructor===ArrayBuffer});var x=function(N,D){return function(L){return new M(D,!0).update(L)[N]()}},S=function(N){var D=x("hex",N);s&&(D=_(D,N)),D.create=function(){return new M(N)},D.update=function(A){return D.create().update(A)};for(var L=0;L<p.length;++L){var R=p[L];D[R]=x(R,N)}return D},_=function(N,D){var L=PD,R=PD.Buffer,A=D?"sha224":"sha256",P;R.from&&!r.JS_SHA256_NO_BUFFER_FROM?P=R.from:P=function(U){return new R(U)};var j=function(U){if(typeof U=="string")return L.createHash(A).update(U,"utf8").digest("hex");if(U==null)throw new Error(e);return U.constructor===ArrayBuffer&&(U=new Uint8Array(U)),Array.isArray(U)||ArrayBuffer.isView(U)||U.constructor===R?L.createHash(A).update(P(U)).digest("hex"):N(U)};return j},b=function(N,D){return function(L,R){return new T(L,D,!0).update(R)[N]()}},E=function(N){var D=b("hex",N);D.create=function(A){return new T(A,N)},D.update=function(A,P){return D.create(A).update(P)};for(var L=0;L<p.length;++L){var R=p[L];D[R]=b(R,N)}return D};function M(N,D){D?(g[0]=g[16]=g[1]=g[2]=g[3]=g[4]=g[5]=g[6]=g[7]=g[8]=g[9]=g[10]=g[11]=g[12]=g[13]=g[14]=g[15]=0,this.blocks=g):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],N?(this.h0=0xc1059ed8,this.h1=0x367cd507,this.h2=0x3070dd17,this.h3=0xf70e5939,this.h4=0xffc00b31,this.h5=0x68581511,this.h6=0x64f98fa7,this.h7=0xbefa4fa4):(this.h0=0x6a09e667,this.h1=0xbb67ae85,this.h2=0x3c6ef372,this.h3=0xa54ff53a,this.h4=0x510e527f,this.h5=0x9b05688c,this.h6=0x1f83d9ab,this.h7=0x5be0cd19),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=N}M.prototype.update=function(N){if(!this.finalized){var D,L=typeof N;if(L!=="string"){if(L==="object"){if(N===null)throw new Error(e);if(a&&N.constructor===ArrayBuffer)N=new Uint8Array(N);else if(!Array.isArray(N)&&(!a||!ArrayBuffer.isView(N)))throw new Error(e)}else throw new Error(e);D=!0}for(var R,A=0,P,j=N.length,U=this.blocks;A<j;){if(this.hashed&&(this.hashed=!1,U[0]=this.block,this.block=U[16]=U[1]=U[2]=U[3]=U[4]=U[5]=U[6]=U[7]=U[8]=U[9]=U[10]=U[11]=U[12]=U[13]=U[14]=U[15]=0),D)for(P=this.start;A<j&&P<64;++A)U[P>>>2]|=N[A]<<u[P++&3];else for(P=this.start;A<j&&P<64;++A)R=N.charCodeAt(A),R<128?U[P>>>2]|=R<<u[P++&3]:R<2048?(U[P>>>2]|=(192|R>>>6)<<u[P++&3],U[P>>>2]|=(128|R&63)<<u[P++&3]):R<55296||R>=57344?(U[P>>>2]|=(224|R>>>12)<<u[P++&3],U[P>>>2]|=(128|R>>>6&63)<<u[P++&3],U[P>>>2]|=(128|R&63)<<u[P++&3]):(R=65536+((R&1023)<<10|N.charCodeAt(++A)&1023),U[P>>>2]|=(240|R>>>18)<<u[P++&3],U[P>>>2]|=(128|R>>>12&63)<<u[P++&3],U[P>>>2]|=(128|R>>>6&63)<<u[P++&3],U[P>>>2]|=(128|R&63)<<u[P++&3]);this.lastByteIndex=P,this.bytes+=P-this.start,P>=64?(this.block=U[16],this.start=P-64,this.hash(),this.hashed=!0):this.start=P}return this.bytes>0xffffffff&&(this.hBytes+=this.bytes/0x100000000<<0,this.bytes=this.bytes%0x100000000),this}},M.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var N=this.blocks,D=this.lastByteIndex;N[16]=this.block,N[D>>>2]|=c[D&3],this.block=N[16],D>=56&&(this.hashed||this.hash(),N[0]=this.block,N[16]=N[1]=N[2]=N[3]=N[4]=N[5]=N[6]=N[7]=N[8]=N[9]=N[10]=N[11]=N[12]=N[13]=N[14]=N[15]=0),N[14]=this.hBytes<<3|this.bytes>>>29,N[15]=this.bytes<<3,this.hash()}},M.prototype.hash=function(){var N=this.h0,D=this.h1,L=this.h2,R=this.h3,A=this.h4,P=this.h5,j=this.h6,U=this.h7,B=this.blocks,$,q,te,W,Z,J,Y,oe,ce,ie,ue;for($=16;$<64;++$)Z=B[$-15],q=(Z>>>7|Z<<25)^(Z>>>18|Z<<14)^Z>>>3,Z=B[$-2],te=(Z>>>17|Z<<15)^(Z>>>19|Z<<13)^Z>>>10,B[$]=B[$-16]+q+B[$-7]+te<<0;for(ue=D&L,$=0;$<64;$+=4)this.first?(this.is224?(oe=300032,Z=B[0]-0x543c9a5b,U=Z-0x8f1a6c7<<0,R=Z+0x170e9b5<<0):(oe=0x2a01a605,Z=B[0]-0xc881298,U=Z-0x5ab00ac6<<0,R=Z+0x8909ae5<<0),this.first=!1):(q=(N>>>2|N<<30)^(N>>>13|N<<19)^(N>>>22|N<<10),te=(A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7),oe=N&D,W=oe^N&L^ue,Y=A&P^~A&j,Z=U+te+Y+f[$]+B[$],J=q+W,U=R+Z<<0,R=Z+J<<0),q=(R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10),te=(U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7),ce=R&N,W=ce^R&D^oe,Y=U&A^~U&P,Z=j+te+Y+f[$+1]+B[$+1],J=q+W,j=L+Z<<0,L=Z+J<<0,q=(L>>>2|L<<30)^(L>>>13|L<<19)^(L>>>22|L<<10),te=(j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7),ie=L&R,W=ie^L&N^ce,Y=j&U^~j&A,Z=P+te+Y+f[$+2]+B[$+2],J=q+W,P=D+Z<<0,D=Z+J<<0,q=(D>>>2|D<<30)^(D>>>13|D<<19)^(D>>>22|D<<10),te=(P>>>6|P<<26)^(P>>>11|P<<21)^(P>>>25|P<<7),ue=D&L,W=ue^D&R^ie,Y=P&j^~P&U,Z=A+te+Y+f[$+3]+B[$+3],J=q+W,A=N+Z<<0,N=Z+J<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+N<<0,this.h1=this.h1+D<<0,this.h2=this.h2+L<<0,this.h3=this.h3+R<<0,this.h4=this.h4+A<<0,this.h5=this.h5+P<<0,this.h6=this.h6+j<<0,this.h7=this.h7+U<<0},M.prototype.hex=function(){this.finalize();var N=this.h0,D=this.h1,L=this.h2,R=this.h3,A=this.h4,P=this.h5,j=this.h6,U=this.h7,B=l[N>>>28&15]+l[N>>>24&15]+l[N>>>20&15]+l[N>>>16&15]+l[N>>>12&15]+l[N>>>8&15]+l[N>>>4&15]+l[N&15]+l[D>>>28&15]+l[D>>>24&15]+l[D>>>20&15]+l[D>>>16&15]+l[D>>>12&15]+l[D>>>8&15]+l[D>>>4&15]+l[D&15]+l[L>>>28&15]+l[L>>>24&15]+l[L>>>20&15]+l[L>>>16&15]+l[L>>>12&15]+l[L>>>8&15]+l[L>>>4&15]+l[L&15]+l[R>>>28&15]+l[R>>>24&15]+l[R>>>20&15]+l[R>>>16&15]+l[R>>>12&15]+l[R>>>8&15]+l[R>>>4&15]+l[R&15]+l[A>>>28&15]+l[A>>>24&15]+l[A>>>20&15]+l[A>>>16&15]+l[A>>>12&15]+l[A>>>8&15]+l[A>>>4&15]+l[A&15]+l[P>>>28&15]+l[P>>>24&15]+l[P>>>20&15]+l[P>>>16&15]+l[P>>>12&15]+l[P>>>8&15]+l[P>>>4&15]+l[P&15]+l[j>>>28&15]+l[j>>>24&15]+l[j>>>20&15]+l[j>>>16&15]+l[j>>>12&15]+l[j>>>8&15]+l[j>>>4&15]+l[j&15];return this.is224||(B+=l[U>>>28&15]+l[U>>>24&15]+l[U>>>20&15]+l[U>>>16&15]+l[U>>>12&15]+l[U>>>8&15]+l[U>>>4&15]+l[U&15]),B},M.prototype.toString=M.prototype.hex,M.prototype.digest=function(){this.finalize();var N=this.h0,D=this.h1,L=this.h2,R=this.h3,A=this.h4,P=this.h5,j=this.h6,U=this.h7,B=[N>>>24&255,N>>>16&255,N>>>8&255,N&255,D>>>24&255,D>>>16&255,D>>>8&255,D&255,L>>>24&255,L>>>16&255,L>>>8&255,L&255,R>>>24&255,R>>>16&255,R>>>8&255,R&255,A>>>24&255,A>>>16&255,A>>>8&255,A&255,P>>>24&255,P>>>16&255,P>>>8&255,P&255,j>>>24&255,j>>>16&255,j>>>8&255,j&255];return this.is224||B.push(U>>>24&255,U>>>16&255,U>>>8&255,U&255),B},M.prototype.array=M.prototype.digest,M.prototype.arrayBuffer=function(){this.finalize();var N=new ArrayBuffer(this.is224?28:32),D=new DataView(N);return D.setUint32(0,this.h0),D.setUint32(4,this.h1),D.setUint32(8,this.h2),D.setUint32(12,this.h3),D.setUint32(16,this.h4),D.setUint32(20,this.h5),D.setUint32(24,this.h6),this.is224||D.setUint32(28,this.h7),N};function T(N,D,L){var R,A=typeof N;if(A==="string"){var P=[],j=N.length,U=0,B;for(R=0;R<j;++R)B=N.charCodeAt(R),B<128?P[U++]=B:B<2048?(P[U++]=192|B>>>6,P[U++]=128|B&63):B<55296||B>=57344?(P[U++]=224|B>>>12,P[U++]=128|B>>>6&63,P[U++]=128|B&63):(B=65536+((B&1023)<<10|N.charCodeAt(++R)&1023),P[U++]=240|B>>>18,P[U++]=128|B>>>12&63,P[U++]=128|B>>>6&63,P[U++]=128|B&63);N=P}else if(A==="object"){if(N===null)throw new Error(e);if(a&&N.constructor===ArrayBuffer)N=new Uint8Array(N);else if(!Array.isArray(N)&&(!a||!ArrayBuffer.isView(N)))throw new Error(e)}else throw new Error(e);N.length>64&&(N=new M(D,!0).update(N).array());var $=[],q=[];for(R=0;R<64;++R){var te=N[R]||0;$[R]=92^te,q[R]=54^te}M.call(this,D,L),this.update(q),this.oKeyPad=$,this.inner=!0,this.sharedMemory=L}T.prototype=new M,T.prototype.finalize=function(){if(M.prototype.finalize.call(this),this.inner){this.inner=!1;var N=this.array();M.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(N),M.prototype.finalize.call(this)}};var k=S();k.sha256=k,k.sha224=S(!0),k.sha256.hmac=E(),k.sha224.hmac=E(!0),o?t.exports=k:(r.sha256=k.sha256,r.sha224=k.sha224)})()}(RI)),RI.exports}var FN=aZ();const lZ=FN.sha224,dV=({index:t,key:e,fallback:n})=>t[lZ(e)]?.value??t[e]?.value??n??e,cZ=({index:t,key:e,fallback:n})=>dV({index:t,key:e,fallback:n}),uZ=({index:t,key:e,fallback:n})=>dV({index:t,key:e,fallback:n}),na={index:{},push(t){this.index={...this.index,...t}},text:(t,e)=>cZ({index:na.index,key:t,fallback:e}),rich:(t,e)=>uZ({index:na.index,key:t,fallback:e})};function Ef(t){return typeof t>"u"||t===void 0}function Aa(t){return typeof t=="string"}function RM(t){return typeof t=="number"}function P1(t){return typeof t=="boolean"}function p2(t){return t===null}function dZ(t){return t instanceof Date}function m2(t){return typeof t=="bigint"}function La(t){return typeof t=="function"}function Mc(t){return typeof t=="object"&&t!==null}function ee(t){return Object.freeze(t)}function h_(t){return rd(t)?t:[t]}function rd(t){return Array.isArray(t)}function Mf(t){return t}const gr=ee({is(t){return t.kind==="AlterTableNode"},create(t){return ee({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return ee({...t,...e})},cloneWithColumnAlteration(t,e){return ee({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),Hr=ee({is(t){return t.kind==="IdentifierNode"},create(t){return ee({kind:"IdentifierNode",name:t})}}),ju=ee({is(t){return t.kind==="CreateIndexNode"},create(t){return ee({kind:"CreateIndexNode",name:Hr.create(t)})},cloneWith(t,e){return ee({...t,...e})},cloneWithColumns(t,e){return ee({...t,columns:[...t.columns||[],...e]})}}),fV=ee({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return ee({kind:"CreateSchemaNode",schema:Hr.create(t),...e})},cloneWith(t,e){return ee({...t,...e})}}),fZ=["preserve rows","delete rows","drop"],ba=ee({is(t){return t.kind==="CreateTableNode"},create(t){return ee({kind:"CreateTableNode",table:t,columns:ee([])})},cloneWithColumn(t,e){return ee({...t,columns:ee([...t.columns,e])})},cloneWithConstraint(t,e){return ee({...t,constraints:t.constraints?ee([...t.constraints,e]):ee([e])})},cloneWithFrontModifier(t,e){return ee({...t,frontModifiers:t.frontModifiers?ee([...t.frontModifiers,e]):ee([e])})},cloneWithEndModifier(t,e){return ee({...t,endModifiers:t.endModifiers?ee([...t.endModifiers,e]):ee([e])})},cloneWith(t,e){return ee({...t,...e})}}),kf=ee({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return ee({kind:"SchemableIdentifierNode",identifier:Hr.create(t)})},createWithSchema(t,e){return ee({kind:"SchemableIdentifierNode",schema:Hr.create(t),identifier:Hr.create(e)})}}),Xx=ee({is(t){return t.kind==="DropIndexNode"},create(t,e){return ee({kind:"DropIndexNode",name:kf.create(t),...e})},cloneWith(t,e){return ee({...t,...e})}}),BN=ee({is(t){return t.kind==="DropSchemaNode"},create(t,e){return ee({kind:"DropSchemaNode",schema:Hr.create(t),...e})},cloneWith(t,e){return ee({...t,...e})}}),jN=ee({is(t){return t.kind==="DropTableNode"},create(t,e){return ee({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return ee({...t,...e})}}),$f=ee({is(t){return t.kind==="AliasNode"},create(t,e){return ee({kind:"AliasNode",node:t,alias:e})}}),Tf=ee({is(t){return t.kind==="TableNode"},create(t){return ee({kind:"TableNode",table:kf.create(t)})},createWithSchema(t,e){return ee({kind:"TableNode",table:kf.createWithSchema(t,e)})}});function ra(t){return Mc(t)&&La(t.toOperationNode)}function hZ(t){return Mc(t)&&"expressionType"in t&&ra(t)}function pZ(t){return Mc(t)&&"expression"in t&&Aa(t.alias)&&ra(t)}const Ru=ee({is(t){return t.kind==="SelectModifierNode"},create(t,e){return ee({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return ee({kind:"SelectModifierNode",rawModifier:t})}}),Of=ee({is(t){return t.kind==="AndNode"},create(t,e){return ee({kind:"AndNode",left:t,right:e})}}),Yy=ee({is(t){return t.kind==="OrNode"},create(t,e){return ee({kind:"OrNode",left:t,right:e})}}),AI=ee({is(t){return t.kind==="OnNode"},create(t){return ee({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return ee({...t,on:e==="And"?Of.create(t.on,n):Yy.create(t.on,n)})}}),Kx=ee({is(t){return t.kind==="JoinNode"},create(t,e){return ee({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return ee({kind:"JoinNode",joinType:t,table:e,on:AI.create(n)})},cloneWithOn(t,e){return ee({...t,on:t.on?AI.cloneWithOperation(t.on,"And",e):AI.create(e)})}}),_y=ee({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return ee({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),mZ=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],gZ=["+","-","*","/","%","^","&","|","#","<<",">>"],hV=["->","->>"],yZ=[...mZ,...gZ,"&&","||"],vZ=["exists","not exists"],xZ=["not","-",...vZ],bZ=[...yZ,...hV,...xZ,"between","between symmetric"],Lf=ee({is(t){return t.kind==="OperatorNode"},create(t){return ee({kind:"OperatorNode",operator:t})}});function OD(t){return Aa(t)&&hV.includes(t)}const Mi=ee({is(t){return t.kind==="ColumnNode"},create(t){return ee({kind:"ColumnNode",column:Hr.create(t)})}}),g2=ee({is(t){return t.kind==="SelectAllNode"},create(){return ee({kind:"SelectAllNode"})}}),AM=ee({is(t){return t.kind==="ReferenceNode"},create(t,e){return ee({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return ee({kind:"ReferenceNode",table:t,column:g2.create()})}});class wZ{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return vV(this.#e)}}function pV(t){return Mc(t)&&ra(t)&&Aa(t.dynamicReference)}const UN=ee({is(t){return t.kind==="OrderByItemNode"},create(t,e){return ee({kind:"OrderByItemNode",orderBy:t,direction:e})}}),Vs=ee({is(t){return t.kind==="RawNode"},create(t,e){return ee({kind:"RawNode",sqlFragments:ee(t),parameters:ee(e)})},createWithSql(t){return Vs.create([t],[])},createWithChild(t){return Vs.create(["",""],[t])},createWithChildren(t){return Vs.create(new Array(t.length+1).fill(""),t)}});function mV(t){return t==="asc"||t==="desc"}function Tb(t){if(t.length===2)return[NI(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>NI(n)):[NI(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function NI(t,e){const n=_Z(t);if(UN.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return UN.create(n,gV(e))}function _Z(t){if(Nb(t))return nm(t);if(pV(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!mV(n))throw new Error(`Invalid order by direction: ${n}`);return UN.create(id(e),gV(n))}return id(t)}function gV(t){if(t)return t==="asc"||t==="desc"?Vs.createWithSql(t):t.toOperationNode()}const k1=ee({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return ee({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return ee({...t,traversal:e})}}),yV=ee({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return ee({kind:"JSONOperatorChainNode",operator:t,values:ee([])})},cloneWithValue(t,e){return ee({...t,values:ee([...t.values,e])})}}),Yx=ee({is(t){return t.kind==="JSONPathNode"},create(t){return ee({kind:"JSONPathNode",inOperator:t,pathLegs:ee([])})},cloneWithLeg(t,e){return ee({...t,pathLegs:ee([...t.pathLegs,e])})}});function vV(t){return Aa(t)?id(t):t.toOperationNode()}function b0(t){return rd(t)?t.map(e=>Ea(e)):[Ea(t)]}function Ea(t){return Nb(t)?nm(t):vV(t)}function SZ(t,e){const n=id(t);if(OD(e))return k1.create(n,yV.create(Lf.create(e)));const r=e.slice(0,-1);if(OD(r))return k1.create(n,Yx.create(Lf.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function id(t){const e=".";if(!t.includes(e))return AM.create(Mi.create(t));const n=t.split(e).map(y2);if(n.length===3)return MZ(n);if(n.length===2)return TZ(n);throw new Error(`invalid column reference ${t}`)}function EZ(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(y2);return $f.create(id(n),Hr.create(r))}else return id(t)}function xV(t){return Mi.create(t)}function O1(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(y2);if(!mV(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return Tb([n,r])[0]}else return xV(t)}function MZ(t){const[e,n,r]=t;return AM.create(Mi.create(r),Tf.createWithSchema(e,n))}function TZ(t){const[e,n]=t;return AM.create(Mi.create(n),Tf.create(e))}function y2(t){return t.trim()}const bV=ee({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return ee({kind:"PrimitiveValueListNode",values:ee([...t])})}}),v2=ee({is(t){return t.kind==="ValueListNode"},create(t){return ee({kind:"ValueListNode",values:ee(t)})}}),Bc=ee({is(t){return t.kind==="ValueNode"},create(t){return ee({kind:"ValueNode",value:t})},createImmediate(t){return ee({kind:"ValueNode",value:t,immediate:!0})}});function CZ(t){return rd(t)?IZ(t):Fi(t)}function Fi(t){return Nb(t)?nm(t):Bc.create(t)}function x2(t){return RM(t)||P1(t)||p2(t)}function b2(t){if(!x2(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return Bc.createImmediate(t)}function IZ(t){return t.some(Nb)?v2.create(t.map(e=>Fi(e))):bV.create(t)}const Sy=ee({is(t){return t.kind==="ParensNode"},create(t){return ee({kind:"ParensNode",node:t})}});function Cs(t){if(t.length===3)return w2(t[0],t[1],t[2]);if(t.length===1)return Fi(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function w2(t,e,n){return RZ(e)&&wV(n)?_y.create(Ea(t),zN(e),Bc.createImmediate(n)):_y.create(Ea(t),zN(e),CZ(n))}function jc(t,e,n){return _y.create(Ea(t),zN(e),Ea(n))}function LD(t,e){return L1(Object.entries(t).filter(([,n])=>!Ef(n)).map(([n,r])=>w2(n,wV(r)?"is":"=",r)),e)}function L1(t,e,n=!0){const r=e==="and"?Of.create:Yy.create;if(t.length===0)return _y.create(Bc.createImmediate(1),Lf.create("="),Bc.createImmediate(e==="and"?1:0));let i=DD(t[0]);for(let s=1;s<t.length;++s)i=r(i,DD(t[s]));return t.length>1&&n?Sy.create(i):i}function RZ(t){return t==="is"||t==="is not"}function wV(t){return p2(t)||P1(t)}function zN(t){if(Aa(t)&&bZ.includes(t))return Lf.create(t);if(ra(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function DD(t){return ra(t)?t.toOperationNode():t}const Df=ee({is(t){return t.kind==="OrderByNode"},create(t){return ee({kind:"OrderByNode",items:ee([...t])})},cloneWithItems(t,e){return ee({...t,items:ee([...t.items,...e])})}}),FD=ee({is(t){return t.kind==="PartitionByNode"},create(t){return ee({kind:"PartitionByNode",items:ee(t)})},cloneWithItems(t,e){return ee({...t,items:ee([...t.items,...e])})}}),VN=ee({is(t){return t.kind==="OverNode"},create(){return ee({kind:"OverNode"})},cloneWithOrderByItems(t,e){return ee({...t,orderBy:t.orderBy?Df.cloneWithItems(t.orderBy,e):Df.create(e)})},cloneWithPartitionByItems(t,e){return ee({...t,partitionBy:t.partitionBy?FD.cloneWithItems(t.partitionBy,e):FD.create(e)})}}),D1=ee({is(t){return t.kind==="FromNode"},create(t){return ee({kind:"FromNode",froms:ee(t)})},cloneWithFroms(t,e){return ee({...t,froms:ee([...t.froms,...e])})}}),BD=ee({is(t){return t.kind==="GroupByNode"},create(t){return ee({kind:"GroupByNode",items:ee(t)})},cloneWithItems(t,e){return ee({...t,items:ee([...t.items,...e])})}}),jD=ee({is(t){return t.kind==="HavingNode"},create(t){return ee({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return ee({...t,having:e==="And"?Of.create(t.having,n):Yy.create(t.having,n)})}}),mr=ee({is(t){return t.kind==="SelectQueryNode"},create(t){return ee({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return ee({kind:"SelectQueryNode",from:D1.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return ee({...t,selections:t.selections?ee([...t.selections,...e]):ee(e)})},cloneWithDistinctOn(t,e){return ee({...t,distinctOn:t.distinctOn?ee([...t.distinctOn,...e]):ee(e)})},cloneWithFrontModifier(t,e){return ee({...t,frontModifiers:t.frontModifiers?ee([...t.frontModifiers,e]):ee([e])})},cloneWithOrderByItems(t,e){return ee({...t,orderBy:t.orderBy?Df.cloneWithItems(t.orderBy,e):Df.create(e)})},cloneWithGroupByItems(t,e){return ee({...t,groupBy:t.groupBy?BD.cloneWithItems(t.groupBy,e):BD.create(e)})},cloneWithLimit(t,e){return ee({...t,limit:e})},cloneWithOffset(t,e){return ee({...t,offset:e})},cloneWithFetch(t,e){return ee({...t,fetch:e})},cloneWithHaving(t,e){return ee({...t,having:t.having?jD.cloneWithOperation(t.having,"And",e):jD.create(e)})},cloneWithSetOperations(t,e){return ee({...t,setOperations:t.setOperations?ee([...t.setOperations,...e]):ee([...e])})},cloneWithoutSelections(t){return ee({...t,selections:[]})},cloneWithoutLimit(t){return ee({...t,limit:void 0})},cloneWithoutOffset(t){return ee({...t,offset:void 0})},cloneWithoutOrderBy(t){return ee({...t,orderBy:void 0})},cloneWithoutGroupBy(t){return ee({...t,groupBy:void 0})}});function On(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}class ly{#e;constructor(e){this.#e=ee(e)}on(...e){return new ly({...this.#e,joinNode:Kx.cloneWithOn(this.#e.joinNode,Cs(e))})}onRef(e,n,r){return new ly({...this.#e,joinNode:Kx.cloneWithOn(this.#e.joinNode,jc(e,n,r))})}onTrue(){return new ly({...this.#e,joinNode:Kx.cloneWithOn(this.#e.joinNode,Vs.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}On(ly,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const AZ=ee({is(t){return t.kind==="PartitionByItemNode"},create(t){return ee({kind:"PartitionByItemNode",partitionBy:t})}});function NZ(t){return b0(t).map(AZ.create)}class w0{#e;constructor(e){this.#e=ee(e)}orderBy(e,n){return new w0({overNode:VN.cloneWithOrderByItems(this.#e.overNode,Tb([e,n]))})}partitionBy(e){return new w0({overNode:VN.cloneWithPartitionByItems(this.#e.overNode,NZ(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}On(w0,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const Zx=ee({is(t){return t.kind==="SelectionNode"},create(t){return ee({kind:"SelectionNode",selection:t})},createSelectAll(){return ee({kind:"SelectionNode",selection:g2.create()})},createSelectAllFromTable(t){return ee({kind:"SelectionNode",selection:AM.createSelectAll(t)})}});function Yl(t){return La(t)?Yl(t(Jy())):rd(t)?t.map(e=>UD(e)):[UD(t)]}function UD(t){return Aa(t)?Zx.create(EZ(t)):pV(t)?Zx.create(t.toOperationNode()):Zx.create(OV(t))}function Uc(t){return t?Array.isArray(t)?t.map(zD):[zD(t)]:[Zx.createSelectAll()]}function zD(t){if(Aa(t))return Zx.createSelectAllFromTable(_i(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const PZ=ee({is(t){return t.kind==="ValuesNode"},create(t){return ee({kind:"ValuesNode",values:ee(t)})}}),kZ=ee({is(t){return t.kind==="DefaultInsertValueNode"},create(){return ee({kind:"DefaultInsertValueNode"})}});function _V(t){const e=La(t)?t(Jy()):t,n=rd(e)?e:ee([e]);return OZ(n)}function OZ(t){const e=LZ(t);return[ee([...e.keys()].map(Mi.create)),PZ.create(t.map(n=>DZ(n,e)))]}function LZ(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const i of r)!e.has(i)&&n[i]!==void 0&&e.set(i,e.size)}return e}function DZ(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let i=!1;for(const o of n){const a=e.get(o);if(Ef(a))continue;const l=t[o];(Ef(l)||Nb(l))&&(i=!0),r[a]=l}if(n.length<e.size||i){const o=kZ.create();return v2.create(r.map(a=>Ef(a)?o:Fi(a)))}return bV.create(r)}const _a=ee({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return ee({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},createWithoutInto(){return ee({kind:"InsertQueryNode"})},cloneWith(t,e){return ee({...t,...e})}}),cy=ee({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return ee({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return ee({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return ee({...t,from:t.from?D1.cloneWithFroms(t.from,e):D1.create(e)})},cloneWithUpdates(t,e){return ee({...t,updates:t.updates?ee([...t.updates,...e]):e})},cloneWithLimit(t,e){return ee({...t,limit:e})}}),VD=ee({is(t){return t.kind==="UsingNode"},create(t){return ee({kind:"UsingNode",tables:ee(t)})},cloneWithTables(t,e){return ee({...t,tables:ee([...t.tables,...e])})}}),dp=ee({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return ee({kind:"DeleteQueryNode",from:D1.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return ee({...t,orderBy:t.orderBy?Df.cloneWithItems(t.orderBy,e):Df.create(e)})},cloneWithoutOrderBy(t){return ee({...t,orderBy:void 0})},cloneWithLimit(t,e){return ee({...t,limit:e})},cloneWithoutLimit(t){return ee({...t,limit:void 0})},cloneWithUsing(t,e){return ee({...t,using:t.using!==void 0?VD.cloneWithTables(t.using,e):VD.create(e)})}}),Go=ee({is(t){return t.kind==="WhereNode"},create(t){return ee({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return ee({...t,where:e==="And"?Of.create(t.where,n):Yy.create(t.where,n)})}}),WD=ee({is(t){return t.kind==="ReturningNode"},create(t){return ee({kind:"ReturningNode",selections:ee(t)})},cloneWithSelections(t,e){return ee({...t,selections:t.selections?ee([...t.selections,...e]):ee(e)})}}),FZ=ee({is(t){return t.kind==="ExplainNode"},create(t,e){return ee({kind:"ExplainNode",format:t,options:e})}}),Cb=ee({is(t){return t.kind==="WhenNode"},create(t){return ee({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return ee({...t,result:e})}}),Zo=ee({is(t){return t.kind==="MergeQueryNode"},create(t,e){return ee({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return ee({...t,using:e})},cloneWithWhen(t,e){return ee({...t,whens:t.whens?ee([...t.whens,e]):ee([e])})},cloneWithThen(t,e){return ee({...t,whens:t.whens?ee([...t.whens.slice(0,-1),Cb.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}}),qD=ee({is(t){return t.kind==="OutputNode"},create(t){return ee({kind:"OutputNode",selections:ee(t)})},cloneWithSelections(t,e){return ee({...t,selections:t.selections?ee([...t.selections,...e]):ee(e)})}}),Lt=ee({is(t){return mr.is(t)||_a.is(t)||cy.is(t)||dp.is(t)||Zo.is(t)},cloneWithEndModifier(t,e){return ee({...t,endModifiers:t.endModifiers?ee([...t.endModifiers,e]):ee([e])})},cloneWithWhere(t,e){return ee({...t,where:t.where?Go.cloneWithOperation(t.where,"And",e):Go.create(e)})},cloneWithJoin(t,e){return ee({...t,joins:t.joins?ee([...t.joins,e]):ee([e])})},cloneWithReturning(t,e){return ee({...t,returning:t.returning?WD.cloneWithSelections(t.returning,e):WD.create(e)})},cloneWithoutReturning(t){return ee({...t,returning:void 0})},cloneWithoutWhere(t){return ee({...t,where:void 0})},cloneWithExplain(t,e,n){return ee({...t,explain:FZ.create(e,n?.toOperationNode())})},cloneWithTop(t,e){return ee({...t,top:e})},cloneWithOutput(t,e){return ee({...t,output:t.output?qD.cloneWithSelections(t.output,e):qD.create(e)})}}),SV=ee({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return ee({kind:"ColumnUpdateNode",column:t,value:e})}});function BZ(...t){return t.length===2?[SV.create(Ea(t[0]),Fi(t[1]))]:_2(t[0])}function _2(t){const e=La(t)?t(Jy()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>SV.create(Mi.create(n),Fi(r)))}const jZ=ee({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return ee({kind:"OnDuplicateKeyNode",updates:t})}});class UZ{insertId;numInsertedOrUpdatedRows;constructor(e,n){this.insertId=e,this.numInsertedOrUpdatedRows=n}}class Ib extends Error{node;constructor(e){super("no result"),this.node=e}}function Rb(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const wa=ee({is(t){return t.kind==="OnConflictNode"},create(){return ee({kind:"OnConflictNode"})},cloneWith(t,e){return ee({...t,...e})},cloneWithIndexWhere(t,e){return ee({...t,indexWhere:t.indexWhere?Go.cloneWithOperation(t.indexWhere,"And",e):Go.create(e)})},cloneWithIndexOrWhere(t,e){return ee({...t,indexWhere:t.indexWhere?Go.cloneWithOperation(t.indexWhere,"Or",e):Go.create(e)})},cloneWithUpdateWhere(t,e){return ee({...t,updateWhere:t.updateWhere?Go.cloneWithOperation(t.updateWhere,"And",e):Go.create(e)})},cloneWithUpdateOrWhere(t,e){return ee({...t,updateWhere:t.updateWhere?Go.cloneWithOperation(t.updateWhere,"Or",e):Go.create(e)})},cloneWithoutIndexWhere(t){return ee({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return ee({...t,updateWhere:void 0})}});class Ec{#e;constructor(e){this.#e=ee(e)}column(e){const n=Mi.create(e);return new Ec({...this.#e,onConflictNode:wa.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?ee([...this.#e.onConflictNode.columns,n]):ee([n])})})}columns(e){const n=e.map(Mi.create);return new Ec({...this.#e,onConflictNode:wa.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?ee([...this.#e.onConflictNode.columns,...n]):ee(n)})})}constraint(e){return new Ec({...this.#e,onConflictNode:wa.cloneWith(this.#e.onConflictNode,{constraint:Hr.create(e)})})}expression(e){return new Ec({...this.#e,onConflictNode:wa.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Ec({...this.#e,onConflictNode:wa.cloneWithIndexWhere(this.#e.onConflictNode,Cs(e))})}whereRef(e,n,r){return new Ec({...this.#e,onConflictNode:wa.cloneWithIndexWhere(this.#e.onConflictNode,jc(e,n,r))})}clearWhere(){return new Ec({...this.#e,onConflictNode:wa.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new EV({...this.#e,onConflictNode:wa.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new uy({...this.#e,onConflictNode:wa.cloneWith(this.#e.onConflictNode,{updates:_2(e)})})}$call(e){return e(this)}}On(Ec,"don't await OnConflictBuilder instances.");class EV{#e;constructor(e){this.#e=ee(e)}toOperationNode(){return this.#e.onConflictNode}}On(EV,"don't await OnConflictDoNothingBuilder instances.");class uy{#e;constructor(e){this.#e=ee(e)}where(...e){return new uy({...this.#e,onConflictNode:wa.cloneWithUpdateWhere(this.#e.onConflictNode,Cs(e))})}whereRef(e,n,r){return new uy({...this.#e,onConflictNode:wa.cloneWithUpdateWhere(this.#e.onConflictNode,jc(e,n,r))})}clearWhere(){return new uy({...this.#e,onConflictNode:wa.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}On(uy,"don't await OnConflictUpdateBuilder instances.");const zZ=ee({is(t){return t.kind==="TopNode"},create(t,e){return ee({kind:"TopNode",expression:t,modifiers:e})}});function Zy(t,e){if(!RM(t)&&!m2(t))throw new Error(`Invalid top expression: ${t}`);if(!Ef(e)&&!VZ(e))throw new Error(`Invalid top modifiers: ${e}`);return zZ.create(t,e)}function VZ(t){return t==="percent"||t==="with ties"||t==="percent with ties"}class Wr{#e;constructor(e){this.#e=ee(e)}values(e){const[n,r]=_V(e);return new Wr({...this.#e,queryNode:_a.cloneWith(this.#e.queryNode,{columns:n,values:r})})}columns(e){return new Wr({...this.#e,queryNode:_a.cloneWith(this.#e.queryNode,{columns:ee(e.map(Mi.create))})})}expression(e){return new Wr({...this.#e,queryNode:_a.cloneWith(this.#e.queryNode,{values:nm(e)})})}defaultValues(){return new Wr({...this.#e,queryNode:_a.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new Wr({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new Wr({...this.#e,queryNode:_a.cloneWith(this.#e.queryNode,{ignore:!0})})}top(e,n){return new Wr({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,Zy(e,n))})}onConflict(e){return new Wr({...this.#e,queryNode:_a.cloneWith(this.#e.queryNode,{onConflict:e(new Ec({onConflictNode:wa.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new Wr({...this.#e,queryNode:_a.cloneWith(this.#e.queryNode,{onDuplicateKey:jZ.create(_2(e))})})}returning(e){return new Wr({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,Yl(e))})}returningAll(){return new Wr({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,Uc())})}output(e){return new Wr({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Yl(e))})}outputAll(e){return new Wr({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Uc(e))})}clearReturning(){return new Wr({...this.#e,queryNode:Lt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new Wr({...this.#e})}$castTo(){return new Wr(this.#e)}$narrowType(){return new Wr(this.#e)}$assertType(){return new Wr(this.#e)}withPlugin(e){return new Wr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new UZ(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Ib){const n=await this.executeTakeFirst();if(n===void 0)throw Rb(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Wr({...this.#e,queryNode:Lt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}On(Wr,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class WZ{numDeletedRows;constructor(e){this.numDeletedRows=e}}const S2=ee({is(t){return t.kind==="LimitNode"},create(t){return ee({kind:"LimitNode",limit:t})}});class pr{#e;constructor(e){this.#e=ee(e)}where(...e){return new pr({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,Cs(e))})}whereRef(e,n,r){return new pr({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,jc(e,n,r))})}clearWhere(){return new pr({...this.#e,queryNode:Lt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new pr({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,Zy(e,n))})}using(e){return new pr({...this.#e,queryNode:dp.cloneWithUsing(this.#e.queryNode,E0(e))})}innerJoin(...e){return new pr({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("InnerJoin",e))})}leftJoin(...e){return new pr({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("LeftJoin",e))})}rightJoin(...e){return new pr({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("RightJoin",e))})}fullJoin(...e){return new pr({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("FullJoin",e))})}returning(e){return new pr({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,Yl(e))})}returningAll(e){return new pr({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,Uc(e))})}output(e){return new pr({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Yl(e))})}outputAll(e){return new pr({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Uc(e))})}clearReturning(){return new pr({...this.#e,queryNode:Lt.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new pr({...this.#e,queryNode:dp.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new pr({...this.#e,queryNode:dp.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(e,n){return new pr({...this.#e,queryNode:dp.cloneWithOrderByItems(this.#e.queryNode,Tb([e,n]))})}limit(e){return new pr({...this.#e,queryNode:dp.cloneWithLimit(this.#e.queryNode,S2.create(Fi(e)))})}modifyEnd(e){return new pr({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,n){return e?n(this):new pr({...this.#e})}$castTo(){return new pr(this.#e)}$narrowType(){return new pr(this.#e)}$assertType(){return new pr(this.#e)}withPlugin(e){return new pr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new WZ(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Ib){const n=await this.executeTakeFirst();if(n===void 0)throw Rb(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new pr({...this.#e,queryNode:Lt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}On(pr,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class qZ{numUpdatedRows;numChangedRows;constructor(e,n){this.numUpdatedRows=e,this.numChangedRows=n}}class _r{#e;constructor(e){this.#e=ee(e)}where(...e){return new _r({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,Cs(e))})}whereRef(e,n,r){return new _r({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,jc(e,n,r))})}clearWhere(){return new _r({...this.#e,queryNode:Lt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new _r({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,Zy(e,n))})}from(e){return new _r({...this.#e,queryNode:cy.cloneWithFromItems(this.#e.queryNode,E0(e))})}innerJoin(...e){return new _r({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("InnerJoin",e))})}leftJoin(...e){return new _r({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("LeftJoin",e))})}rightJoin(...e){return new _r({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("RightJoin",e))})}fullJoin(...e){return new _r({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("FullJoin",e))})}limit(e){return new _r({...this.#e,queryNode:cy.cloneWithLimit(this.#e.queryNode,S2.create(Fi(e)))})}set(...e){return new _r({...this.#e,queryNode:cy.cloneWithUpdates(this.#e.queryNode,BZ(...e))})}returning(e){return new _r({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,Yl(e))})}returningAll(e){return new _r({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,Uc(e))})}output(e){return new _r({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Yl(e))})}outputAll(e){return new _r({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Uc(e))})}modifyEnd(e){return new _r({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new _r({...this.#e,queryNode:Lt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new _r({...this.#e})}$castTo(){return new _r(this.#e)}$narrowType(){return new _r(this.#e)}$assertType(){return new _r(this.#e)}withPlugin(e){return new _r({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new qZ(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0),n.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Ib){const n=await this.executeTakeFirst();if(n===void 0)throw Rb(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new _r({...this.#e,queryNode:Lt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}On(_r,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const HD=ee({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return ee({kind:"CommonTableExpressionNameNode",table:Tf.create(t),columns:e?ee(e.map(Mi.create)):void 0})}}),F1=ee({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return ee({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return ee({...t,...e})}});class _0{#e;constructor(e){this.#e=ee(e)}materialized(){return new _0({...this.#e,node:F1.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new _0({...this.#e,node:F1.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}On(_0,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function $D(t,e){const n=e(nJ()).toOperationNode();return La(t)?t(HZ(n)).toOperationNode():F1.create(MV(t),n)}function HZ(t){return e=>new _0({node:F1.create(MV(e),t)})}function MV(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(i=>i.trim());return HD.create(n,r)}else return HD.create(t)}const p_=ee({is(t){return t.kind==="WithNode"},create(t,e){return ee({kind:"WithNode",expressions:ee([t]),...e})},cloneWithExpression(t,e){return ee({...t,expressions:ee([...t.expressions,e])})}}),GD=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function $Z(t){let e="";for(let n=0;n<t;++n)e+=GZ();return e}function GZ(){return GD[~~(Math.random()*GD.length)]}function yr(){return new XZ}class XZ{#e;get queryId(){return this.#e===void 0&&(this.#e=$Z(8)),this.#e}}class TV{nodeStack=[];#e=ee({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),ee(n)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&ee(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:ee([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}const KZ=ee({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});class YZ extends TV{#e;#t=new Set;#n=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);const n=this.#a(e);for(const s of n)this.#n.add(s);const r=this.#i(e);for(const s of r)this.#t.add(s);const i=super.transformNodeImpl(e);for(const s of r)this.#t.delete(s);for(const s of n)this.#n.delete(s);return i}transformSchemableIdentifier(e){const n=super.transformSchemableIdentifier(e);return n.schema||!this.#t.has(e.identifier.name)?n:{...n,schema:Hr.create(this.#e)}}transformReferences(e){const n=super.transformReferences(e);return n.table.table.schema?n:{...n,table:Tf.createWithSchema(this.#e,n.table.table.identifier.name)}}#r(e){return e.kind in KZ}#i(e){const n=new Set;if("name"in e&&e.name&&kf.is(e.name)&&this.#s(e.name,n),"from"in e&&e.from)for(const r of e.from.froms)this.#o(r,n);if("into"in e&&e.into&&this.#o(e.into,n),"table"in e&&e.table&&this.#o(e.table,n),"joins"in e&&e.joins)for(const r of e.joins)this.#o(r.table,n);return"using"in e&&e.using&&this.#o(e.using,n),n}#a(e){const n=new Set;return"with"in e&&e.with&&this.#l(e.with,n),n}#o(e,n){const r=Tf.is(e)?e:$f.is(e)&&Tf.is(e.node)?e.node:null;r&&this.#s(r.table,n)}#s(e,n){const r=e.identifier.name;!this.#t.has(r)&&!this.#n.has(r)&&n.add(r)}#l(e,n){for(const r of e.expressions){const i=r.name.table.table.identifier.name;this.#n.has(i)||n.add(i)}}}class Ab{#e;constructor(e){this.#e=new YZ(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}}const ZZ=ee({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return ee({kind:"MatchedNode",not:t,bySource:e})}});function XD(t,e,n){return Cb.create(L1([ZZ.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&n?jc(e[0],e[1],e[2]):Cs(e)]:[]],"and",!1))}function Jx(t){return Aa(t)?Vs.create([t],[]):ra(t)?t.toOperationNode():t}class KD{#e;#t;#n;constructor(){this.#e=new Promise((e,n)=>{this.#n=n,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#n&&this.#n(e)}}const YD=new Set;function JZ(t){YD.has(t)||(YD.add(t),console.log(t))}const QZ=ee([]);class CV{#e;constructor(e=QZ){this.#e=e}get plugins(){return this.#e}transformQuery(e,n){for(const r of this.#e){const i=r.transformQuery({node:e,queryId:n});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const i=await r.executeQuery(e),s=await this.#t(i,n);return eJ(i,s),s})}async *stream(e,n,r){const i=new KD,s=new KD;this.provideConnection(async a=>(i.resolve(a),await s.promise)).catch(a=>i.reject(a));const o=await i.promise;try{for await(const a of o.streamQuery(e,n))yield await this.#t(a,r)}finally{s.resolve()}}async #t(e,n){for(const r of this.#e)e=await r.transformResult({result:e,queryId:n});return e}}function eJ(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||JZ("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class qg extends CV{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new qg([...this.plugins,e])}withPlugins(e){return new qg([...this.plugins,...e])}withPluginAtFront(e){return new qg([e,...this.plugins])}withoutPlugins(){return new qg([])}}const NM=new qg;class tJ{numChangedRows;constructor(e){this.numChangedRows=e}}class xp{#e;constructor(e){this.#e=ee(e)}modifyEnd(e){return new xp({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new xp({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,Zy(e,n))})}using(...e){return new Ma({...this.#e,queryNode:Zo.cloneWithUsing(this.#e.queryNode,xo("Using",e))})}output(e){return new xp({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Yl(e))})}outputAll(e){return new xp({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Uc(e))})}}On(xp,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Ma{#e;constructor(e){this.#e=ee(e)}modifyEnd(e){return new Ma({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new Ma({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,Zy(e,n))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,n,r){return this.#t([e,n,r],!0)}#t(e,n){return new WN({...this.#e,queryNode:Zo.cloneWithWhen(this.#e.queryNode,XD({isMatched:!0},e,n))})}whenNotMatched(){return this.#n([])}whenNotMatchedAnd(...e){return this.#n(e)}whenNotMatchedAndRef(e,n,r){return this.#n([e,n,r],!0)}whenNotMatchedBySource(){return this.#n([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#n(e,!1,!0)}whenNotMatchedBySourceAndRef(e,n,r){return this.#n([e,n,r],!0,!0)}output(e){return new Ma({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Yl(e))})}outputAll(e){return new Ma({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Uc(e))})}#n(e,n=!1,r=!1){const i={...this.#e,queryNode:Zo.cloneWithWhen(this.#e.queryNode,XD({isMatched:!1,bySource:r},e,n))},s=r?WN:IV;return new s(i)}$call(e){return e(this)}$if(e,n){return e?n(this):new Ma({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId);return e.query.output&&this.#e.executor.adapter.supportsOutput?n.rows:[new tJ(n.numAffectedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Ib){const n=await this.executeTakeFirst();if(n===void 0)throw Rb(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}}On(Ma,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class WN{#e;constructor(e){this.#e=ee(e)}thenDelete(){return new Ma({...this.#e,queryNode:Zo.cloneWithThen(this.#e.queryNode,Jx("delete"))})}thenDoNothing(){return new Ma({...this.#e,queryNode:Zo.cloneWithThen(this.#e.queryNode,Jx("do nothing"))})}thenUpdate(e){return new Ma({...this.#e,queryNode:Zo.cloneWithThen(this.#e.queryNode,Jx(e(new _r({queryId:this.#e.queryId,executor:NM,queryNode:cy.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(n=>n.set(...e))}}On(WN,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class IV{#e;constructor(e){this.#e=ee(e)}thenDoNothing(){return new Ma({...this.#e,queryNode:Zo.cloneWithThen(this.#e.queryNode,Jx("do nothing"))})}thenInsertValues(e){const[n,r]=_V(e);return new Ma({...this.#e,queryNode:Zo.cloneWithThen(this.#e.queryNode,Jx(_a.cloneWith(_a.createWithoutInto(),{columns:n,values:r})))})}}On(IV,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class gf{#e;constructor(e){this.#e=ee(e)}selectFrom(e){return qN({queryId:yr(),executor:this.#e.executor,queryNode:mr.createFrom(E0(e),this.#e.withNode)})}selectNoFrom(e){return qN({queryId:yr(),executor:this.#e.executor,queryNode:mr.cloneWithSelections(mr.create(this.#e.withNode),Yl(e))})}insertInto(e){return new Wr({queryId:yr(),executor:this.#e.executor,queryNode:_a.create(_i(e),this.#e.withNode)})}replaceInto(e){return new Wr({queryId:yr(),executor:this.#e.executor,queryNode:_a.create(_i(e),this.#e.withNode,!0)})}deleteFrom(e){return new pr({queryId:yr(),executor:this.#e.executor,queryNode:dp.create(E0(e),this.#e.withNode)})}updateTable(e){return new _r({queryId:yr(),executor:this.#e.executor,queryNode:cy.create(M0(e),this.#e.withNode)})}mergeInto(e){return new xp({queryId:yr(),executor:this.#e.executor,queryNode:Zo.create(LV(e),this.#e.withNode)})}with(e,n){const r=$D(e,n);return new gf({...this.#e,withNode:this.#e.withNode?p_.cloneWithExpression(this.#e.withNode,r):p_.create(r)})}withRecursive(e,n){const r=$D(e,n);return new gf({...this.#e,withNode:this.#e.withNode?p_.cloneWithExpression(this.#e.withNode,r):p_.create(r,{recursive:!0})})}withPlugin(e){return new gf({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new gf({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new gf({...this.#e,executor:this.#e.executor.withPluginAtFront(new Ab(e))})}}function nJ(){return new gf({executor:NM})}function rJ(t,e){return new ly({joinNode:Kx.create(t,M0(e))})}function iJ(){return new w0({overNode:VN.create()})}function xo(t,e){if(e.length===3)return oJ(t,e[0],e[1],e[2]);if(e.length===2)return sJ(t,e[0],e[1]);throw new Error("not implemented")}function sJ(t,e,n){return n(rJ(t,e)).toOperationNode()}function oJ(t,e,n,r){return Kx.createWithOn(t,M0(e),jc(n,"=",r))}const aJ=ee({is(t){return t.kind==="OffsetNode"},create(t){return ee({kind:"OffsetNode",offset:t})}}),lJ=ee({is(t){return t.kind==="GroupByItemNode"},create(t){return ee({kind:"GroupByItemNode",groupBy:t})}});function cJ(t){return t=La(t)?t(Jy()):t,b0(t).map(lJ.create)}const RV=ee({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return ee({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function lg(t,e,n){return La(e)&&(e=e(M2())),rd(e)||(e=[e]),e.map(r=>RV.create(t,nm(r),n))}class Sr{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new E2(this,e)}or(...e){return new B1(Yy.create(this.#e,Cs(e)))}and(...e){return new j1(Of.create(this.#e,Cs(e)))}$castTo(){return new Sr(this.#e)}$notNull(){return new Sr(this.#e)}toOperationNode(){return this.#e}}class E2{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return $f.create(this.#e.toOperationNode(),ra(this.#t)?this.#t.toOperationNode():Hr.create(this.#t))}}class B1{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new E2(this,e)}or(...e){return new B1(Yy.create(this.#e,Cs(e)))}$castTo(){return new B1(this.#e)}toOperationNode(){return Sy.create(this.#e)}}class j1{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new E2(this,e)}and(...e){return new j1(Of.create(this.#e,Cs(e)))}$castTo(){return new j1(this.#e)}toOperationNode(){return Sy.create(this.#e)}}const uJ={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:Bc.create(t),modifier:e}}};function dJ(t,e){if(!RM(t)&&!m2(t))throw new Error(`Invalid fetch row count: ${t}`);if(!fJ(e))throw new Error(`Invalid fetch modifier: ${e}`);return uJ.create(t,e)}function fJ(t){return t==="only"||t==="with ties"}class sn{#e;constructor(e){this.#e=ee(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new sn({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,Cs(e))})}whereRef(e,n,r){return new sn({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,jc(e,n,r))})}having(...e){return new sn({...this.#e,queryNode:mr.cloneWithHaving(this.#e.queryNode,Cs(e))})}havingRef(e,n,r){return new sn({...this.#e,queryNode:mr.cloneWithHaving(this.#e.queryNode,jc(e,n,r))})}select(e){return new sn({...this.#e,queryNode:mr.cloneWithSelections(this.#e.queryNode,Yl(e))})}distinctOn(e){return new sn({...this.#e,queryNode:mr.cloneWithDistinctOn(this.#e.queryNode,b0(e))})}modifyFront(e){return new sn({...this.#e,queryNode:mr.cloneWithFrontModifier(this.#e.queryNode,Ru.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new sn({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ru.createWithExpression(e.toOperationNode()))})}distinct(){return new sn({...this.#e,queryNode:mr.cloneWithFrontModifier(this.#e.queryNode,Ru.create("Distinct"))})}forUpdate(e){return new sn({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ru.create("ForUpdate",e?h_(e).map(_i):void 0))})}forShare(e){return new sn({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ru.create("ForShare",e?h_(e).map(_i):void 0))})}forKeyShare(e){return new sn({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ru.create("ForKeyShare",e?h_(e).map(_i):void 0))})}forNoKeyUpdate(e){return new sn({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ru.create("ForNoKeyUpdate",e?h_(e).map(_i):void 0))})}skipLocked(){return new sn({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ru.create("SkipLocked"))})}noWait(){return new sn({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ru.create("NoWait"))})}selectAll(e){return new sn({...this.#e,queryNode:mr.cloneWithSelections(this.#e.queryNode,Uc(e))})}innerJoin(...e){return new sn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("InnerJoin",e))})}leftJoin(...e){return new sn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("LeftJoin",e))})}rightJoin(...e){return new sn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("RightJoin",e))})}fullJoin(...e){return new sn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("FullJoin",e))})}innerJoinLateral(...e){return new sn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("LateralInnerJoin",e))})}leftJoinLateral(...e){return new sn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,xo("LateralLeftJoin",e))})}orderBy(...e){return new sn({...this.#e,queryNode:mr.cloneWithOrderByItems(this.#e.queryNode,Tb(e))})}groupBy(e){return new sn({...this.#e,queryNode:mr.cloneWithGroupByItems(this.#e.queryNode,cJ(e))})}limit(e){return new sn({...this.#e,queryNode:mr.cloneWithLimit(this.#e.queryNode,S2.create(Fi(e)))})}offset(e){return new sn({...this.#e,queryNode:mr.cloneWithOffset(this.#e.queryNode,aJ.create(Fi(e)))})}fetch(e,n="only"){return new sn({...this.#e,queryNode:mr.cloneWithFetch(this.#e.queryNode,dJ(e,n))})}top(e,n){return new sn({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,Zy(e,n))})}union(e){return new sn({...this.#e,queryNode:mr.cloneWithSetOperations(this.#e.queryNode,lg("union",e,!1))})}unionAll(e){return new sn({...this.#e,queryNode:mr.cloneWithSetOperations(this.#e.queryNode,lg("union",e,!0))})}intersect(e){return new sn({...this.#e,queryNode:mr.cloneWithSetOperations(this.#e.queryNode,lg("intersect",e,!1))})}intersectAll(e){return new sn({...this.#e,queryNode:mr.cloneWithSetOperations(this.#e.queryNode,lg("intersect",e,!0))})}except(e){return new sn({...this.#e,queryNode:mr.cloneWithSetOperations(this.#e.queryNode,lg("except",e,!1))})}exceptAll(e){return new sn({...this.#e,queryNode:mr.cloneWithSetOperations(this.#e.queryNode,lg("except",e,!0))})}as(e){return new AV(this,e)}clearSelect(){return new sn({...this.#e,queryNode:mr.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new sn({...this.#e,queryNode:Lt.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new sn({...this.#e,queryNode:mr.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new sn({...this.#e,queryNode:mr.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new sn({...this.#e,queryNode:mr.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new sn({...this.#e,queryNode:mr.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new sn({...this.#e})}$castTo(){return new sn(this.#e)}$narrowType(){return new sn(this.#e)}$assertType(){return new sn(this.#e)}$asTuple(){return new Sr(this.toOperationNode())}withPlugin(e){return new sn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Ib){const n=await this.executeTakeFirst();if(n===void 0)throw Rb(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new sn({...this.#e,queryNode:Lt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}On(sn,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function qN(t){return new sn(t)}class AV{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return $f.create(this.#e.toOperationNode(),Hr.create(this.#t))}}On(AV,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const yf=ee({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return ee({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return ee({...t,distinct:!0})},cloneWithOrderBy(t,e){return ee({...t,orderBy:t.orderBy?Df.cloneWithItems(t.orderBy,e):Df.create(e)})},cloneWithFilter(t,e){return ee({...t,filter:t.filter?Go.cloneWithOperation(t.filter,"And",e):Go.create(e)})},cloneWithOrFilter(t,e){return ee({...t,filter:t.filter?Go.cloneWithOperation(t.filter,"Or",e):Go.create(e)})},cloneWithOver(t,e){return ee({...t,over:e})}}),ZD=ee({is(t){return t.kind==="FunctionNode"},create(t,e){return ee({kind:"FunctionNode",func:t,arguments:e})}});class tl{#e;constructor(e){this.#e=ee(e)}get expressionType(){}as(e){return new hJ(this,e)}distinct(){return new tl({...this.#e,aggregateFunctionNode:yf.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(e,n){return new tl({...this.#e,aggregateFunctionNode:yf.cloneWithOrderBy(this.#e.aggregateFunctionNode,Tb([e,n]))})}filterWhere(...e){return new tl({...this.#e,aggregateFunctionNode:yf.cloneWithFilter(this.#e.aggregateFunctionNode,Cs(e))})}filterWhereRef(e,n,r){return new tl({...this.#e,aggregateFunctionNode:yf.cloneWithFilter(this.#e.aggregateFunctionNode,jc(e,n,r))})}over(e){const n=iJ();return new tl({...this.#e,aggregateFunctionNode:yf.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}$castTo(){return new tl(this.#e)}$notNull(){return new tl(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}On(tl,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class hJ{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return $f.create(this.#e.toOperationNode(),Hr.create(this.#t))}}function NV(){const t=(n,r)=>new Sr(ZD.create(n,b0(r??[]))),e=(n,r)=>new tl({aggregateFunctionNode:yf.create(n,r?b0(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(...n){return t("coalesce",n)},count(n){return e("count",[n])},countAll(n){return new tl({aggregateFunctionNode:yf.create("count",Uc(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])},jsonAgg(n){return new tl({aggregateFunctionNode:yf.create("json_agg",[Aa(n)?_i(n):n.toOperationNode()])})},toJson(n){return new Sr(ZD.create("to_json",[Aa(n)?_i(n):n.toOperationNode()]))}})}const pJ=ee({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return ee({kind:"UnaryOperationNode",operator:t,operand:e})}});function mJ(t,e){return pJ.create(Lf.create(t),Ea(e))}const Ic=ee({is(t){return t.kind==="CaseNode"},create(t){return ee({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return ee({...t,when:ee(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return ee({...t,when:t.when?ee([...t.when.slice(0,-1),Cb.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return ee({...t,...e})}});class PV{#e;constructor(e){this.#e=ee(e)}when(...e){return new kV({...this.#e,node:Ic.cloneWithWhen(this.#e.node,Cb.create(Cs(e)))})}}class kV{#e;constructor(e){this.#e=ee(e)}then(e){return new gJ({...this.#e,node:Ic.cloneWithThen(this.#e.node,x2(e)?b2(e):Fi(e))})}}class gJ{#e;constructor(e){this.#e=ee(e)}when(...e){return new kV({...this.#e,node:Ic.cloneWithWhen(this.#e.node,Cb.create(Cs(e)))})}else(e){return new yJ({...this.#e,node:Ic.cloneWith(this.#e.node,{else:x2(e)?b2(e):Fi(e)})})}end(){return new Sr(Ic.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new Sr(Ic.cloneWith(this.#e.node,{isStatement:!0}))}}class yJ{#e;constructor(e){this.#e=ee(e)}end(){return new Sr(Ic.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new Sr(Ic.cloneWith(this.#e.node,{isStatement:!0}))}}const JD=ee({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return ee({kind:"JSONPathLegNode",type:t,value:e})}});class HN{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,n){return k1.is(this.#e)?new S0(k1.cloneWithTraversal(this.#e,Yx.is(this.#e.traversal)?Yx.cloneWithLeg(this.#e.traversal,JD.create(e,n)):yV.cloneWithValue(this.#e.traversal,Bc.createImmediate(n)))):new S0(Yx.cloneWithLeg(this.#e,JD.create(e,n)))}}class S0 extends HN{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new vJ(this,e)}$castTo(){return new S0(this.#e)}$notNull(){return new S0(this.#e)}toOperationNode(){return this.#e}}class vJ{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return $f.create(this.#e.toOperationNode(),ra(this.#t)?this.#t.toOperationNode():Hr.create(this.#t))}}const QD=ee({is(t){return t.kind==="TupleNode"},create(t){return ee({kind:"TupleNode",values:ee(t)})}}),xJ=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],bJ=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],wJ=ee({is(t){return t.kind==="DataTypeNode"},create(t){return ee({kind:"DataTypeNode",dataType:t})}});function _J(t){return!!(xJ.includes(t)||bJ.some(e=>e.test(t)))}function jp(t){if(ra(t))return t.toOperationNode();if(_J(t))return wJ.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}const SJ=ee({is(t){return t.kind==="CastNode"},create(t,e){return ee({kind:"CastNode",expression:t,dataType:e})}});function M2(t=NM){function e(i,s,o){return new Sr(w2(i,s,o))}function n(i,s){return new Sr(mJ(i,s))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(i){return qN({queryId:yr(),executor:t,queryNode:mr.createFrom(E0(i))})},case(i){return new PV({node:Ic.create(Ef(i)?void 0:Ea(i))})},ref(i,s){return Ef(s)?new Sr(id(i)):new HN(SZ(i,s))},jsonPath(){return new HN(Yx.create())},table(i){return new Sr(_i(i))},val(i){return new Sr(Fi(i))},refTuple(...i){return new Sr(QD.create(i.map(Ea)))},tuple(...i){return new Sr(QD.create(i.map(Fi)))},lit(i){return new Sr(b2(i))},unary:n,not(i){return n("not",i)},exists(i){return n("exists",i)},neg(i){return n("-",i)},between(i,s,o){return new Sr(_y.create(Ea(i),Lf.create("between"),Of.create(Fi(s),Fi(o))))},betweenSymmetric(i,s,o){return new Sr(_y.create(Ea(i),Lf.create("between symmetric"),Of.create(Fi(s),Fi(o))))},and(i){return rd(i)?new Sr(L1(i,"and")):new Sr(LD(i,"and"))},or(i){return rd(i)?new Sr(L1(i,"or")):new Sr(LD(i,"or"))},parens(...i){const s=Cs(i);return Sy.is(s)?new Sr(s):new Sr(Sy.create(s))},cast(i,s){return new Sr(SJ.create(Ea(i),jp(s)))},withSchema(i){return M2(t.withPluginAtFront(new Ab(i)))}});return r.fn=NV(),r.eb=r,r}function Jy(t){return M2()}function nm(t){if(ra(t))return t.toOperationNode();if(La(t))return t(Jy()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function OV(t){if(ra(t))return t.toOperationNode();if(La(t))return t(Jy()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function Nb(t){return hZ(t)||pZ(t)||La(t)}function E0(t){return rd(t)?t.map(e=>M0(e)):[M0(t)]}function M0(t){return Aa(t)?LV(t):OV(t)}function LV(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(DV);return $f.create(_i(n),Hr.create(r))}else return _i(t)}function _i(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(DV);return Tf.createWithSchema(n,r)}else return Tf.create(t)}function DV(t){return t.trim()}const FV=ee({is(t){return t.kind==="AddColumnNode"},create(t){return ee({kind:"AddColumnNode",column:t})}}),qr=ee({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return ee({kind:"ColumnDefinitionNode",column:Mi.create(t),dataType:e})},cloneWithFrontModifier(t,e){return ee({...t,frontModifiers:t.frontModifiers?ee([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return ee({...t,endModifiers:t.endModifiers?ee([...t.endModifiers,e]):[e]})},cloneWith(t,e){return ee({...t,...e})}}),BV=ee({is(t){return t.kind==="DropColumnNode"},create(t){return ee({kind:"DropColumnNode",column:Mi.create(t)})}}),jV=ee({is(t){return t.kind==="RenameColumnNode"},create(t,e){return ee({kind:"RenameColumnNode",column:Mi.create(t),renameTo:Mi.create(e)})}}),T2=ee({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return ee({kind:"CheckConstraintNode",expression:t,name:e?Hr.create(e):void 0})}}),EJ=["no action","restrict","cascade","set null","set default"],jS=ee({is(t){return t.kind==="ReferencesNode"},create(t,e){return ee({kind:"ReferencesNode",table:t,columns:ee([...e])})},cloneWithOnDelete(t,e){return ee({...t,onDelete:e})},cloneWithOnUpdate(t,e){return ee({...t,onUpdate:e})}});function UV(t){return ra(t)?t.toOperationNode():Bc.createImmediate(t)}const m_=ee({is(t){return t.kind==="GeneratedNode"},create(t){return ee({kind:"GeneratedNode",...t})},createWithExpression(t){return ee({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return ee({...t,...e})}}),MJ=ee({is(t){return t.kind==="DefaultValueNode"},create(t){return ee({kind:"DefaultValueNode",defaultValue:t})}});function U1(t){if(EJ.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}class Ir{#e;constructor(e){this.#e=e}autoIncrement(){return new Ir(qr.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new Ir(qr.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new Ir(qr.cloneWith(this.#e,{primaryKey:!0}))}references(e){const n=id(e);if(!n.table||g2.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new Ir(qr.cloneWith(this.#e,{references:jS.create(n.table,[n.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new Ir(qr.cloneWith(this.#e,{references:jS.cloneWithOnDelete(this.#e.references,U1(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new Ir(qr.cloneWith(this.#e,{references:jS.cloneWithOnUpdate(this.#e.references,U1(e))}))}unique(){return new Ir(qr.cloneWith(this.#e,{unique:!0}))}notNull(){return new Ir(qr.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new Ir(qr.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new Ir(qr.cloneWith(this.#e,{defaultTo:MJ.create(UV(e))}))}check(e){return new Ir(qr.cloneWith(this.#e,{check:T2.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new Ir(qr.cloneWith(this.#e,{generated:m_.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new Ir(qr.cloneWith(this.#e,{generated:m_.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new Ir(qr.cloneWith(this.#e,{generated:m_.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new Ir(qr.cloneWith(this.#e,{generated:m_.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new Ir(qr.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new Ir(qr.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new Ir(qr.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new Ir(qr.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}On(Ir,"don't await ColumnDefinitionBuilder instances directly.");const zV=ee({is(t){return t.kind==="ModifyColumnNode"},create(t){return ee({kind:"ModifyColumnNode",column:t})}}),z1=ee({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return ee({kind:"ForeignKeyConstraintNode",columns:t,references:jS.create(e,n),name:r?Hr.create(r):void 0})},cloneWith(t,e){return ee({...t,...e})}});class Ey{#e;constructor(e){this.#e=e}onDelete(e){return new Ey(z1.cloneWith(this.#e,{onDelete:U1(e)}))}onUpdate(e){return new Ey(z1.cloneWith(this.#e,{onUpdate:U1(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}}On(Ey,"don't await ForeignKeyConstraintBuilder instances directly.");const US=ee({is(t){return t.kind==="AddConstraintNode"},create(t){return ee({kind:"AddConstraintNode",constraint:t})}}),C2=ee({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,n){return ee({kind:"UniqueConstraintNode",columns:ee(t.map(Mi.create)),name:e?Hr.create(e):void 0,nullsNotDistinct:n})},cloneWith(t,e){return ee({...t,...e})}}),zS=ee({is(t){return t.kind==="DropConstraintNode"},create(t){return ee({kind:"DropConstraintNode",constraintName:Hr.create(t)})},cloneWith(t,e){return ee({...t,...e})}}),ox=ee({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return ee({kind:"AlterColumnNode",column:Mi.create(t),[e]:n})}});class I2{#e;constructor(e){this.#e=e}setDataType(e){return new Fg(ox.create(this.#e,"dataType",jp(e)))}setDefault(e){return new Fg(ox.create(this.#e,"setDefault",UV(e)))}dropDefault(){return new Fg(ox.create(this.#e,"dropDefault",!0))}setNotNull(){return new Fg(ox.create(this.#e,"setNotNull",!0))}dropNotNull(){return new Fg(ox.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}}On(I2,"don't await AlterColumnBuilder instances");class Fg{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}On(Fg,"don't await AlteredColumnBuilder instances");class ip{#e;constructor(e){this.#e=ee(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(ip,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class T0{#e;constructor(e){this.#e=ee(e)}onDelete(e){return new T0({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new T0({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(gr.cloneWithTableProps(this.#e.node,{addConstraint:US.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(T0,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class dy{#e;constructor(e){this.#e=ee(e)}ifExists(){return new dy({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{dropConstraint:zS.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new dy({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{dropConstraint:zS.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new dy({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{dropConstraint:zS.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(dy,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const VV=ee({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return ee({kind:"PrimaryKeyConstraintNode",columns:ee(t.map(Mi.create)),name:e?Hr.create(e):void 0})}}),Bg=ee({is(t){return t.kind==="AddIndexNode"},create(t){return ee({kind:"AddIndexNode",name:Hr.create(t)})},cloneWith(t,e){return ee({...t,...e})},cloneWithColumns(t,e){return ee({...t,columns:[...t.columns||[],...e]})}});class vf{#e;constructor(e){this.#e=ee(e)}unique(){return new vf({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{addIndex:Bg.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new vf({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{addIndex:Bg.cloneWithColumns(this.#e.node.addIndex,[O1(e)])})})}columns(e){return new vf({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{addIndex:Bg.cloneWithColumns(this.#e.node.addIndex,e.map(O1))})})}expression(e){return new vf({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{addIndex:Bg.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new vf({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{addIndex:Bg.cloneWith(this.#e.node.addIndex,{using:Vs.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(vf,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class Pb{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}nullsNotDistinct(){return new Pb(C2.cloneWith(this.#e,{nullsNotDistinct:!0}))}}On(Pb,"don't await UniqueConstraintNodeBuilder instances directly.");class WV{#e;constructor(e){this.#e=ee(e)}renameTo(e){return new ip({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{renameTo:_i(e)})})}setSchema(e){return new ip({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{setSchema:Hr.create(e)})})}alterColumn(e,n){const r=n(new I2(e));return new rl({...this.#e,node:gr.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new rl({...this.#e,node:gr.cloneWithColumnAlteration(this.#e.node,BV.create(e))})}renameColumn(e,n){return new rl({...this.#e,node:gr.cloneWithColumnAlteration(this.#e.node,jV.create(e,n))})}addColumn(e,n,r=Mf){const i=r(new Ir(qr.create(e,jp(n))));return new rl({...this.#e,node:gr.cloneWithColumnAlteration(this.#e.node,FV.create(i.toOperationNode()))})}modifyColumn(e,n,r=Mf){const i=r(new Ir(qr.create(e,jp(n))));return new rl({...this.#e,node:gr.cloneWithColumnAlteration(this.#e.node,zV.create(i.toOperationNode()))})}addUniqueConstraint(e,n,r=Mf){const i=r(new Pb(C2.create(n,e)));return new ip({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{addConstraint:US.create(i.toOperationNode())})})}addCheckConstraint(e,n){return new ip({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{addConstraint:US.create(T2.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,i){return new T0({...this.#e,constraintBuilder:new Ey(z1.create(n.map(Mi.create),_i(r),i.map(Mi.create),e))})}addPrimaryKeyConstraint(e,n){return new ip({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{addConstraint:US.create(VV.create(n,e))})})}dropConstraint(e){return new dy({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{dropConstraint:zS.create(e)})})}addIndex(e){return new vf({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{addIndex:Bg.create(e)})})}dropIndex(e){return new ip({...this.#e,node:gr.cloneWithTableProps(this.#e.node,{dropIndex:Xx.create(e)})})}$call(e){return e(this)}}On(WV,"don't await AlterTableBuilder instances");class rl{#e;constructor(e){this.#e=ee(e)}alterColumn(e,n){const r=n(new I2(e));return new rl({...this.#e,node:gr.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new rl({...this.#e,node:gr.cloneWithColumnAlteration(this.#e.node,BV.create(e))})}renameColumn(e,n){return new rl({...this.#e,node:gr.cloneWithColumnAlteration(this.#e.node,jV.create(e,n))})}addColumn(e,n,r=Mf){const i=r(new Ir(qr.create(e,jp(n))));return new rl({...this.#e,node:gr.cloneWithColumnAlteration(this.#e.node,FV.create(i.toOperationNode()))})}modifyColumn(e,n,r=Mf){const i=r(new Ir(qr.create(e,jp(n))));return new rl({...this.#e,node:gr.cloneWithColumnAlteration(this.#e.node,zV.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(rl,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class qV extends TV{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class Ja{#e;constructor(e){this.#e=ee(e)}ifNotExists(){return new Ja({...this.#e,node:ju.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new Ja({...this.#e,node:ju.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new Ja({...this.#e,node:ju.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new Ja({...this.#e,node:ju.cloneWith(this.#e.node,{table:_i(e)})})}column(e){return new Ja({...this.#e,node:ju.cloneWithColumns(this.#e.node,[O1(e)])})}columns(e){return new Ja({...this.#e,node:ju.cloneWithColumns(this.#e.node,e.map(O1))})}expression(e){return new Ja({...this.#e,node:ju.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new Ja({...this.#e,node:ju.cloneWith(this.#e.node,{using:Vs.createWithSql(e)})})}where(...e){const n=new qV;return new Ja({...this.#e,node:Lt.cloneWithWhere(this.#e.node,n.transformNode(Cs(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(Ja,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class PM{#e;constructor(e){this.#e=ee(e)}ifNotExists(){return new PM({...this.#e,node:fV.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(PM,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function TJ(t){if(fZ.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}class qo{#e;constructor(e){this.#e=ee(e)}temporary(){return new qo({...this.#e,node:ba.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new qo({...this.#e,node:ba.cloneWith(this.#e.node,{onCommit:TJ(e)})})}ifNotExists(){return new qo({...this.#e,node:ba.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,n,r=Mf){const i=r(new Ir(qr.create(e,jp(n))));return new qo({...this.#e,node:ba.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new qo({...this.#e,node:ba.cloneWithConstraint(this.#e.node,VV.create(n,e))})}addUniqueConstraint(e,n,r=Mf){const i=r(new Pb(C2.create(n,e)));return new qo({...this.#e,node:ba.cloneWithConstraint(this.#e.node,i.toOperationNode())})}addCheckConstraint(e,n){return new qo({...this.#e,node:ba.cloneWithConstraint(this.#e.node,T2.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,i,s=Mf){const o=s(new Ey(z1.create(n.map(Mi.create),_i(r),i.map(Mi.create),e)));return new qo({...this.#e,node:ba.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(e){return new qo({...this.#e,node:ba.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new qo({...this.#e,node:ba.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new qo({...this.#e,node:ba.cloneWith(this.#e.node,{selectQuery:nm(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(qo,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class fy{#e;constructor(e){this.#e=ee(e)}on(e){return new fy({...this.#e,node:Xx.cloneWith(this.#e.node,{table:_i(e)})})}ifExists(){return new fy({...this.#e,node:Xx.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new fy({...this.#e,node:Xx.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(fy,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class C0{#e;constructor(e){this.#e=ee(e)}ifExists(){return new C0({...this.#e,node:BN.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new C0({...this.#e,node:BN.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(C0,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class I0{#e;constructor(e){this.#e=ee(e)}ifExists(){return new I0({...this.#e,node:jN.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new I0({...this.#e,node:jN.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(I0,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const hf=ee({is(t){return t.kind==="CreateViewNode"},create(t){return ee({kind:"CreateViewNode",name:kf.create(t)})},cloneWith(t,e){return ee({...t,...e})}});class CJ{#e=new qV;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class zu{#e;constructor(e){this.#e=ee(e)}temporary(){return new zu({...this.#e,node:hf.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new zu({...this.#e,node:hf.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new zu({...this.#e,node:hf.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new zu({...this.#e,node:hf.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new zu({...this.#e,node:hf.cloneWith(this.#e.node,{columns:e.map(xV)})})}as(e){const n=e.withPlugin(new CJ).toOperationNode();return new zu({...this.#e,node:hf.cloneWith(this.#e.node,{as:n})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(zu,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const VS=ee({is(t){return t.kind==="DropViewNode"},create(t){return ee({kind:"DropViewNode",name:kf.create(t)})},cloneWith(t,e){return ee({...t,...e})}});class hy{#e;constructor(e){this.#e=ee(e)}materialized(){return new hy({...this.#e,node:VS.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new hy({...this.#e,node:VS.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new hy({...this.#e,node:VS.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(hy,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const HV=ee({is(t){return t.kind==="CreateTypeNode"},create(t){return ee({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return ee({...t,enum:v2.create(e.map(n=>Bc.createImmediate(n)))})}});class kM{#e;constructor(e){this.#e=ee(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new kM({...this.#e,node:HV.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(kM,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const $V=ee({is(t){return t.kind==="DropTypeNode"},create(t){return ee({kind:"DropTypeNode",name:t})},cloneWith(t,e){return ee({...t,...e})}});class OM{#e;constructor(e){this.#e=ee(e)}ifExists(){return new OM({...this.#e,node:$V.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}On(OM,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function eF(t){const e=".";if(t.includes(e)){const n=t.split(e).map(IJ);if(n.length===2)return kf.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return kf.create(t)}function IJ(t){return t.trim()}class Qx{#e;constructor(e){this.#e=e}createTable(e){return new qo({queryId:yr(),executor:this.#e,node:ba.create(_i(e))})}dropTable(e){return new I0({queryId:yr(),executor:this.#e,node:jN.create(_i(e))})}createIndex(e){return new Ja({queryId:yr(),executor:this.#e,node:ju.create(e)})}dropIndex(e){return new fy({queryId:yr(),executor:this.#e,node:Xx.create(e)})}createSchema(e){return new PM({queryId:yr(),executor:this.#e,node:fV.create(e)})}dropSchema(e){return new C0({queryId:yr(),executor:this.#e,node:BN.create(e)})}alterTable(e){return new WV({queryId:yr(),executor:this.#e,node:gr.create(_i(e))})}createView(e){return new zu({queryId:yr(),executor:this.#e,node:hf.create(e)})}dropView(e){return new hy({queryId:yr(),executor:this.#e,node:VS.create(e)})}createType(e){return new kM({queryId:yr(),executor:this.#e,node:HV.create(eF(e))})}dropType(e){return new OM({queryId:yr(),executor:this.#e,node:$V.create(eF(e))})}withPlugin(e){return new Qx(this.#e.withPlugin(e))}withoutPlugins(){return new Qx(this.#e.withoutPlugins())}withSchema(e){return new Qx(this.#e.withPluginAtFront(new Ab(e)))}}class RJ{ref(e){return new wZ(e)}}class AJ{#e;constructor(e){this.#e=e}async provideConnection(e){const n=await this.#e.acquireConnection();try{return await e(n)}finally{await this.#e.releaseConnection(n)}}}class fp extends CV{#e;#t;#n;constructor(e,n,r,i=[]){super(i),this.#e=e,this.#t=n,this.#n=r}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#n.provideConnection(e)}withPlugins(e){return new fp(this.#e,this.#t,this.#n,[...this.plugins,...e])}withPlugin(e){return new fp(this.#e,this.#t,this.#n,[...this.plugins,e])}withPluginAtFront(e){return new fp(this.#e,this.#t,this.#n,[e,...this.plugins])}withConnectionProvider(e){return new fp(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new fp(this.#e,this.#t,this.#n,[])}}function tF(){return typeof performance<"u"&&La(performance.now)?performance.now():Date.now()}class NJ{#e;#t;#n;#r;#i;#a=new WeakSet;constructor(e,n){this.#r=!1,this.#e=e,this.#t=n}async init(){if(this.#i)throw new Error("driver has already been destroyed");this.#n||(this.#n=this.#e.init().then(()=>{this.#r=!0}).catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n}async acquireConnection(){if(this.#i)throw new Error("driver has already been destroyed");this.#r||await this.init();const e=await this.#e.acquireConnection();return this.#a.has(e)||(this.#o()&&this.#s(e),this.#a.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,n){return this.#e.beginTransaction(e,n)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#n&&(await this.#n,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#o(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#s(e){const n=e.executeQuery;e.executeQuery=async r=>{let i;const s=tF();try{return await n.call(e,r)}catch(o){throw i=o,await this.#l(o,r,s),o}finally{i||await this.#u(r,s)}}}async #l(e,n,r){await this.#t.error(()=>({level:"error",error:e,query:n,queryDurationMillis:this.#c(r)}))}async #u(e,n){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#c(n)}))}#c(e){return tF()-e}}const PJ=()=>{};class GV{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(PJ);return this.#t=this.#n(e).finally(()=>{this.#t=void 0}),this.#t}async #n(e){return await e(this.#e)}}const kJ=["read uncommitted","read committed","repeatable read","serializable","snapshot"];ee(["query","error"]);class OJ{#e;#t;constructor(e){La(e)?(this.#t=e,this.#e=ee({query:!0,error:!0})):(this.#t=LJ,this.#e=ee({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}function LJ(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function DJ(t){return Mc(t)&&La(t.compile)}let R2=class Ax extends gf{#e;constructor(e){let n,r;if(FJ(e))n={executor:e.executor},r={...e};else{const i=e.dialect,s=i.createDriver(),o=i.createQueryCompiler(),a=i.createAdapter(),l=new OJ(e.log??[]),c=new NJ(s,l),u=new AJ(c),f=new fp(o,a,u,e.plugins??[]);n={executor:f},r={config:e,executor:f,dialect:i,driver:c}}super(n),this.#e=ee(r)}get schema(){return new Qx(this.#e.executor)}get dynamic(){return new RJ}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new PV({node:Ic.create(Ef(e)?void 0:nm(e))})}get fn(){return NV()}transaction(){return new LM({...this.#e})}connection(){return new XV({...this.#e})}withPlugin(e){return new Ax({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Ax({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Ax({...this.#e,executor:this.#e.executor.withPluginAtFront(new Ab(e))})}withTables(){return new Ax({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,n=yr()){const r=DJ(e)?e.compile():e;return this.getExecutor().executeQuery(r,n)}};class Hg extends R2{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new Hg({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Hg({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Hg({...this.#e,executor:this.#e.executor.withPluginAtFront(new Ab(e))})}withTables(){return new Hg({...this.#e})}}function FJ(t){return Mc(t)&&Mc(t.config)&&Mc(t.driver)&&Mc(t.executor)&&Mc(t.dialect)}class XV{#e;constructor(e){this.#e=ee(e)}async execute(e){return this.#e.executor.provideConnection(async n=>{const r=this.#e.executor.withConnectionProvider(new GV(n)),i=new R2({...this.#e,executor:r});return await e(i)})}}On(XV,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class LM{#e;constructor(e){this.#e=ee(e)}setIsolationLevel(e){return new LM({...this.#e,isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=this.#e,i={isolationLevel:n};return BJ(i),this.#e.executor.provideConnection(async s=>{const o=this.#e.executor.withConnectionProvider(new GV(s)),a=new Hg({...r,executor:o});try{await this.#e.driver.beginTransaction(s,i);const l=await e(a);return await this.#e.driver.commitTransaction(s),l}catch(l){throw await this.#e.driver.rollbackTransaction(s),l}})}}On(LM,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function BJ(t){if(t.isolationLevel&&!kJ.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}class py{#e;constructor(e){this.#e=ee(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new KV(this,e)}$castTo(){return new py({...this.#e})}$notNull(){return new py(this.#e)}withPlugin(e){return new py({...this.#e,plugins:this.#e.plugins!==void 0?ee([...this.#e.plugins,e]):ee([e])})}toOperationNode(){return this.#n(this.#t())}compile(e){return this.#r(this.#t(e))}async execute(e){const n=this.#t(e);return n.executeQuery(this.#r(n),this.#e.queryId)}#t(e){const n=e!==void 0?e.getExecutor():NM;return this.#e.plugins!==void 0?n.withPlugins(this.#e.plugins):n}#n(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#r(e){return e.compileQuery(this.#n(e),this.#e.queryId)}}function Qd(t){return new py(t)}On(py,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class KV{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return $f.create(this.#e.toOperationNode(),ra(this.#t)?this.#t.toOperationNode():Hr.create(this.#t))}}On(KV,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const si=Object.assign((t,...e)=>Qd({queryId:yr(),rawNode:Vs.create(t,e?.map(nF)??[])}),{ref(t){return Qd({queryId:yr(),rawNode:Vs.createWithChild(id(t))})},val(t){return Qd({queryId:yr(),rawNode:Vs.createWithChild(Fi(t))})},value(t){return this.val(t)},table(t){return Qd({queryId:yr(),rawNode:Vs.createWithChild(_i(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",Qd({queryId:yr(),rawNode:Vs.create(e,t.map(Hr.create))})},lit(t){return Qd({queryId:yr(),rawNode:Vs.createWithChild(Bc.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return Qd({queryId:yr(),rawNode:Vs.createWithSql(t)})},join(t,e=si`, `){const n=new Array(2*t.length-1),r=e.toOperationNode();for(let i=0;i<t.length;++i)n[2*i]=nF(t[i]),i!==t.length-1&&(n[2*i+1]=r);return Qd({queryId:yr(),rawNode:Vs.createWithChildren(n)})}});function nF(t){return ra(t)?t.toOperationNode():Fi(t)}class jJ{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=ee({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}class UJ extends jJ{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),ee({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){const n=this.parentNode!==void 0&&!Sy.is(this.parentNode)&&!_a.is(this.parentNode)&&!ba.is(this.parentNode)&&!hf.is(this.parentNode)&&!RV.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),n&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,n=", "){const r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(n)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){const n=this.nodeStack.find(Lt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!Zo.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!Zo.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){const n=this.nodeStack.find(Lt.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Aa(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");const{values:n}=e;for(let r=0;r<n.length;++r)this.appendValue(n[r]),r!==n.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(VJ[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){const{sqlFragments:n,parameters:r}=e;for(let i=0;i<n.length;++i)this.append(n[i]),r.length>i&&this.visitNode(r[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){const n=this.nodeStack.find(Lt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!Zo.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!Zo.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),P1(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(zJ[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return Lf.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(const n of e.pathLegs)this.visitNode(n);this.append("'")}visitJSONPathLeg(e){const n=e.type==="ArrayLocation";this.append(n?"[":"."),this.append(String(e.value)),n&&this.append("]")}visitJSONOperatorChain(e){for(let n=0,r=e.values.length;n<r;n++)n===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[n])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){const n=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper();let i="";for(const s of e)i+=s,s===n?i+=n:s===r&&(i+=r);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Aa(e))this.append(`'${e}'`);else if(RM(e)||P1(e))this.append(e.toString());else if(p2(e))this.append("null");else if(dZ(e))this.appendImmediateValue(e.toISOString());else if(m2(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((n,r)=>n.modifier&&r.modifier?rF[n.modifier]-rF[r.modifier]:1),ee(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}const zJ=ee({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),rF=ee({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),VJ=ee({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"});class WJ{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}const qJ=/"/g;class HJ extends UJ{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(qJ,'""')}visitDefaultInsertValue(e){this.append("null")}}const $J="kysely_migration",GJ="kysely_migration_lock";ee({__noMigrations__:!0});class XJ{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let n=this.#e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(n=n.where("name","!=",$J).where("name","!=",GJ));const r=await n.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(e){return{tables:await this.getTables(e)}}async #t(e){const n=this.#e,r=await n.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),i=r.sql?.split(/[\(\),]/)?.find(o=>o.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),s=await n.selectFrom(si`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:s.map(o=>({name:o.name,dataType:o.type,isNullable:!o.notnull,isAutoIncrementing:o.name===i,hasDefaultValue:o.dflt_value!=null,comment:void 0}))}}}class KJ extends WJ{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}const Cf={jsonObject(t){const e=si.join(Object.entries(t).map(([n,r])=>si`${n}, ${r}`));return si`json_object(${e})`},jsonGroupArray(t){return si`json_group_array(${Cf.jsonObject(t)})`}},YV={hash(t){return FN.sha224(t)},verify(t,e){return FN.sha224(t)===e}};var Kn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Kn||(Kn={}));var $N;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})($N||($N={}));const At=Kn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Vu=t=>{switch(typeof t){case"undefined":return At.undefined;case"string":return At.string;case"number":return isNaN(t)?At.nan:At.number;case"boolean":return At.boolean;case"function":return At.function;case"bigint":return At.bigint;case"symbol":return At.symbol;case"object":return Array.isArray(t)?At.array:t===null?At.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?At.promise:typeof Map<"u"&&t instanceof Map?At.map:typeof Set<"u"&&t instanceof Set?At.set:typeof Date<"u"&&t instanceof Date?At.date:At.object;default:return At.unknown}},ot=Kn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),YJ=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ia extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof Ia))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ia.create=t=>new Ia(t);const My=(t,e)=>{let n;switch(t.code){case ot.invalid_type:t.received===At.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ot.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Kn.jsonStringifyReplacer)}`;break;case ot.unrecognized_keys:n=`Unrecognized key(s) in object: ${Kn.joinValues(t.keys,", ")}`;break;case ot.invalid_union:n="Invalid input";break;case ot.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Kn.joinValues(t.options)}`;break;case ot.invalid_enum_value:n=`Invalid enum value. Expected ${Kn.joinValues(t.options)}, received '${t.received}'`;break;case ot.invalid_arguments:n="Invalid function arguments";break;case ot.invalid_return_type:n="Invalid function return type";break;case ot.invalid_date:n="Invalid date";break;case ot.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Kn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ot.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ot.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ot.custom:n="Invalid input";break;case ot.invalid_intersection_types:n="Intersection results could not be merged";break;case ot.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ot.not_finite:n="Number must be finite";break;default:n=e.defaultError,Kn.assertNever(t)}return{message:n}};let ZV=My;function ZJ(t){ZV=t}function V1(){return ZV}const W1=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},JJ=[];function wt(t,e){const n=V1(),r=W1({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===My?void 0:My].filter(i=>!!i)});t.common.issues.push(r)}class Ks{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return an;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Ks.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return an;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const an=Object.freeze({status:"aborted"}),$g=t=>({status:"dirty",value:t}),Mo=t=>({status:"valid",value:t}),GN=t=>t.status==="aborted",XN=t=>t.status==="dirty",Up=t=>t.status==="valid",R0=t=>typeof Promise<"u"&&t instanceof Promise;function q1(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function JV(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Gt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Gt||(Gt={}));var Nx,Px;class zc{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const iF=(t,e)=>{if(Up(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ia(t.common.issues);return this._error=n,this._error}}};function Cn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var l,c;const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=u??n)!==null&&c!==void 0?c:a.defaultError}},description:i}}class Ln{get description(){return this._def.description}_getType(e){return Vu(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Vu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ks,ctx:{common:e.parent.common,data:e.data,parsedType:Vu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(R0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vu(e)},s=this._parseSync({data:e,path:i.path,parent:i});return iF(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vu(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return Up(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>Up(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vu(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await (R0(i)?i:Promise.resolve(i));return iF(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:ot.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Zl({schema:this,typeName:on.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Nc.create(this,this._def)}nullable(){return Uf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Kl.create(this)}promise(){return Cy.create(this,this._def)}or(e){return k0.create([this,e],this._def)}and(e){return O0.create(this,e,this._def)}transform(e){return new Zl({...Cn(this._def),schema:this,typeName:on.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new j0({...Cn(this._def),innerType:this,defaultValue:n,typeName:on.ZodDefault})}brand(){return new A2({typeName:on.ZodBranded,type:this,...Cn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new U0({...Cn(this._def),innerType:this,catchValue:n,typeName:on.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return kb.create(this,e)}readonly(){return z0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const QJ=/^c[^\s-]{8,}$/i,eQ=/^[0-9a-z]+$/,tQ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,nQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,rQ=/^[a-z0-9_-]{21}$/i,iQ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,sQ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,oQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,aQ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let PI;const lQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,uQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,dQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,fQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,hQ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,QV="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",pQ=new RegExp(`^${QV}$`);function e5(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function mQ(t){return new RegExp(`^${e5(t)}$`)}function t5(t){let e=`${QV}T${e5(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function gQ(t,e){return!!((e==="v4"||!e)&&lQ.test(t)||(e==="v6"||!e)&&uQ.test(t))}function yQ(t,e){if(!iQ.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function vQ(t,e){return!!((e==="v4"||!e)&&cQ.test(t)||(e==="v6"||!e)&&dQ.test(t))}class $l extends Ln{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==At.string){const s=this._getOrReturnCtx(e);return wt(s,{code:ot.invalid_type,expected:At.string,received:s.parsedType}),an}const r=new Ks;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),wt(i,{code:ot.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),wt(i,{code:ot.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?wt(i,{code:ot.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&wt(i,{code:ot.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")oQ.test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"email",code:ot.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")PI||(PI=new RegExp(aQ,"u")),PI.test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"emoji",code:ot.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")nQ.test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"uuid",code:ot.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")rQ.test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"nanoid",code:ot.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")QJ.test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"cuid",code:ot.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")eQ.test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"cuid2",code:ot.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")tQ.test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"ulid",code:ot.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),wt(i,{validation:"url",code:ot.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"regex",code:ot.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),wt(i,{code:ot.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),wt(i,{code:ot.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),wt(i,{code:ot.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?t5(s).test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{code:ot.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?pQ.test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{code:ot.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?mQ(s).test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{code:ot.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?sQ.test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"duration",code:ot.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?gQ(e.data,s.version)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"ip",code:ot.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?yQ(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"jwt",code:ot.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?vQ(e.data,s.version)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"cidr",code:ot.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?fQ.test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"base64",code:ot.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?hQ.test(e.data)||(i=this._getOrReturnCtx(e,i),wt(i,{validation:"base64url",code:ot.invalid_string,message:s.message}),r.dirty()):Kn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:ot.invalid_string,...Gt.errToObj(r)})}_addCheck(e){return new $l({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Gt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Gt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Gt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Gt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Gt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Gt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Gt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Gt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Gt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Gt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Gt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Gt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Gt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Gt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Gt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Gt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Gt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Gt.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Gt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Gt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Gt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Gt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Gt.errToObj(n)})}nonempty(e){return this.min(1,Gt.errToObj(e))}trim(){return new $l({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $l({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $l({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}$l.create=t=>{var e;return new $l({checks:[],typeName:on.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Cn(t)})};function xQ(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Ff extends Ln{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==At.number){const s=this._getOrReturnCtx(e);return wt(s,{code:ot.invalid_type,expected:At.number,received:s.parsedType}),an}let r;const i=new Ks;for(const s of this._def.checks)s.kind==="int"?Kn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),wt(r,{code:ot.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),wt(r,{code:ot.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),wt(r,{code:ot.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?xQ(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),wt(r,{code:ot.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),wt(r,{code:ot.not_finite,message:s.message}),i.dirty()):Kn.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Gt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Gt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Gt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Gt.toString(n))}setLimit(e,n,r,i){return new Ff({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Gt.toString(i)}]})}_addCheck(e){return new Ff({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Gt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Gt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Gt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Gt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Gt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Gt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Gt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Gt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Gt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Kn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ff.create=t=>new Ff({checks:[],typeName:on.ZodNumber,coerce:t?.coerce||!1,...Cn(t)});class Bf extends Ln{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==At.bigint)return this._getInvalidInput(e);let r;const i=new Ks;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),wt(r,{code:ot.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),wt(r,{code:ot.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),wt(r,{code:ot.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Kn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return wt(n,{code:ot.invalid_type,expected:At.bigint,received:n.parsedType}),an}gte(e,n){return this.setLimit("min",e,!0,Gt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Gt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Gt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Gt.toString(n))}setLimit(e,n,r,i){return new Bf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Gt.toString(i)}]})}_addCheck(e){return new Bf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Gt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Gt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Gt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Gt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Gt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Bf.create=t=>{var e;return new Bf({checks:[],typeName:on.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Cn(t)})};class A0 extends Ln{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==At.boolean){const r=this._getOrReturnCtx(e);return wt(r,{code:ot.invalid_type,expected:At.boolean,received:r.parsedType}),an}return Mo(e.data)}}A0.create=t=>new A0({typeName:on.ZodBoolean,coerce:t?.coerce||!1,...Cn(t)});class zp extends Ln{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==At.date){const s=this._getOrReturnCtx(e);return wt(s,{code:ot.invalid_type,expected:At.date,received:s.parsedType}),an}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return wt(s,{code:ot.invalid_date}),an}const r=new Ks;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),wt(i,{code:ot.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),wt(i,{code:ot.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Kn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new zp({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Gt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Gt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}zp.create=t=>new zp({checks:[],coerce:t?.coerce||!1,typeName:on.ZodDate,...Cn(t)});class H1 extends Ln{_parse(e){if(this._getType(e)!==At.symbol){const r=this._getOrReturnCtx(e);return wt(r,{code:ot.invalid_type,expected:At.symbol,received:r.parsedType}),an}return Mo(e.data)}}H1.create=t=>new H1({typeName:on.ZodSymbol,...Cn(t)});class N0 extends Ln{_parse(e){if(this._getType(e)!==At.undefined){const r=this._getOrReturnCtx(e);return wt(r,{code:ot.invalid_type,expected:At.undefined,received:r.parsedType}),an}return Mo(e.data)}}N0.create=t=>new N0({typeName:on.ZodUndefined,...Cn(t)});class P0 extends Ln{_parse(e){if(this._getType(e)!==At.null){const r=this._getOrReturnCtx(e);return wt(r,{code:ot.invalid_type,expected:At.null,received:r.parsedType}),an}return Mo(e.data)}}P0.create=t=>new P0({typeName:on.ZodNull,...Cn(t)});class Ty extends Ln{constructor(){super(...arguments),this._any=!0}_parse(e){return Mo(e.data)}}Ty.create=t=>new Ty({typeName:on.ZodAny,...Cn(t)});class Cp extends Ln{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Mo(e.data)}}Cp.create=t=>new Cp({typeName:on.ZodUnknown,...Cn(t)});class sd extends Ln{_parse(e){const n=this._getOrReturnCtx(e);return wt(n,{code:ot.invalid_type,expected:At.never,received:n.parsedType}),an}}sd.create=t=>new sd({typeName:on.ZodNever,...Cn(t)});class $1 extends Ln{_parse(e){if(this._getType(e)!==At.undefined){const r=this._getOrReturnCtx(e);return wt(r,{code:ot.invalid_type,expected:At.void,received:r.parsedType}),an}return Mo(e.data)}}$1.create=t=>new $1({typeName:on.ZodVoid,...Cn(t)});class Kl extends Ln{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==At.array)return wt(n,{code:ot.invalid_type,expected:At.array,received:n.parsedType}),an;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(wt(n,{code:o?ot.too_big:ot.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(wt(n,{code:ot.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(wt(n,{code:ot.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new zc(n,o,n.path,a)))).then(o=>Ks.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new zc(n,o,n.path,a)));return Ks.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Kl({...this._def,minLength:{value:e,message:Gt.toString(n)}})}max(e,n){return new Kl({...this._def,maxLength:{value:e,message:Gt.toString(n)}})}length(e,n){return new Kl({...this._def,exactLength:{value:e,message:Gt.toString(n)}})}nonempty(e){return this.min(1,e)}}Kl.create=(t,e)=>new Kl({type:t,minLength:null,maxLength:null,exactLength:null,typeName:on.ZodArray,...Cn(e)});function jg(t){if(t instanceof Qr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Nc.create(jg(r))}return new Qr({...t._def,shape:()=>e})}else return t instanceof Kl?new Kl({...t._def,type:jg(t.element)}):t instanceof Nc?Nc.create(jg(t.unwrap())):t instanceof Uf?Uf.create(jg(t.unwrap())):t instanceof Vc?Vc.create(t.items.map(e=>jg(e))):t}class Qr extends Ln{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Kn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==At.object){const c=this._getOrReturnCtx(e);return wt(c,{code:ot.invalid_type,expected:At.object,received:c.parsedType}),an}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof sd&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],f=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new zc(i,f,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof sd){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(wt(i,{code:ot.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const f=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new zc(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,p=await u.value;c.push({key:f,value:p,alwaysSet:u.alwaysSet})}return c}).then(c=>Ks.mergeObjectSync(r,c)):Ks.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Gt.errToObj,new Qr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Gt.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Qr({...this._def,unknownKeys:"strip"})}passthrough(){return new Qr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Qr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Qr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:on.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Qr({...this._def,catchall:e})}pick(e){const n={};return Kn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Qr({...this._def,shape:()=>n})}omit(e){const n={};return Kn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Qr({...this._def,shape:()=>n})}deepPartial(){return jg(this)}partial(e){const n={};return Kn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Qr({...this._def,shape:()=>n})}required(e){const n={};return Kn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Nc;)s=s._def.innerType;n[r]=s}}),new Qr({...this._def,shape:()=>n})}keyof(){return n5(Kn.objectKeys(this.shape))}}Qr.create=(t,e)=>new Qr({shape:()=>t,unknownKeys:"strip",catchall:sd.create(),typeName:on.ZodObject,...Cn(e)});Qr.strictCreate=(t,e)=>new Qr({shape:()=>t,unknownKeys:"strict",catchall:sd.create(),typeName:on.ZodObject,...Cn(e)});Qr.lazycreate=(t,e)=>new Qr({shape:t,unknownKeys:"strip",catchall:sd.create(),typeName:on.ZodObject,...Cn(e)});class k0 extends Ln{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Ia(a.ctx.common.issues));return wt(n,{code:ot.invalid_union,unionErrors:o}),an}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Ia(l));return wt(n,{code:ot.invalid_union,unionErrors:a}),an}}get options(){return this._def.options}}k0.create=(t,e)=>new k0({options:t,typeName:on.ZodUnion,...Cn(e)});const Uu=t=>t instanceof D0?Uu(t.schema):t instanceof Zl?Uu(t.innerType()):t instanceof F0?[t.value]:t instanceof jf?t.options:t instanceof B0?Kn.objectValues(t.enum):t instanceof j0?Uu(t._def.innerType):t instanceof N0?[void 0]:t instanceof P0?[null]:t instanceof Nc?[void 0,...Uu(t.unwrap())]:t instanceof Uf?[null,...Uu(t.unwrap())]:t instanceof A2||t instanceof z0?Uu(t.unwrap()):t instanceof U0?Uu(t._def.innerType):[];class DM extends Ln{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==At.object)return wt(n,{code:ot.invalid_type,expected:At.object,received:n.parsedType}),an;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(wt(n,{code:ot.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),an)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=Uu(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new DM({typeName:on.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Cn(r)})}}function KN(t,e){const n=Vu(t),r=Vu(e);if(t===e)return{valid:!0,data:t};if(n===At.object&&r===At.object){const i=Kn.objectKeys(e),s=Kn.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=KN(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===At.array&&r===At.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=KN(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===At.date&&r===At.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class O0 extends Ln{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(GN(s)||GN(o))return an;const a=KN(s.value,o.value);return a.valid?((XN(s)||XN(o))&&n.dirty(),{status:n.value,value:a.data}):(wt(r,{code:ot.invalid_intersection_types}),an)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}O0.create=(t,e,n)=>new O0({left:t,right:e,typeName:on.ZodIntersection,...Cn(n)});class Vc extends Ln{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.array)return wt(r,{code:ot.invalid_type,expected:At.array,received:r.parsedType}),an;if(r.data.length<this._def.items.length)return wt(r,{code:ot.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),an;!this._def.rest&&r.data.length>this._def.items.length&&(wt(r,{code:ot.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new zc(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Ks.mergeArray(n,o)):Ks.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Vc({...this._def,rest:e})}}Vc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Vc({items:t,typeName:on.ZodTuple,rest:null,...Cn(e)})};class L0 extends Ln{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.object)return wt(r,{code:ot.invalid_type,expected:At.object,received:r.parsedType}),an;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new zc(r,a,r.path,a)),value:o._parse(new zc(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Ks.mergeObjectAsync(n,i):Ks.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ln?new L0({keyType:e,valueType:n,typeName:on.ZodRecord,...Cn(r)}):new L0({keyType:$l.create(),valueType:e,typeName:on.ZodRecord,...Cn(n)})}}class G1 extends Ln{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.map)return wt(r,{code:ot.invalid_type,expected:At.map,received:r.parsedType}),an;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new zc(r,a,r.path,[c,"key"])),value:s._parse(new zc(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return an;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return an;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}G1.create=(t,e,n)=>new G1({valueType:e,keyType:t,typeName:on.ZodMap,...Cn(n)});class Vp extends Ln{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.set)return wt(r,{code:ot.invalid_type,expected:At.set,received:r.parsedType}),an;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(wt(r,{code:ot.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(wt(r,{code:ot.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return an;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new zc(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Vp({...this._def,minSize:{value:e,message:Gt.toString(n)}})}max(e,n){return new Vp({...this._def,maxSize:{value:e,message:Gt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Vp.create=(t,e)=>new Vp({valueType:t,minSize:null,maxSize:null,typeName:on.ZodSet,...Cn(e)});class my extends Ln{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==At.function)return wt(n,{code:ot.invalid_type,expected:At.function,received:n.parsedType}),an;function r(a,l){return W1({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,V1(),My].filter(c=>!!c),issueData:{code:ot.invalid_arguments,argumentsError:l}})}function i(a,l){return W1({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,V1(),My].filter(c=>!!c),issueData:{code:ot.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Cy){const a=this;return Mo(async function(...l){const c=new Ia([]),u=await a._def.args.parseAsync(l,s).catch(g=>{throw c.addIssue(r(l,g)),c}),f=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(f,s).catch(g=>{throw c.addIssue(i(f,g)),c})})}else{const a=this;return Mo(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new Ia([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),f=a._def.returns.safeParse(u,s);if(!f.success)throw new Ia([i(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new my({...this._def,args:Vc.create(e).rest(Cp.create())})}returns(e){return new my({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new my({args:e||Vc.create([]).rest(Cp.create()),returns:n||Cp.create(),typeName:on.ZodFunction,...Cn(r)})}}class D0 extends Ln{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}D0.create=(t,e)=>new D0({getter:t,typeName:on.ZodLazy,...Cn(e)});class F0 extends Ln{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return wt(n,{received:n.data,code:ot.invalid_literal,expected:this._def.value}),an}return{status:"valid",value:e.data}}get value(){return this._def.value}}F0.create=(t,e)=>new F0({value:t,typeName:on.ZodLiteral,...Cn(e)});function n5(t,e){return new jf({values:t,typeName:on.ZodEnum,...Cn(e)})}class jf extends Ln{constructor(){super(...arguments),Nx.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return wt(n,{expected:Kn.joinValues(r),received:n.parsedType,code:ot.invalid_type}),an}if(q1(this,Nx)||JV(this,Nx,new Set(this._def.values)),!q1(this,Nx).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return wt(n,{received:n.data,code:ot.invalid_enum_value,options:r}),an}return Mo(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return jf.create(e,{...this._def,...n})}exclude(e,n=this._def){return jf.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Nx=new WeakMap;jf.create=n5;class B0 extends Ln{constructor(){super(...arguments),Px.set(this,void 0)}_parse(e){const n=Kn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==At.string&&r.parsedType!==At.number){const i=Kn.objectValues(n);return wt(r,{expected:Kn.joinValues(i),received:r.parsedType,code:ot.invalid_type}),an}if(q1(this,Px)||JV(this,Px,new Set(Kn.getValidEnumValues(this._def.values))),!q1(this,Px).has(e.data)){const i=Kn.objectValues(n);return wt(r,{received:r.data,code:ot.invalid_enum_value,options:i}),an}return Mo(e.data)}get enum(){return this._def.values}}Px=new WeakMap;B0.create=(t,e)=>new B0({values:t,typeName:on.ZodNativeEnum,...Cn(e)});class Cy extends Ln{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==At.promise&&n.common.async===!1)return wt(n,{code:ot.invalid_type,expected:At.promise,received:n.parsedType}),an;const r=n.parsedType===At.promise?n.data:Promise.resolve(n.data);return Mo(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Cy.create=(t,e)=>new Cy({type:t,typeName:on.ZodPromise,...Cn(e)});class Zl extends Ln{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===on.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{wt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return an;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?an:l.status==="dirty"||n.value==="dirty"?$g(l.value):l});{if(n.value==="aborted")return an;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?an:a.status==="dirty"||n.value==="dirty"?$g(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?an:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?an:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Up(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Up(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);Kn.assertNever(i)}}Zl.create=(t,e,n)=>new Zl({schema:t,typeName:on.ZodEffects,effect:e,...Cn(n)});Zl.createWithPreprocess=(t,e,n)=>new Zl({schema:e,effect:{type:"preprocess",transform:t},typeName:on.ZodEffects,...Cn(n)});class Nc extends Ln{_parse(e){return this._getType(e)===At.undefined?Mo(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Nc.create=(t,e)=>new Nc({innerType:t,typeName:on.ZodOptional,...Cn(e)});class Uf extends Ln{_parse(e){return this._getType(e)===At.null?Mo(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Uf.create=(t,e)=>new Uf({innerType:t,typeName:on.ZodNullable,...Cn(e)});class j0 extends Ln{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===At.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}j0.create=(t,e)=>new j0({innerType:t,typeName:on.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Cn(e)});class U0 extends Ln{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return R0(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ia(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ia(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}U0.create=(t,e)=>new U0({innerType:t,typeName:on.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Cn(e)});class X1 extends Ln{_parse(e){if(this._getType(e)!==At.nan){const r=this._getOrReturnCtx(e);return wt(r,{code:ot.invalid_type,expected:At.nan,received:r.parsedType}),an}return{status:"valid",value:e.data}}}X1.create=t=>new X1({typeName:on.ZodNaN,...Cn(t)});const bQ=Symbol("zod_brand");class A2 extends Ln{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class kb extends Ln{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?an:s.status==="dirty"?(n.dirty(),$g(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?an:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new kb({in:e,out:n,typeName:on.ZodPipeline})}}class z0 extends Ln{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Up(i)&&(i.value=Object.freeze(i.value)),i);return R0(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}z0.create=(t,e)=>new z0({innerType:t,typeName:on.ZodReadonly,...Cn(e)});function r5(t,e={},n){return t?Ty.create().superRefine((r,i)=>{var s,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...c,fatal:l})}}):Ty.create()}const wQ={object:Qr.lazycreate};var on;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(on||(on={}));const _Q=(t,e={message:`Input not instance of ${t.name}`})=>r5(n=>n instanceof t,e),i5=$l.create,s5=Ff.create,SQ=X1.create,EQ=Bf.create,o5=A0.create,MQ=zp.create,TQ=H1.create,CQ=N0.create,IQ=P0.create,RQ=Ty.create,AQ=Cp.create,NQ=sd.create,PQ=$1.create,kQ=Kl.create,OQ=Qr.create,LQ=Qr.strictCreate,DQ=k0.create,FQ=DM.create,BQ=O0.create,jQ=Vc.create,UQ=L0.create,zQ=G1.create,VQ=Vp.create,WQ=my.create,qQ=D0.create,HQ=F0.create,$Q=jf.create,GQ=B0.create,XQ=Cy.create,sF=Zl.create,KQ=Nc.create,YQ=Uf.create,ZQ=Zl.createWithPreprocess,JQ=kb.create,QQ=()=>i5().optional(),eee=()=>s5().optional(),tee=()=>o5().optional(),nee={string:t=>$l.create({...t,coerce:!0}),number:t=>Ff.create({...t,coerce:!0}),boolean:t=>A0.create({...t,coerce:!0}),bigint:t=>Bf.create({...t,coerce:!0}),date:t=>zp.create({...t,coerce:!0})},ree=an;var H=Object.freeze({__proto__:null,defaultErrorMap:My,setErrorMap:ZJ,getErrorMap:V1,makeIssue:W1,EMPTY_PATH:JJ,addIssueToContext:wt,ParseStatus:Ks,INVALID:an,DIRTY:$g,OK:Mo,isAborted:GN,isDirty:XN,isValid:Up,isAsync:R0,get util(){return Kn},get objectUtil(){return $N},ZodParsedType:At,getParsedType:Vu,ZodType:Ln,datetimeRegex:t5,ZodString:$l,ZodNumber:Ff,ZodBigInt:Bf,ZodBoolean:A0,ZodDate:zp,ZodSymbol:H1,ZodUndefined:N0,ZodNull:P0,ZodAny:Ty,ZodUnknown:Cp,ZodNever:sd,ZodVoid:$1,ZodArray:Kl,ZodObject:Qr,ZodUnion:k0,ZodDiscriminatedUnion:DM,ZodIntersection:O0,ZodTuple:Vc,ZodRecord:L0,ZodMap:G1,ZodSet:Vp,ZodFunction:my,ZodLazy:D0,ZodLiteral:F0,ZodEnum:jf,ZodNativeEnum:B0,ZodPromise:Cy,ZodEffects:Zl,ZodTransformer:Zl,ZodOptional:Nc,ZodNullable:Uf,ZodDefault:j0,ZodCatch:U0,ZodNaN:X1,BRAND:bQ,ZodBranded:A2,ZodPipeline:kb,ZodReadonly:z0,custom:r5,Schema:Ln,ZodSchema:Ln,late:wQ,get ZodFirstPartyTypeKind(){return on},coerce:nee,any:RQ,array:kQ,bigint:EQ,boolean:o5,date:MQ,discriminatedUnion:FQ,effect:sF,enum:$Q,function:WQ,instanceof:_Q,intersection:BQ,lazy:qQ,literal:HQ,map:zQ,nan:SQ,nativeEnum:GQ,never:NQ,null:IQ,nullable:YQ,number:s5,object:OQ,oboolean:tee,onumber:eee,optional:KQ,ostring:QQ,pipeline:JQ,preprocess:ZQ,promise:XQ,record:UQ,set:VQ,strictObject:LQ,string:i5,symbol:TQ,transformer:sF,tuple:jQ,undefined:CQ,union:DQ,unknown:AQ,void:PQ,NEVER:ree,ZodIssueCode:ot,quotelessJson:YJ,ZodError:Ia});const iee=H.object({page:H.number().gte(0,"Page must be greater than zero"),size:H.number().gte(1,"Page size must be greater than one to get any data")}),Ys=H.object({id:H.string().min(1)}),N2=H.object({message:H.string()}),Zs=H.object({id:H.string().optional(),idIn:H.array(H.string()).optional(),fulltext:H.string().optional()}),see=H.enum(["asc","desc"]),cl=()=>H.union([H.boolean(),H.number().int().refine(t=>t===0||t===1).transform(t=>typeof t=="boolean"?t:t===1)]),od=()=>H.union([H.number(),H.string().transform(t=>parseFloat(t)).refine(t=>!isNaN(t))]),Pc=()=>H.union([H.number().int(),H.string().transform(t=>parseInt(t,10)).refine(t=>!isNaN(t))]),Ms=t=>H.string().transform(e=>JSON.parse(e)).refine(e=>Array.isArray(e)).transform(e=>H.array(t).parse(e)),oF=t=>H.string().transform(e=>JSON.parse(e)).transform(e=>t.parse(e)),YN=new Proxy(()=>YN,{get:()=>YN}),Js=({entity:t,shape:e,filter:n,sort:r})=>{const i=YN();return{entity:t,"~entity":i,"~entity-array":[],"~entity-partial-exclude-id":i,shape:e,"~shape":i,"~shape-partial":i,filter:n,"~filter":i,sort:H.array(H.object({name:H.enum(r),sort:see})),"~sort":i,"~sort-keyof":i}};var kI,aF;function oee(){if(aF)return kI;aF=1;class t{constructor(n){this.options=n}clean(n){return n&&(Array.isArray(n)?this._cleanArray(n):this._isObject(n)?this.options.cleanInPlace?this._cleanObjectInPlace(n):this._cleanObject(n):n)}_cleanArray(n){return this.options.cleanInPlace?this._getFilteredArrayInPlace(n):this._getFilteredArray(n)}_cleanObjectInPlace(n){return Object.keys(n).forEach(r=>{const i=n[r];if(Array.isArray(i)){const s=this._cleanArray(i);this._shouldReturnArray(s)?n[r]=s:delete n[r]}else if(this._isObject(i)){const s=this.clean(i);this._shouldReturnObject(s)?n[r]=s:delete n[r]}else this._shouldRemoveValue(i)&&delete n[r]}),n}_cleanObject(n){const r={};return Object.keys(n).forEach(i=>{const s=n[i];if(Array.isArray(s)){const o=this._cleanArray(s);this._shouldReturnArray(o)&&(r[i]=o)}else if(this._isObject(s)){const o=this.clean(s);this._shouldReturnObject(o)&&(r[i]=o)}else this._shouldRemoveValue(s)||(r[i]=s)}),r}_getFilteredArrayInPlace(n){for(let r=n.length-1;r>=0;r--){const i=n[r],s=this.clean(i);this._isObject(s)?this._shouldReturnObject(s)?n[r]=s:n.splice(r,1):Array.isArray(s)?this._shouldReturnArray(s)?n[r]=s:n.splice(r,1):this._shouldRemoveValue(s)&&n.splice(r,1)}return n}_getFilteredArray(n){const r=[];return n.forEach(i=>{const s=this.clean(i);this._isObject(s)?this._shouldReturnObject(s)&&r.push(s):Array.isArray(s)?this._shouldReturnArray(s)&&r.push(s):this._shouldRemoveValue(s)||r.push(s)}),r}_isObject(n){return Object.prototype.toString.call(n)==="[object Object]"}_shouldReturnArray(n){return!this.options.emptyArraysCleaner||n.length!==0}_shouldReturnObject(n){return!this.options.emptyObjectsCleaner||Object.keys(n).length!==0}_shouldRemoveValue(n){return n===null?this.options.nullCleaner:n===""?this.options.emptyStringsCleaner:Number.isNaN(n)?this.options.nanCleaner:n===void 0}}return kI=t,kI}var OI,lF;function aee(){if(lF)return OI;lF=1;const t=oee(),e=n=>{const r=n||{};return{nullCleaner:r.hasOwnProperty("nullCleaner")?r.nullCleaner:!1,emptyArraysCleaner:r.hasOwnProperty("emptyArraysCleaner")?r.emptyArraysCleaner:!0,emptyObjectsCleaner:r.hasOwnProperty("emptyObjectsCleaner")?r.emptyObjectsCleaner:!0,emptyStringsCleaner:r.hasOwnProperty("emptyStringsCleaner")?r.emptyStringsCleaner:!0,nanCleaner:r.hasOwnProperty("nanCleaner")?r.nanCleaner:!0,cleanInPlace:r.hasOwnProperty("cleanInPlace")?r.cleanInPlace:!1}};return OI={clean:function(n,r){const i=e(r);return new t(i).clean(n)}},OI}var lee=aee();const cee=Co(lee),uee=(t,e)=>t&&cee.clean(t,{nullCleaner:!1,emptyArraysCleaner:!1,...e}),ef=(t,e)=>Array.from({length:e-t+1},(n,r)=>r+t),dee=({page:t,total:e,siblings:n=1,boundaries:r=1})=>{const i=Math.max(Math.trunc(e),0);if(n*2+3+r*2>=i)return{type:"simple",page:t,total:e,pages:ef(1,i),start:[],end:[]};const o=Math.max(t-n,r),a=Math.min(t+n,i-r),l=o>r+2,c=a<i-(r+1);return!l&&c?{type:"end",page:t,total:e,start:[],pages:ef(1,n*2+r+2),end:ef(e-(r-1),i)}:l&&!c?{type:"start",page:t,total:e,start:ef(1,r),pages:ef(e-(r+1+2*n),i),end:[]}:{type:"both",page:t,total:e,start:ef(1,r),pages:ef(o,a),end:ef(i-r+1,i)}};var cg={},Au={},Cr={},tf={},cF;function a5(){if(cF)return tf;cF=1,Object.defineProperty(tf,"__esModule",{value:!0}),tf.anumber=t,tf.abytes=n,tf.ahash=r,tf.aexists=i,tf.aoutput=s;function t(o){if(!Number.isSafeInteger(o)||o<0)throw new Error("positive integer expected, got "+o)}function e(o){return o instanceof Uint8Array||ArrayBuffer.isView(o)&&o.constructor.name==="Uint8Array"}function n(o,...a){if(!e(o))throw new Error("Uint8Array expected");if(a.length>0&&!a.includes(o.length))throw new Error("Uint8Array expected of length "+a+", got length="+o.length)}function r(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(o.outputLen),t(o.blockLen)}function i(o,a=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(a&&o.finished)throw new Error("Hash#digest() has already been called")}function s(o,a){n(o);const l=a.outputLen;if(o.length<l)throw new Error("digestInto() expects output buffer of length at least "+l)}return tf}var gn={},uF;function fee(){if(uF)return gn;uF=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.add5L=gn.add5H=gn.add4H=gn.add4L=gn.add3H=gn.add3L=gn.rotlBL=gn.rotlBH=gn.rotlSL=gn.rotlSH=gn.rotr32L=gn.rotr32H=gn.rotrBL=gn.rotrBH=gn.rotrSL=gn.rotrSH=gn.shrSL=gn.shrSH=gn.toBig=void 0,gn.fromBig=n,gn.split=r,gn.add=b;const t=BigInt(2**32-1),e=BigInt(32);function n(R,A=!1){return A?{h:Number(R&t),l:Number(R>>e&t)}:{h:Number(R>>e&t)|0,l:Number(R&t)|0}}function r(R,A=!1){let P=new Uint32Array(R.length),j=new Uint32Array(R.length);for(let U=0;U<R.length;U++){const{h:B,l:$}=n(R[U],A);[P[U],j[U]]=[B,$]}return[P,j]}const i=(R,A)=>BigInt(R>>>0)<<e|BigInt(A>>>0);gn.toBig=i;const s=(R,A,P)=>R>>>P;gn.shrSH=s;const o=(R,A,P)=>R<<32-P|A>>>P;gn.shrSL=o;const a=(R,A,P)=>R>>>P|A<<32-P;gn.rotrSH=a;const l=(R,A,P)=>R<<32-P|A>>>P;gn.rotrSL=l;const c=(R,A,P)=>R<<64-P|A>>>P-32;gn.rotrBH=c;const u=(R,A,P)=>R>>>P-32|A<<64-P;gn.rotrBL=u;const f=(R,A)=>A;gn.rotr32H=f;const p=(R,A)=>R;gn.rotr32L=p;const g=(R,A,P)=>R<<P|A>>>32-P;gn.rotlSH=g;const x=(R,A,P)=>A<<P|R>>>32-P;gn.rotlSL=x;const S=(R,A,P)=>A<<P-32|R>>>64-P;gn.rotlBH=S;const _=(R,A,P)=>R<<P-32|A>>>64-P;gn.rotlBL=_;function b(R,A,P,j){const U=(A>>>0)+(j>>>0);return{h:R+P+(U/2**32|0)|0,l:U|0}}const E=(R,A,P)=>(R>>>0)+(A>>>0)+(P>>>0);gn.add3L=E;const M=(R,A,P,j)=>A+P+j+(R/2**32|0)|0;gn.add3H=M;const T=(R,A,P,j)=>(R>>>0)+(A>>>0)+(P>>>0)+(j>>>0);gn.add4L=T;const k=(R,A,P,j,U)=>A+P+j+U+(R/2**32|0)|0;gn.add4H=k;const N=(R,A,P,j,U)=>(R>>>0)+(A>>>0)+(P>>>0)+(j>>>0)+(U>>>0);gn.add5L=N;const D=(R,A,P,j,U,B)=>A+P+j+U+B+(R/2**32|0)|0;gn.add5H=D;const L={fromBig:n,split:r,toBig:i,shrSH:s,shrSL:o,rotrSH:a,rotrSL:l,rotrBH:c,rotrBL:u,rotr32H:f,rotr32L:p,rotlSH:g,rotlSL:x,rotlBH:S,rotlBL:_,add:b,add3L:E,add3H:M,add4L:T,add4H:k,add5H:D,add5L:N};return gn.default=L,gn}var LI={},ax={},dF;function hee(){return dF||(dF=1,Object.defineProperty(ax,"__esModule",{value:!0}),ax.crypto=void 0,ax.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),ax}var fF;function pee(){return fF||(fF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=r,t.u8=i,t.u32=s,t.createView=o,t.rotr=a,t.rotl=l,t.byteSwap=c,t.byteSwap32=u,t.bytesToHex=p,t.hexToBytes=S,t.asyncLoop=b,t.utf8ToBytes=E,t.toBytes=M,t.concatBytes=T,t.checkOpts=N,t.wrapConstructor=D,t.wrapConstructorWithOpts=L,t.wrapXOFConstructorWithOpts=R,t.randomBytes=A;const e=hee(),n=a5();function r(P){return P instanceof Uint8Array||ArrayBuffer.isView(P)&&P.constructor.name==="Uint8Array"}function i(P){return new Uint8Array(P.buffer,P.byteOffset,P.byteLength)}function s(P){return new Uint32Array(P.buffer,P.byteOffset,Math.floor(P.byteLength/4))}function o(P){return new DataView(P.buffer,P.byteOffset,P.byteLength)}function a(P,j){return P<<32-j|P>>>j}function l(P,j){return P<<j|P>>>32-j>>>0}t.isLE=new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]===68;function c(P){return P<<24&0xff000000|P<<8&0xff0000|P>>>8&65280|P>>>24&255}t.byteSwapIfBE=t.isLE?P=>P:P=>c(P);function u(P){for(let j=0;j<P.length;j++)P[j]=c(P[j])}const f=Array.from({length:256},(P,j)=>j.toString(16).padStart(2,"0"));function p(P){(0,n.abytes)(P);let j="";for(let U=0;U<P.length;U++)j+=f[P[U]];return j}const g={_0:48,_9:57,A:65,F:70,a:97,f:102};function x(P){if(P>=g._0&&P<=g._9)return P-g._0;if(P>=g.A&&P<=g.F)return P-(g.A-10);if(P>=g.a&&P<=g.f)return P-(g.a-10)}function S(P){if(typeof P!="string")throw new Error("hex string expected, got "+typeof P);const j=P.length,U=j/2;if(j%2)throw new Error("hex string expected, got unpadded hex of length "+j);const B=new Uint8Array(U);for(let $=0,q=0;$<U;$++,q+=2){const te=x(P.charCodeAt(q)),W=x(P.charCodeAt(q+1));if(te===void 0||W===void 0){const Z=P[q]+P[q+1];throw new Error('hex string expected, got non-hex character "'+Z+'" at index '+q)}B[$]=te*16+W}return B}const _=async()=>{};t.nextTick=_;async function b(P,j,U){let B=Date.now();for(let $=0;$<P;$++){U($);const q=Date.now()-B;q>=0&&q<j||(await (0,t.nextTick)(),B+=q)}}function E(P){if(typeof P!="string")throw new Error("utf8ToBytes expected string, got "+typeof P);return new Uint8Array(new TextEncoder().encode(P))}function M(P){return typeof P=="string"&&(P=E(P)),(0,n.abytes)(P),P}function T(...P){let j=0;for(let B=0;B<P.length;B++){const $=P[B];(0,n.abytes)($),j+=$.length}const U=new Uint8Array(j);for(let B=0,$=0;B<P.length;B++){const q=P[B];U.set(q,$),$+=q.length}return U}class k{clone(){return this._cloneInto()}}t.Hash=k;function N(P,j){if(j!==void 0&&{}.toString.call(j)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(P,j)}function D(P){const j=B=>P().update(M(B)).digest(),U=P();return j.outputLen=U.outputLen,j.blockLen=U.blockLen,j.create=()=>P(),j}function L(P){const j=(B,$)=>P($).update(M(B)).digest(),U=P({});return j.outputLen=U.outputLen,j.blockLen=U.blockLen,j.create=B=>P(B),j}function R(P){const j=(B,$)=>P($).update(M(B)).digest(),U=P({});return j.outputLen=U.outputLen,j.blockLen=U.blockLen,j.create=B=>P(B),j}function A(P=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(P));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(P);throw new Error("crypto.getRandomValues must be defined")}}(LI)),LI}var hF;function mee(){if(hF)return Cr;hF=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.shake256=Cr.shake128=Cr.keccak_512=Cr.keccak_384=Cr.keccak_256=Cr.keccak_224=Cr.sha3_512=Cr.sha3_384=Cr.sha3_256=Cr.sha3_224=Cr.Keccak=void 0,Cr.keccakP=_;const t=a5(),e=fee(),n=pee(),r=[],i=[],s=[],o=BigInt(0),a=BigInt(1),l=BigInt(2),c=BigInt(7),u=BigInt(256),f=BigInt(113);for(let T=0,k=a,N=1,D=0;T<24;T++){[N,D]=[D,(2*N+3*D)%5],r.push(2*(5*D+N)),i.push((T+1)*(T+2)/2%64);let L=o;for(let R=0;R<7;R++)k=(k<<a^(k>>c)*f)%u,k&l&&(L^=a<<(a<<BigInt(R))-a);s.push(L)}const[p,g]=(0,e.split)(s,!0),x=(T,k,N)=>N>32?(0,e.rotlBH)(T,k,N):(0,e.rotlSH)(T,k,N),S=(T,k,N)=>N>32?(0,e.rotlBL)(T,k,N):(0,e.rotlSL)(T,k,N);function _(T,k=24){const N=new Uint32Array(10);for(let D=24-k;D<24;D++){for(let A=0;A<10;A++)N[A]=T[A]^T[A+10]^T[A+20]^T[A+30]^T[A+40];for(let A=0;A<10;A+=2){const P=(A+8)%10,j=(A+2)%10,U=N[j],B=N[j+1],$=x(U,B,1)^N[P],q=S(U,B,1)^N[P+1];for(let te=0;te<50;te+=10)T[A+te]^=$,T[A+te+1]^=q}let L=T[2],R=T[3];for(let A=0;A<24;A++){const P=i[A],j=x(L,R,P),U=S(L,R,P),B=r[A];L=T[B],R=T[B+1],T[B]=j,T[B+1]=U}for(let A=0;A<50;A+=10){for(let P=0;P<10;P++)N[P]=T[A+P];for(let P=0;P<10;P++)T[A+P]^=~N[(P+2)%10]&N[(P+4)%10]}T[0]^=p[D],T[1]^=g[D]}N.fill(0)}class b extends n.Hash{constructor(k,N,D,L=!1,R=24){if(super(),this.blockLen=k,this.suffix=N,this.outputLen=D,this.enableXOF=L,this.rounds=R,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,t.anumber)(D),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,n.u32)(this.state)}keccak(){n.isLE||(0,n.byteSwap32)(this.state32),_(this.state32,this.rounds),n.isLE||(0,n.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(k){(0,t.aexists)(this);const{blockLen:N,state:D}=this;k=(0,n.toBytes)(k);const L=k.length;for(let R=0;R<L;){const A=Math.min(N-this.pos,L-R);for(let P=0;P<A;P++)D[this.pos++]^=k[R++];this.pos===N&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:k,suffix:N,pos:D,blockLen:L}=this;k[D]^=N,N&128&&D===L-1&&this.keccak(),k[L-1]^=128,this.keccak()}writeInto(k){(0,t.aexists)(this,!1),(0,t.abytes)(k),this.finish();const N=this.state,{blockLen:D}=this;for(let L=0,R=k.length;L<R;){this.posOut>=D&&this.keccak();const A=Math.min(D-this.posOut,R-L);k.set(N.subarray(this.posOut,this.posOut+A),L),this.posOut+=A,L+=A}return k}xofInto(k){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(k)}xof(k){return(0,t.anumber)(k),this.xofInto(new Uint8Array(k))}digestInto(k){if((0,t.aoutput)(k,this),this.finished)throw new Error("digest() was already called");return this.writeInto(k),this.destroy(),k}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(k){const{blockLen:N,suffix:D,outputLen:L,rounds:R,enableXOF:A}=this;return k||(k=new b(N,D,L,A,R)),k.state32.set(this.state32),k.pos=this.pos,k.posOut=this.posOut,k.finished=this.finished,k.rounds=R,k.suffix=D,k.outputLen=L,k.enableXOF=A,k.destroyed=this.destroyed,k}}Cr.Keccak=b;const E=(T,k,N)=>(0,n.wrapConstructor)(()=>new b(k,T,N));Cr.sha3_224=E(6,144,224/8),Cr.sha3_256=E(6,136,256/8),Cr.sha3_384=E(6,104,384/8),Cr.sha3_512=E(6,72,512/8),Cr.keccak_224=E(1,144,224/8),Cr.keccak_256=E(1,136,256/8),Cr.keccak_384=E(1,104,384/8),Cr.keccak_512=E(1,72,512/8);const M=(T,k,N)=>(0,n.wrapXOFConstructorWithOpts)((D={})=>new b(k,T,D.dkLen===void 0?N:D.dkLen,!0));return Cr.shake128=M(31,168,128/8),Cr.shake256=M(31,136,256/8),Cr}var pF;function gee(){if(pF)return Au;pF=1;const{sha3_512:t}=mee(),e=24,n=32,r=(x=4,S=Math.random)=>{let _="";for(;_.length<x;)_=_+Math.floor(S()*36).toString(36);return _};function i(x){let S=8n,_=0n;for(const b of x.values()){const E=BigInt(b);_=(_<<S)+E}return _}const s=(x="")=>i(t(x)).toString(36).slice(1),o=Array.from({length:26},(x,S)=>String.fromCharCode(S+97)),a=x=>o[Math.floor(x()*o.length)],l=({globalObj:x=typeof mp<"u"?mp:typeof window<"u"?window:{},random:S=Math.random}={})=>{const _=Object.keys(x).toString(),b=_.length?_+r(n,S):r(n,S);return s(b).substring(0,n)},c=x=>()=>x++,u=0x1c6b1f1f,f=({random:x=Math.random,counter:S=c(Math.floor(x()*u)),length:_=e,fingerprint:b=l({random:x})}={})=>function(){const M=a(x),T=Date.now().toString(36),k=S().toString(36),N=r(_,x),D=`${T+N+k+b}`;return`${M+s(D).substring(1,_)}`},p=f(),g=(x,{minLength:S=2,maxLength:_=n}={})=>{const b=x.length,E=/^[0-9a-z]+$/;try{if(typeof x=="string"&&b>=S&&b<=_&&E.test(x))return!0}finally{}return!1};return Au.getConstants=()=>({defaultLength:e,bigLength:n}),Au.init=f,Au.createId=p,Au.bufToBigInt=i,Au.createCounter=c,Au.createFingerprint=l,Au.isCuid=g,Au}var mF;function yee(){if(mF)return cg;mF=1;const{createId:t,init:e,getConstants:n,isCuid:r}=gee();return cg.createId=t,cg.init=e,cg.getConstants=n,cg.isCuid=r,cg}var vee=yee();const Wn=vee.createId;var DI,gF;function xee(){if(gF)return DI;gF=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(E){E!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(M){try{var T=t.call(M);return i.test(T)}catch{return!1}},o=function(M){try{return s(M)?!1:(t.call(M),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",c="[object Function]",u="[object GeneratorFunction]",f="[object HTMLAllCollection]",p="[object HTML document.all class]",g="[object HTMLCollection]",x=typeof Symbol=="function"&&!!Symbol.toStringTag,S=!(0 in[,]),_=function(){return!1};if(typeof document=="object"){var b=document.all;a.call(b)===a.call(document.all)&&(_=function(M){if((S||!M)&&(typeof M>"u"||typeof M=="object"))try{var T=a.call(M);return(T===f||T===p||T===g||T===l)&&M("")==null}catch{}return!1})}return DI=e?function(M){if(_(M))return!0;if(!M||typeof M!="function"&&typeof M!="object")return!1;try{e(M,null,n)}catch(T){if(T!==r)return!1}return!s(M)&&o(M)}:function(M){if(_(M))return!0;if(!M||typeof M!="function"&&typeof M!="object")return!1;if(x)return o(M);if(s(M))return!1;var T=a.call(M);return T!==c&&T!==u&&!/^\[object HTML/.test(T)?!1:o(M)},DI}var bee=xee();const wee=Co(bee),_ee=t=>wee(t),See=t=>typeof t=="object"&&!Array.isArray(t)&&t!==null,l5=t=>Object.keys(t).reduce((e,n)=>(e[n]=t[n]===""?null:See(t[n])?l5(t[n]):t[n],e),{});var WS={exports:{}},Eee=WS.exports,yF;function Mee(){return yF||(yF=1,function(t){(function(e,n){t.exports=n()})(Eee,function(){var e=Object.prototype.toString;function n(f,p){return f==null?!1:Object.prototype.hasOwnProperty.call(f,p)}function r(f){if(!f||o(f)&&f.length===0)return!0;if(typeof f!="string"){for(var p in f)if(n(f,p))return!1;return!0}return!1}function i(f){return e.call(f)}function s(f){return typeof f=="object"&&i(f)==="[object Object]"}var o=Array.isArray||function(f){return e.call(f)==="[object Array]"};function a(f){return typeof f=="boolean"||i(f)==="[object Boolean]"}function l(f){var p=parseInt(f);return p.toString()===f?p:f}function c(f){f=f||{};var p=function(b){return Object.keys(p).reduce(function(E,M){return M==="create"||typeof p[M]=="function"&&(E[M]=p[M].bind(p,b)),E},{})},g;f.includeInheritedProps?g=function(){return!0}:g=function(b,E){return typeof E=="number"&&Array.isArray(b)||n(b,E)};function x(b,E){if(g(b,E))return b[E]}var S;f.includeInheritedProps?S=function(b,E){typeof E!="string"&&typeof E!="number"&&(E=String(E));var M=x(b,E);if(E==="__proto__"||E==="prototype"||E==="constructor"&&typeof M=="function")throw new Error("For security reasons, object's magic properties cannot be set");return M}:S=function(b,E){return x(b,E)};function _(b,E,M,T){if(typeof E=="number"&&(E=[E]),!E||E.length===0)return b;if(typeof E=="string")return _(b,E.split(".").map(l),M,T);var k=E[0],N=S(b,k);return E.length===1?((N===void 0||!T)&&(b[k]=M),N):(N===void 0&&(typeof E[1]=="number"?b[k]=[]:b[k]={}),_(b[k],E.slice(1),M,T))}return p.has=function(b,E){if(typeof E=="number"?E=[E]:typeof E=="string"&&(E=E.split(".")),!E||E.length===0)return!!b;for(var M=0;M<E.length;M++){var T=l(E[M]);if(typeof T=="number"&&o(b)&&T<b.length||(f.includeInheritedProps?T in Object(b):n(b,T)))b=b[T];else return!1}return!0},p.ensureExists=function(b,E,M){return _(b,E,M,!0)},p.set=function(b,E,M,T){return _(b,E,M,T)},p.insert=function(b,E,M,T){var k=p.get(b,E);T=~~T,o(k)||(k=[],p.set(b,E,k)),k.splice(T,0,M)},p.empty=function(b,E){if(!r(E)&&b!=null){var M,T;if(M=p.get(b,E)){if(typeof M=="string")return p.set(b,E,"");if(a(M))return p.set(b,E,!1);if(typeof M=="number")return p.set(b,E,0);if(o(M))M.length=0;else if(s(M))for(T in M)g(M,T)&&delete M[T];else return p.set(b,E,null)}}},p.push=function(b,E){var M=p.get(b,E);o(M)||(M=[],p.set(b,E,M)),M.push.apply(M,Array.prototype.slice.call(arguments,2))},p.coalesce=function(b,E,M){for(var T,k=0,N=E.length;k<N;k++)if((T=p.get(b,E[k]))!==void 0)return T;return M},p.get=function(b,E,M){if(typeof E=="number"&&(E=[E]),!E||E.length===0)return b;if(b==null)return M;if(typeof E=="string")return p.get(b,E.split("."),M);var T=l(E[0]),k=S(b,T);return k===void 0?M:E.length===1?k:p.get(b[T],E.slice(1),M)},p.del=function(E,M){if(typeof M=="number"&&(M=[M]),E==null||r(M))return E;if(typeof M=="string")return p.del(E,M.split("."));var T=l(M[0]);if(S(E,T),!g(E,T))return E;if(M.length===1)o(E)?E.splice(T,1):delete E[T];else return p.del(E[T],M.slice(1));return E},p}var u=c();return u.create=c,u.withInheritedProps=c({includeInheritedProps:!0}),u})}(WS)),WS.exports}var Tee=Mee();const vF=Co(Tee);function jn({number:t,empty:e="-",fraction:n=2}){if(t==null)return e;try{return t.toLocaleString(void 0,{maximumFractionDigits:n})}catch(r){return console.error("toHumanNumber",t,r),t.toFixed(2)}}const c5=async t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=i=>n(i)}),P2=({error:t,errors:e,onError:n})=>{const r=e.some(s=>s),i=t instanceof Error;return!r&&i&&n(t),r||i},u5=Sn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-0.5","hover:bg-slate-100","text-slate-500","hover:text-blue-500","cursor-pointer"]},variant:{variant:{common:[],warning:["text-amber-500","hover:text-amber-600","hover:bg-amber-100"],danger:["text-red-500","hover:text-red-600","hover:bg-red-100"]},disabled:{true:["cursor-not-allowed","text-slate-300","bg-slate-100","hover:bg-slate-100"]}},defaults:{variant:"common",disabled:!1}}),Cee=Sn({use:u5,slot:{},variant:{},defaults:{}}),k2=({icon:t,iconProps:e,variant:n,tva:r=Cee,css:i,children:s,...o})=>{const a=r({...n,css:i}).slots;return v.jsxs("div",{className:a.base(),...o,children:[Mb(t)?v.jsx(pn,{icon:t,...e}):t,s]})};function FM(){return typeof window<"u"}function Gf(t){return d5(t)?(t.nodeName||"").toLowerCase():"#document"}function ta(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function qc(t){var e;return(e=(d5(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function d5(t){return FM()?t instanceof Node||t instanceof ta(t).Node:!1}function Rr(t){return FM()?t instanceof Element||t instanceof ta(t).Element:!1}function Bi(t){return FM()?t instanceof HTMLElement||t instanceof ta(t).HTMLElement:!1}function ZN(t){return!FM()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ta(t).ShadowRoot}function Ob(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=sl(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Iee(t){return["table","td","th"].includes(Gf(t))}function BM(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function O2(t){const e=jM(),n=Rr(t)?sl(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Ree(t){let e=ad(t);for(;Bi(e)&&!Yu(e);){if(O2(e))return e;if(BM(e))return null;e=ad(e)}return null}function jM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Yu(t){return["html","body","#document"].includes(Gf(t))}function sl(t){return ta(t).getComputedStyle(t)}function UM(t){return Rr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ad(t){if(Gf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ZN(t)&&t.host||qc(t);return ZN(e)?e.host:e}function f5(t){const e=ad(t);return Yu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Bi(e)&&Ob(e)?e:f5(e)}function If(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=f5(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ta(i);if(s){const a=JN(o);return e.concat(o,o.visualViewport||[],Ob(i)?i:[],a&&n?If(a):[])}return e.concat(i,If(i,[],n))}function JN(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function zl(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function Ss(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&ZN(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function L2(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function h5(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function p5(t){return t.mozInputSource===0&&t.isTrusted?!0:QN()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function D2(t){return Nee()?!1:!QN()&&t.width===0&&t.height===0||QN()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function m5(){return/apple/i.test(navigator.vendor)}function QN(){const t=/android/i;return t.test(L2())||t.test(h5())}function Aee(){return L2().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Nee(){return h5().includes("jsdom/")}function V0(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function Pee(t){return"nativeEvent"in t}function kee(t){return t.matches("html,body")}function Es(t){return t?.ownerDocument||document}function FI(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function xf(t){return"composedPath"in t?t.composedPath()[0]:t.target}const Oee="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function F2(t){return Bi(t)&&t.matches(Oee)}function yo(t){t.preventDefault(),t.stopPropagation()}function g5(t){return t?t.getAttribute("role")==="combobox"&&F2(t):!1}const Iy=Math.min,Sa=Math.max,K1=Math.round,Gg=Math.floor,kc=t=>({x:t,y:t}),Lee={left:"right",right:"left",bottom:"top",top:"bottom"},Dee={start:"end",end:"start"};function xF(t,e,n){return Sa(t,Iy(e,n))}function Lb(t,e){return typeof t=="function"?t(e):t}function zf(t){return t.split("-")[0]}function Db(t){return t.split("-")[1]}function y5(t){return t==="x"?"y":"x"}function v5(t){return t==="y"?"height":"width"}function Wp(t){return["top","bottom"].includes(zf(t))?"y":"x"}function x5(t){return y5(Wp(t))}function Fee(t,e,n){n===void 0&&(n=!1);const r=Db(t),i=x5(t),s=v5(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Y1(o)),[o,Y1(o)]}function Bee(t){const e=Y1(t);return[eP(t),e,eP(e)]}function eP(t){return t.replace(/start|end/g,e=>Dee[e])}function jee(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function Uee(t,e,n,r){const i=Db(t);let s=jee(zf(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(eP)))),s}function Y1(t){return t.replace(/left|right|bottom|top/g,e=>Lee[e])}function zee(t){return{top:0,right:0,bottom:0,left:0,...t}}function Vee(t){return typeof t!="number"?zee(t):{top:t,right:t,bottom:t,left:t}}function Z1(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}var Wee=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],J1=Wee.join(","),b5=typeof Element>"u",Ry=b5?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Q1=!b5&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},eE=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},qee=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},Hee=function(e,n,r){if(eE(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(J1));return n&&Ry.call(e,J1)&&i.unshift(e),i=i.filter(r),i},$ee=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!eE(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?i.push.apply(i,c):i.push({scopeParent:o,candidates:c})}else{var u=Ry.call(o,J1);u&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!eE(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var g=t(f===!0?o.children:f.children,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:o,candidates:g})}else s.unshift.apply(s,o.children)}}return i},w5=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},_5=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||qee(e))&&!w5(e)?0:e.tabIndex},Gee=function(e,n){var r=_5(e);return r<0&&n&&!w5(e)?0:r},Xee=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},S5=function(e){return e.tagName==="INPUT"},Kee=function(e){return S5(e)&&e.type==="hidden"},Yee=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Zee=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},Jee=function(e){if(!e.name)return!0;var n=e.form||Q1(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=Zee(i,e.form);return!s||s===e},Qee=function(e){return S5(e)&&e.type==="radio"},ete=function(e){return Qee(e)&&!Jee(e)},tte=function(e){var n,r=e&&Q1(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var c,u,f;r=Q1(i),i=(c=r)===null||c===void 0?void 0:c.host,s=!!((u=i)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},bF=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},nte=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Ry.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Ry.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var l=e.parentElement,c=Q1(e);if(l&&!l.shadowRoot&&i(l)===!0)return bF(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(tte(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return bF(e);return!1},rte=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return Ry.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},ite=function(e,n){return!(n.disabled||eE(n)||Kee(n)||nte(n,e)||Yee(n)||rte(n))},tP=function(e,n){return!(ete(n)||_5(n)<0||!ite(e,n))},ste=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},ote=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=Gee(a,o),c=o?t(i.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:c})}),r.sort(Xee).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},zM=function(e,n){n=n||{};var r;return n.getShadowRoot?r=$ee([e],n.includeContainer,{filter:tP.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:ste}):r=Hee(e,n.includeContainer,tP.bind(null,n)),ote(r)},ate=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ry.call(e,J1)===!1?!1:tP(n,e)};function wF(t,e,n){let{reference:r,floating:i}=t;const s=Wp(e),o=x5(e),a=v5(o),l=zf(e),c=s==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-i.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-i.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Db(e)){case"start":g[o]-=p*(n&&c?-1:1);break;case"end":g[o]+=p*(n&&c?-1:1);break}return g}const lte=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await (o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:f}=wF(c,r,l),p=r,g={},x=0;for(let S=0;S<a.length;S++){const{name:_,fn:b}=a[S],{x:E,y:M,data:T,reset:k}=await b({x:u,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});u=E??u,f=M??f,g={...g,[_]:{...g[_],...T}},k&&x<=50&&(x++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:u,y:f}=wF(c,p,l)),S=-1)}return{x:u,y:f,placement:p,strategy:i,middlewareData:g}};async function B2(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=Lb(e,t),x=Vee(g),_=a[p?f==="floating"?"reference":"floating":f],b=Z1(await s.getClippingRect({element:(n=await (s.isElement==null?void 0:s.isElement(_)))==null||n?_:_.contextElement||await (s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,M=await (s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),T=await (s.isElement==null?void 0:s.isElement(M))?await (s.getScale==null?void 0:s.getScale(M))||{x:1,y:1}:{x:1,y:1},k=Z1(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:M,strategy:l}):E);return{top:(b.top-k.top+x.top)/T.y,bottom:(k.bottom-b.bottom+x.bottom)/T.y,left:(b.left-k.left+x.left)/T.x,right:(k.right-b.right+x.right)/T.x}}const cte=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:S=!0,..._}=Lb(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=zf(i),E=Wp(a),M=zf(a)===a,T=await (l.isRTL==null?void 0:l.isRTL(c.floating)),k=p||(M||!S?[Y1(a)]:Bee(a)),N=x!=="none";!p&&N&&k.push(...Uee(a,S,x,T));const D=[a,...k],L=await B2(e,_),R=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&R.push(L[b]),f){const B=Fee(i,o,T);R.push(L[B[0]],L[B[1]])}if(A=[...A,{placement:i,overflows:R}],!R.every(B=>B<=0)){var P,j;const B=(((P=s.flip)==null?void 0:P.index)||0)+1,$=D[B];if($)return{data:{index:B,overflows:A},reset:{placement:$}};let q=(j=A.filter(te=>te.overflows[0]<=0).sort((te,W)=>te.overflows[1]-W.overflows[1])[0])==null?void 0:j.placement;if(!q)switch(g){case"bestFit":{var U;const te=(U=A.filter(W=>{if(N){const Z=Wp(W.placement);return Z===E||Z==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(Z=>Z>0).reduce((Z,J)=>Z+J,0)]).sort((W,Z)=>W[1]-Z[1])[0])==null?void 0:U[0];te&&(q=te);break}case"initialPlacement":q=a;break}if(i!==q)return{reset:{placement:q}}}return{}}}};async function ute(t,e){const{placement:n,platform:r,elements:i}=t,s=await (r.isRTL==null?void 0:r.isRTL(i.floating)),o=zf(n),a=Db(n),l=Wp(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,f=Lb(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof x=="number"&&(g=a==="end"?x*-1:x),l?{x:g*u,y:p*c}:{x:p*c,y:g*u}}const dte=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await ute(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},fte=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:b,y:E}=_;return{x:b,y:E}}},...l}=Lb(t,e),c={x:n,y:r},u=await B2(e,l),f=Wp(zf(i)),p=y5(f);let g=c[p],x=c[f];if(s){const _=p==="y"?"top":"left",b=p==="y"?"bottom":"right",E=g+u[_],M=g-u[b];g=xF(E,g,M)}if(o){const _=f==="y"?"top":"left",b=f==="y"?"bottom":"right",E=x+u[_],M=x-u[b];x=xF(E,x,M)}const S=a.fn({...e,[p]:g,[f]:x});return{...S,data:{x:S.x-n,y:S.y-r,enabled:{[p]:s,[f]:o}}}}}},hte=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Lb(t,e),u=await B2(e,c),f=zf(i),p=Db(i),g=Wp(i)==="y",{width:x,height:S}=s.floating;let _,b;f==="top"||f==="bottom"?(_=f,b=p===(await (o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(b=f,_=p==="end"?"top":"bottom");const E=S-u.top-u.bottom,M=x-u.left-u.right,T=Iy(S-u[_],E),k=Iy(x-u[b],M),N=!e.middlewareData.shift;let D=T,L=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(L=M),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(D=E),N&&!p){const A=Sa(u.left,0),P=Sa(u.right,0),j=Sa(u.top,0),U=Sa(u.bottom,0);g?L=x-2*(A!==0||P!==0?A+P:Sa(u.left,u.right)):D=S-2*(j!==0||U!==0?j+U:Sa(u.top,u.bottom))}await l({...e,availableWidth:L,availableHeight:D});const R=await o.getDimensions(a.floating);return x!==R.width||S!==R.height?{reset:{rects:!0}}:{}}}};function E5(t){const e=sl(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Bi(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=K1(n)!==s||K1(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function j2(t){return Rr(t)?t:t.contextElement}function gy(t){const e=j2(t);if(!Bi(e))return kc(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=E5(e);let o=(s?K1(n.width):n.width)/r,a=(s?K1(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const pte=kc(0);function M5(t){const e=ta(t);return!jM()||!e.visualViewport?pte:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function mte(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ta(t)?!1:e}function qp(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=j2(t);let o=kc(1);e&&(r?Rr(r)&&(o=gy(r)):o=gy(t));const a=mte(s,n,r)?M5(s):kc(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const p=ta(s),g=r&&Rr(r)?ta(r):r;let x=p,S=JN(x);for(;S&&r&&g!==x;){const _=gy(S),b=S.getBoundingClientRect(),E=sl(S),M=b.left+(S.clientLeft+parseFloat(E.paddingLeft))*_.x,T=b.top+(S.clientTop+parseFloat(E.paddingTop))*_.y;l*=_.x,c*=_.y,u*=_.x,f*=_.y,l+=M,c+=T,x=ta(S),S=JN(x)}}return Z1({width:u,height:f,x:l,y:c})}function U2(t,e){const n=UM(t).scrollLeft;return e?e.left+n:qp(qc(t)).left+n}function T5(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:U2(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function gte(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=qc(r),a=e?BM(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=kc(1);const u=kc(0),f=Bi(r);if((f||!f&&!s)&&((Gf(r)!=="body"||Ob(o))&&(l=UM(r)),Bi(r))){const g=qp(r);c=gy(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const p=o&&!f&&!s?T5(o,l,!0):kc(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:n.y*c.y-l.scrollTop*c.y+u.y+p.y}}function yte(t){return Array.from(t.getClientRects())}function vte(t){const e=qc(t),n=UM(t),r=t.ownerDocument.body,i=Sa(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Sa(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+U2(t);const a=-n.scrollTop;return sl(r).direction==="rtl"&&(o+=Sa(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function xte(t,e){const n=ta(t),r=qc(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=jM();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function bte(t,e){const n=qp(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Bi(t)?gy(t):kc(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function _F(t,e,n){let r;if(e==="viewport")r=xte(t,n);else if(e==="document")r=vte(qc(t));else if(Rr(e))r=bte(e,n);else{const i=M5(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Z1(r)}function C5(t,e){const n=ad(t);return n===e||!Rr(n)||Yu(n)?!1:sl(n).position==="fixed"||C5(n,e)}function wte(t,e){const n=e.get(t);if(n)return n;let r=If(t,[],!1).filter(a=>Rr(a)&&Gf(a)!=="body"),i=null;const s=sl(t).position==="fixed";let o=s?ad(t):t;for(;Rr(o)&&!Yu(o);){const a=sl(o),l=O2(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Ob(o)&&!l&&C5(t,o))?r=r.filter(u=>u!==o):i=a,o=ad(o)}return e.set(t,r),r}function _te(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?BM(e)?[]:wte(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const f=_F(e,u,i);return c.top=Sa(f.top,c.top),c.right=Iy(f.right,c.right),c.bottom=Iy(f.bottom,c.bottom),c.left=Sa(f.left,c.left),c},_F(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Ste(t){const{width:e,height:n}=E5(t);return{width:e,height:n}}function Ete(t,e,n){const r=Bi(e),i=qc(e),s=n==="fixed",o=qp(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=kc(0);if(r||!r&&!s)if((Gf(e)!=="body"||Ob(i))&&(a=UM(e)),r){const p=qp(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&(l.x=U2(i));const c=i&&!r&&!s?T5(i,a):kc(0),u=o.left+a.scrollLeft-l.x-c.x,f=o.top+a.scrollTop-l.y-c.y;return{x:u,y:f,width:o.width,height:o.height}}function BI(t){return sl(t).position==="static"}function SF(t,e){if(!Bi(t)||sl(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return qc(t)===n&&(n=n.ownerDocument.body),n}function I5(t,e){const n=ta(t);if(BM(t))return n;if(!Bi(t)){let i=ad(t);for(;i&&!Yu(i);){if(Rr(i)&&!BI(i))return i;i=ad(i)}return n}let r=SF(t,e);for(;r&&Iee(r)&&BI(r);)r=SF(r,e);return r&&Yu(r)&&BI(r)&&!O2(r)?n:r||Ree(t)||n}const Mte=async function(t){const e=this.getOffsetParent||I5,n=this.getDimensions,r=await n(t.floating);return{reference:Ete(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Tte(t){return sl(t).direction==="rtl"}const Cte={convertOffsetParentRelativeRectToViewportRelativeRect:gte,getDocumentElement:qc,getClippingRect:_te,getOffsetParent:I5,getElementRects:Mte,getClientRects:yte,getDimensions:Ste,getScale:gy,isElement:Rr,isRTL:Tte};function R5(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Ite(t,e){let n=null,r;const i=qc(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:f,width:p,height:g}=c;if(a||e(),!p||!g)return;const x=Gg(f),S=Gg(i.clientWidth-(u+p)),_=Gg(i.clientHeight-(f+g)),b=Gg(u),M={rootMargin:-x+"px "+-S+"px "+-_+"px "+-b+"px",threshold:Sa(0,Iy(1,l))||1};let T=!0;function k(N){const D=N[0].intersectionRatio;if(D!==l){if(!T)return o();D?o(!1,D):r=setTimeout(()=>{o(!1,1e-7)},1e3)}D===1&&!R5(c,t.getBoundingClientRect())&&o(),T=!1}try{n=new IntersectionObserver(k,{...M,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,M)}n.observe(t)}return o(!0),s}function A5(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=j2(t),u=i||s?[...c?If(c):[],...If(e)]:[];u.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const f=c&&a?Ite(c,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(b=>{let[E]=b;E&&E.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var M;(M=g)==null||M.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let x,S=l?qp(t):null;l&&_();function _(){const b=qp(t);S&&!R5(S,b)&&n(),S=b,x=requestAnimationFrame(_)}return n(),()=>{var b;u.forEach(E=>{i&&E.removeEventListener("scroll",n),s&&E.removeEventListener("resize",n)}),f?.(),(b=g)==null||b.disconnect(),g=null,l&&cancelAnimationFrame(x)}}const Rte=dte,Ate=fte,Nte=cte,Pte=hte,kte=(t,e,n)=>{const r=new Map,i={platform:Cte,...n},s={...i.platform,_c:r};return lte(t,e,{...i,platform:s})};var qS=typeof document<"u"?X.useLayoutEffect:X.useEffect;function tE(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!tE(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!tE(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function N5(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function EF(t,e){const n=N5(t);return Math.round(e*n)/n}function jI(t){const e=X.useRef(t);return qS(()=>{e.current=t}),e}function Ote(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,f]=X.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=X.useState(r);tE(p,r)||g(r);const[x,S]=X.useState(null),[_,b]=X.useState(null),E=X.useCallback(W=>{W!==N.current&&(N.current=W,S(W))},[]),M=X.useCallback(W=>{W!==D.current&&(D.current=W,b(W))},[]),T=s||x,k=o||_,N=X.useRef(null),D=X.useRef(null),L=X.useRef(u),R=l!=null,A=jI(l),P=jI(i),j=jI(c),U=X.useCallback(()=>{if(!N.current||!D.current)return;const W={placement:e,strategy:n,middleware:p};P.current&&(W.platform=P.current),kte(N.current,D.current,W).then(Z=>{const J={...Z,isPositioned:j.current!==!1};B.current&&!tE(L.current,J)&&(L.current=J,bM.flushSync(()=>{f(J)}))})},[p,e,n,P,j]);qS(()=>{c===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,f(W=>({...W,isPositioned:!1})))},[c]);const B=X.useRef(!1);qS(()=>(B.current=!0,()=>{B.current=!1}),[]),qS(()=>{if(T&&(N.current=T),k&&(D.current=k),T&&k){if(A.current)return A.current(T,k,U);U()}},[T,k,U,A,R]);const $=X.useMemo(()=>({reference:N,floating:D,setReference:E,setFloating:M}),[E,M]),q=X.useMemo(()=>({reference:T,floating:k}),[T,k]),te=X.useMemo(()=>{const W={position:n,left:0,top:0};if(!q.floating)return W;const Z=EF(q.floating,u.x),J=EF(q.floating,u.y);return a?{...W,transform:"translate("+Z+"px, "+J+"px)",...N5(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:J}},[n,a,q.floating,u.x,u.y]);return X.useMemo(()=>({...u,update:U,refs:$,elements:q,floatingStyles:te}),[u,U,$,q,te])}const P5=(t,e)=>({...Rte(t),options:[t,e]}),Lte=(t,e)=>({...Ate(t),options:[t,e]}),k5=(t,e)=>({...Nte(t),options:[t,e]}),Dte=(t,e)=>({...Pte(t),options:[t,e]});function MF(t){return X.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const O5={...WG},Fte=O5.useInsertionEffect,Bte=Fte||(t=>t());function bo(t){const e=X.useRef(()=>{});return Bte(()=>{e.current=t}),X.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const z2="ArrowUp",Fb="ArrowDown",Rf="ArrowLeft",Af="ArrowRight";function g_(t,e,n){return Math.floor(t/e)!==n}function e0(t,e){return e<0||e>=t.current.length}function UI(t,e){return zs(t,{disabledIndices:e})}function TF(t,e){return zs(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function zs(t,e){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=e===void 0?{}:e;const o=t.current;let a=n;do a+=r?-s:s;while(a>=0&&a<=o.length-1&&HS(o,a,i));return a}function jte(t,e){let{event:n,orientation:r,loop:i,rtl:s,cols:o,disabledIndices:a,minIndex:l,maxIndex:c,prevIndex:u,stopEvent:f=!1}=e,p=u;if(n.key===z2){if(f&&yo(n),u===-1)p=c;else if(p=zs(t,{startingIndex:p,amount:o,decrement:!0,disabledIndices:a}),i&&(u-o<l||p<0)){const g=u%o,x=c%o,S=c-(x-g);x===g?p=c:p=x>g?S:S-o}e0(t,p)&&(p=u)}if(n.key===Fb&&(f&&yo(n),u===-1?p=l:(p=zs(t,{startingIndex:u,amount:o,disabledIndices:a}),i&&u+o>c&&(p=zs(t,{startingIndex:u%o-o,amount:o,disabledIndices:a}))),e0(t,p)&&(p=u)),r==="both"){const g=Gg(u/o);n.key===(s?Rf:Af)&&(f&&yo(n),u%o!==o-1?(p=zs(t,{startingIndex:u,disabledIndices:a}),i&&g_(p,o,g)&&(p=zs(t,{startingIndex:u-u%o-1,disabledIndices:a}))):i&&(p=zs(t,{startingIndex:u-u%o-1,disabledIndices:a})),g_(p,o,g)&&(p=u)),n.key===(s?Af:Rf)&&(f&&yo(n),u%o!==0?(p=zs(t,{startingIndex:u,decrement:!0,disabledIndices:a}),i&&g_(p,o,g)&&(p=zs(t,{startingIndex:u+(o-u%o),decrement:!0,disabledIndices:a}))):i&&(p=zs(t,{startingIndex:u+(o-u%o),decrement:!0,disabledIndices:a})),g_(p,o,g)&&(p=u));const x=Gg(c/o)===g;e0(t,p)&&(i&&x?p=n.key===(s?Af:Rf)?c:zs(t,{startingIndex:u-u%o-1,disabledIndices:a}):p=u)}return p}function Ute(t,e,n){const r=[];let i=0;return t.forEach((s,o)=>{let{width:a,height:l}=s,c=!1;for(n&&(i=0);!c;){const u=[];for(let f=0;f<a;f++)for(let p=0;p<l;p++)u.push(i+f+p*e);i%e+a<=e&&u.every(f=>r[f]==null)?(u.forEach(f=>{r[f]=o}),c=!0):i++}}),[...r]}function zte(t,e,n,r,i){if(t===-1)return-1;const s=n.indexOf(t),o=e[t];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(t)}}function Vte(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function HS(t,e,n){if(n)return n.includes(e);const r=t[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}var Br=typeof document<"u"?X.useLayoutEffect:X.useEffect;let CF=!1,Wte=0;const IF=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Wte++;function qte(){const[t,e]=X.useState(()=>CF?IF():void 0);return Br(()=>{t==null&&e(IF())},[]),X.useEffect(()=>{CF=!0},[]),t}const Hte=O5.useId,V2=Hte||qte;function L5(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const D5=X.createContext(null),F5=X.createContext(null),Bb=()=>{var t;return((t=X.useContext(D5))==null?void 0:t.id)||null},Qy=()=>X.useContext(F5);function $te(t){const e=V2(),n=Qy(),i=Bb();return Br(()=>{if(!e)return;const s={id:e,parentId:i};return n?.addNode(s),()=>{n?.removeNode(s)}},[n,e,i]),e}function Gte(t){const{children:e,id:n}=t,r=Bb();return v.jsx(D5.Provider,{value:X.useMemo(()=>({id:n,parentId:r}),[n,r]),children:e})}function Xte(t){const{children:e}=t,n=X.useRef([]),r=X.useCallback(o=>{n.current=[...n.current,o]},[]),i=X.useCallback(o=>{n.current=n.current.filter(a=>a!==o)},[]),s=X.useState(()=>L5())[0];return v.jsx(F5.Provider,{value:X.useMemo(()=>({nodesRef:n,addNode:r,removeNode:i,events:s}),[r,i,s]),children:e})}function Hp(t){return"data-floating-ui-"+t}function wo(t){const e=X.useRef(t);return Br(()=>{e.current=t}),e}const RF=Hp("safe-polygon");function zI(t,e,n){return n&&!V0(n)?0:typeof t=="number"?t:t?.[e]}function Kte(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=t,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:f=0,move:p=!0}=e,g=Qy(),x=Bb(),S=wo(c),_=wo(l),b=wo(n),E=X.useRef(),M=X.useRef(-1),T=X.useRef(),k=X.useRef(-1),N=X.useRef(!0),D=X.useRef(!1),L=X.useRef(()=>{}),R=X.useRef(!1),A=X.useCallback(()=>{var te;const W=(te=i.current.openEvent)==null?void 0:te.type;return W?.includes("mouse")&&W!=="mousedown"},[i]);X.useEffect(()=>{if(!a)return;function te(W){let{open:Z}=W;Z||(clearTimeout(M.current),clearTimeout(k.current),N.current=!0,R.current=!1)}return s.on("openchange",te),()=>{s.off("openchange",te)}},[a,s]),X.useEffect(()=>{if(!a||!S.current||!n)return;function te(Z){A()&&r(!1,Z,"hover")}const W=Es(o.floating).documentElement;return W.addEventListener("mouseleave",te),()=>{W.removeEventListener("mouseleave",te)}},[o.floating,n,r,a,S,A]);const P=X.useCallback(function(te,W,Z){W===void 0&&(W=!0),Z===void 0&&(Z="hover");const J=zI(_.current,"close",E.current);J&&!T.current?(clearTimeout(M.current),M.current=window.setTimeout(()=>r(!1,te,Z),J)):W&&(clearTimeout(M.current),r(!1,te,Z))},[_,r]),j=bo(()=>{L.current(),T.current=void 0}),U=bo(()=>{if(D.current){const te=Es(o.floating).body;te.style.pointerEvents="",te.removeAttribute(RF),D.current=!1}}),B=bo(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);X.useEffect(()=>{if(!a)return;function te(Y){if(clearTimeout(M.current),N.current=!1,u&&!V0(E.current)||f>0&&!zI(_.current,"open"))return;const oe=zI(_.current,"open",E.current);oe?M.current=window.setTimeout(()=>{b.current||r(!0,Y,"hover")},oe):n||r(!0,Y,"hover")}function W(Y){if(B())return;L.current();const oe=Es(o.floating);if(clearTimeout(k.current),R.current=!1,S.current&&i.current.floatingContext){n||clearTimeout(M.current),T.current=S.current({...i.current.floatingContext,tree:g,x:Y.clientX,y:Y.clientY,onClose(){U(),j(),B()||P(Y,!0,"safe-polygon")}});const ie=T.current;oe.addEventListener("mousemove",ie),L.current=()=>{oe.removeEventListener("mousemove",ie)};return}(E.current==="touch"?!Ss(o.floating,Y.relatedTarget):!0)&&P(Y)}function Z(Y){B()||i.current.floatingContext&&(S.current==null||S.current({...i.current.floatingContext,tree:g,x:Y.clientX,y:Y.clientY,onClose(){U(),j(),B()||P(Y)}})(Y))}if(Rr(o.domReference)){var J;const Y=o.domReference;return n&&Y.addEventListener("mouseleave",Z),(J=o.floating)==null||J.addEventListener("mouseleave",Z),p&&Y.addEventListener("mousemove",te,{once:!0}),Y.addEventListener("mouseenter",te),Y.addEventListener("mouseleave",W),()=>{var oe;n&&Y.removeEventListener("mouseleave",Z),(oe=o.floating)==null||oe.removeEventListener("mouseleave",Z),p&&Y.removeEventListener("mousemove",te),Y.removeEventListener("mouseenter",te),Y.removeEventListener("mouseleave",W)}}},[o,a,t,u,f,p,P,j,U,r,n,b,g,_,S,i,B]),Br(()=>{var te;if(a&&n&&(te=S.current)!=null&&te.__options.blockPointerEvents&&A()){D.current=!0;const Z=o.floating;if(Rr(o.domReference)&&Z){var W;const J=Es(o.floating).body;J.setAttribute(RF,"");const Y=o.domReference,oe=g==null||(W=g.nodesRef.current.find(ce=>ce.id===x))==null||(W=W.context)==null?void 0:W.elements.floating;return oe&&(oe.style.pointerEvents=""),J.style.pointerEvents="none",Y.style.pointerEvents="auto",Z.style.pointerEvents="auto",()=>{J.style.pointerEvents="",Y.style.pointerEvents="",Z.style.pointerEvents=""}}}},[a,n,x,o,g,S,A]),Br(()=>{n||(E.current=void 0,R.current=!1,j(),U())},[n,j,U]),X.useEffect(()=>()=>{j(),clearTimeout(M.current),clearTimeout(k.current),U()},[a,o.domReference,j,U]);const $=X.useMemo(()=>{function te(W){E.current=W.pointerType}return{onPointerDown:te,onPointerEnter:te,onMouseMove(W){const{nativeEvent:Z}=W;function J(){!N.current&&!b.current&&r(!0,Z,"hover")}u&&!V0(E.current)||n||f===0||R.current&&W.movementX**2+W.movementY**2<2||(clearTimeout(k.current),E.current==="touch"?J():(R.current=!0,k.current=window.setTimeout(J,f)))}}},[u,r,n,b,f]),q=X.useMemo(()=>({onMouseEnter(){clearTimeout(M.current)},onMouseLeave(te){B()||P(te.nativeEvent,!1)}}),[P,B]);return X.useMemo(()=>a?{reference:$,floating:q}:{},[a,$,q])}let AF=0;function sp(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(AF);const s=()=>t?.focus({preventScroll:n});i?s():AF=requestAnimationFrame(s)}function NF(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s?.parentId,s&&(r=r.concat(s))}return r}function yy(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}function Yte(t,e){let n,r=-1;function i(s,o){o>r&&(n=s,r=o),yy(t,s).forEach(l=>{i(l.id,o+1)})}return i(e,0),t.find(s=>s.id===n)}let ug=new WeakMap,y_=new WeakSet,v_={},VI=0;const Zte=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,B5=t=>t&&(t.host||B5(t.parentNode)),Jte=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=B5(n);return t.contains(r)?r:null}).filter(n=>n!=null);function Qte(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=Jte(e,t),a=new Set,l=new Set(o),c=[];v_[i]||(v_[i]=new WeakMap);const u=v_[i];o.forEach(f),p(e),a.clear();function f(g){!g||a.has(g)||(a.add(g),g.parentNode&&f(g.parentNode))}function p(g){!g||l.has(g)||[].forEach.call(g.children,x=>{if(Gf(x)!=="script")if(a.has(x))p(x);else{const S=s?x.getAttribute(s):null,_=S!==null&&S!=="false",b=ug.get(x)||0,E=s?b+1:b,M=(u.get(x)||0)+1;ug.set(x,E),u.set(x,M),c.push(x),E===1&&_&&y_.add(x),M===1&&x.setAttribute(i,""),!_&&s&&x.setAttribute(s,"true")}})}return VI++,()=>{c.forEach(g=>{const x=ug.get(g)||0,S=s?x-1:x,_=(u.get(g)||0)-1;ug.set(g,S),u.set(g,_),S||(!y_.has(g)&&s&&g.removeAttribute(s),y_.delete(g)),_||g.removeAttribute(i)}),VI--,VI||(ug=new WeakMap,ug=new WeakMap,y_=new WeakSet,v_={})}}function PF(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=Es(t[0]).body;return Qte(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const VM=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function j5(t,e){const n=zM(t,VM());e==="prev"&&n.reverse();const r=n.indexOf(zl(Es(t)));return n.slice(r+1)[0]}function U5(){return j5(document.body,"next")}function z5(){return j5(document.body,"prev")}function t0(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Ss(n,r)}function ene(t){zM(t,VM()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function kF(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const WM={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let tne;function OF(t){t.key==="Tab"&&(t.target,clearTimeout(tne))}const nE=X.forwardRef(function(e,n){const[r,i]=X.useState();Br(()=>(m5()&&i("button"),document.addEventListener("keydown",OF),()=>{document.removeEventListener("keydown",OF)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Hp("focus-guard")]:"",style:WM};return v.jsx("span",{...e,...s})}),V5=X.createContext(null),LF=Hp("portal");function nne(t){t===void 0&&(t={});const{id:e,root:n}=t,r=V2(),i=W5(),[s,o]=X.useState(null),a=X.useRef(null);return Br(()=>()=>{s?.remove(),queueMicrotask(()=>{a.current=null})},[s]),Br(()=>{if(!r||a.current)return;const l=e?document.getElementById(e):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute(LF,""),l.appendChild(c),a.current=c,o(c)},[e,r]),Br(()=>{if(n===null||!r||a.current)return;let l=n||i?.portalNode;l&&!Rr(l)&&(l=l.current),l=l||document.body;let c=null;e&&(c=document.createElement("div"),c.id=e,l.appendChild(c));const u=document.createElement("div");u.id=r,u.setAttribute(LF,""),l=c||l,l.appendChild(u),a.current=u,o(u)},[e,n,r,i]),s}function W2(t){const{children:e,id:n,root:r,preserveTabOrder:i=!0}=t,s=nne({id:n,root:r}),[o,a]=X.useState(null),l=X.useRef(null),c=X.useRef(null),u=X.useRef(null),f=X.useRef(null),p=o?.modal,g=o?.open,x=!!o&&!o.modal&&o.open&&i&&!!(r||s);return X.useEffect(()=>{if(!s||!i||p)return;function S(_){s&&t0(_)&&(_.type==="focusin"?kF:ene)(s)}return s.addEventListener("focusin",S,!0),s.addEventListener("focusout",S,!0),()=>{s.removeEventListener("focusin",S,!0),s.removeEventListener("focusout",S,!0)}},[s,i,p]),X.useEffect(()=>{s&&(g||kF(s))},[g,s]),v.jsxs(V5.Provider,{value:X.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:u,afterInsideRef:f,portalNode:s,setFocusManagerState:a}),[i,s]),children:[x&&s&&v.jsx(nE,{"data-type":"outside",ref:l,onFocus:S=>{if(t0(S,s)){var _;(_=u.current)==null||_.focus()}else{const b=z5()||o?.domReference;b?.focus()}}}),x&&s&&v.jsx("span",{"aria-owns":s.id,style:WM}),s&&bM.createPortal(e,s),x&&s&&v.jsx(nE,{"data-type":"outside",ref:c,onFocus:S=>{if(t0(S,s)){var _;(_=f.current)==null||_.focus()}else{const b=U5()||o?.domReference;b?.focus(),o?.closeOnFocusOut&&o?.onOpenChange(!1,S.nativeEvent,"focus-out")}}})]})}const W5=()=>X.useContext(V5),nP="data-floating-ui-focusable";function rP(t){return t?t.hasAttribute(nP)?t:t.querySelector("["+nP+"]")||t:null}const rne=20;let op=[];function WI(t){op=op.filter(e=>e.isConnected),t&&Gf(t)!=="body"&&(op.push(t),op.length>rne&&(op=op.slice(-20)))}function DF(){return op.slice().reverse().find(t=>t.isConnected)}function ine(t){const e=VM();return ate(t,e)?t:zM(t,e)[0]||t}const sne=X.forwardRef(function(e,n){return v.jsx("button",{...e,type:"button",ref:n,tabIndex:-1,style:WM})});function q5(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:a=!0,restoreFocus:l=!1,modal:c=!0,visuallyHiddenDismiss:u=!1,closeOnFocusOut:f=!0,outsideElementsInert:p=!1}=t,{open:g,onOpenChange:x,events:S,dataRef:_,elements:{domReference:b,floating:E}}=e,M=bo(()=>{var Ce;return(Ce=_.current.floatingContext)==null?void 0:Ce.nodeId}),T=typeof o=="number"&&o<0,k=g5(b)&&T,N=Zte(),D=N?s:!0,L=!D||N&&p,R=wo(i),A=wo(o),P=wo(a),j=Qy(),U=W5(),B=X.useRef(null),$=X.useRef(null),q=X.useRef(!1),te=X.useRef(!1),W=X.useRef(-1),Z=U!=null,J=rP(E),Y=bo(function(Ce){return Ce===void 0&&(Ce=J),Ce?zM(Ce,VM()):[]}),oe=bo(Ce=>{const Ie=Y(Ce);return R.current.map(Fe=>b&&Fe==="reference"?b:J&&Fe==="floating"?J:Ie).filter(Boolean).flat()});X.useEffect(()=>{if(r||!c)return;function Ce(Fe){if(Fe.key==="Tab"){Ss(J,zl(Es(J)))&&Y().length===0&&!k&&yo(Fe);const ve=oe(),_e=xf(Fe);R.current[0]==="reference"&&_e===b&&(yo(Fe),Fe.shiftKey?sp(ve[ve.length-1]):sp(ve[1])),R.current[1]==="floating"&&_e===J&&Fe.shiftKey&&(yo(Fe),sp(ve[0]))}}const Ie=Es(J);return Ie.addEventListener("keydown",Ce),()=>{Ie.removeEventListener("keydown",Ce)}},[r,b,J,c,R,k,Y,oe]),X.useEffect(()=>{if(r||!E)return;function Ce(Ie){const Fe=xf(Ie),_e=Y().indexOf(Fe);_e!==-1&&(W.current=_e)}return E.addEventListener("focusin",Ce),()=>{E.removeEventListener("focusin",Ce)}},[r,E,Y]),X.useEffect(()=>{if(r||!f)return;function Ce(){te.current=!0,setTimeout(()=>{te.current=!1})}function Ie(Fe){const ve=Fe.relatedTarget;queueMicrotask(()=>{const _e=M(),se=!(Ss(b,ve)||Ss(E,ve)||Ss(ve,E)||Ss(U?.portalNode,ve)||ve!=null&&ve.hasAttribute(Hp("focus-guard"))||j&&(yy(j.nodesRef.current,_e).find($e=>{var je,Ze;return Ss((je=$e.context)==null?void 0:je.elements.floating,ve)||Ss((Ze=$e.context)==null?void 0:Ze.elements.domReference,ve)})||NF(j.nodesRef.current,_e).find($e=>{var je,Ze,le;return[(je=$e.context)==null?void 0:je.elements.floating,rP((Ze=$e.context)==null?void 0:Ze.elements.floating)].includes(ve)||((le=$e.context)==null?void 0:le.elements.domReference)===ve})));if(l&&se&&zl(Es(J))===Es(J).body){Bi(J)&&J.focus();const $e=W.current,je=Y(),Ze=je[$e]||je[je.length-1]||J;Bi(Ze)&&Ze.focus()}(k||!c)&&ve&&se&&!te.current&&ve!==DF()&&(q.current=!0,x(!1,Fe,"focus-out"))})}if(E&&Bi(b))return b.addEventListener("focusout",Ie),b.addEventListener("pointerdown",Ce),E.addEventListener("focusout",Ie),()=>{b.removeEventListener("focusout",Ie),b.removeEventListener("pointerdown",Ce),E.removeEventListener("focusout",Ie)}},[r,b,E,J,c,j,U,x,f,l,Y,k,M]);const ce=X.useRef(null),ie=X.useRef(null),ue=MF([ce,U?.beforeInsideRef]),de=MF([ie,U?.afterInsideRef]);X.useEffect(()=>{var Ce;if(r||!E)return;const Ie=Array.from((U==null||(Ce=U.portalNode)==null?void 0:Ce.querySelectorAll("["+Hp("portal")+"]"))||[]),Fe=j&&!c?NF(j?.nodesRef.current,M()).map(se=>{var $e;return($e=se.context)==null?void 0:$e.elements.floating}):[],ve=[E,...Ie,...Fe,B.current,$.current,ce.current,ie.current,U?.beforeOutsideRef.current,U?.afterOutsideRef.current,R.current.includes("reference")||k?b:null].filter(se=>se!=null),_e=c||k?PF(ve,!L,L):PF(ve);return()=>{_e()}},[r,b,E,c,R,U,k,D,L,j,M]),Br(()=>{if(r||!Bi(J))return;const Ce=Es(J),Ie=zl(Ce);queueMicrotask(()=>{const Fe=oe(J),ve=A.current,_e=(typeof ve=="number"?Fe[ve]:ve.current)||J,se=Ss(J,Ie);!T&&!se&&g&&sp(_e,{preventScroll:_e===J})})},[r,g,J,T,oe,A]),Br(()=>{if(r||!J)return;let Ce=!1;const Ie=Es(J),Fe=zl(Ie);let _e=_.current.openEvent;WI(Fe);function se(Ze){let{open:le,reason:ge,event:fe,nested:Q}=Ze;le&&(_e=fe),ge==="escape-key"&&b&&WI(b),["hover","safe-polygon"].includes(ge)&&fe.type==="mouseleave"&&(q.current=!0),ge==="outside-press"&&(Q?(q.current=!1,Ce=!0):q.current=!(p5(fe)||D2(fe)))}S.on("openchange",se);const $e=Ie.createElement("span");$e.setAttribute("tabindex","-1"),$e.setAttribute("aria-hidden","true"),Object.assign($e.style,WM),Z&&b&&b.insertAdjacentElement("afterend",$e);function je(){return typeof P.current=="boolean"?DF()||$e:P.current.current||$e}return()=>{S.off("openchange",se);const Ze=zl(Ie),le=Ss(E,Ze)||j&&yy(j.nodesRef.current,M()).some(Q=>{var G;return Ss((G=Q.context)==null?void 0:G.elements.floating,Ze)});(le||_e&&["click","mousedown"].includes(_e.type))&&b&&WI(b);const fe=je();queueMicrotask(()=>{const Q=ine(fe);P.current&&!q.current&&Bi(Q)&&(!(Q!==Ze&&Ze!==Ie.body)||le)&&Q.focus({preventScroll:Ce}),$e.remove()})}},[r,E,J,P,_,S,j,Z,b,M]),X.useEffect(()=>{queueMicrotask(()=>{q.current=!1})},[r]),Br(()=>{if(!r&&U)return U.setFocusManagerState({modal:c,closeOnFocusOut:f,open:g,onOpenChange:x,domReference:b}),()=>{U.setFocusManagerState(null)}},[r,U,c,g,x,f,b]),Br(()=>{if(r||!J||typeof MutationObserver!="function"||T)return;const Ce=()=>{const Fe=J.getAttribute("tabindex"),ve=Y(),_e=zl(Es(E)),se=ve.indexOf(_e);se!==-1&&(W.current=se),R.current.includes("floating")||_e!==b&&ve.length===0?Fe!=="0"&&J.setAttribute("tabindex","0"):Fe!=="-1"&&J.setAttribute("tabindex","-1")};Ce();const Ie=new MutationObserver(Ce);return Ie.observe(J,{childList:!0,subtree:!0,attributes:!0}),()=>{Ie.disconnect()}},[r,E,J,b,R,Y,T]);function be(Ce){return r||!u||!c?null:v.jsx(sne,{ref:Ce==="start"?B:$,onClick:Ie=>x(!1,Ie.nativeEvent),children:typeof u=="string"?u:"Dismiss"})}const we=!r&&D&&(c?!k:!0)&&(Z||c);return v.jsxs(v.Fragment,{children:[we&&v.jsx(nE,{"data-type":"inside",ref:ue,onFocus:Ce=>{if(c){const Fe=oe();sp(i[0]==="reference"?Fe[0]:Fe[Fe.length-1])}else if(U!=null&&U.preserveTabOrder&&U.portalNode)if(q.current=!1,t0(Ce,U.portalNode)){const Fe=U5()||b;Fe?.focus()}else{var Ie;(Ie=U.beforeOutsideRef.current)==null||Ie.focus()}}}),!k&&be("start"),n,be("end"),we&&v.jsx(nE,{"data-type":"inside",ref:de,onFocus:Ce=>{if(c)sp(oe()[0]);else if(U!=null&&U.preserveTabOrder&&U.portalNode)if(f&&(q.current=!0),t0(Ce,U.portalNode)){const Fe=z5()||b;Fe?.focus()}else{var Ie;(Ie=U.afterOutsideRef.current)==null||Ie.focus()}}})]})}let x_=0;function one(){const t=/iP(hone|ad|od)|iOS/.test(L2()),e=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=e.left?parseFloat(e.left):window.scrollX,o=e.top?parseFloat(e.top):window.scrollY;if(e.overflow="hidden",i&&(e[r]=i+"px"),t){var a,l;const c=((a=window.visualViewport)==null?void 0:a.offsetLeft)||0,u=((l=window.visualViewport)==null?void 0:l.offsetTop)||0;Object.assign(e,{position:"fixed",top:-(o-Math.floor(u))+"px",left:-(s-Math.floor(c))+"px",right:"0"})}return()=>{Object.assign(e,{overflow:"",[r]:""}),t&&(Object.assign(e,{position:"",top:"",left:"",right:""}),window.scrollTo(s,o))}}let FF=()=>{};const ane=X.forwardRef(function(e,n){const{lockScroll:r=!1,...i}=e;return Br(()=>{if(r)return x_++,x_===1&&(FF=one()),()=>{x_--,x_===0&&FF()}},[r]),v.jsx("div",{ref:n,...i,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}})});function BF(t){return Bi(t.target)&&t.target.tagName==="BUTTON"}function jF(t){return F2(t)}function q2(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:u=!0,stickIfOpen:f=!0}=e,p=X.useRef(),g=X.useRef(!1),x=X.useMemo(()=>({onPointerDown(S){p.current=S.pointerType},onMouseDown(S){const _=p.current;S.button===0&&a!=="click"&&(V0(_,!0)&&c||(n&&l&&(!(i.current.openEvent&&f)||i.current.openEvent.type==="mousedown")?r(!1,S.nativeEvent,"click"):(S.preventDefault(),r(!0,S.nativeEvent,"click"))))},onClick(S){const _=p.current;if(a==="mousedown"&&p.current){p.current=void 0;return}V0(_,!0)&&c||(n&&l&&(!(i.current.openEvent&&f)||i.current.openEvent.type==="click")?r(!1,S.nativeEvent,"click"):r(!0,S.nativeEvent,"click"))},onKeyDown(S){p.current=void 0,!(S.defaultPrevented||!u||BF(S))&&(S.key===" "&&!jF(s)&&(S.preventDefault(),g.current=!0),S.key==="Enter"&&r(!(n&&l),S.nativeEvent,"click"))},onKeyUp(S){S.defaultPrevented||!u||BF(S)||jF(s)||S.key===" "&&g.current&&(g.current=!1,r(!(n&&l),S.nativeEvent,"click"))}}),[i,s,a,c,u,r,n,f,l]);return X.useMemo(()=>o?{reference:x}:{},[o,x])}const lne={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},cne={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},UF=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function H2(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=t,{enabled:o=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:f="pointerdown",ancestorScroll:p=!1,bubbles:g,capture:x}=e,S=Qy(),_=bo(typeof l=="function"?l:()=>!1),b=typeof l=="function"?_:l,E=X.useRef(!1),M=X.useRef(!1),{escapeKey:T,outsidePress:k}=UF(g),{escapeKey:N,outsidePress:D}=UF(x),L=X.useRef(!1),R=bo($=>{var q;if(!n||!o||!a||$.key!=="Escape"||L.current)return;const te=(q=s.current.floatingContext)==null?void 0:q.nodeId,W=S?yy(S.nodesRef.current,te):[];if(!T&&($.stopPropagation(),W.length>0)){let Z=!0;if(W.forEach(J=>{var Y;if((Y=J.context)!=null&&Y.open&&!J.context.dataRef.current.__escapeKeyBubbles){Z=!1;return}}),!Z)return}r(!1,Pee($)?$.nativeEvent:$,"escape-key")}),A=bo($=>{var q;const te=()=>{var W;R($),(W=xf($))==null||W.removeEventListener("keydown",te)};(q=xf($))==null||q.addEventListener("keydown",te)}),P=bo($=>{var q;const te=E.current;E.current=!1;const W=M.current;if(M.current=!1,c==="click"&&W||te||typeof b=="function"&&!b($))return;const Z=xf($),J="["+Hp("inert")+"]",Y=Es(i.floating).querySelectorAll(J);let oe=Rr(Z)?Z:null;for(;oe&&!Yu(oe);){const de=ad(oe);if(Yu(de)||!Rr(de))break;oe=de}if(Y.length&&Rr(Z)&&!kee(Z)&&!Ss(Z,i.floating)&&Array.from(Y).every(de=>!Ss(oe,de)))return;if(Bi(Z)&&B){const de=Yu(Z),be=sl(Z),we=/auto|scroll/,Ce=de||we.test(be.overflowX),Ie=de||we.test(be.overflowY),Fe=Ce&&Z.clientWidth>0&&Z.scrollWidth>Z.clientWidth,ve=Ie&&Z.clientHeight>0&&Z.scrollHeight>Z.clientHeight,_e=be.direction==="rtl",se=ve&&(_e?$.offsetX<=Z.offsetWidth-Z.clientWidth:$.offsetX>Z.clientWidth),$e=Fe&&$.offsetY>Z.clientHeight;if(se||$e)return}const ce=(q=s.current.floatingContext)==null?void 0:q.nodeId,ie=S&&yy(S.nodesRef.current,ce).some(de=>{var be;return FI($,(be=de.context)==null?void 0:be.elements.floating)});if(FI($,i.floating)||FI($,i.domReference)||ie)return;const ue=S?yy(S.nodesRef.current,ce):[];if(ue.length>0){let de=!0;if(ue.forEach(be=>{var we;if((we=be.context)!=null&&we.open&&!be.context.dataRef.current.__outsidePressBubbles){de=!1;return}}),!de)return}r(!1,$,"outside-press")}),j=bo($=>{var q;const te=()=>{var W;P($),(W=xf($))==null||W.removeEventListener(c,te)};(q=xf($))==null||q.addEventListener(c,te)});X.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=T,s.current.__outsidePressBubbles=k;let $=-1;function q(Y){r(!1,Y,"ancestor-scroll")}function te(){window.clearTimeout($),L.current=!0}function W(){$=window.setTimeout(()=>{L.current=!1},jM()?5:0)}const Z=Es(i.floating);a&&(Z.addEventListener("keydown",N?A:R,N),Z.addEventListener("compositionstart",te),Z.addEventListener("compositionend",W)),b&&Z.addEventListener(c,D?j:P,D);let J=[];return p&&(Rr(i.domReference)&&(J=If(i.domReference)),Rr(i.floating)&&(J=J.concat(If(i.floating))),!Rr(i.reference)&&i.reference&&i.reference.contextElement&&(J=J.concat(If(i.reference.contextElement)))),J=J.filter(Y=>{var oe;return Y!==((oe=Z.defaultView)==null?void 0:oe.visualViewport)}),J.forEach(Y=>{Y.addEventListener("scroll",q,{passive:!0})}),()=>{a&&(Z.removeEventListener("keydown",N?A:R,N),Z.removeEventListener("compositionstart",te),Z.removeEventListener("compositionend",W)),b&&Z.removeEventListener(c,D?j:P,D),J.forEach(Y=>{Y.removeEventListener("scroll",q)}),window.clearTimeout($)}},[s,i,a,b,c,n,r,p,o,T,k,R,N,A,P,D,j]),X.useEffect(()=>{E.current=!1},[b,c]);const U=X.useMemo(()=>({onKeyDown:R,...u&&{[lne[f]]:$=>{r(!1,$.nativeEvent,"reference-press")},...f!=="click"&&{onClick($){r(!1,$.nativeEvent,"reference-press")}}}}),[R,r,u,f]),B=X.useMemo(()=>({onKeyDown:R,onMouseDown(){M.current=!0},onMouseUp(){M.current=!0},[cne[c]]:()=>{E.current=!0}}),[R,c]);return X.useMemo(()=>o?{reference:U,floating:B}:{},[o,U,B])}function une(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=V2(),s=X.useRef({}),[o]=X.useState(()=>L5()),a=Bb()!=null,[l,c]=X.useState(r.reference),u=bo((g,x,S)=>{s.current.openEvent=g?x:void 0,o.emit("openchange",{open:g,event:x,reason:S,nested:a}),n?.(g,x,S)}),f=X.useMemo(()=>({setPositionReference:c}),[]),p=X.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return X.useMemo(()=>({dataRef:s,open:e,onOpenChange:u,elements:p,events:o,floatingId:i,refs:f}),[e,u,p,o,i,f])}function $2(t){t===void 0&&(t={});const{nodeId:e}=t,n=une({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=X.useState(null),[a,l]=X.useState(null),u=i?.domReference||s,f=X.useRef(null),p=Qy();Br(()=>{u&&(f.current=u)},[u]);const g=Ote({...t,elements:{...i,...a&&{reference:a}}}),x=X.useCallback(M=>{const T=Rr(M)?{getBoundingClientRect:()=>M.getBoundingClientRect(),contextElement:M}:M;l(T),g.refs.setReference(T)},[g.refs]),S=X.useCallback(M=>{(Rr(M)||M===null)&&(f.current=M,o(M)),(Rr(g.refs.reference.current)||g.refs.reference.current===null||M!==null&&!Rr(M))&&g.refs.setReference(M)},[g.refs]),_=X.useMemo(()=>({...g.refs,setReference:S,setPositionReference:x,domReference:f}),[g.refs,S,x]),b=X.useMemo(()=>({...g.elements,domReference:u}),[g.elements,u]),E=X.useMemo(()=>({...g,...r,refs:_,elements:b,nodeId:e}),[g,_,b,e,r]);return Br(()=>{r.dataRef.current.floatingContext=E;const M=p?.nodesRef.current.find(T=>T.id===e);M&&(M.context=E)}),X.useMemo(()=>({...g,context:E,refs:_,elements:b}),[g,_,b,E])}function dne(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=t,{enabled:a=!0,visibleOnly:l=!0}=e,c=X.useRef(!1),u=X.useRef(),f=X.useRef(!0);X.useEffect(()=>{if(!a)return;const g=ta(o.domReference);function x(){!n&&Bi(o.domReference)&&o.domReference===zl(Es(o.domReference))&&(c.current=!0)}function S(){f.current=!0}return g.addEventListener("blur",x),g.addEventListener("keydown",S,!0),()=>{g.removeEventListener("blur",x),g.removeEventListener("keydown",S,!0)}},[o.domReference,n,a]),X.useEffect(()=>{if(!a)return;function g(x){let{reason:S}=x;(S==="reference-press"||S==="escape-key")&&(c.current=!0)}return i.on("openchange",g),()=>{i.off("openchange",g)}},[i,a]),X.useEffect(()=>()=>{clearTimeout(u.current)},[]);const p=X.useMemo(()=>({onPointerDown(g){D2(g.nativeEvent)||(f.current=!1)},onMouseLeave(){c.current=!1},onFocus(g){if(c.current)return;const x=xf(g.nativeEvent);if(l&&Rr(x))try{if(m5()&&Aee())throw Error();if(!x.matches(":focus-visible"))return}catch{if(!f.current&&!F2(x))return}r(!0,g.nativeEvent,"focus")},onBlur(g){c.current=!1;const x=g.relatedTarget,S=g.nativeEvent,_=Rr(x)&&x.hasAttribute(Hp("focus-guard"))&&x.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var b;const E=zl(o.domReference?o.domReference.ownerDocument:document);!x&&E===o.domReference||Ss((b=s.current.floatingContext)==null?void 0:b.refs.floating.current,E)||Ss(o.domReference,E)||_||r(!1,S,"focus")})}}),[s,o.domReference,r,l]);return X.useMemo(()=>a?{reference:p}:{},[a,p])}const zF="active",VF="selected";function qI(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[zF]:o,[VF]:a,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[nP]:""},...s,...e.map(o=>{const a=o?o[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[c,u]=l;if(!(i&&[zF,VF].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var f;(f=r.get(c))==null||f.push(u),o[c]=function(){for(var p,g=arguments.length,x=new Array(g),S=0;S<g;S++)x[S]=arguments[S];return(p=r.get(c))==null?void 0:p.map(_=>_(...x)).find(_=>_!==void 0)}}}else o[c]=u}),o),{})}}function G2(t){t===void 0&&(t=[]);const e=t.map(a=>a?.reference),n=t.map(a=>a?.floating),r=t.map(a=>a?.item),i=X.useCallback(a=>qI(a,t,"reference"),e),s=X.useCallback(a=>qI(a,t,"floating"),n),o=X.useCallback(a=>qI(a,t,"item"),r);return X.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const fne="Escape";function qM(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function HI(t,e){return qM(e,t===z2||t===Fb,t===Rf||t===Af)}function $I(t,e,n){return qM(e,t===Fb,n?t===Rf:t===Af)||t==="Enter"||t===" "||t===""}function WF(t,e,n){return qM(e,n?t===Rf:t===Af,t===Fb)}function qF(t,e,n,r){const i=n?t===Af:t===Rf,s=t===z2;return e==="both"||e==="horizontal"&&r&&r>1?t===fne:qM(e,i,s)}function hne(t,e){const{open:n,onOpenChange:r,elements:i}=t,{listRef:s,activeIndex:o,onNavigate:a=()=>{},enabled:l=!0,selectedIndex:c=null,allowEscape:u=!1,loop:f=!1,nested:p=!1,rtl:g=!1,virtual:x=!1,focusItemOnOpen:S="auto",focusItemOnHover:_=!0,openOnArrowKeyDown:b=!0,disabledIndices:E=void 0,orientation:M="vertical",cols:T=1,scrollItemIntoView:k=!0,virtualItemRef:N,itemSizes:D,dense:L=!1}=e,R=rP(i.floating),A=wo(R),P=Bb(),j=Qy();Br(()=>{t.dataRef.current.orientation=M},[t,M]);const U=bo(()=>{a(q.current===-1?null:q.current)}),B=g5(i.domReference),$=X.useRef(S),q=X.useRef(c??-1),te=X.useRef(null),W=X.useRef(!0),Z=X.useRef(U),J=X.useRef(!!i.floating),Y=X.useRef(n),oe=X.useRef(!1),ce=X.useRef(!1),ie=wo(E),ue=wo(n),de=wo(k),be=wo(c),[we,Ce]=X.useState(),[Ie,Fe]=X.useState(),ve=bo(()=>{function ge(G){x?(Ce(G.id),j?.events.emit("virtualfocus",G),N&&(N.current=G)):sp(G,{sync:oe.current,preventScroll:!0})}const fe=s.current[q.current];fe&&ge(fe),(oe.current?G=>G():requestAnimationFrame)(()=>{const G=s.current[q.current]||fe;if(!G)return;fe||ge(G);const me=de.current;me&&se&&(ce.current||!W.current)&&(G.scrollIntoView==null||G.scrollIntoView(typeof me=="boolean"?{block:"nearest",inline:"nearest"}:me))})});Br(()=>{l&&(n&&i.floating?$.current&&c!=null&&(ce.current=!0,q.current=c,U()):J.current&&(q.current=-1,Z.current()))},[l,n,i.floating,c,U]),Br(()=>{if(l&&n&&i.floating)if(o==null){if(oe.current=!1,be.current!=null)return;if(J.current&&(q.current=-1,ve()),(!Y.current||!J.current)&&$.current&&(te.current!=null||$.current===!0&&te.current==null)){let ge=0;const fe=()=>{s.current[0]==null?(ge<2&&(ge?requestAnimationFrame:queueMicrotask)(fe),ge++):(q.current=te.current==null||$I(te.current,M,g)||p?UI(s,ie.current):TF(s,ie.current),te.current=null,U())};fe()}}else e0(s,o)||(q.current=o,ve(),ce.current=!1)},[l,n,i.floating,o,be,p,s,M,g,U,ve,ie]),Br(()=>{var ge;if(!l||i.floating||!j||x||!J.current)return;const fe=j.nodesRef.current,Q=(ge=fe.find(he=>he.id===P))==null||(ge=ge.context)==null?void 0:ge.elements.floating,G=zl(Es(i.floating)),me=fe.some(he=>he.context&&Ss(he.context.elements.floating,G));Q&&!me&&W.current&&Q.focus({preventScroll:!0})},[l,i.floating,j,P,x]),Br(()=>{if(!l||!j||!x||P)return;function ge(fe){Fe(fe.id),N&&(N.current=fe)}return j.events.on("virtualfocus",ge),()=>{j.events.off("virtualfocus",ge)}},[l,j,x,P,N]),Br(()=>{Z.current=U,Y.current=n,J.current=!!i.floating}),Br(()=>{n||(te.current=null)},[n]);const _e=o!=null,se=X.useMemo(()=>{function ge(Q){if(!n)return;const G=s.current.indexOf(Q);G!==-1&&q.current!==G&&(q.current=G,U())}return{onFocus(Q){let{currentTarget:G}=Q;oe.current=!0,ge(G)},onClick:Q=>{let{currentTarget:G}=Q;return G.focus({preventScroll:!0})},..._&&{onMouseMove(Q){let{currentTarget:G}=Q;oe.current=!0,ce.current=!1,ge(G)},onPointerLeave(Q){let{pointerType:G}=Q;if(!(!W.current||G==="touch")&&(oe.current=!0,q.current=-1,U(),!x)){var me;(me=A.current)==null||me.focus({preventScroll:!0})}}}}},[n,A,_,s,U,x]),$e=bo(ge=>{if(W.current=!1,oe.current=!0,ge.which===229||!ue.current&&ge.currentTarget===A.current)return;if(p&&qF(ge.key,M,g,T)){yo(ge),r(!1,ge.nativeEvent,"list-navigation"),Bi(i.domReference)&&(x?j?.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const fe=q.current,Q=UI(s,E),G=TF(s,E);if(B||(ge.key==="Home"&&(yo(ge),q.current=Q,U()),ge.key==="End"&&(yo(ge),q.current=G,U())),T>1){const me=D||Array.from({length:s.current.length},()=>({width:1,height:1})),he=Ute(me,T,L),Te=he.findIndex(Ye=>Ye!=null&&!HS(s.current,Ye,E)),Oe=he.reduce((Ye,at,Ft)=>at!=null&&!HS(s.current,at,E)?Ft:Ye,-1),Qe=he[jte({current:he.map(Ye=>Ye!=null?s.current[Ye]:null)},{event:ge,orientation:M,loop:f,rtl:g,cols:T,disabledIndices:Vte([...E||s.current.map((Ye,at)=>HS(s.current,at)?at:void 0),void 0],he),minIndex:Te,maxIndex:Oe,prevIndex:zte(q.current>G?Q:q.current,me,he,T,ge.key===Fb?"bl":ge.key===(g?Rf:Af)?"tr":"tl"),stopEvent:!0})];if(Qe!=null&&(q.current=Qe,U()),M==="both")return}if(HI(ge.key,M)){if(yo(ge),n&&!x&&zl(ge.currentTarget.ownerDocument)===ge.currentTarget){q.current=$I(ge.key,M,g)?Q:G,U();return}$I(ge.key,M,g)?f?q.current=fe>=G?u&&fe!==s.current.length?-1:Q:zs(s,{startingIndex:fe,disabledIndices:E}):q.current=Math.min(G,zs(s,{startingIndex:fe,disabledIndices:E})):f?q.current=fe<=Q?u&&fe!==-1?s.current.length:G:zs(s,{startingIndex:fe,decrement:!0,disabledIndices:E}):q.current=Math.max(Q,zs(s,{startingIndex:fe,decrement:!0,disabledIndices:E})),e0(s,q.current)&&(q.current=-1),U()}}),je=X.useMemo(()=>x&&n&&_e&&{"aria-activedescendant":Ie||we},[x,n,_e,Ie,we]),Ze=X.useMemo(()=>({"aria-orientation":M==="both"?void 0:M,...B?{}:je,onKeyDown:$e,onPointerMove(){W.current=!0}}),[je,$e,M,B]),le=X.useMemo(()=>{function ge(Q){S==="auto"&&p5(Q.nativeEvent)&&($.current=!0)}function fe(Q){$.current=S,S==="auto"&&D2(Q.nativeEvent)&&($.current=!0)}return{...je,onKeyDown(Q){var G;W.current=!1;const me=Q.key.startsWith("Arrow"),he=["Home","End"].includes(Q.key),Te=me||he,Oe=j==null||(G=j.nodesRef.current.find(dt=>dt.id===P))==null||(G=G.context)==null||(G=G.dataRef)==null?void 0:G.current.orientation,Qe=WF(Q.key,M,g),Ye=qF(Q.key,M,g,T),at=WF(Q.key,Oe,g),Ft=HI(Q.key,M),et=(p?at:Ft)||Q.key==="Enter"||Q.key.trim()==="";if(x&&n){const dt=j?.nodesRef.current.find(He=>He.parentId==null),Ee=j&&dt?Yte(j.nodesRef.current,dt.id):null;if(Te&&Ee&&N){const He=new KeyboardEvent("keydown",{key:Q.key,bubbles:!0});if(Qe||Ye){var gt,kt;const ft=((gt=Ee.context)==null?void 0:gt.elements.domReference)===Q.currentTarget,Se=Ye&&!ft?(kt=Ee.context)==null?void 0:kt.elements.domReference:Qe?s.current.find(nt=>nt?.id===we):null;Se&&(yo(Q),Se.dispatchEvent(He),Fe(void 0))}if((Ft||he)&&Ee.context&&Ee.context.open&&Ee.parentId&&Q.currentTarget!==Ee.context.elements.domReference){var Bt;yo(Q),(Bt=Ee.context.elements.domReference)==null||Bt.dispatchEvent(He);return}}return $e(Q)}if(!(!n&&!b&&me)){if(et){const dt=HI(Q.key,Oe);te.current=p&&dt?null:Q.key}if(p){at&&(yo(Q),n?(q.current=UI(s,ie.current),U()):r(!0,Q.nativeEvent,"list-navigation"));return}Ft&&(c!=null&&(q.current=c),yo(Q),!n&&b?r(!0,Q.nativeEvent,"list-navigation"):$e(Q),n&&U())}},onFocus(){n&&!x&&(q.current=-1,U())},onPointerDown:fe,onPointerEnter:fe,onMouseDown:ge,onClick:ge}},[we,je,T,$e,ie,S,s,p,U,r,n,b,M,P,g,c,j,x,N]);return X.useMemo(()=>l?{reference:le,floating:Ze,item:se}:{},[l,le,Ze,se])}const HF=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function dg(t,e){return typeof t=="function"?t(e):t}function pne(t,e){const[n,r]=X.useState(t);return t&&!n&&r(!0),X.useEffect(()=>{if(!t&&n){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,n,e]),n}function mne(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[a,l]=X.useState("unmounted"),c=pne(n,o);return!c&&a==="close"&&l("unmounted"),Br(()=>{if(r){if(n){l("initial");const u=requestAnimationFrame(()=>{l("open")});return()=>{cancelAnimationFrame(u)}}l("close")}},[n,r]),{isMounted:c,status:a}}function X2(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:s,duration:o=250}=e,a=t.placement,l=a.split("-")[0],c=X.useMemo(()=>({side:l,placement:a}),[l,a]),u=typeof o=="number",f=(u?o:o.open)||0,p=(u?o:o.close)||0,[g,x]=X.useState(()=>({...dg(s,c),...dg(n,c)})),{isMounted:S,status:_}=mne(t,{duration:o}),b=wo(n),E=wo(r),M=wo(i),T=wo(s);return Br(()=>{const k=dg(b.current,c),N=dg(M.current,c),D=dg(T.current,c),L=dg(E.current,c)||Object.keys(k).reduce((R,A)=>(R[A]="",R),{});if(_==="initial"&&x(R=>({transitionProperty:R.transitionProperty,...D,...k})),_==="open"&&x({transitionProperty:Object.keys(L).map(HF).join(","),transitionDuration:f+"ms",...D,...L}),_==="close"){const R=N||k;x({transitionProperty:Object.keys(R).map(HF).join(","),transitionDuration:p+"ms",...D,...R})}},[p,M,b,E,T,f,_,c]),{isMounted:S,styles:g}}const gne=X.createContext({close(){}}),yne=Sn({slot:{target:["flex","justify-center","items-center"],portal:[]},variant:{mounted:{true:[]}},match:[{if:{mounted:!1},then:{portal:["hidden"]}}],defaults:{mounted:!1}}),vne=({target:t,action:e="hover",disabled:n=!1,closeOnClick:r=!1,delay:i=100,float:s,variant:o,tva:a=yne,css:l,children:c})=>{const[u,f]=X.useState(!1),{refs:p,floatingStyles:g,context:x}=$2({open:u,onOpenChange:f,placement:"top",whileElementsMounted:A5,middleware:[P5(10),k5({fallbackAxisSideDirection:"start"}),Lte()],...s}),{getReferenceProps:S,getFloatingProps:_}=G2([Kte(x,{enabled:e==="hover",delay:i}),q2(x,{enabled:e==="click"}),dne(x),H2(x)]),{isMounted:b,styles:E}=X2(x),M=a({mounted:b,...o,css:l}).slots;return v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"button",ref:p.setReference,...S(),disabled:n,className:M.target(),children:t}),v.jsx(W2,{children:v.jsx("div",{ref:p.setFloating,style:{...g,...E},className:M.portal(),..._(),onClick:r?()=>{f(!1)}:void 0,children:v.jsx(gne.Provider,{value:{close(){f(!1)}},children:c})})})]})},H5="icon-[system-uicons--menu-hamburger]",$5=Sn({slot:{base:[]},variant:{size:{xs:"text-sm",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl"},disabled:{true:[]}},match:[{if:{disabled:!0},then:{base:["pointer-events-none","cursor-not-allowed","text-gray-400","opacity-50"]}}],defaults:{size:"xl",disabled:!1}}),pn=X.memo(({icon:t,variant:e,tva:n=$5,css:r,...i})=>{const s=n({...e,css:r}).slots;return t?v.jsx("div",{className:s.base({css:[t]}),...i}):null}),xne=Sn({slot:{base:["p-1","bg-slate-50","border","border-slate-300","rounded-sm","shadow-md","text-slate-500","flex","flex-col","gap-2"]},variant:{},defaults:{}}),Nr=({icon:t=H5,iconProps:e,children:n,variant:r,tva:i=xne,css:s,...o})=>{const a=i({...r,css:s}).slots;return v.jsx(Xte,{children:v.jsx(vne,{action:"click",target:v.jsx(pn,{icon:t,css:{base:["cursor-pointer"]},...e}),delay:100,float:{placement:"bottom-start"},closeOnClick:!0,...o,children:v.jsx("div",{className:a.base(),children:n})})})},G5="icon-[svg-spinners--90-ring-with-bg]",bne=Sn({slot:{base:["flex","items-center","justify-center","gap-2","group","w-fit","h-fit","rounded-sm","cursor-pointer","hover:shadow-md","hover:shadow-slate-200","transition-all","hover:bg-slate-200","text-slate-600","text-2xl","p-1"]},variant:{disabled:{true:["cursor-not-allowed","pointer-events-none"]},loading:{true:["cursor-not-allowed","pointer-events-none"]}},match:[{if:{disabled:!0},then:{base:["opacity-50","hover:bg-blue-400"]}}],defaults:{disabled:!1,loading:!1}}),jb=({iconEnabled:t,iconDisabled:e,iconLoading:n=G5,disabled:r=!1,loading:i=!1,onClick:s,variant:o,tva:a=bne,css:l,children:c,...u})=>{const f=a({disabled:r,loading:i,...o,css:l}).slots;return v.jsxs("div",{className:f.base(),onClick:r?void 0:s,...u,children:[r?v.jsx(pn,{icon:i?n:e??t}):v.jsx(pn,{icon:i?n:t}),c]})},K2="icon-[iconamoon--close-light]",HM=X.createContext(void 0),wne=Sn({slot:{base:["bg-slate-400/75","backdrop-blur-xs","flex","justify-center","py-12"],target:[],modal:["bg-white","rounded-lg","shadow-lg","p-4","w-fit","h-fit","max-h-full","overflow-y-auto","relative","w-2/3"]},variant:{disabled:{true:["pointer-events-none"]},loading:{true:[]}},match:[{if:{loading:!0},then:{base:["pointer-events-none","opacity-50"]}}],defaults:{disabled:!1,loading:!1}}),rm=({target:t,icon:e,textTitle:n,disabled:r=!1,defaultOpen:i=!1,outside:s=!1,variant:o,css:a,tva:l=wne,children:c})=>{const[u,f]=X.useState(i),p=$te(),{refs:g,context:x}=$2({nodeId:p,open:u,onOpenChange:f}),S=q2(x),_=H2(x,{outsidePress:s}),{getReferenceProps:b,getFloatingProps:E}=G2([S,_]),{isMounted:M,styles:T}=X2(x),k=l({disabled:r,...o,css:a}).slots;return v.jsxs(HM.Provider,{value:{close(){f(!1)}},children:[v.jsx("div",{ref:g.setReference,...b({disabled:r}),className:k.target(),children:t}),v.jsx(Gte,{id:p,children:M&&v.jsx(v.Fragment,{children:v.jsx(W2,{children:v.jsx(ane,{lockScroll:!0,style:T,className:k.base(),children:v.jsx(q5,{context:x,children:v.jsxs("div",{ref:g.setFloating,...E(),className:k.modal(),children:[v.jsxs("div",{className:"border-b border-slate-200 mb-2 py-1.5 flex flex-row items-center justify-between select-none",children:[v.jsxs("div",{className:"flex flex-row items-center gap-2 pr-4",children:[e&&(Mb(e)?v.jsx(pn,{icon:e,variant:{size:"xl"}}):e),n&&v.jsx("div",{className:"text-lg font-semibold text-slate-700",children:n})]}),v.jsx(jb,{iconEnabled:K2,onClick:()=>f(!1)})]}),_ee(c)?v.jsx(c,{close:()=>f(!1)}):c]})})})})})})]})},_ne=Sn({use:u5,slot:{},variant:{},defaults:{}}),Un=({icon:t,iconProps:e,label:n,disabled:r=!1,hidden:i=!1,variant:s,tva:o=_ne,css:a,...l})=>{const c=o({...s,disabled:r,css:a}).slots;return i?null:v.jsxs("div",{className:c.base(),children:[Mb(t)?v.jsx(pn,{icon:t,...e}):t,v.jsx(rm,{icon:t,target:n,disabled:r,css:{modal:["w-1/2"]},...l})]})},Sne=Sn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-2xl","bg-blue-50","border","border-blue-200","text-xs","px-4","py-0.5","font-bold"]},variant:{},defaults:{}}),$s=({variant:t,tva:e=Sne,css:n,...r})=>{const i=e({...t,css:n}).slots;return v.jsx("div",{className:i.base(),...r})},Ene="icon-[material-symbols-light--check-small]",Mne="icon-[material-symbols-light--close-small]",Tne="icon-[material-symbols-light--check-indeterminate-small]",Cne=Sn({use:$5,slot:{},variant:{value:{true:"text-green-600",false:"text-amber-600"}},defaults:{value:!1}}),$M=({value:t,checkIcon:e=Ene,unCheckIcon:n=Mne,undefinedIcon:r=Tne,tva:i=Cne,...s})=>t==null?v.jsx(pn,{icon:r,tva:i,...s}):v.jsx(pn,{icon:t?e:n,tva:o=>i({...o,value:t}),...s}),Ine=Sn({slot:{base:["flex","items-center","justify-between","text-sm","font-medium","text-slate-900","w-full"],switch:["relative","w-11","h-6","bg-gray-200","peer-focus:outline-hidden","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","peer-checked:rtl:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"]},variant:{},defaults:{}}),X5=({value:t,onChange:e,variant:n,tva:r=Ine,css:i,...s})=>{const o=r({...n,css:i}).slots;return v.jsx("div",{className:o.base(),children:v.jsxs("label",{children:[v.jsx("input",{type:"checkbox",checked:!!t,className:"sr-only peer",onChange:a=>{e(a.target.checked)},...s}),v.jsx("div",{className:o.switch()})]})})},Rne=Sn({slot:{base:["flex","flex-row","items-center","justify-center","gap-2","group","rounded-sm","transition-all","cursor-pointer"]},variant:{variant:{primary:["text-white"],secondary:["text-slate-700"],subtle:["text-slate-600"],danger:["text-slate-50"]},disabled:{true:"cursor-not-allowed"},size:{xs:[],sm:[],md:[]}},match:[{if:{variant:"primary"},then:{base:["bg-blue-400","hover:bg-blue-500"]}},{if:{variant:"primary",disabled:!0},then:{base:["opacity-50","bg-blue-600","hover:bg-blue-600","cursor-not-allowed"]}},{if:{variant:"secondary"},then:{base:["bg-amber-400","hover:bg-amber-500"]}},{if:{variant:"secondary",disabled:!0},then:{base:["opacity-50","bg-amber-600","hover:bg-amber-600","cursor-not-allowed"]}},{if:{variant:"subtle"},then:{base:["border","bg-slate-50","border-slate-300","hover:border-slate-400","text-slate-600","hover:text-slate-800","hover:bg-slate-100"]}},{if:{variant:"subtle",disabled:!0},then:{base:["opacity-50","bg-blue-50","hover:bg-blue-50","cursor-not-allowed"]}},{if:{variant:"danger"},then:{base:["bg-red-400","hover:bg-red-500","hover:text-white"]}},{if:{size:"xs"},then:{base:["py-0.5","px-1"]}},{if:{size:"sm"},then:{base:["py-1","px-2"]}},{if:{size:"md"},then:{base:["py-2","px-4"]}}],defaults:{variant:"primary",disabled:!1,size:"md"}}),Pn=X.memo(({iconEnabled:t,iconDisabled:e,iconLoading:n=G5,iconProps:r,loading:i,variant:s,tva:o=Rne,css:a,children:l,...c})=>{const u=o({disabled:c.disabled,...s,css:a}).slots,f=X.useMemo(()=>({size:"xl"}),[]);return v.jsxs("button",{type:"button",className:u.base({disabled:c.disabled}),...c,children:[c.disabled?v.jsx(pn,{icon:i===!0?n:e,variant:f,...r}):v.jsx(pn,{icon:i===!0?n:t,variant:f,...r}),l]})}),Y2=X.createContext({inline:!1}),Ane=Sn({slot:{base:["border","border-slate-100","px-2","py-1","rounded-md"],label:["text-sm","font-semibold","text-slate-600","border-b","mb-2"],value:[]},variant:{inline:{true:[]},withBackground:{true:[]}},match:[{if:{inline:!0},then:{base:["border-none","flex","flex-row","items-center","gap-2"],label:["mb-0","font-light","text-md","text-slate-600","border-none"],value:["text-md","text-slate-800"]}},{if:{withBackground:!0},then:{base:["bg-slate-50","hover:bg-slate-100"]}}],defaults:{inline:!1,withBackground:!0}}),Nne=({inline:t,label:e,value:n,variant:r,tva:i=Ane,css:s})=>{const o=X.useContext(Y2),a=t??o?.inline,l=i({inline:a,...r,css:s}).slots;return v.jsxs("div",{className:l.base(),children:[e?v.jsx("div",{className:l.label(),children:e}):null,v.jsx("div",{className:l.value(),children:n})]})},Pne=Sn({slot:{base:["flex","flex-col","gap-4","border","border-slate-100","p-4","rounded-lg"]},variant:{inline:{true:["flex-row","border-none","gap-1","p-0","flex-1"]}},defaults:{inline:!1}}),K5=({items:t,hidden:e=[],valueOfProps:n,entity:r,variant:i,tva:s=Pne,css:o,inline:a=!1})=>{const l=s({inline:a,...i,css:o}).slots;return v.jsx(Y2.Provider,{value:{inline:a},children:v.jsx("div",{className:l.base(),children:t.filter(({id:c})=>!e.includes(c)).map(({id:c,render:u,...f})=>v.jsx(Nne,{value:v.jsx(u,{entity:r}),...n,...f},c))})})},kne=Sn({slot:{base:["flex","flex-col","gap-2"]},variant:{},defaults:{}}),$F="icon-[tabler--dots]",One=Sn({slot:{base:["flex","items-center","justify-between","gap-2"],sums:["flex","items-center","gap-2","text-sm"]},variant:{},defaults:{}}),Lne=Sn({slot:{base:["select-none"],list:["flex","items-center","-space-x-px","text-xs","gap-2"],page:["flex","items-center","justify-center","w-12","px-2","py-1","rounded-sm","border","border-slate-200","hover:bg-slate-200","cursor-pointer","transition-all","duration-200"]},variant:{current:{true:[]}},match:[{if:{current:!0},then:{page:["bg-slate-100","hover:bg-slate-200","text-slate-800","font-bold"]}}],defaults:{current:!1}}),GI=({pages:t,page:e,onPage:n,variant:r,tva:i=Lne,css:s})=>{const o=i({...r,css:s}).slots;return v.jsx("nav",{className:o.base(),children:v.jsx("ul",{className:o.list(),children:t.map((a,l)=>v.jsx("li",{className:o.page({current:e===a-1}),onClick:()=>n(a-1),children:a},`page-${a}-${l}`))})})},Dne=Sn({slot:{base:["cursor-pointer","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","p-2.5","hover:shadow-md","transition-all","group"],input:["flex","flex-row","items-center","justify-between","gap-2"],popup:["z-50","cursor-pointer","overflow-y-auto","rounded-sm","border","border-slate-300","bg-white","shadow-lg","focus:outline-hidden"],item:["focus:outline-hidden","py-2","px-2.5","flex","items-center","justify-between"]},variant:{disabled:{true:["cursor-not-allowed","hover:shadow-none","focus:border-slate-300","opacity-50"]},active:{true:[]},selected:{true:[]}},match:[{if:{selected:!0},then:{item:["bg-slate-100"]}},{if:{active:!0},then:{item:["bg-slate-200"]}}],defaults:{disabled:!1,selected:!1,active:!1}}),Y5=({items:t,icon:e,defaultValue:n,render:r,textSelect:i,disabled:s=!1,onItem:o,onSelect:a,onChange:l,value:c,variant:u,tva:f=Dne,css:p})=>{const[g,x]=X.useState(!1),[S,_]=X.useState(null),[b,E]=X.useState(t.findIndex(Z=>Z.id===n));X.useEffect(()=>{E(t.findIndex(Z=>Z.id===c))},[c]);const{refs:M,floatingStyles:T,context:k}=$2({placement:"bottom-start",open:g,onOpenChange:x,whileElementsMounted:A5,middleware:[P5(5),k5({padding:10}),Dte({apply({rects:Z,elements:J,availableHeight:Y}){Object.assign(J.floating.style,{maxHeight:`${Y}px`,minWidth:`${Z.reference.width}px`})},padding:10})]}),N=X.useRef([]),D=X.useRef(!1),L=q2(k,{event:"mousedown"}),R=H2(k),A=hne(k,{listRef:N,activeIndex:S,selectedIndex:b,onNavigate:_,loop:!0}),{getReferenceProps:P,getFloatingProps:j,getItemProps:U}=G2([R,A,L]),{isMounted:B,styles:$}=X2(k),q=Z=>{E(Z),x(!1);const J=t[Z];J&&o?.(J),a?.(J),l?.(J?.id)},te=b===null?void 0:t[b],W=f({disabled:s,...u,css:p}).slots;return v.jsxs(v.Fragment,{children:[v.jsx("div",{tabIndex:s?-1:0,ref:s?void 0:M.setReference,"aria-labelledby":"select-label","aria-autocomplete":"none",...s?{}:P(),className:W.base(),children:v.jsxs("div",{className:W.input(),children:[e?v.jsx(pn,{icon:e,variant:{size:"xl"},css:{base:["text-slate-400","group-hover:text-slate-600"]}}):null,te?v.jsx(r,{entity:te}):i||na.rich("Select item"),v.jsx(pn,{icon:"icon-[gg--select]",variant:{size:"xl"},css:{base:[!g&&"text-slate-400",g&&"text-slate-600","group-hover:text-slate-600"]}})]})}),B&&v.jsx(W2,{children:v.jsx(q5,{context:k,modal:!1,children:v.jsx("div",{ref:M.setFloating,style:{...T,...$},className:W.popup(),...j(),children:t.map((Z,J)=>v.jsxs("div",{ref:Y=>{N.current[J]=Y},role:"option",tabIndex:J===S?0:-1,"aria-selected":J===b&&J===S,className:W.item({selected:J===b,active:J===S}),...U({onClick(){q(J)},onKeyDown(Y){Y.key==="Enter"&&(Y.preventDefault(),q(J)),Y.key===" "&&!D.current&&(Y.preventDefault(),q(J))}}),children:[v.jsx(r,{entity:Z}),J===b&&v.jsx(pn,{icon:"icon-[basil--check-outline]",variant:{size:"xl"}})]},Z.id))})})})]})},Fne=({sizes:t=[5,15,30,50,100],size:e,onSize:n,...r})=>v.jsx(Y5,{items:t.map(i=>({id:`${i}`,size:i})),defaultValue:`${e}`,value:`${e}`,onItem:({size:i})=>n(i),render:({entity:{size:i}})=>i,css:{base:["px-8","py-1"],item:["px-8","py-1"]},...r}),GF=({cursor:t,count:e,textTotal:n,onPage:r,onSize:i,variant:s,tva:o=One,css:a})=>{const l=X.useMemo(()=>dee({page:t.page,total:Math.ceil(e.filter/t.size),siblings:1,boundaries:1}),[t.page,e.filter,t.size]),c=o({...s,css:a}).slots;return v.jsxs("div",{className:c.base(),children:[l.total>1?v.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[["both","start"].includes(l.type)&&v.jsxs(v.Fragment,{children:[v.jsx(GI,{page:t.page,pages:l.start,onPage:r}),v.jsx(pn,{icon:$F})]}),v.jsx(GI,{page:t.page,pages:l.pages,onPage:r}),["both","end"].includes(l.type)&&v.jsxs(v.Fragment,{children:[v.jsx(pn,{icon:$F}),v.jsx(GI,{page:t.page,pages:l.end,onPage:r})]})]}):null,v.jsxs("div",{className:c.sums(),children:[v.jsx("div",{children:n}),v.jsx("div",{className:"font-bold",children:e.filter}),e.filter!==e.where&&v.jsxs(v.Fragment,{children:[v.jsx("div",{children:"/"}),v.jsx("div",{className:"font-semibold",children:e.where})]})]}),v.jsx(Fne,{size:t.size,onSize:i})]})},XF="function",Xg="64e10b34-2bf7-4616-9668-f99de5aa046e",Bne="get",jne="has",Une="set",{isArray:$S}=Array;let{SharedArrayBuffer:rE,window:zne}=globalThis,{notify:Z5,wait:J5,waitAsync:iE}=Atomics,Q5=null;iE||(iE=t=>({value:new Promise(e=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=e,n.postMessage(t)})}));try{new rE(4)}catch{rE=ArrayBuffer;const e=new WeakMap;if(zne){const n=new Map,{prototype:{postMessage:r}}=Worker,i=s=>{const o=s.data?.[Xg];if(!$S(o)){s.stopImmediatePropagation();const{id:a,sb:l}=o;n.get(a)(l)}};Q5=function(s,...o){const a=s?.[Xg];if($S(a)){const[l,c]=a;e.set(c,l),this.addEventListener("message",i)}return r.call(this,s,...o)},iE=s=>({value:new Promise(o=>{n.set(e.get(s),o)}).then(o=>{n.delete(e.get(s)),e.delete(s);for(let a=0;a<o.length;a++)s[a]=o[a];return"ok"})})}else{const n=(r,i)=>({[Xg]:{id:r,sb:i}});Z5=r=>{postMessage(n(e.get(r),r))},addEventListener("message",r=>{const i=r.data?.[Xg];if($S(i)){const[s,o]=i;e.set(o,s)}})}}const{Int32Array:iP,Map:KF,Uint16Array:sP}=globalThis,{BYTES_PER_ELEMENT:YF}=iP,{BYTES_PER_ELEMENT:Vne}=sP,Wne=(t,e,n)=>{for(;J5(t,0,0,e)==="timed-out";)n()},oP=new WeakSet,XI=new WeakMap,qne={value:{then:t=>t()}};let Hne=0;const Z2=(t,{parse:e=JSON.parse,stringify:n=JSON.stringify,transform:r,interrupt:i}=JSON)=>{if(!XI.has(t)){const s=Q5||t.postMessage,o=(p,...g)=>s.call(t,{[Xg]:g},{transfer:p}),a=typeof i===XF?i:i?.handler,l=i?.delay||42,c=new TextDecoder("utf-16"),u=(p,g)=>p?iE(g,0):(a?Wne(g,l,a):J5(g,0),qne);let f=!1;XI.set(t,new Proxy(new KF,{[jne]:(p,g)=>typeof g=="string"&&!g.startsWith("_"),[Bne]:(p,g)=>g==="then"?null:(...x)=>{const S=Hne++;let _=new iP(new rE(YF*2)),b=[];oP.has(x.at(-1)||b)&&oP.delete(b=x.pop()),o(b,S,_,g,r?x.map(r):x);const E=t!==globalThis;let M=0;return f&&E&&(M=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${g}(...args) is awaited`)),u(E,_).value.then(()=>{clearTimeout(M);const T=_[1];if(!T)return;const k=Vne*T;return _=new iP(new rE(k+k%YF)),o([],S,_),u(E,_).value.then(()=>e(c.decode(new sP(_.buffer).slice(0,T))))})},[Une](p,g,x){const S=typeof x;if(S!==XF)throw new Error(`Unable to assign ${g} as ${S}`);if(!p.size){const _=new KF;t.addEventListener("message",async b=>{const E=b.data?.[Xg];if($S(E)){b.stopImmediatePropagation();const[M,T,...k]=E;let N;if(k.length){const[D,L]=k;if(p.has(D)){f=!0;try{const R=await p.get(D)(...L);if(R!==void 0){const A=n(r?r(R):R);_.set(M,A),T[1]=A.length}}catch(R){N=R}finally{f=!1}}else N=new Error(`Unsupported action: ${D}`);T[0]=1}else{const D=_.get(M);_.delete(M);for(let L=new sP(T.buffer),R=0;R<D.length;R++)L[R]=D.charCodeAt(R)}if(Z5(T,0),N)throw N}})}return!!p.set(g,x)}}))}return XI.get(t)};Z2.transfer=(...t)=>(oP.add(t),t);function ZF(){let t,e;return{lock:async()=>{for(;t;)await t;t=new Promise(i=>{e=i})},unlock:async()=>{const i=e;t=void 0,e=void 0,i?.()}}}const $ne="modulepreload",Gne=function(t){return"/"+t},JF={},sE=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(n.map(l=>{if(l=Gne(l),l in JF)return;JF[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":$ne,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};async function eW(t,e){let n;if(t instanceof Blob?n=t.stream():n=t,n instanceof ReadableStream&&e){const i=n.getReader();switch(e){case"callback":return async()=>(await i.read()).value;case"buffer":const s=[];let o=!1;for(;!o;){const u=await i.read();u.value&&s.push(u.value),o=u.done}const a=s.reduce((u,f)=>u+f.length,0),l=new Uint8Array(a);let c=0;return s.forEach(u=>{l.set(u,c),c+=u.length}),l}}else return n}class oE{constructor(e){Object.defineProperty(this,"sqlite3InitModule",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"sqlite3",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"db",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"storageType",{enumerable:!0,configurable:!0,writable:!0,value:"memory"})}async init(e){const{databasePath:n}=e,r=this.getFlags(e);if(!this.sqlite3InitModule){const{default:i}=await sE(async()=>{const{default:s}=await import("./index-itAQ-X7t.js");return{default:s}},[]);this.sqlite3InitModule=i}this.sqlite3||(this.sqlite3=await this.sqlite3InitModule()),this.db&&await this.destroy(),this.db=new this.sqlite3.oo1.DB(n,r),this.config=e}async exec(e){if(!this.db)throw new Error("Driver not initialized");return this.execOnDb(this.db,e)}async execBatch(e){if(!this.db)throw new Error("Driver not initialized");const n=[];return this.db.transaction(r=>{for(let i of e){const s=this.execOnDb(r,i);n.push(s)}}),n}async isDatabasePersisted(){return!1}async getDatabaseSizeBytes(){const n=(await this.exec({sql:`SELECT page_count * page_size AS size 
				FROM pragma_page_count(), pragma_page_size()`,method:"get"}))?.rows?.[0];if(typeof n!="number")throw new Error("Failed to query database size");return n}async createFunction(e){if(!this.db)throw new Error("Driver not initialized");switch(e.type){case"callback":case"scalar":this.db.createFunction({name:e.name,xFunc:(n,...r)=>e.func(...r),arity:-1});break;case"aggregate":this.db.createFunction({name:e.name,xStep:(n,...r)=>e.func.step(...r),xFinal:(n,...r)=>e.func.final(...r),arity:-1});break}}async import(e){if(!this.sqlite3||!this.db||!this.config)throw new Error("Driver not initialized");const n=await eW(e,"buffer"),r=this.sqlite3.wasm.allocFromTypedArray(n);this.pointers.push(r);const i=this.sqlite3.capi.sqlite3_deserialize(this.db,"main",r,n.byteLength,n.byteLength,this.config.readOnly?this.sqlite3.capi.SQLITE_DESERIALIZE_READONLY:this.sqlite3.capi.SQLITE_DESERIALIZE_RESIZEABLE);this.db.checkRc(i)}async export(){if(!this.sqlite3||!this.db)throw new Error("Driver not initialized");return{name:"database.sqlite3",data:this.sqlite3.capi.sqlite3_js_db_export(this.db)}}async clear(){}async destroy(){this.closeDb(),this.pointers.forEach(e=>this.sqlite3?.wasm.dealloc(e)),this.pointers=[]}getFlags(e){const{readOnly:n,verbose:r}=e;return[n===!0?"r":"cw",r===!0?"t":""].join("")}execOnDb(e,n){const r={rows:[],columns:[]},i=e.exec({sql:n.sql,bind:n.params,returnValue:"resultRows",rowMode:"array",columnNames:r.columns});switch(n.method){case"run":break;case"get":r.rows=i[0]??[];break;case"all":default:r.rows=i;break}return r}closeDb(){this.db&&(this.db.close(),this.db=void 0)}}class b_{constructor(e){Object.defineProperty(this,"driver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userFunctions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"initMutex",{enumerable:!0,configurable:!0,writable:!0,value:ZF()}),Object.defineProperty(this,"transactionMutex",{enumerable:!0,configurable:!0,writable:!0,value:ZF()}),Object.defineProperty(this,"transactionKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"init",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{if(this.config.databasePath){await this.initMutex.lock();try{try{await this.driver.init(this.config)}catch{console.warn(`Persistence failed, so ${this.config.databasePath} will not be saved. For origin private file system persistence, make sure your web server is configured to use the correct HTTP response headers (See https://sqlocal.dallashoffman.com/guide/setup#cross-origin-isolation).`),this.config.databasePath=":memory:",this.driver=new oE,await this.driver.init(this.config)}this.driver.storageType!=="memory"&&(this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${this.config.databasePath})`),this.reinitChannel.onmessage=s=>{const o=s.data;if(this.config.clientKey!==o.clientKey)switch(o.type){case"reinit":this.init(o.reason);break;case"close":this.driver.destroy();break}}),await Promise.all(Array.from(this.userFunctions.values()).map(s=>this.initUserFunction(s))),await this.execInitStatements(),this.emitMessage({type:"event",event:"connect",reason:i})}catch(s){this.emitMessage({type:"error",error:s,queryKey:null}),await this.destroy()}finally{await this.initMutex.unlock()}}}}),Object.defineProperty(this,"postMessage",{enumerable:!0,configurable:!0,writable:!0,value:async(i,s)=>{const o=i instanceof MessageEvent?i.data:i;switch(await this.initMutex.lock(),o.type){case"config":this.editConfig(o);break;case"query":case"batch":case"transaction":this.exec(o);break;case"function":this.createUserFunction(o);break;case"getinfo":this.getDatabaseInfo(o);break;case"import":this.importDb(o);break;case"export":this.exportDb(o);break;case"delete":this.deleteDb(o);break;case"destroy":this.destroy(o);break}await this.initMutex.unlock()}}),Object.defineProperty(this,"emitMessage",{enumerable:!0,configurable:!0,writable:!0,value:(i,s=[])=>{this.onmessage&&this.onmessage(i,s)}}),Object.defineProperty(this,"editConfig",{enumerable:!0,configurable:!0,writable:!0,value:i=>{this.config=i.config,this.init("initial")}}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{try{const s={type:"data",queryKey:i.queryKey,data:[]};switch(i.type){case"query":const o=this.transactionKey!==null&&this.transactionKey===i.transactionKey;try{o||await this.transactionMutex.lock();const a=await this.driver.exec(i);s.data.push(a)}finally{o||await this.transactionMutex.unlock()}break;case"batch":try{await this.transactionMutex.lock();const a=await this.driver.execBatch(i.statements);s.data.push(...a)}finally{await this.transactionMutex.unlock()}break;case"transaction":if(i.action==="begin"&&(await this.transactionMutex.lock(),this.transactionKey=i.transactionKey,await this.driver.exec({sql:"BEGIN"})),(i.action==="commit"||i.action==="rollback")&&this.transactionKey!==null&&this.transactionKey===i.transactionKey){const a=i.action==="commit"?"COMMIT":"ROLLBACK";await this.driver.exec({sql:a}),this.transactionKey=null,await this.transactionMutex.unlock()}break}this.emitMessage(s)}catch(s){this.emitMessage({type:"error",error:s,queryKey:i.queryKey})}}}),Object.defineProperty(this,"execInitStatements",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{if(this.config.onInitStatements)for(let i of this.config.onInitStatements)await this.driver.exec(i)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{try{this.emitMessage({type:"info",queryKey:i.queryKey,info:{databasePath:this.config.databasePath,storageType:this.driver.storageType,databaseSizeBytes:await this.driver.getDatabaseSizeBytes(),persisted:await this.driver.isDatabasePersisted()}})}catch(s){this.emitMessage({type:"error",queryKey:i.queryKey,error:s})}}}),Object.defineProperty(this,"createUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{const{functionName:s,functionType:o,queryKey:a}=i;let l;if(this.userFunctions.has(s)){this.emitMessage({type:"error",error:new Error(`A user-defined function with the name "${s}" has already been created for this SQLocal instance.`),queryKey:a});return}switch(o){case"callback":l={type:o,name:s,func:(...c)=>{this.emitMessage({type:"callback",name:s,args:c})}};break;case"scalar":l={type:o,name:s,func:this.proxy[`_sqlocal_func_${s}`]};break;case"aggregate":l={type:o,name:s,func:{step:this.proxy[`_sqlocal_func_${s}_step`],final:this.proxy[`_sqlocal_func_${s}_final`]}};break}try{await this.initUserFunction(l),this.emitMessage({type:"success",queryKey:a})}catch(c){this.emitMessage({type:"error",error:c,queryKey:a})}}}),Object.defineProperty(this,"initUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{await this.driver.createFunction(i),this.userFunctions.set(i.name,i)}}),Object.defineProperty(this,"importDb",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{const{queryKey:s,database:o}=i;let a=!1;try{await this.driver.import(o),this.driver.storageType==="memory"&&await this.execInitStatements()}catch(l){this.emitMessage({type:"error",error:l,queryKey:s}),a=!0}finally{this.driver.storageType!=="memory"&&await this.init("overwrite")}a||this.emitMessage({type:"success",queryKey:s})}}),Object.defineProperty(this,"exportDb",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{const{queryKey:s}=i;try{const{name:o,data:a}=await this.driver.export();this.emitMessage({type:"buffer",queryKey:s,bufferName:o,buffer:a},[a])}catch(o){this.emitMessage({type:"error",error:o,queryKey:s})}}}),Object.defineProperty(this,"deleteDb",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{const{queryKey:s}=i;let o=!1;try{await this.driver.clear()}catch(a){this.emitMessage({type:"error",error:a,queryKey:s}),o=!0}finally{await this.init("delete")}o||this.emitMessage({type:"success",queryKey:s})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{await this.driver.exec({sql:"PRAGMA optimize"}),await this.driver.destroy(),this.reinitChannel&&(this.reinitChannel.close(),this.reinitChannel=void 0),i&&this.emitMessage({type:"success",queryKey:i.queryKey})}});const r=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope?Z2(globalThis):globalThis;this.proxy=r,this.driver=e}}function aE(t,...e){return{sql:t.join("?"),params:e}}function Xne(t){return!t.some(e=>!Array.isArray(e))}function KI(t,e){let n;return Xne(t)?n=t:n=[t],n.map(r=>{const i={};return e.forEach((s,o)=>{i[s]=r[o]}),i})}function Kne(t){return typeof t=="object"&&t!==null&&"getSQL"in t&&typeof t.getSQL=="function"}function Yne(t){return typeof t=="object"&&t!==null&&"sql"in t&&typeof t.sql=="string"&&"params"in t}function Zne(t){if(typeof t=="function"&&(t=t(aE)),Kne(t))try{if(!("toSQL"in t&&typeof t.toSQL=="function"))throw 1;const r=t.toSQL();if(!Yne(r))throw 2;return r}catch{throw new Error("The passed statement could not be parsed.")}const e=t.sql;let n=[];return"params"in t?n=t.params:"parameters"in t&&(n=t.parameters),{sql:e,params:n}}function YI(){return crypto.randomUUID()}function QF(t,e){let n;return typeof t=="string"?n={sql:t,params:e}:n=aE(t,...e),n}async function w_(t,e,n,r){return!e&&"locks"in navigator?navigator.locks.request(`_sqlocal_mutation_(${n.databasePath})`,{mode:t},r):r()}class e3 extends oE{constructor(e,n){super(n),Object.defineProperty(this,"storageType",{enumerable:!0,configurable:!0,writable:!0,value:e})}async init(e){const n=this.getFlags(e);if(e.readOnly)throw new Error(`SQLite storage type "${this.storageType}" does not support read-only mode.`);if(!this.sqlite3InitModule){const{default:r}=await sE(async()=>{const{default:i}=await import("./index-itAQ-X7t.js");return{default:i}},[]);this.sqlite3InitModule=r}this.sqlite3||(this.sqlite3=await this.sqlite3InitModule()),this.db&&await this.destroy(),this.db=new this.sqlite3.oo1.JsStorageDb({filename:this.storageType,flags:n}),this.config=e}async isDatabasePersisted(){return navigator.storage?.persisted()}async getDatabaseSizeBytes(){if(!this.db)throw new Error("Driver not initialized");return this.db.storageSize()}async import(e){const n=new oE;await n.init({}),await n.import(e),await this.clear(),await n.exec({sql:`VACUUM INTO 'file:${this.storageType}?vfs=kvvfs'`}),await n.destroy()}async clear(){if(!this.db)throw new Error("Driver not initialized");this.db.clearStorage()}async destroy(){this.closeDb()}}class Jne{constructor(e){Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"bypassMutationLock",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"userCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"queriesInProgress",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processMessageEvent",{enumerable:!0,configurable:!0,writable:!0,value:l=>{const c=l instanceof MessageEvent?l.data:l,u=this.queriesInProgress;switch(c.type){case"success":case"data":case"buffer":case"info":case"error":if(c.queryKey&&u.has(c.queryKey)){const[p,g]=u.get(c.queryKey);c.type==="error"?g(c.error):p(c),u.delete(c.queryKey)}else if(c.type==="error")throw c.error;break;case"callback":const f=this.userCallbacks.get(c.name);f&&f(...c.args??[]);break;case"event":this.config.onConnect?.(c.reason);break}}}),Object.defineProperty(this,"createQuery",{enumerable:!0,configurable:!0,writable:!0,value:async l=>w_("shared",this.bypassMutationLock||l.type==="import"||l.type==="delete",this.config,async()=>{if(this.isDestroyed===!0)throw new Error("This SQLocal client has been destroyed. You will need to initialize a new client in order to make further queries.");const c=YI();switch(l.type){case"import":this.processor.postMessage({...l,queryKey:c},[l.database]);break;default:this.processor.postMessage({...l,queryKey:c});break}return new Promise((u,f)=>{this.queriesInProgress.set(c,[u,f])})})}),Object.defineProperty(this,"broadcast",{enumerable:!0,configurable:!0,writable:!0,value:l=>{this.reinitChannel.postMessage(l)}}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async(l,c,u="all",f)=>{const p=await this.createQuery({type:"query",transactionKey:f,sql:l,params:c,method:u}),g={rows:[],columns:[]};return p.type==="data"&&(g.rows=p.data[0]?.rows??[],g.columns=p.data[0]?.columns??[]),g}}),Object.defineProperty(this,"execBatch",{enumerable:!0,configurable:!0,writable:!0,value:async l=>{const c=await this.createQuery({type:"batch",statements:l}),u=new Array(l.length).fill({rows:[],columns:[]});return c.type==="data"&&c.data.forEach((f,p)=>{u[p]=f}),u}}),Object.defineProperty(this,"sql",{enumerable:!0,configurable:!0,writable:!0,value:async(l,...c)=>{const u=QF(l,c),{rows:f,columns:p}=await this.exec(u.sql,u.params,"all");return KI(f,p)}}),Object.defineProperty(this,"batch",{enumerable:!0,configurable:!0,writable:!0,value:async l=>{const c=l(aE);return(await this.execBatch(c)).map(({rows:f,columns:p})=>KI(f,p))}}),Object.defineProperty(this,"beginTransaction",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const l=YI();await this.createQuery({type:"transaction",transactionKey:l,action:"begin"});const c=async g=>{const x=Zne(g),{rows:S,columns:_}=await this.exec(x.sql,x.params,"all",l);return KI(S,_)};return{query:c,sql:async(g,...x)=>{const S=QF(g,x);return await c(S)},commit:async()=>{await this.createQuery({type:"transaction",transactionKey:l,action:"commit"})},rollback:async()=>{await this.createQuery({type:"transaction",transactionKey:l,action:"rollback"})}}}}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:async l=>w_("exclusive",!1,this.config,async()=>{let c;this.bypassMutationLock=!0;try{c=await this.beginTransaction();const u=await l({sql:c.sql,query:c.query});return await c.commit(),u}catch(u){throw await c?.rollback(),u}finally{this.bypassMutationLock=!1}})}),Object.defineProperty(this,"createCallbackFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(l,c)=>{await this.createQuery({type:"function",functionName:l,functionType:"callback"}),this.userCallbacks.set(l,c)}}),Object.defineProperty(this,"createScalarFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(l,c)=>{const u=`_sqlocal_func_${l}`,f=()=>{this.proxy[u]=c};this.proxy===globalThis&&f(),await this.createQuery({type:"function",functionName:l,functionType:"scalar"}),this.proxy!==globalThis&&f()}}),Object.defineProperty(this,"createAggregateFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(l,c)=>{const u=`_sqlocal_func_${l}`,f=()=>{this.proxy[`${u}_step`]=c.step,this.proxy[`${u}_final`]=c.final};this.proxy===globalThis&&f(),await this.createQuery({type:"function",functionName:l,functionType:"aggregate"}),this.proxy!==globalThis&&f()}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const l=await this.createQuery({type:"getinfo"});if(l.type==="info")return l.info;throw new Error("The database failed to return valid information.")}}),Object.defineProperty(this,"getDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const l=await this.createQuery({type:"export"});if(l.type==="buffer")return new File([l.buffer],l.bufferName,{type:"application/x-sqlite3"});throw new Error("The database failed to export.")}}),Object.defineProperty(this,"overwriteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async(l,c)=>{await w_("exclusive",!1,this.config,async()=>{try{this.broadcast({type:"close",clientKey:this.clientKey});const u=await eW(l);await this.createQuery({type:"import",database:u}),typeof c=="function"&&(this.bypassMutationLock=!0,await c()),this.broadcast({type:"reinit",clientKey:this.clientKey,reason:"overwrite"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"deleteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async l=>{await w_("exclusive",!1,this.config,async()=>{try{this.broadcast({type:"close",clientKey:this.clientKey}),await this.createQuery({type:"delete"}),typeof l=="function"&&(this.bypassMutationLock=!0,await l()),this.broadcast({type:"reinit",clientKey:this.clientKey,reason:"delete"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{await this.createQuery({type:"destroy"}),typeof globalThis.Worker<"u"&&this.processor instanceof Worker&&(this.processor.removeEventListener("message",this.processMessageEvent),this.processor.terminate()),this.queriesInProgress.clear(),this.userCallbacks.clear(),this.reinitChannel.close(),this.isDestroyed=!0}});const n=typeof e=="string"?{databasePath:e}:e,{onInit:r,onConnect:i,processor:s,...o}=n,{databasePath:a}=o;if(this.config=n,this.clientKey=YI(),this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${a})`),typeof s<"u")this.processor=s;else if(a==="local"||a===":localStorage:"){const l=new e3("local");this.processor=new b_(l)}else if(a==="session"||a===":sessionStorage:"){const l=new e3("session");this.processor=new b_(l)}else if(typeof globalThis.Worker<"u"&&a!==":memory:")this.processor=new Worker(new URL("/assets/worker-ChjnweQB.js",import.meta.url),{type:"module"});else{const l=new oE;this.processor=new b_(l)}this.processor instanceof b_?(this.processor.onmessage=l=>this.processMessageEvent(l),this.proxy=globalThis):(this.processor.addEventListener("message",this.processMessageEvent),this.proxy=Z2(this.processor)),this.processor.postMessage({type:"config",config:{...o,clientKey:this.clientKey,onInitStatements:r?.(aE)??[]}})}}class Qne extends Jne{constructor(){super(...arguments),Object.defineProperty(this,"dialect",{enumerable:!0,configurable:!0,writable:!0,value:{createAdapter:()=>new KJ,createDriver:()=>new ere(this),createIntrospector:e=>new XJ(e),createQueryCompiler:()=>new HJ}})}}class ere{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e})}async init(){}async acquireConnection(){return new tre(this.client)}async releaseConnection(){}async beginTransaction(e){e.transaction=await this.client.beginTransaction()}async commitTransaction(e){await e.transaction?.commit(),e.transaction=null}async rollbackTransaction(e){await e.transaction?.rollback(),e.transaction=null}async destroy(){await this.client.destroy()}}class tre{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:null})}async executeQuery(e){let n;return this.transaction===null?n=await this.client.sql(e.sql,...e.parameters):n=await this.transaction.query(e),{rows:n}}async *streamQuery(){throw new Error("SQLite3 does not support streaming.")}}const nre=({database:t,bootstrap:e})=>{const{dialect:n}=new Qne({databasePath:`${t}.sqlite3`,onInit(i){return[i`PRAGMA foreign_keys = ON;`,i`PRAGMA journal_mode = WAL;`]}}),r=new R2({dialect:n,log:["error"]});return{kysely:r,async bootstrap(){return e({kysely:r})}}};function rre(t,e,n,r={leading:!1}){const[i,s]=X.useState(t),[o,a]=X.useState(t),l=X.useRef(null),c=X.useRef(!0),u=()=>window.clearTimeout(l.current||void 0);X.useEffect(()=>u,[]),X.useEffect(()=>{e(i)},[i]),X.useEffect(()=>{a(t),s(t)},[t]);const f=X.useCallback(p=>{a(p),u(),c.current&&r.leading?s(p):l.current=window.setTimeout(()=>{c.current=!0,s(p)},n),c.current=!1},[r.leading]);return[o,f]}const us=Sn({slot:{base:["border","border-gray-300","rounded-md","p-4","flex","flex-col","gap-2","items-center"],fieldset:["flex","flex-col","gap-4","w-full","p-4"],legend:["font-bold","text-lg","p-1","border-b","border-slate-400","w-full"],input:["w-full","border","border-gray-300","rounded-md","p-2","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"]},variant:{isLoading:{true:[]},isSubmitting:{true:[]}},match:[{if:{isSubmitting:!0},then:{base:["opacity-50","pointer-events-none","select-none"]}}],defaults:{isLoading:!1,isSubmitting:!1}}),ire="icon-[material-symbols--error-outline]",sre=Sn({slot:{base:["flex","flex-row","gap-1","items-center","text-red-600","p-2"]},variant:{highlight:{true:[]},compact:{true:[]}},match:[{if:{highlight:!0},then:{base:["bg-red-100","p-2","font-bold","border","border-red-200","rounded-md","w-full"]}},{if:{compact:!0},then:{base:["p-0"]}}],defaults:{highlight:!1,compact:!1}}),ts=({error:t,variant:e,tva:n=sre,css:r})=>{const i=n({...e,css:r}).slots;return t?.message?v.jsxs("div",{className:i.base(),children:[v.jsx(pn,{icon:ire}),v.jsx("span",{children:na.rich(t.message)})]}):null},ore=Sn({slot:{base:["flex","flex-col","gap-1","w-full"],input:[]},variant:{required:{true:[]},disabled:{true:[]},isSubmitting:{true:[]},isLoading:{true:[]},isError:{true:[]}},match:[{if:{isError:!0},then:{base:["text-red-600"]}},{if:{required:!0},then:{base:["text-emerald-600","font-bold"]}},{if:{disabled:!0},then:{base:["opacity-75","cursor-not-allowed"],input:["pointer-events-none"]}}],defaults:{required:!1,disabled:!1,isSubmitting:!1,isLoading:!1,isError:!1}}),hn=({label:t,hint:e,required:n=!1,formState:r,name:i,disabled:s,children:o,variant:a,tva:l=ore,css:c})=>{const u=l({isSubmitting:r.isSubmitting,isLoading:r.isLoading,isError:!!r.errors[i],required:n,disabled:s,...a,css:c}).slots;return v.jsxs("div",{className:u.base(),children:[v.jsxs("div",{className:"flex flex-row justify-between",children:[t?v.jsx("label",{htmlFor:i,children:t}):null,v.jsx(ts,{variant:{compact:!0},error:r.errors[i]})]}),e?v.jsx("div",{className:"text-sm italic",children:e}):null,v.jsx("div",{className:u.input(),children:o})]})},Qs=({form:t,mutation:e,map:n=({cleanup:r})=>r()})=>{const r=t.handleSubmit(async i=>e.mutateAsync(await n({values:i,cleanup(){return uee(l5(i))}}),{onError:s=>{P2({error:s,errors:[u2({error:s,schema:N2,onError:({data:o})=>{t.setError("root",{message:o.message})}})],onError:o=>{t.setError("root",{message:o.message})}})}}).catch(()=>{}));return i=>{i.stopPropagation(),r(i)}},are=Sn({slot:{base:["relative","w-full"],search:["absolute","inset-y-0","left-2","flex","items-center","pointer-events-none","text-slate-500"],input:["pl-8","py-1","w-full","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","block"],clear:["absolute","inset-y-0","right-2","flex","items-center","cursor-pointer","text-slate-300","hover:text-slate-500"]},variant:{},defaults:{}}),tW=({value:t="",onFulltext:e,textPlaceholder:n,variant:r,tva:i=are,css:s})=>{const o=i({...r,css:s}).slots,[a,l]=rre(t,e,500);return v.jsxs("div",{className:o.base(),children:[v.jsx("div",{className:o.search(),children:v.jsx(pn,{icon:"icon-[material-symbols-light--search]",variant:{size:"xl"}})}),v.jsx("input",{value:a||"",className:o.input(),type:"text",placeholder:n||na.text("Fulltext (placeholder)"),onChange:c=>{l(c.target.value)}}),t&&v.jsx("div",{className:o.clear(),onClick:()=>{e("")},children:v.jsx(pn,{icon:"icon-[gridicons--cross]",variant:{size:"md"}})})]})},nW="icon-[fluent--arrow-down-12-regular]",rW="icon-[fluent--arrow-up-12-regular]",Na="icon-[pajamas--go-back]",lE="icon-[line-md--confirm-circle]",iW="icon-[mage--edit]",lre="icon-[arcticons--nothing-x]",cre="icon-[tabler--filter-plus]",t3="icon-[tabler--filter-minus]",GM="icon-[ph--list-dashes-thin]",J2="icon-[svg-spinners--3-dots-scale]",Q2="icon-[material-symbols-light--logout-sharp]",ure="icon-[fluent--shape-intersect-20-regular]",XM="icon-[fluent--checkbox-unchecked-20-regular]",KM="icon-[fluent--checkbox-checked-20-regular]",W0="icon-[teenyicons--tag-outline]",Ti="icon-[ph--trash]",dre="icon-[clarity--upload-cloud-line]",ek="icon-[ph--user]",fre=async({queryClient:t,keys:e})=>{for await(const n of e)await t.invalidateQueries({queryKey:n,refetchType:"all"})},Ar=t=>{const e=gM(),n=al();return async()=>{await fre({keys:t,queryClient:e}),await n.invalidate()}},hre=Sn({slot:{base:[]},variant:{},defaults:{}}),ne=X.memo(({label:t,fallback:e,variant:n,tva:r=hre,css:i})=>{const s=r({...n,css:i}).slots;return v.jsx("div",{className:s.base(),children:na.rich(t,e)})}),pre=Sn({slot:{base:["h-full","w-full","bg-slate-200","rounded-sm","transition-all"],progress:["h-full","bg-blue-400","rounded-sm","leading-none","transition-all"]},variant:{size:{xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-4"}},defaults:{size:"md"}}),YM=X.memo(({value:t,variant:e,tva:n=pre,css:r})=>{const i=n({...e,css:r}).slots;return v.jsx("div",{className:i.base(),children:v.jsx("div",{style:{width:`${Math.max(0,Math.min(100,t))}%`},className:i.progress()})})}),_s=[];for(let t=0;t<256;++t)_s.push((t+256).toString(16).slice(1));function mre(t,e=0){return(_s[t[e+0]]+_s[t[e+1]]+_s[t[e+2]]+_s[t[e+3]]+"-"+_s[t[e+4]]+_s[t[e+5]]+"-"+_s[t[e+6]]+_s[t[e+7]]+"-"+_s[t[e+8]]+_s[t[e+9]]+"-"+_s[t[e+10]]+_s[t[e+11]]+_s[t[e+12]]+_s[t[e+13]]+_s[t[e+14]]+_s[t[e+15]]).toLowerCase()}let ZI;const gre=new Uint8Array(16);function yre(){if(!ZI){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ZI=crypto.getRandomValues.bind(crypto)}return ZI(gre)}const vre=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),n3={randomUUID:vre};function r3(t,e,n){if(n3.randomUUID&&!t)return n3.randomUUID();t=t||{};const r=t.random??t.rng?.()??yre();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,mre(r)}var JI={exports:{}},QI,i3;function xre(){if(i3)return QI;i3=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return QI=t,QI}var eR,s3;function bre(){if(s3)return eR;s3=1;var t=xre();function e(){}function n(){}return n.resetWarningCache=e,eR=function(){function r(o,a,l,c,u,f){if(f!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},eR}var o3;function wre(){return o3||(o3=1,JI.exports=bre()()),JI.exports}var _re=wre();const wr=Co(_re);function im(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}const Sre=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Ay(t,e,n){const r=Ere(t),{webkitRelativePath:i}=t,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&a3(r,"path",s),a3(r,"relativePath",s),r}function Ere(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=Sre.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function a3(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const Mre=[".DS_Store","Thumbs.db"];function Tre(t){return im(this,void 0,void 0,function*(){return cE(t)&&Cre(t.dataTransfer)?Nre(t.dataTransfer,t.type):Ire(t)?Rre(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?Are(t):[]})}function Cre(t){return cE(t)}function Ire(t){return cE(t)&&cE(t.target)}function cE(t){return typeof t=="object"&&t!==null}function Rre(t){return aP(t.target.files).map(e=>Ay(e))}function Are(t){return im(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>Ay(n))})}function Nre(t,e){return im(this,void 0,void 0,function*(){if(t.items){const n=aP(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(Pre));return l3(sW(r))}return l3(aP(t.files).map(n=>Ay(n)))})}function l3(t){return t.filter(e=>Mre.indexOf(e.name)===-1)}function aP(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function Pre(t){if(typeof t.webkitGetAsEntry!="function")return c3(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?oW(e):c3(t,e)}function sW(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?sW(n):[n]],[])}function c3(t,e){return im(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const s=yield t.getAsFileSystemHandle();if(s===null)throw new Error(`${t} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,Ay(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return Ay(r,(n=e?.fullPath)!==null&&n!==void 0?n:void 0)})}function kre(t){return im(this,void 0,void 0,function*(){return t.isDirectory?oW(t):Ore(t)})}function oW(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function s(){e.readEntries(o=>im(this,void 0,void 0,function*(){if(o.length){const a=Promise.all(o.map(kre));i.push(a),s()}else try{const a=yield Promise.all(i);n(a)}catch(a){r(a)}}),o=>{r(o)})}s()})}function Ore(t){return im(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=Ay(r,t.fullPath);e(i)},r=>{n(r)})})})}var __={},u3;function Lre(){return u3||(u3=1,__.__esModule=!0,__.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0}),__}var Dre=Lre();const tR=Co(Dre);function d3(t){return jre(t)||Bre(t)||lW(t)||Fre()}function Fre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bre(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jre(t){if(Array.isArray(t))return lP(t)}function f3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f3(Object(n),!0).forEach(function(r){aW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aW(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q0(t,e){return Vre(t)||zre(t,e)||lW(t,e)||Ure()}function Ure(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lW(t,e){if(t){if(typeof t=="string")return lP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lP(t,e)}}function lP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zre(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function Vre(t){if(Array.isArray(t))return t}var Wre=typeof tR=="function"?tR:tR.default,cW="file-invalid-type",uW="file-too-large",dW="file-too-small",fW="too-many-files",qre={FileInvalidType:cW,FileTooLarge:uW,FileTooSmall:dW,TooManyFiles:fW},Hre=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:cW,message:"File type must be ".concat(r)}},p3=function(e){return{code:uW,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},m3=function(e){return{code:dW,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},$re={code:fW,message:"Too many files"};function hW(t,e){var n=t.type==="application/x-moz-file"||Wre(t,e);return[n,n?null:Hre(e)]}function pW(t,e,n){if(hp(t.size))if(hp(e)&&hp(n)){if(t.size>n)return[!1,p3(n)];if(t.size<e)return[!1,m3(e)]}else{if(hp(e)&&t.size<e)return[!1,m3(e)];if(hp(n)&&t.size>n)return[!1,p3(n)]}return[!0,null]}function hp(t){return t!=null}function Gre(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,a=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(l){var c=hW(l,n),u=q0(c,1),f=u[0],p=pW(l,r,i),g=q0(p,1),x=g[0],S=a?a(l):null;return f&&x&&!S})}function uE(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function S_(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function g3(t){t.preventDefault()}function Xre(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function Kre(t){return t.indexOf("Edge/")!==-1}function Yre(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Xre(t)||Kre(t)}function _c(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!uE(r)&&a&&a.apply(void 0,[r].concat(s)),uE(r)})}}function Zre(){return"showOpenFilePicker"in window}function Jre(t){if(hp(t)){var e=Object.entries(t).filter(function(n){var r=q0(n,2),i=r[0],s=r[1],o=!0;return mW(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(gW))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=q0(r,2),s=i[0],o=i[1];return h3(h3({},n),{},aW({},s,o))},{});return[{description:"Files",accept:e}]}return t}function Qre(t){if(hp(t))return Object.entries(t).reduce(function(e,n){var r=q0(n,2),i=r[0],s=r[1];return[].concat(d3(e),[i],d3(s))},[]).filter(function(e){return mW(e)||gW(e)}).join(",")}function eie(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function tie(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function mW(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function gW(t){return/^.*\.[\w]+$/.test(t)}var nie=["children"],rie=["open"],iie=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],sie=["refKey","onChange","onClick"];function oie(t){return cie(t)||lie(t)||yW(t)||aie()}function aie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cie(t){if(Array.isArray(t))return cP(t)}function nR(t,e){return fie(t)||die(t,e)||yW(t,e)||uie()}function uie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yW(t,e){if(t){if(typeof t=="string")return cP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cP(t,e)}}function cP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function die(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function fie(t){if(Array.isArray(t))return t}function y3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y3(Object(n),!0).forEach(function(r){uP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dE(t,e){if(t==null)return{};var n=hie(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hie(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var ZM=X.forwardRef(function(t,e){var n=t.children,r=dE(t,nie),i=xW(r),s=i.open,o=dE(i,rie);return X.useImperativeHandle(e,function(){return{open:s}},[s]),rr.createElement(X.Fragment,null,n(Jr(Jr({},o),{},{open:s})))});ZM.displayName="Dropzone";var vW={disabled:!1,getFilesFromEvent:Tre,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};ZM.defaultProps=vW;ZM.propTypes={children:wr.func,accept:wr.objectOf(wr.arrayOf(wr.string)),multiple:wr.bool,preventDropOnDocument:wr.bool,noClick:wr.bool,noKeyboard:wr.bool,noDrag:wr.bool,noDragEventsBubbling:wr.bool,minSize:wr.number,maxSize:wr.number,maxFiles:wr.number,disabled:wr.bool,getFilesFromEvent:wr.func,onFileDialogCancel:wr.func,onFileDialogOpen:wr.func,useFsAccessApi:wr.bool,autoFocus:wr.bool,onDragEnter:wr.func,onDragLeave:wr.func,onDragOver:wr.func,onDrop:wr.func,onDropAccepted:wr.func,onDropRejected:wr.func,onError:wr.func,validator:wr.func};var dP={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function xW(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Jr(Jr({},vW),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,f=e.onDragOver,p=e.onDrop,g=e.onDropAccepted,x=e.onDropRejected,S=e.onFileDialogCancel,_=e.onFileDialogOpen,b=e.useFsAccessApi,E=e.autoFocus,M=e.preventDropOnDocument,T=e.noClick,k=e.noKeyboard,N=e.noDrag,D=e.noDragEventsBubbling,L=e.onError,R=e.validator,A=X.useMemo(function(){return Qre(n)},[n]),P=X.useMemo(function(){return Jre(n)},[n]),j=X.useMemo(function(){return typeof _=="function"?_:v3},[_]),U=X.useMemo(function(){return typeof S=="function"?S:v3},[S]),B=X.useRef(null),$=X.useRef(null),q=X.useReducer(pie,dP),te=nR(q,2),W=te[0],Z=te[1],J=W.isFocused,Y=W.isFileDialogActive,oe=X.useRef(typeof window<"u"&&window.isSecureContext&&b&&Zre()),ce=function(){!oe.current&&Y&&setTimeout(function(){if($.current){var Te=$.current.files;Te.length||(Z({type:"closeDialog"}),U())}},300)};X.useEffect(function(){return window.addEventListener("focus",ce,!1),function(){window.removeEventListener("focus",ce,!1)}},[$,Y,U,oe]);var ie=X.useRef([]),ue=function(Te){B.current&&B.current.contains(Te.target)||(Te.preventDefault(),ie.current=[])};X.useEffect(function(){return M&&(document.addEventListener("dragover",g3,!1),document.addEventListener("drop",ue,!1)),function(){M&&(document.removeEventListener("dragover",g3),document.removeEventListener("drop",ue))}},[B,M]),X.useEffect(function(){return!r&&E&&B.current&&B.current.focus(),function(){}},[B,E,r]);var de=X.useCallback(function(he){L?L(he):console.error(he)},[L]),be=X.useCallback(function(he){he.preventDefault(),he.persist(),fe(he),ie.current=[].concat(oie(ie.current),[he.target]),S_(he)&&Promise.resolve(i(he)).then(function(Te){if(!(uE(he)&&!D)){var Oe=Te.length,Qe=Oe>0&&Gre({files:Te,accept:A,minSize:o,maxSize:s,multiple:a,maxFiles:l,validator:R}),Ye=Oe>0&&!Qe;Z({isDragAccept:Qe,isDragReject:Ye,isDragActive:!0,type:"setDraggedFiles"}),c&&c(he)}}).catch(function(Te){return de(Te)})},[i,c,de,D,A,o,s,a,l,R]),we=X.useCallback(function(he){he.preventDefault(),he.persist(),fe(he);var Te=S_(he);if(Te&&he.dataTransfer)try{he.dataTransfer.dropEffect="copy"}catch{}return Te&&f&&f(he),!1},[f,D]),Ce=X.useCallback(function(he){he.preventDefault(),he.persist(),fe(he);var Te=ie.current.filter(function(Qe){return B.current&&B.current.contains(Qe)}),Oe=Te.indexOf(he.target);Oe!==-1&&Te.splice(Oe,1),ie.current=Te,!(Te.length>0)&&(Z({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),S_(he)&&u&&u(he))},[B,u,D]),Ie=X.useCallback(function(he,Te){var Oe=[],Qe=[];he.forEach(function(Ye){var at=hW(Ye,A),Ft=nR(at,2),et=Ft[0],gt=Ft[1],kt=pW(Ye,o,s),Bt=nR(kt,2),dt=Bt[0],Ee=Bt[1],He=R?R(Ye):null;if(et&&dt&&!He)Oe.push(Ye);else{var ft=[gt,Ee];He&&(ft=ft.concat(He)),Qe.push({file:Ye,errors:ft.filter(function(Se){return Se})})}}),(!a&&Oe.length>1||a&&l>=1&&Oe.length>l)&&(Oe.forEach(function(Ye){Qe.push({file:Ye,errors:[$re]})}),Oe.splice(0)),Z({acceptedFiles:Oe,fileRejections:Qe,isDragReject:Qe.length>0,type:"setFiles"}),p&&p(Oe,Qe,Te),Qe.length>0&&x&&x(Qe,Te),Oe.length>0&&g&&g(Oe,Te)},[Z,a,A,o,s,l,p,g,x,R]),Fe=X.useCallback(function(he){he.preventDefault(),he.persist(),fe(he),ie.current=[],S_(he)&&Promise.resolve(i(he)).then(function(Te){uE(he)&&!D||Ie(Te,he)}).catch(function(Te){return de(Te)}),Z({type:"reset"})},[i,Ie,de,D]),ve=X.useCallback(function(){if(oe.current){Z({type:"openDialog"}),j();var he={multiple:a,types:P};window.showOpenFilePicker(he).then(function(Te){return i(Te)}).then(function(Te){Ie(Te,null),Z({type:"closeDialog"})}).catch(function(Te){eie(Te)?(U(Te),Z({type:"closeDialog"})):tie(Te)?(oe.current=!1,$.current?($.current.value=null,$.current.click()):de(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):de(Te)});return}$.current&&(Z({type:"openDialog"}),j(),$.current.value=null,$.current.click())},[Z,j,U,b,Ie,de,P,a]),_e=X.useCallback(function(he){!B.current||!B.current.isEqualNode(he.target)||(he.key===" "||he.key==="Enter"||he.keyCode===32||he.keyCode===13)&&(he.preventDefault(),ve())},[B,ve]),se=X.useCallback(function(){Z({type:"focus"})},[]),$e=X.useCallback(function(){Z({type:"blur"})},[]),je=X.useCallback(function(){T||(Yre()?setTimeout(ve,0):ve())},[T,ve]),Ze=function(Te){return r?null:Te},le=function(Te){return k?null:Ze(Te)},ge=function(Te){return N?null:Ze(Te)},fe=function(Te){D&&Te.stopPropagation()},Q=X.useMemo(function(){return function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Te=he.refKey,Oe=Te===void 0?"ref":Te,Qe=he.role,Ye=he.onKeyDown,at=he.onFocus,Ft=he.onBlur,et=he.onClick,gt=he.onDragEnter,kt=he.onDragOver,Bt=he.onDragLeave,dt=he.onDrop,Ee=dE(he,iie);return Jr(Jr(uP({onKeyDown:le(_c(Ye,_e)),onFocus:le(_c(at,se)),onBlur:le(_c(Ft,$e)),onClick:Ze(_c(et,je)),onDragEnter:ge(_c(gt,be)),onDragOver:ge(_c(kt,we)),onDragLeave:ge(_c(Bt,Ce)),onDrop:ge(_c(dt,Fe)),role:typeof Qe=="string"&&Qe!==""?Qe:"presentation"},Oe,B),!r&&!k?{tabIndex:0}:{}),Ee)}},[B,_e,se,$e,je,be,we,Ce,Fe,k,N,r]),G=X.useCallback(function(he){he.stopPropagation()},[]),me=X.useMemo(function(){return function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Te=he.refKey,Oe=Te===void 0?"ref":Te,Qe=he.onChange,Ye=he.onClick,at=dE(he,sie),Ft=uP({accept:A,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ze(_c(Qe,Fe)),onClick:Ze(_c(Ye,G)),tabIndex:-1},Oe,$);return Jr(Jr({},Ft),at)}},[$,n,a,Fe,r]);return Jr(Jr({},W),{},{isFocused:J&&!r,getRootProps:Q,getInputProps:me,rootRef:B,inputRef:$,open:Ze(ve)})}function pie(t,e){switch(e.type){case"focus":return Jr(Jr({},t),{},{isFocused:!0});case"blur":return Jr(Jr({},t),{},{isFocused:!1});case"openDialog":return Jr(Jr({},dP),{},{isFileDialogActive:!0});case"closeDialog":return Jr(Jr({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Jr(Jr({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Jr(Jr({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Jr({},dP);default:return t}}function v3(){}const mie=Object.freeze(Object.defineProperty({__proto__:null,ErrorCode:qre,default:ZM,useDropzone:xW},Symbol.toStringTag,{value:"Module"})),gie=Sn({slot:{base:["flex","flex-col","gap-2","items-center","justify-center","w-full"],label:["flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100"],zone:["flex","flex-col","items-center","justify-center","pt-5","pb-6","text-slate-500"],content:[]},variant:{active:{true:[]},rejected:{true:[]}},match:[{if:{active:!0},then:{label:["text-blue-400"],zone:["text-blue-400"]}},{if:{rejected:!0},then:{label:["text-red-400"],zone:["text-red-400"]}}],defaults:{active:!1,rejected:!1}}),{useDropzone:yie}=mie,vie=({id:t,accept:e,textTile:n,textMessage:r,variant:i,tva:s=gie,css:o,children:a,onDropAccepted:l,...c})=>{const[u,f]=X.useState([]),{getRootProps:p,getInputProps:g,isDragActive:x,isDragReject:S}=yie({noClick:!0,multiple:!1,accept:e,maxFiles:1,minSize:0,maxSize:8*1024**2,onDropAccepted(b,E){f(b),l?.(b,E)},onError(b){console.error(b)},...c}),_=s({active:x,rejected:S,...i,css:o}).slots;return v.jsxs("div",{...p(),className:_.base(),children:[v.jsxs("label",{htmlFor:t,className:_.label(),children:[v.jsxs("div",{className:_.zone(),children:[v.jsx(pn,{icon:dre,variant:{size:"4xl"}}),v.jsx("div",{className:"mb-2 text-sm font-semibold",children:n||na.rich("Drag 'n' drop a file here")}),r?v.jsx("div",{className:"text-xs",children:r}):null]}),v.jsx("input",{id:t,type:"file",className:"hidden",...g()})]}),a&&u&&u.length>0?v.jsx("div",{className:_.content(),children:v.jsx(a,{files:u,clear:()=>{f([])},remove:b=>{f(u.filter(E=>E!==b))}})}):null]})},xie=Sn({slot:{base:["min-h-screen","flex","flex-col"],header:["flex","flex-row","items-center","bg-slate-50","shadow-xs","border-b","border-b-slate-200","w-full","gap-4","p-4"],content:["grow","h-full","border-b","border-b-slate-200","p-2"]},variant:{},defaults:{}}),bW=({logo:t,menu:e,actions:n,variant:r,tva:i=xie,css:s,children:o})=>{const a=i({...r,css:s}).slots;return v.jsxs("div",{className:a.base(),children:[v.jsx(_4,{position:"top-right"}),v.jsxs("div",{className:a.header(),children:[v.jsx("div",{children:t}),v.jsx("div",{className:"grow",children:e}),v.jsx("div",{className:"flex flex-row gap-2 items-center",children:n})]}),v.jsx("div",{className:a.content(),children:o??v.jsx(ll,{})})]})},bie=Sn({slot:{base:["flex","flex-row","gap-2","items-center","justify-between","text-blue-500","rounded-sm","px-1","py-0.5","hover:text-blue-700","focus:outline-hidden","w-fit"]},variant:{},defaults:{}}),wie=X.forwardRef(({icon:t,iconProps:e,variant:n,tva:r=bie,css:i,children:s,...o},a)=>{const l=r({...n,css:i}).slots;return v.jsxs("a",{...o,ref:a,className:l.base(),children:[Mb(t)?v.jsx(pn,{icon:t,...e}):t,s]})}),_ie=g4(wie),Et=t=>v.jsx(_ie,{preload:"intent",...t}),Sie=Sn({slot:{base:["fixed","inset-0","h-full","items-center","justify-center","bg-slate-100","flex","transition-all","duration-200","z-10","pointer-events-none","bg-opacity-0","backdrop-blur-none"]},variant:{show:{true:["bg-opacity-50","backdrop-blur-xs","pointer-events-auto"]}},defaults:{show:!0}}),Eie=({show:t=!0,variant:e,tva:n=Sie,css:r})=>{const i=n({show:t,...e,css:r}).slots;return t?v.jsx("div",{className:i.base(),children:v.jsx(pn,{icon:"icon-[svg-spinners--pulse-rings-multiple]",variant:{size:"8xl"},css:{base:["text-sky-400"]}})}):null};var GS={exports:{}},Mie=GS.exports,x3;function Tie(){return x3||(x3=1,function(t,e){(function(n,r){t.exports=r()})(Mie,()=>(()=>{var n={d:(x,S)=>{for(var _ in S)n.o(S,_)&&!n.o(x,_)&&Object.defineProperty(x,_,{enumerable:!0,get:S[_]})},o:(x,S)=>Object.prototype.hasOwnProperty.call(x,S)},r={};n.d(r,{default:()=>g});const i=(...x)=>{},s=x=>x!==null&&x?.constructor.name==="Object";let o,a;const l=()=>{if(!o){o=!0;try{a=f.storage||localStorage,a.getItem("")}catch{a=(()=>{const x={getItem:_=>S[_]||null,setItem:(_,b)=>{S[_]=b},removeItem:_=>{S[_]=void 0},clear:()=>{S={__proto__:x}}};let S={__proto__:x};return S})()}p()}},c="\0",u=(x,S,_=!0)=>_?[...JSON.stringify(x)].map(b=>String.fromCharCode(b.charCodeAt(0)+S)).join(""):JSON.parse([...x].map(b=>String.fromCharCode(b.charCodeAt(0)-S)).join("")),f={ttl:null,encrypt:!1,encrypter:u,decrypter:(x,S)=>u(x,S,!1),secret:75,storage:void 0};Object.seal(f);const p=(x=!1)=>{l();for(const S of Object.keys(a)){const _=a.getItem(S);let b;try{b=JSON.parse(_||"")}catch{continue}s(b)&&c in b&&(Date.now()>b.ttl||x)&&a.removeItem(S)}},g={config:f,set:(x,S,_={})=>{l();const b={...f,..._,encrypt:_.encrypt!==!1&&(_.encrypt||f.encrypt),ttl:_.ttl===null?null:_.ttl||f.ttl};try{const E=b.ttl&&!isNaN(b.ttl)&&b.ttl>0;let M=E?{[c]:S,ttl:Date.now()+1e3*b.ttl}:S;b.encrypt&&(E?M[c]=(b.encrypter||i)(M[c],b.secret):M=(b.encrypter||i)(M,b.secret)),a.setItem(x,JSON.stringify(M))}catch{return!1}},get:(x,S={})=>{l();const _=a.getItem(x),b={...f,...S,encrypt:S.encrypt!==!1&&(S.encrypt||f.encrypt),ttl:S.ttl===null?null:S.ttl||f.ttl};let E,M;try{E=JSON.parse(_||""),M=s(E)&&c in E,(b.decrypt||b.encrypt)&&(M?E[c]=(b.decrypter||i)(E[c],b.secret):E=(b.decrypter||i)(E,b.secret))}catch{}return M?Date.now()>E.ttl?(a.removeItem(x),null):E[c]:E!==void 0?E:_},flush:p,clear:()=>{l(),a.clear()},remove:x=>{l(),a.removeItem(x)}};return r.default})())}(GS)),GS.exports}var Cie=Tie();const Iie=Co(Cie),ev=Iie,Rie=Sn({slot:{base:["flex","flex-row","gap-2","items-center"]},variant:{},defaults:{}}),sm=X.memo(({variant:t,tva:e=Rie,css:n,children:r})=>{const i=e({...t,css:n}).slots;return v.jsx("div",{className:i.base(),children:r})}),wW=Sn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-1","border","border-b-2","border-transparent","hover:text-slate-500"]},variant:{active:{true:[]},inner:{true:[]},subtle:{true:[]}},match:[{if:{active:!0,inner:!1},then:{base:["border","border-b-2","border-blue-400","bg-blue-50","hover:border-blue-500","text-slate-800","hover:text-blue-800"]}},{if:{active:!0,inner:!0},then:{base:["border-none","text-blue-600","hover:text-blue-800"]}},{if:{subtle:!0},then:{base:["hover:bg-slate-50","hover:border-slate-300","hover:text-slate-600"]}},{if:{active:!0,subtle:!0},then:{base:["bg-slate-100","border-slate-400"]}}],defaults:{active:!1,inner:!1,subtle:!1}}),Aie=X.forwardRef(({icon:t=null,variant:e,tva:n=wW,css:r,children:i,...s},o)=>{const a=n({...e,css:r}).slots;return v.jsxs("a",{...s,className:a.base(),ref:o,children:[Mb(t)?v.jsx(pn,{icon:t}):t,i]})}),Nie=g4(Aie),Er=({match:t=[],variant:e,tva:n=wW,css:r,...i})=>{const s=s7(),o=t.some(a=>!!s(a));return v.jsx(Nie,{preload:"intent",variant:{active:!!s({to:i.to,params:i.params})||o,...e},tva:n,css:r,...i})},Pie=Sn({slot:{base:["flex","flex-row","flex-wrap","items-center","gap-2","text-sm","font-semibold"],item:["border","border-blue-200","bg-blue-50","rounded-md","px-2","py-1"]},variant:{},defaults:{}}),Vf=({textTitle:t,textEmpty:e,items:n,render:r,limit:i,variant:s,tva:o=Pie,css:a})=>{const l=i?n.slice(0,i):n,c=o({...s,css:a}).slots;return v.jsxs("div",{className:c.base(),children:[n.length?null:e,l.map(u=>v.jsx(r,{entity:u},`items-${u.id}`)),i&&n.length>i&&v.jsx(rm,{textTitle:t,target:v.jsx(jb,{iconEnabled:H5}),outside:!0,children:v.jsx("div",{className:"flex flex-col gap-2",children:n.map(u=>v.jsx(r,{entity:u},`items-${u.id}`))})})]})},_W=Sn({slot:{base:["flex","flex-col","gap-2"],input:["py-2","px-2","flex","flex-row","gap-2","items-center","cursor-pointer","hover:bg-slate-50","border","border-gray-300","rounded-md","text-slate-400","hover:text-slate-700","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],content:[],footer:["flex","items-center","justify-between","gap-2","border-t-2","border-slate-100","mt-4","pt-2"]},variant:{loading:{true:[]},selected:{true:[]}},match:[{if:{loading:!0},then:{input:["text-slate-300"]}},{if:{selected:!0},then:{input:["bg-slate-50","text-slate-700","hover:bg-slate-100","hover:text-slate-800"]}}],defaults:{loading:!1,selected:!1}}),kie=Sn({use:_W,slot:{},variant:{},defaults:{}}),SW=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:a,queryHash:l,query:c,value:u,onChange:f,onSelect:p,variant:g,tva:x=kie,css:S})=>{const _=x({...g,css:S}).slots,[b,E]=X.useState(0),[M,T]=X.useState(15),[k,N]=X.useState(u||[]),[D,L]=X.useState(""),R=y0({queryKey:[a,"PopupMultiSelect","data",{fulltext:D,page:b,size:M,...l}],async queryFn(){return c({filter:{fulltext:D},cursor:{page:b,size:M}})}}),A=(u?.length||0)>0,P=y0({queryKey:[a,"PopupMultiSelect","selected",{value:u,...l}],async queryFn(){return c({filter:{idIn:u}})},enabled:A});return X.useEffect(()=>{N(u||[])},[u]),v.jsx(rm,{icon:t,target:v.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data.length}),children:[v.jsx(pn,{icon:P.isLoading?J2:A&&P.data?.data?.[0]?KM:XM}),A&&P.data&&P.data.data.length?v.jsx(s,{entities:P.data.data}):n||v.jsx(ne,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:R.isLoading},disabled:R.isLoading,css:{modal:["w-2/3"]},...r,children:v.jsxs("div",{className:_.base(),children:[v.jsx("div",{className:_.content(),children:v.jsx(i,{cursor:{cursor:{page:b,size:M},count:R.data?.count?R.data.count:{filter:-1,total:-1,where:-1},textTotal:v.jsx(ne,{label:"Total count of items (label)"}),onPage(j){E(j)},onSize(j){T(j),E(0)}},fulltext:{value:D,set(j){L(j),E(0)}},table:{data:R.data?.data??[],selection:{type:"multi",value:k,set(j){N(j)}}}})}),v.jsx(HM.Consumer,{children:j=>v.jsxs("div",{className:_.footer(),children:[v.jsx(Pn,{iconEnabled:Na,iconDisabled:Na,onClick:()=>{j?.close(),N(u||[])},variant:{variant:"subtle"},children:v.jsx(ne,{label:"Close (label)"})}),v.jsx(Pn,{iconEnabled:lE,iconDisabled:lE,disabled:!k.length&&!o,onClick:()=>{f(k),p?.(R.data?.data?.filter(U=>k.includes(U.id))||[]),j?.close()},children:v.jsx(ne,{label:"Confirm selection (label)"})})]})})]})})},EW=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:a,queryHash:l,query:c,value:u,onChange:f,onSelect:p,variant:g,tva:x=_W,css:S})=>{const _=x({...g,css:S}).slots,[b,E]=X.useState(0),[M,T]=X.useState(15),[k,N]=X.useState(u?[u]:[]),[D,L]=X.useState(""),R=y0({queryKey:[a,"PopupSelect","data",{fulltext:D,page:b,size:M,...l}],async queryFn(){return c({filter:{fulltext:D},cursor:{page:b,size:M}})}}),A=!!u,P=y0({queryKey:[a,"PopupSelect","selected",{value:u,...l}],async queryFn(){return c({filter:{id:u??void 0}})},enabled:A});return X.useEffect(()=>{N(u?[u]:[])},[u]),v.jsx(rm,{icon:t,target:v.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data.length}),children:[v.jsx(pn,{icon:P.isLoading?J2:A&&P.data?.data?.[0]?KM:XM}),A&&P.data?.data?.[0]?v.jsx(s,{entity:P.data?.data?.[0]}):n||v.jsx(ne,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:R.isLoading},disabled:R.isLoading,css:{modal:["w-2/3"]},...r,children:v.jsxs("div",{className:_.base(),children:[v.jsx("div",{className:_.content(),children:v.jsx(i,{cursor:{cursor:{page:b,size:M},count:R.data?.count?R.data.count:{filter:-1,total:-1,where:-1},textTotal:v.jsx(ne,{label:"Total count of items (label)"}),onPage(j){E(j)},onSize(j){T(j),E(0)}},fulltext:{value:D,set(j){L(j),E(0)}},table:{data:R.data?.data??[],selection:{type:"single",value:k,set(j){N(j)}}}})}),v.jsx(HM.Consumer,{children:j=>v.jsxs("div",{className:_.footer(),children:[v.jsx(Pn,{iconEnabled:Na,iconDisabled:Na,onClick:()=>{j?.close(),N(u?[u]:[])},variant:{variant:"subtle"},children:v.jsx(ne,{label:"Close (label)"})}),v.jsx(Pn,{iconEnabled:lE,iconDisabled:lE,disabled:!k.length&&!o,onClick:()=>{f(k?.[0]||null),p?.(R.data?.data?.find(U=>U.id===k?.[0])??null),j?.close()},children:v.jsx(ne,{label:"Confirm selection (label)"})})]})})]})})},Oie=Sn({slot:{base:["bg-blue-50","p-2","rounded-md","border","border-blue-200"],container:["grid","grid-cols-2","grid-rows-2","gap-1"],title:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2"],links:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2","flex","flex-row","items-center","gap-4","justify-end"],actions:["col-span-1","row-span-1","flex","flex-row","items-center","gap-4"],extra:["col-span-1","row-span-1","flex","flex-row","gap-4","justify-end"]},variant:{},defaults:{}}),tv=({entity:t,title:e=()=>null,links:n=()=>null,actions:r=()=>null,extra:i=()=>null,variant:s,tva:o=Oie,css:a})=>{const l=o({...s,css:a}).slots;return v.jsx(Y2.Provider,{value:{inline:!0},children:v.jsx("div",{className:l.base(),children:v.jsxs("div",{className:l.container(),children:[v.jsx("div",{className:l.title(),children:v.jsx(e,{entity:t})}),v.jsx("div",{className:l.links(),children:v.jsx(n,{entity:t})}),v.jsx("div",{className:l.actions(),children:v.jsx(r,{entity:t})}),v.jsx("div",{className:l.extra(),children:v.jsx(i,{entity:t})})]})})})},Lie=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,page:e}})})},Die=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,size:e,page:0}})})},li=t=>({onPage:Lie(t),onSize:Die(t)}),ci=t=>e=>t({search:({cursor:n,...r})=>({...r,filter:e,cursor:{...n,page:0}})}),ui=(t,e)=>n=>{(n??"")!==(t??"")&&e({search:({cursor:r,filter:i,...s})=>({...s,filter:{...i,fulltext:n},cursor:{...r,page:n?0:r.page}}),replace:!1})},ia=t=>e=>{t({search(n){return{...n,selection:e}}})},Is=t=>({loading:v.jsx(ne,{label:`${t} - Loading (label)`}),success:v.jsx(ne,{label:`${t} - Success (label)`}),error:v.jsx(ne,{label:`${t} - Error (label)`})}),Fie=Sn({slot:{base:["flex","flex-col","gap-4"],content:["text-bold","text-red-500","font-bold"],footer:["flex","flex-row","items-center","justify-between","gap-4"]},variant:{},defaults:{}}),sa=({textContent:t,textToast:e,callback:n,onCancel:r,invalidator:i,variant:s,tva:o=Fie,css:a})=>{const l=o({...s,css:a}).slots,c=X.useContext(HM),u=rn({async mutationFn(){return nX.promise(n(),Is(e))},async onSuccess(){await i?.(),c?.close()}});return v.jsxs("div",{className:l.base(),children:[v.jsx("div",{className:l.content(),children:t}),v.jsxs("div",{className:l.footer(),children:[v.jsx(Pn,{variant:{variant:"subtle",size:"sm"},iconEnabled:Na,onClick:()=>{c?.close(),r?.()},children:v.jsx(ne,{label:"Cancel (button)"})}),v.jsx(Pn,{variant:{variant:"danger",size:"md"},iconEnabled:Ti,onClick:()=>{u.mutate()},children:v.jsx(ne,{label:"Delete (button)"})})]})]})},Bie=async({select:t,query:e=()=>t,filter:n,where:r})=>({total:(await t.clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,filter:(await e({select:e({select:t,where:r}),where:n}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,where:(await e({select:t,where:r}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count}),nc=async({select:t,query:e=()=>t,output:n,filter:r,where:i})=>n.parse(await e({select:e({select:t,where:i}),where:r}).executeTakeFirstOrThrow()),Rs=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>{const o=a=>{let l=a;return s&&(l=a.limit(s.size).offset(s.page*s.size)),l};return H.array(n).parse(await o(e({select:e({select:t,where:i}),where:r})).execute())},kr=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>({data:await Rs({select:t,output:n,where:i,filter:r,query:e,cursor:s}),count:await Bie({select:t,where:i,filter:r,query:e})}),Gr=t=>{const e="input"in t?t.input:"input",n="output"in t?t.output:"output",r="schema"in t?t.schema._input:t._input,i="schema"in t?t.schema._output:t._output;return{types:{input:e==="output"?i:r,output:n==="input"?r:i},parse:s=>"schema"in t?t.schema.parse(s):t.parse(s)}},E_=(t,e)=>H.custom().pipe(t.catch(e)),di=({filter:t},{size:e=30}={size:30})=>H.object({filter:E_(t.default({fulltext:""}),{fulltext:""}),cursor:E_(iee,{page:0,size:e}).default({page:0,size:e}),sort:E_(H.array(H.any()).default([]),[]),selection:E_(H.array(H.string()).default([]),[])}),jie=Sn({slot:{base:["w-full","flex","flex-col","items-center","justify-center"],title:["text-xl","text-bold"],message:["text-base","text-slate-500"],body:["pt-2"]},variant:{},defaults:{}}),MW=({textTitle:t,textMessage:e,icon:n,iconProps:r,variant:i,tva:s=jie,css:o,children:a})=>{const l=s({...i,css:o}).slots;return v.jsxs("div",{className:l.base(),children:[n?v.jsx(pn,{icon:n,variant:{size:"6xl"},css:{base:["text-slate-500","opacity-50"]},...r}):null,v.jsx("div",{className:l.title(),children:t}),v.jsx("div",{className:l.message(),children:e}),v.jsx("div",{className:l.body(),children:a})]})},tk=Sn({slot:{base:["min-w-full","flex","flex-col","gap-2","text-sm"],table:["min-w-full","w-max","table-fixed"],thead:["border","border-slate-200","bg-slate-100"],th:["text-left","px-2","py-1","border-t","border-b","border-slate-300"],tbody:[],tr:["border-b","border-b-slate-200","odd:bg-slate-50","hover:bg-purple-100","hover:border-purple-300"],td:["px-2","py-1"],tfoot:[],select:["cursor-pointer","text-slate-400","hover:text-slate-600"]},variant:{selected:{true:[]}},match:[{if:{selected:!0},then:{tr:["bg-blue-100","odd:bg-blue-50","border-blue-300"],select:["text-slate-600"]}}],defaults:{selected:!1}}),Uie=({table:t,cell:{column:e,data:n,value:r},variant:i,tva:s=tk,css:o})=>{const a=e.def.render,l=s({...i,css:o}).slots;return v.jsx("td",{className:l.td(),children:v.jsxs("div",{className:"group flex flex-row items-center gap-2 justify-between",children:[v.jsx(a,{table:t,data:n,value:r,context:t.context}),e.filter&&!e.filter.is()?v.jsx(pn,{icon:cre,css:{base:["group-hover:visible","invisible","opacity-50 hover:opacity-100","cursor-pointer"]},variant:{size:"xl"},onClick:()=>{e.filter&&(e.def.filter?.onFilter({data:n,filter:e.filter}),window.scrollTo({top:0,behavior:"smooth"}))}}):null]})})},zie=({table:t,row:e,action:n,variant:r,tva:i=tk,css:s})=>{const o=i({...r,css:s}).slots,a=n?.table,l=n?.row;return v.jsxs("tr",{className:o.tr({selected:t.selection.isSelected(e)}),children:[a||l||t.selection.enabled?v.jsx("td",{className:"w-0",children:v.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?v.jsx(pn,{icon:t.selection.isSelected(e)?KM:XM,css:{base:o.select({selected:t.selection.isSelected(e)})},variant:{size:"2xl"},onClick:t.selection.withRowHandler(e)}):null,l?v.jsx(l,{table:t,data:e.data}):null]})}):null,e.cells.map(c=>v.jsx(Uie,{table:t,cell:c,variant:r,tva:i,css:s},`${e.id}-${c.column.id}`)),v.jsx("td",{})]})},fi=({table:t,fulltext:e,cursor:n,empty:r=()=>v.jsx(MW,{icon:lre,textTitle:v.jsx(ne,{label:"Nothing here"}),textMessage:v.jsx(ne,{label:"There is nothing to see right now."})}),action:i,variant:s,tva:o=tk,css:a})=>{const l=o({...s,css:a}).slots,c=i?.table,u=i?.row;return v.jsxs("div",{className:l.base(),children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("div",{className:"flex items-center gap-6 w-1/3",children:e?v.jsx(tW,{value:e.value,onFulltext:e.set}):null}),v.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[v.jsx(GF,{...n}),t.filter.is()&&v.jsx(jb,{iconEnabled:t3,css:{base:["text-amber-500"]},onClick:()=>t.filter.reset()})]})]}),v.jsx("div",{className:"relative overflow-x-auto",children:v.jsxs("table",{className:l.table(),children:[v.jsx("thead",{className:l.thead(),children:v.jsxs("tr",{children:[c||u||t.selection.enabled?v.jsx("th",{className:"w-0",children:v.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?v.jsx(pn,{icon:t.selection.isAll()?KM:t.selection.isAny()?ure:XM,variant:{disabled:t.selection.isSingle,size:"2xl"},css:{base:l.select({selected:t.selection.isAny()})},onClick:t.selection.withAllHandler()}):null,c?v.jsx(c,{table:t}):null]})}):null,t.visible.map(f=>{const p=f.def.header||(()=>null);return v.jsx("th",{className:l.th(),style:f.def.size?{width:`${f.def.size}rem`}:void 0,children:v.jsxs("div",{className:"flex flex-row items-center justify-between",children:[v.jsx(p,{table:t}),v.jsx("div",{className:"flex flex-row items-center gap-2",children:f.filter?.is()&&v.jsx(pn,{icon:t3,variant:{size:"md"},css:{base:["opacity-50","hover:opacity-100","cursor-pointer"]},onClick:()=>{f.filter?.reset()}})})]})},f.id)}),v.jsx("th",{})]})}),t.isEmpty?null:v.jsx("tbody",{className:l.tbody(),children:t.rows?.map(f=>v.jsx(zie,{row:f,table:t,action:i,variant:s,tva:o,css:a},f.id))})]})}),t.isEmpty?v.jsx(r,{}):null,v.jsxs("div",{className:"flex flex-row items-center justify-end gap-2",children:[v.jsx("div",{}),v.jsx(GF,{...n})]})]})},hi=({columns:t,order:e=t.map(l=>l.name),hidden:n=[],visible:r=t.map(l=>l.name),data:i,filter:s,selection:o,context:a})=>{const l={...s?.value||{}},c=vF(l||{}),u=new Set(o?.value),f=t.map(g=>({id:r3(),def:g,filter:g.filter?{is(){return g.filter?c.get(g.filter.path)!==void 0:!1},reset(){g.filter&&c.set(g.filter.path,void 0),s?.set({...l})},shallow(x,S){g.filter&&c.set(x,S),s?.set({...l})},set(x){s?.set({...x})}}:void 0})),p=f.filter(g=>r.includes(g.def.name)&&!n.includes(g.def.name)).sort((g,x)=>{const S=e.indexOf(g.def.name),_=e.indexOf(x.def.name);return(S===-1?1/0:S)-(_===-1?1/0:_)});return{columns:f,visible:p,rows:i?.map(g=>({id:r3(),data:g,cells:p.map(x=>({column:x,data:g,value:vF(g).get(x.def.name)}))})),isEmpty:i.length===0,filter:{is(){return f.some(g=>g.filter?.is())},reset(){s?.set({})},set(g){s?.set({...g})},shallow(g,x){c.set(g,x)}},selection:{enabled:!!o&&i.length>0,selection:Array.from(u),isSingle:o?.type==="single",isMulti:o?.type==="multi",isSelected({data:g}){return u.has(g.id)||!1},isAll(){return i.every(g=>u.has(g.id))},isAny(){return i.some(g=>u.has(g.id))},withRowHandler({data:g}){return()=>{if(o?.type==="single"){const x=u.has(g.id);u.clear(),x?u.delete(g.id):u.add(g.id)}else u.has(g.id)?u.delete(g.id):u.add(g.id);o?.set(Array.from(u))}},withAllHandler(){return()=>{i.every(g=>u.has(g.id))?u.clear():i.forEach(({id:g})=>u.add(g)),o?.set(Array.from(u))}}},context:a}},pi=()=>t=>t,TW=({tags:t=[],render:e=({tag:i})=>i.label,onClick:n,textEmpty:r})=>{const i=t.filter(Boolean).sort((s,o)=>s.sort-o.sort);return v.jsx("div",{className:"flex flex-wrap flex-row gap-2 items-center",children:i.length?i.map(s=>v.jsx($s,{onClick:()=>n?.(s),children:v.jsx(e,{tag:s})},s.id)):r||v.jsx(ne,{label:"No tags (label)"})})},Vie=Sn({slot:{base:["flex","flex-row","gap-2","items-center"],title:["flex","flex-row","gap-2","items-center","text-lg","text-slate-500","font-bold"],subtitle:["flex","flex-row","gap-4","items-center","text-lg"]},variant:{withSubtitle:{true:[]}},match:[{if:{withSubtitle:!0},then:{title:["border-r","border-r-slate-300","pr-2"]}}],defaults:{withSubtitle:!1}}),nv=({icon:t,title:e,subtitle:n,variant:r,tva:i=Vie,css:s})=>{const o=i({withSubtitle:!!n,...r,css:s}).slots;return v.jsxs("div",{className:o.base(),children:[v.jsxs("div",{className:o.title(),children:[t?v.jsx(pn,{icon:t}):null,e]}),n?v.jsx("div",{className:o.subtitle(),children:n}):null]})};var M_={},b3;function Wie(){if(b3)return M_;b3=1;var t=m4();return M_.createRoot=t.createRoot,M_.hydrateRoot=t.hydrateRoot,M_}var qie=Wie();const Hie=Co(qie),nk=L9()({}),$ie=Pt("/$locale")({component:ll,loader:async({params:{locale:t}})=>{try{na.push((await Gie(`../translation/${t}.yaml`)).default)}catch(e){console.error(e)}}});function Gie(t){switch(t){case"../translation/cs":case"../translation/cs.yaml":return sE(()=>import("./cs-BUpUyNKP.js"),[]);case"../translation/en":case"../translation/en.yaml":return sE(()=>import("./en-CvMFGEQe.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const CW="cs",Xie=[CW,"en"],Kie=Pt("/")({loader:async()=>{throw wb({to:"/$locale",params:{locale:iZ({available:Xie,fallback:CW})}})}}),Yie=Pt("/$locale/")({component:()=>{const{locale:t}=Jt({from:"/$locale"});return v.jsx("div",{className:"flex flex-col items-center justify-center h-screen w-screen",children:v.jsxs("div",{className:"rounded-sm bg-slate-50 p-4 shadow-md border border-slate-300",children:[v.jsx("h1",{className:"text-3xl text-center",children:"Apps"}),v.jsx("ul",{children:v.jsx("li",{children:v.jsx(Et,{icon:"icon-[bx--game]",to:"/$locale/apps/derivean/public/login",params:{locale:t},children:"DeRivean"})})})]})})}}),{kysely:Mt,bootstrap:Zie}=nre({database:"derivean",async bootstrap({kysely:t}){const e="varchar(36)";try{await t.selectFrom("User").select(n=>n.fn.countAll().as("count")).executeTakeFirstOrThrow()}catch{await t.schema.createTable("User").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("login","varchar(128)",r=>r.notNull()).addColumn("password","varchar(256)",r=>r.notNull()).addUniqueConstraint("[User] login",["login"]).execute(),await t.schema.createTable("Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("code","varchar(64)",r=>r.notNull()).addColumn("label","varchar(128)",r=>r.notNull()).addColumn("group","varchar(64)").addColumn("sort","integer",r=>r.notNull().defaultTo(0)).addUniqueConstraint("Tag_code_group",["code","group"]).execute(),await t.schema.createTable("Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("weight","integer",r=>r.notNull().defaultTo(1)).addColumn("image","text").addUniqueConstraint("[Resource] name",["name"]).execute(),await t.schema.createTable("Resource_Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("tagId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] tagId",["tagId"],"Tag",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Resource_Tag] resourceId-tagId",["resourceId","tagId"]).execute();for await(const r of["resourceId","tagId"])await t.schema.createIndex(`[Resource_Tag] ${r}`).on("Resource_Tag").columns([r]).execute();await t.schema.createTable("Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("limit","float4",r=>r.notNull()).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).execute(),await t.schema.createIndex("[Inventory] resourceId").on("Inventory").columns(["resourceId"]).execute(),await t.schema.createTable("Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(128)",r=>r.notNull()).addColumn("probability","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull()).addColumn("image","text").execute(),await t.schema.createTable("Region_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("minAmount","float4",r=>r.notNull()).addColumn("maxAmount","float4",r=>r.notNull()).addColumn("minLimit","float4",r=>r.notNull()).addColumn("maxLimit","float4",r=>r.notNull()).addUniqueConstraint("[Region_Inventory] regionId-resourceId",["regionId","resourceId"]).execute();for await(const r of["regionId","resourceId"])await t.schema.createIndex(`[Region_Inventory] ${r}`).on("Region_Inventory").columns([r]).execute();await t.schema.createTable("Map").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Map] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("name","varchar(128)",r=>r.notNull()).addUniqueConstraint("[Map] userId-name",["userId","name"]).execute(),await t.schema.createIndex("[Map] userId").on("Map").columns(["userId"]).execute(),await t.schema.createTable("Cycle").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("stamp","datetime",r=>r.defaultTo(si`CURRENT_TIMESTAMP`).notNull()).execute();for await(const r of["userId","mapId"])await t.schema.createIndex(`[Cycle] ${r}`).on("Cycle").columns([r]).execute();await t.schema.createTable("Land").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("position","integer",r=>r.notNull()).execute();for await(const r of["mapId","regionId"])await t.schema.createIndex(`[Land] ${r}`).on("Land").columns([r]).execute();await t.schema.createTable("Land_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Land_Inventory] landId-inventoryId",["landId","inventoryId"]).execute();for await(const r of["landId","inventoryId"])await t.schema.createIndex(`[Land_Inventory] ${r}`).on("Land_Inventory").columns([r]).execute();await t.schema.createTable("Blueprint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).addColumn("sort","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull().defaultTo(1)).addColumn("image","text").addUniqueConstraint("[Blueprint] name",["name"]).execute(),await t.schema.createTable("Blueprint_Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Region] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Region] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Region] blueprintId-regionId",["blueprintId","regionId"]).execute(),await t.schema.createTable("Blueprint_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Inventory] blueprintId-inventoryId",["blueprintId","inventoryId"]).execute(),await t.schema.createTable("Blueprint_Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).execute(),await t.schema.createTable("Blueprint_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Requirement] blueprintId-requirementId",["blueprintId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("dependencyId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] dependencyId",["dependencyId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Dependency] blueprintId-dependencyId",["blueprintId","dependencyId"]).execute(),await t.schema.createTable("Blueprint_Conflict").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("conflictId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] conflictId",["conflictId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Conflict] blueprintId-conflictId",["blueprintId","conflictId"]).execute(),await t.schema.createTable("Blueprint_Production_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Requirement] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Production_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-blueprintId",["blueprintProductionId","blueprintId"]).execute(),await t.schema.createTable("Blueprint_Production_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Construction").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Construction] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("plan","boolean",r=>r.notNull().defaultTo(!0)).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Plot").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Plot] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Plot] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Plot] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("position","integer",r=>r.notNull()).execute(),await t.schema.createTable("Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("plotId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] plotId",["plotId"],"Plot",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("constructionId",e).addForeignKeyConstraint("[Building] constructionId",["constructionId"],"Construction",["id"],r=>r.onDelete("set null").onUpdate("set null")).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("productionId",e).addForeignKeyConstraint("[Building] productionId",["productionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("recurringProductionId",e).addForeignKeyConstraint("[Building] recurringProductionId",["recurringProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("valid","boolean",r=>r.notNull().defaultTo(!0)).execute();for await(const r of["userId","blueprintId","constructionId","landId","productionId","recurringProductionId"])await t.schema.createIndex(`[Building] ${r}`).on("Building").columns([r]).execute();await t.schema.createTable("Building_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Inventory] buildingId-inventoryId",["buildingId","inventoryId"]).execute(),await t.schema.createTable("Building_To_Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_To_Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_To_Building] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_To_Building] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("linkId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_To_Building] linkId",["linkId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_To_Building] buildingId-linkId",["buildingId","linkId"]).execute();for await(const r of["userId","mapId","buildingId","linkId"])await t.schema.createIndex(`[Building_To_Building] ${r}`).on("Building_To_Building").columns([r]).execute();await t.schema.createTable("Road").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("plotId",e,r=>r.notNull()).addForeignKeyConstraint("[Road] plotId",["plotId"],"Plot",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).execute(),await t.schema.createTable("Supply").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Supply] buildingId-resourceId",["buildingId","resourceId"]).execute(),await t.schema.createTable("Demand").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Demand] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Demand] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("priority","integer",r=>r.notNull().defaultTo(0)).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).addUniqueConstraint("[Demand] buildingId-resourceId",["buildingId","resourceId"]).execute(),await t.schema.createTable("Transport").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("roadId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] roadId",["roadId"],"Road",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("sourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] sourceId",["sourceId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("targetId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] targetId",["targetId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).execute();for await(const r of["userId","mapId","resourceId","roadId","sourceId","targetId"])await t.schema.createIndex(`[Transport] ${r}`).on("Transport").columns([r]).execute()}}}),Jie=Pt("/$locale/apps/derivean")({async loader({context:{queryClient:t,kysely:e}}){return await Zie(),{image:await t.ensureQueryData({queryKey:["GameMap","image"],async queryFn(){return e.transaction().execute(async n=>Rs({select:n.selectFrom("Blueprint as b").select(["b.id","b.image"]).where("b.image","is not",null).union(n.selectFrom("Region as r").select(["r.id","r.image"]).where("r.image","is not",null)).union(n.selectFrom("Resource as r").select(["r.id","r.image"]).where("r.image","is not",null)),output:H.object({id:H.string().min(1),image:H.string()})}))}})}}}),IW="icon-[proicons--game]",Qie=Sn({slot:{base:["text-orange-500","font-bold","text-2xl","shadow-md","hover:shadow-lg","hover:text-orange-600","rounded-sm","px-2","py-1","bg-slate-100"]},variant:{},defaults:{}}),RW=({variant:t,tva:e=Qie,css:n})=>{const r=e({...t,css:n}).slots;return v.jsx("div",{className:r.base(),children:"DeRivean"})},Pa="icon-[fluent--building-shop-20-regular]",fE="icon-[oui--vis-map-region]",$r="icon-[hugeicons--resources-add]",ese=t=>{const{locale:e}=Jt({from:"/$locale"});return v.jsxs(sm,{...t,children:[v.jsx(Er,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},children:v.jsx(ne,{label:"Editor (menu)"})}),v.jsx(Er,{icon:Pa,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/blueprint/$id/view"},{to:"/$locale/apps/derivean/root/blueprint/$id/dependencies"},{to:"/$locale/apps/derivean/root/blueprint/$id/production"},{to:"/$locale/apps/derivean/root/blueprint/$id/requirements"},{to:"/$locale/apps/derivean/root/blueprint/$id/edit"},{to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements"}],children:v.jsx(ne,{label:"Blueprint list (menu)"})}),v.jsx(Er,{icon:fE,to:"/$locale/apps/derivean/root/region/list",params:{locale:e},children:v.jsx(ne,{label:"Region list (menu)"})}),v.jsx(Er,{icon:$r,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:v.jsx(ne,{label:"Resource list (menu)"})}),v.jsx(Er,{icon:ek,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/user/$id/view"},{to:"/$locale/apps/derivean/root/user/$id/building/list"}],children:v.jsx(ne,{label:"User list (menu)"})}),v.jsx(Er,{icon:W0,to:"/$locale/apps/derivean/root/tag/list",params:{locale:e},children:v.jsx(ne,{label:"Tag list (menu)"})})]})},Ub=H.object({id:H.string(),name:H.string(),login:H.string()}),tse=Pt("/$locale/apps/derivean/root")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return Ub.parse(ev.get("session"))}catch{throw wb({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{session:t}}){return{session:await t()}},component:()=>{const{locale:t}=Jt({from:"/$locale"}),{session:e}=zi({from:"/$locale/apps/derivean/root"});return v.jsx(bW,{logo:v.jsx(Et,{to:"/$locale/apps/derivean/root",params:{locale:t},children:v.jsx(RW,{})}),menu:v.jsx(ese,{}),actions:v.jsxs(v.Fragment,{children:[e.name,v.jsx(Et,{icon:IW,to:"/$locale/apps/derivean/game",params:{locale:t}}),v.jsx(Et,{icon:Q2,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]})})}}),nse=Pt("/$locale/apps/derivean/map")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return Ub.parse(ev.get("session"))}catch{throw wb({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},component(){return v.jsxs(v.Fragment,{children:[v.jsx(_4,{position:"top-right"}),v.jsx(ll,{})]})}}),rse=Pt("/$locale/apps/derivean/game")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return Ub.parse(ev.get("session"))}catch{throw wb({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{session:r,cycle:await t.ensureQueryData({queryKey:["Cycle"],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{locale:t}=Jt({from:"/$locale"}),{session:e}=zi({from:"/$locale/apps/derivean/game"}),n=n9({filters:{status:"pending",mutationKey:["useCycleMutation"]},select(r){return r.state.status}});return v.jsx(bW,{logo:v.jsx(Et,{to:"/$locale/apps/derivean/game",params:{locale:t},children:v.jsx(RW,{})}),actions:v.jsxs(v.Fragment,{children:[e.name,v.jsx(Et,{icon:"icon-[clarity--crown-line]",to:"/$locale/apps/derivean/root",params:{locale:t}}),v.jsx(Et,{icon:Q2,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]}),css:{base:n.length?["select-none","pointer-events-none","opacity-50"]:void 0},children:v.jsx(ll,{})})}});var XS={exports:{}},ise=XS.exports,w3;function sse(){return w3||(w3=1,function(t,e){(function(n,r){r()})(ise,function(){function n(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,u,f){var p=new XMLHttpRequest;p.open("GET",c),p.responseType="blob",p.onload=function(){l(p.response,u,f)},p.onerror=function(){console.error("could not download file")},p.send()}function i(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof mp=="object"&&mp.global===mp?mp:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,u,f){var p=o.URL||o.webkitURL,g=document.createElement("a");u=u||c.name||"download",g.download=u,g.rel="noopener",typeof c=="string"?(g.href=c,g.origin===location.origin?s(g):i(g.href)?r(c,u,f):s(g,g.target="_blank")):(g.href=p.createObjectURL(c),setTimeout(function(){p.revokeObjectURL(g.href)},4e4),setTimeout(function(){s(g)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,f){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,f),u);else if(i(c))r(c,u,f);else{var p=document.createElement("a");p.href=c,p.target="_blank",setTimeout(function(){s(p)})}}:function(c,u,f,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof c=="string")return r(c,u,f);var g=c.type==="application/octet-stream",x=/constructor/i.test(o.HTMLElement)||o.safari,S=/CriOS\/[\d]+/.test(navigator.userAgent);if((S||g&&x||a)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var M=_.result;M=S?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=M:location=M,p=null},_.readAsDataURL(c)}else{var b=o.URL||o.webkitURL,E=b.createObjectURL(c);p?p.location=E:location.href=E,p=null,setTimeout(function(){b.revokeObjectURL(E)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})}(XS)),XS.exports}var ose=sse();const ase=Co(ose),rR=["Tag","Resource","Resource_Tag","Blueprint","Inventory","Region","Region_Inventory","Blueprint_Inventory","Blueprint_Region","Blueprint_Dependency","Blueprint_Conflict","Blueprint_Requirement","Blueprint_Production","Blueprint_Production_Requirement","Blueprint_Production_Dependency","Blueprint_Production_Resource"],lse=Pt("/$locale/apps/derivean/root/")({component(){const t=rn({mutationKey:["export"],async mutationFn(){return nr.promise((async()=>{const e=[];await Mt.transaction().execute(async n=>{for await(const r of rR)e.push({source:r,entities:await n.selectFrom(r).selectAll().execute()})}),ase.saveAs(new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"}),"export.json")})(),Is("Export game files"))}});return v.jsxs("div",{className:"flex flex-col gap-4 w-2/3 mx-auto",children:[v.jsx(vie,{maxSize:250*1024**2,onDrop:async e=>{const[n]=e;if(!n)return;const r=JSON.parse(await n.text());await si`PRAGMA foreign_keys = OFF`.execute(Mt),await nr.promise(Mt.transaction().execute(async i=>{for await(const{source:s}of r){const o=rR.find(a=>a===s);o&&await i.deleteFrom(o).execute()}for await(const{source:s,entities:o}of r){const a=rR.find(l=>l===s);if(a)for await(const l of Object.values(o))await i.insertInto(a).values(l).execute()}await si`
                                    DELETE FROM Inventory
                                    WHERE NOT EXISTS (
                                        SELECT 1 FROM Blueprint_Inventory 
                                        WHERE Blueprint_Inventory.inventoryId = Inventory.id
                                    )
                                `.execute(i)}),Is("Import game files")),await si`PRAGMA foreign_keys = ON`.execute(Mt)}}),v.jsx("div",{className:"flex items-center justify-center mt-10 gap-4",children:v.jsx(Pn,{iconEnabled:IW,loading:t.isPending,onClick:()=>t.mutate(),variant:{variant:"subtle"},children:v.jsx(ne,{label:"Export game files (label)"})})}),v.jsx("h2",{children:"TODO"}),v.jsxs("ul",{className:"flex flex-col gap-2",children:[v.jsx("li",{children:"Add notification center like inventory is full, production is full and so on."}),v.jsx("li",{children:'Upgrades: Put everything into the building, drive upgrades by passive "Research" points'}),v.jsx("li",{children:"Bundle default gameplay as exported json (put into public); add button to root to load default/selected gameplay; idea is a few buttons: Settler like, Fantasy, AoE and so on."}),v.jsx("li",{children:"Define game ending rules: amount of resources in (individual resourece per required cycle), required building in a cycle. When a player fail, game end with the ability to reset. Each game rule may have an ending message to show."}),v.jsx("li",{children:"Define winning rules: amount of resources / building built in specific cycle. When rules are not met, it's like a fail."}),v.jsx("li",{children:"Add something like world available resources + the ability to drain and add resources to the world. Something like Wolrd_Inventory where 0 means unlimited resources."}),v.jsx("li",{children:"World renewal resources: a list of resources with cycles and amount when they got renewed (world_renewal_queue)."}),v.jsx("li",{children:"Defines seasons: list of cyclic seasons with their length; resource production may be bound to specific season(s)."}),v.jsx("li",{children:"Add maintenance cost for a building: when a cycle ends, cost is deducted from the inventory. If there is not enough resources, building will be marked as offline (closed for production)."}),v.jsx("li",{children:"Dispaly resources per season (some resources will be available only in specific season)"}),v.jsx("li",{children:"Add resource probability drop: some resources may have not be produces (like a crop). This should be thinked out."})]})]})}});var zb=t=>t.type==="checkbox",bp=t=>t instanceof Date,vo=t=>t==null;const AW=t=>typeof t=="object";var Si=t=>!vo(t)&&!Array.isArray(t)&&AW(t)&&!bp(t),NW=t=>Si(t)&&t.target?zb(t.target)?t.target.checked:t.target.value:t,cse=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,PW=(t,e)=>t.has(cse(e)),use=t=>{const e=t.constructor&&t.constructor.prototype;return Si(e)&&e.hasOwnProperty("isPrototypeOf")},rk=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ho(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(rk&&(t instanceof Blob||r))&&(n||Si(t)))if(e=n?[]:{},!n&&!use(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Ho(t[i]));else return t;return e}var JM=t=>Array.isArray(t)?t.filter(Boolean):[],bi=t=>t===void 0,yt=(t,e,n)=>{if(!e||!Si(t))return n;const r=JM(e.split(/[,[\].]+?/)).reduce((i,s)=>vo(i)?i:i[s],t);return bi(r)||r===t?bi(t[e])?n:t[e]:r},nl=t=>typeof t=="boolean",ik=t=>/^\w*$/.test(t),kW=t=>JM(t.replace(/["|']|\]/g,"").split(/\.|\[/)),lr=(t,e,n)=>{let r=-1;const i=ik(e)?[e]:kW(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const c=t[a];l=Si(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}return t};const hE={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Wl={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Nu={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},dse=rr.createContext(null),sk=()=>rr.useContext(dse);var OW=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Wl.all&&(e._proxyFormState[o]=!r||Wl.all),n&&(n[o]=!0),t[o]}});return i},$o=t=>Si(t)&&!Object.keys(t).length,LW=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return $o(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Wl.all))},n0=t=>Array.isArray(t)?t:[t],DW=(t,e,n)=>!t||!e||t===e||n0(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function ok(t){const e=rr.useRef(t);e.current=t,rr.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function fse(t){const e=sk(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,a]=rr.useState(n._formState),l=rr.useRef(!0),c=rr.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=rr.useRef(i);return u.current=i,ok({disabled:r,next:f=>l.current&&DW(u.current,f.name,s)&&LW(f,c.current,n._updateFormState)&&a({...n._formState,...f}),subject:n._subjects.state}),rr.useEffect(()=>(l.current=!0,c.current.isValid&&n._updateValid(!0),()=>{l.current=!1}),[n]),rr.useMemo(()=>OW(o,n,c.current,!1),[o,n])}var Rc=t=>typeof t=="string",FW=(t,e,n,r,i)=>Rc(t)?(r&&e.watch.add(t),yt(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),yt(n,s))):(r&&(e.watchAll=!0),n);function hse(t){const e=sk(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t||{},a=rr.useRef(r);a.current=r,ok({disabled:s,subject:n._subjects.values,next:u=>{DW(a.current,u.name,o)&&c(Ho(FW(a.current,n._names,u.values||n._formValues,!1,i)))}});const[l,c]=rr.useState(n._getWatch(r,i));return rr.useEffect(()=>n._removeUnmounted()),l}function pse(t){const e=sk(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=PW(i._names.array,n),a=hse({control:i,name:n,defaultValue:yt(i._formValues,n,yt(i._defaultValues,n,t.defaultValue)),exact:!0}),l=fse({control:i,name:n,exact:!0}),c=rr.useRef(i.register(n,{...t.rules,value:a,...nl(t.disabled)?{disabled:t.disabled}:{}})),u=rr.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!yt(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!yt(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!yt(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!yt(l.validatingFields,n)},error:{enumerable:!0,get:()=>yt(l.errors,n)}}),[l,n]),f=rr.useMemo(()=>({name:n,value:a,...nl(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:p=>c.current.onChange({target:{value:NW(p),name:n},type:hE.CHANGE}),onBlur:()=>c.current.onBlur({target:{value:yt(i._formValues,n),name:n},type:hE.BLUR}),ref:p=>{const g=yt(i._fields,n);g&&p&&(g._f.ref={focus:()=>p.focus(),select:()=>p.select(),setCustomValidity:x=>p.setCustomValidity(x),reportValidity:()=>p.reportValidity()})}}),[n,i._formValues,r,l.disabled,a,i._fields]);return rr.useEffect(()=>{const p=i._options.shouldUnregister||s,g=(x,S)=>{const _=yt(i._fields,x);_&&_._f&&(_._f.mount=S)};if(g(n,!0),p){const x=Ho(yt(i._options.defaultValues,n));lr(i._defaultValues,n,x),bi(yt(i._formValues,n))&&lr(i._formValues,n,x)}return!o&&i.register(n),()=>{(o?p&&!i._state.action:p)?i.unregister(n):g(n,!1)}},[n,i,o,s]),rr.useEffect(()=>{i._updateDisabledField({disabled:r,fields:i._fields,name:n})},[r,n,i]),rr.useMemo(()=>({field:f,formState:l,fieldState:u}),[f,l,u])}const To=t=>t.render(pse(t));var BW=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},_3=t=>({isOnSubmit:!t||t===Wl.onSubmit,isOnBlur:t===Wl.onBlur,isOnChange:t===Wl.onChange,isOnAll:t===Wl.all,isOnTouch:t===Wl.onTouched}),S3=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const r0=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=yt(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(r0(a,e))break}else if(Si(a)&&r0(a,e))break}}};var mse=(t,e,n)=>{const r=n0(yt(t,n));return lr(r,"root",e[n]),lr(t,n,r),t},ak=t=>t.type==="file",Tc=t=>typeof t=="function",pE=t=>{if(!rk)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},KS=t=>Rc(t),lk=t=>t.type==="radio",mE=t=>t instanceof RegExp;const E3={value:!1,isValid:!1},M3={value:!0,isValid:!0};var jW=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!bi(t[0].attributes.value)?bi(t[0].value)||t[0].value===""?M3:{value:t[0].value,isValid:!0}:M3:E3}return E3};const T3={isValid:!1,value:null};var UW=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,T3):T3;function C3(t,e,n="validate"){if(KS(t)||Array.isArray(t)&&t.every(KS)||nl(t)&&!t)return{type:n,message:KS(t)?t:"",ref:e}}var fg=t=>Si(t)&&!mE(t)?t:{value:t,message:""},I3=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:f,max:p,pattern:g,validate:x,name:S,valueAsNumber:_,mount:b}=t._f,E=yt(n,S);if(!b||e.has(S))return{};const M=a?a[0]:o,T=j=>{i&&M.reportValidity&&(M.setCustomValidity(nl(j)?"":j||""),M.reportValidity())},k={},N=lk(o),D=zb(o),L=N||D,R=(_||ak(o))&&bi(o.value)&&bi(E)||pE(o)&&o.value===""||E===""||Array.isArray(E)&&!E.length,A=BW.bind(null,S,r,k),P=(j,U,B,$=Nu.maxLength,q=Nu.minLength)=>{const te=j?U:B;k[S]={type:j?$:q,message:te,ref:o,...A(j?$:q,te)}};if(s?!Array.isArray(E)||!E.length:l&&(!L&&(R||vo(E))||nl(E)&&!E||D&&!jW(a).isValid||N&&!UW(a).isValid)){const{value:j,message:U}=KS(l)?{value:!!l,message:l}:fg(l);if(j&&(k[S]={type:Nu.required,message:U,ref:M,...A(Nu.required,U)},!r))return T(U),k}if(!R&&(!vo(f)||!vo(p))){let j,U;const B=fg(p),$=fg(f);if(!vo(E)&&!isNaN(E)){const q=o.valueAsNumber||E&&+E;vo(B.value)||(j=q>B.value),vo($.value)||(U=q<$.value)}else{const q=o.valueAsDate||new Date(E),te=J=>new Date(new Date().toDateString()+" "+J),W=o.type=="time",Z=o.type=="week";Rc(B.value)&&E&&(j=W?te(E)>te(B.value):Z?E>B.value:q>new Date(B.value)),Rc($.value)&&E&&(U=W?te(E)<te($.value):Z?E<$.value:q<new Date($.value))}if((j||U)&&(P(!!j,B.message,$.message,Nu.max,Nu.min),!r))return T(k[S].message),k}if((c||u)&&!R&&(Rc(E)||s&&Array.isArray(E))){const j=fg(c),U=fg(u),B=!vo(j.value)&&E.length>+j.value,$=!vo(U.value)&&E.length<+U.value;if((B||$)&&(P(B,j.message,U.message),!r))return T(k[S].message),k}if(g&&!R&&Rc(E)){const{value:j,message:U}=fg(g);if(mE(j)&&!E.match(j)&&(k[S]={type:Nu.pattern,message:U,ref:o,...A(Nu.pattern,U)},!r))return T(U),k}if(x){if(Tc(x)){const j=await x(E,n),U=C3(j,M);if(U&&(k[S]={...U,...A(Nu.validate,U.message)},!r))return T(U.message),k}else if(Si(x)){let j={};for(const U in x){if(!$o(j)&&!r)break;const B=C3(await x[U](E,n),M,U);B&&(j={...B,...A(U,B.message)},T(B.message),r&&(k[S]=j))}if(!$o(j)&&(k[S]={ref:M,...j},!r))return k}}return T(!0),k};function gse(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=bi(t)?r++:t[e[r++]];return t}function yse(t){for(const e in t)if(t.hasOwnProperty(e)&&!bi(t[e]))return!1;return!0}function Zi(t,e){const n=Array.isArray(e)?e:ik(e)?[e]:kW(e),r=n.length===1?t:gse(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Si(r)&&$o(r)||Array.isArray(r)&&yse(r))&&Zi(t,n.slice(0,-1)),t}var iR=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},fP=t=>vo(t)||!AW(t);function bf(t,e){if(fP(t)||fP(e))return t===e;if(bp(t)&&bp(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(bp(s)&&bp(o)||Si(s)&&Si(o)||Array.isArray(s)&&Array.isArray(o)?!bf(s,o):s!==o)return!1}}return!0}var zW=t=>t.type==="select-multiple",vse=t=>lk(t)||zb(t),sR=t=>pE(t)&&t.isConnected,VW=t=>{for(const e in t)if(Tc(t[e]))return!0;return!1};function gE(t,e={}){const n=Array.isArray(t);if(Si(t)||n)for(const r in t)Array.isArray(t[r])||Si(t[r])&&!VW(t[r])?(e[r]=Array.isArray(t[r])?[]:{},gE(t[r],e[r])):vo(t[r])||(e[r]=!0);return e}function WW(t,e,n){const r=Array.isArray(t);if(Si(t)||r)for(const i in t)Array.isArray(t[i])||Si(t[i])&&!VW(t[i])?bi(e)||fP(n[i])?n[i]=Array.isArray(t[i])?gE(t[i],[]):{...gE(t[i])}:WW(t[i],vo(e)?{}:e[i],n[i]):n[i]=!bf(t[i],e[i]);return n}var lx=(t,e)=>WW(t,e,gE(e)),qW=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>bi(t)?t:e?t===""?NaN:t&&+t:n&&Rc(t)?new Date(t):r?r(t):t;function oR(t){const e=t.ref;return ak(e)?e.files:lk(e)?UW(t.refs).value:zW(e)?[...e.selectedOptions].map(({value:n})=>n):zb(e)?jW(t.refs).value:qW(bi(e.value)?t.ref.value:e.value,t)}var xse=(t,e,n,r)=>{const i={};for(const s of t){const o=yt(e,s);o&&lr(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},cx=t=>bi(t)?t:mE(t)?t.source:Si(t)?mE(t.value)?t.value.source:t.value:t;const R3="AsyncFunction";var bse=t=>!!t&&!!t.validate&&!!(Tc(t.validate)&&t.validate.constructor.name===R3||Si(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===R3)),wse=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function A3(t,e,n){const r=yt(t,n);if(r||ik(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=yt(e,s),a=yt(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var _se=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,Sse=(t,e)=>!JM(yt(t,e)).length&&Zi(t,e);const Ese={mode:Wl.onSubmit,reValidateMode:Wl.onChange,shouldFocusError:!0};function Mse(t={}){let e={...Ese,...t},n={submitCount:0,isDirty:!1,isLoading:Tc(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Si(e.defaultValues)||Si(e.values)?Ho(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Ho(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:iR(),array:iR(),state:iR()},p=_3(e.mode),g=_3(e.reValidateMode),x=e.criteriaMode===Wl.all,S=le=>ge=>{clearTimeout(c),c=setTimeout(le,ge)},_=async le=>{if(!e.disabled&&(u.isValid||le)){const ge=e.resolver?$o((await L()).errors):await A(r,!0);ge!==n.isValid&&f.state.next({isValid:ge})}},b=(le,ge)=>{!e.disabled&&(u.isValidating||u.validatingFields)&&((le||Array.from(a.mount)).forEach(fe=>{fe&&(ge?lr(n.validatingFields,fe,ge):Zi(n.validatingFields,fe))}),f.state.next({validatingFields:n.validatingFields,isValidating:!$o(n.validatingFields)}))},E=(le,ge=[],fe,Q,G=!0,me=!0)=>{if(Q&&fe&&!e.disabled){if(o.action=!0,me&&Array.isArray(yt(r,le))){const he=fe(yt(r,le),Q.argA,Q.argB);G&&lr(r,le,he)}if(me&&Array.isArray(yt(n.errors,le))){const he=fe(yt(n.errors,le),Q.argA,Q.argB);G&&lr(n.errors,le,he),Sse(n.errors,le)}if(u.touchedFields&&me&&Array.isArray(yt(n.touchedFields,le))){const he=fe(yt(n.touchedFields,le),Q.argA,Q.argB);G&&lr(n.touchedFields,le,he)}u.dirtyFields&&(n.dirtyFields=lx(i,s)),f.state.next({name:le,isDirty:j(le,ge),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else lr(s,le,ge)},M=(le,ge)=>{lr(n.errors,le,ge),f.state.next({errors:n.errors})},T=le=>{n.errors=le,f.state.next({errors:n.errors,isValid:!1})},k=(le,ge,fe,Q)=>{const G=yt(r,le);if(G){const me=yt(s,le,bi(fe)?yt(i,le):fe);bi(me)||Q&&Q.defaultChecked||ge?lr(s,le,ge?me:oR(G._f)):$(le,me),o.mount&&_()}},N=(le,ge,fe,Q,G)=>{let me=!1,he=!1;const Te={name:le};if(!e.disabled){const Oe=!!(yt(r,le)&&yt(r,le)._f&&yt(r,le)._f.disabled);if(!fe||Q){u.isDirty&&(he=n.isDirty,n.isDirty=Te.isDirty=j(),me=he!==Te.isDirty);const Qe=Oe||bf(yt(i,le),ge);he=!!(!Oe&&yt(n.dirtyFields,le)),Qe||Oe?Zi(n.dirtyFields,le):lr(n.dirtyFields,le,!0),Te.dirtyFields=n.dirtyFields,me=me||u.dirtyFields&&he!==!Qe}if(fe){const Qe=yt(n.touchedFields,le);Qe||(lr(n.touchedFields,le,fe),Te.touchedFields=n.touchedFields,me=me||u.touchedFields&&Qe!==fe)}me&&G&&f.state.next(Te)}return me?Te:{}},D=(le,ge,fe,Q)=>{const G=yt(n.errors,le),me=u.isValid&&nl(ge)&&n.isValid!==ge;if(e.delayError&&fe?(l=S(()=>M(le,fe)),l(e.delayError)):(clearTimeout(c),l=null,fe?lr(n.errors,le,fe):Zi(n.errors,le)),(fe?!bf(G,fe):G)||!$o(Q)||me){const he={...Q,...me&&nl(ge)?{isValid:ge}:{},errors:n.errors,name:le};n={...n,...he},f.state.next(he)}},L=async le=>{b(le,!0);const ge=await e.resolver(s,e.context,xse(le||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return b(le),ge},R=async le=>{const{errors:ge}=await L(le);if(le)for(const fe of le){const Q=yt(ge,fe);Q?lr(n.errors,fe,Q):Zi(n.errors,fe)}else n.errors=ge;return ge},A=async(le,ge,fe={valid:!0})=>{for(const Q in le){const G=le[Q];if(G){const{_f:me,...he}=G;if(me){const Te=a.array.has(me.name),Oe=G._f&&bse(G._f);Oe&&u.validatingFields&&b([Q],!0);const Qe=await I3(G,a.disabled,s,x,e.shouldUseNativeValidation&&!ge,Te);if(Oe&&u.validatingFields&&b([Q]),Qe[me.name]&&(fe.valid=!1,ge))break;!ge&&(yt(Qe,me.name)?Te?mse(n.errors,Qe,me.name):lr(n.errors,me.name,Qe[me.name]):Zi(n.errors,me.name))}!$o(he)&&await A(he,ge,fe)}}return fe.valid},P=()=>{for(const le of a.unMount){const ge=yt(r,le);ge&&(ge._f.refs?ge._f.refs.every(fe=>!sR(fe)):!sR(ge._f.ref))&&de(le)}a.unMount=new Set},j=(le,ge)=>!e.disabled&&(le&&ge&&lr(s,le,ge),!bf(Y(),i)),U=(le,ge,fe)=>FW(le,a,{...o.mount?s:bi(ge)?i:Rc(le)?{[le]:ge}:ge},fe,ge),B=le=>JM(yt(o.mount?s:i,le,e.shouldUnregister?yt(i,le,[]):[])),$=(le,ge,fe={})=>{const Q=yt(r,le);let G=ge;if(Q){const me=Q._f;me&&(!me.disabled&&lr(s,le,qW(ge,me)),G=pE(me.ref)&&vo(ge)?"":ge,zW(me.ref)?[...me.ref.options].forEach(he=>he.selected=G.includes(he.value)):me.refs?zb(me.ref)?me.refs.length>1?me.refs.forEach(he=>(!he.defaultChecked||!he.disabled)&&(he.checked=Array.isArray(G)?!!G.find(Te=>Te===he.value):G===he.value)):me.refs[0]&&(me.refs[0].checked=!!G):me.refs.forEach(he=>he.checked=he.value===G):ak(me.ref)?me.ref.value="":(me.ref.value=G,me.ref.type||f.values.next({name:le,values:{...s}})))}(fe.shouldDirty||fe.shouldTouch)&&N(le,G,fe.shouldTouch,fe.shouldDirty,!0),fe.shouldValidate&&J(le)},q=(le,ge,fe)=>{for(const Q in ge){const G=ge[Q],me=`${le}.${Q}`,he=yt(r,me);(a.array.has(le)||Si(G)||he&&!he._f)&&!bp(G)?q(me,G,fe):$(me,G,fe)}},te=(le,ge,fe={})=>{const Q=yt(r,le),G=a.array.has(le),me=Ho(ge);lr(s,le,me),G?(f.array.next({name:le,values:{...s}}),(u.isDirty||u.dirtyFields)&&fe.shouldDirty&&f.state.next({name:le,dirtyFields:lx(i,s),isDirty:j(le,me)})):Q&&!Q._f&&!vo(me)?q(le,me,fe):$(le,me,fe),S3(le,a)&&f.state.next({...n}),f.values.next({name:o.mount?le:void 0,values:{...s}})},W=async le=>{o.mount=!0;const ge=le.target;let fe=ge.name,Q=!0;const G=yt(r,fe),me=()=>ge.type?oR(G._f):NW(le),he=Te=>{Q=Number.isNaN(Te)||bp(Te)&&isNaN(Te.getTime())||bf(Te,yt(s,fe,Te))};if(G){let Te,Oe;const Qe=me(),Ye=le.type===hE.BLUR||le.type===hE.FOCUS_OUT,at=!wse(G._f)&&!e.resolver&&!yt(n.errors,fe)&&!G._f.deps||_se(Ye,yt(n.touchedFields,fe),n.isSubmitted,g,p),Ft=S3(fe,a,Ye);lr(s,fe,Qe),Ye?(G._f.onBlur&&G._f.onBlur(le),l&&l(0)):G._f.onChange&&G._f.onChange(le);const et=N(fe,Qe,Ye,!1),gt=!$o(et)||Ft;if(!Ye&&f.values.next({name:fe,type:le.type,values:{...s}}),at)return u.isValid&&(e.mode==="onBlur"&&Ye?_():Ye||_()),gt&&f.state.next({name:fe,...Ft?{}:et});if(!Ye&&Ft&&f.state.next({...n}),e.resolver){const{errors:kt}=await L([fe]);if(he(Qe),Q){const Bt=A3(n.errors,r,fe),dt=A3(kt,r,Bt.name||fe);Te=dt.error,fe=dt.name,Oe=$o(kt)}}else b([fe],!0),Te=(await I3(G,a.disabled,s,x,e.shouldUseNativeValidation))[fe],b([fe]),he(Qe),Q&&(Te?Oe=!1:u.isValid&&(Oe=await A(r,!0)));Q&&(G._f.deps&&J(G._f.deps),D(fe,Oe,Te,et))}},Z=(le,ge)=>{if(yt(n.errors,ge)&&le.focus)return le.focus(),1},J=async(le,ge={})=>{let fe,Q;const G=n0(le);if(e.resolver){const me=await R(bi(le)?le:G);fe=$o(me),Q=le?!G.some(he=>yt(me,he)):fe}else le?(Q=(await Promise.all(G.map(async me=>{const he=yt(r,me);return await A(he&&he._f?{[me]:he}:he)}))).every(Boolean),!(!Q&&!n.isValid)&&_()):Q=fe=await A(r);return f.state.next({...!Rc(le)||u.isValid&&fe!==n.isValid?{}:{name:le},...e.resolver||!le?{isValid:fe}:{},errors:n.errors}),ge.shouldFocus&&!Q&&r0(r,Z,le?G:a.mount),Q},Y=le=>{const ge={...o.mount?s:i};return bi(le)?ge:Rc(le)?yt(ge,le):le.map(fe=>yt(ge,fe))},oe=(le,ge)=>({invalid:!!yt((ge||n).errors,le),isDirty:!!yt((ge||n).dirtyFields,le),error:yt((ge||n).errors,le),isValidating:!!yt(n.validatingFields,le),isTouched:!!yt((ge||n).touchedFields,le)}),ce=le=>{le&&n0(le).forEach(ge=>Zi(n.errors,ge)),f.state.next({errors:le?n.errors:{}})},ie=(le,ge,fe)=>{const Q=(yt(r,le,{_f:{}})._f||{}).ref,G=yt(n.errors,le)||{},{ref:me,message:he,type:Te,...Oe}=G;lr(n.errors,le,{...Oe,...ge,ref:Q}),f.state.next({name:le,errors:n.errors,isValid:!1}),fe&&fe.shouldFocus&&Q&&Q.focus&&Q.focus()},ue=(le,ge)=>Tc(le)?f.values.subscribe({next:fe=>le(U(void 0,ge),fe)}):U(le,ge,!0),de=(le,ge={})=>{for(const fe of le?n0(le):a.mount)a.mount.delete(fe),a.array.delete(fe),ge.keepValue||(Zi(r,fe),Zi(s,fe)),!ge.keepError&&Zi(n.errors,fe),!ge.keepDirty&&Zi(n.dirtyFields,fe),!ge.keepTouched&&Zi(n.touchedFields,fe),!ge.keepIsValidating&&Zi(n.validatingFields,fe),!e.shouldUnregister&&!ge.keepDefaultValue&&Zi(i,fe);f.values.next({values:{...s}}),f.state.next({...n,...ge.keepDirty?{isDirty:j()}:{}}),!ge.keepIsValid&&_()},be=({disabled:le,name:ge,field:fe,fields:Q})=>{(nl(le)&&o.mount||le||a.disabled.has(ge))&&(le?a.disabled.add(ge):a.disabled.delete(ge),N(ge,oR(fe?fe._f:yt(Q,ge)._f),!1,!1,!0))},we=(le,ge={})=>{let fe=yt(r,le);const Q=nl(ge.disabled)||nl(e.disabled);return lr(r,le,{...fe||{},_f:{...fe&&fe._f?fe._f:{ref:{name:le}},name:le,mount:!0,...ge}}),a.mount.add(le),fe?be({field:fe,disabled:nl(ge.disabled)?ge.disabled:e.disabled,name:le}):k(le,!0,ge.value),{...Q?{disabled:ge.disabled||e.disabled}:{},...e.progressive?{required:!!ge.required,min:cx(ge.min),max:cx(ge.max),minLength:cx(ge.minLength),maxLength:cx(ge.maxLength),pattern:cx(ge.pattern)}:{},name:le,onChange:W,onBlur:W,ref:G=>{if(G){we(le,ge),fe=yt(r,le);const me=bi(G.value)&&G.querySelectorAll&&G.querySelectorAll("input,select,textarea")[0]||G,he=vse(me),Te=fe._f.refs||[];if(he?Te.find(Oe=>Oe===me):me===fe._f.ref)return;lr(r,le,{_f:{...fe._f,...he?{refs:[...Te.filter(sR),me,...Array.isArray(yt(i,le))?[{}]:[]],ref:{type:me.type,name:le}}:{ref:me}}}),k(le,!1,void 0,me)}else fe=yt(r,le,{}),fe._f&&(fe._f.mount=!1),(e.shouldUnregister||ge.shouldUnregister)&&!(PW(a.array,le)&&o.action)&&a.unMount.add(le)}}},Ce=()=>e.shouldFocusError&&r0(r,Z,a.mount),Ie=le=>{nl(le)&&(f.state.next({disabled:le}),r0(r,(ge,fe)=>{const Q=yt(r,fe);Q&&(ge.disabled=Q._f.disabled||le,Array.isArray(Q._f.refs)&&Q._f.refs.forEach(G=>{G.disabled=Q._f.disabled||le}))},0,!1))},Fe=(le,ge)=>async fe=>{let Q;fe&&(fe.preventDefault&&fe.preventDefault(),fe.persist&&fe.persist());let G=Ho(s);if(a.disabled.size)for(const me of a.disabled)lr(G,me,void 0);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:me,values:he}=await L();n.errors=me,G=he}else await A(r);if(Zi(n.errors,"root"),$o(n.errors)){f.state.next({errors:{}});try{await le(G,fe)}catch(me){Q=me}}else ge&&await ge({...n.errors},fe),Ce(),setTimeout(Ce);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:$o(n.errors)&&!Q,submitCount:n.submitCount+1,errors:n.errors}),Q)throw Q},ve=(le,ge={})=>{yt(r,le)&&(bi(ge.defaultValue)?te(le,Ho(yt(i,le))):(te(le,ge.defaultValue),lr(i,le,Ho(ge.defaultValue))),ge.keepTouched||Zi(n.touchedFields,le),ge.keepDirty||(Zi(n.dirtyFields,le),n.isDirty=ge.defaultValue?j(le,Ho(yt(i,le))):j()),ge.keepError||(Zi(n.errors,le),u.isValid&&_()),f.state.next({...n}))},_e=(le,ge={})=>{const fe=le?Ho(le):i,Q=Ho(fe),G=$o(le),me=G?i:Q;if(ge.keepDefaultValues||(i=fe),!ge.keepValues){if(ge.keepDirtyValues){const he=new Set([...a.mount,...Object.keys(lx(i,s))]);for(const Te of Array.from(he))yt(n.dirtyFields,Te)?lr(me,Te,yt(s,Te)):te(Te,yt(me,Te))}else{if(rk&&bi(le))for(const he of a.mount){const Te=yt(r,he);if(Te&&Te._f){const Oe=Array.isArray(Te._f.refs)?Te._f.refs[0]:Te._f.ref;if(pE(Oe)){const Qe=Oe.closest("form");if(Qe){Qe.reset();break}}}}r={}}s=e.shouldUnregister?ge.keepDefaultValues?Ho(i):{}:Ho(me),f.array.next({values:{...me}}),f.values.next({values:{...me}})}a={mount:ge.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!ge.keepIsValid||!!ge.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:ge.keepSubmitCount?n.submitCount:0,isDirty:G?!1:ge.keepDirty?n.isDirty:!!(ge.keepDefaultValues&&!bf(le,i)),isSubmitted:ge.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:G?{}:ge.keepDirtyValues?ge.keepDefaultValues&&s?lx(i,s):n.dirtyFields:ge.keepDefaultValues&&le?lx(i,le):ge.keepDirty?n.dirtyFields:{},touchedFields:ge.keepTouched?n.touchedFields:{},errors:ge.keepErrors?n.errors:{},isSubmitSuccessful:ge.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},se=(le,ge)=>_e(Tc(le)?le(s):le,ge);return{control:{register:we,unregister:de,getFieldState:oe,handleSubmit:Fe,setError:ie,_executeSchema:L,_getWatch:U,_getDirty:j,_updateValid:_,_removeUnmounted:P,_updateFieldArray:E,_updateDisabledField:be,_getFieldArray:B,_reset:_e,_resetDefaultValues:()=>Tc(e.defaultValues)&&e.defaultValues().then(le=>{se(le,e.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:le=>{n={...n,...le}},_disableForm:Ie,_subjects:f,_proxyFormState:u,_setErrors:T,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(le){o=le},get _defaultValues(){return i},get _names(){return a},set _names(le){a=le},get _formState(){return n},set _formState(le){n=le},get _options(){return e},set _options(le){e={...e,...le}}},trigger:J,register:we,handleSubmit:Fe,watch:ue,setValue:te,getValues:Y,reset:se,resetField:ve,clearErrors:ce,unregister:de,setError:ie,setFocus:(le,ge={})=>{const fe=yt(r,le),Q=fe&&fe._f;if(Q){const G=Q.refs?Q.refs[0]:Q.ref;G.focus&&(G.focus(),ge.shouldSelect&&Tc(G.select)&&G.select())}},getFieldState:oe}}function ds(t={}){const e=rr.useRef(void 0),n=rr.useRef(void 0),[r,i]=rr.useState({isDirty:!1,isValidating:!1,isLoading:Tc(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Tc(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Mse(t),formState:r});const s=e.current.control;return s._options=t,ok({subject:s._subjects.state,next:o=>{LW(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),rr.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),rr.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),rr.useEffect(()=>{t.values&&!bf(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),rr.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),rr.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),rr.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=OW(r,s),e.current}const N3=(t,e,n)=>{if(t&&"reportValidity"in t){const r=yt(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},HW=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?N3(r.ref,n,t):r&&r.refs&&r.refs.forEach(i=>N3(i,n,t))}},Tse=(t,e)=>{e.shouldUseNativeValidation&&HW(t,e);const n={};for(const r in t){const i=yt(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(Cse(e.names||Object.keys(t),r)){const o=Object.assign({},yt(n,r));lr(o,"root",s),lr(n,r,o)}else lr(n,r,s)}return n},Cse=(t,e)=>t.some(n=>n.match(`^${e}\\.\\d+`));var Ise=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return t.push(f)})}),e){var l=n[o].types,c=l&&l[r.code];n[o]=BW(o,e,n,i,c?[].concat(c,r.message):r.message)}t.shift()}return n},fs=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return s.shouldUseNativeValidation&&HW({},s),{errors:{},values:n.raw?Object.assign({},r):c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a?.errors)}(o))return{values:{},errors:Tse(Ise(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}};const Rse="icon-[cil--arrow-right]",$W="icon-[et--map]",Ase=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({name:H.string().min(1),cycles:H.number().int(),sort:H.number().int(),limit:H.number().int(),image:H.string().nullish()})),shape:t,filter:e,sort:["id","name","cycles","sort","limit","image"]}),Nse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({blueprintId:H.string().min(1),conflictId:H.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","conflictId"]}),Pse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({blueprintId:H.string().min(1),dependencyId:H.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","dependencyId"]}),kse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({blueprintId:H.string().min(1),inventoryId:H.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","inventoryId"]}),Ose=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({blueprintId:H.string().min(1),resourceId:H.string().min(1),amount:H.number(),cycles:H.number().int()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","cycles"]}),Lse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({blueprintProductionId:H.string().min(1),blueprintId:H.string().min(1)})),shape:t,filter:e,sort:["id","blueprintProductionId","blueprintId"]}),Dse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({blueprintProductionId:H.string().min(1),resourceId:H.string().min(1),amount:H.number(),passive:cl()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount","passive"]}),Fse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({blueprintProductionId:H.string().min(1),resourceId:H.string().min(1),amount:H.number()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount"]}),Bse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({blueprintId:H.string().min(1),resourceId:H.string().min(1),amount:H.number(),passive:cl()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","passive"]}),jse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({userId:H.string().min(1),plotId:H.string().min(1),blueprintId:H.string().min(1),constructionId:H.string().nullish(),landId:H.string().min(1),productionId:H.string().nullish(),recurringProductionId:H.string().nullish(),valid:cl()})),shape:t,filter:e,sort:["id","userId","plotId","blueprintId","constructionId","landId","productionId","recurringProductionId","valid"]}),Use=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({resourceId:H.string().min(1),amount:H.number(),limit:H.number(),type:H.string().min(1)})),shape:t,filter:e,sort:["id","resourceId","amount","limit","type"]}),zse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({userId:H.string().min(1),name:H.string().min(1)})),shape:t,filter:e,sort:["id","userId","name"]}),Vse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({name:H.string().min(1),probability:H.number().int(),limit:H.number().int(),image:H.string().nullish()})),shape:t,filter:e,sort:["id","name","probability","limit","image"]}),Wse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({name:H.string().min(1),weight:H.number().int(),image:H.string().nullish()})),shape:t,filter:e,sort:["id","name","weight","image"]}),qse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({code:H.string().min(1),label:H.string().min(1),group:H.string().nullish(),sort:H.number().int()})),shape:t,filter:e,sort:["id","code","label","group","sort"]}),Hse=({shape:t,filter:e})=>Js({entity:Ys.merge(H.object({name:H.string().min(1),login:H.string().min(1),password:H.string().min(1)})),shape:t,filter:e,sort:["id","name","login","password"]}),$se=zse({shape:H.object({name:H.string().min(1)}),filter:Zs});function Gse(t){return Math.random()<t/100}const Xse=async({tx:t,userId:e,name:n})=>{const r=await t.insertInto("Map").values({id:Wn(),userId:e,name:n}).returning("id").executeTakeFirstOrThrow(),i=await t.selectFrom("Region").selectAll().execute(),s=1,o=4096*4;let a=0;for(;a<s&&a<=o;)for await(const{id:l,probability:c,name:u}of i){if(console.log("		-- Region",{id:l,probability:c,landId:a,world:s}),a>=s){console.log("		-- Finished");break}if(!Gse(c)){console.log("			-- Won't generate");continue}console.log("		-- New land",{name:u,landId:a});const f=await t.insertInto("Land").values({id:Wn(),regionId:l,mapId:r.id,position:a}).returningAll().executeTakeFirstOrThrow();await t.insertInto("Plot").values(Array.from({length:1},(p,g)=>({id:Wn(),mapId:r.id,userId:e,landId:f.id,position:g}))).execute(),a+=1}return r},Kse=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs($se.shape),defaultValues:{name:"",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"name",label:v.jsx(ne,{label:"Map name (label)"}),required:!0,children:v.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:$W,type:"submit",children:v.jsx(ne,{label:"Create map (submit)"})})})]})},GW=Pt("/$locale/apps/derivean/game/")({async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{user:r,map:await t.ensureQueryData({queryKey:["GameMap","map",r.id],async queryFn(){return e.transaction().execute(i=>Rs({select:i.selectFrom("Map as m").select(["m.id","m.name"]).where("m.userId","=",r.id),output:H.object({id:H.string().min(1),name:H.string().min(1)})}))}})}},component(){const{user:t,map:e}=GW.useLoaderData(),{tva:n}=Pr({from:"__root__"}),r=n().slots,i=Ar([["GameMap"]]),{locale:s}=Jt({from:"/$locale"}),o=em(),a=rn({async mutationFn({id:l}){return Mt.transaction().execute(async c=>c.deleteFrom("Map").where("id","=",l).where("userId","=",t.id).execute())},async onSuccess(){await i()}});return v.jsxs("div",{className:r.base({css:["w-1/2","mx-auto","mt-24","flex","flex-col","gap-6"]}),children:[v.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:v.jsx(ne,{label:"Map list (label)"})}),e.length>0?e.map(l=>v.jsxs("div",{className:ln(["flex","flex-row","gap-2","items-center","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[v.jsx(Et,{icon:Rse,to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:l.id},children:l.name}),v.jsx("div",{children:v.jsx(Pn,{iconEnabled:Ti,variant:{variant:"danger"},loading:a.isPending,onClick:()=>{a.mutate({id:l.id})}})})]},l.id)):v.jsx("div",{className:ln(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:v.jsx(ne,{label:"There are no maps (label)"})}),v.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:v.jsx(ne,{label:"New map (label)"})}),v.jsx("div",{children:v.jsx(Kse,{mutation:rn({async mutationFn(l){return nr.promise(Mt.transaction().execute(c=>Xse({tx:c,userId:t.id,...l})),Is("Map generator"))},async onSuccess(l){o({to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:l.id}}),await i()}})})})]})}});var aR,P3;function ck(){if(P3)return aR;P3=1;var t="\0",e="\0",n="\x01";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(u){u&&(this._isDirected=Object.hasOwn(u,"directed")?u.directed:!0,this._isMultigraph=Object.hasOwn(u,"multigraph")?u.multigraph:!1,this._isCompound=Object.hasOwn(u,"compound")?u.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(u){return this._label=u,this}graph(){return this._label}setDefaultNodeLabel(u){return this._defaultNodeLabelFn=u,typeof u!="function"&&(this._defaultNodeLabelFn=()=>u),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var u=this;return this.nodes().filter(f=>Object.keys(u._in[f]).length===0)}sinks(){var u=this;return this.nodes().filter(f=>Object.keys(u._out[f]).length===0)}setNodes(u,f){var p=arguments,g=this;return u.forEach(function(x){p.length>1?g.setNode(x,f):g.setNode(x)}),this}setNode(u,f){return Object.hasOwn(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=f),this):(this._nodes[u]=arguments.length>1?f:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=e,this._children[u]={},this._children[e][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)}node(u){return this._nodes[u]}hasNode(u){return Object.hasOwn(this._nodes,u)}removeNode(u){var f=this;if(Object.hasOwn(this._nodes,u)){var p=g=>f.removeEdge(f._edgeObjs[g]);delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],this.children(u).forEach(function(g){f.setParent(g)}),delete this._children[u]),Object.keys(this._in[u]).forEach(p),delete this._in[u],delete this._preds[u],Object.keys(this._out[u]).forEach(p),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this}setParent(u,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(f===void 0)f=e;else{f+="";for(var p=f;p!==void 0;p=this.parent(p))if(p===u)throw new Error("Setting "+f+" as parent of "+u+" would create a cycle");this.setNode(f)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=f,this._children[f][u]=!0,this}_removeFromParentsChildList(u){delete this._children[this._parent[u]][u]}parent(u){if(this._isCompound){var f=this._parent[u];if(f!==e)return f}}children(u=e){if(this._isCompound){var f=this._children[u];if(f)return Object.keys(f)}else{if(u===e)return this.nodes();if(this.hasNode(u))return[]}}predecessors(u){var f=this._preds[u];if(f)return Object.keys(f)}successors(u){var f=this._sucs[u];if(f)return Object.keys(f)}neighbors(u){var f=this.predecessors(u);if(f){const g=new Set(f);for(var p of this.successors(u))g.add(p);return Array.from(g.values())}}isLeaf(u){var f;return this.isDirected()?f=this.successors(u):f=this.neighbors(u),f.length===0}filterNodes(u){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var p=this;Object.entries(this._nodes).forEach(function([S,_]){u(S)&&f.setNode(S,_)}),Object.values(this._edgeObjs).forEach(function(S){f.hasNode(S.v)&&f.hasNode(S.w)&&f.setEdge(S,p.edge(S))});var g={};function x(S){var _=p.parent(S);return _===void 0||f.hasNode(_)?(g[S]=_,_):_ in g?g[_]:x(_)}return this._isCompound&&f.nodes().forEach(S=>f.setParent(S,x(S))),f}setDefaultEdgeLabel(u){return this._defaultEdgeLabelFn=u,typeof u!="function"&&(this._defaultEdgeLabelFn=()=>u),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(u,f){var p=this,g=arguments;return u.reduce(function(x,S){return g.length>1?p.setEdge(x,S,f):p.setEdge(x,S),S}),this}setEdge(){var u,f,p,g,x=!1,S=arguments[0];typeof S=="object"&&S!==null&&"v"in S?(u=S.v,f=S.w,p=S.name,arguments.length===2&&(g=arguments[1],x=!0)):(u=S,f=arguments[1],p=arguments[3],arguments.length>2&&(g=arguments[2],x=!0)),u=""+u,f=""+f,p!==void 0&&(p=""+p);var _=o(this._isDirected,u,f,p);if(Object.hasOwn(this._edgeLabels,_))return x&&(this._edgeLabels[_]=g),this;if(p!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(f),this._edgeLabels[_]=x?g:this._defaultEdgeLabelFn(u,f,p);var b=a(this._isDirected,u,f,p);return u=b.v,f=b.w,Object.freeze(b),this._edgeObjs[_]=b,i(this._preds[f],u),i(this._sucs[u],f),this._in[f][_]=b,this._out[u][_]=b,this._edgeCount++,this}edge(u,f,p){var g=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,u,f,p);return this._edgeLabels[g]}edgeAsObj(){const u=this.edge(...arguments);return typeof u!="object"?{label:u}:u}hasEdge(u,f,p){var g=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,u,f,p);return Object.hasOwn(this._edgeLabels,g)}removeEdge(u,f,p){var g=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,u,f,p),x=this._edgeObjs[g];return x&&(u=x.v,f=x.w,delete this._edgeLabels[g],delete this._edgeObjs[g],s(this._preds[f],u),s(this._sucs[u],f),delete this._in[f][g],delete this._out[u][g],this._edgeCount--),this}inEdges(u,f){var p=this._in[u];if(p){var g=Object.values(p);return f?g.filter(x=>x.v===f):g}}outEdges(u,f){var p=this._out[u];if(p){var g=Object.values(p);return f?g.filter(x=>x.w===f):g}}nodeEdges(u,f){var p=this.inEdges(u,f);if(p)return p.concat(this.outEdges(u,f))}}function i(c,u){c[u]?c[u]++:c[u]=1}function s(c,u){--c[u]||delete c[u]}function o(c,u,f,p){var g=""+u,x=""+f;if(!c&&g>x){var S=g;g=x,x=S}return g+n+x+n+(p===void 0?t:p)}function a(c,u,f,p){var g=""+u,x=""+f;if(!c&&g>x){var S=g;g=x,x=S}var _={v:g,w:x};return p&&(_.name=p),_}function l(c,u){return o(c,u.v,u.w,u.name)}return aR=r,aR}var lR,k3;function Yse(){return k3||(k3=1,lR="2.2.4"),lR}var cR,O3;function Zse(){return O3||(O3=1,cR={Graph:ck(),version:Yse()}),cR}var uR,L3;function Jse(){if(L3)return uR;L3=1;var t=ck();uR={write:e,read:i};function e(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:r(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function n(s){return s.nodes().map(function(o){var a=s.node(o),l=s.parent(o),c={v:o};return a!==void 0&&(c.value=a),l!==void 0&&(c.parent=l),c})}function r(s){return s.edges().map(function(o){var a=s.edge(o),l={v:o.v,w:o.w};return o.name!==void 0&&(l.name=o.name),a!==void 0&&(l.value=a),l})}function i(s){var o=new t(s.options).setGraph(s.value);return s.nodes.forEach(function(a){o.setNode(a.v,a.value),a.parent&&o.setParent(a.v,a.parent)}),s.edges.forEach(function(a){o.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),o}return uR}var dR,D3;function Qse(){if(D3)return dR;D3=1,dR=t;function t(e){var n={},r=[],i;function s(o){Object.hasOwn(n,o)||(n[o]=!0,i.push(o),e.successors(o).forEach(s),e.predecessors(o).forEach(s))}return e.nodes().forEach(function(o){i=[],s(o),i.length&&r.push(i)}),r}return dR}var fR,F3;function XW(){if(F3)return fR;F3=1;class t{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))}_decrease(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s}_swap(n,r){var i=this._arr,s=this._keyIndices,o=i[n],a=i[r];i[n]=a,i[r]=o,s[a.key]=n,s[o.key]=r}}return fR=t,fR}var hR,B3;function KW(){if(B3)return hR;B3=1;var t=XW();hR=n;var e=()=>1;function n(i,s,o,a){return r(i,String(s),o||e,a||function(l){return i.outEdges(l)})}function r(i,s,o,a){var l={},c=new t,u,f,p=function(g){var x=g.v!==u?g.v:g.w,S=l[x],_=o(g),b=f.distance+_;if(_<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+_);b<S.distance&&(S.distance=b,S.predecessor=u,c.decrease(x,b))};for(i.nodes().forEach(function(g){var x=g===s?0:Number.POSITIVE_INFINITY;l[g]={distance:x},c.add(g,x)});c.size()>0&&(u=c.removeMin(),f=l[u],f.distance!==Number.POSITIVE_INFINITY);)a(u).forEach(p);return l}return hR}var pR,j3;function eoe(){if(j3)return pR;j3=1;var t=KW();pR=e;function e(n,r,i){return n.nodes().reduce(function(s,o){return s[o]=t(n,o,r,i),s},{})}return pR}var mR,U3;function YW(){if(U3)return mR;U3=1,mR=t;function t(e){var n=0,r=[],i={},s=[];function o(a){var l=i[a]={onStack:!0,lowlink:n,index:n++};if(r.push(a),e.successors(a).forEach(function(f){Object.hasOwn(i,f)?i[f].onStack&&(l.lowlink=Math.min(l.lowlink,i[f].index)):(o(f),l.lowlink=Math.min(l.lowlink,i[f].lowlink))}),l.lowlink===l.index){var c=[],u;do u=r.pop(),i[u].onStack=!1,c.push(u);while(a!==u);s.push(c)}}return e.nodes().forEach(function(a){Object.hasOwn(i,a)||o(a)}),s}return mR}var gR,z3;function toe(){if(z3)return gR;z3=1;var t=YW();gR=e;function e(n){return t(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return gR}var yR,V3;function noe(){if(V3)return yR;V3=1,yR=e;var t=()=>1;function e(r,i,s){return n(r,i||t,s||function(o){return r.outEdges(o)})}function n(r,i,s){var o={},a=r.nodes();return a.forEach(function(l){o[l]={},o[l][l]={distance:0},a.forEach(function(c){l!==c&&(o[l][c]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(c){var u=c.v===l?c.w:c.v,f=i(c);o[l][u]={distance:f,predecessor:l}})}),a.forEach(function(l){var c=o[l];a.forEach(function(u){var f=o[u];a.forEach(function(p){var g=f[l],x=c[p],S=f[p],_=g.distance+x.distance;_<S.distance&&(S.distance=_,S.predecessor=x.predecessor)})})}),o}return yR}var vR,W3;function ZW(){if(W3)return vR;W3=1;function t(n){var r={},i={},s=[];function o(a){if(Object.hasOwn(i,a))throw new e;Object.hasOwn(r,a)||(i[a]=!0,r[a]=!0,n.predecessors(a).forEach(o),delete i[a],s.push(a))}if(n.sinks().forEach(o),Object.keys(r).length!==n.nodeCount())throw new e;return s}class e extends Error{constructor(){super(...arguments)}}return vR=t,t.CycleException=e,vR}var xR,q3;function roe(){if(q3)return xR;q3=1;var t=ZW();xR=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return xR}var bR,H3;function JW(){if(H3)return bR;H3=1,bR=t;function t(i,s,o){Array.isArray(s)||(s=[s]);var a=i.isDirected()?f=>i.successors(f):f=>i.neighbors(f),l=o==="post"?e:n,c=[],u={};return s.forEach(f=>{if(!i.hasNode(f))throw new Error("Graph does not have node: "+f);l(f,a,u,c)}),c}function e(i,s,o,a){for(var l=[[i,!1]];l.length>0;){var c=l.pop();c[1]?a.push(c[0]):Object.hasOwn(o,c[0])||(o[c[0]]=!0,l.push([c[0],!0]),r(s(c[0]),u=>l.push([u,!1])))}}function n(i,s,o,a){for(var l=[i];l.length>0;){var c=l.pop();Object.hasOwn(o,c)||(o[c]=!0,a.push(c),r(s(c),u=>l.push(u)))}}function r(i,s){for(var o=i.length;o--;)s(i[o],o,i);return i}return bR}var wR,$3;function ioe(){if($3)return wR;$3=1;var t=JW();wR=e;function e(n,r){return t(n,r,"post")}return wR}var _R,G3;function soe(){if(G3)return _R;G3=1;var t=JW();_R=e;function e(n,r){return t(n,r,"pre")}return _R}var SR,X3;function ooe(){if(X3)return SR;X3=1;var t=ck(),e=XW();SR=n;function n(r,i){var s=new t,o={},a=new e,l;function c(f){var p=f.v===l?f.w:f.v,g=a.priority(p);if(g!==void 0){var x=i(f);x<g&&(o[p]=l,a.decrease(p,x))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(f){a.add(f,Number.POSITIVE_INFINITY),s.setNode(f)}),a.decrease(r.nodes()[0],0);for(var u=!1;a.size()>0;){if(l=a.removeMin(),Object.hasOwn(o,l))s.setEdge(l,o[l]);else{if(u)throw new Error("Input graph is not connected: "+r);u=!0}r.nodeEdges(l).forEach(c)}return s}return SR}var ER,K3;function aoe(){return K3||(K3=1,ER={components:Qse(),dijkstra:KW(),dijkstraAll:eoe(),findCycles:toe(),floydWarshall:noe(),isAcyclic:roe(),postorder:ioe(),preorder:soe(),prim:ooe(),tarjan:YW(),topsort:ZW()}),ER}var MR,Y3;function Jl(){if(Y3)return MR;Y3=1;var t=Zse();return MR={Graph:t.Graph,json:Jse(),alg:aoe(),version:t.version},MR}var TR,Z3;function loe(){if(Z3)return TR;Z3=1;class t{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return e(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&e(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,o=s._prev;for(;o!==s;)i.push(JSON.stringify(o,n)),o=o._prev;return"["+i.join(", ")+"]"}}function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return TR=t,TR}var CR,J3;function coe(){if(J3)return CR;J3=1;let t=Jl().Graph,e=loe();CR=r;let n=()=>1;function r(c,u){if(c.nodeCount()<=1)return[];let f=o(c,u||n);return i(f.graph,f.buckets,f.zeroIdx).flatMap(g=>c.outEdges(g.v,g.w))}function i(c,u,f){let p=[],g=u[u.length-1],x=u[0],S;for(;c.nodeCount();){for(;S=x.dequeue();)s(c,u,f,S);for(;S=g.dequeue();)s(c,u,f,S);if(c.nodeCount()){for(let _=u.length-2;_>0;--_)if(S=u[_].dequeue(),S){p=p.concat(s(c,u,f,S,!0));break}}}return p}function s(c,u,f,p,g){let x=g?[]:void 0;return c.inEdges(p.v).forEach(S=>{let _=c.edge(S),b=c.node(S.v);g&&x.push({v:S.v,w:S.w}),b.out-=_,a(u,f,b)}),c.outEdges(p.v).forEach(S=>{let _=c.edge(S),b=S.w,E=c.node(b);E.in-=_,a(u,f,E)}),c.removeNode(p.v),x}function o(c,u){let f=new t,p=0,g=0;c.nodes().forEach(_=>{f.setNode(_,{v:_,in:0,out:0})}),c.edges().forEach(_=>{let b=f.edge(_.v,_.w)||0,E=u(_),M=b+E;f.setEdge(_.v,_.w,M),g=Math.max(g,f.node(_.v).out+=E),p=Math.max(p,f.node(_.w).in+=E)});let x=l(g+p+3).map(()=>new e),S=p+1;return f.nodes().forEach(_=>{a(x,S,f.node(_))}),{graph:f,buckets:x,zeroIdx:S}}function a(c,u,f){f.out?f.in?c[f.out-f.in+u].enqueue(f):c[c.length-1].enqueue(f):c[0].enqueue(f)}function l(c){const u=[];for(let f=0;f<c;f++)u.push(f);return u}return CR}var IR,Q3;function Ui(){if(Q3)return IR;Q3=1;let t=Jl().Graph;IR={addBorderNode:u,addDummyNode:e,applyWithChunking:g,asNonCompoundGraph:r,buildLayerMatrix:a,intersectRect:o,mapValues:N,maxRank:x,normalizeRanks:l,notime:b,partition:S,pick:k,predecessorWeights:s,range:T,removeEmptyRanks:c,simplify:n,successorWeights:i,time:_,uniqueId:M,zipObject:D};function e(L,R,A,P){let j;do j=M(P);while(L.hasNode(j));return A.dummy=R,L.setNode(j,A),j}function n(L){let R=new t().setGraph(L.graph());return L.nodes().forEach(A=>R.setNode(A,L.node(A))),L.edges().forEach(A=>{let P=R.edge(A.v,A.w)||{weight:0,minlen:1},j=L.edge(A);R.setEdge(A.v,A.w,{weight:P.weight+j.weight,minlen:Math.max(P.minlen,j.minlen)})}),R}function r(L){let R=new t({multigraph:L.isMultigraph()}).setGraph(L.graph());return L.nodes().forEach(A=>{L.children(A).length||R.setNode(A,L.node(A))}),L.edges().forEach(A=>{R.setEdge(A,L.edge(A))}),R}function i(L){let R=L.nodes().map(A=>{let P={};return L.outEdges(A).forEach(j=>{P[j.w]=(P[j.w]||0)+L.edge(j).weight}),P});return D(L.nodes(),R)}function s(L){let R=L.nodes().map(A=>{let P={};return L.inEdges(A).forEach(j=>{P[j.v]=(P[j.v]||0)+L.edge(j).weight}),P});return D(L.nodes(),R)}function o(L,R){let A=L.x,P=L.y,j=R.x-A,U=R.y-P,B=L.width/2,$=L.height/2;if(!j&&!U)throw new Error("Not possible to find intersection inside of the rectangle");let q,te;return Math.abs(U)*B>Math.abs(j)*$?(U<0&&($=-$),q=$*j/U,te=$):(j<0&&(B=-B),q=B,te=B*U/j),{x:A+q,y:P+te}}function a(L){let R=T(x(L)+1).map(()=>[]);return L.nodes().forEach(A=>{let P=L.node(A),j=P.rank;j!==void 0&&(R[j][P.order]=A)}),R}function l(L){let R=L.nodes().map(P=>{let j=L.node(P).rank;return j===void 0?Number.MAX_VALUE:j}),A=g(Math.min,R);L.nodes().forEach(P=>{let j=L.node(P);Object.hasOwn(j,"rank")&&(j.rank-=A)})}function c(L){let R=L.nodes().map(B=>L.node(B).rank),A=g(Math.min,R),P=[];L.nodes().forEach(B=>{let $=L.node(B).rank-A;P[$]||(P[$]=[]),P[$].push(B)});let j=0,U=L.graph().nodeRankFactor;Array.from(P).forEach((B,$)=>{B===void 0&&$%U!==0?--j:B!==void 0&&j&&B.forEach(q=>L.node(q).rank+=j)})}function u(L,R,A,P){let j={width:0,height:0};return arguments.length>=4&&(j.rank=A,j.order=P),e(L,"border",j,R)}function f(L,R=p){const A=[];for(let P=0;P<L.length;P+=R){const j=L.slice(P,P+R);A.push(j)}return A}const p=65535;function g(L,R){if(R.length>p){const A=f(R);return L.apply(null,A.map(P=>L.apply(null,P)))}else return L.apply(null,R)}function x(L){const A=L.nodes().map(P=>{let j=L.node(P).rank;return j===void 0?Number.MIN_VALUE:j});return g(Math.max,A)}function S(L,R){let A={lhs:[],rhs:[]};return L.forEach(P=>{R(P)?A.lhs.push(P):A.rhs.push(P)}),A}function _(L,R){let A=Date.now();try{return R()}finally{console.log(L+" time: "+(Date.now()-A)+"ms")}}function b(L,R){return R()}let E=0;function M(L){var R=++E;return toString(L)+R}function T(L,R,A=1){R==null&&(R=L,L=0);let P=U=>U<R;A<0&&(P=U=>R<U);const j=[];for(let U=L;P(U);U+=A)j.push(U);return j}function k(L,R){const A={};for(const P of R)L[P]!==void 0&&(A[P]=L[P]);return A}function N(L,R){let A=R;return typeof R=="string"&&(A=P=>P[R]),Object.entries(L).reduce((P,[j,U])=>(P[j]=A(U,j),P),{})}function D(L,R){return L.reduce((A,P,j)=>(A[P]=R[j],A),{})}return IR}var RR,eB;function uoe(){if(eB)return RR;eB=1;let t=coe(),e=Ui().uniqueId;RR={run:n,undo:i};function n(s){(s.graph().acyclicer==="greedy"?t(s,a(s)):r(s)).forEach(l=>{let c=s.edge(l);s.removeEdge(l),c.forwardName=l.name,c.reversed=!0,s.setEdge(l.w,l.v,c,e("rev"))});function a(l){return c=>l.edge(c).weight}}function r(s){let o=[],a={},l={};function c(u){Object.hasOwn(l,u)||(l[u]=!0,a[u]=!0,s.outEdges(u).forEach(f=>{Object.hasOwn(a,f.w)?o.push(f):c(f.w)}),delete a[u])}return s.nodes().forEach(c),o}function i(s){s.edges().forEach(o=>{let a=s.edge(o);if(a.reversed){s.removeEdge(o);let l=a.forwardName;delete a.reversed,delete a.forwardName,s.setEdge(o.w,o.v,a,l)}})}return RR}var AR,tB;function doe(){if(tB)return AR;tB=1;let t=Ui();AR={run:e,undo:r};function e(i){i.graph().dummyChains=[],i.edges().forEach(s=>n(i,s))}function n(i,s){let o=s.v,a=i.node(o).rank,l=s.w,c=i.node(l).rank,u=s.name,f=i.edge(s),p=f.labelRank;if(c===a+1)return;i.removeEdge(s);let g,x,S;for(S=0,++a;a<c;++S,++a)f.points=[],x={width:0,height:0,edgeLabel:f,edgeObj:s,rank:a},g=t.addDummyNode(i,"edge",x,"_d"),a===p&&(x.width=f.width,x.height=f.height,x.dummy="edge-label",x.labelpos=f.labelpos),i.setEdge(o,g,{weight:f.weight},u),S===0&&i.graph().dummyChains.push(g),o=g;i.setEdge(o,l,{weight:f.weight},u)}function r(i){i.graph().dummyChains.forEach(s=>{let o=i.node(s),a=o.edgeLabel,l;for(i.setEdge(o.edgeObj,a);o.dummy;)l=i.successors(s)[0],i.removeNode(s),a.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(a.x=o.x,a.y=o.y,a.width=o.width,a.height=o.height),s=l,o=i.node(s)})}return AR}var NR,nB;function yE(){if(nB)return NR;nB=1;const{applyWithChunking:t}=Ui();NR={longestPath:e,slack:n};function e(r){var i={};function s(o){var a=r.node(o);if(Object.hasOwn(i,o))return a.rank;i[o]=!0;let l=r.outEdges(o).map(u=>u==null?Number.POSITIVE_INFINITY:s(u.w)-r.edge(u).minlen);var c=t(Math.min,l);return c===Number.POSITIVE_INFINITY&&(c=0),a.rank=c}r.sources().forEach(s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return NR}var PR,rB;function QW(){if(rB)return PR;rB=1;var t=Jl().Graph,e=yE().slack;PR=n;function n(o){var a=new t({directed:!1}),l=o.nodes()[0],c=o.nodeCount();a.setNode(l,{});for(var u,f;r(a,o)<c;)u=i(a,o),f=a.hasNode(u.v)?e(o,u):-e(o,u),s(a,o,f);return a}function r(o,a){function l(c){a.nodeEdges(c).forEach(u=>{var f=u.v,p=c===f?u.w:f;!o.hasNode(p)&&!e(a,u)&&(o.setNode(p,{}),o.setEdge(c,p,{}),l(p))})}return o.nodes().forEach(l),o.nodeCount()}function i(o,a){return a.edges().reduce((c,u)=>{let f=Number.POSITIVE_INFINITY;return o.hasNode(u.v)!==o.hasNode(u.w)&&(f=e(a,u)),f<c[0]?[f,u]:c},[Number.POSITIVE_INFINITY,null])[1]}function s(o,a,l){o.nodes().forEach(c=>a.node(c).rank+=l)}return PR}var kR,iB;function foe(){if(iB)return kR;iB=1;var t=QW(),e=yE().slack,n=yE().longestPath,r=Jl().alg.preorder,i=Jl().alg.postorder,s=Ui().simplify;kR=o,o.initLowLimValues=u,o.initCutValues=a,o.calcCutValue=c,o.leaveEdge=p,o.enterEdge=g,o.exchangeEdges=x;function o(E){E=s(E),n(E);var M=t(E);u(M),a(M,E);for(var T,k;T=p(M);)k=g(M,E,T),x(M,E,T,k)}function a(E,M){var T=i(E,E.nodes());T=T.slice(0,T.length-1),T.forEach(k=>l(E,M,k))}function l(E,M,T){var k=E.node(T),N=k.parent;E.edge(T,N).cutvalue=c(E,M,T)}function c(E,M,T){var k=E.node(T),N=k.parent,D=!0,L=M.edge(T,N),R=0;return L||(D=!1,L=M.edge(N,T)),R=L.weight,M.nodeEdges(T).forEach(A=>{var P=A.v===T,j=P?A.w:A.v;if(j!==N){var U=P===D,B=M.edge(A).weight;if(R+=U?B:-B,_(E,T,j)){var $=E.edge(T,j).cutvalue;R+=U?-$:$}}}),R}function u(E,M){arguments.length<2&&(M=E.nodes()[0]),f(E,{},1,M)}function f(E,M,T,k,N){var D=T,L=E.node(k);return M[k]=!0,E.neighbors(k).forEach(R=>{Object.hasOwn(M,R)||(T=f(E,M,T,R,k))}),L.low=D,L.lim=T++,N?L.parent=N:delete L.parent,T}function p(E){return E.edges().find(M=>E.edge(M).cutvalue<0)}function g(E,M,T){var k=T.v,N=T.w;M.hasEdge(k,N)||(k=T.w,N=T.v);var D=E.node(k),L=E.node(N),R=D,A=!1;D.lim>L.lim&&(R=L,A=!0);var P=M.edges().filter(j=>A===b(E,E.node(j.v),R)&&A!==b(E,E.node(j.w),R));return P.reduce((j,U)=>e(M,U)<e(M,j)?U:j)}function x(E,M,T,k){var N=T.v,D=T.w;E.removeEdge(N,D),E.setEdge(k.v,k.w,{}),u(E),a(E,M),S(E,M)}function S(E,M){var T=E.nodes().find(N=>!M.node(N).parent),k=r(E,T);k=k.slice(1),k.forEach(N=>{var D=E.node(N).parent,L=M.edge(N,D),R=!1;L||(L=M.edge(D,N),R=!0),M.node(N).rank=M.node(D).rank+(R?L.minlen:-L.minlen)})}function _(E,M,T){return E.hasEdge(M,T)}function b(E,M,T){return T.low<=M.lim&&M.lim<=T.lim}return kR}var OR,sB;function hoe(){if(sB)return OR;sB=1;var t=yE(),e=t.longestPath,n=QW(),r=foe();OR=i;function i(l){switch(l.graph().ranker){case"network-simplex":a(l);break;case"tight-tree":o(l);break;case"longest-path":s(l);break;default:a(l)}}var s=e;function o(l){e(l),n(l)}function a(l){r(l)}return OR}var LR,oB;function poe(){if(oB)return LR;oB=1,LR=t;function t(r){let i=n(r);r.graph().dummyChains.forEach(s=>{let o=r.node(s),a=o.edgeObj,l=e(r,i,a.v,a.w),c=l.path,u=l.lca,f=0,p=c[f],g=!0;for(;s!==a.w;){if(o=r.node(s),g){for(;(p=c[f])!==u&&r.node(p).maxRank<o.rank;)f++;p===u&&(g=!1)}if(!g){for(;f<c.length-1&&r.node(p=c[f+1]).minRank<=o.rank;)f++;p=c[f]}r.setParent(s,p),s=r.successors(s)[0]}})}function e(r,i,s,o){let a=[],l=[],c=Math.min(i[s].low,i[o].low),u=Math.max(i[s].lim,i[o].lim),f,p;f=s;do f=r.parent(f),a.push(f);while(f&&(i[f].low>c||u>i[f].lim));for(p=f,f=o;(f=r.parent(f))!==p;)l.push(f);return{path:a.concat(l.reverse()),lca:p}}function n(r){let i={},s=0;function o(a){let l=s;r.children(a).forEach(o),i[a]={low:l,lim:s++}}return r.children().forEach(o),i}return LR}var DR,aB;function moe(){if(aB)return DR;aB=1;let t=Ui();DR={run:e,cleanup:s};function e(o){let a=t.addDummyNode(o,"root",{},"_root"),l=r(o),c=Object.values(l),u=t.applyWithChunking(Math.max,c)-1,f=2*u+1;o.graph().nestingRoot=a,o.edges().forEach(g=>o.edge(g).minlen*=f);let p=i(o)+1;o.children().forEach(g=>n(o,a,f,p,u,l,g)),o.graph().nodeRankFactor=f}function n(o,a,l,c,u,f,p){let g=o.children(p);if(!g.length){p!==a&&o.setEdge(a,p,{weight:0,minlen:l});return}let x=t.addBorderNode(o,"_bt"),S=t.addBorderNode(o,"_bb"),_=o.node(p);o.setParent(x,p),_.borderTop=x,o.setParent(S,p),_.borderBottom=S,g.forEach(b=>{n(o,a,l,c,u,f,b);let E=o.node(b),M=E.borderTop?E.borderTop:b,T=E.borderBottom?E.borderBottom:b,k=E.borderTop?c:2*c,N=M!==T?1:u-f[p]+1;o.setEdge(x,M,{weight:k,minlen:N,nestingEdge:!0}),o.setEdge(T,S,{weight:k,minlen:N,nestingEdge:!0})}),o.parent(p)||o.setEdge(a,x,{weight:0,minlen:u+f[p]})}function r(o){var a={};function l(c,u){var f=o.children(c);f&&f.length&&f.forEach(p=>l(p,u+1)),a[c]=u}return o.children().forEach(c=>l(c,1)),a}function i(o){return o.edges().reduce((a,l)=>a+o.edge(l).weight,0)}function s(o){var a=o.graph();o.removeNode(a.nestingRoot),delete a.nestingRoot,o.edges().forEach(l=>{var c=o.edge(l);c.nestingEdge&&o.removeEdge(l)})}return DR}var FR,lB;function goe(){if(lB)return FR;lB=1;let t=Ui();FR=e;function e(r){function i(s){let o=r.children(s),a=r.node(s);if(o.length&&o.forEach(i),Object.hasOwn(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(let l=a.minRank,c=a.maxRank+1;l<c;++l)n(r,"borderLeft","_bl",s,a,l),n(r,"borderRight","_br",s,a,l)}}r.children().forEach(i)}function n(r,i,s,o,a,l){let c={width:0,height:0,rank:l,borderType:i},u=a[i][l-1],f=t.addDummyNode(r,"border",c,s);a[i][l]=f,r.setParent(f,o),u&&r.setEdge(u,f,{weight:1})}return FR}var BR,cB;function yoe(){if(cB)return BR;cB=1,BR={adjust:t,undo:e};function t(l){let c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(l)}function e(l){let c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&i(l),(c==="lr"||c==="rl")&&(o(l),n(l))}function n(l){l.nodes().forEach(c=>r(l.node(c))),l.edges().forEach(c=>r(l.edge(c)))}function r(l){let c=l.width;l.width=l.height,l.height=c}function i(l){l.nodes().forEach(c=>s(l.node(c))),l.edges().forEach(c=>{let u=l.edge(c);u.points.forEach(s),Object.hasOwn(u,"y")&&s(u)})}function s(l){l.y=-l.y}function o(l){l.nodes().forEach(c=>a(l.node(c))),l.edges().forEach(c=>{let u=l.edge(c);u.points.forEach(a),Object.hasOwn(u,"x")&&a(u)})}function a(l){let c=l.x;l.x=l.y,l.y=c}return BR}var jR,uB;function voe(){if(uB)return jR;uB=1;let t=Ui();jR=e;function e(n){let r={},i=n.nodes().filter(u=>!n.children(u).length),s=i.map(u=>n.node(u).rank),o=t.applyWithChunking(Math.max,s),a=t.range(o+1).map(()=>[]);function l(u){if(r[u])return;r[u]=!0;let f=n.node(u);a[f.rank].push(u),n.successors(u).forEach(l)}return i.sort((u,f)=>n.node(u).rank-n.node(f).rank).forEach(l),a}return jR}var UR,dB;function xoe(){if(dB)return UR;dB=1;let t=Ui().zipObject;UR=e;function e(r,i){let s=0;for(let o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){let o=t(s,s.map((p,g)=>g)),a=i.flatMap(p=>r.outEdges(p).map(g=>({pos:o[g.w],weight:r.edge(g).weight})).sort((g,x)=>g.pos-x.pos)),l=1;for(;l<s.length;)l<<=1;let c=2*l-1;l-=1;let u=new Array(c).fill(0),f=0;return a.forEach(p=>{let g=p.pos+l;u[g]+=p.weight;let x=0;for(;g>0;)g%2&&(x+=u[g+1]),g=g-1>>1,u[g]+=p.weight;f+=p.weight*x}),f}return UR}var zR,fB;function boe(){if(fB)return zR;fB=1,zR=t;function t(e,n=[]){return n.map(r=>{let i=e.inEdges(r);if(i.length){let s=i.reduce((o,a)=>{let l=e.edge(a),c=e.node(a.v);return{sum:o.sum+l.weight*c.order,weight:o.weight+l.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return zR}var VR,hB;function woe(){if(hB)return VR;hB=1;let t=Ui();VR=e;function e(i,s){let o={};i.forEach((l,c)=>{let u=o[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:c};l.barycenter!==void 0&&(u.barycenter=l.barycenter,u.weight=l.weight)}),s.edges().forEach(l=>{let c=o[l.v],u=o[l.w];c!==void 0&&u!==void 0&&(u.indegree++,c.out.push(o[l.w]))});let a=Object.values(o).filter(l=>!l.indegree);return n(a)}function n(i){let s=[];function o(l){return c=>{c.merged||(c.barycenter===void 0||l.barycenter===void 0||c.barycenter>=l.barycenter)&&r(l,c)}}function a(l){return c=>{c.in.push(l),--c.indegree===0&&i.push(c)}}for(;i.length;){let l=i.pop();s.push(l),l.in.reverse().forEach(o(l)),l.out.forEach(a(l))}return s.filter(l=>!l.merged).map(l=>t.pick(l,["vs","i","barycenter","weight"]))}function r(i,s){let o=0,a=0;i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),s.weight&&(o+=s.barycenter*s.weight,a+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/a,i.weight=a,i.i=Math.min(s.i,i.i),s.merged=!0}return VR}var WR,pB;function _oe(){if(pB)return WR;pB=1;let t=Ui();WR=e;function e(i,s){let o=t.partition(i,x=>Object.hasOwn(x,"barycenter")),a=o.lhs,l=o.rhs.sort((x,S)=>S.i-x.i),c=[],u=0,f=0,p=0;a.sort(r(!!s)),p=n(c,l,p),a.forEach(x=>{p+=x.vs.length,c.push(x.vs),u+=x.barycenter*x.weight,f+=x.weight,p=n(c,l,p)});let g={vs:c.flat(!0)};return f&&(g.barycenter=u/f,g.weight=f),g}function n(i,s,o){let a;for(;s.length&&(a=s[s.length-1]).i<=o;)s.pop(),i.push(a.vs),o++;return o}function r(i){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}return WR}var qR,mB;function Soe(){if(mB)return qR;mB=1;let t=boe(),e=woe(),n=_oe();qR=r;function r(o,a,l,c){let u=o.children(a),f=o.node(a),p=f?f.borderLeft:void 0,g=f?f.borderRight:void 0,x={};p&&(u=u.filter(E=>E!==p&&E!==g));let S=t(o,u);S.forEach(E=>{if(o.children(E.v).length){let M=r(o,E.v,l,c);x[E.v]=M,Object.hasOwn(M,"barycenter")&&s(E,M)}});let _=e(S,l);i(_,x);let b=n(_,c);if(p&&(b.vs=[p,b.vs,g].flat(!0),o.predecessors(p).length)){let E=o.node(o.predecessors(p)[0]),M=o.node(o.predecessors(g)[0]);Object.hasOwn(b,"barycenter")||(b.barycenter=0,b.weight=0),b.barycenter=(b.barycenter*b.weight+E.order+M.order)/(b.weight+2),b.weight+=2}return b}function i(o,a){o.forEach(l=>{l.vs=l.vs.flatMap(c=>a[c]?a[c].vs:c)})}function s(o,a){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight):(o.barycenter=a.barycenter,o.weight=a.weight)}return qR}var HR,gB;function Eoe(){if(gB)return HR;gB=1;let t=Jl().Graph,e=Ui();HR=n;function n(i,s,o){let a=r(i),l=new t({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(c=>i.node(c));return i.nodes().forEach(c=>{let u=i.node(c),f=i.parent(c);(u.rank===s||u.minRank<=s&&s<=u.maxRank)&&(l.setNode(c),l.setParent(c,f||a),i[o](c).forEach(p=>{let g=p.v===c?p.w:p.v,x=l.edge(g,c),S=x!==void 0?x.weight:0;l.setEdge(g,c,{weight:i.edge(p).weight+S})}),Object.hasOwn(u,"minRank")&&l.setNode(c,{borderLeft:u.borderLeft[s],borderRight:u.borderRight[s]}))}),l}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return HR}var $R,yB;function Moe(){if(yB)return $R;yB=1,$R=t;function t(e,n,r){let i={},s;r.forEach(o=>{let a=e.parent(o),l,c;for(;a;){if(l=e.parent(a),l?(c=i[l],i[l]=a):(c=s,s=a),c&&c!==a){n.setEdge(c,a);return}a=l}})}return $R}var GR,vB;function Toe(){if(vB)return GR;vB=1;let t=voe(),e=xoe(),n=Soe(),r=Eoe(),i=Moe(),s=Jl().Graph,o=Ui();GR=a;function a(f,p){if(p&&typeof p.customOrder=="function"){p.customOrder(f,a);return}let g=o.maxRank(f),x=l(f,o.range(1,g+1),"inEdges"),S=l(f,o.range(g-1,-1,-1),"outEdges"),_=t(f);if(u(f,_),p&&p.disableOptimalOrderHeuristic)return;let b=Number.POSITIVE_INFINITY,E;for(let M=0,T=0;T<4;++M,++T){c(M%2?x:S,M%4>=2),_=o.buildLayerMatrix(f);let k=e(f,_);k<b&&(T=0,E=Object.assign({},_),b=k)}u(f,E)}function l(f,p,g){return p.map(function(x){return r(f,x,g)})}function c(f,p){let g=new s;f.forEach(function(x){let S=x.graph().root,_=n(x,S,g,p);_.vs.forEach((b,E)=>x.node(b).order=E),i(x,g,_.vs)})}function u(f,p){Object.values(p).forEach(g=>g.forEach((x,S)=>f.node(x).order=S))}return GR}var XR,xB;function Coe(){if(xB)return XR;xB=1;let t=Jl().Graph,e=Ui();XR={positionX:g,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:o,verticalAlignment:a,horizontalCompaction:l,alignCoordinates:f,findSmallestWidthAlignment:u,balance:p};function n(_,b){let E={};function M(T,k){let N=0,D=0,L=T.length,R=k[k.length-1];return k.forEach((A,P)=>{let j=i(_,A),U=j?_.node(j).order:L;(j||A===R)&&(k.slice(D,P+1).forEach(B=>{_.predecessors(B).forEach($=>{let q=_.node($),te=q.order;(te<N||U<te)&&!(q.dummy&&_.node(B).dummy)&&s(E,$,B)})}),D=P+1,N=U)}),k}return b.length&&b.reduce(M),E}function r(_,b){let E={};function M(k,N,D,L,R){let A;e.range(N,D).forEach(P=>{A=k[P],_.node(A).dummy&&_.predecessors(A).forEach(j=>{let U=_.node(j);U.dummy&&(U.order<L||U.order>R)&&s(E,j,A)})})}function T(k,N){let D=-1,L,R=0;return N.forEach((A,P)=>{if(_.node(A).dummy==="border"){let j=_.predecessors(A);j.length&&(L=_.node(j[0]).order,M(N,R,P,D,L),R=P,D=L)}M(N,R,N.length,L,k.length)}),N}return b.length&&b.reduce(T),E}function i(_,b){if(_.node(b).dummy)return _.predecessors(b).find(E=>_.node(E).dummy)}function s(_,b,E){if(b>E){let T=b;b=E,E=T}let M=_[b];M||(_[b]=M={}),M[E]=!0}function o(_,b,E){if(b>E){let M=b;b=E,E=M}return!!_[b]&&Object.hasOwn(_[b],E)}function a(_,b,E,M){let T={},k={},N={};return b.forEach(D=>{D.forEach((L,R)=>{T[L]=L,k[L]=L,N[L]=R})}),b.forEach(D=>{let L=-1;D.forEach(R=>{let A=M(R);if(A.length){A=A.sort((j,U)=>N[j]-N[U]);let P=(A.length-1)/2;for(let j=Math.floor(P),U=Math.ceil(P);j<=U;++j){let B=A[j];k[R]===R&&L<N[B]&&!o(E,R,B)&&(k[B]=R,k[R]=T[R]=T[B],L=N[B])}}})}),{root:T,align:k}}function l(_,b,E,M,T){let k={},N=c(_,b,E,T),D=T?"borderLeft":"borderRight";function L(P,j){let U=N.nodes(),B=U.pop(),$={};for(;B;)$[B]?P(B):($[B]=!0,U.push(B),U=U.concat(j(B))),B=U.pop()}function R(P){k[P]=N.inEdges(P).reduce((j,U)=>Math.max(j,k[U.v]+N.edge(U)),0)}function A(P){let j=N.outEdges(P).reduce((B,$)=>Math.min(B,k[$.w]-N.edge($)),Number.POSITIVE_INFINITY),U=_.node(P);j!==Number.POSITIVE_INFINITY&&U.borderType!==D&&(k[P]=Math.max(k[P],j))}return L(R,N.predecessors.bind(N)),L(A,N.successors.bind(N)),Object.keys(M).forEach(P=>k[P]=k[E[P]]),k}function c(_,b,E,M){let T=new t,k=_.graph(),N=x(k.nodesep,k.edgesep,M);return b.forEach(D=>{let L;D.forEach(R=>{let A=E[R];if(T.setNode(A),L){var P=E[L],j=T.edge(P,A);T.setEdge(P,A,Math.max(N(_,R,L),j||0))}L=R})}),T}function u(_,b){return Object.values(b).reduce((E,M)=>{let T=Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY;Object.entries(M).forEach(([D,L])=>{let R=S(_,D)/2;T=Math.max(L+R,T),k=Math.min(L-R,k)});const N=T-k;return N<E[0]&&(E=[N,M]),E},[Number.POSITIVE_INFINITY,null])[1]}function f(_,b){let E=Object.values(b),M=e.applyWithChunking(Math.min,E),T=e.applyWithChunking(Math.max,E);["u","d"].forEach(k=>{["l","r"].forEach(N=>{let D=k+N,L=_[D];if(L===b)return;let R=Object.values(L),A=M-e.applyWithChunking(Math.min,R);N!=="l"&&(A=T-e.applyWithChunking(Math.max,R)),A&&(_[D]=e.mapValues(L,P=>P+A))})})}function p(_,b){return e.mapValues(_.ul,(E,M)=>{if(b)return _[b.toLowerCase()][M];{let T=Object.values(_).map(k=>k[M]).sort((k,N)=>k-N);return(T[1]+T[2])/2}})}function g(_){let b=e.buildLayerMatrix(_),E=Object.assign(n(_,b),r(_,b)),M={},T;["u","d"].forEach(N=>{T=N==="u"?b:Object.values(b).reverse(),["l","r"].forEach(D=>{D==="r"&&(T=T.map(P=>Object.values(P).reverse()));let L=(N==="u"?_.predecessors:_.successors).bind(_),R=a(_,T,E,L),A=l(_,T,R.root,R.align,D==="r");D==="r"&&(A=e.mapValues(A,P=>-P)),M[N+D]=A})});let k=u(_,M);return f(M,k),p(M,_.graph().align)}function x(_,b,E){return(M,T,k)=>{let N=M.node(T),D=M.node(k),L=0,R;if(L+=N.width/2,Object.hasOwn(N,"labelpos"))switch(N.labelpos.toLowerCase()){case"l":R=-N.width/2;break;case"r":R=N.width/2;break}if(R&&(L+=E?R:-R),R=0,L+=(N.dummy?b:_)/2,L+=(D.dummy?b:_)/2,L+=D.width/2,Object.hasOwn(D,"labelpos"))switch(D.labelpos.toLowerCase()){case"l":R=D.width/2;break;case"r":R=-D.width/2;break}return R&&(L+=E?R:-R),R=0,L}}function S(_,b){return _.node(b).width}return XR}var KR,bB;function Ioe(){if(bB)return KR;bB=1;let t=Ui(),e=Coe().positionX;KR=n;function n(i){i=t.asNonCompoundGraph(i),r(i),Object.entries(e(i)).forEach(([s,o])=>i.node(s).x=o)}function r(i){let s=t.buildLayerMatrix(i),o=i.graph().ranksep,a=0;s.forEach(l=>{const c=l.reduce((u,f)=>{const p=i.node(f).height;return u>p?u:p},0);l.forEach(u=>i.node(u).y=a+c/2),a+=c+o})}return KR}var YR,wB;function Roe(){if(wB)return YR;wB=1;let t=uoe(),e=doe(),n=hoe(),r=Ui().normalizeRanks,i=poe(),s=Ui().removeEmptyRanks,o=moe(),a=goe(),l=yoe(),c=Toe(),u=Ioe(),f=Ui(),p=Jl().Graph;YR=g;function g(ce,ie){let ue=ie&&ie.debugTiming?f.time:f.notime;ue("layout",()=>{let de=ue("  buildLayoutGraph",()=>L(ce));ue("  runLayout",()=>x(de,ue,ie)),ue("  updateInputGraph",()=>S(ce,de))})}function x(ce,ie,ue){ie("    makeSpaceForEdgeLabels",()=>R(ce)),ie("    removeSelfEdges",()=>W(ce)),ie("    acyclic",()=>t.run(ce)),ie("    nestingGraph.run",()=>o.run(ce)),ie("    rank",()=>n(f.asNonCompoundGraph(ce))),ie("    injectEdgeLabelProxies",()=>A(ce)),ie("    removeEmptyRanks",()=>s(ce)),ie("    nestingGraph.cleanup",()=>o.cleanup(ce)),ie("    normalizeRanks",()=>r(ce)),ie("    assignRankMinMax",()=>P(ce)),ie("    removeEdgeLabelProxies",()=>j(ce)),ie("    normalize.run",()=>e.run(ce)),ie("    parentDummyChains",()=>i(ce)),ie("    addBorderSegments",()=>a(ce)),ie("    order",()=>c(ce,ue)),ie("    insertSelfEdges",()=>Z(ce)),ie("    adjustCoordinateSystem",()=>l.adjust(ce)),ie("    position",()=>u(ce)),ie("    positionSelfEdges",()=>J(ce)),ie("    removeBorderNodes",()=>te(ce)),ie("    normalize.undo",()=>e.undo(ce)),ie("    fixupEdgeLabelCoords",()=>$(ce)),ie("    undoCoordinateSystem",()=>l.undo(ce)),ie("    translateGraph",()=>U(ce)),ie("    assignNodeIntersects",()=>B(ce)),ie("    reversePoints",()=>q(ce)),ie("    acyclic.undo",()=>t.undo(ce))}function S(ce,ie){ce.nodes().forEach(ue=>{let de=ce.node(ue),be=ie.node(ue);de&&(de.x=be.x,de.y=be.y,de.rank=be.rank,ie.children(ue).length&&(de.width=be.width,de.height=be.height))}),ce.edges().forEach(ue=>{let de=ce.edge(ue),be=ie.edge(ue);de.points=be.points,Object.hasOwn(be,"x")&&(de.x=be.x,de.y=be.y)}),ce.graph().width=ie.graph().width,ce.graph().height=ie.graph().height}let _=["nodesep","edgesep","ranksep","marginx","marginy"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},E=["acyclicer","ranker","rankdir","align"],M=["width","height"],T={width:0,height:0},k=["minlen","weight","width","height","labeloffset"],N={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},D=["labelpos"];function L(ce){let ie=new p({multigraph:!0,compound:!0}),ue=oe(ce.graph());return ie.setGraph(Object.assign({},b,Y(ue,_),f.pick(ue,E))),ce.nodes().forEach(de=>{let be=oe(ce.node(de));const we=Y(be,M);Object.keys(T).forEach(Ce=>{we[Ce]===void 0&&(we[Ce]=T[Ce])}),ie.setNode(de,we),ie.setParent(de,ce.parent(de))}),ce.edges().forEach(de=>{let be=oe(ce.edge(de));ie.setEdge(de,Object.assign({},N,Y(be,k),f.pick(be,D)))}),ie}function R(ce){let ie=ce.graph();ie.ranksep/=2,ce.edges().forEach(ue=>{let de=ce.edge(ue);de.minlen*=2,de.labelpos.toLowerCase()!=="c"&&(ie.rankdir==="TB"||ie.rankdir==="BT"?de.width+=de.labeloffset:de.height+=de.labeloffset)})}function A(ce){ce.edges().forEach(ie=>{let ue=ce.edge(ie);if(ue.width&&ue.height){let de=ce.node(ie.v),we={rank:(ce.node(ie.w).rank-de.rank)/2+de.rank,e:ie};f.addDummyNode(ce,"edge-proxy",we,"_ep")}})}function P(ce){let ie=0;ce.nodes().forEach(ue=>{let de=ce.node(ue);de.borderTop&&(de.minRank=ce.node(de.borderTop).rank,de.maxRank=ce.node(de.borderBottom).rank,ie=Math.max(ie,de.maxRank))}),ce.graph().maxRank=ie}function j(ce){ce.nodes().forEach(ie=>{let ue=ce.node(ie);ue.dummy==="edge-proxy"&&(ce.edge(ue.e).labelRank=ue.rank,ce.removeNode(ie))})}function U(ce){let ie=Number.POSITIVE_INFINITY,ue=0,de=Number.POSITIVE_INFINITY,be=0,we=ce.graph(),Ce=we.marginx||0,Ie=we.marginy||0;function Fe(ve){let _e=ve.x,se=ve.y,$e=ve.width,je=ve.height;ie=Math.min(ie,_e-$e/2),ue=Math.max(ue,_e+$e/2),de=Math.min(de,se-je/2),be=Math.max(be,se+je/2)}ce.nodes().forEach(ve=>Fe(ce.node(ve))),ce.edges().forEach(ve=>{let _e=ce.edge(ve);Object.hasOwn(_e,"x")&&Fe(_e)}),ie-=Ce,de-=Ie,ce.nodes().forEach(ve=>{let _e=ce.node(ve);_e.x-=ie,_e.y-=de}),ce.edges().forEach(ve=>{let _e=ce.edge(ve);_e.points.forEach(se=>{se.x-=ie,se.y-=de}),Object.hasOwn(_e,"x")&&(_e.x-=ie),Object.hasOwn(_e,"y")&&(_e.y-=de)}),we.width=ue-ie+Ce,we.height=be-de+Ie}function B(ce){ce.edges().forEach(ie=>{let ue=ce.edge(ie),de=ce.node(ie.v),be=ce.node(ie.w),we,Ce;ue.points?(we=ue.points[0],Ce=ue.points[ue.points.length-1]):(ue.points=[],we=be,Ce=de),ue.points.unshift(f.intersectRect(de,we)),ue.points.push(f.intersectRect(be,Ce))})}function $(ce){ce.edges().forEach(ie=>{let ue=ce.edge(ie);if(Object.hasOwn(ue,"x"))switch((ue.labelpos==="l"||ue.labelpos==="r")&&(ue.width-=ue.labeloffset),ue.labelpos){case"l":ue.x-=ue.width/2+ue.labeloffset;break;case"r":ue.x+=ue.width/2+ue.labeloffset;break}})}function q(ce){ce.edges().forEach(ie=>{let ue=ce.edge(ie);ue.reversed&&ue.points.reverse()})}function te(ce){ce.nodes().forEach(ie=>{if(ce.children(ie).length){let ue=ce.node(ie),de=ce.node(ue.borderTop),be=ce.node(ue.borderBottom),we=ce.node(ue.borderLeft[ue.borderLeft.length-1]),Ce=ce.node(ue.borderRight[ue.borderRight.length-1]);ue.width=Math.abs(Ce.x-we.x),ue.height=Math.abs(be.y-de.y),ue.x=we.x+ue.width/2,ue.y=de.y+ue.height/2}}),ce.nodes().forEach(ie=>{ce.node(ie).dummy==="border"&&ce.removeNode(ie)})}function W(ce){ce.edges().forEach(ie=>{if(ie.v===ie.w){var ue=ce.node(ie.v);ue.selfEdges||(ue.selfEdges=[]),ue.selfEdges.push({e:ie,label:ce.edge(ie)}),ce.removeEdge(ie)}})}function Z(ce){var ie=f.buildLayerMatrix(ce);ie.forEach(ue=>{var de=0;ue.forEach((be,we)=>{var Ce=ce.node(be);Ce.order=we+de,(Ce.selfEdges||[]).forEach(Ie=>{f.addDummyNode(ce,"selfedge",{width:Ie.label.width,height:Ie.label.height,rank:Ce.rank,order:we+ ++de,e:Ie.e,label:Ie.label},"_se")}),delete Ce.selfEdges})})}function J(ce){ce.nodes().forEach(ie=>{var ue=ce.node(ie);if(ue.dummy==="selfedge"){var de=ce.node(ue.e.v),be=de.x+de.width/2,we=de.y,Ce=ue.x-be,Ie=de.height/2;ce.setEdge(ue.e,ue.label),ce.removeNode(ie),ue.label.points=[{x:be+2*Ce/3,y:we-Ie},{x:be+5*Ce/6,y:we-Ie},{x:be+Ce,y:we},{x:be+5*Ce/6,y:we+Ie},{x:be+2*Ce/3,y:we+Ie}],ue.label.x=ue.x,ue.label.y=ue.y}})}function Y(ce,ie){return f.mapValues(f.pick(ce,ie),Number)}function oe(ce){var ie={};return ce&&Object.entries(ce).forEach(([ue,de])=>{typeof ue=="string"&&(ue=ue.toLowerCase()),ie[ue]=de}),ie}return YR}var ZR,_B;function Aoe(){if(_B)return ZR;_B=1;let t=Ui(),e=Jl().Graph;ZR={debugOrdering:n};function n(r){let i=t.buildLayerMatrix(r),s=new e({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+r.node(o).rank)}),r.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),i.forEach((o,a)=>{let l="layer"+a;s.setNode(l,{rank:"same"}),o.reduce((c,u)=>(s.setEdge(c,u,{style:"invis"}),u))}),s}return ZR}var JR,SB;function Noe(){return SB||(SB=1,JR="1.1.4"),JR}var QR,EB;function Poe(){return EB||(EB=1,QR={graphlib:Jl(),layout:Roe(),debug:Aoe(),util:{time:Ui().time,notime:Ui().notime},version:Noe()}),QR}var koe=Poe();const eq=Co(koe);function Vi(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Vi(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var Ooe={value:()=>{}};function QM(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new YS(n)}function YS(t){this._=t}function Loe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}YS.prototype=QM.prototype={constructor:YS,on:function(t,e){var n=this._,r=Loe(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Doe(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=MB(n[i],t.name,e);else if(e==null)for(i in n)n[i]=MB(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new YS(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Doe(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function MB(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ooe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var hP="http://www.w3.org/1999/xhtml";const TB={svg:"http://www.w3.org/2000/svg",xhtml:hP,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function eT(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),TB.hasOwnProperty(e)?{space:TB[e],local:t}:t}function Foe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hP&&e.documentElement.namespaceURI===hP?e.createElement(t):e.createElementNS(n,t)}}function Boe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function tq(t){var e=eT(t);return(e.local?Boe:Foe)(e)}function joe(){}function uk(t){return t==null?joe:function(){return this.querySelector(t)}}function Uoe(t){typeof t!="function"&&(t=uk(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new ka(r,this._parents)}function zoe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Voe(){return[]}function nq(t){return t==null?Voe:function(){return this.querySelectorAll(t)}}function Woe(t){return function(){return zoe(t.apply(this,arguments))}}function qoe(t){typeof t=="function"?t=Woe(t):t=nq(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new ka(r,i)}function rq(t){return function(){return this.matches(t)}}function iq(t){return function(e){return e.matches(t)}}var Hoe=Array.prototype.find;function $oe(t){return function(){return Hoe.call(this.children,t)}}function Goe(){return this.firstElementChild}function Xoe(t){return this.select(t==null?Goe:$oe(typeof t=="function"?t:iq(t)))}var Koe=Array.prototype.filter;function Yoe(){return Array.from(this.children)}function Zoe(t){return function(){return Koe.call(this.children,t)}}function Joe(t){return this.selectAll(t==null?Yoe:Zoe(typeof t=="function"?t:iq(t)))}function Qoe(t){typeof t!="function"&&(t=rq(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new ka(r,this._parents)}function sq(t){return new Array(t.length)}function eae(){return new ka(this._enter||this._groups.map(sq),this._parents)}function vE(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}vE.prototype={constructor:vE,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function tae(t){return function(){return t}}function nae(t,e,n,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new vE(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function rae(t,e,n,r,i,s,o){var a,l,c=new Map,u=e.length,f=s.length,p=new Array(u),g;for(a=0;a<u;++a)(l=e[a])&&(p[a]=g=o.call(l,l.__data__,a,e)+"",c.has(g)?i[a]=l:c.set(g,l));for(a=0;a<f;++a)g=o.call(t,s[a],a,s)+"",(l=c.get(g))?(r[a]=l,l.__data__=s[a],c.delete(g)):n[a]=new vE(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(p[a])===l&&(i[a]=l)}function iae(t){return t.__data__}function sae(t,e){if(!arguments.length)return Array.from(this,iae);var n=e?rae:nae,r=this._parents,i=this._groups;typeof t!="function"&&(t=tae(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],p=f.length,g=oae(t.call(u,u&&u.__data__,c,r)),x=g.length,S=a[c]=new Array(x),_=o[c]=new Array(x),b=l[c]=new Array(p);n(u,f,S,_,b,g,e);for(var E=0,M=0,T,k;E<x;++E)if(T=S[E]){for(E>=M&&(M=E+1);!(k=_[M])&&++M<x;);T._next=k||null}}return o=new ka(o,r),o._enter=a,o._exit=l,o}function oae(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function aae(){return new ka(this._exit||this._groups.map(sq),this._parents)}function lae(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function cae(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=n[l],u=r[l],f=c.length,p=a[l]=new Array(f),g,x=0;x<f;++x)(g=c[x]||u[x])&&(p[x]=g);for(;l<i;++l)a[l]=n[l];return new ka(a,this._parents)}function uae(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function dae(t){t||(t=fae);function e(f,p){return f&&p?t(f.__data__,p.__data__):!f-!p}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new ka(i,this._parents).order()}function fae(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function hae(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function pae(){return Array.from(this)}function mae(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function gae(){let t=0;for(const e of this)++t;return t}function yae(){return!this.node()}function vae(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function xae(t){return function(){this.removeAttribute(t)}}function bae(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wae(t,e){return function(){this.setAttribute(t,e)}}function _ae(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Sae(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Eae(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Mae(t,e){var n=eT(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?bae:xae:typeof e=="function"?n.local?Eae:Sae:n.local?_ae:wae)(n,e))}function oq(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Tae(t){return function(){this.style.removeProperty(t)}}function Cae(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Iae(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Rae(t,e,n){return arguments.length>1?this.each((e==null?Tae:typeof e=="function"?Iae:Cae)(t,e,n??"")):Ny(this.node(),t)}function Ny(t,e){return t.style.getPropertyValue(e)||oq(t).getComputedStyle(t,null).getPropertyValue(e)}function Aae(t){return function(){delete this[t]}}function Nae(t,e){return function(){this[t]=e}}function Pae(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function kae(t,e){return arguments.length>1?this.each((e==null?Aae:typeof e=="function"?Pae:Nae)(t,e)):this.node()[t]}function aq(t){return t.trim().split(/^|\s+/)}function dk(t){return t.classList||new lq(t)}function lq(t){this._node=t,this._names=aq(t.getAttribute("class")||"")}lq.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function cq(t,e){for(var n=dk(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function uq(t,e){for(var n=dk(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Oae(t){return function(){cq(this,t)}}function Lae(t){return function(){uq(this,t)}}function Dae(t,e){return function(){(e.apply(this,arguments)?cq:uq)(this,t)}}function Fae(t,e){var n=aq(t+"");if(arguments.length<2){for(var r=dk(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Dae:e?Oae:Lae)(n,e))}function Bae(){this.textContent=""}function jae(t){return function(){this.textContent=t}}function Uae(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function zae(t){return arguments.length?this.each(t==null?Bae:(typeof t=="function"?Uae:jae)(t)):this.node().textContent}function Vae(){this.innerHTML=""}function Wae(t){return function(){this.innerHTML=t}}function qae(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Hae(t){return arguments.length?this.each(t==null?Vae:(typeof t=="function"?qae:Wae)(t)):this.node().innerHTML}function $ae(){this.nextSibling&&this.parentNode.appendChild(this)}function Gae(){return this.each($ae)}function Xae(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Kae(){return this.each(Xae)}function Yae(t){var e=typeof t=="function"?t:tq(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Zae(){return null}function Jae(t,e){var n=typeof t=="function"?t:tq(t),r=e==null?Zae:typeof e=="function"?e:uk(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Qae(){var t=this.parentNode;t&&t.removeChild(this)}function ele(){return this.each(Qae)}function tle(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function nle(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function rle(t){return this.select(t?nle:tle)}function ile(t){return arguments.length?this.property("__data__",t):this.node().__data__}function sle(t){return function(e){t.call(this,e,this.__data__)}}function ole(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ale(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function lle(t,e,n){return function(){var r=this.__on,i,s=sle(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function cle(t,e,n){var r=ole(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?lle:ale,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function dq(t,e,n){var r=oq(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ule(t,e){return function(){return dq(this,t,e)}}function dle(t,e){return function(){return dq(this,t,e.apply(this,arguments))}}function fle(t,e){return this.each((typeof e=="function"?dle:ule)(t,e))}function*hle(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var fq=[null];function ka(t,e){this._groups=t,this._parents=e}function Vb(){return new ka([[document.documentElement]],fq)}function ple(){return this}ka.prototype=Vb.prototype={constructor:ka,select:Uoe,selectAll:qoe,selectChild:Xoe,selectChildren:Joe,filter:Qoe,data:sae,enter:eae,exit:aae,join:lae,merge:cae,selection:ple,order:uae,sort:dae,call:hae,nodes:pae,node:mae,size:gae,empty:yae,each:vae,attr:Mae,style:Rae,property:kae,classed:Fae,text:zae,html:Hae,raise:Gae,lower:Kae,append:Yae,insert:Jae,remove:ele,clone:rle,datum:ile,on:cle,dispatch:fle,[Symbol.iterator]:hle};function Ta(t){return typeof t=="string"?new ka([[document.querySelector(t)]],[document.documentElement]):new ka([[t]],fq)}function mle(t){let e;for(;e=t.sourceEvent;)t=e;return t}function jl(t,e){if(t=mle(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const gle={passive:!1},H0={capture:!0,passive:!1};function eA(t){t.stopImmediatePropagation()}function vy(t){t.preventDefault(),t.stopImmediatePropagation()}function hq(t){var e=t.document.documentElement,n=Ta(t).on("dragstart.drag",vy,H0);"onselectstart"in e?n.on("selectstart.drag",vy,H0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function pq(t,e){var n=t.document.documentElement,r=Ta(t).on("dragstart.drag",null);e&&(r.on("click.drag",vy,H0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const T_=t=>()=>t;function pP(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}pP.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function yle(t){return!t.ctrlKey&&!t.button}function vle(){return this.parentNode}function xle(t,e){return e??{x:t.x,y:t.y}}function ble(){return navigator.maxTouchPoints||"ontouchstart"in this}function mq(){var t=yle,e=vle,n=xle,r=ble,i={},s=QM("start","drag","end"),o=0,a,l,c,u,f=0;function p(T){T.on("mousedown.drag",g).filter(r).on("touchstart.drag",_).on("touchmove.drag",b,gle).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(T,k){if(!(u||!t.call(this,T,k))){var N=M(this,e.call(this,T,k),T,k,"mouse");N&&(Ta(T.view).on("mousemove.drag",x,H0).on("mouseup.drag",S,H0),hq(T.view),eA(T),c=!1,a=T.clientX,l=T.clientY,N("start",T))}}function x(T){if(vy(T),!c){var k=T.clientX-a,N=T.clientY-l;c=k*k+N*N>f}i.mouse("drag",T)}function S(T){Ta(T.view).on("mousemove.drag mouseup.drag",null),pq(T.view,c),vy(T),i.mouse("end",T)}function _(T,k){if(t.call(this,T,k)){var N=T.changedTouches,D=e.call(this,T,k),L=N.length,R,A;for(R=0;R<L;++R)(A=M(this,D,T,k,N[R].identifier,N[R]))&&(eA(T),A("start",T,N[R]))}}function b(T){var k=T.changedTouches,N=k.length,D,L;for(D=0;D<N;++D)(L=i[k[D].identifier])&&(vy(T),L("drag",T,k[D]))}function E(T){var k=T.changedTouches,N=k.length,D,L;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),D=0;D<N;++D)(L=i[k[D].identifier])&&(eA(T),L("end",T,k[D]))}function M(T,k,N,D,L,R){var A=s.copy(),P=jl(R||N,k),j,U,B;if((B=n.call(T,new pP("beforestart",{sourceEvent:N,target:p,identifier:L,active:o,x:P[0],y:P[1],dx:0,dy:0,dispatch:A}),D))!=null)return j=B.x-P[0]||0,U=B.y-P[1]||0,function $(q,te,W){var Z=P,J;switch(q){case"start":i[L]=$,J=o++;break;case"end":delete i[L],--o;case"drag":P=jl(W||te,k),J=o;break}A.call(q,T,new pP(q,{sourceEvent:te,subject:B,target:p,identifier:L,active:J,x:P[0]+j,y:P[1]+U,dx:P[0]-Z[0],dy:P[1]-Z[1],dispatch:A}),D)}}return p.filter=function(T){return arguments.length?(t=typeof T=="function"?T:T_(!!T),p):t},p.container=function(T){return arguments.length?(e=typeof T=="function"?T:T_(T),p):e},p.subject=function(T){return arguments.length?(n=typeof T=="function"?T:T_(T),p):n},p.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:T_(!!T),p):r},p.on=function(){var T=s.on.apply(s,arguments);return T===s?p:T},p.clickDistance=function(T){return arguments.length?(f=(T=+T)*T,p):Math.sqrt(f)},p}function fk(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function gq(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Wb(){}var $0=.7,xE=1/$0,xy="\\s*([+-]?\\d+)\\s*",G0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wle=/^#([0-9a-f]{3,8})$/,_le=new RegExp(`^rgb\\(${xy},${xy},${xy}\\)$`),Sle=new RegExp(`^rgb\\(${Oc},${Oc},${Oc}\\)$`),Ele=new RegExp(`^rgba\\(${xy},${xy},${xy},${G0}\\)$`),Mle=new RegExp(`^rgba\\(${Oc},${Oc},${Oc},${G0}\\)$`),Tle=new RegExp(`^hsl\\(${G0},${Oc},${Oc}\\)$`),Cle=new RegExp(`^hsla\\(${G0},${Oc},${Oc},${G0}\\)$`),CB={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};fk(Wb,X0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:IB,formatHex:IB,formatHex8:Ile,formatHsl:Rle,formatRgb:RB,toString:RB});function IB(){return this.rgb().formatHex()}function Ile(){return this.rgb().formatHex8()}function Rle(){return yq(this).formatHsl()}function RB(){return this.rgb().formatRgb()}function X0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=wle.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?AB(e):n===3?new Jo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?C_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?C_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_le.exec(t))?new Jo(e[1],e[2],e[3],1):(e=Sle.exec(t))?new Jo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ele.exec(t))?C_(e[1],e[2],e[3],e[4]):(e=Mle.exec(t))?C_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Tle.exec(t))?kB(e[1],e[2]/100,e[3]/100,1):(e=Cle.exec(t))?kB(e[1],e[2]/100,e[3]/100,e[4]):CB.hasOwnProperty(t)?AB(CB[t]):t==="transparent"?new Jo(NaN,NaN,NaN,0):null}function AB(t){return new Jo(t>>16&255,t>>8&255,t&255,1)}function C_(t,e,n,r){return r<=0&&(t=e=n=NaN),new Jo(t,e,n,r)}function Ale(t){return t instanceof Wb||(t=X0(t)),t?(t=t.rgb(),new Jo(t.r,t.g,t.b,t.opacity)):new Jo}function mP(t,e,n,r){return arguments.length===1?Ale(t):new Jo(t,e,n,r??1)}function Jo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}fk(Jo,mP,gq(Wb,{brighter(t){return t=t==null?xE:Math.pow(xE,t),new Jo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?$0:Math.pow($0,t),new Jo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Jo(Ip(this.r),Ip(this.g),Ip(this.b),bE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:NB,formatHex:NB,formatHex8:Nle,formatRgb:PB,toString:PB}));function NB(){return`#${wp(this.r)}${wp(this.g)}${wp(this.b)}`}function Nle(){return`#${wp(this.r)}${wp(this.g)}${wp(this.b)}${wp((isNaN(this.opacity)?1:this.opacity)*255)}`}function PB(){const t=bE(this.opacity);return`${t===1?"rgb(":"rgba("}${Ip(this.r)}, ${Ip(this.g)}, ${Ip(this.b)}${t===1?")":`, ${t})`}`}function bE(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ip(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wp(t){return t=Ip(t),(t<16?"0":"")+t.toString(16)}function kB(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ql(t,e,n,r)}function yq(t){if(t instanceof ql)return new ql(t.h,t.s,t.l,t.opacity);if(t instanceof Wb||(t=X0(t)),!t)return new ql;if(t instanceof ql)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new ql(o,a,l,t.opacity)}function Ple(t,e,n,r){return arguments.length===1?yq(t):new ql(t,e,n,r??1)}function ql(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}fk(ql,Ple,gq(Wb,{brighter(t){return t=t==null?xE:Math.pow(xE,t),new ql(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$0:Math.pow($0,t),new ql(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Jo(tA(t>=240?t-240:t+120,i,r),tA(t,i,r),tA(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ql(OB(this.h),I_(this.s),I_(this.l),bE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bE(this.opacity);return`${t===1?"hsl(":"hsla("}${OB(this.h)}, ${I_(this.s)*100}%, ${I_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function OB(t){return t=(t||0)%360,t<0?t+360:t}function I_(t){return Math.max(0,Math.min(1,t||0))}function tA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const vq=t=>()=>t;function kle(t,e){return function(n){return t+n*e}}function Ole(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Lle(t){return(t=+t)==1?xq:function(e,n){return n-e?Ole(e,n,t):vq(isNaN(e)?n:e)}}function xq(t,e){var n=e-t;return n?kle(t,n):vq(isNaN(t)?e:t)}const LB=function t(e){var n=Lle(e);function r(i,s){var o=n((i=mP(i)).r,(s=mP(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=xq(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function pf(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var gP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nA=new RegExp(gP.source,"g");function Dle(t){return function(){return t}}function Fle(t){return function(e){return t(e)+""}}function Ble(t,e){var n=gP.lastIndex=nA.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=gP.exec(t))&&(i=nA.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:pf(r,i)})),n=nA.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Fle(l[0].x):Dle(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}var DB=180/Math.PI,yP={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bq(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*DB,skewX:Math.atan(l)*DB,scaleX:o,scaleY:a}}var R_;function jle(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?yP:bq(e.a,e.b,e.c,e.d,e.e,e.f)}function Ule(t){return t==null||(R_||(R_=document.createElementNS("http://www.w3.org/2000/svg","g")),R_.setAttribute("transform",t),!(t=R_.transform.baseVal.consolidate()))?yP:(t=t.matrix,bq(t.a,t.b,t.c,t.d,t.e,t.f))}function wq(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,p,g,x){if(c!==f||u!==p){var S=g.push("translate(",null,e,null,n);x.push({i:S-4,x:pf(c,f)},{i:S-2,x:pf(u,p)})}else(f||p)&&g.push("translate("+f+e+p+n)}function o(c,u,f,p){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),p.push({i:f.push(i(f)+"rotate(",null,r)-2,x:pf(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,p){c!==u?p.push({i:f.push(i(f)+"skewX(",null,r)-2,x:pf(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,p,g,x){if(c!==f||u!==p){var S=g.push(i(g)+"scale(",null,",",null,")");x.push({i:S-4,x:pf(c,f)},{i:S-2,x:pf(u,p)})}else(f!==1||p!==1)&&g.push(i(g)+"scale("+f+","+p+")")}return function(c,u){var f=[],p=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,p),o(c.rotate,u.rotate,f,p),a(c.skewX,u.skewX,f,p),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,p),c=u=null,function(g){for(var x=-1,S=p.length,_;++x<S;)f[(_=p[x]).i]=_.x(g);return f.join("")}}}var zle=wq(jle,"px, ","px)","deg)"),Vle=wq(Ule,", ",")",")"),Wle=1e-12;function FB(t){return((t=Math.exp(t))+1/t)/2}function qle(t){return((t=Math.exp(t))-1/t)/2}function Hle(t){return((t=Math.exp(2*t))-1)/(t+1)}const $le=function t(e,n,r){function i(s,o){var a=s[0],l=s[1],c=s[2],u=o[0],f=o[1],p=o[2],g=u-a,x=f-l,S=g*g+x*x,_,b;if(S<Wle)b=Math.log(p/c)/e,_=function(D){return[a+D*g,l+D*x,c*Math.exp(e*D*b)]};else{var E=Math.sqrt(S),M=(p*p-c*c+r*S)/(2*c*n*E),T=(p*p-c*c-r*S)/(2*p*n*E),k=Math.log(Math.sqrt(M*M+1)-M),N=Math.log(Math.sqrt(T*T+1)-T);b=(N-k)/e,_=function(D){var L=D*b,R=FB(k),A=c/(n*E)*(R*Hle(e*L+k)-qle(k));return[a+A*g,l+A*x,c*R/FB(e*L+k)]}}return _.duration=b*1e3*e/Math.SQRT2,_}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},i}(Math.SQRT2,2,4);var Py=0,kx=0,ux=0,_q=1e3,wE,Ox,_E=0,$p=0,tT=0,K0=typeof performance=="object"&&performance.now?performance:Date,Sq=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function hk(){return $p||(Sq(Gle),$p=K0.now()+tT)}function Gle(){$p=0}function SE(){this._call=this._time=this._next=null}SE.prototype=Eq.prototype={constructor:SE,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?hk():+n)+(e==null?0:+e),!this._next&&Ox!==this&&(Ox?Ox._next=this:wE=this,Ox=this),this._call=t,this._time=n,vP()},stop:function(){this._call&&(this._call=null,this._time=1/0,vP())}};function Eq(t,e,n){var r=new SE;return r.restart(t,e,n),r}function Xle(){hk(),++Py;for(var t=wE,e;t;)(e=$p-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Py}function BB(){$p=(_E=K0.now())+tT,Py=kx=0;try{Xle()}finally{Py=0,Yle(),$p=0}}function Kle(){var t=K0.now(),e=t-_E;e>_q&&(tT-=e,_E=t)}function Yle(){for(var t,e=wE,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:wE=n);Ox=t,vP(r)}function vP(t){if(!Py){kx&&(kx=clearTimeout(kx));var e=t-$p;e>24?(t<1/0&&(kx=setTimeout(BB,t-K0.now()-tT)),ux&&(ux=clearInterval(ux))):(ux||(_E=K0.now(),ux=setInterval(Kle,_q)),Py=1,Sq(BB))}}function jB(t,e,n){var r=new SE;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Zle=QM("start","end","cancel","interrupt"),Jle=[],Mq=0,UB=1,xP=2,ZS=3,zB=4,bP=5,JS=6;function nT(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Qle(t,n,{name:e,index:r,group:i,on:Zle,tween:Jle,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Mq})}function pk(t,e){var n=rc(t,e);if(n.state>Mq)throw new Error("too late; already scheduled");return n}function Hc(t,e){var n=rc(t,e);if(n.state>ZS)throw new Error("too late; already running");return n}function rc(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Qle(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Eq(s,0,n.time);function s(c){n.state=UB,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,p,g;if(n.state!==UB)return l();for(u in r)if(g=r[u],g.name===n.name){if(g.state===ZS)return jB(o);g.state===zB?(g.state=JS,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[u]):+u<e&&(g.state=JS,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[u])}if(jB(function(){n.state===ZS&&(n.state=zB,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=xP,n.on.call("start",t,t.__data__,n.index,n.group),n.state===xP){for(n.state=ZS,i=new Array(p=n.tween.length),u=0,f=-1;u<p;++u)(g=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=bP,1),f=-1,p=i.length;++f<p;)i[f].call(t,u);n.state===bP&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=JS,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function QS(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>xP&&r.state<bP,r.state=JS,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function ece(t){return this.each(function(){QS(this,t)})}function tce(t,e){var n,r;return function(){var i=Hc(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function nce(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Hc(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function rce(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=rc(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?tce:nce)(n,t,e))}function mk(t,e,n){var r=t._id;return t.each(function(){var i=Hc(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return rc(i,r).value[e]}}function Tq(t,e){var n;return(typeof e=="number"?pf:e instanceof X0?LB:(n=X0(e))?(e=n,LB):Ble)(t,e)}function ice(t){return function(){this.removeAttribute(t)}}function sce(t){return function(){this.removeAttributeNS(t.space,t.local)}}function oce(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function ace(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function lce(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function cce(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function uce(t,e){var n=eT(t),r=n==="transform"?Vle:Tq;return this.attrTween(t,typeof e=="function"?(n.local?cce:lce)(n,r,mk(this,"attr."+t,e)):e==null?(n.local?sce:ice)(n):(n.local?ace:oce)(n,r,e))}function dce(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function fce(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function hce(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&fce(t,s)),n}return i._value=e,i}function pce(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&dce(t,s)),n}return i._value=e,i}function mce(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=eT(t);return this.tween(n,(r.local?hce:pce)(r,e))}function gce(t,e){return function(){pk(this,t).delay=+e.apply(this,arguments)}}function yce(t,e){return e=+e,function(){pk(this,t).delay=e}}function vce(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?gce:yce)(e,t)):rc(this.node(),e).delay}function xce(t,e){return function(){Hc(this,t).duration=+e.apply(this,arguments)}}function bce(t,e){return e=+e,function(){Hc(this,t).duration=e}}function wce(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?xce:bce)(e,t)):rc(this.node(),e).duration}function _ce(t,e){if(typeof e!="function")throw new Error;return function(){Hc(this,t).ease=e}}function Sce(t){var e=this._id;return arguments.length?this.each(_ce(e,t)):rc(this.node(),e).ease}function Ece(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Hc(this,t).ease=n}}function Mce(t){if(typeof t!="function")throw new Error;return this.each(Ece(this._id,t))}function Tce(t){typeof t!="function"&&(t=rq(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new ld(r,this._parents,this._name,this._id)}function Cce(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,f=o[a]=new Array(u),p,g=0;g<u;++g)(p=l[g]||c[g])&&(f[g]=p);for(;a<r;++a)o[a]=e[a];return new ld(o,this._parents,this._name,this._id)}function Ice(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Rce(t,e,n){var r,i,s=Ice(e)?pk:Hc;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function Ace(t,e){var n=this._id;return arguments.length<2?rc(this.node(),n).on.on(t):this.each(Rce(n,t,e))}function Nce(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Pce(){return this.on("end.remove",Nce(this._id))}function kce(t){var e=this._name,n=this._id;typeof t!="function"&&(t=uk(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,f,p=0;p<l;++p)(u=a[p])&&(f=t.call(u,u.__data__,p,a))&&("__data__"in u&&(f.__data__=u.__data__),c[p]=f,nT(c[p],e,n,p,c,rc(u,n)));return new ld(s,this._parents,e,n)}function Oce(t){var e=this._name,n=this._id;typeof t!="function"&&(t=nq(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var p=t.call(u,u.__data__,f,l),g,x=rc(u,n),S=0,_=p.length;S<_;++S)(g=p[S])&&nT(g,e,n,S,p,x);s.push(p),o.push(u)}return new ld(s,o,e,n)}var Lce=Vb.prototype.constructor;function Dce(){return new Lce(this._groups,this._parents)}function Fce(t,e){var n,r,i;return function(){var s=Ny(this,t),o=(this.style.removeProperty(t),Ny(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function Cq(t){return function(){this.style.removeProperty(t)}}function Bce(t,e,n){var r,i=n+"",s;return function(){var o=Ny(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function jce(t,e,n){var r,i,s;return function(){var o=Ny(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Ny(this,t))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function Uce(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var l=Hc(this,t),c=l.on,u=l.value[s]==null?a||(a=Cq(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function zce(t,e,n){var r=(t+="")=="transform"?zle:Tq;return e==null?this.styleTween(t,Fce(t,r)).on("end.style."+t,Cq(t)):typeof e=="function"?this.styleTween(t,jce(t,r,mk(this,"style."+t,e))).each(Uce(this._id,t)):this.styleTween(t,Bce(t,r,e),n).on("end.style."+t,null)}function Vce(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Wce(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Vce(t,o,n)),r}return s._value=e,s}function qce(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Wce(t,e,n??""))}function Hce(t){return function(){this.textContent=t}}function $ce(t){return function(){var e=t(this);this.textContent=e??""}}function Gce(t){return this.tween("text",typeof t=="function"?$ce(mk(this,"text",t)):Hce(t==null?"":t+""))}function Xce(t){return function(e){this.textContent=t.call(this,e)}}function Kce(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Xce(i)),e}return r._value=t,r}function Yce(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Kce(t))}function Zce(){for(var t=this._name,e=this._id,n=Iq(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=rc(l,e);nT(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ld(r,this._parents,t,n)}function Jce(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=Hc(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&s()})}var Qce=0;function ld(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Iq(){return++Qce}var Pu=Vb.prototype;ld.prototype={constructor:ld,select:kce,selectAll:Oce,selectChild:Pu.selectChild,selectChildren:Pu.selectChildren,filter:Tce,merge:Cce,selection:Dce,transition:Zce,call:Pu.call,nodes:Pu.nodes,node:Pu.node,size:Pu.size,empty:Pu.empty,each:Pu.each,on:Ace,attr:uce,attrTween:mce,style:zce,styleTween:qce,text:Gce,textTween:Yce,remove:Pce,tween:rce,delay:vce,duration:wce,ease:Sce,easeVarying:Mce,end:Jce,[Symbol.iterator]:Pu[Symbol.iterator]};function eue(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var tue={time:null,delay:0,duration:250,ease:eue};function nue(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function rue(t){var e,n;t instanceof ld?(e=t._id,t=t._name):(e=Iq(),(n=tue).time=hk(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&nT(l,t,e,c,o,n||nue(l,e));return new ld(r,this._parents,t,e)}Vb.prototype.interrupt=ece;Vb.prototype.transition=rue;const A_=t=>()=>t;function iue(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Gu(t,e,n){this.k=t,this.x=e,this.y=n}Gu.prototype={constructor:Gu,scale:function(t){return t===1?this:new Gu(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Gu(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rT=new Gu(1,0,0);Rq.prototype=Gu.prototype;function Rq(t){for(;!t.__zoom;)if(!(t=t.parentNode))return rT;return t.__zoom}function rA(t){t.stopImmediatePropagation()}function dx(t){t.preventDefault(),t.stopImmediatePropagation()}function sue(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function oue(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function VB(){return this.__zoom||rT}function aue(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function lue(){return navigator.maxTouchPoints||"ontouchstart"in this}function cue(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Aq(){var t=sue,e=oue,n=cue,r=aue,i=lue,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=$le,c=QM("start","zoom","end"),u,f,p,g=500,x=150,S=0,_=10;function b(B){B.property("__zoom",VB).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",A).filter(i).on("touchstart.zoom",P).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(B,$,q,te){var W=B.selection?B.selection():B;W.property("__zoom",VB),B!==W?k(B,$,q,te):W.interrupt().each(function(){N(this,arguments).event(te).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},b.scaleBy=function(B,$,q,te){b.scaleTo(B,function(){var W=this.__zoom.k,Z=typeof $=="function"?$.apply(this,arguments):$;return W*Z},q,te)},b.scaleTo=function(B,$,q,te){b.transform(B,function(){var W=e.apply(this,arguments),Z=this.__zoom,J=q==null?T(W):typeof q=="function"?q.apply(this,arguments):q,Y=Z.invert(J),oe=typeof $=="function"?$.apply(this,arguments):$;return n(M(E(Z,oe),J,Y),W,o)},q,te)},b.translateBy=function(B,$,q,te){b.transform(B,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof q=="function"?q.apply(this,arguments):q),e.apply(this,arguments),o)},null,te)},b.translateTo=function(B,$,q,te,W){b.transform(B,function(){var Z=e.apply(this,arguments),J=this.__zoom,Y=te==null?T(Z):typeof te=="function"?te.apply(this,arguments):te;return n(rT.translate(Y[0],Y[1]).scale(J.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof q=="function"?-q.apply(this,arguments):-q),Z,o)},te,W)};function E(B,$){return $=Math.max(s[0],Math.min(s[1],$)),$===B.k?B:new Gu($,B.x,B.y)}function M(B,$,q){var te=$[0]-q[0]*B.k,W=$[1]-q[1]*B.k;return te===B.x&&W===B.y?B:new Gu(B.k,te,W)}function T(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function k(B,$,q,te){B.on("start.zoom",function(){N(this,arguments).event(te).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(te).end()}).tween("zoom",function(){var W=this,Z=arguments,J=N(W,Z).event(te),Y=e.apply(W,Z),oe=q==null?T(Y):typeof q=="function"?q.apply(W,Z):q,ce=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),ie=W.__zoom,ue=typeof $=="function"?$.apply(W,Z):$,de=l(ie.invert(oe).concat(ce/ie.k),ue.invert(oe).concat(ce/ue.k));return function(be){if(be===1)be=ue;else{var we=de(be),Ce=ce/we[2];be=new Gu(Ce,oe[0]-we[0]*Ce,oe[1]-we[1]*Ce)}J.zoom(null,be)}})}function N(B,$,q){return!q&&B.__zooming||new D(B,$)}function D(B,$){this.that=B,this.args=$,this.active=0,this.sourceEvent=null,this.extent=e.apply(B,$),this.taps=0}D.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,$){return this.mouse&&B!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var $=Ta(this.that).datum();c.call(B,this.that,new iue(B,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:c}),$)}};function L(B,...$){if(!t.apply(this,arguments))return;var q=N(this,$).event(B),te=this.__zoom,W=Math.max(s[0],Math.min(s[1],te.k*Math.pow(2,r.apply(this,arguments)))),Z=jl(B);if(q.wheel)(q.mouse[0][0]!==Z[0]||q.mouse[0][1]!==Z[1])&&(q.mouse[1]=te.invert(q.mouse[0]=Z)),clearTimeout(q.wheel);else{if(te.k===W)return;q.mouse=[Z,te.invert(Z)],QS(this),q.start()}dx(B),q.wheel=setTimeout(J,x),q.zoom("mouse",n(M(E(te,W),q.mouse[0],q.mouse[1]),q.extent,o));function J(){q.wheel=null,q.end()}}function R(B,...$){if(p||!t.apply(this,arguments))return;var q=B.currentTarget,te=N(this,$,!0).event(B),W=Ta(B.view).on("mousemove.zoom",oe,!0).on("mouseup.zoom",ce,!0),Z=jl(B,q),J=B.clientX,Y=B.clientY;hq(B.view),rA(B),te.mouse=[Z,this.__zoom.invert(Z)],QS(this),te.start();function oe(ie){if(dx(ie),!te.moved){var ue=ie.clientX-J,de=ie.clientY-Y;te.moved=ue*ue+de*de>S}te.event(ie).zoom("mouse",n(M(te.that.__zoom,te.mouse[0]=jl(ie,q),te.mouse[1]),te.extent,o))}function ce(ie){W.on("mousemove.zoom mouseup.zoom",null),pq(ie.view,te.moved),dx(ie),te.event(ie).end()}}function A(B,...$){if(t.apply(this,arguments)){var q=this.__zoom,te=jl(B.changedTouches?B.changedTouches[0]:B,this),W=q.invert(te),Z=q.k*(B.shiftKey?.5:2),J=n(M(E(q,Z),te,W),e.apply(this,$),o);dx(B),a>0?Ta(this).transition().duration(a).call(k,J,te,B):Ta(this).call(b.transform,J,te,B)}}function P(B,...$){if(t.apply(this,arguments)){var q=B.touches,te=q.length,W=N(this,$,B.changedTouches.length===te).event(B),Z,J,Y,oe;for(rA(B),J=0;J<te;++J)Y=q[J],oe=jl(Y,this),oe=[oe,this.__zoom.invert(oe),Y.identifier],W.touch0?!W.touch1&&W.touch0[2]!==oe[2]&&(W.touch1=oe,W.taps=0):(W.touch0=oe,Z=!0,W.taps=1+!!u);u&&(u=clearTimeout(u)),Z&&(W.taps<2&&(f=oe[0],u=setTimeout(function(){u=null},g)),QS(this),W.start())}}function j(B,...$){if(this.__zooming){var q=N(this,$).event(B),te=B.changedTouches,W=te.length,Z,J,Y,oe;for(dx(B),Z=0;Z<W;++Z)J=te[Z],Y=jl(J,this),q.touch0&&q.touch0[2]===J.identifier?q.touch0[0]=Y:q.touch1&&q.touch1[2]===J.identifier&&(q.touch1[0]=Y);if(J=q.that.__zoom,q.touch1){var ce=q.touch0[0],ie=q.touch0[1],ue=q.touch1[0],de=q.touch1[1],be=(be=ue[0]-ce[0])*be+(be=ue[1]-ce[1])*be,we=(we=de[0]-ie[0])*we+(we=de[1]-ie[1])*we;J=E(J,Math.sqrt(be/we)),Y=[(ce[0]+ue[0])/2,(ce[1]+ue[1])/2],oe=[(ie[0]+de[0])/2,(ie[1]+de[1])/2]}else if(q.touch0)Y=q.touch0[0],oe=q.touch0[1];else return;q.zoom("touch",n(M(J,Y,oe),q.extent,o))}}function U(B,...$){if(this.__zooming){var q=N(this,$).event(B),te=B.changedTouches,W=te.length,Z,J;for(rA(B),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),Z=0;Z<W;++Z)J=te[Z],q.touch0&&q.touch0[2]===J.identifier?delete q.touch0:q.touch1&&q.touch1[2]===J.identifier&&delete q.touch1;if(q.touch1&&!q.touch0&&(q.touch0=q.touch1,delete q.touch1),q.touch0)q.touch0[1]=this.__zoom.invert(q.touch0[0]);else if(q.end(),q.taps===2&&(J=jl(J,this),Math.hypot(f[0]-J[0],f[1]-J[1])<_)){var Y=Ta(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return b.wheelDelta=function(B){return arguments.length?(r=typeof B=="function"?B:A_(+B),b):r},b.filter=function(B){return arguments.length?(t=typeof B=="function"?B:A_(!!B),b):t},b.touchable=function(B){return arguments.length?(i=typeof B=="function"?B:A_(!!B),b):i},b.extent=function(B){return arguments.length?(e=typeof B=="function"?B:A_([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),b):e},b.scaleExtent=function(B){return arguments.length?(s[0]=+B[0],s[1]=+B[1],b):[s[0],s[1]]},b.translateExtent=function(B){return arguments.length?(o[0][0]=+B[0][0],o[1][0]=+B[1][0],o[0][1]=+B[0][1],o[1][1]=+B[1][1],b):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},b.constrain=function(B){return arguments.length?(n=B,b):n},b.duration=function(B){return arguments.length?(a=+B,b):a},b.interpolate=function(B){return arguments.length?(l=B,b):l},b.on=function(){var B=c.on.apply(c,arguments);return B===c?b:B},b.clickDistance=function(B){return arguments.length?(S=(B=+B)*B,b):Math.sqrt(S)},b.tapDistance=function(B){return arguments.length?(_=+B,b):_},b}const hd={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},Y0=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Nq=["Enter"," ","Escape"];var ky;(function(t){t.Strict="strict",t.Loose="loose"})(ky||(ky={}));var Rp;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Rp||(Rp={}));var Z0;(function(t){t.Partial="partial",t.Full="full"})(Z0||(Z0={}));const Pq={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var wf;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(wf||(wf={}));var EE;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(EE||(EE={}));var Yt;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Yt||(Yt={}));const WB={[Yt.Left]:Yt.Right,[Yt.Right]:Yt.Left,[Yt.Top]:Yt.Bottom,[Yt.Bottom]:Yt.Top};function kq(t){return t===null?null:t?"valid":"invalid"}const Oq=t=>"id"in t&&"source"in t&&"target"in t,uue=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),gk=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),qb=(t,e=[0,0])=>{const{width:n,height:r}=pd(t),i=t.origin??e,s=n*i[0],o=r*i[1];return{x:t.position.x-s,y:t.position.y-o}},due=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):gk(i)?i:e.nodeLookup.get(i.id));const a=o?ME(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return iT(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return sT(n)},Hb=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=ME(r);n=iT(n,i)}}),sT(n)},Lq=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const a={...$b(e,[n,r,i]),width:e.width/i,height:e.height/i},l=[];for(const c of t.values()){const{measured:u,selectable:f=!0,hidden:p=!1}=c;if(o&&!f||p)continue;const g=u.width??c.width??c.initialWidth??null,x=u.height??c.height??c.initialHeight??null,S=J0(a,Ly(c)),_=(g??0)*(x??0),b=s&&S>0;(!c.internals.handleBounds||b||S>=_||c.dragging)&&l.push(c)}return l},fue=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function wP(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function _P({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(t.size===0)return Promise.resolve(!1);const a=Hb(t),l=yk(a,e,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(l,{duration:o?.duration}),Promise.resolve(!0)}function Dq({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(t),a=o.parentId?n.get(o.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},u=o.origin??r;let f=i;if(o.extent==="parent"&&!o.expandParent)if(!a)s?.("005",hd.error005());else{const g=a.measured.width,x=a.measured.height;g&&x&&(f=[[l,c],[l+g,c+x]])}else a&&Dy(o.extent)&&(f=[[o.extent[0][0]+l,o.extent[0][1]+c],[o.extent[1][0]+l,o.extent[1][1]+c]]);const p=Dy(f)?Gp(e,f,o.measured):e;return{position:{x:p.x-l+o.measured.width*u[0],y:p.y-c+o.measured.height*u[1]},positionAbsolute:p}}async function hue({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(p=>p.id)),o=[];for(const p of n){if(p.deletable===!1)continue;const g=s.has(p.id),x=!g&&p.parentId&&o.find(S=>S.id===p.parentId);(g||x)&&o.push(p)}const a=new Set(e.map(p=>p.id)),l=r.filter(p=>p.deletable!==!1),u=fue(o,l);for(const p of l)a.has(p.id)&&!u.find(x=>x.id===p.id)&&u.push(p);if(!i)return{edges:u,nodes:o};const f=await i({nodes:o,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:o}:{edges:[],nodes:[]}:f}const Oy=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Gp=(t={x:0,y:0},e,n)=>({x:Oy(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Oy(t.y,e[0][1],e[1][1]-(n?.height??0))});function Fq(t,e,n){const{width:r,height:i}=pd(n),{x:s,y:o}=n.internals.positionAbsolute;return Gp(t,[[s,o],[s+r,o+i]],e)}const qB=(t,e,n)=>t<e?Oy(Math.abs(t-e),1,e)/e:t>n?-Oy(Math.abs(t-n),1,e)/e:0,Bq=(t,e,n=15,r=40)=>{const i=qB(t.x,r,e.width-r)*n,s=qB(t.y,r,e.height-r)*n;return[i,s]},iT=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),SP=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),sT=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Ly=(t,e=[0,0])=>{const{x:n,y:r}=gk(t)?t.internals.positionAbsolute:qb(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},ME=(t,e=[0,0])=>{const{x:n,y:r}=gk(t)?t.internals.positionAbsolute:qb(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},jq=(t,e)=>sT(iT(SP(t),SP(e))),J0=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},HB=t=>Gl(t.width)&&Gl(t.height)&&Gl(t.x)&&Gl(t.y),Gl=t=>!isNaN(t)&&isFinite(t),pue=(t,e)=>{},oT=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),$b=({x:t,y:e},[n,r,i],s=!1,o=[1,1])=>{const a={x:(t-n)/i,y:(e-r)/i};return s?oT(a,o):a},Uq=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),yk=(t,e,n,r,i,s)=>{const o=e/(t.width*(1+s)),a=n/(t.height*(1+s)),l=Math.min(o,a),c=Oy(l,r,i),u=t.x+t.width/2,f=t.y+t.height/2,p=e/2-u*c,g=n/2-f*c;return{x:p,y:g,zoom:c}},TE=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Dy(t){return t!==void 0&&t!=="parent"}function pd(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function zq(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function Vq(t,e={width:0,height:0},n,r,i){const s={...t},o=r.get(n);if(o){const a=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*a[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*a[1]}return s}function $B(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function i0(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=Zu(t),a=$b({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:l,y:c}=n?oT(a,e):a;return{xSnapped:l,ySnapped:c,...a}}const aT=t=>({width:t.offsetWidth,height:t.offsetHeight}),Wq=t=>t?.getRootNode?.()||window?.document,mue=["INPUT","SELECT","TEXTAREA"];function EP(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:mue.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const qq=t=>"clientX"in t,Zu=(t,e)=>{const n=qq(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},GB=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:t,nodeId:i,position:o.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...aT(o)}})};function Hq({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=t*.125+i*.375+o*.375+n*.125,c=e*.125+s*.375+a*.375+r*.125,u=Math.abs(l-t),f=Math.abs(c-e);return[l,c,u,f]}function N_(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function XB({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case Yt.Left:return[e-N_(e-r,s),n];case Yt.Right:return[e+N_(r-e,s),n];case Yt.Top:return[e,n-N_(n-i,s)];case Yt.Bottom:return[e,n+N_(i-n,s)]}}function vk({sourceX:t,sourceY:e,sourcePosition:n=Yt.Bottom,targetX:r,targetY:i,targetPosition:s=Yt.Top,curvature:o=.25}){const[a,l]=XB({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[c,u]=XB({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[f,p,g,x]=Hq({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${t},${e} C${a},${l} ${c},${u} ${r},${i}`,f,p,g,x]}function $q({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,a=r<e?r+o:r-o;return[s,a,i,o]}function gue({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const s=n||e.selected||t.selected,o=Math.max(t.internals.z||0,e.internals.z||0,1e3);return r+(s?o:0)}function yue({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=iT(ME(t),ME(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return J0(o,sT(s))>0}const vue=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,xue=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),bue=(t,e)=>{if(!t.source||!t.target)return e;let n;return Oq(t)?n={...t}:n={...t,id:vue(t)},xue(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function Gq({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,a]=$q({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,a]}const KB={[Yt.Left]:{x:-1,y:0},[Yt.Right]:{x:1,y:0},[Yt.Top]:{x:0,y:-1},[Yt.Bottom]:{x:0,y:1}},wue=({source:t,sourcePosition:e=Yt.Bottom,target:n})=>e===Yt.Left||e===Yt.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},YB=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function _ue({source:t,sourcePosition:e=Yt.Bottom,target:n,targetPosition:r=Yt.Top,center:i,offset:s}){const o=KB[e],a=KB[r],l={x:t.x+o.x*s,y:t.y+o.y*s},c={x:n.x+a.x*s,y:n.y+a.y*s},u=wue({source:l,sourcePosition:e,target:c}),f=u.x!==0?"x":"y",p=u[f];let g=[],x,S;const _={x:0,y:0},b={x:0,y:0},[E,M,T,k]=$q({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[f]*a[f]===-1){x=i.x??E,S=i.y??M;const D=[{x,y:l.y},{x,y:c.y}],L=[{x:l.x,y:S},{x:c.x,y:S}];o[f]===p?g=f==="x"?D:L:g=f==="x"?L:D}else{const D=[{x:l.x,y:c.y}],L=[{x:c.x,y:l.y}];if(f==="x"?g=o.x===p?L:D:g=o.y===p?D:L,e===r){const U=Math.abs(t[f]-n[f]);if(U<=s){const B=Math.min(s-1,s-U);o[f]===p?_[f]=(l[f]>t[f]?-1:1)*B:b[f]=(c[f]>n[f]?-1:1)*B}}if(e!==r){const U=f==="x"?"y":"x",B=o[f]===a[U],$=l[U]>c[U],q=l[U]<c[U];(o[f]===1&&(!B&&$||B&&q)||o[f]!==1&&(!B&&q||B&&$))&&(g=f==="x"?D:L)}const R={x:l.x+_.x,y:l.y+_.y},A={x:c.x+b.x,y:c.y+b.y},P=Math.max(Math.abs(R.x-g[0].x),Math.abs(A.x-g[0].x)),j=Math.max(Math.abs(R.y-g[0].y),Math.abs(A.y-g[0].y));P>=j?(x=(R.x+A.x)/2,S=g[0].y):(x=g[0].x,S=(R.y+A.y)/2)}return[[t,{x:l.x+_.x,y:l.y+_.y},...g,{x:c.x+b.x,y:c.y+b.y},n],x,S,T,k]}function Sue(t,e,n,r){const i=Math.min(YB(t,e)/2,YB(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const c=t.x<n.x?-1:1,u=t.y<n.y?1:-1;return`L ${s+i*c},${o}Q ${s},${o} ${s},${o+i*u}`}const a=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function MP({sourceX:t,sourceY:e,sourcePosition:n=Yt.Bottom,targetX:r,targetY:i,targetPosition:s=Yt.Top,borderRadius:o=5,centerX:a,centerY:l,offset:c=20}){const[u,f,p,g,x]=_ue({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:c});return[u.reduce((_,b,E)=>{let M="";return E>0&&E<u.length-1?M=Sue(u[E-1],b,u[E+1],o):M=`${E===0?"M":"L"}${b.x} ${b.y}`,_+=M,_},""),f,p,g,x]}function ZB(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Eue(t){const{sourceNode:e,targetNode:n}=t;if(!ZB(e)||!ZB(n))return null;const r=e.internals.handleBounds||JB(e.handles),i=n.internals.handleBounds||JB(n.handles),s=QB(r?.source??[],t.sourceHandle),o=QB(t.connectionMode===ky.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!s||!o)return t.onError?.("008",hd.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const a=s?.position||Yt.Bottom,l=o?.position||Yt.Top,c=Q0(e,s,a),u=Q0(n,o,l);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:l}}function JB(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function Q0(t,e,n=Yt.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:o,height:a}=e??pd(t);if(r)return{x:i+o/2,y:s+a/2};switch(e?.position??n){case Yt.Top:return{x:i+o/2,y:s};case Yt.Right:return{x:i+o,y:s+a/2};case Yt.Bottom:return{x:i+o/2,y:s+a};case Yt.Left:return{x:i,y:s+a/2}}}function QB(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function TP(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function Mue(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((o,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const c=TP(l,e);s.has(c)||(o.push({id:c,color:l.color||n,...l}),s.add(c))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}const xk={nodeOrigin:[0,0],nodeExtent:Y0,elevateNodesOnSelect:!0,defaults:{}},Tue={...xk,checkEquality:!0};function bk(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function Cue(t,e,n){const r=bk(xk,n);for(const i of t.values())if(i.parentId)wk(i,t,e,r);else{const s=qb(i,r.nodeOrigin),o=Dy(i.extent)?i.extent:r.nodeExtent,a=Gp(s,o,pd(i));i.internals.positionAbsolute=a}}function CP(t,e,n,r){const i=bk(Tue,r),s=new Map(e),o=i?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const a of t){let l=s.get(a.id);if(i.checkEquality&&a===l?.internals.userNode)e.set(a.id,l);else{const c=qb(a,i.nodeOrigin),u=Dy(a.extent)?a.extent:i.nodeExtent,f=Gp(c,u,pd(a));l={...i.defaults,...a,measured:{width:a.measured?.width,height:a.measured?.height},internals:{positionAbsolute:f,handleBounds:a.measured?l?.internals.handleBounds:void 0,z:Xq(a,o),userNode:a}},e.set(a.id,l)}a.parentId&&wk(l,e,n,r)}}function Iue(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function wk(t,e,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=bk(xk,r),a=t.parentId,l=e.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Iue(t,n);const c=i?1e3:0,{x:u,y:f,z:p}=Rue(t,l,s,o,c),{positionAbsolute:g}=t.internals,x=u!==g.x||f!==g.y;(x||p!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:x?{x:u,y:f}:g,z:p}})}function Xq(t,e){return(Gl(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function Rue(t,e,n,r,i){const{x:s,y:o}=e.internals.positionAbsolute,a=pd(t),l=qb(t,n),c=Dy(t.extent)?Gp(l,t.extent,a):l;let u=Gp({x:s+c.x,y:o+c.y},r,a);t.extent==="parent"&&(u=Fq(u,a,e));const f=Xq(t,i),p=e.internals.z??0;return{x:u.x,y:u.y,z:p>f?p:f}}function _k(t,e,n,r=[0,0]){const i=[],s=new Map;for(const o of t){const a=e.get(o.parentId);if(!a)continue;const l=s.get(o.parentId)?.expandedRect??Ly(a),c=jq(l,o.rect);s.set(o.parentId,{expandedRect:c,parent:a})}return s.size>0&&s.forEach(({expandedRect:o,parent:a},l)=>{const c=a.internals.positionAbsolute,u=pd(a),f=a.origin??r,p=o.x<c.x?Math.round(Math.abs(c.x-o.x)):0,g=o.y<c.y?Math.round(Math.abs(c.y-o.y)):0,x=Math.max(u.width,Math.round(o.width)),S=Math.max(u.height,Math.round(o.height)),_=(x-u.width)*f[0],b=(S-u.height)*f[1];(p>0||g>0||_||b)&&(i.push({id:l,type:"position",position:{x:a.position.x-p+_,y:a.position.y-g+b}}),n.get(l)?.forEach(E=>{t.some(M=>M.id===E.id)||i.push({id:E.id,type:"position",position:{x:E.position.x+p,y:E.position.y+g}})})),(u.width<o.width||u.height<o.height||p||g)&&i.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:x+(p?f[0]*p-_:0),height:S+(g?f[1]*g-b:0)}})}),i}function Aue(t,e,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let a=!1;if(!o)return{changes:[],updatedInternals:a};const l=[],c=window.getComputedStyle(o),{m22:u}=new window.DOMMatrixReadOnly(c.transform),f=[];for(const p of t.values()){const g=e.get(p.id);if(!g)continue;if(g.hidden){e.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),a=!0;continue}const x=aT(p.nodeElement),S=g.measured.width!==x.width||g.measured.height!==x.height;if(!!(x.width&&x.height&&(S||!g.internals.handleBounds||p.force))){const b=p.nodeElement.getBoundingClientRect(),E=Dy(g.extent)?g.extent:s;let{positionAbsolute:M}=g.internals;g.parentId&&g.extent==="parent"?M=Fq(M,x,e.get(g.parentId)):E&&(M=Gp(M,E,x));const T={...g,measured:x,internals:{...g.internals,positionAbsolute:M,handleBounds:{source:GB("source",p.nodeElement,b,u,g.id),target:GB("target",p.nodeElement,b,u,g.id)}}};e.set(g.id,T),g.parentId&&wk(T,e,n,{nodeOrigin:i}),a=!0,S&&(l.push({id:g.id,type:"dimensions",dimensions:x}),g.expandParent&&g.parentId&&f.push({id:g.id,parentId:g.parentId,rect:Ly(T,i)}))}}if(f.length>0){const p=_k(f,e,n,i);l.push(...p)}return{changes:l,updatedInternals:a}}async function Nue({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),a=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(a)}function ej(t,e,n,r,i,s){let o=i;const a=r.get(o)||new Map;r.set(o,a.set(n,e)),o=`${i}-${t}`;const l=r.get(o)||new Map;if(r.set(o,l.set(n,e)),s){o=`${i}-${t}-${s}`;const c=r.get(o)||new Map;r.set(o,c.set(n,e))}}function Kq(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:a},c=`${i}-${o}--${s}-${a}`,u=`${s}-${a}--${i}-${o}`;ej("source",l,u,t,i,o),ej("target",l,c,t,s,a),e.set(r.id,r)}}function Yq(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:Yq(n,e):!1}function tj(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function Pue(t,e,n,r){const i=new Map;for(const[s,o]of t)if((o.selected||o.id===r)&&(!o.parentId||!Yq(o,t))&&(o.draggable||e&&typeof o.draggable>"u")){const a=t.get(s);a&&i.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function iA({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,a]of e){const l=n.get(o)?.internals.userNode;l&&i.push({...l,position:a.position,dragging:r})}if(!t)return[i[0],i];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:r}:i[0],i]}function kue({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,a=new Map,l=!1,c={x:0,y:0},u=null,f=!1,p=null,g=!1;function x({noDragClassName:_,handleSelector:b,domNode:E,isSelectable:M,nodeId:T,nodeClickDistance:k=0}){p=Ta(E);function N({x:A,y:P},j){const{nodeLookup:U,nodeExtent:B,snapGrid:$,snapToGrid:q,nodeOrigin:te,onNodeDrag:W,onSelectionDrag:Z,onError:J,updateNodePositions:Y}=e();s={x:A,y:P};let oe=!1,ce={x:0,y:0,x2:0,y2:0};if(a.size>1&&B){const ie=Hb(a);ce=SP(ie)}for(const[ie,ue]of a){if(!U.has(ie))continue;let de={x:A-ue.distance.x,y:P-ue.distance.y};q&&(de=oT(de,$));let be=[[B[0][0],B[0][1]],[B[1][0],B[1][1]]];if(a.size>1&&B&&!ue.extent){const{positionAbsolute:Ie}=ue.internals,Fe=Ie.x-ce.x+B[0][0],ve=Ie.x+ue.measured.width-ce.x2+B[1][0],_e=Ie.y-ce.y+B[0][1],se=Ie.y+ue.measured.height-ce.y2+B[1][1];be=[[Fe,_e],[ve,se]]}const{position:we,positionAbsolute:Ce}=Dq({nodeId:ie,nextPosition:de,nodeLookup:U,nodeExtent:be,nodeOrigin:te,onError:J});oe=oe||ue.position.x!==we.x||ue.position.y!==we.y,ue.position=we,ue.internals.positionAbsolute=Ce}if(oe&&(Y(a,!0),j&&(r||W||!T&&Z))){const[ie,ue]=iA({nodeId:T,dragItems:a,nodeLookup:U});r?.(j,a,ie,ue),W?.(j,ie,ue),T||Z?.(j,ue)}}async function D(){if(!u)return;const{transform:A,panBy:P,autoPanSpeed:j}=e(),[U,B]=Bq(c,u,j);(U!==0||B!==0)&&(s.x=(s.x??0)-U/A[2],s.y=(s.y??0)-B/A[2],await P({x:U,y:B})&&N(s,null)),o=requestAnimationFrame(D)}function L(A){const{nodeLookup:P,multiSelectionActive:j,nodesDraggable:U,transform:B,snapGrid:$,snapToGrid:q,selectNodesOnDrag:te,onNodeDragStart:W,onSelectionDragStart:Z,unselectNodesAndEdges:J}=e();f=!0,(!te||!M)&&!j&&T&&(P.get(T)?.selected||J()),M&&te&&T&&t?.(T);const Y=i0(A.sourceEvent,{transform:B,snapGrid:$,snapToGrid:q,containerBounds:u});if(s=Y,a=Pue(P,U,Y,T),a.size>0&&(n||W||!T&&Z)){const[oe,ce]=iA({nodeId:T,dragItems:a,nodeLookup:P});n?.(A.sourceEvent,a,oe,ce),W?.(A.sourceEvent,oe,ce),T||Z?.(A.sourceEvent,ce)}}const R=mq().clickDistance(k).on("start",A=>{const{domNode:P,nodeDragThreshold:j,transform:U,snapGrid:B,snapToGrid:$}=e();u=P?.getBoundingClientRect()||null,g=!1,j===0&&L(A),s=i0(A.sourceEvent,{transform:U,snapGrid:B,snapToGrid:$,containerBounds:u}),c=Zu(A.sourceEvent,u)}).on("drag",A=>{const{autoPanOnNodeDrag:P,transform:j,snapGrid:U,snapToGrid:B,nodeDragThreshold:$,nodeLookup:q}=e(),te=i0(A.sourceEvent,{transform:j,snapGrid:U,snapToGrid:B,containerBounds:u});if((A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1||T&&!q.has(T))&&(g=!0),!g){if(!l&&P&&f&&(l=!0,D()),!f){const W=te.xSnapped-(s.x??0),Z=te.ySnapped-(s.y??0);Math.sqrt(W*W+Z*Z)>$&&L(A)}(s.x!==te.xSnapped||s.y!==te.ySnapped)&&a&&f&&(c=Zu(A.sourceEvent,u),N(te,A.sourceEvent))}}).on("end",A=>{if(!(!f||g)&&(l=!1,f=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:P,updateNodePositions:j,onNodeDragStop:U,onSelectionDragStop:B}=e();if(j(a,!1),i||U||!T&&B){const[$,q]=iA({nodeId:T,dragItems:a,nodeLookup:P,dragging:!1});i?.(A.sourceEvent,a,$,q),U?.(A.sourceEvent,$,q),T||B?.(A.sourceEvent,q)}}}).filter(A=>{const P=A.target;return!A.button&&(!_||!tj(P,`.${_}`,E))&&(!b||tj(P,b,E))});p.call(R)}function S(){p?.on(".drag",null)}return{update:x,destroy:S}}function Oue(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())J0(i,Ly(s))>0&&r.push(s);return r}const Lue=250;function Due(t,e,n,r){let i=[],s=1/0;const o=Oue(t,n,e+Lue);for(const a of o){const l=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const c of l){if(r.nodeId===c.nodeId&&r.type===c.type&&r.id===c.id)continue;const{x:u,y:f}=Q0(a,c,c.position,!0),p=Math.sqrt(Math.pow(u-t.x,2)+Math.pow(f-t.y,2));p>e||(p<s?(i=[{...c,x:u,y:f}],s=p):p===s&&i.push({...c,x:u,y:f}))}}if(!i.length)return null;if(i.length>1){const a=r.type==="source"?"target":"source";return i.find(l=>l.type===a)??i[0]}return i[0]}function Zq(t,e,n,r,i,s=!1){const o=r.get(t);if(!o)return null;const a=i==="strict"?o.internals.handleBounds?.[e]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],l=(n?a?.find(c=>c.id===n):a?.[0])??null;return l&&s?{...l,...Q0(o,l,l.position,!0)}:l}function Jq(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Fue(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const Qq=()=>!0;function Bue(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:f,panBy:p,cancelConnection:g,onConnectStart:x,onConnect:S,onConnectEnd:_,isValidConnection:b=Qq,onReconnectEnd:E,updateConnection:M,getTransform:T,getFromHandle:k,autoPanSpeed:N}){const D=Wq(t.target);let L=0,R;const{x:A,y:P}=Zu(t),j=D?.elementFromPoint(A,P),U=Jq(s,j),B=a?.getBoundingClientRect();if(!B||!U)return;const $=Zq(i,U,r,l,e);if(!$)return;let q=Zu(t,B),te=!1,W=null,Z=!1,J=null;function Y(){if(!u||!B)return;const[Ce,Ie]=Bq(q,B,N);p({x:Ce,y:Ie}),L=requestAnimationFrame(Y)}const oe={...$,nodeId:i,type:U,position:$.position},ce=l.get(i),ue={inProgress:!0,isValid:null,from:Q0(ce,oe,Yt.Left,!0),fromHandle:oe,fromPosition:oe.position,fromNode:ce,to:q,toHandle:null,toPosition:WB[oe.position],toNode:null};M(ue);let de=ue;x?.(t,{nodeId:i,handleId:r,handleType:U});function be(Ce){if(!k()||!oe){we(Ce);return}const Ie=T();q=Zu(Ce,B),R=Due($b(q,Ie,!1,[1,1]),n,l,oe),te||(Y(),te=!0);const Fe=eH(Ce,{handle:R,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:b,doc:D,lib:c,flowId:f,nodeLookup:l});J=Fe.handleDomNode,W=Fe.connection,Z=Fue(!!R,Fe.isValid);const ve={...de,isValid:Z,to:R&&Z?Uq({x:R.x,y:R.y},Ie):q,toHandle:Fe.toHandle,toPosition:Z&&Fe.toHandle?Fe.toHandle.position:WB[oe.position],toNode:Fe.toHandle?l.get(Fe.toHandle.nodeId):null};Z&&R&&de.toHandle&&ve.toHandle&&de.toHandle.type===ve.toHandle.type&&de.toHandle.nodeId===ve.toHandle.nodeId&&de.toHandle.id===ve.toHandle.id&&de.to.x===ve.to.x&&de.to.y===ve.to.y||(M(ve),de=ve)}function we(Ce){(R||J)&&W&&Z&&S?.(W);const{inProgress:Ie,...Fe}=de,ve={...Fe,toPosition:de.toHandle?de.toPosition:null};_?.(Ce,ve),s&&E?.(Ce,ve),g(),cancelAnimationFrame(L),te=!1,Z=!1,W=null,J=null,D.removeEventListener("mousemove",be),D.removeEventListener("mouseup",we),D.removeEventListener("touchmove",be),D.removeEventListener("touchend",we)}D.addEventListener("mousemove",be),D.addEventListener("mouseup",we),D.addEventListener("touchmove",be),D.addEventListener("touchend",we)}function eH(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:a,flowId:l,isValidConnection:c=Qq,nodeLookup:u}){const f=s==="target",p=e?o.querySelector(`.${a}-flow__handle[data-id="${l}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:g,y:x}=Zu(t),S=o.elementFromPoint(g,x),_=S?.classList.contains(`${a}-flow__handle`)?S:p,b={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const E=Jq(void 0,_),M=_.getAttribute("data-nodeid"),T=_.getAttribute("data-handleid"),k=_.classList.contains("connectable"),N=_.classList.contains("connectableend");if(!M||!E)return b;const D={source:f?M:r,sourceHandle:f?T:i,target:f?r:M,targetHandle:f?i:T};b.connection=D;const R=k&&N&&(n===ky.Strict?f&&E==="source"||!f&&E==="target":M!==r||T!==i);b.isValid=R&&c(D),b.toHandle=Zq(M,E,T,u,n,!1)}return b}const IP={onPointerDown:Bue,isValid:eH};function jue({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=Ta(t);function s({translateExtent:a,width:l,height:c,zoomStep:u=10,pannable:f=!0,zoomable:p=!0,inversePan:g=!1}){const x=M=>{const T=n();if(M.sourceEvent.type!=="wheel"||!e)return;const k=-M.sourceEvent.deltaY*(M.sourceEvent.deltaMode===1?.05:M.sourceEvent.deltaMode?1:.002)*u,N=T[2]*Math.pow(2,k);e.scaleTo(N)};let S=[0,0];const _=M=>{(M.sourceEvent.type==="mousedown"||M.sourceEvent.type==="touchstart")&&(S=[M.sourceEvent.clientX??M.sourceEvent.touches[0].clientX,M.sourceEvent.clientY??M.sourceEvent.touches[0].clientY])},b=M=>{const T=n();if(M.sourceEvent.type!=="mousemove"&&M.sourceEvent.type!=="touchmove"||!e)return;const k=[M.sourceEvent.clientX??M.sourceEvent.touches[0].clientX,M.sourceEvent.clientY??M.sourceEvent.touches[0].clientY],N=[k[0]-S[0],k[1]-S[1]];S=k;const D=r()*Math.max(T[2],Math.log(T[2]))*(g?-1:1),L={x:T[0]-N[0]*D,y:T[1]-N[1]*D},R=[[0,0],[l,c]];e.setViewportConstrained({x:L.x,y:L.y,zoom:T[2]},R,a)},E=Aq().on("start",_).on("zoom",f?b:null).on("zoom.wheel",p?x:null);i.call(E,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:jl}}const Uue=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,lT=t=>({x:t.x,y:t.y,zoom:t.k}),sA=({x:t,y:e,zoom:n})=>rT.translate(t,e).scale(n),Kg=(t,e)=>t.target.closest(`.${e}`),tH=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),oA=(t,e=0,n=()=>{})=>{const r=typeof e=="number"&&e>0;return r||n(),r?t.transition().duration(e).on("end",n):t},nH=t=>{const e=t.ctrlKey&&TE()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function zue({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(Kg(u,e))return!1;u.preventDefault(),u.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(u.ctrlKey&&o){const _=jl(u),b=nH(u),E=f*Math.pow(2,b);r.scaleTo(n,E,_,u);return}const p=u.deltaMode===1?20:1;let g=i===Rp.Vertical?0:u.deltaX*p,x=i===Rp.Horizontal?0:u.deltaY*p;!TE()&&u.shiftKey&&i!==Rp.Vertical&&(g=u.deltaY*p,x=0),r.translateBy(n,-(g/f)*s,-(x/f)*s,{internal:!0});const S=lT(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,a?.(u,S)),t.isPanScrolling&&(l?.(u,S),t.panScrollTimeout=setTimeout(()=>{c?.(u,S),t.isPanScrolling=!1},150))}}function Vue({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){if(!e&&r.type==="wheel"&&!r.ctrlKey||Kg(r,t))return null;r.preventDefault(),n.call(this,r,i)}}function Wue({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=lT(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function que({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{t.usedRightMouseButton=!!(n&&tH(e,t.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,lT(s.transform))}}function Hue({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&tH(e,t.mouseButton??0)&&!t.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&Uue(t.prevViewport,o.transform))){const a=lT(o.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(o.sourceEvent,a)},n?150:0)}}}function $ue({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:a,noPanClassName:l,lib:c}){return u=>{const f=t||e,p=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Kg(u,`${c}-flow__node`)||Kg(u,`${c}-flow__edge`)))return!0;if(!r&&!f&&!i&&!s&&!n||o||Kg(u,a)&&u.type==="wheel"||Kg(u,l)&&(u.type!=="wheel"||i&&u.type==="wheel"&&!t)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&u.touches?.length>1)return u.preventDefault(),!1;if(!f&&!i&&!p&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const g=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&g}}function Gue({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=t.getBoundingClientRect(),p=Aq().clickDistance(!Gl(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(i),g=Ta(t).call(p);M({x:s.x,y:s.y,zoom:Oy(s.zoom,e,n)},[[0,0],[f.width,f.height]],i);const x=g.on("wheel.zoom"),S=g.on("dblclick.zoom");p.wheelDelta(nH);function _(j,U){return g?new Promise(B=>{p?.transform(oA(g,U?.duration,()=>B(!0)),j)}):Promise.resolve(!1)}function b({noWheelClassName:j,noPanClassName:U,onPaneContextMenu:B,userSelectionActive:$,panOnScroll:q,panOnDrag:te,panOnScrollMode:W,panOnScrollSpeed:Z,preventScrolling:J,zoomOnPinch:Y,zoomOnScroll:oe,zoomOnDoubleClick:ce,zoomActivationKeyPressed:ie,lib:ue,onTransformChange:de}){$&&!u.isZoomingOrPanning&&E();const we=q&&!ie&&!$?zue({zoomPanValues:u,noWheelClassName:j,d3Selection:g,d3Zoom:p,panOnScrollMode:W,panOnScrollSpeed:Z,zoomOnPinch:Y,onPanZoomStart:a,onPanZoom:o,onPanZoomEnd:l}):Vue({noWheelClassName:j,preventScrolling:J,d3ZoomHandler:x});if(g.on("wheel.zoom",we,{passive:!1}),!$){const Ie=Wue({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:a});p.on("start",Ie);const Fe=que({zoomPanValues:u,panOnDrag:te,onPaneContextMenu:!!B,onPanZoom:o,onTransformChange:de});p.on("zoom",Fe);const ve=Hue({zoomPanValues:u,panOnDrag:te,panOnScroll:q,onPaneContextMenu:B,onPanZoomEnd:l,onDraggingChange:c});p.on("end",ve)}const Ce=$ue({zoomActivationKeyPressed:ie,panOnDrag:te,zoomOnScroll:oe,panOnScroll:q,zoomOnDoubleClick:ce,zoomOnPinch:Y,userSelectionActive:$,noPanClassName:U,noWheelClassName:j,lib:ue});p.filter(Ce),ce?g.on("dblclick.zoom",S):g.on("dblclick.zoom",null)}function E(){p.on("zoom",null)}async function M(j,U,B){const $=sA(j),q=p?.constrain()($,U,B);return q&&await _(q),new Promise(te=>te(q))}async function T(j,U){const B=sA(j);return await _(B,U),new Promise($=>$(B))}function k(j){if(g){const U=sA(j),B=g.property("__zoom");(B.k!==j.zoom||B.x!==j.x||B.y!==j.y)&&p?.transform(g,U,null,{sync:!0})}}function N(){const j=g?Rq(g.node()):{x:0,y:0,k:1};return{x:j.x,y:j.y,zoom:j.k}}function D(j,U){return g?new Promise(B=>{p?.scaleTo(oA(g,U?.duration,()=>B(!0)),j)}):Promise.resolve(!1)}function L(j,U){return g?new Promise(B=>{p?.scaleBy(oA(g,U?.duration,()=>B(!0)),j)}):Promise.resolve(!1)}function R(j){p?.scaleExtent(j)}function A(j){p?.translateExtent(j)}function P(j){const U=!Gl(j)||j<0?0:j;p?.clickDistance(U)}return{update:b,destroy:E,setViewport:T,setViewportConstrained:M,getViewport:N,scaleTo:D,scaleBy:L,setScaleExtent:R,setTranslateExtent:A,syncViewport:k,setClickDistance:P}}var s0;(function(t){t.Line="line",t.Handle="handle"})(s0||(s0={}));function Xue({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=t-e,a=n-r,l=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(l[0]=l[0]*-1),a&&s&&(l[1]=l[1]*-1),l}function Kue(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function nf(t,e){return Math.max(0,e-t)}function rf(t,e){return Math.max(0,t-e)}function P_(t,e,n){return Math.max(0,e-t,t-n)}function nj(t,e){return t?!e:e}function Yue(t,e,n,r,i,s,o,a){let{affectsX:l,affectsY:c}=e;const{isHorizontal:u,isVertical:f}=e,p=u&&f,{xSnapped:g,ySnapped:x}=n,{minWidth:S,maxWidth:_,minHeight:b,maxHeight:E}=r,{x:M,y:T,width:k,height:N,aspectRatio:D}=t;let L=Math.floor(u?g-t.pointerX:0),R=Math.floor(f?x-t.pointerY:0);const A=k+(l?-L:L),P=N+(c?-R:R),j=-s[0]*k,U=-s[1]*N;let B=P_(A,S,_),$=P_(P,b,E);if(o){let W=0,Z=0;l&&L<0?W=nf(M+L+j,o[0][0]):!l&&L>0&&(W=rf(M+A+j,o[1][0])),c&&R<0?Z=nf(T+R+U,o[0][1]):!c&&R>0&&(Z=rf(T+P+U,o[1][1])),B=Math.max(B,W),$=Math.max($,Z)}if(a){let W=0,Z=0;l&&L>0?W=rf(M+L,a[0][0]):!l&&L<0&&(W=nf(M+A,a[1][0])),c&&R>0?Z=rf(T+R,a[0][1]):!c&&R<0&&(Z=nf(T+P,a[1][1])),B=Math.max(B,W),$=Math.max($,Z)}if(i){if(u){const W=P_(A/D,b,E)*D;if(B=Math.max(B,W),o){let Z=0;!l&&!c||l&&!c&&p?Z=rf(T+U+A/D,o[1][1])*D:Z=nf(T+U+(l?L:-L)/D,o[0][1])*D,B=Math.max(B,Z)}if(a){let Z=0;!l&&!c||l&&!c&&p?Z=nf(T+A/D,a[1][1])*D:Z=rf(T+(l?L:-L)/D,a[0][1])*D,B=Math.max(B,Z)}}if(f){const W=P_(P*D,S,_)/D;if($=Math.max($,W),o){let Z=0;!l&&!c||c&&!l&&p?Z=rf(M+P*D+j,o[1][0])/D:Z=nf(M+(c?R:-R)*D+j,o[0][0])/D,$=Math.max($,Z)}if(a){let Z=0;!l&&!c||c&&!l&&p?Z=nf(M+P*D,a[1][0])/D:Z=rf(M+(c?R:-R)*D,a[0][0])/D,$=Math.max($,Z)}}}R=R+(R<0?$:-$),L=L+(L<0?B:-B),i&&(p?A>P*D?R=(nj(l,c)?-L:L)/D:L=(nj(l,c)?-R:R)*D:u?(R=L/D,c=l):(L=R*D,l=c));const q=l?M+L:M,te=c?T+R:T;return{width:k+(l?-L:L),height:N+(c?-R:R),x:s[0]*L*(l?-1:1)+q,y:s[1]*R*(c?-1:1)+te}}const rH={width:0,height:0,x:0,y:0},Zue={...rH,pointerX:0,pointerY:0,aspectRatio:1};function Jue(t){return[[0,0],[t.measured.width,t.measured.height]]}function Que(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,o=t.measured.height??0,a=n[0]*s,l=n[1]*o;return[[r-a,i-l],[r+s-a,i+o-l]]}function ede({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=Ta(t);function o({controlPosition:l,boundaries:c,keepAspectRatio:u,onResizeStart:f,onResize:p,onResizeEnd:g,shouldResize:x}){let S={...rH},_={...Zue};const b=Kue(l);let E,M=null,T=[],k,N,D;const L=mq().on("start",R=>{const{nodeLookup:A,transform:P,snapGrid:j,snapToGrid:U,nodeOrigin:B,paneDomNode:$}=n();if(E=A.get(e),!E)return;M=$?.getBoundingClientRect()??null;const{xSnapped:q,ySnapped:te}=i0(R.sourceEvent,{transform:P,snapGrid:j,snapToGrid:U,containerBounds:M});S={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},_={...S,pointerX:q,pointerY:te,aspectRatio:S.width/S.height},k=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(k=A.get(E.parentId),N=k&&E.extent==="parent"?Jue(k):void 0),T=[],D=void 0;for(const[W,Z]of A)if(Z.parentId===e&&(T.push({id:W,position:{...Z.position},extent:Z.extent}),Z.extent==="parent"||Z.expandParent)){const J=Que(Z,E,Z.origin??B);D?D=[[Math.min(J[0][0],D[0][0]),Math.min(J[0][1],D[0][1])],[Math.max(J[1][0],D[1][0]),Math.max(J[1][1],D[1][1])]]:D=J}f?.(R,{...S})}).on("drag",R=>{const{transform:A,snapGrid:P,snapToGrid:j,nodeOrigin:U}=n(),B=i0(R.sourceEvent,{transform:A,snapGrid:P,snapToGrid:j,containerBounds:M}),$=[];if(!E)return;const{x:q,y:te,width:W,height:Z}=S,J={},Y=E.origin??U,{width:oe,height:ce,x:ie,y:ue}=Yue(_,b,B,c,u,Y,N,D),de=oe!==W,be=ce!==Z,we=ie!==q&&de,Ce=ue!==te&&be;if(!we&&!Ce&&!de&&!be)return;if((we||Ce||Y[0]===1||Y[1]===1)&&(J.x=we?ie:S.x,J.y=Ce?ue:S.y,S.x=J.x,S.y=J.y,T.length>0)){const _e=ie-q,se=ue-te;for(const $e of T)$e.position={x:$e.position.x-_e+Y[0]*(oe-W),y:$e.position.y-se+Y[1]*(ce-Z)},$.push($e)}if((de||be)&&(J.width=de?oe:S.width,J.height=be?ce:S.height,S.width=J.width,S.height=J.height),k&&E.expandParent){const _e=Y[0]*(J.width??0);J.x&&J.x<_e&&(S.x=_e,_.x=_.x-(J.x-_e));const se=Y[1]*(J.height??0);J.y&&J.y<se&&(S.y=se,_.y=_.y-(J.y-se))}const Ie=Xue({width:S.width,prevWidth:W,height:S.height,prevHeight:Z,affectsX:b.affectsX,affectsY:b.affectsY}),Fe={...S,direction:Ie};x?.(R,Fe)!==!1&&(p?.(R,Fe),r(J,$))}).on("end",R=>{g?.(R,{...S}),i?.()});s.call(L)}function a(){s.on(".drag",null)}return{update:o,destroy:a}}const tde={},rj=t=>{let e;const n=new Set,r=(u,f)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const g=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(x=>x(e,g))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(tde?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},nde=t=>t?rj(t):rj,{useDebugValue:rde}=rr,{useSyncExternalStoreWithSelector:ide}=E9,sde=t=>t;function iH(t,e=sde,n){const r=ide(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return rde(r),r}const ij=(t,e)=>{const n=nde(t),r=(i,s=e)=>iH(n,i,s);return Object.assign(r,n),r},ode=(t,e)=>t?ij(t,e):ij;function ai(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const cT=X.createContext(null),ade=cT.Provider,sH=hd.error001();function Yn(t,e){const n=X.useContext(cT);if(n===null)throw new Error(sH);return iH(n,t,e)}function Xr(){const t=X.useContext(cT);if(t===null)throw new Error(sH);return X.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const sj={display:"none"},lde={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},oH="react-flow__node-desc",aH="react-flow__edge-desc",cde="react-flow__aria-live",ude=t=>t.ariaLiveMessage;function dde({rfId:t}){const e=Yn(ude);return v.jsx("div",{id:`${cde}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:lde,children:e})}function fde({rfId:t,disableKeyboardA11y:e}){return v.jsxs(v.Fragment,{children:[v.jsxs("div",{id:`${oH}-${t}`,style:sj,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),v.jsx("div",{id:`${aH}-${t}`,style:sj,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&v.jsx(dde,{rfId:t})]})}const hde=t=>t.userSelectionActive?"none":"all",Sk=X.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const o=Yn(hde),a=`${t}`.split("-");return v.jsx("div",{className:Vi(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},ref:s,...i,children:e})});function pde({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:v.jsx(Sk,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const mde=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},k_=t=>t.id;function gde(t,e){return ai(t.selectedNodes.map(k_),e.selectedNodes.map(k_))&&ai(t.selectedEdges.map(k_),e.selectedEdges.map(k_))}function yde({onSelectionChange:t}){const e=Xr(),{selectedNodes:n,selectedEdges:r}=Yn(mde,gde);return X.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const vde=t=>!!t.onSelectionChangeHandlers;function xde({onSelectionChange:t}){const e=Yn(vde);return t||e?v.jsx(yde,{onSelectionChange:t}):null}const lH=[0,0],bde={x:0,y:0,zoom:1},wde=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],oj=[...wde,"rfId"],_de=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),aj={translateExtent:Y0,nodeOrigin:lH,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Sde(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:l,setPaneClickDistance:c}=Yn(_de,ai),u=Xr();X.useEffect(()=>(l(t.defaultNodes,t.defaultEdges),()=>{f.current=aj,a()}),[]);const f=X.useRef(aj);return X.useEffect(()=>{for(const p of oj){const g=t[p],x=f.current[p];g!==x&&(typeof t[p]>"u"||(p==="nodes"?e(g):p==="edges"?n(g):p==="minZoom"?r(g):p==="maxZoom"?i(g):p==="translateExtent"?s(g):p==="nodeExtent"?o(g):p==="paneClickDistance"?c(g):p==="fitView"?u.setState({fitViewOnInit:g}):p==="fitViewOptions"?u.setState({fitViewOnInitOptions:g}):u.setState({[p]:g})))}f.current=t},oj.map(p=>t[p])),null}function lj(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Ede(t){const[e,n]=X.useState(t==="system"?null:t);return X.useEffect(()=>{if(t!=="system"){n(t);return}const r=lj(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:lj()?.matches?"dark":"light"}const cj=typeof document<"u"?document:null;function eb(t=null,e={target:cj,actInsideInputWithModifier:!0}){const[n,r]=X.useState(!1),i=X.useRef(!1),s=X.useRef(new Set([])),[o,a]=X.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),u=c.reduce((f,p)=>f.concat(...p),[]);return[c,u]}return[[],[]]},[t]);return X.useEffect(()=>{const l=e?.target||cj;if(t!==null){const c=p=>{if(i.current=p.ctrlKey||p.metaKey||p.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&EP(p))return!1;const x=dj(p.code,a);s.current.add(p[x]),uj(o,s.current,!1)&&(p.preventDefault(),r(!0))},u=p=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&EP(p))return!1;const x=dj(p.code,a);uj(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(p[x]),p.key==="Meta"&&s.current.clear(),i.current=!1},f=()=>{s.current.clear(),r(!1)};return l?.addEventListener("keydown",c),l?.addEventListener("keyup",u),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{l?.removeEventListener("keydown",c),l?.removeEventListener("keyup",u),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[t,r]),n}function uj(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function dj(t,e){return e.includes(t)?"code":"key"}const Mde=()=>{const t=Xr();return X.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:o}=t.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},fitView:e=>{const{nodeLookup:n,minZoom:r,maxZoom:i,panZoom:s,domNode:o}=t.getState();if(!s||!o)return Promise.resolve(!1);const a=wP(n,e),{width:l,height:c}=aT(o);return _P({nodes:a,width:l,height:c,minZoom:r,maxZoom:i,panZoom:s},e)},setCenter:async(e,n,r)=>{const{width:i,height:s,maxZoom:o,panZoom:a}=t.getState(),l=typeof r?.zoom<"u"?r.zoom:o,c=i/2-e*l,u=s/2-n*l;return a?(await a.setViewport({x:c,y:u,zoom:l},{duration:r?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:a}=t.getState(),l=yk(e,r,i,s,o,n?.padding??.1);return a?(await a.setViewport(l,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={snapToGrid:!0})=>{const{transform:r,snapGrid:i,domNode:s}=t.getState();if(!s)return e;const{x:o,y:a}=s.getBoundingClientRect(),l={x:e.x-o,y:e.y-a};return $b(l,r,n.snapToGrid,i)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=Uq(e,n);return{x:o.x+i,y:o.y+s}}}),[])};function cH(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const a={...s};for(const l of o)Tde(l,a);n.push(a)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function Tde(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&(e.width=t.dimensions.width,e.height=t.dimensions.height)),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function Cde(t,e){return cH(t,e)}function Ide(t,e){return cH(t,e)}function ap(t,e){return{id:t,type:"select",selected:e}}function Yg(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(ap(s.id,o)))}return r}function fj({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const o=e.get(s.id),a=o?.internals?.userNode??o;a!==void 0&&a!==s&&n.push({id:s.id,item:s,type:"replace"}),a===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function hj(t){return{id:t.id,type:"remove"}}const pj=t=>uue(t),Rde=t=>Oq(t);function uH(t){return X.forwardRef(t)}const Ade=typeof window<"u"?X.useLayoutEffect:X.useEffect;function mj(t){const[e,n]=X.useState(BigInt(0)),[r]=X.useState(()=>Nde(()=>n(i=>i+BigInt(1))));return Ade(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function Nde(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const dH=X.createContext(null);function Pde({children:t}){const e=Xr(),n=X.useCallback(a=>{const{nodes:l=[],setNodes:c,hasDefaultNodes:u,onNodesChange:f,nodeLookup:p}=e.getState();let g=l;for(const x of a)g=typeof x=="function"?x(g):x;u?c(g):f&&f(fj({items:g,lookup:p}))},[]),r=mj(n),i=X.useCallback(a=>{const{edges:l=[],setEdges:c,hasDefaultEdges:u,onEdgesChange:f,edgeLookup:p}=e.getState();let g=l;for(const x of a)g=typeof x=="function"?x(g):x;u?c(g):f&&f(fj({items:g,lookup:p}))},[]),s=mj(i),o=X.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return v.jsx(dH.Provider,{value:o,children:t})}function kde(){const t=X.useContext(dH);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const Ode=t=>!!t.panZoom;function Gb(){const t=Mde(),e=Xr(),n=kde(),r=Yn(Ode),i=X.useMemo(()=>{const s=f=>e.getState().nodeLookup.get(f),o=f=>{n.nodeQueue.push(f)},a=f=>{n.edgeQueue.push(f)},l=f=>{const{nodeLookup:p,nodeOrigin:g}=e.getState(),x=pj(f)?f:p.get(f.id),S=x.parentId?Vq(x.position,x.measured,x.parentId,p,g):x.position,_={...x,position:S,width:x.measured?.width??x.width,height:x.measured?.height??x.height};return Ly(_)},c=(f,p,g={replace:!1})=>{o(x=>x.map(S=>{if(S.id===f){const _=typeof p=="function"?p(S):p;return g.replace&&pj(_)?_:{...S,..._}}return S}))},u=(f,p,g={replace:!1})=>{a(x=>x.map(S=>{if(S.id===f){const _=typeof p=="function"?p(S):p;return g.replace&&Rde(_)?_:{...S,..._}}return S}))};return{getNodes:()=>e.getState().nodes.map(f=>({...f})),getNode:f=>s(f)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:f=[]}=e.getState();return f.map(p=>({...p}))},getEdge:f=>e.getState().edgeLookup.get(f),setNodes:o,setEdges:a,addNodes:f=>{const p=Array.isArray(f)?f:[f];n.nodeQueue.push(g=>[...g,...p])},addEdges:f=>{const p=Array.isArray(f)?f:[f];n.edgeQueue.push(g=>[...g,...p])},toObject:()=>{const{nodes:f=[],edges:p=[],transform:g}=e.getState(),[x,S,_]=g;return{nodes:f.map(b=>({...b})),edges:p.map(b=>({...b})),viewport:{x,y:S,zoom:_}}},deleteElements:async({nodes:f=[],edges:p=[]})=>{const{nodes:g,edges:x,onNodesDelete:S,onEdgesDelete:_,triggerNodeChanges:b,triggerEdgeChanges:E,onDelete:M,onBeforeDelete:T}=e.getState(),{nodes:k,edges:N}=await hue({nodesToRemove:f,edgesToRemove:p,nodes:g,edges:x,onBeforeDelete:T}),D=N.length>0,L=k.length>0;if(D){const R=N.map(hj);_?.(N),E(R)}if(L){const R=k.map(hj);S?.(k),b(R)}return(L||D)&&M?.({nodes:k,edges:N}),{deletedNodes:k,deletedEdges:N}},getIntersectingNodes:(f,p=!0,g)=>{const x=HB(f),S=x?f:l(f),_=g!==void 0;return S?(g||e.getState().nodes).filter(b=>{const E=e.getState().nodeLookup.get(b.id);if(E&&!x&&(b.id===f.id||!E.internals.positionAbsolute))return!1;const M=Ly(_?b:E),T=J0(M,S);return p&&T>0||T>=S.width*S.height}):[]},isNodeIntersecting:(f,p,g=!0)=>{const S=HB(f)?f:l(f);if(!S)return!1;const _=J0(S,p);return g&&_>0||_>=S.width*S.height},updateNode:c,updateNodeData:(f,p,g={replace:!1})=>{c(f,x=>{const S=typeof p=="function"?p(x):p;return g.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},g)},updateEdge:u,updateEdgeData:(f,p,g={replace:!1})=>{u(f,x=>{const S=typeof p=="function"?p(x):p;return g.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},g)},getNodesBounds:f=>{const{nodeLookup:p,nodeOrigin:g}=e.getState();return due(f,{nodeLookup:p,nodeOrigin:g})},getHandleConnections:({type:f,id:p,nodeId:g})=>Array.from(e.getState().connectionLookup.get(`${g}-${f}${p?`-${p}`:""}`)?.values()??[]),getNodeConnections:({type:f,handleId:p,nodeId:g})=>Array.from(e.getState().connectionLookup.get(`${g}${f?p?`-${f}-${p}`:`-${f}`:""}`)?.values()??[])}},[]);return X.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const gj=t=>t.selected,Lde={actInsideInputWithModifier:!1},Dde=typeof window<"u"?window:void 0;function Fde({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=Xr(),{deleteElements:r}=Gb(),i=eb(t,Lde),s=eb(e,{target:Dde});X.useEffect(()=>{if(i){const{edges:o,nodes:a}=n.getState();r({nodes:a.filter(gj),edges:o.filter(gj)}),n.setState({nodesSelectionActive:!1})}},[i]),X.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function Bde(t){const e=Xr();X.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=aT(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",hd.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const uT={position:"absolute",width:"100%",height:"100%",top:0,left:0},jde=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function Ude({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Rp.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:c,minZoom:u,maxZoom:f,zoomActivationKeyCode:p,preventScrolling:g=!0,children:x,noWheelClassName:S,noPanClassName:_,onViewportChange:b,isControlledViewport:E,paneClickDistance:M}){const T=Xr(),k=X.useRef(null),{userSelectionActive:N,lib:D}=Yn(jde,ai),L=eb(p),R=X.useRef();Bde(k);const A=X.useCallback(P=>{b?.({x:P[0],y:P[1],zoom:P[2]}),E||T.setState({transform:P})},[b,E]);return X.useEffect(()=>{if(k.current){R.current=Gue({domNode:k.current,minZoom:u,maxZoom:f,translateExtent:c,viewport:l,paneClickDistance:M,onDraggingChange:B=>T.setState({paneDragging:B}),onPanZoomStart:(B,$)=>{const{onViewportChangeStart:q,onMoveStart:te}=T.getState();te?.(B,$),q?.($)},onPanZoom:(B,$)=>{const{onViewportChange:q,onMove:te}=T.getState();te?.(B,$),q?.($)},onPanZoomEnd:(B,$)=>{const{onViewportChangeEnd:q,onMoveEnd:te}=T.getState();te?.(B,$),q?.($)}});const{x:P,y:j,zoom:U}=R.current.getViewport();return T.setState({panZoom:R.current,transform:[P,j,U],domNode:k.current.closest(".react-flow")}),()=>{R.current?.destroy()}}},[]),X.useEffect(()=>{R.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:L,preventScrolling:g,noPanClassName:_,userSelectionActive:N,noWheelClassName:S,lib:D,onTransformChange:A})},[t,e,n,r,i,s,o,a,L,g,_,N,S,D,A]),v.jsx("div",{className:"react-flow__renderer",ref:k,style:uT,children:x})}const zde=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Vde(){const{userSelectionActive:t,userSelectionRect:e}=Yn(zde,ai);return t&&e?v.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const aA=(t,e)=>n=>{n.target===e.current&&t?.(n)},Wde=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging});function qde({isSelecting:t,selectionKeyPressed:e,selectionMode:n=Z0.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:a,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:u,onPaneMouseMove:f,onPaneMouseLeave:p,children:g}){const x=Xr(),{userSelectionActive:S,elementsSelectable:_,dragging:b}=Yn(Wde,ai),E=_&&(t||S),M=X.useRef(null),T=X.useRef(),k=X.useRef(new Set),N=X.useRef(new Set),D=X.useRef(!1),L=X.useRef(!1),R=q=>{if(D.current){D.current=!1;return}a?.(q),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},A=q=>{if(Array.isArray(r)&&r?.includes(2)){q.preventDefault();return}l?.(q)},P=c?q=>c(q):void 0,j=q=>{const{resetSelectedElements:te,domNode:W}=x.getState();if(T.current=W?.getBoundingClientRect(),!_||!t||q.button!==0||q.target!==M.current||!T.current)return;q.target?.setPointerCapture?.(q.pointerId),L.current=!0,D.current=!1;const{x:Z,y:J}=Zu(q.nativeEvent,T.current);te(),x.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:J,x:Z,y:J}}),s?.(q)},U=q=>{const{userSelectionRect:te,transform:W,nodeLookup:Z,edgeLookup:J,connectionLookup:Y,triggerNodeChanges:oe,triggerEdgeChanges:ce,defaultEdgeOptions:ie}=x.getState();if(!T.current||!te)return;D.current=!0;const{x:ue,y:de}=Zu(q.nativeEvent,T.current),{startX:be,startY:we}=te,Ce={startX:be,startY:we,x:ue<be?ue:be,y:de<we?de:we,width:Math.abs(ue-be),height:Math.abs(de-we)},Ie=k.current,Fe=N.current;k.current=new Set(Lq(Z,Ce,W,n===Z0.Partial,!0).map(_e=>_e.id)),N.current=new Set;const ve=ie?.selectable??!0;for(const _e of k.current){const se=Y.get(_e);if(se)for(const{edgeId:$e}of se.values()){const je=J.get($e);je&&(je.selectable??ve)&&N.current.add($e)}}if(!$B(Ie,k.current)){const _e=Yg(Z,k.current,!0);oe(_e)}if(!$B(Fe,N.current)){const _e=Yg(J,N.current);ce(_e)}x.setState({userSelectionRect:Ce,userSelectionActive:!0,nodesSelectionActive:!1})},B=q=>{if(q.button!==0||!L.current)return;q.target?.releasePointerCapture?.(q.pointerId);const{userSelectionRect:te}=x.getState();!S&&te&&q.target===M.current&&R?.(q),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:k.current.size>0}),o?.(q),(e||i)&&(D.current=!1),L.current=!1},$=r===!0||Array.isArray(r)&&r.includes(0);return v.jsxs("div",{className:Vi(["react-flow__pane",{draggable:$,dragging:b,selection:t}]),onClick:E?void 0:aA(R,M),onContextMenu:aA(A,M),onWheel:aA(P,M),onPointerEnter:E?void 0:u,onPointerDown:E?j:f,onPointerMove:E?U:f,onPointerUp:E?B:void 0,onPointerLeave:p,ref:M,style:uT,children:[g,v.jsx(Vde,{})]})}function RP({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:a,onError:l}=e.getState(),c=a.get(t);if(!c){l?.("012",hd.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&o)&&(s({nodes:[c],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function fH({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const a=Xr(),[l,c]=X.useState(!1),u=X.useRef();return X.useEffect(()=>{u.current=kue({getStoreItems:()=>a.getState(),onNodeMouseDown:f=>{RP({id:f,store:a,nodeRef:t})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),X.useEffect(()=>{if(e)u.current?.destroy();else if(t.current)return u.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{u.current?.destroy()}},[n,r,e,s,t,i]),l}const Hde=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function hH(){const t=Xr();return X.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:a,updateNodePositions:l,nodeLookup:c,nodeOrigin:u}=t.getState(),f=new Map,p=Hde(o),g=i?s[0]:5,x=i?s[1]:5,S=n.direction.x*g*n.factor,_=n.direction.y*x*n.factor;for(const[,b]of c){if(!p(b))continue;let E={x:b.internals.positionAbsolute.x+S,y:b.internals.positionAbsolute.y+_};i&&(E=oT(E,s));const{position:M,positionAbsolute:T}=Dq({nodeId:b.id,nextPosition:E,nodeLookup:c,nodeExtent:r,nodeOrigin:u,onError:a});b.position=M,b.internals.positionAbsolute=T,f.set(b.id,b)}l(f)},[])}const Ek=X.createContext(null),$de=Ek.Provider;Ek.Consumer;const pH=()=>X.useContext(Ek),Gde=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),Xde=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:a,toHandle:l,isValid:c}=o,u=l?.nodeId===t&&l?.id===e&&l?.type===n;return{connectingFrom:a?.nodeId===t&&a?.id===e&&a?.type===n,connectingTo:u,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:s===ky.Strict?a?.type!==n:t!==a?.nodeId||e!==a?.id,connectionInProcess:!!a,valid:u&&c}};function Kde({type:t="source",position:e=Yt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:c,onMouseDown:u,onTouchStart:f,...p},g){const x=o||null,S=t==="target",_=Xr(),b=pH(),{connectOnClick:E,noPanClassName:M,rfId:T}=Yn(Gde,ai),{connectingFrom:k,connectingTo:N,clickConnecting:D,isPossibleEndHandle:L,connectionInProcess:R,valid:A}=Yn(Xde(b,x,t),ai);b||_.getState().onError?.("010",hd.error010());const P=B=>{const{defaultEdgeOptions:$,onConnect:q,hasDefaultEdges:te}=_.getState(),W={...$,...B};if(te){const{edges:Z,setEdges:J}=_.getState();J(bue(W,Z))}q?.(W),a?.(W)},j=B=>{if(!b)return;const $=qq(B.nativeEvent);if(i&&($&&B.button===0||!$)){const q=_.getState();IP.onPointerDown(B.nativeEvent,{autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:S,handleId:x,nodeId:b,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:P,isValidConnection:n||q.isValidConnection,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed})}$?u?.(B):f?.(B)},U=B=>{const{onClickConnectStart:$,onClickConnectEnd:q,connectionClickStartHandle:te,connectionMode:W,isValidConnection:Z,lib:J,rfId:Y,nodeLookup:oe,connection:ce}=_.getState();if(!b||!te&&!i)return;if(!te){$?.(B.nativeEvent,{nodeId:b,handleId:x,handleType:t}),_.setState({connectionClickStartHandle:{nodeId:b,type:t,id:x}});return}const ie=Wq(B.target),ue=n||Z,{connection:de,isValid:be}=IP.isValid(B.nativeEvent,{handle:{nodeId:b,id:x,type:t},connectionMode:W,fromNodeId:te.nodeId,fromHandleId:te.id||null,fromType:te.type,isValidConnection:ue,flowId:Y,doc:ie,lib:J,nodeLookup:oe});be&&de&&P(de);const we=structuredClone(ce);delete we.inProgress,we.toPosition=we.toHandle?we.toHandle.position:null,q?.(B,we),_.setState({connectionClickStartHandle:null})};return v.jsx("div",{"data-handleid":x,"data-nodeid":b,"data-handlepos":e,"data-id":`${T}-${b}-${x}-${t}`,className:Vi(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",M,c,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,clickconnecting:D,connectingfrom:k,connectingto:N,valid:A,connectionindicator:r&&(!R||L)&&(R?s:i)}]),onMouseDown:j,onTouchStart:j,onClick:E?U:void 0,ref:g,...p,children:l})}const Fy=X.memo(uH(Kde));function Yde({data:t,isConnectable:e,sourcePosition:n=Yt.Bottom}){return v.jsxs(v.Fragment,{children:[t?.label,v.jsx(Fy,{type:"source",position:n,isConnectable:e})]})}function Zde({data:t,isConnectable:e,targetPosition:n=Yt.Top,sourcePosition:r=Yt.Bottom}){return v.jsxs(v.Fragment,{children:[v.jsx(Fy,{type:"target",position:n,isConnectable:e}),t?.label,v.jsx(Fy,{type:"source",position:r,isConnectable:e})]})}function Jde(){return null}function Qde({data:t,isConnectable:e,targetPosition:n=Yt.Top}){return v.jsxs(v.Fragment,{children:[v.jsx(Fy,{type:"target",position:n,isConnectable:e}),t?.label]})}const CE={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},yj={input:Yde,default:Zde,output:Qde,group:Jde};function efe(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const tfe=t=>{const{width:e,height:n,x:r,y:i}=Hb(t.nodeLookup,{filter:s=>!!s.selected});return{width:Gl(e)?e:null,height:Gl(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function nfe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Xr(),{width:i,height:s,transformString:o,userSelectionActive:a}=Yn(tfe,ai),l=hH(),c=X.useRef(null);if(X.useEffect(()=>{n||c.current?.focus({preventScroll:!0})},[n]),fH({nodeRef:c}),a||!i||!s)return null;const u=t?p=>{const g=r.getState().nodes.filter(x=>x.selected);t(p,g)}:void 0,f=p=>{Object.prototype.hasOwnProperty.call(CE,p.key)&&(p.preventDefault(),l({direction:CE[p.key],factor:p.shiftKey?4:1}))};return v.jsx("div",{className:Vi(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:v.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:i,height:s}})})}const vj=typeof window<"u"?window:void 0,rfe=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function mH({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:u,selectionMode:f,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:x,panActivationKeyCode:S,zoomActivationKeyCode:_,elementsSelectable:b,zoomOnScroll:E,zoomOnPinch:M,panOnScroll:T,panOnScrollSpeed:k,panOnScrollMode:N,zoomOnDoubleClick:D,panOnDrag:L,defaultViewport:R,translateExtent:A,minZoom:P,maxZoom:j,preventScrolling:U,onSelectionContextMenu:B,noWheelClassName:$,noPanClassName:q,disableKeyboardA11y:te,onViewportChange:W,isControlledViewport:Z}){const{nodesSelectionActive:J,userSelectionActive:Y}=Yn(rfe),oe=eb(c,{target:vj}),ce=eb(S,{target:vj}),ie=ce||L,ue=ce||T,de=u&&ie!==!0,be=oe||Y||de;return Fde({deleteKeyCode:l,multiSelectionKeyCode:x}),v.jsx(Ude,{onPaneContextMenu:s,elementsSelectable:b,zoomOnScroll:E,zoomOnPinch:M,panOnScroll:ue,panOnScrollSpeed:k,panOnScrollMode:N,zoomOnDoubleClick:D,panOnDrag:!oe&&ie,defaultViewport:R,translateExtent:A,minZoom:P,maxZoom:j,zoomActivationKeyCode:_,preventScrolling:U,noWheelClassName:$,noPanClassName:q,onViewportChange:W,isControlledViewport:Z,paneClickDistance:a,children:v.jsxs(qde,{onSelectionStart:p,onSelectionEnd:g,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ie,isSelecting:!!be,selectionMode:f,selectionKeyPressed:oe,selectionOnDrag:de,children:[t,J&&v.jsx(nfe,{onSelectionContextMenu:B,noPanClassName:q,disableKeyboardA11y:te})]})})}mH.displayName="FlowRenderer";const ife=X.memo(mH),sfe=t=>e=>t?Lq(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function ofe(t){return Yn(X.useCallback(sfe(t),[t]),ai)}const afe=t=>t.updateNodeInternals;function lfe(){const t=Yn(afe),[e]=X.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return X.useEffect(()=>()=>{e?.disconnect()},[e]),e}function cfe({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=Xr(),s=X.useRef(null),o=X.useRef(null),a=X.useRef(t.sourcePosition),l=X.useRef(t.targetPosition),c=X.useRef(e),u=n&&!!t.internals.handleBounds;return X.useEffect(()=>{s.current&&!t.hidden&&(!u||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[u,t.hidden]),X.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),X.useEffect(()=>{if(s.current){const f=c.current!==e,p=a.current!==t.sourcePosition,g=l.current!==t.targetPosition;(f||p||g)&&(c.current=e,a.current=t.sourcePosition,l.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function ufe({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:a,elementsSelectable:l,nodesConnectable:c,nodesFocusable:u,resizeObserver:f,noDragClassName:p,noPanClassName:g,disableKeyboardA11y:x,rfId:S,nodeTypes:_,nodeExtent:b,nodeClickDistance:E,onError:M}){const{node:T,internals:k,isParent:N}=Yn(we=>{const Ce=we.nodeLookup.get(t),Ie=we.parentLookup.has(t);return{node:Ce,internals:Ce.internals,isParent:Ie}},ai);let D=T.type||"default",L=_?.[D]||yj[D];L===void 0&&(M?.("003",hd.error003(D)),D="default",L=yj.default);const R=!!(T.draggable||a&&typeof T.draggable>"u"),A=!!(T.selectable||l&&typeof T.selectable>"u"),P=!!(T.connectable||c&&typeof T.connectable>"u"),j=!!(T.focusable||u&&typeof T.focusable>"u"),U=Xr(),B=zq(T),$=cfe({node:T,nodeType:D,hasDimensions:B,resizeObserver:f}),q=fH({nodeRef:$,disabled:T.hidden||!R,noDragClassName:p,handleSelector:T.dragHandle,nodeId:t,isSelectable:A,nodeClickDistance:E}),te=hH();if(T.hidden)return null;const W=pd(T),Z=efe(T),J=A||R||e||n||r||i,Y=n?we=>n(we,{...k.userNode}):void 0,oe=r?we=>r(we,{...k.userNode}):void 0,ce=i?we=>i(we,{...k.userNode}):void 0,ie=s?we=>s(we,{...k.userNode}):void 0,ue=o?we=>o(we,{...k.userNode}):void 0,de=we=>{const{selectNodesOnDrag:Ce,nodeDragThreshold:Ie}=U.getState();A&&(!Ce||!R||Ie>0)&&RP({id:t,store:U,nodeRef:$}),e&&e(we,{...k.userNode})},be=we=>{if(!(EP(we.nativeEvent)||x))if(Nq.includes(we.key)&&A){const Ce=we.key==="Escape";RP({id:t,store:U,unselect:Ce,nodeRef:$})}else R&&T.selected&&Object.prototype.hasOwnProperty.call(CE,we.key)&&(we.preventDefault(),U.setState({ariaLiveMessage:`Moved selected node ${we.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~k.positionAbsolute.x}, y: ${~~k.positionAbsolute.y}`}),te({direction:CE[we.key],factor:we.shiftKey?4:1}))};return v.jsx("div",{className:Vi(["react-flow__node",`react-flow__node-${D}`,{[g]:R},T.className,{selected:T.selected,selectable:A,parent:N,draggable:R,dragging:q}]),ref:$,style:{zIndex:k.z,transform:`translate(${k.positionAbsolute.x}px,${k.positionAbsolute.y}px)`,pointerEvents:J?"all":"none",visibility:B?"visible":"hidden",...T.style,...Z},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:Y,onMouseMove:oe,onMouseLeave:ce,onContextMenu:ie,onClick:de,onDoubleClick:ue,onKeyDown:j?be:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":x?void 0:`${oH}-${S}`,"aria-label":T.ariaLabel,children:v.jsx($de,{value:t,children:v.jsx(L,{id:t,data:T.data,type:D,positionAbsoluteX:k.positionAbsolute.x,positionAbsoluteY:k.positionAbsolute.y,selected:T.selected??!1,selectable:A,draggable:R,deletable:T.deletable??!0,isConnectable:P,sourcePosition:T.sourcePosition,targetPosition:T.targetPosition,dragging:q,dragHandle:T.dragHandle,zIndex:k.z,parentId:T.parentId,...W})})})}const dfe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function gH(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Yn(dfe,ai),o=ofe(t.onlyRenderVisibleElements),a=lfe();return v.jsx("div",{className:"react-flow__nodes",style:uT,children:o.map(l=>v.jsx(ufe,{id:l,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:a,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},l))})}gH.displayName="NodeRenderer";const ffe=X.memo(gH);function hfe(t){return Yn(X.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&yue({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),ai)}const pfe=({color:t="none",strokeWidth:e=1})=>v.jsx("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),mfe=({color:t="none",strokeWidth:e=1})=>v.jsx("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),xj={[EE.Arrow]:pfe,[EE.ArrowClosed]:mfe};function gfe(t){const e=Xr();return X.useMemo(()=>Object.prototype.hasOwnProperty.call(xj,t)?xj[t]:(e.getState().onError?.("009",hd.error009(t)),null),[t])}const yfe=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=gfe(e);return l?v.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:v.jsx(l,{color:n,strokeWidth:o})}):null},yH=({defaultColor:t,rfId:e})=>{const n=Yn(s=>s.edges),r=Yn(s=>s.defaultEdgeOptions),i=X.useMemo(()=>Mue(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?v.jsx("svg",{className:"react-flow__marker",children:v.jsx("defs",{children:i.map(s=>v.jsx(yfe,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};yH.displayName="MarkerDefinitions";var vfe=X.memo(yH);function vH({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:c,...u}){const[f,p]=X.useState({x:1,y:0,width:0,height:0}),g=Vi(["react-flow__edge-textwrapper",c]),x=X.useRef(null);return X.useEffect(()=>{if(x.current){const S=x.current.getBBox();p({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),typeof n>"u"||!n?null:v.jsxs("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:g,visibility:f.width?"visible":"hidden",...u,children:[i&&v.jsx("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),v.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:x,style:r,children:n}),l]})}vH.displayName="EdgeText";const xfe=X.memo(vH);function Xb({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:c=20,...u}){return v.jsxs(v.Fragment,{children:[v.jsx("path",{...u,d:t,fill:"none",className:Vi(["react-flow__edge-path",u.className])}),c&&v.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:c,className:"react-flow__edge-interaction"}),r&&Gl(e)&&Gl(n)?v.jsx(xfe,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function bj({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Yt.Left||t===Yt.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function xH({sourceX:t,sourceY:e,sourcePosition:n=Yt.Bottom,targetX:r,targetY:i,targetPosition:s=Yt.Top}){const[o,a]=bj({pos:n,x1:t,y1:e,x2:r,y2:i}),[l,c]=bj({pos:s,x1:r,y1:i,x2:t,y2:e}),[u,f,p,g]=Hq({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${t},${e} C${o},${a} ${l},${c} ${r},${i}`,u,f,p,g]}function bH(t){return X.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Yt.Bottom,targetPosition:a=Yt.Top,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:x,markerEnd:S,markerStart:_,interactionWidth:b})=>{const[E,M,T]=xH({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a}),k=t.isInternal?void 0:e;return v.jsx(Xb,{id:k,path:E,labelX:M,labelY:T,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:x,markerEnd:S,markerStart:_,interactionWidth:b})})}const bfe=bH({isInternal:!1}),wH=bH({isInternal:!0});bfe.displayName="SimpleBezierEdge";wH.displayName="SimpleBezierEdgeInternal";function _H(t){return X.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:p,sourcePosition:g=Yt.Bottom,targetPosition:x=Yt.Top,markerEnd:S,markerStart:_,pathOptions:b,interactionWidth:E})=>{const[M,T,k]=MP({sourceX:n,sourceY:r,sourcePosition:g,targetX:i,targetY:s,targetPosition:x,borderRadius:b?.borderRadius,offset:b?.offset}),N=t.isInternal?void 0:e;return v.jsx(Xb,{id:N,path:M,labelX:T,labelY:k,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:p,markerEnd:S,markerStart:_,interactionWidth:E})})}const SH=_H({isInternal:!1}),EH=_H({isInternal:!0});SH.displayName="SmoothStepEdge";EH.displayName="SmoothStepEdgeInternal";function MH(t){return X.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return v.jsx(SH,{...n,id:r,pathOptions:X.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const wfe=MH({isInternal:!1}),TH=MH({isInternal:!0});wfe.displayName="StepEdge";TH.displayName="StepEdgeInternal";function CH(t){return X.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:x,interactionWidth:S})=>{const[_,b,E]=Gq({sourceX:n,sourceY:r,targetX:i,targetY:s}),M=t.isInternal?void 0:e;return v.jsx(Xb,{id:M,path:_,labelX:b,labelY:E,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:x,interactionWidth:S})})}const _fe=CH({isInternal:!1}),IH=CH({isInternal:!0});_fe.displayName="StraightEdge";IH.displayName="StraightEdgeInternal";function RH(t){return X.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Yt.Bottom,targetPosition:a=Yt.Top,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:x,markerEnd:S,markerStart:_,pathOptions:b,interactionWidth:E})=>{const[M,T,k]=vk({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a,curvature:b?.curvature}),N=t.isInternal?void 0:e;return v.jsx(Xb,{id:N,path:M,labelX:T,labelY:k,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:x,markerEnd:S,markerStart:_,interactionWidth:E})})}const Sfe=RH({isInternal:!1}),AH=RH({isInternal:!0});Sfe.displayName="BezierEdge";AH.displayName="BezierEdgeInternal";const wj={default:AH,straight:IH,step:TH,smoothstep:EH,simplebezier:wH},_j={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Efe=(t,e,n)=>n===Yt.Left?t-e:n===Yt.Right?t+e:t,Mfe=(t,e,n)=>n===Yt.Top?t-e:n===Yt.Bottom?t+e:t,Sj="react-flow__edgeupdater";function Ej({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a}){return v.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Vi([Sj,`${Sj}-${a}`]),cx:Efe(e,r,t),cy:Mfe(n,r,t),r,stroke:"transparent",fill:"transparent"})}function Tfe({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:a,targetPosition:l,onReconnect:c,onReconnectStart:u,onReconnectEnd:f,setReconnecting:p,setUpdateHover:g}){const x=Xr(),S=(T,k)=>{if(T.button!==0)return;const{autoPanOnConnect:N,domNode:D,isValidConnection:L,connectionMode:R,connectionRadius:A,lib:P,onConnectStart:j,onConnectEnd:U,cancelConnection:B,nodeLookup:$,rfId:q,panBy:te,updateConnection:W}=x.getState(),Z=k.type==="target";p(!0),u?.(T,n,k.type);const J=(oe,ce)=>{p(!1),f?.(oe,n,k.type,ce)},Y=oe=>c?.(n,oe);IP.onPointerDown(T.nativeEvent,{autoPanOnConnect:N,connectionMode:R,connectionRadius:A,domNode:D,handleId:k.id,nodeId:k.nodeId,nodeLookup:$,isTarget:Z,edgeUpdaterType:k.type,lib:P,flowId:q,cancelConnection:B,panBy:te,isValidConnection:L,onConnect:Y,onConnectStart:j,onConnectEnd:U,onReconnectEnd:J,updateConnection:W,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle})},_=T=>S(T,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=T=>S(T,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),E=()=>g(!0),M=()=>g(!1);return v.jsxs(v.Fragment,{children:[(t===!0||t==="source")&&v.jsx(Ej,{position:a,centerX:r,centerY:i,radius:e,onMouseDown:_,onMouseEnter:E,onMouseOut:M,type:"source"}),(t===!0||t==="target")&&v.jsx(Ej,{position:l,centerX:s,centerY:o,radius:e,onMouseDown:b,onMouseEnter:E,onMouseOut:M,type:"target"})]})}function Cfe({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,reconnectRadius:u,onReconnect:f,onReconnectStart:p,onReconnectEnd:g,rfId:x,edgeTypes:S,noPanClassName:_,onError:b,disableKeyboardA11y:E}){let M=Yn(ve=>ve.edgeLookup.get(t));const T=Yn(ve=>ve.defaultEdgeOptions);M=T?{...T,...M}:M;let k=M.type||"default",N=S?.[k]||wj[k];N===void 0&&(b?.("011",hd.error011(k)),k="default",N=wj.default);const D=!!(M.focusable||e&&typeof M.focusable>"u"),L=typeof f<"u"&&(M.reconnectable||n&&typeof M.reconnectable>"u"),R=!!(M.selectable||r&&typeof M.selectable>"u"),A=X.useRef(null),[P,j]=X.useState(!1),[U,B]=X.useState(!1),$=Xr(),{zIndex:q,sourceX:te,sourceY:W,targetX:Z,targetY:J,sourcePosition:Y,targetPosition:oe}=Yn(X.useCallback(ve=>{const _e=ve.nodeLookup.get(M.source),se=ve.nodeLookup.get(M.target);if(!_e||!se)return{zIndex:M.zIndex,..._j};const $e=Eue({id:t,sourceNode:_e,targetNode:se,sourceHandle:M.sourceHandle||null,targetHandle:M.targetHandle||null,connectionMode:ve.connectionMode,onError:b});return{zIndex:gue({selected:M.selected,zIndex:M.zIndex,sourceNode:_e,targetNode:se,elevateOnSelect:ve.elevateEdgesOnSelect}),...$e||_j}},[M.source,M.target,M.sourceHandle,M.targetHandle,M.selected,M.zIndex]),ai),ce=X.useMemo(()=>M.markerStart?`url('#${TP(M.markerStart,x)}')`:void 0,[M.markerStart,x]),ie=X.useMemo(()=>M.markerEnd?`url('#${TP(M.markerEnd,x)}')`:void 0,[M.markerEnd,x]);if(M.hidden||te===null||W===null||Z===null||J===null)return null;const ue=ve=>{const{addSelectedEdges:_e,unselectNodesAndEdges:se,multiSelectionActive:$e}=$.getState();R&&($.setState({nodesSelectionActive:!1}),M.selected&&$e?(se({nodes:[],edges:[M]}),A.current?.blur()):_e([t])),i&&i(ve,M)},de=s?ve=>{s(ve,{...M})}:void 0,be=o?ve=>{o(ve,{...M})}:void 0,we=a?ve=>{a(ve,{...M})}:void 0,Ce=l?ve=>{l(ve,{...M})}:void 0,Ie=c?ve=>{c(ve,{...M})}:void 0,Fe=ve=>{if(!E&&Nq.includes(ve.key)&&R){const{unselectNodesAndEdges:_e,addSelectedEdges:se}=$.getState();ve.key==="Escape"?(A.current?.blur(),_e({edges:[M]})):se([t])}};return v.jsx("svg",{style:{zIndex:q},children:v.jsxs("g",{className:Vi(["react-flow__edge",`react-flow__edge-${k}`,M.className,_,{selected:M.selected,animated:M.animated,inactive:!R&&!i,updating:P,selectable:R}]),onClick:ue,onDoubleClick:de,onContextMenu:be,onMouseEnter:we,onMouseMove:Ce,onMouseLeave:Ie,onKeyDown:D?Fe:void 0,tabIndex:D?0:void 0,role:D?"button":"img","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":M.ariaLabel===null?void 0:M.ariaLabel||`Edge from ${M.source} to ${M.target}`,"aria-describedby":D?`${aH}-${x}`:void 0,ref:A,children:[!U&&v.jsx(N,{id:t,source:M.source,target:M.target,type:M.type,selected:M.selected,animated:M.animated,selectable:R,deletable:M.deletable??!0,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,sourceX:te,sourceY:W,targetX:Z,targetY:J,sourcePosition:Y,targetPosition:oe,data:M.data,style:M.style,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerStart:ce,markerEnd:ie,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth}),L&&v.jsx(Tfe,{edge:M,isReconnectable:L,reconnectRadius:u,onReconnect:f,onReconnectStart:p,onReconnectEnd:g,sourceX:te,sourceY:W,targetX:Z,targetY:J,sourcePosition:Y,targetPosition:oe,setUpdateHover:j,setReconnecting:B})]})})}const Ife=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function NH({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:u,reconnectRadius:f,onEdgeDoubleClick:p,onReconnectStart:g,onReconnectEnd:x,disableKeyboardA11y:S}){const{edgesFocusable:_,edgesReconnectable:b,elementsSelectable:E,onError:M}=Yn(Ife,ai),T=hfe(e);return v.jsxs("div",{className:"react-flow__edges",children:[v.jsx(vfe,{defaultColor:t,rfId:n}),T.map(k=>v.jsx(Cfe,{id:k,edgesFocusable:_,edgesReconnectable:b,elementsSelectable:E,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,onClick:u,reconnectRadius:f,onDoubleClick:p,onReconnectStart:g,onReconnectEnd:x,rfId:n,onError:M,edgeTypes:r,disableKeyboardA11y:S},k))]})}NH.displayName="EdgeRenderer";const Rfe=X.memo(NH),Afe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Nfe({children:t}){const e=Yn(Afe);return v.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function Pfe(t){const e=Gb(),n=X.useRef(!1);X.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const kfe=t=>t.panZoom?.syncViewport;function Ofe(t){const e=Yn(kfe),n=Xr();return X.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function Lfe(t){return t.connection.inProgress?{...t.connection,to:$b(t.connection.to,t.transform)}:{...t.connection}}function Dfe(t){return Lfe}function Ffe(t){const e=Dfe();return Yn(e,ai)}const Bfe=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function jfe({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:a,inProgress:l}=Yn(Bfe,ai);return!(s&&i&&l)?null:v.jsx("svg",{style:t,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:v.jsx("g",{className:Vi(["react-flow__connection",kq(a)]),children:v.jsx(PH,{style:e,type:n,CustomComponent:r,isValid:a})})})}const PH=({style:t,type:e=wf.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:a,fromPosition:l,to:c,toNode:u,toHandle:f,toPosition:p}=Ffe();if(!i)return;if(n)return v.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:o,fromHandle:a,fromX:s.x,fromY:s.y,toX:c.x,toY:c.y,fromPosition:l,toPosition:p,connectionStatus:kq(r),toNode:u,toHandle:f});let g="";const x={sourceX:s.x,sourceY:s.y,sourcePosition:l,targetX:c.x,targetY:c.y,targetPosition:p};switch(e){case wf.Bezier:[g]=vk(x);break;case wf.SimpleBezier:[g]=xH(x);break;case wf.Step:[g]=MP({...x,borderRadius:0});break;case wf.SmoothStep:[g]=MP(x);break;default:[g]=Gq(x)}return v.jsx("path",{d:g,fill:"none",className:"react-flow__connection-path",style:t})};PH.displayName="ConnectionLine";const Ufe={};function Mj(t=Ufe){X.useRef(t),Xr(),X.useEffect(()=>{},[t])}function zfe(){Xr(),X.useRef(!1),X.useEffect(()=>{},[])}function kH({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:u,onSelectionContextMenu:f,onSelectionStart:p,onSelectionEnd:g,connectionLineType:x,connectionLineStyle:S,connectionLineComponent:_,connectionLineContainerStyle:b,selectionKeyCode:E,selectionOnDrag:M,selectionMode:T,multiSelectionKeyCode:k,panActivationKeyCode:N,zoomActivationKeyCode:D,deleteKeyCode:L,onlyRenderVisibleElements:R,elementsSelectable:A,defaultViewport:P,translateExtent:j,minZoom:U,maxZoom:B,preventScrolling:$,defaultMarkerColor:q,zoomOnScroll:te,zoomOnPinch:W,panOnScroll:Z,panOnScrollSpeed:J,panOnScrollMode:Y,zoomOnDoubleClick:oe,panOnDrag:ce,onPaneClick:ie,onPaneMouseEnter:ue,onPaneMouseMove:de,onPaneMouseLeave:be,onPaneScroll:we,onPaneContextMenu:Ce,paneClickDistance:Ie,nodeClickDistance:Fe,onEdgeContextMenu:ve,onEdgeMouseEnter:_e,onEdgeMouseMove:se,onEdgeMouseLeave:$e,reconnectRadius:je,onReconnect:Ze,onReconnectStart:le,onReconnectEnd:ge,noDragClassName:fe,noWheelClassName:Q,noPanClassName:G,disableKeyboardA11y:me,nodeExtent:he,rfId:Te,viewport:Oe,onViewportChange:Qe}){return Mj(t),Mj(e),zfe(),Pfe(n),Ofe(Oe),v.jsx(ife,{onPaneClick:ie,onPaneMouseEnter:ue,onPaneMouseMove:de,onPaneMouseLeave:be,onPaneContextMenu:Ce,onPaneScroll:we,paneClickDistance:Ie,deleteKeyCode:L,selectionKeyCode:E,selectionOnDrag:M,selectionMode:T,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:k,panActivationKeyCode:N,zoomActivationKeyCode:D,elementsSelectable:A,zoomOnScroll:te,zoomOnPinch:W,zoomOnDoubleClick:oe,panOnScroll:Z,panOnScrollSpeed:J,panOnScrollMode:Y,panOnDrag:ce,defaultViewport:P,translateExtent:j,minZoom:U,maxZoom:B,onSelectionContextMenu:f,preventScrolling:$,noDragClassName:fe,noWheelClassName:Q,noPanClassName:G,disableKeyboardA11y:me,onViewportChange:Qe,isControlledViewport:!!Oe,children:v.jsxs(Nfe,{children:[v.jsx(Rfe,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Ze,onReconnectStart:le,onReconnectEnd:ge,onlyRenderVisibleElements:R,onEdgeContextMenu:ve,onEdgeMouseEnter:_e,onEdgeMouseMove:se,onEdgeMouseLeave:$e,reconnectRadius:je,defaultMarkerColor:q,noPanClassName:G,disableKeyboardA11y:me,rfId:Te}),v.jsx(jfe,{style:S,type:x,component:_,containerStyle:b}),v.jsx("div",{className:"react-flow__edgelabel-renderer"}),v.jsx(ffe,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:u,nodeClickDistance:Fe,onlyRenderVisibleElements:R,noPanClassName:G,noDragClassName:fe,disableKeyboardA11y:me,nodeExtent:he,rfId:Te}),v.jsx("div",{className:"react-flow__viewport-portal"})]})})}kH.displayName="GraphView";const Vfe=X.memo(kH),Tj=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:l}={})=>{const c=new Map,u=new Map,f=new Map,p=new Map,g=r??e??[],x=n??t??[],S=a??[0,0],_=l??Y0;Kq(f,p,g),CP(x,c,u,{nodeOrigin:S,nodeExtent:_,elevateNodesOnSelect:!1});let b=[0,0,1];if(o&&i&&s){const E=Hb(c,{filter:N=>!!((N.width||N.initialWidth)&&(N.height||N.initialHeight))}),{x:M,y:T,zoom:k}=yk(E,i,s,.5,2,.1);b=[M,T,k]}return{rfId:"1",width:0,height:0,transform:b,nodes:x,nodeLookup:c,parentLookup:u,edges:g,edgeLookup:p,connectionLookup:f,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Y0,nodeExtent:_,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ky.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...Pq},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:pue,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Wfe=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:l})=>ode((c,u)=>({...Tj({nodes:t,edges:e,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:l,defaultNodes:n,defaultEdges:r}),setNodes:f=>{const{nodeLookup:p,parentLookup:g,nodeOrigin:x,elevateNodesOnSelect:S}=u();CP(f,p,g,{nodeOrigin:x,nodeExtent:l,elevateNodesOnSelect:S,checkEquality:!0}),c({nodes:f})},setEdges:f=>{const{connectionLookup:p,edgeLookup:g}=u();Kq(p,g,f),c({edges:f})},setDefaultNodesAndEdges:(f,p)=>{if(f){const{setNodes:g}=u();g(f),c({hasDefaultNodes:!0})}if(p){const{setEdges:g}=u();g(p),c({hasDefaultEdges:!0})}},updateNodeInternals:(f,p={triggerFitView:!0})=>{const{triggerNodeChanges:g,nodeLookup:x,parentLookup:S,fitViewOnInit:_,fitViewDone:b,fitViewOnInitOptions:E,domNode:M,nodeOrigin:T,nodeExtent:k,debug:N,fitViewSync:D}=u(),{changes:L,updatedInternals:R}=Aue(f,x,S,M,T,k);if(R){if(Cue(x,S,{nodeOrigin:T,nodeExtent:k}),p.triggerFitView){let A=b;!b&&_&&(A=D({...E,nodes:E?.nodes})),c({fitViewDone:A})}else c({});L?.length>0&&(N&&console.log("React Flow: trigger node changes",L),g?.(L))}},updateNodePositions:(f,p=!1)=>{const g=[],x=[];for(const[S,_]of f){const b=!!(_?.expandParent&&_?.parentId&&_?.position),E={id:S,type:"position",position:b?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:p};b&&g.push({id:S,parentId:_.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width,height:_.measured.height}}),x.push(E)}if(g.length>0){const{nodeLookup:S,parentLookup:_,nodeOrigin:b}=u(),E=_k(g,S,_,b);x.push(...E)}u().triggerNodeChanges(x)},triggerNodeChanges:f=>{const{onNodesChange:p,setNodes:g,nodes:x,hasDefaultNodes:S,debug:_}=u();if(f?.length){if(S){const b=Cde(f,x);g(b)}_&&console.log("React Flow: trigger node changes",f),p?.(f)}},triggerEdgeChanges:f=>{const{onEdgesChange:p,setEdges:g,edges:x,hasDefaultEdges:S,debug:_}=u();if(f?.length){if(S){const b=Ide(f,x);g(b)}_&&console.log("React Flow: trigger edge changes",f),p?.(f)}},addSelectedNodes:f=>{const{multiSelectionActive:p,edgeLookup:g,nodeLookup:x,triggerNodeChanges:S,triggerEdgeChanges:_}=u();if(p){const b=f.map(E=>ap(E,!0));S(b);return}S(Yg(x,new Set([...f]),!0)),_(Yg(g))},addSelectedEdges:f=>{const{multiSelectionActive:p,edgeLookup:g,nodeLookup:x,triggerNodeChanges:S,triggerEdgeChanges:_}=u();if(p){const b=f.map(E=>ap(E,!0));_(b);return}_(Yg(g,new Set([...f]))),S(Yg(x,new Set,!0))},unselectNodesAndEdges:({nodes:f,edges:p}={})=>{const{edges:g,nodes:x,nodeLookup:S,triggerNodeChanges:_,triggerEdgeChanges:b}=u(),E=f||x,M=p||g,T=E.map(N=>{const D=S.get(N.id);return D&&(D.selected=!1),ap(N.id,!1)}),k=M.map(N=>ap(N.id,!1));_(T),b(k)},setMinZoom:f=>{const{panZoom:p,maxZoom:g}=u();p?.setScaleExtent([f,g]),c({minZoom:f})},setMaxZoom:f=>{const{panZoom:p,minZoom:g}=u();p?.setScaleExtent([g,f]),c({maxZoom:f})},setTranslateExtent:f=>{u().panZoom?.setTranslateExtent(f),c({translateExtent:f})},setPaneClickDistance:f=>{u().panZoom?.setClickDistance(f)},resetSelectedElements:()=>{const{edges:f,nodes:p,triggerNodeChanges:g,triggerEdgeChanges:x}=u(),S=p.reduce((b,E)=>E.selected?[...b,ap(E.id,!1)]:b,[]),_=f.reduce((b,E)=>E.selected?[...b,ap(E.id,!1)]:b,[]);g(S),x(_)},setNodeExtent:f=>{const{nodes:p,nodeLookup:g,parentLookup:x,nodeOrigin:S,elevateNodesOnSelect:_,nodeExtent:b}=u();f[0][0]===b[0][0]&&f[0][1]===b[0][1]&&f[1][0]===b[1][0]&&f[1][1]===b[1][1]||(CP(p,g,x,{nodeOrigin:S,nodeExtent:f,elevateNodesOnSelect:_,checkEquality:!1}),c({nodeExtent:f}))},panBy:f=>{const{transform:p,width:g,height:x,panZoom:S,translateExtent:_}=u();return Nue({delta:f,panZoom:S,transform:p,translateExtent:_,width:g,height:x})},fitView:f=>{const{panZoom:p,width:g,height:x,minZoom:S,maxZoom:_,nodeLookup:b}=u();if(!p)return Promise.resolve(!1);const E=wP(b,f);return _P({nodes:E,width:g,height:x,panZoom:p,minZoom:S,maxZoom:_},f)},fitViewSync:f=>{const{panZoom:p,width:g,height:x,minZoom:S,maxZoom:_,nodeLookup:b}=u();if(!p)return!1;const E=wP(b,f);return _P({nodes:E,width:g,height:x,panZoom:p,minZoom:S,maxZoom:_},f),E.size>0},cancelConnection:()=>{c({connection:{...Pq}})},updateConnection:f=>{c({connection:f})},reset:()=>c({...Tj()})}),Object.is);function qfe({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:o,nodeOrigin:a,nodeExtent:l,children:c}){const[u]=X.useState(()=>Wfe({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:l}));return v.jsx(ade,{value:u,children:v.jsx(Pde,{children:c})})}function Hfe({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:a,nodeOrigin:l,nodeExtent:c}){return X.useContext(cT)?v.jsx(v.Fragment,{children:t}):v.jsx(qfe,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:a,nodeOrigin:l,nodeExtent:c,children:t})}const $fe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Gfe({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:a,onEdgeClick:l,onInit:c,onMove:u,onMoveStart:f,onMoveEnd:p,onConnect:g,onConnectStart:x,onConnectEnd:S,onClickConnectStart:_,onClickConnectEnd:b,onNodeMouseEnter:E,onNodeMouseMove:M,onNodeMouseLeave:T,onNodeContextMenu:k,onNodeDoubleClick:N,onNodeDragStart:D,onNodeDrag:L,onNodeDragStop:R,onNodesDelete:A,onEdgesDelete:P,onDelete:j,onSelectionChange:U,onSelectionDragStart:B,onSelectionDrag:$,onSelectionDragStop:q,onSelectionContextMenu:te,onSelectionStart:W,onSelectionEnd:Z,onBeforeDelete:J,connectionMode:Y,connectionLineType:oe=wf.Bezier,connectionLineStyle:ce,connectionLineComponent:ie,connectionLineContainerStyle:ue,deleteKeyCode:de="Backspace",selectionKeyCode:be="Shift",selectionOnDrag:we=!1,selectionMode:Ce=Z0.Full,panActivationKeyCode:Ie="Space",multiSelectionKeyCode:Fe=TE()?"Meta":"Control",zoomActivationKeyCode:ve=TE()?"Meta":"Control",snapToGrid:_e,snapGrid:se,onlyRenderVisibleElements:$e=!1,selectNodesOnDrag:je,nodesDraggable:Ze,nodesConnectable:le,nodesFocusable:ge,nodeOrigin:fe=lH,edgesFocusable:Q,edgesReconnectable:G,elementsSelectable:me=!0,defaultViewport:he=bde,minZoom:Te=.5,maxZoom:Oe=2,translateExtent:Qe=Y0,preventScrolling:Ye=!0,nodeExtent:at,defaultMarkerColor:Ft="#b1b1b7",zoomOnScroll:et=!0,zoomOnPinch:gt=!0,panOnScroll:kt=!1,panOnScrollSpeed:Bt=.5,panOnScrollMode:dt=Rp.Free,zoomOnDoubleClick:Ee=!0,panOnDrag:He=!0,onPaneClick:ft,onPaneMouseEnter:Se,onPaneMouseMove:nt,onPaneMouseLeave:Ve,onPaneScroll:Ke,onPaneContextMenu:vt,paneClickDistance:pt=0,nodeClickDistance:Xt=0,children:Dn,onReconnect:sr,onReconnectStart:yn,onReconnectEnd:Or,onEdgeContextMenu:jr,onEdgeDoubleClick:oc,onEdgeMouseEnter:Fa,onEdgeMouseMove:Ro,onEdgeMouseLeave:to,reconnectRadius:ul=10,onNodesChange:no,onEdgesChange:Ba,noDragClassName:md="nodrag",noWheelClassName:ac="nowheel",noPanClassName:Kc="nopan",fitView:ro,fitViewOptions:gd,connectOnClick:yd,attributionPosition:vd,proOptions:xd,defaultEdgeOptions:bd,elevateNodesOnSelect:wd,elevateEdgesOnSelect:ae,disableKeyboardA11y:Ne=!1,autoPanOnConnect:ze,autoPanOnNodeDrag:Le,autoPanSpeed:Pe,connectionRadius:rt,isValidConnection:mt,onError:_t,style:Tt,id:Kt,nodeDragThreshold:Ht,viewport:lt,onViewportChange:Ut,width:Qt,height:In,colorMode:Rn="light",debug:vn,...jt},Fn){const mn=Kt||"1",mi=Ede(Rn);return v.jsx("div",{"data-testid":"rf__wrapper",...jt,style:{...Tt,...$fe},ref:Fn,className:Vi(["react-flow",i,mi]),id:Kt,children:v.jsxs(Hfe,{nodes:t,edges:e,width:Qt,height:In,fitView:ro,nodeOrigin:fe,nodeExtent:at,children:[v.jsx(Vfe,{onInit:c,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:E,onNodeMouseMove:M,onNodeMouseLeave:T,onNodeContextMenu:k,onNodeDoubleClick:N,nodeTypes:s,edgeTypes:o,connectionLineType:oe,connectionLineStyle:ce,connectionLineComponent:ie,connectionLineContainerStyle:ue,selectionKeyCode:be,selectionOnDrag:we,selectionMode:Ce,deleteKeyCode:de,multiSelectionKeyCode:Fe,panActivationKeyCode:Ie,zoomActivationKeyCode:ve,onlyRenderVisibleElements:$e,defaultViewport:he,translateExtent:Qe,minZoom:Te,maxZoom:Oe,preventScrolling:Ye,zoomOnScroll:et,zoomOnPinch:gt,zoomOnDoubleClick:Ee,panOnScroll:kt,panOnScrollSpeed:Bt,panOnScrollMode:dt,panOnDrag:He,onPaneClick:ft,onPaneMouseEnter:Se,onPaneMouseMove:nt,onPaneMouseLeave:Ve,onPaneScroll:Ke,onPaneContextMenu:vt,paneClickDistance:pt,nodeClickDistance:Xt,onSelectionContextMenu:te,onSelectionStart:W,onSelectionEnd:Z,onReconnect:sr,onReconnectStart:yn,onReconnectEnd:Or,onEdgeContextMenu:jr,onEdgeDoubleClick:oc,onEdgeMouseEnter:Fa,onEdgeMouseMove:Ro,onEdgeMouseLeave:to,reconnectRadius:ul,defaultMarkerColor:Ft,noDragClassName:md,noWheelClassName:ac,noPanClassName:Kc,rfId:mn,disableKeyboardA11y:Ne,nodeExtent:at,viewport:lt,onViewportChange:Ut}),v.jsx(Sde,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:x,onConnectEnd:S,onClickConnectStart:_,onClickConnectEnd:b,nodesDraggable:Ze,nodesConnectable:le,nodesFocusable:ge,edgesFocusable:Q,edgesReconnectable:G,elementsSelectable:me,elevateNodesOnSelect:wd,elevateEdgesOnSelect:ae,minZoom:Te,maxZoom:Oe,nodeExtent:at,onNodesChange:no,onEdgesChange:Ba,snapToGrid:_e,snapGrid:se,connectionMode:Y,translateExtent:Qe,connectOnClick:yd,defaultEdgeOptions:bd,fitView:ro,fitViewOptions:gd,onNodesDelete:A,onEdgesDelete:P,onDelete:j,onNodeDragStart:D,onNodeDrag:L,onNodeDragStop:R,onSelectionDrag:$,onSelectionDragStart:B,onSelectionDragStop:q,onMove:u,onMoveStart:f,onMoveEnd:p,noPanClassName:Kc,nodeOrigin:fe,rfId:mn,autoPanOnConnect:ze,autoPanOnNodeDrag:Le,autoPanSpeed:Pe,onError:_t,connectionRadius:rt,isValidConnection:mt,selectNodesOnDrag:je,nodeDragThreshold:Ht,onBeforeDelete:J,paneClickDistance:pt,debug:vn}),v.jsx(xde,{onSelectionChange:U}),Dn,v.jsx(pde,{proOptions:xd,position:vd}),v.jsx(fde,{rfId:mn,disableKeyboardA11y:Ne})]})})}var Xfe=uH(Gfe);const Kfe=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function Yfe({children:t}){const e=Yn(Kfe);return e?bM.createPortal(t,e):null}function Zfe({dimensions:t,lineWidth:e,variant:n,className:r}){return v.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Vi(["react-flow__background-pattern",n,r])})}function Jfe({radius:t,className:e}){return v.jsx("circle",{cx:t,cy:t,r:t,className:Vi(["react-flow__background-pattern","dots",e])})}var Ju;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Ju||(Ju={}));const Qfe={[Ju.Dots]:1,[Ju.Lines]:1,[Ju.Cross]:6},ehe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function OH({id:t,variant:e=Ju.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:a,style:l,className:c,patternClassName:u}){const f=X.useRef(null),{transform:p,patternId:g}=Yn(ehe,ai),x=r||Qfe[e],S=e===Ju.Dots,_=e===Ju.Cross,b=Array.isArray(n)?n:[n,n],E=[b[0]*p[2]||1,b[1]*p[2]||1],M=x*p[2],T=Array.isArray(s)?s:[s,s],k=_?[M,M]:E,N=[T[0]*p[2]||1+k[0]/2,T[1]*p[2]||1+k[1]/2],D=`${g}${t||""}`;return v.jsxs("svg",{className:Vi(["react-flow__background",c]),style:{...l,...uT,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:f,"data-testid":"rf__background",children:[v.jsx("pattern",{id:D,x:p[0]%E[0],y:p[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`,children:S?v.jsx(Jfe,{radius:M/2,className:u}):v.jsx(Zfe,{dimensions:k,lineWidth:i,variant:e,className:u})}),v.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${D})`})]})}OH.displayName="Background";const the=X.memo(OH);function nhe(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function rhe(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v.jsx("path",{d:"M0 0h32v4.2H0z"})})}function ihe(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function she(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ohe(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function O_({children:t,className:e,...n}){return v.jsx("button",{type:"button",className:Vi(["react-flow__controls-button",e]),...n,children:t})}const ahe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom});function LH({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:c,children:u,position:f="bottom-left",orientation:p="vertical","aria-label":g="React Flow controls"}){const x=Xr(),{isInteractive:S,minZoomReached:_,maxZoomReached:b}=Yn(ahe,ai),{zoomIn:E,zoomOut:M,fitView:T}=Gb(),k=()=>{E(),s?.()},N=()=>{M(),o?.()},D=()=>{T(i),a?.()},L=()=>{x.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),l?.(!S)},R=p==="horizontal"?"horizontal":"vertical";return v.jsxs(Sk,{className:Vi(["react-flow__controls",R,c]),position:f,style:t,"data-testid":"rf__controls","aria-label":g,children:[e&&v.jsxs(v.Fragment,{children:[v.jsx(O_,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b,children:v.jsx(nhe,{})}),v.jsx(O_,{onClick:N,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:_,children:v.jsx(rhe,{})})]}),n&&v.jsx(O_,{className:"react-flow__controls-fitview",onClick:D,title:"fit view","aria-label":"fit view",children:v.jsx(ihe,{})}),r&&v.jsx(O_,{className:"react-flow__controls-interactive",onClick:L,title:"toggle interactivity","aria-label":"toggle interactivity",children:S?v.jsx(ohe,{}):v.jsx(she,{})}),u]})}LH.displayName="Controls";const lhe=X.memo(LH);function che({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:l,className:c,borderRadius:u,shapeRendering:f,selected:p,onClick:g}){const{background:x,backgroundColor:S}=s||{},_=o||x||S;return v.jsx("rect",{className:Vi(["react-flow__minimap-node",{selected:p},c]),x:e,y:n,rx:u,ry:u,width:r,height:i,style:{fill:_,stroke:a,strokeWidth:l},shapeRendering:f,onClick:g?b=>g(b,t):void 0})}const uhe=X.memo(che),dhe=t=>t.nodes.map(e=>e.id),lA=t=>t instanceof Function?t:()=>t;function fhe({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=uhe,onClick:o}){const a=Yn(dhe,ai),l=lA(e),c=lA(t),u=lA(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return v.jsx(v.Fragment,{children:a.map(p=>v.jsx(phe,{id:p,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:f},p))})}function hhe({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:a,onClick:l}){const{node:c,x:u,y:f,width:p,height:g}=Yn(x=>{const S=x.nodeLookup.get(t),{x:_,y:b}=S.internals.positionAbsolute,{width:E,height:M}=pd(S);return{node:S,x:_,y:b,width:E,height:M}},ai);return!c||c.hidden||!zq(c)?null:v.jsx(a,{x:u,y:f,width:p,height:g,style:c.style,selected:!!c.selected,className:r(c),color:e(c),borderRadius:i,strokeColor:n(c),strokeWidth:s,shapeRendering:o,onClick:l,id:c.id})}const phe=X.memo(hhe);var mhe=X.memo(fhe);const ghe=200,yhe=150,vhe=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?jq(Hb(t.nodeLookup),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height}},xhe="react-flow__minimap-desc";function DH({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:l,maskColor:c,maskStrokeColor:u,maskStrokeWidth:f,position:p="bottom-right",onClick:g,onNodeClick:x,pannable:S=!1,zoomable:_=!1,ariaLabel:b="React Flow mini map",inversePan:E,zoomStep:M=10,offsetScale:T=5}){const k=Xr(),N=X.useRef(null),{boundingRect:D,viewBB:L,rfId:R,panZoom:A,translateExtent:P,flowWidth:j,flowHeight:U}=Yn(vhe,ai),B=t?.width??ghe,$=t?.height??yhe,q=D.width/B,te=D.height/$,W=Math.max(q,te),Z=W*B,J=W*$,Y=T*W,oe=D.x-(Z-D.width)/2-Y,ce=D.y-(J-D.height)/2-Y,ie=Z+Y*2,ue=J+Y*2,de=`${xhe}-${R}`,be=X.useRef(0),we=X.useRef();be.current=W,X.useEffect(()=>{if(N.current&&A)return we.current=jue({domNode:N.current,panZoom:A,getTransform:()=>k.getState().transform,getViewScale:()=>be.current}),()=>{we.current?.destroy()}},[A]),X.useEffect(()=>{we.current?.update({translateExtent:P,width:j,height:U,inversePan:E,pannable:S,zoomStep:M,zoomable:_})},[S,_,E,M,P,j,U]);const Ce=g?Fe=>{const[ve,_e]=we.current?.pointer(Fe)||[0,0];g(Fe,{x:ve,y:_e})}:void 0,Ie=x?X.useCallback((Fe,ve)=>{const _e=k.getState().nodeLookup.get(ve);x(Fe,_e)},[]):void 0;return v.jsx(Sk,{position:p,style:{...t,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*W:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:Vi(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:v.jsxs("svg",{width:B,height:$,viewBox:`${oe} ${ce} ${ie} ${ue}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":de,ref:N,onClick:Ce,children:[b&&v.jsx("title",{id:de,children:b}),v.jsx(mhe,{onClick:Ie,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),v.jsx("path",{className:"react-flow__minimap-mask",d:`M${oe-Y},${ce-Y}h${ie+Y*2}v${ue+Y*2}h${-ie-Y*2}z
        M${L.x},${L.y}h${L.width}v${L.height}h${-L.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}DH.displayName="MiniMap";const bhe=X.memo(DH);function whe({nodeId:t,position:e,variant:n=s0.Handle,className:r,style:i={},children:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:f=!1,shouldResize:p,onResizeStart:g,onResize:x,onResizeEnd:S}){const _=pH(),b=typeof t=="string"?t:_,E=Xr(),M=X.useRef(null),T=n===s0.Line?"right":"bottom-right",k=e??T,N=X.useRef(null);X.useEffect(()=>{if(!(!M.current||!b))return N.current||(N.current=ede({domNode:M.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:A,transform:P,snapGrid:j,snapToGrid:U,nodeOrigin:B,domNode:$}=E.getState();return{nodeLookup:A,transform:P,snapGrid:j,snapToGrid:U,nodeOrigin:B,paneDomNode:$}},onChange:(A,P)=>{const{triggerNodeChanges:j,nodeLookup:U,parentLookup:B,nodeOrigin:$}=E.getState(),q=[],te={x:A.x,y:A.y},W=U.get(b);if(W&&W.expandParent&&W.parentId){const Z=W.origin??$,J=A.width??W.measured.width,Y=A.height??W.measured.height,oe={id:W.id,parentId:W.parentId,rect:{width:J,height:Y,...Vq({x:A.x??W.position.x,y:A.y??W.position.y},{width:J,height:Y},W.parentId,U,Z)}},ce=_k([oe],U,B,$);q.push(...ce),te.x=A.x?Math.max(Z[0]*J,A.x):void 0,te.y=A.y?Math.max(Z[1]*Y,A.y):void 0}if(te.x!==void 0&&te.y!==void 0){const Z={id:b,type:"position",position:{...te}};q.push(Z)}if(A.width!==void 0&&A.height!==void 0){const Z={id:b,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:A.width,height:A.height}};q.push(Z)}for(const Z of P){const J={...Z,type:"position"};q.push(J)}j(q)},onEnd:()=>{const A={id:b,type:"dimensions",resizing:!1};E.getState().triggerNodeChanges([A])}})),N.current.update({controlPosition:k,boundaries:{minWidth:a,minHeight:l,maxWidth:c,maxHeight:u},keepAspectRatio:f,onResizeStart:g,onResize:x,onResizeEnd:S,shouldResize:p}),()=>{N.current?.destroy()}},[k,a,l,c,u,f,g,x,S,p]);const D=k.split("-"),L=n===s0.Line?"borderColor":"backgroundColor",R=o?{...i,[L]:o}:i;return v.jsx("div",{className:Vi(["react-flow__resize-control","nodrag",...D,n,r]),ref:M,style:R,children:s})}X.memo(whe);const ir="icon-[solar--home-outline]",Mk=Vse({shape:H.object({name:H.string().min(1),probability:Pc(),limit:Pc(),image:H.instanceof(FileList,{message:"You must upload a file."}).transform(t=>t[0]).refine(t=>(t&&t.size<5*1024*1024,!0),{message:na.text("File size must be less than 5MB")}).refine(t=>t?["image/png","image/jpeg","image/webp"].includes(t.type):!0,{message:"Only PNG/JPEG/WEBP files are allowed."}).optional()}),filter:Zs}),Cj=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(Mk.shape),defaultValues:{name:"",limit:32,probability:100,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"name",label:v.jsx(ne,{label:"Region name (label)"}),children:v.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),v.jsx(hn,{formState:s.formState,name:"image",label:v.jsx(ne,{label:"Region image (label)"}),hint:v.jsx(ne,{label:"Region image (hint)"}),children:v.jsx("input",{type:"file",className:o.input(),...s.register("image")})}),v.jsx(hn,{formState:s.formState,name:"probability",label:v.jsx(ne,{label:"Region spawn probability (label)"}),hint:v.jsx(ne,{label:"Region spawn probability (hint)"}),required:!0,children:v.jsx("input",{type:"number",className:o.input(),min:.5,max:100,step:.5,...s.register("probability")})}),v.jsx(hn,{formState:s.formState,name:"limit",label:v.jsx(ne,{label:"Region limit (label)"}),hint:v.jsx(ne,{label:"Region limit (hint)"}),required:!0,children:v.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("limit")})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:$W,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},By=async t=>new Promise((e,n)=>{const r=new Image;r.src=URL.createObjectURL(t),r.onload=()=>{const i=document.createElement("canvas");i.width=r.width,i.height=r.height;const s=i.getContext("2d");if(s)return s.drawImage(r,0,0),e(i.toDataURL("image/webp",1));n(new Error("Failed to convert image to WebP-64"))},r.onerror=()=>{n(new Error("Failed to load image"))}}),cA=pi(),_he=[cA({name:"name",header(){return v.jsx(ne,{label:"Region name (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsx(Et,{to:"/$locale/apps/derivean/root/region/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),cA({name:"probability",header(){return v.jsx(ne,{label:"Region probability (label)"})},render({value:t}){return v.jsxs($s,{children:[jn({number:t}),"%"]})},size:14}),cA({name:"limit",header(){return v.jsx(ne,{label:"Region limit (label)"})},render({value:t}){return jn({number:t})},size:18})],FH=({table:t,...e})=>{const n=Ar([["Region"]]);return v.jsx(fi,{table:hi({...t,columns:_he}),action:{table(){return v.jsx(Nr,{children:v.jsx(Un,{label:v.jsx(ne,{label:"Create region (menu)"}),textTitle:v.jsx(ne,{label:"Create region (modal)"}),icon:fE,children:({close:r})=>v.jsx(Cj,{mutation:rn({async mutationFn({image:i,...s}){return Mt.transaction().execute(async o=>o.insertInto("Region").values({id:Wn(),...s,image:i?await By(i):null}).execute())},async onSuccess(){await n(),r()}})})})})},row({data:r}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit region (modal)"}),icon:fE,children:({close:i})=>v.jsx(Cj,{defaultValues:r,mutation:rn({async mutationFn({image:s,...o}){return Mt.transaction().execute(async a=>a.updateTable("Region").set({...o,image:s?await By(s):null}).where("id","=",r.id).execute())},async onSuccess(){await n(),i()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete region (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>Mt.transaction().execute(async i=>i.deleteFrom("Region").where("id","=",r.id).execute()),textContent:v.jsx(ne,{label:"Delete region (content)"}),textToast:"Delete region",invalidator:n})})]})}},...e})},She=t=>v.jsx(SW,{icon:fE,table:FH,textTitle:v.jsx(ne,{label:"Select regions (title)"}),render:({entities:e})=>v.jsx(Vf,{items:e,css:{base:["flex","flex-row","gap-2"]},render:({entity:n})=>v.jsx("div",{className:ln(["p-2","border","border-blue-300","bg-blue-50","rounded-sm"]),children:n.name})}),queryKey:"Region",query:async({filter:e,cursor:n})=>Mt.transaction().execute(async r=>kr({select:r.selectFrom("Region as r").selectAll(),output:Mk.entity,query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("r.id","=",s.id)),s?.idIn&&(o=o.where("r.id","in",s.idIn)),s?.fulltext){const a=`%${s.fulltext}%`.toLowerCase();o=o.where(l=>l.or([l("r.id","like",a),l("r.name","like",a)]))}return o},filter:e,cursor:n})),...t}),Tk=Ase({shape:H.object({name:H.string().min(1),cycles:Pc(),sort:Pc(),limit:Pc(),regionIds:H.array(H.string()).optional(),image:H.instanceof(FileList,{message:"You must upload a file."}).transform(t=>t[0]).refine(t=>(t&&t.size<5*1024*1024,!0),{message:na.text("File size must be less than 5MB")}).refine(t=>t?["image/png","image/jpeg","image/webp"].includes(t.type):!0,{message:"Only PNG/JPEG/WEBP files are allowed."}).optional()}),filter:Zs.merge(H.object({name:H.string().optional()}))}),IE=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(Tk.shape),defaultValues:{cycles:1,sort:0,limit:1,regionIds:[],...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"name",label:v.jsx(ne,{label:"Building name (label)"}),required:!0,children:v.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),v.jsx(hn,{formState:s.formState,name:"cycles",label:v.jsx(ne,{label:"Construction cycles (label)"}),hint:v.jsx(ne,{label:"Amount of cycles to build this building (hint)"}),required:!0,children:v.jsx("input",{type:"number",className:o.input(),min:1,...s.register("cycles")})}),v.jsx(hn,{formState:s.formState,name:"limit",label:v.jsx(ne,{label:"Building limit (label)"}),hint:v.jsx(ne,{label:"Maximum number of building a player can build (hint)"}),required:!0,children:v.jsx("input",{type:"number",className:o.input(),min:1,...s.register("limit")})}),v.jsx(hn,{formState:s.formState,name:"sort",label:v.jsx(ne,{label:"Blueprint sort (label)"}),hint:v.jsx(ne,{label:"Sort blueprints by this number (hint)"}),required:!0,children:v.jsx("input",{type:"number",className:o.input(),min:0,...s.register("sort")})}),v.jsx(hn,{formState:s.formState,name:"regionIds",label:v.jsx(ne,{label:"Regions (label)"}),children:v.jsx(To,{control:s.control,name:"regionIds",render:({field:{ref:a,...l}})=>v.jsx(She,{...l})})}),v.jsx(hn,{formState:s.formState,name:"image",label:v.jsx(ne,{label:"Building image (label)"}),hint:v.jsx(ne,{label:"Building image (hint)"}),children:v.jsx("input",{type:"file",className:o.input(),...s.register("image")})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:ir,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},ol="icon-[fluent-mdl2--production-floor-management]",Ehe=({id:t,data:e,isConnectable:n})=>{const{locale:r}=Jt({from:"/$locale"}),i=em();return v.jsxs("div",{className:"min-w-[14rem]",onClick:()=>{i({to:"/$locale/apps/derivean/root/editor",params:{locale:r},search:{zoomTo:t}})},onDoubleClick:()=>{i({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t}})},children:[v.jsx(Fy,{type:"target",position:Yt.Left,className:"w-4 h-4"}),v.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[v.jsx("div",{className:"flex flex-row items-center gap-2",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:v.jsx(Et,{icon:ir,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t},children:e.name})}),v.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 border bg-slate-50 border-slate-200 rounded-sm w-full p-1",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:[v.jsxs("div",{className:"flex flex-row gap-2",children:[v.jsx(Et,{icon:$r,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:r,id:t}}),v.jsx(Et,{icon:ol,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:r,id:t}}),v.jsx(Et,{icon:iW,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:r,id:t}})]}),v.jsx("div",{children:v.jsx(rm,{target:v.jsx(jb,{iconEnabled:Ti,css:{base:["text-red-500"]}}),outside:!0,textTitle:v.jsx(ne,{label:"Delete blueprint (modal)"}),css:{modal:["w-1/3"]},children:()=>{const s=Ar([["Editor"]]);return v.jsx(sa,{callback:async()=>Mt.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",e.id).execute()),textContent:v.jsx(ne,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:s})}})})]})]}),v.jsx(Fy,{type:"source",position:Yt.Right,isConnectable:n,className:"w-4 h-4"})]})},Mhe=({nodeId:t})=>{const{fitView:e}=Gb();return X.useEffect(()=>{t&&setTimeout(()=>{e({nodes:[{id:t}],duration:750,minZoom:1,maxZoom:1})},50)},[t]),null},The=({data:t,zoomTo:e})=>{const n=Ar([]),r=rn({async mutationFn({blueprintId:i,dependencyId:s}){return Mt.transaction().execute(async o=>o.insertInto("Blueprint_Dependency").values({id:Wn(),blueprintId:i,dependencyId:s}).execute())},async onSuccess(){await n()}});return v.jsx("div",{className:"w-fit h-fit mx-auto border border-slate-300 rounded-md shadow-md m-8",children:v.jsx("div",{style:{width:"95vw",height:"85vh"},children:v.jsxs(Xfe,{nodes:t.nodes,edges:t.edges,onConnect:i=>{r.mutate({blueprintId:i.target,dependencyId:i.source})},fitView:!0,snapGrid:[16,16],elementsSelectable:!1,nodeTypes:X.useMemo(()=>({blueprint(i){return v.jsx(Ehe,{...i})}}),[]),edgeTypes:X.useMemo(()=>({dependency({id:i,sourceX:s,sourceY:o,targetX:a,targetY:l,sourcePosition:c,targetPosition:u,style:f={},markerEnd:p}){const{setEdges:g}=Gb(),[x,S,_]=vk({sourceX:s,sourceY:o,sourcePosition:c,targetX:a,targetY:l,targetPosition:u}),b=Ar([]),E=rn({async mutationFn({id:M}){return Mt.transaction().execute(async T=>{await T.deleteFrom("Blueprint_Dependency").where("id","=",M).execute()})},async onSuccess(){g(M=>M.filter(T=>T.id!==i)),await b()}});return v.jsxs(v.Fragment,{children:[v.jsx(Xb,{path:x,markerEnd:p,style:f}),v.jsx(Yfe,{children:v.jsx("div",{className:ln("nodrag nopan",["flex","items-center","justify-center","cursor-pointer","bg-red-200","text-red-500","border","border-red-300","hover:border-red-600","hover:bg-red-300","hover:text-red-700","rounded-full","w-4","h-4","z-20"]),style:{position:"absolute",pointerEvents:"all",transformOrigin:"center",transform:`translate(-50%, -50%) translate(${S}px,${_}px)`},children:v.jsx(pn,{icon:E.isPending?J2:K2,onClick:()=>{E.mutate({id:i})}})})})]})}}),[]),children:[v.jsx(Mhe,{nodeId:e}),v.jsx(lhe,{orientation:"horizontal",showInteractive:!1,showZoom:!1,children:v.jsx(rm,{target:v.jsx(jb,{className:"react-flow__controls-button",iconEnabled:ir}),outside:!1,textTitle:v.jsx(ne,{label:"Create blueprint (modal)"}),css:{modal:["w-1/3"]},children:({close:i})=>{const s=Ar([["Editor"]]),{locale:o}=Jt({from:"/$locale"}),a=em();return v.jsx(IE,{mutation:rn({async mutationFn({image:l,regionIds:c,...u}){return Mt.transaction().execute(async f=>{const p=await f.insertInto("Blueprint").values({id:Wn(),...u,image:l?await c5(l):null}).returningAll().executeTakeFirstOrThrow();return c?.length&&await f.insertInto("Blueprint_Region").values(c.map(g=>({id:Wn(),blueprintId:p.id,regionId:g}))).execute(),p})},async onSuccess(l){await s(),a({to:"/$locale/apps/derivean/root/editor",params:{locale:o},search:{zoomTo:l.id}}),i()}})})}})}),v.jsx(bhe,{}),v.jsx(the,{variant:Ju.Dots,gap:12,size:1})]})})})},Che=({graph:t,nodes:e,edges:n,size:r={width:344,height:36}})=>(t.setGraph({rankdir:"LR",nodesep:125,edgesep:65,ranksep:50}),e.forEach(i=>{t.setNode(i.id,{width:r.width,height:r.height})}),n.forEach(i=>{t.setEdge(i.source,i.target)}),eq.layout(t,{}),{nodes:e.map(i=>{const s=t.node(i.id);return{...i,targetPosition:"left",sourcePosition:"right",position:{x:s.x-r.width/2,y:s.y-r.height/2}}}),edges:n}),AP=Pt("/$locale/apps/derivean/root/editor")({validateSearch:Gr(H.object({zoomTo:H.string().optional()})),async loader({context:{kysely:t}}){const e=(await t.selectFrom("Blueprint").select(["id","name","cycles","sort"]).execute()).map(r=>({id:r.id,position:{x:0,y:0},data:r,type:"blueprint"})),n=(await t.selectFrom("Blueprint_Dependency").select(["id","blueprintId","dependencyId"]).execute()).map(({id:r,blueprintId:i,dependencyId:s})=>({id:r,source:s,target:i,type:"dependency"}));return Che({graph:new eq.graphlib.Graph().setDefaultEdgeLabel(()=>({})),nodes:[...e],edges:[...n]})},component(){const t=AP.useLoaderData(),{zoomTo:e}=AP.useSearch();return v.jsx(The,{data:t,zoomTo:e})}}),Ihe=()=>rn({mutationKey:["useRegisterMutation"],async mutationFn({login:t,name:e,password1:n}){return Mt.transaction().execute(async r=>Ub.parse(await r.insertInto("User").values({id:Wn(),name:e,login:t,password:YV.hash(n)}).returning(["User.id","User.name","User.login"]).executeTakeFirstOrThrow()))}}),Rhe=H.object({name:H.string().min(1),login:H.string().min(1),password1:H.string().min(1),password2:H.string().min(1)}).refine(t=>t.password1===t.password2,{message:"Passwords must match",path:["password1"]}),Ahe=({onSuccess:t})=>{const e=Ihe(),n=ds({resolver:fs(Rhe)}),r=us({isLoading:n.formState.isLoading,isSubmitting:n.formState.isSubmitting}).slots;return v.jsxs("form",{className:r.base(),onSubmit:n.handleSubmit(async i=>e.mutateAsync(i,{onSuccess:t,onError:s=>{P2({error:s,errors:[u2({error:s,schema:N2,onError:({data:o})=>{n.setError("root",{message:o.message})}})],onError:o=>{n.setError("root",{message:o.message})}})}}).catch(()=>{})),children:[v.jsx(ts,{variant:{highlight:!0},error:n.formState.errors.root}),v.jsx(hn,{formState:n.formState,name:"name",label:v.jsx(ne,{label:"Name (label)"}),children:v.jsx("input",{type:"text",className:r.input(),...n.register("name")})}),v.jsx(hn,{formState:n.formState,name:"login",label:v.jsx(ne,{label:"Login (label)"}),children:v.jsx("input",{type:"text",className:r.input(),...n.register("login")})}),v.jsx(hn,{formState:n.formState,name:"password1",label:v.jsx(ne,{label:"Password 1 (label)"}),children:v.jsx("input",{type:"password",className:r.input(),...n.register("password1")})}),v.jsx(hn,{formState:n.formState,name:"password2",label:v.jsx(ne,{label:"Password 2 (label)"}),children:v.jsx("input",{type:"password",className:r.input(),...n.register("password2")})}),v.jsx(Pn,{iconEnabled:"icon-[mdi--register-outline]",iconDisabled:"icon-[mdi--register-outline]",type:"submit",children:v.jsx(ne,{label:"Register (submit)"})})]})},Nhe=Pt("/$locale/apps/derivean/public/register")({component:()=>{const t=em();return v.jsx("div",{className:ln(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:v.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[v.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),v.jsx(Ahe,{onSuccess:async e=>{ev.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),Phe=Pt("/$locale/apps/derivean/public/logout")({pendingComponent(){return v.jsx("div",{className:ln(["flex items-center justify-center h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:v.jsx(MW,{icon:Q2,textTitle:v.jsx(ne,{label:"Logout (label)"}),textMessage:v.jsx(ne,{label:"Logout in progress..."}),css:{base:["p-4","bg-slate-200","rounded-sm"]}})})},async loader({params:{locale:t}}){throw ev.remove("session"),wb({to:"/$locale/apps/derivean/public/login",params:{locale:t}})}}),khe=()=>rn({mutationKey:["useLoginMutation"],async mutationFn({login:t,password:e}){return Mt.transaction().execute(async n=>{const r=await n.selectFrom("User as u").select(["u.id","u.login","u.name"]).where("u.login","=",t).where("u.password","=",YV.hash(e)).executeTakeFirstOrThrow();return{id:r.id,login:r.login,name:r.name}})}}),Ohe=H.object({login:H.string().min(1),password:H.string().min(1)}),Lhe=({onSuccess:t})=>{const{locale:e}=Jt({from:"/$locale"}),n=khe(),r=ds({resolver:fs(Ohe)}),i=us({isLoading:r.formState.isLoading,isSubmitting:r.formState.isSubmitting}).slots;return v.jsxs("form",{className:i.base(),onSubmit:r.handleSubmit(async s=>n.mutateAsync(s,{onSuccess:t,onError:o=>{P2({error:o,errors:[u2({error:o,schema:N2,onError:({data:a})=>{r.setError("root",{message:a.message})}})],onError:a=>{r.setError("root",{message:a.message})}})}}).catch(()=>{})),children:[v.jsx(ts,{variant:{highlight:!0},error:r.formState.errors.root}),v.jsx(hn,{formState:r.formState,name:"login",label:v.jsx(ne,{label:"Login (label)"}),children:v.jsx("input",{type:"text",className:i.input(),...r.register("login")})}),v.jsx(hn,{formState:r.formState,name:"password",label:v.jsx(ne,{label:"Password (label)"}),children:v.jsx("input",{type:"password",className:i.input(),...r.register("password")})}),v.jsxs("div",{className:"flex flex-row justify-between gap-8",children:[v.jsx(Et,{icon:"icon-[mdi--register-outline]",to:"/$locale/apps/derivean/public/register",params:{locale:e},children:v.jsx(ne,{label:"Register (link)"})}),v.jsx(Pn,{iconEnabled:"icon-[uiw--login]",iconDisabled:"icon-[uiw--login]",type:"submit",children:v.jsx(ne,{label:"Login (submit)"})})]})]})},Dhe=Pt("/$locale/apps/derivean/public/login")({component:()=>{const t=em();return v.jsx("div",{className:ln(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:v.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[v.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),v.jsx(Lhe,{onSuccess:async e=>{ev.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),BH=16,jH=16,Fhe=jH*BH,Bhe={plotSize:BH,plotCount:jH,chunkSize:Fhe};function NP(){return NP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NP.apply(null,arguments)}const dT="173",Wu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},lp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},UH=0,PP=1,zH=2,jhe=3,VH=0,fT=1,o0=2,Bl=3,cd=0,So=1,Cc=2,Qu=0,Ap=1,kP=2,OP=3,LP=4,WH=5,_f=100,qH=101,HH=102,$H=103,GH=104,XH=200,KH=201,YH=202,ZH=203,RE=204,AE=205,JH=206,QH=207,e$=208,t$=209,n$=210,r$=211,i$=212,s$=213,o$=214,NE=0,PE=1,kE=2,Xp=3,OE=4,LE=5,DE=6,FE=7,Kb=0,a$=1,l$=2,Lc=0,c$=1,u$=2,d$=3,hT=4,f$=5,h$=6,p$=7,DP="attached",m$="detached",pT=300,ud=301,Wf=302,tb=303,nb=304,rv=306,rb=1e3,il=1001,ib=1002,Ts=1003,Ck=1004,Uhe=1004,Zg=1005,zhe=1005,Ji=1006,a0=1007,Vhe=1007,Ac=1008,Whe=1008,Ql=1009,Ik=1010,Rk=1011,jy=1012,mT=1013,dd=1014,Qo=1015,iv=1016,gT=1017,yT=1018,Kp=1020,Ak=35902,Nk=1021,Pk=1022,qs=1023,kk=1024,Ok=1025,Np=1026,Yp=1027,vT=1028,Yb=1029,Lk=1030,xT=1031,qhe=1032,bT=1033,l0=33776,c0=33777,u0=33778,d0=33779,BE=35840,jE=35841,UE=35842,zE=35843,VE=36196,WE=37492,qE=37496,HE=37808,$E=37809,GE=37810,XE=37811,KE=37812,YE=37813,ZE=37814,JE=37815,QE=37816,eM=37817,tM=37818,nM=37819,rM=37820,iM=37821,f0=36492,sM=36494,oM=36495,Dk=36283,aM=36284,lM=36285,cM=36286,g$=2200,y$=2201,v$=2202,sb=2300,uM=2301,e1=2302,_p=2400,Sp=2401,ob=2402,wT=2500,Fk=2501,Hhe=0,$he=1,Ghe=2,x$=3200,b$=3201,Xhe=3202,Khe=3203,Xf=0,w$=1,Hu="",Ko="srgb",Zp="srgb-linear",ab="linear",ur="srgb",Yhe=0,cp=7680,Zhe=7681,Jhe=7682,Qhe=7683,epe=34055,tpe=34056,npe=5386,rpe=512,ipe=513,spe=514,ope=515,ape=516,lpe=517,cpe=518,FP=519,_$=512,S$=513,E$=514,Bk=515,M$=516,T$=517,C$=518,I$=519,lb=35044,upe=35048,dpe=35040,fpe=35045,hpe=35049,ppe=35041,mpe=35046,gpe=35050,ype=35042,vpe="100",BP="300 es",Xl=2e3,cb=2001,xpe={COMPUTE:"compute",RENDER:"render"};let $c=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Bs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ij=1234567;const Pp=Math.PI/180,Uy=180/Math.PI;function Ra(){const t=Math.random()*0xffffffff|0,e=Math.random()*0xffffffff|0,n=Math.random()*0xffffffff|0,r=Math.random()*0xffffffff|0;return(Bs[t&255]+Bs[t>>8&255]+Bs[t>>16&255]+Bs[t>>24&255]+"-"+Bs[e&255]+Bs[e>>8&255]+"-"+Bs[e>>16&15|64]+Bs[e>>24&255]+"-"+Bs[n&63|128]+Bs[n>>8&255]+"-"+Bs[n>>16&255]+Bs[n>>24&255]+Bs[r&255]+Bs[r>>8&255]+Bs[r>>16&255]+Bs[r>>24&255]).toLowerCase()}function bn(t,e,n){return Math.max(e,Math.min(n,t))}function jk(t,e){return(t%e+e)%e}function bpe(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function wpe(t,e,n){return t!==e?(n-t)/(e-t):0}function h0(t,e,n){return(1-n)*t+n*e}function _pe(t,e,n,r){return h0(t,e,1-Math.exp(-n*r))}function Spe(t,e=1){return e-Math.abs(jk(t,e*2)-e)}function Epe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Mpe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function Tpe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function Cpe(t,e){return t+Math.random()*(e-t)}function Ipe(t){return t*(.5-Math.random())}function Rpe(t){t!==void 0&&(Ij=t);let e=Ij+=0x6d2b79f5;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/0x100000000}function Ape(t){return t*Pp}function Npe(t){return t*Uy}function Ppe(t){return(t&t-1)===0&&t!==0}function kpe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Ope(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Lpe(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+r)/2),u=o((e+r)/2),f=s((e-r)/2),p=o((e-r)/2),g=s((r-e)/2),x=o((r-e)/2);switch(i){case"XYX":t.set(a*u,l*f,l*p,a*c);break;case"YZY":t.set(l*p,a*u,l*f,a*c);break;case"ZXZ":t.set(l*f,l*p,a*u,a*c);break;case"XZX":t.set(a*u,l*x,l*g,a*c);break;case"YXY":t.set(l*g,a*u,l*x,a*c);break;case"ZYZ":t.set(l*x,l*g,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function _o(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/0xffffffff;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/0x7fffffff,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Mn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*0xffffffff);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*0x7fffffff);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Dpe={DEG2RAD:Pp,RAD2DEG:Uy,generateUUID:Ra,clamp:bn,euclideanModulo:jk,mapLinear:bpe,inverseLerp:wpe,lerp:h0,damp:_pe,pingpong:Spe,smoothstep:Epe,smootherstep:Mpe,randInt:Tpe,randFloat:Cpe,randFloatSpread:Ipe,seededRandom:Rpe,degToRad:Ape,radToDeg:Npe,isPowerOfTwo:Ppe,ceilPowerOfTwo:kpe,floorPowerOfTwo:Ope,setQuaternionFromProperEuler:Lpe,normalize:Mn,denormalize:_o};class Je{constructor(e=0,n=0){Je.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=bn(this.x,e.x,n.x),this.y=bn(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=bn(this.x,e,n),this.y=bn(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(bn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(bn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class _n{constructor(e,n,r,i,s,o,a,l,c){_n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c)}set(e,n,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],f=r[7],p=r[2],g=r[5],x=r[8],S=i[0],_=i[3],b=i[6],E=i[1],M=i[4],T=i[7],k=i[2],N=i[5],D=i[8];return s[0]=o*S+a*E+l*k,s[3]=o*_+a*M+l*N,s[6]=o*b+a*T+l*D,s[1]=c*S+u*E+f*k,s[4]=c*_+u*M+f*N,s[7]=c*b+u*T+f*D,s[2]=p*S+g*E+x*k,s[5]=p*_+g*M+x*N,s[8]=p*b+g*T+x*D,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,p=a*l-u*s,g=c*s-o*l,x=n*f+r*p+i*g;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=f*S,e[1]=(i*c-u*r)*S,e[2]=(a*r-i*o)*S,e[3]=p*S,e[4]=(u*n-i*l)*S,e[5]=(i*s-a*n)*S,e[6]=g*S,e[7]=(r*l-c*n)*S,e[8]=(o*n-r*s)*S,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(uA.makeScale(e,n)),this}rotate(e){return this.premultiply(uA.makeRotation(-e)),this}translate(e,n){return this.premultiply(uA.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const uA=new _n;function R$(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const Fpe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Jg(t,e){return new Fpe[t](e)}function ub(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function A$(){const t=ub("canvas");return t.style.display="block",t}const Rj={};function Ug(t){t in Rj||(Rj[t]=!0,console.warn(t))}function Bpe(t,e,n){return new Promise(function(r,i){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}setTimeout(s,n)})}function jpe(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Upe(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Aj=new _n().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Nj=new _n().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function zpe(){const t={enabled:!0,workingColorSpace:Zp,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===ur&&(i.r=ed(i.r),i.g=ed(i.g),i.b=ed(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ur&&(i.r=by(i.r),i.g=by(i.g),i.b=by(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Hu?ab:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[Zp]:{primaries:e,whitePoint:r,transfer:ab,toXYZ:Aj,fromXYZ:Nj,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Ko},outputColorSpaceConfig:{drawingBufferColorSpace:Ko}},[Ko]:{primaries:e,whitePoint:r,transfer:ur,toXYZ:Aj,fromXYZ:Nj,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Ko}}}),t}const Xn=zpe();function ed(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function by(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let hg;class N${static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{hg===void 0&&(hg=ub("canvas")),hg.width=e.width,hg.height=e.height;const r=hg.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=hg}return n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=ub("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=ed(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(ed(n[r]/255)*255):n[r]=ed(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Vpe=0;class Ep{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Vpe++}),this.uuid=Ra(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(dA(i[o].image)):s.push(dA(i[o]))}else s=dA(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function dA(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?N$.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Wpe=0;class oi extends $c{constructor(e=oi.DEFAULT_IMAGE,n=oi.DEFAULT_MAPPING,r=il,i=il,s=Ji,o=Ac,a=qs,l=Ql,c=oi.DEFAULT_ANISOTROPY,u=Hu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Wpe++}),this.uuid=Ra(),this.name="",this.source=new Ep(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Je(0,0),this.repeat=new Je(1,1),this.center=new Je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _n,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==pT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rb:e.x=e.x-Math.floor(e.x);break;case il:e.x=e.x<0?0:1;break;case ib:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rb:e.y=e.y-Math.floor(e.y);break;case il:e.y=e.y<0?0:1;break;case ib:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}oi.DEFAULT_IMAGE=null;oi.DEFAULT_MAPPING=pT;oi.DEFAULT_ANISOTROPY=1;class Qn{constructor(e=0,n=0,r=0,i=1){Qn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],f=l[8],p=l[1],g=l[5],x=l[9],S=l[2],_=l[6],b=l[10];if(Math.abs(u-p)<.01&&Math.abs(f-S)<.01&&Math.abs(x-_)<.01){if(Math.abs(u+p)<.1&&Math.abs(f+S)<.1&&Math.abs(x+_)<.1&&Math.abs(c+g+b-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const M=(c+1)/2,T=(g+1)/2,k=(b+1)/2,N=(u+p)/4,D=(f+S)/4,L=(x+_)/4;return M>T&&M>k?M<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(M),i=N/r,s=D/r):T>k?T<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(T),r=N/i,s=L/i):k<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(k),r=D/s,i=L/s),this.set(r,i,s,n),this}let E=Math.sqrt((_-x)*(_-x)+(f-S)*(f-S)+(p-u)*(p-u));return Math.abs(E)<.001&&(E=1),this.x=(_-x)/E,this.y=(f-S)/E,this.z=(p-u)/E,this.w=Math.acos((c+g+b-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=bn(this.x,e.x,n.x),this.y=bn(this.y,e.y,n.y),this.z=bn(this.z,e.z,n.z),this.w=bn(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=bn(this.x,e,n),this.y=bn(this.y,e,n),this.z=bn(this.z,e,n),this.w=bn(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(bn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class _T extends $c{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Qn(0,0,e,n),this.scissorTest=!1,this.viewport=new Qn(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ji,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new oi(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const n=Object.assign({},e.texture.image);return this.texture.source=new Ep(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Wc extends _T{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class Zb extends oi{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Ts,this.minFilter=Ts,this.wrapR=il,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class qpe extends Wc{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Zb(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class ST extends oi{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Ts,this.minFilter=Ts,this.wrapR=il,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Hpe extends Wc{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new ST(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class Gs{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],f=r[i+3];const p=s[o+0],g=s[o+1],x=s[o+2],S=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f;return}if(a===1){e[n+0]=p,e[n+1]=g,e[n+2]=x,e[n+3]=S;return}if(f!==S||l!==p||c!==g||u!==x){let _=1-a;const b=l*p+c*g+u*x+f*S,E=b>=0?1:-1,M=1-b*b;if(M>Number.EPSILON){const k=Math.sqrt(M),N=Math.atan2(k,b*E);_=Math.sin(_*N)/k,a=Math.sin(a*N)/k}const T=a*E;if(l=l*_+p*T,c=c*_+g*T,u=u*_+x*T,f=f*_+S*T,_===1-a){const k=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=k,c*=k,u*=k,f*=k}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],f=s[o],p=s[o+1],g=s[o+2],x=s[o+3];return e[n]=a*x+u*f+l*g-c*p,e[n+1]=l*x+u*p+c*f-a*g,e[n+2]=c*x+u*g+a*p-l*f,e[n+3]=u*x-a*f-l*p-c*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),f=a(s/2),p=l(r/2),g=l(i/2),x=l(s/2);switch(o){case"XYZ":this._x=p*u*f+c*g*x,this._y=c*g*f-p*u*x,this._z=c*u*x+p*g*f,this._w=c*u*f-p*g*x;break;case"YXZ":this._x=p*u*f+c*g*x,this._y=c*g*f-p*u*x,this._z=c*u*x-p*g*f,this._w=c*u*f+p*g*x;break;case"ZXY":this._x=p*u*f-c*g*x,this._y=c*g*f+p*u*x,this._z=c*u*x+p*g*f,this._w=c*u*f-p*g*x;break;case"ZYX":this._x=p*u*f-c*g*x,this._y=c*g*f+p*u*x,this._z=c*u*x-p*g*f,this._w=c*u*f+p*g*x;break;case"YZX":this._x=p*u*f+c*g*x,this._y=c*g*f+p*u*x,this._z=c*u*x-p*g*f,this._w=c*u*f-p*g*x;break;case"XZY":this._x=p*u*f-c*g*x,this._y=c*g*f-p*u*x,this._z=c*u*x+p*g*f,this._w=c*u*f+p*g*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],f=n[10],p=r+a+f;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(u-l)*g,this._y=(s-c)*g,this._z=(o-i)*g}else if(r>a&&r>f){const g=2*Math.sqrt(1+r-a-f);this._w=(u-l)/g,this._x=.25*g,this._y=(i+o)/g,this._z=(s+c)/g}else if(a>f){const g=2*Math.sqrt(1+a-r-f);this._w=(s-c)/g,this._x=(i+o)/g,this._y=.25*g,this._z=(l+u)/g}else{const g=2*Math.sqrt(1+f-r-a);this._w=(o-i)/g,this._x=(s+c)/g,this._y=(l+u)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(bn(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-n;return this._w=g*o+n*this._w,this._x=g*r+n*this._x,this._y=g*i+n*this._y,this._z=g*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-n)*u)/c,p=Math.sin(n*u)/c;return this._w=o*f+this._w*p,this._x=r*f+this._x*p,this._y=i*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pe{constructor(e=0,n=0,r=0){pe.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(Pj.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(Pj.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*n-s*i),f=2*(s*r-o*n);return this.x=n+l*c+o*f-a*u,this.y=r+l*u+a*c-s*f,this.z=i+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=bn(this.x,e.x,n.x),this.y=bn(this.y,e.y,n.y),this.z=bn(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=bn(this.x,e,n),this.y=bn(this.y,e,n),this.z=bn(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(bn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return fA.copy(this).projectOnVector(e),this.sub(fA)}reflect(e){return this.sub(fA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(bn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const fA=new pe,Pj=new Gs;class Eo{constructor(e=new pe(1/0,1/0,1/0),n=new pe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Ll.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Ll.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Ll.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Ll):Ll.fromBufferAttribute(s,o),Ll.applyMatrix4(e.matrixWorld),this.expandByPoint(Ll);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),L_.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),L_.copy(r.boundingBox)),L_.applyMatrix4(e.matrixWorld),this.union(L_)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ll),Ll.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(fx),D_.subVectors(this.max,fx),pg.subVectors(e.a,fx),mg.subVectors(e.b,fx),gg.subVectors(e.c,fx),sf.subVectors(mg,pg),of.subVectors(gg,mg),Wh.subVectors(pg,gg);let n=[0,-sf.z,sf.y,0,-of.z,of.y,0,-Wh.z,Wh.y,sf.z,0,-sf.x,of.z,0,-of.x,Wh.z,0,-Wh.x,-sf.y,sf.x,0,-of.y,of.x,0,-Wh.y,Wh.x,0];return!hA(n,pg,mg,gg,D_)||(n=[1,0,0,0,1,0,0,0,1],!hA(n,pg,mg,gg,D_))?!1:(F_.crossVectors(sf,of),n=[F_.x,F_.y,F_.z],hA(n,pg,mg,gg,D_))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ll).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ll).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ku[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ku[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ku[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ku[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ku[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ku[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ku[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ku[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ku),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ku=[new pe,new pe,new pe,new pe,new pe,new pe,new pe,new pe],Ll=new pe,L_=new Eo,pg=new pe,mg=new pe,gg=new pe,sf=new pe,of=new pe,Wh=new pe,fx=new pe,D_=new pe,F_=new pe,qh=new pe;function hA(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){qh.fromArray(t,s);const a=i.x*Math.abs(qh.x)+i.y*Math.abs(qh.y)+i.z*Math.abs(qh.z),l=e.dot(qh),c=n.dot(qh),u=r.dot(qh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const $pe=new Eo,hx=new pe,pA=new pe;class Xs{constructor(e=new pe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):$pe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;hx.subVectors(e,this.center);const n=hx.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(hx,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(pA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(hx.copy(e.center).add(pA)),this.expandByPoint(hx.copy(e.center).sub(pA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ou=new pe,mA=new pe,B_=new pe,af=new pe,gA=new pe,j_=new pe,yA=new pe;class om{constructor(e=new pe,n=new pe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ou)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Ou.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Ou.copy(this.origin).addScaledVector(this.direction,n),Ou.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){mA.copy(e).add(n).multiplyScalar(.5),B_.copy(n).sub(e).normalize(),af.copy(this.origin).sub(mA);const s=e.distanceTo(n)*.5,o=-this.direction.dot(B_),a=af.dot(this.direction),l=-af.dot(B_),c=af.lengthSq(),u=Math.abs(1-o*o);let f,p,g,x;if(u>0)if(f=o*l-a,p=o*a-l,x=s*u,f>=0)if(p>=-x)if(p<=x){const S=1/u;f*=S,p*=S,g=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*l)+c;else p<=-x?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),g=-f*f+p*(p+2*l)+c):p<=x?(f=0,p=Math.min(Math.max(-s,-l),s),g=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),g=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(mA).addScaledVector(B_,p),g}intersectSphere(e,n){Ou.subVectors(e.center,this.origin);const r=Ou.dot(this.direction),i=Ou.dot(Ou)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Ou)!==null}intersectTriangle(e,n,r,i,s){gA.subVectors(n,e),j_.subVectors(r,e),yA.crossVectors(gA,j_);let o=this.direction.dot(yA),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;af.subVectors(this.origin,e);const l=a*this.direction.dot(j_.crossVectors(af,j_));if(l<0)return null;const c=a*this.direction.dot(gA.cross(af));if(c<0||l+c>o)return null;const u=-a*af.dot(yA);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class cn{constructor(e,n,r,i,s,o,a,l,c,u,f,p,g,x,S,_){cn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c,u,f,p,g,x,S,_)}set(e,n,r,i,s,o,a,l,c,u,f,p,g,x,S,_){const b=this.elements;return b[0]=e,b[4]=n,b[8]=r,b[12]=i,b[1]=s,b[5]=o,b[9]=a,b[13]=l,b[2]=c,b[6]=u,b[10]=f,b[14]=p,b[3]=g,b[7]=x,b[11]=S,b[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new cn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/yg.setFromMatrixColumn(e,0).length(),s=1/yg.setFromMatrixColumn(e,1).length(),o=1/yg.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*u,g=o*f,x=a*u,S=a*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=g+x*c,n[5]=p-S*c,n[9]=-a*l,n[2]=S-p*c,n[6]=x+g*c,n[10]=o*l}else if(e.order==="YXZ"){const p=l*u,g=l*f,x=c*u,S=c*f;n[0]=p+S*a,n[4]=x*a-g,n[8]=o*c,n[1]=o*f,n[5]=o*u,n[9]=-a,n[2]=g*a-x,n[6]=S+p*a,n[10]=o*l}else if(e.order==="ZXY"){const p=l*u,g=l*f,x=c*u,S=c*f;n[0]=p-S*a,n[4]=-o*f,n[8]=x+g*a,n[1]=g+x*a,n[5]=o*u,n[9]=S-p*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const p=o*u,g=o*f,x=a*u,S=a*f;n[0]=l*u,n[4]=x*c-g,n[8]=p*c+S,n[1]=l*f,n[5]=S*c+p,n[9]=g*c-x,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const p=o*l,g=o*c,x=a*l,S=a*c;n[0]=l*u,n[4]=S-p*f,n[8]=x*f+g,n[1]=f,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=g*f+x,n[10]=p-S*f}else if(e.order==="XZY"){const p=o*l,g=o*c,x=a*l,S=a*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=p*f+S,n[5]=o*u,n[9]=g*f-x,n[2]=x*f-g,n[6]=a*u,n[10]=S*f+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Gpe,e,Xpe)}lookAt(e,n,r){const i=this.elements;return va.subVectors(e,n),va.lengthSq()===0&&(va.z=1),va.normalize(),lf.crossVectors(r,va),lf.lengthSq()===0&&(Math.abs(r.z)===1?va.x+=1e-4:va.z+=1e-4,va.normalize(),lf.crossVectors(r,va)),lf.normalize(),U_.crossVectors(va,lf),i[0]=lf.x,i[4]=U_.x,i[8]=va.x,i[1]=lf.y,i[5]=U_.y,i[9]=va.y,i[2]=lf.z,i[6]=U_.z,i[10]=va.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],f=r[5],p=r[9],g=r[13],x=r[2],S=r[6],_=r[10],b=r[14],E=r[3],M=r[7],T=r[11],k=r[15],N=i[0],D=i[4],L=i[8],R=i[12],A=i[1],P=i[5],j=i[9],U=i[13],B=i[2],$=i[6],q=i[10],te=i[14],W=i[3],Z=i[7],J=i[11],Y=i[15];return s[0]=o*N+a*A+l*B+c*W,s[4]=o*D+a*P+l*$+c*Z,s[8]=o*L+a*j+l*q+c*J,s[12]=o*R+a*U+l*te+c*Y,s[1]=u*N+f*A+p*B+g*W,s[5]=u*D+f*P+p*$+g*Z,s[9]=u*L+f*j+p*q+g*J,s[13]=u*R+f*U+p*te+g*Y,s[2]=x*N+S*A+_*B+b*W,s[6]=x*D+S*P+_*$+b*Z,s[10]=x*L+S*j+_*q+b*J,s[14]=x*R+S*U+_*te+b*Y,s[3]=E*N+M*A+T*B+k*W,s[7]=E*D+M*P+T*$+k*Z,s[11]=E*L+M*j+T*q+k*J,s[15]=E*R+M*U+T*te+k*Y,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],p=e[10],g=e[14],x=e[3],S=e[7],_=e[11],b=e[15];return x*(+s*l*f-i*c*f-s*a*p+r*c*p+i*a*g-r*l*g)+S*(+n*l*g-n*c*p+s*o*p-i*o*g+i*c*u-s*l*u)+_*(+n*c*f-n*a*g-s*o*f+r*o*g+s*a*u-r*c*u)+b*(-i*a*u-n*l*f+n*a*p+i*o*f-r*o*p+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],p=e[10],g=e[11],x=e[12],S=e[13],_=e[14],b=e[15],E=f*_*c-S*p*c+S*l*g-a*_*g-f*l*b+a*p*b,M=x*p*c-u*_*c-x*l*g+o*_*g+u*l*b-o*p*b,T=u*S*c-x*f*c+x*a*g-o*S*g-u*a*b+o*f*b,k=x*f*l-u*S*l-x*a*p+o*S*p+u*a*_-o*f*_,N=n*E+r*M+i*T+s*k;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/N;return e[0]=E*D,e[1]=(S*p*s-f*_*s-S*i*g+r*_*g+f*i*b-r*p*b)*D,e[2]=(a*_*s-S*l*s+S*i*c-r*_*c-a*i*b+r*l*b)*D,e[3]=(f*l*s-a*p*s-f*i*c+r*p*c+a*i*g-r*l*g)*D,e[4]=M*D,e[5]=(u*_*s-x*p*s+x*i*g-n*_*g-u*i*b+n*p*b)*D,e[6]=(x*l*s-o*_*s-x*i*c+n*_*c+o*i*b-n*l*b)*D,e[7]=(o*p*s-u*l*s+u*i*c-n*p*c-o*i*g+n*l*g)*D,e[8]=T*D,e[9]=(x*f*s-u*S*s-x*r*g+n*S*g+u*r*b-n*f*b)*D,e[10]=(o*S*s-x*a*s+x*r*c-n*S*c-o*r*b+n*a*b)*D,e[11]=(u*a*s-o*f*s-u*r*c+n*f*c+o*r*g-n*a*g)*D,e[12]=k*D,e[13]=(u*S*i-x*f*i+x*r*p-n*S*p-u*r*_+n*f*_)*D,e[14]=(x*a*i-o*S*i-x*r*l+n*S*l+o*r*_-n*a*_)*D,e[15]=(o*f*i-u*a*i+u*r*l-n*f*l-o*r*p+n*a*p)*D,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,f=a+a,p=s*c,g=s*u,x=s*f,S=o*u,_=o*f,b=a*f,E=l*c,M=l*u,T=l*f,k=r.x,N=r.y,D=r.z;return i[0]=(1-(S+b))*k,i[1]=(g+T)*k,i[2]=(x-M)*k,i[3]=0,i[4]=(g-T)*N,i[5]=(1-(p+b))*N,i[6]=(_+E)*N,i[7]=0,i[8]=(x+M)*D,i[9]=(_-E)*D,i[10]=(1-(p+S))*D,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=yg.set(i[0],i[1],i[2]).length();const o=yg.set(i[4],i[5],i[6]).length(),a=yg.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Dl.copy(this);const c=1/s,u=1/o,f=1/a;return Dl.elements[0]*=c,Dl.elements[1]*=c,Dl.elements[2]*=c,Dl.elements[4]*=u,Dl.elements[5]*=u,Dl.elements[6]*=u,Dl.elements[8]*=f,Dl.elements[9]*=f,Dl.elements[10]*=f,n.setFromRotationMatrix(Dl),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=Xl){const l=this.elements,c=2*s/(n-e),u=2*s/(r-i),f=(n+e)/(n-e),p=(r+i)/(r-i);let g,x;if(a===Xl)g=-(o+s)/(o-s),x=-2*o*s/(o-s);else if(a===cb)g=-o/(o-s),x=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=Xl){const l=this.elements,c=1/(n-e),u=1/(r-i),f=1/(o-s),p=(n+e)*c,g=(r+i)*u;let x,S;if(a===Xl)x=(o+s)*f,S=-2*f;else if(a===cb)x=s*f,S=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=S,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const yg=new pe,Dl=new cn,Gpe=new pe(0,0,0),Xpe=new pe(1,1,1),lf=new pe,U_=new pe,va=new pe,kj=new cn,Oj=new Gs;class Oa{constructor(e=0,n=0,r=0,i=Oa.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],f=i[2],p=i[6],g=i[10];switch(n){case"XYZ":this._y=Math.asin(bn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-bn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(bn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-bn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(bn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-bn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return kj.makeRotationFromQuaternion(e),this.setFromRotationMatrix(kj,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Oj.setFromEuler(this),this.setFromQuaternion(Oj,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Oa.DEFAULT_ORDER="XYZ";class kp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Kpe=0;const Lj=new pe,vg=new Gs,Lu=new cn,z_=new pe,px=new pe,Ype=new pe,Zpe=new Gs,Dj=new pe(1,0,0),Fj=new pe(0,1,0),Bj=new pe(0,0,1),jj={type:"added"},Jpe={type:"removed"},xg={type:"childadded",child:null},vA={type:"childremoved",child:null};class er extends $c{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Kpe++}),this.uuid=Ra(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=er.DEFAULT_UP.clone();const e=new pe,n=new Oa,r=new Gs,i=new pe(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new cn},normalMatrix:{value:new _n}}),this.matrix=new cn,this.matrixWorld=new cn,this.matrixAutoUpdate=er.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=er.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new kp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return vg.setFromAxisAngle(e,n),this.quaternion.multiply(vg),this}rotateOnWorldAxis(e,n){return vg.setFromAxisAngle(e,n),this.quaternion.premultiply(vg),this}rotateX(e){return this.rotateOnAxis(Dj,e)}rotateY(e){return this.rotateOnAxis(Fj,e)}rotateZ(e){return this.rotateOnAxis(Bj,e)}translateOnAxis(e,n){return Lj.copy(e).applyQuaternion(this.quaternion),this.position.add(Lj.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Dj,e)}translateY(e){return this.translateOnAxis(Fj,e)}translateZ(e){return this.translateOnAxis(Bj,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Lu.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?z_.copy(e):z_.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),px.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Lu.lookAt(px,z_,this.up):Lu.lookAt(z_,px,this.up),this.quaternion.setFromRotationMatrix(Lu),i&&(Lu.extractRotation(i.matrixWorld),vg.setFromRotationMatrix(Lu),this.quaternion.premultiply(vg.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(jj),xg.child=e,this.dispatchEvent(xg),xg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Jpe),vA.child=e,this.dispatchEvent(vA),vA.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Lu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Lu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Lu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(jj),xg.child=e,this.dispatchEvent(xg),xg.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(px,e,Ype),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(px,Zpe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),p=o(e.skeletons),g=o(e.animations),x=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),g.length>0&&(r.animations=g),x.length>0&&(r.nodes=x)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}er.DEFAULT_UP=new pe(0,1,0);er.DEFAULT_MATRIX_AUTO_UPDATE=!0;er.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Fl=new pe,Du=new pe,xA=new pe,Fu=new pe,bg=new pe,wg=new pe,Uj=new pe,bA=new pe,wA=new pe,_A=new pe,SA=new Qn,EA=new Qn,MA=new Qn;class Yo{constructor(e=new pe,n=new pe,r=new pe){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Fl.subVectors(e,n),i.cross(Fl);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){Fl.subVectors(i,n),Du.subVectors(r,n),xA.subVectors(e,n);const o=Fl.dot(Fl),a=Fl.dot(Du),l=Fl.dot(xA),c=Du.dot(Du),u=Du.dot(xA),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,g=(c*l-a*u)*p,x=(o*u-a*l)*p;return s.set(1-g-x,x,g)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Fu)===null?!1:Fu.x>=0&&Fu.y>=0&&Fu.x+Fu.y<=1}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,Fu)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Fu.x),l.addScaledVector(o,Fu.y),l.addScaledVector(a,Fu.z),l)}static getInterpolatedAttribute(e,n,r,i,s,o){return SA.setScalar(0),EA.setScalar(0),MA.setScalar(0),SA.fromBufferAttribute(e,n),EA.fromBufferAttribute(e,r),MA.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(SA,s.x),o.addScaledVector(EA,s.y),o.addScaledVector(MA,s.z),o}static isFrontFacing(e,n,r,i){return Fl.subVectors(r,n),Du.subVectors(e,n),Fl.cross(Du).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Fl.subVectors(this.c,this.b),Du.subVectors(this.a,this.b),Fl.cross(Du).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Yo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Yo.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return Yo.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return Yo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Yo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;bg.subVectors(i,r),wg.subVectors(s,r),bA.subVectors(e,r);const l=bg.dot(bA),c=wg.dot(bA);if(l<=0&&c<=0)return n.copy(r);wA.subVectors(e,i);const u=bg.dot(wA),f=wg.dot(wA);if(u>=0&&f<=u)return n.copy(i);const p=l*f-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(r).addScaledVector(bg,o);_A.subVectors(e,s);const g=bg.dot(_A),x=wg.dot(_A);if(x>=0&&g<=x)return n.copy(s);const S=g*c-l*x;if(S<=0&&c>=0&&x<=0)return a=c/(c-x),n.copy(r).addScaledVector(wg,a);const _=u*x-g*f;if(_<=0&&f-u>=0&&g-x>=0)return Uj.subVectors(s,i),a=(f-u)/(f-u+(g-x)),n.copy(i).addScaledVector(Uj,a);const b=1/(_+S+p);return o=S*b,a=p*b,n.copy(r).addScaledVector(bg,o).addScaledVector(wg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const P$={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32},cf={h:0,s:0,l:0},V_={h:0,s:0,l:0};function TA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Nt{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Ko){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Xn.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Xn.workingColorSpace){return this.r=e,this.g=n,this.b=r,Xn.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Xn.workingColorSpace){if(e=jk(e,1),n=bn(n,0,1),r=bn(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=TA(o,s,e+1/3),this.g=TA(o,s,e),this.b=TA(o,s,e-1/3)}return Xn.toWorkingColorSpace(this,i),this}setStyle(e,n=Ko){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Ko){const r=P$[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ed(e.r),this.g=ed(e.g),this.b=ed(e.b),this}copyLinearToSRGB(e){return this.r=by(e.r),this.g=by(e.g),this.b=by(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ko){return Xn.fromWorkingColorSpace(js.copy(this),e),Math.round(bn(js.r*255,0,255))*65536+Math.round(bn(js.g*255,0,255))*256+Math.round(bn(js.b*255,0,255))}getHexString(e=Ko){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Xn.workingColorSpace){Xn.fromWorkingColorSpace(js.copy(this),n);const r=js.r,i=js.g,s=js.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Xn.workingColorSpace){return Xn.fromWorkingColorSpace(js.copy(this),n),e.r=js.r,e.g=js.g,e.b=js.b,e}getStyle(e=Ko){Xn.fromWorkingColorSpace(js.copy(this),e);const n=js.r,r=js.g,i=js.b;return e!==Ko?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(cf),this.setHSL(cf.h+e,cf.s+n,cf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(cf),e.getHSL(V_);const r=h0(cf.h,V_.h,n),i=h0(cf.s,V_.s,n),s=h0(cf.l,V_.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const js=new Nt;Nt.NAMES=P$;let Qpe=0;class eo extends $c{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Qpe++}),this.uuid=Ra(),this.name="",this.type="Material",this.blending=Ap,this.side=cd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=RE,this.blendDst=AE,this.blendEquation=_f,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Nt(0,0,0),this.blendAlpha=0,this.depthFunc=Xp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=FP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=cp,this.stencilZFail=cp,this.stencilZPass=cp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ap&&(r.blending=this.blending),this.side!==cd&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==RE&&(r.blendSrc=this.blendSrc),this.blendDst!==AE&&(r.blendDst=this.blendDst),this.blendEquation!==_f&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Xp&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==FP&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==cp&&(r.stencilFail=this.stencilFail),this.stencilZFail!==cp&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==cp&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Kf extends eo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Nt(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oa,this.combine=Kb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const $u=eme();function eme(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=0x38800000,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=0x38000000+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=0x47800000,o[32]=0x80000000;for(let l=33;l<63;++l)o[l]=0x80000000+(l-32<<23);o[63]=0xc7800000;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Wo(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=bn(t,-65504,65504),$u.floatView[0]=t;const e=$u.uint32View[0],n=e>>23&511;return $u.baseTable[n]+((e&8388607)>>$u.shiftTable[n])}function Lx(t){const e=t>>10;return $u.uint32View[0]=$u.mantissaTable[$u.offsetTable[e]+(t&1023)]+$u.exponentTable[e],$u.floatView[0]}const tme={toHalfFloat:Wo,fromHalfFloat:Lx},Li=new pe,W_=new Je;let nme=0;class vr{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:nme++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=lb,this.updateRanges=[],this.gpuType=Qo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)W_.fromBufferAttribute(this,n),W_.applyMatrix3(e),this.setXY(n,W_.x,W_.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Li.fromBufferAttribute(this,n),Li.applyMatrix3(e),this.setXYZ(n,Li.x,Li.y,Li.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Li.fromBufferAttribute(this,n),Li.applyMatrix4(e),this.setXYZ(n,Li.x,Li.y,Li.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Li.fromBufferAttribute(this,n),Li.applyNormalMatrix(e),this.setXYZ(n,Li.x,Li.y,Li.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Li.fromBufferAttribute(this,n),Li.transformDirection(e),this.setXYZ(n,Li.x,Li.y,Li.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=_o(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Mn(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=_o(n,this.array)),n}setX(e,n){return this.normalized&&(n=Mn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=_o(n,this.array)),n}setY(e,n){return this.normalized&&(n=Mn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=_o(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Mn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=_o(n,this.array)),n}setW(e,n){return this.normalized&&(n=Mn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Mn(n,this.array),r=Mn(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Mn(n,this.array),r=Mn(r,this.array),i=Mn(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Mn(n,this.array),r=Mn(r,this.array),i=Mn(i,this.array),s=Mn(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==lb&&(e.usage=this.usage),e}}class rme extends vr{constructor(e,n,r){super(new Int8Array(e),n,r)}}class ime extends vr{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class sme extends vr{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class ome extends vr{constructor(e,n,r){super(new Int16Array(e),n,r)}}class Uk extends vr{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class ame extends vr{constructor(e,n,r){super(new Int32Array(e),n,r)}}class zk extends vr{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class lme extends vr{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=Lx(this.array[e*this.itemSize]);return this.normalized&&(n=_o(n,this.array)),n}setX(e,n){return this.normalized&&(n=Mn(n,this.array)),this.array[e*this.itemSize]=Wo(n),this}getY(e){let n=Lx(this.array[e*this.itemSize+1]);return this.normalized&&(n=_o(n,this.array)),n}setY(e,n){return this.normalized&&(n=Mn(n,this.array)),this.array[e*this.itemSize+1]=Wo(n),this}getZ(e){let n=Lx(this.array[e*this.itemSize+2]);return this.normalized&&(n=_o(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Mn(n,this.array)),this.array[e*this.itemSize+2]=Wo(n),this}getW(e){let n=Lx(this.array[e*this.itemSize+3]);return this.normalized&&(n=_o(n,this.array)),n}setW(e,n){return this.normalized&&(n=Mn(n,this.array)),this.array[e*this.itemSize+3]=Wo(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Mn(n,this.array),r=Mn(r,this.array)),this.array[e+0]=Wo(n),this.array[e+1]=Wo(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Mn(n,this.array),r=Mn(r,this.array),i=Mn(i,this.array)),this.array[e+0]=Wo(n),this.array[e+1]=Wo(r),this.array[e+2]=Wo(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Mn(n,this.array),r=Mn(r,this.array),i=Mn(i,this.array),s=Mn(s,this.array)),this.array[e+0]=Wo(n),this.array[e+1]=Wo(r),this.array[e+2]=Wo(i),this.array[e+3]=Wo(s),this}}class qt extends vr{constructor(e,n,r){super(new Float32Array(e),n,r)}}let cme=0;const Ya=new cn,CA=new er,_g=new pe,xa=new Eo,mx=new Eo,cs=new pe;class kn extends $c{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:cme++}),this.uuid=Ra(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(R$(e)?zk:Uk)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new _n().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ya.makeRotationFromQuaternion(e),this.applyMatrix4(Ya),this}rotateX(e){return Ya.makeRotationX(e),this.applyMatrix4(Ya),this}rotateY(e){return Ya.makeRotationY(e),this.applyMatrix4(Ya),this}rotateZ(e){return Ya.makeRotationZ(e),this.applyMatrix4(Ya),this}translate(e,n,r){return Ya.makeTranslation(e,n,r),this.applyMatrix4(Ya),this}scale(e,n,r){return Ya.makeScale(e,n,r),this.applyMatrix4(Ya),this}lookAt(e){return CA.lookAt(e),CA.updateMatrix(),this.applyMatrix4(CA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_g).negate(),this.translate(_g.x,_g.y,_g.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new qt(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const s=e[i];n.setXYZ(i,s.x,s.y,s.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Eo);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new pe(-1/0,-1/0,-1/0),new pe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];xa.setFromBufferAttribute(s),this.morphTargetsRelative?(cs.addVectors(this.boundingBox.min,xa.min),this.boundingBox.expandByPoint(cs),cs.addVectors(this.boundingBox.max,xa.max),this.boundingBox.expandByPoint(cs)):(this.boundingBox.expandByPoint(xa.min),this.boundingBox.expandByPoint(xa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Xs);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new pe,1/0);return}if(e){const r=this.boundingSphere.center;if(xa.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];mx.setFromBufferAttribute(a),this.morphTargetsRelative?(cs.addVectors(xa.min,mx.min),xa.expandByPoint(cs),cs.addVectors(xa.max,mx.max),xa.expandByPoint(cs)):(xa.expandByPoint(mx.min),xa.expandByPoint(mx.max))}xa.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)cs.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(cs));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)cs.fromBufferAttribute(a,c),l&&(_g.fromBufferAttribute(e,c),cs.add(_g)),i=Math.max(i,r.distanceToSquared(cs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new vr(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let L=0;L<r.count;L++)a[L]=new pe,l[L]=new pe;const c=new pe,u=new pe,f=new pe,p=new Je,g=new Je,x=new Je,S=new pe,_=new pe;function b(L,R,A){c.fromBufferAttribute(r,L),u.fromBufferAttribute(r,R),f.fromBufferAttribute(r,A),p.fromBufferAttribute(s,L),g.fromBufferAttribute(s,R),x.fromBufferAttribute(s,A),u.sub(c),f.sub(c),g.sub(p),x.sub(p);const P=1/(g.x*x.y-x.x*g.y);isFinite(P)&&(S.copy(u).multiplyScalar(x.y).addScaledVector(f,-g.y).multiplyScalar(P),_.copy(f).multiplyScalar(g.x).addScaledVector(u,-x.x).multiplyScalar(P),a[L].add(S),a[R].add(S),a[A].add(S),l[L].add(_),l[R].add(_),l[A].add(_))}let E=this.groups;E.length===0&&(E=[{start:0,count:e.count}]);for(let L=0,R=E.length;L<R;++L){const A=E[L],P=A.start,j=A.count;for(let U=P,B=P+j;U<B;U+=3)b(e.getX(U+0),e.getX(U+1),e.getX(U+2))}const M=new pe,T=new pe,k=new pe,N=new pe;function D(L){k.fromBufferAttribute(i,L),N.copy(k);const R=a[L];M.copy(R),M.sub(k.multiplyScalar(k.dot(R))).normalize(),T.crossVectors(N,R);const P=T.dot(l[L])<0?-1:1;o.setXYZW(L,M.x,M.y,M.z,P)}for(let L=0,R=E.length;L<R;++L){const A=E[L],P=A.start,j=A.count;for(let U=P,B=P+j;U<B;U+=3)D(e.getX(U+0)),D(e.getX(U+1)),D(e.getX(U+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new vr(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,g=r.count;p<g;p++)r.setXYZ(p,0,0,0);const i=new pe,s=new pe,o=new pe,a=new pe,l=new pe,c=new pe,u=new pe,f=new pe;if(e)for(let p=0,g=e.count;p<g;p+=3){const x=e.getX(p+0),S=e.getX(p+1),_=e.getX(p+2);i.fromBufferAttribute(n,x),s.fromBufferAttribute(n,S),o.fromBufferAttribute(n,_),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),a.fromBufferAttribute(r,x),l.fromBufferAttribute(r,S),c.fromBufferAttribute(r,_),a.add(u),l.add(u),c.add(u),r.setXYZ(x,a.x,a.y,a.z),r.setXYZ(S,l.x,l.y,l.z),r.setXYZ(_,c.x,c.y,c.z)}else for(let p=0,g=n.count;p<g;p+=3)i.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),o.fromBufferAttribute(n,p+2),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)cs.fromBufferAttribute(e,n),cs.normalize(),e.setXYZ(n,cs.x,cs.y,cs.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,p=new c.constructor(l.length*u);let g=0,x=0;for(let S=0,_=l.length;S<_;S++){a.isInterleavedBufferAttribute?g=l[S]*a.data.stride+a.offset:g=l[S]*u;for(let b=0;b<u;b++)p[x++]=c[g++]}return new vr(p,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new kn,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const p=c[u],g=e(p,r);l.push(g)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,p=c.length;f<p;f++){const g=c[f];u.push(g.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let p=0,g=f.length;p<g;p++)u.push(f[p].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const zj=new cn,Hh=new om,q_=new Xs,Vj=new pe,H_=new pe,$_=new pe,G_=new pe,IA=new pe,X_=new pe,Wj=new pe,K_=new pe;class ji extends er{constructor(e=new kn,n=new Kf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){X_.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(IA.fromBufferAttribute(f,e),o?X_.addScaledVector(IA,u):X_.addScaledVector(IA.sub(n),u))}n.add(X_)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),q_.copy(r.boundingSphere),q_.applyMatrix4(s),Hh.copy(e.ray).recast(e.near),!(q_.containsPoint(Hh.origin)===!1&&(Hh.intersectSphere(q_,Vj)===null||Hh.origin.distanceToSquared(Vj)>(e.far-e.near)**2))&&(zj.copy(s).invert(),Hh.copy(e.ray).applyMatrix4(zj),!(r.boundingBox!==null&&Hh.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Hh)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,p=s.groups,g=s.drawRange;if(a!==null)if(Array.isArray(o))for(let x=0,S=p.length;x<S;x++){const _=p[x],b=o[_.materialIndex],E=Math.max(_.start,g.start),M=Math.min(a.count,Math.min(_.start+_.count,g.start+g.count));for(let T=E,k=M;T<k;T+=3){const N=a.getX(T),D=a.getX(T+1),L=a.getX(T+2);i=Y_(this,b,e,r,c,u,f,N,D,L),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=_.materialIndex,n.push(i))}}else{const x=Math.max(0,g.start),S=Math.min(a.count,g.start+g.count);for(let _=x,b=S;_<b;_+=3){const E=a.getX(_),M=a.getX(_+1),T=a.getX(_+2);i=Y_(this,o,e,r,c,u,f,E,M,T),i&&(i.faceIndex=Math.floor(_/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let x=0,S=p.length;x<S;x++){const _=p[x],b=o[_.materialIndex],E=Math.max(_.start,g.start),M=Math.min(l.count,Math.min(_.start+_.count,g.start+g.count));for(let T=E,k=M;T<k;T+=3){const N=T,D=T+1,L=T+2;i=Y_(this,b,e,r,c,u,f,N,D,L),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=_.materialIndex,n.push(i))}}else{const x=Math.max(0,g.start),S=Math.min(l.count,g.start+g.count);for(let _=x,b=S;_<b;_+=3){const E=_,M=_+1,T=_+2;i=Y_(this,o,e,r,c,u,f,E,M,T),i&&(i.faceIndex=Math.floor(_/3),n.push(i))}}}}function ume(t,e,n,r,i,s,o,a){let l;if(e.side===So?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===cd,a),l===null)return null;K_.copy(a),K_.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(K_);return c<n.near||c>n.far?null:{distance:c,point:K_.clone(),object:t}}function Y_(t,e,n,r,i,s,o,a,l,c){t.getVertexPosition(a,H_),t.getVertexPosition(l,$_),t.getVertexPosition(c,G_);const u=ume(t,e,n,r,H_,$_,G_,Wj);if(u){const f=new pe;Yo.getBarycoord(Wj,H_,$_,G_,f),i&&(u.uv=Yo.getInterpolatedAttribute(i,a,l,c,f,new Je)),s&&(u.uv1=Yo.getInterpolatedAttribute(s,a,l,c,f,new Je)),o&&(u.normal=Yo.getInterpolatedAttribute(o,a,l,c,f,new pe),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const p={a,b:l,c,normal:new pe,materialIndex:0};Yo.getNormal(H_,$_,G_,p.normal),u.face=p,u.barycoord=f}return u}class am extends kn{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let p=0,g=0;x("z","y","x",-1,-1,r,n,e,o,s,0),x("z","y","x",1,-1,r,n,-e,o,s,1),x("x","z","y",1,1,e,r,n,i,o,2),x("x","z","y",1,-1,e,r,-n,i,o,3),x("x","y","z",1,-1,e,n,r,i,s,4),x("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new qt(c,3)),this.setAttribute("normal",new qt(u,3)),this.setAttribute("uv",new qt(f,2));function x(S,_,b,E,M,T,k,N,D,L,R){const A=T/D,P=k/L,j=T/2,U=k/2,B=N/2,$=D+1,q=L+1;let te=0,W=0;const Z=new pe;for(let J=0;J<q;J++){const Y=J*P-U;for(let oe=0;oe<$;oe++){const ce=oe*A-j;Z[S]=ce*E,Z[_]=Y*M,Z[b]=B,c.push(Z.x,Z.y,Z.z),Z[S]=0,Z[_]=0,Z[b]=N>0?1:-1,u.push(Z.x,Z.y,Z.z),f.push(oe/D),f.push(1-J/L),te+=1}}for(let J=0;J<L;J++)for(let Y=0;Y<D;Y++){const oe=p+Y+$*J,ce=p+Y+$*(J+1),ie=p+(Y+1)+$*(J+1),ue=p+(Y+1)+$*J;l.push(oe,ce,ue),l.push(ce,ie,ue),W+=6}a.addGroup(g,W,R),g+=W,p+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new am(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zy(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function go(t){const e={};for(let n=0;n<t.length;n++){const r=zy(t[n]);for(const i in r)e[i]=r[i]}return e}function dme(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function k$(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Xn.workingColorSpace}const O$={clone:zy,merge:go};var fme=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,hme=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ec extends eo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=fme,this.fragmentShader=hme,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zy(e.uniforms),this.uniformsGroups=dme(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Jb extends er{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new cn,this.projectionMatrix=new cn,this.projectionMatrixInverse=new cn,this.coordinateSystem=Xl}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const uf=new pe,qj=new Je,Hj=new Je;class wi extends Jb{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Uy*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Pp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Uy*2*Math.atan(Math.tan(Pp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){uf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(uf.x,uf.y).multiplyScalar(-e/uf.z),uf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(uf.x,uf.y).multiplyScalar(-e/uf.z)}getViewSize(e,n){return this.getViewBounds(e,qj,Hj),n.subVectors(Hj,qj)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Pp*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Sg=-90,Eg=1;class L$ extends er{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new wi(Sg,Eg,e,n);i.layers=this.layers,this.add(i);const s=new wi(Sg,Eg,e,n);s.layers=this.layers,this.add(s);const o=new wi(Sg,Eg,e,n);o.layers=this.layers,this.add(o);const a=new wi(Sg,Eg,e,n);a.layers=this.layers,this.add(a);const l=new wi(Sg,Eg,e,n);l.layers=this.layers,this.add(l);const c=new wi(Sg,Eg,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,l]=n;for(const c of n)this.remove(c);if(e===Xl)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===cb)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const S=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,o),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=S,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(f,p,g),e.xr.enabled=x,r.texture.needsPMREMUpdate=!0}}class Qb extends oi{constructor(e,n,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:ud,super(e,n,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class D$ extends Wc{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Qb(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Ji}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new am(5,5,5),s=new ec({name:"CubemapFromEquirect",uniforms:zy(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:So,blending:Qu});s.uniforms.tEquirect.value=n;const o=new ji(i,s),a=n.minFilter;return n.minFilter===Ac&&(n.minFilter=Ji),new L$(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}class Qg extends er{constructor(){super(),this.isGroup=!0,this.type="Group"}}const pme={type:"move"};class t1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Qg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Qg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Qg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const S of e.hand.values()){const _=n.getJointPose(S,r),b=this._getHandJoint(c,S);_!==null&&(b.matrix.fromArray(_.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=_.radius),b.visible=_!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=u.position.distanceTo(f.position),g=.02,x=.005;c.inputState.pinching&&p>g+x?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=g-x&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(pme)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Qg;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class ET{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Nt(e),this.density=n}clone(){return new ET(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class MT{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Nt(e),this.near=n,this.far=r}clone(){return new MT(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Vk extends er{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Oa,this.environmentIntensity=1,this.environmentRotation=new Oa,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class TT{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=lb,this.updateRanges=[],this.version=0,this.uuid=Ra()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ra()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ra()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const mo=new pe;class Jp{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)mo.fromBufferAttribute(this,n),mo.applyMatrix4(e),this.setXYZ(n,mo.x,mo.y,mo.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)mo.fromBufferAttribute(this,n),mo.applyNormalMatrix(e),this.setXYZ(n,mo.x,mo.y,mo.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)mo.fromBufferAttribute(this,n),mo.transformDirection(e),this.setXYZ(n,mo.x,mo.y,mo.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=_o(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Mn(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Mn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Mn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Mn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Mn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=_o(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=_o(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=_o(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=_o(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Mn(n,this.array),r=Mn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Mn(n,this.array),r=Mn(r,this.array),i=Mn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Mn(n,this.array),r=Mn(r,this.array),i=Mn(i,this.array),s=Mn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new vr(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Jp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Wk extends eo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Nt(0xffffff),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Mg;const gx=new pe,Tg=new pe,Cg=new pe,Ig=new Je,yx=new Je,F$=new cn,Z_=new pe,vx=new pe,J_=new pe,$j=new Je,RA=new Je,Gj=new Je;class B$ extends er{constructor(e=new Wk){if(super(),this.isSprite=!0,this.type="Sprite",Mg===void 0){Mg=new kn;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new TT(n,5);Mg.setIndex([0,1,2,0,2,3]),Mg.setAttribute("position",new Jp(r,3,0,!1)),Mg.setAttribute("uv",new Jp(r,2,3,!1))}this.geometry=Mg,this.material=e,this.center=new Je(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Tg.setFromMatrixScale(this.matrixWorld),F$.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Cg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Tg.multiplyScalar(-Cg.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Q_(Z_.set(-.5,-.5,0),Cg,o,Tg,i,s),Q_(vx.set(.5,-.5,0),Cg,o,Tg,i,s),Q_(J_.set(.5,.5,0),Cg,o,Tg,i,s),$j.set(0,0),RA.set(1,0),Gj.set(1,1);let a=e.ray.intersectTriangle(Z_,vx,J_,!1,gx);if(a===null&&(Q_(vx.set(-.5,.5,0),Cg,o,Tg,i,s),RA.set(0,1),a=e.ray.intersectTriangle(Z_,J_,vx,!1,gx),a===null))return;const l=e.ray.origin.distanceTo(gx);l<e.near||l>e.far||n.push({distance:l,point:gx.clone(),uv:Yo.getInterpolation(gx,Z_,vx,J_,$j,RA,Gj,new Je),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Q_(t,e,n,r,i,s){Ig.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(yx.x=s*Ig.x-i*Ig.y,yx.y=i*Ig.x+s*Ig.y):yx.copy(Ig),t.copy(e),t.x+=yx.x,t.y+=yx.y,t.applyMatrix4(F$)}const eS=new pe,Xj=new pe;class j$ extends er{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let r=0;r<n.length;r++)if(n[r].distance===e){const i=n.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){eS.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(eS);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){eS.setFromMatrixPosition(e.matrixWorld),Xj.setFromMatrixPosition(this.matrixWorld);const r=eS.distanceTo(Xj)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const Kj=new pe,Yj=new Qn,Zj=new Qn,mme=new pe,Jj=new cn,tS=new pe,AA=new Xs,Qj=new cn,NA=new om;class U$ extends ji{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=DP,this.bindMatrix=new cn,this.bindMatrixInverse=new cn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Eo),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,tS),this.boundingBox.expandByPoint(tS)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Xs),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,tS),this.boundingSphere.expandByPoint(tS)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),AA.copy(this.boundingSphere),AA.applyMatrix4(i),e.ray.intersectsSphere(AA)!==!1&&(Qj.copy(i).invert(),NA.copy(e.ray).applyMatrix4(Qj),!(this.boundingBox!==null&&NA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,NA)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Qn,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===DP?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===m$?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;Yj.fromBufferAttribute(i.attributes.skinIndex,e),Zj.fromBufferAttribute(i.attributes.skinWeight,e),Kj.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=Zj.getComponent(s);if(o!==0){const a=Yj.getComponent(s);Jj.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(mme.copy(Kj).applyMatrix4(Jj),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class qk extends er{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Dc extends oi{constructor(e=null,n=1,r=1,i,s,o,a,l,c=Ts,u=Ts,f,p){super(null,o,a,l,c,u,i,s,f,p),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const eU=new cn,gme=new cn;class CT{constructor(e=[],n=[]){this.uuid=Ra(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new cn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new cn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:gme;eU.multiplyMatrices(a,n[s]),eU.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new CT(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Dc(n,e,e,qs,Qo);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new qk),this.bones.push(o),this.boneInverses.push(new cn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Vy extends vr{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Rg=new cn,tU=new cn,nS=[],nU=new Eo,yme=new cn,xx=new ji,bx=new Xs;class z$ extends ji{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Vy(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,yme)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Eo),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Rg),nU.copy(e.boundingBox).applyMatrix4(Rg),this.boundingBox.union(nU)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Xs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Rg),bx.copy(e.boundingSphere).applyMatrix4(Rg),this.boundingSphere.union(bx)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(xx.geometry=this.geometry,xx.material=this.material,xx.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),bx.copy(this.boundingSphere),bx.applyMatrix4(r),e.ray.intersectsSphere(bx)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Rg),tU.multiplyMatrices(r,Rg),xx.matrixWorld=tU,xx.raycast(e,nS);for(let o=0,a=nS.length;o<a;o++){const l=nS[o];l.instanceId=s,l.object=this,n.push(l)}nS.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Vy(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Dc(new Float32Array(i*this.count),i,this.count,vT,Qo));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<r.length;c++)o+=r[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const PA=new pe,vme=new pe,xme=new _n;class qu{constructor(e=new pe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=PA.subVectors(r,n).cross(vme.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(PA),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||xme.getNormalMatrix(e),i=this.coplanarPoint(PA).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const $h=new Xs,rS=new pe;class ew{constructor(e=new qu,n=new qu,r=new qu,i=new qu,s=new qu,o=new qu){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Xl){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],f=i[6],p=i[7],g=i[8],x=i[9],S=i[10],_=i[11],b=i[12],E=i[13],M=i[14],T=i[15];if(r[0].setComponents(l-s,p-c,_-g,T-b).normalize(),r[1].setComponents(l+s,p+c,_+g,T+b).normalize(),r[2].setComponents(l+o,p+u,_+x,T+E).normalize(),r[3].setComponents(l-o,p-u,_-x,T-E).normalize(),r[4].setComponents(l-a,p-f,_-S,T-M).normalize(),n===Xl)r[5].setComponents(l+a,p+f,_+S,T+M).normalize();else if(n===cb)r[5].setComponents(a,f,S,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),$h.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),$h.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere($h)}intersectsSprite(e){return $h.center.set(0,0,0),$h.radius=.7071067811865476,$h.applyMatrix4(e.matrixWorld),this.intersectsSphere($h)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(rS.x=i.normal.x>0?e.max.x:e.min.x,rS.y=i.normal.y>0?e.max.y:e.min.y,rS.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(rS)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function kA(t,e){return t-e}function bme(t,e){return t.z-e.z}function wme(t,e){return e.z-t.z}class _me{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,r,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=n,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const Vo=new cn,Sme=new Nt(1,1,1),OA=new ew,iS=new Eo,Gh=new Xs,wx=new pe,rU=new pe,Eme=new pe,LA=new _me,Us=new ji,sS=[];function Mme(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}function Xh(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++)e[r]=t[r]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}class V$ extends ji{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,n,r=n*2,i){super(new kn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new Dc(n,e,e,qs,Qo);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),r=new Dc(n,e,e,Yb,dd);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),r=new Dc(n,e,e,qs,Qo);r.colorSpace=Xn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(r*l),f=new vr(u,l,c);n.setAttribute(s,f)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);n.setIndex(new vr(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=n.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const n=this._instanceInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Eo);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const s=n[r].geometryIndex;this.getMatrixAt(r,Vo),this.getBoundingBoxAt(s,iS).applyMatrix4(Vo),e.union(iS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Xs);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const s=n[r].geometryIndex;this.getMatrixAt(r,Vo),this.getBoundingSphereAt(s,Gh).applyMatrix4(Vo),e.union(Gh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(kA),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;Vo.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(Sme.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,n=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?o.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(kA),l=this._availableGeometryIds.shift(),s[l]=i):(l=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=n.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||n.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=n.getAttribute("position").count;for(const u in r.attributes){const f=n.getAttribute(u),p=r.getAttribute(u);Mme(f,p,l);const g=f.itemSize;for(let x=f.count,S=c;x<S;x++){const _=l+x;for(let b=0;b<g;b++)p.setComponent(_,b,0)}p.needsUpdate=!0,p.addUpdateRange(l*g,c*g)}if(i){const u=a.indexStart,f=a.reservedIndexCount;a.indexCount=n.getIndex().count;for(let p=0;p<o.count;p++)s.setX(u+p,l+o.getX(p));for(let p=o.count,g=f;p<g;p++)s.setX(u+p,l);s.needsUpdate=!0,s.addUpdateRange(u,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,n.boundingBox!==null&&(a.boundingBox=n.boundingBox.clone()),a.boundingSphere=null,n.boundingSphere!==null&&(a.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].active&&r[i].geometryIndex===e&&this.deleteInstance(i);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,n=0;const r=this._geometryInfo,i=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),s=this.geometry;for(let o=0,a=r.length;o<a;o++){const l=i[o],c=r[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==n){const{indexStart:u,vertexStart:f,reservedIndexCount:p}=c,g=s.index,x=g.array,S=e-f;for(let _=u;_<u+p;_++)x[_]=x[_]+S;g.array.copyWithin(n,u,u+p),g.addUpdateRange(n,p),c.indexStart=n}n+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:f}=c,p=s.attributes;for(const g in p){const x=p[g],{array:S,itemSize:_}=x;S.copyWithin(e*_,u*_,(u+f)*_),x.addUpdateRange(e*_,f*_)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new Eo,o=r.index,a=r.attributes.position;for(let l=i.start,c=i.start+i.count;l<c;l++){let u=l;o&&(u=o.getX(u)),s.expandByPoint(wx.fromBufferAttribute(a,u))}i.boundingBox=s}return n.copy(i.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new Xs;this.getBoundingBoxAt(e,iS),iS.getCenter(s.center);const o=r.index,a=r.attributes.position;let l=0;for(let c=i.start,u=i.start+i.count;c<u;c++){let f=c;o&&(f=o.getX(f)),wx.fromBufferAttribute(a,f),l=Math.max(l,s.center.distanceToSquared(wx))}s.radius=Math.sqrt(l),i.boundingSphere=s}return n.copy(i.boundingSphere),n}setMatrixAt(e,n){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return n.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,n){return this.validateInstanceId(e),n.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,n){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,n){return this.validateInstanceId(e),n.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,n){return this.validateInstanceId(e),this._instanceInfo[e].visible===n?this:(this._instanceInfo[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,n){return this.validateInstanceId(e),this.validateGeometryId(n),this._instanceInfo[e].geometryIndex=n,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,n={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return n.vertexStart=r.vertexStart,n.vertexCount=r.vertexCount,n.reservedVertexCount=r.reservedVertexCount,n.indexStart=r.indexStart,n.indexCount=r.indexCount,n.reservedIndexCount=r.reservedIndexCount,n.start=r.start,n.count=r.count,n}setInstanceCount(e){const n=this._availableInstanceIds,r=this._instanceInfo;for(n.sort(kA);n[n.length-1]===r.length;)r.pop(),n.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);Xh(this._multiDrawCounts,i),Xh(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Xh(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Xh(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Xh(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new kn,this._initializeGeometry(s));const o=this.geometry;s.index&&Xh(s.index.array,o.index.array);for(const a in s.attributes)Xh(s.attributes[a].array,o.attributes[a].array)}raycast(e,n){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Us.material=this.material,Us.geometry.index=o.index,Us.geometry.attributes=o.attributes,Us.geometry.boundingBox===null&&(Us.geometry.boundingBox=new Eo),Us.geometry.boundingSphere===null&&(Us.geometry.boundingSphere=new Xs);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const c=r[a].geometryIndex,u=i[c];Us.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,Us.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Us.geometry.boundingBox),this.getBoundingSphereAt(c,Us.geometry.boundingSphere),Us.raycast(e,sS);for(let f=0,p=sS.length;f<p;f++){const g=sS[f];g.object=this,g.batchId=a,n.push(g)}sS.length=0}Us.material=null,Us.geometry.index=null,Us.geometry.attributes={},Us.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,n,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,f=this._geometryInfo,p=this.perObjectFrustumCulled,g=this._indirectTexture,x=g.image.data;p&&(Vo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),OA.setFromProjectionMatrix(Vo,e.coordinateSystem));let S=0;if(this.sortObjects){Vo.copy(this.matrixWorld).invert(),wx.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Vo),rU.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Vo);for(let E=0,M=l.length;E<M;E++)if(l[E].visible&&l[E].active){const T=l[E].geometryIndex;this.getMatrixAt(E,Vo),this.getBoundingSphereAt(T,Gh).applyMatrix4(Vo);let k=!1;if(p&&(k=!OA.intersectsSphere(Gh)),!k){const N=f[T],D=Eme.subVectors(Gh.center,wx).dot(rU);LA.push(N.start,N.count,D,E)}}const _=LA.list,b=this.customSort;b===null?_.sort(s.transparent?wme:bme):b.call(this,_,r);for(let E=0,M=_.length;E<M;E++){const T=_[E];c[S]=T.start*a,u[S]=T.count,x[S]=T.index,S++}LA.reset()}else for(let _=0,b=l.length;_<b;_++)if(l[_].visible&&l[_].active){const E=l[_].geometryIndex;let M=!1;if(p&&(this.getMatrixAt(_,Vo),this.getBoundingSphereAt(E,Gh).applyMatrix4(Vo),M=!OA.intersectsSphere(Gh)),!M){const T=f[E];c[S]=T.start*a,u[S]=T.count,x[S]=_,S++}}g.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Io extends eo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Nt(0xffffff),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const dM=new pe,fM=new pe,iU=new cn,_x=new om,oS=new Xs,DA=new pe,sU=new pe;class qf extends er{constructor(e=new kn,n=new Io){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)dM.fromBufferAttribute(n,i-1),fM.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=dM.distanceTo(fM);e.setAttribute("lineDistance",new qt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),oS.copy(r.boundingSphere),oS.applyMatrix4(i),oS.radius+=s,e.ray.intersectsSphere(oS)===!1)return;iU.copy(i).invert(),_x.copy(e.ray).applyMatrix4(iU);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,p=r.attributes.position;if(u!==null){const g=Math.max(0,o.start),x=Math.min(u.count,o.start+o.count);for(let S=g,_=x-1;S<_;S+=c){const b=u.getX(S),E=u.getX(S+1),M=aS(this,e,_x,l,b,E,S);M&&n.push(M)}if(this.isLineLoop){const S=u.getX(x-1),_=u.getX(g),b=aS(this,e,_x,l,S,_,x-1);b&&n.push(b)}}else{const g=Math.max(0,o.start),x=Math.min(p.count,o.start+o.count);for(let S=g,_=x-1;S<_;S+=c){const b=aS(this,e,_x,l,S,S+1,S);b&&n.push(b)}if(this.isLineLoop){const S=aS(this,e,_x,l,x-1,g,x-1);S&&n.push(S)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function aS(t,e,n,r,i,s,o){const a=t.geometry.attributes.position;if(dM.fromBufferAttribute(a,i),fM.fromBufferAttribute(a,s),n.distanceSqToSegment(dM,fM,DA,sU)>r)return;DA.applyMatrix4(t.matrixWorld);const c=e.ray.origin.distanceTo(DA);if(!(c<e.near||c>e.far))return{distance:c,point:sU.clone().applyMatrix4(t.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:t}}const oU=new pe,aU=new pe;class Gc extends qf{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)oU.fromBufferAttribute(n,i),aU.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+oU.distanceTo(aU);e.setAttribute("lineDistance",new qt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class W$ extends qf{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class Hk extends eo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Nt(0xffffff),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const lU=new cn,jP=new om,lS=new Xs,cS=new pe;class q$ extends er{constructor(e=new kn,n=new Hk){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),lS.copy(r.boundingSphere),lS.applyMatrix4(i),lS.radius+=s,e.ray.intersectsSphere(lS)===!1)return;lU.copy(i).invert(),jP.copy(e.ray).applyMatrix4(lU);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,f=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);for(let x=p,S=g;x<S;x++){const _=c.getX(x);cS.fromBufferAttribute(f,_),cU(cS,_,l,i,e,n,this)}}else{const p=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count);for(let x=p,S=g;x<S;x++)cS.fromBufferAttribute(f,x),cU(cS,x,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function cU(t,e,n,r,i,s,o){const a=jP.distanceSqToPoint(t);if(a<n){const l=new pe;jP.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class H$ extends oi{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Ji,this.magFilter=s!==void 0?s:Ji,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Tme extends H${constructor(e,n,r,i,s,o,a,l){super({},e,n,r,i,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class Cme extends oi{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Ts,this.minFilter=Ts,this.generateMipmaps=!1,this.needsUpdate=!0}}class IT extends oi{constructor(e,n,r,i,s,o,a,l,c,u,f,p){super(null,o,a,l,c,u,i,s,f,p),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Ime extends IT{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=il,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Rme extends IT{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,ud),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class $$ extends oi{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class $k extends oi{constructor(e,n,r,i,s,o,a,l,c,u=Np){if(u!==Np&&u!==Yp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Np&&(r=dd),r===void 0&&u===Yp&&(r=Kp),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Ts,this.minFilter=l!==void 0?l:Ts,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class ic{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],p=r[i+1]-u,g=(o-u)/p;return(i+g)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new Je:new pe);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new pe,i=[],s=[],o=[],a=new pe,l=new cn;for(let g=0;g<=e;g++){const x=g/e;i[g]=this.getTangentAt(x,new pe)}s[0]=new pe,o[0]=new pe;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),f<=c&&(c=f,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(i[g-1],i[g]),a.length()>Number.EPSILON){a.normalize();const x=Math.acos(bn(i[g-1].dot(i[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(a,x))}o[g].crossVectors(i[g],s[g])}if(n===!0){let g=Math.acos(bn(s[0].dot(s[e]),-1,1));g/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let x=1;x<=e;x++)s[x].applyMatrix4(l.makeRotationAxis(i[x],g*x)),o[x].crossVectors(i[x],s[x])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class RT extends ic{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new Je){const r=n,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,g=c-this.aY;l=p*u-g*f+this.aX,c=p*f+g*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class G$ extends RT{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Gk(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,g=(a-o)/u-(l-o)/(u+f)+(l-a)/f;p*=u,g*=u,i(o,a,p,g)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const uS=new pe,FA=new Gk,BA=new Gk,jA=new Gk;class X$ extends ic{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new pe){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(uS.subVectors(i[0],i[1]).add(i[0]),c=uS);const f=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(uS.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=uS),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let x=Math.pow(c.distanceToSquared(f),g),S=Math.pow(f.distanceToSquared(p),g),_=Math.pow(p.distanceToSquared(u),g);S<1e-4&&(S=1),x<1e-4&&(x=S),_<1e-4&&(_=S),FA.initNonuniformCatmullRom(c.x,f.x,p.x,u.x,x,S,_),BA.initNonuniformCatmullRom(c.y,f.y,p.y,u.y,x,S,_),jA.initNonuniformCatmullRom(c.z,f.z,p.z,u.z,x,S,_)}else this.curveType==="catmullrom"&&(FA.initCatmullRom(c.x,f.x,p.x,u.x,this.tension),BA.initCatmullRom(c.y,f.y,p.y,u.y,this.tension),jA.initCatmullRom(c.z,f.z,p.z,u.z,this.tension));return r.set(FA.calc(l),BA.calc(l),jA.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new pe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function uU(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function Ame(t,e){const n=1-t;return n*n*e}function Nme(t,e){return 2*(1-t)*t*e}function Pme(t,e){return t*t*e}function p0(t,e,n,r){return Ame(t,e)+Nme(t,n)+Pme(t,r)}function kme(t,e){const n=1-t;return n*n*n*e}function Ome(t,e){const n=1-t;return 3*n*n*t*e}function Lme(t,e){return 3*(1-t)*t*t*e}function Dme(t,e){return t*t*t*e}function m0(t,e,n,r,i){return kme(t,e)+Ome(t,n)+Lme(t,r)+Dme(t,i)}class Xk extends ic{constructor(e=new Je,n=new Je,r=new Je,i=new Je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Je){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(m0(e,i.x,s.x,o.x,a.x),m0(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class K$ extends ic{constructor(e=new pe,n=new pe,r=new pe,i=new pe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new pe){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(m0(e,i.x,s.x,o.x,a.x),m0(e,i.y,s.y,o.y,a.y),m0(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Kk extends ic{constructor(e=new Je,n=new Je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Je){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Je){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Y$ extends ic{constructor(e=new pe,n=new pe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new pe){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new pe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Yk extends ic{constructor(e=new Je,n=new Je,r=new Je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Je){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(p0(e,i.x,s.x,o.x),p0(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Zk extends ic{constructor(e=new pe,n=new pe,r=new pe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new pe){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(p0(e,i.x,s.x,o.x),p0(e,i.y,s.y,o.y),p0(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Jk extends ic{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Je){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(uU(a,l.x,c.x,u.x,f.x),uU(a,l.y,c.y,u.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Je().fromArray(i))}return this}}var hM=Object.freeze({__proto__:null,ArcCurve:G$,CatmullRomCurve3:X$,CubicBezierCurve:Xk,CubicBezierCurve3:K$,EllipseCurve:RT,LineCurve:Kk,LineCurve3:Y$,QuadraticBezierCurve:Yk,QuadraticBezierCurve3:Zk,SplineCurve:Jk});class Z$ extends ic{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new hM[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new hM[i.type]().fromJSON(i))}return this}}class db extends Z${constructor(e){super(),this.type="Path",this.currentPoint=new Je,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new Kk(this.currentPoint.clone(),new Je(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new Yk(this.currentPoint.clone(),new Je(e,n),new Je(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new Xk(this.currentPoint.clone(),new Je(e,n),new Je(r,i),new Je(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new Jk(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const c=new RT(e,n,r,i,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class tw extends kn{constructor(e=[new Je(0,-.5),new Je(.5,0),new Je(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=bn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/n,f=new pe,p=new Je,g=new pe,x=new pe,S=new pe;let _=0,b=0;for(let E=0;E<=e.length-1;E++)switch(E){case 0:_=e[E+1].x-e[E].x,b=e[E+1].y-e[E].y,g.x=b*1,g.y=-_,g.z=b*0,S.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:_=e[E+1].x-e[E].x,b=e[E+1].y-e[E].y,g.x=b*1,g.y=-_,g.z=b*0,x.copy(g),g.x+=S.x,g.y+=S.y,g.z+=S.z,g.normalize(),l.push(g.x,g.y,g.z),S.copy(x)}for(let E=0;E<=n;E++){const M=r+E*u*i,T=Math.sin(M),k=Math.cos(M);for(let N=0;N<=e.length-1;N++){f.x=e[N].x*T,f.y=e[N].y,f.z=e[N].x*k,o.push(f.x,f.y,f.z),p.x=E/n,p.y=N/(e.length-1),a.push(p.x,p.y);const D=l[3*N+0]*T,L=l[3*N+1],R=l[3*N+0]*k;c.push(D,L,R)}}for(let E=0;E<n;E++)for(let M=0;M<e.length-1;M++){const T=M+E*e.length,k=T,N=T+e.length,D=T+e.length+1,L=T+1;s.push(k,N,L),s.push(D,L,N)}this.setIndex(s),this.setAttribute("position",new qt(o,3)),this.setAttribute("uv",new qt(a,2)),this.setAttribute("normal",new qt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tw(e.points,e.segments,e.phiStart,e.phiLength)}}class AT extends tw{constructor(e=1,n=1,r=4,i=8){const s=new db;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new AT(e.radius,e.length,e.capSegments,e.radialSegments)}}class NT extends kn{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new pe,u=new Je;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=n;f++,p+=3){const g=r+f/n*i;c.x=e*Math.cos(g),c.y=e*Math.sin(g),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=n;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new qt(o,3)),this.setAttribute("normal",new qt(a,3)),this.setAttribute("uv",new qt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new NT(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class sv extends kn{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],f=[],p=[],g=[];let x=0;const S=[],_=r/2;let b=0;E(),o===!1&&(e>0&&M(!0),n>0&&M(!1)),this.setIndex(u),this.setAttribute("position",new qt(f,3)),this.setAttribute("normal",new qt(p,3)),this.setAttribute("uv",new qt(g,2));function E(){const T=new pe,k=new pe;let N=0;const D=(n-e)/r;for(let L=0;L<=s;L++){const R=[],A=L/s,P=A*(n-e)+e;for(let j=0;j<=i;j++){const U=j/i,B=U*l+a,$=Math.sin(B),q=Math.cos(B);k.x=P*$,k.y=-A*r+_,k.z=P*q,f.push(k.x,k.y,k.z),T.set($,D,q).normalize(),p.push(T.x,T.y,T.z),g.push(U,1-A),R.push(x++)}S.push(R)}for(let L=0;L<i;L++)for(let R=0;R<s;R++){const A=S[R][L],P=S[R+1][L],j=S[R+1][L+1],U=S[R][L+1];(e>0||R!==0)&&(u.push(A,P,U),N+=3),(n>0||R!==s-1)&&(u.push(P,j,U),N+=3)}c.addGroup(b,N,0),b+=N}function M(T){const k=x,N=new Je,D=new pe;let L=0;const R=T===!0?e:n,A=T===!0?1:-1;for(let j=1;j<=i;j++)f.push(0,_*A,0),p.push(0,A,0),g.push(.5,.5),x++;const P=x;for(let j=0;j<=i;j++){const B=j/i*l+a,$=Math.cos(B),q=Math.sin(B);D.x=R*q,D.y=_*A,D.z=R*$,f.push(D.x,D.y,D.z),p.push(0,A,0),N.x=$*.5+.5,N.y=q*.5*A+.5,g.push(N.x,N.y),x++}for(let j=0;j<i;j++){const U=k+j,B=P+j;T===!0?u.push(B,B+1,U):u.push(B+1,B,U),L+=3}c.addGroup(b,L,T===!0?1:2),b+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class PT extends sv{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new PT(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Yf extends kn{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new qt(s,3)),this.setAttribute("normal",new qt(s.slice(),3)),this.setAttribute("uv",new qt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(E){const M=new pe,T=new pe,k=new pe;for(let N=0;N<n.length;N+=3)g(n[N+0],M),g(n[N+1],T),g(n[N+2],k),l(M,T,k,E)}function l(E,M,T,k){const N=k+1,D=[];for(let L=0;L<=N;L++){D[L]=[];const R=E.clone().lerp(T,L/N),A=M.clone().lerp(T,L/N),P=N-L;for(let j=0;j<=P;j++)j===0&&L===N?D[L][j]=R:D[L][j]=R.clone().lerp(A,j/P)}for(let L=0;L<N;L++)for(let R=0;R<2*(N-L)-1;R++){const A=Math.floor(R/2);R%2===0?(p(D[L][A+1]),p(D[L+1][A]),p(D[L][A])):(p(D[L][A+1]),p(D[L+1][A+1]),p(D[L+1][A]))}}function c(E){const M=new pe;for(let T=0;T<s.length;T+=3)M.x=s[T+0],M.y=s[T+1],M.z=s[T+2],M.normalize().multiplyScalar(E),s[T+0]=M.x,s[T+1]=M.y,s[T+2]=M.z}function u(){const E=new pe;for(let M=0;M<s.length;M+=3){E.x=s[M+0],E.y=s[M+1],E.z=s[M+2];const T=_(E)/2/Math.PI+.5,k=b(E)/Math.PI+.5;o.push(T,1-k)}x(),f()}function f(){for(let E=0;E<o.length;E+=6){const M=o[E+0],T=o[E+2],k=o[E+4],N=Math.max(M,T,k),D=Math.min(M,T,k);N>.9&&D<.1&&(M<.2&&(o[E+0]+=1),T<.2&&(o[E+2]+=1),k<.2&&(o[E+4]+=1))}}function p(E){s.push(E.x,E.y,E.z)}function g(E,M){const T=E*3;M.x=e[T+0],M.y=e[T+1],M.z=e[T+2]}function x(){const E=new pe,M=new pe,T=new pe,k=new pe,N=new Je,D=new Je,L=new Je;for(let R=0,A=0;R<s.length;R+=9,A+=6){E.set(s[R+0],s[R+1],s[R+2]),M.set(s[R+3],s[R+4],s[R+5]),T.set(s[R+6],s[R+7],s[R+8]),N.set(o[A+0],o[A+1]),D.set(o[A+2],o[A+3]),L.set(o[A+4],o[A+5]),k.copy(E).add(M).add(T).divideScalar(3);const P=_(k);S(N,A+0,E,P),S(D,A+2,M,P),S(L,A+4,T,P)}}function S(E,M,T,k){k<0&&E.x===1&&(o[M]=E.x-1),T.x===0&&T.z===0&&(o[M]=k/2/Math.PI+.5)}function _(E){return Math.atan2(E.z,-E.x)}function b(E){return Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yf(e.vertices,e.indices,e.radius,e.details)}}class kT extends Yf{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new kT(e.radius,e.detail)}}const dS=new pe,fS=new pe,UA=new pe,hS=new Yo;class J$ extends kn{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(Pp*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),p={},g=[];for(let x=0;x<l;x+=3){o?(c[0]=o.getX(x),c[1]=o.getX(x+1),c[2]=o.getX(x+2)):(c[0]=x,c[1]=x+1,c[2]=x+2);const{a:S,b:_,c:b}=hS;if(S.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),b.fromBufferAttribute(a,c[2]),hS.getNormal(UA),f[0]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,f[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,f[2]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let E=0;E<3;E++){const M=(E+1)%3,T=f[E],k=f[M],N=hS[u[E]],D=hS[u[M]],L=`${T}_${k}`,R=`${k}_${T}`;R in p&&p[R]?(UA.dot(p[R].normal)<=s&&(g.push(N.x,N.y,N.z),g.push(D.x,D.y,D.z)),p[R]=null):L in p||(p[L]={index0:c[E],index1:c[M],normal:UA.clone()})}}for(const x in p)if(p[x]){const{index0:S,index1:_}=p[x];dS.fromBufferAttribute(a,S),fS.fromBufferAttribute(a,_),g.push(dS.x,dS.y,dS.z),g.push(fS.x,fS.y,fS.z)}this.setAttribute("position",new qt(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Op extends db{constructor(e){super(e),this.uuid=Ra(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new db().fromJSON(i))}return this}}const Fme={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=Q$(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,p,g;if(r&&(s=Vme(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let x=n;x<i;x+=n)f=t[x],p=t[x+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>u&&(u=p);g=Math.max(c-a,u-l),g=g!==0?32767/g:0}return fb(s,o,n,a,l,g,0),o}};function Q$(t,e,n,r,i){let s,o;if(i===Qme(t,e,n,r)>0)for(s=e;s<n;s+=r)o=dU(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=dU(s,t[s],t[s+1],o);return o&&OT(o,o.next)&&(pb(o),o=o.next),o}function Qp(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(OT(n,n.next)||ei(n.prev,n,n.next)===0)){if(pb(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function fb(t,e,n,r,i,s,o){if(!t)return;!o&&s&&Gme(t,r,i,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?jme(t,r,i,s):Bme(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),pb(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=Ume(Qp(t),e,n),fb(t,e,n,r,i,s,2)):o===2&&zme(t,e,n,r,i,s):fb(Qp(t),e,n,r,i,s,1);break}}}function Bme(t){const e=t.prev,n=t,r=t.next;if(ei(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,g=a>l?a>c?a:c:l>c?l:c;let x=r.next;for(;x!==e;){if(x.x>=u&&x.x<=p&&x.y>=f&&x.y<=g&&ey(i,a,s,l,o,c,x.x,x.y)&&ei(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function jme(t,e,n,r){const i=t.prev,s=t,o=t.next;if(ei(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,f=s.y,p=o.y,g=a<l?a<c?a:c:l<c?l:c,x=u<f?u<p?u:p:f<p?f:p,S=a>l?a>c?a:c:l>c?l:c,_=u>f?u>p?u:p:f>p?f:p,b=UP(g,x,e,n,r),E=UP(S,_,e,n,r);let M=t.prevZ,T=t.nextZ;for(;M&&M.z>=b&&T&&T.z<=E;){if(M.x>=g&&M.x<=S&&M.y>=x&&M.y<=_&&M!==i&&M!==o&&ey(a,u,l,f,c,p,M.x,M.y)&&ei(M.prev,M,M.next)>=0||(M=M.prevZ,T.x>=g&&T.x<=S&&T.y>=x&&T.y<=_&&T!==i&&T!==o&&ey(a,u,l,f,c,p,T.x,T.y)&&ei(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;M&&M.z>=b;){if(M.x>=g&&M.x<=S&&M.y>=x&&M.y<=_&&M!==i&&M!==o&&ey(a,u,l,f,c,p,M.x,M.y)&&ei(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;T&&T.z<=E;){if(T.x>=g&&T.x<=S&&T.y>=x&&T.y<=_&&T!==i&&T!==o&&ey(a,u,l,f,c,p,T.x,T.y)&&ei(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function Ume(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!OT(i,s)&&e6(i,r,r.next,s)&&hb(i,s)&&hb(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),pb(r),pb(r.next),r=t=s),r=r.next}while(r!==t);return Qp(r)}function zme(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Yme(o,a)){let l=t6(o,a);o=Qp(o,o.next),l=Qp(l,l.next),fb(o,e,n,r,i,s,0),fb(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function Vme(t,e,n,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=Q$(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Kme(c));for(i.sort(Wme),s=0;s<i.length;s++)n=qme(i[s],n);return n}function Wme(t,e){return t.x-e.x}function qme(t,e){const n=Hme(t,e);if(!n)return e;const r=t6(n,t);return Qp(r,r.next),Qp(n,n.next)}function Hme(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const p=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=s&&p>r&&(r=p,i=n.x<n.next.x?n:n.next,p===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,f;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&ey(o<c?s:r,o,l,c,o<c?r:s,o,n.x,n.y)&&(f=Math.abs(o-n.y)/(s-n.x),hb(n,t)&&(f<u||f===u&&(n.x>i.x||n.x===i.x&&$me(i,n)))&&(i=n,u=f)),n=n.next;while(n!==a);return i}function $me(t,e){return ei(t.prev,t,e.prev)<0&&ei(e.next,t,t.next)<0}function Gme(t,e,n,r){let i=t;do i.z===0&&(i.z=UP(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Xme(i)}function Xme(t){let e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function UP(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&0xff00ff,t=(t|t<<4)&0xf0f0f0f,t=(t|t<<2)&0x33333333,t=(t|t<<1)&0x55555555,e=(e|e<<8)&0xff00ff,e=(e|e<<4)&0xf0f0f0f,e=(e|e<<2)&0x33333333,e=(e|e<<1)&0x55555555,t|e<<1}function Kme(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function ey(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function Yme(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Zme(t,e)&&(hb(t,e)&&hb(e,t)&&Jme(t,e)&&(ei(t.prev,t,e.prev)||ei(t,e.prev,e))||OT(t,e)&&ei(t.prev,t,t.next)>0&&ei(e.prev,e,e.next)>0)}function ei(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function OT(t,e){return t.x===e.x&&t.y===e.y}function e6(t,e,n,r){const i=mS(ei(t,e,n)),s=mS(ei(t,e,r)),o=mS(ei(n,r,t)),a=mS(ei(n,r,e));return!!(i!==s&&o!==a||i===0&&pS(t,n,e)||s===0&&pS(t,r,e)||o===0&&pS(n,t,r)||a===0&&pS(n,e,r))}function pS(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function mS(t){return t>0?1:t<0?-1:0}function Zme(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&e6(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function hb(t,e){return ei(t.prev,t,t.next)<0?ei(t,e,t.next)>=0&&ei(t,t.prev,e)>=0:ei(t,e,t.prev)<0||ei(t,t.next,e)<0}function Jme(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function t6(t,e){const n=new zP(t.i,t.x,t.y),r=new zP(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function dU(t,e,n,r){const i=new zP(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function pb(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function zP(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Qme(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class Fc{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Fc.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];fU(e),hU(r,e);let o=e.length;n.forEach(fU);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,hU(r,n[l]);const a=Fme.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function fU(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function hU(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class LT extends kn{constructor(e=new Op([new Je(.5,.5),new Je(-.5,.5),new Je(-.5,-.5),new Je(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new qt(i,3)),this.setAttribute("uv",new qt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,g=n.bevelThickness!==void 0?n.bevelThickness:.2,x=n.bevelSize!==void 0?n.bevelSize:g-.1,S=n.bevelOffset!==void 0?n.bevelOffset:0,_=n.bevelSegments!==void 0?n.bevelSegments:3;const b=n.extrudePath,E=n.UVGenerator!==void 0?n.UVGenerator:ege;let M,T=!1,k,N,D,L;b&&(M=b.getSpacedPoints(u),T=!0,p=!1,k=b.computeFrenetFrames(u,!1),N=new pe,D=new pe,L=new pe),p||(_=0,g=0,x=0,S=0);const R=a.extractPoints(c);let A=R.shape;const P=R.holes;if(!Fc.isClockWise(A)){A=A.reverse();for(let ve=0,_e=P.length;ve<_e;ve++){const se=P[ve];Fc.isClockWise(se)&&(P[ve]=se.reverse())}}const U=Fc.triangulateShape(A,P),B=A;for(let ve=0,_e=P.length;ve<_e;ve++){const se=P[ve];A=A.concat(se)}function $(ve,_e,se){return _e||console.error("THREE.ExtrudeGeometry: vec does not exist"),ve.clone().addScaledVector(_e,se)}const q=A.length,te=U.length;function W(ve,_e,se){let $e,je,Ze;const le=ve.x-_e.x,ge=ve.y-_e.y,fe=se.x-ve.x,Q=se.y-ve.y,G=le*le+ge*ge,me=le*Q-ge*fe;if(Math.abs(me)>Number.EPSILON){const he=Math.sqrt(G),Te=Math.sqrt(fe*fe+Q*Q),Oe=_e.x-ge/he,Qe=_e.y+le/he,Ye=se.x-Q/Te,at=se.y+fe/Te,Ft=((Ye-Oe)*Q-(at-Qe)*fe)/(le*Q-ge*fe);$e=Oe+le*Ft-ve.x,je=Qe+ge*Ft-ve.y;const et=$e*$e+je*je;if(et<=2)return new Je($e,je);Ze=Math.sqrt(et/2)}else{let he=!1;le>Number.EPSILON?fe>Number.EPSILON&&(he=!0):le<-Number.EPSILON?fe<-Number.EPSILON&&(he=!0):Math.sign(ge)===Math.sign(Q)&&(he=!0),he?($e=-ge,je=le,Ze=Math.sqrt(G)):($e=le,je=ge,Ze=Math.sqrt(G/2))}return new Je($e/Ze,je/Ze)}const Z=[];for(let ve=0,_e=B.length,se=_e-1,$e=ve+1;ve<_e;ve++,se++,$e++)se===_e&&(se=0),$e===_e&&($e=0),Z[ve]=W(B[ve],B[se],B[$e]);const J=[];let Y,oe=Z.concat();for(let ve=0,_e=P.length;ve<_e;ve++){const se=P[ve];Y=[];for(let $e=0,je=se.length,Ze=je-1,le=$e+1;$e<je;$e++,Ze++,le++)Ze===je&&(Ze=0),le===je&&(le=0),Y[$e]=W(se[$e],se[Ze],se[le]);J.push(Y),oe=oe.concat(Y)}for(let ve=0;ve<_;ve++){const _e=ve/_,se=g*Math.cos(_e*Math.PI/2),$e=x*Math.sin(_e*Math.PI/2)+S;for(let je=0,Ze=B.length;je<Ze;je++){const le=$(B[je],Z[je],$e);be(le.x,le.y,-se)}for(let je=0,Ze=P.length;je<Ze;je++){const le=P[je];Y=J[je];for(let ge=0,fe=le.length;ge<fe;ge++){const Q=$(le[ge],Y[ge],$e);be(Q.x,Q.y,-se)}}}const ce=x+S;for(let ve=0;ve<q;ve++){const _e=p?$(A[ve],oe[ve],ce):A[ve];T?(D.copy(k.normals[0]).multiplyScalar(_e.x),N.copy(k.binormals[0]).multiplyScalar(_e.y),L.copy(M[0]).add(D).add(N),be(L.x,L.y,L.z)):be(_e.x,_e.y,0)}for(let ve=1;ve<=u;ve++)for(let _e=0;_e<q;_e++){const se=p?$(A[_e],oe[_e],ce):A[_e];T?(D.copy(k.normals[ve]).multiplyScalar(se.x),N.copy(k.binormals[ve]).multiplyScalar(se.y),L.copy(M[ve]).add(D).add(N),be(L.x,L.y,L.z)):be(se.x,se.y,f/u*ve)}for(let ve=_-1;ve>=0;ve--){const _e=ve/_,se=g*Math.cos(_e*Math.PI/2),$e=x*Math.sin(_e*Math.PI/2)+S;for(let je=0,Ze=B.length;je<Ze;je++){const le=$(B[je],Z[je],$e);be(le.x,le.y,f+se)}for(let je=0,Ze=P.length;je<Ze;je++){const le=P[je];Y=J[je];for(let ge=0,fe=le.length;ge<fe;ge++){const Q=$(le[ge],Y[ge],$e);T?be(Q.x,Q.y+M[u-1].y,M[u-1].x+se):be(Q.x,Q.y,f+se)}}}ie(),ue();function ie(){const ve=i.length/3;if(p){let _e=0,se=q*_e;for(let $e=0;$e<te;$e++){const je=U[$e];we(je[2]+se,je[1]+se,je[0]+se)}_e=u+_*2,se=q*_e;for(let $e=0;$e<te;$e++){const je=U[$e];we(je[0]+se,je[1]+se,je[2]+se)}}else{for(let _e=0;_e<te;_e++){const se=U[_e];we(se[2],se[1],se[0])}for(let _e=0;_e<te;_e++){const se=U[_e];we(se[0]+q*u,se[1]+q*u,se[2]+q*u)}}r.addGroup(ve,i.length/3-ve,0)}function ue(){const ve=i.length/3;let _e=0;de(B,_e),_e+=B.length;for(let se=0,$e=P.length;se<$e;se++){const je=P[se];de(je,_e),_e+=je.length}r.addGroup(ve,i.length/3-ve,1)}function de(ve,_e){let se=ve.length;for(;--se>=0;){const $e=se;let je=se-1;je<0&&(je=ve.length-1);for(let Ze=0,le=u+_*2;Ze<le;Ze++){const ge=q*Ze,fe=q*(Ze+1),Q=_e+$e+ge,G=_e+je+ge,me=_e+je+fe,he=_e+$e+fe;Ce(Q,G,me,he)}}}function be(ve,_e,se){l.push(ve),l.push(_e),l.push(se)}function we(ve,_e,se){Ie(ve),Ie(_e),Ie(se);const $e=i.length/3,je=E.generateTopUV(r,i,$e-3,$e-2,$e-1);Fe(je[0]),Fe(je[1]),Fe(je[2])}function Ce(ve,_e,se,$e){Ie(ve),Ie(_e),Ie($e),Ie(_e),Ie(se),Ie($e);const je=i.length/3,Ze=E.generateSideWallUV(r,i,je-6,je-3,je-2,je-1);Fe(Ze[0]),Fe(Ze[1]),Fe(Ze[3]),Fe(Ze[1]),Fe(Ze[2]),Fe(Ze[3])}function Ie(ve){i.push(l[ve*3+0]),i.push(l[ve*3+1]),i.push(l[ve*3+2])}function Fe(ve){s.push(ve.x),s.push(ve.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return tge(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new hM[i.type]().fromJSON(i)),new LT(r,e.options)}}const ege={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Je(s,o),new Je(a,l),new Je(c,u)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],f=e[r*3+2],p=e[i*3],g=e[i*3+1],x=e[i*3+2],S=e[s*3],_=e[s*3+1],b=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Je(o,1-l),new Je(c,1-f),new Je(p,1-x),new Je(S,1-b)]:[new Je(a,1-l),new Je(u,1-f),new Je(g,1-x),new Je(_,1-b)]}};function tge(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class DT extends Yf{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new DT(e.radius,e.detail)}}class nw extends Yf{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new nw(e.radius,e.detail)}}class ov extends kn{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,f=e/a,p=n/l,g=[],x=[],S=[],_=[];for(let b=0;b<u;b++){const E=b*p-o;for(let M=0;M<c;M++){const T=M*f-s;x.push(T,-E,0),S.push(0,0,1),_.push(M/a),_.push(1-b/l)}}for(let b=0;b<l;b++)for(let E=0;E<a;E++){const M=E+c*b,T=E+c*(b+1),k=E+1+c*(b+1),N=E+1+c*b;g.push(M,T,N),g.push(T,k,N)}this.setIndex(g),this.setAttribute("position",new qt(x,3)),this.setAttribute("normal",new qt(S,3)),this.setAttribute("uv",new qt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ov(e.width,e.height,e.widthSegments,e.heightSegments)}}class FT extends kn{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let f=e;const p=(n-e)/i,g=new pe,x=new Je;for(let S=0;S<=i;S++){for(let _=0;_<=r;_++){const b=s+_/r*o;g.x=f*Math.cos(b),g.y=f*Math.sin(b),l.push(g.x,g.y,g.z),c.push(0,0,1),x.x=(g.x/n+1)/2,x.y=(g.y/n+1)/2,u.push(x.x,x.y)}f+=p}for(let S=0;S<i;S++){const _=S*(r+1);for(let b=0;b<r;b++){const E=b+_,M=E,T=E+r+1,k=E+r+2,N=E+1;a.push(M,T,N),a.push(T,k,N)}}this.setIndex(a),this.setAttribute("position",new qt(l,3)),this.setAttribute("normal",new qt(c,3)),this.setAttribute("uv",new qt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new FT(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class BT extends kn{constructor(e=new Op([new Je(0,.5),new Je(-.5,-.5),new Je(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new qt(i,3)),this.setAttribute("normal",new qt(s,3)),this.setAttribute("uv",new qt(o,2));function c(u){const f=i.length/3,p=u.extractPoints(n);let g=p.shape;const x=p.holes;Fc.isClockWise(g)===!1&&(g=g.reverse());for(let _=0,b=x.length;_<b;_++){const E=x[_];Fc.isClockWise(E)===!0&&(x[_]=E.reverse())}const S=Fc.triangulateShape(g,x);for(let _=0,b=x.length;_<b;_++){const E=x[_];g=g.concat(E)}for(let _=0,b=g.length;_<b;_++){const E=g[_];i.push(E.x,E.y,0),s.push(0,0,1),o.push(E.x,E.y)}for(let _=0,b=S.length;_<b;_++){const E=S[_],M=E[0]+f,T=E[1]+f,k=E[2]+f;r.push(M,T,k),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return nge(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new BT(r,e.curveSegments)}}function nge(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class rw extends kn{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new pe,p=new pe,g=[],x=[],S=[],_=[];for(let b=0;b<=r;b++){const E=[],M=b/r;let T=0;b===0&&o===0?T=.5/n:b===r&&l===Math.PI&&(T=-.5/n);for(let k=0;k<=n;k++){const N=k/n;f.x=-e*Math.cos(i+N*s)*Math.sin(o+M*a),f.y=e*Math.cos(o+M*a),f.z=e*Math.sin(i+N*s)*Math.sin(o+M*a),x.push(f.x,f.y,f.z),p.copy(f).normalize(),S.push(p.x,p.y,p.z),_.push(N+T,1-M),E.push(c++)}u.push(E)}for(let b=0;b<r;b++)for(let E=0;E<n;E++){const M=u[b][E+1],T=u[b][E],k=u[b+1][E],N=u[b+1][E+1];(b!==0||o>0)&&g.push(M,T,N),(b!==r-1||l<Math.PI)&&g.push(T,k,N)}this.setIndex(g),this.setAttribute("position",new qt(x,3)),this.setAttribute("normal",new qt(S,3)),this.setAttribute("uv",new qt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rw(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class jT extends Yf{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new jT(e.radius,e.detail)}}class UT extends kn{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new pe,f=new pe,p=new pe;for(let g=0;g<=r;g++)for(let x=0;x<=i;x++){const S=x/i*s,_=g/r*Math.PI*2;f.x=(e+n*Math.cos(_))*Math.cos(S),f.y=(e+n*Math.cos(_))*Math.sin(S),f.z=n*Math.sin(_),a.push(f.x,f.y,f.z),u.x=e*Math.cos(S),u.y=e*Math.sin(S),p.subVectors(f,u).normalize(),l.push(p.x,p.y,p.z),c.push(x/i),c.push(g/r)}for(let g=1;g<=r;g++)for(let x=1;x<=i;x++){const S=(i+1)*g+x-1,_=(i+1)*(g-1)+x-1,b=(i+1)*(g-1)+x,E=(i+1)*g+x;o.push(S,_,E),o.push(_,b,E)}this.setIndex(o),this.setAttribute("position",new qt(a,3)),this.setAttribute("normal",new qt(l,3)),this.setAttribute("uv",new qt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new UT(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class zT extends kn{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],f=new pe,p=new pe,g=new pe,x=new pe,S=new pe,_=new pe,b=new pe;for(let M=0;M<=r;++M){const T=M/r*s*Math.PI*2;E(T,s,o,e,g),E(T+.01,s,o,e,x),_.subVectors(x,g),b.addVectors(x,g),S.crossVectors(_,b),b.crossVectors(S,_),S.normalize(),b.normalize();for(let k=0;k<=i;++k){const N=k/i*Math.PI*2,D=-n*Math.cos(N),L=n*Math.sin(N);f.x=g.x+(D*b.x+L*S.x),f.y=g.y+(D*b.y+L*S.y),f.z=g.z+(D*b.z+L*S.z),l.push(f.x,f.y,f.z),p.subVectors(f,g).normalize(),c.push(p.x,p.y,p.z),u.push(M/r),u.push(k/i)}}for(let M=1;M<=r;M++)for(let T=1;T<=i;T++){const k=(i+1)*(M-1)+(T-1),N=(i+1)*M+(T-1),D=(i+1)*M+T,L=(i+1)*(M-1)+T;a.push(k,N,L),a.push(N,D,L)}this.setIndex(a),this.setAttribute("position",new qt(l,3)),this.setAttribute("normal",new qt(c,3)),this.setAttribute("uv",new qt(u,2));function E(M,T,k,N,D){const L=Math.cos(M),R=Math.sin(M),A=k/T*M,P=Math.cos(A);D.x=N*(2+P)*.5*L,D.y=N*(2+P)*R*.5,D.z=N*Math.sin(A)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zT(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class VT extends kn{constructor(e=new Zk(new pe(-1,-1,0),new pe(-1,1,0),new pe(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new pe,l=new pe,c=new Je;let u=new pe;const f=[],p=[],g=[],x=[];S(),this.setIndex(x),this.setAttribute("position",new qt(f,3)),this.setAttribute("normal",new qt(p,3)),this.setAttribute("uv",new qt(g,2));function S(){for(let M=0;M<n;M++)_(M);_(s===!1?n:0),E(),b()}function _(M){u=e.getPointAt(M/n,u);const T=o.normals[M],k=o.binormals[M];for(let N=0;N<=i;N++){const D=N/i*Math.PI*2,L=Math.sin(D),R=-Math.cos(D);l.x=R*T.x+L*k.x,l.y=R*T.y+L*k.y,l.z=R*T.z+L*k.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,f.push(a.x,a.y,a.z)}}function b(){for(let M=1;M<=n;M++)for(let T=1;T<=i;T++){const k=(i+1)*(M-1)+(T-1),N=(i+1)*M+(T-1),D=(i+1)*M+T,L=(i+1)*(M-1)+T;x.push(k,N,L),x.push(N,D,L)}}function E(){for(let M=0;M<=n;M++)for(let T=0;T<=i;T++)c.x=M/n,c.y=T/i,g.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new VT(new hM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class n6 extends kn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new pe,s=new pe;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],p=f.start,g=f.count;for(let x=p,S=p+g;x<S;x+=3)for(let _=0;_<3;_++){const b=a.getX(x+_),E=a.getX(x+(_+1)%3);i.fromBufferAttribute(o,b),s.fromBufferAttribute(o,E),pU(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),pU(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new qt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function pU(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var mU=Object.freeze({__proto__:null,BoxGeometry:am,CapsuleGeometry:AT,CircleGeometry:NT,ConeGeometry:PT,CylinderGeometry:sv,DodecahedronGeometry:kT,EdgesGeometry:J$,ExtrudeGeometry:LT,IcosahedronGeometry:DT,LatheGeometry:tw,OctahedronGeometry:nw,PlaneGeometry:ov,PolyhedronGeometry:Yf,RingGeometry:FT,ShapeGeometry:BT,SphereGeometry:rw,TetrahedronGeometry:jT,TorusGeometry:UT,TorusKnotGeometry:zT,TubeGeometry:VT,WireframeGeometry:n6});class r6 extends eo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Nt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class i6 extends ec{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Qk extends eo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Nt(0xffffff),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xf,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oa,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class s6 extends Qk{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return bn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Nt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Nt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Nt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class o6 extends eo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Nt(0xffffff),this.specular=new Nt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xf,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oa,this.combine=Kb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class a6 extends eo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Nt(0xffffff),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xf,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class l6 extends eo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xf,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class c6 extends eo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Nt(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xf,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oa,this.combine=Kb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eO extends eo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=x$,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class tO extends eo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class u6 extends eo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Nt(0xffffff),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xf,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class d6 extends Io{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Mp(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function f6(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function h6(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function VP(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function nO(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function rge(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],p=[];for(let g=0;g<c.times.length;++g){const x=c.times[g]*i;if(!(x<n||x>=r)){f.push(c.times[g]);for(let S=0;S<u;++S)p.push(c.values[g*u+S])}}f.length!==0&&(c.times=Mp(f,c.times.constructor),c.values=Mp(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function ige(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(b){return b.name===a.name&&b.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let p=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);const x=a.times.length-1;let S;if(s<=a.times[0]){const b=u,E=f-u;S=a.values.slice(b,E)}else if(s>=a.times[x]){const b=x*f+u,E=b+f-u;S=a.values.slice(b,E)}else{const b=a.createInterpolant(),E=u,M=f-u;b.evaluate(s),S=b.resultBuffer.slice(E,M)}l==="quaternion"&&new Gs().fromArray(S).normalize().conjugate().toArray(S);const _=c.times.length;for(let b=0;b<_;++b){const E=b*g+p;if(l==="quaternion")Gs.multiplyQuaternionsFlat(c.values,E,S,0,c.values,E);else{const M=g-p*2;for(let T=0;T<M;++T)c.values[E+T]-=S[T]}}}return t.blendMode=Fk,t}const sge={convertArray:Mp,isTypedArray:f6,getKeyframeOrder:h6,sortedArray:VP,flattenJSON:nO,subclip:rge,makeClipAdditive:ige};class iw{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class p6 extends iw{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:_p,endingEnd:_p}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Sp:s=e,a=2*n-r;break;case ob:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Sp:o=e,l=2*r-n;break;case ob:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const c=(r-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,g=this._weightNext,x=(r-n)/(i-n),S=x*x,_=S*x,b=-p*_+2*p*S-p*x,E=(1+p)*_+(-1.5-2*p)*S+(-.5+p)*x+1,M=(-1-g)*_+(1.5+g)*S+.5*x,T=g*_-g*S;for(let k=0;k!==a;++k)s[k]=b*o[u+k]+E*o[c+k]+M*o[l+k]+T*o[f+k];return s}}class rO extends iw{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-n)/(i-n),f=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*u;return s}}class m6 extends iw{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class sc{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Mp(n,this.TimeBufferType),this.values=Mp(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Mp(e.times,Array),values:Mp(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new m6(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new p6(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case sb:n=this.InterpolantFactoryMethodDiscrete;break;case uM:n=this.InterpolantFactoryMethodLinear;break;case e1:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sb;case this.InterpolantFactoryMethodLinear:return uM;case this.InterpolantFactoryMethodSmooth:return e1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&f6(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===e1,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const f=a*r,p=f-r,g=f+r;for(let x=0;x!==r;++x){const S=n[f+x];if(S!==n[p+x]||S!==n[g+x]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,p=o*r;for(let g=0;g!==r;++g)n[p+g]=n[f+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}sc.prototype.TimeBufferType=Float32Array;sc.prototype.ValueBufferType=Float32Array;sc.prototype.DefaultInterpolation=uM;class lm extends sc{constructor(e,n,r){super(e,n,r)}}lm.prototype.ValueTypeName="bool";lm.prototype.ValueBufferType=Array;lm.prototype.DefaultInterpolation=sb;lm.prototype.InterpolantFactoryMethodLinear=void 0;lm.prototype.InterpolantFactoryMethodSmooth=void 0;class iO extends sc{}iO.prototype.ValueTypeName="color";class mb extends sc{}mb.prototype.ValueTypeName="number";class g6 extends iw{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let c=e*a;for(let u=c+a;c!==u;c+=4)Gs.slerpFlat(s,0,o,c-a,o,c,l);return s}}class sw extends sc{InterpolantFactoryMethodLinear(e){return new g6(this.times,this.values,this.getValueSize(),e)}}sw.prototype.ValueTypeName="quaternion";sw.prototype.InterpolantFactoryMethodSmooth=void 0;class cm extends sc{constructor(e,n,r){super(e,n,r)}}cm.prototype.ValueTypeName="string";cm.prototype.ValueBufferType=Array;cm.prototype.DefaultInterpolation=sb;cm.prototype.InterpolantFactoryMethodLinear=void 0;cm.prototype.InterpolantFactoryMethodSmooth=void 0;class gb extends sc{}gb.prototype.ValueTypeName="vector";class yb{constructor(e="",n=-1,r=[],i=wT){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Ra(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(age(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(sc.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=h6(l);l=VP(l,1,u),c=VP(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new mb(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let p=i[f];p||(i[f]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,p,g,x,S){if(g.length!==0){const _=[],b=[];nO(g,_,b,x),_.length!==0&&S.push(new f(p,_,b))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const g={};let x;for(x=0;x<p.length;x++)if(p[x].morphTargets)for(let S=0;S<p[x].morphTargets.length;S++)g[p[x].morphTargets[S]]=-1;for(const S in g){const _=[],b=[];for(let E=0;E!==p[x].morphTargets.length;++E){const M=p[x];_.push(M.time),b.push(M.morphTarget===S?1:0)}i.push(new mb(".morphTargetInfluence["+S+"]",_,b))}l=g.length*o}else{const g=".bones["+n[f].name+"]";r(gb,g+".position",p,"pos",i),r(sw,g+".quaternion",p,"rot",i),r(gb,g+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function oge(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return mb;case"vector":case"vector2":case"vector3":case"vector4":return gb;case"color":return iO;case"quaternion":return sw;case"bool":case"boolean":return lm;case"string":return cm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function age(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=oge(t.type);if(t.times===void 0){const n=[],r=[];nO(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Xu={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class sO{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,p=c.length;f<p;f+=2){const g=c[f],x=c[f+1];if(g.global&&(g.lastIndex=0),g.test(u))return x}return null}}}const y6=new sO;class oa{constructor(e){this.manager=e!==void 0?e:y6,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}oa.DEFAULT_MATERIAL_NAME="__DEFAULT";const Bu={};class lge extends Error{constructor(e,n){super(e),this.response=n}}class fd extends oa{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Xu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Bu[e]!==void 0){Bu[e].push({onLoad:n,onProgress:r,onError:i});return}Bu[e]=[],Bu[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Bu[e],f=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),g=p?parseInt(p):0,x=g!==0;let S=0;const _=new ReadableStream({start(b){E();function E(){f.read().then(({done:M,value:T})=>{if(M)b.close();else{S+=T.byteLength;const k=new ProgressEvent("progress",{lengthComputable:x,loaded:S,total:g});for(let N=0,D=u.length;N<D;N++){const L=u[N];L.onProgress&&L.onProgress(k)}b.enqueue(T),E()}},M=>{b.error(M)})}}});return new Response(_)}else throw new lge(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,g=new TextDecoder(p);return c.arrayBuffer().then(x=>g.decode(x))}}}).then(c=>{Xu.add(e,c);const u=Bu[e];delete Bu[e];for(let f=0,p=u.length;f<p;f++){const g=u[f];g.onLoad&&g.onLoad(c)}}).catch(c=>{const u=Bu[e];if(u===void 0)throw this.manager.itemError(e),c;delete Bu[e];for(let f=0,p=u.length;f<p;f++){const g=u[f];g.onError&&g.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class cge extends oa{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new fd(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=yb.parse(e[r]);n.push(i)}return n}}class uge extends oa{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new IT,l=new fd(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(p){const g=s.parse(p,!0);o[f]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},c+=1,c===6&&(g.mipmapCount===1&&(a.minFilter=Ji),a.image=o,a.format=g.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)u(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const g=p.mipmaps.length/p.mipmapCount;for(let x=0;x<g;x++){o[x]={mipmaps:[]};for(let S=0;S<p.mipmapCount;S++)o[x].mipmaps.push(p.mipmaps[x*p.mipmapCount+S]),o[x].format=p.format,o[x].width=p.width,o[x].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Ji),a.format=p.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class vb extends oa{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=ub("img");function l(){u(),Xu.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(f){u(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class dge extends oa{constructor(e){super(e)}load(e,n,r,i){const s=new Qb;s.colorSpace=Ko;const o=new vb(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class fge extends oa{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Dc,a=new fd(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:il,o.wrapT=c.wrapT!==void 0?c.wrapT:il,o.magFilter=c.magFilter!==void 0?c.magFilter:Ji,o.minFilter=c.minFilter!==void 0?c.minFilter:Ji,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Ac),c.mipmapCount===1&&(o.minFilter=Ji),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c)},r,i),o}}class hge extends oa{constructor(e){super(e)}load(e,n,r,i){const s=new oi,o=new vb(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class Zf extends er{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Nt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class v6 extends Zf{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(er.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Nt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const zA=new cn,gU=new pe,yU=new pe;class oO{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Je(512,512),this.map=null,this.mapPass=null,this.matrix=new cn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ew,this._frameExtents=new Je(1,1),this._viewportCount=1,this._viewports=[new Qn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;gU.setFromMatrixPosition(e.matrixWorld),n.position.copy(gU),yU.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(yU),n.updateMatrixWorld(),zA.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zA),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(zA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class pge extends oO{constructor(){super(new wi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Uy*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class x6 extends Zf{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(er.DEFAULT_UP),this.updateMatrix(),this.target=new er,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new pge}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const vU=new cn,Sx=new pe,VA=new pe;class mge extends oO{constructor(){super(new wi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Je(4,2),this._viewportCount=6,this._viewports=[new Qn(2,1,1,1),new Qn(0,1,1,1),new Qn(3,1,1,1),new Qn(1,1,1,1),new Qn(3,0,1,1),new Qn(1,0,1,1)],this._cubeDirections=[new pe(1,0,0),new pe(-1,0,0),new pe(0,0,1),new pe(0,0,-1),new pe(0,1,0),new pe(0,-1,0)],this._cubeUps=[new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,0,1),new pe(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Sx.setFromMatrixPosition(e.matrixWorld),r.position.copy(Sx),VA.copy(r.position),VA.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(VA),r.updateMatrixWorld(),i.makeTranslation(-Sx.x,-Sx.y,-Sx.z),vU.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vU)}}class b6 extends Zf{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new mge}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class td extends Jb{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class gge extends oO{constructor(){super(new td(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class w6 extends Zf{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(er.DEFAULT_UP),this.updateMatrix(),this.target=new er,this.shadow=new gge}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class _6 extends Zf{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class S6 extends Zf{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class E6{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new pe)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class M6 extends Zf{constructor(e=new E6,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class WT extends oa{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new fd(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Nt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Nt().setHex(o.value);break;case"v2":i.uniforms[s].value=new Je().fromArray(o.value);break;case"v3":i.uniforms[s].value=new pe().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Qn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new _n().fromArray(o.value);break;case"m4":i.uniforms[s].value=new cn().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Je().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Je().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return WT.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:r6,SpriteMaterial:Wk,RawShaderMaterial:i6,ShaderMaterial:ec,PointsMaterial:Hk,MeshPhysicalMaterial:s6,MeshStandardMaterial:Qk,MeshPhongMaterial:o6,MeshToonMaterial:a6,MeshNormalMaterial:l6,MeshLambertMaterial:c6,MeshDepthMaterial:eO,MeshDistanceMaterial:tO,MeshBasicMaterial:Kf,MeshMatcapMaterial:u6,LineDashedMaterial:d6,LineBasicMaterial:Io,Material:eo};return new n[e]}}class WP{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class T6 extends kn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class C6 extends oa{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new fd(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(g,x){if(n[x]!==void 0)return n[x];const _=g.interleavedBuffers[x],b=s(g,_.buffer),E=Jg(_.type,b),M=new TT(E,_.stride);return M.uuid=_.uuid,n[x]=M,M}function s(g,x){if(r[x]!==void 0)return r[x];const _=g.arrayBuffers[x],b=new Uint32Array(_).buffer;return r[x]=b,b}const o=e.isInstancedBufferGeometry?new T6:new kn,a=e.data.index;if(a!==void 0){const g=Jg(a.type,a.array);o.setIndex(new vr(g,1))}const l=e.data.attributes;for(const g in l){const x=l[g];let S;if(x.isInterleavedBufferAttribute){const _=i(e.data,x.data);S=new Jp(_,x.itemSize,x.offset,x.normalized)}else{const _=Jg(x.type,x.array),b=x.isInstancedBufferAttribute?Vy:vr;S=new b(_,x.itemSize,x.normalized)}x.name!==void 0&&(S.name=x.name),x.usage!==void 0&&S.setUsage(x.usage),o.setAttribute(g,S)}const c=e.data.morphAttributes;if(c)for(const g in c){const x=c[g],S=[];for(let _=0,b=x.length;_<b;_++){const E=x[_];let M;if(E.isInterleavedBufferAttribute){const T=i(e.data,E.data);M=new Jp(T,E.itemSize,E.offset,E.normalized)}else{const T=Jg(E.type,E.array);M=new vr(T,E.itemSize,E.normalized)}E.name!==void 0&&(M.name=E.name),S.push(M)}o.morphAttributes[g]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let g=0,x=f.length;g!==x;++g){const S=f[g];o.addGroup(S.start,S.count,S.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const g=new pe;p.center!==void 0&&g.fromArray(p.center),o.boundingSphere=new Xs(g,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class yge extends oa{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?WP.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new fd(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?WP.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new fd(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),n!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Op().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new CT().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new C6;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in mU?a=mU[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new WT;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=yb.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:Jg(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new sO(n);s=new vb(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const g=[];for(let x=0,S=p.length;x<S;x++){const _=p[x],b=a(_);b!==null&&(b instanceof HTMLImageElement?g.push(b):g.push(new Dc(b.data,b.width,b.height)))}i[f.uuid]=new Ep(g)}else{const g=a(f.url);i[f.uuid]=new Ep(g)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Jg(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new vb(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,p=c.length;f<p;f++){const g=c[f],x=await s(g);x!==null&&(x instanceof HTMLImageElement?u.push(x):u.push(new Dc(x.data,x.width,x.height)))}r[l.uuid]=new Ep(u)}else{const u=await s(l.url);r[l.uuid]=new Ep(u)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new Qb,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Dc:u=new oi,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,vge)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],xU),u.wrapT=r(a.wrap[1],xU)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,bU)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,bU)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,n,r,i,s){let o;function a(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const g=[];for(let x=0,S=p.length;x<S;x++){const _=p[x];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),g.push(r[_])}return g}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let u,f;switch(e.type){case"Scene":o=new Vk,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Nt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new MT(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new ET(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new wi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new td(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new _6(e.color,e.intensity);break;case"DirectionalLight":o=new w6(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new b6(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new S6(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new x6(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new v6(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new M6().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new U$(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new ji(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const p=e.count,g=e.instanceMatrix,x=e.instanceColor;o=new z$(u,f,p),o.instanceMatrix=new Vy(new Float32Array(g.array),16),x!==void 0&&(o.instanceColor=new Vy(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new V$(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(S=>{const _=new Eo;_.min.fromArray(S.boxMin),_.max.fromArray(S.boxMax);const b=new Xs;return b.radius=S.sphereRadius,b.center.fromArray(S.sphereCenter),{boxInitialized:S.boxInitialized,box:_,sphereInitialized:S.sphereInitialized,sphere:b}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new j$;break;case"Line":o=new qf(a(e.geometry),l(e.material));break;case"LineLoop":o=new W$(a(e.geometry),l(e.material));break;case"LineSegments":o=new Gc(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new q$(a(e.geometry),l(e.material));break;case"Sprite":o=new B$(l(e.material));break;case"Group":o=new Qg;break;case"Bone":o=new qk;break;default:o=new er}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let g=0;g<p.length;g++)o.add(this.parseObject(p[g],n,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let g=0;g<p.length;g++){const x=p[g];o.animations.push(s[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let g=0;g<p.length;g++){const x=p[g],S=o.getObjectByProperty("uuid",x.object);S!==void 0&&o.addLevel(S,x.distance,x.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const r=n.target,i=e.getObjectByProperty("uuid",r);i!==void 0?n.target=i:n.target=new er}})}}const vge={UVMapping:pT,CubeReflectionMapping:ud,CubeRefractionMapping:Wf,EquirectangularReflectionMapping:tb,EquirectangularRefractionMapping:nb,CubeUVReflectionMapping:rv},xU={RepeatWrapping:rb,ClampToEdgeWrapping:il,MirroredRepeatWrapping:ib},bU={NearestFilter:Ts,NearestMipmapNearestFilter:Ck,NearestMipmapLinearFilter:Zg,LinearFilter:Ji,LinearMipmapNearestFilter:a0,LinearMipmapLinearFilter:Ac};class xge extends oa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xu.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{n&&n(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Xu.add(e,c),n&&n(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),Xu.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Xu.add(e,l),s.manager.itemStart(e)}}let gS;class aO{static getContext(){return gS===void 0&&(gS=new(window.AudioContext||window.webkitAudioContext)),gS}static setContext(e){gS=e}}class bge extends oa{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new fd(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);aO.getContext().decodeAudioData(c,function(f){n(f)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const wU=new cn,_U=new cn,Kh=new cn;class wge{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new wi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new wi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Kh.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(Pp*n.fov*.5)/n.zoom;let a,l;_U.elements[12]=-i,wU.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,Kh.elements[0]=2*n.near/(l-a),Kh.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Kh),a=-o*n.aspect-s,l=o*n.aspect-s,Kh.elements[0]=2*n.near/(l-a),Kh.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Kh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_U),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(wU)}}class I6 extends wi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class lO{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=SU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=SU();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function SU(){return performance.now()}const Yh=new pe,EU=new Gs,_ge=new pe,Zh=new pe;class Sge extends er{constructor(){super(),this.type="AudioListener",this.context=aO.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new lO}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yh,EU,_ge),Zh.set(0,0,-1).applyQuaternion(EU),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Yh.x,i),n.positionY.linearRampToValueAtTime(Yh.y,i),n.positionZ.linearRampToValueAtTime(Yh.z,i),n.forwardX.linearRampToValueAtTime(Zh.x,i),n.forwardY.linearRampToValueAtTime(Zh.y,i),n.forwardZ.linearRampToValueAtTime(Zh.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Yh.x,Yh.y,Yh.z),n.setOrientation(Zh.x,Zh.y,Zh.z,r.x,r.y,r.z)}}class R6 extends er{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Jh=new pe,MU=new Gs,Ege=new pe,Qh=new pe;class Mge extends R6{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Jh,MU,Ege),Qh.set(0,0,1).applyQuaternion(MU);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Jh.x,r),n.positionY.linearRampToValueAtTime(Jh.y,r),n.positionZ.linearRampToValueAtTime(Jh.z,r),n.orientationX.linearRampToValueAtTime(Qh.x,r),n.orientationY.linearRampToValueAtTime(Qh.y,r),n.orientationZ.linearRampToValueAtTime(Qh.z,r)}else n.setPosition(Jh.x,Jh.y,Jh.z),n.setOrientation(Qh.x,Qh.y,Qh.z)}}class Tge{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class A6{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){Gs.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;Gs.multiplyQuaternionsFlat(e,o,e,n,e,r),Gs.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const cO="\\[\\]\\.:\\/",Cge=new RegExp("["+cO+"]","g"),uO="[^"+cO+"]",Ige="[^"+cO.replace("\\.","")+"]",Rge=/((?:WC+[\/:])*)/.source.replace("WC",uO),Age=/(WCOD+)?/.source.replace("WCOD",Ige),Nge=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uO),Pge=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uO),kge=new RegExp("^"+Rge+Age+Nge+Pge+"$"),Oge=["material","materials","bones","map"];class Lge{constructor(e,n,r){const i=r||Jn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Jn{constructor(e,n,r){this.path=n,this.parsedPath=r||Jn.parseTrackName(n),this.node=Jn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Jn.Composite(e,n,r):new Jn(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Cge,"")}static parseTrackName(e){const n=kge.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Oge.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=Jn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Jn.Composite=Lge;Jn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Jn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Jn.prototype.GetterByBindingType=[Jn.prototype._getValue_direct,Jn.prototype._getValue_array,Jn.prototype._getValue_arrayElement,Jn.prototype._getValue_toArray];Jn.prototype.SetterByBindingTypeAndVersioning=[[Jn.prototype._setValue_direct,Jn.prototype._setValue_direct_setNeedsUpdate,Jn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Jn.prototype._setValue_array,Jn.prototype._setValue_array_setNeedsUpdate,Jn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Jn.prototype._setValue_arrayElement,Jn.prototype._setValue_arrayElement_setNeedsUpdate,Jn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Jn.prototype._setValue_fromArray,Jn.prototype._setValue_fromArray_setNeedsUpdate,Jn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Dge{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ra(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const p=arguments[u],g=p.uuid;let x=n[g];if(x===void 0){x=l++,n[g]=x,e.push(p);for(let S=0,_=o;S!==_;++S)s[S].push(new Jn(p,r[S],i[S]))}else if(x<c){a=e[x];const S=--c,_=e[S];n[_.uuid]=x,e[x]=_,n[g]=S,e[S]=p;for(let b=0,E=o;b!==E;++b){const M=s[b],T=M[S];let k=M[x];M[x]=T,k===void 0&&(k=new Jn(p,r[b],i[b])),M[S]=k}}else e[x]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const f=s++,p=e[f];n[p.uuid]=u,e[u]=p,n[c]=f,e[f]=l;for(let g=0,x=i;g!==x;++g){const S=r[g],_=S[f],b=S[u];S[u]=_,S[f]=b}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=n[u];if(f!==void 0)if(delete n[u],f<s){const p=--s,g=e[p],x=--o,S=e[x];n[g.uuid]=f,e[f]=g,n[S.uuid]=p,e[p]=S,e.pop();for(let _=0,b=i;_!==b;++_){const E=r[_],M=E[p],T=E[x];E[f]=M,E[p]=T,E.pop()}}else{const p=--o,g=e[p];p>0&&(n[g.uuid]=f),e[f]=g,e.pop();for(let x=0,S=i;x!==S;++x){const _=r[x];_[f]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(f);for(let p=u,g=l.length;p!==g;++p){const x=l[p];f[p]=new Jn(x,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class N6{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:_p,endingEnd:_p};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=y$,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case Fk:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case wT:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===v$;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===g$){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Sp,i.endingEnd=Sp):(e?i.endingStart=this.zeroSlopeAtStart?Sp:_p:i.endingStart=ob,n?i.endingEnd=this.zeroSlopeAtEnd?Sp:_p:i.endingEnd=ob)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const Fge=new Float32Array(1);class Bge extends $c{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const p=i[f],g=p.name;let x=u[g];if(x!==void 0)++x.referenceCount,o[f]=x;else{if(x=o[f],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,l,g));continue}const S=n&&n._propertyBindings[f].binding.parsedPath;x=new A6(Jn.create(r,g,S),p.ValueTypeName,p.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,l,g),o[f]=x}a[f].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new rO(new Float32Array(2),new Float32Array(2),1,Fge),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?yb.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=wT),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new N6(this,o,n,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?yb.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,n[u]=f,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class jge extends _T{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new ST(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class Uge extends _T{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isRenderTargetArray=!0,this.depth=r,this.texture=new Zb(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class dO{constructor(e){this.value=e}clone(){return new dO(this.value.clone===void 0?this.value:this.value.clone())}}let zge=0;class Vge extends $c{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:zge++}),this.name="",this.usage=lb,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const s=Array.isArray(n[r])?n[r]:[n[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Wge extends TT{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class qge{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const TU=new cn;class P6{constructor(e,n,r=0,i=1/0){this.ray=new om(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new kp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return TU.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(TU),this}intersectObject(e,n=!0,r=[]){return qP(e,this,r,n),r.sort(CU),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)qP(e[i],this,r,n);return r.sort(CU),r}}function CU(t,e){return t.distance-e.distance}function qP(t,e,n,r){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(i=!1),i===!0&&r===!0){const s=t.children;for(let o=0,a=s.length;o<a;o++)qP(s[o],e,n,!0)}}class HP{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=bn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(bn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Hge{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}class fO{constructor(e,n,r,i){fO.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let r=0;r<4;r++)this.elements[r]=e[r+n];return this}set(e,n,r,i){const s=this.elements;return s[0]=e,s[2]=n,s[1]=r,s[3]=i,this}}const IU=new Je;class $ge{constructor(e=new Je(1/0,1/0),n=new Je(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=IU.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,IU).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const RU=new pe,yS=new pe;class Gge{constructor(e=new pe,n=new pe){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){RU.subVectors(e,this.start),yS.subVectors(this.end,this.start);const r=yS.dot(yS);let s=yS.dot(RU)/r;return n&&(s=bn(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const AU=new pe;class Xge extends er{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new kn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new qt(i,3));const s=new Io({fog:!1,toneMapped:!1});this.cone=new Gc(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),AU.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(AU),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const df=new pe,vS=new cn,WA=new cn;class Kge extends Gc{constructor(e){const n=k6(e),r=new kn,i=[],s=[],o=new Nt(0,0,1),a=new Nt(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new qt(i,3)),r.setAttribute("color",new qt(s,3));const l=new Io({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");WA.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(vS.multiplyMatrices(WA,a.matrixWorld),df.setFromMatrixPosition(vS),i.setXYZ(o,df.x,df.y,df.z),vS.multiplyMatrices(WA,a.parent.matrixWorld),df.setFromMatrixPosition(vS),i.setXYZ(o+1,df.x,df.y,df.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function k6(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,k6(t.children[n]));return e}class Yge extends ji{constructor(e,n,r){const i=new rw(n,4,2),s=new Kf({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Zge=new pe,NU=new Nt,PU=new Nt;class Jge extends er{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new nw(n);i.rotateY(Math.PI*.5),this.material=new Kf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new vr(o,3)),this.add(new ji(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");NU.copy(this.light.color),PU.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?NU:PU;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Zge.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Qge extends Gc{constructor(e=10,n=10,r=4473924,i=8947848){r=new Nt(r),i=new Nt(i);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let p=0,g=0,x=-a;p<=n;p++,x+=o){l.push(-a,0,x,a,0,x),l.push(x,0,-a,x,0,a);const S=p===s?r:i;S.toArray(c,g),g+=3,S.toArray(c,g),g+=3,S.toArray(c,g),g+=3,S.toArray(c,g),g+=3}const u=new kn;u.setAttribute("position",new qt(l,3)),u.setAttribute("color",new qt(c,3));const f=new Io({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class eye extends Gc{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new Nt(s),o=new Nt(o);const a=[],l=[];if(n>1)for(let f=0;f<n;f++){const p=f/n*(Math.PI*2),g=Math.sin(p)*e,x=Math.cos(p)*e;a.push(0,0,0),a.push(g,0,x);const S=f&1?s:o;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let f=0;f<r;f++){const p=f&1?s:o,g=e-e/r*f;for(let x=0;x<i;x++){let S=x/i*(Math.PI*2),_=Math.sin(S)*g,b=Math.cos(S)*g;a.push(_,0,b),l.push(p.r,p.g,p.b),S=(x+1)/i*(Math.PI*2),_=Math.sin(S)*g,b=Math.cos(S)*g,a.push(_,0,b),l.push(p.r,p.g,p.b)}}const c=new kn;c.setAttribute("position",new qt(a,3)),c.setAttribute("color",new qt(l,3));const u=new Io({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const kU=new pe,xS=new pe,OU=new pe;class tye extends er{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new kn;i.setAttribute("position",new qt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Io({fog:!1,toneMapped:!1});this.lightPlane=new qf(i,s),this.add(this.lightPlane),i=new kn,i.setAttribute("position",new qt([0,0,0,0,0,1],3)),this.targetLine=new qf(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),kU.setFromMatrixPosition(this.light.matrixWorld),xS.setFromMatrixPosition(this.light.target.matrixWorld),OU.subVectors(xS,kU),this.lightPlane.lookAt(xS),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(xS),this.targetLine.scale.z=OU.length()}}const bS=new pe,ii=new Jb;class nye extends Gc{constructor(e){const n=new kn,r=new Io({color:0xffffff,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(x,S){l(x),l(S)}function l(x){i.push(0,0,0),s.push(0,0,0),o[x]===void 0&&(o[x]=[]),o[x].push(i.length/3-1)}n.setAttribute("position",new qt(i,3)),n.setAttribute("color",new qt(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Nt(0xffaa00),u=new Nt(0xff0000),f=new Nt(43775),p=new Nt(0xffffff),g=new Nt(3355443);this.setColors(c,u,f,p,g)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;ii.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Xl?-1:0;xi("c",n,e,ii,0,0,s),xi("t",n,e,ii,0,0,1),xi("n1",n,e,ii,-1,-1,s),xi("n2",n,e,ii,r,-1,s),xi("n3",n,e,ii,-1,i,s),xi("n4",n,e,ii,r,i,s),xi("f1",n,e,ii,-1,-1,1),xi("f2",n,e,ii,r,-1,1),xi("f3",n,e,ii,-1,i,1),xi("f4",n,e,ii,r,i,1),xi("u1",n,e,ii,r*.7,i*1.1,s),xi("u2",n,e,ii,-1*.7,i*1.1,s),xi("u3",n,e,ii,0,i*2,s),xi("cf1",n,e,ii,-1,0,1),xi("cf2",n,e,ii,r,0,1),xi("cf3",n,e,ii,0,-1,1),xi("cf4",n,e,ii,0,i,1),xi("cn1",n,e,ii,-1,0,s),xi("cn2",n,e,ii,r,0,s),xi("cn3",n,e,ii,0,-1,s),xi("cn4",n,e,ii,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function xi(t,e,n,r,i,s,o){bS.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],bS.x,bS.y,bS.z)}}const wS=new Eo;class rye extends Gc{constructor(e,n=0xffff00){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new kn;s.setIndex(new vr(r,1)),s.setAttribute("position",new vr(i,3)),super(s,new Io({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&wS.setFromObject(this.object),wS.isEmpty())return;const n=wS.min,r=wS.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class iye extends Gc{constructor(e,n=0xffff00){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new kn;s.setIndex(new vr(r,1)),s.setAttribute("position",new qt(i,3)),super(s,new Io({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class sye extends qf{constructor(e,n=1,r=0xffff00){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new kn;o.setAttribute("position",new qt(s,3)),o.computeBoundingSphere(),super(o,new Io({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new kn;l.setAttribute("position",new qt(a,3)),l.computeBoundingSphere(),this.add(new ji(l,new Kf({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const LU=new pe;let _S,qA;class oye extends er{constructor(e=new pe(0,0,1),n=new pe(0,0,0),r=1,i=0xffff00,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",_S===void 0&&(_S=new kn,_S.setAttribute("position",new qt([0,0,0,0,1,0],3)),qA=new sv(0,.5,1,5,1),qA.translate(0,-.5,0)),this.position.copy(n),this.line=new qf(_S,new Io({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ji(qA,new Kf({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{LU.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(LU,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class aye extends Gc{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new kn;i.setAttribute("position",new qt(n,3)),i.setAttribute("color",new qt(r,3));const s=new Io({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new Nt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lye{constructor(){this.type="ShapePath",this.color=new Nt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new db,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(b){const E=[];for(let M=0,T=b.length;M<T;M++){const k=b[M],N=new Op;N.curves=k.curves,E.push(N)}return E}function r(b,E){const M=E.length;let T=!1;for(let k=M-1,N=0;N<M;k=N++){let D=E[k],L=E[N],R=L.x-D.x,A=L.y-D.y;if(Math.abs(A)>Number.EPSILON){if(A<0&&(D=E[N],R=-R,L=E[k],A=-A),b.y<D.y||b.y>L.y)continue;if(b.y===D.y){if(b.x===D.x)return!0}else{const P=A*(b.x-D.x)-R*(b.y-D.y);if(P===0)return!0;if(P<0)continue;T=!T}}else{if(b.y!==D.y)continue;if(L.x<=b.x&&b.x<=D.x||D.x<=b.x&&b.x<=L.x)return!0}}return T}const i=Fc.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Op,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const f=[],p=[];let g=[],x=0,S;p[x]=void 0,g[x]=[];for(let b=0,E=s.length;b<E;b++)a=s[b],S=a.getPoints(),o=i(S),o=e?!o:o,o?(!u&&p[x]&&x++,p[x]={s:new Op,p:S},p[x].s.curves=a.curves,u&&x++,g[x]=[]):g[x].push({h:a,p:S[0]});if(!p[0])return n(s);if(p.length>1){let b=!1,E=0;for(let M=0,T=p.length;M<T;M++)f[M]=[];for(let M=0,T=p.length;M<T;M++){const k=g[M];for(let N=0;N<k.length;N++){const D=k[N];let L=!0;for(let R=0;R<p.length;R++)r(D.p,p[R].p)&&(M!==R&&E++,L?(L=!1,f[R].push(D)):b=!0);L&&f[M].push(D)}}E>0&&b===!1&&(g=f)}let _;for(let b=0,E=p.length;b<E;b++){l=p[b].s,c.push(l),_=g[b];for(let M=0,T=_.length;M<T;M++)l.holes.push(_[M].h)}return c}}class cye extends $c{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function uye(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function dye(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function fye(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function $P(t,e,n,r){const i=hye(r);switch(n){case Nk:return t*e;case kk:return t*e;case Ok:return t*e*2;case vT:return t*e/i.components*i.byteLength;case Yb:return t*e/i.components*i.byteLength;case Lk:return t*e*2/i.components*i.byteLength;case xT:return t*e*2/i.components*i.byteLength;case Pk:return t*e*3/i.components*i.byteLength;case qs:return t*e*4/i.components*i.byteLength;case bT:return t*e*4/i.components*i.byteLength;case l0:case c0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case u0:case d0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case jE:case zE:return Math.max(t,16)*Math.max(e,8)/4;case BE:case UE:return Math.max(t,8)*Math.max(e,8)/2;case VE:case WE:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case qE:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case HE:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case $E:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case GE:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case XE:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case KE:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case YE:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case ZE:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case JE:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case QE:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case eM:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case tM:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case nM:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case rM:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case iM:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case f0:case sM:case oM:return Math.ceil(t/4)*Math.ceil(e/4)*16;case Dk:case aM:return Math.ceil(t/4)*Math.ceil(e/4)*8;case lM:case cM:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function hye(t){switch(t){case Ql:case Ik:return{byteLength:1,components:1};case jy:case Rk:case iv:return{byteLength:2,components:1};case gT:case yT:return{byteLength:2,components:4};case dd:case mT:case Qo:return{byteLength:4,components:1};case Ak:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}const pye={contain:uye,cover:dye,fill:fye,getByteLength:$P};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:dT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=dT);function O6(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function mye(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,f=c.byteLength,p=t.createBuffer();t.bindBuffer(l,p),t.bufferData(l,c,u),a.onUploadCallback();let g;if(c instanceof Float32Array)g=t.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?g=t.HALF_FLOAT:g=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)g=t.SHORT;else if(c instanceof Uint32Array)g=t.UNSIGNED_INT;else if(c instanceof Int32Array)g=t.INT;else if(c instanceof Int8Array)g=t.BYTE;else if(c instanceof Uint8Array)g=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)g=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:g,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:f}}function r(a,l,c){const u=l.array,f=l.updateRanges;if(t.bindBuffer(c,a),f.length===0)t.bufferSubData(c,0,u);else{f.sort((g,x)=>g.start-x.start);let p=0;for(let g=1;g<f.length;g++){const x=f[p],S=f[g];S.start<=x.start+x.count+1?x.count=Math.max(x.count,S.start+S.count-x.start):(++p,f[p]=S)}f.length=p+1;for(let g=0,x=f.length;g<x;g++){const S=f[g];t.bufferSubData(c,S.start*u.BYTES_PER_ELEMENT,u,S.start,S.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}var gye=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,yye=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,vye=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,xye=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bye=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,wye=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,_ye=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Sye=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Eye=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Mye=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Tye=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Cye=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Iye=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Rye=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Aye=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Nye=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Pye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,kye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Oye=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Lye=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Dye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Fye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Bye=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,jye=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Uye=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,zye=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Vye=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Wye=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,qye=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Hye=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,$ye="gl_FragColor = linearToOutputTexel( gl_FragColor );",Gye=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Xye=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Kye=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Yye=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Zye=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Jye=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Qye=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,eve=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,tve=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,nve=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,rve=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ive=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,sve=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,ove=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ave=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,lve=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,cve=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,uve=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,dve=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,fve=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,hve=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,pve=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,mve=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,gve=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,yve=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,vve=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,xve=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,bve=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wve=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,_ve=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Sve=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Eve=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Mve=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Tve=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Cve=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Ive=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Rve=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Ave=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Nve=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Pve=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,kve=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Ove=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Lve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Dve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Fve=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Bve=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jve=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Uve=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,zve=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Vve=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Wve=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,qve=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Hve=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,$ve=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Gve=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Xve=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Kve=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Yve=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Zve=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Jve=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Qve=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,exe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,txe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,nxe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,rxe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ixe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,sxe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,oxe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,axe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,lxe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,cxe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,uxe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,dxe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,fxe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,hxe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,pxe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const mxe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,gxe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yxe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vxe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xxe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,bxe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wxe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,_xe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Sxe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Exe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Mxe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Txe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Cxe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ixe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Rxe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Axe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nxe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Pxe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kxe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Oxe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lxe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Dxe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Fxe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Bxe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jxe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Uxe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zxe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Vxe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wxe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,qxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Hxe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$xe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Gxe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Xxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Nn={alphahash_fragment:gye,alphahash_pars_fragment:yye,alphamap_fragment:vye,alphamap_pars_fragment:xye,alphatest_fragment:bye,alphatest_pars_fragment:wye,aomap_fragment:_ye,aomap_pars_fragment:Sye,batching_pars_vertex:Eye,batching_vertex:Mye,begin_vertex:Tye,beginnormal_vertex:Cye,bsdfs:Iye,iridescence_fragment:Rye,bumpmap_pars_fragment:Aye,clipping_planes_fragment:Nye,clipping_planes_pars_fragment:Pye,clipping_planes_pars_vertex:kye,clipping_planes_vertex:Oye,color_fragment:Lye,color_pars_fragment:Dye,color_pars_vertex:Fye,color_vertex:Bye,common:jye,cube_uv_reflection_fragment:Uye,defaultnormal_vertex:zye,displacementmap_pars_vertex:Vye,displacementmap_vertex:Wye,emissivemap_fragment:qye,emissivemap_pars_fragment:Hye,colorspace_fragment:$ye,colorspace_pars_fragment:Gye,envmap_fragment:Xye,envmap_common_pars_fragment:Kye,envmap_pars_fragment:Yye,envmap_pars_vertex:Zye,envmap_physical_pars_fragment:lve,envmap_vertex:Jye,fog_vertex:Qye,fog_pars_vertex:eve,fog_fragment:tve,fog_pars_fragment:nve,gradientmap_pars_fragment:rve,lightmap_pars_fragment:ive,lights_lambert_fragment:sve,lights_lambert_pars_fragment:ove,lights_pars_begin:ave,lights_toon_fragment:cve,lights_toon_pars_fragment:uve,lights_phong_fragment:dve,lights_phong_pars_fragment:fve,lights_physical_fragment:hve,lights_physical_pars_fragment:pve,lights_fragment_begin:mve,lights_fragment_maps:gve,lights_fragment_end:yve,logdepthbuf_fragment:vve,logdepthbuf_pars_fragment:xve,logdepthbuf_pars_vertex:bve,logdepthbuf_vertex:wve,map_fragment:_ve,map_pars_fragment:Sve,map_particle_fragment:Eve,map_particle_pars_fragment:Mve,metalnessmap_fragment:Tve,metalnessmap_pars_fragment:Cve,morphinstance_vertex:Ive,morphcolor_vertex:Rve,morphnormal_vertex:Ave,morphtarget_pars_vertex:Nve,morphtarget_vertex:Pve,normal_fragment_begin:kve,normal_fragment_maps:Ove,normal_pars_fragment:Lve,normal_pars_vertex:Dve,normal_vertex:Fve,normalmap_pars_fragment:Bve,clearcoat_normal_fragment_begin:jve,clearcoat_normal_fragment_maps:Uve,clearcoat_pars_fragment:zve,iridescence_pars_fragment:Vve,opaque_fragment:Wve,packing:qve,premultiplied_alpha_fragment:Hve,project_vertex:$ve,dithering_fragment:Gve,dithering_pars_fragment:Xve,roughnessmap_fragment:Kve,roughnessmap_pars_fragment:Yve,shadowmap_pars_fragment:Zve,shadowmap_pars_vertex:Jve,shadowmap_vertex:Qve,shadowmask_pars_fragment:exe,skinbase_vertex:txe,skinning_pars_vertex:nxe,skinning_vertex:rxe,skinnormal_vertex:ixe,specularmap_fragment:sxe,specularmap_pars_fragment:oxe,tonemapping_fragment:axe,tonemapping_pars_fragment:lxe,transmission_fragment:cxe,transmission_pars_fragment:uxe,uv_pars_fragment:dxe,uv_pars_vertex:fxe,uv_vertex:hxe,worldpos_vertex:pxe,background_vert:mxe,background_frag:gxe,backgroundCube_vert:yxe,backgroundCube_frag:vxe,cube_vert:xxe,cube_frag:bxe,depth_vert:wxe,depth_frag:_xe,distanceRGBA_vert:Sxe,distanceRGBA_frag:Exe,equirect_vert:Mxe,equirect_frag:Txe,linedashed_vert:Cxe,linedashed_frag:Ixe,meshbasic_vert:Rxe,meshbasic_frag:Axe,meshlambert_vert:Nxe,meshlambert_frag:Pxe,meshmatcap_vert:kxe,meshmatcap_frag:Oxe,meshnormal_vert:Lxe,meshnormal_frag:Dxe,meshphong_vert:Fxe,meshphong_frag:Bxe,meshphysical_vert:jxe,meshphysical_frag:Uxe,meshtoon_vert:zxe,meshtoon_frag:Vxe,points_vert:Wxe,points_frag:qxe,shadow_vert:Hxe,shadow_frag:$xe,sprite_vert:Gxe,sprite_frag:Xxe},bt={common:{diffuse:{value:new Nt(0xffffff)},opacity:{value:1},map:{value:null},mapTransform:{value:new _n},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new _n}},envmap:{envMap:{value:null},envMapRotation:{value:new _n},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new _n}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new _n}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new _n},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new _n},normalScale:{value:new Je(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new _n},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new _n}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new _n}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new _n}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Nt(0xffffff)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Nt(0xffffff)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0},uvTransform:{value:new _n}},sprite:{diffuse:{value:new Nt(0xffffff)},opacity:{value:1},center:{value:new Je(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new _n},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0}}},Vl={basic:{uniforms:go([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.fog]),vertexShader:Nn.meshbasic_vert,fragmentShader:Nn.meshbasic_frag},lambert:{uniforms:go([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,bt.lights,{emissive:{value:new Nt(0)}}]),vertexShader:Nn.meshlambert_vert,fragmentShader:Nn.meshlambert_frag},phong:{uniforms:go([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,bt.lights,{emissive:{value:new Nt(0)},specular:{value:new Nt(1118481)},shininess:{value:30}}]),vertexShader:Nn.meshphong_vert,fragmentShader:Nn.meshphong_frag},standard:{uniforms:go([bt.common,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.roughnessmap,bt.metalnessmap,bt.fog,bt.lights,{emissive:{value:new Nt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nn.meshphysical_vert,fragmentShader:Nn.meshphysical_frag},toon:{uniforms:go([bt.common,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.gradientmap,bt.fog,bt.lights,{emissive:{value:new Nt(0)}}]),vertexShader:Nn.meshtoon_vert,fragmentShader:Nn.meshtoon_frag},matcap:{uniforms:go([bt.common,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,{matcap:{value:null}}]),vertexShader:Nn.meshmatcap_vert,fragmentShader:Nn.meshmatcap_frag},points:{uniforms:go([bt.points,bt.fog]),vertexShader:Nn.points_vert,fragmentShader:Nn.points_frag},dashed:{uniforms:go([bt.common,bt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nn.linedashed_vert,fragmentShader:Nn.linedashed_frag},depth:{uniforms:go([bt.common,bt.displacementmap]),vertexShader:Nn.depth_vert,fragmentShader:Nn.depth_frag},normal:{uniforms:go([bt.common,bt.bumpmap,bt.normalmap,bt.displacementmap,{opacity:{value:1}}]),vertexShader:Nn.meshnormal_vert,fragmentShader:Nn.meshnormal_frag},sprite:{uniforms:go([bt.sprite,bt.fog]),vertexShader:Nn.sprite_vert,fragmentShader:Nn.sprite_frag},background:{uniforms:{uvTransform:{value:new _n},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Nn.background_vert,fragmentShader:Nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new _n}},vertexShader:Nn.backgroundCube_vert,fragmentShader:Nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Nn.cube_vert,fragmentShader:Nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nn.equirect_vert,fragmentShader:Nn.equirect_frag},distanceRGBA:{uniforms:go([bt.common,bt.displacementmap,{referencePosition:{value:new pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nn.distanceRGBA_vert,fragmentShader:Nn.distanceRGBA_frag},shadow:{uniforms:go([bt.lights,bt.fog,{color:{value:new Nt(0)},opacity:{value:1}}]),vertexShader:Nn.shadow_vert,fragmentShader:Nn.shadow_frag}};Vl.physical={uniforms:go([Vl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new _n},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new _n},clearcoatNormalScale:{value:new Je(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new _n},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new _n},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new _n},sheen:{value:0},sheenColor:{value:new Nt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new _n},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new _n},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new _n},transmissionSamplerSize:{value:new Je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new _n},attenuationDistance:{value:0},attenuationColor:{value:new Nt(0)},specularColor:{value:new Nt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new _n},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new _n},anisotropyVector:{value:new Je},anisotropyMap:{value:null},anisotropyMapTransform:{value:new _n}}]),vertexShader:Nn.meshphysical_vert,fragmentShader:Nn.meshphysical_frag};const SS={r:0,b:0,g:0},ep=new Oa,Kxe=new cn;function Yxe(t,e,n,r,i,s,o){const a=new Nt(0);let l=s===!0?0:1,c,u,f=null,p=0,g=null;function x(M){let T=M.isScene===!0?M.background:null;return T&&T.isTexture&&(T=(M.backgroundBlurriness>0?n:e).get(T)),T}function S(M){let T=!1;const k=x(M);k===null?b(a,l):k&&k.isColor&&(b(k,1),T=!0);const N=t.xr.getEnvironmentBlendMode();N==="additive"?r.buffers.color.setClear(0,0,0,1,o):N==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||T)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function _(M,T){const k=x(T);k&&(k.isCubeTexture||k.mapping===rv)?(u===void 0&&(u=new ji(new am(1,1,1),new ec({name:"BackgroundCubeMaterial",uniforms:zy(Vl.backgroundCube.uniforms),vertexShader:Vl.backgroundCube.vertexShader,fragmentShader:Vl.backgroundCube.fragmentShader,side:So,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(N,D,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),ep.copy(T.backgroundRotation),ep.x*=-1,ep.y*=-1,ep.z*=-1,k.isCubeTexture&&k.isRenderTargetTexture===!1&&(ep.y*=-1,ep.z*=-1),u.material.uniforms.envMap.value=k,u.material.uniforms.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Kxe.makeRotationFromEuler(ep)),u.material.toneMapped=Xn.getTransfer(k.colorSpace)!==ur,(f!==k||p!==k.version||g!==t.toneMapping)&&(u.material.needsUpdate=!0,f=k,p=k.version,g=t.toneMapping),u.layers.enableAll(),M.unshift(u,u.geometry,u.material,0,0,null)):k&&k.isTexture&&(c===void 0&&(c=new ji(new ov(2,2),new ec({name:"BackgroundMaterial",uniforms:zy(Vl.background.uniforms),vertexShader:Vl.background.vertexShader,fragmentShader:Vl.background.fragmentShader,side:cd,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=k,c.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,c.material.toneMapped=Xn.getTransfer(k.colorSpace)!==ur,k.matrixAutoUpdate===!0&&k.updateMatrix(),c.material.uniforms.uvTransform.value.copy(k.matrix),(f!==k||p!==k.version||g!==t.toneMapping)&&(c.material.needsUpdate=!0,f=k,p=k.version,g=t.toneMapping),c.layers.enableAll(),M.unshift(c,c.geometry,c.material,0,0,null))}function b(M,T){M.getRGB(SS,k$(t)),r.buffers.color.setClear(SS.r,SS.g,SS.b,T,o)}function E(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(M,T=1){a.set(M),l=T,b(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,b(a,l)},render:S,addToRenderList:_,dispose:E}}function Zxe(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=p(null);let s=i,o=!1;function a(A,P,j,U,B){let $=!1;const q=f(U,j,P);s!==q&&(s=q,c(s.object)),$=g(A,U,j,B),$&&x(A,U,j,B),B!==null&&e.update(B,t.ELEMENT_ARRAY_BUFFER),($||o)&&(o=!1,T(A,P,j,U),B!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(B).buffer))}function l(){return t.createVertexArray()}function c(A){return t.bindVertexArray(A)}function u(A){return t.deleteVertexArray(A)}function f(A,P,j){const U=j.wireframe===!0;let B=r[A.id];B===void 0&&(B={},r[A.id]=B);let $=B[P.id];$===void 0&&($={},B[P.id]=$);let q=$[U];return q===void 0&&(q=p(l()),$[U]=q),q}function p(A){const P=[],j=[],U=[];for(let B=0;B<n;B++)P[B]=0,j[B]=0,U[B]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:j,attributeDivisors:U,object:A,attributes:{},index:null}}function g(A,P,j,U){const B=s.attributes,$=P.attributes;let q=0;const te=j.getAttributes();for(const W in te)if(te[W].location>=0){const J=B[W];let Y=$[W];if(Y===void 0&&(W==="instanceMatrix"&&A.instanceMatrix&&(Y=A.instanceMatrix),W==="instanceColor"&&A.instanceColor&&(Y=A.instanceColor)),J===void 0||J.attribute!==Y||Y&&J.data!==Y.data)return!0;q++}return s.attributesNum!==q||s.index!==U}function x(A,P,j,U){const B={},$=P.attributes;let q=0;const te=j.getAttributes();for(const W in te)if(te[W].location>=0){let J=$[W];J===void 0&&(W==="instanceMatrix"&&A.instanceMatrix&&(J=A.instanceMatrix),W==="instanceColor"&&A.instanceColor&&(J=A.instanceColor));const Y={};Y.attribute=J,J&&J.data&&(Y.data=J.data),B[W]=Y,q++}s.attributes=B,s.attributesNum=q,s.index=U}function S(){const A=s.newAttributes;for(let P=0,j=A.length;P<j;P++)A[P]=0}function _(A){b(A,0)}function b(A,P){const j=s.newAttributes,U=s.enabledAttributes,B=s.attributeDivisors;j[A]=1,U[A]===0&&(t.enableVertexAttribArray(A),U[A]=1),B[A]!==P&&(t.vertexAttribDivisor(A,P),B[A]=P)}function E(){const A=s.newAttributes,P=s.enabledAttributes;for(let j=0,U=P.length;j<U;j++)P[j]!==A[j]&&(t.disableVertexAttribArray(j),P[j]=0)}function M(A,P,j,U,B,$,q){q===!0?t.vertexAttribIPointer(A,P,j,B,$):t.vertexAttribPointer(A,P,j,U,B,$)}function T(A,P,j,U){S();const B=U.attributes,$=j.getAttributes(),q=P.defaultAttributeValues;for(const te in $){const W=$[te];if(W.location>=0){let Z=B[te];if(Z===void 0&&(te==="instanceMatrix"&&A.instanceMatrix&&(Z=A.instanceMatrix),te==="instanceColor"&&A.instanceColor&&(Z=A.instanceColor)),Z!==void 0){const J=Z.normalized,Y=Z.itemSize,oe=e.get(Z);if(oe===void 0)continue;const ce=oe.buffer,ie=oe.type,ue=oe.bytesPerElement,de=ie===t.INT||ie===t.UNSIGNED_INT||Z.gpuType===mT;if(Z.isInterleavedBufferAttribute){const be=Z.data,we=be.stride,Ce=Z.offset;if(be.isInstancedInterleavedBuffer){for(let Ie=0;Ie<W.locationSize;Ie++)b(W.location+Ie,be.meshPerAttribute);A.isInstancedMesh!==!0&&U._maxInstanceCount===void 0&&(U._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let Ie=0;Ie<W.locationSize;Ie++)_(W.location+Ie);t.bindBuffer(t.ARRAY_BUFFER,ce);for(let Ie=0;Ie<W.locationSize;Ie++)M(W.location+Ie,Y/W.locationSize,ie,J,we*ue,(Ce+Y/W.locationSize*Ie)*ue,de)}else{if(Z.isInstancedBufferAttribute){for(let be=0;be<W.locationSize;be++)b(W.location+be,Z.meshPerAttribute);A.isInstancedMesh!==!0&&U._maxInstanceCount===void 0&&(U._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let be=0;be<W.locationSize;be++)_(W.location+be);t.bindBuffer(t.ARRAY_BUFFER,ce);for(let be=0;be<W.locationSize;be++)M(W.location+be,Y/W.locationSize,ie,J,Y*ue,Y/W.locationSize*be*ue,de)}}else if(q!==void 0){const J=q[te];if(J!==void 0)switch(J.length){case 2:t.vertexAttrib2fv(W.location,J);break;case 3:t.vertexAttrib3fv(W.location,J);break;case 4:t.vertexAttrib4fv(W.location,J);break;default:t.vertexAttrib1fv(W.location,J)}}}}E()}function k(){L();for(const A in r){const P=r[A];for(const j in P){const U=P[j];for(const B in U)u(U[B].object),delete U[B];delete P[j]}delete r[A]}}function N(A){if(r[A.id]===void 0)return;const P=r[A.id];for(const j in P){const U=P[j];for(const B in U)u(U[B].object),delete U[B];delete P[j]}delete r[A.id]}function D(A){for(const P in r){const j=r[P];if(j[A.id]===void 0)continue;const U=j[A.id];for(const B in U)u(U[B].object),delete U[B];delete j[A.id]}}function L(){R(),o=!0,s!==i&&(s=i,c(s.object))}function R(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:L,resetDefaultState:R,dispose:k,releaseStatesOfGeometry:N,releaseStatesOfProgram:D,initAttributes:S,enableAttribute:_,disableUnusedAttributes:E}}function Jxe(t,e,n){let r;function i(c){r=c}function s(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function o(c,u,f){f!==0&&(t.drawArraysInstanced(r,c,u,f),n.update(u,r,f))}function a(c,u,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,f);let g=0;for(let x=0;x<f;x++)g+=u[x];n.update(g,r,1)}function l(c,u,f,p){if(f===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let x=0;x<c.length;x++)o(c[x],u[x],p[x]);else{g.multiDrawArraysInstancedWEBGL(r,c,0,u,0,p,0,f);let x=0;for(let S=0;S<f;S++)x+=u[S]*p[S];n.update(x,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Qxe(t,e,n,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const D=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(D){return!(D!==qs&&r.convert(D)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(D){const L=D===iv&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(D!==Ql&&r.convert(D)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&D!==Qo&&!L)}function l(D){if(D==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";D="mediump"}return D==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const f=n.logarithmicDepthBuffer===!0,p=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),g=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),x=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),S=t.getParameter(t.MAX_TEXTURE_SIZE),_=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),b=t.getParameter(t.MAX_VERTEX_ATTRIBS),E=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),M=t.getParameter(t.MAX_VARYING_VECTORS),T=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),k=x>0,N=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:f,reverseDepthBuffer:p,maxTextures:g,maxVertexTextures:x,maxTextureSize:S,maxCubemapSize:_,maxAttributes:b,maxVertexUniforms:E,maxVaryings:M,maxFragmentUniforms:T,vertexTextures:k,maxSamples:N}}function e0e(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new qu,a=new _n,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const g=f.length!==0||p||r!==0||i;return i=p,r=f.length,g},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){n=u(f,p,0)},this.setState=function(f,p,g){const x=f.clippingPlanes,S=f.clipIntersection,_=f.clipShadows,b=t.get(f);if(!i||x===null||x.length===0||s&&!_)s?u(null):c();else{const E=s?0:r,M=E*4;let T=b.clippingState||null;l.value=T,T=u(x,p,M,g);for(let k=0;k!==M;++k)T[k]=n[k];b.clippingState=T,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=E}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,p,g,x){const S=f!==null?f.length:0;let _=null;if(S!==0){if(_=l.value,x!==!0||_===null){const b=g+S*4,E=p.matrixWorldInverse;a.getNormalMatrix(E),(_===null||_.length<b)&&(_=new Float32Array(b));for(let M=0,T=g;M!==S;++M,T+=4)o.copy(f[M]).applyMatrix4(E,a),o.normal.toArray(_,T),_[T+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,_}}function t0e(t){let e=new WeakMap;function n(o,a){return a===tb?o.mapping=ud:a===nb&&(o.mapping=Wf),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===tb||a===nb)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new D$(l.height);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const ty=4,DU=[.125,.215,.35,.446,.526,.582],pp=20,HA=new td,FU=new Nt;let $A=null,GA=0,XA=0,KA=!1;const up=(1+Math.sqrt(5))/2,Ag=1/up,BU=[new pe(-up,Ag,0),new pe(up,Ag,0),new pe(-Ag,0,up),new pe(Ag,0,up),new pe(0,up,-Ag),new pe(0,up,Ag),new pe(-1,1,-1),new pe(1,1,-1),new pe(-1,1,1),new pe(1,1,1)];class GP{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){$A=this._renderer.getRenderTarget(),GA=this._renderer.getActiveCubeFace(),XA=this._renderer.getActiveMipmapLevel(),KA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=zU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=UU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget($A,GA,XA),this._renderer.xr.enabled=KA,e.scissorTest=!1,ES(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ud||e.mapping===Wf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),$A=this._renderer.getRenderTarget(),GA=this._renderer.getActiveCubeFace(),XA=this._renderer.getActiveMipmapLevel(),KA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Ji,minFilter:Ji,generateMipmaps:!1,type:iv,format:qs,colorSpace:Zp,depthBuffer:!1},i=jU(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=jU(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=n0e(s)),this._blurMaterial=r0e(s,e,n)}return i}_compileMaterial(e){const n=new ji(this._lodPlanes[0],e);this._renderer.compile(n,HA)}_sceneToCubeUV(e,n,r,i){const a=new wi(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,p=u.toneMapping;u.getClearColor(FU),u.toneMapping=Lc,u.autoClear=!1;const g=new Kf({name:"PMREM.Background",side:So,depthWrite:!1,depthTest:!1}),x=new ji(new am,g);let S=!1;const _=e.background;_?_.isColor&&(g.color.copy(_),e.background=null,S=!0):(g.color.copy(FU),S=!0);for(let b=0;b<6;b++){const E=b%3;E===0?(a.up.set(0,l[b],0),a.lookAt(c[b],0,0)):E===1?(a.up.set(0,0,l[b]),a.lookAt(0,c[b],0)):(a.up.set(0,l[b],0),a.lookAt(0,0,c[b]));const M=this._cubeSize;ES(i,E*M,b>2?M:0,M,M),u.setRenderTarget(i),S&&u.render(x,a),u.render(e,a)}x.geometry.dispose(),x.material.dispose(),u.toneMapping=p,u.autoClear=f,e.background=_}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===ud||e.mapping===Wf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=zU()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=UU());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new ji(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;ES(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,HA)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=BU[(i-s-1)%BU.length];this._blur(e,s-1,s,o,a)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new ji(this._lodPlanes[i],c),p=c.uniforms,g=this._sizeLods[r]-1,x=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*pp-1),S=s/x,_=isFinite(s)?1+Math.floor(u*S):pp;_>pp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${pp}`);const b=[];let E=0;for(let D=0;D<pp;++D){const L=D/S,R=Math.exp(-L*L/2);b.push(R),D===0?E+=R:D<_&&(E+=2*R)}for(let D=0;D<b.length;D++)b[D]=b[D]/E;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=b,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:M}=this;p.dTheta.value=x,p.mipInt.value=M-r;const T=this._sizeLods[i],k=3*T*(i>M-ty?i-M+ty:0),N=4*(this._cubeSize-T);ES(n,k,N,3*T,2*T),l.setRenderTarget(n),l.render(f,HA)}}function n0e(t){const e=[],n=[],r=[];let i=t;const s=t-ty+1+DU.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-ty?l=DU[o-t+ty-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,f=1+c,p=[u,u,f,u,f,f,u,u,f,f,u,f],g=6,x=6,S=3,_=2,b=1,E=new Float32Array(S*x*g),M=new Float32Array(_*x*g),T=new Float32Array(b*x*g);for(let N=0;N<g;N++){const D=N%3*2/3-1,L=N>2?0:-1,R=[D,L,0,D+2/3,L,0,D+2/3,L+1,0,D,L,0,D+2/3,L+1,0,D,L+1,0];E.set(R,S*x*N),M.set(p,_*x*N);const A=[N,N,N,N,N,N];T.set(A,b*x*N)}const k=new kn;k.setAttribute("position",new vr(E,S)),k.setAttribute("uv",new vr(M,_)),k.setAttribute("faceIndex",new vr(T,b)),e.push(k),i>ty&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function jU(t,e,n){const r=new Wc(t,e,n);return r.texture.mapping=rv,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ES(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function r0e(t,e,n){const r=new Float32Array(pp),i=new pe(0,1,0);return new ec({name:"SphericalGaussianBlur",defines:{n:pp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:hO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Qu,depthTest:!1,depthWrite:!1})}function UU(){return new ec({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:hO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Qu,depthTest:!1,depthWrite:!1})}function zU(){return new ec({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:hO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Qu,depthTest:!1,depthWrite:!1})}function hO(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function i0e(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===tb||l===nb,u=l===ud||l===Wf;if(c||u){let f=e.get(a);const p=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return n===null&&(n=new GP(t)),f=c?n.fromEquirectangular(a,f):n.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const g=a.image;return c&&g&&g.height>0||u&&g&&i(g)?(n===null&&(n=new GP(t)),f=c?n.fromEquirectangular(a):n.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function s0e(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&Ug("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function o0e(t,e,n,r){const i={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const x in p.attributes)e.remove(p.attributes[x]);p.removeEventListener("dispose",o),delete i[p.id];const g=s.get(p);g&&(e.remove(g),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(f,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,n.memory.geometries++),p}function l(f){const p=f.attributes;for(const g in p)e.update(p[g],t.ARRAY_BUFFER)}function c(f){const p=[],g=f.index,x=f.attributes.position;let S=0;if(g!==null){const E=g.array;S=g.version;for(let M=0,T=E.length;M<T;M+=3){const k=E[M+0],N=E[M+1],D=E[M+2];p.push(k,N,N,D,D,k)}}else if(x!==void 0){const E=x.array;S=x.version;for(let M=0,T=E.length/3-1;M<T;M+=3){const k=M+0,N=M+1,D=M+2;p.push(k,N,N,D,D,k)}}else return;const _=new(R$(p)?zk:Uk)(p,1);_.version=S;const b=s.get(f);b&&e.remove(b),s.set(f,_)}function u(f){const p=s.get(f);if(p){const g=f.index;g!==null&&p.version<g.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function a0e(t,e,n){let r;function i(p){r=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,g){t.drawElements(r,g,s,p*o),n.update(g,r,1)}function c(p,g,x){x!==0&&(t.drawElementsInstanced(r,g,s,p*o,x),n.update(g,r,x))}function u(p,g,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,g,0,s,p,0,x);let _=0;for(let b=0;b<x;b++)_+=g[b];n.update(_,r,1)}function f(p,g,x,S){if(x===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<p.length;b++)c(p[b]/o,g[b],S[b]);else{_.multiDrawElementsInstancedWEBGL(r,g,0,s,p,0,S,0,x);let b=0;for(let E=0;E<x;E++)b+=g[E]*S[E];n.update(b,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function l0e(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function c0e(t,e,n){const r=new WeakMap,i=new Qn;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=u!==void 0?u.length:0;let p=r.get(a);if(p===void 0||p.count!==f){let R=function(){D.dispose(),r.delete(a),a.removeEventListener("dispose",R)};p!==void 0&&p.texture.dispose();const g=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,S=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],b=a.morphAttributes.normal||[],E=a.morphAttributes.color||[];let M=0;g===!0&&(M=1),x===!0&&(M=2),S===!0&&(M=3);let T=a.attributes.position.count*M,k=1;T>e.maxTextureSize&&(k=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const N=new Float32Array(T*k*4*f),D=new Zb(N,T,k,f);D.type=Qo,D.needsUpdate=!0;const L=M*4;for(let A=0;A<f;A++){const P=_[A],j=b[A],U=E[A],B=T*k*4*A;for(let $=0;$<P.count;$++){const q=$*L;g===!0&&(i.fromBufferAttribute(P,$),N[B+q+0]=i.x,N[B+q+1]=i.y,N[B+q+2]=i.z,N[B+q+3]=0),x===!0&&(i.fromBufferAttribute(j,$),N[B+q+4]=i.x,N[B+q+5]=i.y,N[B+q+6]=i.z,N[B+q+7]=0),S===!0&&(i.fromBufferAttribute(U,$),N[B+q+8]=i.x,N[B+q+9]=i.y,N[B+q+10]=i.z,N[B+q+11]=U.itemSize===4?i.w:1)}}p={count:f,texture:D,size:new Je(T,k)},r.set(a,p),a.addEventListener("dispose",R)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let g=0;for(let S=0;S<c.length;S++)g+=c[S];const x=a.morphTargetsRelative?1:1-g;l.getUniforms().setValue(t,"morphTargetBaseInfluence",x),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}return{update:s}}function u0e(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,f=e.get(l,u);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return f}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}const L6=new oi,VU=new $k(1,1),D6=new Zb,F6=new ST,B6=new Qb,WU=[],qU=[],HU=new Float32Array(16),$U=new Float32Array(9),GU=new Float32Array(4);function av(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=WU[i];if(s===void 0&&(s=new Float32Array(i),WU[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Qi(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function es(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function qT(t,e){let n=qU[e];n===void 0&&(n=new Int32Array(e),qU[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function d0e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function f0e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Qi(n,e))return;t.uniform2fv(this.addr,e),es(n,e)}}function h0e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Qi(n,e))return;t.uniform3fv(this.addr,e),es(n,e)}}function p0e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Qi(n,e))return;t.uniform4fv(this.addr,e),es(n,e)}}function m0e(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Qi(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),es(n,e)}else{if(Qi(n,r))return;GU.set(r),t.uniformMatrix2fv(this.addr,!1,GU),es(n,r)}}function g0e(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Qi(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),es(n,e)}else{if(Qi(n,r))return;$U.set(r),t.uniformMatrix3fv(this.addr,!1,$U),es(n,r)}}function y0e(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Qi(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),es(n,e)}else{if(Qi(n,r))return;HU.set(r),t.uniformMatrix4fv(this.addr,!1,HU),es(n,r)}}function v0e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function x0e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Qi(n,e))return;t.uniform2iv(this.addr,e),es(n,e)}}function b0e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Qi(n,e))return;t.uniform3iv(this.addr,e),es(n,e)}}function w0e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Qi(n,e))return;t.uniform4iv(this.addr,e),es(n,e)}}function _0e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function S0e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Qi(n,e))return;t.uniform2uiv(this.addr,e),es(n,e)}}function E0e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Qi(n,e))return;t.uniform3uiv(this.addr,e),es(n,e)}}function M0e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Qi(n,e))return;t.uniform4uiv(this.addr,e),es(n,e)}}function T0e(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let s;this.type===t.SAMPLER_2D_SHADOW?(VU.compareFunction=Bk,s=VU):s=L6,n.setTexture2D(e||s,i)}function C0e(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||F6,i)}function I0e(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||B6,i)}function R0e(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||D6,i)}function A0e(t){switch(t){case 5126:return d0e;case 35664:return f0e;case 35665:return h0e;case 35666:return p0e;case 35674:return m0e;case 35675:return g0e;case 35676:return y0e;case 5124:case 35670:return v0e;case 35667:case 35671:return x0e;case 35668:case 35672:return b0e;case 35669:case 35673:return w0e;case 5125:return _0e;case 36294:return S0e;case 36295:return E0e;case 36296:return M0e;case 35678:case 36198:case 36298:case 36306:case 35682:return T0e;case 35679:case 36299:case 36307:return C0e;case 35680:case 36300:case 36308:case 36293:return I0e;case 36289:case 36303:case 36311:case 36292:return R0e}}function N0e(t,e){t.uniform1fv(this.addr,e)}function P0e(t,e){const n=av(e,this.size,2);t.uniform2fv(this.addr,n)}function k0e(t,e){const n=av(e,this.size,3);t.uniform3fv(this.addr,n)}function O0e(t,e){const n=av(e,this.size,4);t.uniform4fv(this.addr,n)}function L0e(t,e){const n=av(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function D0e(t,e){const n=av(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function F0e(t,e){const n=av(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function B0e(t,e){t.uniform1iv(this.addr,e)}function j0e(t,e){t.uniform2iv(this.addr,e)}function U0e(t,e){t.uniform3iv(this.addr,e)}function z0e(t,e){t.uniform4iv(this.addr,e)}function V0e(t,e){t.uniform1uiv(this.addr,e)}function W0e(t,e){t.uniform2uiv(this.addr,e)}function q0e(t,e){t.uniform3uiv(this.addr,e)}function H0e(t,e){t.uniform4uiv(this.addr,e)}function $0e(t,e,n){const r=this.cache,i=e.length,s=qT(n,i);Qi(r,s)||(t.uniform1iv(this.addr,s),es(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||L6,s[o])}function G0e(t,e,n){const r=this.cache,i=e.length,s=qT(n,i);Qi(r,s)||(t.uniform1iv(this.addr,s),es(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||F6,s[o])}function X0e(t,e,n){const r=this.cache,i=e.length,s=qT(n,i);Qi(r,s)||(t.uniform1iv(this.addr,s),es(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||B6,s[o])}function K0e(t,e,n){const r=this.cache,i=e.length,s=qT(n,i);Qi(r,s)||(t.uniform1iv(this.addr,s),es(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||D6,s[o])}function Y0e(t){switch(t){case 5126:return N0e;case 35664:return P0e;case 35665:return k0e;case 35666:return O0e;case 35674:return L0e;case 35675:return D0e;case 35676:return F0e;case 5124:case 35670:return B0e;case 35667:case 35671:return j0e;case 35668:case 35672:return U0e;case 35669:case 35673:return z0e;case 5125:return V0e;case 36294:return W0e;case 36295:return q0e;case 36296:return H0e;case 35678:case 36198:case 36298:case 36306:case 35682:return $0e;case 35679:case 36299:case 36307:return G0e;case 35680:case 36300:case 36308:case 36293:return X0e;case 36289:case 36303:case 36311:case 36292:return K0e}}class Z0e{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=A0e(n.type)}}class J0e{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Y0e(n.type)}}class Q0e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const YA=/(\w+)(\])?(\[|\.)?/g;function XU(t,e){t.seq.push(e),t.map[e.id]=e}function ebe(t,e,n){const r=t.name,i=r.length;for(YA.lastIndex=0;;){const s=YA.exec(r),o=YA.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){XU(n,c===void 0?new Z0e(a,t,e):new J0e(a,t,e));break}else{let f=n.map[a];f===void 0&&(f=new Q0e(a),XU(n,f)),n=f}}}class n1{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);ebe(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function KU(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const tbe=37297;let nbe=0;function rbe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}const YU=new _n;function ibe(t){Xn._getMatrix(YU,Xn.workingColorSpace,t);const e=`mat3( ${YU.elements.map(n=>n.toFixed(4))} )`;switch(Xn.getTransfer(t)){case ab:return[e,"LinearTransferOETF"];case ur:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function ZU(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+rbe(t.getShaderSource(e),o)}else return i}function sbe(t,e){const n=ibe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function obe(t,e){let n;switch(e){case c$:n="Linear";break;case u$:n="Reinhard";break;case d$:n="Cineon";break;case hT:n="ACESFilmic";break;case h$:n="AgX";break;case p$:n="Neutral";break;case f$:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const MS=new pe;function abe(){Xn.getLuminanceCoefficients(MS);const t=MS.x.toFixed(4),e=MS.y.toFixed(4),n=MS.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function lbe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Dx).join(`
`)}function cbe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function ube(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Dx(t){return t!==""}function JU(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function QU(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const dbe=/^[ \t]*#include +<([\w\d./]+)>/gm;function XP(t){return t.replace(dbe,hbe)}const fbe=new Map;function hbe(t,e){let n=Nn[e];if(n===void 0){const r=fbe.get(e);if(r!==void 0)n=Nn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return XP(n)}const pbe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ez(t){return t.replace(pbe,mbe)}function mbe(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function tz(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function gbe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===fT?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===o0?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Bl&&(e="SHADOWMAP_TYPE_VSM"),e}function ybe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ud:case Wf:e="ENVMAP_TYPE_CUBE";break;case rv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function vbe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Wf:e="ENVMAP_MODE_REFRACTION";break}return e}function xbe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Kb:e="ENVMAP_BLENDING_MULTIPLY";break;case a$:e="ENVMAP_BLENDING_MIX";break;case l$:e="ENVMAP_BLENDING_ADD";break}return e}function bbe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function wbe(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=gbe(n),c=ybe(n),u=vbe(n),f=xbe(n),p=bbe(n),g=lbe(n),x=cbe(s),S=i.createProgram();let _,b,E=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(Dx).join(`
`),_.length>0&&(_+=`
`),b=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(Dx).join(`
`),b.length>0&&(b+=`
`)):(_=[tz(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Dx).join(`
`),b=[tz(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Lc?"#define TONE_MAPPING":"",n.toneMapping!==Lc?Nn.tonemapping_pars_fragment:"",n.toneMapping!==Lc?obe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Nn.colorspace_pars_fragment,sbe("linearToOutputTexel",n.outputColorSpace),abe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Dx).join(`
`)),o=XP(o),o=JU(o,n),o=QU(o,n),a=XP(a),a=JU(a,n),a=QU(a,n),o=ez(o),a=ez(a),n.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,_=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,b=["#define varying in",n.glslVersion===BP?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===BP?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const M=E+_+o,T=E+b+a,k=KU(i,i.VERTEX_SHADER,M),N=KU(i,i.FRAGMENT_SHADER,T);i.attachShader(S,k),i.attachShader(S,N),n.index0AttributeName!==void 0?i.bindAttribLocation(S,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(S,0,"position"),i.linkProgram(S);function D(P){if(t.debug.checkShaderErrors){const j=i.getProgramInfoLog(S).trim(),U=i.getShaderInfoLog(k).trim(),B=i.getShaderInfoLog(N).trim();let $=!0,q=!0;if(i.getProgramParameter(S,i.LINK_STATUS)===!1)if($=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,S,k,N);else{const te=ZU(i,k,"vertex"),W=ZU(i,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(S,i.VALIDATE_STATUS)+`

Material Name: `+P.name+`
Material Type: `+P.type+`

Program Info Log: `+j+`
`+te+`
`+W)}else j!==""?console.warn("THREE.WebGLProgram: Program Info Log:",j):(U===""||B==="")&&(q=!1);q&&(P.diagnostics={runnable:$,programLog:j,vertexShader:{log:U,prefix:_},fragmentShader:{log:B,prefix:b}})}i.deleteShader(k),i.deleteShader(N),L=new n1(i,S),R=ube(i,S)}let L;this.getUniforms=function(){return L===void 0&&D(this),L};let R;this.getAttributes=function(){return R===void 0&&D(this),R};let A=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return A===!1&&(A=i.getProgramParameter(S,tbe)),A},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(S),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=nbe++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=k,this.fragmentShader=N,this}let _be=0;class Sbe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Ebe(e),n.set(e,r)),r}}class Ebe{constructor(e){this.id=_be++,this.code=e,this.usedTimes=0}}function Mbe(t,e,n,r,i,s,o){const a=new kp,l=new Sbe,c=new Set,u=[],f=i.logarithmicDepthBuffer,p=i.vertexTextures;let g=i.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(R){return c.add(R),R===0?"uv":`uv${R}`}function _(R,A,P,j,U){const B=j.fog,$=U.geometry,q=R.isMeshStandardMaterial?j.environment:null,te=(R.isMeshStandardMaterial?n:e).get(R.envMap||q),W=te&&te.mapping===rv?te.image.height:null,Z=x[R.type];R.precision!==null&&(g=i.getMaxPrecision(R.precision),g!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",g,"instead."));const J=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,Y=J!==void 0?J.length:0;let oe=0;$.morphAttributes.position!==void 0&&(oe=1),$.morphAttributes.normal!==void 0&&(oe=2),$.morphAttributes.color!==void 0&&(oe=3);let ce,ie,ue,de;if(Z){const yn=Vl[Z];ce=yn.vertexShader,ie=yn.fragmentShader}else ce=R.vertexShader,ie=R.fragmentShader,l.update(R),ue=l.getVertexShaderID(R),de=l.getFragmentShaderID(R);const be=t.getRenderTarget(),we=t.state.buffers.depth.getReversed(),Ce=U.isInstancedMesh===!0,Ie=U.isBatchedMesh===!0,Fe=!!R.map,ve=!!R.matcap,_e=!!te,se=!!R.aoMap,$e=!!R.lightMap,je=!!R.bumpMap,Ze=!!R.normalMap,le=!!R.displacementMap,ge=!!R.emissiveMap,fe=!!R.metalnessMap,Q=!!R.roughnessMap,G=R.anisotropy>0,me=R.clearcoat>0,he=R.dispersion>0,Te=R.iridescence>0,Oe=R.sheen>0,Qe=R.transmission>0,Ye=G&&!!R.anisotropyMap,at=me&&!!R.clearcoatMap,Ft=me&&!!R.clearcoatNormalMap,et=me&&!!R.clearcoatRoughnessMap,gt=Te&&!!R.iridescenceMap,kt=Te&&!!R.iridescenceThicknessMap,Bt=Oe&&!!R.sheenColorMap,dt=Oe&&!!R.sheenRoughnessMap,Ee=!!R.specularMap,He=!!R.specularColorMap,ft=!!R.specularIntensityMap,Se=Qe&&!!R.transmissionMap,nt=Qe&&!!R.thicknessMap,Ve=!!R.gradientMap,Ke=!!R.alphaMap,vt=R.alphaTest>0,pt=!!R.alphaHash,Xt=!!R.extensions;let Dn=Lc;R.toneMapped&&(be===null||be.isXRRenderTarget===!0)&&(Dn=t.toneMapping);const sr={shaderID:Z,shaderType:R.type,shaderName:R.name,vertexShader:ce,fragmentShader:ie,defines:R.defines,customVertexShaderID:ue,customFragmentShaderID:de,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:g,batching:Ie,batchingColor:Ie&&U._colorsTexture!==null,instancing:Ce,instancingColor:Ce&&U.instanceColor!==null,instancingMorph:Ce&&U.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:be===null?t.outputColorSpace:be.isXRRenderTarget===!0?be.texture.colorSpace:Zp,alphaToCoverage:!!R.alphaToCoverage,map:Fe,matcap:ve,envMap:_e,envMapMode:_e&&te.mapping,envMapCubeUVHeight:W,aoMap:se,lightMap:$e,bumpMap:je,normalMap:Ze,displacementMap:p&&le,emissiveMap:ge,normalMapObjectSpace:Ze&&R.normalMapType===w$,normalMapTangentSpace:Ze&&R.normalMapType===Xf,metalnessMap:fe,roughnessMap:Q,anisotropy:G,anisotropyMap:Ye,clearcoat:me,clearcoatMap:at,clearcoatNormalMap:Ft,clearcoatRoughnessMap:et,dispersion:he,iridescence:Te,iridescenceMap:gt,iridescenceThicknessMap:kt,sheen:Oe,sheenColorMap:Bt,sheenRoughnessMap:dt,specularMap:Ee,specularColorMap:He,specularIntensityMap:ft,transmission:Qe,transmissionMap:Se,thicknessMap:nt,gradientMap:Ve,opaque:R.transparent===!1&&R.blending===Ap&&R.alphaToCoverage===!1,alphaMap:Ke,alphaTest:vt,alphaHash:pt,combine:R.combine,mapUv:Fe&&S(R.map.channel),aoMapUv:se&&S(R.aoMap.channel),lightMapUv:$e&&S(R.lightMap.channel),bumpMapUv:je&&S(R.bumpMap.channel),normalMapUv:Ze&&S(R.normalMap.channel),displacementMapUv:le&&S(R.displacementMap.channel),emissiveMapUv:ge&&S(R.emissiveMap.channel),metalnessMapUv:fe&&S(R.metalnessMap.channel),roughnessMapUv:Q&&S(R.roughnessMap.channel),anisotropyMapUv:Ye&&S(R.anisotropyMap.channel),clearcoatMapUv:at&&S(R.clearcoatMap.channel),clearcoatNormalMapUv:Ft&&S(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:et&&S(R.clearcoatRoughnessMap.channel),iridescenceMapUv:gt&&S(R.iridescenceMap.channel),iridescenceThicknessMapUv:kt&&S(R.iridescenceThicknessMap.channel),sheenColorMapUv:Bt&&S(R.sheenColorMap.channel),sheenRoughnessMapUv:dt&&S(R.sheenRoughnessMap.channel),specularMapUv:Ee&&S(R.specularMap.channel),specularColorMapUv:He&&S(R.specularColorMap.channel),specularIntensityMapUv:ft&&S(R.specularIntensityMap.channel),transmissionMapUv:Se&&S(R.transmissionMap.channel),thicknessMapUv:nt&&S(R.thicknessMap.channel),alphaMapUv:Ke&&S(R.alphaMap.channel),vertexTangents:!!$.attributes.tangent&&(Ze||G),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,pointsUvs:U.isPoints===!0&&!!$.attributes.uv&&(Fe||Ke),fog:!!B,useFog:R.fog===!0,fogExp2:!!B&&B.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:we,skinning:U.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:oe,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:t.shadowMap.enabled&&P.length>0,shadowMapType:t.shadowMap.type,toneMapping:Dn,decodeVideoTexture:Fe&&R.map.isVideoTexture===!0&&Xn.getTransfer(R.map.colorSpace)===ur,decodeVideoTextureEmissive:ge&&R.emissiveMap.isVideoTexture===!0&&Xn.getTransfer(R.emissiveMap.colorSpace)===ur,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Cc,flipSided:R.side===So,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:Xt&&R.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Xt&&R.extensions.multiDraw===!0||Ie)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return sr.vertexUv1s=c.has(1),sr.vertexUv2s=c.has(2),sr.vertexUv3s=c.has(3),c.clear(),sr}function b(R){const A=[];if(R.shaderID?A.push(R.shaderID):(A.push(R.customVertexShaderID),A.push(R.customFragmentShaderID)),R.defines!==void 0)for(const P in R.defines)A.push(P),A.push(R.defines[P]);return R.isRawShaderMaterial===!1&&(E(A,R),M(A,R),A.push(t.outputColorSpace)),A.push(R.customProgramCacheKey),A.join()}function E(R,A){R.push(A.precision),R.push(A.outputColorSpace),R.push(A.envMapMode),R.push(A.envMapCubeUVHeight),R.push(A.mapUv),R.push(A.alphaMapUv),R.push(A.lightMapUv),R.push(A.aoMapUv),R.push(A.bumpMapUv),R.push(A.normalMapUv),R.push(A.displacementMapUv),R.push(A.emissiveMapUv),R.push(A.metalnessMapUv),R.push(A.roughnessMapUv),R.push(A.anisotropyMapUv),R.push(A.clearcoatMapUv),R.push(A.clearcoatNormalMapUv),R.push(A.clearcoatRoughnessMapUv),R.push(A.iridescenceMapUv),R.push(A.iridescenceThicknessMapUv),R.push(A.sheenColorMapUv),R.push(A.sheenRoughnessMapUv),R.push(A.specularMapUv),R.push(A.specularColorMapUv),R.push(A.specularIntensityMapUv),R.push(A.transmissionMapUv),R.push(A.thicknessMapUv),R.push(A.combine),R.push(A.fogExp2),R.push(A.sizeAttenuation),R.push(A.morphTargetsCount),R.push(A.morphAttributeCount),R.push(A.numDirLights),R.push(A.numPointLights),R.push(A.numSpotLights),R.push(A.numSpotLightMaps),R.push(A.numHemiLights),R.push(A.numRectAreaLights),R.push(A.numDirLightShadows),R.push(A.numPointLightShadows),R.push(A.numSpotLightShadows),R.push(A.numSpotLightShadowsWithMaps),R.push(A.numLightProbes),R.push(A.shadowMapType),R.push(A.toneMapping),R.push(A.numClippingPlanes),R.push(A.numClipIntersection),R.push(A.depthPacking)}function M(R,A){a.disableAll(),A.supportsVertexTextures&&a.enable(0),A.instancing&&a.enable(1),A.instancingColor&&a.enable(2),A.instancingMorph&&a.enable(3),A.matcap&&a.enable(4),A.envMap&&a.enable(5),A.normalMapObjectSpace&&a.enable(6),A.normalMapTangentSpace&&a.enable(7),A.clearcoat&&a.enable(8),A.iridescence&&a.enable(9),A.alphaTest&&a.enable(10),A.vertexColors&&a.enable(11),A.vertexAlphas&&a.enable(12),A.vertexUv1s&&a.enable(13),A.vertexUv2s&&a.enable(14),A.vertexUv3s&&a.enable(15),A.vertexTangents&&a.enable(16),A.anisotropy&&a.enable(17),A.alphaHash&&a.enable(18),A.batching&&a.enable(19),A.dispersion&&a.enable(20),A.batchingColor&&a.enable(21),R.push(a.mask),a.disableAll(),A.fog&&a.enable(0),A.useFog&&a.enable(1),A.flatShading&&a.enable(2),A.logarithmicDepthBuffer&&a.enable(3),A.reverseDepthBuffer&&a.enable(4),A.skinning&&a.enable(5),A.morphTargets&&a.enable(6),A.morphNormals&&a.enable(7),A.morphColors&&a.enable(8),A.premultipliedAlpha&&a.enable(9),A.shadowMapEnabled&&a.enable(10),A.doubleSided&&a.enable(11),A.flipSided&&a.enable(12),A.useDepthPacking&&a.enable(13),A.dithering&&a.enable(14),A.transmission&&a.enable(15),A.sheen&&a.enable(16),A.opaque&&a.enable(17),A.pointsUvs&&a.enable(18),A.decodeVideoTexture&&a.enable(19),A.decodeVideoTextureEmissive&&a.enable(20),A.alphaToCoverage&&a.enable(21),R.push(a.mask)}function T(R){const A=x[R.type];let P;if(A){const j=Vl[A];P=O$.clone(j.uniforms)}else P=R.uniforms;return P}function k(R,A){let P;for(let j=0,U=u.length;j<U;j++){const B=u[j];if(B.cacheKey===A){P=B,++P.usedTimes;break}}return P===void 0&&(P=new wbe(t,A,R,s),u.push(P)),P}function N(R){if(--R.usedTimes===0){const A=u.indexOf(R);u[A]=u[u.length-1],u.pop(),R.destroy()}}function D(R){l.remove(R)}function L(){l.dispose()}return{getParameters:_,getProgramCacheKey:b,getUniforms:T,acquireProgram:k,releaseProgram:N,releaseShaderCache:D,programs:u,dispose:L}}function Tbe(){let t=new WeakMap;function e(o){return t.has(o)}function n(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function r(o){t.delete(o)}function i(o,a,l){t.get(o)[a]=l}function s(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:s}}function Cbe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function nz(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function rz(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(f,p,g,x,S,_){let b=t[e];return b===void 0?(b={id:f.id,object:f,geometry:p,material:g,groupOrder:x,renderOrder:f.renderOrder,z:S,group:_},t[e]=b):(b.id=f.id,b.object=f,b.geometry=p,b.material=g,b.groupOrder=x,b.renderOrder=f.renderOrder,b.z=S,b.group=_),e++,b}function a(f,p,g,x,S,_){const b=o(f,p,g,x,S,_);g.transmission>0?r.push(b):g.transparent===!0?i.push(b):n.push(b)}function l(f,p,g,x,S,_){const b=o(f,p,g,x,S,_);g.transmission>0?r.unshift(b):g.transparent===!0?i.unshift(b):n.unshift(b)}function c(f,p){n.length>1&&n.sort(f||Cbe),r.length>1&&r.sort(p||nz),i.length>1&&i.sort(p||nz)}function u(){for(let f=e,p=t.length;f<p;f++){const g=t[f];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function Ibe(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new rz,t.set(r,[o])):i>=s.length?(o=new rz,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function Rbe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new pe,color:new Nt};break;case"SpotLight":n={position:new pe,direction:new pe,color:new Nt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new pe,color:new Nt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new pe,skyColor:new Nt,groundColor:new Nt};break;case"RectAreaLight":n={color:new Nt,position:new pe,halfWidth:new pe,halfHeight:new pe};break}return t[e.id]=n,n}}}function Abe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Nbe=0;function Pbe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function kbe(t){const e=new Rbe,n=Abe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new pe);const i=new pe,s=new cn,o=new cn;function a(c){let u=0,f=0,p=0;for(let R=0;R<9;R++)r.probe[R].set(0,0,0);let g=0,x=0,S=0,_=0,b=0,E=0,M=0,T=0,k=0,N=0,D=0;c.sort(Pbe);for(let R=0,A=c.length;R<A;R++){const P=c[R],j=P.color,U=P.intensity,B=P.distance,$=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)u+=j.r*U,f+=j.g*U,p+=j.b*U;else if(P.isLightProbe){for(let q=0;q<9;q++)r.probe[q].addScaledVector(P.sh.coefficients[q],U);D++}else if(P.isDirectionalLight){const q=e.get(P);if(q.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){const te=P.shadow,W=n.get(P);W.shadowIntensity=te.intensity,W.shadowBias=te.bias,W.shadowNormalBias=te.normalBias,W.shadowRadius=te.radius,W.shadowMapSize=te.mapSize,r.directionalShadow[g]=W,r.directionalShadowMap[g]=$,r.directionalShadowMatrix[g]=P.shadow.matrix,E++}r.directional[g]=q,g++}else if(P.isSpotLight){const q=e.get(P);q.position.setFromMatrixPosition(P.matrixWorld),q.color.copy(j).multiplyScalar(U),q.distance=B,q.coneCos=Math.cos(P.angle),q.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),q.decay=P.decay,r.spot[S]=q;const te=P.shadow;if(P.map&&(r.spotLightMap[k]=P.map,k++,te.updateMatrices(P),P.castShadow&&N++),r.spotLightMatrix[S]=te.matrix,P.castShadow){const W=n.get(P);W.shadowIntensity=te.intensity,W.shadowBias=te.bias,W.shadowNormalBias=te.normalBias,W.shadowRadius=te.radius,W.shadowMapSize=te.mapSize,r.spotShadow[S]=W,r.spotShadowMap[S]=$,T++}S++}else if(P.isRectAreaLight){const q=e.get(P);q.color.copy(j).multiplyScalar(U),q.halfWidth.set(P.width*.5,0,0),q.halfHeight.set(0,P.height*.5,0),r.rectArea[_]=q,_++}else if(P.isPointLight){const q=e.get(P);if(q.color.copy(P.color).multiplyScalar(P.intensity),q.distance=P.distance,q.decay=P.decay,P.castShadow){const te=P.shadow,W=n.get(P);W.shadowIntensity=te.intensity,W.shadowBias=te.bias,W.shadowNormalBias=te.normalBias,W.shadowRadius=te.radius,W.shadowMapSize=te.mapSize,W.shadowCameraNear=te.camera.near,W.shadowCameraFar=te.camera.far,r.pointShadow[x]=W,r.pointShadowMap[x]=$,r.pointShadowMatrix[x]=P.shadow.matrix,M++}r.point[x]=q,x++}else if(P.isHemisphereLight){const q=e.get(P);q.skyColor.copy(P.color).multiplyScalar(U),q.groundColor.copy(P.groundColor).multiplyScalar(U),r.hemi[b]=q,b++}}_>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=bt.LTC_FLOAT_1,r.rectAreaLTC2=bt.LTC_FLOAT_2):(r.rectAreaLTC1=bt.LTC_HALF_1,r.rectAreaLTC2=bt.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=f,r.ambient[2]=p;const L=r.hash;(L.directionalLength!==g||L.pointLength!==x||L.spotLength!==S||L.rectAreaLength!==_||L.hemiLength!==b||L.numDirectionalShadows!==E||L.numPointShadows!==M||L.numSpotShadows!==T||L.numSpotMaps!==k||L.numLightProbes!==D)&&(r.directional.length=g,r.spot.length=S,r.rectArea.length=_,r.point.length=x,r.hemi.length=b,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=M,r.pointShadowMap.length=M,r.spotShadow.length=T,r.spotShadowMap.length=T,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=M,r.spotLightMatrix.length=T+k-N,r.spotLightMap.length=k,r.numSpotLightShadowsWithMaps=N,r.numLightProbes=D,L.directionalLength=g,L.pointLength=x,L.spotLength=S,L.rectAreaLength=_,L.hemiLength=b,L.numDirectionalShadows=E,L.numPointShadows=M,L.numSpotShadows=T,L.numSpotMaps=k,L.numLightProbes=D,r.version=Nbe++)}function l(c,u){let f=0,p=0,g=0,x=0,S=0;const _=u.matrixWorldInverse;for(let b=0,E=c.length;b<E;b++){const M=c[b];if(M.isDirectionalLight){const T=r.directional[f];T.direction.setFromMatrixPosition(M.matrixWorld),i.setFromMatrixPosition(M.target.matrixWorld),T.direction.sub(i),T.direction.transformDirection(_),f++}else if(M.isSpotLight){const T=r.spot[g];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(_),T.direction.setFromMatrixPosition(M.matrixWorld),i.setFromMatrixPosition(M.target.matrixWorld),T.direction.sub(i),T.direction.transformDirection(_),g++}else if(M.isRectAreaLight){const T=r.rectArea[x];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(_),o.identity(),s.copy(M.matrixWorld),s.premultiply(_),o.extractRotation(s),T.halfWidth.set(M.width*.5,0,0),T.halfHeight.set(0,M.height*.5,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),x++}else if(M.isPointLight){const T=r.point[p];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(_),p++}else if(M.isHemisphereLight){const T=r.hemi[S];T.direction.setFromMatrixPosition(M.matrixWorld),T.direction.transformDirection(_),S++}}}return{setup:a,setupView:l,state:r}}function iz(t){const e=new kbe(t),n=[],r=[];function i(u){c.camera=u,n.length=0,r.length=0}function s(u){n.push(u)}function o(u){r.push(u)}function a(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Obe(t){let e=new WeakMap;function n(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new iz(t),e.set(i,[a])):s>=o.length?(a=new iz(t),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:n,dispose:r}}const Lbe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Dbe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Fbe(t,e,n){let r=new ew;const i=new Je,s=new Je,o=new Qn,a=new eO({depthPacking:b$}),l=new tO,c={},u=n.maxTextureSize,f={[cd]:So,[So]:cd,[Cc]:Cc},p=new ec({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Je},radius:{value:4}},vertexShader:Lbe,fragmentShader:Dbe}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const x=new kn;x.setAttribute("position",new vr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new ji(x,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fT;let b=this.type;this.render=function(N,D,L){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||N.length===0)return;const R=t.getRenderTarget(),A=t.getActiveCubeFace(),P=t.getActiveMipmapLevel(),j=t.state;j.setBlending(Qu),j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);const U=b!==Bl&&this.type===Bl,B=b===Bl&&this.type!==Bl;for(let $=0,q=N.length;$<q;$++){const te=N[$],W=te.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;i.copy(W.mapSize);const Z=W.getFrameExtents();if(i.multiply(Z),s.copy(W.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/Z.x),i.x=s.x*Z.x,W.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/Z.y),i.y=s.y*Z.y,W.mapSize.y=s.y)),W.map===null||U===!0||B===!0){const Y=this.type!==Bl?{minFilter:Ts,magFilter:Ts}:{};W.map!==null&&W.map.dispose(),W.map=new Wc(i.x,i.y,Y),W.map.texture.name=te.name+".shadowMap",W.camera.updateProjectionMatrix()}t.setRenderTarget(W.map),t.clear();const J=W.getViewportCount();for(let Y=0;Y<J;Y++){const oe=W.getViewport(Y);o.set(s.x*oe.x,s.y*oe.y,s.x*oe.z,s.y*oe.w),j.viewport(o),W.updateMatrices(te,Y),r=W.getFrustum(),T(D,L,W.camera,te,this.type)}W.isPointLightShadow!==!0&&this.type===Bl&&E(W,L),W.needsUpdate=!1}b=this.type,_.needsUpdate=!1,t.setRenderTarget(R,A,P)};function E(N,D){const L=e.update(S);p.defines.VSM_SAMPLES!==N.blurSamples&&(p.defines.VSM_SAMPLES=N.blurSamples,g.defines.VSM_SAMPLES=N.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new Wc(i.x,i.y)),p.uniforms.shadow_pass.value=N.map.texture,p.uniforms.resolution.value=N.mapSize,p.uniforms.radius.value=N.radius,t.setRenderTarget(N.mapPass),t.clear(),t.renderBufferDirect(D,null,L,p,S,null),g.uniforms.shadow_pass.value=N.mapPass.texture,g.uniforms.resolution.value=N.mapSize,g.uniforms.radius.value=N.radius,t.setRenderTarget(N.map),t.clear(),t.renderBufferDirect(D,null,L,g,S,null)}function M(N,D,L,R){let A=null;const P=L.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(P!==void 0)A=P;else if(A=L.isPointLight===!0?l:a,t.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const j=A.uuid,U=D.uuid;let B=c[j];B===void 0&&(B={},c[j]=B);let $=B[U];$===void 0&&($=A.clone(),B[U]=$,D.addEventListener("dispose",k)),A=$}if(A.visible=D.visible,A.wireframe=D.wireframe,R===Bl?A.side=D.shadowSide!==null?D.shadowSide:D.side:A.side=D.shadowSide!==null?D.shadowSide:f[D.side],A.alphaMap=D.alphaMap,A.alphaTest=D.alphaTest,A.map=D.map,A.clipShadows=D.clipShadows,A.clippingPlanes=D.clippingPlanes,A.clipIntersection=D.clipIntersection,A.displacementMap=D.displacementMap,A.displacementScale=D.displacementScale,A.displacementBias=D.displacementBias,A.wireframeLinewidth=D.wireframeLinewidth,A.linewidth=D.linewidth,L.isPointLight===!0&&A.isMeshDistanceMaterial===!0){const j=t.properties.get(A);j.light=L}return A}function T(N,D,L,R,A){if(N.visible===!1)return;if(N.layers.test(D.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&A===Bl)&&(!N.frustumCulled||r.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,N.matrixWorld);const U=e.update(N),B=N.material;if(Array.isArray(B)){const $=U.groups;for(let q=0,te=$.length;q<te;q++){const W=$[q],Z=B[W.materialIndex];if(Z&&Z.visible){const J=M(N,Z,R,A);N.onBeforeShadow(t,N,D,L,U,J,W),t.renderBufferDirect(L,null,U,J,N,W),N.onAfterShadow(t,N,D,L,U,J,W)}}}else if(B.visible){const $=M(N,B,R,A);N.onBeforeShadow(t,N,D,L,U,$,null),t.renderBufferDirect(L,null,U,$,N,null),N.onAfterShadow(t,N,D,L,U,$,null)}}const j=N.children;for(let U=0,B=j.length;U<B;U++)T(j[U],D,L,R,A)}function k(N){N.target.removeEventListener("dispose",k);for(const L in c){const R=c[L],A=N.target.uuid;A in R&&(R[A].dispose(),delete R[A])}}}const Bbe={[NE]:PE,[kE]:DE,[OE]:FE,[Xp]:LE,[PE]:NE,[DE]:kE,[FE]:OE,[LE]:Xp};function jbe(t,e){function n(){let Se=!1;const nt=new Qn;let Ve=null;const Ke=new Qn(0,0,0,0);return{setMask:function(vt){Ve!==vt&&!Se&&(t.colorMask(vt,vt,vt,vt),Ve=vt)},setLocked:function(vt){Se=vt},setClear:function(vt,pt,Xt,Dn,sr){sr===!0&&(vt*=Dn,pt*=Dn,Xt*=Dn),nt.set(vt,pt,Xt,Dn),Ke.equals(nt)===!1&&(t.clearColor(vt,pt,Xt,Dn),Ke.copy(nt))},reset:function(){Se=!1,Ve=null,Ke.set(-1,0,0,0)}}}function r(){let Se=!1,nt=!1,Ve=null,Ke=null,vt=null;return{setReversed:function(pt){if(nt!==pt){const Xt=e.get("EXT_clip_control");nt?Xt.clipControlEXT(Xt.LOWER_LEFT_EXT,Xt.ZERO_TO_ONE_EXT):Xt.clipControlEXT(Xt.LOWER_LEFT_EXT,Xt.NEGATIVE_ONE_TO_ONE_EXT);const Dn=vt;vt=null,this.setClear(Dn)}nt=pt},getReversed:function(){return nt},setTest:function(pt){pt?be(t.DEPTH_TEST):we(t.DEPTH_TEST)},setMask:function(pt){Ve!==pt&&!Se&&(t.depthMask(pt),Ve=pt)},setFunc:function(pt){if(nt&&(pt=Bbe[pt]),Ke!==pt){switch(pt){case NE:t.depthFunc(t.NEVER);break;case PE:t.depthFunc(t.ALWAYS);break;case kE:t.depthFunc(t.LESS);break;case Xp:t.depthFunc(t.LEQUAL);break;case OE:t.depthFunc(t.EQUAL);break;case LE:t.depthFunc(t.GEQUAL);break;case DE:t.depthFunc(t.GREATER);break;case FE:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ke=pt}},setLocked:function(pt){Se=pt},setClear:function(pt){vt!==pt&&(nt&&(pt=1-pt),t.clearDepth(pt),vt=pt)},reset:function(){Se=!1,Ve=null,Ke=null,vt=null,nt=!1}}}function i(){let Se=!1,nt=null,Ve=null,Ke=null,vt=null,pt=null,Xt=null,Dn=null,sr=null;return{setTest:function(yn){Se||(yn?be(t.STENCIL_TEST):we(t.STENCIL_TEST))},setMask:function(yn){nt!==yn&&!Se&&(t.stencilMask(yn),nt=yn)},setFunc:function(yn,Or,jr){(Ve!==yn||Ke!==Or||vt!==jr)&&(t.stencilFunc(yn,Or,jr),Ve=yn,Ke=Or,vt=jr)},setOp:function(yn,Or,jr){(pt!==yn||Xt!==Or||Dn!==jr)&&(t.stencilOp(yn,Or,jr),pt=yn,Xt=Or,Dn=jr)},setLocked:function(yn){Se=yn},setClear:function(yn){sr!==yn&&(t.clearStencil(yn),sr=yn)},reset:function(){Se=!1,nt=null,Ve=null,Ke=null,vt=null,pt=null,Xt=null,Dn=null,sr=null}}}const s=new n,o=new r,a=new i,l=new WeakMap,c=new WeakMap;let u={},f={},p=new WeakMap,g=[],x=null,S=!1,_=null,b=null,E=null,M=null,T=null,k=null,N=null,D=new Nt(0,0,0),L=0,R=!1,A=null,P=null,j=null,U=null,B=null;const $=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let q=!1,te=0;const W=t.getParameter(t.VERSION);W.indexOf("WebGL")!==-1?(te=parseFloat(/^WebGL (\d)/.exec(W)[1]),q=te>=1):W.indexOf("OpenGL ES")!==-1&&(te=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),q=te>=2);let Z=null,J={};const Y=t.getParameter(t.SCISSOR_BOX),oe=t.getParameter(t.VIEWPORT),ce=new Qn().fromArray(Y),ie=new Qn().fromArray(oe);function ue(Se,nt,Ve,Ke){const vt=new Uint8Array(4),pt=t.createTexture();t.bindTexture(Se,pt),t.texParameteri(Se,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Se,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Xt=0;Xt<Ve;Xt++)Se===t.TEXTURE_3D||Se===t.TEXTURE_2D_ARRAY?t.texImage3D(nt,0,t.RGBA,1,1,Ke,0,t.RGBA,t.UNSIGNED_BYTE,vt):t.texImage2D(nt+Xt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,vt);return pt}const de={};de[t.TEXTURE_2D]=ue(t.TEXTURE_2D,t.TEXTURE_2D,1),de[t.TEXTURE_CUBE_MAP]=ue(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),de[t.TEXTURE_2D_ARRAY]=ue(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),de[t.TEXTURE_3D]=ue(t.TEXTURE_3D,t.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),be(t.DEPTH_TEST),o.setFunc(Xp),je(!1),Ze(PP),be(t.CULL_FACE),se(Qu);function be(Se){u[Se]!==!0&&(t.enable(Se),u[Se]=!0)}function we(Se){u[Se]!==!1&&(t.disable(Se),u[Se]=!1)}function Ce(Se,nt){return f[Se]!==nt?(t.bindFramebuffer(Se,nt),f[Se]=nt,Se===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=nt),Se===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=nt),!0):!1}function Ie(Se,nt){let Ve=g,Ke=!1;if(Se){Ve=p.get(nt),Ve===void 0&&(Ve=[],p.set(nt,Ve));const vt=Se.textures;if(Ve.length!==vt.length||Ve[0]!==t.COLOR_ATTACHMENT0){for(let pt=0,Xt=vt.length;pt<Xt;pt++)Ve[pt]=t.COLOR_ATTACHMENT0+pt;Ve.length=vt.length,Ke=!0}}else Ve[0]!==t.BACK&&(Ve[0]=t.BACK,Ke=!0);Ke&&t.drawBuffers(Ve)}function Fe(Se){return x!==Se?(t.useProgram(Se),x=Se,!0):!1}const ve={[_f]:t.FUNC_ADD,[qH]:t.FUNC_SUBTRACT,[HH]:t.FUNC_REVERSE_SUBTRACT};ve[$H]=t.MIN,ve[GH]=t.MAX;const _e={[XH]:t.ZERO,[KH]:t.ONE,[YH]:t.SRC_COLOR,[RE]:t.SRC_ALPHA,[n$]:t.SRC_ALPHA_SATURATE,[e$]:t.DST_COLOR,[JH]:t.DST_ALPHA,[ZH]:t.ONE_MINUS_SRC_COLOR,[AE]:t.ONE_MINUS_SRC_ALPHA,[t$]:t.ONE_MINUS_DST_COLOR,[QH]:t.ONE_MINUS_DST_ALPHA,[r$]:t.CONSTANT_COLOR,[i$]:t.ONE_MINUS_CONSTANT_COLOR,[s$]:t.CONSTANT_ALPHA,[o$]:t.ONE_MINUS_CONSTANT_ALPHA};function se(Se,nt,Ve,Ke,vt,pt,Xt,Dn,sr,yn){if(Se===Qu){S===!0&&(we(t.BLEND),S=!1);return}if(S===!1&&(be(t.BLEND),S=!0),Se!==WH){if(Se!==_||yn!==R){if((b!==_f||T!==_f)&&(t.blendEquation(t.FUNC_ADD),b=_f,T=_f),yn)switch(Se){case Ap:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case kP:t.blendFunc(t.ONE,t.ONE);break;case OP:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case LP:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Se);break}else switch(Se){case Ap:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case kP:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case OP:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case LP:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Se);break}E=null,M=null,k=null,N=null,D.set(0,0,0),L=0,_=Se,R=yn}return}vt=vt||nt,pt=pt||Ve,Xt=Xt||Ke,(nt!==b||vt!==T)&&(t.blendEquationSeparate(ve[nt],ve[vt]),b=nt,T=vt),(Ve!==E||Ke!==M||pt!==k||Xt!==N)&&(t.blendFuncSeparate(_e[Ve],_e[Ke],_e[pt],_e[Xt]),E=Ve,M=Ke,k=pt,N=Xt),(Dn.equals(D)===!1||sr!==L)&&(t.blendColor(Dn.r,Dn.g,Dn.b,sr),D.copy(Dn),L=sr),_=Se,R=!1}function $e(Se,nt){Se.side===Cc?we(t.CULL_FACE):be(t.CULL_FACE);let Ve=Se.side===So;nt&&(Ve=!Ve),je(Ve),Se.blending===Ap&&Se.transparent===!1?se(Qu):se(Se.blending,Se.blendEquation,Se.blendSrc,Se.blendDst,Se.blendEquationAlpha,Se.blendSrcAlpha,Se.blendDstAlpha,Se.blendColor,Se.blendAlpha,Se.premultipliedAlpha),o.setFunc(Se.depthFunc),o.setTest(Se.depthTest),o.setMask(Se.depthWrite),s.setMask(Se.colorWrite);const Ke=Se.stencilWrite;a.setTest(Ke),Ke&&(a.setMask(Se.stencilWriteMask),a.setFunc(Se.stencilFunc,Se.stencilRef,Se.stencilFuncMask),a.setOp(Se.stencilFail,Se.stencilZFail,Se.stencilZPass)),ge(Se.polygonOffset,Se.polygonOffsetFactor,Se.polygonOffsetUnits),Se.alphaToCoverage===!0?be(t.SAMPLE_ALPHA_TO_COVERAGE):we(t.SAMPLE_ALPHA_TO_COVERAGE)}function je(Se){A!==Se&&(Se?t.frontFace(t.CW):t.frontFace(t.CCW),A=Se)}function Ze(Se){Se!==UH?(be(t.CULL_FACE),Se!==P&&(Se===PP?t.cullFace(t.BACK):Se===zH?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):we(t.CULL_FACE),P=Se}function le(Se){Se!==j&&(q&&t.lineWidth(Se),j=Se)}function ge(Se,nt,Ve){Se?(be(t.POLYGON_OFFSET_FILL),(U!==nt||B!==Ve)&&(t.polygonOffset(nt,Ve),U=nt,B=Ve)):we(t.POLYGON_OFFSET_FILL)}function fe(Se){Se?be(t.SCISSOR_TEST):we(t.SCISSOR_TEST)}function Q(Se){Se===void 0&&(Se=t.TEXTURE0+$-1),Z!==Se&&(t.activeTexture(Se),Z=Se)}function G(Se,nt,Ve){Ve===void 0&&(Z===null?Ve=t.TEXTURE0+$-1:Ve=Z);let Ke=J[Ve];Ke===void 0&&(Ke={type:void 0,texture:void 0},J[Ve]=Ke),(Ke.type!==Se||Ke.texture!==nt)&&(Z!==Ve&&(t.activeTexture(Ve),Z=Ve),t.bindTexture(Se,nt||de[Se]),Ke.type=Se,Ke.texture=nt)}function me(){const Se=J[Z];Se!==void 0&&Se.type!==void 0&&(t.bindTexture(Se.type,null),Se.type=void 0,Se.texture=void 0)}function he(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Te(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Oe(){try{t.texSubImage2D.apply(t,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Qe(){try{t.texSubImage3D.apply(t,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Ye(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function at(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Ft(){try{t.texStorage2D.apply(t,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function et(){try{t.texStorage3D.apply(t,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function gt(){try{t.texImage2D.apply(t,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function kt(){try{t.texImage3D.apply(t,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Bt(Se){ce.equals(Se)===!1&&(t.scissor(Se.x,Se.y,Se.z,Se.w),ce.copy(Se))}function dt(Se){ie.equals(Se)===!1&&(t.viewport(Se.x,Se.y,Se.z,Se.w),ie.copy(Se))}function Ee(Se,nt){let Ve=c.get(nt);Ve===void 0&&(Ve=new WeakMap,c.set(nt,Ve));let Ke=Ve.get(Se);Ke===void 0&&(Ke=t.getUniformBlockIndex(nt,Se.name),Ve.set(Se,Ke))}function He(Se,nt){const Ke=c.get(nt).get(Se);l.get(nt)!==Ke&&(t.uniformBlockBinding(nt,Ke,Se.__bindingPointIndex),l.set(nt,Ke))}function ft(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),o.setReversed(!1),t.clearDepth(1),t.stencilMask(0xffffffff),t.stencilFunc(t.ALWAYS,0,0xffffffff),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},Z=null,J={},f={},p=new WeakMap,g=[],x=null,S=!1,_=null,b=null,E=null,M=null,T=null,k=null,N=null,D=new Nt(0,0,0),L=0,R=!1,A=null,P=null,j=null,U=null,B=null,ce.set(0,0,t.canvas.width,t.canvas.height),ie.set(0,0,t.canvas.width,t.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:be,disable:we,bindFramebuffer:Ce,drawBuffers:Ie,useProgram:Fe,setBlending:se,setMaterial:$e,setFlipSided:je,setCullFace:Ze,setLineWidth:le,setPolygonOffset:ge,setScissorTest:fe,activeTexture:Q,bindTexture:G,unbindTexture:me,compressedTexImage2D:he,compressedTexImage3D:Te,texImage2D:gt,texImage3D:kt,updateUBOMapping:Ee,uniformBlockBinding:He,texStorage2D:Ft,texStorage3D:et,texSubImage2D:Oe,texSubImage3D:Qe,compressedTexSubImage2D:Ye,compressedTexSubImage3D:at,scissor:Bt,viewport:dt,reset:ft}}function Ube(t,e,n,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Je,u=new WeakMap;let f;const p=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(Q,G){return g?new OffscreenCanvas(Q,G):ub("canvas")}function S(Q,G,me){let he=1;const Te=fe(Q);if((Te.width>me||Te.height>me)&&(he=me/Math.max(Te.width,Te.height)),he<1)if(typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Q instanceof ImageBitmap||typeof VideoFrame<"u"&&Q instanceof VideoFrame){const Oe=Math.floor(he*Te.width),Qe=Math.floor(he*Te.height);f===void 0&&(f=x(Oe,Qe));const Ye=G?x(Oe,Qe):f;return Ye.width=Oe,Ye.height=Qe,Ye.getContext("2d").drawImage(Q,0,0,Oe,Qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Te.width+"x"+Te.height+") to ("+Oe+"x"+Qe+")."),Ye}else return"data"in Q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Te.width+"x"+Te.height+")."),Q;return Q}function _(Q){return Q.generateMipmaps}function b(Q){t.generateMipmap(Q)}function E(Q){return Q.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:Q.isWebGL3DRenderTarget?t.TEXTURE_3D:Q.isWebGLArrayRenderTarget||Q.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function M(Q,G,me,he,Te=!1){if(Q!==null){if(t[Q]!==void 0)return t[Q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Q+"'")}let Oe=G;if(G===t.RED&&(me===t.FLOAT&&(Oe=t.R32F),me===t.HALF_FLOAT&&(Oe=t.R16F),me===t.UNSIGNED_BYTE&&(Oe=t.R8)),G===t.RED_INTEGER&&(me===t.UNSIGNED_BYTE&&(Oe=t.R8UI),me===t.UNSIGNED_SHORT&&(Oe=t.R16UI),me===t.UNSIGNED_INT&&(Oe=t.R32UI),me===t.BYTE&&(Oe=t.R8I),me===t.SHORT&&(Oe=t.R16I),me===t.INT&&(Oe=t.R32I)),G===t.RG&&(me===t.FLOAT&&(Oe=t.RG32F),me===t.HALF_FLOAT&&(Oe=t.RG16F),me===t.UNSIGNED_BYTE&&(Oe=t.RG8)),G===t.RG_INTEGER&&(me===t.UNSIGNED_BYTE&&(Oe=t.RG8UI),me===t.UNSIGNED_SHORT&&(Oe=t.RG16UI),me===t.UNSIGNED_INT&&(Oe=t.RG32UI),me===t.BYTE&&(Oe=t.RG8I),me===t.SHORT&&(Oe=t.RG16I),me===t.INT&&(Oe=t.RG32I)),G===t.RGB_INTEGER&&(me===t.UNSIGNED_BYTE&&(Oe=t.RGB8UI),me===t.UNSIGNED_SHORT&&(Oe=t.RGB16UI),me===t.UNSIGNED_INT&&(Oe=t.RGB32UI),me===t.BYTE&&(Oe=t.RGB8I),me===t.SHORT&&(Oe=t.RGB16I),me===t.INT&&(Oe=t.RGB32I)),G===t.RGBA_INTEGER&&(me===t.UNSIGNED_BYTE&&(Oe=t.RGBA8UI),me===t.UNSIGNED_SHORT&&(Oe=t.RGBA16UI),me===t.UNSIGNED_INT&&(Oe=t.RGBA32UI),me===t.BYTE&&(Oe=t.RGBA8I),me===t.SHORT&&(Oe=t.RGBA16I),me===t.INT&&(Oe=t.RGBA32I)),G===t.RGB&&me===t.UNSIGNED_INT_5_9_9_9_REV&&(Oe=t.RGB9_E5),G===t.RGBA){const Qe=Te?ab:Xn.getTransfer(he);me===t.FLOAT&&(Oe=t.RGBA32F),me===t.HALF_FLOAT&&(Oe=t.RGBA16F),me===t.UNSIGNED_BYTE&&(Oe=Qe===ur?t.SRGB8_ALPHA8:t.RGBA8),me===t.UNSIGNED_SHORT_4_4_4_4&&(Oe=t.RGBA4),me===t.UNSIGNED_SHORT_5_5_5_1&&(Oe=t.RGB5_A1)}return(Oe===t.R16F||Oe===t.R32F||Oe===t.RG16F||Oe===t.RG32F||Oe===t.RGBA16F||Oe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Oe}function T(Q,G){let me;return Q?G===null||G===dd||G===Kp?me=t.DEPTH24_STENCIL8:G===Qo?me=t.DEPTH32F_STENCIL8:G===jy&&(me=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):G===null||G===dd||G===Kp?me=t.DEPTH_COMPONENT24:G===Qo?me=t.DEPTH_COMPONENT32F:G===jy&&(me=t.DEPTH_COMPONENT16),me}function k(Q,G){return _(Q)===!0||Q.isFramebufferTexture&&Q.minFilter!==Ts&&Q.minFilter!==Ji?Math.log2(Math.max(G.width,G.height))+1:Q.mipmaps!==void 0&&Q.mipmaps.length>0?Q.mipmaps.length:Q.isCompressedTexture&&Array.isArray(Q.image)?G.mipmaps.length:1}function N(Q){const G=Q.target;G.removeEventListener("dispose",N),L(G),G.isVideoTexture&&u.delete(G)}function D(Q){const G=Q.target;G.removeEventListener("dispose",D),A(G)}function L(Q){const G=r.get(Q);if(G.__webglInit===void 0)return;const me=Q.source,he=p.get(me);if(he){const Te=he[G.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&R(Q),Object.keys(he).length===0&&p.delete(me)}r.remove(Q)}function R(Q){const G=r.get(Q);t.deleteTexture(G.__webglTexture);const me=Q.source,he=p.get(me);delete he[G.__cacheKey],o.memory.textures--}function A(Q){const G=r.get(Q);if(Q.depthTexture&&(Q.depthTexture.dispose(),r.remove(Q.depthTexture)),Q.isWebGLCubeRenderTarget)for(let he=0;he<6;he++){if(Array.isArray(G.__webglFramebuffer[he]))for(let Te=0;Te<G.__webglFramebuffer[he].length;Te++)t.deleteFramebuffer(G.__webglFramebuffer[he][Te]);else t.deleteFramebuffer(G.__webglFramebuffer[he]);G.__webglDepthbuffer&&t.deleteRenderbuffer(G.__webglDepthbuffer[he])}else{if(Array.isArray(G.__webglFramebuffer))for(let he=0;he<G.__webglFramebuffer.length;he++)t.deleteFramebuffer(G.__webglFramebuffer[he]);else t.deleteFramebuffer(G.__webglFramebuffer);if(G.__webglDepthbuffer&&t.deleteRenderbuffer(G.__webglDepthbuffer),G.__webglMultisampledFramebuffer&&t.deleteFramebuffer(G.__webglMultisampledFramebuffer),G.__webglColorRenderbuffer)for(let he=0;he<G.__webglColorRenderbuffer.length;he++)G.__webglColorRenderbuffer[he]&&t.deleteRenderbuffer(G.__webglColorRenderbuffer[he]);G.__webglDepthRenderbuffer&&t.deleteRenderbuffer(G.__webglDepthRenderbuffer)}const me=Q.textures;for(let he=0,Te=me.length;he<Te;he++){const Oe=r.get(me[he]);Oe.__webglTexture&&(t.deleteTexture(Oe.__webglTexture),o.memory.textures--),r.remove(me[he])}r.remove(Q)}let P=0;function j(){P=0}function U(){const Q=P;return Q>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Q+" texture units while this GPU supports only "+i.maxTextures),P+=1,Q}function B(Q){const G=[];return G.push(Q.wrapS),G.push(Q.wrapT),G.push(Q.wrapR||0),G.push(Q.magFilter),G.push(Q.minFilter),G.push(Q.anisotropy),G.push(Q.internalFormat),G.push(Q.format),G.push(Q.type),G.push(Q.generateMipmaps),G.push(Q.premultiplyAlpha),G.push(Q.flipY),G.push(Q.unpackAlignment),G.push(Q.colorSpace),G.join()}function $(Q,G){const me=r.get(Q);if(Q.isVideoTexture&&le(Q),Q.isRenderTargetTexture===!1&&Q.version>0&&me.__version!==Q.version){const he=Q.image;if(he===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(he.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie(me,Q,G);return}}n.bindTexture(t.TEXTURE_2D,me.__webglTexture,t.TEXTURE0+G)}function q(Q,G){const me=r.get(Q);if(Q.version>0&&me.__version!==Q.version){ie(me,Q,G);return}n.bindTexture(t.TEXTURE_2D_ARRAY,me.__webglTexture,t.TEXTURE0+G)}function te(Q,G){const me=r.get(Q);if(Q.version>0&&me.__version!==Q.version){ie(me,Q,G);return}n.bindTexture(t.TEXTURE_3D,me.__webglTexture,t.TEXTURE0+G)}function W(Q,G){const me=r.get(Q);if(Q.version>0&&me.__version!==Q.version){ue(me,Q,G);return}n.bindTexture(t.TEXTURE_CUBE_MAP,me.__webglTexture,t.TEXTURE0+G)}const Z={[rb]:t.REPEAT,[il]:t.CLAMP_TO_EDGE,[ib]:t.MIRRORED_REPEAT},J={[Ts]:t.NEAREST,[Ck]:t.NEAREST_MIPMAP_NEAREST,[Zg]:t.NEAREST_MIPMAP_LINEAR,[Ji]:t.LINEAR,[a0]:t.LINEAR_MIPMAP_NEAREST,[Ac]:t.LINEAR_MIPMAP_LINEAR},Y={[_$]:t.NEVER,[I$]:t.ALWAYS,[S$]:t.LESS,[Bk]:t.LEQUAL,[E$]:t.EQUAL,[C$]:t.GEQUAL,[M$]:t.GREATER,[T$]:t.NOTEQUAL};function oe(Q,G){if(G.type===Qo&&e.has("OES_texture_float_linear")===!1&&(G.magFilter===Ji||G.magFilter===a0||G.magFilter===Zg||G.magFilter===Ac||G.minFilter===Ji||G.minFilter===a0||G.minFilter===Zg||G.minFilter===Ac)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(Q,t.TEXTURE_WRAP_S,Z[G.wrapS]),t.texParameteri(Q,t.TEXTURE_WRAP_T,Z[G.wrapT]),(Q===t.TEXTURE_3D||Q===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Q,t.TEXTURE_WRAP_R,Z[G.wrapR]),t.texParameteri(Q,t.TEXTURE_MAG_FILTER,J[G.magFilter]),t.texParameteri(Q,t.TEXTURE_MIN_FILTER,J[G.minFilter]),G.compareFunction&&(t.texParameteri(Q,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Q,t.TEXTURE_COMPARE_FUNC,Y[G.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(G.magFilter===Ts||G.minFilter!==Zg&&G.minFilter!==Ac||G.type===Qo&&e.has("OES_texture_float_linear")===!1)return;if(G.anisotropy>1||r.get(G).__currentAnisotropy){const me=e.get("EXT_texture_filter_anisotropic");t.texParameterf(Q,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,i.getMaxAnisotropy())),r.get(G).__currentAnisotropy=G.anisotropy}}}function ce(Q,G){let me=!1;Q.__webglInit===void 0&&(Q.__webglInit=!0,G.addEventListener("dispose",N));const he=G.source;let Te=p.get(he);Te===void 0&&(Te={},p.set(he,Te));const Oe=B(G);if(Oe!==Q.__cacheKey){Te[Oe]===void 0&&(Te[Oe]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,me=!0),Te[Oe].usedTimes++;const Qe=Te[Q.__cacheKey];Qe!==void 0&&(Te[Q.__cacheKey].usedTimes--,Qe.usedTimes===0&&R(G)),Q.__cacheKey=Oe,Q.__webglTexture=Te[Oe].texture}return me}function ie(Q,G,me){let he=t.TEXTURE_2D;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(he=t.TEXTURE_2D_ARRAY),G.isData3DTexture&&(he=t.TEXTURE_3D);const Te=ce(Q,G),Oe=G.source;n.bindTexture(he,Q.__webglTexture,t.TEXTURE0+me);const Qe=r.get(Oe);if(Oe.version!==Qe.__version||Te===!0){n.activeTexture(t.TEXTURE0+me);const Ye=Xn.getPrimaries(Xn.workingColorSpace),at=G.colorSpace===Hu?null:Xn.getPrimaries(G.colorSpace),Ft=G.colorSpace===Hu||Ye===at?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,G.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,G.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ft);let et=S(G.image,!1,i.maxTextureSize);et=ge(G,et);const gt=s.convert(G.format,G.colorSpace),kt=s.convert(G.type);let Bt=M(G.internalFormat,gt,kt,G.colorSpace,G.isVideoTexture);oe(he,G);let dt;const Ee=G.mipmaps,He=G.isVideoTexture!==!0,ft=Qe.__version===void 0||Te===!0,Se=Oe.dataReady,nt=k(G,et);if(G.isDepthTexture)Bt=T(G.format===Yp,G.type),ft&&(He?n.texStorage2D(t.TEXTURE_2D,1,Bt,et.width,et.height):n.texImage2D(t.TEXTURE_2D,0,Bt,et.width,et.height,0,gt,kt,null));else if(G.isDataTexture)if(Ee.length>0){He&&ft&&n.texStorage2D(t.TEXTURE_2D,nt,Bt,Ee[0].width,Ee[0].height);for(let Ve=0,Ke=Ee.length;Ve<Ke;Ve++)dt=Ee[Ve],He?Se&&n.texSubImage2D(t.TEXTURE_2D,Ve,0,0,dt.width,dt.height,gt,kt,dt.data):n.texImage2D(t.TEXTURE_2D,Ve,Bt,dt.width,dt.height,0,gt,kt,dt.data);G.generateMipmaps=!1}else He?(ft&&n.texStorage2D(t.TEXTURE_2D,nt,Bt,et.width,et.height),Se&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,et.width,et.height,gt,kt,et.data)):n.texImage2D(t.TEXTURE_2D,0,Bt,et.width,et.height,0,gt,kt,et.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){He&&ft&&n.texStorage3D(t.TEXTURE_2D_ARRAY,nt,Bt,Ee[0].width,Ee[0].height,et.depth);for(let Ve=0,Ke=Ee.length;Ve<Ke;Ve++)if(dt=Ee[Ve],G.format!==qs)if(gt!==null)if(He){if(Se)if(G.layerUpdates.size>0){const vt=$P(dt.width,dt.height,G.format,G.type);for(const pt of G.layerUpdates){const Xt=dt.data.subarray(pt*vt/dt.data.BYTES_PER_ELEMENT,(pt+1)*vt/dt.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ve,0,0,pt,dt.width,dt.height,1,gt,Xt)}G.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ve,0,0,0,dt.width,dt.height,et.depth,gt,dt.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ve,Bt,dt.width,dt.height,et.depth,0,dt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else He?Se&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ve,0,0,0,dt.width,dt.height,et.depth,gt,kt,dt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ve,Bt,dt.width,dt.height,et.depth,0,gt,kt,dt.data)}else{He&&ft&&n.texStorage2D(t.TEXTURE_2D,nt,Bt,Ee[0].width,Ee[0].height);for(let Ve=0,Ke=Ee.length;Ve<Ke;Ve++)dt=Ee[Ve],G.format!==qs?gt!==null?He?Se&&n.compressedTexSubImage2D(t.TEXTURE_2D,Ve,0,0,dt.width,dt.height,gt,dt.data):n.compressedTexImage2D(t.TEXTURE_2D,Ve,Bt,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?Se&&n.texSubImage2D(t.TEXTURE_2D,Ve,0,0,dt.width,dt.height,gt,kt,dt.data):n.texImage2D(t.TEXTURE_2D,Ve,Bt,dt.width,dt.height,0,gt,kt,dt.data)}else if(G.isDataArrayTexture)if(He){if(ft&&n.texStorage3D(t.TEXTURE_2D_ARRAY,nt,Bt,et.width,et.height,et.depth),Se)if(G.layerUpdates.size>0){const Ve=$P(et.width,et.height,G.format,G.type);for(const Ke of G.layerUpdates){const vt=et.data.subarray(Ke*Ve/et.data.BYTES_PER_ELEMENT,(Ke+1)*Ve/et.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Ke,et.width,et.height,1,gt,kt,vt)}G.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,et.width,et.height,et.depth,gt,kt,et.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,Bt,et.width,et.height,et.depth,0,gt,kt,et.data);else if(G.isData3DTexture)He?(ft&&n.texStorage3D(t.TEXTURE_3D,nt,Bt,et.width,et.height,et.depth),Se&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,et.width,et.height,et.depth,gt,kt,et.data)):n.texImage3D(t.TEXTURE_3D,0,Bt,et.width,et.height,et.depth,0,gt,kt,et.data);else if(G.isFramebufferTexture){if(ft)if(He)n.texStorage2D(t.TEXTURE_2D,nt,Bt,et.width,et.height);else{let Ve=et.width,Ke=et.height;for(let vt=0;vt<nt;vt++)n.texImage2D(t.TEXTURE_2D,vt,Bt,Ve,Ke,0,gt,kt,null),Ve>>=1,Ke>>=1}}else if(Ee.length>0){if(He&&ft){const Ve=fe(Ee[0]);n.texStorage2D(t.TEXTURE_2D,nt,Bt,Ve.width,Ve.height)}for(let Ve=0,Ke=Ee.length;Ve<Ke;Ve++)dt=Ee[Ve],He?Se&&n.texSubImage2D(t.TEXTURE_2D,Ve,0,0,gt,kt,dt):n.texImage2D(t.TEXTURE_2D,Ve,Bt,gt,kt,dt);G.generateMipmaps=!1}else if(He){if(ft){const Ve=fe(et);n.texStorage2D(t.TEXTURE_2D,nt,Bt,Ve.width,Ve.height)}Se&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,gt,kt,et)}else n.texImage2D(t.TEXTURE_2D,0,Bt,gt,kt,et);_(G)&&b(he),Qe.__version=Oe.version,G.onUpdate&&G.onUpdate(G)}Q.__version=G.version}function ue(Q,G,me){if(G.image.length!==6)return;const he=ce(Q,G),Te=G.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Q.__webglTexture,t.TEXTURE0+me);const Oe=r.get(Te);if(Te.version!==Oe.__version||he===!0){n.activeTexture(t.TEXTURE0+me);const Qe=Xn.getPrimaries(Xn.workingColorSpace),Ye=G.colorSpace===Hu?null:Xn.getPrimaries(G.colorSpace),at=G.colorSpace===Hu||Qe===Ye?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,G.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,G.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,at);const Ft=G.isCompressedTexture||G.image[0].isCompressedTexture,et=G.image[0]&&G.image[0].isDataTexture,gt=[];for(let Ke=0;Ke<6;Ke++)!Ft&&!et?gt[Ke]=S(G.image[Ke],!0,i.maxCubemapSize):gt[Ke]=et?G.image[Ke].image:G.image[Ke],gt[Ke]=ge(G,gt[Ke]);const kt=gt[0],Bt=s.convert(G.format,G.colorSpace),dt=s.convert(G.type),Ee=M(G.internalFormat,Bt,dt,G.colorSpace),He=G.isVideoTexture!==!0,ft=Oe.__version===void 0||he===!0,Se=Te.dataReady;let nt=k(G,kt);oe(t.TEXTURE_CUBE_MAP,G);let Ve;if(Ft){He&&ft&&n.texStorage2D(t.TEXTURE_CUBE_MAP,nt,Ee,kt.width,kt.height);for(let Ke=0;Ke<6;Ke++){Ve=gt[Ke].mipmaps;for(let vt=0;vt<Ve.length;vt++){const pt=Ve[vt];G.format!==qs?Bt!==null?He?Se&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,vt,0,0,pt.width,pt.height,Bt,pt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,vt,Ee,pt.width,pt.height,0,pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):He?Se&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,vt,0,0,pt.width,pt.height,Bt,dt,pt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,vt,Ee,pt.width,pt.height,0,Bt,dt,pt.data)}}}else{if(Ve=G.mipmaps,He&&ft){Ve.length>0&&nt++;const Ke=fe(gt[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,nt,Ee,Ke.width,Ke.height)}for(let Ke=0;Ke<6;Ke++)if(et){He?Se&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,0,0,gt[Ke].width,gt[Ke].height,Bt,dt,gt[Ke].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,Ee,gt[Ke].width,gt[Ke].height,0,Bt,dt,gt[Ke].data);for(let vt=0;vt<Ve.length;vt++){const Xt=Ve[vt].image[Ke].image;He?Se&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,vt+1,0,0,Xt.width,Xt.height,Bt,dt,Xt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,vt+1,Ee,Xt.width,Xt.height,0,Bt,dt,Xt.data)}}else{He?Se&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,0,0,Bt,dt,gt[Ke]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,Ee,Bt,dt,gt[Ke]);for(let vt=0;vt<Ve.length;vt++){const pt=Ve[vt];He?Se&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,vt+1,0,0,Bt,dt,pt.image[Ke]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,vt+1,Ee,Bt,dt,pt.image[Ke])}}}_(G)&&b(t.TEXTURE_CUBE_MAP),Oe.__version=Te.version,G.onUpdate&&G.onUpdate(G)}Q.__version=G.version}function de(Q,G,me,he,Te,Oe){const Qe=s.convert(me.format,me.colorSpace),Ye=s.convert(me.type),at=M(me.internalFormat,Qe,Ye,me.colorSpace),Ft=r.get(G),et=r.get(me);if(et.__renderTarget=G,!Ft.__hasExternalTextures){const gt=Math.max(1,G.width>>Oe),kt=Math.max(1,G.height>>Oe);Te===t.TEXTURE_3D||Te===t.TEXTURE_2D_ARRAY?n.texImage3D(Te,Oe,at,gt,kt,G.depth,0,Qe,Ye,null):n.texImage2D(Te,Oe,at,gt,kt,0,Qe,Ye,null)}n.bindFramebuffer(t.FRAMEBUFFER,Q),Ze(G)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,he,Te,et.__webglTexture,0,je(G)):(Te===t.TEXTURE_2D||Te>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,he,Te,et.__webglTexture,Oe),n.bindFramebuffer(t.FRAMEBUFFER,null)}function be(Q,G,me){if(t.bindRenderbuffer(t.RENDERBUFFER,Q),G.depthBuffer){const he=G.depthTexture,Te=he&&he.isDepthTexture?he.type:null,Oe=T(G.stencilBuffer,Te),Qe=G.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ye=je(G);Ze(G)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ye,Oe,G.width,G.height):me?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ye,Oe,G.width,G.height):t.renderbufferStorage(t.RENDERBUFFER,Oe,G.width,G.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Qe,t.RENDERBUFFER,Q)}else{const he=G.textures;for(let Te=0;Te<he.length;Te++){const Oe=he[Te],Qe=s.convert(Oe.format,Oe.colorSpace),Ye=s.convert(Oe.type),at=M(Oe.internalFormat,Qe,Ye,Oe.colorSpace),Ft=je(G);me&&Ze(G)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ft,at,G.width,G.height):Ze(G)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ft,at,G.width,G.height):t.renderbufferStorage(t.RENDERBUFFER,at,G.width,G.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function we(Q,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Q),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const he=r.get(G.depthTexture);he.__renderTarget=G,(!he.__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),$(G.depthTexture,0);const Te=he.__webglTexture,Oe=je(G);if(G.depthTexture.format===Np)Ze(G)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Te,0,Oe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Te,0);else if(G.depthTexture.format===Yp)Ze(G)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Te,0,Oe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Te,0);else throw new Error("Unknown depthTexture format")}function Ce(Q){const G=r.get(Q),me=Q.isWebGLCubeRenderTarget===!0;if(G.__boundDepthTexture!==Q.depthTexture){const he=Q.depthTexture;if(G.__depthDisposeCallback&&G.__depthDisposeCallback(),he){const Te=()=>{delete G.__boundDepthTexture,delete G.__depthDisposeCallback,he.removeEventListener("dispose",Te)};he.addEventListener("dispose",Te),G.__depthDisposeCallback=Te}G.__boundDepthTexture=he}if(Q.depthTexture&&!G.__autoAllocateDepthBuffer){if(me)throw new Error("target.depthTexture not supported in Cube render targets");we(G.__webglFramebuffer,Q)}else if(me){G.__webglDepthbuffer=[];for(let he=0;he<6;he++)if(n.bindFramebuffer(t.FRAMEBUFFER,G.__webglFramebuffer[he]),G.__webglDepthbuffer[he]===void 0)G.__webglDepthbuffer[he]=t.createRenderbuffer(),be(G.__webglDepthbuffer[he],Q,!1);else{const Te=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Oe=G.__webglDepthbuffer[he];t.bindRenderbuffer(t.RENDERBUFFER,Oe),t.framebufferRenderbuffer(t.FRAMEBUFFER,Te,t.RENDERBUFFER,Oe)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,G.__webglFramebuffer),G.__webglDepthbuffer===void 0)G.__webglDepthbuffer=t.createRenderbuffer(),be(G.__webglDepthbuffer,Q,!1);else{const he=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Te=G.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,Te),t.framebufferRenderbuffer(t.FRAMEBUFFER,he,t.RENDERBUFFER,Te)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function Ie(Q,G,me){const he=r.get(Q);G!==void 0&&de(he.__webglFramebuffer,Q,Q.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),me!==void 0&&Ce(Q)}function Fe(Q){const G=Q.texture,me=r.get(Q),he=r.get(G);Q.addEventListener("dispose",D);const Te=Q.textures,Oe=Q.isWebGLCubeRenderTarget===!0,Qe=Te.length>1;if(Qe||(he.__webglTexture===void 0&&(he.__webglTexture=t.createTexture()),he.__version=G.version,o.memory.textures++),Oe){me.__webglFramebuffer=[];for(let Ye=0;Ye<6;Ye++)if(G.mipmaps&&G.mipmaps.length>0){me.__webglFramebuffer[Ye]=[];for(let at=0;at<G.mipmaps.length;at++)me.__webglFramebuffer[Ye][at]=t.createFramebuffer()}else me.__webglFramebuffer[Ye]=t.createFramebuffer()}else{if(G.mipmaps&&G.mipmaps.length>0){me.__webglFramebuffer=[];for(let Ye=0;Ye<G.mipmaps.length;Ye++)me.__webglFramebuffer[Ye]=t.createFramebuffer()}else me.__webglFramebuffer=t.createFramebuffer();if(Qe)for(let Ye=0,at=Te.length;Ye<at;Ye++){const Ft=r.get(Te[Ye]);Ft.__webglTexture===void 0&&(Ft.__webglTexture=t.createTexture(),o.memory.textures++)}if(Q.samples>0&&Ze(Q)===!1){me.__webglMultisampledFramebuffer=t.createFramebuffer(),me.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,me.__webglMultisampledFramebuffer);for(let Ye=0;Ye<Te.length;Ye++){const at=Te[Ye];me.__webglColorRenderbuffer[Ye]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,me.__webglColorRenderbuffer[Ye]);const Ft=s.convert(at.format,at.colorSpace),et=s.convert(at.type),gt=M(at.internalFormat,Ft,et,at.colorSpace,Q.isXRRenderTarget===!0),kt=je(Q);t.renderbufferStorageMultisample(t.RENDERBUFFER,kt,gt,Q.width,Q.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ye,t.RENDERBUFFER,me.__webglColorRenderbuffer[Ye])}t.bindRenderbuffer(t.RENDERBUFFER,null),Q.depthBuffer&&(me.__webglDepthRenderbuffer=t.createRenderbuffer(),be(me.__webglDepthRenderbuffer,Q,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Oe){n.bindTexture(t.TEXTURE_CUBE_MAP,he.__webglTexture),oe(t.TEXTURE_CUBE_MAP,G);for(let Ye=0;Ye<6;Ye++)if(G.mipmaps&&G.mipmaps.length>0)for(let at=0;at<G.mipmaps.length;at++)de(me.__webglFramebuffer[Ye][at],Q,G,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,at);else de(me.__webglFramebuffer[Ye],Q,G,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0);_(G)&&b(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Qe){for(let Ye=0,at=Te.length;Ye<at;Ye++){const Ft=Te[Ye],et=r.get(Ft);n.bindTexture(t.TEXTURE_2D,et.__webglTexture),oe(t.TEXTURE_2D,Ft),de(me.__webglFramebuffer,Q,Ft,t.COLOR_ATTACHMENT0+Ye,t.TEXTURE_2D,0),_(Ft)&&b(t.TEXTURE_2D)}n.unbindTexture()}else{let Ye=t.TEXTURE_2D;if((Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(Ye=Q.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Ye,he.__webglTexture),oe(Ye,G),G.mipmaps&&G.mipmaps.length>0)for(let at=0;at<G.mipmaps.length;at++)de(me.__webglFramebuffer[at],Q,G,t.COLOR_ATTACHMENT0,Ye,at);else de(me.__webglFramebuffer,Q,G,t.COLOR_ATTACHMENT0,Ye,0);_(G)&&b(Ye),n.unbindTexture()}Q.depthBuffer&&Ce(Q)}function ve(Q){const G=Q.textures;for(let me=0,he=G.length;me<he;me++){const Te=G[me];if(_(Te)){const Oe=E(Q),Qe=r.get(Te).__webglTexture;n.bindTexture(Oe,Qe),b(Oe),n.unbindTexture()}}}const _e=[],se=[];function $e(Q){if(Q.samples>0){if(Ze(Q)===!1){const G=Q.textures,me=Q.width,he=Q.height;let Te=t.COLOR_BUFFER_BIT;const Oe=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Qe=r.get(Q),Ye=G.length>1;if(Ye)for(let at=0;at<G.length;at++)n.bindFramebuffer(t.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+at,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Qe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+at,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Qe.__webglFramebuffer);for(let at=0;at<G.length;at++){if(Q.resolveDepthBuffer&&(Q.depthBuffer&&(Te|=t.DEPTH_BUFFER_BIT),Q.stencilBuffer&&Q.resolveStencilBuffer&&(Te|=t.STENCIL_BUFFER_BIT)),Ye){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Qe.__webglColorRenderbuffer[at]);const Ft=r.get(G[at]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Ft,0)}t.blitFramebuffer(0,0,me,he,0,0,me,he,Te,t.NEAREST),l===!0&&(_e.length=0,se.length=0,_e.push(t.COLOR_ATTACHMENT0+at),Q.depthBuffer&&Q.resolveDepthBuffer===!1&&(_e.push(Oe),se.push(Oe),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,se)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,_e))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Ye)for(let at=0;at<G.length;at++){n.bindFramebuffer(t.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+at,t.RENDERBUFFER,Qe.__webglColorRenderbuffer[at]);const Ft=r.get(G[at]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Qe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+at,t.TEXTURE_2D,Ft,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer)}else if(Q.depthBuffer&&Q.resolveDepthBuffer===!1&&l){const G=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[G])}}}function je(Q){return Math.min(i.maxSamples,Q.samples)}function Ze(Q){const G=r.get(Q);return Q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function le(Q){const G=o.render.frame;u.get(Q)!==G&&(u.set(Q,G),Q.update())}function ge(Q,G){const me=Q.colorSpace,he=Q.format,Te=Q.type;return Q.isCompressedTexture===!0||Q.isVideoTexture===!0||me!==Zp&&me!==Hu&&(Xn.getTransfer(me)===ur?(he!==qs||Te!==Ql)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",me)),G}function fe(Q){return typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement?(c.width=Q.naturalWidth||Q.width,c.height=Q.naturalHeight||Q.height):typeof VideoFrame<"u"&&Q instanceof VideoFrame?(c.width=Q.displayWidth,c.height=Q.displayHeight):(c.width=Q.width,c.height=Q.height),c}this.allocateTextureUnit=U,this.resetTextureUnits=j,this.setTexture2D=$,this.setTexture2DArray=q,this.setTexture3D=te,this.setTextureCube=W,this.rebindTextures=Ie,this.setupRenderTarget=Fe,this.updateRenderTargetMipmap=ve,this.updateMultisampleRenderTarget=$e,this.setupDepthRenderbuffer=Ce,this.setupFrameBufferTexture=de,this.useMultisampledRTT=Ze}function j6(t,e){function n(r,i=Hu){let s;const o=Xn.getTransfer(i);if(r===Ql)return t.UNSIGNED_BYTE;if(r===gT)return t.UNSIGNED_SHORT_4_4_4_4;if(r===yT)return t.UNSIGNED_SHORT_5_5_5_1;if(r===Ak)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===Ik)return t.BYTE;if(r===Rk)return t.SHORT;if(r===jy)return t.UNSIGNED_SHORT;if(r===mT)return t.INT;if(r===dd)return t.UNSIGNED_INT;if(r===Qo)return t.FLOAT;if(r===iv)return t.HALF_FLOAT;if(r===Nk)return t.ALPHA;if(r===Pk)return t.RGB;if(r===qs)return t.RGBA;if(r===kk)return t.LUMINANCE;if(r===Ok)return t.LUMINANCE_ALPHA;if(r===Np)return t.DEPTH_COMPONENT;if(r===Yp)return t.DEPTH_STENCIL;if(r===vT)return t.RED;if(r===Yb)return t.RED_INTEGER;if(r===Lk)return t.RG;if(r===xT)return t.RG_INTEGER;if(r===bT)return t.RGBA_INTEGER;if(r===l0||r===c0||r===u0||r===d0)if(o===ur)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===l0)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===c0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===u0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===d0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===l0)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===c0)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===u0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===d0)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===BE||r===jE||r===UE||r===zE)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===BE)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===jE)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===UE)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===zE)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===VE||r===WE||r===qE)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===VE||r===WE)return o===ur?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===qE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===HE||r===$E||r===GE||r===XE||r===KE||r===YE||r===ZE||r===JE||r===QE||r===eM||r===tM||r===nM||r===rM||r===iM)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===HE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===$E)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===GE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===XE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===KE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===YE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===ZE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===JE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===QE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===eM)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===tM)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===nM)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===rM)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===iM)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===f0||r===sM||r===oM)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===f0)return o===ur?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===sM)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===oM)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===Dk||r===aM||r===lM||r===cM)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===f0)return s.COMPRESSED_RED_RGTC1_EXT;if(r===aM)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===lM)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===cM)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Kp?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const zbe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Vbe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Wbe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new oi,s=e.properties.get(i);s.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new ec({vertexShader:zbe,fragmentShader:Vbe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new ji(new ov(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class qbe extends $c{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,p=null,g=null,x=null;const S=new Wbe,_=n.getContextAttributes();let b=null,E=null;const M=[],T=[],k=new Je;let N=null;const D=new wi;D.viewport=new Qn;const L=new wi;L.viewport=new Qn;const R=[D,L],A=new I6;let P=null,j=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let ue=M[ie];return ue===void 0&&(ue=new t1,M[ie]=ue),ue.getTargetRaySpace()},this.getControllerGrip=function(ie){let ue=M[ie];return ue===void 0&&(ue=new t1,M[ie]=ue),ue.getGripSpace()},this.getHand=function(ie){let ue=M[ie];return ue===void 0&&(ue=new t1,M[ie]=ue),ue.getHandSpace()};function U(ie){const ue=T.indexOf(ie.inputSource);if(ue===-1)return;const de=M[ue];de!==void 0&&(de.update(ie.inputSource,ie.frame,c||o),de.dispatchEvent({type:ie.type,data:ie.inputSource}))}function B(){i.removeEventListener("select",U),i.removeEventListener("selectstart",U),i.removeEventListener("selectend",U),i.removeEventListener("squeeze",U),i.removeEventListener("squeezestart",U),i.removeEventListener("squeezeend",U),i.removeEventListener("end",B),i.removeEventListener("inputsourceschange",$);for(let ie=0;ie<M.length;ie++){const ue=T[ie];ue!==null&&(T[ie]=null,M[ie].disconnect(ue))}P=null,j=null,S.reset(),e.setRenderTarget(b),g=null,p=null,f=null,i=null,E=null,ce.stop(),r.isPresenting=!1,e.setPixelRatio(N),e.setSize(k.width,k.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){s=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){a=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ie){c=ie},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return f},this.getFrame=function(){return x},this.getSession=function(){return i},this.setSession=async function(ie){if(i=ie,i!==null){if(b=e.getRenderTarget(),i.addEventListener("select",U),i.addEventListener("selectstart",U),i.addEventListener("selectend",U),i.addEventListener("squeeze",U),i.addEventListener("squeezestart",U),i.addEventListener("squeezeend",U),i.addEventListener("end",B),i.addEventListener("inputsourceschange",$),_.xrCompatible!==!0&&await n.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(k),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let de=null,be=null,we=null;_.depth&&(we=_.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,de=_.stencil?Yp:Np,be=_.stencil?Kp:dd);const Ce={colorFormat:n.RGBA8,depthFormat:we,scaleFactor:s};f=new XRWebGLBinding(i,n),p=f.createProjectionLayer(Ce),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),E=new Wc(p.textureWidth,p.textureHeight,{format:qs,type:Ql,depthTexture:new $k(p.textureWidth,p.textureHeight,be,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}else{const de={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(i,n,de),i.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),E=new Wc(g.framebufferWidth,g.framebufferHeight,{format:qs,type:Ql,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}E.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),ce.setContext(i),ce.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function $(ie){for(let ue=0;ue<ie.removed.length;ue++){const de=ie.removed[ue],be=T.indexOf(de);be>=0&&(T[be]=null,M[be].disconnect(de))}for(let ue=0;ue<ie.added.length;ue++){const de=ie.added[ue];let be=T.indexOf(de);if(be===-1){for(let Ce=0;Ce<M.length;Ce++)if(Ce>=T.length){T.push(de),be=Ce;break}else if(T[Ce]===null){T[Ce]=de,be=Ce;break}if(be===-1)break}const we=M[be];we&&we.connect(de)}}const q=new pe,te=new pe;function W(ie,ue,de){q.setFromMatrixPosition(ue.matrixWorld),te.setFromMatrixPosition(de.matrixWorld);const be=q.distanceTo(te),we=ue.projectionMatrix.elements,Ce=de.projectionMatrix.elements,Ie=we[14]/(we[10]-1),Fe=we[14]/(we[10]+1),ve=(we[9]+1)/we[5],_e=(we[9]-1)/we[5],se=(we[8]-1)/we[0],$e=(Ce[8]+1)/Ce[0],je=Ie*se,Ze=Ie*$e,le=be/(-se+$e),ge=le*-se;if(ue.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(ge),ie.translateZ(le),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert(),we[10]===-1)ie.projectionMatrix.copy(ue.projectionMatrix),ie.projectionMatrixInverse.copy(ue.projectionMatrixInverse);else{const fe=Ie+le,Q=Fe+le,G=je-ge,me=Ze+(be-ge),he=ve*Fe/Q*fe,Te=_e*Fe/Q*fe;ie.projectionMatrix.makePerspective(G,me,he,Te,fe,Q),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}}function Z(ie,ue){ue===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(ue.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(i===null)return;let ue=ie.near,de=ie.far;S.texture!==null&&(S.depthNear>0&&(ue=S.depthNear),S.depthFar>0&&(de=S.depthFar)),A.near=L.near=D.near=ue,A.far=L.far=D.far=de,(P!==A.near||j!==A.far)&&(i.updateRenderState({depthNear:A.near,depthFar:A.far}),P=A.near,j=A.far),D.layers.mask=ie.layers.mask|2,L.layers.mask=ie.layers.mask|4,A.layers.mask=D.layers.mask|L.layers.mask;const be=ie.parent,we=A.cameras;Z(A,be);for(let Ce=0;Ce<we.length;Ce++)Z(we[Ce],be);we.length===2?W(A,D,L):A.projectionMatrix.copy(D.projectionMatrix),J(ie,A,be)};function J(ie,ue,de){de===null?ie.matrix.copy(ue.matrixWorld):(ie.matrix.copy(de.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(ue.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(ue.projectionMatrix),ie.projectionMatrixInverse.copy(ue.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=Uy*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return A},this.getFoveation=function(){if(!(p===null&&g===null))return l},this.setFoveation=function(ie){l=ie,p!==null&&(p.fixedFoveation=ie),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=ie)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(A)};let Y=null;function oe(ie,ue){if(u=ue.getViewerPose(c||o),x=ue,u!==null){const de=u.views;g!==null&&(e.setRenderTargetFramebuffer(E,g.framebuffer),e.setRenderTarget(E));let be=!1;de.length!==A.cameras.length&&(A.cameras.length=0,be=!0);for(let Ie=0;Ie<de.length;Ie++){const Fe=de[Ie];let ve=null;if(g!==null)ve=g.getViewport(Fe);else{const se=f.getViewSubImage(p,Fe);ve=se.viewport,Ie===0&&(e.setRenderTargetTextures(E,se.colorTexture,p.ignoreDepthValues?void 0:se.depthStencilTexture),e.setRenderTarget(E))}let _e=R[Ie];_e===void 0&&(_e=new wi,_e.layers.enable(Ie),_e.viewport=new Qn,R[Ie]=_e),_e.matrix.fromArray(Fe.transform.matrix),_e.matrix.decompose(_e.position,_e.quaternion,_e.scale),_e.projectionMatrix.fromArray(Fe.projectionMatrix),_e.projectionMatrixInverse.copy(_e.projectionMatrix).invert(),_e.viewport.set(ve.x,ve.y,ve.width,ve.height),Ie===0&&(A.matrix.copy(_e.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),be===!0&&A.cameras.push(_e)}const we=i.enabledFeatures;if(we&&we.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&f){const Ie=f.getDepthInformation(de[0]);Ie&&Ie.isValid&&Ie.texture&&S.init(e,Ie,i.renderState)}}for(let de=0;de<M.length;de++){const be=T[de],we=M[de];be!==null&&we!==void 0&&we.update(be,ue,c||o)}Y&&Y(ie,ue),ue.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ue}),x=null}const ce=new O6;ce.setAnimationLoop(oe),this.setAnimationLoop=function(ie){Y=ie},this.dispose=function(){}}}const tp=new Oa,Hbe=new cn;function $be(t,e){function n(_,b){_.matrixAutoUpdate===!0&&_.updateMatrix(),b.value.copy(_.matrix)}function r(_,b){b.color.getRGB(_.fogColor.value,k$(t)),b.isFog?(_.fogNear.value=b.near,_.fogFar.value=b.far):b.isFogExp2&&(_.fogDensity.value=b.density)}function i(_,b,E,M,T){b.isMeshBasicMaterial||b.isMeshLambertMaterial?s(_,b):b.isMeshToonMaterial?(s(_,b),f(_,b)):b.isMeshPhongMaterial?(s(_,b),u(_,b)):b.isMeshStandardMaterial?(s(_,b),p(_,b),b.isMeshPhysicalMaterial&&g(_,b,T)):b.isMeshMatcapMaterial?(s(_,b),x(_,b)):b.isMeshDepthMaterial?s(_,b):b.isMeshDistanceMaterial?(s(_,b),S(_,b)):b.isMeshNormalMaterial?s(_,b):b.isLineBasicMaterial?(o(_,b),b.isLineDashedMaterial&&a(_,b)):b.isPointsMaterial?l(_,b,E,M):b.isSpriteMaterial?c(_,b):b.isShadowMaterial?(_.color.value.copy(b.color),_.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function s(_,b){_.opacity.value=b.opacity,b.color&&_.diffuse.value.copy(b.color),b.emissive&&_.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(_.map.value=b.map,n(b.map,_.mapTransform)),b.alphaMap&&(_.alphaMap.value=b.alphaMap,n(b.alphaMap,_.alphaMapTransform)),b.bumpMap&&(_.bumpMap.value=b.bumpMap,n(b.bumpMap,_.bumpMapTransform),_.bumpScale.value=b.bumpScale,b.side===So&&(_.bumpScale.value*=-1)),b.normalMap&&(_.normalMap.value=b.normalMap,n(b.normalMap,_.normalMapTransform),_.normalScale.value.copy(b.normalScale),b.side===So&&_.normalScale.value.negate()),b.displacementMap&&(_.displacementMap.value=b.displacementMap,n(b.displacementMap,_.displacementMapTransform),_.displacementScale.value=b.displacementScale,_.displacementBias.value=b.displacementBias),b.emissiveMap&&(_.emissiveMap.value=b.emissiveMap,n(b.emissiveMap,_.emissiveMapTransform)),b.specularMap&&(_.specularMap.value=b.specularMap,n(b.specularMap,_.specularMapTransform)),b.alphaTest>0&&(_.alphaTest.value=b.alphaTest);const E=e.get(b),M=E.envMap,T=E.envMapRotation;M&&(_.envMap.value=M,tp.copy(T),tp.x*=-1,tp.y*=-1,tp.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(tp.y*=-1,tp.z*=-1),_.envMapRotation.value.setFromMatrix4(Hbe.makeRotationFromEuler(tp)),_.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=b.reflectivity,_.ior.value=b.ior,_.refractionRatio.value=b.refractionRatio),b.lightMap&&(_.lightMap.value=b.lightMap,_.lightMapIntensity.value=b.lightMapIntensity,n(b.lightMap,_.lightMapTransform)),b.aoMap&&(_.aoMap.value=b.aoMap,_.aoMapIntensity.value=b.aoMapIntensity,n(b.aoMap,_.aoMapTransform))}function o(_,b){_.diffuse.value.copy(b.color),_.opacity.value=b.opacity,b.map&&(_.map.value=b.map,n(b.map,_.mapTransform))}function a(_,b){_.dashSize.value=b.dashSize,_.totalSize.value=b.dashSize+b.gapSize,_.scale.value=b.scale}function l(_,b,E,M){_.diffuse.value.copy(b.color),_.opacity.value=b.opacity,_.size.value=b.size*E,_.scale.value=M*.5,b.map&&(_.map.value=b.map,n(b.map,_.uvTransform)),b.alphaMap&&(_.alphaMap.value=b.alphaMap,n(b.alphaMap,_.alphaMapTransform)),b.alphaTest>0&&(_.alphaTest.value=b.alphaTest)}function c(_,b){_.diffuse.value.copy(b.color),_.opacity.value=b.opacity,_.rotation.value=b.rotation,b.map&&(_.map.value=b.map,n(b.map,_.mapTransform)),b.alphaMap&&(_.alphaMap.value=b.alphaMap,n(b.alphaMap,_.alphaMapTransform)),b.alphaTest>0&&(_.alphaTest.value=b.alphaTest)}function u(_,b){_.specular.value.copy(b.specular),_.shininess.value=Math.max(b.shininess,1e-4)}function f(_,b){b.gradientMap&&(_.gradientMap.value=b.gradientMap)}function p(_,b){_.metalness.value=b.metalness,b.metalnessMap&&(_.metalnessMap.value=b.metalnessMap,n(b.metalnessMap,_.metalnessMapTransform)),_.roughness.value=b.roughness,b.roughnessMap&&(_.roughnessMap.value=b.roughnessMap,n(b.roughnessMap,_.roughnessMapTransform)),b.envMap&&(_.envMapIntensity.value=b.envMapIntensity)}function g(_,b,E){_.ior.value=b.ior,b.sheen>0&&(_.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),_.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(_.sheenColorMap.value=b.sheenColorMap,n(b.sheenColorMap,_.sheenColorMapTransform)),b.sheenRoughnessMap&&(_.sheenRoughnessMap.value=b.sheenRoughnessMap,n(b.sheenRoughnessMap,_.sheenRoughnessMapTransform))),b.clearcoat>0&&(_.clearcoat.value=b.clearcoat,_.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(_.clearcoatMap.value=b.clearcoatMap,n(b.clearcoatMap,_.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,n(b.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(_.clearcoatNormalMap.value=b.clearcoatNormalMap,n(b.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===So&&_.clearcoatNormalScale.value.negate())),b.dispersion>0&&(_.dispersion.value=b.dispersion),b.iridescence>0&&(_.iridescence.value=b.iridescence,_.iridescenceIOR.value=b.iridescenceIOR,_.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(_.iridescenceMap.value=b.iridescenceMap,n(b.iridescenceMap,_.iridescenceMapTransform)),b.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=b.iridescenceThicknessMap,n(b.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),b.transmission>0&&(_.transmission.value=b.transmission,_.transmissionSamplerMap.value=E.texture,_.transmissionSamplerSize.value.set(E.width,E.height),b.transmissionMap&&(_.transmissionMap.value=b.transmissionMap,n(b.transmissionMap,_.transmissionMapTransform)),_.thickness.value=b.thickness,b.thicknessMap&&(_.thicknessMap.value=b.thicknessMap,n(b.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=b.attenuationDistance,_.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(_.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(_.anisotropyMap.value=b.anisotropyMap,n(b.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=b.specularIntensity,_.specularColor.value.copy(b.specularColor),b.specularColorMap&&(_.specularColorMap.value=b.specularColorMap,n(b.specularColorMap,_.specularColorMapTransform)),b.specularIntensityMap&&(_.specularIntensityMap.value=b.specularIntensityMap,n(b.specularIntensityMap,_.specularIntensityMapTransform))}function x(_,b){b.matcap&&(_.matcap.value=b.matcap)}function S(_,b){const E=e.get(b).light;_.referencePosition.value.setFromMatrixPosition(E.matrixWorld),_.nearDistance.value=E.shadow.camera.near,_.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Gbe(t,e,n,r){let i={},s={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(E,M){const T=M.program;r.uniformBlockBinding(E,T)}function c(E,M){let T=i[E.id];T===void 0&&(x(E),T=u(E),i[E.id]=T,E.addEventListener("dispose",_));const k=M.program;r.updateUBOMapping(E,k);const N=e.render.frame;s[E.id]!==N&&(p(E),s[E.id]=N)}function u(E){const M=f();E.__bindingPointIndex=M;const T=t.createBuffer(),k=E.__size,N=E.usage;return t.bindBuffer(t.UNIFORM_BUFFER,T),t.bufferData(t.UNIFORM_BUFFER,k,N),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,M,T),T}function f(){for(let E=0;E<a;E++)if(o.indexOf(E)===-1)return o.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(E){const M=i[E.id],T=E.uniforms,k=E.__cache;t.bindBuffer(t.UNIFORM_BUFFER,M);for(let N=0,D=T.length;N<D;N++){const L=Array.isArray(T[N])?T[N]:[T[N]];for(let R=0,A=L.length;R<A;R++){const P=L[R];if(g(P,N,R,k)===!0){const j=P.__offset,U=Array.isArray(P.value)?P.value:[P.value];let B=0;for(let $=0;$<U.length;$++){const q=U[$],te=S(q);typeof q=="number"||typeof q=="boolean"?(P.__data[0]=q,t.bufferSubData(t.UNIFORM_BUFFER,j+B,P.__data)):q.isMatrix3?(P.__data[0]=q.elements[0],P.__data[1]=q.elements[1],P.__data[2]=q.elements[2],P.__data[3]=0,P.__data[4]=q.elements[3],P.__data[5]=q.elements[4],P.__data[6]=q.elements[5],P.__data[7]=0,P.__data[8]=q.elements[6],P.__data[9]=q.elements[7],P.__data[10]=q.elements[8],P.__data[11]=0):(q.toArray(P.__data,B),B+=te.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,j,P.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function g(E,M,T,k){const N=E.value,D=M+"_"+T;if(k[D]===void 0)return typeof N=="number"||typeof N=="boolean"?k[D]=N:k[D]=N.clone(),!0;{const L=k[D];if(typeof N=="number"||typeof N=="boolean"){if(L!==N)return k[D]=N,!0}else if(L.equals(N)===!1)return L.copy(N),!0}return!1}function x(E){const M=E.uniforms;let T=0;const k=16;for(let D=0,L=M.length;D<L;D++){const R=Array.isArray(M[D])?M[D]:[M[D]];for(let A=0,P=R.length;A<P;A++){const j=R[A],U=Array.isArray(j.value)?j.value:[j.value];for(let B=0,$=U.length;B<$;B++){const q=U[B],te=S(q),W=T%k,Z=W%te.boundary,J=W+Z;T+=Z,J!==0&&k-J<te.storage&&(T+=k-J),j.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),j.__offset=T,T+=te.storage}}}const N=T%k;return N>0&&(T+=k-N),E.__size=T,E.__cache={},this}function S(E){const M={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(M.boundary=4,M.storage=4):E.isVector2?(M.boundary=8,M.storage=8):E.isVector3||E.isColor?(M.boundary=16,M.storage=12):E.isVector4?(M.boundary=16,M.storage=16):E.isMatrix3?(M.boundary=48,M.storage=48):E.isMatrix4?(M.boundary=64,M.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),M}function _(E){const M=E.target;M.removeEventListener("dispose",_);const T=o.indexOf(M.__bindingPointIndex);o.splice(T,1),t.deleteBuffer(i[M.id]),delete i[M.id],delete s[M.id]}function b(){for(const E in i)t.deleteBuffer(i[E]);o=[],i={},s={}}return{bind:l,update:c,dispose:b}}class U6{constructor(e={}){const{canvas:n=A$(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let g;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=r.getContextAttributes().alpha}else g=o;const x=new Uint32Array(4),S=new Int32Array(4);let _=null,b=null;const E=[],M=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ko,this.toneMapping=Lc,this.toneMappingExposure=1;const T=this;let k=!1,N=0,D=0,L=null,R=-1,A=null;const P=new Qn,j=new Qn;let U=null;const B=new Nt(0);let $=0,q=n.width,te=n.height,W=1,Z=null,J=null;const Y=new Qn(0,0,q,te),oe=new Qn(0,0,q,te);let ce=!1;const ie=new ew;let ue=!1,de=!1;this.transmissionResolutionScale=1;const be=new cn,we=new cn,Ce=new pe,Ie=new Qn,Fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ve=!1;function _e(){return L===null?W:1}let se=r;function $e(ae,Ne){return n.getContext(ae,Ne)}try{const ae={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${dT}`),n.addEventListener("webglcontextlost",Ke,!1),n.addEventListener("webglcontextrestored",vt,!1),n.addEventListener("webglcontextcreationerror",pt,!1),se===null){const Ne="webgl2";if(se=$e(Ne,ae),se===null)throw $e(Ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ae){throw console.error("THREE.WebGLRenderer: "+ae.message),ae}let je,Ze,le,ge,fe,Q,G,me,he,Te,Oe,Qe,Ye,at,Ft,et,gt,kt,Bt,dt,Ee,He,ft,Se;function nt(){je=new s0e(se),je.init(),He=new j6(se,je),Ze=new Qxe(se,je,e,He),le=new jbe(se,je),Ze.reverseDepthBuffer&&p&&le.buffers.depth.setReversed(!0),ge=new l0e(se),fe=new Tbe,Q=new Ube(se,je,le,fe,Ze,He,ge),G=new t0e(T),me=new i0e(T),he=new mye(se),ft=new Zxe(se,he),Te=new o0e(se,he,ge,ft),Oe=new u0e(se,Te,he,ge),Bt=new c0e(se,Ze,Q),et=new e0e(fe),Qe=new Mbe(T,G,me,je,Ze,ft,et),Ye=new $be(T,fe),at=new Ibe,Ft=new Obe(je),kt=new Yxe(T,G,me,le,Oe,g,l),gt=new Fbe(T,Oe,Ze),Se=new Gbe(se,ge,Ze,le),dt=new Jxe(se,je,ge),Ee=new a0e(se,je,ge),ge.programs=Qe.programs,T.capabilities=Ze,T.extensions=je,T.properties=fe,T.renderLists=at,T.shadowMap=gt,T.state=le,T.info=ge}nt();const Ve=new qbe(T,se);this.xr=Ve,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){const ae=je.get("WEBGL_lose_context");ae&&ae.loseContext()},this.forceContextRestore=function(){const ae=je.get("WEBGL_lose_context");ae&&ae.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(ae){ae!==void 0&&(W=ae,this.setSize(q,te,!1))},this.getSize=function(ae){return ae.set(q,te)},this.setSize=function(ae,Ne,ze=!0){if(Ve.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=ae,te=Ne,n.width=Math.floor(ae*W),n.height=Math.floor(Ne*W),ze===!0&&(n.style.width=ae+"px",n.style.height=Ne+"px"),this.setViewport(0,0,ae,Ne)},this.getDrawingBufferSize=function(ae){return ae.set(q*W,te*W).floor()},this.setDrawingBufferSize=function(ae,Ne,ze){q=ae,te=Ne,W=ze,n.width=Math.floor(ae*ze),n.height=Math.floor(Ne*ze),this.setViewport(0,0,ae,Ne)},this.getCurrentViewport=function(ae){return ae.copy(P)},this.getViewport=function(ae){return ae.copy(Y)},this.setViewport=function(ae,Ne,ze,Le){ae.isVector4?Y.set(ae.x,ae.y,ae.z,ae.w):Y.set(ae,Ne,ze,Le),le.viewport(P.copy(Y).multiplyScalar(W).round())},this.getScissor=function(ae){return ae.copy(oe)},this.setScissor=function(ae,Ne,ze,Le){ae.isVector4?oe.set(ae.x,ae.y,ae.z,ae.w):oe.set(ae,Ne,ze,Le),le.scissor(j.copy(oe).multiplyScalar(W).round())},this.getScissorTest=function(){return ce},this.setScissorTest=function(ae){le.setScissorTest(ce=ae)},this.setOpaqueSort=function(ae){Z=ae},this.setTransparentSort=function(ae){J=ae},this.getClearColor=function(ae){return ae.copy(kt.getClearColor())},this.setClearColor=function(){kt.setClearColor.apply(kt,arguments)},this.getClearAlpha=function(){return kt.getClearAlpha()},this.setClearAlpha=function(){kt.setClearAlpha.apply(kt,arguments)},this.clear=function(ae=!0,Ne=!0,ze=!0){let Le=0;if(ae){let Pe=!1;if(L!==null){const rt=L.texture.format;Pe=rt===bT||rt===xT||rt===Yb}if(Pe){const rt=L.texture.type,mt=rt===Ql||rt===dd||rt===jy||rt===Kp||rt===gT||rt===yT,_t=kt.getClearColor(),Tt=kt.getClearAlpha(),Kt=_t.r,Ht=_t.g,lt=_t.b;mt?(x[0]=Kt,x[1]=Ht,x[2]=lt,x[3]=Tt,se.clearBufferuiv(se.COLOR,0,x)):(S[0]=Kt,S[1]=Ht,S[2]=lt,S[3]=Tt,se.clearBufferiv(se.COLOR,0,S))}else Le|=se.COLOR_BUFFER_BIT}Ne&&(Le|=se.DEPTH_BUFFER_BIT),ze&&(Le|=se.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(0xffffffff)),se.clear(Le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ke,!1),n.removeEventListener("webglcontextrestored",vt,!1),n.removeEventListener("webglcontextcreationerror",pt,!1),kt.dispose(),at.dispose(),Ft.dispose(),fe.dispose(),G.dispose(),me.dispose(),Oe.dispose(),ft.dispose(),Se.dispose(),Qe.dispose(),Ve.dispose(),Ve.removeEventListener("sessionstart",oc),Ve.removeEventListener("sessionend",Fa),Ro.stop()};function Ke(ae){ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function vt(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const ae=ge.autoReset,Ne=gt.enabled,ze=gt.autoUpdate,Le=gt.needsUpdate,Pe=gt.type;nt(),ge.autoReset=ae,gt.enabled=Ne,gt.autoUpdate=ze,gt.needsUpdate=Le,gt.type=Pe}function pt(ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ae.statusMessage)}function Xt(ae){const Ne=ae.target;Ne.removeEventListener("dispose",Xt),Dn(Ne)}function Dn(ae){sr(ae),fe.remove(ae)}function sr(ae){const Ne=fe.get(ae).programs;Ne!==void 0&&(Ne.forEach(function(ze){Qe.releaseProgram(ze)}),ae.isShaderMaterial&&Qe.releaseShaderCache(ae))}this.renderBufferDirect=function(ae,Ne,ze,Le,Pe,rt){Ne===null&&(Ne=Fe);const mt=Pe.isMesh&&Pe.matrixWorld.determinant()<0,_t=gd(ae,Ne,ze,Le,Pe);le.setMaterial(Le,mt);let Tt=ze.index,Kt=1;if(Le.wireframe===!0){if(Tt=Te.getWireframeAttribute(ze),Tt===void 0)return;Kt=2}const Ht=ze.drawRange,lt=ze.attributes.position;let Ut=Ht.start*Kt,Qt=(Ht.start+Ht.count)*Kt;rt!==null&&(Ut=Math.max(Ut,rt.start*Kt),Qt=Math.min(Qt,(rt.start+rt.count)*Kt)),Tt!==null?(Ut=Math.max(Ut,0),Qt=Math.min(Qt,Tt.count)):lt!=null&&(Ut=Math.max(Ut,0),Qt=Math.min(Qt,lt.count));const In=Qt-Ut;if(In<0||In===1/0)return;ft.setup(Pe,Le,_t,ze,Tt);let Rn,vn=dt;if(Tt!==null&&(Rn=he.get(Tt),vn=Ee,vn.setIndex(Rn)),Pe.isMesh)Le.wireframe===!0?(le.setLineWidth(Le.wireframeLinewidth*_e()),vn.setMode(se.LINES)):vn.setMode(se.TRIANGLES);else if(Pe.isLine){let jt=Le.linewidth;jt===void 0&&(jt=1),le.setLineWidth(jt*_e()),Pe.isLineSegments?vn.setMode(se.LINES):Pe.isLineLoop?vn.setMode(se.LINE_LOOP):vn.setMode(se.LINE_STRIP)}else Pe.isPoints?vn.setMode(se.POINTS):Pe.isSprite&&vn.setMode(se.TRIANGLES);if(Pe.isBatchedMesh)if(Pe._multiDrawInstances!==null)vn.renderMultiDrawInstances(Pe._multiDrawStarts,Pe._multiDrawCounts,Pe._multiDrawCount,Pe._multiDrawInstances);else if(je.get("WEBGL_multi_draw"))vn.renderMultiDraw(Pe._multiDrawStarts,Pe._multiDrawCounts,Pe._multiDrawCount);else{const jt=Pe._multiDrawStarts,Fn=Pe._multiDrawCounts,mn=Pe._multiDrawCount,mi=Tt?he.get(Tt).bytesPerElement:1,dl=fe.get(Le).currentProgram.getUniforms();for(let Ci=0;Ci<mn;Ci++)dl.setValue(se,"_gl_DrawID",Ci),vn.render(jt[Ci]/mi,Fn[Ci])}else if(Pe.isInstancedMesh)vn.renderInstances(Ut,In,Pe.count);else if(ze.isInstancedBufferGeometry){const jt=ze._maxInstanceCount!==void 0?ze._maxInstanceCount:1/0,Fn=Math.min(ze.instanceCount,jt);vn.renderInstances(Ut,In,Fn)}else vn.render(Ut,In)};function yn(ae,Ne,ze){ae.transparent===!0&&ae.side===Cc&&ae.forceSinglePass===!1?(ae.side=So,ae.needsUpdate=!0,ac(ae,Ne,ze),ae.side=cd,ae.needsUpdate=!0,ac(ae,Ne,ze),ae.side=Cc):ac(ae,Ne,ze)}this.compile=function(ae,Ne,ze=null){ze===null&&(ze=ae),b=Ft.get(ze),b.init(Ne),M.push(b),ze.traverseVisible(function(Pe){Pe.isLight&&Pe.layers.test(Ne.layers)&&(b.pushLight(Pe),Pe.castShadow&&b.pushShadow(Pe))}),ae!==ze&&ae.traverseVisible(function(Pe){Pe.isLight&&Pe.layers.test(Ne.layers)&&(b.pushLight(Pe),Pe.castShadow&&b.pushShadow(Pe))}),b.setupLights();const Le=new Set;return ae.traverse(function(Pe){if(!(Pe.isMesh||Pe.isPoints||Pe.isLine||Pe.isSprite))return;const rt=Pe.material;if(rt)if(Array.isArray(rt))for(let mt=0;mt<rt.length;mt++){const _t=rt[mt];yn(_t,ze,Pe),Le.add(_t)}else yn(rt,ze,Pe),Le.add(rt)}),M.pop(),b=null,Le},this.compileAsync=function(ae,Ne,ze=null){const Le=this.compile(ae,Ne,ze);return new Promise(Pe=>{function rt(){if(Le.forEach(function(mt){fe.get(mt).currentProgram.isReady()&&Le.delete(mt)}),Le.size===0){Pe(ae);return}setTimeout(rt,10)}je.get("KHR_parallel_shader_compile")!==null?rt():setTimeout(rt,10)})};let Or=null;function jr(ae){Or&&Or(ae)}function oc(){Ro.stop()}function Fa(){Ro.start()}const Ro=new O6;Ro.setAnimationLoop(jr),typeof self<"u"&&Ro.setContext(self),this.setAnimationLoop=function(ae){Or=ae,Ve.setAnimationLoop(ae),ae===null?Ro.stop():Ro.start()},Ve.addEventListener("sessionstart",oc),Ve.addEventListener("sessionend",Fa),this.render=function(ae,Ne){if(Ne!==void 0&&Ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;if(ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),Ne.parent===null&&Ne.matrixWorldAutoUpdate===!0&&Ne.updateMatrixWorld(),Ve.enabled===!0&&Ve.isPresenting===!0&&(Ve.cameraAutoUpdate===!0&&Ve.updateCamera(Ne),Ne=Ve.getCamera()),ae.isScene===!0&&ae.onBeforeRender(T,ae,Ne,L),b=Ft.get(ae,M.length),b.init(Ne),M.push(b),we.multiplyMatrices(Ne.projectionMatrix,Ne.matrixWorldInverse),ie.setFromProjectionMatrix(we),de=this.localClippingEnabled,ue=et.init(this.clippingPlanes,de),_=at.get(ae,E.length),_.init(),E.push(_),Ve.enabled===!0&&Ve.isPresenting===!0){const rt=T.xr.getDepthSensingMesh();rt!==null&&to(rt,Ne,-1/0,T.sortObjects)}to(ae,Ne,0,T.sortObjects),_.finish(),T.sortObjects===!0&&_.sort(Z,J),ve=Ve.enabled===!1||Ve.isPresenting===!1||Ve.hasDepthSensing()===!1,ve&&kt.addToRenderList(_,ae),this.info.render.frame++,ue===!0&&et.beginShadows();const ze=b.state.shadowsArray;gt.render(ze,ae,Ne),ue===!0&&et.endShadows(),this.info.autoReset===!0&&this.info.reset();const Le=_.opaque,Pe=_.transmissive;if(b.setupLights(),Ne.isArrayCamera){const rt=Ne.cameras;if(Pe.length>0)for(let mt=0,_t=rt.length;mt<_t;mt++){const Tt=rt[mt];no(Le,Pe,ae,Tt)}ve&&kt.render(ae);for(let mt=0,_t=rt.length;mt<_t;mt++){const Tt=rt[mt];ul(_,ae,Tt,Tt.viewport)}}else Pe.length>0&&no(Le,Pe,ae,Ne),ve&&kt.render(ae),ul(_,ae,Ne);L!==null&&D===0&&(Q.updateMultisampleRenderTarget(L),Q.updateRenderTargetMipmap(L)),ae.isScene===!0&&ae.onAfterRender(T,ae,Ne),ft.resetDefaultState(),R=-1,A=null,M.pop(),M.length>0?(b=M[M.length-1],ue===!0&&et.setGlobalState(T.clippingPlanes,b.state.camera)):b=null,E.pop(),E.length>0?_=E[E.length-1]:_=null};function to(ae,Ne,ze,Le){if(ae.visible===!1)return;if(ae.layers.test(Ne.layers)){if(ae.isGroup)ze=ae.renderOrder;else if(ae.isLOD)ae.autoUpdate===!0&&ae.update(Ne);else if(ae.isLight)b.pushLight(ae),ae.castShadow&&b.pushShadow(ae);else if(ae.isSprite){if(!ae.frustumCulled||ie.intersectsSprite(ae)){Le&&Ie.setFromMatrixPosition(ae.matrixWorld).applyMatrix4(we);const mt=Oe.update(ae),_t=ae.material;_t.visible&&_.push(ae,mt,_t,ze,Ie.z,null)}}else if((ae.isMesh||ae.isLine||ae.isPoints)&&(!ae.frustumCulled||ie.intersectsObject(ae))){const mt=Oe.update(ae),_t=ae.material;if(Le&&(ae.boundingSphere!==void 0?(ae.boundingSphere===null&&ae.computeBoundingSphere(),Ie.copy(ae.boundingSphere.center)):(mt.boundingSphere===null&&mt.computeBoundingSphere(),Ie.copy(mt.boundingSphere.center)),Ie.applyMatrix4(ae.matrixWorld).applyMatrix4(we)),Array.isArray(_t)){const Tt=mt.groups;for(let Kt=0,Ht=Tt.length;Kt<Ht;Kt++){const lt=Tt[Kt],Ut=_t[lt.materialIndex];Ut&&Ut.visible&&_.push(ae,mt,Ut,ze,Ie.z,lt)}}else _t.visible&&_.push(ae,mt,_t,ze,Ie.z,null)}}const rt=ae.children;for(let mt=0,_t=rt.length;mt<_t;mt++)to(rt[mt],Ne,ze,Le)}function ul(ae,Ne,ze,Le){const Pe=ae.opaque,rt=ae.transmissive,mt=ae.transparent;b.setupLightsView(ze),ue===!0&&et.setGlobalState(T.clippingPlanes,ze),Le&&le.viewport(P.copy(Le)),Pe.length>0&&Ba(Pe,Ne,ze),rt.length>0&&Ba(rt,Ne,ze),mt.length>0&&Ba(mt,Ne,ze),le.buffers.depth.setTest(!0),le.buffers.depth.setMask(!0),le.buffers.color.setMask(!0),le.setPolygonOffset(!1)}function no(ae,Ne,ze,Le){if((ze.isScene===!0?ze.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[Le.id]===void 0&&(b.state.transmissionRenderTarget[Le.id]=new Wc(1,1,{generateMipmaps:!0,type:je.has("EXT_color_buffer_half_float")||je.has("EXT_color_buffer_float")?iv:Ql,minFilter:Ac,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Xn.workingColorSpace}));const rt=b.state.transmissionRenderTarget[Le.id],mt=Le.viewport||P;rt.setSize(mt.z*T.transmissionResolutionScale,mt.w*T.transmissionResolutionScale);const _t=T.getRenderTarget();T.setRenderTarget(rt),T.getClearColor(B),$=T.getClearAlpha(),$<1&&T.setClearColor(0xffffff,.5),T.clear(),ve&&kt.render(ze);const Tt=T.toneMapping;T.toneMapping=Lc;const Kt=Le.viewport;if(Le.viewport!==void 0&&(Le.viewport=void 0),b.setupLightsView(Le),ue===!0&&et.setGlobalState(T.clippingPlanes,Le),Ba(ae,ze,Le),Q.updateMultisampleRenderTarget(rt),Q.updateRenderTargetMipmap(rt),je.has("WEBGL_multisampled_render_to_texture")===!1){let Ht=!1;for(let lt=0,Ut=Ne.length;lt<Ut;lt++){const Qt=Ne[lt],In=Qt.object,Rn=Qt.geometry,vn=Qt.material,jt=Qt.group;if(vn.side===Cc&&In.layers.test(Le.layers)){const Fn=vn.side;vn.side=So,vn.needsUpdate=!0,md(In,ze,Le,Rn,vn,jt),vn.side=Fn,vn.needsUpdate=!0,Ht=!0}}Ht===!0&&(Q.updateMultisampleRenderTarget(rt),Q.updateRenderTargetMipmap(rt))}T.setRenderTarget(_t),T.setClearColor(B,$),Kt!==void 0&&(Le.viewport=Kt),T.toneMapping=Tt}function Ba(ae,Ne,ze){const Le=Ne.isScene===!0?Ne.overrideMaterial:null;for(let Pe=0,rt=ae.length;Pe<rt;Pe++){const mt=ae[Pe],_t=mt.object,Tt=mt.geometry,Kt=Le===null?mt.material:Le,Ht=mt.group;_t.layers.test(ze.layers)&&md(_t,Ne,ze,Tt,Kt,Ht)}}function md(ae,Ne,ze,Le,Pe,rt){ae.onBeforeRender(T,Ne,ze,Le,Pe,rt),ae.modelViewMatrix.multiplyMatrices(ze.matrixWorldInverse,ae.matrixWorld),ae.normalMatrix.getNormalMatrix(ae.modelViewMatrix),Pe.onBeforeRender(T,Ne,ze,Le,ae,rt),Pe.transparent===!0&&Pe.side===Cc&&Pe.forceSinglePass===!1?(Pe.side=So,Pe.needsUpdate=!0,T.renderBufferDirect(ze,Ne,Le,Pe,ae,rt),Pe.side=cd,Pe.needsUpdate=!0,T.renderBufferDirect(ze,Ne,Le,Pe,ae,rt),Pe.side=Cc):T.renderBufferDirect(ze,Ne,Le,Pe,ae,rt),ae.onAfterRender(T,Ne,ze,Le,Pe,rt)}function ac(ae,Ne,ze){Ne.isScene!==!0&&(Ne=Fe);const Le=fe.get(ae),Pe=b.state.lights,rt=b.state.shadowsArray,mt=Pe.state.version,_t=Qe.getParameters(ae,Pe.state,rt,Ne,ze),Tt=Qe.getProgramCacheKey(_t);let Kt=Le.programs;Le.environment=ae.isMeshStandardMaterial?Ne.environment:null,Le.fog=Ne.fog,Le.envMap=(ae.isMeshStandardMaterial?me:G).get(ae.envMap||Le.environment),Le.envMapRotation=Le.environment!==null&&ae.envMap===null?Ne.environmentRotation:ae.envMapRotation,Kt===void 0&&(ae.addEventListener("dispose",Xt),Kt=new Map,Le.programs=Kt);let Ht=Kt.get(Tt);if(Ht!==void 0){if(Le.currentProgram===Ht&&Le.lightsStateVersion===mt)return ro(ae,_t),Ht}else _t.uniforms=Qe.getUniforms(ae),ae.onBeforeCompile(_t,T),Ht=Qe.acquireProgram(_t,Tt),Kt.set(Tt,Ht),Le.uniforms=_t.uniforms;const lt=Le.uniforms;return(!ae.isShaderMaterial&&!ae.isRawShaderMaterial||ae.clipping===!0)&&(lt.clippingPlanes=et.uniform),ro(ae,_t),Le.needsLights=vd(ae),Le.lightsStateVersion=mt,Le.needsLights&&(lt.ambientLightColor.value=Pe.state.ambient,lt.lightProbe.value=Pe.state.probe,lt.directionalLights.value=Pe.state.directional,lt.directionalLightShadows.value=Pe.state.directionalShadow,lt.spotLights.value=Pe.state.spot,lt.spotLightShadows.value=Pe.state.spotShadow,lt.rectAreaLights.value=Pe.state.rectArea,lt.ltc_1.value=Pe.state.rectAreaLTC1,lt.ltc_2.value=Pe.state.rectAreaLTC2,lt.pointLights.value=Pe.state.point,lt.pointLightShadows.value=Pe.state.pointShadow,lt.hemisphereLights.value=Pe.state.hemi,lt.directionalShadowMap.value=Pe.state.directionalShadowMap,lt.directionalShadowMatrix.value=Pe.state.directionalShadowMatrix,lt.spotShadowMap.value=Pe.state.spotShadowMap,lt.spotLightMatrix.value=Pe.state.spotLightMatrix,lt.spotLightMap.value=Pe.state.spotLightMap,lt.pointShadowMap.value=Pe.state.pointShadowMap,lt.pointShadowMatrix.value=Pe.state.pointShadowMatrix),Le.currentProgram=Ht,Le.uniformsList=null,Ht}function Kc(ae){if(ae.uniformsList===null){const Ne=ae.currentProgram.getUniforms();ae.uniformsList=n1.seqWithValue(Ne.seq,ae.uniforms)}return ae.uniformsList}function ro(ae,Ne){const ze=fe.get(ae);ze.outputColorSpace=Ne.outputColorSpace,ze.batching=Ne.batching,ze.batchingColor=Ne.batchingColor,ze.instancing=Ne.instancing,ze.instancingColor=Ne.instancingColor,ze.instancingMorph=Ne.instancingMorph,ze.skinning=Ne.skinning,ze.morphTargets=Ne.morphTargets,ze.morphNormals=Ne.morphNormals,ze.morphColors=Ne.morphColors,ze.morphTargetsCount=Ne.morphTargetsCount,ze.numClippingPlanes=Ne.numClippingPlanes,ze.numIntersection=Ne.numClipIntersection,ze.vertexAlphas=Ne.vertexAlphas,ze.vertexTangents=Ne.vertexTangents,ze.toneMapping=Ne.toneMapping}function gd(ae,Ne,ze,Le,Pe){Ne.isScene!==!0&&(Ne=Fe),Q.resetTextureUnits();const rt=Ne.fog,mt=Le.isMeshStandardMaterial?Ne.environment:null,_t=L===null?T.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:Zp,Tt=(Le.isMeshStandardMaterial?me:G).get(Le.envMap||mt),Kt=Le.vertexColors===!0&&!!ze.attributes.color&&ze.attributes.color.itemSize===4,Ht=!!ze.attributes.tangent&&(!!Le.normalMap||Le.anisotropy>0),lt=!!ze.morphAttributes.position,Ut=!!ze.morphAttributes.normal,Qt=!!ze.morphAttributes.color;let In=Lc;Le.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(In=T.toneMapping);const Rn=ze.morphAttributes.position||ze.morphAttributes.normal||ze.morphAttributes.color,vn=Rn!==void 0?Rn.length:0,jt=fe.get(Le),Fn=b.state.lights;if(ue===!0&&(de===!0||ae!==A)){const Wi=ae===A&&Le.id===R;et.setState(Le,ae,Wi)}let mn=!1;Le.version===jt.__version?(jt.needsLights&&jt.lightsStateVersion!==Fn.state.version||jt.outputColorSpace!==_t||Pe.isBatchedMesh&&jt.batching===!1||!Pe.isBatchedMesh&&jt.batching===!0||Pe.isBatchedMesh&&jt.batchingColor===!0&&Pe.colorTexture===null||Pe.isBatchedMesh&&jt.batchingColor===!1&&Pe.colorTexture!==null||Pe.isInstancedMesh&&jt.instancing===!1||!Pe.isInstancedMesh&&jt.instancing===!0||Pe.isSkinnedMesh&&jt.skinning===!1||!Pe.isSkinnedMesh&&jt.skinning===!0||Pe.isInstancedMesh&&jt.instancingColor===!0&&Pe.instanceColor===null||Pe.isInstancedMesh&&jt.instancingColor===!1&&Pe.instanceColor!==null||Pe.isInstancedMesh&&jt.instancingMorph===!0&&Pe.morphTexture===null||Pe.isInstancedMesh&&jt.instancingMorph===!1&&Pe.morphTexture!==null||jt.envMap!==Tt||Le.fog===!0&&jt.fog!==rt||jt.numClippingPlanes!==void 0&&(jt.numClippingPlanes!==et.numPlanes||jt.numIntersection!==et.numIntersection)||jt.vertexAlphas!==Kt||jt.vertexTangents!==Ht||jt.morphTargets!==lt||jt.morphNormals!==Ut||jt.morphColors!==Qt||jt.toneMapping!==In||jt.morphTargetsCount!==vn)&&(mn=!0):(mn=!0,jt.__version=Le.version);let mi=jt.currentProgram;mn===!0&&(mi=ac(Le,Ne,Pe));let dl=!1,Ci=!1,ja=!1;const Bn=mi.getUniforms(),ns=jt.uniforms;if(le.useProgram(mi.program)&&(dl=!0,Ci=!0,ja=!0),Le.id!==R&&(R=Le.id,Ci=!0),dl||A!==ae){le.buffers.depth.getReversed()?(be.copy(ae.projectionMatrix),jpe(be),Upe(be),Bn.setValue(se,"projectionMatrix",be)):Bn.setValue(se,"projectionMatrix",ae.projectionMatrix),Bn.setValue(se,"viewMatrix",ae.matrixWorldInverse);const Kr=Bn.map.cameraPosition;Kr!==void 0&&Kr.setValue(se,Ce.setFromMatrixPosition(ae.matrixWorld)),Ze.logarithmicDepthBuffer&&Bn.setValue(se,"logDepthBufFC",2/(Math.log(ae.far+1)/Math.LN2)),(Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshLambertMaterial||Le.isMeshBasicMaterial||Le.isMeshStandardMaterial||Le.isShaderMaterial)&&Bn.setValue(se,"isOrthographic",ae.isOrthographicCamera===!0),A!==ae&&(A=ae,Ci=!0,ja=!0)}if(Pe.isSkinnedMesh){Bn.setOptional(se,Pe,"bindMatrix"),Bn.setOptional(se,Pe,"bindMatrixInverse");const Wi=Pe.skeleton;Wi&&(Wi.boneTexture===null&&Wi.computeBoneTexture(),Bn.setValue(se,"boneTexture",Wi.boneTexture,Q))}Pe.isBatchedMesh&&(Bn.setOptional(se,Pe,"batchingTexture"),Bn.setValue(se,"batchingTexture",Pe._matricesTexture,Q),Bn.setOptional(se,Pe,"batchingIdTexture"),Bn.setValue(se,"batchingIdTexture",Pe._indirectTexture,Q),Bn.setOptional(se,Pe,"batchingColorTexture"),Pe._colorsTexture!==null&&Bn.setValue(se,"batchingColorTexture",Pe._colorsTexture,Q));const Ii=ze.morphAttributes;if((Ii.position!==void 0||Ii.normal!==void 0||Ii.color!==void 0)&&Bt.update(Pe,ze,mi),(Ci||jt.receiveShadow!==Pe.receiveShadow)&&(jt.receiveShadow=Pe.receiveShadow,Bn.setValue(se,"receiveShadow",Pe.receiveShadow)),Le.isMeshGouraudMaterial&&Le.envMap!==null&&(ns.envMap.value=Tt,ns.flipEnvMap.value=Tt.isCubeTexture&&Tt.isRenderTargetTexture===!1?-1:1),Le.isMeshStandardMaterial&&Le.envMap===null&&Ne.environment!==null&&(ns.envMapIntensity.value=Ne.environmentIntensity),Ci&&(Bn.setValue(se,"toneMappingExposure",T.toneMappingExposure),jt.needsLights&&yd(ns,ja),rt&&Le.fog===!0&&Ye.refreshFogUniforms(ns,rt),Ye.refreshMaterialUniforms(ns,Le,W,te,b.state.transmissionRenderTarget[ae.id]),n1.upload(se,Kc(jt),ns,Q)),Le.isShaderMaterial&&Le.uniformsNeedUpdate===!0&&(n1.upload(se,Kc(jt),ns,Q),Le.uniformsNeedUpdate=!1),Le.isSpriteMaterial&&Bn.setValue(se,"center",Pe.center),Bn.setValue(se,"modelViewMatrix",Pe.modelViewMatrix),Bn.setValue(se,"normalMatrix",Pe.normalMatrix),Bn.setValue(se,"modelMatrix",Pe.matrixWorld),Le.isShaderMaterial||Le.isRawShaderMaterial){const Wi=Le.uniformsGroups;for(let Kr=0,zn=Wi.length;Kr<zn;Kr++){const As=Wi[Kr];Se.update(As,mi),Se.bind(As,mi)}}return mi}function yd(ae,Ne){ae.ambientLightColor.needsUpdate=Ne,ae.lightProbe.needsUpdate=Ne,ae.directionalLights.needsUpdate=Ne,ae.directionalLightShadows.needsUpdate=Ne,ae.pointLights.needsUpdate=Ne,ae.pointLightShadows.needsUpdate=Ne,ae.spotLights.needsUpdate=Ne,ae.spotLightShadows.needsUpdate=Ne,ae.rectAreaLights.needsUpdate=Ne,ae.hemisphereLights.needsUpdate=Ne}function vd(ae){return ae.isMeshLambertMaterial||ae.isMeshToonMaterial||ae.isMeshPhongMaterial||ae.isMeshStandardMaterial||ae.isShadowMaterial||ae.isShaderMaterial&&ae.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(ae,Ne,ze){fe.get(ae.texture).__webglTexture=Ne,fe.get(ae.depthTexture).__webglTexture=ze;const Le=fe.get(ae);Le.__hasExternalTextures=!0,Le.__autoAllocateDepthBuffer=ze===void 0,Le.__autoAllocateDepthBuffer||je.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Le.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(ae,Ne){const ze=fe.get(ae);ze.__webglFramebuffer=Ne,ze.__useDefaultFramebuffer=Ne===void 0};const xd=se.createFramebuffer();this.setRenderTarget=function(ae,Ne=0,ze=0){L=ae,N=Ne,D=ze;let Le=!0,Pe=null,rt=!1,mt=!1;if(ae){const Tt=fe.get(ae);if(Tt.__useDefaultFramebuffer!==void 0)le.bindFramebuffer(se.FRAMEBUFFER,null),Le=!1;else if(Tt.__webglFramebuffer===void 0)Q.setupRenderTarget(ae);else if(Tt.__hasExternalTextures)Q.rebindTextures(ae,fe.get(ae.texture).__webglTexture,fe.get(ae.depthTexture).__webglTexture);else if(ae.depthBuffer){const lt=ae.depthTexture;if(Tt.__boundDepthTexture!==lt){if(lt!==null&&fe.has(lt)&&(ae.width!==lt.image.width||ae.height!==lt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Q.setupDepthRenderbuffer(ae)}}const Kt=ae.texture;(Kt.isData3DTexture||Kt.isDataArrayTexture||Kt.isCompressedArrayTexture)&&(mt=!0);const Ht=fe.get(ae).__webglFramebuffer;ae.isWebGLCubeRenderTarget?(Array.isArray(Ht[Ne])?Pe=Ht[Ne][ze]:Pe=Ht[Ne],rt=!0):ae.samples>0&&Q.useMultisampledRTT(ae)===!1?Pe=fe.get(ae).__webglMultisampledFramebuffer:Array.isArray(Ht)?Pe=Ht[ze]:Pe=Ht,P.copy(ae.viewport),j.copy(ae.scissor),U=ae.scissorTest}else P.copy(Y).multiplyScalar(W).floor(),j.copy(oe).multiplyScalar(W).floor(),U=ce;if(ze!==0&&(Pe=xd),le.bindFramebuffer(se.FRAMEBUFFER,Pe)&&Le&&le.drawBuffers(ae,Pe),le.viewport(P),le.scissor(j),le.setScissorTest(U),rt){const Tt=fe.get(ae.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,Tt.__webglTexture,ze)}else if(mt){const Tt=fe.get(ae.texture),Kt=Ne;se.framebufferTextureLayer(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,Tt.__webglTexture,ze,Kt)}else if(ae!==null&&ze!==0){const Tt=fe.get(ae.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,Tt.__webglTexture,ze)}R=-1},this.readRenderTargetPixels=function(ae,Ne,ze,Le,Pe,rt,mt){if(!(ae&&ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let _t=fe.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&mt!==void 0&&(_t=_t[mt]),_t){le.bindFramebuffer(se.FRAMEBUFFER,_t);try{const Tt=ae.texture,Kt=Tt.format,Ht=Tt.type;if(!Ze.textureFormatReadable(Kt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ze.textureTypeReadable(Ht)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ne>=0&&Ne<=ae.width-Le&&ze>=0&&ze<=ae.height-Pe&&se.readPixels(Ne,ze,Le,Pe,He.convert(Kt),He.convert(Ht),rt)}finally{const Tt=L!==null?fe.get(L).__webglFramebuffer:null;le.bindFramebuffer(se.FRAMEBUFFER,Tt)}}},this.readRenderTargetPixelsAsync=async function(ae,Ne,ze,Le,Pe,rt,mt){if(!(ae&&ae.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let _t=fe.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&mt!==void 0&&(_t=_t[mt]),_t){const Tt=ae.texture,Kt=Tt.format,Ht=Tt.type;if(!Ze.textureFormatReadable(Kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ze.textureTypeReadable(Ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Ne>=0&&Ne<=ae.width-Le&&ze>=0&&ze<=ae.height-Pe){le.bindFramebuffer(se.FRAMEBUFFER,_t);const lt=se.createBuffer();se.bindBuffer(se.PIXEL_PACK_BUFFER,lt),se.bufferData(se.PIXEL_PACK_BUFFER,rt.byteLength,se.STREAM_READ),se.readPixels(Ne,ze,Le,Pe,He.convert(Kt),He.convert(Ht),0);const Ut=L!==null?fe.get(L).__webglFramebuffer:null;le.bindFramebuffer(se.FRAMEBUFFER,Ut);const Qt=se.fenceSync(se.SYNC_GPU_COMMANDS_COMPLETE,0);return se.flush(),await Bpe(se,Qt,4),se.bindBuffer(se.PIXEL_PACK_BUFFER,lt),se.getBufferSubData(se.PIXEL_PACK_BUFFER,0,rt),se.deleteBuffer(lt),se.deleteSync(Qt),rt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(ae,Ne=null,ze=0){ae.isTexture!==!0&&(Ug("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Ne=arguments[0]||null,ae=arguments[1]);const Le=Math.pow(2,-ze),Pe=Math.floor(ae.image.width*Le),rt=Math.floor(ae.image.height*Le),mt=Ne!==null?Ne.x:0,_t=Ne!==null?Ne.y:0;Q.setTexture2D(ae,0),se.copyTexSubImage2D(se.TEXTURE_2D,ze,0,0,mt,_t,Pe,rt),le.unbindTexture()};const bd=se.createFramebuffer(),wd=se.createFramebuffer();this.copyTextureToTexture=function(ae,Ne,ze=null,Le=null,Pe=0,rt=null){ae.isTexture!==!0&&(Ug("WebGLRenderer: copyTextureToTexture function signature has changed."),Le=arguments[0]||null,ae=arguments[1],Ne=arguments[2],rt=arguments[3]||0,ze=null),rt===null&&(Pe!==0?(Ug("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),rt=Pe,Pe=0):rt=0);let mt,_t,Tt,Kt,Ht,lt,Ut,Qt,In;const Rn=ae.isCompressedTexture?ae.mipmaps[rt]:ae.image;if(ze!==null)mt=ze.max.x-ze.min.x,_t=ze.max.y-ze.min.y,Tt=ze.isBox3?ze.max.z-ze.min.z:1,Kt=ze.min.x,Ht=ze.min.y,lt=ze.isBox3?ze.min.z:0;else{const Ii=Math.pow(2,-Pe);mt=Math.floor(Rn.width*Ii),_t=Math.floor(Rn.height*Ii),ae.isDataArrayTexture?Tt=Rn.depth:ae.isData3DTexture?Tt=Math.floor(Rn.depth*Ii):Tt=1,Kt=0,Ht=0,lt=0}Le!==null?(Ut=Le.x,Qt=Le.y,In=Le.z):(Ut=0,Qt=0,In=0);const vn=He.convert(Ne.format),jt=He.convert(Ne.type);let Fn;Ne.isData3DTexture?(Q.setTexture3D(Ne,0),Fn=se.TEXTURE_3D):Ne.isDataArrayTexture||Ne.isCompressedArrayTexture?(Q.setTexture2DArray(Ne,0),Fn=se.TEXTURE_2D_ARRAY):(Q.setTexture2D(Ne,0),Fn=se.TEXTURE_2D),se.pixelStorei(se.UNPACK_FLIP_Y_WEBGL,Ne.flipY),se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ne.premultiplyAlpha),se.pixelStorei(se.UNPACK_ALIGNMENT,Ne.unpackAlignment);const mn=se.getParameter(se.UNPACK_ROW_LENGTH),mi=se.getParameter(se.UNPACK_IMAGE_HEIGHT),dl=se.getParameter(se.UNPACK_SKIP_PIXELS),Ci=se.getParameter(se.UNPACK_SKIP_ROWS),ja=se.getParameter(se.UNPACK_SKIP_IMAGES);se.pixelStorei(se.UNPACK_ROW_LENGTH,Rn.width),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,Rn.height),se.pixelStorei(se.UNPACK_SKIP_PIXELS,Kt),se.pixelStorei(se.UNPACK_SKIP_ROWS,Ht),se.pixelStorei(se.UNPACK_SKIP_IMAGES,lt);const Bn=ae.isDataArrayTexture||ae.isData3DTexture,ns=Ne.isDataArrayTexture||Ne.isData3DTexture;if(ae.isDepthTexture){const Ii=fe.get(ae),Wi=fe.get(Ne),Kr=fe.get(Ii.__renderTarget),zn=fe.get(Wi.__renderTarget);le.bindFramebuffer(se.READ_FRAMEBUFFER,Kr.__webglFramebuffer),le.bindFramebuffer(se.DRAW_FRAMEBUFFER,zn.__webglFramebuffer);for(let As=0;As<Tt;As++)Bn&&(se.framebufferTextureLayer(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,fe.get(ae).__webglTexture,Pe,lt+As),se.framebufferTextureLayer(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,fe.get(Ne).__webglTexture,rt,In+As)),se.blitFramebuffer(Kt,Ht,mt,_t,Ut,Qt,mt,_t,se.DEPTH_BUFFER_BIT,se.NEAREST);le.bindFramebuffer(se.READ_FRAMEBUFFER,null),le.bindFramebuffer(se.DRAW_FRAMEBUFFER,null)}else if(Pe!==0||ae.isRenderTargetTexture||fe.has(ae)){const Ii=fe.get(ae),Wi=fe.get(Ne);le.bindFramebuffer(se.READ_FRAMEBUFFER,bd),le.bindFramebuffer(se.DRAW_FRAMEBUFFER,wd);for(let Kr=0;Kr<Tt;Kr++)Bn?se.framebufferTextureLayer(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,Ii.__webglTexture,Pe,lt+Kr):se.framebufferTexture2D(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,Ii.__webglTexture,Pe),ns?se.framebufferTextureLayer(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,Wi.__webglTexture,rt,In+Kr):se.framebufferTexture2D(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,Wi.__webglTexture,rt),Pe!==0?se.blitFramebuffer(Kt,Ht,mt,_t,Ut,Qt,mt,_t,se.COLOR_BUFFER_BIT,se.NEAREST):ns?se.copyTexSubImage3D(Fn,rt,Ut,Qt,In+Kr,Kt,Ht,mt,_t):se.copyTexSubImage2D(Fn,rt,Ut,Qt,Kt,Ht,mt,_t);le.bindFramebuffer(se.READ_FRAMEBUFFER,null),le.bindFramebuffer(se.DRAW_FRAMEBUFFER,null)}else ns?ae.isDataTexture||ae.isData3DTexture?se.texSubImage3D(Fn,rt,Ut,Qt,In,mt,_t,Tt,vn,jt,Rn.data):Ne.isCompressedArrayTexture?se.compressedTexSubImage3D(Fn,rt,Ut,Qt,In,mt,_t,Tt,vn,Rn.data):se.texSubImage3D(Fn,rt,Ut,Qt,In,mt,_t,Tt,vn,jt,Rn):ae.isDataTexture?se.texSubImage2D(se.TEXTURE_2D,rt,Ut,Qt,mt,_t,vn,jt,Rn.data):ae.isCompressedTexture?se.compressedTexSubImage2D(se.TEXTURE_2D,rt,Ut,Qt,Rn.width,Rn.height,vn,Rn.data):se.texSubImage2D(se.TEXTURE_2D,rt,Ut,Qt,mt,_t,vn,jt,Rn);se.pixelStorei(se.UNPACK_ROW_LENGTH,mn),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,mi),se.pixelStorei(se.UNPACK_SKIP_PIXELS,dl),se.pixelStorei(se.UNPACK_SKIP_ROWS,Ci),se.pixelStorei(se.UNPACK_SKIP_IMAGES,ja),rt===0&&Ne.generateMipmaps&&se.generateMipmap(Fn),le.unbindTexture()},this.copyTextureToTexture3D=function(ae,Ne,ze=null,Le=null,Pe=0){return ae.isTexture!==!0&&(Ug("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ze=arguments[0]||null,Le=arguments[1]||null,ae=arguments[2],Ne=arguments[3],Pe=arguments[4]||0),Ug('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ae,Ne,ze,Le,Pe)},this.initRenderTarget=function(ae){fe.get(ae).__webglFramebuffer===void 0&&Q.setupRenderTarget(ae)},this.initTexture=function(ae){ae.isCubeTexture?Q.setTextureCube(ae,0):ae.isData3DTexture?Q.setTexture3D(ae,0):ae.isDataArrayTexture||ae.isCompressedArrayTexture?Q.setTexture2DArray(ae,0):Q.setTexture2D(ae,0),le.unbindTexture()},this.resetState=function(){N=0,D=0,L=null,le.reset(),ft.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Xl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorspace=Xn._getDrawingBufferColorSpace(e),n.unpackColorSpace=Xn._getUnpackColorSpace()}}const Xbe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:hT,AddEquation:_f,AddOperation:l$,AdditiveAnimationBlendMode:Fk,AdditiveBlending:kP,AgXToneMapping:h$,AlphaFormat:Nk,AlwaysCompare:I$,AlwaysDepth:PE,AlwaysStencilFunc:FP,AmbientLight:_6,AnimationAction:N6,AnimationClip:yb,AnimationLoader:cge,AnimationMixer:Bge,AnimationObjectGroup:Dge,AnimationUtils:sge,ArcCurve:G$,ArrayCamera:I6,ArrowHelper:oye,AttachedBindMode:DP,Audio:R6,AudioAnalyser:Tge,AudioContext:aO,AudioListener:Sge,AudioLoader:bge,AxesHelper:aye,BackSide:So,BasicDepthPacking:x$,BasicShadowMap:VH,BatchedMesh:V$,Bone:qk,BooleanKeyframeTrack:lm,Box2:$ge,Box3:Eo,Box3Helper:iye,BoxGeometry:am,BoxHelper:rye,BufferAttribute:vr,BufferGeometry:kn,BufferGeometryLoader:C6,ByteType:Ik,Cache:Xu,Camera:Jb,CameraHelper:nye,CanvasTexture:$$,CapsuleGeometry:AT,CatmullRomCurve3:X$,CineonToneMapping:d$,CircleGeometry:NT,ClampToEdgeWrapping:il,Clock:lO,Color:Nt,ColorKeyframeTrack:iO,ColorManagement:Xn,CompressedArrayTexture:Ime,CompressedCubeTexture:Rme,CompressedTexture:IT,CompressedTextureLoader:uge,ConeGeometry:PT,ConstantAlphaFactor:s$,ConstantColorFactor:r$,Controls:cye,CubeCamera:L$,CubeReflectionMapping:ud,CubeRefractionMapping:Wf,CubeTexture:Qb,CubeTextureLoader:dge,CubeUVReflectionMapping:rv,CubicBezierCurve:Xk,CubicBezierCurve3:K$,CubicInterpolant:p6,CullFaceBack:PP,CullFaceFront:zH,CullFaceFrontBack:jhe,CullFaceNone:UH,Curve:ic,CurvePath:Z$,CustomBlending:WH,CustomToneMapping:f$,CylinderGeometry:sv,Cylindrical:Hge,Data3DTexture:ST,DataArrayTexture:Zb,DataTexture:Dc,DataTextureLoader:fge,DataUtils:tme,DecrementStencilOp:Qhe,DecrementWrapStencilOp:tpe,DefaultLoadingManager:y6,DepthFormat:Np,DepthStencilFormat:Yp,DepthTexture:$k,DetachedBindMode:m$,DirectionalLight:w6,DirectionalLightHelper:tye,DiscreteInterpolant:m6,DodecahedronGeometry:kT,DoubleSide:Cc,DstAlphaFactor:JH,DstColorFactor:e$,DynamicCopyUsage:gpe,DynamicDrawUsage:upe,DynamicReadUsage:hpe,EdgesGeometry:J$,EllipseCurve:RT,EqualCompare:E$,EqualDepth:OE,EqualStencilFunc:spe,EquirectangularReflectionMapping:tb,EquirectangularRefractionMapping:nb,Euler:Oa,EventDispatcher:$c,ExtrudeGeometry:LT,FileLoader:fd,Float16BufferAttribute:lme,Float32BufferAttribute:qt,FloatType:Qo,Fog:MT,FogExp2:ET,FramebufferTexture:Cme,FrontSide:cd,Frustum:ew,GLBufferAttribute:qge,GLSL1:vpe,GLSL3:BP,GreaterCompare:M$,GreaterDepth:DE,GreaterEqualCompare:C$,GreaterEqualDepth:LE,GreaterEqualStencilFunc:cpe,GreaterStencilFunc:ape,GridHelper:Qge,Group:Qg,HalfFloatType:iv,HemisphereLight:v6,HemisphereLightHelper:Jge,IcosahedronGeometry:DT,ImageBitmapLoader:xge,ImageLoader:vb,ImageUtils:N$,IncrementStencilOp:Jhe,IncrementWrapStencilOp:epe,InstancedBufferAttribute:Vy,InstancedBufferGeometry:T6,InstancedInterleavedBuffer:Wge,InstancedMesh:z$,Int16BufferAttribute:ome,Int32BufferAttribute:ame,Int8BufferAttribute:rme,IntType:mT,InterleavedBuffer:TT,InterleavedBufferAttribute:Jp,Interpolant:iw,InterpolateDiscrete:sb,InterpolateLinear:uM,InterpolateSmooth:e1,InvertStencilOp:npe,KeepStencilOp:cp,KeyframeTrack:sc,LOD:j$,LatheGeometry:tw,Layers:kp,LessCompare:S$,LessDepth:kE,LessEqualCompare:Bk,LessEqualDepth:Xp,LessEqualStencilFunc:ope,LessStencilFunc:ipe,Light:Zf,LightProbe:M6,Line:qf,Line3:Gge,LineBasicMaterial:Io,LineCurve:Kk,LineCurve3:Y$,LineDashedMaterial:d6,LineLoop:W$,LineSegments:Gc,LinearFilter:Ji,LinearInterpolant:rO,LinearMipMapLinearFilter:Whe,LinearMipMapNearestFilter:Vhe,LinearMipmapLinearFilter:Ac,LinearMipmapNearestFilter:a0,LinearSRGBColorSpace:Zp,LinearToneMapping:c$,LinearTransfer:ab,Loader:oa,LoaderUtils:WP,LoadingManager:sO,LoopOnce:g$,LoopPingPong:v$,LoopRepeat:y$,LuminanceAlphaFormat:Ok,LuminanceFormat:kk,MOUSE:Wu,Material:eo,MaterialLoader:WT,MathUtils:Dpe,Matrix2:fO,Matrix3:_n,Matrix4:cn,MaxEquation:GH,Mesh:ji,MeshBasicMaterial:Kf,MeshDepthMaterial:eO,MeshDistanceMaterial:tO,MeshLambertMaterial:c6,MeshMatcapMaterial:u6,MeshNormalMaterial:l6,MeshPhongMaterial:o6,MeshPhysicalMaterial:s6,MeshStandardMaterial:Qk,MeshToonMaterial:a6,MinEquation:$H,MirroredRepeatWrapping:ib,MixOperation:a$,MultiplyBlending:LP,MultiplyOperation:Kb,NearestFilter:Ts,NearestMipMapLinearFilter:zhe,NearestMipMapNearestFilter:Uhe,NearestMipmapLinearFilter:Zg,NearestMipmapNearestFilter:Ck,NeutralToneMapping:p$,NeverCompare:_$,NeverDepth:NE,NeverStencilFunc:rpe,NoBlending:Qu,NoColorSpace:Hu,NoToneMapping:Lc,NormalAnimationBlendMode:wT,NormalBlending:Ap,NotEqualCompare:T$,NotEqualDepth:FE,NotEqualStencilFunc:lpe,NumberKeyframeTrack:mb,Object3D:er,ObjectLoader:yge,ObjectSpaceNormalMap:w$,OctahedronGeometry:nw,OneFactor:KH,OneMinusConstantAlphaFactor:o$,OneMinusConstantColorFactor:i$,OneMinusDstAlphaFactor:QH,OneMinusDstColorFactor:t$,OneMinusSrcAlphaFactor:AE,OneMinusSrcColorFactor:ZH,OrthographicCamera:td,PCFShadowMap:fT,PCFSoftShadowMap:o0,PMREMGenerator:GP,Path:db,PerspectiveCamera:wi,Plane:qu,PlaneGeometry:ov,PlaneHelper:sye,PointLight:b6,PointLightHelper:Yge,Points:q$,PointsMaterial:Hk,PolarGridHelper:eye,PolyhedronGeometry:Yf,PositionalAudio:Mge,PropertyBinding:Jn,PropertyMixer:A6,QuadraticBezierCurve:Yk,QuadraticBezierCurve3:Zk,Quaternion:Gs,QuaternionKeyframeTrack:sw,QuaternionLinearInterpolant:g6,RED_GREEN_RGTC2_Format:lM,RED_RGTC1_Format:Dk,REVISION:dT,RGBADepthPacking:b$,RGBAFormat:qs,RGBAIntegerFormat:bT,RGBA_ASTC_10x10_Format:nM,RGBA_ASTC_10x5_Format:QE,RGBA_ASTC_10x6_Format:eM,RGBA_ASTC_10x8_Format:tM,RGBA_ASTC_12x10_Format:rM,RGBA_ASTC_12x12_Format:iM,RGBA_ASTC_4x4_Format:HE,RGBA_ASTC_5x4_Format:$E,RGBA_ASTC_5x5_Format:GE,RGBA_ASTC_6x5_Format:XE,RGBA_ASTC_6x6_Format:KE,RGBA_ASTC_8x5_Format:YE,RGBA_ASTC_8x6_Format:ZE,RGBA_ASTC_8x8_Format:JE,RGBA_BPTC_Format:f0,RGBA_ETC2_EAC_Format:qE,RGBA_PVRTC_2BPPV1_Format:zE,RGBA_PVRTC_4BPPV1_Format:UE,RGBA_S3TC_DXT1_Format:c0,RGBA_S3TC_DXT3_Format:u0,RGBA_S3TC_DXT5_Format:d0,RGBDepthPacking:Xhe,RGBFormat:Pk,RGBIntegerFormat:qhe,RGB_BPTC_SIGNED_Format:sM,RGB_BPTC_UNSIGNED_Format:oM,RGB_ETC1_Format:VE,RGB_ETC2_Format:WE,RGB_PVRTC_2BPPV1_Format:jE,RGB_PVRTC_4BPPV1_Format:BE,RGB_S3TC_DXT1_Format:l0,RGDepthPacking:Khe,RGFormat:Lk,RGIntegerFormat:xT,RawShaderMaterial:i6,Ray:om,Raycaster:P6,RectAreaLight:S6,RedFormat:vT,RedIntegerFormat:Yb,ReinhardToneMapping:u$,RenderTarget:_T,RenderTarget3D:jge,RenderTargetArray:Uge,RepeatWrapping:rb,ReplaceStencilOp:Zhe,ReverseSubtractEquation:HH,RingGeometry:FT,SIGNED_RED_GREEN_RGTC2_Format:cM,SIGNED_RED_RGTC1_Format:aM,SRGBColorSpace:Ko,SRGBTransfer:ur,Scene:Vk,ShaderChunk:Nn,ShaderLib:Vl,ShaderMaterial:ec,ShadowMaterial:r6,Shape:Op,ShapeGeometry:BT,ShapePath:lye,ShapeUtils:Fc,ShortType:Rk,Skeleton:CT,SkeletonHelper:Kge,SkinnedMesh:U$,Source:Ep,Sphere:Xs,SphereGeometry:rw,Spherical:HP,SphericalHarmonics3:E6,SplineCurve:Jk,SpotLight:x6,SpotLightHelper:Xge,Sprite:B$,SpriteMaterial:Wk,SrcAlphaFactor:RE,SrcAlphaSaturateFactor:n$,SrcColorFactor:YH,StaticCopyUsage:mpe,StaticDrawUsage:lb,StaticReadUsage:fpe,StereoCamera:wge,StreamCopyUsage:ype,StreamDrawUsage:dpe,StreamReadUsage:ppe,StringKeyframeTrack:cm,SubtractEquation:qH,SubtractiveBlending:OP,TOUCH:lp,TangentSpaceNormalMap:Xf,TetrahedronGeometry:jT,Texture:oi,TextureLoader:hge,TextureUtils:pye,TimestampQuery:xpe,TorusGeometry:UT,TorusKnotGeometry:zT,Triangle:Yo,TriangleFanDrawMode:Ghe,TriangleStripDrawMode:$he,TrianglesDrawMode:Hhe,TubeGeometry:VT,UVMapping:pT,Uint16BufferAttribute:Uk,Uint32BufferAttribute:zk,Uint8BufferAttribute:ime,Uint8ClampedBufferAttribute:sme,Uniform:dO,UniformsGroup:Vge,UniformsLib:bt,UniformsUtils:O$,UnsignedByteType:Ql,UnsignedInt248Type:Kp,UnsignedInt5999Type:Ak,UnsignedIntType:dd,UnsignedShort4444Type:gT,UnsignedShort5551Type:yT,UnsignedShortType:jy,VSMShadowMap:Bl,Vector2:Je,Vector3:pe,Vector4:Qn,VectorKeyframeTrack:gb,VideoFrameTexture:Tme,VideoTexture:H$,WebGL3DRenderTarget:Hpe,WebGLArrayRenderTarget:qpe,WebGLCoordinateSystem:Xl,WebGLCubeRenderTarget:D$,WebGLRenderTarget:Wc,WebGLRenderer:U6,WebGLUtils:j6,WebGPUCoordinateSystem:cb,WebXRController:t1,WireframeGeometry:n6,WrapAroundEnding:ob,ZeroCurvatureEnding:_p,ZeroFactor:XH,ZeroSlopeEnding:Sp,ZeroStencilOp:Yhe,createCanvasElement:A$},Symbol.toStringTag,{value:"Module"}));var ZA={exports:{}},ff={};var sz;function Kbe(){return sz||(sz=1,ff.ConcurrentRoot=1,ff.ContinuousEventPriority=4,ff.DefaultEventPriority=16,ff.DiscreteEventPriority=1,ff.IdleEventPriority=0x20000000,ff.LegacyRoot=0),ff}var oz;function Ybe(){return oz||(oz=1,ZA.exports=Kbe()),ZA.exports}var ny=Ybe();function Zbe(t){let e;const n=new Set,r=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=u?f:Object.assign({},e,f),n.forEach(g=>g(e,p))}},i=()=>e,s=(c,u=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function g(){const x=u(e);if(!f(p,x)){const S=p;c(p=x,S)}}return n.add(g),()=>n.delete(g)},l={setState:r,getState:i,subscribe:(c,u,f)=>u||f?s(c,u,f):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const Jbe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),az=Jbe?X.useEffect:X.useLayoutEffect;function Qbe(t){const e=typeof t=="function"?Zbe(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=X.useReducer(_=>_+1,0),o=e.getState(),a=X.useRef(o),l=X.useRef(r),c=X.useRef(i),u=X.useRef(!1),f=X.useRef();f.current===void 0&&(f.current=r(o));let p,g=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),g=!i(f.current,p)),az(()=>{g&&(f.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const x=X.useRef(o);az(()=>{const _=()=>{try{const E=e.getState(),M=l.current(E);c.current(f.current,M)||(a.current=E,f.current=M,s())}catch{u.current=!0,s()}},b=e.subscribe(_);return e.getState()!==x.current&&_(),b},[]);const S=g?p:f.current;return X.useDebugValue(S),S};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var JA={exports:{}},QA={exports:{}},eN={};var lz;function ewe(){return lz||(lz=1,function(t){function e(W,Z){var J=W.length;W.push(Z);e:for(;0<J;){var Y=J-1>>>1,oe=W[Y];if(0<i(oe,Z))W[Y]=Z,W[J]=oe,J=Y;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Z=W[0],J=W.pop();if(J!==Z){W[0]=J;e:for(var Y=0,oe=W.length,ce=oe>>>1;Y<ce;){var ie=2*(Y+1)-1,ue=W[ie],de=ie+1,be=W[de];if(0>i(ue,J))de<oe&&0>i(be,ue)?(W[Y]=be,W[de]=J,Y=de):(W[Y]=ue,W[ie]=J,Y=ie);else if(de<oe&&0>i(be,J))W[Y]=be,W[de]=J,Y=de;else break e}}return Z}function i(W,Z){var J=W.sortIndex-Z.sortIndex;return J!==0?J:W.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,g=!1,x=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(W){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=W)r(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(c)}}function T(W){if(S=!1,M(W),!x)if(n(l)!==null)x=!0,q(k);else{var Z=n(c);Z!==null&&te(T,Z.startTime-W)}}function k(W,Z){x=!1,S&&(S=!1,b(L),L=-1),g=!0;var J=p;try{for(M(Z),f=n(l);f!==null&&(!(f.expirationTime>Z)||W&&!P());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var oe=Y(f.expirationTime<=Z);Z=t.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(l)&&r(l),M(Z)}else r(l);f=n(l)}if(f!==null)var ce=!0;else{var ie=n(c);ie!==null&&te(T,ie.startTime-Z),ce=!1}return ce}finally{f=null,p=J,g=!1}}var N=!1,D=null,L=-1,R=5,A=-1;function P(){return!(t.unstable_now()-A<R)}function j(){if(D!==null){var W=t.unstable_now();A=W;var Z=!0;try{Z=D(!0,W)}finally{Z?U():(N=!1,D=null)}}else N=!1}var U;if(typeof E=="function")U=function(){E(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,$=B.port2;B.port1.onmessage=j,U=function(){$.postMessage(null)}}else U=function(){_(j,0)};function q(W){D=W,N||(N=!0,U())}function te(W,Z){L=_(function(){W(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,q(k))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var J=p;p=Z;try{return W()}finally{p=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Z){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var J=p;p=W;try{return Z()}finally{p=J}},t.unstable_scheduleCallback=function(W,Z,J){var Y=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Y+J:Y):J=Y,W){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=0x3fffffff;break;case 4:oe=1e4;break;default:oe=5e3}return oe=J+oe,W={id:u++,callback:Z,priorityLevel:W,startTime:J,expirationTime:oe,sortIndex:-1},J>Y?(W.sortIndex=J,e(c,W),n(l)===null&&W===n(c)&&(S?(b(L),L=-1):S=!0,te(T,J-Y))):(W.sortIndex=oe,e(l,W),x||g||(x=!0,q(k))),W},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(W){var Z=p;return function(){var J=p;p=Z;try{return W.apply(this,arguments)}finally{p=J}}}}(eN)),eN}var cz;function z6(){return cz||(cz=1,QA.exports=ewe()),QA.exports}var tN,uz;function twe(){return uz||(uz=1,tN=function(e){var n={},r=qy(),i=z6(),s=Object.assign;function o(m){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+m,C=1;C<arguments.length;C++)y+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),x=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),k=Symbol.iterator;function N(m){return m===null||typeof m!="object"?null:(m=k&&m[k]||m["@@iterator"],typeof m=="function"?m:null)}function D(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case _:return"Suspense";case b:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case x:return(m.displayName||"Context")+".Consumer";case g:return(m._context.displayName||"Context")+".Provider";case S:var y=m.render;return m=m.displayName,m||(m=y.displayName||y.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case E:return y=m.displayName||null,y!==null?y:D(m.type)||"Memo";case M:y=m._payload,m=m._init;try{return D(m(y))}catch{}}return null}function L(m){var y=m.type;switch(m.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=y.render,m=m.displayName||m.name||"",y.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(y);case 8:return y===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function R(m){var y=m,C=m;if(m.alternate)for(;y.return;)y=y.return;else{m=y;do y=m,y.flags&4098&&(C=y.return),m=y.return;while(m)}return y.tag===3?C:null}function A(m){if(R(m)!==m)throw Error(o(188))}function P(m){var y=m.alternate;if(!y){if(y=R(m),y===null)throw Error(o(188));return y!==m?null:m}for(var C=m,O=y;;){var z=C.return;if(z===null)break;var K=z.alternate;if(K===null){if(O=z.return,O!==null){C=O;continue}break}if(z.child===K.child){for(K=z.child;K;){if(K===C)return A(z),m;if(K===O)return A(z),y;K=K.sibling}throw Error(o(188))}if(C.return!==O.return)C=z,O=K;else{for(var ye=!1,Ae=z.child;Ae;){if(Ae===C){ye=!0,C=z,O=K;break}if(Ae===O){ye=!0,O=z,C=K;break}Ae=Ae.sibling}if(!ye){for(Ae=K.child;Ae;){if(Ae===C){ye=!0,C=K,O=z;break}if(Ae===O){ye=!0,O=K,C=z;break}Ae=Ae.sibling}if(!ye)throw Error(o(189))}}if(C.alternate!==O)throw Error(o(190))}if(C.tag!==3)throw Error(o(188));return C.stateNode.current===C?m:y}function j(m){return m=P(m),m!==null?U(m):null}function U(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var y=U(m);if(y!==null)return y;m=m.sibling}return null}function B(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){if(m.tag!==4){var y=B(m);if(y!==null)return y}m=m.sibling}return null}var $=Array.isArray,q=e.getPublicInstance,te=e.getRootHostContext,W=e.getChildHostContext,Z=e.prepareForCommit,J=e.resetAfterCommit,Y=e.createInstance,oe=e.appendInitialChild,ce=e.finalizeInitialChildren,ie=e.prepareUpdate,ue=e.shouldSetTextContent,de=e.createTextInstance,be=e.scheduleTimeout,we=e.cancelTimeout,Ce=e.noTimeout,Ie=e.isPrimaryRenderer,Fe=e.supportsMutation,ve=e.supportsPersistence,_e=e.supportsHydration,se=e.getInstanceFromNode,$e=e.preparePortalMount,je=e.getCurrentEventPriority,Ze=e.detachDeletedInstance,le=e.supportsMicrotasks,ge=e.scheduleMicrotask,fe=e.supportsTestSelectors,Q=e.findFiberRoot,G=e.getBoundingRect,me=e.getTextContent,he=e.isHiddenSubtree,Te=e.matchAccessibilityRole,Oe=e.setFocusIfFocusable,Qe=e.setupIntersectionObserver,Ye=e.appendChild,at=e.appendChildToContainer,Ft=e.commitTextUpdate,et=e.commitMount,gt=e.commitUpdate,kt=e.insertBefore,Bt=e.insertInContainerBefore,dt=e.removeChild,Ee=e.removeChildFromContainer,He=e.resetTextContent,ft=e.hideInstance,Se=e.hideTextInstance,nt=e.unhideInstance,Ve=e.unhideTextInstance,Ke=e.clearContainer,vt=e.cloneInstance,pt=e.createContainerChildSet,Xt=e.appendChildToContainerChildSet,Dn=e.finalizeContainerChildren,sr=e.replaceContainerChildren,yn=e.cloneHiddenInstance,Or=e.cloneHiddenTextInstance,jr=e.canHydrateInstance,oc=e.canHydrateTextInstance,Fa=e.canHydrateSuspenseInstance,Ro=e.isSuspenseInstancePending,to=e.isSuspenseInstanceFallback,ul=e.registerSuspenseInstanceRetry,no=e.getNextHydratableSibling,Ba=e.getFirstHydratableChild,md=e.getFirstHydratableChildWithinContainer,ac=e.getFirstHydratableChildWithinSuspenseInstance,Kc=e.hydrateInstance,ro=e.hydrateTextInstance,gd=e.hydrateSuspenseInstance,yd=e.getNextHydratableInstanceAfterSuspenseInstance,vd=e.commitHydratedContainer,xd=e.commitHydratedSuspenseInstance,bd=e.clearSuspenseBoundary,wd=e.clearSuspenseBoundaryFromContainer,ae=e.shouldDeleteUnhydratedTailInstances,Ne=e.didNotMatchHydratedContainerTextInstance,ze=e.didNotMatchHydratedTextInstance,Le;function Pe(m){if(Le===void 0)try{throw Error()}catch(C){var y=C.stack.trim().match(/\n( *(at )?)/);Le=y&&y[1]||""}return`
`+Le+m}var rt=!1;function mt(m,y){if(!m||rt)return"";rt=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(ct){var O=ct}Reflect.construct(m,[],y)}else{try{y.call()}catch(ct){O=ct}m.call(y.prototype)}else{try{throw Error()}catch(ct){O=ct}m()}}catch(ct){if(ct&&O&&typeof ct.stack=="string"){for(var z=ct.stack.split(`
`),K=O.stack.split(`
`),ye=z.length-1,Ae=K.length-1;1<=ye&&0<=Ae&&z[ye]!==K[Ae];)Ae--;for(;1<=ye&&0<=Ae;ye--,Ae--)if(z[ye]!==K[Ae]){if(ye!==1||Ae!==1)do if(ye--,Ae--,0>Ae||z[ye]!==K[Ae]){var Xe=`
`+z[ye].replace(" at new "," at ");return m.displayName&&Xe.includes("<anonymous>")&&(Xe=Xe.replace("<anonymous>",m.displayName)),Xe}while(1<=ye&&0<=Ae);break}}}finally{rt=!1,Error.prepareStackTrace=C}return(m=m?m.displayName||m.name:"")?Pe(m):""}var _t=Object.prototype.hasOwnProperty,Tt=[],Kt=-1;function Ht(m){return{current:m}}function lt(m){0>Kt||(m.current=Tt[Kt],Tt[Kt]=null,Kt--)}function Ut(m,y){Kt++,Tt[Kt]=m.current,m.current=y}var Qt={},In=Ht(Qt),Rn=Ht(!1),vn=Qt;function jt(m,y){var C=m.type.contextTypes;if(!C)return Qt;var O=m.stateNode;if(O&&O.__reactInternalMemoizedUnmaskedChildContext===y)return O.__reactInternalMemoizedMaskedChildContext;var z={},K;for(K in C)z[K]=y[K];return O&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=y,m.__reactInternalMemoizedMaskedChildContext=z),z}function Fn(m){return m=m.childContextTypes,m!=null}function mn(){lt(Rn),lt(In)}function mi(m,y,C){if(In.current!==Qt)throw Error(o(168));Ut(In,y),Ut(Rn,C)}function dl(m,y,C){var O=m.stateNode;if(y=y.childContextTypes,typeof O.getChildContext!="function")return C;O=O.getChildContext();for(var z in O)if(!(z in y))throw Error(o(108,L(m)||"Unknown",z));return s({},C,O)}function Ci(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Qt,vn=In.current,Ut(In,m),Ut(Rn,Rn.current),!0}function ja(m,y,C){var O=m.stateNode;if(!O)throw Error(o(169));C?(m=dl(m,y,vn),O.__reactInternalMemoizedMergedChildContext=m,lt(Rn),lt(In),Ut(In,m)):lt(Rn),Ut(Rn,C)}var Bn=Math.clz32?Math.clz32:Wi,ns=Math.log,Ii=Math.LN2;function Wi(m){return m>>>=0,m===0?32:31-(ns(m)/Ii|0)|0}var Kr=64,zn=4194304;function As(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return m&0x7c00000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return m}}function nh(m,y){var C=m.pendingLanes;if(C===0)return 0;var O=0,z=m.suspendedLanes,K=m.pingedLanes,ye=C&0xfffffff;if(ye!==0){var Ae=ye&~z;Ae!==0?O=As(Ae):(K&=ye,K!==0&&(O=As(K)))}else ye=C&~z,ye!==0?O=As(ye):K!==0&&(O=As(K));if(O===0)return 0;if(y!==0&&y!==O&&!(y&z)&&(z=O&-O,K=y&-y,z>=K||z===16&&(K&4194240)!==0))return y;if(O&4&&(O|=C&16),y=m.entangledLanes,y!==0)for(m=m.entanglements,y&=O;0<y;)C=31-Bn(y),z=1<<C,O|=m[C],y&=~z;return O}function uv(m,y){switch(m){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return-1;case 0x8000000:case 0x10000000:case 0x20000000:case 0x40000000:return-1;default:return-1}}function mw(m,y){for(var C=m.suspendedLanes,O=m.pingedLanes,z=m.expirationTimes,K=m.pendingLanes;0<K;){var ye=31-Bn(K),Ae=1<<ye,Xe=z[ye];Xe===-1?(!(Ae&C)||Ae&O)&&(z[ye]=uv(Ae,y)):Xe<=y&&(m.expiredLanes|=Ae),K&=~Ae}}function um(m){return m=m.pendingLanes&-0x40000001,m!==0?m:m&0x40000000?0x40000000:0}function dm(m){for(var y=[],C=0;31>C;C++)y.push(m);return y}function Yc(m,y,C){m.pendingLanes|=y,y!==0x20000000&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,y=31-Bn(y),m[y]=C}function fm(m,y){var C=m.pendingLanes&~y;m.pendingLanes=y,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=y,m.mutableReadLanes&=y,m.entangledLanes&=y,y=m.entanglements;var O=m.eventTimes;for(m=m.expirationTimes;0<C;){var z=31-Bn(C),K=1<<z;y[z]=0,O[z]=-1,m[z]=-1,C&=~K}}function Ua(m,y){var C=m.entangledLanes|=y;for(m=m.entanglements;C;){var O=31-Bn(C),z=1<<O;z&y|m[O]&y&&(m[O]|=y),C&=~z}}var An=0;function fl(m){return m&=-m,1<m?4<m?m&0xfffffff?16:0x20000000:4:1}var Zc=i.unstable_scheduleCallback,_d=i.unstable_cancelCallback,lc=i.unstable_shouldYield,XT=i.unstable_requestPaint,gi=i.unstable_now,Jc=i.unstable_ImmediatePriority,KT=i.unstable_UserBlockingPriority,hm=i.unstable_NormalPriority,pm=i.unstable_IdlePriority,rh=null,za=null;function ih(m){if(za&&typeof za.onCommitFiberRoot=="function")try{za.onCommitFiberRoot(rh,m,void 0,(m.current.flags&128)===128)}catch{}}function sh(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var hs=typeof Object.is=="function"?Object.is:sh,Ao=null,mm=!1,dv=!1;function gm(m){Ao===null?Ao=[m]:Ao.push(m)}function ym(m){mm=!0,gm(m)}function No(){if(!dv&&Ao!==null){dv=!0;var m=0,y=An;try{var C=Ao;for(An=1;m<C.length;m++){var O=C[m];do O=O(!0);while(O!==null)}Ao=null,mm=!1}catch(z){throw Ao!==null&&(Ao=Ao.slice(m+1)),Zc(Jc,No),z}finally{An=y,dv=!1}}return null}var gw=a.ReactCurrentBatchConfig;function la(m,y){if(hs(m,y))return!0;if(typeof m!="object"||m===null||typeof y!="object"||y===null)return!1;var C=Object.keys(m),O=Object.keys(y);if(C.length!==O.length)return!1;for(O=0;O<C.length;O++){var z=C[O];if(!_t.call(y,z)||!hs(m[z],y[z]))return!1}return!0}function fv(m){switch(m.tag){case 5:return Pe(m.type);case 16:return Pe("Lazy");case 13:return Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 2:case 15:return m=mt(m.type,!1),m;case 11:return m=mt(m.type.render,!1),m;case 1:return m=mt(m.type,!0),m;default:return""}}function Ns(m,y){if(m&&m.defaultProps){y=s({},y),m=m.defaultProps;for(var C in m)y[C]===void 0&&(y[C]=m[C]);return y}return y}var oh=Ht(null),Qc=null,hl=null,vm=null;function ps(){vm=hl=Qc=null}function eu(m,y,C){Ie?(Ut(oh,y._currentValue),y._currentValue=C):(Ut(oh,y._currentValue2),y._currentValue2=C)}function ah(m){var y=oh.current;lt(oh),Ie?m._currentValue=y:m._currentValue2=y}function tu(m,y,C){for(;m!==null;){var O=m.alternate;if((m.childLanes&y)!==y?(m.childLanes|=y,O!==null&&(O.childLanes|=y)):O!==null&&(O.childLanes&y)!==y&&(O.childLanes|=y),m===C)break;m=m.return}}function Sd(m,y){Qc=m,vm=hl=null,m=m.dependencies,m!==null&&m.firstContext!==null&&(m.lanes&y&&(Pi=!0),m.firstContext=null)}function Ps(m){var y=Ie?m._currentValue:m._currentValue2;if(vm!==m)if(m={context:m,memoizedValue:y,next:null},hl===null){if(Qc===null)throw Error(o(308));hl=m,Qc.dependencies={lanes:0,firstContext:m}}else hl=hl.next=m;return y}var Po=null,ko=!1;function Ed(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hv(m,y){m=m.updateQueue,y.updateQueue===m&&(y.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function pl(m,y){return{eventTime:m,lane:y,tag:0,payload:null,callback:null,next:null}}function cc(m,y){var C=m.updateQueue;C!==null&&(C=C.shared,Zr!==null&&m.mode&1&&!(wn&2)?(m=C.interleaved,m===null?(y.next=y,Po===null?Po=[C]:Po.push(C)):(y.next=m.next,m.next=y),C.interleaved=y):(m=C.pending,m===null?y.next=y:(y.next=m.next,m.next=y),C.pending=y))}function xm(m,y,C){if(y=y.updateQueue,y!==null&&(y=y.shared,(C&4194240)!==0)){var O=y.lanes;O&=m.pendingLanes,C|=O,y.lanes=C,Ua(m,C)}}function bm(m,y){var C=m.updateQueue,O=m.alternate;if(O!==null&&(O=O.updateQueue,C===O)){var z=null,K=null;if(C=C.firstBaseUpdate,C!==null){do{var ye={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};K===null?z=K=ye:K=K.next=ye,C=C.next}while(C!==null);K===null?z=K=y:K=K.next=y}else z=K=y;C={baseState:O.baseState,firstBaseUpdate:z,lastBaseUpdate:K,shared:O.shared,effects:O.effects},m.updateQueue=C;return}m=C.lastBaseUpdate,m===null?C.firstBaseUpdate=y:m.next=y,C.lastBaseUpdate=y}function wm(m,y,C,O){var z=m.updateQueue;ko=!1;var K=z.firstBaseUpdate,ye=z.lastBaseUpdate,Ae=z.shared.pending;if(Ae!==null){z.shared.pending=null;var Xe=Ae,ct=Xe.next;Xe.next=null,ye===null?K=ct:ye.next=ct,ye=Xe;var Ot=m.alternate;Ot!==null&&(Ot=Ot.updateQueue,Ae=Ot.lastBaseUpdate,Ae!==ye&&(Ae===null?Ot.firstBaseUpdate=ct:Ae.next=ct,Ot.lastBaseUpdate=Xe))}if(K!==null){var dn=z.baseState;ye=0,Ot=ct=Xe=null,Ae=K;do{var Zt=Ae.lane,En=Ae.eventTime;if((O&Zt)===Zt){Ot!==null&&(Ot=Ot.next={eventTime:En,lane:0,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null});e:{var St=m,Ki=Ae;switch(Zt=y,En=C,Ki.tag){case 1:if(St=Ki.payload,typeof St=="function"){dn=St.call(En,dn,Zt);break e}dn=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Ki.payload,Zt=typeof St=="function"?St.call(En,dn,Zt):St,Zt==null)break e;dn=s({},dn,Zt);break e;case 2:ko=!0}}Ae.callback!==null&&Ae.lane!==0&&(m.flags|=64,Zt=z.effects,Zt===null?z.effects=[Ae]:Zt.push(Ae))}else En={eventTime:En,lane:Zt,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},Ot===null?(ct=Ot=En,Xe=dn):Ot=Ot.next=En,ye|=Zt;if(Ae=Ae.next,Ae===null){if(Ae=z.shared.pending,Ae===null)break;Zt=Ae,Ae=Zt.next,Zt.next=null,z.lastBaseUpdate=Zt,z.shared.pending=null}}while(!0);if(Ot===null&&(Xe=dn),z.baseState=Xe,z.firstBaseUpdate=ct,z.lastBaseUpdate=Ot,y=z.shared.interleaved,y!==null){z=y;do ye|=z.lane,z=z.next;while(z!==y)}else K===null&&(z.shared.lanes=0);Ha|=ye,m.lanes=ye,m.memoizedState=dn}}function yw(m,y,C){if(m=y.effects,y.effects=null,m!==null)for(y=0;y<m.length;y++){var O=m[y],z=O.callback;if(z!==null){if(O.callback=null,O=C,typeof z!="function")throw Error(o(191,z));z.call(O)}}}var vw=new r.Component().refs;function pv(m,y,C,O){y=m.memoizedState,C=C(O,y),C=C==null?y:s({},y,C),m.memoizedState=C,m.lanes===0&&(m.updateQueue.baseState=C)}var _m={isMounted:function(m){return(m=m._reactInternals)?R(m)===m:!1},enqueueSetState:function(m,y,C){m=m._reactInternals;var O=Gn(),z=ma(m),K=pl(O,z);K.payload=y,C!=null&&(K.callback=C),cc(m,K),y=ss(m,z,O),y!==null&&xm(y,m,z)},enqueueReplaceState:function(m,y,C){m=m._reactInternals;var O=Gn(),z=ma(m),K=pl(O,z);K.tag=1,K.payload=y,C!=null&&(K.callback=C),cc(m,K),y=ss(m,z,O),y!==null&&xm(y,m,z)},enqueueForceUpdate:function(m,y){m=m._reactInternals;var C=Gn(),O=ma(m),z=pl(C,O);z.tag=2,y!=null&&(z.callback=y),cc(m,z),y=ss(m,O,C),y!==null&&xm(y,m,O)}};function mv(m,y,C,O,z,K,ye){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(O,K,ye):y.prototype&&y.prototype.isPureReactComponent?!la(C,O)||!la(z,K):!0}function xw(m,y,C){var O=!1,z=Qt,K=y.contextType;return typeof K=="object"&&K!==null?K=Ps(K):(z=Fn(y)?vn:In.current,O=y.contextTypes,K=(O=O!=null)?jt(m,z):Qt),y=new y(C,K),m.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=_m,m.stateNode=y,y._reactInternals=m,O&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=z,m.__reactInternalMemoizedMaskedChildContext=K),y}function bw(m,y,C,O){m=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(C,O),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(C,O),y.state!==m&&_m.enqueueReplaceState(y,y.state,null)}function gv(m,y,C,O){var z=m.stateNode;z.props=C,z.state=m.memoizedState,z.refs=vw,Ed(m);var K=y.contextType;typeof K=="object"&&K!==null?z.context=Ps(K):(K=Fn(y)?vn:In.current,z.context=jt(m,K)),z.state=m.memoizedState,K=y.getDerivedStateFromProps,typeof K=="function"&&(pv(m,y,K,C),z.state=m.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(y=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),y!==z.state&&_m.enqueueReplaceState(z,z.state,null),wm(m,C,z,O),z.state=m.memoizedState),typeof z.componentDidMount=="function"&&(m.flags|=4194308)}var Md=[],uc=0,Sm=null,Em=0,Oo=[],io=0,nu=null,ml=1,gl="";function ru(m,y){Md[uc++]=Em,Md[uc++]=Sm,Sm=m,Em=y}function ww(m,y,C){Oo[io++]=ml,Oo[io++]=gl,Oo[io++]=nu,nu=m;var O=ml;m=gl;var z=32-Bn(O)-1;O&=~(1<<z),C+=1;var K=32-Bn(y)+z;if(30<K){var ye=z-z%5;K=(O&(1<<ye)-1).toString(32),O>>=ye,z-=ye,ml=1<<32-Bn(y)+z|C<<z|O,gl=K+m}else ml=1<<K|C<<z|O,gl=m}function yv(m){m.return!==null&&(ru(m,1),ww(m,1,0))}function vv(m){for(;m===Sm;)Sm=Md[--uc],Md[uc]=null,Em=Md[--uc],Md[uc]=null;for(;m===nu;)nu=Oo[--io],Oo[io]=null,gl=Oo[--io],Oo[io]=null,ml=Oo[--io],Oo[io]=null}var ms=null,qi=null,Mr=!1,Td=!1,Lo=null;function xv(m,y){var C=fo(5,null,null,0);C.elementType="DELETED",C.stateNode=y,C.return=m,y=m.deletions,y===null?(m.deletions=[C],m.flags|=16):y.push(C)}function bv(m,y){switch(m.tag){case 5:return y=jr(y,m.type,m.pendingProps),y!==null?(m.stateNode=y,ms=m,qi=Ba(y),!0):!1;case 6:return y=oc(y,m.pendingProps),y!==null?(m.stateNode=y,ms=m,qi=null,!0):!1;case 13:if(y=Fa(y),y!==null){var C=nu!==null?{id:ml,overflow:gl}:null;return m.memoizedState={dehydrated:y,treeContext:C,retryLane:0x40000000},C=fo(18,null,null,0),C.stateNode=y,C.return=m,m.child=C,ms=m,qi=null,!0}return!1;default:return!1}}function Mm(m){return(m.mode&1)!==0&&(m.flags&128)===0}function dc(m){if(Mr){var y=qi;if(y){var C=y;if(!bv(m,y)){if(Mm(m))throw Error(o(418));y=no(C);var O=ms;y&&bv(m,y)?xv(O,C):(m.flags=m.flags&-4097|2,Mr=!1,ms=m)}}else{if(Mm(m))throw Error(o(418));m.flags=m.flags&-4097|2,Mr=!1,ms=m}}}function _w(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;ms=m}function lh(m){if(!_e||m!==ms)return!1;if(!Mr)return _w(m),Mr=!0,!1;if(m.tag!==3&&(m.tag!==5||ae(m.type)&&!ue(m.type,m.memoizedProps))){var y=qi;if(y){if(Mm(m)){for(m=qi;m;)m=no(m);throw Error(o(418))}for(;y;)xv(m,y),y=no(y)}}if(_w(m),m.tag===13){if(!_e)throw Error(o(316));if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));qi=yd(m)}else qi=ms?no(m.stateNode):null;return!0}function Cd(){_e&&(qi=ms=null,Td=Mr=!1)}function Tm(m){Lo===null?Lo=[m]:Lo.push(m)}function Id(m,y,C){if(m=C.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(o(309));var O=C.stateNode}if(!O)throw Error(o(147,m));var z=O,K=""+m;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===K?y.ref:(y=function(ye){var Ae=z.refs;Ae===vw&&(Ae=z.refs={}),ye===null?delete Ae[K]:Ae[K]=ye},y._stringRef=K,y)}if(typeof m!="string")throw Error(o(284));if(!C._owner)throw Error(o(290,m))}return m}function fc(m,y){throw m=Object.prototype.toString.call(y),Error(o(31,m==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":m))}function Rd(m){var y=m._init;return y(m._payload)}function Sw(m){function y(Ue,ke){if(m){var qe=Ue.deletions;qe===null?(Ue.deletions=[ke],Ue.flags|=16):qe.push(ke)}}function C(Ue,ke){if(!m)return null;for(;ke!==null;)y(Ue,ke),ke=ke.sibling;return null}function O(Ue,ke){for(Ue=new Map;ke!==null;)ke.key!==null?Ue.set(ke.key,ke):Ue.set(ke.index,ke),ke=ke.sibling;return Ue}function z(Ue,ke){return Ue=Al(Ue,ke),Ue.index=0,Ue.sibling=null,Ue}function K(Ue,ke,qe){return Ue.index=qe,m?(qe=Ue.alternate,qe!==null?(qe=qe.index,qe<ke?(Ue.flags|=2,ke):qe):(Ue.flags|=2,ke)):(Ue.flags|=1048576,ke)}function ye(Ue){return m&&Ue.alternate===null&&(Ue.flags|=2),Ue}function Ae(Ue,ke,qe,xt){return ke===null||ke.tag!==6?(ke=Qm(qe,Ue.mode,xt),ke.return=Ue,ke):(ke=z(ke,qe),ke.return=Ue,ke)}function Xe(Ue,ke,qe,xt){var Wt=qe.type;return Wt===u?Ot(Ue,ke,qe.props.children,xt,qe.key):ke!==null&&(ke.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===M&&Rd(Wt)===ke.type)?(xt=z(ke,qe.props),xt.ref=Id(Ue,ke,qe),xt.return=Ue,xt):(xt=Jm(qe.type,qe.key,qe.props,null,Ue.mode,xt),xt.ref=Id(Ue,ke,qe),xt.return=Ue,xt)}function ct(Ue,ke,qe,xt){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==qe.containerInfo||ke.stateNode.implementation!==qe.implementation?(ke=eg(qe,Ue.mode,xt),ke.return=Ue,ke):(ke=z(ke,qe.children||[]),ke.return=Ue,ke)}function Ot(Ue,ke,qe,xt,Wt){return ke===null||ke.tag!==7?(ke=Mu(qe,Ue.mode,xt,Wt),ke.return=Ue,ke):(ke=z(ke,qe),ke.return=Ue,ke)}function dn(Ue,ke,qe){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ke=Qm(""+ke,Ue.mode,qe),ke.return=Ue,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case l:return qe=Jm(ke.type,ke.key,ke.props,null,Ue.mode,qe),qe.ref=Id(Ue,null,ke),qe.return=Ue,qe;case c:return ke=eg(ke,Ue.mode,qe),ke.return=Ue,ke;case M:var xt=ke._init;return dn(Ue,xt(ke._payload),qe)}if($(ke)||N(ke))return ke=Mu(ke,Ue.mode,qe,null),ke.return=Ue,ke;fc(Ue,ke)}return null}function Zt(Ue,ke,qe,xt){var Wt=ke!==null?ke.key:null;if(typeof qe=="string"&&qe!==""||typeof qe=="number")return Wt!==null?null:Ae(Ue,ke,""+qe,xt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case l:return qe.key===Wt?Xe(Ue,ke,qe,xt):null;case c:return qe.key===Wt?ct(Ue,ke,qe,xt):null;case M:return Wt=qe._init,Zt(Ue,ke,Wt(qe._payload),xt)}if($(qe)||N(qe))return Wt!==null?null:Ot(Ue,ke,qe,xt,null);fc(Ue,qe)}return null}function En(Ue,ke,qe,xt,Wt){if(typeof xt=="string"&&xt!==""||typeof xt=="number")return Ue=Ue.get(qe)||null,Ae(ke,Ue,""+xt,Wt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case l:return Ue=Ue.get(xt.key===null?qe:xt.key)||null,Xe(ke,Ue,xt,Wt);case c:return Ue=Ue.get(xt.key===null?qe:xt.key)||null,ct(ke,Ue,xt,Wt);case M:var xn=xt._init;return En(Ue,ke,qe,xn(xt._payload),Wt)}if($(xt)||N(xt))return Ue=Ue.get(qe)||null,Ot(ke,Ue,xt,Wt,null);fc(ke,xt)}return null}function St(Ue,ke,qe,xt){for(var Wt=null,xn=null,fn=ke,$n=ke=0,ni=null;fn!==null&&$n<qe.length;$n++){fn.index>$n?(ni=fn,fn=null):ni=fn.sibling;var qn=Zt(Ue,fn,qe[$n],xt);if(qn===null){fn===null&&(fn=ni);break}m&&fn&&qn.alternate===null&&y(Ue,fn),ke=K(qn,ke,$n),xn===null?Wt=qn:xn.sibling=qn,xn=qn,fn=ni}if($n===qe.length)return C(Ue,fn),Mr&&ru(Ue,$n),Wt;if(fn===null){for(;$n<qe.length;$n++)fn=dn(Ue,qe[$n],xt),fn!==null&&(ke=K(fn,ke,$n),xn===null?Wt=fn:xn.sibling=fn,xn=fn);return Mr&&ru(Ue,$n),Wt}for(fn=O(Ue,fn);$n<qe.length;$n++)ni=En(fn,Ue,$n,qe[$n],xt),ni!==null&&(m&&ni.alternate!==null&&fn.delete(ni.key===null?$n:ni.key),ke=K(ni,ke,$n),xn===null?Wt=ni:xn.sibling=ni,xn=ni);return m&&fn.forEach(function(Nl){return y(Ue,Nl)}),Mr&&ru(Ue,$n),Wt}function Ki(Ue,ke,qe,xt){var Wt=N(qe);if(typeof Wt!="function")throw Error(o(150));if(qe=Wt.call(qe),qe==null)throw Error(o(151));for(var xn=Wt=null,fn=ke,$n=ke=0,ni=null,qn=qe.next();fn!==null&&!qn.done;$n++,qn=qe.next()){fn.index>$n?(ni=fn,fn=null):ni=fn.sibling;var Nl=Zt(Ue,fn,qn.value,xt);if(Nl===null){fn===null&&(fn=ni);break}m&&fn&&Nl.alternate===null&&y(Ue,fn),ke=K(Nl,ke,$n),xn===null?Wt=Nl:xn.sibling=Nl,xn=Nl,fn=ni}if(qn.done)return C(Ue,fn),Mr&&ru(Ue,$n),Wt;if(fn===null){for(;!qn.done;$n++,qn=qe.next())qn=dn(Ue,qn.value,xt),qn!==null&&(ke=K(qn,ke,$n),xn===null?Wt=qn:xn.sibling=qn,xn=qn);return Mr&&ru(Ue,$n),Wt}for(fn=O(Ue,fn);!qn.done;$n++,qn=qe.next())qn=En(fn,Ue,$n,qn.value,xt),qn!==null&&(m&&qn.alternate!==null&&fn.delete(qn.key===null?$n:qn.key),ke=K(qn,ke,$n),xn===null?Wt=qn:xn.sibling=qn,xn=qn);return m&&fn.forEach(function(Zv){return y(Ue,Zv)}),Mr&&ru(Ue,$n),Wt}function ho(Ue,ke,qe,xt){if(typeof qe=="object"&&qe!==null&&qe.type===u&&qe.key===null&&(qe=qe.props.children),typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case l:e:{for(var Wt=qe.key,xn=ke;xn!==null;){if(xn.key===Wt){if(Wt=qe.type,Wt===u){if(xn.tag===7){C(Ue,xn.sibling),ke=z(xn,qe.props.children),ke.return=Ue,Ue=ke;break e}}else if(xn.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===M&&Rd(Wt)===xn.type){C(Ue,xn.sibling),ke=z(xn,qe.props),ke.ref=Id(Ue,xn,qe),ke.return=Ue,Ue=ke;break e}C(Ue,xn);break}else y(Ue,xn);xn=xn.sibling}qe.type===u?(ke=Mu(qe.props.children,Ue.mode,xt,qe.key),ke.return=Ue,Ue=ke):(xt=Jm(qe.type,qe.key,qe.props,null,Ue.mode,xt),xt.ref=Id(Ue,ke,qe),xt.return=Ue,Ue=xt)}return ye(Ue);case c:e:{for(xn=qe.key;ke!==null;){if(ke.key===xn)if(ke.tag===4&&ke.stateNode.containerInfo===qe.containerInfo&&ke.stateNode.implementation===qe.implementation){C(Ue,ke.sibling),ke=z(ke,qe.children||[]),ke.return=Ue,Ue=ke;break e}else{C(Ue,ke);break}else y(Ue,ke);ke=ke.sibling}ke=eg(qe,Ue.mode,xt),ke.return=Ue,Ue=ke}return ye(Ue);case M:return xn=qe._init,ho(Ue,ke,xn(qe._payload),xt)}if($(qe))return St(Ue,ke,qe,xt);if(N(qe))return Ki(Ue,ke,qe,xt);fc(Ue,qe)}return typeof qe=="string"&&qe!==""||typeof qe=="number"?(qe=""+qe,ke!==null&&ke.tag===6?(C(Ue,ke.sibling),ke=z(ke,qe),ke.return=Ue,Ue=ke):(C(Ue,ke),ke=Qm(qe,Ue.mode,xt),ke.return=Ue,Ue=ke),ye(Ue)):C(Ue,ke)}return ho}var yl=Sw(!0),Ew=Sw(!1),Ad={},ks=Ht(Ad),iu=Ht(Ad),su=Ht(Ad);function ca(m){if(m===Ad)throw Error(o(174));return m}function Cm(m,y){Ut(su,y),Ut(iu,m),Ut(ks,Ad),m=te(y),lt(ks),Ut(ks,m)}function Nd(){lt(ks),lt(iu),lt(su)}function Mw(m){var y=ca(su.current),C=ca(ks.current);y=W(C,m.type,y),C!==y&&(Ut(iu,m),Ut(ks,y))}function wv(m){iu.current===m&&(lt(ks),lt(iu))}var Lr=Ht(0);function Im(m){for(var y=m;y!==null;){if(y.tag===13){var C=y.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||Ro(C)||to(C)))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if(y.flags&128)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===m)break;for(;y.sibling===null;){if(y.return===null||y.return===m)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var so=[];function ou(){for(var m=0;m<so.length;m++){var y=so[m];Ie?y._workInProgressVersionPrimary=null:y._workInProgressVersionSecondary=null}so.length=0}var ch=a.ReactCurrentDispatcher,oo=a.ReactCurrentBatchConfig,au=0,Dr=null,Ri=null,Ai=null,Rm=!1,Va=!1,lu=0,uh=0;function Ni(){throw Error(o(321))}function Am(m,y){if(y===null)return!1;for(var C=0;C<y.length&&C<m.length;C++)if(!hs(m[C],y[C]))return!1;return!0}function Pd(m,y,C,O,z,K){if(au=K,Dr=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,ch.current=m===null||m.memoizedState===null?Cv:Iv,m=C(O,z),Va){K=0;do{if(Va=!1,lu=0,25<=K)throw Error(o(301));K+=1,Ai=Ri=null,y.updateQueue=null,ch.current=Rv,m=C(O,z)}while(Va)}if(ch.current=Dd,y=Ri!==null&&Ri.next!==null,au=0,Ai=Ri=Dr=null,Rm=!1,y)throw Error(o(300));return m}function hc(){var m=lu!==0;return lu=0,m}function ua(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ai===null?Dr.memoizedState=Ai=m:Ai=Ai.next=m,Ai}function da(){if(Ri===null){var m=Dr.alternate;m=m!==null?m.memoizedState:null}else m=Ri.next;var y=Ai===null?Dr.memoizedState:Ai.next;if(y!==null)Ai=y,Ri=m;else{if(m===null)throw Error(o(310));Ri=m,m={memoizedState:Ri.memoizedState,baseState:Ri.baseState,baseQueue:Ri.baseQueue,queue:Ri.queue,next:null},Ai===null?Dr.memoizedState=Ai=m:Ai=Ai.next=m}return Ai}function Wa(m,y){return typeof y=="function"?y(m):y}function dh(m){var y=da(),C=y.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=m;var O=Ri,z=O.baseQueue,K=C.pending;if(K!==null){if(z!==null){var ye=z.next;z.next=K.next,K.next=ye}O.baseQueue=z=K,C.pending=null}if(z!==null){K=z.next,O=O.baseState;var Ae=ye=null,Xe=null,ct=K;do{var Ot=ct.lane;if((au&Ot)===Ot)Xe!==null&&(Xe=Xe.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),O=ct.hasEagerState?ct.eagerState:m(O,ct.action);else{var dn={lane:Ot,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};Xe===null?(Ae=Xe=dn,ye=O):Xe=Xe.next=dn,Dr.lanes|=Ot,Ha|=Ot}ct=ct.next}while(ct!==null&&ct!==K);Xe===null?ye=O:Xe.next=Ae,hs(O,y.memoizedState)||(Pi=!0),y.memoizedState=O,y.baseState=ye,y.baseQueue=Xe,C.lastRenderedState=O}if(m=C.interleaved,m!==null){z=m;do K=z.lane,Dr.lanes|=K,Ha|=K,z=z.next;while(z!==m)}else z===null&&(C.lanes=0);return[y.memoizedState,C.dispatch]}function fh(m){var y=da(),C=y.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=m;var O=C.dispatch,z=C.pending,K=y.memoizedState;if(z!==null){C.pending=null;var ye=z=z.next;do K=m(K,ye.action),ye=ye.next;while(ye!==z);hs(K,y.memoizedState)||(Pi=!0),y.memoizedState=K,y.baseQueue===null&&(y.baseState=K),C.lastRenderedState=K}return[K,O]}function _v(){}function Sv(m,y){var C=Dr,O=da(),z=y(),K=!hs(O.memoizedState,z);if(K&&(O.memoizedState=z,Pi=!0),O=O.queue,kd(vl.bind(null,C,O,m),[m]),O.getSnapshot!==y||K||Ai!==null&&Ai.memoizedState.tag&1){if(C.flags|=2048,ph(9,Mv.bind(null,C,O,z,y),void 0,null),Zr===null)throw Error(o(349));au&30||Ev(C,y,z)}return z}function Ev(m,y,C){m.flags|=16384,m={getSnapshot:y,value:C},y=Dr.updateQueue,y===null?(y={lastEffect:null,stores:null},Dr.updateQueue=y,y.stores=[m]):(C=y.stores,C===null?y.stores=[m]:C.push(m))}function Mv(m,y,C,O){y.value=C,y.getSnapshot=O,Nm(y)&&ss(m,1,-1)}function vl(m,y,C){return C(function(){Nm(y)&&ss(m,1,-1)})}function Nm(m){var y=m.getSnapshot;m=m.value;try{var C=y();return!hs(m,C)}catch{return!0}}function hh(m){var y=ua();return typeof m=="function"&&(m=m()),y.memoizedState=y.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:m},y.queue=m,m=m.dispatch=YT.bind(null,Dr,m),[y.memoizedState,m]}function ph(m,y,C,O){return m={tag:m,create:y,destroy:C,deps:O,next:null},y=Dr.updateQueue,y===null?(y={lastEffect:null,stores:null},Dr.updateQueue=y,y.lastEffect=m.next=m):(C=y.lastEffect,C===null?y.lastEffect=m.next=m:(O=C.next,C.next=m,m.next=O,y.lastEffect=m)),m}function Tw(){return da().memoizedState}function pc(m,y,C,O){var z=ua();Dr.flags|=m,z.memoizedState=ph(1|y,C,void 0,O===void 0?null:O)}function Pm(m,y,C,O){var z=da();O=O===void 0?null:O;var K=void 0;if(Ri!==null){var ye=Ri.memoizedState;if(K=ye.destroy,O!==null&&Am(O,ye.deps)){z.memoizedState=ph(y,C,K,O);return}}Dr.flags|=m,z.memoizedState=ph(1|y,C,K,O)}function km(m,y){return pc(8390656,8,m,y)}function kd(m,y){return Pm(2048,8,m,y)}function dr(m,y){return Pm(4,2,m,y)}function Om(m,y){return Pm(4,4,m,y)}function mh(m,y){if(typeof y=="function")return m=m(),y(m),function(){y(null)};if(y!=null)return m=m(),y.current=m,function(){y.current=null}}function Od(m,y,C){return C=C!=null?C.concat([m]):null,Pm(4,4,mh.bind(null,y,m),C)}function Lm(){}function Dm(m,y){var C=da();y=y===void 0?null:y;var O=C.memoizedState;return O!==null&&y!==null&&Am(y,O[1])?O[0]:(C.memoizedState=[m,y],m)}function Ld(m,y){var C=da();y=y===void 0?null:y;var O=C.memoizedState;return O!==null&&y!==null&&Am(y,O[1])?O[0]:(m=m(),C.memoizedState=[m,y],m)}function Fm(m,y){var C=An;An=C!==0&&4>C?C:4,m(!0);var O=oo.transition;oo.transition={};try{m(!1),y()}finally{An=C,oo.transition=O}}function cu(){return da().memoizedState}function Cw(m,y,C){var O=ma(m);C={lane:O,action:C,hasEagerState:!1,eagerState:null,next:null},Iw(m)?Tv(y,C):(gh(m,y,C),C=Gn(),m=ss(m,O,C),m!==null&&yh(m,y,O))}function YT(m,y,C){var O=ma(m),z={lane:O,action:C,hasEagerState:!1,eagerState:null,next:null};if(Iw(m))Tv(y,z);else{gh(m,y,z);var K=m.alternate;if(m.lanes===0&&(K===null||K.lanes===0)&&(K=y.lastRenderedReducer,K!==null))try{var ye=y.lastRenderedState,Ae=K(ye,C);if(z.hasEagerState=!0,z.eagerState=Ae,hs(Ae,ye))return}catch{}finally{}C=Gn(),m=ss(m,O,C),m!==null&&yh(m,y,O)}}function Iw(m){var y=m.alternate;return m===Dr||y!==null&&y===Dr}function Tv(m,y){Va=Rm=!0;var C=m.pending;C===null?y.next=y:(y.next=C.next,C.next=y),m.pending=y}function gh(m,y,C){Zr!==null&&m.mode&1&&!(wn&2)?(m=y.interleaved,m===null?(C.next=C,Po===null?Po=[y]:Po.push(y)):(C.next=m.next,m.next=C),y.interleaved=C):(m=y.pending,m===null?C.next=C:(C.next=m.next,m.next=C),y.pending=C)}function yh(m,y,C){if(C&4194240){var O=y.lanes;O&=m.pendingLanes,C|=O,y.lanes=C,Ua(m,C)}}var Dd={readContext:Ps,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},Cv={readContext:Ps,useCallback:function(m,y){return ua().memoizedState=[m,y===void 0?null:y],m},useContext:Ps,useEffect:km,useImperativeHandle:function(m,y,C){return C=C!=null?C.concat([m]):null,pc(4194308,4,mh.bind(null,y,m),C)},useLayoutEffect:function(m,y){return pc(4194308,4,m,y)},useInsertionEffect:function(m,y){return pc(4,2,m,y)},useMemo:function(m,y){var C=ua();return y=y===void 0?null:y,m=m(),C.memoizedState=[m,y],m},useReducer:function(m,y,C){var O=ua();return y=C!==void 0?C(y):y,O.memoizedState=O.baseState=y,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:y},O.queue=m,m=m.dispatch=Cw.bind(null,Dr,m),[O.memoizedState,m]},useRef:function(m){var y=ua();return m={current:m},y.memoizedState=m},useState:hh,useDebugValue:Lm,useDeferredValue:function(m){var y=hh(m),C=y[0],O=y[1];return km(function(){var z=oo.transition;oo.transition={};try{O(m)}finally{oo.transition=z}},[m]),C},useTransition:function(){var m=hh(!1),y=m[0];return m=Fm.bind(null,m[1]),ua().memoizedState=m,[y,m]},useMutableSource:function(){},useSyncExternalStore:function(m,y,C){var O=Dr,z=ua();if(Mr){if(C===void 0)throw Error(o(407));C=C()}else{if(C=y(),Zr===null)throw Error(o(349));au&30||Ev(O,y,C)}z.memoizedState=C;var K={value:C,getSnapshot:y};return z.queue=K,km(vl.bind(null,O,K,m),[m]),O.flags|=2048,ph(9,Mv.bind(null,O,K,C,y),void 0,null),C},useId:function(){var m=ua(),y=Zr.identifierPrefix;if(Mr){var C=gl,O=ml;C=(O&~(1<<32-Bn(O)-1)).toString(32)+C,y=":"+y+"R"+C,C=lu++,0<C&&(y+="H"+C.toString(32)),y+=":"}else C=uh++,y=":"+y+"r"+C.toString(32)+":";return m.memoizedState=y},unstable_isNewReconciler:!1},Iv={readContext:Ps,useCallback:Dm,useContext:Ps,useEffect:kd,useImperativeHandle:Od,useInsertionEffect:dr,useLayoutEffect:Om,useMemo:Ld,useReducer:dh,useRef:Tw,useState:function(){return dh(Wa)},useDebugValue:Lm,useDeferredValue:function(m){var y=dh(Wa),C=y[0],O=y[1];return kd(function(){var z=oo.transition;oo.transition={};try{O(m)}finally{oo.transition=z}},[m]),C},useTransition:function(){var m=dh(Wa)[0],y=da().memoizedState;return[m,y]},useMutableSource:_v,useSyncExternalStore:Sv,useId:cu,unstable_isNewReconciler:!1},Rv={readContext:Ps,useCallback:Dm,useContext:Ps,useEffect:kd,useImperativeHandle:Od,useInsertionEffect:dr,useLayoutEffect:Om,useMemo:Ld,useReducer:fh,useRef:Tw,useState:function(){return fh(Wa)},useDebugValue:Lm,useDeferredValue:function(m){var y=fh(Wa),C=y[0],O=y[1];return kd(function(){var z=oo.transition;oo.transition={};try{O(m)}finally{oo.transition=z}},[m]),C},useTransition:function(){var m=fh(Wa)[0],y=da().memoizedState;return[m,y]},useMutableSource:_v,useSyncExternalStore:Sv,useId:cu,unstable_isNewReconciler:!1};function Av(m,y){try{var C="",O=y;do C+=fv(O),O=O.return;while(O);var z=C}catch(K){z=`
Error generating stack: `+K.message+`
`+K.stack}return{value:m,source:y,stack:z}}function Bm(m,y){try{console.error(y.value)}catch(C){setTimeout(function(){throw C})}}var ZT=typeof WeakMap=="function"?WeakMap:Map;function Rw(m,y,C){C=pl(-1,C),C.tag=3,C.payload={element:null};var O=y.value;return C.callback=function(){Vd||(Vd=!0,br=O),Bm(m,y)},C}function jm(m,y,C){C=pl(-1,C),C.tag=3;var O=m.type.getDerivedStateFromError;if(typeof O=="function"){var z=y.value;C.payload=function(){return O(z)},C.callback=function(){Bm(m,y)}}var K=m.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(C.callback=function(){Bm(m,y),typeof O!="function"&&(pa===null?pa=new Set([this]):pa.add(this));var ye=y.stack;this.componentDidCatch(y.value,{componentStack:ye!==null?ye:""})}),C}function xl(m,y,C){var O=m.pingCache;if(O===null){O=m.pingCache=new ZT;var z=new Set;O.set(y,z)}else z=O.get(y),z===void 0&&(z=new Set,O.set(y,z));z.has(C)||(z.add(C),m=Xv.bind(null,m,y,C),y.then(m,m))}function Nv(m){do{var y;if((y=m.tag===13)&&(y=m.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return m;m=m.return}while(m!==null);return null}function uu(m,y,C,O,z){return m.mode&1?(m.flags|=65536,m.lanes=z,m):(m===y?m.flags|=65536:(m.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(y=pl(-1,1),y.tag=2,cc(C,y))),C.lanes|=1),m)}function yi(m){m.flags|=4}function Fd(m,y){if(m!==null&&m.child===y.child)return!0;if(y.flags&16)return!1;for(m=y.child;m!==null;){if(m.flags&12854||m.subtreeFlags&12854)return!1;m=m.sibling}return!0}var ao,du,Um,zm;if(Fe)ao=function(m,y){for(var C=y.child;C!==null;){if(C.tag===5||C.tag===6)oe(m,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===y)break;for(;C.sibling===null;){if(C.return===null||C.return===y)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},du=function(){},Um=function(m,y,C,O,z){if(m=m.memoizedProps,m!==O){var K=y.stateNode,ye=ca(ks.current);C=ie(K,C,m,O,z,ye),(y.updateQueue=C)&&yi(y)}},zm=function(m,y,C,O){C!==O&&yi(y)};else if(ve){ao=function(m,y,C,O){for(var z=y.child;z!==null;){if(z.tag===5){var K=z.stateNode;C&&O&&(K=yn(K,z.type,z.memoizedProps,z)),oe(m,K)}else if(z.tag===6)K=z.stateNode,C&&O&&(K=Or(K,z.memoizedProps,z)),oe(m,K);else if(z.tag!==4){if(z.tag===22&&z.memoizedState!==null)K=z.child,K!==null&&(K.return=z),ao(m,z,!0,!0);else if(z.child!==null){z.child.return=z,z=z.child;continue}}if(z===y)break;for(;z.sibling===null;){if(z.return===null||z.return===y)return;z=z.return}z.sibling.return=z.return,z=z.sibling}};var mc=function(m,y,C,O){for(var z=y.child;z!==null;){if(z.tag===5){var K=z.stateNode;C&&O&&(K=yn(K,z.type,z.memoizedProps,z)),Xt(m,K)}else if(z.tag===6)K=z.stateNode,C&&O&&(K=Or(K,z.memoizedProps,z)),Xt(m,K);else if(z.tag!==4){if(z.tag===22&&z.memoizedState!==null)K=z.child,K!==null&&(K.return=z),mc(m,z,!0,!0);else if(z.child!==null){z.child.return=z,z=z.child;continue}}if(z===y)break;for(;z.sibling===null;){if(z.return===null||z.return===y)return;z=z.return}z.sibling.return=z.return,z=z.sibling}};du=function(m,y){var C=y.stateNode;if(!Fd(m,y)){m=C.containerInfo;var O=pt(m);mc(O,y,!1,!1),C.pendingChildren=O,yi(y),Dn(m,O)}},Um=function(m,y,C,O,z){var K=m.stateNode,ye=m.memoizedProps;if((m=Fd(m,y))&&ye===O)y.stateNode=K;else{var Ae=y.stateNode,Xe=ca(ks.current),ct=null;ye!==O&&(ct=ie(Ae,C,ye,O,z,Xe)),m&&ct===null?y.stateNode=K:(K=vt(K,ct,C,ye,O,y,m,Ae),ce(K,C,O,z,Xe)&&yi(y),y.stateNode=K,m?yi(y):ao(K,y,!1,!1))}},zm=function(m,y,C,O){C!==O?(m=ca(su.current),C=ca(ks.current),y.stateNode=de(O,m,C,y),yi(y)):y.stateNode=m.stateNode}}else du=function(){},Um=function(){},zm=function(){};function bl(m,y){if(!Mr)switch(m.tailMode){case"hidden":y=m.tail;for(var C=null;y!==null;)y.alternate!==null&&(C=y),y=y.sibling;C===null?m.tail=null:C.sibling=null;break;case"collapsed":C=m.tail;for(var O=null;C!==null;)C.alternate!==null&&(O=C),C=C.sibling;O===null?y||m.tail===null?m.tail=null:m.tail.sibling=null:O.sibling=null}}function Yr(m){var y=m.alternate!==null&&m.alternate.child===m.child,C=0,O=0;if(y)for(var z=m.child;z!==null;)C|=z.lanes|z.childLanes,O|=z.subtreeFlags&0xe00000,O|=z.flags&0xe00000,z.return=m,z=z.sibling;else for(z=m.child;z!==null;)C|=z.lanes|z.childLanes,O|=z.subtreeFlags,O|=z.flags,z.return=m,z=z.sibling;return m.subtreeFlags|=O,m.childLanes=C,y}function Vm(m,y,C){var O=y.pendingProps;switch(vv(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(y),null;case 1:return Fn(y.type)&&mn(),Yr(y),null;case 3:return O=y.stateNode,Nd(),lt(Rn),lt(In),ou(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(m===null||m.child===null)&&(lh(y)?yi(y):m===null||m.memoizedState.isDehydrated&&!(y.flags&256)||(y.flags|=1024,Lo!==null&&(Ah(Lo),Lo=null))),du(m,y),Yr(y),null;case 5:wv(y),C=ca(su.current);var z=y.type;if(m!==null&&y.stateNode!=null)Um(m,y,z,O,C),m.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!O){if(y.stateNode===null)throw Error(o(166));return Yr(y),null}if(m=ca(ks.current),lh(y)){if(!_e)throw Error(o(175));m=Kc(y.stateNode,y.type,y.memoizedProps,C,m,y,!Td),y.updateQueue=m,m!==null&&yi(y)}else{var K=Y(z,O,C,m,y);ao(K,y,!1,!1),y.stateNode=K,ce(K,z,O,C,m)&&yi(y)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return Yr(y),null;case 6:if(m&&y.stateNode!=null)zm(m,y,m.memoizedProps,O);else{if(typeof O!="string"&&y.stateNode===null)throw Error(o(166));if(m=ca(su.current),C=ca(ks.current),lh(y)){if(!_e)throw Error(o(176));if(m=y.stateNode,O=y.memoizedProps,(C=ro(m,O,y,!Td))&&(z=ms,z!==null))switch(K=(z.mode&1)!==0,z.tag){case 3:Ne(z.stateNode.containerInfo,m,O,K);break;case 5:ze(z.type,z.memoizedProps,z.stateNode,m,O,K)}C&&yi(y)}else y.stateNode=de(O,m,C,y)}return Yr(y),null;case 13:if(lt(Lr),O=y.memoizedState,Mr&&qi!==null&&y.mode&1&&!(y.flags&128)){for(m=qi;m;)m=no(m);return Cd(),y.flags|=98560,y}if(O!==null&&O.dehydrated!==null){if(O=lh(y),m===null){if(!O)throw Error(o(318));if(!_e)throw Error(o(344));if(m=y.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));gd(m,y)}else Cd(),!(y.flags&128)&&(y.memoizedState=null),y.flags|=4;return Yr(y),null}return Lo!==null&&(Ah(Lo),Lo=null),y.flags&128?(y.lanes=C,y):(O=O!==null,C=!1,m===null?lh(y):C=m.memoizedState!==null,O&&!C&&(y.child.flags|=8192,y.mode&1&&(m===null||Lr.current&1?zr===0&&(zr=3):Km())),y.updateQueue!==null&&(y.flags|=4),Yr(y),null);case 4:return Nd(),du(m,y),m===null&&$e(y.stateNode.containerInfo),Yr(y),null;case 10:return ah(y.type._context),Yr(y),null;case 17:return Fn(y.type)&&mn(),Yr(y),null;case 19:if(lt(Lr),z=y.memoizedState,z===null)return Yr(y),null;if(O=(y.flags&128)!==0,K=z.rendering,K===null)if(O)bl(z,!1);else{if(zr!==0||m!==null&&m.flags&128)for(m=y.child;m!==null;){if(K=Im(m),K!==null){for(y.flags|=128,bl(z,!1),m=K.updateQueue,m!==null&&(y.updateQueue=m,y.flags|=4),y.subtreeFlags=0,m=C,O=y.child;O!==null;)C=O,z=m,C.flags&=0xe00002,K=C.alternate,K===null?(C.childLanes=0,C.lanes=z,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=K.childLanes,C.lanes=K.lanes,C.child=K.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=K.memoizedProps,C.memoizedState=K.memoizedState,C.updateQueue=K.updateQueue,C.type=K.type,z=K.dependencies,C.dependencies=z===null?null:{lanes:z.lanes,firstContext:z.firstContext}),O=O.sibling;return Ut(Lr,Lr.current&1|2),y.child}m=m.sibling}z.tail!==null&&gi()>vc&&(y.flags|=128,O=!0,bl(z,!1),y.lanes=4194304)}else{if(!O)if(m=Im(K),m!==null){if(y.flags|=128,O=!0,m=m.updateQueue,m!==null&&(y.updateQueue=m,y.flags|=4),bl(z,!0),z.tail===null&&z.tailMode==="hidden"&&!K.alternate&&!Mr)return Yr(y),null}else 2*gi()-z.renderingStartTime>vc&&C!==0x40000000&&(y.flags|=128,O=!0,bl(z,!1),y.lanes=4194304);z.isBackwards?(K.sibling=y.child,y.child=K):(m=z.last,m!==null?m.sibling=K:y.child=K,z.last=K)}return z.tail!==null?(y=z.tail,z.rendering=y,z.tail=y.sibling,z.renderingStartTime=gi(),y.sibling=null,m=Lr.current,Ut(Lr,O?m&1|2:m&1),y):(Yr(y),null);case 22:case 23:return Nh(),O=y.memoizedState!==null,m!==null&&m.memoizedState!==null!==O&&(y.flags|=8192),O&&y.mode&1?is&0x40000000&&(Yr(y),Fe&&y.subtreeFlags&6&&(y.flags|=8192)):Yr(y),null;case 24:return null;case 25:return null}throw Error(o(156,y.tag))}var Pv=a.ReactCurrentOwner,Pi=!1;function Ur(m,y,C,O){y.child=m===null?Ew(y,null,C,O):yl(y,m.child,C,O)}function fr(m,y,C,O,z){C=C.render;var K=y.ref;return Sd(y,z),O=Pd(m,y,C,O,K,z),C=hc(),m!==null&&!Pi?(y.updateQueue=m.updateQueue,y.flags&=-2053,m.lanes&=~z,Os(m,y,z)):(Mr&&C&&yv(y),y.flags|=1,Ur(m,y,O,z),y.child)}function cr(m,y,C,O,z){if(m===null){var K=C.type;return typeof K=="function"&&!Zm(K)&&K.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(y.tag=15,y.type=K,wl(m,y,K,O,z)):(m=Jm(C.type,null,O,y,y.mode,z),m.ref=y.ref,m.return=y,y.child=m)}if(K=m.child,!(m.lanes&z)){var ye=K.memoizedProps;if(C=C.compare,C=C!==null?C:la,C(ye,O)&&m.ref===y.ref)return Os(m,y,z)}return y.flags|=1,m=Al(K,O),m.ref=y.ref,m.return=y,y.child=m}function wl(m,y,C,O,z){if(m!==null&&la(m.memoizedProps,O)&&m.ref===y.ref)if(Pi=!1,(m.lanes&z)!==0)m.flags&131072&&(Pi=!0);else return y.lanes=m.lanes,Os(m,y,z);return _l(m,y,C,O,z)}function Hi(m,y,C){var O=y.pendingProps,z=O.children,K=m!==null?m.memoizedState:null;if(O.mode==="hidden")if(!(y.mode&1))y.memoizedState={baseLanes:0,cachePool:null},Ut(bu,is),is|=C;else if(C&0x40000000)y.memoizedState={baseLanes:0,cachePool:null},O=K!==null?K.baseLanes:C,Ut(bu,is),is|=O;else return m=K!==null?K.baseLanes|C:C,y.lanes=y.childLanes=0x40000000,y.memoizedState={baseLanes:m,cachePool:null},y.updateQueue=null,Ut(bu,is),is|=m,null;else K!==null?(O=K.baseLanes|C,y.memoizedState=null):O=C,Ut(bu,is),is|=O;return Ur(m,y,z,C),y.child}function gs(m,y){var C=y.ref;(m===null&&C!==null||m!==null&&m.ref!==C)&&(y.flags|=512,y.flags|=2097152)}function _l(m,y,C,O,z){var K=Fn(C)?vn:In.current;return K=jt(y,K),Sd(y,z),C=Pd(m,y,C,O,K,z),O=hc(),m!==null&&!Pi?(y.updateQueue=m.updateQueue,y.flags&=-2053,m.lanes&=~z,Os(m,y,z)):(Mr&&O&&yv(y),y.flags|=1,Ur(m,y,C,z),y.child)}function fu(m,y,C,O,z){if(Fn(C)){var K=!0;Ci(y)}else K=!1;if(Sd(y,z),y.stateNode===null)m!==null&&(m.alternate=null,y.alternate=null,y.flags|=2),xw(y,C,O),gv(y,C,O,z),O=!0;else if(m===null){var ye=y.stateNode,Ae=y.memoizedProps;ye.props=Ae;var Xe=ye.context,ct=C.contextType;typeof ct=="object"&&ct!==null?ct=Ps(ct):(ct=Fn(C)?vn:In.current,ct=jt(y,ct));var Ot=C.getDerivedStateFromProps,dn=typeof Ot=="function"||typeof ye.getSnapshotBeforeUpdate=="function";dn||typeof ye.UNSAFE_componentWillReceiveProps!="function"&&typeof ye.componentWillReceiveProps!="function"||(Ae!==O||Xe!==ct)&&bw(y,ye,O,ct),ko=!1;var Zt=y.memoizedState;ye.state=Zt,wm(y,O,ye,z),Xe=y.memoizedState,Ae!==O||Zt!==Xe||Rn.current||ko?(typeof Ot=="function"&&(pv(y,C,Ot,O),Xe=y.memoizedState),(Ae=ko||mv(y,C,Ae,O,Zt,Xe,ct))?(dn||typeof ye.UNSAFE_componentWillMount!="function"&&typeof ye.componentWillMount!="function"||(typeof ye.componentWillMount=="function"&&ye.componentWillMount(),typeof ye.UNSAFE_componentWillMount=="function"&&ye.UNSAFE_componentWillMount()),typeof ye.componentDidMount=="function"&&(y.flags|=4194308)):(typeof ye.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=O,y.memoizedState=Xe),ye.props=O,ye.state=Xe,ye.context=ct,O=Ae):(typeof ye.componentDidMount=="function"&&(y.flags|=4194308),O=!1)}else{ye=y.stateNode,hv(m,y),Ae=y.memoizedProps,ct=y.type===y.elementType?Ae:Ns(y.type,Ae),ye.props=ct,dn=y.pendingProps,Zt=ye.context,Xe=C.contextType,typeof Xe=="object"&&Xe!==null?Xe=Ps(Xe):(Xe=Fn(C)?vn:In.current,Xe=jt(y,Xe));var En=C.getDerivedStateFromProps;(Ot=typeof En=="function"||typeof ye.getSnapshotBeforeUpdate=="function")||typeof ye.UNSAFE_componentWillReceiveProps!="function"&&typeof ye.componentWillReceiveProps!="function"||(Ae!==dn||Zt!==Xe)&&bw(y,ye,O,Xe),ko=!1,Zt=y.memoizedState,ye.state=Zt,wm(y,O,ye,z);var St=y.memoizedState;Ae!==dn||Zt!==St||Rn.current||ko?(typeof En=="function"&&(pv(y,C,En,O),St=y.memoizedState),(ct=ko||mv(y,C,ct,O,Zt,St,Xe)||!1)?(Ot||typeof ye.UNSAFE_componentWillUpdate!="function"&&typeof ye.componentWillUpdate!="function"||(typeof ye.componentWillUpdate=="function"&&ye.componentWillUpdate(O,St,Xe),typeof ye.UNSAFE_componentWillUpdate=="function"&&ye.UNSAFE_componentWillUpdate(O,St,Xe)),typeof ye.componentDidUpdate=="function"&&(y.flags|=4),typeof ye.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof ye.componentDidUpdate!="function"||Ae===m.memoizedProps&&Zt===m.memoizedState||(y.flags|=4),typeof ye.getSnapshotBeforeUpdate!="function"||Ae===m.memoizedProps&&Zt===m.memoizedState||(y.flags|=1024),y.memoizedProps=O,y.memoizedState=St),ye.props=O,ye.state=St,ye.context=Xe,O=ct):(typeof ye.componentDidUpdate!="function"||Ae===m.memoizedProps&&Zt===m.memoizedState||(y.flags|=4),typeof ye.getSnapshotBeforeUpdate!="function"||Ae===m.memoizedProps&&Zt===m.memoizedState||(y.flags|=1024),O=!1)}return rs(m,y,C,O,K,z)}function rs(m,y,C,O,z,K){gs(m,y);var ye=(y.flags&128)!==0;if(!O&&!ye)return z&&ja(y,C,!1),Os(m,y,K);O=y.stateNode,Pv.current=y;var Ae=ye&&typeof C.getDerivedStateFromError!="function"?null:O.render();return y.flags|=1,m!==null&&ye?(y.child=yl(y,m.child,null,K),y.child=yl(y,null,Ae,K)):Ur(m,y,Ae,K),y.memoizedState=O.state,z&&ja(y,C,!0),y.child}function vh(m){var y=m.stateNode;y.pendingContext?mi(m,y.pendingContext,y.pendingContext!==y.context):y.context&&mi(m,y.context,!1),Cm(m,y.containerInfo)}function kv(m,y,C,O,z){return Cd(),Tm(z),y.flags|=256,Ur(m,y,C,O),y.child}var xh={dehydrated:null,treeContext:null,retryLane:0};function hu(m){return{baseLanes:m,cachePool:null}}function Ov(m,y,C){var O=y.pendingProps,z=Lr.current,K=!1,ye=(y.flags&128)!==0,Ae;if((Ae=ye)||(Ae=m!==null&&m.memoizedState===null?!1:(z&2)!==0),Ae?(K=!0,y.flags&=-129):(m===null||m.memoizedState!==null)&&(z|=1),Ut(Lr,z&1),m===null)return dc(y),m=y.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?(y.mode&1?to(m)?y.lanes=8:y.lanes=0x40000000:y.lanes=1,null):(z=O.children,m=O.fallback,K?(O=y.mode,K=y.child,z={mode:"hidden",children:z},!(O&1)&&K!==null?(K.childLanes=0,K.pendingProps=z):K=Oh(z,O,0,null),m=Mu(m,O,C,null),K.return=y,m.return=y,K.sibling=m,y.child=K,y.child.memoizedState=hu(C),y.memoizedState=xh,m):fa(y,z));if(z=m.memoizedState,z!==null){if(Ae=z.dehydrated,Ae!==null){if(ye)return y.flags&256?(y.flags&=-257,wh(m,y,C,Error(o(422)))):y.memoizedState!==null?(y.child=m.child,y.flags|=128,null):(K=O.fallback,z=y.mode,O=Oh({mode:"visible",children:O.children},z,0,null),K=Mu(K,z,C,null),K.flags|=2,O.return=y,K.return=y,O.sibling=K,y.child=O,y.mode&1&&yl(y,m.child,null,C),y.child.memoizedState=hu(C),y.memoizedState=xh,K);if(!(y.mode&1))y=wh(m,y,C,null);else if(to(Ae))y=wh(m,y,C,Error(o(419)));else if(O=(C&m.childLanes)!==0,Pi||O){if(O=Zr,O!==null){switch(C&-C){case 4:K=2;break;case 16:K=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:K=32;break;case 0x20000000:K=0x10000000;break;default:K=0}O=K&(O.suspendedLanes|C)?0:K,O!==0&&O!==z.retryLane&&(z.retryLane=O,ss(m,O,-1))}Km(),y=wh(m,y,C,Error(o(421)))}else Ro(Ae)?(y.flags|=128,y.child=m.child,y=Ow.bind(null,m),ul(Ae,y),y=null):(C=z.treeContext,_e&&(qi=ac(Ae),ms=y,Mr=!0,Lo=null,Td=!1,C!==null&&(Oo[io++]=ml,Oo[io++]=gl,Oo[io++]=nu,ml=C.id,gl=C.overflow,nu=y)),y=fa(y,y.pendingProps.children),y.flags|=4096);return y}return K?(O=Wm(m,y,O.children,O.fallback,C),K=y.child,z=m.child.memoizedState,K.memoizedState=z===null?hu(C):{baseLanes:z.baseLanes|C,cachePool:null},K.childLanes=m.childLanes&~C,y.memoizedState=xh,O):(C=bh(m,y,O.children,C),y.memoizedState=null,C)}return K?(O=Wm(m,y,O.children,O.fallback,C),K=y.child,z=m.child.memoizedState,K.memoizedState=z===null?hu(C):{baseLanes:z.baseLanes|C,cachePool:null},K.childLanes=m.childLanes&~C,y.memoizedState=xh,O):(C=bh(m,y,O.children,C),y.memoizedState=null,C)}function fa(m,y){return y=Oh({mode:"visible",children:y},m.mode,0,null),y.return=m,m.child=y}function bh(m,y,C,O){var z=m.child;return m=z.sibling,C=Al(z,{mode:"visible",children:C}),!(y.mode&1)&&(C.lanes=O),C.return=y,C.sibling=null,m!==null&&(O=y.deletions,O===null?(y.deletions=[m],y.flags|=16):O.push(m)),y.child=C}function Wm(m,y,C,O,z){var K=y.mode;m=m.child;var ye=m.sibling,Ae={mode:"hidden",children:C};return!(K&1)&&y.child!==m?(C=y.child,C.childLanes=0,C.pendingProps=Ae,y.deletions=null):(C=Al(m,Ae),C.subtreeFlags=m.subtreeFlags&0xe00000),ye!==null?O=Al(ye,O):(O=Mu(O,K,z,null),O.flags|=2),O.return=y,C.return=y,C.sibling=O,y.child=C,O}function wh(m,y,C,O){return O!==null&&Tm(O),yl(y,m.child,null,C),m=fa(y,y.pendingProps.children),m.flags|=2,y.memoizedState=null,m}function Aw(m,y,C){m.lanes|=y;var O=m.alternate;O!==null&&(O.lanes|=y),tu(m.return,y,C)}function qa(m,y,C,O,z){var K=m.memoizedState;K===null?m.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:O,tail:C,tailMode:z}:(K.isBackwards=y,K.rendering=null,K.renderingStartTime=0,K.last=O,K.tail=C,K.tailMode=z)}function pu(m,y,C){var O=y.pendingProps,z=O.revealOrder,K=O.tail;if(Ur(m,y,O.children,C),O=Lr.current,O&2)O=O&1|2,y.flags|=128;else{if(m!==null&&m.flags&128)e:for(m=y.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&Aw(m,C,y);else if(m.tag===19)Aw(m,C,y);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===y)break e;for(;m.sibling===null;){if(m.return===null||m.return===y)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}O&=1}if(Ut(Lr,O),!(y.mode&1))y.memoizedState=null;else switch(z){case"forwards":for(C=y.child,z=null;C!==null;)m=C.alternate,m!==null&&Im(m)===null&&(z=C),C=C.sibling;C=z,C===null?(z=y.child,y.child=null):(z=C.sibling,C.sibling=null),qa(y,!1,z,C,K);break;case"backwards":for(C=null,z=y.child,y.child=null;z!==null;){if(m=z.alternate,m!==null&&Im(m)===null){y.child=z;break}m=z.sibling,z.sibling=C,C=z,z=m}qa(y,!0,C,null,K);break;case"together":qa(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function Os(m,y,C){if(m!==null&&(y.dependencies=m.dependencies),Ha|=y.lanes,!(C&y.childLanes))return null;if(m!==null&&y.child!==m.child)throw Error(o(153));if(y.child!==null){for(m=y.child,C=Al(m,m.pendingProps),y.child=C,C.return=y;m.sibling!==null;)m=m.sibling,C=C.sibling=Al(m,m.pendingProps),C.return=y;C.sibling=null}return y.child}function qm(m,y,C){switch(y.tag){case 3:vh(y),Cd();break;case 5:Mw(y);break;case 1:Fn(y.type)&&Ci(y);break;case 4:Cm(y,y.stateNode.containerInfo);break;case 10:eu(y,y.type._context,y.memoizedProps.value);break;case 13:var O=y.memoizedState;if(O!==null)return O.dehydrated!==null?(Ut(Lr,Lr.current&1),y.flags|=128,null):C&y.child.childLanes?Ov(m,y,C):(Ut(Lr,Lr.current&1),m=Os(m,y,C),m!==null?m.sibling:null);Ut(Lr,Lr.current&1);break;case 19:if(O=(C&y.childLanes)!==0,m.flags&128){if(O)return pu(m,y,C);y.flags|=128}var z=y.memoizedState;if(z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Ut(Lr,Lr.current),O)break;return null;case 22:case 23:return y.lanes=0,Hi(m,y,C)}return Os(m,y,C)}function Hm(m,y){switch(vv(y),y.tag){case 1:return Fn(y.type)&&mn(),m=y.flags,m&65536?(y.flags=m&-65537|128,y):null;case 3:return Nd(),lt(Rn),lt(In),ou(),m=y.flags,m&65536&&!(m&128)?(y.flags=m&-65537|128,y):null;case 5:return wv(y),null;case 13:if(lt(Lr),m=y.memoizedState,m!==null&&m.dehydrated!==null){if(y.alternate===null)throw Error(o(340));Cd()}return m=y.flags,m&65536?(y.flags=m&-65537|128,y):null;case 19:return lt(Lr),null;case 4:return Nd(),null;case 10:return ah(y.type._context),null;case 22:case 23:return Nh(),null;case 24:return null;default:return null}}var ys=!1,ki=!1,mu=typeof WeakSet=="function"?WeakSet:Set,ht=null;function Do(m,y){var C=m.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(O){xs(m,y,O)}else C.current=null}function Sl(m,y,C){try{C()}catch(O){xs(m,y,O)}}var Lv=!1;function Dv(m,y){for(Z(m.containerInfo),ht=y;ht!==null;)if(m=ht,y=m.child,(m.subtreeFlags&1028)!==0&&y!==null)y.return=m,ht=y;else for(;ht!==null;){m=ht;try{var C=m.alternate;if(m.flags&1024)switch(m.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var O=C.memoizedProps,z=C.memoizedState,K=m.stateNode,ye=K.getSnapshotBeforeUpdate(m.elementType===m.type?O:Ns(m.type,O),z);K.__reactInternalSnapshotBeforeUpdate=ye}break;case 3:Fe&&Ke(m.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ae){xs(m,m.return,Ae)}if(y=m.sibling,y!==null){y.return=m.return,ht=y;break}ht=m.return}return C=Lv,Lv=!1,C}function El(m,y,C){var O=y.updateQueue;if(O=O!==null?O.lastEffect:null,O!==null){var z=O=O.next;do{if((z.tag&m)===m){var K=z.destroy;z.destroy=void 0,K!==void 0&&Sl(y,C,K)}z=z.next}while(z!==O)}}function $i(m,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var C=y=y.next;do{if((C.tag&m)===m){var O=C.create;C.destroy=O()}C=C.next}while(C!==y)}}function vs(m){var y=m.ref;if(y!==null){var C=m.stateNode;switch(m.tag){case 5:m=q(C);break;default:m=C}typeof y=="function"?y(m):y.current=m}}function xr(m,y,C){if(za&&typeof za.onCommitFiberUnmount=="function")try{za.onCommitFiberUnmount(rh,y)}catch{}switch(y.tag){case 0:case 11:case 14:case 15:if(m=y.updateQueue,m!==null&&(m=m.lastEffect,m!==null)){var O=m=m.next;do{var z=O,K=z.destroy;z=z.tag,K!==void 0&&(z&2||z&4)&&Sl(y,C,K),O=O.next}while(O!==m)}break;case 1:if(Do(y,C),m=y.stateNode,typeof m.componentWillUnmount=="function")try{m.props=y.memoizedProps,m.state=y.memoizedState,m.componentWillUnmount()}catch(ye){xs(y,C,ye)}break;case 5:Do(y,C);break;case 4:Fe?jv(m,y,C):ve&&ve&&(y=y.stateNode.containerInfo,C=pt(y),sr(y,C))}}function Fo(m,y,C){for(var O=y;;)if(xr(m,O,C),O.child===null||Fe&&O.tag===4){if(O===y)break;for(;O.sibling===null;){if(O.return===null||O.return===y)return;O=O.return}O.sibling.return=O.return,O=O.sibling}else O.child.return=O,O=O.child}function Fv(m){var y=m.alternate;y!==null&&(m.alternate=null,Fv(y)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(y=m.stateNode,y!==null&&Ze(y)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function Bv(m){return m.tag===5||m.tag===3||m.tag===4}function $m(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Bv(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Gm(m){if(Fe){e:{for(var y=m.return;y!==null;){if(Bv(y))break e;y=y.return}throw Error(o(160))}var C=y;switch(C.tag){case 5:y=C.stateNode,C.flags&32&&(He(y),C.flags&=-33),C=$m(m),Bd(m,C,y);break;case 3:case 4:y=C.stateNode.containerInfo,C=$m(m),Xm(m,C,y);break;default:throw Error(o(161))}}}function Xm(m,y,C){var O=m.tag;if(O===5||O===6)m=m.stateNode,y?Bt(C,m,y):at(C,m);else if(O!==4&&(m=m.child,m!==null))for(Xm(m,y,C),m=m.sibling;m!==null;)Xm(m,y,C),m=m.sibling}function Bd(m,y,C){var O=m.tag;if(O===5||O===6)m=m.stateNode,y?kt(C,m,y):Ye(C,m);else if(O!==4&&(m=m.child,m!==null))for(Bd(m,y,C),m=m.sibling;m!==null;)Bd(m,y,C),m=m.sibling}function jv(m,y,C){for(var O=y,z=!1,K,ye;;){if(!z){z=O.return;e:for(;;){if(z===null)throw Error(o(160));switch(K=z.stateNode,z.tag){case 5:ye=!1;break e;case 3:K=K.containerInfo,ye=!0;break e;case 4:K=K.containerInfo,ye=!0;break e}z=z.return}z=!0}if(O.tag===5||O.tag===6)Fo(m,O,C),ye?Ee(K,O.stateNode):dt(K,O.stateNode);else if(O.tag===18)ye?wd(K,O.stateNode):bd(K,O.stateNode);else if(O.tag===4){if(O.child!==null){K=O.stateNode.containerInfo,ye=!0,O.child.return=O,O=O.child;continue}}else if(xr(m,O,C),O.child!==null){O.child.return=O,O=O.child;continue}if(O===y)break;for(;O.sibling===null;){if(O.return===null||O.return===y)return;O=O.return,O.tag===4&&(z=!1)}O.sibling.return=O.return,O=O.sibling}}function gc(m,y){if(Fe){switch(y.tag){case 0:case 11:case 14:case 15:El(3,y,y.return),$i(3,y),El(5,y,y.return);return;case 1:return;case 5:var C=y.stateNode;if(C!=null){var O=y.memoizedProps;m=m!==null?m.memoizedProps:O;var z=y.type,K=y.updateQueue;y.updateQueue=null,K!==null&&gt(C,K,z,m,O,y)}return;case 6:if(y.stateNode===null)throw Error(o(162));C=y.memoizedProps,Ft(y.stateNode,m!==null?m.memoizedProps:C,C);return;case 3:_e&&m!==null&&m.memoizedState.isDehydrated&&vd(y.stateNode.containerInfo);return;case 12:return;case 13:jd(y);return;case 19:jd(y);return;case 17:return}throw Error(o(163))}switch(y.tag){case 0:case 11:case 14:case 15:El(3,y,y.return),$i(3,y),El(5,y,y.return);return;case 12:return;case 13:jd(y);return;case 19:jd(y);return;case 3:_e&&m!==null&&m.memoizedState.isDehydrated&&vd(y.stateNode.containerInfo);break;case 22:case 23:return}e:if(ve){switch(y.tag){case 1:case 5:case 6:break e;case 3:case 4:y=y.stateNode,sr(y.containerInfo,y.pendingChildren);break e}throw Error(o(163))}}function jd(m){var y=m.updateQueue;if(y!==null){m.updateQueue=null;var C=m.stateNode;C===null&&(C=m.stateNode=new mu),y.forEach(function(O){var z=Lw.bind(null,m,O);C.has(O)||(C.add(O),O.then(z,z))})}}function JT(m,y){for(ht=y;ht!==null;){y=ht;var C=y.deletions;if(C!==null)for(var O=0;O<C.length;O++){var z=C[O];try{var K=m;Fe?jv(K,z,y):Fo(K,z,y);var ye=z.alternate;ye!==null&&(ye.return=null),z.return=null}catch(Wt){xs(z,y,Wt)}}if(C=y.child,y.subtreeFlags&12854&&C!==null)C.return=y,ht=C;else for(;ht!==null;){y=ht;try{var Ae=y.flags;if(Ae&32&&Fe&&He(y.stateNode),Ae&512){var Xe=y.alternate;if(Xe!==null){var ct=Xe.ref;ct!==null&&(typeof ct=="function"?ct(null):ct.current=null)}}if(Ae&8192)switch(y.tag){case 13:if(y.memoizedState!==null){var Ot=y.alternate;(Ot===null||Ot.memoizedState===null)&&(Ih=gi())}break;case 22:var dn=y.memoizedState!==null,Zt=y.alternate,En=Zt!==null&&Zt.memoizedState!==null;if(C=y,Fe){e:if(O=C,z=dn,K=null,Fe)for(var St=O;;){if(St.tag===5){if(K===null){K=St;var Ki=St.stateNode;z?ft(Ki):nt(St.stateNode,St.memoizedProps)}}else if(St.tag===6){if(K===null){var ho=St.stateNode;z?Se(ho):Ve(ho,St.memoizedProps)}}else if((St.tag!==22&&St.tag!==23||St.memoizedState===null||St===O)&&St.child!==null){St.child.return=St,St=St.child;continue}if(St===O)break;for(;St.sibling===null;){if(St.return===null||St.return===O)break e;K===St&&(K=null),St=St.return}K===St&&(K=null),St.sibling.return=St.return,St=St.sibling}}if(dn&&!En&&C.mode&1){ht=C;for(var Ue=C.child;Ue!==null;){for(C=ht=Ue;ht!==null;){O=ht;var ke=O.child;switch(O.tag){case 0:case 11:case 14:case 15:El(4,O,O.return);break;case 1:Do(O,O.return);var qe=O.stateNode;if(typeof qe.componentWillUnmount=="function"){var xt=O.return;try{qe.props=O.memoizedProps,qe.state=O.memoizedState,qe.componentWillUnmount()}catch(Wt){xs(O,xt,Wt)}}break;case 5:Do(O,O.return);break;case 22:if(O.memoizedState!==null){zv(C);continue}}ke!==null?(ke.return=O,ht=ke):zv(C)}Ue=Ue.sibling}}}switch(Ae&4102){case 2:Gm(y),y.flags&=-3;break;case 6:Gm(y),y.flags&=-3,gc(y.alternate,y);break;case 4096:y.flags&=-4097;break;case 4100:y.flags&=-4097,gc(y.alternate,y);break;case 4:gc(y.alternate,y)}}catch(Wt){xs(y,y.return,Wt)}if(C=y.sibling,C!==null){C.return=y.return,ht=C;break}ht=y.return}}}function _h(m,y,C){ht=m,Sh(m)}function Sh(m,y,C){for(var O=(m.mode&1)!==0;ht!==null;){var z=ht,K=z.child;if(z.tag===22&&O){var ye=z.memoizedState!==null||ys;if(!ye){var Ae=z.alternate,Xe=Ae!==null&&Ae.memoizedState!==null||ki;Ae=ys;var ct=ki;if(ys=ye,(ki=Xe)&&!ct)for(ht=z;ht!==null;)ye=ht,Xe=ye.child,ye.tag===22&&ye.memoizedState!==null?gu(z):Xe!==null?(Xe.return=ye,ht=Xe):gu(z);for(;K!==null;)ht=K,Sh(K),K=K.sibling;ht=z,ys=Ae,ki=ct}Uv(m)}else z.subtreeFlags&8772&&K!==null?(K.return=z,ht=K):Uv(m)}}function Uv(m){for(;ht!==null;){var y=ht;if(y.flags&8772){var C=y.alternate;try{if(y.flags&8772)switch(y.tag){case 0:case 11:case 15:ki||$i(5,y);break;case 1:var O=y.stateNode;if(y.flags&4&&!ki)if(C===null)O.componentDidMount();else{var z=y.elementType===y.type?C.memoizedProps:Ns(y.type,C.memoizedProps);O.componentDidUpdate(z,C.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var K=y.updateQueue;K!==null&&yw(y,K,O);break;case 3:var ye=y.updateQueue;if(ye!==null){if(C=null,y.child!==null)switch(y.child.tag){case 5:C=q(y.child.stateNode);break;case 1:C=y.child.stateNode}yw(y,ye,C)}break;case 5:var Ae=y.stateNode;C===null&&y.flags&4&&et(Ae,y.type,y.memoizedProps,y);break;case 6:break;case 4:break;case 12:break;case 13:if(_e&&y.memoizedState===null){var Xe=y.alternate;if(Xe!==null){var ct=Xe.memoizedState;if(ct!==null){var Ot=ct.dehydrated;Ot!==null&&xd(Ot)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}ki||y.flags&512&&vs(y)}catch(dn){xs(y,y.return,dn)}}if(y===m){ht=null;break}if(C=y.sibling,C!==null){C.return=y.return,ht=C;break}ht=y.return}}function zv(m){for(;ht!==null;){var y=ht;if(y===m){ht=null;break}var C=y.sibling;if(C!==null){C.return=y.return,ht=C;break}ht=y.return}}function gu(m){for(;ht!==null;){var y=ht;try{switch(y.tag){case 0:case 11:case 15:var C=y.return;try{$i(4,y)}catch(Xe){xs(y,C,Xe)}break;case 1:var O=y.stateNode;if(typeof O.componentDidMount=="function"){var z=y.return;try{O.componentDidMount()}catch(Xe){xs(y,z,Xe)}}var K=y.return;try{vs(y)}catch(Xe){xs(y,K,Xe)}break;case 5:var ye=y.return;try{vs(y)}catch(Xe){xs(y,ye,Xe)}}}catch(Xe){xs(y,y.return,Xe)}if(y===m){ht=null;break}var Ae=y.sibling;if(Ae!==null){Ae.return=y.return,ht=Ae;break}ht=y.return}}var Eh=0,yu=1,vu=2,Ml=3,Ud=4;if(typeof Symbol=="function"&&Symbol.for){var xu=Symbol.for;Eh=xu("selector.component"),yu=xu("selector.has_pseudo_class"),vu=xu("selector.role"),Ml=xu("selector.test_id"),Ud=xu("selector.text")}function Mh(m){var y=se(m);if(y!=null){if(typeof y.memoizedProps["data-testname"]!="string")throw Error(o(364));return y}if(m=Q(m),m===null)throw Error(o(362));return m.stateNode.current}function Th(m,y){switch(y.$$typeof){case Eh:if(m.type===y.value)return!0;break;case yu:e:{y=y.value,m=[m,0];for(var C=0;C<m.length;){var O=m[C++],z=m[C++],K=y[z];if(O.tag!==5||!he(O)){for(;K!=null&&Th(O,K);)z++,K=y[z];if(z===y.length){y=!0;break e}else for(O=O.child;O!==null;)m.push(O,z),O=O.sibling}}y=!1}return y;case vu:if(m.tag===5&&Te(m.stateNode,y.value))return!0;break;case Ud:if((m.tag===5||m.tag===6)&&(m=me(m),m!==null&&0<=m.indexOf(y.value)))return!0;break;case Ml:if(m.tag===5&&(m=m.memoizedProps["data-testname"],typeof m=="string"&&m.toLowerCase()===y.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function yc(m){switch(m.$$typeof){case Eh:return"<"+(D(m.value)||"Unknown")+">";case yu:return":has("+(yc(m)||"")+")";case vu:return'[role="'+m.value+'"]';case Ud:return'"'+m.value+'"';case Ml:return'[data-testname="'+m.value+'"]';default:throw Error(o(365))}}function lo(m,y){var C=[];m=[m,0];for(var O=0;O<m.length;){var z=m[O++],K=m[O++],ye=y[K];if(z.tag!==5||!he(z)){for(;ye!=null&&Th(z,ye);)K++,ye=y[K];if(K===y.length)C.push(z);else for(z=z.child;z!==null;)m.push(z,K),z=z.sibling}}return C}function Tl(m,y){if(!fe)throw Error(o(363));m=Mh(m),m=lo(m,y),y=[],m=Array.from(m);for(var C=0;C<m.length;){var O=m[C++];if(O.tag===5)he(O)||y.push(O.stateNode);else for(O=O.child;O!==null;)m.push(O),O=O.sibling}return y}var Vv=Math.ceil,Ch=a.ReactCurrentDispatcher,ha=a.ReactCurrentOwner,or=a.ReactCurrentBatchConfig,wn=0,Zr=null,ar=null,Tr=0,is=0,bu=Ht(0),zr=0,zd=null,Ha=0,co=0,wu=0,Cl=null,ti=null,Ih=0,vc=1/0;function _u(){vc=gi()+500}var Vd=!1,br=null,pa=null,Wd=!1,$a=null,Su=0,Eu=0,Il=null,hr=-1,Vr=0;function Gn(){return wn&6?gi():hr!==-1?hr:hr=gi()}function ma(m){return m.mode&1?wn&2&&Tr!==0?Tr&-Tr:gw.transition!==null?(Vr===0&&(m=Kr,Kr<<=1,!(Kr&4194240)&&(Kr=64),Vr=m),Vr):(m=An,m!==0?m:je()):1}function ss(m,y,C){if(50<Eu)throw Eu=0,Il=null,Error(o(185));var O=xc(m,y);return O===null?null:(Yc(O,y,C),(!(wn&2)||O!==Zr)&&(O===Zr&&(!(wn&2)&&(co|=y),zr===4&&Xi(O,Tr)),Ls(O,C),y===1&&wn===0&&!(m.mode&1)&&(_u(),mm&&No())),O)}function xc(m,y){m.lanes|=y;var C=m.alternate;for(C!==null&&(C.lanes|=y),C=m,m=m.return;m!==null;)m.childLanes|=y,C=m.alternate,C!==null&&(C.childLanes|=y),C=m,m=m.return;return C.tag===3?C.stateNode:null}function Ls(m,y){var C=m.callbackNode;mw(m,y);var O=nh(m,m===Zr?Tr:0);if(O===0)C!==null&&_d(C),m.callbackNode=null,m.callbackPriority=0;else if(y=O&-O,m.callbackPriority!==y){if(C!=null&&_d(C),y===1)m.tag===0?ym(uo.bind(null,m)):gm(uo.bind(null,m)),le?ge(function(){wn===0&&No()}):Zc(Jc,No),C=null;else{switch(fl(O)){case 1:C=Jc;break;case 4:C=KT;break;case 16:C=hm;break;case 0x20000000:C=pm;break;default:C=hm}C=Ym(C,Gi.bind(null,m))}m.callbackPriority=y,m.callbackNode=C}}function Gi(m,y){if(hr=-1,Vr=0,wn&6)throw Error(o(327));var C=m.callbackNode;if(Ga()&&m.callbackNode!==C)return null;var O=nh(m,m===Zr?Tr:0);if(O===0)return null;if(O&30||O&m.expiredLanes||y)y=Ph(m,O);else{y=O;var z=wn;wn|=2;var K=Hv();(Zr!==m||Tr!==y)&&(_u(),Rl(m,y));do try{Pw();break}catch(Ae){qv(m,Ae)}while(!0);ps(),Ch.current=K,wn=z,ar!==null?y=0:(Zr=null,Tr=0,y=zr)}if(y!==0){if(y===2&&(z=um(m),z!==0&&(O=z,y=Rh(m,z))),y===1)throw C=zd,Rl(m,0),Xi(m,O),Ls(m,gi()),C;if(y===6)Xi(m,O);else{if(z=m.current.alternate,!(O&30)&&!Wv(z)&&(y=Ph(m,O),y===2&&(K=um(m),K!==0&&(O=K,y=Rh(m,K))),y===1))throw C=zd,Rl(m,0),Xi(m,O),Ls(m,gi()),C;switch(m.finishedWork=z,m.finishedLanes=O,y){case 0:case 1:throw Error(o(345));case 2:ga(m,ti);break;case 3:if(Xi(m,O),(O&0x7c00000)===O&&(y=Ih+500-gi(),10<y)){if(nh(m,0)!==0)break;if(z=m.suspendedLanes,(z&O)!==O){Gn(),m.pingedLanes|=m.suspendedLanes&z;break}m.timeoutHandle=be(ga.bind(null,m,ti),y);break}ga(m,ti);break;case 4:if(Xi(m,O),(O&4194240)===O)break;for(y=m.eventTimes,z=-1;0<O;){var ye=31-Bn(O);K=1<<ye,ye=y[ye],ye>z&&(z=ye),O&=~K}if(O=z,O=gi()-O,O=(120>O?120:480>O?480:1080>O?1080:1920>O?1920:3e3>O?3e3:4320>O?4320:1960*Vv(O/1960))-O,10<O){m.timeoutHandle=be(ga.bind(null,m,ti),O);break}ga(m,ti);break;case 5:ga(m,ti);break;default:throw Error(o(329))}}}return Ls(m,gi()),m.callbackNode===C?Gi.bind(null,m):null}function Rh(m,y){var C=Cl;return m.current.memoizedState.isDehydrated&&(Rl(m,y).flags|=256),m=Ph(m,y),m!==2&&(y=ti,ti=C,y!==null&&Ah(y)),m}function Ah(m){ti===null?ti=m:ti.push.apply(ti,m)}function Wv(m){for(var y=m;;){if(y.flags&16384){var C=y.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var O=0;O<C.length;O++){var z=C[O],K=z.getSnapshot;z=z.value;try{if(!hs(K(),z))return!1}catch{return!1}}}if(C=y.child,y.subtreeFlags&16384&&C!==null)C.return=y,y=C;else{if(y===m)break;for(;y.sibling===null;){if(y.return===null||y.return===m)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function Xi(m,y){for(y&=~wu,y&=~co,m.suspendedLanes|=y,m.pingedLanes&=~y,m=m.expirationTimes;0<y;){var C=31-Bn(y),O=1<<C;m[C]=-1,y&=~O}}function uo(m){if(wn&6)throw Error(o(327));Ga();var y=nh(m,0);if(!(y&1))return Ls(m,gi()),null;var C=Ph(m,y);if(m.tag!==0&&C===2){var O=um(m);O!==0&&(y=O,C=Rh(m,O))}if(C===1)throw C=zd,Rl(m,0),Xi(m,y),Ls(m,gi()),C;if(C===6)throw Error(o(345));return m.finishedWork=m.current.alternate,m.finishedLanes=y,ga(m,ti),Ls(m,gi()),null}function qd(m){$a!==null&&$a.tag===0&&!(wn&6)&&Ga();var y=wn;wn|=1;var C=or.transition,O=An;try{if(or.transition=null,An=1,m)return m()}finally{An=O,or.transition=C,wn=y,!(wn&6)&&No()}}function Nh(){is=bu.current,lt(bu)}function Rl(m,y){m.finishedWork=null,m.finishedLanes=0;var C=m.timeoutHandle;if(C!==Ce&&(m.timeoutHandle=Ce,we(C)),ar!==null)for(C=ar.return;C!==null;){var O=C;switch(vv(O),O.tag){case 1:O=O.type.childContextTypes,O!=null&&mn();break;case 3:Nd(),lt(Rn),lt(In),ou();break;case 5:wv(O);break;case 4:Nd();break;case 13:lt(Lr);break;case 19:lt(Lr);break;case 10:ah(O.type._context);break;case 22:case 23:Nh()}C=C.return}if(Zr=m,ar=m=Al(m.current,null),Tr=is=y,zr=0,zd=null,wu=co=Ha=0,ti=Cl=null,Po!==null){for(y=0;y<Po.length;y++)if(C=Po[y],O=C.interleaved,O!==null){C.interleaved=null;var z=O.next,K=C.pending;if(K!==null){var ye=K.next;K.next=z,O.next=ye}C.pending=O}Po=null}return m}function qv(m,y){do{var C=ar;try{if(ps(),ch.current=Dd,Rm){for(var O=Dr.memoizedState;O!==null;){var z=O.queue;z!==null&&(z.pending=null),O=O.next}Rm=!1}if(au=0,Ai=Ri=Dr=null,Va=!1,lu=0,ha.current=null,C===null||C.return===null){zr=1,zd=y,ar=null;break}e:{var K=m,ye=C.return,Ae=C,Xe=y;if(y=Tr,Ae.flags|=32768,Xe!==null&&typeof Xe=="object"&&typeof Xe.then=="function"){var ct=Xe,Ot=Ae,dn=Ot.tag;if(!(Ot.mode&1)&&(dn===0||dn===11||dn===15)){var Zt=Ot.alternate;Zt?(Ot.updateQueue=Zt.updateQueue,Ot.memoizedState=Zt.memoizedState,Ot.lanes=Zt.lanes):(Ot.updateQueue=null,Ot.memoizedState=null)}var En=Nv(ye);if(En!==null){En.flags&=-257,uu(En,ye,Ae,K,y),En.mode&1&&xl(K,ct,y),y=En,Xe=ct;var St=y.updateQueue;if(St===null){var Ki=new Set;Ki.add(Xe),y.updateQueue=Ki}else St.add(Xe);break e}else{if(!(y&1)){xl(K,ct,y),Km();break e}Xe=Error(o(426))}}else if(Mr&&Ae.mode&1){var ho=Nv(ye);if(ho!==null){!(ho.flags&65536)&&(ho.flags|=256),uu(ho,ye,Ae,K,y),Tm(Xe);break e}}K=Xe,zr!==4&&(zr=2),Cl===null?Cl=[K]:Cl.push(K),Xe=Av(Xe,Ae),Ae=ye;do{switch(Ae.tag){case 3:Ae.flags|=65536,y&=-y,Ae.lanes|=y;var Ue=Rw(Ae,Xe,y);bm(Ae,Ue);break e;case 1:K=Xe;var ke=Ae.type,qe=Ae.stateNode;if(!(Ae.flags&128)&&(typeof ke.getDerivedStateFromError=="function"||qe!==null&&typeof qe.componentDidCatch=="function"&&(pa===null||!pa.has(qe)))){Ae.flags|=65536,y&=-y,Ae.lanes|=y;var xt=jm(Ae,K,y);bm(Ae,xt);break e}}Ae=Ae.return}while(Ae!==null)}Gv(C)}catch(Wt){y=Wt,ar===C&&C!==null&&(ar=C=C.return);continue}break}while(!0)}function Hv(){var m=Ch.current;return Ch.current=Dd,m===null?Dd:m}function Km(){(zr===0||zr===3||zr===2)&&(zr=4),Zr===null||!(Ha&0xfffffff)&&!(co&0xfffffff)||Xi(Zr,Tr)}function Ph(m,y){var C=wn;wn|=2;var O=Hv();Zr===m&&Tr===y||Rl(m,y);do try{Nw();break}catch(z){qv(m,z)}while(!0);if(ps(),wn=C,Ch.current=O,ar!==null)throw Error(o(261));return Zr=null,Tr=0,zr}function Nw(){for(;ar!==null;)$v(ar)}function Pw(){for(;ar!==null&&!lc();)$v(ar)}function $v(m){var y=Yv(m.alternate,m,is);m.memoizedProps=m.pendingProps,y===null?Gv(m):ar=y,ha.current=null}function Gv(m){var y=m;do{var C=y.alternate;if(m=y.return,y.flags&32768){if(C=Hm(C,y),C!==null){C.flags&=32767,ar=C;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{zr=6,ar=null;return}}else if(C=Vm(C,y,is),C!==null){ar=C;return}if(y=y.sibling,y!==null){ar=y;return}ar=y=m}while(y!==null);zr===0&&(zr=5)}function ga(m,y){var C=An,O=or.transition;try{or.transition=null,An=1,kw(m,y,C)}finally{or.transition=O,An=C}return null}function kw(m,y,C){do Ga();while($a!==null);if(wn&6)throw Error(o(327));var O=m.finishedWork,z=m.finishedLanes;if(O===null)return null;if(m.finishedWork=null,m.finishedLanes=0,O===m.current)throw Error(o(177));m.callbackNode=null,m.callbackPriority=0;var K=O.lanes|O.childLanes;if(fm(m,K),m===Zr&&(ar=Zr=null,Tr=0),!(O.subtreeFlags&2064)&&!(O.flags&2064)||Wd||(Wd=!0,Ym(hm,function(){return Ga(),null})),K=(O.flags&15990)!==0,O.subtreeFlags&15990||K){K=or.transition,or.transition=null;var ye=An;An=1;var Ae=wn;wn|=4,ha.current=null,Dv(m,O),JT(m,O),J(m.containerInfo),m.current=O,_h(O),XT(),wn=Ae,An=ye,or.transition=K}else m.current=O;if(Wd&&(Wd=!1,$a=m,Su=z),K=m.pendingLanes,K===0&&(pa=null),ih(O.stateNode),Ls(m,gi()),y!==null)for(C=m.onRecoverableError,O=0;O<y.length;O++)C(y[O]);if(Vd)throw Vd=!1,m=br,br=null,m;return Su&1&&m.tag!==0&&Ga(),K=m.pendingLanes,K&1?m===Il?Eu++:(Eu=0,Il=m):Eu=0,No(),null}function Ga(){if($a!==null){var m=fl(Su),y=or.transition,C=An;try{if(or.transition=null,An=16>m?16:m,$a===null)var O=!1;else{if(m=$a,$a=null,Su=0,wn&6)throw Error(o(331));var z=wn;for(wn|=4,ht=m.current;ht!==null;){var K=ht,ye=K.child;if(ht.flags&16){var Ae=K.deletions;if(Ae!==null){for(var Xe=0;Xe<Ae.length;Xe++){var ct=Ae[Xe];for(ht=ct;ht!==null;){var Ot=ht;switch(Ot.tag){case 0:case 11:case 15:El(8,Ot,K)}var dn=Ot.child;if(dn!==null)dn.return=Ot,ht=dn;else for(;ht!==null;){Ot=ht;var Zt=Ot.sibling,En=Ot.return;if(Fv(Ot),Ot===ct){ht=null;break}if(Zt!==null){Zt.return=En,ht=Zt;break}ht=En}}}var St=K.alternate;if(St!==null){var Ki=St.child;if(Ki!==null){St.child=null;do{var ho=Ki.sibling;Ki.sibling=null,Ki=ho}while(Ki!==null)}}ht=K}}if(K.subtreeFlags&2064&&ye!==null)ye.return=K,ht=ye;else e:for(;ht!==null;){if(K=ht,K.flags&2048)switch(K.tag){case 0:case 11:case 15:El(9,K,K.return)}var Ue=K.sibling;if(Ue!==null){Ue.return=K.return,ht=Ue;break e}ht=K.return}}var ke=m.current;for(ht=ke;ht!==null;){ye=ht;var qe=ye.child;if(ye.subtreeFlags&2064&&qe!==null)qe.return=ye,ht=qe;else e:for(ye=ke;ht!==null;){if(Ae=ht,Ae.flags&2048)try{switch(Ae.tag){case 0:case 11:case 15:$i(9,Ae)}}catch(Wt){xs(Ae,Ae.return,Wt)}if(Ae===ye){ht=null;break e}var xt=Ae.sibling;if(xt!==null){xt.return=Ae.return,ht=xt;break e}ht=Ae.return}}if(wn=z,No(),za&&typeof za.onPostCommitFiberRoot=="function")try{za.onPostCommitFiberRoot(rh,m)}catch{}O=!0}return O}finally{An=C,or.transition=y}}return!1}function kh(m,y,C){y=Av(C,y),y=Rw(m,y,1),cc(m,y),y=Gn(),m=xc(m,1),m!==null&&(Yc(m,1,y),Ls(m,y))}function xs(m,y,C){if(m.tag===3)kh(m,m,C);else for(;y!==null;){if(y.tag===3){kh(y,m,C);break}else if(y.tag===1){var O=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(pa===null||!pa.has(O))){m=Av(C,m),m=jm(y,m,1),cc(y,m),m=Gn(),y=xc(y,1),y!==null&&(Yc(y,1,m),Ls(y,m));break}}y=y.return}}function Xv(m,y,C){var O=m.pingCache;O!==null&&O.delete(y),y=Gn(),m.pingedLanes|=m.suspendedLanes&C,Zr===m&&(Tr&C)===C&&(zr===4||zr===3&&(Tr&0x7c00000)===Tr&&500>gi()-Ih?Rl(m,0):wu|=C),Ls(m,y)}function Kv(m,y){y===0&&(m.mode&1?(y=zn,zn<<=1,!(zn&0x7c00000)&&(zn=4194304)):y=1);var C=Gn();m=xc(m,y),m!==null&&(Yc(m,y,C),Ls(m,C))}function Ow(m){var y=m.memoizedState,C=0;y!==null&&(C=y.retryLane),Kv(m,C)}function Lw(m,y){var C=0;switch(m.tag){case 13:var O=m.stateNode,z=m.memoizedState;z!==null&&(C=z.retryLane);break;case 19:O=m.stateNode;break;default:throw Error(o(314))}O!==null&&O.delete(y),Kv(m,C)}var Yv;Yv=function(m,y,C){if(m!==null)if(m.memoizedProps!==y.pendingProps||Rn.current)Pi=!0;else{if(!(m.lanes&C)&&!(y.flags&128))return Pi=!1,qm(m,y,C);Pi=!!(m.flags&131072)}else Pi=!1,Mr&&y.flags&1048576&&ww(y,Em,y.index);switch(y.lanes=0,y.tag){case 2:var O=y.type;m!==null&&(m.alternate=null,y.alternate=null,y.flags|=2),m=y.pendingProps;var z=jt(y,In.current);Sd(y,C),z=Pd(null,y,O,m,z,C);var K=hc();return y.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,Fn(O)?(K=!0,Ci(y)):K=!1,y.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,Ed(y),z.updater=_m,y.stateNode=z,z._reactInternals=y,gv(y,O,m,C),y=rs(null,y,O,!0,K,C)):(y.tag=0,Mr&&K&&yv(y),Ur(null,y,z,C),y=y.child),y;case 16:O=y.elementType;e:{switch(m!==null&&(m.alternate=null,y.alternate=null,y.flags|=2),m=y.pendingProps,z=O._init,O=z(O._payload),y.type=O,z=y.tag=QT(O),m=Ns(O,m),z){case 0:y=_l(null,y,O,m,C);break e;case 1:y=fu(null,y,O,m,C);break e;case 11:y=fr(null,y,O,m,C);break e;case 14:y=cr(null,y,O,Ns(O.type,m),C);break e}throw Error(o(306,O,""))}return y;case 0:return O=y.type,z=y.pendingProps,z=y.elementType===O?z:Ns(O,z),_l(m,y,O,z,C);case 1:return O=y.type,z=y.pendingProps,z=y.elementType===O?z:Ns(O,z),fu(m,y,O,z,C);case 3:e:{if(vh(y),m===null)throw Error(o(387));O=y.pendingProps,K=y.memoizedState,z=K.element,hv(m,y),wm(y,O,null,C);var ye=y.memoizedState;if(O=ye.element,_e&&K.isDehydrated)if(K={element:O,isDehydrated:!1,cache:ye.cache,transitions:ye.transitions},y.updateQueue.baseState=K,y.memoizedState=K,y.flags&256){z=Error(o(423)),y=kv(m,y,O,C,z);break e}else if(O!==z){z=Error(o(424)),y=kv(m,y,O,C,z);break e}else for(_e&&(qi=md(y.stateNode.containerInfo),ms=y,Mr=!0,Lo=null,Td=!1),C=Ew(y,null,O,C),y.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Cd(),O===z){y=Os(m,y,C);break e}Ur(m,y,O,C)}y=y.child}return y;case 5:return Mw(y),m===null&&dc(y),O=y.type,z=y.pendingProps,K=m!==null?m.memoizedProps:null,ye=z.children,ue(O,z)?ye=null:K!==null&&ue(O,K)&&(y.flags|=32),gs(m,y),Ur(m,y,ye,C),y.child;case 6:return m===null&&dc(y),null;case 13:return Ov(m,y,C);case 4:return Cm(y,y.stateNode.containerInfo),O=y.pendingProps,m===null?y.child=yl(y,null,O,C):Ur(m,y,O,C),y.child;case 11:return O=y.type,z=y.pendingProps,z=y.elementType===O?z:Ns(O,z),fr(m,y,O,z,C);case 7:return Ur(m,y,y.pendingProps,C),y.child;case 8:return Ur(m,y,y.pendingProps.children,C),y.child;case 12:return Ur(m,y,y.pendingProps.children,C),y.child;case 10:e:{if(O=y.type._context,z=y.pendingProps,K=y.memoizedProps,ye=z.value,eu(y,O,ye),K!==null)if(hs(K.value,ye)){if(K.children===z.children&&!Rn.current){y=Os(m,y,C);break e}}else for(K=y.child,K!==null&&(K.return=y);K!==null;){var Ae=K.dependencies;if(Ae!==null){ye=K.child;for(var Xe=Ae.firstContext;Xe!==null;){if(Xe.context===O){if(K.tag===1){Xe=pl(-1,C&-C),Xe.tag=2;var ct=K.updateQueue;if(ct!==null){ct=ct.shared;var Ot=ct.pending;Ot===null?Xe.next=Xe:(Xe.next=Ot.next,Ot.next=Xe),ct.pending=Xe}}K.lanes|=C,Xe=K.alternate,Xe!==null&&(Xe.lanes|=C),tu(K.return,C,y),Ae.lanes|=C;break}Xe=Xe.next}}else if(K.tag===10)ye=K.type===y.type?null:K.child;else if(K.tag===18){if(ye=K.return,ye===null)throw Error(o(341));ye.lanes|=C,Ae=ye.alternate,Ae!==null&&(Ae.lanes|=C),tu(ye,C,y),ye=K.sibling}else ye=K.child;if(ye!==null)ye.return=K;else for(ye=K;ye!==null;){if(ye===y){ye=null;break}if(K=ye.sibling,K!==null){K.return=ye.return,ye=K;break}ye=ye.return}K=ye}Ur(m,y,z.children,C),y=y.child}return y;case 9:return z=y.type,O=y.pendingProps.children,Sd(y,C),z=Ps(z),O=O(z),y.flags|=1,Ur(m,y,O,C),y.child;case 14:return O=y.type,z=Ns(O,y.pendingProps),z=Ns(O.type,z),cr(m,y,O,z,C);case 15:return wl(m,y,y.type,y.pendingProps,C);case 17:return O=y.type,z=y.pendingProps,z=y.elementType===O?z:Ns(O,z),m!==null&&(m.alternate=null,y.alternate=null,y.flags|=2),y.tag=1,Fn(O)?(m=!0,Ci(y)):m=!1,Sd(y,C),xw(y,O,z),gv(y,O,z,C),rs(null,y,O,!0,m,C);case 19:return pu(m,y,C);case 22:return Hi(m,y,C)}throw Error(o(156,y.tag))};function Ym(m,y){return Zc(m,y)}function Dw(m,y,C,O){this.tag=m,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fo(m,y,C,O){return new Dw(m,y,C,O)}function Zm(m){return m=m.prototype,!(!m||!m.isReactComponent)}function QT(m){if(typeof m=="function")return Zm(m)?1:0;if(m!=null){if(m=m.$$typeof,m===S)return 11;if(m===E)return 14}return 2}function Al(m,y){var C=m.alternate;return C===null?(C=fo(m.tag,y,m.key,m.mode),C.elementType=m.elementType,C.type=m.type,C.stateNode=m.stateNode,C.alternate=m,m.alternate=C):(C.pendingProps=y,C.type=m.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=m.flags&0xe00000,C.childLanes=m.childLanes,C.lanes=m.lanes,C.child=m.child,C.memoizedProps=m.memoizedProps,C.memoizedState=m.memoizedState,C.updateQueue=m.updateQueue,y=m.dependencies,C.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},C.sibling=m.sibling,C.index=m.index,C.ref=m.ref,C}function Jm(m,y,C,O,z,K){var ye=2;if(O=m,typeof m=="function")Zm(m)&&(ye=1);else if(typeof m=="string")ye=5;else e:switch(m){case u:return Mu(C.children,z,K,y);case f:ye=8,z|=8;break;case p:return m=fo(12,C,y,z|2),m.elementType=p,m.lanes=K,m;case _:return m=fo(13,C,y,z),m.elementType=_,m.lanes=K,m;case b:return m=fo(19,C,y,z),m.elementType=b,m.lanes=K,m;case T:return Oh(C,z,K,y);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case g:ye=10;break e;case x:ye=9;break e;case S:ye=11;break e;case E:ye=14;break e;case M:ye=16,O=null;break e}throw Error(o(130,m==null?m:typeof m,""))}return y=fo(ye,C,y,z),y.elementType=m,y.type=O,y.lanes=K,y}function Mu(m,y,C,O){return m=fo(7,m,O,y),m.lanes=C,m}function Oh(m,y,C,O){return m=fo(22,m,O,y),m.elementType=T,m.lanes=C,m.stateNode={},m}function Qm(m,y,C){return m=fo(6,m,null,y),m.lanes=C,m}function eg(m,y,C){return y=fo(4,m.children!==null?m.children:[],m.key,y),y.lanes=C,y.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},y}function tg(m,y,C,O,z){this.tag=y,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dm(0),this.expirationTimes=dm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dm(0),this.identifierPrefix=O,this.onRecoverableError=z,_e&&(this.mutableSourceEagerHydrationData=null)}function Fw(m,y,C,O,z,K,ye,Ae,Xe){return m=new tg(m,y,C,Ae,Xe),y===1?(y=1,K===!0&&(y|=8)):y=0,K=fo(3,null,null,y),m.current=K,K.stateNode=m,K.memoizedState={element:O,isDehydrated:C,cache:null,transitions:null},Ed(K),m}function Bw(m){if(!m)return Qt;m=m._reactInternals;e:{if(R(m)!==m||m.tag!==1)throw Error(o(170));var y=m;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(Fn(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(o(171))}if(m.tag===1){var C=m.type;if(Fn(C))return dl(m,C,y)}return y}function jw(m){var y=m._reactInternals;if(y===void 0)throw typeof m.render=="function"?Error(o(188)):(m=Object.keys(m).join(","),Error(o(268,m)));return m=j(y),m===null?null:m.stateNode}function Bo(m,y){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var C=m.retryLane;m.retryLane=C!==0&&C<y?C:y}}function Lh(m,y){Bo(m,y),(m=m.alternate)&&Bo(m,y)}function ng(m){return m=j(m),m===null?null:m.stateNode}function Uw(){return null}return n.attemptContinuousHydration=function(m){if(m.tag===13){var y=Gn();ss(m,0x8000000,y),Lh(m,0x8000000)}},n.attemptHydrationAtCurrentPriority=function(m){if(m.tag===13){var y=Gn(),C=ma(m);ss(m,C,y),Lh(m,C)}},n.attemptSynchronousHydration=function(m){switch(m.tag){case 3:var y=m.stateNode;if(y.current.memoizedState.isDehydrated){var C=As(y.pendingLanes);C!==0&&(Ua(y,C|1),Ls(y,gi()),!(wn&6)&&(_u(),No()))}break;case 13:var O=Gn();qd(function(){return ss(m,1,O)}),Lh(m,1)}},n.batchedUpdates=function(m,y){var C=wn;wn|=1;try{return m(y)}finally{wn=C,wn===0&&(_u(),mm&&No())}},n.createComponentSelector=function(m){return{$$typeof:Eh,value:m}},n.createContainer=function(m,y,C,O,z,K,ye){return Fw(m,y,!1,null,C,O,z,K,ye)},n.createHasPseudoClassSelector=function(m){return{$$typeof:yu,value:m}},n.createHydrationContainer=function(m,y,C,O,z,K,ye,Ae,Xe){return m=Fw(C,O,!0,m,z,K,ye,Ae,Xe),m.context=Bw(null),C=m.current,O=Gn(),z=ma(C),K=pl(O,z),K.callback=y??null,cc(C,K),m.current.lanes=z,Yc(m,z,O),Ls(m,O),m},n.createPortal=function(m,y,C){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:O==null?null:""+O,children:m,containerInfo:y,implementation:C}},n.createRoleSelector=function(m){return{$$typeof:vu,value:m}},n.createTestNameSelector=function(m){return{$$typeof:Ml,value:m}},n.createTextSelector=function(m){return{$$typeof:Ud,value:m}},n.deferredUpdates=function(m){var y=An,C=or.transition;try{return or.transition=null,An=16,m()}finally{An=y,or.transition=C}},n.discreteUpdates=function(m,y,C,O,z){var K=An,ye=or.transition;try{return or.transition=null,An=1,m(y,C,O,z)}finally{An=K,or.transition=ye,wn===0&&_u()}},n.findAllNodes=Tl,n.findBoundingRects=function(m,y){if(!fe)throw Error(o(363));y=Tl(m,y),m=[];for(var C=0;C<y.length;C++)m.push(G(y[C]));for(y=m.length-1;0<y;y--){C=m[y];for(var O=C.x,z=O+C.width,K=C.y,ye=K+C.height,Ae=y-1;0<=Ae;Ae--)if(y!==Ae){var Xe=m[Ae],ct=Xe.x,Ot=ct+Xe.width,dn=Xe.y,Zt=dn+Xe.height;if(O>=ct&&K>=dn&&z<=Ot&&ye<=Zt){m.splice(y,1);break}else if(O!==ct||C.width!==Xe.width||Zt<K||dn>ye){if(!(K!==dn||C.height!==Xe.height||Ot<O||ct>z)){ct>O&&(Xe.width+=ct-O,Xe.x=O),Ot<z&&(Xe.width=z-ct),m.splice(y,1);break}}else{dn>K&&(Xe.height+=dn-K,Xe.y=K),Zt<ye&&(Xe.height=ye-dn),m.splice(y,1);break}}}return m},n.findHostInstance=jw,n.findHostInstanceWithNoPortals=function(m){return m=P(m),m=m!==null?B(m):null,m===null?null:m.stateNode},n.findHostInstanceWithWarning=function(m){return jw(m)},n.flushControlled=function(m){var y=wn;wn|=1;var C=or.transition,O=An;try{or.transition=null,An=1,m()}finally{An=O,or.transition=C,wn=y,wn===0&&(_u(),No())}},n.flushPassiveEffects=Ga,n.flushSync=qd,n.focusWithin=function(m,y){if(!fe)throw Error(o(363));for(m=Mh(m),y=lo(m,y),y=Array.from(y),m=0;m<y.length;){var C=y[m++];if(!he(C)){if(C.tag===5&&Oe(C.stateNode))return!0;for(C=C.child;C!==null;)y.push(C),C=C.sibling}}return!1},n.getCurrentUpdatePriority=function(){return An},n.getFindAllNodesFailureDescription=function(m,y){if(!fe)throw Error(o(363));var C=0,O=[];m=[Mh(m),0];for(var z=0;z<m.length;){var K=m[z++],ye=m[z++],Ae=y[ye];if((K.tag!==5||!he(K))&&(Th(K,Ae)&&(O.push(yc(Ae)),ye++,ye>C&&(C=ye)),ye<y.length))for(K=K.child;K!==null;)m.push(K,ye),K=K.sibling}if(C<y.length){for(m=[];C<y.length;C++)m.push(yc(y[C]));return`findAllNodes was able to match part of the selector:
  `+(O.join(" > ")+`

No matching component was found for:
  `)+m.join(" > ")}return null},n.getPublicRootInstance=function(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return q(m.child.stateNode);default:return m.child.stateNode}},n.injectIntoDevTools=function(m){if(m={bundleType:m.bundleType,version:m.version,rendererPackageName:m.rendererPackageName,rendererConfig:m.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:ng,findFiberByHostInstance:m.findFiberByHostInstance||Uw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")m=!1;else{var y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(y.isDisabled||!y.supportsFiber)m=!0;else{try{rh=y.inject(m),za=y}catch{}m=!!y.checkDCE}}return m},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(m,y,C,O){if(!fe)throw Error(o(363));m=Tl(m,y);var z=Qe(m,C,O).disconnect;return{disconnect:function(){z()}}},n.registerMutableSourceForHydration=function(m,y){var C=y._getVersion;C=C(y._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[y,C]:m.mutableSourceEagerHydrationData.push(y,C)},n.runWithPriority=function(m,y){var C=An;try{return An=m,y()}finally{An=C}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(m,y,C,O){var z=y.current,K=Gn(),ye=ma(z);return C=Bw(C),y.context===null?y.context=C:y.pendingContext=C,y=pl(K,ye),y.payload={element:m},O=O===void 0?null:O,O!==null&&(y.callback=O),cc(z,y),m=ss(z,ye,K),m!==null&&xm(m,z,ye),ye},n}),tN}var dz;function nwe(){return dz||(dz=1,JA.exports=twe()),JA.exports}var rwe=nwe();const iwe=Co(rwe);var fz=z6();const pO={},swe=t=>void Object.assign(pO,t);function owe(t,e){function n(u,{args:f=[],attach:p,...g},x){let S=`${u[0].toUpperCase()}${u.slice(1)}`,_;if(u==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const b=g.object;_=zg(b,{type:u,root:x,attach:p,primitive:!0})}else{const b=pO[S];if(!b)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");_=zg(new b(...f),{type:u,root:x,attach:p,memoizedProps:{args:f}})}return _.__r3f.attach===void 0&&(_.isBufferGeometry?_.__r3f.attach="geometry":_.isMaterial&&(_.__r3f.attach="material")),S!=="inject"&&iN(_,g),_}function r(u,f){let p=!1;if(f){var g,x;(g=f.__r3f)!=null&&g.attach?rN(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),p=!0),p||(x=u.__r3f)==null||x.objects.push(f),f.__r3f||zg(f,{}),f.__r3f.parent=u,YP(f),Vg(f)}}function i(u,f,p){let g=!1;if(f){var x,S;if((x=f.__r3f)!=null&&x.attach)rN(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:f});const _=u.children.filter(E=>E!==f),b=_.indexOf(p);u.children=[..._.slice(0,b),f,..._.slice(b)],g=!0}g||(S=u.__r3f)==null||S.objects.push(f),f.__r3f||zg(f,{}),f.__r3f.parent=u,YP(f),Vg(f)}}function s(u,f,p=!1){u&&[...u].forEach(g=>o(f,g,p))}function o(u,f,p){if(f){var g,x,S;if(f.__r3f&&(f.__r3f.parent=null),(g=u.__r3f)!=null&&g.objects&&(u.__r3f.objects=u.__r3f.objects.filter(T=>T!==f)),(x=f.__r3f)!=null&&x.attach)yz(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var _;u.remove(f),(_=f.__r3f)!=null&&_.root&&hwe(r1(f),f)}const E=(S=f.__r3f)==null?void 0:S.primitive,M=!E&&(p===void 0?f.dispose!==null:p);if(!E){var b;s((b=f.__r3f)==null?void 0:b.objects,f,M),s(f.children,f,M)}if(delete f.__r3f,M&&f.dispose&&f.type!=="Scene"){const T=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?fz.unstable_scheduleCallback(fz.unstable_IdlePriority,T):T()}Vg(u)}}function a(u,f,p,g){var x;const S=(x=u.__r3f)==null?void 0:x.parent;if(!S)return;const _=n(f,p,u.__r3f.root);if(u.children){for(const b of u.children)b.__r3f&&r(_,b);u.children=u.children.filter(b=>!b.__r3f)}u.__r3f.objects.forEach(b=>r(_,b)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(S,u),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),r(S,_),_.raycast&&_.__r3f.eventCount&&r1(_).getState().internal.interaction.push(_),[g,g.alternate].forEach(b=>{b!==null&&(b.stateNode=_,b.ref&&(typeof b.ref=="function"?b.ref(_):b.ref.current=_))})}const l=()=>{};return{reconciler:iwe({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,r(p,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,p)=>{if(!f||!p)return;const g=u.getState().scene;g.__r3f&&i(g,f,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u?.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,p,g){var x;if(((x=u?.__r3f)!=null?x:{}).primitive&&g.object&&g.object!==u)return[!0];{const{args:_=[],children:b,...E}=g,{args:M=[],children:T,...k}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((D,L)=>D!==M[L]))return[!0];const N=X6(u,E,k,!0);return N.changes.length?[!1,N]:null}},commitUpdate(u,[f,p],g,x,S,_){f?a(u,g,S,_):iN(u,p)},commitMount(u,f,p,g){var x;const S=(x=u.__r3f)!=null?x:{};u.raycast&&S.handlers&&S.eventCount&&r1(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>zg(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:p,parent:g}=(f=u.__r3f)!=null?f:{};p&&g&&yz(g,u,p),u.isObject3D&&(u.visible=!1),Vg(u)},unhideInstance(u,f){var p;const{attach:g,parent:x}=(p=u.__r3f)!=null?p:{};g&&x&&rN(x,u,g),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),Vg(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():ny.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Fr.fun(performance.now)?performance.now:Fr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Fr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Fr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:iN}}var hz,pz;const nN=t=>"colorSpace"in t||"outputColorSpace"in t,V6=()=>{var t;return(t=pO.ColorManagement)!=null?t:null},W6=t=>t&&t.isOrthographicCamera,awe=t=>t&&t.hasOwnProperty("current"),ow=typeof window<"u"&&((hz=window.document)!=null&&hz.createElement||((pz=window.navigator)==null?void 0:pz.product)==="ReactNative")?X.useLayoutEffect:X.useEffect;function q6(t){const e=X.useRef(t);return ow(()=>void(e.current=t),[t]),e}function lwe({set:t}){return ow(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class H6 extends X.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}H6.getDerivedStateFromError=()=>({error:!0});const $6="__default",mz=new Map,cwe=t=>t&&!!t.memoized&&!!t.changes;function G6(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Ex=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function r1(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Fr={obj:t=>t===Object(t)&&!Fr.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Fr.str(t)||Fr.num(t)||Fr.boo(t))return t===e;const s=Fr.obj(t);if(s&&r==="reference")return t===e;const o=Fr.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!Fr.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(Fr.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function uwe(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function zg(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function KP(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const gz=/-\d+$/;function rN(t,e,n){if(Fr.str(n)){if(gz.test(n)){const s=n.replace(gz,""),{target:o,key:a}=KP(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=KP(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function yz(t,e,n){var r,i;if(Fr.str(n)){const{target:s,key:o}=KP(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function X6(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){const u=t.__r3f,f=Object.entries(i),p=[];if(c){const x=Object.keys(l);for(let S=0;S<x.length;S++)i.hasOwnProperty(x[S])||f.unshift([x[S],$6+"remove"])}f.forEach(([x,S])=>{var _;if((_=t.__r3f)!=null&&_.primitive&&x==="object"||Fr.equ(S,l[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return p.push([x,S,!0,[]]);let b=[];x.includes("-")&&(b=x.split("-")),p.push([x,S,!1,b]);for(const E in i){const M=i[E];E.startsWith(`${x}-`)&&p.push([E,M,!1,E.split("-")])}});const g={...i};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(g.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(g.attach=u.memoizedProps.attach),{memoized:g,changes:p}}function iN(t,e){var n;const r=t.__r3f,i=r?.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=cwe(e)?e:X6(t,e),l=r?.eventCount;t.__r3f&&(t.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[g,x,S,_]=a[p];if(nN(t)){const T="srgb",k="srgb-linear";g==="encoding"?(g="colorSpace",x=x===3001?T:k):g==="outputEncoding"&&(g="outputColorSpace",x=x===3001?T:k)}let b=t,E=b[g];if(_.length&&(E=_.reduce((M,T)=>M[T],t),!(E&&E.set))){const[M,...T]=_.reverse();b=T.reverse().reduce((k,N)=>k[N],t),g=M}if(x===$6+"remove")if(b.constructor){let M=mz.get(b.constructor);M||(M=new b.constructor,mz.set(b.constructor,M)),x=M[g]}else x=0;if(S&&r)x?r.handlers[g]=x:delete r.handlers[g],r.eventCount=Object.keys(r.handlers).length;else if(E&&E.set&&(E.copy||E instanceof kp)){if(Array.isArray(x))E.fromArray?E.fromArray(x):E.set(...x);else if(E.copy&&x&&x.constructor&&E.constructor===x.constructor)E.copy(x);else if(x!==void 0){var c;const M=(c=E)==null?void 0:c.isColor;!M&&E.setScalar?E.setScalar(x):E instanceof kp&&x instanceof kp?E.mask=x.mask:E.set(x),!V6()&&s&&!s.linear&&M&&E.convertSRGBToLinear()}}else{var u;if(b[g]=x,(u=b[g])!=null&&u.isTexture&&b[g].format===qs&&b[g].type===Ql&&s){const M=b[g];nN(M)&&nN(s.gl)?M.colorSpace=s.gl.outputColorSpace:M.encoding=s.gl.outputEncoding}}Vg(t)}if(r&&r.parent&&t.raycast&&l!==r.eventCount){const p=r1(t).getState().internal,g=p.interaction.indexOf(t);g>-1&&p.interaction.splice(g,1),r.eventCount&&p.interaction.push(t)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(n=t.__r3f)!=null&&n.parent&&YP(t),t}function Vg(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function YP(t){t.onUpdate==null||t.onUpdate(t)}function dwe(t,e){t.manual||(W6(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function TS(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function fwe(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return ny.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ny.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ny.ContinuousEventPriority;default:return ny.DefaultEventPriority}}function K6(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function hwe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{K6(n.capturedMap,e,r,i)})}function pwe(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function r(l,c){const u=t.getState(),f=new Set,p=[],g=c?c(u.internal.interaction):u.internal.interaction;for(let b=0;b<g.length;b++){const E=Ex(g[b]);E&&(E.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function x(b){const E=Ex(b);if(!E||!E.events.enabled||E.raycaster.camera===null)return[];if(E.raycaster.camera===void 0){var M;E.events.compute==null||E.events.compute(l,E,(M=E.previousRoot)==null?void 0:M.getState()),E.raycaster.camera===void 0&&(E.raycaster.camera=null)}return E.raycaster.camera?E.raycaster.intersectObject(b,!0):[]}let S=g.flatMap(x).sort((b,E)=>{const M=Ex(b.object),T=Ex(E.object);return!M||!T?b.distance-E.distance:T.events.priority-M.events.priority||b.distance-E.distance}).filter(b=>{const E=TS(b);return f.has(E)?!1:(f.add(E),!0)});u.events.filter&&(S=u.events.filter(S,u));for(const b of S){let E=b.object;for(;E;){var _;(_=E.__r3f)!=null&&_.eventCount&&p.push({...b,eventObject:E}),E=E.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let b of u.internal.capturedMap.get(l.pointerId).values())f.has(TS(b.intersection))||p.push(b.intersection);return p}function i(l,c,u,f){const p=t.getState();if(l.length){const g={stopped:!1};for(const x of l){const S=Ex(x.object)||p,{raycaster:_,pointer:b,camera:E,internal:M}=S,T=new pe(b.x,b.y,0).unproject(E),k=A=>{var P,j;return(P=(j=M.capturedMap.get(A))==null?void 0:j.has(x.eventObject))!=null?P:!1},N=A=>{const P={intersection:x,target:c.target};M.capturedMap.has(A)?M.capturedMap.get(A).set(x.eventObject,P):M.capturedMap.set(A,new Map([[x.eventObject,P]])),c.target.setPointerCapture(A)},D=A=>{const P=M.capturedMap.get(A);P&&K6(M.capturedMap,x.eventObject,P,A)};let L={};for(let A in c){let P=c[A];typeof P!="function"&&(L[A]=P)}let R={...x,...L,pointer:b,intersections:l,stopped:g.stopped,delta:u,unprojectedPoint:T,ray:_.ray,camera:E,stopPropagation(){const A="pointerId"in c&&M.capturedMap.get(c.pointerId);if((!A||A.has(x.eventObject))&&(R.stopped=g.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(P=>P.eventObject===x.eventObject))){const P=l.slice(0,l.indexOf(x));s([...P,x])}},target:{hasPointerCapture:k,setPointerCapture:N,releasePointerCapture:D},currentTarget:{hasPointerCapture:k,setPointerCapture:N,releasePointerCapture:D},nativeEvent:c};if(f(R),g.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const p=u.eventObject.__r3f,g=p?.handlers;if(c.hovered.delete(TS(u)),p!=null&&p.eventCount){const x={...u,intersections:l};g.onPointerOut==null||g.onPointerOut(x),g.onPointerLeave==null||g.onPointerLeave(x)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:p}=t.getState();p.lastEvent.current=u;const g=l==="onPointerMove",x=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=r(u,g?n:void 0),b=x?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=_.map(M=>M.eventObject)),x&&!_.length&&b<=2&&(o(u,p.interaction),f&&f(u)),g&&s(_);function E(M){const T=M.eventObject,k=T.__r3f,N=k?.handlers;if(k!=null&&k.eventCount)if(g){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const D=TS(M),L=p.hovered.get(D);L?L.stopped&&M.stopPropagation():(p.hovered.set(D,M),N.onPointerOver==null||N.onPointerOver(M),N.onPointerEnter==null||N.onPointerEnter(M))}N.onPointerMove==null||N.onPointerMove(M)}else{const D=N[l];D?(!x||p.initialHits.includes(T))&&(o(u,p.interaction.filter(L=>!p.initialHits.includes(L))),D(M)):x&&p.initialHits.includes(T)&&o(u,p.interaction.filter(L=>!p.initialHits.includes(L)))}}i(_,u,b,E)}}return{handlePointer:a}}const Y6=t=>!!(t!=null&&t.render),Z6=X.createContext(null),mwe=(t,e)=>{const n=Qbe((a,l)=>{const c=new pe,u=new pe,f=new pe;function p(b=l().camera,E=u,M=l().size){const{width:T,height:k,top:N,left:D}=M,L=T/k;E.isVector3?f.copy(E):f.set(...E);const R=b.getWorldPosition(c).distanceTo(f);if(W6(b))return{width:T/b.zoom,height:k/b.zoom,top:N,left:D,factor:1,distance:R,aspect:L};{const A=b.fov*Math.PI/180,P=2*Math.tan(A/2)*R,j=P*(T/k);return{width:j,height:P,top:N,left:D,factor:T/j,distance:R,aspect:L}}}let g;const x=b=>a(E=>({performance:{...E.performance,current:b}})),S=new Je;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(b=1)=>t(l(),b),advance:(b,E)=>e(b,E,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new lO,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const b=l();g&&clearTimeout(g),b.performance.current!==b.performance.min&&x(b.performance.min),g=setTimeout(()=>x(l().performance.max),b.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:b=>a(E=>({...E,events:{...E.events,...b}})),setSize:(b,E,M,T,k)=>{const N=l().camera,D={width:b,height:E,top:T||0,left:k||0,updateStyle:M};a(L=>({size:D,viewport:{...L.viewport,...p(N,u,D)}}))},setDpr:b=>a(E=>{const M=G6(b);return{viewport:{...E.viewport,dpr:M,initialDpr:E.viewport.initialDpr||M}}}),setFrameloop:(b="always")=>{const E=l().clock;E.stop(),E.elapsedTime=0,b!=="never"&&(E.start(),E.elapsedTime=0),a(()=>({frameloop:b}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:X.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(b,E,M)=>{const T=l().internal;return T.priority=T.priority+(E>0?1:0),T.subscribers.push({ref:b,priority:E,store:M}),T.subscribers=T.subscribers.sort((k,N)=>k.priority-N.priority),()=>{const k=l().internal;k!=null&&k.subscribers&&(k.priority=k.priority-(E>0?1:0),k.subscribers=k.subscribers.filter(N=>N.ref!==b))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=n.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,dwe(a,l),u.setPixelRatio(c.dpr);const g=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,g)}a!==o&&(o=a,f(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};function J6(t,e){const n={callback:t};return e.add(n),()=>void e.delete(n)}let CS,Q6=new Set,e8=new Set,gwe=new Set;const ywe=t=>J6(t,Q6),vwe=t=>J6(t,e8);function sN(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function Mx(t,e){switch(t){case"before":return sN(Q6,e);case"after":return sN(e8,e);case"tail":return sN(gwe,e)}}let oN,aN;function lN(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),oN=e.internal.subscribers,CS=0;CS<oN.length;CS++)aN=oN[CS],aN.ref.current(aN.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function xwe(t){let e=!1,n=!1,r,i,s;function o(c){i=requestAnimationFrame(o),e=!0,r=0,Mx("before",c),n=!0;for(const f of t.values()){var u;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(r+=lN(c,s))}if(n=!1,Mx("after",c),r===0)return Mx("tail",c),e=!1,cancelAnimationFrame(i)}function a(c,u=1){var f;if(!c)return t.forEach(p=>a(p.store.getState(),u));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):n?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,f,p){if(u&&Mx("before",c),f)lN(c,f,p);else for(const g of t.values())lN(c,g.store.getState());u&&Mx("after",c)}return{loop:o,invalidate:a,advance:l}}function t8(){const t=X.useContext(Z6);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Sc(t=n=>n,e){return t8()(t,e)}function bwe(t,e=0){const n=t8(),r=n.getState().internal.subscribe,i=q6(t);return ow(()=>r(i,e,n),[e,r,n]),null}const Wy=new Map,{invalidate:vz,advance:xz}=xwe(Wy),{reconciler:pM,applyProps:Ng}=owe(Wy,fwe),Pg={objects:"shallow",strict:!1},wwe=(t,e)=>{const n=typeof t=="function"?t(e):t;return Y6(n)?n:new U6({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function _we(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=n}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function Swe(t){const e=Wy.get(t),n=e?.fiber,r=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||mwe(vz,xz),o=n||pM.createContainer(s,ny.ConcurrentRoot,null,!1,null,"",i,null);e||Wy.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:p,scene:g,events:x,onCreated:S,shadows:_=!1,linear:b=!1,flat:E=!1,legacy:M=!1,orthographic:T=!1,frameloop:k="always",dpr:N=[1,2],performance:D,raycaster:L,camera:R,onPointerMissed:A}=u,P=s.getState(),j=P.gl;P.gl||P.set({gl:j=wwe(f,t)});let U=P.raycaster;U||P.set({raycaster:U=new P6});const{params:B,...$}=L||{};if(Fr.equ($,U,Pg)||Ng(U,{...$}),Fr.equ(B,U.params,Pg)||Ng(U,{params:{...U.params,...B}}),!P.camera||P.camera===c&&!Fr.equ(c,R,Pg)){c=R;const J=R instanceof Jb,Y=J?R:T?new td(0,0,0,0,.1,1e3):new wi(75,0,.1,1e3);J||(Y.position.z=5,R&&(Ng(Y,R),("aspect"in R||"left"in R||"right"in R||"bottom"in R||"top"in R)&&(Y.manual=!0,Y.updateProjectionMatrix())),!P.camera&&!(R!=null&&R.rotation)&&Y.lookAt(0,0,0)),P.set({camera:Y}),U.camera=Y}if(!P.scene){let J;g!=null&&g.isScene?J=g:(J=new Vk,g&&Ng(J,g)),P.set({scene:zg(J)})}if(!P.xr){var q;const J=(ce,ie)=>{const ue=s.getState();ue.frameloop!=="never"&&xz(ce,!0,ue,ie)},Y=()=>{const ce=s.getState();ce.gl.xr.enabled=ce.gl.xr.isPresenting,ce.gl.xr.setAnimationLoop(ce.gl.xr.isPresenting?J:null),ce.gl.xr.isPresenting||vz(ce)},oe={connect(){const ce=s.getState().gl;ce.xr.addEventListener("sessionstart",Y),ce.xr.addEventListener("sessionend",Y)},disconnect(){const ce=s.getState().gl;ce.xr.removeEventListener("sessionstart",Y),ce.xr.removeEventListener("sessionend",Y)}};typeof((q=j.xr)==null?void 0:q.addEventListener)=="function"&&oe.connect(),P.set({xr:oe})}if(j.shadowMap){const J=j.shadowMap.enabled,Y=j.shadowMap.type;if(j.shadowMap.enabled=!!_,Fr.boo(_))j.shadowMap.type=o0;else if(Fr.str(_)){var te;const oe={basic:VH,percentage:fT,soft:o0,variance:Bl};j.shadowMap.type=(te=oe[_])!=null?te:o0}else Fr.obj(_)&&Object.assign(j.shadowMap,_);(J!==j.shadowMap.enabled||Y!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}const W=V6();W&&("enabled"in W?W.enabled=!M:"legacyMode"in W&&(W.legacyMode=M)),l||Ng(j,{outputEncoding:b?3e3:3001,toneMapping:E?Lc:hT}),P.legacy!==M&&P.set(()=>({legacy:M})),P.linear!==b&&P.set(()=>({linear:b})),P.flat!==E&&P.set(()=>({flat:E})),f&&!Fr.fun(f)&&!Y6(f)&&!Fr.equ(f,j,Pg)&&Ng(j,f),x&&!P.events.handlers&&P.set({events:x(s)});const Z=_we(t,p);return Fr.equ(Z,P.size,Pg)||P.setSize(Z.width,Z.height,Z.updateStyle,Z.top,Z.left),N&&P.viewport.dpr!==G6(N)&&P.setDpr(N),P.frameloop!==k&&P.setFrameloop(k),P.onPointerMissed||P.set({onPointerMissed:A}),D&&!Fr.equ(D,P.performance,Pg)&&P.set(J=>({performance:{...J.performance,...D}})),a=S,l=!0,this},render(u){return l||this.configure(),pM.updateContainer(v.jsx(Ewe,{store:s,children:u,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){n8(t)}}}function Ewe({store:t,children:e,onCreated:n,rootElement:r}){return ow(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),v.jsx(Z6.Provider,{value:t,children:e})}function n8(t,e){const n=Wy.get(t),r=n?.fiber;if(r){const i=n?.store.getState();i&&(i.internal.active=!1),pM.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),uwe(i),Wy.delete(t)}catch{}},500)})}}pM.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:X.version});const cN={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Mwe(t){const{handlePointer:e}=pwe(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(cN).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=cN[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=cN[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}function bz(t,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function Twe({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=X.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=X.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,u=X.useRef(!1);X.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[f,p,g]=X.useMemo(()=>{const b=()=>{if(!a.current.element)return;const{left:E,top:M,width:T,height:k,bottom:N,right:D,x:L,y:R}=a.current.element.getBoundingClientRect(),A={left:E,top:M,width:T,height:k,bottom:N,right:D,x:L,y:R};a.current.element instanceof HTMLElement&&r&&(A.height=a.current.element.offsetHeight,A.width=a.current.element.offsetWidth),Object.freeze(A),u.current&&!Awe(a.current.lastBounds,A)&&o(a.current.lastBounds=A)};return[b,c?bz(b,c):b,l?bz(b,l):b]},[o,r,l,c]);function x(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(b=>b.removeEventListener("scroll",g,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function S(){a.current.element&&(a.current.resizeObserver=new i(g),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(b=>b.addEventListener("scroll",g,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const _=b=>{!b||b===a.current.element||(x(),a.current.element=b,a.current.scrollContainers=r8(b),S())};return Iwe(g,!!e),Cwe(p),X.useEffect(()=>{x(),S()},[e,g,p]),X.useEffect(()=>x,[]),[_,s,f]}function Cwe(t){X.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function Iwe(t,e){X.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function r8(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...r8(t.parentElement)]}const Rwe=["x","y","top","bottom","left","right","width","height"],Awe=(t,e)=>Rwe.every(n=>t[n]===e[n]);var Nwe=Object.defineProperty,Pwe=Object.defineProperties,kwe=Object.getOwnPropertyDescriptors,wz=Object.getOwnPropertySymbols,Owe=Object.prototype.hasOwnProperty,Lwe=Object.prototype.propertyIsEnumerable,_z=(t,e,n)=>e in t?Nwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sz=(t,e)=>{for(var n in e||(e={}))Owe.call(e,n)&&_z(t,n,e[n]);if(wz)for(var n of wz(e))Lwe.call(e,n)&&_z(t,n,e[n]);return t},Dwe=(t,e)=>Pwe(t,kwe(e)),Ez,Mz;typeof window<"u"&&((Ez=window.document)!=null&&Ez.createElement||((Mz=window.navigator)==null?void 0:Mz.product)==="ReactNative")?X.useLayoutEffect:X.useEffect;function i8(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const i=i8(r,e,n);if(i)return i;r=r.sibling}}function s8(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const Tz=console.error;console.error=function(){const t=[...arguments].join("");if(t?.startsWith("Warning:")&&t.includes("useContext")){console.error=Tz;return}return Tz.apply(this,arguments)};const mO=s8(X.createContext(null));class o8 extends X.Component{render(){return X.createElement(mO.Provider,{value:this._reactInternals},this.props.children)}}function Fwe(){const t=X.useContext(mO);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=X.useId();return X.useMemo(()=>{for(const r of[t,t?.alternate]){if(!r)continue;const i=i8(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function Bwe(){const t=Fwe(),[e]=X.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==mO&&!e.has(i)&&e.set(i,X.useContext(s8(i)))}n=n.return}return e}function jwe(){const t=Bwe();return X.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>X.createElement(e,null,X.createElement(n.Provider,Dwe(Sz({},r),{value:t.get(n)}))),e=>X.createElement(o8,Sz({},e))),[t])}const Uwe=X.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=Mwe,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:p,orthographic:g,frameloop:x,dpr:S,performance:_,raycaster:b,camera:E,scene:M,onPointerMissed:T,onCreated:k,...N},D){X.useMemo(()=>swe(Xbe),[]);const L=jwe(),[R,A]=Twe({scroll:!0,debounce:{scroll:50,resize:0},...r}),P=X.useRef(null),j=X.useRef(null);X.useImperativeHandle(D,()=>P.current);const U=q6(T),[B,$]=X.useState(!1),[q,te]=X.useState(!1);if(B)throw B;if(q)throw q;const W=X.useRef(null);ow(()=>{const J=P.current;A.width>0&&A.height>0&&J&&(W.current||(W.current=Swe(J)),W.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:p,orthographic:g,frameloop:x,dpr:S,performance:_,raycaster:b,camera:E,scene:M,size:A,onPointerMissed:(...Y)=>U.current==null?void 0:U.current(...Y),onCreated:Y=>{Y.events.connect==null||Y.events.connect(a?awe(a)?a.current:a:j.current),l&&Y.setEvents({compute:(oe,ce)=>{const ie=oe[l+"X"],ue=oe[l+"Y"];ce.pointer.set(ie/ce.size.width*2-1,-(ue/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera)}}),k?.(Y)}}),W.current.render(v.jsx(L,{children:v.jsx(H6,{set:te,children:v.jsx(X.Suspense,{fallback:v.jsx(lwe,{set:$}),children:e})})})))}),X.useEffect(()=>{const J=P.current;if(J)return()=>n8(J)},[]);const Z=a?"none":"auto";return v.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Z,...i},...N,children:v.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:v.jsx("canvas",{ref:P,style:{display:"block"},children:n})})})}),zwe=X.forwardRef(function(e,n){return v.jsx(o8,{children:v.jsx(Uwe,{...e,ref:n})})});var Vwe=Object.defineProperty,Wwe=(t,e,n)=>e in t?Vwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qwe=(t,e,n)=>(Wwe(t,e+"",n),n);class Hwe{constructor(){qwe(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var $we=Object.defineProperty,Gwe=(t,e,n)=>e in t?$we(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nn=(t,e,n)=>(Gwe(t,typeof e!="symbol"?e+"":e,n),n);const IS=new om,Cz=new qu,Xwe=Math.cos(70*(Math.PI/180)),Iz=(t,e)=>(t%e+e)%e;let Kwe=class extends Hwe{constructor(e,n){super(),nn(this,"object"),nn(this,"domElement"),nn(this,"enabled",!0),nn(this,"target",new pe),nn(this,"minDistance",0),nn(this,"maxDistance",1/0),nn(this,"minZoom",0),nn(this,"maxZoom",1/0),nn(this,"minPolarAngle",0),nn(this,"maxPolarAngle",Math.PI),nn(this,"minAzimuthAngle",-1/0),nn(this,"maxAzimuthAngle",1/0),nn(this,"enableDamping",!1),nn(this,"dampingFactor",.05),nn(this,"enableZoom",!0),nn(this,"zoomSpeed",1),nn(this,"enableRotate",!0),nn(this,"rotateSpeed",1),nn(this,"enablePan",!0),nn(this,"panSpeed",1),nn(this,"screenSpacePanning",!0),nn(this,"keyPanSpeed",7),nn(this,"zoomToCursor",!1),nn(this,"autoRotate",!1),nn(this,"autoRotateSpeed",2),nn(this,"reverseOrbit",!1),nn(this,"reverseHorizontalOrbit",!1),nn(this,"reverseVerticalOrbit",!1),nn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),nn(this,"mouseButtons",{LEFT:Wu.ROTATE,MIDDLE:Wu.DOLLY,RIGHT:Wu.PAN}),nn(this,"touches",{ONE:lp.ROTATE,TWO:lp.DOLLY_PAN}),nn(this,"target0"),nn(this,"position0"),nn(this,"zoom0"),nn(this,"_domElementKeyEvents",null),nn(this,"getPolarAngle"),nn(this,"getAzimuthalAngle"),nn(this,"setPolarAngle"),nn(this,"setAzimuthalAngle"),nn(this,"getDistance"),nn(this,"getZoomScale"),nn(this,"listenToKeyEvents"),nn(this,"stopListenToKeyEvents"),nn(this,"saveState"),nn(this,"reset"),nn(this,"update"),nn(this,"connect"),nn(this,"dispose"),nn(this,"dollyIn"),nn(this,"dollyOut"),nn(this,"getScale"),nn(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=Ee=>{let He=Iz(Ee,2*Math.PI),ft=u.phi;ft<0&&(ft+=2*Math.PI),He<0&&(He+=2*Math.PI);let Se=Math.abs(He-ft);2*Math.PI-Se<Se&&(He<ft?He+=2*Math.PI:ft+=2*Math.PI),f.phi=He-ft,r.update()},this.setAzimuthalAngle=Ee=>{let He=Iz(Ee,2*Math.PI),ft=u.theta;ft<0&&(ft+=2*Math.PI),He<0&&(He+=2*Math.PI);let Se=Math.abs(He-ft);2*Math.PI-Se<Se&&(He<ft?He+=2*Math.PI:ft+=2*Math.PI),f.theta=He-ft,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Ee=>{Ee.addEventListener("keydown",Ye),this._domElementKeyEvents=Ee},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ye),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Ee=new pe,He=new pe(0,1,0),ft=new Gs().setFromUnitVectors(e.up,He),Se=ft.clone().invert(),nt=new pe,Ve=new Gs,Ke=2*Math.PI;return function(){const pt=r.object.position;ft.setFromUnitVectors(e.up,He),Se.copy(ft).invert(),Ee.copy(pt).sub(r.target),Ee.applyQuaternion(ft),u.setFromVector3(Ee),r.autoRotate&&l===a.NONE&&B(j()),r.enableDamping?(u.theta+=f.theta*r.dampingFactor,u.phi+=f.phi*r.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let Xt=r.minAzimuthAngle,Dn=r.maxAzimuthAngle;isFinite(Xt)&&isFinite(Dn)&&(Xt<-Math.PI?Xt+=Ke:Xt>Math.PI&&(Xt-=Ke),Dn<-Math.PI?Dn+=Ke:Dn>Math.PI&&(Dn-=Ke),Xt<=Dn?u.theta=Math.max(Xt,Math.min(Dn,u.theta)):u.theta=u.theta>(Xt+Dn)/2?Math.max(Xt,u.theta):Math.min(Dn,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(g,r.dampingFactor):r.target.add(g),r.zoomToCursor&&R||r.object.isOrthographicCamera?u.radius=ce(u.radius):u.radius=ce(u.radius*p),Ee.setFromSpherical(u),Ee.applyQuaternion(Se),pt.copy(r.target).add(Ee),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,g.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),g.set(0,0,0));let sr=!1;if(r.zoomToCursor&&R){let yn=null;if(r.object instanceof wi&&r.object.isPerspectiveCamera){const Or=Ee.length();yn=ce(Or*p);const jr=Or-yn;r.object.position.addScaledVector(D,jr),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Or=new pe(L.x,L.y,0);Or.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),sr=!0;const jr=new pe(L.x,L.y,0);jr.unproject(r.object),r.object.position.sub(jr).add(Or),r.object.updateMatrixWorld(),yn=Ee.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;yn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(yn).add(r.object.position):(IS.origin.copy(r.object.position),IS.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(IS.direction))<Xwe?e.lookAt(r.target):(Cz.setFromNormalAndCoplanarPoint(r.object.up,r.target),IS.intersectPlane(Cz,r.target))))}else r.object instanceof td&&r.object.isOrthographicCamera&&(sr=p!==1,sr&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix()));return p=1,R=!1,sr||nt.distanceToSquared(r.object.position)>c||8*(1-Ve.dot(r.object.quaternion))>c?(r.dispatchEvent(i),nt.copy(r.object.position),Ve.copy(r.object.quaternion),sr=!1,!0):!1}})(),this.connect=Ee=>{r.domElement=Ee,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",et),r.domElement.addEventListener("pointerdown",G),r.domElement.addEventListener("pointercancel",he),r.domElement.addEventListener("wheel",Qe)},this.dispose=()=>{var Ee,He,ft,Se,nt,Ve;r.domElement&&(r.domElement.style.touchAction="auto"),(Ee=r.domElement)==null||Ee.removeEventListener("contextmenu",et),(He=r.domElement)==null||He.removeEventListener("pointerdown",G),(ft=r.domElement)==null||ft.removeEventListener("pointercancel",he),(Se=r.domElement)==null||Se.removeEventListener("wheel",Qe),(nt=r.domElement)==null||nt.ownerDocument.removeEventListener("pointermove",me),(Ve=r.domElement)==null||Ve.ownerDocument.removeEventListener("pointerup",he),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ye)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new HP,f=new HP;let p=1;const g=new pe,x=new Je,S=new Je,_=new Je,b=new Je,E=new Je,M=new Je,T=new Je,k=new Je,N=new Je,D=new pe,L=new Je;let R=!1;const A=[],P={};function j(){return 2*Math.PI/60/60*r.autoRotateSpeed}function U(){return Math.pow(.95,r.zoomSpeed)}function B(Ee){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=Ee:f.theta-=Ee}function $(Ee){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=Ee:f.phi-=Ee}const q=(()=>{const Ee=new pe;return function(ft,Se){Ee.setFromMatrixColumn(Se,0),Ee.multiplyScalar(-ft),g.add(Ee)}})(),te=(()=>{const Ee=new pe;return function(ft,Se){r.screenSpacePanning===!0?Ee.setFromMatrixColumn(Se,1):(Ee.setFromMatrixColumn(Se,0),Ee.crossVectors(r.object.up,Ee)),Ee.multiplyScalar(ft),g.add(Ee)}})(),W=(()=>{const Ee=new pe;return function(ft,Se){const nt=r.domElement;if(nt&&r.object instanceof wi&&r.object.isPerspectiveCamera){const Ve=r.object.position;Ee.copy(Ve).sub(r.target);let Ke=Ee.length();Ke*=Math.tan(r.object.fov/2*Math.PI/180),q(2*ft*Ke/nt.clientHeight,r.object.matrix),te(2*Se*Ke/nt.clientHeight,r.object.matrix)}else nt&&r.object instanceof td&&r.object.isOrthographicCamera?(q(ft*(r.object.right-r.object.left)/r.object.zoom/nt.clientWidth,r.object.matrix),te(Se*(r.object.top-r.object.bottom)/r.object.zoom/nt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function Z(Ee){r.object instanceof wi&&r.object.isPerspectiveCamera||r.object instanceof td&&r.object.isOrthographicCamera?p=Ee:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function J(Ee){Z(p/Ee)}function Y(Ee){Z(p*Ee)}function oe(Ee){if(!r.zoomToCursor||!r.domElement)return;R=!0;const He=r.domElement.getBoundingClientRect(),ft=Ee.clientX-He.left,Se=Ee.clientY-He.top,nt=He.width,Ve=He.height;L.x=ft/nt*2-1,L.y=-(Se/Ve)*2+1,D.set(L.x,L.y,1).unproject(r.object).sub(r.object.position).normalize()}function ce(Ee){return Math.max(r.minDistance,Math.min(r.maxDistance,Ee))}function ie(Ee){x.set(Ee.clientX,Ee.clientY)}function ue(Ee){oe(Ee),T.set(Ee.clientX,Ee.clientY)}function de(Ee){b.set(Ee.clientX,Ee.clientY)}function be(Ee){S.set(Ee.clientX,Ee.clientY),_.subVectors(S,x).multiplyScalar(r.rotateSpeed);const He=r.domElement;He&&(B(2*Math.PI*_.x/He.clientHeight),$(2*Math.PI*_.y/He.clientHeight)),x.copy(S),r.update()}function we(Ee){k.set(Ee.clientX,Ee.clientY),N.subVectors(k,T),N.y>0?J(U()):N.y<0&&Y(U()),T.copy(k),r.update()}function Ce(Ee){E.set(Ee.clientX,Ee.clientY),M.subVectors(E,b).multiplyScalar(r.panSpeed),W(M.x,M.y),b.copy(E),r.update()}function Ie(Ee){oe(Ee),Ee.deltaY<0?Y(U()):Ee.deltaY>0&&J(U()),r.update()}function Fe(Ee){let He=!1;switch(Ee.code){case r.keys.UP:W(0,r.keyPanSpeed),He=!0;break;case r.keys.BOTTOM:W(0,-r.keyPanSpeed),He=!0;break;case r.keys.LEFT:W(r.keyPanSpeed,0),He=!0;break;case r.keys.RIGHT:W(-r.keyPanSpeed,0),He=!0;break}He&&(Ee.preventDefault(),r.update())}function ve(){if(A.length==1)x.set(A[0].pageX,A[0].pageY);else{const Ee=.5*(A[0].pageX+A[1].pageX),He=.5*(A[0].pageY+A[1].pageY);x.set(Ee,He)}}function _e(){if(A.length==1)b.set(A[0].pageX,A[0].pageY);else{const Ee=.5*(A[0].pageX+A[1].pageX),He=.5*(A[0].pageY+A[1].pageY);b.set(Ee,He)}}function se(){const Ee=A[0].pageX-A[1].pageX,He=A[0].pageY-A[1].pageY,ft=Math.sqrt(Ee*Ee+He*He);T.set(0,ft)}function $e(){r.enableZoom&&se(),r.enablePan&&_e()}function je(){r.enableZoom&&se(),r.enableRotate&&ve()}function Ze(Ee){if(A.length==1)S.set(Ee.pageX,Ee.pageY);else{const ft=dt(Ee),Se=.5*(Ee.pageX+ft.x),nt=.5*(Ee.pageY+ft.y);S.set(Se,nt)}_.subVectors(S,x).multiplyScalar(r.rotateSpeed);const He=r.domElement;He&&(B(2*Math.PI*_.x/He.clientHeight),$(2*Math.PI*_.y/He.clientHeight)),x.copy(S)}function le(Ee){if(A.length==1)E.set(Ee.pageX,Ee.pageY);else{const He=dt(Ee),ft=.5*(Ee.pageX+He.x),Se=.5*(Ee.pageY+He.y);E.set(ft,Se)}M.subVectors(E,b).multiplyScalar(r.panSpeed),W(M.x,M.y),b.copy(E)}function ge(Ee){const He=dt(Ee),ft=Ee.pageX-He.x,Se=Ee.pageY-He.y,nt=Math.sqrt(ft*ft+Se*Se);k.set(0,nt),N.set(0,Math.pow(k.y/T.y,r.zoomSpeed)),J(N.y),T.copy(k)}function fe(Ee){r.enableZoom&&ge(Ee),r.enablePan&&le(Ee)}function Q(Ee){r.enableZoom&&ge(Ee),r.enableRotate&&Ze(Ee)}function G(Ee){var He,ft;r.enabled!==!1&&(A.length===0&&((He=r.domElement)==null||He.ownerDocument.addEventListener("pointermove",me),(ft=r.domElement)==null||ft.ownerDocument.addEventListener("pointerup",he)),gt(Ee),Ee.pointerType==="touch"?at(Ee):Te(Ee))}function me(Ee){r.enabled!==!1&&(Ee.pointerType==="touch"?Ft(Ee):Oe(Ee))}function he(Ee){var He,ft,Se;kt(Ee),A.length===0&&((He=r.domElement)==null||He.releasePointerCapture(Ee.pointerId),(ft=r.domElement)==null||ft.ownerDocument.removeEventListener("pointermove",me),(Se=r.domElement)==null||Se.ownerDocument.removeEventListener("pointerup",he)),r.dispatchEvent(o),l=a.NONE}function Te(Ee){let He;switch(Ee.button){case 0:He=r.mouseButtons.LEFT;break;case 1:He=r.mouseButtons.MIDDLE;break;case 2:He=r.mouseButtons.RIGHT;break;default:He=-1}switch(He){case Wu.DOLLY:if(r.enableZoom===!1)return;ue(Ee),l=a.DOLLY;break;case Wu.ROTATE:if(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey){if(r.enablePan===!1)return;de(Ee),l=a.PAN}else{if(r.enableRotate===!1)return;ie(Ee),l=a.ROTATE}break;case Wu.PAN:if(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey){if(r.enableRotate===!1)return;ie(Ee),l=a.ROTATE}else{if(r.enablePan===!1)return;de(Ee),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Oe(Ee){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;be(Ee);break;case a.DOLLY:if(r.enableZoom===!1)return;we(Ee);break;case a.PAN:if(r.enablePan===!1)return;Ce(Ee);break}}function Qe(Ee){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Ee.preventDefault(),r.dispatchEvent(s),Ie(Ee),r.dispatchEvent(o))}function Ye(Ee){r.enabled===!1||r.enablePan===!1||Fe(Ee)}function at(Ee){switch(Bt(Ee),A.length){case 1:switch(r.touches.ONE){case lp.ROTATE:if(r.enableRotate===!1)return;ve(),l=a.TOUCH_ROTATE;break;case lp.PAN:if(r.enablePan===!1)return;_e(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case lp.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;$e(),l=a.TOUCH_DOLLY_PAN;break;case lp.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;je(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Ft(Ee){switch(Bt(Ee),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ze(Ee),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;le(Ee),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;fe(Ee),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Q(Ee),r.update();break;default:l=a.NONE}}function et(Ee){r.enabled!==!1&&Ee.preventDefault()}function gt(Ee){A.push(Ee)}function kt(Ee){delete P[Ee.pointerId];for(let He=0;He<A.length;He++)if(A[He].pointerId==Ee.pointerId){A.splice(He,1);return}}function Bt(Ee){let He=P[Ee.pointerId];He===void 0&&(He=new Je,P[Ee.pointerId]=He),He.set(Ee.pageX,Ee.pageY)}function dt(Ee){const He=Ee.pointerId===A[0].pointerId?A[1]:A[0];return P[He.pointerId]}this.dollyIn=(Ee=U())=>{Y(Ee),r.update()},this.dollyOut=(Ee=U())=>{J(Ee),r.update()},this.getScale=()=>p,this.setScale=Ee=>{Z(Ee),r.update()},this.getZoomScale=()=>U(),n!==void 0&&this.connect(n),this.update()}};const Ywe=X.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const f=Sc(N=>N.invalidate),p=Sc(N=>N.camera),g=Sc(N=>N.gl),x=Sc(N=>N.events),S=Sc(N=>N.setEvents),_=Sc(N=>N.set),b=Sc(N=>N.get),E=Sc(N=>N.performance),M=e||p,T=r||x.connected||g.domElement,k=X.useMemo(()=>new Kwe(M),[M]);return bwe(()=>{k.enabled&&k.update()},-1),X.useEffect(()=>(s&&k.connect(s===!0?T:s),k.connect(T),()=>void k.dispose()),[s,T,n,k,f]),X.useEffect(()=>{const N=R=>{f(),n&&E.regress(),o&&o(R)},D=R=>{a&&a(R)},L=R=>{l&&l(R)};return k.addEventListener("change",N),k.addEventListener("start",D),k.addEventListener("end",L),()=>{k.removeEventListener("start",D),k.removeEventListener("end",L),k.removeEventListener("change",N)}},[o,a,l,k,f,S]),X.useEffect(()=>{if(t){const N=b().controls;return _({controls:k}),()=>_({controls:N})}},[t,k]),X.createElement("primitive",NP({ref:u,object:k,enableDamping:i},c))});var i1={exports:{}},Zwe=i1.exports,Rz;function Jwe(){return Rz||(Rz=1,function(t,e){(function(n,r){t.exports=r()})(Zwe,function(){var n=function(){function r(g){return o.appendChild(g.dom),g}function i(g){for(var x=0;x<o.children.length;x++)o.children[x].style.display=x===g?"block":"none";s=g}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(g){g.preventDefault(),i(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,u=r(new n.Panel("FPS","#0ff","#002")),f=r(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var p=r(new n.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:r,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){c++;var g=(performance||Date).now();if(f.update(g-a,200),g>l+1e3&&(u.update(1e3*c/(g-l),100),l=g,c=0,p)){var x=performance.memory;p.update(x.usedJSHeapSize/1048576,x.jsHeapSizeLimit/1048576)}return g},update:function(){a=this.end()},domElement:o,setMode:i}};return n.Panel=function(r,i,s){var o=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,f=48*c,p=3*c,g=2*c,x=3*c,S=15*c,_=74*c,b=30*c,E=document.createElement("canvas");E.width=u,E.height=f,E.style.cssText="width:80px;height:48px";var M=E.getContext("2d");return M.font="bold "+9*c+"px Helvetica,Arial,sans-serif",M.textBaseline="top",M.fillStyle=s,M.fillRect(0,0,u,f),M.fillStyle=i,M.fillText(r,p,g),M.fillRect(x,S,_,b),M.fillStyle=s,M.globalAlpha=.9,M.fillRect(x,S,_,b),{dom:E,update:function(T,k){o=Math.min(o,T),a=Math.max(a,T),M.fillStyle=s,M.globalAlpha=1,M.fillRect(0,0,u,S),M.fillStyle=i,M.fillText(l(T)+" "+r+" ("+l(o)+"-"+l(a)+")",p,g),M.drawImage(E,x+c,S,_-c,b,x,S,_-c,b),M.fillRect(x+_-c,S,c,b),M.fillStyle=s,M.globalAlpha=.9,M.fillRect(x+_-c,S,c,l((1-T/k)*b))}}},n})}(i1)),i1.exports}var Qwe=Jwe();const e_e=Co(Qwe);function t_e(t,e=[],n){const[r,i]=X.useState();return X.useLayoutEffect(()=>{const s=t();return i(s),()=>void 0},e),r}function n_e({showPanel:t=0,className:e,parent:n}){const r=t_e(()=>new e_e,[]);return X.useEffect(()=>{if(r){const i=n&&n.current||document.body;r.showPanel(t),i?.appendChild(r.dom);const s=(e??"").split(" ").filter(l=>l);s.length&&r.dom.classList.add(...s);const o=ywe(()=>r.begin()),a=vwe(()=>r.end());return()=>{s.length&&r.dom.classList.remove(...s),i?.removeChild(r.dom),o(),a()}}},[n,r,e,t]),null}const r_e=({config:t,chunksRef:e,chunkHash:n})=>{const r=s=>`#${s.toString(16).padStart(6,"0")}`,{data:i}=y0({queryKey:["chunkTextures",n],async queryFn(){console.log("Generating textures for chunkHash:",n);const s=new Map;for(const[o,a]of e.current.entries()){const l=document.createElement("canvas");l.width=t.chunkSize,l.height=t.chunkSize;const c=l.getContext("2d");a.tiles.forEach(f=>{c.fillStyle=r(f.tile.color),c.fillRect(f.x,f.z,l.width/t.plotCount,l.height/t.plotCount)});const u=new $$(l);u.needsUpdate=!0,s.set(o,u)}return s},staleTime:1/0,gcTime:3e5,refetchOnWindowFocus:!1});return v.jsx(v.Fragment,{children:i&&Array.from(e.current.entries()).map(([s,o])=>v.jsxs("mesh",{position:[o.x*t.chunkSize,0,o.z*t.chunkSize],rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:[v.jsx("planeGeometry",{args:[t.chunkSize,t.chunkSize]}),v.jsx("meshStandardMaterial",{color:0xffffff,map:i.get(s),roughness:.5})]},`chunk-${o.x}:${o.z}`))})};class xb{constructor(e,n){this.max=e,this._seed=n}cast(e,n){return BigInt.asUintN(n,e)}checkNum(e){if(e>this.max)throw new Error(`Number greater than ${this.max}`)}reset(){if(this.constructor===xb)throw new Error("Method not implemented")}_int(){if(this.constructor===xb)throw new Error("Method not implemented");return BigInt(0)}bool(){return this.float()>=.5}coin(e=.5){return this.float()<e}int(){return Number(this._int())}bigInt(){return this._int()}float(){return this.int()*(1/this.max)}float53(){const e=this.int()>>>5,n=this.int()>>>6;return(e*0x4000000+n)*(1/0x20000000000000)}randRange(e,n){const r=n-e,i=this.max%r;let s=this.int();for(;s<i;)s=this.int();return e+s%r}randBelow(e){return this.randRange(0,e)}choice(e){return e[this.randBelow(e.length)]}shuffle(e,n=!0){let r=e;n||(r=Array.from(r));for(let i=r.length-1;i>0;i--){const s=this.randRange(0,i),o=r[i];r[i]=r[s],r[s]=o}return r}initArray(e,n){return Array.from({length:e},n)}boolArray(e){return this.initArray(e,()=>this.bool())}coinArray(e,n=.5){return this.initArray(e,()=>this.coin(n))}intArray(e){return this.initArray(e,()=>this.int())}bigIntArray(e){return this.initArray(e,()=>this.bigInt())}randRangeArray(e,n,r){return this.initArray(e,()=>this.randRange(n,r))}floatArray(e){return this.initArray(e,()=>this.float())}float53Array(e){return this.initArray(e,()=>this.float53())}}class i_e extends xb{constructor(e,n){super(e,n)}int(){return Number(this._int()>>11n)}float(){return this.int()/this.max}float53(){return this.float()}}const s_e=2**32,o_e=2**53;class a8 extends i_e{constructor(e=Date.now(),n=13,r=7,i=17){super(o_e,BigInt(e)),this.seed=e,this.a=this.cast(BigInt(n),64),this.b=this.cast(BigInt(r),64),this.c=this.cast(BigInt(i),64)}reset(){this.x=this.seed}get seed(){return this._seed}set seed(e){this._seed=this.cast(BigInt(e),64),this.x=this._seed}_int(){let{x:e}=this;return e^=e<<this.a,e=this.cast(e,64),e^=e>>this.b,e^=e<<this.c,e=this.cast(e,64),this.x=e,e}}class a_e extends xb{constructor(e=Date.now(),n=0x159a55e5,r=0x1f123bb5,i=0x5491333,s=5783321,o=6615241,a=362437){super(s_e,BigInt(e)),this._seed=this.cast(this._seed,32),this.x=this._seed,this.y=this.cast(BigInt(n),32),this.z=this.cast(BigInt(r),32),this.w=this.cast(BigInt(i),32),this.v=this.cast(BigInt(s),32),this.d=this.cast(BigInt(o),32),this.weyl=this.cast(BigInt(a),32),this.origParams={y:this.y,z:this.z,w:this.w,v:this.v,d:this.d}}reset(){this.x=this.seed,Object.assign(this,this.origParams)}get seed(){return this._seed}set seed(e){this._seed=this.cast(BigInt(e),32),this.reset()}_int(){let e=this.x,{v:n}=this;return e^=e>>2n,e^=e<<1n,n^=n<<4n,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.v,this.v=this.cast(n^e,32),this.d+=this.weyl,this.cast(this.d+this.v,32)}}new a8(Date.now());new a8(Date.now());const l8=Math.sqrt(3),l_e=.5*(l8-1),Tx=(3-l8)/6,Az=t=>Math.floor(t)|0,Nz=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function c_e(t=Math.random){const e=u_e(t),n=new Float64Array(e).map(i=>Nz[i%12*2]),r=new Float64Array(e).map(i=>Nz[i%12*2+1]);return function(s,o){let a=0,l=0,c=0;const u=(s+o)*l_e,f=Az(s+u),p=Az(o+u),g=(f+p)*Tx,x=f-g,S=p-g,_=s-x,b=o-S;let E,M;_>b?(E=1,M=0):(E=0,M=1);const T=_-E+Tx,k=b-M+Tx,N=_-1+2*Tx,D=b-1+2*Tx,L=f&255,R=p&255;let A=.5-_*_-b*b;if(A>=0){const U=L+e[R],B=n[U],$=r[U];A*=A,a=A*A*(B*_+$*b)}let P=.5-T*T-k*k;if(P>=0){const U=L+E+e[R+M],B=n[U],$=r[U];P*=P,l=P*P*(B*T+$*k)}let j=.5-N*N-D*D;if(j>=0){const U=L+1+e[R+1],B=n[U],$=r[U];j*=j,c=j*j*(B*N+$*D)}return 70*(a+l+c)}}function u_e(t){const n=new Uint8Array(512);for(let r=0;r<512/2;r++)n[r]=r;for(let r=0;r<512/2-1;r++){const i=r+~~(t()*(256-r)),s=n[r];n[r]=n[i],n[i]=s}for(let r=256;r<512;r++)n[r]=n[r-256];return n}const d_e=t=>{let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return Math.abs(e)},f_e=({config:t,cache:e=1024})=>{const n=X.useRef(new a_e(d_e(t.seed))),r=X.useRef(c_e(()=>n.current.float())),{plotCount:i}=t,s=1/(i*t.scale),o=X.useCallback((c,u)=>{const f=new Array(i**2);for(let p=0;p<i;p++)for(let g=0;g<i;g++){const x=(c*i+g)*s,S=(u*i+(i-p-1))*s,_=r.current(x,S);f[p*i+g]=(_+1)/2}return f},[]),a=X.useRef(Object.values(t.tiles).sort((c,u)=>u.noise-c.noise)).current,l=X.useCallback(c=>{for(const u of a)if(c>=u.noise)return u.id;return a[a.length-1].id},[]);return({x:c,z:u})=>{const f=o(c,u),p=new Array(i**2);for(let g=0;g<i;g++)for(let x=0;x<i;x++){const S=f[g*i+x],_=l(S),b=(i-g-1)*i+x,E=b%t.plotCount,M=Math.floor(b/t.plotCount);p[b]={id:b,tile:t.tiles[_],x:E*t.plotSize,z:M*t.plotSize}}return p}},h_e=({chunkSize:t})=>{const{camera:e,size:n}=Sc(({camera:r,size:i})=>({camera:r,size:i}));return X.useEffect(()=>{e instanceof td||console.error("This computation is designed for an orthographic camera.")},[e]),()=>{const r=e,i=(r.top-r.bottom)/r.zoom,o=i*(n.width/n.height)*.5,a=i*.5,l=(r.position.x-o)/t,c=(r.position.x+o)/t,u=(r.position.z-a)/t,f=(r.position.z+a)/t,p=Math.floor(l),g=Math.ceil(c),x=Math.floor(u),S=Math.ceil(f),_=g-p+1,b=S-x+1,E=_*b,M=new Array(E);for(let T=0;T<E;T++)M[T]={x:p+T%_,z:x+Math.floor(T/_)};return{chunks:M,hash:`[${p} → ${g}]:[${x} → ${S}]`}}},p_e={deepwater:{id:"deepwater",level:"terrain",noise:0,chance:50,color:204},water:{id:"water",level:"terrain",noise:.15,chance:50,color:255},beach:{id:"beach",level:"terrain",noise:.2,chance:100,color:0xffcc00},sand:{id:"sand",level:"terrain",noise:.25,chance:40,color:0xffff00},mountain:{id:"mountain",level:"terrain",noise:.875,chance:100,color:0x999999},snow:{id:"snow",level:"terrain",noise:.95,chance:100,color:0xffffff},rock:{id:"rock",level:"terrain",noise:.8,chance:100,color:0xaaaaaa},hill:{id:"hill",level:"terrain",noise:.7,chance:100,color:2149445},grass:{id:"grass",level:"terrain",noise:.4,chance:100,color:65280},forest:{id:"forest",level:"terrain",noise:.45,chance:100,color:1432883}},m_e=({mapId:t,config:e})=>{const{camera:n,invalidate:r}=Sc(({camera:f,invalidate:p})=>({camera:f,invalidate:p})),i=h_e({chunkSize:e.chunkSize}),s=f_e({config:{tiles:p_e,seed:t,plotCount:e.plotCount,plotSize:e.plotSize,scale:5}}),o=X.useRef(new Map),[a,l]=X.useState(),c=X.useRef(null),u=()=>{c.current&&(c.current.position.set(n.position.x-256,256,n.position.z-256),c.current.target.position.set(n.position.x,0,n.position.z),c.current.target.updateMatrixWorld());const{chunks:f,hash:p}=i();p!==a&&(console.log("New hash",p),o.current.clear(),f.forEach(g=>{o.current.set(`${g.x}:${g.z}`,{x:g.x,z:g.z,tiles:s(g)})}),l(p),r())};return X.useEffect(()=>{u()},[]),v.jsxs(v.Fragment,{children:[v.jsx("directionalLight",{ref:c,color:0xffffff,intensity:2,position:[0,256,256],"shadow-mapSize":[4096,4096],"shadow-bias":-1e-4,"shadow-normalBias":.1,"shadow-radius":15}),v.jsx(Ywe,{enableRotate:!0,enablePan:!0,enableZoom:!0,enableDamping:!0,screenSpacePanning:!1,zoomToCursor:!0,maxZoom:32,mouseButtons:{LEFT:Wu.PAN,RIGHT:Wu.ROTATE},onChange:u}),a&&o.current.size>0?v.jsx(r_e,{config:e,chunksRef:o,chunkHash:a}):null]})},g_e=({config:t,children:e})=>v.jsxs(zwe,{frameloop:"demand",gl:{preserveDrawingBuffer:!1,powerPreference:"high-performance",toneMapping:hT,toneMappingExposure:1,antialias:!0},camera:{zoom:8,position:[0,16,0],near:.1,far:4096},shadows:!0,dpr:[1,2],orthographic:!0,children:[v.jsx("color",{attach:"background",args:[1053968]}),v.jsx(n_e,{}),v.jsx("gridHelper",{args:[t.chunkSize,t.plotSize,0xff0000,0xaaaaaa]}),v.jsx("ambientLight",{intensity:.5}),e]}),y_e=({mapId:t,config:e})=>v.jsx("div",{className:ln(["w-screen","h-screen","overflow-hidden"]),children:v.jsx(g_e,{config:e,children:v.jsx(m_e,{mapId:t,config:e})})}),c8=Pt("/$locale/apps/derivean/map/$mapId")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r}}){const i=await n();return{user:i,cycle:await t.ensureQueryData({queryKey:["map",r,"cycle"],async queryFn(){return e.transaction().execute(async s=>(await s.selectFrom("Cycle as c").select(o=>o.fn.count("c.id").as("count")).where("c.userId","=",i.id).executeTakeFirstOrThrow()).count)}})}},component(){const{mapId:t}=c8.useParams();return v.jsx(y_e,{mapId:t,config:Bhe})}}),u8=Pt("/$locale/apps/derivean/db/schema")({async loader({context:{kysely:t}}){return{tables:await t.introspection.getTables()}},component(){const{tables:t}=u8.useLoaderData(),e=({dataType:i,isNullable:s})=>{const o=i.toLowerCase();let a=`z.never({message: '${i}'})`;switch(o){case"integer":{a="z.number().int()";break}case"float4":{a="z.number()";break}case"datetime":{a="z.string()";break}case"boolean":{a="withBoolSchema()";break}case"text":a="z.string()"}return o.startsWith("varchar")&&(a=`z.string()${s?"":".min(1)"}`),`
// ${i} / ${s?"nullable":"not nullable"}
${a}${s?".nullish()":""}
`},n=t.map(i=>{const s=i.name.replaceAll("_","");return`
export const with${s}Schema = <
    TShapeSchema extends ShapeSchema,
    TFilterSchema extends FilterSchema,
>({
    shape,
    filter,
}: {
    shape: TShapeSchema;
    filter: TFilterSchema;
}) => {
    return withSourceSchema({
        entity: IdentitySchema.merge(z.object({
                ${i.columns.filter(({name:o})=>o!=="id").map(o=>`
    "${o.name}": ${e(o)}
        `.trim()).join(`,
			`)},
        })),
        shape,
        filter,
        sort: [${i.columns.map(o=>`"${o.name}"`).join(", ")}],
    });
}

export type ${s}Entity = ReturnType<typeof with${s}Schema>['~entity'];
            `.trim()}),r=t.map(i=>{const s=i.name.replaceAll("_","");return`${i.name}: ${s}Entity;`});return v.jsxs("pre",{children:[`
import {
    IdentitySchema,
    withSourceSchema,
    type FilterSchema,
    type ShapeSchema,
    withBoolSchema,
} from "@use-pico/common";
import { z } from "zod";
            `.trim(),`

${n.join(`

`)}`,`

export interface Database {
    ${r.join(`
	`)}
}
                `]})}}),Pz=pi(),v_e=[Pz({name:"name",header(){return v.jsx(ne,{label:"User name (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsx(Et,{to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:e})},size:14}),Pz({name:"login",header(){return v.jsx(ne,{label:"User login (label)"})},render({value:t}){return t},size:14})],x_e=({table:t,...e})=>{const n=Ar([["GameMap"],["Management"],["User_Inventory"]]),r=rn({async mutationFn({userId:i}){return Mt.transaction().execute(async s=>{await s.deleteFrom("Map").where("userId","=",i).execute()})},async onSuccess(){await n()}});return v.jsx(fi,{table:hi({...t,columns:v_e}),action:{row({data:i}){return v.jsx(Nr,{children:v.jsx(k2,{icon:Ti,onClick:()=>{r.mutateAsync({userId:i.id})},children:v.jsx(ne,{label:"Reset game (menu)"})})})}},...e})},b_e=Hse({shape:H.object({name:H.string().min(1),login:H.string().min(1),password:H.string().min(1)}),filter:Zs.merge(H.object({login:H.string().optional(),password:H.string().optional()}))}),s1=Pt("/$locale/apps/derivean/root/user/list")({validateSearch:Gr(di(b_e)),loaderDeps({search:{filter:t,cursor:e}}){return{filter:t,cursor:e}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["User","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>kr({select:i.selectFrom("User as u").select(["u.id","u.name","u.login"]),output:H.object({id:H.string().min(1),name:H.string().min(1),login:H.string().min(1)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=s1.useLoaderData(),{filter:n,cursor:r,selection:i}=s1.useSearch(),s=s1.useNavigate(),{tva:o}=Pr({from:"__root__"}),a=o().slots;return v.jsx("div",{className:a.base(),children:v.jsx(x_e,{table:{data:t,filter:{value:n,set:ci(s)},selection:{type:"multi",value:i,set:ia(s)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,s)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of users (label)"}),...li(s)}})})}}),w_e=({entity:t,...e})=>{const{locale:n}=Jt({from:"/$locale"});return v.jsxs(sm,{...e,children:[v.jsx(Er,{icon:ek,to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"View detail (menu)"})}),v.jsx(Er,{icon:Pa,to:"/$locale/apps/derivean/root/user/$id/building/list",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Building list (menu)"})})]})},__e=t=>{const{locale:e}=Jt({from:"/$locale"});return v.jsx(tv,{title:({entity:n})=>v.jsx(nv,{icon:ek,title:n.name}),actions:()=>v.jsx(v.Fragment,{children:v.jsx(Et,{icon:GM,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},children:v.jsx(ne,{label:"User list (label)"})})}),...t})},d8=Pt("/$locale/apps/derivean/root/user/$id")({async loader({context:{kysely:t},params:{id:e}}){return t.transaction().execute(async n=>({entity:await nc({select:n.selectFrom("User as u").select(["u.id","u.name"]).where("u.id","=",e),output:H.object({id:H.string().min(1),name:H.string().min(1)})})}))},component(){const{tva:t}=Pr({from:"__root__"}),{entity:e}=d8.useLoaderData(),n=t().slots;return v.jsxs("div",{className:n.base(),children:[v.jsx(__e,{entity:e}),v.jsx(w_e,{entity:e}),v.jsx(ll,{})]})}}),aw=qse({shape:H.object({code:H.string().min(1),label:H.string().min(1),group:H.string().nullish(),sort:Pc()}),filter:Zs.merge(H.object({code:H.string().optional(),group:H.string().optional()}))}),kz=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(aw.shape),defaultValues:{sort:0,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"code",label:v.jsx(ne,{label:"Tag code (label)"}),required:!0,children:v.jsx("input",{type:"text",className:o.input(),...s.register("code")})}),v.jsx(hn,{formState:s.formState,name:"label",label:v.jsx(ne,{label:"Tag label (label)"}),required:!0,children:v.jsx("input",{type:"text",className:o.input(),...s.register("label")})}),v.jsx(hn,{formState:s.formState,name:"group",label:v.jsx(ne,{label:"Tag group (label)"}),children:v.jsx("input",{type:"text",className:o.input(),...s.register("group")})}),v.jsx(hn,{formState:s.formState,name:"sort",label:v.jsx(ne,{label:"Tag sort (label)"}),children:v.jsx("input",{type:"number",className:o.input(),...s.register("sort")})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:W0,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},uN=pi(),S_e=[uN({name:"label",header(){return v.jsx(ne,{label:"Tag label (label)"})},render({value:t}){return t},size:14}),uN({name:"code",header(){return v.jsx(ne,{label:"Tag code (label)"})},render({value:t}){return t},size:14}),uN({name:"group",header(){return v.jsx(ne,{label:"Tag group (label)"})},render({value:t}){return t},filter:{path:"group",onFilter({data:t,filter:e}){e.shallow("group",t.group)}},size:24})],f8=({group:t,table:e,...n})=>{const r=Ar([["Tag"],["Resource"]]);return v.jsx(fi,{table:hi({...e,columns:S_e}),action:{table(){return v.jsx(Nr,{children:v.jsx(Un,{label:v.jsx(ne,{label:"Create tag (menu)"}),textTitle:v.jsx(ne,{label:"Create tag (modal)"}),icon:W0,children:v.jsx(kz,{defaultValues:{group:t},mutation:rn({async mutationFn(i){return nr.promise(Mt.transaction().execute(s=>s.insertInto("Tag").values({id:Wn(),...i}).returningAll().executeTakeFirstOrThrow()),Is("Create tag"))},async onSuccess(){await r()}})})})})},row({data:i}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit tag (modal)"}),icon:W0,children:v.jsx(kz,{defaultValues:{group:t,...i},mutation:rn({async mutationFn(s){return nr.promise(Mt.transaction().execute(o=>o.updateTable("Tag").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Is("Edit tag"))},async onSuccess(){await r()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete tag (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>{await Mt.transaction().execute(s=>s.deleteFrom("Tag").where("id","=",i.id).execute())},textContent:v.jsx(ne,{label:"Tag delete (content)"}),textToast:"Tag delete",invalidator:r})})]})}},...n})},o1=Pt("/$locale/apps/derivean/root/tag/list")({validateSearch:Gr(di(aw)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Tag","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async i=>kr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]).orderBy("t.sort","desc"),output:H.object({id:H.string().min(1),code:H.string().min(1),label:H.string().min(1),group:H.string().nullish(),sort:H.number().int().nonnegative()}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=o1.useLoaderData(),{filter:n,cursor:r,selection:i}=o1.useSearch(),s=o1.useNavigate(),{tva:o}=Pr({from:"__root__"}),a=o().slots;return v.jsx("div",{className:a.base(),children:v.jsx(f8,{table:{data:t,filter:{value:n,set:ci(s)},selection:{type:"multi",value:i,set:ia(s)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,s)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of items"}),...li(s)}})})}}),E_e=({group:t,...e})=>v.jsx(SW,{icon:W0,table:n=>v.jsx(f8,{group:t,...n}),render:({entities:n})=>v.jsx(TW,{tags:n}),queryKey:"Tag",query:async({filter:n,cursor:r})=>Mt.transaction().execute(async i=>kr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]),output:aw.entity,query({select:s,where:o}){let a=s;if(o?.id&&(a=a.where("t.id","=",o.id)),o?.idIn&&(a=a.where("t.id","in",o.idIn)),o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(c=>c.or([c("t.code","like",l),c("t.group","like",l),c("t.label","like",l),c("t.id","like",l)]))}return a},filter:n,cursor:r})),...e}),h8=Wse({shape:H.object({name:H.string().min(1),weight:Pc(),tagIds:H.array(H.string()).optional(),image:H.instanceof(FileList,{message:"You must upload a file."}).transform(t=>t[0]).refine(t=>(t&&t.size<5*1024*1024,!0),{message:na.text("File size must be less than 5MB")}).refine(t=>t?["image/png","image/jpeg","image/webp"].includes(t.type):!0,{message:"Only PNG/JPEG/WEBP files are allowed."}).optional()}),filter:Zs.merge(H.object({name:H.string().optional()}))}),Oz=({group:t="resource",mutation:e,defaultValues:n,variant:r,tva:i=us,css:s})=>{const o=ds({resolver:fs(h8.shape),defaultValues:{name:"",weight:1,...n}}),a=i({...r,isLoading:o.formState.isLoading,isSubmitting:o.formState.isSubmitting,css:s}).slots;return v.jsxs("form",{className:a.base(),onSubmit:Qs({form:o,mutation:e}),children:[v.jsx(ts,{variant:{highlight:!0},error:o.formState.errors.root}),v.jsx(hn,{formState:o.formState,name:"name",label:v.jsx(ne,{label:"Resource name (label)"}),children:v.jsx("input",{type:"text",className:a.input(),...o.register("name")})}),v.jsx(hn,{formState:o.formState,name:"weight",label:v.jsx(ne,{label:"Resource weight (label)"}),hint:v.jsx(ne,{label:"Weight is used to compute, how fast a resource moves on the road (hint)"}),required:!0,children:v.jsx("input",{type:"number",className:a.input(),min:1,...o.register("weight")})}),v.jsx(hn,{formState:o.formState,name:"image",label:v.jsx(ne,{label:"Resource image (label)"}),hint:v.jsx(ne,{label:"Resource image (hint)"}),children:v.jsx("input",{type:"file",className:a.input(),...o.register("image")})}),v.jsx(hn,{formState:o.formState,name:"tagIds",label:v.jsx(ne,{label:"Resource tags (label)"}),children:v.jsx(To,{control:o.control,name:"tagIds",render:({field:{ref:l,...c}})=>v.jsx(E_e,{group:t,textTitle:v.jsx(ne,{label:"Select resource tags (title)"}),textSelect:v.jsx(ne,{label:"Select resource tags (label)"}),allowEmpty:!0,...c})})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:$r,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},kg=pi(),M_e=[kg({name:"name",header(){return v.jsx(ne,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsx(Et,{icon:v.jsx("div",{className:ln(["border-2","border-purple-400","rounded-md","w-[64px]","h-[64px]","bg-contain",`bg-${t.id}`])}),to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),kg({name:"weight",header(){return v.jsx(ne,{label:"Resource weight (label)"})},render({value:t}){return jn({number:t})},size:12}),kg({name:"countProduction",header(){return v.jsx(ne,{label:"Resource production count (label)"})},render({value:t}){return v.jsx($s,{css:{base:t!==void 0&&t===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:jn({number:t})})},size:12}),kg({name:"countRequirement",header(){return v.jsx(ne,{label:"Resource requirement count (label)"})},render({data:t,value:e}){return v.jsx($s,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:jn({number:e})})},size:12}),kg({name:"countProductionRequirement",header(){return v.jsx(ne,{label:"Resource production requirement count (label)"})},render({data:t,value:e}){return v.jsx($s,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:jn({number:e})})},size:18}),kg({name:"tags",header(){return v.jsx(ne,{label:"Resource tags (label)"})},render({value:t}){return v.jsx(TW,{tags:t})},size:32})],p8=({group:t,table:e,...n})=>{const r=Ar([["Resource"],["Resource_Tag"]]);return v.jsx(fi,{table:hi({...e,columns:M_e}),action:{table(){return v.jsx(Nr,{children:v.jsx(Un,{label:v.jsx(ne,{label:"Create resource (menu)"}),textTitle:v.jsx(ne,{label:"Create resource (modal)"}),icon:$r,children:({close:i})=>v.jsx(Oz,{group:t,mutation:rn({async mutationFn({image:s,tagIds:o=[],...a}){return Mt.transaction().execute(async l=>{const c=await l.insertInto("Resource").values({id:Wn(),...a,image:s?await By(s):null}).returningAll().executeTakeFirstOrThrow();return o.length&&await l.insertInto("Resource_Tag").values(o.map(u=>({id:Wn(),resourceId:c.id,tagId:u}))).execute(),c})},async onSuccess(){await r(),i()}})})})})},row({data:i}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit resource (modal)"}),icon:$r,children:({close:s})=>v.jsx(Oz,{defaultValues:{...i,tagIds:i.tags.map(({id:o})=>o)},mutation:rn({async mutationFn({image:o,tagIds:a,...l}){return nr.promise(Mt.transaction().execute(async c=>{const u=await c.updateTable("Resource").set({...l,image:o?await By(o):null}).where("id","=",i.id).returningAll().executeTakeFirstOrThrow();return await c.deleteFrom("Resource_Tag").where("resourceId","=",u.id).execute(),a?.length&&await c.insertInto("Resource_Tag").values(a.map(f=>({id:Wn(),resourceId:u.id,tagId:f}))).execute(),u}),Is("Update resource"))},async onSuccess(){await r(),s()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete resource (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>Mt.transaction().execute(async s=>s.deleteFrom("Resource").where("id","=",i.id).execute()),textContent:v.jsx(ne,{label:"Resource delete (content)"}),textToast:"Resource delete",invalidator:r})})]})}},...n})},a1=Pt("/$locale/apps/derivean/root/resource/list")({validateSearch:Gr(di(h8)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Resource","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>kr({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.weight",s=>s.selectFrom("Tag as t").select(o=>si`json_group_array(json_object(
                                            'id', ${o.ref("t.id")},
                                            'code', ${o.ref("t.code")},
                                            'group', ${o.ref("t.group")},
                                            'sort', ${o.ref("t.sort")},
                                            'label', ${o.ref("t.label")}
                                        ))`.as("tags")).where("t.id","in",s.selectFrom("Resource_Tag as rt").select("rt.tagId").whereRef("rt.resourceId","=","r.id")).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(c=>c.or([c("r.id","like",l),c("r.name","like",l),c("r.id","in",c.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(u=>u.or([u("t.code","like",l),u("t.label","like",l),u("t.group","like",l)])))]))}return a},output:H.object({id:H.string().min(1),name:H.string().min(1),weight:Pc(),countRequirement:H.number().nonnegative(),countProduction:H.number().nonnegative(),countProductionRequirement:H.number().nonnegative(),tags:Ms(aw.entity)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=a1.useLoaderData(),{filter:n,cursor:r,selection:i}=a1.useSearch(),s=a1.useNavigate(),{tva:o}=Pr({from:"__root__"}),a=o().slots;return v.jsx("div",{className:a.base(),children:v.jsx(p8,{table:{data:t,filter:{value:n,set:ci(s)},selection:{type:"multi",value:i,set:ia(s)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,s)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of items"}),...li(s)}})})}}),T_e=({entity:t,...e})=>{const{locale:n}=Jt({from:"/$locale"});return v.jsx(sm,{...e,children:v.jsx(Er,{icon:$r,to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"View detail (menu)"})})})},C_e=t=>{const{locale:e}=Jt({from:"/$locale"});return v.jsx(tv,{title:({entity:n})=>v.jsx(nv,{icon:$r,title:n.name}),actions:()=>v.jsx(v.Fragment,{children:v.jsx(Et,{icon:GM,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:v.jsx(ne,{label:"Resource list (label)"})})}),...t})},m8=Pt("/$locale/apps/derivean/root/resource/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Resource",n],async queryFn(){return e.transaction().execute(async r=>({entity:await nc({select:r.selectFrom("Resource as r").select(["r.id","r.name","r.image"]).where("r.id","=",n),output:H.object({id:H.string().min(1),name:H.string().min(1),image:H.string().nullish()})})}))}})},component:()=>{const{tva:t}=Pr({from:"__root__"}),{entity:e}=m8.useLoaderData(),n=t().slots;return v.jsxs("div",{className:n.base(),children:[v.jsx(C_e,{entity:e}),v.jsx(T_e,{entity:e}),v.jsx(ll,{})]})}}),l1=Pt("/$locale/apps/derivean/root/region/list")({validateSearch:Gr(di(Mk)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Region","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>kr({select:i.selectFrom("Region as r").select(["r.id","r.name","r.probability","r.limit"]).orderBy("r.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(c=>c.or([c("r.id","like",l),c("r.name","like",l)]))}return a},output:H.object({id:H.string().min(1),name:H.string().min(1),probability:H.number().int().min(0),limit:H.number().int().min(0)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=l1.useLoaderData(),{filter:n,cursor:r,selection:i}=l1.useSearch(),s=l1.useNavigate(),{tva:o}=Pr({from:"__root__"}),a=o().slots;return v.jsx("div",{className:a.base(),children:v.jsx(FH,{table:{data:t,filter:{value:n,set:ci(s)},selection:{type:"multi",value:i,set:ia(s)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,s)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of items"}),...li(s)}})})}}),I_e=Pt("/$locale/apps/derivean/root/region/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Region",n],async queryFn(){return e.transaction().execute(async r=>({entity:await nc({select:r.selectFrom("Region as r").select(["r.id","r.name","r.image"]).where("r.id","=",n),output:H.object({id:H.string().min(1),name:H.string().min(1),image:H.string().nullish()})})}))}})},component:()=>{const{tva:t}=Pr({from:"__root__"}),e=t().slots;return v.jsx("div",{className:e.base(),children:v.jsx(ll,{})})}}),gO="icon-[gala--clock]",Nf="icon-[mingcute--inventory-line]",R_e=Sn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2","bg-sky-100","border-sky-300","text-sky-500"]},variant:{missing:{true:[]}},match:[{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{missing:!1}}),g8=({dependencies:t,variant:e,tva:n=R_e,css:r,...i})=>{const s=n({...e,css:r}).slots;return v.jsx(Vf,{items:t,render:({entity:o})=>v.jsx("div",{className:s.item(),children:v.jsx("div",{children:o.name})}),...i})};var RS={},Lz;function A_e(){if(Lz)return RS;Lz=1;function t(r,i,s,o){var a=new Set;return function(l){if(!a.has(l)){var c=new Set,u=[],f=[];for(f.push({node:l,processed:!1});f.length>0;){var p=f[f.length-1],g=p.processed,x=p.node;if(g)f.pop(),u.pop(),c.delete(x),a.add(x),(!i||r.get(x).length===0)&&s.push(x);else{if(a.has(x)){f.pop();continue}else if(c.has(x)){if(o){f.pop();continue}throw u.push(x),new n(u)}c.add(x),u.push(x);for(var S=r.get(x),_=S.length-1;_>=0;_--)f.push({node:S[_],processed:!1});p.processed=!0}}}}}var e=RS.DepGraph=function(i){this.nodes=new Map,this.outgoingEdges=new Map,this.incomingEdges=new Map,this.circular=i&&!!i.circular};e.prototype={size:function(){return this.nodes.size},addNode:function(r,i){this.hasNode(r)||(arguments.length===2?this.nodes.set(r,i):this.nodes.set(r,r),this.outgoingEdges.set(r,[]),this.incomingEdges.set(r,[]))},removeNode:function(r){this.hasNode(r)&&(this.nodes.delete(r),this.outgoingEdges.delete(r),this.incomingEdges.delete(r),[this.incomingEdges,this.outgoingEdges].forEach(function(i){i.forEach(function(s){var o=s.indexOf(r);o>=0&&s.splice(o,1)})}))},hasNode:function(r){return this.nodes.has(r)},getNodeData:function(r){if(this.hasNode(r))return this.nodes.get(r);throw new Error("Node does not exist: "+r)},setNodeData:function(r,i){if(this.hasNode(r))this.nodes.set(r,i);else throw new Error("Node does not exist: "+r)},addDependency:function(r,i){if(!this.hasNode(r))throw new Error("Node does not exist: "+r);if(!this.hasNode(i))throw new Error("Node does not exist: "+i);return this.outgoingEdges.get(r).indexOf(i)===-1&&this.outgoingEdges.get(r).push(i),this.incomingEdges.get(i).indexOf(r)===-1&&this.incomingEdges.get(i).push(r),!0},removeDependency:function(r,i){var s;this.hasNode(r)&&(s=this.outgoingEdges.get(r).indexOf(i),s>=0&&this.outgoingEdges.get(r).splice(s,1)),this.hasNode(i)&&(s=this.incomingEdges.get(i).indexOf(r),s>=0&&this.incomingEdges.get(i).splice(s,1))},clone:function(){var r=this,i=new e;return r.nodes.forEach(function(s,o){i.nodes.set(o,s),i.outgoingEdges.set(o,r.outgoingEdges.get(o).slice(0)),i.incomingEdges.set(o,r.incomingEdges.get(o).slice(0))}),i.circular=r.circular,i},directDependenciesOf:function(r){if(this.hasNode(r))return this.outgoingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},directDependantsOf:function(r){if(this.hasNode(r))return this.incomingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},dependenciesOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.outgoingEdges,i,s,this.circular);o(r);var a=s.indexOf(r);return a>=0&&s.splice(a,1),s}else throw new Error("Node does not exist: "+r)},dependantsOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.incomingEdges,i,s,this.circular);o(r);var a=s.indexOf(r);return a>=0&&s.splice(a,1),s}else throw new Error("Node does not exist: "+r)},overallOrder:function(r){var i=this,s=[],o=Array.from(this.nodes.keys());if(o.length===0)return s;if(!this.circular){var a=t(this.outgoingEdges,!1,[],this.circular);o.forEach(function(c){a(c)})}var l=t(this.outgoingEdges,r,s,this.circular);return o.filter(function(c){return i.incomingEdges.get(c).length===0}).forEach(function(c){l(c)}),this.circular&&o.filter(function(c){return s.indexOf(c)===-1}).forEach(function(c){l(c)}),s},entryNodes:function(){var r=this;return Array.from(this.nodes.keys()).filter(function(i){return r.incomingEdges.get(i).length===0})}},e.prototype.directDependentsOf=e.prototype.directDependantsOf,e.prototype.dependentsOf=e.prototype.dependantsOf;var n=RS.DepGraphCycleError=function(r){var i="Dependency Cycle Found: "+r.join(" -> "),s=new Error(i);return s.cyclePath=r,Object.setPrototypeOf(s,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(s,n),s};return n.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(n,Error),RS}var y8=A_e();const lw=async({tx:t})=>{const e=new y8.DepGraph({circular:!1});for await(const{id:n,name:r}of await t.selectFrom("Blueprint").select(["id","name"]).execute())e.addNode(n,r);for await(const{blueprintId:n,dependencyId:r}of await t.selectFrom("Blueprint_Dependency").select(["blueprintId","dependencyId"]).execute())e.addDependency(n,r);return e},bb=async({tx:t})=>{const e=lw({tx:t}),n=await t.selectFrom("Blueprint as bl").select(["bl.id"]).execute();for await(const r of n){const i=(await e).dependenciesOf(r.id);await t.updateTable("Blueprint").set({sort:i.length}).where("id","=",r.id).execute()}},v8=async({tx:t,blueprintId:e})=>{await t.deleteFrom("Blueprint_Inventory").where("blueprintId","=",e).execute();const n=await t.selectFrom("Blueprint_Requirement").select(["resourceId","amount"]).where("blueprintId","=",e).execute();for await(const{resourceId:i,amount:s}of n)await t.insertInto("Blueprint_Inventory").values({id:Wn(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:Wn(),resourceId:i,amount:0,limit:s,type:"construction"}).returning("id").executeTakeFirstOrThrow()).id}).execute();const r=await t.selectFrom(t.selectFrom("Blueprint_Production").select(["resourceId","amount"]).where("blueprintId","=",e).union(t.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).union(t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).as("resources")).select(["resourceId",i=>i.fn.max("amount").as("amount")]).groupBy("resourceId").orderBy("amount","desc").execute();for await(const{resourceId:i,amount:s}of r)await t.insertInto("Blueprint_Inventory").values({id:Wn(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:Wn(),resourceId:i,amount:0,limit:s*5,type:"storage"}).returning("id").executeTakeFirstOrThrow()).id}).execute()},N_e=Sn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]},variant:{passive:{true:[]},missing:{true:[]}},match:[{if:{passive:!0},then:{item:["bg-purple-100","border-purple-300","text-purple-500"]}},{if:{passive:!1},then:{item:["bg-sky-100","border-sky-300","text-sky-500"]}},{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{passive:!1,missing:!1}}),HT=({requirements:t,diff:e,variant:n,tva:r=N_e,css:i,...s})=>{const o=r({...n,css:i}).slots;return v.jsx(Vf,{items:t,render:({entity:a})=>{const l=e?.find(u=>u.resourceId===a.resourceId),c=l?.amount?l.amount-a.amount:-a.amount;return v.jsxs("div",{className:o.item({css:!e||c>=0?[]:["text-red-700","bg-red-100","border-red-300"],passive:a.passive}),children:[v.jsx("div",{children:a.name}),v.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",jn({number:a.amount})]}),e?c>=0?v.jsx(pn,{icon:"icon-[pajamas--check-sm]",css:{base:["text-emerald-600"]}}):v.jsxs("div",{className:"flex flex-row gao-2 items-center text-sm text-red-500",children:[v.jsx(pn,{icon:"icon-[charm--cross]",css:{base:["text-red-500"]}}),"(",jn({number:c}),")"]}):null]})},...s})},Cx=pi(),P_e=[Cx({name:"name",header(){return v.jsx(ne,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[v.jsx(Et,{icon:v.jsx("div",{className:ln(["border-2","border-purple-400","rounded-md","w-[64px]","h-[64px]","bg-contain",`bg-${t.id}`])}),to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:e}),v.jsx(Et,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:n},search:{zoomTo:t.id}})]})},size:18}),Cx({name:"dependencies",header(){return v.jsx(ne,{label:"Blueprint dependencies (label)"})},render({value:t}){return t.length>0?v.jsxs("div",{className:"flex flex-col flex-wrap gap-2 w-full",children:[v.jsx(g8,{textTitle:v.jsx(ne,{label:"Blueprint dependencies (title)"}),dependencies:t}),v.jsx("div",{className:"border-b border-slate-200"})]}):v.jsx(ne,{label:"No dependencies (label)"})},size:32}),Cx({name:"requirements",header(){return v.jsx(ne,{label:"Required resources (label)"})},render({value:t}){return v.jsx(HT,{textTitle:v.jsx(ne,{label:"Blueprint requirements (title)"}),textEmpty:v.jsx(ne,{label:"No requirements (label)"}),requirements:t})},size:32}),Cx({name:"cycles",header(){return v.jsx(ne,{label:"Construction cycles (label)"})},render({value:t}){return v.jsxs("div",{className:"flex flex-row items-center gap-2",children:[v.jsx(pn,{icon:gO}),jn({number:t})]})},size:8}),Cx({name:"limit",header(){return v.jsx(ne,{label:"Building limit (label)"})},render({value:t}){return jn({number:t})},size:8})],x8=({dependencies:t,table:e,...n})=>{const r=Ar([["Blueprint_Inventory"],["Blueprint"],["Inventory"]]),i=rn({async mutationFn(){return Mt.transaction().execute(async s=>{const o=await s.selectFrom("Blueprint").select(["id"]).execute();for await(const{id:a}of o)await v8({tx:s,blueprintId:a})})},async onSuccess(){await r()},onError(s){console.error(s)}});return v.jsx(fi,{table:hi({...e,columns:P_e,context:{dependencies:t}}),action:{table(){return v.jsxs(Nr,{children:[v.jsx(k2,{icon:Nf,onClick:()=>{nr.promise(i.mutateAsync(),Is("Fill inventories"))},children:v.jsx(ne,{label:"Fill inventories (label)"})}),v.jsx(Un,{label:v.jsx(ne,{label:"Create blueprint (menu)"}),textTitle:v.jsx(ne,{label:"Create blueprint (modal)"}),icon:ir,children:({close:s})=>v.jsx(IE,{mutation:rn({async mutationFn({image:o,regionIds:a,...l}){Mt.transaction().execute(async c=>{const u=await c.insertInto("Blueprint").values({id:Wn(),...l,image:o?await By(o):null}).returningAll().executeTakeFirstOrThrow();return a?.length&&await c.insertInto("Blueprint_Region").values(a.map(f=>({id:Wn(),blueprintId:u.id,regionId:f}))).execute(),await bb({tx:c}),u})},async onSuccess(){await r(),s()}})})})]})},row({data:s}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit blueprint (modal)"}),icon:ir,children:({close:o})=>v.jsx(IE,{defaultValues:{...s,regionIds:s.regions.map(a=>a.id)},mutation:rn({async mutationFn({image:a,regionIds:l,...c}){return Mt.transaction().execute(async u=>{const f=await u.updateTable("Blueprint").set({...c,image:a?await By(a):null}).where("id","=",s.id).returningAll().executeTakeFirstOrThrow();return await u.deleteFrom("Blueprint_Region").where("blueprintId","=",f.id).execute(),l?.length&&await u.insertInto("Blueprint_Region").values(l.map(p=>({id:Wn(),blueprintId:f.id,regionId:p}))).execute(),await bb({tx:u}),f})},async onSuccess(){await r(),o()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete blueprint (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>Mt.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",s.id).execute()),textContent:v.jsx(ne,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:r})})]})}},...n})},Jf=Pse({shape:H.object({dependencyId:H.string().min(1)}),filter:Zs.merge(H.object({blueprintId:H.string().optional(),dependencyId:H.string().optional()}))}),lv=Bse({shape:H.object({resourceId:H.string().min(1),amount:od(),passive:H.boolean()}),filter:Zs.merge(H.object({blueprintId:H.string().optional(),resourceId:H.string().optional()}))}),c1=Pt("/$locale/apps/derivean/root/blueprint/list")({validateSearch:Gr(di(Tk)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint as bl").select(["bl.id","bl.image","bl.name","bl.sort","bl.cycles","bl.limit",o=>o.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(a=>Cf.jsonGroupArray({id:a.ref("r.id"),name:a.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","bl.id").as("regions"),o=>o.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(a=>si`json_group_array(json_object(
                                                'id', ${a.ref("br.id")},
                                                'amount', ${a.ref("br.amount")},
                                                'passive', ${a.ref("br.passive")},
                                                'resourceId', ${a.ref("br.resourceId")},
                                                'blueprintId', ${a.ref("br.blueprintId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),o=>o.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(a=>si`json_group_array(json_object(
                                                        'id', ${a.ref("bd.id")},
                                                        'dependencyId', ${a.ref("bd.dependencyId")},
                                                        'blueprintId', ${a.ref("bd.blueprintId")},
                                                        'name', ${a.ref("bl2.name")}
                                                    ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;if(a?.id&&(l=l.where("bl.id","=",a.id)),a?.fulltext){const c=`%${a.fulltext}%`.toLowerCase();l=l.where(u=>u.or([u("bl.id","like",c),u("bl.name","like",c)]))}return l},output:H.object({id:H.string().min(1),name:H.string().min(1),image:H.string().nullish(),cycles:H.number().nonnegative(),sort:H.number().nonnegative(),limit:H.number().nonnegative(),regions:Ms(H.object({id:H.string().min(1),name:H.string().min(1)})),requirements:Ms(lv.entity.merge(H.object({name:H.string().min(1)}))),dependencies:Ms(Jf.entity.merge(H.object({name:H.string().min(1)})))}),filter:n,cursor:r}))}}),dependencies:await e.transaction().execute(async s=>lw({tx:s}))}},component(){const{data:{data:t,count:e},dependencies:n}=c1.useLoaderData(),{filter:r,cursor:i,selection:s}=c1.useSearch(),o=c1.useNavigate(),{tva:a}=Pr({from:"__root__"}),l=a().slots;return v.jsx("div",{className:l.base(),children:v.jsx(x8,{dependencies:n,table:{data:t,filter:{value:r,set:ci(o)},selection:{type:"multi",value:s,set:ia(o)}},fulltext:{value:r?.fulltext,set:ui(r?.fulltext,o)},cursor:{count:e,cursor:i,textTotal:v.jsx(ne,{label:"Number of blueprints"}),...li(o)}})})}}),k_e=({entity:t,...e})=>{const{locale:n}=Jt({from:"/$locale"});return v.jsxs(sm,{...e,children:[v.jsx(Er,{icon:ir,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"View detail (menu)"})}),v.jsx(Er,{icon:Pa,to:"/$locale/apps/derivean/root/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Blueprint dependencies (menu)"})}),v.jsx(Er,{icon:$r,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Required resources (menu)"})}),v.jsx(Er,{icon:ol,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Resource production (menu)"})}),v.jsx(Er,{icon:Nf,to:"/$locale/apps/derivean/root/blueprint/$id/inventory",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Blueprint inventory (menu)"})}),v.jsx(Er,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Blueprint conflicts (menu)"})}),v.jsx(Er,{icon:iW,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Edit (menu)"})})]})},O_e=t=>{const{locale:e}=Jt({from:"/$locale"});return v.jsx(tv,{title:({entity:n})=>v.jsx(nv,{icon:ir,title:n.name}),actions:({entity:n})=>v.jsxs(v.Fragment,{children:[v.jsx(Et,{icon:GM,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},children:v.jsx(ne,{label:"Blueprint list (label)"})}),v.jsx(Et,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},search:{zoomTo:n.id},children:v.jsx(ne,{label:"Editor (label)"})})]}),...t})},b8=Pt("/$locale/apps/derivean/root/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>nc({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",s=>s.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(o=>Cf.jsonGroupArray({id:o.ref("r.id"),name:o.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","bl.id").as("regions"),s=>s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(o=>Cf.jsonGroupArray({id:o.ref("br.id"),amount:o.ref("br.amount"),passive:o.ref("br.passive"),resourceId:o.ref("br.resourceId"),blueprintId:o.ref("br.blueprintId"),name:o.ref("r.name")}).as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),s=>s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(o=>Cf.jsonGroupArray({id:o.ref("bd.id"),dependencyId:o.ref("bd.dependencyId"),blueprintId:o.ref("bd.blueprintId"),name:o.ref("bl2.name")}).as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(c=>c.or([c("bl.id","like",l),c("bl.name","like",l),c("bl.id","in",c.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(u=>u.or([u("r.name","like",l)]))),c("bl.id","in",c.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(u=>u.or([u("b.name","like",l)])))]))}return a},output:H.object({id:H.string().min(1),name:H.string().min(1),cycles:H.number().nonnegative(),sort:H.number().nonnegative(),regions:Ms(H.object({id:H.string().min(1),name:H.string().min(1)})),requirements:Ms(lv.entity.merge(H.object({name:H.string().min(1)}))),dependencies:Ms(Jf.entity.merge(H.object({name:H.string().min(1)})))})}))}}),graph:await e.transaction().execute(async i=>lw({tx:i}))}},component(){const{tva:t}=Pr({from:"__root__"}),{entity:e}=b8.useLoaderData(),n=t().slots;return v.jsxs("div",{className:n.base(),children:[v.jsx(O_e,{entity:e}),v.jsx(k_e,{entity:e}),v.jsx(ll,{})]})}}),L_e=Pt("/$locale/apps/derivean/map/$mapId/view")({}),Dz=pi(),D_e=[Dz({name:"name",header(){return v.jsx(ne,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[v.jsx(Et,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/game",params:{locale:n},search:{blueprintId:t.id}}),v.jsx(Et,{icon:v.jsx("div",{className:ln(["border-2","border-purple-400","rounded-md","w-[64px]","h-[64px]","bg-contain",`bg-${t.id}`])}),to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),Dz({name:"cycles",header(){return v.jsx(ne,{label:"Construction cycles (label)"})},render({value:t}){return v.jsxs("div",{className:"flex flex-row items-center gap-2",children:[v.jsx(pn,{icon:gO}),jn({number:t})]})},size:8})],F_e=({table:t,...e})=>v.jsx(fi,{table:hi({...t,columns:D_e}),...e}),u1=Pt("/$locale/apps/derivean/game/blueprint/list")({validateSearch:Gr(di(Tk)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{filter:r,cursor:i}}){const s=await n();return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:r,cursor:i}],async queryFn(){return e.transaction().execute(async a=>kr({select:a.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","in",a.selectFrom("Building as bg").select("bg.blueprintId").where("bg.userId","=",s.id)).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:l,where:c}){let u=l;if(c?.id&&(u=u.where("bl.id","=",c.id)),c?.fulltext){const f=`%${c.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bl.id","like",f),p("bl.name","like",f)]))}return u},output:H.object({id:H.string().min(1),name:H.string().min(1),cycles:H.number().nonnegative()}),filter:r,cursor:i}))}})}},component(){const{data:{data:t,count:e}}=u1.useLoaderData(),{filter:n,cursor:r}=u1.useSearch(),i=u1.useNavigate(),{tva:s}=Pr({from:"__root__"}),o=s().slots;return v.jsx("div",{className:o.base(),children:v.jsx(F_e,{table:{data:t,filter:{value:n,set:ci(i)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,i)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of blueprints"}),...li(i)}})})}}),B_e=({entity:t,...e})=>{const{locale:n}=Jt({from:"/$locale"});return v.jsxs(sm,{...e,children:[v.jsx(Er,{icon:ir,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"View detail (menu)"})}),v.jsx(Er,{icon:Pa,to:"/$locale/apps/derivean/game/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Blueprint dependencies (menu)"})}),v.jsx(Er,{icon:$r,to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Required resources (menu)"})}),v.jsx(Er,{icon:ol,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Resource production (menu)"})}),v.jsx(Er,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Blueprint conflicts (menu)"})})]})},j_e=t=>{const{locale:e}=Jt({from:"/$locale"});return v.jsx(tv,{title:({entity:n})=>v.jsx(nv,{icon:ir,title:n.name}),actions:()=>v.jsx(v.Fragment,{children:v.jsx(Et,{icon:GM,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:e},children:v.jsx(ne,{label:"Blueprint list (label)"})})}),...t})},w8=Pt("/$locale/apps/derivean/game/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>nc({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(c=>c.or([c("bl.id","like",l),c("bl.name","like",l),c("bl.id","in",c.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(u=>u.or([u("r.name","like",l)]))),c("bl.id","in",c.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(u=>u.or([u("b.name","like",l)])))]))}return a},output:H.object({id:H.string().min(1),name:H.string().min(1),cycles:H.number().nonnegative()})}))}}),graph:await e.transaction().execute(async i=>lw({tx:i}))}},component(){const{tva:t}=Pr({from:"__root__"}),{entity:e}=w8.useLoaderData(),n=t().slots;return v.jsxs("div",{className:n.base(),children:[v.jsx(j_e,{entity:e}),v.jsx(B_e,{entity:e}),v.jsx(ll,{})]})}}),U_e=Pt("/$locale/apps/derivean/root/user/$id/view")({component(){return"yep"}}),z_e=Pt("/$locale/apps/derivean/root/resource/$id/view")({component(){const{entity:{image:t}}=zi({from:"/$locale/apps/derivean/root/resource/$id"});return v.jsx(v.Fragment,{children:v.jsx("img",{src:t||void 0})})}}),V_e=Pt("/$locale/apps/derivean/root/region/$id/view")({component(){const{entity:{image:t}}=zi({from:"/$locale/apps/derivean/root/region/$id"});return v.jsx(v.Fragment,{children:t?v.jsx("img",{src:t||void 0}):"no image"})}}),yO="icon-[carbon--document-requirements]",W_e=({entity:t,...e})=>{const{locale:n}=Jt({from:"/$locale"});return v.jsxs(sm,{...e,children:[v.jsx(Er,{icon:yO,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Production requirements (menu)"})}),v.jsx(Er,{icon:$r,to:"/$locale/apps/derivean/root/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Production resource requirements (menu)"})}),v.jsx(Er,{icon:ir,to:"/$locale/apps/derivean/root/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Production resource dependencies (menu)"})})]})},q_e=t=>{const{locale:e}=Jt({from:"/$locale"});return v.jsx(tv,{title:({entity:n})=>v.jsx(nv,{icon:ol,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>v.jsx(v.Fragment,{children:v.jsx(Et,{icon:ir,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:v.jsx(ne,{label:"Building base detail (label)"})})}),...t})},_8=Pt("/$locale/apps/derivean/root/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await nc({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:H.object({id:H.string().min(1),resource:H.string().min(1),blueprint:H.string().min(1),blueprintId:H.string().min(1),amount:H.number().nonnegative(),cycles:H.number().int().nonnegative()})})}))}})},component(){const{entity:t}=_8.useLoaderData(),{tva:e}=Pr({from:"__root__"}),n=e().slots;return v.jsxs("div",{className:n.base(),children:[v.jsx(q_e,{entity:t}),v.jsx(W_e,{entity:t}),v.jsx(ll,{})]})}}),H_e=({graph:t,blueprintId:e,mode:n="dependencies",reverse:r=!1})=>{try{const i=(s=>r?s.reverse():s)(n==="dependants"?t.dependantsOf(e):t.dependenciesOf(e));return v.jsxs("div",{className:ln(["flex","flex-row","flex-wrap","gap-2","items-center"]),children:[i.length>0?v.jsx(pn,{css:{base:["text-emerald-500"]},icon:"icon-[charm--circle-tick]"}):v.jsx(pn,{css:{base:["text-amber-500"]},icon:"icon-[fe--question]"}),i.length>0?i.map(s=>v.jsx($s,{css:{base:["bg-emerald-200","text-emerald-700","border-emerald-500"]},children:t.getNodeData(s)},Wn())):v.jsx(ne,{css:{base:["text-amber-500","font-bold"]},label:"No dependents (label)"})]})}catch(i){return i instanceof y8.DepGraphCycleError?v.jsxs("div",{className:ln(["flex","flex-row","gap-2","items-center"]),children:[v.jsx(pn,{css:{base:["text-red-500"]},icon:"icon-[charm--circle-cross]"}),i.cyclePath.map(s=>v.jsx($s,{css:{base:["bg-red-200","text-red-700","border-red-500"]},children:t.getNodeData(s)},Wn()))]}):"kaboom"}},$_e=({dependencies:t,...e})=>v.jsx(K5,{items:[{id:"name",label:v.jsx(ne,{label:"Building name (label)"}),render({entity:n}){return n.name}},{id:"cycles",label:v.jsx(ne,{label:"Construction cycles (label)"}),render({entity:n}){return jn({number:n.cycles})}},{id:"regions",label:v.jsx(ne,{label:"Regions (label)"}),render({entity:n}){return v.jsx(Vf,{items:n.regions,css:{base:["flex","flex-row","gap-2"]},textEmpty:v.jsx(ne,{label:"No regions (label)"}),render:({entity:r})=>v.jsx("div",{className:ln(["p-2","border","border-blue-300","bg-blue-50","rounded-sm"]),children:r.name})})}},{id:"requirements",label:v.jsx(ne,{label:"Required resources (label)"}),render({entity:n}){return v.jsx(HT,{requirements:n.requirements,textEmpty:v.jsx(ne,{label:"No requirements (label)"})})}},{id:"dependencies",label:v.jsx(ne,{label:"Blueprint dependencies (label)"}),render({entity:n}){return v.jsx(g8,{dependencies:n.dependencies,textEmpty:v.jsx(ne,{label:"No dependencies (label)"})})}},{id:"deps",label:v.jsx(ne,{label:"Blueprint dependency graph (label)"}),render({entity:n}){return v.jsx(H_e,{graph:t,blueprintId:n.id})}},{id:"preview",render({entity:n}){return v.jsx("div",{className:ln(["mx-auto","border-2","border-purple-400","rounded-md","w-[256px]","h-[256px]","bg-contain",`bg-${n.id}`])})}}],...e}),S8=Pt("/$locale/apps/derivean/root/blueprint/$id/view")({async loader({context:{kysely:t}}){return{dependencies:await t.transaction().execute(async e=>lw({tx:e}))}},component(){const{dependencies:t}=S8.useLoaderData(),{entity:e}=zi({from:"/$locale/apps/derivean/root/blueprint/$id"});return v.jsx("div",{className:"w-1/2 mx-auto",children:v.jsx($_e,{dependencies:t,entity:e})})}}),cw=({group:t,...e})=>v.jsx(EW,{icon:$r,textTitle:v.jsx(ne,{label:"Select resource (title)"}),textSelect:v.jsx(ne,{label:"Select resource (label)"}),table:n=>v.jsx(p8,{group:t,...n}),render:({entity:n})=>n.name,queryKey:"Resource",query:async({filter:n,cursor:r})=>Mt.transaction().execute(async i=>kr({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.weight",s=>s.selectFrom("Tag as t").select(o=>si`json_group_array(json_object(
                                                'id', ${o.ref("t.id")},
                                                'code', ${o.ref("t.code")},
                                                'group', ${o.ref("t.group")},
                                                'sort', ${o.ref("t.sort")},
                                                'label', ${o.ref("t.label")}
                                            ))`.as("tags")).where("t.id","in",i.selectFrom("Resource_Tag as rt").select("rt.tagId").where("rt.resourceId","=",s.ref("r.id"))).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let a=s;if(o?.id&&(a=a.where("r.id","=",o.id)),o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(c=>c.or([c("r.id","like",l),c("r.name","like",l),c("r.id","in",c.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(u=>u.or([u("t.code","like",l),u("t.label","like",l),u("t.group","like",l)])))]))}return a},output:H.object({id:H.string().min(1),name:H.string().min(1),weight:Pc(),tags:Ms(aw.entity),countRequirement:H.number().nonnegative(),countProduction:H.number().nonnegative(),countProductionRequirement:H.number().nonnegative()}),filter:n,cursor:r})),...e}),Fz=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(lv.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"resourceId",label:v.jsx(ne,{label:"Requirement (label)"}),children:v.jsx(To,{control:s.control,name:"resourceId",render:({field:{ref:a,...l}})=>v.jsx(cw,{allowEmpty:!0,...l})})}),v.jsx(hn,{formState:s.formState,name:"amount",label:v.jsx(ne,{label:"Amount (label)"}),children:v.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),v.jsx(hn,{formState:s.formState,name:"passive",label:v.jsx(ne,{label:"Passive requirement (label)"}),hint:v.jsx(ne,{label:"Passive requirement (hint)"}),children:v.jsx(To,{control:s.control,name:"passive",render:({field:{ref:a,...l}})=>v.jsx(X5,{...l})})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:$r,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},dN=pi(),G_e=[dN({name:"name",header(){return v.jsx(ne,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),dN({name:"amount",header(){return v.jsx(ne,{label:"Amount (label)"})},render({value:t}){return jn({number:t})},size:10}),dN({name:"passive",header(){return v.jsx(ne,{label:"Passive requirement (label)"})},render({value:t}){return v.jsx($M,{value:t})},size:10})],X_e=({blueprintId:t,table:e,...n})=>{const r=Ar([["Blueprint"],["Blueprint_Requirement"],["Blueprint_Resource_Requirement"],["Resource"]]);return v.jsx(fi,{table:hi({...e,columns:G_e}),action:{table(){return v.jsx(Nr,{children:v.jsx(Un,{label:v.jsx(ne,{label:"Create requirement item (menu)"}),textTitle:v.jsx(ne,{label:"Create requirement item (modal)"}),icon:$r,children:v.jsx(Fz,{mutation:rn({async mutationFn(i){return Mt.transaction().execute(async s=>s.insertInto("Blueprint_Requirement").values({id:Wn(),...i,blueprintId:t}).execute())},async onSuccess(){await r()}})})})})},row({data:i}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit requirement item (modal)"}),icon:$r,children:v.jsx(Fz,{defaultValues:i,mutation:rn({async mutationFn(s){return Mt.transaction().execute(async o=>o.updateTable("Blueprint_Requirement").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete requirement item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>Mt.transaction().execute(async s=>s.deleteFrom("Blueprint_Requirement").where("id","=",i.id).execute()),textContent:v.jsx(ne,{label:"Delete requirement item (content)"}),textToast:"Delete requirement item",invalidator:r})})]})}},...n})},Fx=Pt("/$locale/apps/derivean/root/blueprint/$id/requirements")({validateSearch:Gr(di(lv)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("br.id","=",a.id)),a?.idIn&&(l=l.where("br.id","in",a.idIn)),a?.resourceId&&(l=l.where("br.resourceId","=",a.resourceId)),l},output:H.object({id:H.string().min(1),name:H.string().min(1),resourceId:H.string().min(1),amount:H.number().nonnegative(),passive:cl()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Fx.useLoaderData(),{filter:n,cursor:r,selection:i}=Fx.useSearch(),{id:s}=Fx.useParams(),o=Fx.useNavigate(),{tva:a}=Pr({from:"__root__"}),l=a().slots;return v.jsx("div",{className:l.base(),children:v.jsx(X_e,{blueprintId:s,table:{data:t,filter:{value:n,set:ci(o)},selection:{type:"multi",value:i,set:ia(o)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,o)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of requirements (label)"}),...li(o)}})})}}),vO=Ose({shape:H.object({resourceId:H.string().min(1),amount:od(),cycles:Pc()}),filter:Zs.merge(H.object({blueprintId:H.string().optional(),resourceId:H.string().optional()}))}),Bz=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(vO.shape),defaultValues:{amount:1,cycles:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"resourceId",label:v.jsx(ne,{label:"Resource name (label)"}),children:v.jsx(To,{control:s.control,name:"resourceId",render:({field:{ref:a,...l}})=>v.jsx(cw,{textTitle:v.jsx(ne,{label:"Select resource (title)"}),allowEmpty:!0,...l})})}),v.jsx(hn,{formState:s.formState,name:"amount",label:v.jsx(ne,{label:"Amount (label)"}),children:v.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),v.jsx(hn,{formState:s.formState,name:"cycles",label:v.jsx(ne,{label:"Production cycles (label)"}),hint:v.jsx(ne,{label:"Production cycles (hint)"}),children:v.jsx("input",{type:"number",className:o.input(),...s.register("cycles")})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:ol,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},uw=t=>v.jsx(EW,{icon:ir,textTitle:v.jsx(ne,{label:"Select blueprint (title)"}),table:({table:e,...n})=>v.jsx(x8,{table:{...e,hidden:["requirements","dependencies"]},...n}),render:({entity:e})=>e.name,queryKey:"Blueprint",query:async({filter:e,cursor:n})=>Mt.transaction().execute(async r=>kr({select:r.selectFrom("Blueprint as b").select(["b.id","b.name","b.sort","b.cycles","b.limit",i=>i.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(s=>Cf.jsonGroupArray({id:s.ref("r.id"),name:s.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","b.id").as("regions"),i=>i.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(s=>si`json_group_array(json_object(
                                                    'id', ${s.ref("br.id")},
                                                    'amount', ${s.ref("br.amount")},
                                                    'passive', ${s.ref("br.passive")},
                                                    'resourceId', ${s.ref("br.resourceId")},
                                                    'blueprintId', ${s.ref("br.blueprintId")},
                                                    'name', ${s.ref("r.name")}
                                                ))`.as("requirements")).whereRef("br.blueprintId","=","b.id").as("requirements"),i=>i.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.blueprintId").select(s=>si`json_group_array(json_object(
                                                    'id', ${s.ref("bd.id")},
                                                    'dependencyId', ${s.ref("bd.dependencyId")},
                                                    'blueprintId', ${s.ref("bd.blueprintId")},
                                                    'name', ${s.ref("b.name")}
                                                ))`.as("requirements")).whereRef("bd.blueprintId","=","b.id").as("dependencies")]).orderBy("b.name","asc"),query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("b.id","=",s.id)),s?.fulltext){const a=`%${s.fulltext}%`.toLowerCase();o=o.where(l=>l.or([l("b.id","like",a),l("b.name","like",a)]))}return o},output:H.object({id:H.string().min(1),name:H.string().min(1),cycles:H.number().nonnegative(),sort:H.number().nonnegative(),limit:H.number().nonnegative(),regions:Ms(H.object({id:H.string().min(1),name:H.string().min(1)})),requirements:Ms(lv.entity.merge(H.object({name:H.string().min(1)}))),dependencies:Ms(Jf.entity.merge(H.object({name:H.string().min(1)})))}),filter:e,cursor:n})),...t}),K_e=H.object({blueprintId:H.string().min(1)}),Y_e=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(K_e),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"blueprintId",label:v.jsx(ne,{label:"Target blueprint (label)"}),children:v.jsx(To,{control:s.control,name:"blueprintId",render:({field:{ref:a,...l}})=>v.jsx(uw,{allowEmpty:!0,...l})})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:ir,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},Og=pi(),Z_e=[Og({name:"name",header(){return v.jsx(ne,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsx(Et,{icon:ol,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),Og({name:"amount",header(){return v.jsx(ne,{label:"Amount (label)"})},render({value:t}){return jn({number:t})},size:8}),Og({name:"cycles",header(){return v.jsx(ne,{label:"Production cycles (label)"})},render({value:t}){return jn({number:t})},size:8}),Og({name:"requirements",header(){return v.jsx(ne,{label:"Required resources (label)"})},render({value:t}){return v.jsx(HT,{textTitle:v.jsx(ne,{label:"Resource requirements (title)"}),textEmpty:v.jsx(ne,{label:"No requirements (label)"}),requirements:t})},size:32}),Og({name:"resources",header(){return v.jsx(ne,{label:"Required production resources (label)"})},render({value:t}){return v.jsx(Vf,{items:t,render:({entity:e})=>v.jsxs("div",{className:ln(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[v.jsx("div",{children:e.name}),v.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",jn({number:e.amount})]})]})})},size:32}),Og({name:"dependencies",header(){return v.jsx(ne,{label:"Required production dependencies (label)"})},render({value:t}){return v.jsx(Vf,{items:t,render:({entity:e})=>v.jsx("div",{className:ln(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:v.jsx("div",{children:e.name})})})},size:32})],J_e=({blueprintId:t,table:e,...n})=>{const r=Ar([["Blueprint"],["Blueprint_Production"],["Blueprint_Production_Requirement"],["Resource"]]);return v.jsx(fi,{table:hi({...e,columns:Z_e}),action:{table(){return v.jsx(Nr,{children:v.jsx(Un,{label:v.jsx(ne,{label:"Create blueprint production (menu)"}),textTitle:v.jsx(ne,{label:"Create blueprint production (modal)"}),icon:ol,children:({close:i})=>v.jsx(Bz,{mutation:rn({async mutationFn(s){return Mt.transaction().execute(async o=>await o.insertInto("Blueprint_Production").values({id:Wn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit blueprint production (modal)"}),icon:ol,children:v.jsx(Bz,{defaultValues:i,mutation:rn({async mutationFn(s){return Mt.transaction().execute(async o=>o.updateTable("Blueprint_Production").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),v.jsx(Un,{label:v.jsx(ne,{label:"Move production to (menu)"}),textTitle:v.jsx(ne,{label:"Move production to (modal)"}),icon:$r,children:({close:s})=>v.jsx(Y_e,{mutation:rn({async mutationFn(o){return Mt.transaction().execute(async a=>{await a.updateTable("Blueprint_Production").set({blueprintId:o.blueprintId}).where("id","=",i.id).execute()})},async onSuccess(){await r(),s()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete blueprint production (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>Mt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production").where("id","=",i.id).execute()),textContent:v.jsx(ne,{label:"Delete blueprint production (content)"}),textToast:"Delete blueprint production",invalidator:r})})]})}},...n})},dw=Lse({shape:H.object({blueprintId:H.string().min(1)}),filter:Zs}),fw=Dse({shape:H.object({resourceId:H.string().min(1),amount:od(),passive:H.boolean()}),filter:Zs.merge(H.object({blueprintProductionId:H.string().optional(),resourceId:H.string().optional()}))}),hw=Fse({shape:H.object({resourceId:H.string().min(1),amount:od()}),filter:Zs.merge(H.object({resourceId:H.string().optional()}))}),Bx=Pt("/$locale/apps/derivean/root/blueprint/$id/production")({validateSearch:Gr(di(vO)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>si`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'passive', ${a.ref("bpr.passive")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>si`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(a=>si`json_group_array(json_object(
                                                'id', ${a.ref("bpd.id")},
                                                'blueprintProductionId', ${a.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${a.ref("bpd.blueprintId")},
                                                'name', ${a.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:H.object({id:H.string().min(1),name:H.string().min(1),blueprintId:H.string().min(1),resourceId:H.string().min(1),amount:H.number().nonnegative(),cycles:H.number().nonnegative(),requirements:Ms(fw.entity.merge(H.object({name:H.string().min(1)}))),resources:Ms(hw.entity.merge(H.object({name:H.string().min(1)}))),dependencies:Ms(dw.entity.merge(H.object({name:H.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Bx.useLoaderData(),{filter:n,cursor:r,selection:i}=Bx.useSearch(),{id:s}=Bx.useParams(),o=Bx.useNavigate(),{tva:a}=Pr({from:"__root__"}),l=a().slots;return v.jsx("div",{className:l.base(),children:v.jsx(J_e,{blueprintId:s,table:{data:t,filter:{value:n,set:ci(o)},selection:{type:"multi",value:i,set:ia(o)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,o)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of productions (label)"}),...li(o)}})})}}),Q_e=({label:t,...e})=>v.jsx(ne,{label:`Inventory type - ${t}`,...e}),eSe=Use({shape:H.object({resourceId:H.string().min(1),amount:od(),limit:od(),type:H.enum(["storage","construction"])}),filter:Zs.merge(H.object({resourceId:H.string().optional(),type:H.enum(["storage","construction"]).optional()}))}),jz=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(eSe.shape),defaultValues:{amount:0,limit:0,type:"storage",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"resourceId",label:v.jsx(ne,{label:"Resource name (label)"}),children:v.jsx(To,{control:s.control,name:"resourceId",render:({field:{ref:a,...l}})=>v.jsx(cw,{textTitle:v.jsx(ne,{label:"Select resource (title)"}),allowEmpty:!0,...l})})}),v.jsx(hn,{formState:s.formState,name:"type",label:v.jsx(ne,{label:"Inventory type (label)"}),children:v.jsx(To,{control:s.control,name:"type",render:({field:{ref:a,...l}})=>v.jsx(Y5,{items:[{id:"storage",value:na.text("Inventory type - storage")},{id:"construction",value:na.text("Inventory type - construction")}],render:({entity:c})=>c.value,...l})})}),v.jsx(hn,{formState:s.formState,name:"amount",label:v.jsx(ne,{label:"Amount (label)"}),children:v.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),v.jsx(hn,{formState:s.formState,name:"limit",label:v.jsx(ne,{label:"Inventory limit (label)"}),children:v.jsx("input",{type:"number",className:o.input(),...s.register("limit")})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:Nf,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},AS=pi(),tSe=[AS({name:"name",header(){return v.jsx(ne,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),AS({name:"type",header(){return v.jsx(ne,{label:"Inventory type (label)"})},render({value:t}){return v.jsx(Q_e,{label:t})},filter:{path:"type",onFilter({data:t,filter:e}){e.shallow("type",t.type)}},size:12}),AS({name:"amount",header(){return v.jsx(ne,{label:"Amount (label)"})},render({value:t}){return jn({number:t})},size:12}),AS({name:"limit",header(){return v.jsx(ne,{label:"Inventory limit (label)"})},render({value:t,data:e}){return v.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[v.jsx("div",{children:jn({number:t})}),v.jsx(YM,{value:100*e.amount/e.limit})]})},size:14})],nSe=({blueprintId:t,table:e,...n})=>{const r=Ar([["Blueprint_Inventory"]]),i=rn({async mutationFn(){return Mt.transaction().execute(async s=>v8({tx:s,blueprintId:t}))},async onSuccess(){await r()},onError(s){console.error(s)}});return v.jsx(fi,{table:hi({...e,columns:tSe}),action:{table(){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Create inventory item (menu)"}),textTitle:v.jsx(ne,{label:"Create inventory item (modal)"}),icon:Nf,children:v.jsx(jz,{mutation:rn({async mutationFn(s){return nr.promise(Mt.transaction().execute(async o=>o.insertInto("Blueprint_Inventory").values({id:Wn(),blueprintId:t,inventoryId:(await o.insertInto("Inventory").values({id:Wn(),...s}).returningAll().executeTakeFirstOrThrow()).id}).returningAll().executeTakeFirstOrThrow()),Is("Create inventory item"))},async onSuccess(){await r()}})})}),v.jsx(k2,{icon:Nf,onClick:()=>{i.mutate()},children:v.jsx(ne,{label:"Fill inventory (label)"})})]})},row({data:s}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit inventory item (modal)"}),icon:Nf,children:v.jsx(jz,{defaultValues:s,mutation:rn({async mutationFn(o){return nr.promise(Mt.transaction().execute(async a=>a.updateTable("Inventory").set(o).where("id","=",s.inventoryId).returningAll().executeTakeFirstOrThrow()),Is("Update inventory item"))},async onSuccess(){await r()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>Mt.transaction().execute(async o=>o.deleteFrom("Inventory").where("id","=",s.inventoryId).execute()),textContent:v.jsx(ne,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:r})})]})}},...n})},rSe=kse({shape:H.object({blueprintId:H.string().min(1),inventoryId:H.string().min(1)}),filter:Zs.merge(H.object({blueprintId:H.string().optional(),inventoryId:H.string().optional()}))}),jx=Pt("/$locale/apps/derivean/root/blueprint/$id/inventory")({validateSearch:Gr(di(rSe)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Inventory","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>kr({select:s.selectFrom("Blueprint_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").innerJoin("Resource as r","r.id","i.resourceId").select(["bi.id","r.name","i.amount","i.limit","i.type","i.resourceId","bi.blueprintId","bi.inventoryId"]).where("bi.blueprintId","=",i).orderBy("i.type","asc").orderBy("r.name","asc"),query({select:o,where:a}){let l=o;if(a?.id&&(l=l.where("bi.id","=",a.id)),a?.idIn&&(l=l.where("bi.id","in",a.idIn)),a?.fulltext){const c=`%${a.fulltext}%`.toLowerCase();l=l.where(u=>u.or([u("bi.id","like",`%${c}%`),u("r.id","like",`%${c}%`),u("r.name","like",`%${c}%`),u("r.id","in",u.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(f=>f.or([f("t.code","like",c),f("t.label","like",c),f("t.group","like",c)])))]))}return l},output:H.object({id:H.string().min(1),name:H.string().min(1),type:H.enum(["storage","construction"]),resourceId:H.string().min(1),blueprintId:H.string().min(1),inventoryId:H.string().min(1),amount:H.number().nonnegative(),limit:H.number().int().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=jx.useLoaderData(),{filter:n,cursor:r,selection:i}=jx.useSearch(),{id:s}=jx.useParams(),o=jx.useNavigate(),{tva:a}=Pr({from:"__root__"}),l=a().slots;return v.jsx("div",{className:l.base(),children:v.jsx(nSe,{blueprintId:s,table:{data:t,filter:{value:n,set:ci(o)},selection:{type:"multi",value:i,set:ia(o)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,o)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of items"}),...li(o)}})})}}),E8=Pt("/$locale/apps/derivean/root/blueprint/$id/edit")({component:()=>{const{entity:t}=zi({from:"/$locale/apps/derivean/root/blueprint/$id"}),e=E8.useNavigate(),n=Ar([["Blueprint"]]);return v.jsx("div",{className:"w-1/2 mx-auto",children:v.jsx(IE,{defaultValues:t,mutation:rn({async mutationFn({image:r,regionIds:i,...s}){return Mt.transaction().execute(async o=>{await o.updateTable("Blueprint").set({...s,image:r?await c5(r):null}).where("id","=",t.id).returningAll().executeTakeFirstOrThrow(),await o.deleteFrom("Blueprint_Region").where("blueprintId","=",t.id).execute(),i?.length&&await o.insertInto("Blueprint_Region").values(i.map(a=>({id:Wn(),blueprintId:t.id,regionId:a}))).execute()})},async onSuccess(){await n(),e({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{id:t.id}})}})})})}}),Uz=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(Jf.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"dependencyId",label:v.jsx(ne,{label:"Blueprint dependency (label)"}),children:v.jsx(To,{control:s.control,name:"dependencyId",render:({field:{ref:a,...l}})=>v.jsx(uw,{textTitle:v.jsx(ne,{label:"Select blueprint (title)"}),allowEmpty:!0,...l})})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:ir,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},iSe=pi(),sSe=[iSe({name:"name",header(){return v.jsx(ne,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsx(Et,{icon:ir,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],oSe=({blueprintId:t,table:e,...n})=>{const r=Ar([["Blueprint_Dependency"],["Blueprint"]]);return v.jsx(fi,{table:hi({...e,columns:sSe}),action:{table(){return v.jsx(Nr,{children:v.jsx(Un,{label:v.jsx(ne,{label:"Create blueprint dependency (menu)"}),textTitle:v.jsx(ne,{label:"Create blueprint dependency (modal)"}),icon:ir,children:({close:i})=>v.jsx(Uz,{mutation:rn({async mutationFn(s){return nr.promise(Mt.transaction().execute(async o=>{const a=o.insertInto("Blueprint_Dependency").values({id:Wn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await bb({tx:o}),a}),Is("Create blueprint dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit blueprint dependency (modal)"}),icon:ir,children:({close:s})=>v.jsx(Uz,{defaultValues:i,mutation:rn({async mutationFn(o){return nr.promise(Mt.transaction().execute(async a=>a.updateTable("Blueprint_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Is("Update blueprint dependency"))},async onSuccess(){await r(),s()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete blueprint dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>Mt.transaction().execute(async s=>s.deleteFrom("Blueprint_Dependency").where("id","=",i.id).execute()),textContent:v.jsx(ne,{label:"Delete blueprint dependency (content)"}),textToast:"Delete blueprint dependency",invalidator:r})})]})}},...n})},Ux=Pt("/$locale/apps/derivean/root/blueprint/$id/dependencies")({validateSearch:Gr(di(Jf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bd.id","=",a.id)),a?.idIn&&(l=l.where("bd.id","in",a.idIn)),a?.blueprintId&&(l=l.where("bd.blueprintId","=",a.blueprintId)),a?.dependencyId&&(l=l.where("bd.dependencyId","=",a.dependencyId)),l},output:H.object({id:H.string().min(1),name:H.string().min(1),blueprintId:H.string().min(1),dependencyId:H.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Ux.useLoaderData(),{filter:n,cursor:r,selection:i}=Ux.useSearch(),{id:s}=Ux.useParams(),o=Ux.useNavigate(),{tva:a}=Pr({from:"__root__"}),l=a().slots;return v.jsx("div",{className:l.base(),children:v.jsx(oSe,{blueprintId:s,table:{data:t,filter:{value:n,set:ci(o)},selection:{type:"multi",value:i,set:ia(o)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,o)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of requirements (label)"}),...li(o)}})})}}),aSe=Nse({shape:H.object({conflictId:H.string().min(1)}),filter:Zs}),zz=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(aSe.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"conflictId",label:v.jsx(ne,{label:"Blueprint conflict (label)"}),hint:v.jsx(ne,{label:"Blueprint conflict (hint)"}),children:v.jsx(To,{control:s.control,name:"conflictId",render:({field:{ref:a,...l}})=>v.jsx(uw,{textTitle:v.jsx(ne,{label:"Select blueprint conflict (title)"}),allowEmpty:!0,...l})})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:ir,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},lSe=pi(),cSe=[lSe({name:"name",header(){return v.jsx(ne,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsx(Et,{icon:ir,to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],uSe=({blueprintId:t,table:e,...n})=>{const r=Ar([["Blueprint_Conflict"],["Blueprint"]]);return v.jsx(fi,{table:hi({...e,columns:cSe}),action:{table(){return v.jsx(Nr,{children:v.jsx(Un,{label:v.jsx(ne,{label:"Create blueprint conflict (menu)"}),textTitle:v.jsx(ne,{label:"Create blueprint conflict (modal)"}),icon:ir,children:({close:i})=>v.jsx(zz,{mutation:rn({async mutationFn(s){return nr.promise(Mt.transaction().execute(async o=>{const a=o.insertInto("Blueprint_Conflict").values({id:Wn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await bb({tx:o}),a}),Is("Create blueprint conflict"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit blueprint conflict (modal)"}),icon:ir,children:({close:s})=>v.jsx(zz,{defaultValues:i,mutation:rn({async mutationFn(o){return nr.promise(Mt.transaction().execute(async a=>a.updateTable("Blueprint_Conflict").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Is("Update blueprint conflict"))},async onSuccess(){await r(),s()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete blueprint conflict (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>Mt.transaction().execute(async s=>s.deleteFrom("Blueprint_Conflict").where("id","=",i.id).execute()),textContent:v.jsx(ne,{label:"Delete blueprint conflict (content)"}),textToast:"Delete blueprint conflict",invalidator:r})})]})}},...n})},zx=Pt("/$locale/apps/derivean/root/blueprint/$id/conflicts")({validateSearch:Gr(di(Jf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bc.id","=",a.id)),a?.idIn&&(l=l.where("bc.id","in",a.idIn)),l},output:H.object({id:H.string().min(1),name:H.string().min(1),blueprintId:H.string().min(1),conflictId:H.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=zx.useLoaderData(),{filter:n,cursor:r,selection:i}=zx.useSearch(),{id:s}=zx.useParams(),o=zx.useNavigate(),{tva:a}=Pr({from:"__root__"}),l=a().slots;return v.jsx("div",{className:l.base(),children:v.jsx(uSe,{blueprintId:s,table:{data:t,filter:{value:n,set:ci(o)},selection:{type:"multi",value:i,set:ia(o)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,o)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of conflicts (label)"}),...li(o)}})})}}),dSe=({land:t})=>{const{mapId:e,locale:n}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsx("div",{className:ln(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:v.jsxs("div",{className:"flex flex-row items-center justify-between",children:[v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/land/list",params:{locale:n,mapId:e},search:{zoomToId:t.id},children:t.name}),v.jsx("div",{className:"flex flex-col items-end text-xs",children:v.jsx("div",{className:"flex flex-row gap-1 items-center",children:v.jsx("div",{className:"font-bold",children:jn({number:t.position})})})})]})})},fSe=Sn({slot:{base:["flex","flex-col","gap-4","w-4/12","border-l-2","border-slate-200","shadow-xs","relative","max-h-screen"],title:["flex","flex-row","justify-between","items-center","px-4","py-4","shadow-md"],content:["flex","flex-col","gap-2","max-h-full","overflow-y-auto","px-4","mb-4"]},variant:{},defaults:{}}),aa=({icon:t,textTitle:e,textSubTitle:n,variant:r,tva:i=fSe,css:s,children:o})=>{const{mapId:a,locale:l}=Jt({from:"/$locale/apps/derivean/map/$mapId"}),c=i({...r,css:s}).slots;return v.jsxs("div",{className:c.base(),children:[v.jsxs("div",{className:c.title(),children:[v.jsxs("div",{className:"flex flex-col gap-2 font-bold",children:[v.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[v.jsx(pn,{icon:t,css:{base:["text-slate-500"]}}),e]}),n?v.jsx("div",{className:"flex flex-row gap-2 items-center text-sm text-slate-500",children:n}):null]}),v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:l,mapId:a},children:v.jsx(Pn,{iconEnabled:K2,variant:{variant:"subtle"}})})]}),v.jsx("div",{className:c.content(),children:o})]})},xO="icon-[lucide--land-plot]",hSe=({land:t,...e})=>v.jsx(aa,{icon:xO,textTitle:v.jsx(ne,{label:"Land list (label)"}),...e,children:t.map(n=>v.jsx(dSe,{land:n},n.id))}),M8=Pt("/$locale/apps/derivean/map/$mapId/land/list")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n}}){return{land:await t.ensureQueryData({queryKey:["GameMap",n,"land","list"],async queryFn(){return e.transaction().execute(async r=>Rs({select:r.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId","l.position"]).where("l.mapId","=",n).orderBy("r.name"),output:H.object({id:H.string().min(1),name:H.string().min(1),mapId:H.string().min(1),position:H.number()})}))}})}},component(){const{land:t}=M8.useLoaderData();return v.jsx(hSe,{land:t})}}),pSe=Pt("/$locale/apps/derivean/map/$mapId/land/$landId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,landId:r}}){return{land:await t.ensureQueryData({queryKey:["GameMap",n,"land",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>nc({select:i.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId"]).where("l.id","=",r),output:H.object({id:H.string().min(1),name:H.string().min(1),mapId:H.string().min(1)})}))}})}}}),mSe=({building:t})=>{const{mapId:e,locale:n}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsx("div",{className:ln(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:v.jsxs("div",{className:"flex flex-row items-center justify-between",children:[v.jsx(Et,{icon:Pa,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:n,mapId:e,buildingId:t.id},children:t.name}),v.jsx(Et,{icon:xO,to:"/$locale/apps/derivean/map/$mapId/building/list",params:{locale:n,mapId:e},search:{zoomToId:t.landId},children:t.land})]})})},gSe=({building:t,...e})=>v.jsx(aa,{icon:Pa,textTitle:v.jsx(ne,{label:"Building list (label)"}),...e,children:t.length>0?t.map(n=>v.jsx(mSe,{building:n},n.id)):v.jsx("div",{className:ln(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:v.jsx(ne,{label:"No buildings yet. (label)"})})}),T8=Pt("/$locale/apps/derivean/map/$mapId/building/list")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n}}){return{building:await t.ensureQueryData({queryKey:["GameMap",n,"building","list"],async queryFn(){return e.transaction().execute(async r=>Rs({select:r.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","b.landId","r.name as land"]).where("l.mapId","=",n).orderBy("bl.name","asc"),output:H.object({id:H.string().min(1),name:H.string().min(1),landId:H.string().min(1),land:H.string().min(1)})}))}})}},component(){const{building:t}=T8.useLoaderData();return v.jsx(gSe,{building:t})}}),ySe=Pt("/$locale/apps/derivean/map/$mapId/building/$buildingId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{building:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>nc({select:i.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","b.blueprintId","r.name as land","b.constructionId","b.productionId","b.recurringProductionId"]).where("b.id","=",r),output:H.object({id:H.string().min(1),name:H.string().min(1),blueprintId:H.string().min(1),land:H.string().min(1),constructionId:H.string().nullish(),productionId:H.string().nullish(),recurringProductionId:H.string().nullish()})}))}})}}}),vSe=Pt("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId")({async loader({context:{queryClient:t,kysely:e},params:{blueprintId:n}}){return{blueprint:await t.ensureQueryData({queryKey:["GameMap","blueprint",n,"fetch"],async queryFn(){return e.transaction().execute(async r=>nc({select:r.selectFrom("Blueprint as b").select(["b.id","b.name"]).where("b.id","=",n),output:H.object({id:H.string().min(1),name:H.string().min(1)})}))}})}}}),xSe=({entity:t,...e})=>{const{locale:n}=Jt({from:"/$locale"});return v.jsxs(sm,{...e,children:[v.jsx(Er,{icon:yO,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Production requirements (menu)"})}),v.jsx(Er,{icon:$r,to:"/$locale/apps/derivean/game/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Production resource requirements (menu)"})}),v.jsx(Er,{icon:ir,to:"/$locale/apps/derivean/game/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:v.jsx(ne,{label:"Production resource dependencies (menu)"})})]})},bSe=t=>{const{locale:e}=Jt({from:"/$locale"});return v.jsx(tv,{title:({entity:n})=>v.jsx(nv,{icon:ol,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>v.jsx(v.Fragment,{children:v.jsx(Et,{icon:ir,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:v.jsx(ne,{label:"Building base detail (label)"})})}),...t})},C8=Pt("/$locale/apps/derivean/game/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await nc({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:H.object({id:H.string().min(1),resource:H.string().min(1),blueprint:H.string().min(1),blueprintId:H.string().min(1),amount:H.number().nonnegative(),cycles:H.number().int().nonnegative()})})}))}})},component(){const{entity:t}=C8.useLoaderData(),{tva:e}=Pr({from:"__root__"}),n=e().slots;return v.jsxs("div",{className:n.base(),children:[v.jsx(bSe,{entity:t}),v.jsx(xSe,{entity:t}),v.jsx(ll,{})]})}}),wSe=t=>v.jsx(K5,{items:[{id:"name",label:v.jsx(ne,{label:"Building name (label)"}),render({entity:e}){return e.name}},{id:"cycles",label:v.jsx(ne,{label:"Construction cycles (label)"}),render({entity:e}){return jn({number:e.cycles})}}],...t}),_Se=Pt("/$locale/apps/derivean/game/blueprint/$id/view")({component(){const{entity:t}=zi({from:"/$locale/apps/derivean/game/blueprint/$id"});return v.jsx("div",{className:"w-1/2 mx-auto",children:v.jsx(wSe,{entity:t})})}}),fN=pi(),SSe=[fN({name:"name",header(){return v.jsx(ne,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),fN({name:"amount",header(){return v.jsx(ne,{label:"Amount (label)"})},render({value:t}){return jn({number:t})},size:10}),fN({name:"passive",header(){return v.jsx(ne,{label:"Passive requirement (label)"})},render({value:t}){return v.jsx($M,{value:t})},size:10})],ESe=({table:t,...e})=>v.jsx(fi,{table:hi({...t,columns:SSe}),...e}),d1=Pt("/$locale/apps/derivean/game/blueprint/$id/requirements")({validateSearch:Gr(di(lv)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("br.id","=",a.id)),a?.idIn&&(l=l.where("br.id","in",a.idIn)),a?.resourceId&&(l=l.where("br.resourceId","=",a.resourceId)),l},output:H.object({id:H.string().min(1),name:H.string().min(1),resourceId:H.string().min(1),amount:H.number().nonnegative(),passive:cl()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=d1.useLoaderData(),{filter:n,cursor:r}=d1.useSearch(),i=d1.useNavigate(),{tva:s}=Pr({from:"__root__"}),o=s().slots;return v.jsx("div",{className:o.base(),children:v.jsx(ESe,{table:{data:t,filter:{value:n,set:ci(i)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,i)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of requirements (label)"}),...li(i)}})})}}),Lg=pi(),MSe=[Lg({name:"name",header(){return v.jsx(ne,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsx(Et,{icon:ol,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),Lg({name:"amount",header(){return v.jsx(ne,{label:"Amount (label)"})},render({value:t}){return jn({number:t})},size:8}),Lg({name:"cycles",header(){return v.jsx(ne,{label:"Production cycles (label)"})},render({value:t}){return jn({number:t})},size:8}),Lg({name:"requirements",header(){return v.jsx(ne,{label:"Required resources (label)"})},render({value:t}){return v.jsx(HT,{textTitle:v.jsx(ne,{label:"Resource requirements (title)"}),textEmpty:v.jsx(ne,{label:"No requirements (label)"}),requirements:t})},size:32}),Lg({name:"resources",header(){return v.jsx(ne,{label:"Required production resources (label)"})},render({value:t}){return v.jsx(Vf,{items:t,render:({entity:e})=>v.jsxs("div",{className:ln(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[v.jsx("div",{children:e.name}),v.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",jn({number:e.amount})]})]})})},size:32}),Lg({name:"dependencies",header(){return v.jsx(ne,{label:"Required production dependencies (label)"})},render({value:t}){const{locale:e}=Jt({from:"/$locale"});return v.jsx(Vf,{items:t,render:({entity:n})=>v.jsx("div",{className:ln(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:v.jsx(Et,{to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:e,id:n.blueprintId},children:n.name})})})},size:32})],TSe=({table:t,...e})=>v.jsx(fi,{table:hi({...t,columns:MSe}),...e}),f1=Pt("/$locale/apps/derivean/game/blueprint/$id/production")({validateSearch:Gr(di(vO)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>si`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'passive', ${a.ref("bpr.passive")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>si`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(a=>si`json_group_array(json_object(
                                                'id', ${a.ref("bpd.id")},
                                                'blueprintProductionId', ${a.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${a.ref("bpd.blueprintId")},
                                                'name', ${a.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:H.object({id:H.string().min(1),name:H.string().min(1),blueprintId:H.string().min(1),resourceId:H.string().min(1),amount:H.number().nonnegative(),cycles:H.number().nonnegative(),requirements:Ms(fw.entity.merge(H.object({name:H.string().min(1)}))),resources:Ms(hw.entity.merge(H.object({name:H.string().min(1)}))),dependencies:Ms(dw.entity.merge(H.object({name:H.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=f1.useLoaderData(),{filter:n,cursor:r}=f1.useSearch(),i=f1.useNavigate(),{tva:s}=Pr({from:"__root__"}),o=s().slots;return v.jsx("div",{className:o.base(),children:v.jsx(TSe,{table:{data:t,filter:{value:n,set:ci(i)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,i)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of productions (label)"}),...li(i)}})})}}),CSe=pi(),ISe=[CSe({name:"name",header(){return v.jsx(ne,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsx(Et,{icon:ir,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],RSe=({table:t,...e})=>v.jsx(fi,{table:hi({...t,columns:ISe}),...e}),h1=Pt("/$locale/apps/derivean/game/blueprint/$id/dependencies")({validateSearch:Gr(di(Jf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bd.id","=",a.id)),a?.idIn&&(l=l.where("bd.id","in",a.idIn)),a?.blueprintId&&(l=l.where("bd.blueprintId","=",a.blueprintId)),a?.dependencyId&&(l=l.where("bd.dependencyId","=",a.dependencyId)),l},output:H.object({id:H.string().min(1),name:H.string().min(1),blueprintId:H.string().min(1),dependencyId:H.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=h1.useLoaderData(),{filter:n,cursor:r}=h1.useSearch(),i=h1.useNavigate(),{tva:s}=Pr({from:"__root__"}),o=s().slots;return v.jsx("div",{className:o.base(),children:v.jsx(RSe,{table:{data:t,filter:{value:n,set:ci(i)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,i)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of dependencies (label)"}),...li(i)}})})}}),ASe=pi(),NSe=[ASe({name:"name",header(){return v.jsx(ne,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsx(Et,{icon:ir,to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],PSe=({table:t,...e})=>v.jsx(fi,{table:hi({...t,columns:NSe}),...e}),p1=Pt("/$locale/apps/derivean/game/blueprint/$id/conflicts")({validateSearch:Gr(di(Jf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bc.id","=",a.id)),a?.idIn&&(l=l.where("bc.id","in",a.idIn)),l},output:H.object({id:H.string().min(1),name:H.string().min(1),blueprintId:H.string().min(1),conflictId:H.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=p1.useLoaderData(),{filter:n,cursor:r}=p1.useSearch(),i=p1.useNavigate(),{tva:s}=Pr({from:"__root__"}),o=s().slots;return v.jsx("div",{className:o.base(),children:v.jsx(PSe,{table:{data:t,filter:{value:n,set:ci(i)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,i)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of conflicts (label)"}),...li(i)}})})}}),I8=jse({shape:H.object({blueprintId:H.string().min(1),constructionId:H.string().optional(),productionId:H.string().optional(),recurringProductionId:H.string().optional(),x:od(),y:od()}),filter:Zs.merge(H.object({userId:H.string().optional(),blueprintId:H.string().optional(),name:H.string().optional()}))}),kSe=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(I8.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"blueprintId",label:v.jsx(ne,{label:"Select blueprint (label)"}),children:v.jsx(To,{control:s.control,name:"blueprintId",render:({field:{ref:a,...l}})=>v.jsx(uw,{allowEmpty:!0,...l})})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:Pa,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},OSe=pi(),LSe=[OSe({name:"name",header(){return v.jsx(ne,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsxs("div",{className:"flex flex-row gap-2",children:[v.jsx(Et,{icon:ir,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId}}),e]})},size:14})],DSe=({table:t,...e})=>{const n=Ar([["Building"]]);return v.jsx(fi,{table:hi({...t,columns:LSe}),action:{row({data:r}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit building (modal)"}),icon:Pa,children:v.jsx(kSe,{defaultValues:r,mutation:rn({async mutationFn(i){return nr.promise(Mt.transaction().execute(s=>s.updateTable("Building").set(i).where("id","=",r.id).returningAll().executeTakeFirstOrThrow()),Is("Edit building"))},async onSuccess(){await n()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete building (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>Mt.transaction().execute(async i=>i.deleteFrom("Building").where("id","=",r.id).execute()),textContent:v.jsx(ne,{label:"Building delete (content)"}),textToast:"Building delete",invalidator:n})})]})}},...e})},m1=Pt("/$locale/apps/derivean/root/user/$id/building/list")({validateSearch:Gr(di(I8)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Building","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>kr({select:s.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name","b.blueprintId"]).where("b.userId","=",i),output:H.object({id:H.string().min(1),name:H.string().min(1),blueprintId:H.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=m1.useLoaderData(),{filter:n,cursor:r,selection:i}=m1.useSearch(),s=m1.useNavigate(),{tva:o}=Pr({from:"__root__"}),a=o().slots;return v.jsx("div",{className:a.base(),children:v.jsx(DSe,{table:{data:t,filter:{value:n,set:ci(s)},selection:{type:"multi",value:i,set:ia(s)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,s)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of buildings (label)"}),...li(s)}})})}}),Vz=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(hw.shape),defaultValues:{amount:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"resourceId",label:v.jsx(ne,{label:"Requirement (label)"}),children:v.jsx(To,{control:s.control,name:"resourceId",render:({field:{ref:a,...l}})=>v.jsx(cw,{allowEmpty:!0,...l})})}),v.jsx(hn,{formState:s.formState,name:"amount",label:v.jsx(ne,{label:"Amount (label)"}),children:v.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:$r,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},Wz=pi(),FSe=[Wz({name:"name",header(){return v.jsx(ne,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),Wz({name:"amount",header(){return v.jsx(ne,{label:"Amount (label)"})},render({value:t}){return jn({number:t})},size:10})],BSe=({blueprintProductionId:t,table:e,...n})=>{const r=Ar([["Blueprint_Production_Resource"],["Blueprint_Production"],["Resource"]]);return v.jsx(fi,{table:hi({...e,columns:FSe}),action:{table(){return v.jsx(Nr,{children:v.jsx(Un,{label:v.jsx(ne,{label:"Create production resource requirement (menu)"}),textTitle:v.jsx(ne,{label:"Create production resource requirement (modal)"}),icon:$r,children:({close:i})=>v.jsx(Vz,{mutation:rn({async mutationFn(s){return Mt.transaction().execute(async o=>o.insertInto("Blueprint_Production_Resource").values({id:Wn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit production resource requirement (modal)"}),icon:$r,children:({close:s})=>v.jsx(Vz,{defaultValues:i,mutation:rn({async mutationFn(o){return Mt.transaction().execute(async a=>a.updateTable("Blueprint_Production_Resource").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete production resource requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>Mt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Resource").where("id","=",i.id).execute()),textContent:v.jsx(ne,{label:"Delete production resource requirement (content)"}),textToast:"Delete production resource requirement item",invalidator:r})})]})}},...n})},Vx=Pt("/$locale/apps/derivean/root/blueprint/production/$id/resources")({validateSearch:Gr(di(hw)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bpr.id","=",a.id)),a?.idIn&&(l=l.where("bpr.id","in",a.idIn)),a?.resourceId&&(l=l.where("bpr.resourceId","=",a.resourceId)),l},output:H.object({id:H.string().min(1),name:H.string().min(1),resourceId:H.string().min(1),amount:H.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Vx.useLoaderData(),{filter:n,cursor:r,selection:i}=Vx.useSearch(),{id:s}=Vx.useParams(),o=Vx.useNavigate();return v.jsx(v.Fragment,{children:v.jsx(BSe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:ci(o)},selection:{type:"multi",value:i,set:ia(o)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,o)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of production resource requirements (label)"}),...li(o)}})})}}),qz=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(fw.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"resourceId",label:v.jsx(ne,{label:"Requirement (label)"}),children:v.jsx(To,{control:s.control,name:"resourceId",render:({field:{ref:a,...l}})=>v.jsx(cw,{allowEmpty:!0,...l})})}),v.jsx(hn,{formState:s.formState,name:"amount",label:v.jsx(ne,{label:"Amount (label)"}),children:v.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),v.jsx(hn,{formState:s.formState,name:"passive",label:v.jsx(ne,{label:"Passive requirement (label)"}),hint:v.jsx(ne,{label:"Passive requirement (hint)"}),children:v.jsx(To,{control:s.control,name:"passive",render:({field:{ref:a,...l}})=>v.jsx(X5,{...l})})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:$r,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},hN=pi(),jSe=[hN({name:"name",header(){return v.jsx(ne,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),hN({name:"amount",header(){return v.jsx(ne,{label:"Amount (label)"})},render({value:t}){return jn({number:t})},size:10}),hN({name:"passive",header(){return v.jsx(ne,{label:"Passive requirement (label)"})},render({value:t}){return v.jsx($M,{value:t})},size:10})],USe=({blueprintProductionId:t,table:e,...n})=>{const r=Ar([["Blueprint_Production_Requirement"],["Blueprint_Production"],["Resource"]]);return v.jsx(fi,{table:hi({...e,columns:jSe}),action:{table(){return v.jsx(Nr,{children:v.jsx(Un,{label:v.jsx(ne,{label:"Create production requirement (menu)"}),textTitle:v.jsx(ne,{label:"Create production requirement (modal)"}),icon:$r,children:({close:i})=>v.jsx(qz,{mutation:rn({async mutationFn(s){return Mt.transaction().execute(async o=>o.insertInto("Blueprint_Production_Requirement").values({id:Wn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit production requirement (modal)"}),icon:$r,children:({close:s})=>v.jsx(qz,{defaultValues:i,mutation:rn({async mutationFn(o){return Mt.transaction().execute(async a=>a.updateTable("Blueprint_Production_Requirement").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete production requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>Mt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Requirement").where("id","=",i.id).execute()),textContent:v.jsx(ne,{label:"Delete production requirement (content)"}),textToast:"Delete production requirement item",invalidator:r})})]})}},...n})},Wx=Pt("/$locale/apps/derivean/root/blueprint/production/$id/requirements")({validateSearch:Gr(di(fw)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bpr.id","=",a.id)),a?.idIn&&(l=l.where("bpr.id","in",a.idIn)),a?.resourceId&&(l=l.where("bpr.resourceId","=",a.resourceId)),l},output:H.object({id:H.string().min(1),name:H.string().min(1),resourceId:H.string().min(1),amount:H.number().nonnegative(),passive:cl()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Wx.useLoaderData(),{filter:n,cursor:r,selection:i}=Wx.useSearch(),{id:s}=Wx.useParams(),o=Wx.useNavigate();return v.jsx(v.Fragment,{children:v.jsx(USe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:ci(o)},selection:{type:"multi",value:i,set:ia(o)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,o)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of production requirements (label)"}),...li(o)}})})}}),Hz=({mutation:t,defaultValues:e,variant:n,tva:r=us,css:i})=>{const s=ds({resolver:fs(dw.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return v.jsxs("form",{className:o.base(),onSubmit:Qs({form:s,mutation:t}),children:[v.jsx(ts,{variant:{highlight:!0},error:s.formState.errors.root}),v.jsx(hn,{formState:s.formState,name:"blueprintId",label:v.jsx(ne,{label:"Blueprint dependency (label)"}),children:v.jsx(To,{control:s.control,name:"blueprintId",render:({field:{ref:a,...l}})=>v.jsx(uw,{textTitle:v.jsx(ne,{label:"Select blueprint (title)"}),allowEmpty:!0,...l})})}),v.jsx("div",{className:"flex flex-row justify-between gap-8",children:v.jsx(Pn,{iconEnabled:ir,type:"submit",children:v.jsx(ne,{label:"Save (submit)"})})})]})},zSe=pi(),VSe=[zSe({name:"name",header(){return v.jsx(ne,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsx(Et,{icon:ir,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],WSe=({blueprintProductionId:t,table:e,...n})=>{const r=Ar([["Blueprint_Production_Dependency"],["Blueprint"]]);return v.jsx(fi,{table:hi({...e,columns:VSe}),action:{table(){return v.jsx(Nr,{children:v.jsx(Un,{label:v.jsx(ne,{label:"Create blueprint production dependency (menu)"}),textTitle:v.jsx(ne,{label:"Create blueprint production dependency (modal)"}),icon:ir,children:({close:i})=>v.jsx(Hz,{mutation:rn({async mutationFn(s){return nr.promise(Mt.transaction().execute(async o=>{const a=o.insertInto("Blueprint_Production_Dependency").values({id:Wn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow();return await bb({tx:o}),a}),Is("Create blueprint production dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return v.jsxs(Nr,{children:[v.jsx(Un,{label:v.jsx(ne,{label:"Edit (menu)"}),textTitle:v.jsx(ne,{label:"Edit blueprint production dependency (modal)"}),icon:ir,children:({close:s})=>v.jsx(Hz,{defaultValues:i,mutation:rn({async mutationFn(o){return nr.promise(Mt.transaction().execute(async a=>a.updateTable("Blueprint_Production_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Is("Update blueprint production dependency"))},async onSuccess(){await r(),s()}})})}),v.jsx(Un,{icon:Ti,label:v.jsx(ne,{label:"Delete (menu)"}),textTitle:v.jsx(ne,{label:"Delete blueprint production dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:v.jsx(sa,{callback:async()=>Mt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Dependency").where("id","=",i.id).execute()),textContent:v.jsx(ne,{label:"Delete blueprint production dependency (content)"}),textToast:"Delete blueprint production dependency",invalidator:r})})]})}},...n})},qx=Pt("/$locale/apps/derivean/root/blueprint/production/$id/dependencies")({validateSearch:Gr(di(dw)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bpd.id","=",a.id)),a?.idIn&&(l=l.where("bpd.id","in",a.idIn)),l},output:H.object({id:H.string().min(1),name:H.string().min(1),blueprintId:H.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=qx.useLoaderData(),{filter:n,cursor:r,selection:i}=qx.useSearch(),{id:s}=qx.useParams(),o=qx.useNavigate(),{tva:a}=Pr({from:"__root__"}),l=a().slots;return v.jsx("div",{className:l.base(),children:v.jsx(WSe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:ci(o)},selection:{type:"multi",value:i,set:ia(o)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,o)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of dependencies (label)"}),...li(o)}})})}}),qSe=Pt("/$locale/apps/derivean/map/$mapId/road/$roadId/view")({component(){return"mrdka"}}),HSe=Sn({slot:{base:["flex","flex-col","gap-2","rounded-md","bg-white","border","border-slate-300","p-2","hover:bg-slate-100","cursor-draggable"]},variant:{isDragging:{true:[]}},match:[{if:{isDragging:!0},then:{base:["cursor-grabbing","bg-slate-100"]}}],defaults:{isDragging:!1}}),ZP="icon-[emojione-monotone--construction]",$Se=async({userId:t,blueprintId:e,landId:n,plotId:r,plan:i,valid:s})=>Mt.transaction().execute(async o=>{const a=await o.selectFrom("Blueprint as b").select(["b.cycles"]).where("b.id","=",e).executeTakeFirstOrThrow(),l=await o.insertInto("Building").values({id:Wn(),userId:t,blueprintId:e,landId:n,constructionId:(await o.insertInto("Construction").values({id:Wn(),userId:t,cycle:0,cycles:a.cycles,plan:i}).returning("id").executeTakeFirstOrThrow()).id,plotId:r,valid:s}).returningAll().executeTakeFirstOrThrow(),c=await o.selectFrom("Inventory as i").select(["i.amount","i.limit","i.resourceId","i.type"]).where("i.id","in",o.selectFrom("Blueprint_Inventory as bi").select("bi.inventoryId").where("bi.blueprintId","=",e)).execute();for await(const{amount:u,limit:f,resourceId:p,type:g}of c)await o.insertInto("Building_Inventory").values({id:Wn(),buildingId:l.id,inventoryId:(await o.insertInto("Inventory").values({id:Wn(),amount:u,limit:f,resourceId:p,type:g}).returning("id").executeTakeFirstOrThrow()).id}).execute();return l}),bO=X.memo(({cycles:t})=>v.jsxs("div",{className:ln(["flex","flex-row","items-center","gap-2"]),children:[v.jsx(pn,{css:{base:["text-slate-400"]},icon:gO}),v.jsx("div",{className:"font-bold text-md",children:jn({number:t})})]})),GSe=({blueprint:t,land:e,userId:n,variant:r,tva:i=HSe,css:s})=>{const{mapId:o,locale:a}=Jt({from:"/$locale/apps/derivean/map/$mapId"}),l=em(),c=Ar([["GameMap"]]),u=rn({async mutationFn({blueprintId:p,landId:g,plotId:x}){const S=await $Se({userId:n,blueprintId:p,landId:g,plotId:x,plan:!0,valid:!1});l({to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:a,mapId:o,landId:e.id},search:{zoomToId:S.id}})},async onSuccess(){await c()},onError(p){console.error(p)}}),f=i({...r,css:s}).slots;return v.jsx("div",{className:f.base(),children:v.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between",children:[v.jsxs("div",{className:"flex flex-row gap-2",children:[v.jsxs($s,{children:["x",t.count]}),v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements",params:{locale:a,mapId:o,blueprintId:t.id},css:{base:["font-bold"]},children:t.name})]}),v.jsxs("div",{className:"flex flex-row gap-2",children:[v.jsx(bO,{cycles:t.cycles}),v.jsx(Pn,{iconEnabled:ZP,iconDisabled:ZP,loading:u.isPending,onClick:()=>{u.mutate({blueprintId:t.id,landId:e.id,plotId:"unknown`"})}})]})]})})},XSe=({userId:t,land:e,blueprints:n,...r})=>{const{locale:i,mapId:s}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsx(aa,{icon:ZP,textTitle:v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:i,mapId:s,landId:e.id},search:{zoomToId:e.id},children:e.name}),textSubTitle:v.jsx(ne,{label:"Construction (label)"}),...r,children:n.length>0?n.map(o=>v.jsx(GSe,{blueprint:o,userId:t,land:e},o.id)):v.jsx("div",{className:ln(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:v.jsx(ne,{label:"There are no available blueprints (label)"})})})},R8=Pt("/$locale/apps/derivean/map/$mapId/land/$landId/construction")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,landId:i}}){const s=await n();return{user:s,blueprints:await t.ensureQueryData({queryKey:["GameMap",r,"land",i,"construction","list"],async queryFn(){return e.transaction().execute(async o=>Rs({select:o.selectFrom(o.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",a=>a.selectFrom("Building as bg").select(l=>l.fn.count("bg.id").as("count")).whereRef("bg.blueprintId","=","bl.id").where("bg.userId","=",s.id).where("bg.landId","is",i).as("count"),a=>a.case().when(a.not(a.exists(a.selectFrom("Blueprint_Dependency as bd").select(a.lit(1).as("one")).whereRef("bd.blueprintId","=","bl.id").where(l=>l.not(l.exists(l.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").select(l.lit(1).as("one")).where("b.constructionId","is",null).where("b.userId","=",s.id).where("l.mapId","=",r).whereRef("b.blueprintId","=","bd.dependencyId"))))))).then(a.lit(!0)).else(a.lit(!1)).end().as("withAvailableBuildings")]).where("bl.id","not in",o.selectFrom("Blueprint_Conflict as bc").select("bc.conflictId").where("bc.blueprintId","in",o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").select("bg.blueprintId").where("bg.userId","=",s.id).where("l.mapId","=",r))).where("bl.id","in",o.selectFrom("Blueprint_Region as br").innerJoin("Land as l","l.regionId","br.regionId").select("br.blueprintId").where("l.id","=",i)).as("blueprint")).selectAll().where("withAvailableBuildings","=",!0).orderBy("blueprint.sort","asc"),output:H.object({id:H.string().min(1),name:H.string().min(1),count:H.number().int().nonnegative(),cycles:H.number().int().nonnegative(),sort:H.number().int().nonnegative(),withAvailableBuildings:cl()})}))}})}},component(){const{user:t,blueprints:e}=R8.useLoaderData(),{land:n}=zi({from:"/$locale/apps/derivean/map/$mapId/land/$landId"});return v.jsx(XSe,{userId:t.id,land:n,blueprints:e})}}),np=["p-4","border","border-slate-300","w-full","justify-start"],Lp="icon-[hugeicons--package-receive]",JP="icon-[heroicons--queue-list]",mM="icon-[hugeicons--package-sent]",A8="icon-[icon-park-outline--transport]",KSe=({building:t})=>{const{mapId:e,locale:n}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsxs(aa,{icon:Pa,textTitle:v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:n,mapId:e,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),textSubTitle:t.land,children:[v.jsx(Et,{icon:ol,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:n,mapId:e,buildingId:t.id},css:{base:np},children:v.jsx(ne,{label:"Building production (label)"})}),v.jsx(Et,{icon:JP,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue",params:{locale:n,mapId:e,buildingId:t.id},css:{base:np},children:v.jsx(ne,{label:"Production queue (label)"})}),v.jsx(Et,{icon:Nf,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:n,mapId:e,buildingId:t.id},css:{base:np},children:v.jsx(ne,{label:"Building inventory (label)"})}),v.jsx(Et,{icon:mM,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:{locale:n,mapId:e,buildingId:t.id},css:{base:np},children:v.jsx(ne,{label:"Supply list (label)"})}),v.jsx(Et,{icon:Lp,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/demand",params:{locale:n,mapId:e,buildingId:t.id},css:{base:np},children:v.jsx(ne,{label:"Demand list (label)"})}),v.jsx(Et,{icon:A8,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/transport",params:{locale:n,mapId:e,buildingId:t.id},css:{base:np},children:v.jsx(ne,{label:"Transport list (label)"})}),v.jsx(Et,{icon:Pa,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/link",params:{locale:n,mapId:e,buildingId:t.id},css:{base:np},children:v.jsx(ne,{label:"Building links (label)"})}),v.jsx("div",{className:"border-b border-slate-300"}),v.jsx("div",{className:ln(["w-full","h-96","bg-contain","p-2",`bg-${t.blueprintId}`])})]})},wO="icon-[hugeicons--package]",YSe=({mapId:t,userId:e,requirement:n})=>{const r=Ar([["GameMap"]]),i=n.available||0,s=rn({async mutationFn({demandId:a}){return Mt.transaction().execute(async l=>{const{priority:c}=await l.selectFrom("Demand as d").select(u=>u.fn.max("d.priority").as("priority")).where("d.mapId","=",t).where("d.userId","=",e).where("d.id","!=",a).executeTakeFirstOrThrow();return l.updateTable("Demand").set({priority:c+1}).where("id","=",a).execute()})},async onSuccess(){await r()}}),o=rn({async mutationFn({demandId:a}){return Mt.transaction().execute(async l=>{const{priority:c}=await l.selectFrom("Demand as d").select(u=>u.fn.min("d.priority").as("priority")).where("d.mapId","=",t).where("d.userId","=",e).where("d.id","!=",a).executeTakeFirstOrThrow();return l.updateTable("Demand").set({priority:c-1}).where("id","=",a).execute()})},async onSuccess(){await r()}});return v.jsxs("div",{className:ln(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",n.supply?["bg-purple-50","border-purple-400","hover:bg-purple-50","hover:border-purple-400"]:["bg-red-50","border-red-400","hover:bg-red-50","hover:border-red-400"],n.transport||i>=n.amount?["bg-green-50","border-green-400","hover:bg-green-50","hover:border-green-400"]:void 0]),children:[v.jsxs("div",{className:"flex flex-row items-center justify-between",children:[v.jsxs("div",{className:ln(["flex","flex-row","gap-2","items-center",n.supply?["text-purple-600"]:["text-red-600"],n.transport||i>=n.amount?["text-green-600"]:void 0]),children:[n.supply||i>=n.amount?v.jsx(pn,{icon:Lp}):v.jsx(pn,{icon:wO}),v.jsx("div",{className:"font-bold",children:n.name})]}),v.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[v.jsx("div",{children:jn({number:i})}),v.jsx("div",{children:"/"}),v.jsx("div",{className:"font-bold",children:jn({number:n.amount})})]})]}),v.jsx(YM,{value:100*i/n.amount,css:{progress:i>=n.amount?["bg-green-500"]:void 0}}),n.demand?v.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[v.jsx(Pn,{iconEnabled:rW,variant:{variant:"subtle"},loading:s.isPending||o.isPending,onClick:()=>{n.demand&&s.mutate({demandId:n.demand.id})},children:v.jsx(ne,{label:"Priority up (label)"})}),v.jsx($s,{css:{base:["bg-purple-50","border-purple-400","text-purple-600"]},children:n.demand.priority}),v.jsx(Pn,{iconEnabled:nW,variant:{variant:"subtle"},loading:s.isPending||o.isPending,onClick:()=>{n.demand&&o.mutate({demandId:n.demand.id})},children:v.jsx(ne,{label:"Priority down (label)"})})]}):null]})},ZSe=({userId:t,building:e,requirement:n,...r})=>{const{locale:i,mapId:s}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsx(aa,{icon:yO,textTitle:v.jsx(ne,{label:"Construction requirements (label)"}),textSubTitle:v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:s,buildingId:e.id},search:{zoomToId:e.id},children:e.name}),...r,children:n.length>0?n.map(o=>v.jsx(YSe,{mapId:s,userId:t,requirement:o},o.id)):v.jsx("div",{className:ln(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:v.jsx(ne,{label:"There are no construction requirements (label)"})})})},N8=Pt("/$locale/apps/derivean/map/$mapId/building/$buildingId/view")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,buildingId:i}}){return{user:await n(),requirement:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"construction","requirement"],async queryFn(){return e.transaction().execute(async o=>Rs({select:o.selectFrom("Blueprint_Requirement as br").innerJoin("Building as bg",a=>a.onRef("bg.blueprintId","=","br.blueprintId").on("bg.id","=",i)).innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive",a=>a.selectFrom("Transport as t").select(l=>l.fn.count("t.id").as("transport")).whereRef("t.targetId","=","bg.id").whereRef("t.resourceId","=","br.resourceId").as("transport"),a=>a.selectFrom("Supply as s").innerJoin("Building as b","b.id","s.buildingId").innerJoin("Blueprint as bp","bp.id","b.blueprintId").select(l=>Cf.jsonObject({id:l.ref("s.id"),buildingId:l.ref("s.buildingId"),name:l.ref("bp.name")}).as("supply")).whereRef("s.resourceId","=","br.resourceId").where("s.buildingId","in",a.selectFrom("Building_To_Building as btb").select("btb.linkId").where("btb.buildingId","=",i)).as("supply"),a=>a.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",o.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",i)).whereRef("i.resourceId","=","br.resourceId").where("i.type","=","construction").limit(1).as("available"),a=>a.selectFrom("Demand as d").select(l=>Cf.jsonObject({id:l.ref("d.id"),priority:l.ref("d.priority")}).as("demand")).whereRef("d.resourceId","=","br.resourceId").where("d.buildingId","=",i).as("demand")]).orderBy("r.name","asc"),output:H.object({id:H.string().min(1),name:H.string().min(1),amount:H.number().nonnegative(),transport:H.number().nonnegative(),available:H.number().nonnegative().nullish(),supply:oF(H.object({id:H.string().min(1),buildingId:H.string().min(1),name:H.string().min(1)})).nullish(),demand:oF(H.object({id:H.string().min(1),priority:H.number()})).nullish(),passive:cl()})}))}})}},component(){const{building:t}=zi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{user:e,requirement:n}=N8.useLoaderData();return t.constructionId?v.jsx(ZSe,{userId:e.id,building:t,requirement:n}):v.jsx(KSe,{building:t})}}),JSe=({transport:t})=>{const{mapId:e,locale:n}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsxs("div",{className:ln(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[v.jsx("div",{className:"font-bold",children:t.resource}),v.jsx(Et,{icon:Pa,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:n,mapId:e,buildingId:t.sourceId},search:{zoomToId:t.sourceId},children:t.source}),v.jsxs($s,{children:["x",t.amount]})]})},QSe=({building:t,transport:e,...n})=>{const{mapId:r,locale:i}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsx(aa,{icon:A8,textTitle:v.jsx(ne,{label:"Transport list (label)"}),textSubTitle:v.jsxs(v.Fragment,{children:[v.jsx(Et,{icon:Na,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/transport",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>v.jsx(JSe,{transport:s},s.id)):v.jsx("div",{className:ln(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:v.jsx(ne,{label:"There is nothing on the way to this building. (label)"})})})},P8=Pt("/$locale/apps/derivean/map/$mapId/building/$buildingId/transport")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{transport:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"transport","list"],queryFn:async()=>e.transaction().execute(async i=>Rs({select:i.selectFrom("Transport as t").innerJoin("Building as source","source.id","t.sourceId").innerJoin("Blueprint as bl","bl.id","source.blueprintId").innerJoin("Resource as r","r.id","t.resourceId").select(["t.id","r.name as resource","source.id as sourceId","bl.name as source","t.amount"]).where("t.targetId","=",r).orderBy("r.name","asc"),output:H.object({id:H.string().min(1),resource:H.string().min(1),source:H.string().min(1),sourceId:H.string().min(1),amount:H.number()})}))})}},component(){const{building:t}=zi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{transport:e}=P8.useLoaderData();return v.jsx(QSe,{building:t,transport:e})}}),e1e=({supply:t})=>{const e=Ar([["GameMap"]]),n=rn({async mutationFn({supplyId:r}){return Mt.transaction().execute(async i=>i.deleteFrom("Supply").where("id","=",r).execute())},async onSuccess(){await e()}});return v.jsxs("div",{className:ln(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[v.jsx("div",{className:"flex flex-row gap-2 items-center",children:t.name}),v.jsx(Pn,{iconEnabled:Ti,loading:n.isPending,onClick:()=>{n.mutate({supplyId:t.id})},variant:{variant:"danger"}})]})},t1e=({building:t,supply:e,...n})=>{const{mapId:r,locale:i}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsx(aa,{icon:mM,textTitle:v.jsx(ne,{label:"Supply of (label)"}),textSubTitle:v.jsxs(v.Fragment,{children:[v.jsx(Et,{icon:Na,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>v.jsx(e1e,{supply:s},s.id)):v.jsx("div",{className:ln(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:v.jsx(ne,{label:"This building does not supply anything. (label)"})})})},k8=Pt("/$locale/apps/derivean/map/$mapId/building/$buildingId/supply")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{supply:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"supply","list"],queryFn:async()=>e.transaction().execute(async i=>Rs({select:i.selectFrom("Supply as s").innerJoin("Resource as r","r.id","s.resourceId").select(["s.id","r.name"]).where("s.buildingId","=",r).orderBy("r.name","asc"),output:H.object({id:H.string().min(1),name:H.string().min(1)})}))})}},component(){const{building:t}=zi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{supply:e}=k8.useLoaderData();return v.jsx(t1e,{building:t,supply:e})}}),n1e=({building:t,link:e})=>{const{mapId:n,locale:r}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsx("div",{className:ln(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:v.jsxs("div",{className:"flex flex-row items-center justify-between",children:[v.jsx(Et,{icon:Pa,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:e.id},search:{zoomToId:e.id},children:e.name}),v.jsx(Et,{icon:xO,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/link",params:{locale:r,mapId:n,buildingId:t.id},search:{zoomToId:e.landId},children:e.land})]})})},r1e=({building:t,link:e,...n})=>{const{locale:r,mapId:i}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsx(aa,{icon:Pa,textTitle:v.jsx(ne,{label:"Building links (label)"}),textSubTitle:v.jsxs(v.Fragment,{children:[v.jsx(Et,{icon:Na,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:i,buildingId:t.id}}),v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/link",params:{locale:r,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>v.jsx(n1e,{building:t,link:s},s.id)):v.jsx("div",{className:ln(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:v.jsx(ne,{label:"No linked buildings. (label)"})})})},O8=Pt("/$locale/apps/derivean/map/$mapId/building/$buildingId/link")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{link:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"link"],async queryFn(){return e.transaction().execute(async i=>Rs({select:i.selectFrom("Building_To_Building as btb").innerJoin("Building as b","b.id","btb.linkId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").innerJoin("Blueprint as bp","bp.id","b.blueprintId").select(["btb.id","bp.name","b.landId","r.name as land"]).where("btb.buildingId","=",r).orderBy("bp.name"),output:H.object({id:H.string().min(1),name:H.string().min(1),landId:H.string().min(1),land:H.string().min(1)})}))}})}},component(){const{building:t}=zi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{link:e}=O8.useLoaderData();return v.jsx(r1e,{link:e,building:t})}}),i1e=H.object({buildingId:H.string().min(1),resourceId:H.string().min(1),mapId:H.string().min(1),userId:H.string().min(1),amount:od()}),s1e=({mapId:t,userId:e,inventory:n})=>{const r=Ar([["GameMap"]]),i=rn({async mutationFn({buildingId:l,resourceId:c,supplyId:u,mapId:f,userId:p}){return Mt.transaction().execute(async g=>u?g.deleteFrom("Supply").where("id","=",u).execute():g.insertInto("Supply").values({id:Wn(),buildingId:l,resourceId:c,mapId:f,userId:p}).execute())},async onSuccess(){await r()}}),s=rn({async mutationFn({buildingId:l,resourceId:c,demandId:u,mapId:f,userId:p,amount:g}){return Mt.transaction().execute(async x=>{if(u)return x.deleteFrom("Demand").where("id","=",u).execute();const{sum:S}=await x.selectFrom("Transport as t").select(b=>b.fn.sum("t.amount").as("sum")).where("t.resourceId","=",c).where("t.targetId","=",l).executeTakeFirstOrThrow(),_=g+(S||0);if(n.limit>0&&_<=0){nr.error(na.text("Not enough space (inventory is full/all resources are already on the way) (toast)"));return}return x.insertInto("Demand").values({id:Wn(),buildingId:l,resourceId:c,mapId:f,userId:p,amount:n.limit>0?_:1,priority:0,type:"storage"}).execute()})},async onSuccess(){await r()}}),o=ds({resolver:fs(i1e),defaultValues:{mapId:t,userId:e,buildingId:n.buildingId,resourceId:n.resourceId,amount:n.limit>0?n.limit-n.amount:1}}),a=us({isLoading:o.formState.isLoading,isSubmitting:o.formState.isSubmitting}).slots;return v.jsxs("div",{className:ln(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",n.limit>0&&n.amount>=n.limit?["border-amber-400","bg-amber-50","hover:bg-amber-50","hover:border-amber-600"]:void 0,n.supplyId||n.demandId?["bg-purple-50","border-purple-400","hover:bg-purple-50","hover:border-purple-400"]:void 0]),children:[v.jsxs("div",{className:"flex flex-row items-center justify-between",children:[v.jsxs("div",{className:ln(["flex","flex-row","gap-2","items-center",n.supplyId||n.demandId?["text-purple-600"]:void 0]),children:[v.jsx("div",{className:"font-bold",children:n.name}),n.supplyId?v.jsx(pn,{icon:mM}):null,n.demandId?v.jsx(pn,{icon:Lp}):null]}),jn({number:n.amount})," /"," ",jn({number:n.limit})]}),v.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between",children:[v.jsx(Pn,{iconEnabled:n.supplyId?Ti:mM,loading:i.isPending,onClick:()=>{i.mutate({mapId:t,userId:e,buildingId:n.buildingId,resourceId:n.resourceId,supplyId:n.supplyId})},variant:{variant:"subtle"},children:n.supplyId?v.jsx(ne,{label:"Cancel supply (label)"}):v.jsx(ne,{label:"Supply resource (label)"})}),v.jsx("div",{className:ln(["border-2","border-purple-400","rounded-md","w-[64px]","h-[64px]","bg-contain",`bg-${n.resourceId}`])}),n.demandId?v.jsx(Pn,{iconEnabled:Ti,loading:s.isPending,onClick:()=>{s.mutate({mapId:t,userId:e,buildingId:n.buildingId,resourceId:n.resourceId,amount:0,demandId:n.demandId})},variant:{variant:"subtle"},children:v.jsx(ne,{label:"Cancel demand (label)"})}):v.jsx(rm,{textTitle:v.jsx(ne,{label:"Demand resource (title)"}),target:v.jsx(Pn,{iconEnabled:Lp,variant:{variant:"subtle"},children:v.jsx(ne,{label:"Demand resource (label)"})}),css:{modal:["w-1/3"]},children:v.jsxs("form",{className:a.base(),onSubmit:Qs({form:o,mutation:s}),children:[v.jsx(ts,{variant:{highlight:!0},error:o.formState.errors.root}),v.jsx(hn,{formState:o.formState,name:"amount",label:v.jsx(ne,{label:"Demanded amount (label)"}),children:v.jsx("input",{type:"number",min:1,max:n.limit-n.amount,className:a.input(),...o.register("amount")})}),v.jsx(Pn,{iconEnabled:Lp,iconDisabled:wO,type:"submit",children:v.jsx(ne,{label:"Submit demand (submit)"})})]})})]}),n.limit>0?v.jsx(YM,{variant:{size:"md"},value:100*n.amount/n.limit,css:{progress:n.amount>=n.limit?["bg-amber-500"]:void 0}}):null]})},o1e=({building:t,userId:e,inventory:n,fulltextProps:r,...i})=>{const{locale:s,mapId:o}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsxs(aa,{icon:Nf,textTitle:v.jsx(ne,{label:"Inventory (label)"}),textSubTitle:v.jsxs(v.Fragment,{children:[v.jsx(Et,{icon:Na,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:o,buildingId:t.id}}),v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:s,mapId:o,buildingId:t.id},children:t.name})]}),...i,children:[v.jsx(tW,{...r}),v.jsx("div",{children:v.jsx(ne,{label:"Inventory - storage (label)",css:{base:["font-bold","text-slate-500"]}})}),n.length>0?n.map(a=>v.jsx(s1e,{mapId:o,userId:e,inventory:a},a.id)):v.jsx("div",{className:ln(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:v.jsx(ne,{label:"No inventory storage. (label)"})})]})},g1=Pt("/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory")({validateSearch:Gr(H.object({fulltext:H.string().optional()})),loaderDeps({search:{fulltext:t}}){return{fulltext:t}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{fulltext:r},params:{mapId:i,buildingId:s}}){return{user:await n(),inventory:await t.ensureQueryData({queryKey:["GameMap",i,"building",s,"inventory","storage",{fulltext:r}],async queryFn(){return e.transaction().execute(async a=>Rs({select:a.selectFrom("Inventory as i").innerJoin("Building_Inventory as bi",l=>l.on("bi.buildingId","=",s).onRef("bi.inventoryId","=","i.id")).innerJoin("Resource as r","r.id","i.resourceId").leftJoin("Supply as s",l=>l.onRef("s.resourceId","=","i.resourceId").on("s.buildingId","=",s)).leftJoin("Demand as d",l=>l.onRef("d.resourceId","=","i.resourceId").on("d.buildingId","=",s)).select(["i.id","i.amount","i.limit","r.name","bi.buildingId","i.resourceId","s.id as supplyId","d.id as demandId"]).where("i.type","in",["storage"]).orderBy("r.name"),query({select:l,where:c}){let u=l;if(c?.fulltext){const f=`%${c.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("r.name","like",f)]))}return u},output:H.object({id:H.string().min(1),buildingId:H.string().min(1),resourceId:H.string().min(1),amount:H.number().nonnegative(),limit:H.number().nonnegative(),name:H.string().min(1),supplyId:H.string().nullish(),demandId:H.string().nullish()}),filter:{fulltext:r}}))}})}},component(){const{building:t}=zi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{fulltext:e}=g1.useSearch(),n=g1.useNavigate(),{user:r,inventory:i}=g1.useLoaderData();return v.jsx(o1e,{building:t,userId:r.id,inventory:i,fulltextProps:{value:e,onFulltext(s){n({search:{fulltext:s}})}}})}}),a1e=({mapId:t,userId:e,demand:n})=>{const r=Ar([["GameMap"]]),i=rn({async mutationFn({demandId:a}){return Mt.transaction().execute(async l=>l.deleteFrom("Demand").where("id","=",a).execute())},async onSuccess(){await r()}}),s=rn({async mutationFn({demandId:a}){return Mt.transaction().execute(async l=>{const{priority:c}=await l.selectFrom("Demand as d").select(u=>u.fn.max("d.priority").as("priority")).where("d.mapId","=",t).where("d.userId","=",e).where("d.id","!=",a).executeTakeFirstOrThrow();return l.updateTable("Demand").set({priority:c+1}).where("id","=",a).execute()})},async onSuccess(){await r()}}),o=rn({async mutationFn({demandId:a}){return Mt.transaction().execute(async l=>{const{priority:c}=await l.selectFrom("Demand as d").select(u=>u.fn.min("d.priority").as("priority")).where("d.mapId","=",t).where("d.userId","=",e).where("d.id","!=",a).executeTakeFirstOrThrow();return l.updateTable("Demand").set({priority:c-1}).where("id","=",a).execute()})},async onSuccess(){await r()}});return v.jsxs("div",{className:ln(["flex","flex-col","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200",n.transport?["text-green-600","bg-green-50","border-green-400"]:void 0]),children:[v.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[v.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[(n.transport||0)>0?v.jsx(pn,{icon:Lp}):v.jsx(pn,{icon:wO}),v.jsx("div",{className:"font-bold",children:n.name})]}),v.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[v.jsxs($s,{css:{base:n.transport?["bg-green-50","border-green-400","hover:bg-green-50","hover:border-green-400"]:void 0},children:["x",jn({number:n.amount})]}),v.jsx(Pn,{iconEnabled:Ti,loading:i.isPending,onClick:()=>{i.mutate({demandId:n.id})},variant:{variant:"danger"}})]})]}),v.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[v.jsx(Pn,{iconEnabled:rW,variant:{variant:"subtle"},loading:s.isPending||o.isPending,onClick:()=>{s.mutate({demandId:n.id})},children:v.jsx(ne,{label:"Priority up (label)"})}),v.jsx($s,{css:{base:["bg-purple-50","border-purple-400","text-purple-600"]},children:n.priority}),v.jsx(Pn,{iconEnabled:nW,variant:{variant:"subtle"},loading:s.isPending||o.isPending,onClick:()=>{o.mutate({demandId:n.id})},children:v.jsx(ne,{label:"Priority down (label)"})})]})]})},l1e=({userId:t,building:e,demand:n,...r})=>{const{mapId:i,locale:s}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsx(aa,{icon:Lp,textTitle:v.jsx(ne,{label:"Demand (label)"}),textSubTitle:v.jsxs(v.Fragment,{children:[v.jsx(Et,{icon:Na,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:e.id}}),v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/demand",params:{locale:s,mapId:i,buildingId:e.id},search:{zoomToId:e.id},children:e.name})]}),...r,children:n.length>0?n.map(o=>v.jsx(a1e,{mapId:i,userId:t,demand:o},o.id)):v.jsx("div",{className:ln(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:v.jsx(ne,{label:"This building does not demand anything. (label)"})})})},L8=Pt("/$locale/apps/derivean/map/$mapId/building/$buildingId/demand")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,buildingId:i}}){return{user:await n(),demand:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"demand","list"],queryFn:async()=>e.transaction().execute(async o=>Rs({select:o.selectFrom("Demand as d").innerJoin("Building_Inventory as bi","bi.buildingId","d.buildingId").innerJoin("Inventory as i",a=>a.onRef("i.id","=","bi.inventoryId").onRef("i.resourceId","=","d.resourceId")).innerJoin("Resource as r","r.id","d.resourceId").select(["d.id","r.name","d.amount","i.limit","d.priority","i.amount as available",a=>a.selectFrom("Transport as t").select(l=>l.fn.sum("t.amount").as("transport")).whereRef("t.targetId","=","d.buildingId").whereRef("t.resourceId","=","d.resourceId").as("transport")]).where("d.buildingId","=",i).where("i.type","=","storage").where("d.type","=","storage").orderBy("r.name","asc"),output:H.object({id:H.string().min(1),name:H.string().min(1),amount:H.number(),available:H.number(),priority:H.number(),limit:H.number(),transport:H.number().nullish()})}))})}},component(){const{building:t}=zi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{user:e,demand:n}=L8.useLoaderData();return v.jsx(l1e,{userId:e.id,building:t,demand:n})}}),D8=({requirement:t})=>{const e=(t.available||0)>=t.amount;return v.jsxs("div",{className:ln(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.passive?["border-purple-300","hover:border-purple-500","hover:bg-purple-100"]:void 0,t.available===void 0||e?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),children:[v.jsx("div",{className:"font-bold",children:t.name}),t.available===void 0?v.jsxs($s,{children:["x",jn({number:t.amount})]}):v.jsxs($s,{css:{base:e?["bg-green-200","border-green-500"]:["bg-red-200","border-red-500"]},children:[v.jsx("div",{className:"font-bold",children:jn({number:t.available})}),v.jsx("div",{children:"/"}),v.jsx("div",{className:"font-light",children:jn({number:t.amount})})]})]})},c1e=({blueprint:t,requirement:e,...n})=>v.jsxs(aa,{icon:$r,textTitle:v.jsx(ne,{label:"Building requirements (label)"}),textSubTitle:t.name,...n,children:[e.length>0?e.map(r=>v.jsx(D8,{requirement:r},r.id)):v.jsx("div",{className:ln(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:v.jsx(ne,{label:"There are no requirements. (label)"})}),v.jsx("div",{className:"border-b border-slate-300"}),v.jsx("div",{className:ln(["w-full","h-96","bg-contain","p-2",`bg-${t.id}`])})]}),F8=Pt("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{blueprintId:n}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","blueprint",n,"requirements"],async queryFn(){return e.transaction().execute(async r=>Rs({select:r.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive"]).where("br.blueprintId","=",n),output:H.object({id:H.string().min(1),name:H.string().min(1),amount:H.number().nonnegative(),passive:cl()})}))}})}},component(){const{blueprint:t}=zi({from:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId"}),{requirement:e}=F8.useLoaderData();return v.jsx(c1e,{blueprint:t,requirement:e})}}),$z=pi(),u1e=[$z({name:"name",header(){return v.jsx(ne,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),$z({name:"amount",header(){return v.jsx(ne,{label:"Amount (label)"})},render({value:t}){return jn({number:t})},size:10})],d1e=({table:t,...e})=>v.jsx(fi,{table:hi({...t,columns:u1e}),...e}),y1=Pt("/$locale/apps/derivean/game/blueprint/production/$id/resources")({validateSearch:Gr(di(hw)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bpr.id","=",a.id)),a?.idIn&&(l=l.where("bpr.id","in",a.idIn)),a?.resourceId&&(l=l.where("bpr.resourceId","=",a.resourceId)),l},output:H.object({id:H.string().min(1),name:H.string().min(1),resourceId:H.string().min(1),amount:H.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=y1.useLoaderData(),{filter:n,cursor:r}=y1.useSearch(),i=y1.useNavigate();return v.jsx(v.Fragment,{children:v.jsx(d1e,{table:{data:t,filter:{value:n,set:ci(i)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,i)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of production resource requirements (label)"}),...li(i)}})})}}),pN=pi(),f1e=[pN({name:"name",header(){return v.jsx(ne,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),pN({name:"amount",header(){return v.jsx(ne,{label:"Amount (label)"})},render({value:t}){return jn({number:t})},size:10}),pN({name:"passive",header(){return v.jsx(ne,{label:"Passive requirement (label)"})},render({value:t}){return v.jsx($M,{value:t})},size:10})],h1e=({table:t,...e})=>v.jsx(fi,{table:hi({...t,columns:f1e}),...e}),v1=Pt("/$locale/apps/derivean/game/blueprint/production/$id/requirements")({validateSearch:Gr(di(fw)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bpr.id","=",a.id)),a?.idIn&&(l=l.where("bpr.id","in",a.idIn)),a?.resourceId&&(l=l.where("bpr.resourceId","=",a.resourceId)),l},output:H.object({id:H.string().min(1),name:H.string().min(1),resourceId:H.string().min(1),amount:H.number().nonnegative(),passive:cl()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=v1.useLoaderData(),{filter:n,cursor:r}=v1.useSearch(),i=v1.useNavigate();return v.jsx(v.Fragment,{children:v.jsx(h1e,{table:{data:t,filter:{value:n,set:ci(i)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,i)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of production requirements (label)"}),...li(i)}})})}}),p1e=pi(),m1e=[p1e({name:"name",header(){return v.jsx(ne,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=Jt({from:"/$locale"});return v.jsx(Et,{icon:ir,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],g1e=({table:t,...e})=>v.jsx(fi,{table:hi({...t,columns:m1e}),...e}),x1=Pt("/$locale/apps/derivean/game/blueprint/production/$id/dependencies")({validateSearch:Gr(di(dw)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>kr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bpd.id","=",a.id)),a?.idIn&&(l=l.where("bpd.id","in",a.idIn)),l},output:H.object({id:H.string().min(1),name:H.string().min(1),blueprintId:H.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=x1.useLoaderData(),{filter:n,cursor:r}=x1.useSearch(),i=x1.useNavigate(),{tva:s}=Pr({from:"__root__"}),o=s().slots;return v.jsx("div",{className:o.base(),children:v.jsx(g1e,{table:{data:t,filter:{value:n,set:ci(i)}},fulltext:{value:n?.fulltext,set:ui(n?.fulltext,i)},cursor:{count:e,cursor:r,textTotal:v.jsx(ne,{label:"Number of dependencies (label)"}),...li(i)}})})}}),y1e=({queue:t,inventory:e})=>{const n=e.find(i=>i.resourceId===t.resourceId),r=n&&n.amount+t.amount>n.limit;return v.jsxs("div",{className:ln(["flex","flex-col","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300",r?["border-red-400","hover:border-red-600"]:void 0]),children:[v.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[v.jsx("div",{className:"font-bold",children:t.name}),v.jsx("div",{className:"flex flex-row gap-2 items-center",children:v.jsxs($s,{children:["x",jn({number:t.amount})]})}),v.jsx(bO,{cycles:t.cycles})]}),v.jsx(YM,{css:{progress:r?["bg-red-500"]:void 0},value:100*t.cycle/t.cycles})]})},v1e=({building:t,queue:e,inventory:n,...r})=>{const{mapId:i,locale:s}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsx(aa,{icon:JP,textTitle:v.jsx(ne,{label:"Production queue (label)"}),textSubTitle:v.jsxs(v.Fragment,{children:[v.jsx(Et,{icon:Na,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:t.id}}),v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...r,children:e.length>0?e.map(o=>v.jsx(y1e,{queue:o,inventory:n},o.id)):v.jsxs("div",{className:ln(["flex","flex-col","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:[v.jsx(ne,{label:"Production queue is empty. (label)"}),v.jsx(Et,{icon:JP,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id},children:v.jsx(ne,{label:"Plan queue (label)"})})]})})},B8=Pt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{queue:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production","queue"],async queryFn(){return e.transaction().execute(async i=>Rs({select:i.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","r.name","bp.resourceId","p.cycle","bp.amount","bp.cycles"]).where("p.buildingId","=",r),output:H.object({id:H.string().min(1),name:H.string().min(1),resourceId:H.string().min(1),amount:H.number().nonnegative(),cycle:H.number().int().nonnegative(),cycles:H.number().int().nonnegative()})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"inventory","list"],async queryFn(){return e.transaction().execute(async i=>Rs({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","i.amount","i.limit","r.name"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).orderBy("r.name"),query({select:s,where:o}){let a=s;if(o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(c=>c.or([c("r.name","like",l)]))}return a},output:H.object({id:H.string().min(1),resourceId:H.string().min(1),amount:H.number().nonnegative(),limit:H.number().nonnegative(),name:H.string().min(1)})}))}})}},component(){const{building:t}=zi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{queue:e,inventory:n}=B8.useLoaderData();return v.jsx(v1e,{building:t,queue:e,inventory:n})}}),Gz="icon-[tabler--basket]",x1e="icon-[oui--refresh]",b1e=({building:t,production:e})=>{const{mapId:n,locale:r}=Jt({from:"/$locale/apps/derivean/map/$mapId"}),i=Ar([["GameMap"]]),s=rn({async mutationFn({blueprintProductionId:c,buildingId:u}){return Mt.transaction().execute(async f=>f.updateTable("Building").set({productionId:c}).where("id","=",u).execute())},async onSuccess(){await i()}}),o=rn({async mutationFn({buildingId:c}){return Mt.transaction().execute(async u=>u.updateTable("Building").set({productionId:null}).where("id","=",c).execute())},async onSuccess(){await i()}}),a=rn({async mutationFn({blueprintProductionId:c,buildingId:u}){return Mt.transaction().execute(async f=>f.updateTable("Building").set({recurringProductionId:c}).where("id","=",u).execute())},async onSuccess(){await i()}}),l=rn({async mutationFn({buildingId:c}){return Mt.transaction().execute(async u=>u.updateTable("Building").set({recurringProductionId:null}).where("id","=",c).execute())},async onSuccess(){await i()}});return v.jsxs("div",{className:ln(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200",e.withAvailableResources?["bg-green-50","border-green-500"]:["bg-red-50","border-red-500"]]),children:[v.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[t.productionId===e.id?v.jsx(Pn,{iconEnabled:Gz,loading:o.isPending,onClick:()=>{o.mutate({buildingId:t.id})}}):v.jsx(Pn,{iconEnabled:"icon-[solar--play-outline]",loading:s.isPending,onClick:()=>{s.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),t.recurringProductionId===e.id?v.jsx(Pn,{iconEnabled:Gz,loading:l.isPending,onClick:()=>{l.mutate({buildingId:t.id})}}):v.jsx(Pn,{iconEnabled:x1e,loading:a.isPending,onClick:()=>{a.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),v.jsxs(Et,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements",params:{locale:r,mapId:n,buildingId:t.id,productionId:e.id},children:[e.name,v.jsxs($s,{children:["x",jn({number:e.amount})]})]})]}),v.jsx(bO,{cycles:e.cycles})]})},w1e=({building:t,production:e,...n})=>{const{mapId:r,locale:i}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsx(aa,{icon:ol,textTitle:v.jsx(ne,{label:"Building production (label)"}),textSubTitle:v.jsxs(v.Fragment,{children:[v.jsx(Et,{icon:Na,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>v.jsx(b1e,{building:t,production:s},s.id)):v.jsx("div",{className:ln(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:v.jsx(ne,{label:"This building does not produce anything. (label)"})})})},j8=Pt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,buildingId:i}}){const s=await n();return{production:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"production","list"],async queryFn(){return e.transaction().execute(async o=>Rs({select:o.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.cycles",a=>a.case().when(a.not(a.exists(a.selectFrom("Blueprint_Production_Requirement as bpr").select(a.lit(1).as("one")).whereRef("bpr.blueprintProductionId","=","bp.id").where(l=>l.not(l.exists(l.selectFrom("Inventory as i").select(l.lit(1).as("one")).where("i.id","in",l.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).where("i.type","in",["storage"]).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))).then(a.lit(!0)).else(a.lit(!1)).end().as("withAvailableResources")]).where("bp.blueprintId","=",o.selectFrom("Building as b").select("b.blueprintId").where("b.id","=",i)).where(a=>a.not(a.exists(a.selectFrom("Blueprint_Production_Dependency as bpd").select("bpd.blueprintProductionId").whereRef("bpd.blueprintProductionId","=","bp.id").where(l=>l.not(l.exists(l.selectFrom("Building as b").select("b.blueprintId").where("b.userId","=",s.id).where("b.constructionId","is",null).whereRef("b.blueprintId","=","bpd.blueprintId"))))))).where(a=>a.not(a.exists(a.selectFrom("Blueprint_Production_Resource as bpr").select("bpr.blueprintProductionId").whereRef("bpr.blueprintProductionId","=","bp.id").where(l=>l.not(l.exists(l.selectFrom("Inventory as i").select("i.resourceId").where("i.id","in",l.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))).orderBy("r.name"),output:H.object({id:H.string().min(1),name:H.string().min(1),amount:H.number().nonnegative(),cycles:H.number().int().nonnegative(),withAvailableResources:cl()})}))}})}},component(){const{building:t}=zi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=j8.useLoaderData();return v.jsx(w1e,{building:t,production:e})}}),_1e=Pt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r,productionId:i}}){return{production:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production",i,"fetch"],async queryFn(){return e.transaction().execute(async s=>nc({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","bp.amount","r.name"]).where("bp.id","=",i),output:H.object({id:H.string().min(1),amount:H.number().nonnegative(),name:H.string().min(1)})}))}})}}}),S1e=({building:t,production:e,requirement:n,...r})=>{const{mapId:i,locale:s}=Jt({from:"/$locale/apps/derivean/map/$mapId"});return v.jsx(aa,{icon:$r,textTitle:v.jsx(ne,{label:"Production requirements (label)"}),textSubTitle:v.jsxs(v.Fragment,{children:[v.jsx(Et,{icon:Na,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id}}),v.jsx(Et,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),v.jsx("div",{children:e.name})]}),...r,children:n.length>0?n.map(o=>v.jsx(D8,{requirement:o},o.id)):v.jsx("div",{className:ln(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:v.jsx(ne,{label:"There are no requirements. (label)"})})})},U8=Pt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r,productionId:i}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production",i,"requirement","list"],async queryFn(){return e.transaction().execute(async s=>Rs({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.amount","bpr.passive",o=>o.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",s.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","bpr.resourceId").where("i.type","=","storage").orderBy("i.amount","desc").limit(1).as("available")]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),output:H.object({id:H.string().min(1),name:H.string().min(1),amount:H.number().nonnegative(),available:H.number().nonnegative().nullish(),passive:cl()})}))}})}},component(){const{building:t}=zi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=zi({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId"}),{requirement:n}=U8.useLoaderData();return v.jsx(S1e,{building:t,production:e,requirement:n})}}),_O=$ie.update({id:"/$locale",path:"/$locale",getParentRoute:()=>nk}),E1e=Kie.update({id:"/",path:"/",getParentRoute:()=>nk}),M1e=Yie.update({id:"/",path:"/",getParentRoute:()=>_O}),Qf=Jie.update({id:"/apps/derivean",path:"/apps/derivean",getParentRoute:()=>_O}),Da=tse.update({id:"/root",path:"/root",getParentRoute:()=>Qf}),z8=nse.update({id:"/map",path:"/map",getParentRoute:()=>Qf}),pw=rse.update({id:"/game",path:"/game",getParentRoute:()=>Qf}),T1e=lse.update({id:"/",path:"/",getParentRoute:()=>Da}),C1e=GW.update({id:"/",path:"/",getParentRoute:()=>pw}),I1e=AP.update({id:"/editor",path:"/editor",getParentRoute:()=>Da}),R1e=Nhe.update({id:"/public/register",path:"/public/register",getParentRoute:()=>Qf}),A1e=Phe.update({id:"/public/logout",path:"/public/logout",getParentRoute:()=>Qf}),N1e=Dhe.update({id:"/public/login",path:"/public/login",getParentRoute:()=>Qf}),eh=c8.update({id:"/$mapId",path:"/$mapId",getParentRoute:()=>z8}),P1e=u8.update({id:"/db/schema",path:"/db/schema",getParentRoute:()=>Qf}),k1e=s1.update({id:"/user/list",path:"/user/list",getParentRoute:()=>Da}),SO=d8.update({id:"/user/$id",path:"/user/$id",getParentRoute:()=>Da}),O1e=o1.update({id:"/tag/list",path:"/tag/list",getParentRoute:()=>Da}),L1e=a1.update({id:"/resource/list",path:"/resource/list",getParentRoute:()=>Da}),V8=m8.update({id:"/resource/$id",path:"/resource/$id",getParentRoute:()=>Da}),D1e=l1.update({id:"/region/list",path:"/region/list",getParentRoute:()=>Da}),W8=I_e.update({id:"/region/$id",path:"/region/$id",getParentRoute:()=>Da}),F1e=c1.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>Da}),th=b8.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>Da}),B1e=L_e.update({id:"/view",path:"/view",getParentRoute:()=>eh}),j1e=u1.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>pw}),cv=w8.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>pw}),U1e=U_e.update({id:"/view",path:"/view",getParentRoute:()=>SO}),z1e=z_e.update({id:"/view",path:"/view",getParentRoute:()=>V8}),V1e=V_e.update({id:"/view",path:"/view",getParentRoute:()=>W8}),$T=_8.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>Da}),W1e=S8.update({id:"/view",path:"/view",getParentRoute:()=>th}),q1e=Fx.update({id:"/requirements",path:"/requirements",getParentRoute:()=>th}),H1e=Bx.update({id:"/production",path:"/production",getParentRoute:()=>th}),$1e=jx.update({id:"/inventory",path:"/inventory",getParentRoute:()=>th}),G1e=E8.update({id:"/edit",path:"/edit",getParentRoute:()=>th}),X1e=Ux.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>th}),K1e=zx.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>th}),Y1e=M8.update({id:"/land/list",path:"/land/list",getParentRoute:()=>eh}),q8=pSe.update({id:"/land/$landId",path:"/land/$landId",getParentRoute:()=>eh}),Z1e=T8.update({id:"/building/list",path:"/building/list",getParentRoute:()=>eh}),Xc=ySe.update({id:"/building/$buildingId",path:"/building/$buildingId",getParentRoute:()=>eh}),H8=vSe.update({id:"/blueprint/$blueprintId",path:"/blueprint/$blueprintId",getParentRoute:()=>eh}),GT=C8.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>pw}),J1e=_Se.update({id:"/view",path:"/view",getParentRoute:()=>cv}),Q1e=d1.update({id:"/requirements",path:"/requirements",getParentRoute:()=>cv}),eEe=f1.update({id:"/production",path:"/production",getParentRoute:()=>cv}),tEe=h1.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>cv}),nEe=p1.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>cv}),rEe=m1.update({id:"/building/list",path:"/building/list",getParentRoute:()=>SO}),iEe=Vx.update({id:"/resources",path:"/resources",getParentRoute:()=>$T}),sEe=Wx.update({id:"/requirements",path:"/requirements",getParentRoute:()=>$T}),oEe=qx.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>$T}),aEe=qSe.update({id:"/road/$roadId/view",path:"/road/$roadId/view",getParentRoute:()=>eh}),lEe=R8.update({id:"/construction",path:"/construction",getParentRoute:()=>q8}),cEe=N8.update({id:"/view",path:"/view",getParentRoute:()=>Xc}),uEe=P8.update({id:"/transport",path:"/transport",getParentRoute:()=>Xc}),dEe=k8.update({id:"/supply",path:"/supply",getParentRoute:()=>Xc}),fEe=O8.update({id:"/link",path:"/link",getParentRoute:()=>Xc}),hEe=g1.update({id:"/inventory",path:"/inventory",getParentRoute:()=>Xc}),pEe=L8.update({id:"/demand",path:"/demand",getParentRoute:()=>Xc}),mEe=F8.update({id:"/requirements",path:"/requirements",getParentRoute:()=>H8}),gEe=y1.update({id:"/resources",path:"/resources",getParentRoute:()=>GT}),yEe=v1.update({id:"/requirements",path:"/requirements",getParentRoute:()=>GT}),vEe=x1.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>GT}),xEe=B8.update({id:"/production/queue",path:"/production/queue",getParentRoute:()=>Xc}),bEe=j8.update({id:"/production/list",path:"/production/list",getParentRoute:()=>Xc}),$8=_1e.update({id:"/production/$productionId",path:"/production/$productionId",getParentRoute:()=>Xc}),wEe=U8.update({id:"/requirements",path:"/requirements",getParentRoute:()=>$8}),_Ee={LocaleAppsDeriveanGameBlueprintIdConflictsRoute:nEe,LocaleAppsDeriveanGameBlueprintIdDependenciesRoute:tEe,LocaleAppsDeriveanGameBlueprintIdProductionRoute:eEe,LocaleAppsDeriveanGameBlueprintIdRequirementsRoute:Q1e,LocaleAppsDeriveanGameBlueprintIdViewRoute:J1e},SEe=cv._addFileChildren(_Ee),EEe={LocaleAppsDeriveanGameBlueprintProductionIdDependenciesRoute:vEe,LocaleAppsDeriveanGameBlueprintProductionIdRequirementsRoute:yEe,LocaleAppsDeriveanGameBlueprintProductionIdResourcesRoute:gEe},MEe=GT._addFileChildren(EEe),TEe={LocaleAppsDeriveanGameIndexRoute:C1e,LocaleAppsDeriveanGameBlueprintIdRoute:SEe,LocaleAppsDeriveanGameBlueprintListRoute:j1e,LocaleAppsDeriveanGameBlueprintProductionIdRoute:MEe},CEe=pw._addFileChildren(TEe),IEe={LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRequirementsRoute:mEe},REe=H8._addFileChildren(IEe),AEe={LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRequirementsRoute:wEe},NEe=$8._addFileChildren(AEe),PEe={LocaleAppsDeriveanMapMapIdBuildingBuildingIdDemandRoute:pEe,LocaleAppsDeriveanMapMapIdBuildingBuildingIdInventoryRoute:hEe,LocaleAppsDeriveanMapMapIdBuildingBuildingIdLinkRoute:fEe,LocaleAppsDeriveanMapMapIdBuildingBuildingIdSupplyRoute:dEe,LocaleAppsDeriveanMapMapIdBuildingBuildingIdTransportRoute:uEe,LocaleAppsDeriveanMapMapIdBuildingBuildingIdViewRoute:cEe,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRoute:NEe,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionListRoute:bEe,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionQueueRoute:xEe},kEe=Xc._addFileChildren(PEe),OEe={LocaleAppsDeriveanMapMapIdLandLandIdConstructionRoute:lEe},LEe=q8._addFileChildren(OEe),DEe={LocaleAppsDeriveanMapMapIdViewRoute:B1e,LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRoute:REe,LocaleAppsDeriveanMapMapIdBuildingBuildingIdRoute:kEe,LocaleAppsDeriveanMapMapIdBuildingListRoute:Z1e,LocaleAppsDeriveanMapMapIdLandLandIdRoute:LEe,LocaleAppsDeriveanMapMapIdLandListRoute:Y1e,LocaleAppsDeriveanMapMapIdRoadRoadIdViewRoute:aEe},FEe=eh._addFileChildren(DEe),BEe={LocaleAppsDeriveanMapMapIdRoute:FEe},jEe=z8._addFileChildren(BEe),UEe={LocaleAppsDeriveanRootBlueprintIdConflictsRoute:K1e,LocaleAppsDeriveanRootBlueprintIdDependenciesRoute:X1e,LocaleAppsDeriveanRootBlueprintIdEditRoute:G1e,LocaleAppsDeriveanRootBlueprintIdInventoryRoute:$1e,LocaleAppsDeriveanRootBlueprintIdProductionRoute:H1e,LocaleAppsDeriveanRootBlueprintIdRequirementsRoute:q1e,LocaleAppsDeriveanRootBlueprintIdViewRoute:W1e},zEe=th._addFileChildren(UEe),VEe={LocaleAppsDeriveanRootRegionIdViewRoute:V1e},WEe=W8._addFileChildren(VEe),qEe={LocaleAppsDeriveanRootResourceIdViewRoute:z1e},HEe=V8._addFileChildren(qEe),$Ee={LocaleAppsDeriveanRootUserIdViewRoute:U1e,LocaleAppsDeriveanRootUserIdBuildingListRoute:rEe},GEe=SO._addFileChildren($Ee),XEe={LocaleAppsDeriveanRootBlueprintProductionIdDependenciesRoute:oEe,LocaleAppsDeriveanRootBlueprintProductionIdRequirementsRoute:sEe,LocaleAppsDeriveanRootBlueprintProductionIdResourcesRoute:iEe},KEe=$T._addFileChildren(XEe),YEe={LocaleAppsDeriveanRootEditorRoute:I1e,LocaleAppsDeriveanRootIndexRoute:T1e,LocaleAppsDeriveanRootBlueprintIdRoute:zEe,LocaleAppsDeriveanRootBlueprintListRoute:F1e,LocaleAppsDeriveanRootRegionIdRoute:WEe,LocaleAppsDeriveanRootRegionListRoute:D1e,LocaleAppsDeriveanRootResourceIdRoute:HEe,LocaleAppsDeriveanRootResourceListRoute:L1e,LocaleAppsDeriveanRootTagListRoute:O1e,LocaleAppsDeriveanRootUserIdRoute:GEe,LocaleAppsDeriveanRootUserListRoute:k1e,LocaleAppsDeriveanRootBlueprintProductionIdRoute:KEe},ZEe=Da._addFileChildren(YEe),JEe={LocaleAppsDeriveanGameRoute:CEe,LocaleAppsDeriveanMapRoute:jEe,LocaleAppsDeriveanRootRoute:ZEe,LocaleAppsDeriveanDbSchemaRoute:P1e,LocaleAppsDeriveanPublicLoginRoute:N1e,LocaleAppsDeriveanPublicLogoutRoute:A1e,LocaleAppsDeriveanPublicRegisterRoute:R1e},QEe=Qf._addFileChildren(JEe),eMe={LocaleIndexRoute:M1e,LocaleAppsDeriveanRoute:QEe},tMe=_O._addFileChildren(eMe),nMe={IndexRoute:E1e,LocaleRoute:tMe},rMe=nk._addFileChildren(nMe)._addFileTypes(),G8=new BG({defaultOptions:{queries:{placeholderData:MG}}}),iMe=a7({routeTree:rMe,context:{queryClient:G8,tva:kne,async session(){return Ub.parse(null)},kysely:Mt},scrollRestoration:!0,defaultPendingComponent:Eie,defaultPreload:"intent",defaultPreloadStaleTime:0,defaultPendingMinMs:200}),Xz=document.getElementById("app");FK({limit:{maxRequests:10,perMilliseconds:100}});Xz.innerHTML||Hie.createRoot(Xz).render(v.jsx(X.StrictMode,{children:v.jsx(qG,{client:G8,children:v.jsx(f7,{router:iMe})})}))})();