(async()=>{function D$(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function io(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function L$(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var D_={exports:{}},up={},L_={exports:{}},kn={};var iC;function M$(){if(iC)return kn;iC=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;function b(X){return X===null||typeof X!="object"?null:(X=h&&X[h]||X["@@iterator"],typeof X=="function"?X:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function I(X,ce,de){this.props=X,this.context=ce,this.refs=E,this.updater=de||x}I.prototype.isReactComponent={},I.prototype.setState=function(X,ce){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ce,"setState")},I.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function T(){}T.prototype=I.prototype;function O(X,ce,de){this.props=X,this.context=ce,this.refs=E,this.updater=de||x}var q=O.prototype=new T;q.constructor=O,w(q,I.prototype),q.isPureReactComponent=!0;var A=Array.isArray,D=Object.prototype.hasOwnProperty,L={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function P(X,ce,de){var ye,_e={},Ne=null,ze=null;if(ce!=null)for(ye in ce.ref!==void 0&&(ze=ce.ref),ce.key!==void 0&&(Ne=""+ce.key),ce)D.call(ce,ye)&&!z.hasOwnProperty(ye)&&(_e[ye]=ce[ye]);var qe=arguments.length-2;if(qe===1)_e.children=de;else if(1<qe){for(var De=Array(qe),Ze=0;Ze<qe;Ze++)De[Ze]=arguments[Ze+2];_e.children=De}if(X&&X.defaultProps)for(ye in qe=X.defaultProps,qe)_e[ye]===void 0&&(_e[ye]=qe[ye]);return{$$typeof:t,type:X,key:Ne,ref:ze,props:_e,_owner:L.current}}function R(X,ce){return{$$typeof:t,type:X.type,key:ce,ref:X.ref,props:X.props,_owner:X._owner}}function M(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function F(X){var ce={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(de){return ce[de]})}var W=/\/+/g;function V(X,ce){return typeof X=="object"&&X!==null&&X.key!=null?F(""+X.key):ce.toString(36)}function B(X,ce,de,ye,_e){var Ne=typeof X;(Ne==="undefined"||Ne==="boolean")&&(X=null);var ze=!1;if(X===null)ze=!0;else switch(Ne){case"string":case"number":ze=!0;break;case"object":switch(X.$$typeof){case t:case e:ze=!0}}if(ze)return ze=X,_e=_e(ze),X=ye===""?"."+V(ze,0):ye,A(_e)?(de="",X!=null&&(de=X.replace(W,"$&/")+"/"),B(_e,ce,de,"",function(Ze){return Ze})):_e!=null&&(M(_e)&&(_e=R(_e,de+(!_e.key||ze&&ze.key===_e.key?"":(""+_e.key).replace(W,"$&/")+"/")+X)),ce.push(_e)),1;if(ze=0,ye=ye===""?".":ye+":",A(X))for(var qe=0;qe<X.length;qe++){Ne=X[qe];var De=ye+V(Ne,qe);ze+=B(Ne,ce,de,De,_e)}else if(De=b(X),typeof De=="function")for(X=De.call(X),qe=0;!(Ne=X.next()).done;)Ne=Ne.value,De=ye+V(Ne,qe++),ze+=B(Ne,ce,de,De,_e);else if(Ne==="object")throw ce=String(X),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.");return ze}function te(X,ce,de){if(X==null)return X;var ye=[],_e=0;return B(X,ye,"","",function(Ne){return ce.call(de,Ne,_e++)}),ye}function J(X){if(X._status===-1){var ce=X._result;ce=ce(),ce.then(function(de){(X._status===0||X._status===-1)&&(X._status=1,X._result=de)},function(de){(X._status===0||X._status===-1)&&(X._status=2,X._result=de)}),X._status===-1&&(X._status=0,X._result=ce)}if(X._status===1)return X._result.default;throw X._result}var le={current:null},se={transition:null},ne={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:se,ReactCurrentOwner:L};function oe(){throw Error("act(...) is not supported in production builds of React.")}return kn.Children={map:te,forEach:function(X,ce,de){te(X,function(){ce.apply(this,arguments)},de)},count:function(X){var ce=0;return te(X,function(){ce++}),ce},toArray:function(X){return te(X,function(ce){return ce})||[]},only:function(X){if(!M(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},kn.Component=I,kn.Fragment=n,kn.Profiler=i,kn.PureComponent=O,kn.StrictMode=r,kn.Suspense=c,kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,kn.act=oe,kn.cloneElement=function(X,ce,de){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var ye=w({},X.props),_e=X.key,Ne=X.ref,ze=X._owner;if(ce!=null){if(ce.ref!==void 0&&(Ne=ce.ref,ze=L.current),ce.key!==void 0&&(_e=""+ce.key),X.type&&X.type.defaultProps)var qe=X.type.defaultProps;for(De in ce)D.call(ce,De)&&!z.hasOwnProperty(De)&&(ye[De]=ce[De]===void 0&&qe!==void 0?qe[De]:ce[De])}var De=arguments.length-2;if(De===1)ye.children=de;else if(1<De){qe=Array(De);for(var Ze=0;Ze<De;Ze++)qe[Ze]=arguments[Ze+2];ye.children=qe}return{$$typeof:t,type:X.type,key:_e,ref:Ne,props:ye,_owner:ze}},kn.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:s,_context:X},X.Consumer=X},kn.createElement=P,kn.createFactory=function(X){var ce=P.bind(null,X);return ce.type=X,ce},kn.createRef=function(){return{current:null}},kn.forwardRef=function(X){return{$$typeof:l,render:X}},kn.isValidElement=M,kn.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:J}},kn.memo=function(X,ce){return{$$typeof:d,type:X,compare:ce===void 0?null:ce}},kn.startTransition=function(X){var ce=se.transition;se.transition={};try{X()}finally{se.transition=ce}},kn.unstable_act=oe,kn.useCallback=function(X,ce){return le.current.useCallback(X,ce)},kn.useContext=function(X){return le.current.useContext(X)},kn.useDebugValue=function(){},kn.useDeferredValue=function(X){return le.current.useDeferredValue(X)},kn.useEffect=function(X,ce){return le.current.useEffect(X,ce)},kn.useId=function(){return le.current.useId()},kn.useImperativeHandle=function(X,ce,de){return le.current.useImperativeHandle(X,ce,de)},kn.useInsertionEffect=function(X,ce){return le.current.useInsertionEffect(X,ce)},kn.useLayoutEffect=function(X,ce){return le.current.useLayoutEffect(X,ce)},kn.useMemo=function(X,ce){return le.current.useMemo(X,ce)},kn.useReducer=function(X,ce,de){return le.current.useReducer(X,ce,de)},kn.useRef=function(X){return le.current.useRef(X)},kn.useState=function(X){return le.current.useState(X)},kn.useSyncExternalStore=function(X,ce,de){return le.current.useSyncExternalStore(X,ce,de)},kn.useTransition=function(){return le.current.useTransition()},kn.version="18.3.1",kn}var sC;function Kh(){return sC||(sC=1,L_.exports=M$()),L_.exports}var oC;function $$(){if(oC)return up;oC=1;var t=Kh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var p,h={},b=null,x=null;d!==void 0&&(b=""+d),c.key!==void 0&&(b=""+c.key),c.ref!==void 0&&(x=c.ref);for(p in c)r.call(c,p)&&!s.hasOwnProperty(p)&&(h[p]=c[p]);if(l&&l.defaultProps)for(p in c=l.defaultProps,c)h[p]===void 0&&(h[p]=c[p]);return{$$typeof:e,type:l,key:b,ref:x,props:h,_owner:i.current}}return up.Fragment=n,up.jsx=o,up.jsxs=o,up}var aC;function B$(){return aC||(aC=1,D_.exports=$$()),D_.exports}var f=B$(),Zd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ku=typeof window>"u"||"Deno"in globalThis;function Js(){}function z$(t,e){return typeof t=="function"?t(e):t}function zS(t){return typeof t=="number"&&t>=0&&t!==1/0}function E3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function pd(t,e){return typeof t=="function"?t(e):t}function _o(t,e){return typeof t=="function"?t(e):t}function lC(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==d1(o,e.options))return!1}else if(!oh(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function uC(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Gu(e.options.mutationKey)!==Gu(s))return!1}else if(!oh(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function d1(t,e){return(e?.queryKeyHashFn||Gu)(t)}function Gu(t){return JSON.stringify(t,(e,n)=>WS(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function oh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!oh(t[n],e[n])):!1}function f1(t,e){if(t===e)return t;const n=cC(t)&&cC(e);if(n||WS(t)&&WS(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const p=n?d:s[d];(!n&&r.includes(p)||n)&&t[p]===void 0&&e[p]===void 0?(l[p]=void 0,c++):(l[p]=f1(t[p],e[p]),l[p]===t[p]&&t[p]!==void 0&&c++)}return i===o&&c===i?t:l}return e}function ev(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function cC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function WS(t){if(!dC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!dC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function dC(t){return Object.prototype.toString.call(t)==="[object Object]"}function W$(t){return new Promise(e=>{setTimeout(e,t)})}function US(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?f1(t,e):e}function U$(t){return t}function V$(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function H$(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var p1=Symbol();function N3(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===p1?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Q$=class extends Zd{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Ku&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},h1=new Q$,K$=class extends Zd{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Ku&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},tv=new K$;function VS(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function G$(t){return Math.min(1e3*2**t,3e4)}function k3(t){return(t??"online")==="online"?tv.isOnline():!0}var I3=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function M_(t){return t instanceof I3}function C3(t){let e=!1,n=0,r=!1,i;const s=VS(),o=E=>{r||(b(new I3(E)),t.abort?.())},l=()=>{e=!0},c=()=>{e=!1},d=()=>h1.isFocused()&&(t.networkMode==="always"||tv.isOnline())&&t.canRun(),p=()=>k3(t.networkMode)&&t.canRun(),h=E=>{r||(r=!0,t.onSuccess?.(E),i?.(),s.resolve(E))},b=E=>{r||(r=!0,t.onError?.(E),i?.(),s.reject(E))},x=()=>new Promise(E=>{i=I=>{(r||d())&&E(I)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),w=()=>{if(r)return;let E;const I=n===0?t.initialPromise:void 0;try{E=I??t.fn()}catch(T){E=Promise.reject(T)}Promise.resolve(E).then(h).catch(T=>{if(r)return;const O=t.retry??(Ku?0:3),q=t.retryDelay??G$,A=typeof q=="function"?q(n,T):q,D=O===!0||typeof O=="number"&&n<O||typeof O=="function"&&O(n,T);if(e||!D){b(T);return}n++,t.onFail?.(n,T),W$(A).then(()=>d()?void 0:x()).then(()=>{e?b(T):w()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:l,continueRetry:c,canStart:p,start:()=>(p()?w():x().then(w),s)}}function Z$(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=l=>setTimeout(l,0);const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Gr=Z$(),T3=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zS(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ku?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},J$=class extends T3{#e;#t;#n;#r;#i;#s;constructor(t){super(),this.#s=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Y$(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=US(this.state.data,t,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#o({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(Js).catch(Js):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>_o(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===p1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!E3(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#s=!0,n.signal)})},i=()=>{const l=N3(this.options,e),c={queryKey:this.queryKey,meta:this.meta};return r(c),this.#s=!1,this.options.persister?this.options.persister(l,c,this):l(c)},s={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(s),this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#o({type:"fetch",meta:s.fetchOptions?.meta});const o=l=>{M_(l)&&l.silent||this.#o({type:"error",error:l}),M_(l)||(this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this)),this.scheduleGc()};return this.#r=C3({initialPromise:e?.initialPromise,fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:l=>{if(l===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(c){o(c);return}this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),this.scheduleGc()},onError:o,onFail:(l,c)=>{this.#o({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#r.start()}#o(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...O3(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return M_(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Gr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function O3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:k3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Y$(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var X$=class extends Zd{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??d1(r,e);let s=this.get(i);return s||(s=new J$({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Gr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>lC(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>lC(t,n)):e}notify(t){Gr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Gr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Gr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},eB=class extends T3{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||q3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=C3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,i)=>{this.#r({type:"failed",failureCount:r,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:n})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#r({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#r({type:"error",error:r})}}finally{this.#t.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Gr.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function q3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var tB=class extends Zd{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new eB({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Ig(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Ig(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Ig(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Ig(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Gr.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>uC(e,n))}findAll(t={}){return this.getAll().filter(e=>uC(t,e))}notify(t){Gr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Gr.batch(()=>Promise.all(t.map(e=>e.continue().catch(Js))))}};function Ig(t){return t.options.scope?.id}function fC(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let p=!1;const h=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},b=N3(e.options,e.fetchOptions),x=async(w,E,I)=>{if(p)return Promise.reject();if(E==null&&w.pages.length)return Promise.resolve(w);const T={queryKey:e.queryKey,pageParam:E,direction:I?"backward":"forward",meta:e.options.meta};h(T);const O=await b(T),{maxPages:q}=e.options,A=I?H$:V$;return{pages:A(w.pages,O,q),pageParams:A(w.pageParams,E,q)}};if(i&&s.length){const w=i==="backward",E=w?nB:pC,I={pages:s,pageParams:o},T=E(r,I);l=await x(I,T,w)}else{const w=t??s.length;do{const E=c===0?o[0]??r.initialPageParam:pC(r,l);if(c>0&&E==null)break;l=await x(l,E),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function pC(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function nB(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var rB=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(t={}){this.#e=t.queryCache||new X$,this.#t=t.mutationCache||new tB,this.#n=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=h1.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=tv.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(pd(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,o=z$(e,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Gr.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Gr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,r={type:"active",...t};return Gr.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Gr.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Js).catch(Js)}invalidateQueries(t,e={}){return Gr.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none")return Promise.resolve();const n={...t,type:t?.refetchType??t?.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Gr.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Js)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Js)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(pd(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Js).catch(Js)}fetchInfiniteQuery(t){return t.behavior=fC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Js).catch(Js)}ensureInfiniteQueryData(t){return t.behavior=fC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return tv.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Gu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{oh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(Gu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()];let n={};return e.forEach(r=>{oh(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=d1(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===p1&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},iB=class extends Zd{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#o=VS(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#s;#o;#a;#u;#l;#c;#d;#p;#f;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),hC(this.#t,this.options)?this.#h():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return HS(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return HS(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#_(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _o(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),n._defaulted&&!ev(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&mC(this.#t,r,this.options,n)&&this.#h(),this.updateResult(e),i&&(this.#t!==r||_o(this.options.enabled,this.#t)!==_o(n.enabled,this.#t)||pd(this.options.staleTime,this.#t)!==pd(n.staleTime,this.#t))&&this.#g();const s=this.#y();i&&(this.#t!==r||_o(this.options.enabled,this.#t)!==_o(n.enabled,this.#t)||s!==this.#f)&&this.#v(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return oB(this,n)&&(this.#r=n,this.#s=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Js)),e}#g(){this.#x();const t=pd(this.options.staleTime,this.#t);if(Ku||this.#r.isStale||!zS(t))return;const n=E3(this.#r.dataUpdatedAt,t)+1;this.#d=setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#_(),this.#f=t,!(Ku||_o(this.options.enabled,this.#t)===!1||!zS(this.#f)||this.#f===0)&&(this.#p=setInterval(()=>{(this.options.refetchIntervalInBackground||h1.isFocused())&&this.#h()},this.#f))}#b(){this.#g(),this.#v(this.#y())}#x(){this.#d&&(clearTimeout(this.#d),this.#d=void 0)}#_(){this.#p&&(clearInterval(this.#p),this.#p=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#r,s=this.#i,o=this.#s,c=t!==n?t.state:this.#n,{state:d}=t;let p={...d},h=!1,b;if(e._optimisticResults){const z=this.hasListeners(),P=!z&&hC(t,e),R=z&&mC(t,n,e,r);(P||R)&&(p={...p,...O3(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:w,status:E}=p;if(e.select&&p.data!==void 0)if(i&&p.data===s?.data&&e.select===this.#u)b=this.#l;else try{this.#u=e.select,b=e.select(p.data),b=US(i?.data,b,e),this.#l=b,this.#a=null}catch(z){this.#a=z}else b=p.data;if(e.placeholderData!==void 0&&b===void 0&&E==="pending"){let z;if(i?.isPlaceholderData&&e.placeholderData===o?.placeholderData)z=i.data;else if(z=typeof e.placeholderData=="function"?e.placeholderData(this.#c?.state.data,this.#c):e.placeholderData,e.select&&z!==void 0)try{z=e.select(z),this.#a=null}catch(P){this.#a=P}z!==void 0&&(E="success",b=US(i?.data,z,e),h=!0)}this.#a&&(x=this.#a,b=this.#l,w=Date.now(),E="error");const I=p.fetchStatus==="fetching",T=E==="pending",O=E==="error",q=T&&I,A=b!==void 0,L={status:E,fetchStatus:p.fetchStatus,isPending:T,isSuccess:E==="success",isError:O,isInitialLoading:q,isLoading:q,data:b,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:w,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>c.dataUpdateCount||p.errorUpdateCount>c.errorUpdateCount,isFetching:I,isRefetching:I&&!T,isLoadingError:O&&!A,isPaused:p.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:O&&A,isStale:m1(t,e),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const z=M=>{L.status==="error"?M.reject(L.error):L.data!==void 0&&M.resolve(L.data)},P=()=>{const M=this.#o=L.promise=VS();z(M)},R=this.#o;switch(R.status){case"pending":t.queryHash===n.queryHash&&z(R);break;case"fulfilled":(L.status==="error"||L.data!==R.value)&&P();break;case"rejected":(L.status!=="error"||L.error!==R.reason)&&P();break}}return L}updateResult(t){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#s=this.options,this.#i.data!==void 0&&(this.#c=this.#t),ev(n,e))return;this.#r=n;const r={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#m.size)return!0;const l=new Set(o??this.#m);return this.options.throwOnError&&l.add("error"),Object.keys(this.#r).some(c=>{const d=c;return this.#r[d]!==e[d]&&l.has(d)})};t?.listeners!==!1&&i()&&(r.listeners=!0),this.#S({...r,...t})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(t){Gr.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function sB(t,e){return _o(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function hC(t,e){return sB(t,e)||t.state.data!==void 0&&HS(t,e,e.refetchOnMount)}function HS(t,e,n){if(_o(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&m1(t,e)}return!1}function mC(t,e,n,r){return(t!==e||_o(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&m1(t,n)}function m1(t,e){return _o(e.enabled,t)!==!1&&t.isStaleByTime(pd(e.staleTime,t))}function oB(t,e){return!ev(t.getCurrentResult(),e)}var aB=class extends Zd{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),ev(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Gu(n.mutationKey)!==Gu(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#s()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??q3();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){Gr.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},K=Kh();const $n=io(K),lB=D$({__proto__:null,default:$n},[K]);var R3=K.createContext(void 0),lb=t=>{const e=K.useContext(R3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},uB=({client:t,children:e})=>(K.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),f.jsx(R3.Provider,{value:t,children:e})),j3=K.createContext(!1),cB=()=>K.useContext(j3);j3.Provider;function dB(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var fB=K.createContext(dB()),pB=()=>K.useContext(fB);function A3(t,e){return typeof t=="function"?t(...e):!!t}function QS(){}var hB=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},mB=t=>{K.useEffect(()=>{t.clearReset()},[t])},gB=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&A3(n,[t.error,r]),yB=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},vB=(t,e)=>t.isLoading&&t.isFetching&&!e,bB=(t,e)=>t?.suspense&&e.isPending,gC=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function xB(t,e,n){const r=lb(),i=cB(),s=pB(),o=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=i?"isRestoring":"optimistic",yB(o),hB(o,s),mB(s);const l=!r.getQueryCache().get(o.queryHash),[c]=K.useState(()=>new e(r,o)),d=c.getOptimisticResult(o),p=!i&&t.subscribed!==!1;if(K.useSyncExternalStore(K.useCallback(h=>{const b=p?c.subscribe(Gr.batchCalls(h)):QS;return c.updateResult(),b},[c,p]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),K.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),bB(o,d))throw gC(o,c,s);if(gB({result:d,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw d.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,d),o.experimental_prefetchInRender&&!Ku&&vB(d,i)&&(l?gC(o,c,s):r.getQueryCache().get(o.queryHash)?.promise)?.catch(QS).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?d:c.trackResult(d)}function nv(t,e){return xB(t,iB)}function yC(t,e){return t.findAll(e.filters).map(n=>e.select?e.select(n):n.state)}function _B(t={},e){const n=lb().getMutationCache(),r=K.useRef(t),i=K.useRef(null);return i.current||(i.current=yC(n,t)),K.useEffect(()=>{r.current=t}),K.useSyncExternalStore(K.useCallback(s=>n.subscribe(()=>{const o=f1(i.current,yC(n,r.current));i.current!==o&&(i.current=o,Gr.schedule(s))}),[n]),()=>i.current,()=>i.current)}function Xt(t,e){const n=lb(),[r]=K.useState(()=>new aB(n,t));K.useEffect(()=>{r.setOptions(t)},[r,t]);const i=K.useSyncExternalStore(K.useCallback(o=>r.subscribe(Gr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=K.useCallback((o,l)=>{r.mutate(o,l).catch(QS)},[r]);if(i.error&&A3(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const Wu="__TSR_index",vC="popstate",bC="beforeunload";function P3(t){let e=t.getLocation();const n=new Set,r=o=>{e=t.getLocation(),n.forEach(l=>l({location:e,action:o}))},i=o=>{t.notifyOnIndexChange??!0?r(o):e=t.getLocation()},s=async({task:o,navigateOpts:l,...c})=>{var d,p;if(l?.ignoreBlocker??!1){o();return}const b=((d=t.getBlockers)==null?void 0:d.call(t))??[],x=c.type==="PUSH"||c.type==="REPLACE";if(typeof document<"u"&&b.length&&x)for(const w of b){const E=ah(c.path,c.state);if(await w.blockerFn({currentLocation:e,nextLocation:E,action:c.type})){(p=t.onBlocked)==null||p.call(t);return}}o()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,l,c)=>{const d=e.state[Wu];l=KS(d+1,l),s({task:()=>{t.pushState(o,l),r({type:"PUSH"})},navigateOpts:c,type:"PUSH",path:o,state:l})},replace:(o,l,c)=>{const d=e.state[Wu];l=KS(d,l),s({task:()=>{t.replaceState(o,l),r({type:"REPLACE"})},navigateOpts:c,type:"REPLACE",path:o,state:l})},go:(o,l)=>{s({task:()=>{t.go(o),i({type:"GO",index:o})},navigateOpts:l,type:"GO"})},back:o=>{s({task:()=>{t.back(o?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{s({task:()=>{t.forward(o?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>e.state[Wu]!==0,createHref:o=>t.createHref(o),block:o=>{var l;if(!t.setBlockers)return()=>{};const c=((l=t.getBlockers)==null?void 0:l.call(t))??[];return t.setBlockers([...c,o]),()=>{var d,p;const h=((d=t.getBlockers)==null?void 0:d.call(t))??[];(p=t.setBlockers)==null||p.call(t,h.filter(b=>b!==o))}},flush:()=>{var o;return(o=t.flush)==null?void 0:o.call(t)},destroy:()=>{var o;return(o=t.destroy)==null?void 0:o.call(t)},notify:r}}function KS(t,e){return e||(e={}),{...e,key:EB(),[Wu]:t}}function wB(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState;let i=[];const s=()=>i,o=P=>i=P,l=P=>P,c=()=>ah(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);let d=c(),p,h=!1,b=!1,x=!1,w=!1;const E=()=>d;let I,T;const O=()=>{I&&(z._ignoreSubscribers=!0,(I.isPush?e.history.pushState:e.history.replaceState)(I.state,"",I.href),z._ignoreSubscribers=!1,I=void 0,T=void 0,p=void 0)},q=(P,R,M)=>{const F=l(R);T||(p=d),d=ah(R,M),I={href:F,state:M,isPush:I?.isPush||P==="push"},T||(T=Promise.resolve().then(()=>O()))},A=P=>{d=c(),z.notify({type:P})},D=async()=>{if(b){b=!1;return}const P=c(),R=P.state[Wu]-d.state[Wu],M=R===1,F=R===-1,W=!M&&!F||h;h=!1;const V=W?"GO":F?"BACK":"FORWARD",B=W?{type:"GO",index:R}:{type:F?"BACK":"FORWARD"};if(x)x=!1;else{const te=s();if(typeof document<"u"&&te.length){for(const J of te)if(await J.blockerFn({currentLocation:d,nextLocation:P,action:V})){b=!0,e.history.go(1),z.notify(B);return}}}d=c(),z.notify(B)},L=P=>{if(w){w=!1;return}let R=!1;const M=s();if(typeof document<"u"&&M.length)for(const F of M){const W=F.enableBeforeUnload??!0;if(W===!0){R=!0;break}if(typeof W=="function"&&W()===!0){R=!0;break}}if(R)return P.preventDefault(),P.returnValue=""},z=P3({getLocation:E,getLength:()=>e.history.length,pushState:(P,R)=>q("push",P,R),replaceState:(P,R)=>q("replace",P,R),back:P=>(P&&(x=!0),w=!0,e.history.back()),forward:P=>{P&&(x=!0),w=!0,e.history.forward()},go:P=>{h=!0,e.history.go(P)},createHref:P=>l(P),flush:O,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(bC,L,{capture:!0}),e.removeEventListener(vC,D)},onBlocked:()=>{p&&d!==p&&(d=p)},getBlockers:s,setBlockers:o,notifyOnIndexChange:!1});return e.addEventListener(bC,L,{capture:!0}),e.addEventListener(vC,D),e.history.pushState=function(...P){const R=n.apply(e.history,P);return z._ignoreSubscribers||A("PUSH"),R},e.history.replaceState=function(...P){const R=r.apply(e.history,P);return z._ignoreSubscribers||A("REPLACE"),R},z}function SB(t={initialEntries:["/"]}){const e=t.initialEntries;let n=t.initialIndex?Math.min(Math.max(t.initialIndex,0),e.length-1):e.length-1;const r=e.map((s,o)=>KS(o,void 0));return P3({getLocation:()=>ah(e[n],r[n]),getLength:()=>e.length,pushState:(s,o)=>{n<e.length-1&&(e.splice(n+1),r.splice(n+1)),r.push(o),e.push(s),n=Math.max(e.length-1,0)},replaceState:(s,o)=>{r[n]=o,e[n]=s},back:()=>{n=Math.max(n-1,0)},forward:()=>{n=Math.min(n+1,e.length-1)},go:s=>{n=Math.min(Math.max(n+s,0),e.length-1)},createHref:s=>s})}function ah(t,e){const n=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[Wu]:0}}}function EB(){return(Math.random()+1).toString(36).substring(7)}var NB="Invariant failed";function Ns(t,e){if(!t)throw new Error(NB)}const $_=K.createContext(null);function F3(){return typeof document>"u"?$_:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=$_,$_)}function Po(t){const e=K.useContext(F3());return t?.warn,e}var B_={exports:{}},z_={},W_={exports:{}},U_={};var xC;function kB(){if(xC)return U_;xC=1;var t=Kh();function e(h,b){return h===b&&(h!==0||1/h===1/b)||h!==h&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(h,b){var x=b(),w=r({inst:{value:x,getSnapshot:b}}),E=w[0].inst,I=w[1];return s(function(){E.value=x,E.getSnapshot=b,c(E)&&I({inst:E})},[h,x,b]),i(function(){return c(E)&&I({inst:E}),h(function(){c(E)&&I({inst:E})})},[h]),o(x),x}function c(h){var b=h.getSnapshot;h=h.value;try{var x=b();return!n(h,x)}catch{return!0}}function d(h,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return U_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,U_}var _C;function IB(){return _C||(_C=1,W_.exports=kB()),W_.exports}var wC;function CB(){if(wC)return z_;wC=1;var t=Kh(),e=IB();function n(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,c=t.useDebugValue;return z_.useSyncExternalStoreWithSelector=function(d,p,h,b,x){var w=s(null);if(w.current===null){var E={hasValue:!1,value:null};w.current=E}else E=w.current;w=l(function(){function T(L){if(!O){if(O=!0,q=L,L=b(L),x!==void 0&&E.hasValue){var z=E.value;if(x(z,L))return A=z}return A=L}if(z=A,r(q,L))return z;var P=b(L);return x!==void 0&&x(z,P)?(q=L,z):(q=L,A=P)}var O=!1,q,A,D=h===void 0?null:h;return[function(){return T(p())},D===null?void 0:function(){return T(D())}]},[p,h,b,x]);var I=i(d,w[0],w[1]);return o(function(){E.hasValue=!0,E.value=I},[I]),c(I),I},z_}var SC;function TB(){return SC||(SC=1,B_.exports=CB()),B_.exports}var D3=TB();const OB=io(D3),hd=new WeakMap,uy=new WeakMap,rv={current:[]};let V_=!1,Wp=0;const wp=new Set,Cg=new Map;function L3(t){const e=Array.from(t).sort((n,r)=>n instanceof md&&n.options.deps.includes(r)?1:r instanceof md&&r.options.deps.includes(n)?-1:0);for(const n of e){if(rv.current.includes(n))continue;rv.current.push(n),n.recompute();const r=uy.get(n);if(r)for(const i of r){const s=hd.get(i);s&&L3(s)}}}function qB(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function RB(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function M3(t){if(Wp>0&&!Cg.has(t)&&Cg.set(t,t.prevState),wp.add(t),!(Wp>0)&&!V_)try{for(V_=!0;wp.size>0;){const e=Array.from(wp);wp.clear();for(const n of e){const r=Cg.get(n)??n.prevState;n.prevState=r,qB(n)}for(const n of e){const r=hd.get(n);r&&(rv.current.push(n),L3(r))}for(const n of e){const r=hd.get(n);if(r)for(const i of r)RB(i)}}}finally{V_=!1,rv.current=[],Cg.clear()}}function H_(t){Wp++;try{t()}finally{if(Wp--,Wp===0){const e=Array.from(wp)[0];e&&M3(e)}}}class GS{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var i,s;this.listeners.add(r);const o=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),o?.()}},this.setState=r=>{var i,s,o;this.prevState=this.state,this.state=(i=this.options)!=null&&i.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(s=this.options)==null?void 0:s.onUpdate)==null||o.call(s),M3(this)},this.prevState=e,this.state=e,this.options=n}}class md{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const i of this.options.deps)n.push(i.prevState),r.push(i.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:i,currDepVals:s,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:s,prevVal:o}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const s of this.options.deps)s instanceof md&&s.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==r[s]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,i;this.listeners.add(n);const s=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),s?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const n of e)if(n instanceof md)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof GS){let r=hd.get(n);r||(r=new Set,hd.set(n,r)),r.add(this);let i=uy.get(this);i||(i=new Set,uy.set(this,i)),i.add(n)}}unregisterFromGraph(e=this.options.deps){for(const n of e)if(n instanceof md)this.unregisterFromGraph(n.options.deps);else if(n instanceof GS){const r=hd.get(n);r&&r.delete(this);const i=uy.get(this);i&&i.delete(n)}}}function jB(t,e=n=>n){return D3.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,AB)}function AB(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var Q_,EC;function PB(){if(EC)return Q_;EC=1;const t={},e=t.hasOwnProperty,n=(P,R)=>{for(const M in P)e.call(P,M)&&R(M,P[M])},r=(P,R)=>(R&&n(R,(M,F)=>{P[M]=F}),P),i=(P,R)=>{const M=P.length;let F=-1;for(;++F<M;)R(P[F])},s=P=>"\\u"+("0000"+P).slice(-4),o=(P,R)=>{let M=P.toString(16);return R?M:M.toUpperCase()},l=t.toString,c=Array.isArray,d=P=>typeof Buffer=="function"&&Buffer.isBuffer(P),p=P=>l.call(P)=="[object Object]",h=P=>typeof P=="string"||l.call(P)=="[object String]",b=P=>typeof P=="number"||l.call(P)=="[object Number]",x=P=>typeof P=="bigint",w=P=>typeof P=="function",E=P=>l.call(P)=="[object Map]",I=P=>l.call(P)=="[object Set]",T={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},O=/[\\\b\f\n\r\t]/,q=/[0-9]/,A=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,D=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,L=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,z=(P,R)=>{const M=()=>{le=J,++R.indentLevel,J=R.indent.repeat(R.indentLevel)},F={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},W=R&&R.json;W&&(F.quotes="double",F.wrap=!0),R=r(F,R),R.quotes!="single"&&R.quotes!="double"&&R.quotes!="backtick"&&(R.quotes="single");const V=R.quotes=="double"?'"':R.quotes=="backtick"?"`":"'",B=R.compact,te=R.lowercaseHex;let J=R.indent.repeat(R.indentLevel),le="";const se=R.__inline1__,ne=R.__inline2__,oe=B?"":`
`;let X,ce=!0;const de=R.numbers=="binary",ye=R.numbers=="octal",_e=R.numbers=="decimal",Ne=R.numbers=="hexadecimal";if(W&&P&&w(P.toJSON)&&(P=P.toJSON()),!h(P)){if(E(P))return P.size==0?"new Map()":(B||(R.__inline1__=!0,R.__inline2__=!1),"new Map("+z(Array.from(P),R)+")");if(I(P))return P.size==0?"new Set()":"new Set("+z(Array.from(P),R)+")";if(d(P))return P.length==0?"Buffer.from([])":"Buffer.from("+z(Array.from(P),R)+")";if(c(P))return X=[],R.wrap=!0,se&&(R.__inline1__=!1,R.__inline2__=!0),ne||M(),i(P,qe=>{ce=!1,ne&&(R.__inline2__=!1),X.push((B||ne?"":J)+z(qe,R))}),ce?"[]":ne?"["+X.join(", ")+"]":"["+oe+X.join(","+oe)+oe+(B?"":le)+"]";if(b(P)||x(P)){if(W)return JSON.stringify(Number(P));let qe;if(_e)qe=String(P);else if(Ne){let De=P.toString(16);te||(De=De.toUpperCase()),qe="0x"+De}else de?qe="0b"+P.toString(2):ye&&(qe="0o"+P.toString(8));return x(P)?qe+"n":qe}else return x(P)?W?JSON.stringify(Number(P)):P+"n":p(P)?(X=[],R.wrap=!0,M(),n(P,(qe,De)=>{ce=!1,X.push((B?"":J)+z(qe,R)+":"+(B?"":" ")+z(De,R))}),ce?"{}":"{"+oe+X.join(","+oe)+oe+(B?"":le)+"}"):W?JSON.stringify(P)||"null":String(P)}const ze=R.escapeEverything?D:L;return X=P.replace(ze,(qe,De,Ze,Xe,Ue,ut)=>{if(De){if(R.minimal)return De;const Tt=De.charCodeAt(0),Ut=De.charCodeAt(1);if(R.es6){const nn=(Tt-55296)*1024+Ut-56320+65536;return"\\u{"+o(nn,te)+"}"}return s(o(Tt,te))+s(o(Ut,te))}if(Ze)return s(o(Ze.charCodeAt(0),te));if(qe=="\0"&&!W&&!q.test(ut.charAt(Ue+1)))return"\\0";if(Xe)return Xe==V||R.escapeEverything?"\\"+Xe:Xe;if(O.test(qe))return T[qe];if(R.minimal&&!A.test(qe))return qe;const wt=o(qe.charCodeAt(0),te);return W||wt.length>2?s(wt):"\\x"+("00"+wt).slice(-2)}),V=="`"&&(X=X.replace(/\$\{/g,"\\${")),R.isScriptContext&&(X=X.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,W?"\\u003C!--":"\\x3C!--")),R.wrap&&(X=V+X+V),X};return z.version="3.0.2",Q_=z,Q_}PB();const Ss="__root__";function FB(t,e){let n,r,i,s="";for(n in t)if((i=t[n])!==void 0)if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i);return""+s}function NC(t){if(!t)return"";const e=decodeURIComponent(t);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function DB(t,e){let n,r;const i={},s=t.split("&");for(;n=s.shift();){const o=n.indexOf("=");if(o!==-1){r=n.slice(0,o),r=decodeURIComponent(r);const l=n.slice(o+1);i[r]!==void 0?i[r]=[].concat(i[r],NC(l)):i[r]=NC(l)}else r=n,r=decodeURIComponent(r),i[r]=""}return i}const LB=$B(JSON.parse),MB=BB(JSON.stringify,JSON.parse);function $B(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const n=DB(e);for(const r in n){const i=n[r];if(typeof i=="string")try{n[r]=t(i)}catch{}}return n}}function BB(t,e){function n(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(s=>{const o=r[s];typeof o>"u"||o===void 0?delete r[s]:r[s]=n(o)});const i=FB(r).toString();return i?`?${i}`:""}}function Up(t){return t[t.length-1]}function zB(t){return typeof t=="function"}function Fu(t,e){return zB(t)?t(e):t}function cy(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Gs(t,e){if(t===e)return t;const n=e,r=IC(t)&&IC(n);if(r||Rl(t)&&Rl(n)){const i=r?t:Object.keys(t),s=i.length,o=r?n:Object.keys(n),l=o.length,c=r?[]:{};let d=0;for(let p=0;p<l;p++){const h=r?p:o[p];(!r&&i.includes(h)||r)&&t[h]===void 0&&n[h]===void 0?(c[h]=void 0,d++):(c[h]=Gs(t[h],n[h]),c[h]===t[h]&&t[h]!==void 0&&d++)}return s===l&&d===s?t:c}return n}function Rl(t){if(!kC(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!kC(n)||!n.hasOwnProperty("isPrototypeOf"))}function kC(t){return Object.prototype.toString.call(t)==="[object Object]"}function IC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function CC(t,e){let n=Object.keys(t);return e&&(n=n.filter(r=>t[r]!==void 0)),n}function gd(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Rl(t)&&Rl(e)){const r=n?.ignoreUndefined??!0,i=CC(t,r),s=CC(e,r);return!n?.partial&&i.length!==s.length?!1:s.every(o=>gd(t[o],e[o],n))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((r,i)=>!gd(r,e[i],n)):!1}const Sp=typeof window<"u"?K.useLayoutEffect:K.useEffect;function ed(t){let e,n;const r=new Promise((i,s)=>{e=i,n=s});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,e(i),t?.(i)},r.reject=i=>{r.status="rejected",n(i)},r}function K_(t){const e=K.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function WB(t,e,n={},r={}){const i=K.useRef(typeof IntersectionObserver=="function"),s=K.useRef(null);return K.useEffect(()=>{if(!(!t.current||!i.current||r.disabled))return s.current=new IntersectionObserver(([o])=>{e(o)},n),s.current.observe(t.current),()=>{var o;(o=s.current)==null||o.disconnect()}},[e,n,r.disabled,t]),s.current}function UB(t){const e=K.useRef(null);return K.useEffect(()=>{t&&(typeof t=="function"?t(e.current):t.current=e.current)}),e}function Aa(t){return ub(t.filter(e=>e!==void 0).join("/"))}function ub(t){return t.replace(/\/{2,}/g,"/")}function g1(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function Du(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function VB(t){return Du(g1(t))}function iv(t,e){return t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function HB(t,e,n){return iv(t,n)===iv(e,n)}function QB({basepath:t,base:e,to:n,trailingSlash:r="never",caseSensitive:i}){var s,o;e=sv(t,e,i),n=sv(t,n,i);let l=Rd(e);const c=Rd(n);l.length>1&&((s=Up(l))==null?void 0:s.value)==="/"&&l.pop(),c.forEach((p,h)=>{p.value==="/"?h?h===c.length-1&&l.push(p):l=[p]:p.value===".."?l.pop():p.value==="."||l.push(p)}),l.length>1&&(((o=Up(l))==null?void 0:o.value)==="/"?r==="never"&&l.pop():r==="always"&&l.push({type:"pathname",value:"/"}));const d=Aa([t,...l.map(p=>p.value)]);return ub(d)}function Rd(t){if(!t)return[];t=ub(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const n=t.split("/").filter(Boolean);return e.push(...n.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function Tg({path:t,params:e,leaveWildcards:n,leaveParams:r,decodeCharMap:i}){const s=Rd(t),o={};for(const[l,c]of Object.entries(e)){const d=typeof c=="string";["*","_splat"].includes(l)?o[l]=d?encodeURI(c):c:o[l]=d?KB(c,i):c}return Aa(s.map(l=>{if(l.type==="wildcard"){const c=o._splat;return n?`${l.value}${c??""}`:c}if(l.type==="param"){if(r){const c=o[l.value];return`${l.value}${c??""}`}return o[l.value.substring(1)]??"undefined"}return l.value}))}function KB(t,e){let n=encodeURIComponent(t);if(e)for(const[r,i]of e)n=n.replaceAll(r,i);return n}function Og(t,e,n){const r=GB(t,e,n);if(!(n.to&&!r))return r??{}}function sv(t,e,n=!1){const r=n?t:t.toLowerCase(),i=n?e:e.toLowerCase();switch(!0){case r==="/":return e;case i===r:return"";case e.length<t.length:return e;case i[r.length]!=="/":return e;case i.startsWith(r):return e.slice(t.length);default:return e}}function GB(t,e,n){if(t!=="/"&&!e.startsWith(t))return;e=sv(t,e,n.caseSensitive);const r=sv(t,`${n.to??"$"}`,n.caseSensitive),i=Rd(e),s=Rd(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"}),r.startsWith("/")||s.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let c=0;c<Math.max(i.length,s.length);c++){const d=i[c],p=s[c],h=c>=i.length-1,b=c>=s.length-1;if(p){if(p.type==="wildcard"){const x=decodeURI(Aa(i.slice(c).map(w=>w.value)));return o["*"]=x,o._splat=x,!0}if(p.type==="pathname"){if(p.value==="/"&&!d?.value)return!0;if(d){if(n.caseSensitive){if(p.value!==d.value)return!1}else if(p.value.toLowerCase()!==d.value.toLowerCase())return!1}}if(!d)return!1;if(p.type==="param"){if(d.value==="/")return!1;d.value.charAt(0)!=="$"&&(o[p.value.substring(1)]=decodeURIComponent(d.value))}}if(!h&&b)return o["**"]=Aa(i.slice(c+1).map(x=>x.value)),!!n.fuzzy&&p?.value!=="/"}return!0})()?o:void 0}function Gh(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},!t.reloadDocument){t.reloadDocument=!1;try{new URL(`${t.href}`),t.reloadDocument=!0}catch{}}if(t.throw)throw t;return t}function Iu(t){return!!t?.isRedirect}function G_(t){return!!t?.isRedirect&&t.href}function y1(t){const e=t.errorComponent??cb;return f.jsx(ZB,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?K.createElement(e,{error:n,reset:r}):t.children})}class ZB extends K.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function cb({error:t}){const[e,n]=K.useState(!1);return f.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[f.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),f.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),f.jsx("div",{style:{height:".25rem"}}),e?f.jsx("div",{children:f.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?f.jsx("code",{children:t.message}):null})}):null]})}function $i(t){const e=Po({warn:t?.router===void 0}),n=t?.router||e,r=K.useRef();return jB(n.__store,i=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const s=Gs(r.current,t.select(i));return r.current=s,s}return t.select(i)}return i})}function bo(t){return!!t?.isNotFound}function JB(t){const e=$i({select:n=>`not-found-${n.location.pathname}-${n.status}`});return f.jsx(y1,{getResetKey:()=>e,onCatch:(n,r)=>{var i;if(bo(n))(i=t.onCatch)==null||i.call(t,n,r);else throw n},errorComponent:({error:n})=>{var r;if(bo(n))return(r=t.fallback)==null?void 0:r.call(t,n);throw n},children:t.children})}function YB(){return f.jsx("p",{children:"Not Found"})}const Ep={stringify:t=>JSON.stringify(t,function(n,r){const i=this[n],s=Rg.find(o=>o.stringifyCondition(i));return s?s.stringify(i):r}),parse:t=>JSON.parse(t,function(n,r){const i=this[n];if(Rl(i)){const s=Rg.find(o=>o.parseCondition(i));if(s)return s.parse(i)}return r}),encode:t=>{if(Array.isArray(t))return t.map(n=>Ep.encode(n));if(Rl(t))return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Ep.encode(r)]));const e=Rg.find(n=>n.stringifyCondition(t));return e?e.stringify(t):t},decode:t=>{if(Rl(t)){const e=Rg.find(n=>n.parseCondition(t));if(e)return e.parse(t)}return Array.isArray(t)?t.map(e=>Ep.decode(e)):Rl(t)?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,Ep.decode(n)])):t}},qg=(t,e,n,r)=>({key:t,stringifyCondition:e,stringify:i=>({[`$${t}`]:n(i)}),parseCondition:i=>Object.hasOwn(i,`$${t}`),parse:i=>r(i[`$${t}`])}),Rg=[qg("undefined",t=>t===void 0,()=>0,()=>{}),qg("date",t=>t instanceof Date,t=>t.toISOString(),t=>new Date(t)),qg("error",t=>t instanceof Error,t=>({...t,message:t.message,stack:t.stack,cause:t.cause}),t=>Object.assign(new Error(t.message),t)),qg("formData",t=>t instanceof FormData,t=>{const e={};return t.forEach((n,r)=>{const i=e[r];i!==void 0?Array.isArray(i)?i.push(n):e[r]=[i,n]:e[r]=n}),e},t=>{const e=new FormData;return Object.entries(t).forEach(([n,r])=>{Array.isArray(r)?r.forEach(i=>e.append(n,i)):e.append(n,r)}),e})],$3=["component","errorComponent","pendingComponent","notFoundComponent"];function XB(t){var e;for(const n of $3)if((e=t.options[n])!=null&&e.preload)return!0;return!1}function Z_(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new ZS("Async validation not supported");if(n.issues)throw new ZS(JSON.stringify(n.issues,void 0,2));return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function e4(t){return new t4(t)}class t4{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=n=>n(),this.update=n=>{var r;n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options;this.options={...this.options,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(s=>[encodeURIComponent(s),s])):void 0,(!this.basepath||n.basepath&&n.basepath!==i.basepath)&&(n.basepath===void 0||n.basepath===""||n.basepath==="/"?this.basepath="/":this.basepath=`/${VB(n.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?SB({initialEntries:[this.basepath||"/"]}):wB()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new GS(r4(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const n=this.options.notFoundRoute;n&&(n.init({originalIndex:0x174876e7ff,defaultSsr:this.options.defaultSsr}),this.routesById[n.id]=n);const r=o=>{o.forEach((l,c)=>{l.init({originalIndex:c,defaultSsr:this.options.defaultSsr});const d=this.routesById[l.id];if(Ns(!d,`Duplicate routes found with id: ${String(l.id)}`),this.routesById[l.id]=l,!l.isRoot&&l.path){const h=Du(l.fullPath);(!this.routesByPath[h]||l.fullPath.endsWith("/"))&&(this.routesByPath[h]=l)}const p=l.children;p?.length&&r(p)})};r([this.routeTree]);const i=[];Object.values(this.routesById).forEach((o,l)=>{var c;if(o.isRoot||!o.path)return;const d=g1(o.fullPath),p=Rd(d);for(;p.length>1&&((c=p[0])==null?void 0:c.value)==="/";)p.shift();const h=p.map(b=>b.value==="/"?.75:b.type==="param"?.5:b.type==="wildcard"?.25:1);i.push({child:o,trimmed:d,parsed:p,index:l,scores:h})}),this.flatRoutes=i.sort((o,l)=>{const c=Math.min(o.scores.length,l.scores.length);for(let d=0;d<c;d++)if(o.scores[d]!==l.scores[d])return l.scores[d]-o.scores[d];if(o.scores.length!==l.scores.length)return l.scores.length-o.scores.length;for(let d=0;d<c;d++)if(o.parsed[d].value!==l.parsed[d].value)return o.parsed[d].value>l.parsed[d].value?1:-1;return o.index-l.index}).map((o,l)=>(o.child.rank=l,o.child))},this.subscribe=(n,r)=>{const i={eventType:n,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const i=({pathname:c,search:d,hash:p,state:h})=>{const b=this.options.parseSearch(d),x=this.options.stringifySearch(b);return{pathname:c,searchStr:x,search:Gs(n?.search,b),hash:p.split("#").reverse()[0]??"",href:`${c}${x}${p}`,state:Gs(n?.state,h)}},s=i(r??this.history.location),{__tempLocation:o,__tempKey:l}=s.state;if(o&&(!l||l===this.tempLocationKey)){const c=i(o);return c.state.key=s.state.key,delete c.state.__tempLocation,{...c,maskedLocation:s}}return s},this.resolvePathWithBase=(n,r)=>QB({basepath:this.basepath,base:n,to:ub(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(n,r)=>{let i={};const s=Du(n.pathname),o=p=>Og(this.basepath,s,{to:p.fullPath,caseSensitive:p.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let l=r?.to!==void 0?this.routesByPath[r.to]:void 0;l?i=o(l):l=this.flatRoutes.find(p=>{const h=o(p);return h?(i=h,!0):!1});let c=l||this.routesById[Ss];const d=[c];for(;c.parentRoute;)c=c.parentRoute,d.unshift(c);return{matchedRoutes:d,routeParams:i,foundRoute:l}},this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var n;(n=this.state.pendingMatches)==null||n.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=n=>{const r=(s={},o)=>{var l,c,d,p,h,b;const x=s._fromLocation?this.matchRoutes(s._fromLocation,{_buildLocation:!0}):this.state.matches,w=s.from!=null?x.find(F=>Og(this.basepath,Du(F.pathname),{to:s.from,caseSensitive:!1,fuzzy:!1})):void 0,E=w?.pathname||this.latestLocation.pathname;Ns(s.from==null||w!=null,"Could not find match for from: "+s.from);const I=(l=this.state.pendingMatches)!=null&&l.length?(c=Up(this.state.pendingMatches))==null?void 0:c.search:((d=Up(x))==null?void 0:d.search)||this.latestLocation.search,T=o?.matchedRoutes.filter(F=>x.find(W=>W.routeId===F.id));let O;if(s.to)O=this.resolvePathWithBase(E,`${s.to}`);else{const F=this.routesById[(p=T?.find(W=>{const V=Tg({path:W.fullPath,params:o?.routeParams??{},decodeCharMap:this.pathParamsDecodeCharMap});return Aa([this.basepath,V])===E}))==null?void 0:p.id];O=this.resolvePathWithBase(E,F?.to??E)}const q={...(h=Up(x))==null?void 0:h.params};let A=(s.params??!0)===!0?q:{...q,...Fu(s.params,q)};Object.keys(A).length>0&&o?.matchedRoutes.map(F=>{var W;return((W=F.options.params)==null?void 0:W.stringify)??F.options.stringifyParams}).filter(Boolean).forEach(F=>{A={...A,...F(A)}}),O=Tg({path:O,params:A??{},leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let D=I;if(n._includeValidateSearch&&((b=this.options.search)!=null&&b.strict)){let F={};o?.matchedRoutes.forEach(W=>{try{W.options.validateSearch&&(F={...F,...Z_(W.options.validateSearch,{...F,...D})??{}})}catch{}}),D=F}D=(F=>{const W=o?.matchedRoutes.reduce((te,J)=>{var le;const se=[];if("search"in J.options)(le=J.options.search)!=null&&le.middlewares&&se.push(...J.options.search.middlewares);else if(J.options.preSearchFilters||J.options.postSearchFilters){const ne=({search:oe,next:X})=>{let ce=oe;"preSearchFilters"in J.options&&J.options.preSearchFilters&&(ce=J.options.preSearchFilters.reduce((ye,_e)=>_e(ye),oe));const de=X(ce);return"postSearchFilters"in J.options&&J.options.postSearchFilters?J.options.postSearchFilters.reduce((ye,_e)=>_e(ye),de):de};se.push(ne)}if(n._includeValidateSearch&&J.options.validateSearch){const ne=({search:oe,next:X})=>{try{const ce=X(oe);return{...ce,...Z_(J.options.validateSearch,ce)??{}}}catch{}};se.push(ne)}return te.concat(se)},[])??[],V=({search:te})=>s.search?s.search===!0?te:Fu(s.search,te):{};W.push(V);const B=(te,J)=>{if(te>=W.length)return J;const le=W[te];return le({search:J,next:ne=>B(te+1,ne)})};return B(0,F)})(D),D=Gs(I,D);const z=this.options.stringifySearch(D),P=s.hash===!0?this.latestLocation.hash:s.hash?Fu(s.hash,this.latestLocation.hash):void 0,R=P?`#${P}`:"";let M=s.state===!0?this.latestLocation.state:s.state?Fu(s.state,this.latestLocation.state):{};return M=Gs(this.latestLocation.state,M),{pathname:O,search:D,searchStr:z,state:M,hash:P??"",href:`${O}${z}${R}`,unmaskOnReload:s.unmaskOnReload}},i=(s={},o)=>{var l;const c=r(s);let d=o?r(o):void 0;if(!d){let b={};const x=(l=this.options.routeMasks)==null?void 0:l.find(w=>{const E=Og(this.basepath,c.pathname,{to:w.from,caseSensitive:!1,fuzzy:!1});return E?(b=E,!0):!1});if(x){const{from:w,...E}=x;o={...cy(n,["from"]),...E,params:b},d=r(o)}}const p=this.getMatchedRoutes(c,s),h=r(s,p);if(d){const b=this.getMatchedRoutes(d,o),x=r(o,b);h.maskedLocation=x}return h};return n.mask?i(n,{...cy(n,["from"]),...n.mask}):i(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...i})=>{const s=()=>{i.state.key=this.latestLocation.state.key;const c=gd(i.state,this.latestLocation.state);return delete i.state.key,c},o=this.latestLocation.href===i.href,l=this.commitLocationPromise;if(this.commitLocationPromise=ed(()=>{l?.resolve()}),o&&s())this.load();else{let{maskedLocation:c,hashScrollIntoView:d,...p}=i;c&&(p={...c,state:{...c.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=d??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](p.href,p.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:i,viewTransition:s,ignoreBlocker:o,href:l,...c}={})=>{if(l){const p=this.history.location.state.__TSR_index,h=ah(l,{__TSR_index:n?p:p+1});c.to=h.pathname,c.search=this.options.parseSearch(h.search),c.hash=h.hash.slice(1)}const d=this.buildLocation({...c,_includeValidateSearch:!0});return this.commitLocation({...d,viewTransition:s,replace:n,resetScroll:r,hashScrollIntoView:i,ignoreBlocker:o})},this.navigate=({to:n,reloadDocument:r,href:i,...s})=>{if(r){i||(i=this.buildLocation({to:n,...s}).href),s.replace?window.location.replace(i):window.location.href=i;return}return this.buildAndCommitLocation({...s,href:i,to:n})},this.load=async n=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,i,s;for(s=new Promise(o=>{this.startReactTransition(async()=>{var l;try{const c=this.latestLocation,d=this.state.resolvedLocation,p=d.href!==c.href,h=d.pathname!==c.pathname;this.cancelMatches();let b;H_(()=>{b=this.matchRoutes(c),this.__store.setState(x=>({...x,status:"pending",isLoading:!0,location:c,pendingMatches:b,cachedMatches:x.cachedMatches.filter(w=>!b.find(E=>E.id===w.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:d,toLocation:c,pathChanged:h,hrefChanged:p}),this.emit({type:"onBeforeLoad",fromLocation:d,toLocation:c,pathChanged:h,hrefChanged:p}),await this.loadMatches({sync:n?.sync,matches:b,location:c,onReady:async()=>{this.startViewTransition(async()=>{let x,w,E;H_(()=>{this.__store.setState(I=>{const T=I.matches,O=I.pendingMatches||I.matches;return x=T.filter(q=>!O.find(A=>A.id===q.id)),w=O.filter(q=>!T.find(A=>A.id===q.id)),E=T.filter(q=>O.find(A=>A.id===q.id)),{...I,isLoading:!1,loadedAt:Date.now(),matches:O,pendingMatches:void 0,cachedMatches:[...I.cachedMatches,...x.filter(q=>q.status!=="error")]}}),this.clearExpiredCache()}),[[x,"onLeave"],[w,"onEnter"],[E,"onStay"]].forEach(([I,T])=>{I.forEach(O=>{var q,A;(A=(q=this.looseRoutesById[O.routeId].options)[T])==null||A.call(q,O)})})})}})}catch(c){G_(c)?(r=c,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):bo(c)&&(i=c),this.__store.setState(d=>({...d,statusCode:r?r.statusCode:i?404:d.matches.some(p=>p.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&((l=this.commitLocationPromise)==null||l.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;typeof r=="object"&&this.isViewTransitionTypesSupported?i={update:n,types:r.types}:i=n,document.startViewTransition(i)}else n()},this.updateMatch=(n,r)=>{var i;let s;const o=(i=this.state.pendingMatches)==null?void 0:i.find(p=>p.id===n),l=this.state.matches.find(p=>p.id===n),c=this.state.cachedMatches.find(p=>p.id===n),d=o?"pendingMatches":l?"matches":c?"cachedMatches":"";return d&&this.__store.setState(p=>{var h;return{...p,[d]:(h=p[d])==null?void 0:h.map(b=>b.id===n?s=r(b):b)}}),s},this.getMatch=n=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===n),this.loadMatches=async({location:n,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch,sync:l})=>{let c,d=!1;const p=async()=>{d||(d=!0,await s?.())},h=x=>!!(i&&!this.state.matches.find(w=>w.id===x));!this.isServer&&!this.state.matches.length&&p();const b=(x,w)=>{var E,I,T;if(G_(w)&&!w.reloadDocument)throw w;if(Iu(w)||bo(w)){if(o(x.id,O=>({...O,status:Iu(w)?"redirected":bo(w)?"notFound":"error",isFetching:!1,error:w,beforeLoadPromise:void 0,loaderPromise:void 0})),w.routeId||(w.routeId=x.routeId),(E=x.beforeLoadPromise)==null||E.resolve(),(I=x.loaderPromise)==null||I.resolve(),(T=x.loadPromise)==null||T.resolve(),Iu(w))throw d=!0,w=this.resolveRedirect({...w,_fromLocation:n}),w;if(bo(w))throw this._handleNotFound(r,w,{updateMatch:o}),w}};try{await new Promise((x,w)=>{(async()=>{var E,I,T;try{const O=(D,L,z)=>{var P,R;const{id:M,routeId:F}=r[D],W=this.looseRoutesById[F];if(L instanceof Promise)throw L;L.routerCode=z,c=c??D,b(this.getMatch(M),L);try{(R=(P=W.options).onError)==null||R.call(P,L)}catch(V){L=V,b(this.getMatch(M),L)}o(M,V=>{var B,te;return(B=V.beforeLoadPromise)==null||B.resolve(),(te=V.loadPromise)==null||te.resolve(),{...V,error:L,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[D,{id:L,routeId:z}]of r.entries()){const P=this.getMatch(L),R=(E=r[D-1])==null?void 0:E.id,M=this.looseRoutesById[z],F=M.options.pendingMs??this.options.defaultPendingMs,W=!!(s&&!this.isServer&&!h(L)&&(M.options.loader||M.options.beforeLoad)&&typeof F=="number"&&F!==1/0&&(M.options.pendingComponent??this.options.defaultPendingComponent));let V=!0;if((P.beforeLoadPromise||P.loaderPromise)&&(W&&setTimeout(()=>{try{p()}catch{}},F),await P.beforeLoadPromise,V=this.getMatch(L).status!=="success"),V){try{o(L,Ne=>({...Ne,loadPromise:ed(()=>{var ze;(ze=Ne.loadPromise)==null||ze.resolve()}),beforeLoadPromise:ed()}));const B=new AbortController;let te;W&&(te=setTimeout(()=>{try{p()}catch{}},F));const{paramsError:J,searchError:le}=this.getMatch(L);J&&O(D,J,"PARSE_PARAMS"),le&&O(D,le,"VALIDATE_SEARCH");const se=()=>R?this.getMatch(R).context:this.options.context??{};o(L,Ne=>({...Ne,isFetching:"beforeLoad",fetchCount:Ne.fetchCount+1,abortController:B,pendingTimeout:te,context:{...se(),...Ne.__routeContext}}));const{search:ne,params:oe,context:X,cause:ce}=this.getMatch(L),de=h(L),ye={search:ne,abortController:B,params:oe,preload:de,context:X,location:n,navigate:Ne=>this.navigate({...Ne,_fromLocation:n}),buildLocation:this.buildLocation,cause:de?"preload":ce,matches:r};let _e=await ((T=(I=M.options).beforeLoad)==null?void 0:T.call(I,ye))??{};this.serializeLoaderData&&(_e=this.serializeLoaderData("__beforeLoadContext",_e,{router:this,match:this.getMatch(L)})),(Iu(_e)||bo(_e))&&O(D,_e,"BEFORE_LOAD"),o(L,Ne=>({...Ne,__beforeLoadContext:_e,context:{...se(),...Ne.__routeContext,..._e},abortController:B}))}catch(B){O(D,B,"BEFORE_LOAD")}o(L,B=>{var te;return(te=B.beforeLoadPromise)==null||te.resolve(),{...B,beforeLoadPromise:void 0,isFetching:!1}})}}const q=r.slice(0,c),A=[];q.forEach(({id:D,routeId:L},z)=>{A.push((async()=>{const{loaderPromise:P}=this.getMatch(D);let R=!1,M=!1;if(P){await P;const F=this.getMatch(D);F.error&&b(F,F.error)}else{const F=A[z-1],W=this.looseRoutesById[L],V=()=>{const{params:ce,loaderDeps:de,abortController:ye,context:_e,cause:Ne}=this.getMatch(D),ze=h(D);return{params:ce,deps:de,preload:!!ze,parentMatchPromise:F,abortController:ye,context:_e,location:n,navigate:qe=>this.navigate({...qe,_fromLocation:n}),cause:ze?"preload":Ne,route:W}},B=Date.now()-this.getMatch(D).updatedAt,te=h(D),J=te?W.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:W.options.staleTime??this.options.defaultStaleTime??0,le=W.options.shouldReload,se=typeof le=="function"?le(V()):le;o(D,ce=>({...ce,loaderPromise:ed(),preload:!!te&&!this.state.matches.find(de=>de.id===D)}));const ne=async()=>{var ce,de,ye,_e,Ne,ze,qe,De;try{const Ze=async()=>{const Xe=this.getMatch(D);Xe.minPendingPromise&&await Xe.minPendingPromise};try{this.loadRouteChunk(W),o(D,nn=>({...nn,isFetching:"loader"}));let Xe=await ((de=(ce=W.options).loader)==null?void 0:de.call(ce,V()));this.serializeLoaderData&&(Xe=this.serializeLoaderData("loaderData",Xe,{router:this,match:this.getMatch(D)})),b(this.getMatch(D),Xe),await W._lazyPromise,await Ze();const Ue=(_e=(ye=W.options).head)==null?void 0:_e.call(ye,{matches:r,match:this.getMatch(D),params:this.getMatch(D).params,loaderData:Xe}),ut=Ue?.meta,wt=Ue?.links,Tt=Ue?.scripts,Ut=(ze=(Ne=W.options).headers)==null?void 0:ze.call(Ne,{loaderData:Xe});o(D,nn=>({...nn,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Xe,meta:ut,links:wt,scripts:Tt,headers:Ut}))}catch(Xe){let Ue=Xe;await Ze(),b(this.getMatch(D),Xe);try{(De=(qe=W.options).onError)==null||De.call(qe,Xe)}catch(ut){Ue=ut,b(this.getMatch(D),ut)}o(D,ut=>({...ut,error:Ue,status:"error",isFetching:!1}))}await W._componentsPromise}catch(Ze){o(D,Xe=>({...Xe,loaderPromise:void 0})),b(this.getMatch(D),Ze)}},{status:oe,invalid:X}=this.getMatch(D);R=oe==="success"&&(X||(se??B>J)),te&&W.options.preload===!1||(R&&!l?(M=!0,(async()=>{try{await ne();const{loaderPromise:ce,loadPromise:de}=this.getMatch(D);ce?.resolve(),de?.resolve(),o(D,ye=>({...ye,loaderPromise:void 0}))}catch(ce){G_(ce)&&await this.navigate(ce)}})()):(oe!=="success"||R&&l)&&await ne())}if(!M){const{loaderPromise:F,loadPromise:W}=this.getMatch(D);F?.resolve(),W?.resolve()}return o(D,F=>({...F,isFetching:M?F.isFetching:!1,loaderPromise:M?F.loaderPromise:void 0,invalid:!1})),this.getMatch(D)})())}),await Promise.all(A),x()}catch(O){w(O)}})()}),await p()}catch(x){if(Iu(x)||bo(x))throw bo(x)&&!i&&await p(),x}return r},this.invalidate=n=>{const r=i=>{var s;return((s=n?.filter)==null?void 0:s.call(n,i))??!0?{...i,invalid:!0,...i.status==="error"?{status:"pending",error:void 0}:{}}:i};return this.__store.setState(i=>{var s;return{...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:(s=i.pendingMatches)==null?void 0:s.map(r)}}),this.load({sync:n?.sync})},this.resolveRedirect=n=>{const r=n;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(s=>!r(s))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const s=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<s)};this.clearCache({filter:n})},this.loadRouteChunk=n=>(n._lazyPromise===void 0&&(n.lazyFn?n._lazyPromise=n.lazyFn().then(r=>{const{id:i,...s}=r.options;Object.assign(n.options,s)}):n._lazyPromise=Promise.resolve()),n._componentsPromise===void 0&&(n._componentsPromise=n._lazyPromise.then(()=>Promise.all($3.map(async r=>{const i=n.options[r];i?.preload&&await i.preload()})))),n._componentsPromise),this.preloadRoute=async n=>{const r=this.buildLocation(n);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(l=>l.id)),o=new Set([...s,...this.state.cachedMatches.map(l=>l.id)]);H_(()=>{i.forEach(l=>{o.has(l.id)||this.__store.setState(c=>({...c,cachedMatches:[...c.cachedMatches,l]}))})});try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(l,c)=>{s.has(l)?i=i.map(d=>d.id===l?c(d):d):this.updateMatch(l,c)}}),i}catch(l){if(Iu(l))return l.reloadDocument?void 0:await this.preloadRoute({...l,_fromLocation:r});console.error(l);return}},this.matchRoute=(n,r)=>{const i={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(i);if(r?.pending&&this.state.status!=="pending")return!1;const l=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,c=Og(this.basepath,l.pathname,{...r,to:s.pathname});return!c||n.params&&!gd(c,n.params,{partial:!0})?!1:c&&(r?.includeSearch??!0)?gd(l.search,s.search,{partial:!0})?c:!1:c},this.dehydrate=()=>{var n;const r=((n=this.options.errorSerializer)==null?void 0:n.serialize)??i4;return{state:{dehydratedMatches:this.state.matches.map(i=>({...cy(i,["id","status","updatedAt"]),error:i.error?{data:r(i.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var n,r,i;let s;typeof document<"u"&&(s=this.options.transformer.parse((n=window.__TSR__)==null?void 0:n.dehydrated)),Ns(s),this.dehydratedData=s.payload,(i=(r=this.options).hydrate)==null||i.call(r,s.payload);const o=s.router.state,l=this.matchRoutes(this.state.location).map(c=>{const d=o.dehydratedMatches.find(p=>p.id===c.id);return Ns(d,`Could not find a client-side match for dehydrated match with id: ${c.id}!`),{...c,...d}});this.__store.setState(c=>({...c,matches:l})),this.manifest=s.router.manifest},this.injectedHtml=[],this.injectHtml=n=>{const r=()=>(this.injectedHtml=this.injectedHtml.filter(i=>i!==r),n);this.injectedHtml.push(r)},this.injectScript=(n,r)=>{this.injectHtml(`<script class='tsr-once'>${n}; if (typeof __TSR__ !== 'undefined') __TSR__.cleanScripts()</script>`)},this.streamedKeys=new Set,this.getStreamedValue=n=>{var r;if(this.isServer)return;const i=(r=window.__TSR__)==null?void 0:r.streamedValues[n];if(i)return i.parsed||(i.parsed=this.options.transformer.parse(i.value)),i.parsed},this.streamValue=(n,r)=>{var i;this.streamedKeys.has(n),this.streamedKeys.add(n),this.injectScript(`__TSR__.streamedValues['${n}'] = { value: ${(i=this.serializer)==null?void 0:i.call(this,this.options.transformer.stringify(r))}}`)},this._handleNotFound=(n,r,{updateMatch:i=this.updateMatch}={})=>{const s=Object.fromEntries(n.map(c=>[c.routeId,c]));let o=(r.global?this.looseRoutesById[Ss]:this.looseRoutesById[r.routeId])||this.looseRoutesById[Ss];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==Ss;)o=o.parentRoute,Ns(o);const l=s[o.id];Ns(l,"Could not find match for route: "+o.id),i(l.id,c=>({...c,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(n,r,{updateMatch:i}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??MB,parseSearch:e.parseSearch??LB,transformer:e.transformer??Ep}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(e,n,r){return typeof e=="string"?this.matchRoutesInternal({pathname:e,search:n},r):this.matchRoutesInternal(e,n)}matchRoutesInternal(e,n){const{foundRoute:r,matchedRoutes:i,routeParams:s}=this.getMatchedRoutes(e,n?.dest);let o=!1;(r?r.path!=="/"&&s["**"]:Du(e.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const l=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let h=i.length-1;h>=0;h--){const b=i[h];if(b.children)return b.id}return Ss}})(),c=i.map(h=>{var b;let x;const w=((b=h.options.params)==null?void 0:b.parse)??h.options.parseParams;if(w)try{const E=w(s);Object.assign(s,E)}catch(E){if(x=new n4(E.message,{cause:E}),n?.throwOnError)throw x;return x}}),d=[],p=h=>h?.id?h.context??this.options.context??{}:this.options.context??{};return i.forEach((h,b)=>{var x,w,E,I;const T=d[b-1],[O,q]=(()=>{const V=T?.search??e.search;try{const B=Z_(h.options.validateSearch,V)??{};return[{...V,...B},void 0]}catch(B){const te=new ZS(B.message,{cause:B});if(n?.throwOnError)throw te;return[V,te]}})(),A=((w=(x=h.options).loaderDeps)==null?void 0:w.call(x,{search:O}))??"",D=A?JSON.stringify(A):"",L=Tg({path:h.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),z=Tg({path:h.id,params:s,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+D,P=this.getMatch(z),R=this.state.matches.find(V=>V.routeId===h.id),M=R?"stay":"enter";let F;if(P)F={...P,cause:M,params:R?Gs(R.params,s):s,search:Gs(R?R.search:P.search,O)};else{const V=h.options.loader||h.options.beforeLoad||h.lazyFn||XB(h)?"pending":"success";F={id:z,index:b,routeId:h.id,params:R?Gs(R.params,s):s,pathname:Aa([this.basepath,L]),updatedAt:Date.now(),search:R?Gs(R.search,O):O,searchError:void 0,status:V,isFetching:!1,error:void 0,paramsError:c[b],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:M,loaderDeps:R?Gs(R.loaderDeps,A):A,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:h.options.staticData||{},loadPromise:ed(),fullPath:h.fullPath}}F.status==="success"&&(F.headers=(I=(E=h.options).headers)==null?void 0:I.call(E,{loaderData:F.loaderData})),n?.preload||(F.globalNotFound=l===h.id),F.searchError=q;const W=p(T);F.context={...W,...F.__routeContext,...F.__beforeLoadContext},d.push(F)}),d.forEach((h,b)=>{var x,w,E,I;const T=this.looseRoutesById[h.routeId];if(!this.getMatch(h.id)&&n?._buildLocation!==!0){const A=d[b-1],D=p(A),L={deps:h.loaderDeps,params:h.params,context:D,location:e,navigate:z=>this.navigate({...z,_fromLocation:e}),buildLocation:this.buildLocation,cause:h.cause,abortController:h.abortController,preload:!!h.preload,matches:d};h.__routeContext=((w=(x=T.options).context)==null?void 0:w.call(x,L))??{},h.context={...D,...h.__routeContext,...h.__beforeLoadContext}}const q=(I=(E=T.options).head)==null?void 0:I.call(E,{matches:d,match:h,params:h.params,loaderData:h.loaderData??void 0});h.links=q?.links,h.scripts=q?.scripts,h.meta=q?.meta}),d}}class ZS extends Error{}class n4 extends Error{}function r4(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function i4(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function TC(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function OC(t){if("name"in t&&"message"in t){const e=new Error(t.message);return e.name=t.name,e}return t.data}const db=K.createContext(void 0),s4=K.createContext(void 0);function $l(t){const e=K.useContext(t.from?s4:db);return $i({select:r=>{const i=r.matches.find(s=>t.from?t.from===s.routeId:s.id===e);if(Ns(!((t.shouldThrow??!0)&&!i),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),i!==void 0)return t.select?t.select(i):i},structuralSharing:t.structuralSharing})}function so(t){return $l({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function o4(t){const{select:e,...n}=t;return $l({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function un(t){return $l({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function a4(t){return $l({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function Jd(t){const{navigate:e}=Po();return K.useCallback(n=>e({...n}),[e])}let B3=class{constructor(e){this.init=n=>{var r,i;this.originalIndex=n.originalIndex;const s=this.options,o=!s?.path&&!s?.id;this.parentRoute=(i=(r=this.options).getParentRoute)==null?void 0:i.call(r),o?this._path=Ss:Ns(this.parentRoute);let l=o?Ss:s.path;l&&l!=="/"&&(l=g1(l));const c=s?.id||l;let d=o?Ss:Aa([this.parentRoute.id===Ss?"":this.parentRoute.id,c]);l===Ss&&(l="/"),d!==Ss&&(d=Aa(["/",d]));const p=d===Ss?"/":Aa([this.parentRoute.fullPath,l]);this._path=l,this._id=d,this._fullPath=p,this._to=p,this._ssr=s?.ssr??n.defaultSsr??!0},this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.useMatch=n=>$l({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>$l({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>a4({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>un({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>o4({...n,from:this.id}),this.useLoaderData=n=>so({...n,from:this.id}),this.useNavigate=()=>Jd({from:this.id}),this.options=e||{},this.isRoot=!e?.getParentRoute,Ns(!(e?.id&&e?.path)),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(e){return this._addFileChildren(e)}_addFileChildren(e){return Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this}};function l4(t){return new B3(t)}function u4(){return t=>d4(t)}class c4 extends B3{constructor(e){super(e)}addChildren(e){return super.addChildren(e),this}_addFileChildren(e){return super._addFileChildren(e),this}_addFileTypes(){return this}}function d4(t){return new c4(t)}function Wt(t){return new f4(t,{silent:!0}).createRoute}class f4{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const i=l4(r);return i.isRoot=!1,i},this.silent=n?.silent}}function dy(t){return f.jsx(f.Fragment,{children:t.children})}function z3(t,e,n){return e.options.notFoundComponent?f.jsx(e.options.notFoundComponent,{data:n}):t.options.defaultNotFoundComponent?f.jsx(t.options.defaultNotFoundComponent,{data:n}):f.jsx(YB,{})}const W3=K.memo(function({matchId:e}){var n,r;const i=Po(),s=$i({select:I=>{var T;return(T=I.matches.find(O=>O.id===e))==null?void 0:T.routeId}});Ns(s);const o=i.routesById[s],l=o.options.pendingComponent??i.options.defaultPendingComponent,c=l?f.jsx(l,{}):null,d=o.options.errorComponent??i.options.defaultErrorComponent,p=o.options.onCatch??i.options.defaultOnCatch,h=o.isRoot?o.options.notFoundComponent??((n=i.options.notFoundRoute)==null?void 0:n.options.component):o.options.notFoundComponent,b=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??l??((r=o.options.errorComponent)==null?void 0:r.preload))?K.Suspense:dy,x=d?y1:dy,w=h?JB:dy,E=$i({select:I=>I.loadedAt});return f.jsx(db.Provider,{value:e,children:f.jsx(b,{fallback:c,children:f.jsx(x,{getResetKey:()=>E,errorComponent:d||cb,onCatch:(I,T)=>{if(bo(I))throw I;p?.(I,T)},children:f.jsx(w,{fallback:I=>{if(!h||I.routeId&&I.routeId!==s||!I.routeId&&!o.isRoot)throw I;return K.createElement(h,I)},children:f.jsx(p4,{matchId:e})})})})})}),p4=K.memo(function({matchId:e}){var n,r,i,s,o;const l=Po(),{match:c,matchIndex:d,routeId:p}=$i({select:w=>{const E=w.matches.findIndex(O=>O.id===e),I=w.matches[E];return{routeId:I.routeId,matchIndex:E,match:cy(I,["id","status","error"])}},structuralSharing:!0}),h=l.routesById[p],b=K.useMemo(()=>{const w=h.options.component??l.options.defaultComponent;return w?f.jsx(w,{}):f.jsx(oo,{})},[h.options.component,l.options.defaultComponent]),x=(h.options.errorComponent??l.options.defaultErrorComponent)||cb;if(c.status==="notFound"){let w;return TC(c.error)?w=(((n=l.options.errorSerializer)==null?void 0:n.deserialize)??OC)(c.error.data):w=c.error,Ns(bo(w)),z3(l,h,w)}if(c.status==="redirected")throw Ns(Iu(c.error)),(r=l.getMatch(c.id))==null?void 0:r.loadPromise;if(c.status==="error"){if(l.isServer)return f.jsx(x,{error:c.error,info:{componentStack:""}});throw TC(c.error)?(((i=l.options.errorSerializer)==null?void 0:i.deserialize)??OC)(c.error.data):c.error}if(c.status==="pending"){const w=h.options.pendingMinMs??l.options.defaultPendingMinMs;if(w&&!((s=l.getMatch(c.id))!=null&&s.minPendingPromise)&&!l.isServer){const E=ed();Promise.resolve().then(()=>{l.updateMatch(c.id,I=>({...I,minPendingPromise:E}))}),setTimeout(()=>{E.resolve(),l.updateMatch(c.id,I=>({...I,minPendingPromise:void 0}))},w)}throw(o=l.getMatch(c.id))==null?void 0:o.loadPromise}return f.jsxs(f.Fragment,{children:[b,l.AfterEachMatch?f.jsx(l.AfterEachMatch,{match:c,matchIndex:d}):null]})}),oo=K.memo(function(){const e=Po(),n=K.useContext(db),r=$i({select:d=>{var p;return(p=d.matches.find(h=>h.id===n))==null?void 0:p.routeId}}),i=e.routesById[r],s=$i({select:d=>{const h=d.matches.find(b=>b.id===n);return Ns(h),h.globalNotFound}}),o=$i({select:d=>{var p;const h=d.matches,b=h.findIndex(x=>x.id===n);return(p=h[b+1])==null?void 0:p.id}});if(s)return z3(e,i,void 0);if(!o)return null;const l=f.jsx(W3,{matchId:o}),c=e.options.defaultPendingComponent?f.jsx(e.options.defaultPendingComponent,{}):null;return n===Ss?f.jsx(K.Suspense,{fallback:c,children:l}):l});var J_={exports:{}},is={},Y_={exports:{}},X_={};var qC;function h4(){return qC||(qC=1,function(t){function e(se,ne){var oe=se.length;se.push(ne);e:for(;0<oe;){var X=oe-1>>>1,ce=se[X];if(0<i(ce,ne))se[X]=ne,se[oe]=ce,oe=X;else break e}}function n(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var ne=se[0],oe=se.pop();if(oe!==ne){se[0]=oe;e:for(var X=0,ce=se.length,de=ce>>>1;X<de;){var ye=2*(X+1)-1,_e=se[ye],Ne=ye+1,ze=se[Ne];if(0>i(_e,oe))Ne<ce&&0>i(ze,_e)?(se[X]=ze,se[Ne]=oe,X=Ne):(se[X]=_e,se[ye]=oe,X=ye);else if(Ne<ce&&0>i(ze,oe))se[X]=ze,se[Ne]=oe,X=Ne;else break e}}return ne}function i(se,ne){var oe=se.sortIndex-ne.sortIndex;return oe!==0?oe:se.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],p=1,h=null,b=3,x=!1,w=!1,E=!1,I=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(se){for(var ne=n(d);ne!==null;){if(ne.callback===null)r(d);else if(ne.startTime<=se)r(d),ne.sortIndex=ne.expirationTime,e(c,ne);else break;ne=n(d)}}function A(se){if(E=!1,q(se),!w)if(n(c)!==null)w=!0,J(D);else{var ne=n(d);ne!==null&&le(A,ne.startTime-se)}}function D(se,ne){w=!1,E&&(E=!1,T(P),P=-1),x=!0;var oe=b;try{for(q(ne),h=n(c);h!==null&&(!(h.expirationTime>ne)||se&&!F());){var X=h.callback;if(typeof X=="function"){h.callback=null,b=h.priorityLevel;var ce=X(h.expirationTime<=ne);ne=t.unstable_now(),typeof ce=="function"?h.callback=ce:h===n(c)&&r(c),q(ne)}else r(c);h=n(c)}if(h!==null)var de=!0;else{var ye=n(d);ye!==null&&le(A,ye.startTime-ne),de=!1}return de}finally{h=null,b=oe,x=!1}}var L=!1,z=null,P=-1,R=5,M=-1;function F(){return!(t.unstable_now()-M<R)}function W(){if(z!==null){var se=t.unstable_now();M=se;var ne=!0;try{ne=z(!0,se)}finally{ne?V():(L=!1,z=null)}}else L=!1}var V;if(typeof O=="function")V=function(){O(W)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,te=B.port2;B.port1.onmessage=W,V=function(){te.postMessage(null)}}else V=function(){I(W,0)};function J(se){z=se,L||(L=!0,V())}function le(se,ne){P=I(function(){se(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_continueExecution=function(){w||x||(w=!0,J(D))},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(se){switch(b){case 1:case 2:case 3:var ne=3;break;default:ne=b}var oe=b;b=ne;try{return se()}finally{b=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(se,ne){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var oe=b;b=se;try{return ne()}finally{b=oe}},t.unstable_scheduleCallback=function(se,ne,oe){var X=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?X+oe:X):oe=X,se){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=0x3fffffff;break;case 4:ce=1e4;break;default:ce=5e3}return ce=oe+ce,se={id:p++,callback:ne,priorityLevel:se,startTime:oe,expirationTime:ce,sortIndex:-1},oe>X?(se.sortIndex=oe,e(d,se),n(c)===null&&se===n(d)&&(E?(T(P),P=-1):E=!0,le(A,oe-X))):(se.sortIndex=ce,e(c,se),w||x||(w=!0,J(D))),se},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(se){var ne=b;return function(){var oe=b;b=ne;try{return se.apply(this,arguments)}finally{b=oe}}}}(X_)),X_}var RC;function m4(){return RC||(RC=1,Y_.exports=h4()),Y_.exports}var jC;function g4(){if(jC)return is;jC=1;var t=Kh(),e=m4();function n(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,u){o(a,u),o(a+"Capture",u)}function o(a,u){for(i[a]=u,a=0;a<u.length;a++)r.add(u[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function b(a){return c.call(h,a)?!0:c.call(p,a)?!1:d.test(a)?h[a]=!0:(p[a]=!0,!1)}function x(a,u,m,_){if(m!==null&&m.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return _?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function w(a,u,m,_){if(u===null||typeof u>"u"||x(a,u,m,_))return!0;if(_)return!1;if(m!==null)switch(m.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function E(a,u,m,_,k,j,Z){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=_,this.attributeNamespace=k,this.mustUseProperty=m,this.propertyName=a,this.type=u,this.sanitizeURL=j,this.removeEmptyString=Z}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){I[a]=new E(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var u=a[0];I[u]=new E(u,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){I[a]=new E(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){I[a]=new E(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){I[a]=new E(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){I[a]=new E(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){I[a]=new E(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){I[a]=new E(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){I[a]=new E(a,5,!1,a.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function O(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var u=a.replace(T,O);I[u]=new E(u,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var u=a.replace(T,O);I[u]=new E(u,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var u=a.replace(T,O);I[u]=new E(u,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){I[a]=new E(a,1,!1,a.toLowerCase(),null,!1,!1)}),I.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){I[a]=new E(a,1,!1,a.toLowerCase(),null,!0,!0)});function q(a,u,m,_){var k=I.hasOwnProperty(u)?I[u]:null;(k!==null?k.type!==0:_||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(w(u,m,k,_)&&(m=null),_||k===null?b(u)&&(m===null?a.removeAttribute(u):a.setAttribute(u,""+m)):k.mustUseProperty?a[k.propertyName]=m===null?k.type===3?!1:"":m:(u=k.attributeName,_=k.attributeNamespace,m===null?a.removeAttribute(u):(k=k.type,m=k===3||k===4&&m===!0?"":""+m,_?a.setAttributeNS(_,u,m):a.setAttribute(u,m))))}var A=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),F=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),se=Symbol.iterator;function ne(a){return a===null||typeof a!="object"?null:(a=se&&a[se]||a["@@iterator"],typeof a=="function"?a:null)}var oe=Object.assign,X;function ce(a){if(X===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);X=u&&u[1]||""}return`
`+X+a}var de=!1;function ye(a,u){if(!a||de)return"";de=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(He){var _=He}Reflect.construct(a,[],u)}else{try{u.call()}catch(He){_=He}a.call(u.prototype)}else{try{throw Error()}catch(He){_=He}a()}}catch(He){if(He&&_&&typeof He.stack=="string"){for(var k=He.stack.split(`
`),j=_.stack.split(`
`),Z=k.length-1,ge=j.length-1;1<=Z&&0<=ge&&k[Z]!==j[ge];)ge--;for(;1<=Z&&0<=ge;Z--,ge--)if(k[Z]!==j[ge]){if(Z!==1||ge!==1)do if(Z--,ge--,0>ge||k[Z]!==j[ge]){var Se=`
`+k[Z].replace(" at new "," at ");return a.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",a.displayName)),Se}while(1<=Z&&0<=ge);break}}}finally{de=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?ce(a):""}function _e(a){switch(a.tag){case 5:return ce(a.type);case 16:return ce("Lazy");case 13:return ce("Suspense");case 19:return ce("SuspenseList");case 0:case 2:case 15:return a=ye(a.type,!1),a;case 11:return a=ye(a.type.render,!1),a;case 1:return a=ye(a.type,!0),a;default:return""}}function Ne(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case z:return"Fragment";case L:return"Portal";case R:return"Profiler";case P:return"StrictMode";case V:return"Suspense";case B:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case F:return(a.displayName||"Context")+".Consumer";case M:return(a._context.displayName||"Context")+".Provider";case W:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case te:return u=a.displayName||null,u!==null?u:Ne(a.type)||"Memo";case J:u=a._payload,a=a._init;try{return Ne(a(u))}catch{}}return null}function ze(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(u);case 8:return u===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function qe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function De(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ze(a){var u=De(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),_=""+a[u];if(!a.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var k=m.get,j=m.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return k.call(this)},set:function(Z){_=""+Z,j.call(this,Z)}}),Object.defineProperty(a,u,{enumerable:m.enumerable}),{getValue:function(){return _},setValue:function(Z){_=""+Z},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function Xe(a){a._valueTracker||(a._valueTracker=Ze(a))}function Ue(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var m=u.getValue(),_="";return a&&(_=De(a)?a.checked?"true":"false":a.value),a=_,a!==m?(u.setValue(a),!0):!1}function ut(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function wt(a,u){var m=u.checked;return oe({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function Tt(a,u){var m=u.defaultValue==null?"":u.defaultValue,_=u.checked!=null?u.checked:u.defaultChecked;m=qe(u.value!=null?u.value:m),a._wrapperState={initialChecked:_,initialValue:m,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Ut(a,u){u=u.checked,u!=null&&q(a,"checked",u,!1)}function nn(a,u){Ut(a,u);var m=qe(u.value),_=u.type;if(m!=null)_==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(_==="submit"||_==="reset"){a.removeAttribute("value");return}u.hasOwnProperty("value")?ve(a,u.type,m):u.hasOwnProperty("defaultValue")&&ve(a,u.type,qe(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(a.defaultChecked=!!u.defaultChecked)}function xe(a,u,m){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var _=u.type;if(!(_!=="submit"&&_!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+a._wrapperState.initialValue,m||u===a.value||(a.value=u),a.defaultValue=u}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function ve(a,u,m){(u!=="number"||ut(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var ke=Array.isArray;function Ae(a,u,m,_){if(a=a.options,u){u={};for(var k=0;k<m.length;k++)u["$"+m[k]]=!0;for(m=0;m<a.length;m++)k=u.hasOwnProperty("$"+a[m].value),a[m].selected!==k&&(a[m].selected=k),k&&_&&(a[m].defaultSelected=!0)}else{for(m=""+qe(m),u=null,k=0;k<a.length;k++){if(a[k].value===m){a[k].selected=!0,_&&(a[k].defaultSelected=!0);return}u!==null||a[k].disabled||(u=a[k])}u!==null&&(u.selected=!0)}}function Ve(a,u){if(u.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},u,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function rt(a,u){var m=u.value;if(m==null){if(m=u.children,u=u.defaultValue,m!=null){if(u!=null)throw Error(n(92));if(ke(m)){if(1<m.length)throw Error(n(93));m=m[0]}u=m}u==null&&(u=""),m=u}a._wrapperState={initialValue:qe(m)}}function Me(a,u){var m=qe(u.value),_=qe(u.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),u.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),_!=null&&(a.defaultValue=""+_)}function ct(a){var u=a.textContent;u===a._wrapperState.initialValue&&u!==""&&u!==null&&(a.value=u)}function Qt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kt(a,u){return a==null||a==="http://www.w3.org/1999/xhtml"?Qt(u):a==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var hn,cr=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,m,_,k){MSApp.execUnsafeLocalFunction(function(){return a(u,m,_,k)})}:a}(function(a,u){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=u;else{for(hn=hn||document.createElement("div"),hn.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=hn.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}});function Dn(a,u){if(u){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=u;return}}a.textContent=u}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oi=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(a){Oi.forEach(function(u){u=u+a.charAt(0).toUpperCase()+a.substring(1),Hr[u]=Hr[a]})});function Tr(a,u,m){return u==null||typeof u=="boolean"||u===""?"":m||typeof u!="number"||u===0||Hr.hasOwnProperty(a)&&Hr[a]?(""+u).trim():u+"px"}function Gt(a,u){a=a.style;for(var m in u)if(u.hasOwnProperty(m)){var _=m.indexOf("--")===0,k=Tr(m,u[m],_);m==="float"&&(m="cssFloat"),_?a.setProperty(m,k):a[m]=k}}var Ki=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gi(a,u){if(u){if(Ki[a]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(n(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(n(61))}if(u.style!=null&&typeof u.style!="object")throw Error(n(62))}}function Zi(a,u){if(a.indexOf("-")===-1)return typeof u.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lo=null;function ua(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var su=null,Ds=null,H=null;function fc(a){if(a=Kf(a)){if(typeof su!="function")throw Error(n(280));var u=a.stateNode;u&&(u=zm(u),su(a.stateNode,a.type,u))}}function cn(a){Ds?H?H.push(a):H=[a]:Ds=a}function pc(){if(Ds){var a=Ds,u=H;if(H=Ds=null,fc(a),u)for(a=0;a<u.length;a++)fc(u[a])}}function hc(a,u){return a(u)}function mc(){}var ou=!1;function ca(a,u,m){if(ou)return a(u,m);ou=!0;try{return hc(a,u,m)}finally{ou=!1,(Ds!==null||H!==null)&&(mc(),pc())}}function Ji(a,u){var m=a.stateNode;if(m===null)return null;var _=zm(m);if(_===null)return null;m=_[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(a=a.type,_=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!_;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(n(231,u,typeof m));return m}var au=!1;if(l)try{var da={};Object.defineProperty(da,"passive",{get:function(){au=!0}}),window.addEventListener("test",da,da),window.removeEventListener("test",da,da)}catch{au=!1}function _f(a,u,m,_,k,j,Z,ge,Se){var He=Array.prototype.slice.call(arguments,3);try{u.apply(m,He)}catch(ht){this.onError(ht)}}var fa=!1,Ls=null,Qa=!1,Ms=null,wf={onError:function(a){fa=!0,Ls=a}};function Sf(a,u,m,_,k,j,Z,ge,Se){fa=!1,Ls=null,_f.apply(wf,arguments)}function gc(a,u,m,_,k,j,Z,ge,Se){if(Sf.apply(this,arguments),fa){if(fa){var He=Ls;fa=!1,Ls=null}else throw Error(n(198));Qa||(Qa=!0,Ms=He)}}function $s(a){var u=a,m=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,u.flags&4098&&(m=u.return),a=u.return;while(a)}return u.tag===3?m:null}function yc(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function vc(a){if($s(a)!==a)throw Error(n(188))}function Ef(a){var u=a.alternate;if(!u){if(u=$s(a),u===null)throw Error(n(188));return u!==a?null:a}for(var m=a,_=u;;){var k=m.return;if(k===null)break;var j=k.alternate;if(j===null){if(_=k.return,_!==null){m=_;continue}break}if(k.child===j.child){for(j=k.child;j;){if(j===m)return vc(k),a;if(j===_)return vc(k),u;j=j.sibling}throw Error(n(188))}if(m.return!==_.return)m=k,_=j;else{for(var Z=!1,ge=k.child;ge;){if(ge===m){Z=!0,m=k,_=j;break}if(ge===_){Z=!0,_=k,m=j;break}ge=ge.sibling}if(!Z){for(ge=j.child;ge;){if(ge===m){Z=!0,m=j,_=k;break}if(ge===_){Z=!0,_=j,m=k;break}ge=ge.sibling}if(!Z)throw Error(n(189))}}if(m.alternate!==_)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?a:u}function bc(a){return a=Ef(a),a!==null?xc(a):null}function xc(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=xc(a);if(u!==null)return u;a=a.sibling}return null}var _c=e.unstable_scheduleCallback,lu=e.unstable_cancelCallback,wc=e.unstable_shouldYield,Nf=e.unstable_requestPaint,dr=e.unstable_now,kf=e.unstable_getCurrentPriorityLevel,uu=e.unstable_ImmediatePriority,Sc=e.unstable_UserBlockingPriority,Ka=e.unstable_NormalPriority,If=e.unstable_LowPriority,cu=e.unstable_IdlePriority,Ga=null,Yi=null;function Cf(a){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(Ga,a,void 0,(a.current.flags&128)===128)}catch{}}var mi=Math.clz32?Math.clz32:qf,Tf=Math.log,Of=Math.LN2;function qf(a){return a>>>=0,a===0?32:31-(Tf(a)/Of|0)|0}var Lo=64,Za=4194304;function qi(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return a&0x7c00000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return a}}function Ja(a,u){var m=a.pendingLanes;if(m===0)return 0;var _=0,k=a.suspendedLanes,j=a.pingedLanes,Z=m&0xfffffff;if(Z!==0){var ge=Z&~k;ge!==0?_=qi(ge):(j&=Z,j!==0&&(_=qi(j)))}else Z=m&~k,Z!==0?_=qi(Z):j!==0&&(_=qi(j));if(_===0)return 0;if(u!==0&&u!==_&&!(u&k)&&(k=_&-_,j=u&-u,k>=j||k===16&&(j&4194240)!==0))return u;if(_&4&&(_|=m&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=_;0<u;)m=31-mi(u),k=1<<m,_|=a[m],u&=~k;return _}function dx(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return-1;case 0x8000000:case 0x10000000:case 0x20000000:case 0x40000000:return-1;default:return-1}}function fx(a,u){for(var m=a.suspendedLanes,_=a.pingedLanes,k=a.expirationTimes,j=a.pendingLanes;0<j;){var Z=31-mi(j),ge=1<<Z,Se=k[Z];Se===-1?(!(ge&m)||ge&_)&&(k[Z]=dx(ge,u)):Se<=u&&(a.expiredLanes|=ge),j&=~ge}}function Rf(a){return a=a.pendingLanes&-0x40000001,a!==0?a:a&0x40000000?0x40000000:0}function Rm(){var a=Lo;return Lo<<=1,!(Lo&4194240)&&(Lo=64),a}function jf(a){for(var u=[],m=0;31>m;m++)u.push(a);return u}function du(a,u,m){a.pendingLanes|=u,u!==0x20000000&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-mi(u),a[u]=m}function px(a,u){var m=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var _=a.eventTimes;for(a=a.expirationTimes;0<m;){var k=31-mi(m),j=1<<k;u[k]=0,_[k]=-1,a[k]=-1,m&=~j}}function Af(a,u){var m=a.entangledLanes|=u;for(a=a.entanglements;m;){var _=31-mi(m),k=1<<_;k&u|a[_]&u&&(a[_]|=u),m&=~k}}var Ln=0;function jm(a){return a&=-a,1<a?4<a?a&0xfffffff?16:0x20000000:4:1}var Pf,he,Ff,fu,Df,g=!1,y=[],S=null,N=null,C=null,$=new Map,fe=new Map,me=[],Qe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tt(a,u){switch(a){case"focusin":case"focusout":S=null;break;case"dragenter":case"dragleave":N=null;break;case"mouseover":case"mouseout":C=null;break;case"pointerover":case"pointerout":$.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":fe.delete(u.pointerId)}}function at(a,u,m,_,k,j){return a===null||a.nativeEvent!==j?(a={blockedOn:u,domEventName:m,eventSystemFlags:_,nativeEvent:j,targetContainers:[k]},u!==null&&(u=Kf(u),u!==null&&he(u)),a):(a.eventSystemFlags|=_,u=a.targetContainers,k!==null&&u.indexOf(k)===-1&&u.push(k),a)}function mt(a,u,m,_,k){switch(u){case"focusin":return S=at(S,a,u,m,_,k),!0;case"dragenter":return N=at(N,a,u,m,_,k),!0;case"mouseover":return C=at(C,a,u,m,_,k),!0;case"pointerover":var j=k.pointerId;return $.set(j,at($.get(j)||null,a,u,m,_,k)),!0;case"gotpointercapture":return j=k.pointerId,fe.set(j,at(fe.get(j)||null,a,u,m,_,k)),!0}return!1}function Be(a){var u=pu(a.target);if(u!==null){var m=$s(u);if(m!==null){if(u=m.tag,u===13){if(u=yc(m),u!==null){a.blockedOn=u,Df(a.priority,function(){Ff(m)});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Re(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var m=ue(a.domEventName,a.eventSystemFlags,u[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var _=new m.constructor(m.type,m);lo=_,m.target.dispatchEvent(_),lo=null}else return u=Kf(m),u!==null&&he(u),a.blockedOn=m,!1;u.shift()}return!0}function et(a,u,m){Re(a)&&m.delete(u)}function be(){g=!1,S!==null&&Re(S)&&(S=null),N!==null&&Re(N)&&(N=null),C!==null&&Re(C)&&(C=null),$.forEach(et),fe.forEach(et)}function Ie(a,u){a.blockedOn===u&&(a.blockedOn=null,g||(g=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,be)))}function Te(a){function u(k){return Ie(k,a)}if(0<y.length){Ie(y[0],a);for(var m=1;m<y.length;m++){var _=y[m];_.blockedOn===a&&(_.blockedOn=null)}}for(S!==null&&Ie(S,a),N!==null&&Ie(N,a),C!==null&&Ie(C,a),$.forEach(u),fe.forEach(u),m=0;m<me.length;m++)_=me[m],_.blockedOn===a&&(_.blockedOn=null);for(;0<me.length&&(m=me[0],m.blockedOn===null);)Be(m),m.blockedOn===null&&me.shift()}var Je=A.ReactCurrentBatchConfig,Ge=!0;function Oe(a,u,m,_){var k=Ln,j=Je.transition;Je.transition=null;try{Ln=1,St(a,u,m,_)}finally{Ln=k,Je.transition=j}}function Ke(a,u,m,_){var k=Ln,j=Je.transition;Je.transition=null;try{Ln=4,St(a,u,m,_)}finally{Ln=k,Je.transition=j}}function St(a,u,m,_){if(Ge){var k=ue(a,u,m,_);if(k===null)Ix(a,u,_,Y,m),tt(a,_);else if(mt(k,a,u,m,_))_.stopPropagation();else if(tt(a,_),u&4&&-1<Qe.indexOf(a)){for(;k!==null;){var j=Kf(k);if(j!==null&&Pf(j),j=ue(a,u,m,_),j===null&&Ix(a,u,_,Y,m),j===k)break;k=j}k!==null&&_.stopPropagation()}else Ix(a,u,_,null,m)}}var Y=null;function ue(a,u,m,_){if(Y=null,a=ua(_),a=pu(a),a!==null)if(u=$s(a),u===null)a=null;else if(m=u.tag,m===13){if(a=yc(u),a!==null)return a;a=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null);return Y=a,null}function Ee(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kf()){case uu:return 1;case Sc:return 4;case Ka:case If:return 16;case cu:return 0x20000000;default:return 16}default:return 16}}var st=null,ae=null,pe=null;function Q(){if(pe)return pe;var a,u=ae,m=u.length,_,k="value"in st?st.value:st.textContent,j=k.length;for(a=0;a<m&&u[a]===k[a];a++);var Z=m-a;for(_=1;_<=Z&&u[m-_]===k[j-_];_++);return pe=k.slice(a,1<_?1-_:void 0)}function re(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function ie(){return!0}function Le(){return!1}function it(a){function u(m,_,k,j,Z){this._reactName=m,this._targetInst=k,this.type=_,this.nativeEvent=j,this.target=Z,this.currentTarget=null;for(var ge in a)a.hasOwnProperty(ge)&&(m=a[ge],this[ge]=m?m(j):j[ge]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?ie:Le,this.isPropagationStopped=Le,this}return oe(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ie)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ie)},persist:function(){},isPersistent:ie}),u}var qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bt=it(qt),Jt=oe({},qt,{view:0,detail:0}),lt=it(Jt),we,Pe,ot,pt=oe({},Jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ot&&(ot&&a.type==="mousemove"?(we=a.screenX-ot.screenX,Pe=a.screenY-ot.screenY):Pe=we=0,ot=a),we)},movementY:function(a){return"movementY"in a?a.movementY:Pe}}),Ft=it(pt),Yt=oe({},pt,{dataTransfer:0}),je=it(Yt),nt=oe({},Jt,{relatedTarget:0}),dt=it(nt),Nt=oe({},qt,{animationName:0,elapsedTime:0,pseudoElement:0}),xt=it(Nt),$t=oe({},qt,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),mn=it($t),Rt=oe({},qt,{data:0}),Or=it(Rt),We={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_t={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kt(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=_t[a])?!!u[a]:!1}function vn(){return kt}var Qn=oe({},Jt,{key:function(a){if(a.key){var u=We[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=re(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?vt[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(a){return a.type==="keypress"?re(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?re(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Bn=it(Qn),Vn=oe({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pa=it(Vn),ai=oe({},Jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn}),hx=it(ai),mx=oe({},qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bs=it(mx),gx=oe({},pt,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Am=it(gx),Lf=[9,13,27,32],yx=l&&"CompositionEvent"in window,Mf=null;l&&"documentMode"in document&&(Mf=document.documentMode);var AM=l&&"TextEvent"in window&&!Mf,ZN=l&&(!yx||Mf&&8<Mf&&11>=Mf),JN=" ",YN=!1;function XN(a,u){switch(a){case"keyup":return Lf.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ek(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ec=!1;function PM(a,u){switch(a){case"compositionend":return ek(u);case"keypress":return u.which!==32?null:(YN=!0,JN);case"textInput":return a=u.data,a===JN&&YN?null:a;default:return null}}function FM(a,u){if(Ec)return a==="compositionend"||!yx&&XN(a,u)?(a=Q(),pe=ae=st=null,Ec=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return ZN&&u.locale!=="ko"?null:u.data;default:return null}}var DM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tk(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!DM[a.type]:u==="textarea"}function nk(a,u,m,_){cn(_),u=Mm(u,"onChange"),0<u.length&&(m=new Bt("onChange","change",null,m,_),a.push({event:m,listeners:u}))}var $f=null,Bf=null;function LM(a){xk(a,0)}function Pm(a){var u=Tc(a);if(Ue(u))return a}function MM(a,u){if(a==="change")return u}var rk=!1;if(l){var vx;if(l){var bx="oninput"in document;if(!bx){var ik=document.createElement("div");ik.setAttribute("oninput","return;"),bx=typeof ik.oninput=="function"}vx=bx}else vx=!1;rk=vx&&(!document.documentMode||9<document.documentMode)}function sk(){$f&&($f.detachEvent("onpropertychange",ok),Bf=$f=null)}function ok(a){if(a.propertyName==="value"&&Pm(Bf)){var u=[];nk(u,Bf,a,ua(a)),ca(LM,u)}}function $M(a,u,m){a==="focusin"?(sk(),$f=u,Bf=m,$f.attachEvent("onpropertychange",ok)):a==="focusout"&&sk()}function BM(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Pm(Bf)}function zM(a,u){if(a==="click")return Pm(u)}function WM(a,u){if(a==="input"||a==="change")return Pm(u)}function UM(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var uo=typeof Object.is=="function"?Object.is:UM;function zf(a,u){if(uo(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var m=Object.keys(a),_=Object.keys(u);if(m.length!==_.length)return!1;for(_=0;_<m.length;_++){var k=m[_];if(!c.call(u,k)||!uo(a[k],u[k]))return!1}return!0}function ak(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function lk(a,u){var m=ak(a);a=0;for(var _;m;){if(m.nodeType===3){if(_=a+m.textContent.length,a<=u&&_>=u)return{node:m,offset:u-a};a=_}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=ak(m)}}function uk(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?uk(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function ck(){for(var a=window,u=ut();u instanceof a.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)a=u.contentWindow;else break;u=ut(a.document)}return u}function xx(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}function VM(a){var u=ck(),m=a.focusedElem,_=a.selectionRange;if(u!==m&&m&&m.ownerDocument&&uk(m.ownerDocument.documentElement,m)){if(_!==null&&xx(m)){if(u=_.start,a=_.end,a===void 0&&(a=u),"selectionStart"in m)m.selectionStart=u,m.selectionEnd=Math.min(a,m.value.length);else if(a=(u=m.ownerDocument||document)&&u.defaultView||window,a.getSelection){a=a.getSelection();var k=m.textContent.length,j=Math.min(_.start,k);_=_.end===void 0?j:Math.min(_.end,k),!a.extend&&j>_&&(k=_,_=j,j=k),k=lk(m,j);var Z=lk(m,_);k&&Z&&(a.rangeCount!==1||a.anchorNode!==k.node||a.anchorOffset!==k.offset||a.focusNode!==Z.node||a.focusOffset!==Z.offset)&&(u=u.createRange(),u.setStart(k.node,k.offset),a.removeAllRanges(),j>_?(a.addRange(u),a.extend(Z.node,Z.offset)):(u.setEnd(Z.node,Z.offset),a.addRange(u)))}}for(u=[],a=m;a=a.parentNode;)a.nodeType===1&&u.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<u.length;m++)a=u[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var HM=l&&"documentMode"in document&&11>=document.documentMode,Nc=null,_x=null,Wf=null,wx=!1;function dk(a,u,m){var _=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;wx||Nc==null||Nc!==ut(_)||(_=Nc,"selectionStart"in _&&xx(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Wf&&zf(Wf,_)||(Wf=_,_=Mm(_x,"onSelect"),0<_.length&&(u=new Bt("onSelect","select",null,u,m),a.push({event:u,listeners:_}),u.target=Nc)))}function Fm(a,u){var m={};return m[a.toLowerCase()]=u.toLowerCase(),m["Webkit"+a]="webkit"+u,m["Moz"+a]="moz"+u,m}var kc={animationend:Fm("Animation","AnimationEnd"),animationiteration:Fm("Animation","AnimationIteration"),animationstart:Fm("Animation","AnimationStart"),transitionend:Fm("Transition","TransitionEnd")},Sx={},fk={};l&&(fk=document.createElement("div").style,"AnimationEvent"in window||(delete kc.animationend.animation,delete kc.animationiteration.animation,delete kc.animationstart.animation),"TransitionEvent"in window||delete kc.transitionend.transition);function Dm(a){if(Sx[a])return Sx[a];if(!kc[a])return a;var u=kc[a],m;for(m in u)if(u.hasOwnProperty(m)&&m in fk)return Sx[a]=u[m];return a}var pk=Dm("animationend"),hk=Dm("animationiteration"),mk=Dm("animationstart"),gk=Dm("transitionend"),yk=new Map,vk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ya(a,u){yk.set(a,u),s(u,[a])}for(var Ex=0;Ex<vk.length;Ex++){var Nx=vk[Ex],QM=Nx.toLowerCase(),KM=Nx[0].toUpperCase()+Nx.slice(1);Ya(QM,"on"+KM)}Ya(pk,"onAnimationEnd"),Ya(hk,"onAnimationIteration"),Ya(mk,"onAnimationStart"),Ya("dblclick","onDoubleClick"),Ya("focusin","onFocus"),Ya("focusout","onBlur"),Ya(gk,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uf));function bk(a,u,m){var _=a.type||"unknown-event";a.currentTarget=m,gc(_,u,void 0,a),a.currentTarget=null}function xk(a,u){u=(u&4)!==0;for(var m=0;m<a.length;m++){var _=a[m],k=_.event;_=_.listeners;e:{var j=void 0;if(u)for(var Z=_.length-1;0<=Z;Z--){var ge=_[Z],Se=ge.instance,He=ge.currentTarget;if(ge=ge.listener,Se!==j&&k.isPropagationStopped())break e;bk(k,ge,He),j=Se}else for(Z=0;Z<_.length;Z++){if(ge=_[Z],Se=ge.instance,He=ge.currentTarget,ge=ge.listener,Se!==j&&k.isPropagationStopped())break e;bk(k,ge,He),j=Se}}}if(Qa)throw a=Ms,Qa=!1,Ms=null,a}function fr(a,u){var m=u[jx];m===void 0&&(m=u[jx]=new Set);var _=a+"__bubble";m.has(_)||(_k(u,a,2,!1),m.add(_))}function kx(a,u,m){var _=0;u&&(_|=4),_k(m,a,_,u)}var Lm="_reactListening"+Math.random().toString(36).slice(2);function Vf(a){if(!a[Lm]){a[Lm]=!0,r.forEach(function(m){m!=="selectionchange"&&(GM.has(m)||kx(m,!1,a),kx(m,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[Lm]||(u[Lm]=!0,kx("selectionchange",!1,u))}}function _k(a,u,m,_){switch(Ee(u)){case 1:var k=Oe;break;case 4:k=Ke;break;default:k=St}m=k.bind(null,u,m,a),k=void 0,!au||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(k=!0),_?k!==void 0?a.addEventListener(u,m,{capture:!0,passive:k}):a.addEventListener(u,m,!0):k!==void 0?a.addEventListener(u,m,{passive:k}):a.addEventListener(u,m,!1)}function Ix(a,u,m,_,k){var j=_;if(!(u&1)&&!(u&2)&&_!==null)e:for(;;){if(_===null)return;var Z=_.tag;if(Z===3||Z===4){var ge=_.stateNode.containerInfo;if(ge===k||ge.nodeType===8&&ge.parentNode===k)break;if(Z===4)for(Z=_.return;Z!==null;){var Se=Z.tag;if((Se===3||Se===4)&&(Se=Z.stateNode.containerInfo,Se===k||Se.nodeType===8&&Se.parentNode===k))return;Z=Z.return}for(;ge!==null;){if(Z=pu(ge),Z===null)return;if(Se=Z.tag,Se===5||Se===6){_=j=Z;continue e}ge=ge.parentNode}}_=_.return}ca(function(){var He=j,ht=ua(m),gt=[];e:{var ft=yk.get(a);if(ft!==void 0){var jt=Bt,Mt=a;switch(a){case"keypress":if(re(m)===0)break e;case"keydown":case"keyup":jt=Bn;break;case"focusin":Mt="focus",jt=dt;break;case"focusout":Mt="blur",jt=dt;break;case"beforeblur":case"afterblur":jt=dt;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jt=Ft;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jt=je;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jt=hx;break;case pk:case hk:case mk:jt=xt;break;case gk:jt=Bs;break;case"scroll":jt=lt;break;case"wheel":jt=Am;break;case"copy":case"cut":case"paste":jt=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jt=pa}var zt=(u&4)!==0,$r=!zt&&a==="scroll",Fe=zt?ft!==null?ft+"Capture":null:ft;zt=[];for(var Ce=He,$e;Ce!==null;){$e=Ce;var bt=$e.stateNode;if($e.tag===5&&bt!==null&&($e=bt,Fe!==null&&(bt=Ji(Ce,Fe),bt!=null&&zt.push(Hf(Ce,bt,$e)))),$r)break;Ce=Ce.return}0<zt.length&&(ft=new jt(ft,Mt,null,m,ht),gt.push({event:ft,listeners:zt}))}}if(!(u&7)){e:{if(ft=a==="mouseover"||a==="pointerover",jt=a==="mouseout"||a==="pointerout",ft&&m!==lo&&(Mt=m.relatedTarget||m.fromElement)&&(pu(Mt)||Mt[ha]))break e;if((jt||ft)&&(ft=ht.window===ht?ht:(ft=ht.ownerDocument)?ft.defaultView||ft.parentWindow:window,jt?(Mt=m.relatedTarget||m.toElement,jt=He,Mt=Mt?pu(Mt):null,Mt!==null&&($r=$s(Mt),Mt!==$r||Mt.tag!==5&&Mt.tag!==6)&&(Mt=null)):(jt=null,Mt=He),jt!==Mt)){if(zt=Ft,bt="onMouseLeave",Fe="onMouseEnter",Ce="mouse",(a==="pointerout"||a==="pointerover")&&(zt=pa,bt="onPointerLeave",Fe="onPointerEnter",Ce="pointer"),$r=jt==null?ft:Tc(jt),$e=Mt==null?ft:Tc(Mt),ft=new zt(bt,Ce+"leave",jt,m,ht),ft.target=$r,ft.relatedTarget=$e,bt=null,pu(ht)===He&&(zt=new zt(Fe,Ce+"enter",Mt,m,ht),zt.target=$e,zt.relatedTarget=$r,bt=zt),$r=bt,jt&&Mt)t:{for(zt=jt,Fe=Mt,Ce=0,$e=zt;$e;$e=Ic($e))Ce++;for($e=0,bt=Fe;bt;bt=Ic(bt))$e++;for(;0<Ce-$e;)zt=Ic(zt),Ce--;for(;0<$e-Ce;)Fe=Ic(Fe),$e--;for(;Ce--;){if(zt===Fe||Fe!==null&&zt===Fe.alternate)break t;zt=Ic(zt),Fe=Ic(Fe)}zt=null}else zt=null;jt!==null&&wk(gt,ft,jt,zt,!1),Mt!==null&&$r!==null&&wk(gt,$r,Mt,zt,!0)}}e:{if(ft=He?Tc(He):window,jt=ft.nodeName&&ft.nodeName.toLowerCase(),jt==="select"||jt==="input"&&ft.type==="file")var Vt=MM;else if(tk(ft))if(rk)Vt=WM;else{Vt=BM;var en=$M}else(jt=ft.nodeName)&&jt.toLowerCase()==="input"&&(ft.type==="checkbox"||ft.type==="radio")&&(Vt=zM);if(Vt&&(Vt=Vt(a,He))){nk(gt,Vt,m,ht);break e}en&&en(a,ft,He),a==="focusout"&&(en=ft._wrapperState)&&en.controlled&&ft.type==="number"&&ve(ft,"number",ft.value)}switch(en=He?Tc(He):window,a){case"focusin":(tk(en)||en.contentEditable==="true")&&(Nc=en,_x=He,Wf=null);break;case"focusout":Wf=_x=Nc=null;break;case"mousedown":wx=!0;break;case"contextmenu":case"mouseup":case"dragend":wx=!1,dk(gt,m,ht);break;case"selectionchange":if(HM)break;case"keydown":case"keyup":dk(gt,m,ht)}var tn;if(yx)e:{switch(a){case"compositionstart":var ln="onCompositionStart";break e;case"compositionend":ln="onCompositionEnd";break e;case"compositionupdate":ln="onCompositionUpdate";break e}ln=void 0}else Ec?XN(a,m)&&(ln="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(ln="onCompositionStart");ln&&(ZN&&m.locale!=="ko"&&(Ec||ln!=="onCompositionStart"?ln==="onCompositionEnd"&&Ec&&(tn=Q()):(st=ht,ae="value"in st?st.value:st.textContent,Ec=!0)),en=Mm(He,ln),0<en.length&&(ln=new Or(ln,a,null,m,ht),gt.push({event:ln,listeners:en}),tn?ln.data=tn:(tn=ek(m),tn!==null&&(ln.data=tn)))),(tn=AM?PM(a,m):FM(a,m))&&(He=Mm(He,"onBeforeInput"),0<He.length&&(ht=new Or("onBeforeInput","beforeinput",null,m,ht),gt.push({event:ht,listeners:He}),ht.data=tn))}xk(gt,u)})}function Hf(a,u,m){return{instance:a,listener:u,currentTarget:m}}function Mm(a,u){for(var m=u+"Capture",_=[];a!==null;){var k=a,j=k.stateNode;k.tag===5&&j!==null&&(k=j,j=Ji(a,m),j!=null&&_.unshift(Hf(a,j,k)),j=Ji(a,u),j!=null&&_.push(Hf(a,j,k))),a=a.return}return _}function Ic(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function wk(a,u,m,_,k){for(var j=u._reactName,Z=[];m!==null&&m!==_;){var ge=m,Se=ge.alternate,He=ge.stateNode;if(Se!==null&&Se===_)break;ge.tag===5&&He!==null&&(ge=He,k?(Se=Ji(m,j),Se!=null&&Z.unshift(Hf(m,Se,ge))):k||(Se=Ji(m,j),Se!=null&&Z.push(Hf(m,Se,ge)))),m=m.return}Z.length!==0&&a.push({event:u,listeners:Z})}var ZM=/\r\n?/g,JM=/\u0000|\uFFFD/g;function Sk(a){return(typeof a=="string"?a:""+a).replace(ZM,`
`).replace(JM,"")}function $m(a,u,m){if(u=Sk(u),Sk(a)!==u&&m)throw Error(n(425))}function Bm(){}var Cx=null,Tx=null;function Ox(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var qx=typeof setTimeout=="function"?setTimeout:void 0,YM=typeof clearTimeout=="function"?clearTimeout:void 0,Ek=typeof Promise=="function"?Promise:void 0,XM=typeof queueMicrotask=="function"?queueMicrotask:typeof Ek<"u"?function(a){return Ek.resolve(null).then(a).catch(e$)}:qx;function e$(a){setTimeout(function(){throw a})}function Rx(a,u){var m=u,_=0;do{var k=m.nextSibling;if(a.removeChild(m),k&&k.nodeType===8)if(m=k.data,m==="/$"){if(_===0){a.removeChild(k),Te(u);return}_--}else m!=="$"&&m!=="$?"&&m!=="$!"||_++;m=k}while(m);Te(u)}function Xa(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return a}function Nk(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(u===0)return a;u--}else m==="/$"&&u++}a=a.previousSibling}return null}var Cc=Math.random().toString(36).slice(2),Mo="__reactFiber$"+Cc,Qf="__reactProps$"+Cc,ha="__reactContainer$"+Cc,jx="__reactEvents$"+Cc,t$="__reactListeners$"+Cc,n$="__reactHandles$"+Cc;function pu(a){var u=a[Mo];if(u)return u;for(var m=a.parentNode;m;){if(u=m[ha]||m[Mo]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(a=Nk(a);a!==null;){if(m=a[Mo])return m;a=Nk(a)}return u}a=m,m=a.parentNode}return null}function Kf(a){return a=a[Mo]||a[ha],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Tc(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function zm(a){return a[Qf]||null}var Ax=[],Oc=-1;function el(a){return{current:a}}function pr(a){0>Oc||(a.current=Ax[Oc],Ax[Oc]=null,Oc--)}function or(a,u){Oc++,Ax[Oc]=a.current,a.current=u}var tl={},gi=el(tl),Xi=el(!1),hu=tl;function qc(a,u){var m=a.type.contextTypes;if(!m)return tl;var _=a.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===u)return _.__reactInternalMemoizedMaskedChildContext;var k={},j;for(j in m)k[j]=u[j];return _&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=k),k}function es(a){return a=a.childContextTypes,a!=null}function Wm(){pr(Xi),pr(gi)}function kk(a,u,m){if(gi.current!==tl)throw Error(n(168));or(gi,u),or(Xi,m)}function Ik(a,u,m){var _=a.stateNode;if(u=u.childContextTypes,typeof _.getChildContext!="function")return m;_=_.getChildContext();for(var k in _)if(!(k in u))throw Error(n(108,ze(a)||"Unknown",k));return oe({},m,_)}function Um(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||tl,hu=gi.current,or(gi,a),or(Xi,Xi.current),!0}function Ck(a,u,m){var _=a.stateNode;if(!_)throw Error(n(169));m?(a=Ik(a,u,hu),_.__reactInternalMemoizedMergedChildContext=a,pr(Xi),pr(gi),or(gi,a)):pr(Xi),or(Xi,m)}var ma=null,Vm=!1,Px=!1;function Tk(a){ma===null?ma=[a]:ma.push(a)}function r$(a){Vm=!0,Tk(a)}function nl(){if(!Px&&ma!==null){Px=!0;var a=0,u=Ln;try{var m=ma;for(Ln=1;a<m.length;a++){var _=m[a];do _=_(!0);while(_!==null)}ma=null,Vm=!1}catch(k){throw ma!==null&&(ma=ma.slice(a+1)),_c(uu,nl),k}finally{Ln=u,Px=!1}}return null}var Rc=[],jc=0,Hm=null,Qm=0,zs=[],Ws=0,mu=null,ga=1,ya="";function gu(a,u){Rc[jc++]=Qm,Rc[jc++]=Hm,Hm=a,Qm=u}function Ok(a,u,m){zs[Ws++]=ga,zs[Ws++]=ya,zs[Ws++]=mu,mu=a;var _=ga;a=ya;var k=32-mi(_)-1;_&=~(1<<k),m+=1;var j=32-mi(u)+k;if(30<j){var Z=k-k%5;j=(_&(1<<Z)-1).toString(32),_>>=Z,k-=Z,ga=1<<32-mi(u)+k|m<<k|_,ya=j+a}else ga=1<<j|m<<k|_,ya=a}function Fx(a){a.return!==null&&(gu(a,1),Ok(a,1,0))}function Dx(a){for(;a===Hm;)Hm=Rc[--jc],Rc[jc]=null,Qm=Rc[--jc],Rc[jc]=null;for(;a===mu;)mu=zs[--Ws],zs[Ws]=null,ya=zs[--Ws],zs[Ws]=null,ga=zs[--Ws],zs[Ws]=null}var vs=null,bs=null,gr=!1,co=null;function qk(a,u){var m=Qs(5,null,null,0);m.elementType="DELETED",m.stateNode=u,m.return=a,u=a.deletions,u===null?(a.deletions=[m],a.flags|=16):u.push(m)}function Rk(a,u){switch(a.tag){case 5:var m=a.type;return u=u.nodeType!==1||m.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(a.stateNode=u,vs=a,bs=Xa(u.firstChild),!0):!1;case 6:return u=a.pendingProps===""||u.nodeType!==3?null:u,u!==null?(a.stateNode=u,vs=a,bs=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(m=mu!==null?{id:ga,overflow:ya}:null,a.memoizedState={dehydrated:u,treeContext:m,retryLane:0x40000000},m=Qs(18,null,null,0),m.stateNode=u,m.return=a,a.child=m,vs=a,bs=null,!0):!1;default:return!1}}function Lx(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Mx(a){if(gr){var u=bs;if(u){var m=u;if(!Rk(a,u)){if(Lx(a))throw Error(n(418));u=Xa(m.nextSibling);var _=vs;u&&Rk(a,u)?qk(_,m):(a.flags=a.flags&-4097|2,gr=!1,vs=a)}}else{if(Lx(a))throw Error(n(418));a.flags=a.flags&-4097|2,gr=!1,vs=a}}}function jk(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;vs=a}function Km(a){if(a!==vs)return!1;if(!gr)return jk(a),gr=!0,!1;var u;if((u=a.tag!==3)&&!(u=a.tag!==5)&&(u=a.type,u=u!=="head"&&u!=="body"&&!Ox(a.type,a.memoizedProps)),u&&(u=bs)){if(Lx(a))throw Ak(),Error(n(418));for(;u;)qk(a,u),u=Xa(u.nextSibling)}if(jk(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(u===0){bs=Xa(a.nextSibling);break e}u--}else m!=="$"&&m!=="$!"&&m!=="$?"||u++}a=a.nextSibling}bs=null}}else bs=vs?Xa(a.stateNode.nextSibling):null;return!0}function Ak(){for(var a=bs;a;)a=Xa(a.nextSibling)}function Ac(){bs=vs=null,gr=!1}function $x(a){co===null?co=[a]:co.push(a)}var i$=A.ReactCurrentBatchConfig;function Gf(a,u,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var _=m.stateNode}if(!_)throw Error(n(147,a));var k=_,j=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===j?u.ref:(u=function(Z){var ge=k.refs;Z===null?delete ge[j]:ge[j]=Z},u._stringRef=j,u)}if(typeof a!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,a))}return a}function Gm(a,u){throw a=Object.prototype.toString.call(u),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function Pk(a){var u=a._init;return u(a._payload)}function Fk(a){function u(Fe,Ce){if(a){var $e=Fe.deletions;$e===null?(Fe.deletions=[Ce],Fe.flags|=16):$e.push(Ce)}}function m(Fe,Ce){if(!a)return null;for(;Ce!==null;)u(Fe,Ce),Ce=Ce.sibling;return null}function _(Fe,Ce){for(Fe=new Map;Ce!==null;)Ce.key!==null?Fe.set(Ce.key,Ce):Fe.set(Ce.index,Ce),Ce=Ce.sibling;return Fe}function k(Fe,Ce){return Fe=cl(Fe,Ce),Fe.index=0,Fe.sibling=null,Fe}function j(Fe,Ce,$e){return Fe.index=$e,a?($e=Fe.alternate,$e!==null?($e=$e.index,$e<Ce?(Fe.flags|=2,Ce):$e):(Fe.flags|=2,Ce)):(Fe.flags|=1048576,Ce)}function Z(Fe){return a&&Fe.alternate===null&&(Fe.flags|=2),Fe}function ge(Fe,Ce,$e,bt){return Ce===null||Ce.tag!==6?(Ce=q_($e,Fe.mode,bt),Ce.return=Fe,Ce):(Ce=k(Ce,$e),Ce.return=Fe,Ce)}function Se(Fe,Ce,$e,bt){var Vt=$e.type;return Vt===z?ht(Fe,Ce,$e.props.children,bt,$e.key):Ce!==null&&(Ce.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===J&&Pk(Vt)===Ce.type)?(bt=k(Ce,$e.props),bt.ref=Gf(Fe,Ce,$e),bt.return=Fe,bt):(bt=bg($e.type,$e.key,$e.props,null,Fe.mode,bt),bt.ref=Gf(Fe,Ce,$e),bt.return=Fe,bt)}function He(Fe,Ce,$e,bt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==$e.containerInfo||Ce.stateNode.implementation!==$e.implementation?(Ce=R_($e,Fe.mode,bt),Ce.return=Fe,Ce):(Ce=k(Ce,$e.children||[]),Ce.return=Fe,Ce)}function ht(Fe,Ce,$e,bt,Vt){return Ce===null||Ce.tag!==7?(Ce=Eu($e,Fe.mode,bt,Vt),Ce.return=Fe,Ce):(Ce=k(Ce,$e),Ce.return=Fe,Ce)}function gt(Fe,Ce,$e){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=q_(""+Ce,Fe.mode,$e),Ce.return=Fe,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case D:return $e=bg(Ce.type,Ce.key,Ce.props,null,Fe.mode,$e),$e.ref=Gf(Fe,null,Ce),$e.return=Fe,$e;case L:return Ce=R_(Ce,Fe.mode,$e),Ce.return=Fe,Ce;case J:var bt=Ce._init;return gt(Fe,bt(Ce._payload),$e)}if(ke(Ce)||ne(Ce))return Ce=Eu(Ce,Fe.mode,$e,null),Ce.return=Fe,Ce;Gm(Fe,Ce)}return null}function ft(Fe,Ce,$e,bt){var Vt=Ce!==null?Ce.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Vt!==null?null:ge(Fe,Ce,""+$e,bt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case D:return $e.key===Vt?Se(Fe,Ce,$e,bt):null;case L:return $e.key===Vt?He(Fe,Ce,$e,bt):null;case J:return Vt=$e._init,ft(Fe,Ce,Vt($e._payload),bt)}if(ke($e)||ne($e))return Vt!==null?null:ht(Fe,Ce,$e,bt,null);Gm(Fe,$e)}return null}function jt(Fe,Ce,$e,bt,Vt){if(typeof bt=="string"&&bt!==""||typeof bt=="number")return Fe=Fe.get($e)||null,ge(Ce,Fe,""+bt,Vt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case D:return Fe=Fe.get(bt.key===null?$e:bt.key)||null,Se(Ce,Fe,bt,Vt);case L:return Fe=Fe.get(bt.key===null?$e:bt.key)||null,He(Ce,Fe,bt,Vt);case J:var en=bt._init;return jt(Fe,Ce,$e,en(bt._payload),Vt)}if(ke(bt)||ne(bt))return Fe=Fe.get($e)||null,ht(Ce,Fe,bt,Vt,null);Gm(Ce,bt)}return null}function Mt(Fe,Ce,$e,bt){for(var Vt=null,en=null,tn=Ce,ln=Ce=0,oi=null;tn!==null&&ln<$e.length;ln++){tn.index>ln?(oi=tn,tn=null):oi=tn.sibling;var Pn=ft(Fe,tn,$e[ln],bt);if(Pn===null){tn===null&&(tn=oi);break}a&&tn&&Pn.alternate===null&&u(Fe,tn),Ce=j(Pn,Ce,ln),en===null?Vt=Pn:en.sibling=Pn,en=Pn,tn=oi}if(ln===$e.length)return m(Fe,tn),gr&&gu(Fe,ln),Vt;if(tn===null){for(;ln<$e.length;ln++)tn=gt(Fe,$e[ln],bt),tn!==null&&(Ce=j(tn,Ce,ln),en===null?Vt=tn:en.sibling=tn,en=tn);return gr&&gu(Fe,ln),Vt}for(tn=_(Fe,tn);ln<$e.length;ln++)oi=jt(tn,Fe,ln,$e[ln],bt),oi!==null&&(a&&oi.alternate!==null&&tn.delete(oi.key===null?ln:oi.key),Ce=j(oi,Ce,ln),en===null?Vt=oi:en.sibling=oi,en=oi);return a&&tn.forEach(function(dl){return u(Fe,dl)}),gr&&gu(Fe,ln),Vt}function zt(Fe,Ce,$e,bt){var Vt=ne($e);if(typeof Vt!="function")throw Error(n(150));if($e=Vt.call($e),$e==null)throw Error(n(151));for(var en=Vt=null,tn=Ce,ln=Ce=0,oi=null,Pn=$e.next();tn!==null&&!Pn.done;ln++,Pn=$e.next()){tn.index>ln?(oi=tn,tn=null):oi=tn.sibling;var dl=ft(Fe,tn,Pn.value,bt);if(dl===null){tn===null&&(tn=oi);break}a&&tn&&dl.alternate===null&&u(Fe,tn),Ce=j(dl,Ce,ln),en===null?Vt=dl:en.sibling=dl,en=dl,tn=oi}if(Pn.done)return m(Fe,tn),gr&&gu(Fe,ln),Vt;if(tn===null){for(;!Pn.done;ln++,Pn=$e.next())Pn=gt(Fe,Pn.value,bt),Pn!==null&&(Ce=j(Pn,Ce,ln),en===null?Vt=Pn:en.sibling=Pn,en=Pn);return gr&&gu(Fe,ln),Vt}for(tn=_(Fe,tn);!Pn.done;ln++,Pn=$e.next())Pn=jt(tn,Fe,ln,Pn.value,bt),Pn!==null&&(a&&Pn.alternate!==null&&tn.delete(Pn.key===null?ln:Pn.key),Ce=j(Pn,Ce,ln),en===null?Vt=Pn:en.sibling=Pn,en=Pn);return a&&tn.forEach(function(F$){return u(Fe,F$)}),gr&&gu(Fe,ln),Vt}function $r(Fe,Ce,$e,bt){if(typeof $e=="object"&&$e!==null&&$e.type===z&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case D:e:{for(var Vt=$e.key,en=Ce;en!==null;){if(en.key===Vt){if(Vt=$e.type,Vt===z){if(en.tag===7){m(Fe,en.sibling),Ce=k(en,$e.props.children),Ce.return=Fe,Fe=Ce;break e}}else if(en.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===J&&Pk(Vt)===en.type){m(Fe,en.sibling),Ce=k(en,$e.props),Ce.ref=Gf(Fe,en,$e),Ce.return=Fe,Fe=Ce;break e}m(Fe,en);break}else u(Fe,en);en=en.sibling}$e.type===z?(Ce=Eu($e.props.children,Fe.mode,bt,$e.key),Ce.return=Fe,Fe=Ce):(bt=bg($e.type,$e.key,$e.props,null,Fe.mode,bt),bt.ref=Gf(Fe,Ce,$e),bt.return=Fe,Fe=bt)}return Z(Fe);case L:e:{for(en=$e.key;Ce!==null;){if(Ce.key===en)if(Ce.tag===4&&Ce.stateNode.containerInfo===$e.containerInfo&&Ce.stateNode.implementation===$e.implementation){m(Fe,Ce.sibling),Ce=k(Ce,$e.children||[]),Ce.return=Fe,Fe=Ce;break e}else{m(Fe,Ce);break}else u(Fe,Ce);Ce=Ce.sibling}Ce=R_($e,Fe.mode,bt),Ce.return=Fe,Fe=Ce}return Z(Fe);case J:return en=$e._init,$r(Fe,Ce,en($e._payload),bt)}if(ke($e))return Mt(Fe,Ce,$e,bt);if(ne($e))return zt(Fe,Ce,$e,bt);Gm(Fe,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,Ce!==null&&Ce.tag===6?(m(Fe,Ce.sibling),Ce=k(Ce,$e),Ce.return=Fe,Fe=Ce):(m(Fe,Ce),Ce=q_($e,Fe.mode,bt),Ce.return=Fe,Fe=Ce),Z(Fe)):m(Fe,Ce)}return $r}var Pc=Fk(!0),Dk=Fk(!1),Zm=el(null),Jm=null,Fc=null,Bx=null;function zx(){Bx=Fc=Jm=null}function Wx(a){var u=Zm.current;pr(Zm),a._currentValue=u}function Ux(a,u,m){for(;a!==null;){var _=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,_!==null&&(_.childLanes|=u)):_!==null&&(_.childLanes&u)!==u&&(_.childLanes|=u),a===m)break;a=a.return}}function Dc(a,u){Jm=a,Bx=Fc=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&u&&(ts=!0),a.firstContext=null)}function Us(a){var u=a._currentValue;if(Bx!==a)if(a={context:a,memoizedValue:u,next:null},Fc===null){if(Jm===null)throw Error(n(308));Fc=a,Jm.dependencies={lanes:0,firstContext:a}}else Fc=Fc.next=a;return u}var yu=null;function Vx(a){yu===null?yu=[a]:yu.push(a)}function Lk(a,u,m,_){var k=u.interleaved;return k===null?(m.next=m,Vx(u)):(m.next=k.next,k.next=m),u.interleaved=m,va(a,_)}function va(a,u){a.lanes|=u;var m=a.alternate;for(m!==null&&(m.lanes|=u),m=a,a=a.return;a!==null;)a.childLanes|=u,m=a.alternate,m!==null&&(m.childLanes|=u),m=a,a=a.return;return m.tag===3?m.stateNode:null}var rl=!1;function Hx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mk(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ba(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function il(a,u,m){var _=a.updateQueue;if(_===null)return null;if(_=_.shared,jn&2){var k=_.pending;return k===null?u.next=u:(u.next=k.next,k.next=u),_.pending=u,va(a,m)}return k=_.interleaved,k===null?(u.next=u,Vx(_)):(u.next=k.next,k.next=u),_.interleaved=u,va(a,m)}function Ym(a,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194240)!==0)){var _=u.lanes;_&=a.pendingLanes,m|=_,u.lanes=m,Af(a,m)}}function $k(a,u){var m=a.updateQueue,_=a.alternate;if(_!==null&&(_=_.updateQueue,m===_)){var k=null,j=null;if(m=m.firstBaseUpdate,m!==null){do{var Z={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};j===null?k=j=Z:j=j.next=Z,m=m.next}while(m!==null);j===null?k=j=u:j=j.next=u}else k=j=u;m={baseState:_.baseState,firstBaseUpdate:k,lastBaseUpdate:j,shared:_.shared,effects:_.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=u:a.next=u,m.lastBaseUpdate=u}function Xm(a,u,m,_){var k=a.updateQueue;rl=!1;var j=k.firstBaseUpdate,Z=k.lastBaseUpdate,ge=k.shared.pending;if(ge!==null){k.shared.pending=null;var Se=ge,He=Se.next;Se.next=null,Z===null?j=He:Z.next=He,Z=Se;var ht=a.alternate;ht!==null&&(ht=ht.updateQueue,ge=ht.lastBaseUpdate,ge!==Z&&(ge===null?ht.firstBaseUpdate=He:ge.next=He,ht.lastBaseUpdate=Se))}if(j!==null){var gt=k.baseState;Z=0,ht=He=Se=null,ge=j;do{var ft=ge.lane,jt=ge.eventTime;if((_&ft)===ft){ht!==null&&(ht=ht.next={eventTime:jt,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var Mt=a,zt=ge;switch(ft=u,jt=m,zt.tag){case 1:if(Mt=zt.payload,typeof Mt=="function"){gt=Mt.call(jt,gt,ft);break e}gt=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=zt.payload,ft=typeof Mt=="function"?Mt.call(jt,gt,ft):Mt,ft==null)break e;gt=oe({},gt,ft);break e;case 2:rl=!0}}ge.callback!==null&&ge.lane!==0&&(a.flags|=64,ft=k.effects,ft===null?k.effects=[ge]:ft.push(ge))}else jt={eventTime:jt,lane:ft,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},ht===null?(He=ht=jt,Se=gt):ht=ht.next=jt,Z|=ft;if(ge=ge.next,ge===null){if(ge=k.shared.pending,ge===null)break;ft=ge,ge=ft.next,ft.next=null,k.lastBaseUpdate=ft,k.shared.pending=null}}while(!0);if(ht===null&&(Se=gt),k.baseState=Se,k.firstBaseUpdate=He,k.lastBaseUpdate=ht,u=k.shared.interleaved,u!==null){k=u;do Z|=k.lane,k=k.next;while(k!==u)}else j===null&&(k.shared.lanes=0);xu|=Z,a.lanes=Z,a.memoizedState=gt}}function Bk(a,u,m){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var _=a[u],k=_.callback;if(k!==null){if(_.callback=null,_=m,typeof k!="function")throw Error(n(191,k));k.call(_)}}}var Zf={},$o=el(Zf),Jf=el(Zf),Yf=el(Zf);function vu(a){if(a===Zf)throw Error(n(174));return a}function Qx(a,u){switch(or(Yf,u),or(Jf,a),or($o,Zf),a=u.nodeType,a){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Kt(null,"");break;default:a=a===8?u.parentNode:u,u=a.namespaceURI||null,a=a.tagName,u=Kt(u,a)}pr($o),or($o,u)}function Lc(){pr($o),pr(Jf),pr(Yf)}function zk(a){vu(Yf.current);var u=vu($o.current),m=Kt(u,a.type);u!==m&&(or(Jf,a),or($o,m))}function Kx(a){Jf.current===a&&(pr($o),pr(Jf))}var qr=el(0);function eg(a){for(var u=a;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Gx=[];function Zx(){for(var a=0;a<Gx.length;a++)Gx[a]._workInProgressVersionPrimary=null;Gx.length=0}var tg=A.ReactCurrentDispatcher,Jx=A.ReactCurrentBatchConfig,bu=0,Rr=null,ti=null,ii=null,ng=!1,Xf=!1,ep=0,s$=0;function yi(){throw Error(n(321))}function Yx(a,u){if(u===null)return!1;for(var m=0;m<u.length&&m<a.length;m++)if(!uo(a[m],u[m]))return!1;return!0}function Xx(a,u,m,_,k,j){if(bu=j,Rr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,tg.current=a===null||a.memoizedState===null?u$:c$,a=m(_,k),Xf){j=0;do{if(Xf=!1,ep=0,25<=j)throw Error(n(301));j+=1,ii=ti=null,u.updateQueue=null,tg.current=d$,a=m(_,k)}while(Xf)}if(tg.current=sg,u=ti!==null&&ti.next!==null,bu=0,ii=ti=Rr=null,ng=!1,u)throw Error(n(300));return a}function e_(){var a=ep!==0;return ep=0,a}function Bo(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ii===null?Rr.memoizedState=ii=a:ii=ii.next=a,ii}function Vs(){if(ti===null){var a=Rr.alternate;a=a!==null?a.memoizedState:null}else a=ti.next;var u=ii===null?Rr.memoizedState:ii.next;if(u!==null)ii=u,ti=a;else{if(a===null)throw Error(n(310));ti=a,a={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},ii===null?Rr.memoizedState=ii=a:ii=ii.next=a}return ii}function tp(a,u){return typeof u=="function"?u(a):u}function t_(a){var u=Vs(),m=u.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var _=ti,k=_.baseQueue,j=m.pending;if(j!==null){if(k!==null){var Z=k.next;k.next=j.next,j.next=Z}_.baseQueue=k=j,m.pending=null}if(k!==null){j=k.next,_=_.baseState;var ge=Z=null,Se=null,He=j;do{var ht=He.lane;if((bu&ht)===ht)Se!==null&&(Se=Se.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),_=He.hasEagerState?He.eagerState:a(_,He.action);else{var gt={lane:ht,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Se===null?(ge=Se=gt,Z=_):Se=Se.next=gt,Rr.lanes|=ht,xu|=ht}He=He.next}while(He!==null&&He!==j);Se===null?Z=_:Se.next=ge,uo(_,u.memoizedState)||(ts=!0),u.memoizedState=_,u.baseState=Z,u.baseQueue=Se,m.lastRenderedState=_}if(a=m.interleaved,a!==null){k=a;do j=k.lane,Rr.lanes|=j,xu|=j,k=k.next;while(k!==a)}else k===null&&(m.lanes=0);return[u.memoizedState,m.dispatch]}function n_(a){var u=Vs(),m=u.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var _=m.dispatch,k=m.pending,j=u.memoizedState;if(k!==null){m.pending=null;var Z=k=k.next;do j=a(j,Z.action),Z=Z.next;while(Z!==k);uo(j,u.memoizedState)||(ts=!0),u.memoizedState=j,u.baseQueue===null&&(u.baseState=j),m.lastRenderedState=j}return[j,_]}function Wk(){}function Uk(a,u){var m=Rr,_=Vs(),k=u(),j=!uo(_.memoizedState,k);if(j&&(_.memoizedState=k,ts=!0),_=_.queue,r_(Qk.bind(null,m,_,a),[a]),_.getSnapshot!==u||j||ii!==null&&ii.memoizedState.tag&1){if(m.flags|=2048,np(9,Hk.bind(null,m,_,k,u),void 0,null),si===null)throw Error(n(349));bu&30||Vk(m,u,k)}return k}function Vk(a,u,m){a.flags|=16384,a={getSnapshot:u,value:m},u=Rr.updateQueue,u===null?(u={lastEffect:null,stores:null},Rr.updateQueue=u,u.stores=[a]):(m=u.stores,m===null?u.stores=[a]:m.push(a))}function Hk(a,u,m,_){u.value=m,u.getSnapshot=_,Kk(u)&&Gk(a)}function Qk(a,u,m){return m(function(){Kk(u)&&Gk(a)})}function Kk(a){var u=a.getSnapshot;a=a.value;try{var m=u();return!uo(a,m)}catch{return!0}}function Gk(a){var u=va(a,1);u!==null&&mo(u,a,1,-1)}function Zk(a){var u=Bo();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tp,lastRenderedState:a},u.queue=a,a=a.dispatch=l$.bind(null,Rr,a),[u.memoizedState,a]}function np(a,u,m,_){return a={tag:a,create:u,destroy:m,deps:_,next:null},u=Rr.updateQueue,u===null?(u={lastEffect:null,stores:null},Rr.updateQueue=u,u.lastEffect=a.next=a):(m=u.lastEffect,m===null?u.lastEffect=a.next=a:(_=m.next,m.next=a,a.next=_,u.lastEffect=a)),a}function Jk(){return Vs().memoizedState}function rg(a,u,m,_){var k=Bo();Rr.flags|=a,k.memoizedState=np(1|u,m,void 0,_===void 0?null:_)}function ig(a,u,m,_){var k=Vs();_=_===void 0?null:_;var j=void 0;if(ti!==null){var Z=ti.memoizedState;if(j=Z.destroy,_!==null&&Yx(_,Z.deps)){k.memoizedState=np(u,m,j,_);return}}Rr.flags|=a,k.memoizedState=np(1|u,m,j,_)}function Yk(a,u){return rg(8390656,8,a,u)}function r_(a,u){return ig(2048,8,a,u)}function Xk(a,u){return ig(4,2,a,u)}function eI(a,u){return ig(4,4,a,u)}function tI(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function nI(a,u,m){return m=m!=null?m.concat([a]):null,ig(4,4,tI.bind(null,u,a),m)}function i_(){}function rI(a,u){var m=Vs();u=u===void 0?null:u;var _=m.memoizedState;return _!==null&&u!==null&&Yx(u,_[1])?_[0]:(m.memoizedState=[a,u],a)}function iI(a,u){var m=Vs();u=u===void 0?null:u;var _=m.memoizedState;return _!==null&&u!==null&&Yx(u,_[1])?_[0]:(a=a(),m.memoizedState=[a,u],a)}function sI(a,u,m){return bu&21?(uo(m,u)||(m=Rm(),Rr.lanes|=m,xu|=m,a.baseState=!0),u):(a.baseState&&(a.baseState=!1,ts=!0),a.memoizedState=m)}function o$(a,u){var m=Ln;Ln=m!==0&&4>m?m:4,a(!0);var _=Jx.transition;Jx.transition={};try{a(!1),u()}finally{Ln=m,Jx.transition=_}}function oI(){return Vs().memoizedState}function a$(a,u,m){var _=ll(a);if(m={lane:_,action:m,hasEagerState:!1,eagerState:null,next:null},aI(a))lI(u,m);else if(m=Lk(a,u,m,_),m!==null){var k=ji();mo(m,a,_,k),uI(m,u,_)}}function l$(a,u,m){var _=ll(a),k={lane:_,action:m,hasEagerState:!1,eagerState:null,next:null};if(aI(a))lI(u,k);else{var j=a.alternate;if(a.lanes===0&&(j===null||j.lanes===0)&&(j=u.lastRenderedReducer,j!==null))try{var Z=u.lastRenderedState,ge=j(Z,m);if(k.hasEagerState=!0,k.eagerState=ge,uo(ge,Z)){var Se=u.interleaved;Se===null?(k.next=k,Vx(u)):(k.next=Se.next,Se.next=k),u.interleaved=k;return}}catch{}finally{}m=Lk(a,u,k,_),m!==null&&(k=ji(),mo(m,a,_,k),uI(m,u,_))}}function aI(a){var u=a.alternate;return a===Rr||u!==null&&u===Rr}function lI(a,u){Xf=ng=!0;var m=a.pending;m===null?u.next=u:(u.next=m.next,m.next=u),a.pending=u}function uI(a,u,m){if(m&4194240){var _=u.lanes;_&=a.pendingLanes,m|=_,u.lanes=m,Af(a,m)}}var sg={readContext:Us,useCallback:yi,useContext:yi,useEffect:yi,useImperativeHandle:yi,useInsertionEffect:yi,useLayoutEffect:yi,useMemo:yi,useReducer:yi,useRef:yi,useState:yi,useDebugValue:yi,useDeferredValue:yi,useTransition:yi,useMutableSource:yi,useSyncExternalStore:yi,useId:yi,unstable_isNewReconciler:!1},u$={readContext:Us,useCallback:function(a,u){return Bo().memoizedState=[a,u===void 0?null:u],a},useContext:Us,useEffect:Yk,useImperativeHandle:function(a,u,m){return m=m!=null?m.concat([a]):null,rg(4194308,4,tI.bind(null,u,a),m)},useLayoutEffect:function(a,u){return rg(4194308,4,a,u)},useInsertionEffect:function(a,u){return rg(4,2,a,u)},useMemo:function(a,u){var m=Bo();return u=u===void 0?null:u,a=a(),m.memoizedState=[a,u],a},useReducer:function(a,u,m){var _=Bo();return u=m!==void 0?m(u):u,_.memoizedState=_.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},_.queue=a,a=a.dispatch=a$.bind(null,Rr,a),[_.memoizedState,a]},useRef:function(a){var u=Bo();return a={current:a},u.memoizedState=a},useState:Zk,useDebugValue:i_,useDeferredValue:function(a){return Bo().memoizedState=a},useTransition:function(){var a=Zk(!1),u=a[0];return a=o$.bind(null,a[1]),Bo().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,m){var _=Rr,k=Bo();if(gr){if(m===void 0)throw Error(n(407));m=m()}else{if(m=u(),si===null)throw Error(n(349));bu&30||Vk(_,u,m)}k.memoizedState=m;var j={value:m,getSnapshot:u};return k.queue=j,Yk(Qk.bind(null,_,j,a),[a]),_.flags|=2048,np(9,Hk.bind(null,_,j,m,u),void 0,null),m},useId:function(){var a=Bo(),u=si.identifierPrefix;if(gr){var m=ya,_=ga;m=(_&~(1<<32-mi(_)-1)).toString(32)+m,u=":"+u+"R"+m,m=ep++,0<m&&(u+="H"+m.toString(32)),u+=":"}else m=s$++,u=":"+u+"r"+m.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},c$={readContext:Us,useCallback:rI,useContext:Us,useEffect:r_,useImperativeHandle:nI,useInsertionEffect:Xk,useLayoutEffect:eI,useMemo:iI,useReducer:t_,useRef:Jk,useState:function(){return t_(tp)},useDebugValue:i_,useDeferredValue:function(a){var u=Vs();return sI(u,ti.memoizedState,a)},useTransition:function(){var a=t_(tp)[0],u=Vs().memoizedState;return[a,u]},useMutableSource:Wk,useSyncExternalStore:Uk,useId:oI,unstable_isNewReconciler:!1},d$={readContext:Us,useCallback:rI,useContext:Us,useEffect:r_,useImperativeHandle:nI,useInsertionEffect:Xk,useLayoutEffect:eI,useMemo:iI,useReducer:n_,useRef:Jk,useState:function(){return n_(tp)},useDebugValue:i_,useDeferredValue:function(a){var u=Vs();return ti===null?u.memoizedState=a:sI(u,ti.memoizedState,a)},useTransition:function(){var a=n_(tp)[0],u=Vs().memoizedState;return[a,u]},useMutableSource:Wk,useSyncExternalStore:Uk,useId:oI,unstable_isNewReconciler:!1};function fo(a,u){if(a&&a.defaultProps){u=oe({},u),a=a.defaultProps;for(var m in a)u[m]===void 0&&(u[m]=a[m]);return u}return u}function s_(a,u,m,_){u=a.memoizedState,m=m(_,u),m=m==null?u:oe({},u,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var og={isMounted:function(a){return(a=a._reactInternals)?$s(a)===a:!1},enqueueSetState:function(a,u,m){a=a._reactInternals;var _=ji(),k=ll(a),j=ba(_,k);j.payload=u,m!=null&&(j.callback=m),u=il(a,j,k),u!==null&&(mo(u,a,k,_),Ym(u,a,k))},enqueueReplaceState:function(a,u,m){a=a._reactInternals;var _=ji(),k=ll(a),j=ba(_,k);j.tag=1,j.payload=u,m!=null&&(j.callback=m),u=il(a,j,k),u!==null&&(mo(u,a,k,_),Ym(u,a,k))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var m=ji(),_=ll(a),k=ba(m,_);k.tag=2,u!=null&&(k.callback=u),u=il(a,k,_),u!==null&&(mo(u,a,_,m),Ym(u,a,_))}};function cI(a,u,m,_,k,j,Z){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(_,j,Z):u.prototype&&u.prototype.isPureReactComponent?!zf(m,_)||!zf(k,j):!0}function dI(a,u,m){var _=!1,k=tl,j=u.contextType;return typeof j=="object"&&j!==null?j=Us(j):(k=es(u)?hu:gi.current,_=u.contextTypes,j=(_=_!=null)?qc(a,k):tl),u=new u(m,j),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=og,a.stateNode=u,u._reactInternals=a,_&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=k,a.__reactInternalMemoizedMaskedChildContext=j),u}function fI(a,u,m,_){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,_),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,_),u.state!==a&&og.enqueueReplaceState(u,u.state,null)}function o_(a,u,m,_){var k=a.stateNode;k.props=m,k.state=a.memoizedState,k.refs={},Hx(a);var j=u.contextType;typeof j=="object"&&j!==null?k.context=Us(j):(j=es(u)?hu:gi.current,k.context=qc(a,j)),k.state=a.memoizedState,j=u.getDerivedStateFromProps,typeof j=="function"&&(s_(a,u,j,m),k.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(u=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),u!==k.state&&og.enqueueReplaceState(k,k.state,null),Xm(a,m,k,_),k.state=a.memoizedState),typeof k.componentDidMount=="function"&&(a.flags|=4194308)}function Mc(a,u){try{var m="",_=u;do m+=_e(_),_=_.return;while(_);var k=m}catch(j){k=`
Error generating stack: `+j.message+`
`+j.stack}return{value:a,source:u,stack:k,digest:null}}function a_(a,u,m){return{value:a,source:null,stack:m??null,digest:u??null}}function l_(a,u){try{console.error(u.value)}catch(m){setTimeout(function(){throw m})}}var f$=typeof WeakMap=="function"?WeakMap:Map;function pI(a,u,m){m=ba(-1,m),m.tag=3,m.payload={element:null};var _=u.value;return m.callback=function(){pg||(pg=!0,S_=_),l_(a,u)},m}function hI(a,u,m){m=ba(-1,m),m.tag=3;var _=a.type.getDerivedStateFromError;if(typeof _=="function"){var k=u.value;m.payload=function(){return _(k)},m.callback=function(){l_(a,u)}}var j=a.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(m.callback=function(){l_(a,u),typeof _!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var Z=u.stack;this.componentDidCatch(u.value,{componentStack:Z!==null?Z:""})}),m}function mI(a,u,m){var _=a.pingCache;if(_===null){_=a.pingCache=new f$;var k=new Set;_.set(u,k)}else k=_.get(u),k===void 0&&(k=new Set,_.set(u,k));k.has(m)||(k.add(m),a=k$.bind(null,a,u,m),u.then(a,a))}function gI(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function yI(a,u,m,_,k){return a.mode&1?(a.flags|=65536,a.lanes=k,a):(a===u?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(u=ba(-1,1),u.tag=2,il(m,u,1))),m.lanes|=1),a)}var p$=A.ReactCurrentOwner,ts=!1;function Ri(a,u,m,_){u.child=a===null?Dk(u,null,m,_):Pc(u,a.child,m,_)}function vI(a,u,m,_,k){m=m.render;var j=u.ref;return Dc(u,k),_=Xx(a,u,m,_,j,k),m=e_(),a!==null&&!ts?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~k,xa(a,u,k)):(gr&&m&&Fx(u),u.flags|=1,Ri(a,u,_,k),u.child)}function bI(a,u,m,_,k){if(a===null){var j=m.type;return typeof j=="function"&&!O_(j)&&j.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(u.tag=15,u.type=j,xI(a,u,j,_,k)):(a=bg(m.type,null,_,u,u.mode,k),a.ref=u.ref,a.return=u,u.child=a)}if(j=a.child,!(a.lanes&k)){var Z=j.memoizedProps;if(m=m.compare,m=m!==null?m:zf,m(Z,_)&&a.ref===u.ref)return xa(a,u,k)}return u.flags|=1,a=cl(j,_),a.ref=u.ref,a.return=u,u.child=a}function xI(a,u,m,_,k){if(a!==null){var j=a.memoizedProps;if(zf(j,_)&&a.ref===u.ref)if(ts=!1,u.pendingProps=_=j,(a.lanes&k)!==0)a.flags&131072&&(ts=!0);else return u.lanes=a.lanes,xa(a,u,k)}return u_(a,u,m,_,k)}function _I(a,u,m){var _=u.pendingProps,k=_.children,j=a!==null?a.memoizedState:null;if(_.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},or(Bc,xs),xs|=m;else{if(!(m&0x40000000))return a=j!==null?j.baseLanes|m:m,u.lanes=u.childLanes=0x40000000,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,or(Bc,xs),xs|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=j!==null?j.baseLanes:m,or(Bc,xs),xs|=_}else j!==null?(_=j.baseLanes|m,u.memoizedState=null):_=m,or(Bc,xs),xs|=_;return Ri(a,u,k,m),u.child}function wI(a,u){var m=u.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(u.flags|=512,u.flags|=2097152)}function u_(a,u,m,_,k){var j=es(m)?hu:gi.current;return j=qc(u,j),Dc(u,k),m=Xx(a,u,m,_,j,k),_=e_(),a!==null&&!ts?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~k,xa(a,u,k)):(gr&&_&&Fx(u),u.flags|=1,Ri(a,u,m,k),u.child)}function SI(a,u,m,_,k){if(es(m)){var j=!0;Um(u)}else j=!1;if(Dc(u,k),u.stateNode===null)lg(a,u),dI(u,m,_),o_(u,m,_,k),_=!0;else if(a===null){var Z=u.stateNode,ge=u.memoizedProps;Z.props=ge;var Se=Z.context,He=m.contextType;typeof He=="object"&&He!==null?He=Us(He):(He=es(m)?hu:gi.current,He=qc(u,He));var ht=m.getDerivedStateFromProps,gt=typeof ht=="function"||typeof Z.getSnapshotBeforeUpdate=="function";gt||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ge!==_||Se!==He)&&fI(u,Z,_,He),rl=!1;var ft=u.memoizedState;Z.state=ft,Xm(u,_,Z,k),Se=u.memoizedState,ge!==_||ft!==Se||Xi.current||rl?(typeof ht=="function"&&(s_(u,m,ht,_),Se=u.memoizedState),(ge=rl||cI(u,m,ge,_,ft,Se,He))?(gt||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(u.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=_,u.memoizedState=Se),Z.props=_,Z.state=Se,Z.context=He,_=ge):(typeof Z.componentDidMount=="function"&&(u.flags|=4194308),_=!1)}else{Z=u.stateNode,Mk(a,u),ge=u.memoizedProps,He=u.type===u.elementType?ge:fo(u.type,ge),Z.props=He,gt=u.pendingProps,ft=Z.context,Se=m.contextType,typeof Se=="object"&&Se!==null?Se=Us(Se):(Se=es(m)?hu:gi.current,Se=qc(u,Se));var jt=m.getDerivedStateFromProps;(ht=typeof jt=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ge!==gt||ft!==Se)&&fI(u,Z,_,Se),rl=!1,ft=u.memoizedState,Z.state=ft,Xm(u,_,Z,k);var Mt=u.memoizedState;ge!==gt||ft!==Mt||Xi.current||rl?(typeof jt=="function"&&(s_(u,m,jt,_),Mt=u.memoizedState),(He=rl||cI(u,m,He,_,ft,Mt,Se)||!1)?(ht||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(_,Mt,Se),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(_,Mt,Se)),typeof Z.componentDidUpdate=="function"&&(u.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof Z.componentDidUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(u.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(u.flags|=1024),u.memoizedProps=_,u.memoizedState=Mt),Z.props=_,Z.state=Mt,Z.context=Se,_=He):(typeof Z.componentDidUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(u.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(u.flags|=1024),_=!1)}return c_(a,u,m,_,j,k)}function c_(a,u,m,_,k,j){wI(a,u);var Z=(u.flags&128)!==0;if(!_&&!Z)return k&&Ck(u,m,!1),xa(a,u,j);_=u.stateNode,p$.current=u;var ge=Z&&typeof m.getDerivedStateFromError!="function"?null:_.render();return u.flags|=1,a!==null&&Z?(u.child=Pc(u,a.child,null,j),u.child=Pc(u,null,ge,j)):Ri(a,u,ge,j),u.memoizedState=_.state,k&&Ck(u,m,!0),u.child}function EI(a){var u=a.stateNode;u.pendingContext?kk(a,u.pendingContext,u.pendingContext!==u.context):u.context&&kk(a,u.context,!1),Qx(a,u.containerInfo)}function NI(a,u,m,_,k){return Ac(),$x(k),u.flags|=256,Ri(a,u,m,_),u.child}var d_={dehydrated:null,treeContext:null,retryLane:0};function f_(a){return{baseLanes:a,cachePool:null,transitions:null}}function kI(a,u,m){var _=u.pendingProps,k=qr.current,j=!1,Z=(u.flags&128)!==0,ge;if((ge=Z)||(ge=a!==null&&a.memoizedState===null?!1:(k&2)!==0),ge?(j=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(k|=1),or(qr,k&1),a===null)return Mx(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(u.mode&1?a.data==="$!"?u.lanes=8:u.lanes=0x40000000:u.lanes=1,null):(Z=_.children,a=_.fallback,j?(_=u.mode,j=u.child,Z={mode:"hidden",children:Z},!(_&1)&&j!==null?(j.childLanes=0,j.pendingProps=Z):j=xg(Z,_,0,null),a=Eu(a,_,m,null),j.return=u,a.return=u,j.sibling=a,u.child=j,u.child.memoizedState=f_(m),u.memoizedState=d_,a):p_(u,Z));if(k=a.memoizedState,k!==null&&(ge=k.dehydrated,ge!==null))return h$(a,u,Z,_,ge,k,m);if(j){j=_.fallback,Z=u.mode,k=a.child,ge=k.sibling;var Se={mode:"hidden",children:_.children};return!(Z&1)&&u.child!==k?(_=u.child,_.childLanes=0,_.pendingProps=Se,u.deletions=null):(_=cl(k,Se),_.subtreeFlags=k.subtreeFlags&0xe00000),ge!==null?j=cl(ge,j):(j=Eu(j,Z,m,null),j.flags|=2),j.return=u,_.return=u,_.sibling=j,u.child=_,_=j,j=u.child,Z=a.child.memoizedState,Z=Z===null?f_(m):{baseLanes:Z.baseLanes|m,cachePool:null,transitions:Z.transitions},j.memoizedState=Z,j.childLanes=a.childLanes&~m,u.memoizedState=d_,_}return j=a.child,a=j.sibling,_=cl(j,{mode:"visible",children:_.children}),!(u.mode&1)&&(_.lanes=m),_.return=u,_.sibling=null,a!==null&&(m=u.deletions,m===null?(u.deletions=[a],u.flags|=16):m.push(a)),u.child=_,u.memoizedState=null,_}function p_(a,u){return u=xg({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function ag(a,u,m,_){return _!==null&&$x(_),Pc(u,a.child,null,m),a=p_(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function h$(a,u,m,_,k,j,Z){if(m)return u.flags&256?(u.flags&=-257,_=a_(Error(n(422))),ag(a,u,Z,_)):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(j=_.fallback,k=u.mode,_=xg({mode:"visible",children:_.children},k,0,null),j=Eu(j,k,Z,null),j.flags|=2,_.return=u,j.return=u,_.sibling=j,u.child=_,u.mode&1&&Pc(u,a.child,null,Z),u.child.memoizedState=f_(Z),u.memoizedState=d_,j);if(!(u.mode&1))return ag(a,u,Z,null);if(k.data==="$!"){if(_=k.nextSibling&&k.nextSibling.dataset,_)var ge=_.dgst;return _=ge,j=Error(n(419)),_=a_(j,_,void 0),ag(a,u,Z,_)}if(ge=(Z&a.childLanes)!==0,ts||ge){if(_=si,_!==null){switch(Z&-Z){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:k=32;break;case 0x20000000:k=0x10000000;break;default:k=0}k=k&(_.suspendedLanes|Z)?0:k,k!==0&&k!==j.retryLane&&(j.retryLane=k,va(a,k),mo(_,a,k,-1))}return T_(),_=a_(Error(n(421))),ag(a,u,Z,_)}return k.data==="$?"?(u.flags|=128,u.child=a.child,u=I$.bind(null,a),k._reactRetry=u,null):(a=j.treeContext,bs=Xa(k.nextSibling),vs=u,gr=!0,co=null,a!==null&&(zs[Ws++]=ga,zs[Ws++]=ya,zs[Ws++]=mu,ga=a.id,ya=a.overflow,mu=u),u=p_(u,_.children),u.flags|=4096,u)}function II(a,u,m){a.lanes|=u;var _=a.alternate;_!==null&&(_.lanes|=u),Ux(a.return,u,m)}function h_(a,u,m,_,k){var j=a.memoizedState;j===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:_,tail:m,tailMode:k}:(j.isBackwards=u,j.rendering=null,j.renderingStartTime=0,j.last=_,j.tail=m,j.tailMode=k)}function CI(a,u,m){var _=u.pendingProps,k=_.revealOrder,j=_.tail;if(Ri(a,u,_.children,m),_=qr.current,_&2)_=_&1|2,u.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&II(a,m,u);else if(a.tag===19)II(a,m,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}_&=1}if(or(qr,_),!(u.mode&1))u.memoizedState=null;else switch(k){case"forwards":for(m=u.child,k=null;m!==null;)a=m.alternate,a!==null&&eg(a)===null&&(k=m),m=m.sibling;m=k,m===null?(k=u.child,u.child=null):(k=m.sibling,m.sibling=null),h_(u,!1,k,m,j);break;case"backwards":for(m=null,k=u.child,u.child=null;k!==null;){if(a=k.alternate,a!==null&&eg(a)===null){u.child=k;break}a=k.sibling,k.sibling=m,m=k,k=a}h_(u,!0,m,null,j);break;case"together":h_(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function lg(a,u){!(u.mode&1)&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function xa(a,u,m){if(a!==null&&(u.dependencies=a.dependencies),xu|=u.lanes,!(m&u.childLanes))return null;if(a!==null&&u.child!==a.child)throw Error(n(153));if(u.child!==null){for(a=u.child,m=cl(a,a.pendingProps),u.child=m,m.return=u;a.sibling!==null;)a=a.sibling,m=m.sibling=cl(a,a.pendingProps),m.return=u;m.sibling=null}return u.child}function m$(a,u,m){switch(u.tag){case 3:EI(u),Ac();break;case 5:zk(u);break;case 1:es(u.type)&&Um(u);break;case 4:Qx(u,u.stateNode.containerInfo);break;case 10:var _=u.type._context,k=u.memoizedProps.value;or(Zm,_._currentValue),_._currentValue=k;break;case 13:if(_=u.memoizedState,_!==null)return _.dehydrated!==null?(or(qr,qr.current&1),u.flags|=128,null):m&u.child.childLanes?kI(a,u,m):(or(qr,qr.current&1),a=xa(a,u,m),a!==null?a.sibling:null);or(qr,qr.current&1);break;case 19:if(_=(m&u.childLanes)!==0,a.flags&128){if(_)return CI(a,u,m);u.flags|=128}if(k=u.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),or(qr,qr.current),_)break;return null;case 22:case 23:return u.lanes=0,_I(a,u,m)}return xa(a,u,m)}var TI,m_,OI,qI;TI=function(a,u){for(var m=u.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},m_=function(){},OI=function(a,u,m,_){var k=a.memoizedProps;if(k!==_){a=u.stateNode,vu($o.current);var j=null;switch(m){case"input":k=wt(a,k),_=wt(a,_),j=[];break;case"select":k=oe({},k,{value:void 0}),_=oe({},_,{value:void 0}),j=[];break;case"textarea":k=Ve(a,k),_=Ve(a,_),j=[];break;default:typeof k.onClick!="function"&&typeof _.onClick=="function"&&(a.onclick=Bm)}Gi(m,_);var Z;m=null;for(He in k)if(!_.hasOwnProperty(He)&&k.hasOwnProperty(He)&&k[He]!=null)if(He==="style"){var ge=k[He];for(Z in ge)ge.hasOwnProperty(Z)&&(m||(m={}),m[Z]="")}else He!=="dangerouslySetInnerHTML"&&He!=="children"&&He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&He!=="autoFocus"&&(i.hasOwnProperty(He)?j||(j=[]):(j=j||[]).push(He,null));for(He in _){var Se=_[He];if(ge=k?.[He],_.hasOwnProperty(He)&&Se!==ge&&(Se!=null||ge!=null))if(He==="style")if(ge){for(Z in ge)!ge.hasOwnProperty(Z)||Se&&Se.hasOwnProperty(Z)||(m||(m={}),m[Z]="");for(Z in Se)Se.hasOwnProperty(Z)&&ge[Z]!==Se[Z]&&(m||(m={}),m[Z]=Se[Z])}else m||(j||(j=[]),j.push(He,m)),m=Se;else He==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,ge=ge?ge.__html:void 0,Se!=null&&ge!==Se&&(j=j||[]).push(He,Se)):He==="children"?typeof Se!="string"&&typeof Se!="number"||(j=j||[]).push(He,""+Se):He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&(i.hasOwnProperty(He)?(Se!=null&&He==="onScroll"&&fr("scroll",a),j||ge===Se||(j=[])):(j=j||[]).push(He,Se))}m&&(j=j||[]).push("style",m);var He=j;(u.updateQueue=He)&&(u.flags|=4)}},qI=function(a,u,m,_){m!==_&&(u.flags|=4)};function rp(a,u){if(!gr)switch(a.tailMode){case"hidden":u=a.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:_.sibling=null}}function vi(a){var u=a.alternate!==null&&a.alternate.child===a.child,m=0,_=0;if(u)for(var k=a.child;k!==null;)m|=k.lanes|k.childLanes,_|=k.subtreeFlags&0xe00000,_|=k.flags&0xe00000,k.return=a,k=k.sibling;else for(k=a.child;k!==null;)m|=k.lanes|k.childLanes,_|=k.subtreeFlags,_|=k.flags,k.return=a,k=k.sibling;return a.subtreeFlags|=_,a.childLanes=m,u}function g$(a,u,m){var _=u.pendingProps;switch(Dx(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(u),null;case 1:return es(u.type)&&Wm(),vi(u),null;case 3:return _=u.stateNode,Lc(),pr(Xi),pr(gi),Zx(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(a===null||a.child===null)&&(Km(u)?u.flags|=4:a===null||a.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,co!==null&&(k_(co),co=null))),m_(a,u),vi(u),null;case 5:Kx(u);var k=vu(Yf.current);if(m=u.type,a!==null&&u.stateNode!=null)OI(a,u,m,_,k),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!_){if(u.stateNode===null)throw Error(n(166));return vi(u),null}if(a=vu($o.current),Km(u)){_=u.stateNode,m=u.type;var j=u.memoizedProps;switch(_[Mo]=u,_[Qf]=j,a=(u.mode&1)!==0,m){case"dialog":fr("cancel",_),fr("close",_);break;case"iframe":case"object":case"embed":fr("load",_);break;case"video":case"audio":for(k=0;k<Uf.length;k++)fr(Uf[k],_);break;case"source":fr("error",_);break;case"img":case"image":case"link":fr("error",_),fr("load",_);break;case"details":fr("toggle",_);break;case"input":Tt(_,j),fr("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!j.multiple},fr("invalid",_);break;case"textarea":rt(_,j),fr("invalid",_)}Gi(m,j),k=null;for(var Z in j)if(j.hasOwnProperty(Z)){var ge=j[Z];Z==="children"?typeof ge=="string"?_.textContent!==ge&&(j.suppressHydrationWarning!==!0&&$m(_.textContent,ge,a),k=["children",ge]):typeof ge=="number"&&_.textContent!==""+ge&&(j.suppressHydrationWarning!==!0&&$m(_.textContent,ge,a),k=["children",""+ge]):i.hasOwnProperty(Z)&&ge!=null&&Z==="onScroll"&&fr("scroll",_)}switch(m){case"input":Xe(_),xe(_,j,!0);break;case"textarea":Xe(_),ct(_);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(_.onclick=Bm)}_=k,u.updateQueue=_,_!==null&&(u.flags|=4)}else{Z=k.nodeType===9?k:k.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Qt(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=Z.createElement("div"),a.innerHTML="<script></script>",a=a.removeChild(a.firstChild)):typeof _.is=="string"?a=Z.createElement(m,{is:_.is}):(a=Z.createElement(m),m==="select"&&(Z=a,_.multiple?Z.multiple=!0:_.size&&(Z.size=_.size))):a=Z.createElementNS(a,m),a[Mo]=u,a[Qf]=_,TI(a,u,!1,!1),u.stateNode=a;e:{switch(Z=Zi(m,_),m){case"dialog":fr("cancel",a),fr("close",a),k=_;break;case"iframe":case"object":case"embed":fr("load",a),k=_;break;case"video":case"audio":for(k=0;k<Uf.length;k++)fr(Uf[k],a);k=_;break;case"source":fr("error",a),k=_;break;case"img":case"image":case"link":fr("error",a),fr("load",a),k=_;break;case"details":fr("toggle",a),k=_;break;case"input":Tt(a,_),k=wt(a,_),fr("invalid",a);break;case"option":k=_;break;case"select":a._wrapperState={wasMultiple:!!_.multiple},k=oe({},_,{value:void 0}),fr("invalid",a);break;case"textarea":rt(a,_),k=Ve(a,_),fr("invalid",a);break;default:k=_}Gi(m,k),ge=k;for(j in ge)if(ge.hasOwnProperty(j)){var Se=ge[j];j==="style"?Gt(a,Se):j==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&cr(a,Se)):j==="children"?typeof Se=="string"?(m!=="textarea"||Se!=="")&&Dn(a,Se):typeof Se=="number"&&Dn(a,""+Se):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?Se!=null&&j==="onScroll"&&fr("scroll",a):Se!=null&&q(a,j,Se,Z))}switch(m){case"input":Xe(a),xe(a,_,!1);break;case"textarea":Xe(a),ct(a);break;case"option":_.value!=null&&a.setAttribute("value",""+qe(_.value));break;case"select":a.multiple=!!_.multiple,j=_.value,j!=null?Ae(a,!!_.multiple,j,!1):_.defaultValue!=null&&Ae(a,!!_.multiple,_.defaultValue,!0);break;default:typeof k.onClick=="function"&&(a.onclick=Bm)}switch(m){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return vi(u),null;case 6:if(a&&u.stateNode!=null)qI(a,u,a.memoizedProps,_);else{if(typeof _!="string"&&u.stateNode===null)throw Error(n(166));if(m=vu(Yf.current),vu($o.current),Km(u)){if(_=u.stateNode,m=u.memoizedProps,_[Mo]=u,(j=_.nodeValue!==m)&&(a=vs,a!==null))switch(a.tag){case 3:$m(_.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&$m(_.nodeValue,m,(a.mode&1)!==0)}j&&(u.flags|=4)}else _=(m.nodeType===9?m:m.ownerDocument).createTextNode(_),_[Mo]=u,u.stateNode=_}return vi(u),null;case 13:if(pr(qr),_=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(gr&&bs!==null&&u.mode&1&&!(u.flags&128))Ak(),Ac(),u.flags|=98560,j=!1;else if(j=Km(u),_!==null&&_.dehydrated!==null){if(a===null){if(!j)throw Error(n(318));if(j=u.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(n(317));j[Mo]=u}else Ac(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;vi(u),j=!1}else co!==null&&(k_(co),co=null),j=!0;if(!j)return u.flags&65536?u:null}return u.flags&128?(u.lanes=m,u):(_=_!==null,_!==(a!==null&&a.memoizedState!==null)&&_&&(u.child.flags|=8192,u.mode&1&&(a===null||qr.current&1?ni===0&&(ni=3):T_())),u.updateQueue!==null&&(u.flags|=4),vi(u),null);case 4:return Lc(),m_(a,u),a===null&&Vf(u.stateNode.containerInfo),vi(u),null;case 10:return Wx(u.type._context),vi(u),null;case 17:return es(u.type)&&Wm(),vi(u),null;case 19:if(pr(qr),j=u.memoizedState,j===null)return vi(u),null;if(_=(u.flags&128)!==0,Z=j.rendering,Z===null)if(_)rp(j,!1);else{if(ni!==0||a!==null&&a.flags&128)for(a=u.child;a!==null;){if(Z=eg(a),Z!==null){for(u.flags|=128,rp(j,!1),_=Z.updateQueue,_!==null&&(u.updateQueue=_,u.flags|=4),u.subtreeFlags=0,_=m,m=u.child;m!==null;)j=m,a=_,j.flags&=0xe00002,Z=j.alternate,Z===null?(j.childLanes=0,j.lanes=a,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=Z.childLanes,j.lanes=Z.lanes,j.child=Z.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=Z.memoizedProps,j.memoizedState=Z.memoizedState,j.updateQueue=Z.updateQueue,j.type=Z.type,a=Z.dependencies,j.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return or(qr,qr.current&1|2),u.child}a=a.sibling}j.tail!==null&&dr()>zc&&(u.flags|=128,_=!0,rp(j,!1),u.lanes=4194304)}else{if(!_)if(a=eg(Z),a!==null){if(u.flags|=128,_=!0,m=a.updateQueue,m!==null&&(u.updateQueue=m,u.flags|=4),rp(j,!0),j.tail===null&&j.tailMode==="hidden"&&!Z.alternate&&!gr)return vi(u),null}else 2*dr()-j.renderingStartTime>zc&&m!==0x40000000&&(u.flags|=128,_=!0,rp(j,!1),u.lanes=4194304);j.isBackwards?(Z.sibling=u.child,u.child=Z):(m=j.last,m!==null?m.sibling=Z:u.child=Z,j.last=Z)}return j.tail!==null?(u=j.tail,j.rendering=u,j.tail=u.sibling,j.renderingStartTime=dr(),u.sibling=null,m=qr.current,or(qr,_?m&1|2:m&1),u):(vi(u),null);case 22:case 23:return C_(),_=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==_&&(u.flags|=8192),_&&u.mode&1?xs&0x40000000&&(vi(u),u.subtreeFlags&6&&(u.flags|=8192)):vi(u),null;case 24:return null;case 25:return null}throw Error(n(156,u.tag))}function y$(a,u){switch(Dx(u),u.tag){case 1:return es(u.type)&&Wm(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Lc(),pr(Xi),pr(gi),Zx(),a=u.flags,a&65536&&!(a&128)?(u.flags=a&-65537|128,u):null;case 5:return Kx(u),null;case 13:if(pr(qr),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Ac()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return pr(qr),null;case 4:return Lc(),null;case 10:return Wx(u.type._context),null;case 22:case 23:return C_(),null;case 24:return null;default:return null}}var ug=!1,bi=!1,v$=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function $c(a,u){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(_){Dr(a,u,_)}else m.current=null}function g_(a,u,m){try{m()}catch(_){Dr(a,u,_)}}var RI=!1;function b$(a,u){if(Cx=Ge,a=ck(),xx(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var _=m.getSelection&&m.getSelection();if(_&&_.rangeCount!==0){m=_.anchorNode;var k=_.anchorOffset,j=_.focusNode;_=_.focusOffset;try{m.nodeType,j.nodeType}catch{m=null;break e}var Z=0,ge=-1,Se=-1,He=0,ht=0,gt=a,ft=null;t:for(;;){for(var jt;gt!==m||k!==0&&gt.nodeType!==3||(ge=Z+k),gt!==j||_!==0&&gt.nodeType!==3||(Se=Z+_),gt.nodeType===3&&(Z+=gt.nodeValue.length),(jt=gt.firstChild)!==null;)ft=gt,gt=jt;for(;;){if(gt===a)break t;if(ft===m&&++He===k&&(ge=Z),ft===j&&++ht===_&&(Se=Z),(jt=gt.nextSibling)!==null)break;gt=ft,ft=gt.parentNode}gt=jt}m=ge===-1||Se===-1?null:{start:ge,end:Se}}else m=null}m=m||{start:0,end:0}}else m=null;for(Tx={focusedElem:a,selectionRange:m},Ge=!1,Dt=u;Dt!==null;)if(u=Dt,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,Dt=a;else for(;Dt!==null;){u=Dt;try{var Mt=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(Mt!==null){var zt=Mt.memoizedProps,$r=Mt.memoizedState,Fe=u.stateNode,Ce=Fe.getSnapshotBeforeUpdate(u.elementType===u.type?zt:fo(u.type,zt),$r);Fe.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:var $e=u.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(bt){Dr(u,u.return,bt)}if(a=u.sibling,a!==null){a.return=u.return,Dt=a;break}Dt=u.return}return Mt=RI,RI=!1,Mt}function ip(a,u,m){var _=u.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var k=_=_.next;do{if((k.tag&a)===a){var j=k.destroy;k.destroy=void 0,j!==void 0&&g_(u,m,j)}k=k.next}while(k!==_)}}function cg(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&a)===a){var _=m.create;m.destroy=_()}m=m.next}while(m!==u)}}function y_(a){var u=a.ref;if(u!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof u=="function"?u(a):u.current=a}}function jI(a){var u=a.alternate;u!==null&&(a.alternate=null,jI(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&(delete u[Mo],delete u[Qf],delete u[jx],delete u[t$],delete u[n$])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function AI(a){return a.tag===5||a.tag===3||a.tag===4}function PI(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||AI(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function v_(a,u,m){var _=a.tag;if(_===5||_===6)a=a.stateNode,u?m.nodeType===8?m.parentNode.insertBefore(a,u):m.insertBefore(a,u):(m.nodeType===8?(u=m.parentNode,u.insertBefore(a,m)):(u=m,u.appendChild(a)),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=Bm));else if(_!==4&&(a=a.child,a!==null))for(v_(a,u,m),a=a.sibling;a!==null;)v_(a,u,m),a=a.sibling}function b_(a,u,m){var _=a.tag;if(_===5||_===6)a=a.stateNode,u?m.insertBefore(a,u):m.appendChild(a);else if(_!==4&&(a=a.child,a!==null))for(b_(a,u,m),a=a.sibling;a!==null;)b_(a,u,m),a=a.sibling}var li=null,po=!1;function sl(a,u,m){for(m=m.child;m!==null;)FI(a,u,m),m=m.sibling}function FI(a,u,m){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(Ga,m)}catch{}switch(m.tag){case 5:bi||$c(m,u);case 6:var _=li,k=po;li=null,sl(a,u,m),li=_,po=k,li!==null&&(po?(a=li,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):li.removeChild(m.stateNode));break;case 18:li!==null&&(po?(a=li,m=m.stateNode,a.nodeType===8?Rx(a.parentNode,m):a.nodeType===1&&Rx(a,m),Te(a)):Rx(li,m.stateNode));break;case 4:_=li,k=po,li=m.stateNode.containerInfo,po=!0,sl(a,u,m),li=_,po=k;break;case 0:case 11:case 14:case 15:if(!bi&&(_=m.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){k=_=_.next;do{var j=k,Z=j.destroy;j=j.tag,Z!==void 0&&(j&2||j&4)&&g_(m,u,Z),k=k.next}while(k!==_)}sl(a,u,m);break;case 1:if(!bi&&($c(m,u),_=m.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=m.memoizedProps,_.state=m.memoizedState,_.componentWillUnmount()}catch(ge){Dr(m,u,ge)}sl(a,u,m);break;case 21:sl(a,u,m);break;case 22:m.mode&1?(bi=(_=bi)||m.memoizedState!==null,sl(a,u,m),bi=_):sl(a,u,m);break;default:sl(a,u,m)}}function DI(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new v$),u.forEach(function(_){var k=C$.bind(null,a,_);m.has(_)||(m.add(_),_.then(k,k))})}}function ho(a,u){var m=u.deletions;if(m!==null)for(var _=0;_<m.length;_++){var k=m[_];try{var j=a,Z=u,ge=Z;e:for(;ge!==null;){switch(ge.tag){case 5:li=ge.stateNode,po=!1;break e;case 3:li=ge.stateNode.containerInfo,po=!0;break e;case 4:li=ge.stateNode.containerInfo,po=!0;break e}ge=ge.return}if(li===null)throw Error(n(160));FI(j,Z,k),li=null,po=!1;var Se=k.alternate;Se!==null&&(Se.return=null),k.return=null}catch(He){Dr(k,u,He)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)LI(u,a),u=u.sibling}function LI(a,u){var m=a.alternate,_=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ho(u,a),zo(a),_&4){try{ip(3,a,a.return),cg(3,a)}catch(zt){Dr(a,a.return,zt)}try{ip(5,a,a.return)}catch(zt){Dr(a,a.return,zt)}}break;case 1:ho(u,a),zo(a),_&512&&m!==null&&$c(m,m.return);break;case 5:if(ho(u,a),zo(a),_&512&&m!==null&&$c(m,m.return),a.flags&32){var k=a.stateNode;try{Dn(k,"")}catch(zt){Dr(a,a.return,zt)}}if(_&4&&(k=a.stateNode,k!=null)){var j=a.memoizedProps,Z=m!==null?m.memoizedProps:j,ge=a.type,Se=a.updateQueue;if(a.updateQueue=null,Se!==null)try{ge==="input"&&j.type==="radio"&&j.name!=null&&Ut(k,j),Zi(ge,Z);var He=Zi(ge,j);for(Z=0;Z<Se.length;Z+=2){var ht=Se[Z],gt=Se[Z+1];ht==="style"?Gt(k,gt):ht==="dangerouslySetInnerHTML"?cr(k,gt):ht==="children"?Dn(k,gt):q(k,ht,gt,He)}switch(ge){case"input":nn(k,j);break;case"textarea":Me(k,j);break;case"select":var ft=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!j.multiple;var jt=j.value;jt!=null?Ae(k,!!j.multiple,jt,!1):ft!==!!j.multiple&&(j.defaultValue!=null?Ae(k,!!j.multiple,j.defaultValue,!0):Ae(k,!!j.multiple,j.multiple?[]:"",!1))}k[Qf]=j}catch(zt){Dr(a,a.return,zt)}}break;case 6:if(ho(u,a),zo(a),_&4){if(a.stateNode===null)throw Error(n(162));k=a.stateNode,j=a.memoizedProps;try{k.nodeValue=j}catch(zt){Dr(a,a.return,zt)}}break;case 3:if(ho(u,a),zo(a),_&4&&m!==null&&m.memoizedState.isDehydrated)try{Te(u.containerInfo)}catch(zt){Dr(a,a.return,zt)}break;case 4:ho(u,a),zo(a);break;case 13:ho(u,a),zo(a),k=a.child,k.flags&8192&&(j=k.memoizedState!==null,k.stateNode.isHidden=j,!j||k.alternate!==null&&k.alternate.memoizedState!==null||(w_=dr())),_&4&&DI(a);break;case 22:if(ht=m!==null&&m.memoizedState!==null,a.mode&1?(bi=(He=bi)||ht,ho(u,a),bi=He):ho(u,a),zo(a),_&8192){if(He=a.memoizedState!==null,(a.stateNode.isHidden=He)&&!ht&&a.mode&1)for(Dt=a,ht=a.child;ht!==null;){for(gt=Dt=ht;Dt!==null;){switch(ft=Dt,jt=ft.child,ft.tag){case 0:case 11:case 14:case 15:ip(4,ft,ft.return);break;case 1:$c(ft,ft.return);var Mt=ft.stateNode;if(typeof Mt.componentWillUnmount=="function"){_=ft,m=ft.return;try{u=_,Mt.props=u.memoizedProps,Mt.state=u.memoizedState,Mt.componentWillUnmount()}catch(zt){Dr(_,m,zt)}}break;case 5:$c(ft,ft.return);break;case 22:if(ft.memoizedState!==null){BI(gt);continue}}jt!==null?(jt.return=ft,Dt=jt):BI(gt)}ht=ht.sibling}e:for(ht=null,gt=a;;){if(gt.tag===5){if(ht===null){ht=gt;try{k=gt.stateNode,He?(j=k.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(ge=gt.stateNode,Se=gt.memoizedProps.style,Z=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,ge.style.display=Tr("display",Z))}catch(zt){Dr(a,a.return,zt)}}}else if(gt.tag===6){if(ht===null)try{gt.stateNode.nodeValue=He?"":gt.memoizedProps}catch(zt){Dr(a,a.return,zt)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===a)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===a)break e;for(;gt.sibling===null;){if(gt.return===null||gt.return===a)break e;ht===gt&&(ht=null),gt=gt.return}ht===gt&&(ht=null),gt.sibling.return=gt.return,gt=gt.sibling}}break;case 19:ho(u,a),zo(a),_&4&&DI(a);break;case 21:break;default:ho(u,a),zo(a)}}function zo(a){var u=a.flags;if(u&2){try{e:{for(var m=a.return;m!==null;){if(AI(m)){var _=m;break e}m=m.return}throw Error(n(160))}switch(_.tag){case 5:var k=_.stateNode;_.flags&32&&(Dn(k,""),_.flags&=-33);var j=PI(a);b_(a,j,k);break;case 3:case 4:var Z=_.stateNode.containerInfo,ge=PI(a);v_(a,ge,Z);break;default:throw Error(n(161))}}catch(Se){Dr(a,a.return,Se)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function x$(a,u,m){Dt=a,MI(a)}function MI(a,u,m){for(var _=(a.mode&1)!==0;Dt!==null;){var k=Dt,j=k.child;if(k.tag===22&&_){var Z=k.memoizedState!==null||ug;if(!Z){var ge=k.alternate,Se=ge!==null&&ge.memoizedState!==null||bi;ge=ug;var He=bi;if(ug=Z,(bi=Se)&&!He)for(Dt=k;Dt!==null;)Z=Dt,Se=Z.child,Z.tag===22&&Z.memoizedState!==null?zI(k):Se!==null?(Se.return=Z,Dt=Se):zI(k);for(;j!==null;)Dt=j,MI(j),j=j.sibling;Dt=k,ug=ge,bi=He}$I(a)}else k.subtreeFlags&8772&&j!==null?(j.return=k,Dt=j):$I(a)}}function $I(a){for(;Dt!==null;){var u=Dt;if(u.flags&8772){var m=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:bi||cg(5,u);break;case 1:var _=u.stateNode;if(u.flags&4&&!bi)if(m===null)_.componentDidMount();else{var k=u.elementType===u.type?m.memoizedProps:fo(u.type,m.memoizedProps);_.componentDidUpdate(k,m.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var j=u.updateQueue;j!==null&&Bk(u,j,_);break;case 3:var Z=u.updateQueue;if(Z!==null){if(m=null,u.child!==null)switch(u.child.tag){case 5:m=u.child.stateNode;break;case 1:m=u.child.stateNode}Bk(u,Z,m)}break;case 5:var ge=u.stateNode;if(m===null&&u.flags&4){m=ge;var Se=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&m.focus();break;case"img":Se.src&&(m.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var He=u.alternate;if(He!==null){var ht=He.memoizedState;if(ht!==null){var gt=ht.dehydrated;gt!==null&&Te(gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}bi||u.flags&512&&y_(u)}catch(ft){Dr(u,u.return,ft)}}if(u===a){Dt=null;break}if(m=u.sibling,m!==null){m.return=u.return,Dt=m;break}Dt=u.return}}function BI(a){for(;Dt!==null;){var u=Dt;if(u===a){Dt=null;break}var m=u.sibling;if(m!==null){m.return=u.return,Dt=m;break}Dt=u.return}}function zI(a){for(;Dt!==null;){var u=Dt;try{switch(u.tag){case 0:case 11:case 15:var m=u.return;try{cg(4,u)}catch(Se){Dr(u,m,Se)}break;case 1:var _=u.stateNode;if(typeof _.componentDidMount=="function"){var k=u.return;try{_.componentDidMount()}catch(Se){Dr(u,k,Se)}}var j=u.return;try{y_(u)}catch(Se){Dr(u,j,Se)}break;case 5:var Z=u.return;try{y_(u)}catch(Se){Dr(u,Z,Se)}}}catch(Se){Dr(u,u.return,Se)}if(u===a){Dt=null;break}var ge=u.sibling;if(ge!==null){ge.return=u.return,Dt=ge;break}Dt=u.return}}var _$=Math.ceil,dg=A.ReactCurrentDispatcher,x_=A.ReactCurrentOwner,Hs=A.ReactCurrentBatchConfig,jn=0,si=null,Qr=null,ui=0,xs=0,Bc=el(0),ni=0,sp=null,xu=0,fg=0,__=0,op=null,ns=null,w_=0,zc=1/0,_a=null,pg=!1,S_=null,ol=null,hg=!1,al=null,mg=0,ap=0,E_=null,gg=-1,yg=0;function ji(){return jn&6?dr():gg!==-1?gg:gg=dr()}function ll(a){return a.mode&1?jn&2&&ui!==0?ui&-ui:i$.transition!==null?(yg===0&&(yg=Rm()),yg):(a=Ln,a!==0||(a=window.event,a=a===void 0?16:Ee(a.type)),a):1}function mo(a,u,m,_){if(50<ap)throw ap=0,E_=null,Error(n(185));du(a,m,_),(!(jn&2)||a!==si)&&(a===si&&(!(jn&2)&&(fg|=m),ni===4&&ul(a,ui)),rs(a,_),m===1&&jn===0&&!(u.mode&1)&&(zc=dr()+500,Vm&&nl()))}function rs(a,u){var m=a.callbackNode;fx(a,u);var _=Ja(a,a===si?ui:0);if(_===0)m!==null&&lu(m),a.callbackNode=null,a.callbackPriority=0;else if(u=_&-_,a.callbackPriority!==u){if(m!=null&&lu(m),u===1)a.tag===0?r$(UI.bind(null,a)):Tk(UI.bind(null,a)),XM(function(){!(jn&6)&&nl()}),m=null;else{switch(jm(_)){case 1:m=uu;break;case 4:m=Sc;break;case 16:m=Ka;break;case 0x20000000:m=cu;break;default:m=Ka}m=YI(m,WI.bind(null,a))}a.callbackPriority=u,a.callbackNode=m}}function WI(a,u){if(gg=-1,yg=0,jn&6)throw Error(n(327));var m=a.callbackNode;if(Wc()&&a.callbackNode!==m)return null;var _=Ja(a,a===si?ui:0);if(_===0)return null;if(_&30||_&a.expiredLanes||u)u=vg(a,_);else{u=_;var k=jn;jn|=2;var j=HI();(si!==a||ui!==u)&&(_a=null,zc=dr()+500,wu(a,u));do try{E$();break}catch(ge){VI(a,ge)}while(!0);zx(),dg.current=j,jn=k,Qr!==null?u=0:(si=null,ui=0,u=ni)}if(u!==0){if(u===2&&(k=Rf(a),k!==0&&(_=k,u=N_(a,k))),u===1)throw m=sp,wu(a,0),ul(a,_),rs(a,dr()),m;if(u===6)ul(a,_);else{if(k=a.current.alternate,!(_&30)&&!w$(k)&&(u=vg(a,_),u===2&&(j=Rf(a),j!==0&&(_=j,u=N_(a,j))),u===1))throw m=sp,wu(a,0),ul(a,_),rs(a,dr()),m;switch(a.finishedWork=k,a.finishedLanes=_,u){case 0:case 1:throw Error(n(345));case 2:Su(a,ns,_a);break;case 3:if(ul(a,_),(_&0x7c00000)===_&&(u=w_+500-dr(),10<u)){if(Ja(a,0)!==0)break;if(k=a.suspendedLanes,(k&_)!==_){ji(),a.pingedLanes|=a.suspendedLanes&k;break}a.timeoutHandle=qx(Su.bind(null,a,ns,_a),u);break}Su(a,ns,_a);break;case 4:if(ul(a,_),(_&4194240)===_)break;for(u=a.eventTimes,k=-1;0<_;){var Z=31-mi(_);j=1<<Z,Z=u[Z],Z>k&&(k=Z),_&=~j}if(_=k,_=dr()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*_$(_/1960))-_,10<_){a.timeoutHandle=qx(Su.bind(null,a,ns,_a),_);break}Su(a,ns,_a);break;case 5:Su(a,ns,_a);break;default:throw Error(n(329))}}}return rs(a,dr()),a.callbackNode===m?WI.bind(null,a):null}function N_(a,u){var m=op;return a.current.memoizedState.isDehydrated&&(wu(a,u).flags|=256),a=vg(a,u),a!==2&&(u=ns,ns=m,u!==null&&k_(u)),a}function k_(a){ns===null?ns=a:ns.push.apply(ns,a)}function w$(a){for(var u=a;;){if(u.flags&16384){var m=u.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var _=0;_<m.length;_++){var k=m[_],j=k.getSnapshot;k=k.value;try{if(!uo(j(),k))return!1}catch{return!1}}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ul(a,u){for(u&=~__,u&=~fg,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var m=31-mi(u),_=1<<m;a[m]=-1,u&=~_}}function UI(a){if(jn&6)throw Error(n(327));Wc();var u=Ja(a,0);if(!(u&1))return rs(a,dr()),null;var m=vg(a,u);if(a.tag!==0&&m===2){var _=Rf(a);_!==0&&(u=_,m=N_(a,_))}if(m===1)throw m=sp,wu(a,0),ul(a,u),rs(a,dr()),m;if(m===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,Su(a,ns,_a),rs(a,dr()),null}function I_(a,u){var m=jn;jn|=1;try{return a(u)}finally{jn=m,jn===0&&(zc=dr()+500,Vm&&nl())}}function _u(a){al!==null&&al.tag===0&&!(jn&6)&&Wc();var u=jn;jn|=1;var m=Hs.transition,_=Ln;try{if(Hs.transition=null,Ln=1,a)return a()}finally{Ln=_,Hs.transition=m,jn=u,!(jn&6)&&nl()}}function C_(){xs=Bc.current,pr(Bc)}function wu(a,u){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,YM(m)),Qr!==null)for(m=Qr.return;m!==null;){var _=m;switch(Dx(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&Wm();break;case 3:Lc(),pr(Xi),pr(gi),Zx();break;case 5:Kx(_);break;case 4:Lc();break;case 13:pr(qr);break;case 19:pr(qr);break;case 10:Wx(_.type._context);break;case 22:case 23:C_()}m=m.return}if(si=a,Qr=a=cl(a.current,null),ui=xs=u,ni=0,sp=null,__=fg=xu=0,ns=op=null,yu!==null){for(u=0;u<yu.length;u++)if(m=yu[u],_=m.interleaved,_!==null){m.interleaved=null;var k=_.next,j=m.pending;if(j!==null){var Z=j.next;j.next=k,_.next=Z}m.pending=_}yu=null}return a}function VI(a,u){do{var m=Qr;try{if(zx(),tg.current=sg,ng){for(var _=Rr.memoizedState;_!==null;){var k=_.queue;k!==null&&(k.pending=null),_=_.next}ng=!1}if(bu=0,ii=ti=Rr=null,Xf=!1,ep=0,x_.current=null,m===null||m.return===null){ni=1,sp=u,Qr=null;break}e:{var j=a,Z=m.return,ge=m,Se=u;if(u=ui,ge.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var He=Se,ht=ge,gt=ht.tag;if(!(ht.mode&1)&&(gt===0||gt===11||gt===15)){var ft=ht.alternate;ft?(ht.updateQueue=ft.updateQueue,ht.memoizedState=ft.memoizedState,ht.lanes=ft.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var jt=gI(Z);if(jt!==null){jt.flags&=-257,yI(jt,Z,ge,j,u),jt.mode&1&&mI(j,He,u),u=jt,Se=He;var Mt=u.updateQueue;if(Mt===null){var zt=new Set;zt.add(Se),u.updateQueue=zt}else Mt.add(Se);break e}else{if(!(u&1)){mI(j,He,u),T_();break e}Se=Error(n(426))}}else if(gr&&ge.mode&1){var $r=gI(Z);if($r!==null){!($r.flags&65536)&&($r.flags|=256),yI($r,Z,ge,j,u),$x(Mc(Se,ge));break e}}j=Se=Mc(Se,ge),ni!==4&&(ni=2),op===null?op=[j]:op.push(j),j=Z;do{switch(j.tag){case 3:j.flags|=65536,u&=-u,j.lanes|=u;var Fe=pI(j,Se,u);$k(j,Fe);break e;case 1:ge=Se;var Ce=j.type,$e=j.stateNode;if(!(j.flags&128)&&(typeof Ce.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(ol===null||!ol.has($e)))){j.flags|=65536,u&=-u,j.lanes|=u;var bt=hI(j,ge,u);$k(j,bt);break e}}j=j.return}while(j!==null)}KI(m)}catch(Vt){u=Vt,Qr===m&&m!==null&&(Qr=m=m.return);continue}break}while(!0)}function HI(){var a=dg.current;return dg.current=sg,a===null?sg:a}function T_(){(ni===0||ni===3||ni===2)&&(ni=4),si===null||!(xu&0xfffffff)&&!(fg&0xfffffff)||ul(si,ui)}function vg(a,u){var m=jn;jn|=2;var _=HI();(si!==a||ui!==u)&&(_a=null,wu(a,u));do try{S$();break}catch(k){VI(a,k)}while(!0);if(zx(),jn=m,dg.current=_,Qr!==null)throw Error(n(261));return si=null,ui=0,ni}function S$(){for(;Qr!==null;)QI(Qr)}function E$(){for(;Qr!==null&&!wc();)QI(Qr)}function QI(a){var u=JI(a.alternate,a,xs);a.memoizedProps=a.pendingProps,u===null?KI(a):Qr=u,x_.current=null}function KI(a){var u=a;do{var m=u.alternate;if(a=u.return,u.flags&32768){if(m=y$(m,u),m!==null){m.flags&=32767,Qr=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{ni=6,Qr=null;return}}else if(m=g$(m,u,xs),m!==null){Qr=m;return}if(u=u.sibling,u!==null){Qr=u;return}Qr=u=a}while(u!==null);ni===0&&(ni=5)}function Su(a,u,m){var _=Ln,k=Hs.transition;try{Hs.transition=null,Ln=1,N$(a,u,m,_)}finally{Hs.transition=k,Ln=_}return null}function N$(a,u,m,_){do Wc();while(al!==null);if(jn&6)throw Error(n(327));m=a.finishedWork;var k=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var j=m.lanes|m.childLanes;if(px(a,j),a===si&&(Qr=si=null,ui=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||hg||(hg=!0,YI(Ka,function(){return Wc(),null})),j=(m.flags&15990)!==0,m.subtreeFlags&15990||j){j=Hs.transition,Hs.transition=null;var Z=Ln;Ln=1;var ge=jn;jn|=4,x_.current=null,b$(a,m),LI(m,a),VM(Tx),Ge=!!Cx,Tx=Cx=null,a.current=m,x$(m),Nf(),jn=ge,Ln=Z,Hs.transition=j}else a.current=m;if(hg&&(hg=!1,al=a,mg=k),j=a.pendingLanes,j===0&&(ol=null),Cf(m.stateNode),rs(a,dr()),u!==null)for(_=a.onRecoverableError,m=0;m<u.length;m++)k=u[m],_(k.value,{componentStack:k.stack,digest:k.digest});if(pg)throw pg=!1,a=S_,S_=null,a;return mg&1&&a.tag!==0&&Wc(),j=a.pendingLanes,j&1?a===E_?ap++:(ap=0,E_=a):ap=0,nl(),null}function Wc(){if(al!==null){var a=jm(mg),u=Hs.transition,m=Ln;try{if(Hs.transition=null,Ln=16>a?16:a,al===null)var _=!1;else{if(a=al,al=null,mg=0,jn&6)throw Error(n(331));var k=jn;for(jn|=4,Dt=a.current;Dt!==null;){var j=Dt,Z=j.child;if(Dt.flags&16){var ge=j.deletions;if(ge!==null){for(var Se=0;Se<ge.length;Se++){var He=ge[Se];for(Dt=He;Dt!==null;){var ht=Dt;switch(ht.tag){case 0:case 11:case 15:ip(8,ht,j)}var gt=ht.child;if(gt!==null)gt.return=ht,Dt=gt;else for(;Dt!==null;){ht=Dt;var ft=ht.sibling,jt=ht.return;if(jI(ht),ht===He){Dt=null;break}if(ft!==null){ft.return=jt,Dt=ft;break}Dt=jt}}}var Mt=j.alternate;if(Mt!==null){var zt=Mt.child;if(zt!==null){Mt.child=null;do{var $r=zt.sibling;zt.sibling=null,zt=$r}while(zt!==null)}}Dt=j}}if(j.subtreeFlags&2064&&Z!==null)Z.return=j,Dt=Z;else e:for(;Dt!==null;){if(j=Dt,j.flags&2048)switch(j.tag){case 0:case 11:case 15:ip(9,j,j.return)}var Fe=j.sibling;if(Fe!==null){Fe.return=j.return,Dt=Fe;break e}Dt=j.return}}var Ce=a.current;for(Dt=Ce;Dt!==null;){Z=Dt;var $e=Z.child;if(Z.subtreeFlags&2064&&$e!==null)$e.return=Z,Dt=$e;else e:for(Z=Ce;Dt!==null;){if(ge=Dt,ge.flags&2048)try{switch(ge.tag){case 0:case 11:case 15:cg(9,ge)}}catch(Vt){Dr(ge,ge.return,Vt)}if(ge===Z){Dt=null;break e}var bt=ge.sibling;if(bt!==null){bt.return=ge.return,Dt=bt;break e}Dt=ge.return}}if(jn=k,nl(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(Ga,a)}catch{}_=!0}return _}finally{Ln=m,Hs.transition=u}}return!1}function GI(a,u,m){u=Mc(m,u),u=pI(a,u,1),a=il(a,u,1),u=ji(),a!==null&&(du(a,1,u),rs(a,u))}function Dr(a,u,m){if(a.tag===3)GI(a,a,m);else for(;u!==null;){if(u.tag===3){GI(u,a,m);break}else if(u.tag===1){var _=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(ol===null||!ol.has(_))){a=Mc(m,a),a=hI(u,a,1),u=il(u,a,1),a=ji(),u!==null&&(du(u,1,a),rs(u,a));break}}u=u.return}}function k$(a,u,m){var _=a.pingCache;_!==null&&_.delete(u),u=ji(),a.pingedLanes|=a.suspendedLanes&m,si===a&&(ui&m)===m&&(ni===4||ni===3&&(ui&0x7c00000)===ui&&500>dr()-w_?wu(a,0):__|=m),rs(a,u)}function ZI(a,u){u===0&&(a.mode&1?(u=Za,Za<<=1,!(Za&0x7c00000)&&(Za=4194304)):u=1);var m=ji();a=va(a,u),a!==null&&(du(a,u,m),rs(a,m))}function I$(a){var u=a.memoizedState,m=0;u!==null&&(m=u.retryLane),ZI(a,m)}function C$(a,u){var m=0;switch(a.tag){case 13:var _=a.stateNode,k=a.memoizedState;k!==null&&(m=k.retryLane);break;case 19:_=a.stateNode;break;default:throw Error(n(314))}_!==null&&_.delete(u),ZI(a,m)}var JI;JI=function(a,u,m){if(a!==null)if(a.memoizedProps!==u.pendingProps||Xi.current)ts=!0;else{if(!(a.lanes&m)&&!(u.flags&128))return ts=!1,m$(a,u,m);ts=!!(a.flags&131072)}else ts=!1,gr&&u.flags&1048576&&Ok(u,Qm,u.index);switch(u.lanes=0,u.tag){case 2:var _=u.type;lg(a,u),a=u.pendingProps;var k=qc(u,gi.current);Dc(u,m),k=Xx(null,u,_,a,k,m);var j=e_();return u.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,es(_)?(j=!0,Um(u)):j=!1,u.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Hx(u),k.updater=og,u.stateNode=k,k._reactInternals=u,o_(u,_,a,m),u=c_(null,u,_,!0,j,m)):(u.tag=0,gr&&j&&Fx(u),Ri(null,u,k,m),u=u.child),u;case 16:_=u.elementType;e:{switch(lg(a,u),a=u.pendingProps,k=_._init,_=k(_._payload),u.type=_,k=u.tag=O$(_),a=fo(_,a),k){case 0:u=u_(null,u,_,a,m);break e;case 1:u=SI(null,u,_,a,m);break e;case 11:u=vI(null,u,_,a,m);break e;case 14:u=bI(null,u,_,fo(_.type,a),m);break e}throw Error(n(306,_,""))}return u;case 0:return _=u.type,k=u.pendingProps,k=u.elementType===_?k:fo(_,k),u_(a,u,_,k,m);case 1:return _=u.type,k=u.pendingProps,k=u.elementType===_?k:fo(_,k),SI(a,u,_,k,m);case 3:e:{if(EI(u),a===null)throw Error(n(387));_=u.pendingProps,j=u.memoizedState,k=j.element,Mk(a,u),Xm(u,_,null,m);var Z=u.memoizedState;if(_=Z.element,j.isDehydrated)if(j={element:_,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},u.updateQueue.baseState=j,u.memoizedState=j,u.flags&256){k=Mc(Error(n(423)),u),u=NI(a,u,_,m,k);break e}else if(_!==k){k=Mc(Error(n(424)),u),u=NI(a,u,_,m,k);break e}else for(bs=Xa(u.stateNode.containerInfo.firstChild),vs=u,gr=!0,co=null,m=Dk(u,null,_,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Ac(),_===k){u=xa(a,u,m);break e}Ri(a,u,_,m)}u=u.child}return u;case 5:return zk(u),a===null&&Mx(u),_=u.type,k=u.pendingProps,j=a!==null?a.memoizedProps:null,Z=k.children,Ox(_,k)?Z=null:j!==null&&Ox(_,j)&&(u.flags|=32),wI(a,u),Ri(a,u,Z,m),u.child;case 6:return a===null&&Mx(u),null;case 13:return kI(a,u,m);case 4:return Qx(u,u.stateNode.containerInfo),_=u.pendingProps,a===null?u.child=Pc(u,null,_,m):Ri(a,u,_,m),u.child;case 11:return _=u.type,k=u.pendingProps,k=u.elementType===_?k:fo(_,k),vI(a,u,_,k,m);case 7:return Ri(a,u,u.pendingProps,m),u.child;case 8:return Ri(a,u,u.pendingProps.children,m),u.child;case 12:return Ri(a,u,u.pendingProps.children,m),u.child;case 10:e:{if(_=u.type._context,k=u.pendingProps,j=u.memoizedProps,Z=k.value,or(Zm,_._currentValue),_._currentValue=Z,j!==null)if(uo(j.value,Z)){if(j.children===k.children&&!Xi.current){u=xa(a,u,m);break e}}else for(j=u.child,j!==null&&(j.return=u);j!==null;){var ge=j.dependencies;if(ge!==null){Z=j.child;for(var Se=ge.firstContext;Se!==null;){if(Se.context===_){if(j.tag===1){Se=ba(-1,m&-m),Se.tag=2;var He=j.updateQueue;if(He!==null){He=He.shared;var ht=He.pending;ht===null?Se.next=Se:(Se.next=ht.next,ht.next=Se),He.pending=Se}}j.lanes|=m,Se=j.alternate,Se!==null&&(Se.lanes|=m),Ux(j.return,m,u),ge.lanes|=m;break}Se=Se.next}}else if(j.tag===10)Z=j.type===u.type?null:j.child;else if(j.tag===18){if(Z=j.return,Z===null)throw Error(n(341));Z.lanes|=m,ge=Z.alternate,ge!==null&&(ge.lanes|=m),Ux(Z,m,u),Z=j.sibling}else Z=j.child;if(Z!==null)Z.return=j;else for(Z=j;Z!==null;){if(Z===u){Z=null;break}if(j=Z.sibling,j!==null){j.return=Z.return,Z=j;break}Z=Z.return}j=Z}Ri(a,u,k.children,m),u=u.child}return u;case 9:return k=u.type,_=u.pendingProps.children,Dc(u,m),k=Us(k),_=_(k),u.flags|=1,Ri(a,u,_,m),u.child;case 14:return _=u.type,k=fo(_,u.pendingProps),k=fo(_.type,k),bI(a,u,_,k,m);case 15:return xI(a,u,u.type,u.pendingProps,m);case 17:return _=u.type,k=u.pendingProps,k=u.elementType===_?k:fo(_,k),lg(a,u),u.tag=1,es(_)?(a=!0,Um(u)):a=!1,Dc(u,m),dI(u,_,k),o_(u,_,k,m),c_(null,u,_,!0,a,m);case 19:return CI(a,u,m);case 22:return _I(a,u,m)}throw Error(n(156,u.tag))};function YI(a,u){return _c(a,u)}function T$(a,u,m,_){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qs(a,u,m,_){return new T$(a,u,m,_)}function O_(a){return a=a.prototype,!(!a||!a.isReactComponent)}function O$(a){if(typeof a=="function")return O_(a)?1:0;if(a!=null){if(a=a.$$typeof,a===W)return 11;if(a===te)return 14}return 2}function cl(a,u){var m=a.alternate;return m===null?(m=Qs(a.tag,u,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=u,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&0xe00000,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,u=a.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function bg(a,u,m,_,k,j){var Z=2;if(_=a,typeof a=="function")O_(a)&&(Z=1);else if(typeof a=="string")Z=5;else e:switch(a){case z:return Eu(m.children,k,j,u);case P:Z=8,k|=8;break;case R:return a=Qs(12,m,u,k|2),a.elementType=R,a.lanes=j,a;case V:return a=Qs(13,m,u,k),a.elementType=V,a.lanes=j,a;case B:return a=Qs(19,m,u,k),a.elementType=B,a.lanes=j,a;case le:return xg(m,k,j,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:Z=10;break e;case F:Z=9;break e;case W:Z=11;break e;case te:Z=14;break e;case J:Z=16,_=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return u=Qs(Z,m,u,k),u.elementType=a,u.type=_,u.lanes=j,u}function Eu(a,u,m,_){return a=Qs(7,a,_,u),a.lanes=m,a}function xg(a,u,m,_){return a=Qs(22,a,_,u),a.elementType=le,a.lanes=m,a.stateNode={isHidden:!1},a}function q_(a,u,m){return a=Qs(6,a,null,u),a.lanes=m,a}function R_(a,u,m){return u=Qs(4,a.children!==null?a.children:[],a.key,u),u.lanes=m,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function q$(a,u,m,_,k){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jf(0),this.expirationTimes=jf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jf(0),this.identifierPrefix=_,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function j_(a,u,m,_,k,j,Z,ge,Se){return a=new q$(a,u,m,ge,Se),u===1?(u=1,j===!0&&(u|=8)):u=0,j=Qs(3,null,null,u),a.current=j,j.stateNode=a,j.memoizedState={element:_,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hx(j),a}function R$(a,u,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:_==null?null:""+_,children:a,containerInfo:u,implementation:m}}function XI(a){if(!a)return tl;a=a._reactInternals;e:{if($s(a)!==a||a.tag!==1)throw Error(n(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(es(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(n(171))}if(a.tag===1){var m=a.type;if(es(m))return Ik(a,m,u)}return u}function eC(a,u,m,_,k,j,Z,ge,Se){return a=j_(m,_,!0,a,k,j,Z,ge,Se),a.context=XI(null),m=a.current,_=ji(),k=ll(m),j=ba(_,k),j.callback=u??null,il(m,j,k),a.current.lanes=k,du(a,k,_),rs(a,_),a}function _g(a,u,m,_){var k=u.current,j=ji(),Z=ll(k);return m=XI(m),u.context===null?u.context=m:u.pendingContext=m,u=ba(j,Z),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=il(k,u,Z),a!==null&&(mo(a,k,Z,j),Ym(a,k,Z)),Z}function wg(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function tC(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<u?m:u}}function A_(a,u){tC(a,u),(a=a.alternate)&&tC(a,u)}var nC=typeof reportError=="function"?reportError:function(a){console.error(a)};function P_(a){this._internalRoot=a}Sg.prototype.render=P_.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(n(409));_g(a,u,null,null)},Sg.prototype.unmount=P_.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;_u(function(){_g(null,a,null,null)}),u[ha]=null}};function Sg(a){this._internalRoot=a}Sg.prototype.unstable_scheduleHydration=function(a){if(a){var u=fu();a={blockedOn:null,target:a,priority:u};for(var m=0;m<me.length&&u!==0&&u<me[m].priority;m++);me.splice(m,0,a),m===0&&Be(a)}};function F_(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Eg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function rC(){}function j$(a,u,m,_,k){if(k){if(typeof _=="function"){var j=_;_=function(){var He=wg(Z);j.call(He)}}var Z=eC(u,_,a,0,null,!1,!1,"",rC);return a._reactRootContainer=Z,a[ha]=Z.current,Vf(a.nodeType===8?a.parentNode:a),_u(),Z}for(;k=a.lastChild;)a.removeChild(k);if(typeof _=="function"){var ge=_;_=function(){var He=wg(Se);ge.call(He)}}var Se=j_(a,0,!1,null,null,!1,!1,"",rC);return a._reactRootContainer=Se,a[ha]=Se.current,Vf(a.nodeType===8?a.parentNode:a),_u(function(){_g(u,Se,m,_)}),Se}function Ng(a,u,m,_,k){var j=m._reactRootContainer;if(j){var Z=j;if(typeof k=="function"){var ge=k;k=function(){var Se=wg(Z);ge.call(Se)}}_g(u,Z,a,k)}else Z=j$(m,u,a,k,_);return wg(Z)}Pf=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var m=qi(u.pendingLanes);m!==0&&(Af(u,m|1),rs(u,dr()),!(jn&6)&&(zc=dr()+500,nl()))}break;case 13:_u(function(){var _=va(a,1);if(_!==null){var k=ji();mo(_,a,1,k)}}),A_(a,1)}},he=function(a){if(a.tag===13){var u=va(a,0x8000000);if(u!==null){var m=ji();mo(u,a,0x8000000,m)}A_(a,0x8000000)}},Ff=function(a){if(a.tag===13){var u=ll(a),m=va(a,u);if(m!==null){var _=ji();mo(m,a,u,_)}A_(a,u)}},fu=function(){return Ln},Df=function(a,u){var m=Ln;try{return Ln=a,u()}finally{Ln=m}},su=function(a,u,m){switch(u){case"input":if(nn(a,m),u=m.name,m.type==="radio"&&u!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<m.length;u++){var _=m[u];if(_!==a&&_.form===a.form){var k=zm(_);if(!k)throw Error(n(90));Ue(_),nn(_,k)}}}break;case"textarea":Me(a,m);break;case"select":u=m.value,u!=null&&Ae(a,!!m.multiple,u,!1)}},hc=I_,mc=_u;var A$={usingClientEntryPoint:!1,Events:[Kf,Tc,zm,cn,pc,I_]},lp={findFiberByHostInstance:pu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P$={bundleType:lp.bundleType,version:lp.version,rendererPackageName:lp.rendererPackageName,rendererConfig:lp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=bc(a),a===null?null:a.stateNode},findFiberByHostInstance:lp.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kg.isDisabled&&kg.supportsFiber)try{Ga=kg.inject(P$),Yi=kg}catch{}}return is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A$,is.createPortal=function(a,u){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!F_(u))throw Error(n(200));return R$(a,u,null,m)},is.createRoot=function(a,u){if(!F_(a))throw Error(n(299));var m=!1,_="",k=nC;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(k=u.onRecoverableError)),u=j_(a,1,!1,null,null,m,!1,_,k),a[ha]=u.current,Vf(a.nodeType===8?a.parentNode:a),new P_(u)},is.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=bc(u),a=a===null?null:a.stateNode,a},is.flushSync=function(a){return _u(a)},is.hydrate=function(a,u,m){if(!Eg(u))throw Error(n(200));return Ng(null,a,u,!0,m)},is.hydrateRoot=function(a,u,m){if(!F_(a))throw Error(n(405));var _=m!=null&&m.hydratedSources||null,k=!1,j="",Z=nC;if(m!=null&&(m.unstable_strictMode===!0&&(k=!0),m.identifierPrefix!==void 0&&(j=m.identifierPrefix),m.onRecoverableError!==void 0&&(Z=m.onRecoverableError)),u=eC(u,null,a,1,m??null,k,!1,j,Z),a[ha]=u.current,Vf(a),_)for(a=0;a<_.length;a++)m=_[a],k=m._getVersion,k=k(m._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[m,k]:u.mutableSourceEagerHydrationData.push(m,k);return new Sg(u)},is.render=function(a,u,m){if(!Eg(u))throw Error(n(200));return Ng(null,a,u,!1,m)},is.unmountComponentAtNode=function(a){if(!Eg(a))throw Error(n(40));return a._reactRootContainer?(_u(function(){Ng(null,null,a,!1,function(){a._reactRootContainer=null,a[ha]=null})}),!0):!1},is.unstable_batchedUpdates=I_,is.unstable_renderSubtreeIntoContainer=function(a,u,m,_){if(!Eg(m))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Ng(a,u,m,!1,_)},is.version="18.3.1-next-f1338f8080-20240426",is}var AC;function U3(){if(AC)return J_.exports;AC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),J_.exports=g4(),J_.exports}var fb=U3();const y4="Error preloading route! ";function v4(t,e){const n=Po(),[r,i]=K.useState(!1),s=K.useRef(!1),o=UB(e),{activeProps:l=()=>({className:"active"}),inactiveProps:c=()=>({}),activeOptions:d,to:p,preload:h,preloadDelay:b,hashScrollIntoView:x,replace:w,startTransition:E,resetScroll:I,viewTransition:T,children:O,target:q,disabled:A,style:D,className:L,onClick:z,onFocus:P,onMouseEnter:R,onMouseLeave:M,onTouchStart:F,ignoreBlocker:W,...V}=t,{params:B,search:te,hash:J,state:le,mask:se,reloadDocument:ne,...oe}=V,X=K.useMemo(()=>{try{return new URL(`${p}`),"external"}catch{}return"internal"},[p]),ce=$i({select:ke=>ke.location.search,structuralSharing:!0});t={from:$l({strict:!1,select:ke=>ke.pathname}),...t};const ye=K.useMemo(()=>n.buildLocation(t),[n,t,ce]),_e=K.useMemo(()=>t.reloadDocument?!1:h??n.options.defaultPreload,[n.options.defaultPreload,h,t.reloadDocument]),Ne=b??n.options.defaultPreloadDelay??0,ze=$i({select:ke=>{if(d?.exact){if(!HB(ke.location.pathname,ye.pathname,n.basepath))return!1}else{const Ae=iv(ke.location.pathname,n.basepath).split("/");if(!iv(ye.pathname,n.basepath).split("/").every((Me,ct)=>Me===Ae[ct]))return!1}return(d?.includeSearch??!0)&&!gd(ke.location.search,ye.search,{partial:!d?.exact,ignoreUndefined:!d?.explicitUndefined})?!1:d?.includeHash?ke.location.hash===ye.hash:!0}}),qe=K.useCallback(()=>{n.preloadRoute(t).catch(ke=>{console.warn(ke),console.warn(y4)})},[t,n]),De=K.useCallback(ke=>{ke?.isIntersecting&&qe()},[qe]);if(WB(o,De,{rootMargin:"100px"},{disabled:!!A||_e!=="viewport"}),Sp(()=>{s.current||!A&&_e==="render"&&(qe(),s.current=!0)},[A,qe,_e]),X==="external")return{...oe,ref:o,type:X,href:p,...O&&{children:O},...q&&{target:q},...A&&{disabled:A},...D&&{style:D},...L&&{className:L},...z&&{onClick:z},...P&&{onFocus:P},...R&&{onMouseEnter:R},...M&&{onMouseLeave:M},...F&&{onTouchStart:F}};const Ze=ke=>{if(!A&&!x4(ke)&&!ke.defaultPrevented&&(!q||q==="_self")&&ke.button===0){ke.preventDefault(),fb.flushSync(()=>{i(!0)});const Ae=n.subscribe("onResolved",()=>{Ae(),i(!1)});return n.navigate({...t,replace:w,resetScroll:I,hashScrollIntoView:x,startTransition:E,viewTransition:T,ignoreBlocker:W})}},Xe=ke=>{A||_e&&qe()},Ue=Xe,ut=ke=>{if(A)return;const Ae=ke.target||{};if(_e){if(Ae.preloadTimeout)return;Ae.preloadTimeout=setTimeout(()=>{Ae.preloadTimeout=null,qe()},Ne)}},wt=ke=>{if(A)return;const Ae=ke.target||{};Ae.preloadTimeout&&(clearTimeout(Ae.preloadTimeout),Ae.preloadTimeout=null)},Tt=ke=>Ae=>{var Ve;(Ve=Ae.persist)==null||Ve.call(Ae),ke.filter(Boolean).forEach(rt=>{Ae.defaultPrevented||rt(Ae)})},Ut=ze?Fu(l,{})??{}:{},nn=ze?{}:Fu(c,{}),xe=[L,Ut.className,nn.className].filter(Boolean).join(" "),ve={...D,...Ut.style,...nn.style};return{...oe,...Ut,...nn,href:A?void 0:ye.maskedLocation?n.history.createHref(ye.maskedLocation.href):n.history.createHref(ye.href),ref:o,onClick:Tt([z,Ze]),onFocus:Tt([P,Xe]),onMouseEnter:Tt([R,ut]),onMouseLeave:Tt([M,wt]),onTouchStart:Tt([F,Ue]),disabled:!!A,target:q,...Object.keys(ve).length&&{style:ve},...xe&&{className:xe},...A&&{role:"link","aria-disabled":!0},...ze&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}function V3(t){return K.forwardRef(function(n,r){return f.jsx(b4,{...n,_asChild:t,ref:r})})}const b4=K.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:i,ref:s,...o}=v4(r,e),l=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof n>"u"&&delete o.disabled,K.createElement(n||"a",{...o,ref:s},l)});function x4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _4(){const t=Po(),e=K.useRef({router:t,mounted:!1}),n=$i({select:({isLoading:h})=>h}),[r,i]=K.useState(!1),s=$i({select:h=>h.matches.some(b=>b.status==="pending"),structuralSharing:!0}),o=K_(n),l=n||r||s,c=K_(l),d=n||s,p=K_(d);return t.isServer||(t.startReactTransition=h=>{i(!0),K.startTransition(()=>{h(),i(!1)})}),K.useEffect(()=>{const h=t.history.subscribe(t.load),b=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Du(t.latestLocation.href)!==Du(b.href)&&t.commitLocation({...b,replace:!0}),()=>{h()}},[t,t.history]),Sp(()=>{var h;if(typeof window<"u"&&((h=window.__TSR__)!=null&&h.dehydrated)||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(x){console.error(x)}})()},[t]),Sp(()=>{if(o&&!n){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,w=b.href!==h.href;t.emit({type:"onLoad",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:w})}},[o,t,n]),Sp(()=>{if(p&&!d){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,w=b.href!==h.href;t.emit({type:"onBeforeRouteMount",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:w})}},[d,p,t]),Sp(()=>{if(c&&!l){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,w=b.href!==h.href;if(t.emit({type:"onResolved",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:w}),t.__store.setState(E=>({...E,status:"idle",resolvedLocation:E.location})),typeof document<"u"&&document.querySelector){const E=t.state.location.state.__hashScrollIntoViewOptions??!0;if(E&&t.state.location.hash!==""){const I=document.getElementById(t.state.location.hash);I&&I.scrollIntoView(E)}}}},[l,c,t]),null}function w4(){const t=Po(),e=t.options.defaultPendingComponent?f.jsx(t.options.defaultPendingComponent,{}):null,n=t.isServer||typeof document<"u"&&window.__TSR__?dy:K.Suspense,r=f.jsxs(n,{fallback:e,children:[f.jsx(_4,{}),f.jsx(S4,{})]});return t.options.InnerWrap?f.jsx(t.options.InnerWrap,{children:r}):r}function S4(){const t=$i({select:n=>{var r;return(r=n.matches[0])==null?void 0:r.id}}),e=$i({select:n=>n.loadedAt});return f.jsx(db.Provider,{value:t,children:f.jsx(y1,{getResetKey:()=>e,errorComponent:cb,onCatch:n=>{n.message||n.toString()},children:t?f.jsx(W3,{matchId:t}):null})})}function E4(){const t=Po();return $i({select:e=>[e.location.href,e.resolvedLocation.href,e.status],structuralSharing:!0}),K.useCallback(e=>{const{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s,...o}=e;return t.matchRoute(o,{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s})},[t])}function N4({router:t,children:e,...n}){t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=F3(),i=f.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?f.jsx(t.options.Wrap,{children:i}):i}function k4({router:t,...e}){return f.jsx(N4,{router:t,...e,children:f.jsx(w4,{})})}const I4=typeof window<"u"?K.useLayoutEffect:K.useEffect,ew="window",PC="___";let tw=new WeakSet;const C4=typeof window<"u"&&window.sessionStorage,vo=C4?(()=>{const t="tsr-scroll-restoration-v2";return{state:JSON.parse(window.sessionStorage.getItem(t)||"null")||{cached:{},next:{}},set:n=>{vo.state=Fu(n,vo.state),window.sessionStorage.setItem(t,JSON.stringify(vo.state))}}})():void 0,T4=t=>t.state.key||t.href;function O4(t){const e=Po();I4(()=>{const n=t?.getKey||T4,{history:r}=window;r.scrollRestoration="manual";const i=l=>{if(tw.has(l.target))return;tw.add(l.target);let c="";if(l.target===document||l.target===window)c=ew;else{const d=l.target.getAttribute("data-scroll-restoration-id");d?c=`[data-scroll-restoration-id="${d}"]`:c=R4(l.target)}vo.state.next[c]||vo.set(d=>({...d,next:{...d.next,[c]:{scrollX:NaN,scrollY:NaN}}}))};typeof document<"u"&&document.addEventListener("scroll",i,!0);const s=e.subscribe("onBeforeLoad",l=>{if(l.hrefChanged){const c=n(l.fromLocation);for(const d in vo.state.next){const p=vo.state.next[d];if(d===ew)p.scrollX=window.scrollX||0,p.scrollY=window.scrollY||0;else if(d){const h=document.querySelector(d);p.scrollX=h?.scrollLeft||0,p.scrollY=h?.scrollTop||0}vo.set(h=>{const b={...h.next};return delete b[d],{...h,next:b,cached:{...h.cached,[[c,d].join(PC)]:p}}})}}}),o=e.subscribe("onBeforeRouteMount",l=>{if(l.hrefChanged){if(!e.resetNextScroll)return;e.resetNextScroll=!0;const c=n(l.toLocation);let d=!1;for(const p in vo.state.cached){const h=vo.state.cached[p],[b,x]=p.split(PC);if(b===c){if(x===ew)d=!0,window.scrollTo({top:h.scrollY,left:h.scrollX,behavior:t?.scrollBehavior});else if(x){const w=document.querySelector(x);w&&(w.scrollLeft=h.scrollX,w.scrollTop=h.scrollY)}}}d||window.scrollTo(0,0),vo.set(p=>({...p,next:{}})),tw=new WeakSet}});return()=>{document.removeEventListener("scroll",i),s(),o()}},[t?.getKey,e])}function q4(t){return O4(t),null}function R4(t){const e=[];let n;for(;n=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(n.children,t)+1})`),t=n;return`${e.join(" > ")}`.toLowerCase()}function ir(t){return $l({...t,select:e=>t.select?t.select(e.context):e.context})}let j4={data:""},A4=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||j4,P4=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,F4=/\/\*[^]*?\*\/|  +/g,FC=/\n+/g,El=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?El(o,s):s+"{"+El(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=El(o,e?e.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=El.p?El.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},wa={},H3=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+H3(t[n]);return e}return t},D4=(t,e,n,r,i)=>{let s=H3(t),o=wa[s]||(wa[s]=(c=>{let d=0,p=11;for(;d<c.length;)p=101*p+c.charCodeAt(d++)>>>0;return"go"+p})(s));if(!wa[o]){let c=s!==t?t:(d=>{let p,h,b=[{}];for(;p=P4.exec(d.replace(F4,""));)p[4]?b.shift():p[3]?(h=p[3].replace(FC," ").trim(),b.unshift(b[0][h]=b[0][h]||{})):b[0][p[1]]=p[2].replace(FC," ").trim();return b[0]})(t);wa[o]=El(i?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&wa.g?wa.g:null;return n&&(wa.g=wa[o]),((c,d,p,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=p?c+d.data:d.data+c)})(wa[o],e,r,l),o},L4=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":El(l,""):l===!1?"":l}return r+i+(o??"")},"");function pb(t){let e=this||{},n=t.call?t(e.p):t;return D4(n.unshift?n.raw?L4(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,A4(e.target),e.g,e.o,e.k)}let Q3,JS,YS;pb.bind({g:1});let Da=pb.bind({k:1});function M4(t,e,n,r){El.p=e,Q3=t,JS=n,YS=r}function Jl(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let l=Object.assign({},s),c=l.className||i.className;n.p=Object.assign({theme:JS&&JS()},l),n.o=/ *go\d+/.test(c),l.className=pb.apply(n,r)+(c?" "+c:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),YS&&d[0]&&YS(l),Q3(d,l)}return i}}var $4=t=>typeof t=="function",ov=(t,e)=>$4(t)?t(e):t,B4=(()=>{let t=0;return()=>(++t).toString()})(),K3=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),z4=20,G3=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,z4)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return G3(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},fy=[],py={toasts:[],pausedAt:void 0},oc=t=>{py=G3(py,t),fy.forEach(e=>{e(py)})},W4={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},U4=(t={})=>{let[e,n]=K.useState(py);K.useEffect(()=>(fy.push(n),()=>{let i=fy.indexOf(n);i>-1&&fy.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((s=t[i.type])==null?void 0:s.removeDelay)||t?.removeDelay,duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||t?.duration||W4[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:r}},V4=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||B4()}),Zh=t=>(e,n)=>{let r=V4(e,t,n);return oc({type:2,toast:r}),r.id},Nn=(t,e)=>Zh("blank")(t,e);Nn.error=Zh("error");Nn.success=Zh("success");Nn.loading=Zh("loading");Nn.custom=Zh("custom");Nn.dismiss=t=>{oc({type:3,toastId:t})};Nn.remove=t=>oc({type:4,toastId:t});Nn.promise=(t,e,n)=>{let r=Nn.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?ov(e.success,i):void 0;return s?Nn.success(s,{id:r,...n,...n?.success}):Nn.dismiss(r),i}).catch(i=>{let s=e.error?ov(e.error,i):void 0;s?Nn.error(s,{id:r,...n,...n?.error}):Nn.dismiss(r)}),t};var H4=(t,e)=>{oc({type:1,toast:{id:t,height:e}})},Q4=()=>{oc({type:5,time:Date.now()})},Vp=new Map,K4=1e3,G4=(t,e=K4)=>{if(Vp.has(t))return;let n=setTimeout(()=>{Vp.delete(t),oc({type:4,toastId:t})},e);Vp.set(t,n)},Z4=t=>{let{toasts:e,pausedAt:n}=U4(t);K.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(c<0){l.visible&&Nn.dismiss(l.id);return}return setTimeout(()=>Nn.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=K.useCallback(()=>{n&&oc({type:6,time:Date.now()})},[n]),i=K.useCallback((s,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:d}=o||{},p=e.filter(x=>(x.position||d)===(s.position||d)&&x.height),h=p.findIndex(x=>x.id===s.id),b=p.filter((x,w)=>w<h&&x.visible).length;return p.filter(x=>x.visible).slice(...l?[b+1]:[0,b]).reduce((x,w)=>x+(w.height||0)+c,0)},[e]);return K.useEffect(()=>{e.forEach(s=>{if(s.dismissed)G4(s.id,s.removeDelay);else{let o=Vp.get(s.id);o&&(clearTimeout(o),Vp.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:H4,startPause:Q4,endPause:r,calculateOffset:i}}},J4=Da`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Y4=Da`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,X4=Da`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ez=Jl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${J4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Y4} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${X4} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,tz=Da`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,nz=Jl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${tz} 1s linear infinite;
`,rz=Da`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,iz=Da`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,sz=Jl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${rz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${iz} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,oz=Jl("div")`
  position: absolute;
`,az=Jl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,lz=Da`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,uz=Jl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${lz} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,cz=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?K.createElement(uz,null,e):e:n==="blank"?null:K.createElement(az,null,K.createElement(nz,{...r}),n!=="loading"&&K.createElement(oz,null,n==="error"?K.createElement(ez,{...r}):K.createElement(sz,{...r})))},dz=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,fz=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,pz="0%{opacity:0;} 100%{opacity:1;}",hz="0%{opacity:1;} 100%{opacity:0;}",mz=Jl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,gz=Jl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,yz=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=K3()?[pz,hz]:[dz(n),fz(n)];return{animation:e?`${Da(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Da(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},vz=K.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?yz(t.position||e||"top-center",t.visible):{opacity:0},s=K.createElement(cz,{toast:t}),o=K.createElement(gz,{...t.ariaProps},ov(t.message,t));return K.createElement(mz,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):K.createElement(K.Fragment,null,s,o))});M4(K.createElement);var bz=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=K.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;r(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return K.createElement("div",{ref:s,className:e,style:n},i)},xz=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:K3()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},_z=pb`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,jg=16,wz=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:c}=Z4(n);return K.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:jg,left:jg,right:jg,bottom:jg,pointerEvents:"none",...s},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let p=d.position||e,h=c.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),b=xz(p,h);return K.createElement(bz,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?_z:"",style:b},d.type==="custom"?ov(d.message,d):i?i(d):K.createElement(vz,{toast:d,position:p}))}))},Sz=Nn;class ac extends Error{}class Ez extends ac{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Nz extends ac{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class kz extends ac{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class sd extends ac{}class Z3 extends ac{constructor(e){super(`Invalid unit ${e}`)}}class _i extends ac{}class fl extends ac{constructor(){super("Zone is an abstract class")}}const Ct="numeric",To="short",Os="long",av={year:Ct,month:Ct,day:Ct},J3={year:Ct,month:To,day:Ct},Iz={year:Ct,month:To,day:Ct,weekday:To},Y3={year:Ct,month:Os,day:Ct},X3={year:Ct,month:Os,day:Ct,weekday:Os},eA={hour:Ct,minute:Ct},tA={hour:Ct,minute:Ct,second:Ct},nA={hour:Ct,minute:Ct,second:Ct,timeZoneName:To},rA={hour:Ct,minute:Ct,second:Ct,timeZoneName:Os},iA={hour:Ct,minute:Ct,hourCycle:"h23"},sA={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23"},oA={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23",timeZoneName:To},aA={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23",timeZoneName:Os},lA={year:Ct,month:Ct,day:Ct,hour:Ct,minute:Ct},uA={year:Ct,month:Ct,day:Ct,hour:Ct,minute:Ct,second:Ct},cA={year:Ct,month:To,day:Ct,hour:Ct,minute:Ct},dA={year:Ct,month:To,day:Ct,hour:Ct,minute:Ct,second:Ct},Cz={year:Ct,month:To,day:Ct,weekday:To,hour:Ct,minute:Ct},fA={year:Ct,month:Os,day:Ct,hour:Ct,minute:Ct,timeZoneName:To},pA={year:Ct,month:Os,day:Ct,hour:Ct,minute:Ct,second:Ct,timeZoneName:To},hA={year:Ct,month:Os,day:Ct,weekday:Os,hour:Ct,minute:Ct,timeZoneName:Os},mA={year:Ct,month:Os,day:Ct,weekday:Os,hour:Ct,minute:Ct,second:Ct,timeZoneName:Os};class Jh{get type(){throw new fl}get name(){throw new fl}get ianaName(){return this.name}get isUniversal(){throw new fl}offsetName(e,n){throw new fl}formatOffset(e,n){throw new fl}offset(e){throw new fl}equals(e){throw new fl}get isValid(){throw new fl}}let nw=null;class hb extends Jh{static get instance(){return nw===null&&(nw=new hb),nw}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return EA(e,n,r)}formatOffset(e,n){return Hp(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let hy={};function Tz(t){return hy[t]||(hy[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),hy[t]}const Oz={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function qz(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,l,c,d,p]=r;return[o,i,s,l,c,d,p]}function Rz(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],l=Oz[s];s==="era"?r[l]=o:fn(l)||(r[l]=parseInt(o,10))}return r}let Ag={};class La extends Jh{static create(e){return Ag[e]||(Ag[e]=new La(e)),Ag[e]}static resetCache(){Ag={},hy={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=La.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return EA(e,n,r,this.name)}formatOffset(e,n){return Hp(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const r=Tz(this.name);let[i,s,o,l,c,d,p]=r.formatToParts?Rz(r,n):qz(r,n);l==="BC"&&(i=-Math.abs(i)+1);const b=gb({year:i,month:s,day:o,hour:c===24?0:c,minute:d,second:p,millisecond:0});let x=+n;const w=x%1e3;return x-=w>=0?w:1e3+w,(b-x)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let DC={};function jz(t,e={}){const n=JSON.stringify([t,e]);let r=DC[n];return r||(r=new Intl.ListFormat(t,e),DC[n]=r),r}let XS={};function eE(t,e={}){const n=JSON.stringify([t,e]);let r=XS[n];return r||(r=new Intl.DateTimeFormat(t,e),XS[n]=r),r}let tE={};function Az(t,e={}){const n=JSON.stringify([t,e]);let r=tE[n];return r||(r=new Intl.NumberFormat(t,e),tE[n]=r),r}let nE={};function Pz(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=nE[i];return s||(s=new Intl.RelativeTimeFormat(t,e),nE[i]=s),s}let Np=null;function Fz(){return Np||(Np=new Intl.DateTimeFormat().resolvedOptions().locale,Np)}let LC={};function Dz(t){let e=LC[t];if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,LC[t]=e}return e}function Lz(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=eE(t).resolvedOptions(),i=t}catch{const c=t.substring(0,n);r=eE(c).resolvedOptions(),i=c}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function Mz(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function $z(t){const e=[];for(let n=1;n<=12;n++){const r=dn.utc(2009,n,1);e.push(t(r))}return e}function Bz(t){const e=[];for(let n=1;n<=7;n++){const r=dn.utc(2016,11,13+n);e.push(t(r))}return e}function Pg(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function zz(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class Wz{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const l={useGrouping:!1,...r};r.padTo>0&&(l.minimumIntegerDigits=r.padTo),this.inf=Az(e,l)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):w1(e,3);return Kr(n,this.padTo)}}}class Uz{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&La.create(l).valid?(i=l,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=eE(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Vz{constructor(e,n,r){this.opts={style:"long",...r},!n&&wA()&&(this.rtf=Pz(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):hW(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const Hz={firstDay:1,minimalDays:4,weekend:[6,7]};class Wn{static fromOpts(e){return Wn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){const o=e||Mr.defaultLocale,l=o||(s?"en-US":Fz()),c=n||Mr.defaultNumberingSystem,d=r||Mr.defaultOutputCalendar,p=rE(i)||Mr.defaultWeekSettings;return new Wn(l,c,d,p,o)}static resetCache(){Np=null,XS={},tE={},nE={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Wn.create(e,n,r,i)}constructor(e,n,r,i,s){const[o,l,c]=Lz(e);this.locale=o,this.numberingSystem=n||l||null,this.outputCalendar=r||c||null,this.weekSettings=i,this.intl=Mz(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=zz(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Wn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,rE(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return Pg(this,e,IA,()=>{const r=n?{month:e,day:"numeric"}:{month:e},i=n?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=$z(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,n=!1){return Pg(this,e,OA,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=Bz(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Pg(this,void 0,()=>qA,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[dn.utc(2016,11,13,9),dn.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Pg(this,e,RA,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[dn.utc(-40,1,1),dn.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),s=i.formatToParts(),o=s.find(l=>l.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new Wz(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new Uz(e,this.intl,n)}relFormatter(e={}){return new Vz(this.intl,this.isEnglish(),e)}listFormatter(e={}){return jz(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:SA()?Dz(this.locale):Hz}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let rw=null;class Mi extends Jh{static get utcInstance(){return rw===null&&(rw=new Mi(0)),rw}static instance(e){return e===0?Mi.utcInstance:new Mi(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Mi(yb(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Hp(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Hp(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return Hp(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Qz extends Jh{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Nl(t,e){if(fn(t)||t===null)return e;if(t instanceof Jh)return t;if(Xz(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?hb.instance:n==="utc"||n==="gmt"?Mi.utcInstance:Mi.parseSpecifier(n)||La.create(t)}else return jl(t)?Mi.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Qz(t)}const v1={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},MC={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Kz=v1.hanidec.replace(/[\[|\]]/g,"").split("");function Gz(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(v1.hanidec)!==-1)e+=Kz.indexOf(t[n]);else for(const i in MC){const[s,o]=MC[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}let td={};function Zz(){td={}}function go({numberingSystem:t},e=""){const n=t||"latn";return td[n]||(td[n]={}),td[n][e]||(td[n][e]=new RegExp(`${v1[n]}${e}`)),td[n][e]}let $C=()=>Date.now(),BC="system",zC=null,WC=null,UC=null,VC=60,HC,QC=null;class Mr{static get now(){return $C}static set now(e){$C=e}static set defaultZone(e){BC=e}static get defaultZone(){return Nl(BC,hb.instance)}static get defaultLocale(){return zC}static set defaultLocale(e){zC=e}static get defaultNumberingSystem(){return WC}static set defaultNumberingSystem(e){WC=e}static get defaultOutputCalendar(){return UC}static set defaultOutputCalendar(e){UC=e}static get defaultWeekSettings(){return QC}static set defaultWeekSettings(e){QC=rE(e)}static get twoDigitCutoffYear(){return VC}static set twoDigitCutoffYear(e){VC=e%100}static get throwOnInvalid(){return HC}static set throwOnInvalid(e){HC=e}static resetCaches(){Wn.resetCache(),La.resetCache(),dn.resetCache(),Zz()}}class No{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const gA=[0,31,59,90,120,151,181,212,243,273,304,334],yA=[0,31,60,91,121,152,182,213,244,274,305,335];function to(t,e){return new No("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function b1(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function vA(t,e,n){return n+(Yh(t)?yA:gA)[e-1]}function bA(t,e){const n=Yh(t)?yA:gA,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function x1(t,e){return(t-e+7)%7+1}function lv(t,e=4,n=1){const{year:r,month:i,day:s}=t,o=vA(r,i,s),l=x1(b1(r,i,s),n);let c=Math.floor((o-l+14-e)/7),d;return c<1?(d=r-1,c=lh(d,e,n)):c>lh(r,e,n)?(d=r+1,c=1):d=r,{weekYear:d,weekNumber:c,weekday:l,...vb(t)}}function KC(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=t,o=x1(b1(r,1,e),n),l=yd(r);let c=i*7+s-o-7+e,d;c<1?(d=r-1,c+=yd(d)):c>l?(d=r+1,c-=yd(r)):d=r;const{month:p,day:h}=bA(d,c);return{year:d,month:p,day:h,...vb(t)}}function iw(t){const{year:e,month:n,day:r}=t,i=vA(e,n,r);return{year:e,ordinal:i,...vb(t)}}function GC(t){const{year:e,ordinal:n}=t,{month:r,day:i}=bA(e,n);return{year:e,month:r,day:i,...vb(t)}}function ZC(t,e){if(!fn(t.localWeekday)||!fn(t.localWeekNumber)||!fn(t.localWeekYear)){if(!fn(t.weekday)||!fn(t.weekNumber)||!fn(t.weekYear))throw new sd("Cannot mix locale-based week fields with ISO-based week fields");return fn(t.localWeekday)||(t.weekday=t.localWeekday),fn(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),fn(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Jz(t,e=4,n=1){const r=mb(t.weekYear),i=no(t.weekNumber,1,lh(t.weekYear,e,n)),s=no(t.weekday,1,7);return r?i?s?!1:to("weekday",t.weekday):to("week",t.weekNumber):to("weekYear",t.weekYear)}function Yz(t){const e=mb(t.year),n=no(t.ordinal,1,yd(t.year));return e?n?!1:to("ordinal",t.ordinal):to("year",t.year)}function xA(t){const e=mb(t.year),n=no(t.month,1,12),r=no(t.day,1,uv(t.year,t.month));return e?n?r?!1:to("day",t.day):to("month",t.month):to("year",t.year)}function _A(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=no(e,0,23)||e===24&&n===0&&r===0&&i===0,o=no(n,0,59),l=no(r,0,59),c=no(i,0,999);return s?o?l?c?!1:to("millisecond",i):to("second",r):to("minute",n):to("hour",e)}function fn(t){return typeof t>"u"}function jl(t){return typeof t=="number"}function mb(t){return typeof t=="number"&&t%1===0}function Xz(t){return typeof t=="string"}function eW(t){return Object.prototype.toString.call(t)==="[object Date]"}function wA(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function SA(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function tW(t){return Array.isArray(t)?t:[t]}function JC(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function nW(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function jd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function rE(t){if(t==null)return null;if(typeof t!="object")throw new _i("Week settings must be an object");if(!no(t.firstDay,1,7)||!no(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!no(e,1,7)))throw new _i("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function no(t,e,n){return mb(t)&&t>=e&&t<=n}function rW(t,e){return t-e*Math.floor(t/e)}function Kr(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function _l(t){if(!(fn(t)||t===null||t===""))return parseInt(t,10)}function Nu(t){if(!(fn(t)||t===null||t===""))return parseFloat(t)}function _1(t){if(!(fn(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function w1(t,e,n=!1){const r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function Yh(t){return t%4===0&&(t%100!==0||t%400===0)}function yd(t){return Yh(t)?366:365}function uv(t,e){const n=rW(e-1,12)+1,r=t+(e-n)/12;return n===2?Yh(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function gb(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function YC(t,e,n){return-x1(b1(t,1,e),n)+e-1}function lh(t,e=4,n=1){const r=YC(t,e,n),i=YC(t+1,e,n);return(yd(t)-r+i)/7}function iE(t){return t>99?t:t>Mr.twoDigitCutoffYear?1900+t:2e3+t}function EA(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},l=new Intl.DateTimeFormat(n,o).formatToParts(i).find(c=>c.type.toLowerCase()==="timezonename");return l?l.value:null}function yb(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function NA(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new _i(`Invalid unit value ${t}`);return e}function cv(t,e){const n={};for(const r in t)if(jd(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=NA(i)}return n}function Hp(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Kr(n,2)}:${Kr(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Kr(n,2)}${Kr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function vb(t){return nW(t,["hour","minute","second","millisecond"])}const iW=["January","February","March","April","May","June","July","August","September","October","November","December"],kA=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],sW=["J","F","M","A","M","J","J","A","S","O","N","D"];function IA(t){switch(t){case"narrow":return[...sW];case"short":return[...kA];case"long":return[...iW];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const CA=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],TA=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],oW=["M","T","W","T","F","S","S"];function OA(t){switch(t){case"narrow":return[...oW];case"short":return[...TA];case"long":return[...CA];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const qA=["AM","PM"],aW=["Before Christ","Anno Domini"],lW=["BC","AD"],uW=["B","A"];function RA(t){switch(t){case"narrow":return[...uW];case"short":return[...lW];case"long":return[...aW];default:return null}}function cW(t){return qA[t.hour<12?0:1]}function dW(t,e){return OA(e)[t.weekday-1]}function fW(t,e){return IA(e)[t.month-1]}function pW(t,e){return RA(e)[t.year<0?0:1]}function hW(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),c=l===1,d=i[t],p=r?c?d[1]:d[2]||d[1]:c?i[t][0]:t;return o?`${l} ${p} ago`:`in ${l} ${p}`}function XC(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const mW={D:av,DD:J3,DDD:Y3,DDDD:X3,t:eA,tt:tA,ttt:nA,tttt:rA,T:iA,TT:sA,TTT:oA,TTTT:aA,f:lA,ff:cA,fff:fA,ffff:hA,F:uA,FF:dA,FFF:pA,FFFF:mA};class Si{static create(e,n={}){return new Si(e,n)}static parseFormat(e){let n=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||l===n?r+=l:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=l,n=l)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return mW[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Kr(e,n);const r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(x,w)=>this.loc.extract(e,x,w),o=x=>e.isOffsetFixed&&e.offset===0&&x.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,x.format):"",l=()=>r?cW(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(x,w)=>r?fW(e,x):s(w?{month:x}:{month:x,day:"numeric"},"month"),d=(x,w)=>r?dW(e,x):s(w?{weekday:x}:{weekday:x,month:"long",day:"numeric"},"weekday"),p=x=>{const w=Si.macroTokenToFormatOpts(x);return w?this.formatWithSystemDefault(e,w):x},h=x=>r?pW(e,x):s({era:x},"era"),b=x=>{switch(x){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(x)}};return XC(Si.parseFormat(n),b)}formatDurationFromString(e,n){const r=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=c=>d=>{const p=r(d);return p?this.num(c.get(p),d.length):d},s=Si.parseFormat(n),o=s.reduce((c,{literal:d,val:p})=>d?c:c.concat(p),[]),l=e.shiftTo(...o.map(r).filter(c=>c));return XC(s,i(l))}}const jA=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Yd(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function Xd(...t){return e=>t.reduce(([n,r,i],s)=>{const[o,l,c]=s(e,i);return[{...n,...o},l||r,c]},[{},null,1]).slice(0,2)}function ef(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function AA(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=_l(e[n+i]);return[r,null,n+i]}}const PA=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,gW=`(?:${PA.source}?(?:\\[(${jA.source})\\])?)?`,S1=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,FA=RegExp(`${S1.source}${gW}`),E1=RegExp(`(?:T${FA.source})?`),yW=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,vW=/(\d{4})-?W(\d\d)(?:-?(\d))?/,bW=/(\d{4})-?(\d{3})/,xW=AA("weekYear","weekNumber","weekDay"),_W=AA("year","ordinal"),wW=/(\d{4})-(\d\d)-(\d\d)/,DA=RegExp(`${S1.source} ?(?:${PA.source}|(${jA.source}))?`),SW=RegExp(`(?: ${DA.source})?`);function vd(t,e,n){const r=t[e];return fn(r)?n:_l(r)}function EW(t,e){return[{year:vd(t,e),month:vd(t,e+1,1),day:vd(t,e+2,1)},null,e+3]}function tf(t,e){return[{hours:vd(t,e,0),minutes:vd(t,e+1,0),seconds:vd(t,e+2,0),milliseconds:_1(t[e+3])},null,e+4]}function Xh(t,e){const n=!t[e]&&!t[e+1],r=yb(t[e+1],t[e+2]),i=n?null:Mi.instance(r);return[{},i,e+3]}function em(t,e){const n=t[e]?La.create(t[e]):null;return[{},n,e+1]}const NW=RegExp(`^T?${S1.source}$`),kW=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function IW(t){const[e,n,r,i,s,o,l,c,d]=t,p=e[0]==="-",h=c&&c[0]==="-",b=(x,w=!1)=>x!==void 0&&(w||x&&p)?-x:x;return[{years:b(Nu(n)),months:b(Nu(r)),weeks:b(Nu(i)),days:b(Nu(s)),hours:b(Nu(o)),minutes:b(Nu(l)),seconds:b(Nu(c),c==="-0"),milliseconds:b(_1(d),h)}]}const CW={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function N1(t,e,n,r,i,s,o){const l={year:e.length===2?iE(_l(e)):_l(e),month:kA.indexOf(n)+1,day:_l(r),hour:_l(i),minute:_l(s)};return o&&(l.second=_l(o)),t&&(l.weekday=t.length>3?CA.indexOf(t)+1:TA.indexOf(t)+1),l}const TW=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function OW(t){const[,e,n,r,i,s,o,l,c,d,p,h]=t,b=N1(e,i,r,n,s,o,l);let x;return c?x=CW[c]:d?x=0:x=yb(p,h),[b,new Mi(x)]}function qW(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const RW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,jW=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,AW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function eT(t){const[,e,n,r,i,s,o,l]=t;return[N1(e,i,r,n,s,o,l),Mi.utcInstance]}function PW(t){const[,e,n,r,i,s,o,l]=t;return[N1(e,l,n,r,i,s,o),Mi.utcInstance]}const FW=Yd(yW,E1),DW=Yd(vW,E1),LW=Yd(bW,E1),MW=Yd(FA),LA=Xd(EW,tf,Xh,em),$W=Xd(xW,tf,Xh,em),BW=Xd(_W,tf,Xh,em),zW=Xd(tf,Xh,em);function WW(t){return ef(t,[FW,LA],[DW,$W],[LW,BW],[MW,zW])}function UW(t){return ef(qW(t),[TW,OW])}function VW(t){return ef(t,[RW,eT],[jW,eT],[AW,PW])}function HW(t){return ef(t,[kW,IW])}const QW=Xd(tf);function KW(t){return ef(t,[NW,QW])}const GW=Yd(wW,SW),ZW=Yd(DA),JW=Xd(tf,Xh,em);function YW(t){return ef(t,[GW,LA],[ZW,JW])}const tT="Invalid Duration",MA={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},XW={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...MA},Ks=146097/400,Uc=146097/4800,e6={years:{quarters:4,months:12,weeks:Ks/7,days:Ks,hours:Ks*24,minutes:Ks*24*60,seconds:Ks*24*60*60,milliseconds:Ks*24*60*60*1e3},quarters:{months:3,weeks:Ks/28,days:Ks/4,hours:Ks*24/4,minutes:Ks*24*60/4,seconds:Ks*24*60*60/4,milliseconds:Ks*24*60*60*1e3/4},months:{weeks:Uc/7,days:Uc,hours:Uc*24,minutes:Uc*24*60,seconds:Uc*24*60*60,milliseconds:Uc*24*60*60*1e3},...MA},Lu=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],t6=Lu.slice(0).reverse();function pl(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new An(r)}function $A(t,e){let n=e.milliseconds??0;for(const r of t6.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function nT(t,e){const n=$A(t,e)<0?-1:1;Lu.reduceRight((r,i)=>{if(fn(e[i]))return r;if(r){const s=e[r]*n,o=t[i][r],l=Math.floor(s/o);e[i]+=l*n,e[r]-=l*o*n}return i},null),Lu.reduce((r,i)=>{if(fn(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function n6(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class An{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?e6:XW;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Wn.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return An.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new _i(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new An({values:cv(e,An.normalizeUnit),loc:Wn.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(jl(e))return An.fromMillis(e);if(An.isDuration(e))return e;if(typeof e=="object")return An.fromObject(e);throw new _i(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=HW(e);return r?An.fromObject(r,n):An.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=KW(e);return r?An.fromObject(r,n):An.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new _i("need to specify a reason the Duration is invalid");const r=e instanceof No?e:new No(e,n);if(Mr.throwOnInvalid)throw new kz(r);return new An({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new Z3(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Si.create(this.loc,r).formatDurationFromString(this,e):tT}toHuman(e={}){if(!this.isValid)return tT;const n=Lu.map(r=>{const i=this.values[r];return fn(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=w1(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},dn.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?$A(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e),r={};for(const i of Lu)(jd(n.values,i)||jd(this.values,i))&&(r[i]=n.get(i)+this.get(i));return pl(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=NA(e(this.values[r],r));return pl(this,{values:n},!0)}get(e){return this[An.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...cv(e,An.normalizeUnit)};return pl(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return pl(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return nT(this.matrix,e),pl(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=n6(this.normalize().shiftToAll().toObject());return pl(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>An.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of Lu)if(e.indexOf(o)>=0){s=o;let l=0;for(const d in r)l+=this.matrix[d][o]*r[d],r[d]=0;jl(i[o])&&(l+=i[o]);const c=Math.trunc(l);n[o]=c,r[o]=(l*1e3-c*1e3)/1e3}else jl(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return nT(this.matrix,n),pl(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return pl(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of Lu)if(!n(this.values[r],e.values[r]))return!1;return!0}}const Vc="Invalid Interval";function r6(t,e){return!t||!t.isValid?Lr.invalid("missing or invalid start"):!e||!e.isValid?Lr.invalid("missing or invalid end"):e<t?Lr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Lr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new _i("need to specify a reason the Interval is invalid");const r=e instanceof No?e:new No(e,n);if(Mr.throwOnInvalid)throw new Nz(r);return new Lr({invalid:r})}static fromDateTimes(e,n){const r=cp(e),i=cp(n),s=r6(r,i);return s??new Lr({start:r,end:i})}static after(e,n){const r=An.fromDurationLike(n),i=cp(e);return Lr.fromDateTimes(i,i.plus(r))}static before(e,n){const r=An.fromDurationLike(n),i=cp(e);return Lr.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=dn.fromISO(r,n),o=s.isValid}catch{o=!1}let l,c;try{l=dn.fromISO(i,n),c=l.isValid}catch{c=!1}if(o&&c)return Lr.fromDateTimes(s,l);if(o){const d=An.fromISO(i,n);if(d.isValid)return Lr.after(s,d)}else if(c){const d=An.fromISO(r,n);if(d.isValid)return Lr.before(l,d)}}return Lr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Lr.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(cp).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,l=+o>+this.e?this.e:o;r.push(Lr.fromDateTimes(i,l)),i=l,s+=1}return r}splitBy(e){const n=An.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const l=this.start.plus(n.mapUnits(c=>c*i));s=+l>+this.e?this.e:l,o.push(Lr.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:Lr.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Lr.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],s=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),o=Array.prototype.concat(...s),l=o.sort((c,d)=>c.time-d.time);for(const c of l)r+=c.type==="s"?1:-1,r===1?n=c.time:(n&&+n!=+c.time&&i.push(Lr.fromDateTimes(n,c.time)),n=null);return Lr.merge(i)}difference(...e){return Lr.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Vc}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=av,n={}){return this.isValid?Si.create(this.s.loc.clone(n),e).formatInterval(this):Vc}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Vc}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Vc}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Vc}toFormat(e,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:Vc}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):An.invalid(this.invalidReason)}mapEndpoints(e){return Lr.fromDateTimes(e(this.s),e(this.e))}}class Fg{static hasDST(e=Mr.defaultZone){const n=dn.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return La.isValidZone(e)}static normalizeZone(e){return Nl(e,Mr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Wn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Wn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Wn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Wn.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Wn.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Wn.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Wn.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Wn.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Wn.create(n,null,"gregory").eras(e)}static features(){return{relative:wA(),localeWeek:SA()}}}function rT(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(An.fromMillis(r).as("days"))}function i6(t,e,n){const r=[["years",(c,d)=>d.year-c.year],["quarters",(c,d)=>d.quarter-c.quarter+(d.year-c.year)*4],["months",(c,d)=>d.month-c.month+(d.year-c.year)*12],["weeks",(c,d)=>{const p=rT(c,d);return(p-p%7)/7}],["days",rT]],i={},s=t;let o,l;for(const[c,d]of r)n.indexOf(c)>=0&&(o=c,i[c]=d(t,e),l=s.plus(i),l>e?(i[c]--,t=s.plus(i),t>e&&(l=t,i[c]--,t=s.plus(i))):t=l);return[t,i,l,o]}function s6(t,e,n,r){let[i,s,o,l]=i6(t,e,n);const c=e-i,d=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);d.length===0&&(o<e&&(o=i.plus({[l]:1})),o!==i&&(s[l]=(s[l]||0)+c/(o-i)));const p=An.fromObject(s,r);return d.length>0?An.fromMillis(c,r).shiftTo(...d).plus(p):p}const o6="missing Intl.DateTimeFormat.formatToParts support";function Mn(t,e=n=>n){return{regex:t,deser:([n])=>e(Gz(n))}}const a6="\xa0",BA=`[ ${a6}]`,zA=new RegExp(BA,"g");function l6(t){return t.replace(/\./g,"\\.?").replace(zA,BA)}function iT(t){return t.replace(/\./g,"").replace(zA," ").toLowerCase()}function yo(t,e){return t===null?null:{regex:RegExp(t.map(l6).join("|")),deser:([n])=>t.findIndex(r=>iT(n)===iT(r))+e}}function sT(t,e){return{regex:t,deser:([,n,r])=>yb(n,r),groups:e}}function Dg(t){return{regex:t,deser:([e])=>e}}function u6(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function c6(t,e){const n=go(e),r=go(e,"{2}"),i=go(e,"{3}"),s=go(e,"{4}"),o=go(e,"{6}"),l=go(e,"{1,2}"),c=go(e,"{1,3}"),d=go(e,"{1,6}"),p=go(e,"{1,9}"),h=go(e,"{2,4}"),b=go(e,"{4,6}"),x=I=>({regex:RegExp(u6(I.val)),deser:([T])=>T,literal:!0}),E=(I=>{if(t.literal)return x(I);switch(I.val){case"G":return yo(e.eras("short"),0);case"GG":return yo(e.eras("long"),0);case"y":return Mn(d);case"yy":return Mn(h,iE);case"yyyy":return Mn(s);case"yyyyy":return Mn(b);case"yyyyyy":return Mn(o);case"M":return Mn(l);case"MM":return Mn(r);case"MMM":return yo(e.months("short",!0),1);case"MMMM":return yo(e.months("long",!0),1);case"L":return Mn(l);case"LL":return Mn(r);case"LLL":return yo(e.months("short",!1),1);case"LLLL":return yo(e.months("long",!1),1);case"d":return Mn(l);case"dd":return Mn(r);case"o":return Mn(c);case"ooo":return Mn(i);case"HH":return Mn(r);case"H":return Mn(l);case"hh":return Mn(r);case"h":return Mn(l);case"mm":return Mn(r);case"m":return Mn(l);case"q":return Mn(l);case"qq":return Mn(r);case"s":return Mn(l);case"ss":return Mn(r);case"S":return Mn(c);case"SSS":return Mn(i);case"u":return Dg(p);case"uu":return Dg(l);case"uuu":return Mn(n);case"a":return yo(e.meridiems(),0);case"kkkk":return Mn(s);case"kk":return Mn(h,iE);case"W":return Mn(l);case"WW":return Mn(r);case"E":case"c":return Mn(n);case"EEE":return yo(e.weekdays("short",!1),1);case"EEEE":return yo(e.weekdays("long",!1),1);case"ccc":return yo(e.weekdays("short",!0),1);case"cccc":return yo(e.weekdays("long",!0),1);case"Z":case"ZZ":return sT(new RegExp(`([+-]${l.source})(?::(${r.source}))?`),2);case"ZZZ":return sT(new RegExp(`([+-]${l.source})(${r.source})?`),2);case"z":return Dg(/[a-z_+-/]{1,256}?/i);case" ":return Dg(/[^\S\n\r]/);default:return x(I)}})(t)||{invalidReason:o6};return E.token=t,E}const d6={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function f6(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const c=/^\s+$/.test(i);return{literal:!c,val:c?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let l=d6[o];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function p6(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function h6(t,e,n){const r=t.match(e);if(r){const i={};let s=1;for(const o in n)if(jd(n,o)){const l=n[o],c=l.groups?l.groups+1:1;!l.literal&&l.token&&(i[l.token.val[0]]=l.deser(r.slice(s,s+c))),s+=c}return[r,i]}else return[r,{}]}function m6(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return fn(t.z)||(n=La.create(t.z)),fn(t.Z)||(n||(n=new Mi(t.Z)),r=t.Z),fn(t.q)||(t.M=(t.q-1)*3+1),fn(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),fn(t.u)||(t.S=_1(t.u)),[Object.keys(t).reduce((s,o)=>{const l=e(o);return l&&(s[l]=t[o]),s},{}),n,r]}let sw=null;function g6(){return sw||(sw=dn.fromMillis(0x16a2e5618e3)),sw}function y6(t,e){if(t.literal)return t;const n=Si.macroTokenToFormatOpts(t.val),r=HA(n,e);return r==null||r.includes(void 0)?t:r}function WA(t,e){return Array.prototype.concat(...t.map(n=>y6(n,e)))}class UA{constructor(e,n){if(this.locale=e,this.format=n,this.tokens=WA(Si.parseFormat(n),e),this.units=this.tokens.map(r=>c6(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=p6(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[n,r]=h6(e,this.regex,this.handlers),[i,s,o]=r?m6(r):[null,null,void 0];if(jd(r,"a")&&jd(r,"H"))throw new sd("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function VA(t,e,n){return new UA(t,n).explainFromTokens(e)}function v6(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=VA(t,e,n);return[r,i,s,o]}function HA(t,e){if(!t)return null;const r=Si.create(e,t).dtFormatter(g6()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>f6(o,t,s))}const ow="Invalid DateTime",b6=864e13;function kp(t){return new No("unsupported zone",`the zone "${t.name}" is not supported`)}function aw(t){return t.weekData===null&&(t.weekData=lv(t.c)),t.weekData}function lw(t){return t.localWeekData===null&&(t.localWeekData=lv(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function ku(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new dn({...n,...e,old:n})}function QA(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function Lg(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function my(t,e,n){return QA(gb(t),e,n)}function oT(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,uv(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=An.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=gb(s);let[c,d]=QA(l,n,t.zone);return o!==0&&(c+=o,d=t.zone.offset(c)),{ts:c,o:d}}function Hc(t,e,n,r,i,s){const{setZone:o,zone:l}=n;if(t&&Object.keys(t).length!==0||e){const c=e||l,d=dn.fromObject(t,{...n,zone:c,specificOffset:s});return o?d:d.setZone(l)}else return dn.invalid(new No("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Mg(t,e,n=!0){return t.isValid?Si.create(Wn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function uw(t,e){const n=t.c.year>9999||t.c.year<0;let r="";return n&&t.c.year>=0&&(r+="+"),r+=Kr(t.c.year,n?6:4),e?(r+="-",r+=Kr(t.c.month),r+="-",r+=Kr(t.c.day)):(r+=Kr(t.c.month),r+=Kr(t.c.day)),r}function aT(t,e,n,r,i,s){let o=Kr(t.c.hour);return e?(o+=":",o+=Kr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=":")):o+=Kr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=Kr(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=Kr(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Kr(Math.trunc(-t.o/60)),o+=":",o+=Kr(Math.trunc(-t.o%60))):(o+="+",o+=Kr(Math.trunc(t.o/60)),o+=":",o+=Kr(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const KA={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},x6={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},_6={ordinal:1,hour:0,minute:0,second:0,millisecond:0},GA=["year","month","day","hour","minute","second","millisecond"],w6=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],S6=["year","ordinal","hour","minute","second","millisecond"];function E6(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Z3(t);return e}function lT(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return E6(t)}}function N6(t){return yy[t]||(gy===void 0&&(gy=Mr.now()),yy[t]=t.offset(gy)),yy[t]}function uT(t,e){const n=Nl(e.zone,Mr.defaultZone);if(!n.isValid)return dn.invalid(kp(n));const r=Wn.fromObject(e);let i,s;if(fn(t.year))i=Mr.now();else{for(const c of GA)fn(t[c])&&(t[c]=KA[c]);const o=xA(t)||_A(t);if(o)return dn.invalid(o);const l=N6(n);[i,s]=my(t,l,n)}return new dn({ts:i,zone:n,loc:r,o:s})}function cT(t,e,n){const r=fn(n.round)?!0:n.round,i=(o,l)=>(o=w1(o,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(o,l)),s=o=>n.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(n.unit)return i(s(n.unit),n.unit);for(const o of n.units){const l=s(o);if(Math.abs(l)>=1)return i(l,o)}return i(t>e?-0:0,n.units[n.units.length-1])}function dT(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}let gy,yy={};class dn{constructor(e){const n=e.zone||Mr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new No("invalid input"):null)||(n.isValid?null:kp(n));this.ts=fn(e.ts)?Mr.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{const l=jl(e.o)&&!e.old?e.o:n.offset(this.ts);i=Lg(this.ts,l),r=Number.isNaN(i.year)?new No("invalid input"):null,i=r?null:i,s=r?null:l}this._zone=n,this.loc=e.loc||Wn.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new dn({})}static local(){const[e,n]=dT(arguments),[r,i,s,o,l,c,d]=n;return uT({year:r,month:i,day:s,hour:o,minute:l,second:c,millisecond:d},e)}static utc(){const[e,n]=dT(arguments),[r,i,s,o,l,c,d]=n;return e.zone=Mi.utcInstance,uT({year:r,month:i,day:s,hour:o,minute:l,second:c,millisecond:d},e)}static fromJSDate(e,n={}){const r=eW(e)?e.valueOf():NaN;if(Number.isNaN(r))return dn.invalid("invalid input");const i=Nl(n.zone,Mr.defaultZone);return i.isValid?new dn({ts:r,zone:i,loc:Wn.fromObject(n)}):dn.invalid(kp(i))}static fromMillis(e,n={}){if(jl(e))return e<-864e13||e>b6?dn.invalid("Timestamp out of range"):new dn({ts:e,zone:Nl(n.zone,Mr.defaultZone),loc:Wn.fromObject(n)});throw new _i(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(jl(e))return new dn({ts:e*1e3,zone:Nl(n.zone,Mr.defaultZone),loc:Wn.fromObject(n)});throw new _i("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=Nl(n.zone,Mr.defaultZone);if(!r.isValid)return dn.invalid(kp(r));const i=Wn.fromObject(n),s=cv(e,lT),{minDaysInFirstWeek:o,startOfWeek:l}=ZC(s,i),c=Mr.now(),d=fn(n.specificOffset)?r.offset(c):n.specificOffset,p=!fn(s.ordinal),h=!fn(s.year),b=!fn(s.month)||!fn(s.day),x=h||b,w=s.weekYear||s.weekNumber;if((x||p)&&w)throw new sd("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&p)throw new sd("Can't mix ordinal dates with month/day");const E=w||s.weekday&&!x;let I,T,O=Lg(c,d);E?(I=w6,T=x6,O=lv(O,o,l)):p?(I=S6,T=_6,O=iw(O)):(I=GA,T=KA);let q=!1;for(const M of I){const F=s[M];fn(F)?q?s[M]=T[M]:s[M]=O[M]:q=!0}const A=E?Jz(s,o,l):p?Yz(s):xA(s),D=A||_A(s);if(D)return dn.invalid(D);const L=E?KC(s,o,l):p?GC(s):s,[z,P]=my(L,d,r),R=new dn({ts:z,zone:r,o:P,loc:i});return s.weekday&&x&&e.weekday!==R.weekday?dn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${R.toISO()}`):R.isValid?R:dn.invalid(R.invalid)}static fromISO(e,n={}){const[r,i]=WW(e);return Hc(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=UW(e);return Hc(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=VW(e);return Hc(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(fn(e)||fn(n))throw new _i("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Wn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[l,c,d,p]=v6(o,e,n);return p?dn.invalid(p):Hc(l,c,r,`format ${n}`,e,d)}static fromString(e,n,r={}){return dn.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=YW(e);return Hc(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new _i("need to specify a reason the DateTime is invalid");const r=e instanceof No?e:new No(e,n);if(Mr.throwOnInvalid)throw new Ez(r);return new dn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=HA(e,Wn.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return WA(Si.parseFormat(e),Wn.fromObject(n)).map(i=>i.val).join("")}static resetCache(){gy=void 0,yy={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?aw(this).weekYear:NaN}get weekNumber(){return this.isValid?aw(this).weekNumber:NaN}get weekday(){return this.isValid?aw(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?lw(this).weekday:NaN}get localWeekNumber(){return this.isValid?lw(this).weekNumber:NaN}get localWeekYear(){return this.isValid?lw(this).weekYear:NaN}get ordinal(){return this.isValid?iw(this.c).ordinal:NaN}get monthShort(){return this.isValid?Fg.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Fg.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Fg.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Fg.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=gb(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*n),l=this.zone.offset(r-s*n);if(o===l)return[this];const c=r-o*n,d=r-l*n,p=Lg(c,o),h=Lg(d,l);return p.hour===h.hour&&p.minute===h.minute&&p.second===h.second&&p.millisecond===h.millisecond?[ku(this,{ts:c}),ku(this,{ts:d})]:[this]}get isInLeapYear(){return Yh(this.year)}get daysInMonth(){return uv(this.year,this.month)}get daysInYear(){return this.isValid?yd(this.year):NaN}get weeksInWeekYear(){return this.isValid?lh(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?lh(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=Si.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(Mi.instance(e),n)}toLocal(){return this.setZone(Mr.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=Nl(e,Mr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const s=e.offset(this.ts),o=this.toObject();[i]=my(o,s,e)}return ku(this,{ts:i,zone:e})}else return dn.invalid(kp(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return ku(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=cv(e,lT),{minDaysInFirstWeek:r,startOfWeek:i}=ZC(n,this.loc),s=!fn(n.weekYear)||!fn(n.weekNumber)||!fn(n.weekday),o=!fn(n.ordinal),l=!fn(n.year),c=!fn(n.month)||!fn(n.day),d=l||c,p=n.weekYear||n.weekNumber;if((d||o)&&p)throw new sd("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new sd("Can't mix ordinal dates with month/day");let h;s?h=KC({...lv(this.c,r,i),...n},r,i):fn(n.ordinal)?(h={...this.toObject(),...n},fn(n.day)&&(h.day=Math.min(uv(h.year,h.month),h.day))):h=GC({...iw(this.c),...n});const[b,x]=my(h,this.o,this.zone);return ku(this,{ts:b,o:x})}plus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e);return ku(this,oT(this,n))}minus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e).negate();return ku(this,oT(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=An.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?Si.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):ow}toLocaleString(e=av,n={}){return this.isValid?Si.create(this.loc.clone(n),e).formatDateTime(this):ow}toLocaleParts(e={}){return this.isValid?Si.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let l=uw(this,o);return l+="T",l+=aT(this,o,n,r,i,s),l}toISODate({format:e="extended"}={}){return this.isValid?uw(this,e==="extended"):null}toISOWeekDate(){return Mg(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+aT(this,o==="extended",n,e,r,s):null}toRFC2822(){return Mg(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Mg(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?uw(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),Mg(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():ow}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return An.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=tW(n).map(An.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,c=o?e:this,d=s6(l,c,s,i);return o?d.negate():d}diffNow(e="milliseconds",n={}){return this.diff(dn.now(),e,n)}until(e){return this.isValid?Lr.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||dn.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),cT(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?cT(e.base||dn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(dn.isDateTime))throw new _i("min requires all arguments be DateTimes");return JC(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(dn.isDateTime))throw new _i("max requires all arguments be DateTimes");return JC(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Wn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return VA(o,e,n)}static fromStringExplain(e,n,r={}){return dn.fromFormatExplain(e,n,r)}static buildFormatParser(e,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Wn.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new UA(s,e)}static fromFormatParser(e,n,r={}){if(fn(e)||fn(n))throw new _i("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Wn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new _i(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:l,zone:c,specificOffset:d,invalidReason:p}=n.explainFromTokens(e);return p?dn.invalid(p):Hc(l,c,r,`format ${n.format}`,e,d)}static get DATE_SHORT(){return av}static get DATE_MED(){return J3}static get DATE_MED_WITH_WEEKDAY(){return Iz}static get DATE_FULL(){return Y3}static get DATE_HUGE(){return X3}static get TIME_SIMPLE(){return eA}static get TIME_WITH_SECONDS(){return tA}static get TIME_WITH_SHORT_OFFSET(){return nA}static get TIME_WITH_LONG_OFFSET(){return rA}static get TIME_24_SIMPLE(){return iA}static get TIME_24_WITH_SECONDS(){return sA}static get TIME_24_WITH_SHORT_OFFSET(){return oA}static get TIME_24_WITH_LONG_OFFSET(){return aA}static get DATETIME_SHORT(){return lA}static get DATETIME_SHORT_WITH_SECONDS(){return uA}static get DATETIME_MED(){return cA}static get DATETIME_MED_WITH_SECONDS(){return dA}static get DATETIME_MED_WITH_WEEKDAY(){return Cz}static get DATETIME_FULL(){return fA}static get DATETIME_FULL_WITH_SECONDS(){return pA}static get DATETIME_HUGE(){return hA}static get DATETIME_HUGE_WITH_SECONDS(){return mA}}function cp(t){if(dn.isDateTime(t))return t;if(t&&t.valueOf&&jl(t.valueOf()))return dn.fromJSDate(t);if(t&&typeof t=="object")return dn.fromObject(t);throw new _i(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function ZA(t,e){return function(){return t.apply(e,arguments)}}const{toString:k6}=Object.prototype,{getPrototypeOf:k1}=Object,bb=(t=>e=>{const n=k6.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Fo=t=>(t=t.toLowerCase(),e=>bb(e)===t),xb=t=>e=>typeof e===t,{isArray:nf}=Array,uh=xb("undefined");function I6(t){return t!==null&&!uh(t)&&t.constructor!==null&&!uh(t.constructor)&&qs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const JA=Fo("ArrayBuffer");function C6(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&JA(t.buffer),e}const T6=xb("string"),qs=xb("function"),YA=xb("number"),_b=t=>t!==null&&typeof t=="object",O6=t=>t===!0||t===!1,vy=t=>{if(bb(t)!=="object")return!1;const e=k1(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},q6=Fo("Date"),R6=Fo("File"),j6=Fo("Blob"),A6=Fo("FileList"),P6=t=>_b(t)&&qs(t.pipe),F6=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||qs(t.append)&&((e=bb(t))==="formdata"||e==="object"&&qs(t.toString)&&t.toString()==="[object FormData]"))},D6=Fo("URLSearchParams"),[L6,M6,$6,B6]=["ReadableStream","Request","Response","Headers"].map(Fo),z6=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),nf(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,t[l],l,t)}}function XA(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Mu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,eP=t=>!uh(t)&&t!==Mu;function sE(){const{caseless:t}=eP(this)&&this||{},e={},n=(r,i)=>{const s=t&&XA(e,i)||i;vy(e[s])&&vy(r)?e[s]=sE(e[s],r):vy(r)?e[s]=sE({},r):nf(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&tm(arguments[r],n);return e}const W6=(t,e,n,{allOwnKeys:r}={})=>(tm(e,(i,s)=>{n&&qs(i)?t[s]=ZA(i,n):t[s]=i},{allOwnKeys:r}),t),U6=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),V6=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},H6=(t,e,n,r)=>{let i,s,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&k1(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Q6=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},K6=t=>{if(!t)return null;if(nf(t))return t;let e=t.length;if(!YA(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},G6=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&k1(Uint8Array)),Z6=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},J6=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Y6=Fo("HTMLFormElement"),X6=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),fT=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),eU=Fo("RegExp"),tP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};tm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},tU=t=>{tP(t,(e,n)=>{if(qs(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(qs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},nU=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return nf(t)?r(t):r(String(t).split(e)),n},rU=()=>{},iU=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,cw="abcdefghijklmnopqrstuvwxyz",pT="0123456789",nP={DIGIT:pT,ALPHA:cw,ALPHA_DIGIT:cw+cw.toUpperCase()+pT},sU=(t=16,e=nP.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function oU(t){return!!(t&&qs(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const aU=t=>{const e=new Array(10),n=(r,i)=>{if(_b(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=nf(r)?[]:{};return tm(r,(o,l)=>{const c=n(o,i+1);!uh(c)&&(s[l]=c)}),e[i]=void 0,s}}return r};return n(t,0)},lU=Fo("AsyncFunction"),uU=t=>t&&(_b(t)||qs(t))&&qs(t.then)&&qs(t.catch),rP=((t,e)=>t?setImmediate:e?((n,r)=>(Mu.addEventListener("message",({source:i,data:s})=>{i===Mu&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Mu.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",qs(Mu.postMessage)),cU=typeof queueMicrotask<"u"?queueMicrotask.bind(Mu):typeof process<"u"&&process.nextTick||rP,Ye={isArray:nf,isArrayBuffer:JA,isBuffer:I6,isFormData:F6,isArrayBufferView:C6,isString:T6,isNumber:YA,isBoolean:O6,isObject:_b,isPlainObject:vy,isReadableStream:L6,isRequest:M6,isResponse:$6,isHeaders:B6,isUndefined:uh,isDate:q6,isFile:R6,isBlob:j6,isRegExp:eU,isFunction:qs,isStream:P6,isURLSearchParams:D6,isTypedArray:G6,isFileList:A6,forEach:tm,merge:sE,extend:W6,trim:z6,stripBOM:U6,inherits:V6,toFlatObject:H6,kindOf:bb,kindOfTest:Fo,endsWith:Q6,toArray:K6,forEachEntry:Z6,matchAll:J6,isHTMLForm:Y6,hasOwnProperty:fT,hasOwnProp:fT,reduceDescriptors:tP,freezeMethods:tU,toObjectSet:nU,toCamelCase:X6,noop:rU,toFiniteNumber:iU,findKey:XA,global:Mu,isContextDefined:eP,ALPHABET:nP,generateString:sU,isSpecCompliantForm:oU,toJSONObject:aU,isAsyncFn:lU,isThenable:uU,setImmediate:rP,asap:cU};function bn(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ye.inherits(bn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ye.toJSONObject(this.config),code:this.code,status:this.status}}});const iP=bn.prototype,sP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{sP[t]={value:t}});Object.defineProperties(bn,sP);Object.defineProperty(iP,"isAxiosError",{value:!0});bn.from=(t,e,n,r,i,s)=>{const o=Object.create(iP);return Ye.toFlatObject(t,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),bn.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const dU=null;function oE(t){return Ye.isPlainObject(t)||Ye.isArray(t)}function oP(t){return Ye.endsWith(t,"[]")?t.slice(0,-2):t}function hT(t,e,n){return t?t.concat(e).map(function(i,s){return i=oP(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function fU(t){return Ye.isArray(t)&&!t.some(oE)}const pU=Ye.toFlatObject(Ye,{},null,function(e){return/^is[A-Z]/.test(e)});function wb(t,e,n){if(!Ye.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ye.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,I){return!Ye.isUndefined(I[E])});const r=n.metaTokens,i=n.visitor||p,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Ye.isSpecCompliantForm(e);if(!Ye.isFunction(i))throw new TypeError("visitor must be a function");function d(w){if(w===null)return"";if(Ye.isDate(w))return w.toISOString();if(!c&&Ye.isBlob(w))throw new bn("Blob is not supported. Use a Buffer instead.");return Ye.isArrayBuffer(w)||Ye.isTypedArray(w)?c&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function p(w,E,I){let T=w;if(w&&!I&&typeof w=="object"){if(Ye.endsWith(E,"{}"))E=r?E:E.slice(0,-2),w=JSON.stringify(w);else if(Ye.isArray(w)&&fU(w)||(Ye.isFileList(w)||Ye.endsWith(E,"[]"))&&(T=Ye.toArray(w)))return E=oP(E),T.forEach(function(q,A){!(Ye.isUndefined(q)||q===null)&&e.append(o===!0?hT([E],A,s):o===null?E:E+"[]",d(q))}),!1}return oE(w)?!0:(e.append(hT(I,E,s),d(w)),!1)}const h=[],b=Object.assign(pU,{defaultVisitor:p,convertValue:d,isVisitable:oE});function x(w,E){if(!Ye.isUndefined(w)){if(h.indexOf(w)!==-1)throw Error("Circular reference detected in "+E.join("."));h.push(w),Ye.forEach(w,function(T,O){(!(Ye.isUndefined(T)||T===null)&&i.call(e,T,Ye.isString(O)?O.trim():O,E,b))===!0&&x(T,E?E.concat(O):[O])}),h.pop()}}if(!Ye.isObject(t))throw new TypeError("data must be an object");return x(t),e}function mT(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function I1(t,e){this._pairs=[],t&&wb(t,this,e)}const aP=I1.prototype;aP.append=function(e,n){this._pairs.push([e,n])};aP.toString=function(e){const n=e?function(r){return e.call(this,r,mT)}:mT;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function hU(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function lP(t,e,n){if(!e)return t;const r=n&&n.encode||hU;Ye.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Ye.isURLSearchParams(e)?e.toString():new I1(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class gT{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const uP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mU=typeof URLSearchParams<"u"?URLSearchParams:I1,gU=typeof FormData<"u"?FormData:null,yU=typeof Blob<"u"?Blob:null,vU={isBrowser:!0,classes:{URLSearchParams:mU,FormData:gU,Blob:yU},protocols:["http","https","file","blob","url","data"]},C1=typeof window<"u"&&typeof document<"u",aE=typeof navigator=="object"&&navigator||void 0,bU=C1&&(!aE||["ReactNative","NativeScript","NS"].indexOf(aE.product)<0),xU=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_U=C1&&window.location.href||"http://localhost",wU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:C1,hasStandardBrowserEnv:bU,hasStandardBrowserWebWorkerEnv:xU,navigator:aE,origin:_U},Symbol.toStringTag,{value:"Module"})),Ei={...wU,...vU};function SU(t,e){return wb(t,new Ei.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ei.isNode&&Ye.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function EU(t){return Ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function NU(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function cP(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=s>=n.length;return o=!o&&Ye.isArray(i)?i.length:o,c?(Ye.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!Ye.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Ye.isArray(i[o])&&(i[o]=NU(i[o])),!l)}if(Ye.isFormData(t)&&Ye.isFunction(t.entries)){const n={};return Ye.forEachEntry(t,(r,i)=>{e(EU(r),i,n,0)}),n}return null}function kU(t,e,n){if(Ye.isString(t))try{return(e||JSON.parse)(t),Ye.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const nm={transitional:uP,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Ye.isObject(e);if(s&&Ye.isHTMLForm(e)&&(e=new FormData(e)),Ye.isFormData(e))return i?JSON.stringify(cP(e)):e;if(Ye.isArrayBuffer(e)||Ye.isBuffer(e)||Ye.isStream(e)||Ye.isFile(e)||Ye.isBlob(e)||Ye.isReadableStream(e))return e;if(Ye.isArrayBufferView(e))return e.buffer;if(Ye.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return SU(e,this.formSerializer).toString();if((l=Ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return wb(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),kU(e)):e}],transformResponse:[function(e){const n=this.transitional||nm.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Ye.isResponse(e)||Ye.isReadableStream(e))return e;if(e&&Ye.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?bn.from(l,bn.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ei.classes.FormData,Blob:Ei.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ye.forEach(["delete","get","head","post","put","patch"],t=>{nm.headers[t]={}});const IU=Ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),CU=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&IU[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},yT=Symbol("internals");function dp(t){return t&&String(t).trim().toLowerCase()}function by(t){return t===!1||t==null?t:Ye.isArray(t)?t.map(by):String(t)}function TU(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const OU=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function dw(t,e,n,r,i){if(Ye.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Ye.isString(e)){if(Ye.isString(r))return e.indexOf(r)!==-1;if(Ye.isRegExp(r))return r.test(e)}}function qU(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function RU(t,e){const n=Ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let fs=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,c,d){const p=dp(c);if(!p)throw new Error("header name must be a non-empty string");const h=Ye.findKey(i,p);(!h||i[h]===void 0||d===!0||d===void 0&&i[h]!==!1)&&(i[h||c]=by(l))}const o=(l,c)=>Ye.forEach(l,(d,p)=>s(d,p,c));if(Ye.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Ye.isString(e)&&(e=e.trim())&&!OU(e))o(CU(e),n);else if(Ye.isHeaders(e))for(const[l,c]of e.entries())s(c,l,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=dp(e),e){const r=Ye.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return TU(i);if(Ye.isFunction(n))return n.call(this,i,r);if(Ye.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=dp(e),e){const r=Ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||dw(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=dp(o),o){const l=Ye.findKey(r,o);l&&(!n||dw(r,r[l],l,n))&&(delete r[l],i=!0)}}return Ye.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||dw(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Ye.forEach(this,(i,s)=>{const o=Ye.findKey(r,s);if(o){n[o]=by(i),delete n[s];return}const l=e?qU(s):String(s).trim();l!==s&&delete n[s],n[l]=by(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ye.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Ye.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[yT]=this[yT]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=dp(o);r[l]||(RU(i,o),r[l]=!0)}return Ye.isArray(e)?e.forEach(s):s(e),this}};fs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ye.reduceDescriptors(fs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ye.freezeMethods(fs);function fw(t,e){const n=this||nm,r=e||n,i=fs.from(r.headers);let s=r.data;return Ye.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function dP(t){return!!(t&&t.__CANCEL__)}function rf(t,e,n){bn.call(this,t??"canceled",bn.ERR_CANCELED,e,n),this.name="CanceledError"}Ye.inherits(rf,bn,{__CANCEL__:!0});function fP(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new bn("Request failed with status code "+n.status,[bn.ERR_BAD_REQUEST,bn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function jU(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function AU(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),p=r[s];o||(o=d),n[i]=c,r[i]=d;let h=s,b=0;for(;h!==i;)b+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),d-o<e)return;const x=p&&d-p;return x?Math.round(b*1e3/x):void 0}}function PU(t,e){let n=0,r=1e3/e,i,s;const o=(d,p=Date.now())=>{n=p,i=null,s&&(clearTimeout(s),s=null),t.apply(null,d)};return[(...d)=>{const p=Date.now(),h=p-n;h>=r?o(d,p):(i=d,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const dv=(t,e,n=3)=>{let r=0;const i=AU(50,250);return PU(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,c=o-r,d=i(c),p=o<=l;r=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&p?(l-o)/d:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},n)},vT=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},bT=t=>(...e)=>Ye.asap(()=>t(...e)),FU=Ei.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ei.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ei.origin),Ei.navigator&&/(msie|trident)/i.test(Ei.navigator.userAgent)):()=>!0,DU=Ei.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Ye.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ye.isString(r)&&o.push("path="+r),Ye.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function LU(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function MU(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function pP(t,e){return t&&!LU(e)?MU(t,e):e}const xT=t=>t instanceof fs?{...t}:t;function Zu(t,e){e=e||{};const n={};function r(d,p,h,b){return Ye.isPlainObject(d)&&Ye.isPlainObject(p)?Ye.merge.call({caseless:b},d,p):Ye.isPlainObject(p)?Ye.merge({},p):Ye.isArray(p)?p.slice():p}function i(d,p,h,b){if(Ye.isUndefined(p)){if(!Ye.isUndefined(d))return r(void 0,d,h,b)}else return r(d,p,h,b)}function s(d,p){if(!Ye.isUndefined(p))return r(void 0,p)}function o(d,p){if(Ye.isUndefined(p)){if(!Ye.isUndefined(d))return r(void 0,d)}else return r(void 0,p)}function l(d,p,h){if(h in e)return r(d,p);if(h in t)return r(void 0,d)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,p,h)=>i(xT(d),xT(p),h,!0)};return Ye.forEach(Object.keys(Object.assign({},t,e)),function(p){const h=c[p]||i,b=h(t[p],e[p],p);Ye.isUndefined(b)&&h!==l||(n[p]=b)}),n}const hP=t=>{const e=Zu({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=e;e.headers=o=fs.from(o),e.url=lP(pP(e.baseURL,e.url),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Ye.isFormData(n)){if(Ei.hasStandardBrowserEnv||Ei.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...p]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...p].join("; "))}}if(Ei.hasStandardBrowserEnv&&(r&&Ye.isFunction(r)&&(r=r(e)),r||r!==!1&&FU(e.url))){const d=i&&s&&DU.read(s);d&&o.set(i,d)}return e},$U=typeof XMLHttpRequest<"u",BU=$U&&function(t){return new Promise(function(n,r){const i=hP(t);let s=i.data;const o=fs.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=i,p,h,b,x,w;function E(){x&&x(),w&&w(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let I=new XMLHttpRequest;I.open(i.method.toUpperCase(),i.url,!0),I.timeout=i.timeout;function T(){if(!I)return;const q=fs.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),D={data:!l||l==="text"||l==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:q,config:t,request:I};fP(function(z){n(z),E()},function(z){r(z),E()},D),I=null}"onloadend"in I?I.onloadend=T:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(T)},I.onabort=function(){I&&(r(new bn("Request aborted",bn.ECONNABORTED,t,I)),I=null)},I.onerror=function(){r(new bn("Network Error",bn.ERR_NETWORK,t,I)),I=null},I.ontimeout=function(){let A=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const D=i.transitional||uP;i.timeoutErrorMessage&&(A=i.timeoutErrorMessage),r(new bn(A,D.clarifyTimeoutError?bn.ETIMEDOUT:bn.ECONNABORTED,t,I)),I=null},s===void 0&&o.setContentType(null),"setRequestHeader"in I&&Ye.forEach(o.toJSON(),function(A,D){I.setRequestHeader(D,A)}),Ye.isUndefined(i.withCredentials)||(I.withCredentials=!!i.withCredentials),l&&l!=="json"&&(I.responseType=i.responseType),d&&([b,w]=dv(d,!0),I.addEventListener("progress",b)),c&&I.upload&&([h,x]=dv(c),I.upload.addEventListener("progress",h),I.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(p=q=>{I&&(r(!q||q.type?new rf(null,t,I):q),I.abort(),I=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const O=jU(i.url);if(O&&Ei.protocols.indexOf(O)===-1){r(new bn("Unsupported protocol "+O+":",bn.ERR_BAD_REQUEST,t));return}I.send(s||null)})},zU=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(d){if(!i){i=!0,l();const p=d instanceof Error?d:this.reason;r.abort(p instanceof bn?p:new rf(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,s(new bn(`timeout ${e} of ms exceeded`,bn.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),t=null)};t.forEach(d=>d.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>Ye.asap(l),c}},WU=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},UU=async function*(t,e){for await(const n of VU(t))yield*WU(n,e)},VU=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},_T=(t,e,n,r)=>{const i=UU(t,e);let s=0,o,l=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:p}=await i.next();if(d){l(),c.close();return}let h=p.byteLength;if(n){let b=s+=h;n(b)}c.enqueue(new Uint8Array(p))}catch(d){throw l(d),d}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},Sb=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",mP=Sb&&typeof ReadableStream=="function",HU=Sb&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),gP=(t,...e)=>{try{return!!t(...e)}catch{return!1}},QU=mP&&gP(()=>{let t=!1;const e=new Request(Ei.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),wT=64*1024,lE=mP&&gP(()=>Ye.isReadableStream(new Response("").body)),fv={stream:lE&&(t=>t.body)};Sb&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!fv[e]&&(fv[e]=Ye.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new bn(`Response type '${e}' is not supported`,bn.ERR_NOT_SUPPORT,r)})})})(new Response);const KU=async t=>{if(t==null)return 0;if(Ye.isBlob(t))return t.size;if(Ye.isSpecCompliantForm(t))return(await new Request(Ei.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ye.isArrayBufferView(t)||Ye.isArrayBuffer(t))return t.byteLength;if(Ye.isURLSearchParams(t)&&(t=t+""),Ye.isString(t))return(await HU(t)).byteLength},GU=async(t,e)=>{const n=Ye.toFiniteNumber(t.getContentLength());return n??KU(e)},ZU=Sb&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:p,withCredentials:h="same-origin",fetchOptions:b}=hP(t);d=d?(d+"").toLowerCase():"text";let x=zU([i,s&&s.toAbortSignal()],o),w;const E=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let I;try{if(c&&QU&&n!=="get"&&n!=="head"&&(I=await GU(p,r))!==0){let D=new Request(e,{method:"POST",body:r,duplex:"half"}),L;if(Ye.isFormData(r)&&(L=D.headers.get("content-type"))&&p.setContentType(L),D.body){const[z,P]=vT(I,dv(bT(c)));r=_T(D.body,wT,z,P)}}Ye.isString(h)||(h=h?"include":"omit");const T="credentials"in Request.prototype;w=new Request(e,{...b,signal:x,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:T?h:void 0});let O=await fetch(w);const q=lE&&(d==="stream"||d==="response");if(lE&&(l||q&&E)){const D={};["status","statusText","headers"].forEach(R=>{D[R]=O[R]});const L=Ye.toFiniteNumber(O.headers.get("content-length")),[z,P]=l&&vT(L,dv(bT(l),!0))||[];O=new Response(_T(O.body,wT,z,()=>{P&&P(),E&&E()}),D)}d=d||"text";let A=await fv[Ye.findKey(fv,d)||"text"](O,t);return!q&&E&&E(),await new Promise((D,L)=>{fP(D,L,{data:A,headers:fs.from(O.headers),status:O.status,statusText:O.statusText,config:t,request:w})})}catch(T){throw E&&E(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new bn("Network Error",bn.ERR_NETWORK,t,w),{cause:T.cause||T}):bn.from(T,T&&T.code,t,w)}}),uE={http:dU,xhr:BU,fetch:ZU};Ye.forEach(uE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ST=t=>`- ${t}`,JU=t=>Ye.isFunction(t)||t===null||t===!1,yP={getAdapter:t=>{t=Ye.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!JU(n)&&(r=uE[(o=String(n)).toLowerCase()],r===void 0))throw new bn(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(ST).join(`
`):" "+ST(s[0]):"as no adapter specified";throw new bn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:uE};function pw(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new rf(null,t)}function ET(t){return pw(t),t.headers=fs.from(t.headers),t.data=fw.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),yP.getAdapter(t.adapter||nm.adapter)(t).then(function(r){return pw(t),r.data=fw.call(t,t.transformResponse,r),r.headers=fs.from(r.headers),r},function(r){return dP(r)||(pw(t),r&&r.response&&(r.response.data=fw.call(t,t.transformResponse,r.response),r.response.headers=fs.from(r.response.headers))),Promise.reject(r)})}const vP="1.7.9",Eb={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Eb[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const NT={};Eb.transitional=function(e,n,r){function i(s,o){return"[Axios v"+vP+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new bn(i(o," has been removed"+(n?" in "+n:"")),bn.ERR_DEPRECATED);return n&&!NT[o]&&(NT[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};Eb.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function YU(t,e,n){if(typeof t!="object")throw new bn("options must be an object",bn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=t[s],c=l===void 0||o(l,s,t);if(c!==!0)throw new bn("option "+s+" must be "+c,bn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new bn("Unknown option "+s,bn.ERR_BAD_OPTION)}}const xy={assertOptions:YU,validators:Eb},Wo=xy.validators;let Uu=class{constructor(e){this.defaults=e,this.interceptors={request:new gT,response:new gT}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Zu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&xy.assertOptions(r,{silentJSONParsing:Wo.transitional(Wo.boolean),forcedJSONParsing:Wo.transitional(Wo.boolean),clarifyTimeoutError:Wo.transitional(Wo.boolean)},!1),i!=null&&(Ye.isFunction(i)?n.paramsSerializer={serialize:i}:xy.assertOptions(i,{encode:Wo.function,serialize:Wo.function},!0)),xy.assertOptions(n,{baseUrl:Wo.spelling("baseURL"),withXsrfToken:Wo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ye.merge(s.common,s[n.method]);s&&Ye.forEach(["delete","get","head","post","put","patch","common"],w=>{delete s[w]}),n.headers=fs.concat(o,s);const l=[];let c=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(c=c&&E.synchronous,l.unshift(E.fulfilled,E.rejected))});const d=[];this.interceptors.response.forEach(function(E){d.push(E.fulfilled,E.rejected)});let p,h=0,b;if(!c){const w=[ET.bind(this),void 0];for(w.unshift.apply(w,l),w.push.apply(w,d),b=w.length,p=Promise.resolve(n);h<b;)p=p.then(w[h++],w[h++]);return p}b=l.length;let x=n;for(h=0;h<b;){const w=l[h++],E=l[h++];try{x=w(x)}catch(I){E.call(this,I);break}}try{p=ET.call(this,x)}catch(w){return Promise.reject(w)}for(h=0,b=d.length;h<b;)p=p.then(d[h++],d[h++]);return p}getUri(e){e=Zu(this.defaults,e);const n=pP(e.baseURL,e.url);return lP(n,e.params,e.paramsSerializer)}};Ye.forEach(["delete","get","head","options"],function(e){Uu.prototype[e]=function(n,r){return this.request(Zu(r||{},{method:e,url:n,data:(r||{}).data}))}});Ye.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,l){return this.request(Zu(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Uu.prototype[e]=n(),Uu.prototype[e+"Form"]=n(!0)});let XU=class bP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new rf(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new bP(function(i){e=i}),cancel:e}}};function eV(t){return function(n){return t.apply(null,n)}}function tV(t){return Ye.isObject(t)&&t.isAxiosError===!0}const cE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cE).forEach(([t,e])=>{cE[e]=t});function xP(t){const e=new Uu(t),n=ZA(Uu.prototype.request,e);return Ye.extend(n,Uu.prototype,e,{allOwnKeys:!0}),Ye.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return xP(Zu(t,i))},n}const Ur=xP(nm);Ur.Axios=Uu;Ur.CanceledError=rf;Ur.CancelToken=XU;Ur.isCancel=dP;Ur.VERSION=vP;Ur.toFormData=wb;Ur.AxiosError=bn;Ur.Cancel=Ur.CanceledError;Ur.all=function(e){return Promise.all(e)};Ur.spread=eV;Ur.isAxiosError=tV;Ur.mergeConfig=Zu;Ur.AxiosHeaders=fs;Ur.formToJSON=t=>cP(Ye.isHTMLForm(t)?new FormData(t):t);Ur.getAdapter=yP.getAdapter;Ur.HttpStatusCode=cE;Ur.default=Ur;const{Axios:yle,AxiosError:nV,CanceledError:vle,isCancel:ble,CancelToken:xle,VERSION:_le,all:wle,Cancel:Sle,isAxiosError:Ele,spread:Nle,toFormData:kle,AxiosHeaders:Ile,HttpStatusCode:Cle,formToJSON:Tle,getAdapter:Ole,mergeConfig:qle}=Ur,T1=({error:t,schema:e,onError:n})=>{if(t instanceof nV){const i=e.safeParse(t.response?.data);return i.success&&n({error:t,data:i.data}),i.success}return!1};var hw,kT;function rV(){if(kT)return hw;kT=1;function t(r){this.queue=[],this.timeslotRequests=0,this.interceptors={request:null,response:null},this.handleRequest=this.handleRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.enable(r)}t.prototype.getMaxRPS=function(){var r=this.perMilliseconds/1e3;return this.maxRequests/r},t.prototype.getQueue=function(){return this.queue},t.prototype.setMaxRPS=function(r){this.setRateLimitOptions({maxRequests:r,perMilliseconds:1e3})},t.prototype.setRateLimitOptions=function(r){r.maxRPS?this.setMaxRPS(r.maxRPS):(this.perMilliseconds=r.perMilliseconds,this.maxRequests=r.maxRequests)},t.prototype.enable=function(r){function i(s){return Promise.reject(s)}this.interceptors.request=r.interceptors.request.use(this.handleRequest,i),this.interceptors.response=r.interceptors.response.use(this.handleResponse,i)};function e(r){r.cancelToken&&r.cancelToken.throwIfRequested()}t.prototype.handleRequest=function(r){return new Promise(function(i,s){this.push({resolve:function(){try{e(r)}catch(o){return s(o),!1}return i(r),!0}})}.bind(this))},t.prototype.handleResponse=function(r){return this.shift(),r},t.prototype.push=function(r){this.queue.push(r),this.shiftInitial()},t.prototype.shiftInitial=function(){setTimeout(function(){return this.shift()}.bind(this),0)},t.prototype.shift=function(){if(this.queue.length){if(this.timeslotRequests===this.maxRequests){this.timeoutId&&typeof this.timeoutId.ref=="function"&&this.timeoutId.ref();return}var r=this.queue.shift(),i=r.resolve();if(this.timeslotRequests===0&&(this.timeoutId=setTimeout(function(){this.timeslotRequests=0,this.shift()}.bind(this),this.perMilliseconds),typeof this.timeoutId.unref=="function"&&this.queue.length===0&&this.timeoutId.unref()),!i){this.shift();return}this.timeslotRequests+=1}};function n(r,i){var s=new t(r);return s.setRateLimitOptions(i),r.getQueue=t.prototype.getQueue.bind(s),r.getMaxRPS=t.prototype.getMaxRPS.bind(s),r.setMaxRPS=t.prototype.setMaxRPS.bind(s),r.setRateLimitOptions=t.prototype.setRateLimitOptions.bind(s),r}return hw=n,hw}var iV=rV();const sV=io(iV),oV=({instance:t,limit:e}={})=>sV(t||Ur,e||{maxRequests:5,perMilliseconds:100}),O1="-",aV=t=>{const e=uV(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(O1);return l[0]===""&&l.length!==1&&l.shift(),_P(l,e)||lV(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},_P=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?_P(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(O1);return e.validators.find(({validator:o})=>o(s))?.classGroupId},IT=/^\[(.+)\]$/,lV=t=>{if(IT.test(t)){const e=IT.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},uV=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return dV(Object.entries(t.classGroups),n).forEach(([s,o])=>{dE(o,r,s,e)}),r},dE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:CT(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(cV(i)){dE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{dE(o,CT(e,s),n,r)})})},CT=(t,e)=>{let n=t;return e.split(O1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},cV=t=>t.isThemeGetter,dV=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[n,i]}):t,fV=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},wP="!",pV=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=l=>{const c=[];let d=0,p=0,h;for(let I=0;I<l.length;I++){let T=l[I];if(d===0){if(T===i&&(r||l.slice(I,I+s)===e)){c.push(l.slice(p,I)),p=I+s;continue}if(T==="/"){h=I;continue}}T==="["?d++:T==="]"&&d--}const b=c.length===0?l:l.substring(p),x=b.startsWith(wP),w=x?b.substring(1):b,E=h&&h>p?h-p:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:E}};return n?l=>n({className:l,parseClassName:o}):o},hV=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},mV=t=>({cache:fV(t.cacheSize),parseClassName:pV(t),...aV(t)}),gV=/\s+/,yV=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(gV);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:p,hasImportantModifier:h,baseClassName:b,maybePostfixModifierPosition:x}=n(d);let w=!!x,E=r(w?b.substring(0,x):b);if(!E){if(!w){l=d+(l.length>0?" "+l:l);continue}if(E=r(b),!E){l=d+(l.length>0?" "+l:l);continue}w=!1}const I=hV(p).join(":"),T=h?I+wP:I,O=T+E;if(s.includes(O))continue;s.push(O);const q=i(E,w);for(let A=0;A<q.length;++A){const D=q[A];s.push(T+D)}l=d+(l.length>0?" "+l:l)}return l};function vV(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=SP(e))&&(r&&(r+=" "),r+=n);return r}const SP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=SP(t[r]))&&(n&&(n+=" "),n+=e);return n};function bV(t,...e){let n,r,i,s=o;function o(c){const d=e.reduce((p,h)=>h(p),t());return n=mV(d),r=n.cache.get,i=n.cache.set,s=l,l(c)}function l(c){const d=r(c);if(d)return d;const p=yV(c,n);return i(c,p),p}return function(){return s(vV.apply(null,arguments))}}const hr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},EP=/^\[(?:([a-z-]+):)?(.+)\]$/i,xV=/^\d+\/\d+$/,_V=new Set(["px","full","screen"]),wV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,SV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,EV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,NV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Sa=t=>bd(t)||_V.has(t)||xV.test(t),hl=t=>sf(t,"length",AV),bd=t=>!!t&&!Number.isNaN(Number(t)),mw=t=>sf(t,"number",bd),fp=t=>!!t&&Number.isInteger(Number(t)),IV=t=>t.endsWith("%")&&bd(t.slice(0,-1)),_n=t=>EP.test(t),ml=t=>wV.test(t),CV=new Set(["length","size","percentage"]),TV=t=>sf(t,CV,NP),OV=t=>sf(t,"position",NP),qV=new Set(["image","url"]),RV=t=>sf(t,qV,FV),jV=t=>sf(t,"",PV),pp=()=>!0,sf=(t,e,n)=>{const r=EP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},AV=t=>SV.test(t)&&!EV.test(t),NP=()=>!1,PV=t=>NV.test(t),FV=t=>kV.test(t),DV=()=>{const t=hr("colors"),e=hr("spacing"),n=hr("blur"),r=hr("brightness"),i=hr("borderColor"),s=hr("borderRadius"),o=hr("borderSpacing"),l=hr("borderWidth"),c=hr("contrast"),d=hr("grayscale"),p=hr("hueRotate"),h=hr("invert"),b=hr("gap"),x=hr("gradientColorStops"),w=hr("gradientColorStopPositions"),E=hr("inset"),I=hr("margin"),T=hr("opacity"),O=hr("padding"),q=hr("saturate"),A=hr("scale"),D=hr("sepia"),L=hr("skew"),z=hr("space"),P=hr("translate"),R=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",_n,e],W=()=>[_n,e],V=()=>["",Sa,hl],B=()=>["auto",bd,_n],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>["start","end","center","between","around","evenly","stretch"],ne=()=>["","0",_n],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[bd,_n];return{cacheSize:500,separator:":",theme:{colors:[pp],spacing:[Sa,hl],blur:["none","",ml,_n],brightness:X(),borderColor:[t],borderRadius:["none","","full",ml,_n],borderSpacing:W(),borderWidth:V(),contrast:X(),grayscale:ne(),hueRotate:X(),invert:ne(),gap:W(),gradientColorStops:[t],gradientColorStopPositions:[IV,hl],inset:F(),margin:F(),opacity:X(),padding:W(),saturate:X(),scale:X(),sepia:ne(),skew:X(),space:W(),translate:W()},classGroups:{aspect:[{aspect:["auto","square","video",_n]}],container:["container"],columns:[{columns:[ml]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),_n]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fp,_n]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_n]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",fp,_n]}],"grid-cols":[{"grid-cols":[pp]}],"col-start-end":[{col:["auto",{span:["full",fp,_n]},_n]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[pp]}],"row-start-end":[{row:["auto",{span:[fp,_n]},_n]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_n]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_n]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...se()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...se(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...se(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[O]}],px:[{px:[O]}],py:[{py:[O]}],ps:[{ps:[O]}],pe:[{pe:[O]}],pt:[{pt:[O]}],pr:[{pr:[O]}],pb:[{pb:[O]}],pl:[{pl:[O]}],m:[{m:[I]}],mx:[{mx:[I]}],my:[{my:[I]}],ms:[{ms:[I]}],me:[{me:[I]}],mt:[{mt:[I]}],mr:[{mr:[I]}],mb:[{mb:[I]}],ml:[{ml:[I]}],"space-x":[{"space-x":[z]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[z]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_n,e]}],"min-w":[{"min-w":[_n,e,"min","max","fit"]}],"max-w":[{"max-w":[_n,e,"none","full","min","max","fit","prose",{screen:[ml]},ml]}],h:[{h:[_n,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_n,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_n,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_n,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ml,hl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",mw]}],"font-family":[{font:[pp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_n]}],"line-clamp":[{"line-clamp":["none",bd,mw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Sa,_n]}],"list-image":[{"list-image":["none",_n]}],"list-style-type":[{list:["none","disc","decimal",_n]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[T]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Sa,hl]}],"underline-offset":[{"underline-offset":["auto",Sa,_n]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:W()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_n]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_n]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[T]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),OV]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",TV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},RV]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[T]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[T]}],"divide-style":[{divide:J()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[Sa,_n]}],"outline-w":[{outline:[Sa,hl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[T]}],"ring-offset-w":[{"ring-offset":[Sa,hl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ml,jV]}],"shadow-color":[{shadow:[pp]}],opacity:[{opacity:[T]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ml,_n]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[h]}],saturate:[{saturate:[q]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[T]}],"backdrop-saturate":[{"backdrop-saturate":[q]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_n]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",_n]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",_n]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[fp,_n]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_n]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_n]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":W()}],"scroll-mx":[{"scroll-mx":W()}],"scroll-my":[{"scroll-my":W()}],"scroll-ms":[{"scroll-ms":W()}],"scroll-me":[{"scroll-me":W()}],"scroll-mt":[{"scroll-mt":W()}],"scroll-mr":[{"scroll-mr":W()}],"scroll-mb":[{"scroll-mb":W()}],"scroll-ml":[{"scroll-ml":W()}],"scroll-p":[{"scroll-p":W()}],"scroll-px":[{"scroll-px":W()}],"scroll-py":[{"scroll-py":W()}],"scroll-ps":[{"scroll-ps":W()}],"scroll-pe":[{"scroll-pe":W()}],"scroll-pt":[{"scroll-pt":W()}],"scroll-pr":[{"scroll-pr":W()}],"scroll-pb":[{"scroll-pb":W()}],"scroll-pl":[{"scroll-pl":W()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_n]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Sa,hl,mw]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},kP=bV(DV),fE=new Proxy(()=>fE,{get:()=>fE});function yn({use:t,slot:e,variant:n,match:r=[],defaults:i}){return({css:s,...o}={})=>({slots:new Proxy({},{get:(l,c)=>({css:d,...p}={})=>{const h=[],b=t,x={...b?.()?.config.defaults,...i,...o,...p};h.push(b?.(x)?.slots[c]?.(x)),h.push(Array.isArray(e[c])?e[c]:[e[c]]);for(const[w,E]of Object.entries(x)){const I=n[w]?.[E];I&&h.push(I)}for(const w of r)Object.entries(w.if).every(([E,I])=>I===x[E])&&h.push(w.then?.[c]);return h.push(s?.[c]),h.push(d),kP(h)}}),config:{defaults:{...t?.()?.config.defaults,...i},values:{...t?.()?.config.defaults,...i,...o}},type:fE()})}const rr=kP;var gw,TT;function IP(){return TT||(TT=1,gw=Object),gw}var yw,OT;function LV(){return OT||(OT=1,yw=Error),yw}var vw,qT;function MV(){return qT||(qT=1,vw=EvalError),vw}var bw,RT;function $V(){return RT||(RT=1,bw=RangeError),bw}var xw,jT;function BV(){return jT||(jT=1,xw=ReferenceError),xw}var _w,AT;function zV(){return AT||(AT=1,_w=SyntaxError),_w}var ww,PT;function CP(){return PT||(PT=1,ww=TypeError),ww}var Sw,FT;function WV(){return FT||(FT=1,Sw=URIError),Sw}var Ew,DT;function UV(){return DT||(DT=1,Ew=Math.abs),Ew}var Nw,LT;function VV(){return LT||(LT=1,Nw=Math.floor),Nw}var kw,MT;function HV(){return MT||(MT=1,kw=Math.max),kw}var Iw,$T;function QV(){return $T||($T=1,Iw=Math.min),Iw}var Cw,BT;function KV(){return BT||(BT=1,Cw=Math.pow),Cw}var Tw,zT;function GV(){return zT||(zT=1,Tw=Math.round),Tw}var Ow,WT;function ZV(){return WT||(WT=1,Ow=Number.isNaN||function(e){return e!==e}),Ow}var qw,UT;function JV(){if(UT)return qw;UT=1;var t=ZV();return qw=function(n){return t(n)||n===0?n:n<0?-1:1},qw}var Rw,VT;function YV(){return VT||(VT=1,Rw=Object.getOwnPropertyDescriptor),Rw}var jw,HT;function TP(){if(HT)return jw;HT=1;var t=YV();if(t)try{t([],"length")}catch{t=null}return jw=t,jw}var Aw,QT;function XV(){if(QT)return Aw;QT=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Aw=t,Aw}var Pw,KT;function OP(){return KT||(KT=1,Pw=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,n);if(l.value!==i||l.enumerable!==!0)return!1}return!0}),Pw}var Fw,GT;function e5(){if(GT)return Fw;GT=1;var t=typeof Symbol<"u"&&Symbol,e=OP();return Fw=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Fw}var Dw,ZT;function qP(){return ZT||(ZT=1,Dw=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Dw}var Lw,JT;function RP(){if(JT)return Lw;JT=1;var t=IP();return Lw=t.getPrototypeOf||null,Lw}var Mw,YT;function t5(){if(YT)return Mw;YT=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(c,d){for(var p=[],h=0;h<c.length;h+=1)p[h]=c[h];for(var b=0;b<d.length;b+=1)p[b+c.length]=d[b];return p},s=function(c,d){for(var p=[],h=d,b=0;h<c.length;h+=1,b+=1)p[b]=c[h];return p},o=function(l,c){for(var d="",p=0;p<l.length;p+=1)d+=l[p],p+1<l.length&&(d+=c);return d};return Mw=function(c){var d=this;if(typeof d!="function"||e.apply(d)!==r)throw new TypeError(t+d);for(var p=s(arguments,1),h,b=function(){if(this instanceof h){var T=d.apply(this,i(p,arguments));return Object(T)===T?T:this}return d.apply(c,i(p,arguments))},x=n(0,d.length-p.length),w=[],E=0;E<x;E++)w[E]="$"+E;if(h=Function("binder","return function ("+o(w,",")+"){ return binder.apply(this,arguments); }")(b),d.prototype){var I=function(){};I.prototype=d.prototype,h.prototype=new I,I.prototype=null}return h},Mw}var $w,XT;function Nb(){if(XT)return $w;XT=1;var t=t5();return $w=Function.prototype.bind||t,$w}var Bw,eO;function q1(){return eO||(eO=1,Bw=Function.prototype.call),Bw}var zw,tO;function jP(){return tO||(tO=1,zw=Function.prototype.apply),zw}var Ww,nO;function n5(){return nO||(nO=1,Ww=typeof Reflect<"u"&&Reflect&&Reflect.apply),Ww}var Uw,rO;function r5(){if(rO)return Uw;rO=1;var t=Nb(),e=jP(),n=q1(),r=n5();return Uw=r||t.call(n,e),Uw}var Vw,iO;function AP(){if(iO)return Vw;iO=1;var t=Nb(),e=CP(),n=q1(),r=r5();return Vw=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(t,n,s)},Vw}var Hw,sO;function i5(){if(sO)return Hw;sO=1;var t=AP(),e=TP(),n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return Hw=r&&typeof r.get=="function"?t([r.get]):typeof s=="function"?function(l){return s(l==null?l:i(l))}:!1,Hw}var Qw,oO;function s5(){if(oO)return Qw;oO=1;var t=qP(),e=RP(),n=i5();return Qw=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:n?function(i){return n(i)}:null,Qw}var Kw,aO;function o5(){if(aO)return Kw;aO=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=Nb();return Kw=n.call(t,e),Kw}var Gw,lO;function a5(){if(lO)return Gw;lO=1;var t,e=IP(),n=LV(),r=MV(),i=$V(),s=BV(),o=zV(),l=CP(),c=WV(),d=UV(),p=VV(),h=HV(),b=QV(),x=KV(),w=GV(),E=JV(),I=Function,T=function(De){try{return I('"use strict"; return ('+De+").constructor;")()}catch{}},O=TP(),q=XV(),A=function(){throw new l},D=O?function(){try{return arguments.callee,A}catch{try{return O(arguments,"callee").get}catch{return A}}}():A,L=e5()(),z=s5(),P=RP(),R=qP(),M=jP(),F=q1(),W={},V=typeof Uint8Array>"u"||!z?t:z(Uint8Array),B={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":L&&z?z([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":W,"%AsyncGenerator%":W,"%AsyncGeneratorFunction%":W,"%AsyncIteratorPrototype%":W,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":I,"%GeneratorFunction%":W,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":L&&z?z(z([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!L||!z?t:z(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":O,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!L||!z?t:z(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":L&&z?z(""[Symbol.iterator]()):t,"%Symbol%":L?Symbol:t,"%SyntaxError%":o,"%ThrowTypeError%":D,"%TypedArray%":V,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":F,"%Function.prototype.apply%":M,"%Object.defineProperty%":q,"%Object.getPrototypeOf%":P,"%Math.abs%":d,"%Math.floor%":p,"%Math.max%":h,"%Math.min%":b,"%Math.pow%":x,"%Math.round%":w,"%Math.sign%":E,"%Reflect.getPrototypeOf%":R};if(z)try{null.error}catch(De){var te=z(z(De));B["%Error.prototype%"]=te}var J=function De(Ze){var Xe;if(Ze==="%AsyncFunction%")Xe=T("async function () {}");else if(Ze==="%GeneratorFunction%")Xe=T("function* () {}");else if(Ze==="%AsyncGeneratorFunction%")Xe=T("async function* () {}");else if(Ze==="%AsyncGenerator%"){var Ue=De("%AsyncGeneratorFunction%");Ue&&(Xe=Ue.prototype)}else if(Ze==="%AsyncIteratorPrototype%"){var ut=De("%AsyncGenerator%");ut&&z&&(Xe=z(ut.prototype))}return B[Ze]=Xe,Xe},le={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},se=Nb(),ne=o5(),oe=se.call(F,Array.prototype.concat),X=se.call(M,Array.prototype.splice),ce=se.call(F,String.prototype.replace),de=se.call(F,String.prototype.slice),ye=se.call(F,RegExp.prototype.exec),_e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ne=/\\(\\)?/g,ze=function(Ze){var Xe=de(Ze,0,1),Ue=de(Ze,-1);if(Xe==="%"&&Ue!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(Ue==="%"&&Xe!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ut=[];return ce(Ze,_e,function(wt,Tt,Ut,nn){ut[ut.length]=Ut?ce(nn,Ne,"$1"):Tt||wt}),ut},qe=function(Ze,Xe){var Ue=Ze,ut;if(ne(le,Ue)&&(ut=le[Ue],Ue="%"+ut[0]+"%"),ne(B,Ue)){var wt=B[Ue];if(wt===W&&(wt=J(Ue)),typeof wt>"u"&&!Xe)throw new l("intrinsic "+Ze+" exists, but is not available. Please file an issue!");return{alias:ut,name:Ue,value:wt}}throw new o("intrinsic "+Ze+" does not exist!")};return Gw=function(Ze,Xe){if(typeof Ze!="string"||Ze.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Xe!="boolean")throw new l('"allowMissing" argument must be a boolean');if(ye(/^%?[^%]*%?$/,Ze)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ue=ze(Ze),ut=Ue.length>0?Ue[0]:"",wt=qe("%"+ut+"%",Xe),Tt=wt.name,Ut=wt.value,nn=!1,xe=wt.alias;xe&&(ut=xe[0],X(Ue,oe([0,1],xe)));for(var ve=1,ke=!0;ve<Ue.length;ve+=1){var Ae=Ue[ve],Ve=de(Ae,0,1),rt=de(Ae,-1);if((Ve==='"'||Ve==="'"||Ve==="`"||rt==='"'||rt==="'"||rt==="`")&&Ve!==rt)throw new o("property names with quotes must have matching quotes");if((Ae==="constructor"||!ke)&&(nn=!0),ut+="."+Ae,Tt="%"+ut+"%",ne(B,Tt))Ut=B[Tt];else if(Ut!=null){if(!(Ae in Ut)){if(!Xe)throw new l("base intrinsic for "+Ze+" exists, but the property is not available.");return}if(O&&ve+1>=Ue.length){var Me=O(Ut,Ae);ke=!!Me,ke&&"get"in Me&&!("originalValue"in Me.get)?Ut=Me.get:Ut=Ut[Ae]}else ke=ne(Ut,Ae),Ut=Ut[Ae];ke&&!nn&&(B[Tt]=Ut)}}return Ut},Gw}var Zw,uO;function l5(){if(uO)return Zw;uO=1;var t=a5(),e=AP(),n=e([t("%String.prototype.indexOf%")]);return Zw=function(i,s){var o=t(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?e([o]):o},Zw}var Jw,cO;function u5(){if(cO)return Jw;cO=1;var t=OP();return Jw=function(){return t()&&!!Symbol.toStringTag},Jw}var Yw,dO;function c5(){if(dO)return Yw;dO=1;var t=l5(),e=t("String.prototype.valueOf"),n=function(l){try{return e(l),!0}catch{return!1}},r=t("Object.prototype.toString"),i="[object String]",s=u5()();return Yw=function(l){return typeof l=="string"?!0:!l||typeof l!="object"?!1:s?n(l):r(l)===i},Yw}var d5=c5();const f5=io(d5),kb=t=>f5(t),p5=(t,e,n={})=>{const r=[];return t.filter((s,o)=>{const l=n.regionLowerCase?s.toLowerCase():s;if(e.includes(l))return r.push({index:o,appLocale:l}),!0;const{isAvailable:c,appLocale:d}=h5(l,e,n);return c&&r.push({index:o,appLocale:n.regionLowerCase?d.toLowerCase():d}),c}).map((s,o)=>!r||r.length===0?s:r[o]?.appLocale)},h5=(t,e,n={})=>{n?.languageOnly||(n.languageOnly=!1);let r=t;return{isAvailable:e.some(s=>{if(!_y()&&!n.languageOnly&&t.split("-")[1]===void 0)return!1;const o=_y()?new Intl.Locale(t).minimize().language:t.split("-")[0],l=_y()?new Intl.Locale(s).minimize().language:s.split("-")[0],c=o===l;return c&&(r=s),c}),appLocale:r}},m5=(t={})=>{t?.regionLowerCase||(t.regionLowerCase=!1);let e=[];return Intl&&"DateTimeFormat"in Intl?e=[Intl.DateTimeFormat().resolvedOptions().locale]:typeof window=="object"&&window?.navigator?.languages&&(e=[...window.navigator.languages]),e.map(n=>t.regionLowerCase?n.toLowerCase():n)},_y=()=>Intl&&"Locale"in Intl,g5=(t,e={})=>{e?.regionLowerCase||(e.regionLowerCase=!1),e?.languageOnly||(e.languageOnly=!1);const n=t.map(r=>{const i=r.split("-");if(e.languageOnly)return i[0];const s=_y()?new Intl.Locale(r).maximize():{language:i[0],script:i.length===3?i[1]:void 0,region:i.length===3?i[2]:i[1]},{language:o,script:l}=s;let{region:c}=s;return e.regionLowerCase&&c&&(c=c.toLowerCase()),i.length>2?`${o}-${l}-${c}`:c?`${o}-${c}`:o});return[...new Set(n)]},y5=(t,e,n={})=>{n.regionLowerCase||(n.regionLowerCase=!1),n.languageOnly||(n.languageOnly=!1);const r=m5(n),i=g5([...r,t],n);return p5(i,e,n)[0]||t},v5=({available:t,fallback:e})=>y5(e,t,{languageOnly:!0});var Xw={exports:{}};const b5={},x5=Object.freeze(Object.defineProperty({__proto__:null,default:b5},Symbol.toStringTag,{value:"Module"})),fO=L$(x5);var pO;function _5(){return pO||(pO=1,function(t){(function(){var e="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",s=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?r=Pu:i&&(r=self);var o=!r.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,l=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",c="0123456789abcdef".split(""),d=[-0x80000000,8388608,32768,128],p=[24,16,8,0],h=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],b=["hex","array","digest","arrayBuffer"],x=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(L){return Object.prototype.toString.call(L)==="[object Array]"}),l&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(L){return typeof L=="object"&&L.buffer&&L.buffer.constructor===ArrayBuffer});var w=function(L,z){return function(P){return new q(z,!0).update(P)[L]()}},E=function(L){var z=w("hex",L);s&&(z=I(z,L)),z.create=function(){return new q(L)},z.update=function(M){return z.create().update(M)};for(var P=0;P<b.length;++P){var R=b[P];z[R]=w(R,L)}return z},I=function(L,z){var P=fO,R=fO.Buffer,M=z?"sha224":"sha256",F;R.from&&!r.JS_SHA256_NO_BUFFER_FROM?F=R.from:F=function(V){return new R(V)};var W=function(V){if(typeof V=="string")return P.createHash(M).update(V,"utf8").digest("hex");if(V==null)throw new Error(e);return V.constructor===ArrayBuffer&&(V=new Uint8Array(V)),Array.isArray(V)||ArrayBuffer.isView(V)||V.constructor===R?P.createHash(M).update(F(V)).digest("hex"):L(V)};return W},T=function(L,z){return function(P,R){return new A(P,z,!0).update(R)[L]()}},O=function(L){var z=T("hex",L);z.create=function(M){return new A(M,L)},z.update=function(M,F){return z.create(M).update(F)};for(var P=0;P<b.length;++P){var R=b[P];z[R]=T(R,L)}return z};function q(L,z){z?(x[0]=x[16]=x[1]=x[2]=x[3]=x[4]=x[5]=x[6]=x[7]=x[8]=x[9]=x[10]=x[11]=x[12]=x[13]=x[14]=x[15]=0,this.blocks=x):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],L?(this.h0=0xc1059ed8,this.h1=0x367cd507,this.h2=0x3070dd17,this.h3=0xf70e5939,this.h4=0xffc00b31,this.h5=0x68581511,this.h6=0x64f98fa7,this.h7=0xbefa4fa4):(this.h0=0x6a09e667,this.h1=0xbb67ae85,this.h2=0x3c6ef372,this.h3=0xa54ff53a,this.h4=0x510e527f,this.h5=0x9b05688c,this.h6=0x1f83d9ab,this.h7=0x5be0cd19),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=L}q.prototype.update=function(L){if(!this.finalized){var z,P=typeof L;if(P!=="string"){if(P==="object"){if(L===null)throw new Error(e);if(l&&L.constructor===ArrayBuffer)L=new Uint8Array(L);else if(!Array.isArray(L)&&(!l||!ArrayBuffer.isView(L)))throw new Error(e)}else throw new Error(e);z=!0}for(var R,M=0,F,W=L.length,V=this.blocks;M<W;){if(this.hashed&&(this.hashed=!1,V[0]=this.block,this.block=V[16]=V[1]=V[2]=V[3]=V[4]=V[5]=V[6]=V[7]=V[8]=V[9]=V[10]=V[11]=V[12]=V[13]=V[14]=V[15]=0),z)for(F=this.start;M<W&&F<64;++M)V[F>>>2]|=L[M]<<p[F++&3];else for(F=this.start;M<W&&F<64;++M)R=L.charCodeAt(M),R<128?V[F>>>2]|=R<<p[F++&3]:R<2048?(V[F>>>2]|=(192|R>>>6)<<p[F++&3],V[F>>>2]|=(128|R&63)<<p[F++&3]):R<55296||R>=57344?(V[F>>>2]|=(224|R>>>12)<<p[F++&3],V[F>>>2]|=(128|R>>>6&63)<<p[F++&3],V[F>>>2]|=(128|R&63)<<p[F++&3]):(R=65536+((R&1023)<<10|L.charCodeAt(++M)&1023),V[F>>>2]|=(240|R>>>18)<<p[F++&3],V[F>>>2]|=(128|R>>>12&63)<<p[F++&3],V[F>>>2]|=(128|R>>>6&63)<<p[F++&3],V[F>>>2]|=(128|R&63)<<p[F++&3]);this.lastByteIndex=F,this.bytes+=F-this.start,F>=64?(this.block=V[16],this.start=F-64,this.hash(),this.hashed=!0):this.start=F}return this.bytes>0xffffffff&&(this.hBytes+=this.bytes/0x100000000<<0,this.bytes=this.bytes%0x100000000),this}},q.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var L=this.blocks,z=this.lastByteIndex;L[16]=this.block,L[z>>>2]|=d[z&3],this.block=L[16],z>=56&&(this.hashed||this.hash(),L[0]=this.block,L[16]=L[1]=L[2]=L[3]=L[4]=L[5]=L[6]=L[7]=L[8]=L[9]=L[10]=L[11]=L[12]=L[13]=L[14]=L[15]=0),L[14]=this.hBytes<<3|this.bytes>>>29,L[15]=this.bytes<<3,this.hash()}},q.prototype.hash=function(){var L=this.h0,z=this.h1,P=this.h2,R=this.h3,M=this.h4,F=this.h5,W=this.h6,V=this.h7,B=this.blocks,te,J,le,se,ne,oe,X,ce,de,ye,_e;for(te=16;te<64;++te)ne=B[te-15],J=(ne>>>7|ne<<25)^(ne>>>18|ne<<14)^ne>>>3,ne=B[te-2],le=(ne>>>17|ne<<15)^(ne>>>19|ne<<13)^ne>>>10,B[te]=B[te-16]+J+B[te-7]+le<<0;for(_e=z&P,te=0;te<64;te+=4)this.first?(this.is224?(ce=300032,ne=B[0]-0x543c9a5b,V=ne-0x8f1a6c7<<0,R=ne+0x170e9b5<<0):(ce=0x2a01a605,ne=B[0]-0xc881298,V=ne-0x5ab00ac6<<0,R=ne+0x8909ae5<<0),this.first=!1):(J=(L>>>2|L<<30)^(L>>>13|L<<19)^(L>>>22|L<<10),le=(M>>>6|M<<26)^(M>>>11|M<<21)^(M>>>25|M<<7),ce=L&z,se=ce^L&P^_e,X=M&F^~M&W,ne=V+le+X+h[te]+B[te],oe=J+se,V=R+ne<<0,R=ne+oe<<0),J=(R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10),le=(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7),de=R&L,se=de^R&z^ce,X=V&M^~V&F,ne=W+le+X+h[te+1]+B[te+1],oe=J+se,W=P+ne<<0,P=ne+oe<<0,J=(P>>>2|P<<30)^(P>>>13|P<<19)^(P>>>22|P<<10),le=(W>>>6|W<<26)^(W>>>11|W<<21)^(W>>>25|W<<7),ye=P&R,se=ye^P&L^de,X=W&V^~W&M,ne=F+le+X+h[te+2]+B[te+2],oe=J+se,F=z+ne<<0,z=ne+oe<<0,J=(z>>>2|z<<30)^(z>>>13|z<<19)^(z>>>22|z<<10),le=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),_e=z&P,se=_e^z&R^ye,X=F&W^~F&V,ne=M+le+X+h[te+3]+B[te+3],oe=J+se,M=L+ne<<0,L=ne+oe<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+L<<0,this.h1=this.h1+z<<0,this.h2=this.h2+P<<0,this.h3=this.h3+R<<0,this.h4=this.h4+M<<0,this.h5=this.h5+F<<0,this.h6=this.h6+W<<0,this.h7=this.h7+V<<0},q.prototype.hex=function(){this.finalize();var L=this.h0,z=this.h1,P=this.h2,R=this.h3,M=this.h4,F=this.h5,W=this.h6,V=this.h7,B=c[L>>>28&15]+c[L>>>24&15]+c[L>>>20&15]+c[L>>>16&15]+c[L>>>12&15]+c[L>>>8&15]+c[L>>>4&15]+c[L&15]+c[z>>>28&15]+c[z>>>24&15]+c[z>>>20&15]+c[z>>>16&15]+c[z>>>12&15]+c[z>>>8&15]+c[z>>>4&15]+c[z&15]+c[P>>>28&15]+c[P>>>24&15]+c[P>>>20&15]+c[P>>>16&15]+c[P>>>12&15]+c[P>>>8&15]+c[P>>>4&15]+c[P&15]+c[R>>>28&15]+c[R>>>24&15]+c[R>>>20&15]+c[R>>>16&15]+c[R>>>12&15]+c[R>>>8&15]+c[R>>>4&15]+c[R&15]+c[M>>>28&15]+c[M>>>24&15]+c[M>>>20&15]+c[M>>>16&15]+c[M>>>12&15]+c[M>>>8&15]+c[M>>>4&15]+c[M&15]+c[F>>>28&15]+c[F>>>24&15]+c[F>>>20&15]+c[F>>>16&15]+c[F>>>12&15]+c[F>>>8&15]+c[F>>>4&15]+c[F&15]+c[W>>>28&15]+c[W>>>24&15]+c[W>>>20&15]+c[W>>>16&15]+c[W>>>12&15]+c[W>>>8&15]+c[W>>>4&15]+c[W&15];return this.is224||(B+=c[V>>>28&15]+c[V>>>24&15]+c[V>>>20&15]+c[V>>>16&15]+c[V>>>12&15]+c[V>>>8&15]+c[V>>>4&15]+c[V&15]),B},q.prototype.toString=q.prototype.hex,q.prototype.digest=function(){this.finalize();var L=this.h0,z=this.h1,P=this.h2,R=this.h3,M=this.h4,F=this.h5,W=this.h6,V=this.h7,B=[L>>>24&255,L>>>16&255,L>>>8&255,L&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255,P>>>24&255,P>>>16&255,P>>>8&255,P&255,R>>>24&255,R>>>16&255,R>>>8&255,R&255,M>>>24&255,M>>>16&255,M>>>8&255,M&255,F>>>24&255,F>>>16&255,F>>>8&255,F&255,W>>>24&255,W>>>16&255,W>>>8&255,W&255];return this.is224||B.push(V>>>24&255,V>>>16&255,V>>>8&255,V&255),B},q.prototype.array=q.prototype.digest,q.prototype.arrayBuffer=function(){this.finalize();var L=new ArrayBuffer(this.is224?28:32),z=new DataView(L);return z.setUint32(0,this.h0),z.setUint32(4,this.h1),z.setUint32(8,this.h2),z.setUint32(12,this.h3),z.setUint32(16,this.h4),z.setUint32(20,this.h5),z.setUint32(24,this.h6),this.is224||z.setUint32(28,this.h7),L};function A(L,z,P){var R,M=typeof L;if(M==="string"){var F=[],W=L.length,V=0,B;for(R=0;R<W;++R)B=L.charCodeAt(R),B<128?F[V++]=B:B<2048?(F[V++]=192|B>>>6,F[V++]=128|B&63):B<55296||B>=57344?(F[V++]=224|B>>>12,F[V++]=128|B>>>6&63,F[V++]=128|B&63):(B=65536+((B&1023)<<10|L.charCodeAt(++R)&1023),F[V++]=240|B>>>18,F[V++]=128|B>>>12&63,F[V++]=128|B>>>6&63,F[V++]=128|B&63);L=F}else if(M==="object"){if(L===null)throw new Error(e);if(l&&L.constructor===ArrayBuffer)L=new Uint8Array(L);else if(!Array.isArray(L)&&(!l||!ArrayBuffer.isView(L)))throw new Error(e)}else throw new Error(e);L.length>64&&(L=new q(z,!0).update(L).array());var te=[],J=[];for(R=0;R<64;++R){var le=L[R]||0;te[R]=92^le,J[R]=54^le}q.call(this,z,P),this.update(J),this.oKeyPad=te,this.inner=!0,this.sharedMemory=P}A.prototype=new q,A.prototype.finalize=function(){if(q.prototype.finalize.call(this),this.inner){this.inner=!1;var L=this.array();q.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(L),q.prototype.finalize.call(this)}};var D=E();D.sha256=D,D.sha224=E(!0),D.sha256.hmac=O(),D.sha224.hmac=O(!0),o?t.exports=D:(r.sha256=D.sha256,r.sha224=D.sha224)})()}(Xw)),Xw.exports}var pE=_5();const w5=pE.sha224,PP=({index:t,key:e,fallback:n})=>t[w5(e)]?.value??t[e]?.value??n??e,S5=({index:t,key:e,fallback:n})=>PP({index:t,key:e,fallback:n}),E5=({index:t,key:e,fallback:n})=>PP({index:t,key:e,fallback:n}),Bl={index:{},push(t){this.index={...this.index,...t}},text:(t,e)=>S5({index:Bl.index,key:t,fallback:e}),rich:(t,e)=>E5({index:Bl.index,key:t,fallback:e})};function Al(t){return typeof t>"u"||t===void 0}function js(t){return typeof t=="string"}function Ib(t){return typeof t=="number"}function pv(t){return typeof t=="boolean"}function R1(t){return t===null}function N5(t){return t instanceof Date}function j1(t){return typeof t=="bigint"}function Fs(t){return typeof t=="function"}function Ho(t){return typeof t=="object"&&t!==null}function G(t){return Object.freeze(t)}function $g(t){return Ma(t)?t:[t]}function Ma(t){return Array.isArray(t)}function Pl(t){return t}const Zn=G({is(t){return t.kind==="AlterTableNode"},create(t){return G({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return G({...t,...e})},cloneWithColumnAlteration(t,e){return G({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),xr=G({is(t){return t.kind==="IdentifierNode"},create(t){return G({kind:"IdentifierNode",name:t})}}),Ca=G({is(t){return t.kind==="CreateIndexNode"},create(t){return G({kind:"CreateIndexNode",name:xr.create(t)})},cloneWith(t,e){return G({...t,...e})},cloneWithColumns(t,e){return G({...t,columns:[...t.columns||[],...e]})}}),FP=G({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return G({kind:"CreateSchemaNode",schema:xr.create(t),...e})},cloneWith(t,e){return G({...t,...e})}}),k5=["preserve rows","delete rows","drop"],_s=G({is(t){return t.kind==="CreateTableNode"},create(t){return G({kind:"CreateTableNode",table:t,columns:G([])})},cloneWithColumn(t,e){return G({...t,columns:G([...t.columns,e])})},cloneWithConstraint(t,e){return G({...t,constraints:t.constraints?G([...t.constraints,e]):G([e])})},cloneWithFrontModifier(t,e){return G({...t,frontModifiers:t.frontModifiers?G([...t.frontModifiers,e]):G([e])})},cloneWithEndModifier(t,e){return G({...t,endModifiers:t.endModifiers?G([...t.endModifiers,e]):G([e])})},cloneWith(t,e){return G({...t,...e})}}),zl=G({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return G({kind:"SchemableIdentifierNode",identifier:xr.create(t)})},createWithSchema(t,e){return G({kind:"SchemableIdentifierNode",schema:xr.create(t),identifier:xr.create(e)})}}),Qp=G({is(t){return t.kind==="DropIndexNode"},create(t,e){return G({kind:"DropIndexNode",name:zl.create(t),...e})},cloneWith(t,e){return G({...t,...e})}}),hE=G({is(t){return t.kind==="DropSchemaNode"},create(t,e){return G({kind:"DropSchemaNode",schema:xr.create(t),...e})},cloneWith(t,e){return G({...t,...e})}}),mE=G({is(t){return t.kind==="DropTableNode"},create(t,e){return G({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return G({...t,...e})}}),Yl=G({is(t){return t.kind==="AliasNode"},create(t,e){return G({kind:"AliasNode",node:t,alias:e})}}),Fl=G({is(t){return t.kind==="TableNode"},create(t){return G({kind:"TableNode",table:zl.create(t)})},createWithSchema(t,e){return G({kind:"TableNode",table:zl.createWithSchema(t,e)})}});function gs(t){return Ho(t)&&Fs(t.toOperationNode)}function I5(t){return Ho(t)&&"expressionType"in t&&gs(t)}function C5(t){return Ho(t)&&"expression"in t&&js(t.alias)&&gs(t)}const Ea=G({is(t){return t.kind==="SelectModifierNode"},create(t,e){return G({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return G({kind:"SelectModifierNode",rawModifier:t})}}),Wl=G({is(t){return t.kind==="AndNode"},create(t,e){return G({kind:"AndNode",left:t,right:e})}}),of=G({is(t){return t.kind==="OrNode"},create(t,e){return G({kind:"OrNode",left:t,right:e})}}),e0=G({is(t){return t.kind==="OnNode"},create(t){return G({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return G({...t,on:e==="And"?Wl.create(t.on,n):of.create(t.on,n)})}}),Kp=G({is(t){return t.kind==="JoinNode"},create(t,e){return G({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return G({kind:"JoinNode",joinType:t,table:e,on:e0.create(n)})},cloneWithOn(t,e){return G({...t,on:t.on?e0.cloneWithOperation(t.on,"And",e):e0.create(e)})}}),Ad=G({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return G({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),T5=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],O5=["+","-","*","/","%","^","&","|","#","<<",">>"],DP=["->","->>"],q5=[...T5,...O5,"&&","||"],R5=["exists","not exists"],j5=["not","-",...R5],A5=[...q5,...DP,...j5,"between","between symmetric"],Ul=G({is(t){return t.kind==="OperatorNode"},create(t){return G({kind:"OperatorNode",operator:t})}});function hO(t){return js(t)&&DP.includes(t)}const Vr=G({is(t){return t.kind==="ColumnNode"},create(t){return G({kind:"ColumnNode",column:xr.create(t)})}}),A1=G({is(t){return t.kind==="SelectAllNode"},create(){return G({kind:"SelectAllNode"})}}),Cb=G({is(t){return t.kind==="ReferenceNode"},create(t,e){return G({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return G({kind:"ReferenceNode",table:t,column:A1.create()})}});class P5{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return zP(this.#e)}}function LP(t){return Ho(t)&&gs(t)&&js(t.dynamicReference)}const gE=G({is(t){return t.kind==="OrderByItemNode"},create(t,e){return G({kind:"OrderByItemNode",orderBy:t,direction:e})}}),wi=G({is(t){return t.kind==="RawNode"},create(t,e){return G({kind:"RawNode",sqlFragments:G(t),parameters:G(e)})},createWithSql(t){return wi.create([t],[])},createWithChild(t){return wi.create(["",""],[t])},createWithChildren(t){return wi.create(new Array(t.length+1).fill(""),t)}});function MP(t){return t==="asc"||t==="desc"}function rm(t){if(t.length===2)return[t0(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>t0(n)):[t0(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function t0(t,e){const n=F5(t);if(gE.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return gE.create(n,$P(e))}function F5(t){if(lm(t))return lc(t);if(LP(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!MP(n))throw new Error(`Invalid order by direction: ${n}`);return gE.create($a(e),$P(n))}return $a(t)}function $P(t){if(t)return t==="asc"||t==="desc"?wi.createWithSql(t):t.toOperationNode()}const hv=G({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return G({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return G({...t,traversal:e})}}),BP=G({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return G({kind:"JSONOperatorChainNode",operator:t,values:G([])})},cloneWithValue(t,e){return G({...t,values:G([...t.values,e])})}}),Gp=G({is(t){return t.kind==="JSONPathNode"},create(t){return G({kind:"JSONPathNode",inOperator:t,pathLegs:G([])})},cloneWithLeg(t,e){return G({...t,pathLegs:G([...t.pathLegs,e])})}});function zP(t){return js(t)?$a(t):t.toOperationNode()}function ch(t){return Ma(t)?t.map(e=>Is(e)):[Is(t)]}function Is(t){return lm(t)?lc(t):zP(t)}function D5(t,e){const n=$a(t);if(hO(e))return hv.create(n,BP.create(Ul.create(e)));const r=e.slice(0,-1);if(hO(r))return hv.create(n,Gp.create(Ul.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function $a(t){const e=".";if(!t.includes(e))return Cb.create(Vr.create(t));const n=t.split(e).map(P1);if(n.length===3)return M5(n);if(n.length===2)return $5(n);throw new Error(`invalid column reference ${t}`)}function L5(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(P1);return Yl.create($a(n),xr.create(r))}else return $a(t)}function WP(t){return Vr.create(t)}function mv(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(P1);if(!MP(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return rm([n,r])[0]}else return WP(t)}function M5(t){const[e,n,r]=t;return Cb.create(Vr.create(r),Fl.createWithSchema(e,n))}function $5(t){const[e,n]=t;return Cb.create(Vr.create(n),Fl.create(e))}function P1(t){return t.trim()}const UP=G({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return G({kind:"PrimitiveValueListNode",values:G([...t])})}}),F1=G({is(t){return t.kind==="ValueListNode"},create(t){return G({kind:"ValueListNode",values:G(t)})}}),ea=G({is(t){return t.kind==="ValueNode"},create(t){return G({kind:"ValueNode",value:t})},createImmediate(t){return G({kind:"ValueNode",value:t,immediate:!0})}});function B5(t){return Ma(t)?z5(t):Zr(t)}function Zr(t){return lm(t)?lc(t):ea.create(t)}function D1(t){return Ib(t)||pv(t)||R1(t)}function L1(t){if(!D1(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return ea.createImmediate(t)}function z5(t){return t.some(lm)?F1.create(t.map(e=>Zr(e))):UP.create(t)}const Pd=G({is(t){return t.kind==="ParensNode"},create(t){return G({kind:"ParensNode",node:t})}});function pi(t){if(t.length===3)return M1(t[0],t[1],t[2]);if(t.length===1)return Zr(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function M1(t,e,n){return W5(e)&&VP(n)?Ad.create(Is(t),yE(e),ea.createImmediate(n)):Ad.create(Is(t),yE(e),B5(n))}function ta(t,e,n){return Ad.create(Is(t),yE(e),Is(n))}function mO(t,e){return gv(Object.entries(t).filter(([,n])=>!Al(n)).map(([n,r])=>M1(n,VP(r)?"is":"=",r)),e)}function gv(t,e,n=!0){const r=e==="and"?Wl.create:of.create;if(t.length===0)return Ad.create(ea.createImmediate(1),Ul.create("="),ea.createImmediate(e==="and"?1:0));let i=gO(t[0]);for(let s=1;s<t.length;++s)i=r(i,gO(t[s]));return t.length>1&&n?Pd.create(i):i}function W5(t){return t==="is"||t==="is not"}function VP(t){return R1(t)||pv(t)}function yE(t){if(js(t)&&A5.includes(t))return Ul.create(t);if(gs(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function gO(t){return gs(t)?t.toOperationNode():t}const Vl=G({is(t){return t.kind==="OrderByNode"},create(t){return G({kind:"OrderByNode",items:G([...t])})},cloneWithItems(t,e){return G({...t,items:G([...t.items,...e])})}}),yO=G({is(t){return t.kind==="PartitionByNode"},create(t){return G({kind:"PartitionByNode",items:G(t)})},cloneWithItems(t,e){return G({...t,items:G([...t.items,...e])})}}),vE=G({is(t){return t.kind==="OverNode"},create(){return G({kind:"OverNode"})},cloneWithOrderByItems(t,e){return G({...t,orderBy:t.orderBy?Vl.cloneWithItems(t.orderBy,e):Vl.create(e)})},cloneWithPartitionByItems(t,e){return G({...t,partitionBy:t.partitionBy?yO.cloneWithItems(t.partitionBy,e):yO.create(e)})}}),yv=G({is(t){return t.kind==="FromNode"},create(t){return G({kind:"FromNode",froms:G(t)})},cloneWithFroms(t,e){return G({...t,froms:G([...t.froms,...e])})}}),vO=G({is(t){return t.kind==="GroupByNode"},create(t){return G({kind:"GroupByNode",items:G(t)})},cloneWithItems(t,e){return G({...t,items:G([...t.items,...e])})}}),bO=G({is(t){return t.kind==="HavingNode"},create(t){return G({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return G({...t,having:e==="And"?Wl.create(t.having,n):of.create(t.having,n)})}}),Gn=G({is(t){return t.kind==="SelectQueryNode"},create(t){return G({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return G({kind:"SelectQueryNode",from:yv.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return G({...t,selections:t.selections?G([...t.selections,...e]):G(e)})},cloneWithDistinctOn(t,e){return G({...t,distinctOn:t.distinctOn?G([...t.distinctOn,...e]):G(e)})},cloneWithFrontModifier(t,e){return G({...t,frontModifiers:t.frontModifiers?G([...t.frontModifiers,e]):G([e])})},cloneWithOrderByItems(t,e){return G({...t,orderBy:t.orderBy?Vl.cloneWithItems(t.orderBy,e):Vl.create(e)})},cloneWithGroupByItems(t,e){return G({...t,groupBy:t.groupBy?vO.cloneWithItems(t.groupBy,e):vO.create(e)})},cloneWithLimit(t,e){return G({...t,limit:e})},cloneWithOffset(t,e){return G({...t,offset:e})},cloneWithFetch(t,e){return G({...t,fetch:e})},cloneWithHaving(t,e){return G({...t,having:t.having?bO.cloneWithOperation(t.having,"And",e):bO.create(e)})},cloneWithSetOperations(t,e){return G({...t,setOperations:t.setOperations?G([...t.setOperations,...e]):G([...e])})},cloneWithoutSelections(t){return G({...t,selections:[]})},cloneWithoutLimit(t){return G({...t,limit:void 0})},cloneWithoutOffset(t){return G({...t,offset:void 0})},cloneWithoutOrderBy(t){return G({...t,orderBy:void 0})},cloneWithoutGroupBy(t){return G({...t,groupBy:void 0})}});function Sn(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}class xd{#e;constructor(e){this.#e=G(e)}on(...e){return new xd({...this.#e,joinNode:Kp.cloneWithOn(this.#e.joinNode,pi(e))})}onRef(e,n,r){return new xd({...this.#e,joinNode:Kp.cloneWithOn(this.#e.joinNode,ta(e,n,r))})}onTrue(){return new xd({...this.#e,joinNode:Kp.cloneWithOn(this.#e.joinNode,wi.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}Sn(xd,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const U5=G({is(t){return t.kind==="PartitionByItemNode"},create(t){return G({kind:"PartitionByItemNode",partitionBy:t})}});function V5(t){return ch(t).map(U5.create)}class dh{#e;constructor(e){this.#e=G(e)}orderBy(e,n){return new dh({overNode:vE.cloneWithOrderByItems(this.#e.overNode,rm([e,n]))})}partitionBy(e){return new dh({overNode:vE.cloneWithPartitionByItems(this.#e.overNode,V5(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}Sn(dh,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const Zp=G({is(t){return t.kind==="SelectionNode"},create(t){return G({kind:"SelectionNode",selection:t})},createSelectAll(){return G({kind:"SelectionNode",selection:A1.create()})},createSelectAllFromTable(t){return G({kind:"SelectionNode",selection:Cb.createSelectAll(t)})}});function Oo(t){return Fs(t)?Oo(t(lf())):Ma(t)?t.map(e=>xO(e)):[xO(t)]}function xO(t){return js(t)?Zp.create(L5(t)):LP(t)?Zp.create(t.toOperationNode()):Zp.create(iF(t))}function na(t){return t?Array.isArray(t)?t.map(_O):[_O(t)]:[Zp.createSelectAll()]}function _O(t){if(js(t))return Zp.createSelectAllFromTable(zr(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const H5=G({is(t){return t.kind==="ValuesNode"},create(t){return G({kind:"ValuesNode",values:G(t)})}}),Q5=G({is(t){return t.kind==="DefaultInsertValueNode"},create(){return G({kind:"DefaultInsertValueNode"})}});function HP(t){const e=Fs(t)?t(lf()):t,n=Ma(e)?e:G([e]);return K5(n)}function K5(t){const e=G5(t);return[G([...e.keys()].map(Vr.create)),H5.create(t.map(n=>Z5(n,e)))]}function G5(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const i of r)!e.has(i)&&n[i]!==void 0&&e.set(i,e.size)}return e}function Z5(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let i=!1;for(const o of n){const l=e.get(o);if(Al(l))continue;const c=t[o];(Al(c)||lm(c))&&(i=!0),r[l]=c}if(n.length<e.size||i){const o=Q5.create();return F1.create(r.map(l=>Al(l)?o:Zr(l)))}return UP.create(r)}const Es=G({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return G({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},createWithoutInto(){return G({kind:"InsertQueryNode"})},cloneWith(t,e){return G({...t,...e})}}),_d=G({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return G({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return G({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return G({...t,from:t.from?yv.cloneWithFroms(t.from,e):yv.create(e)})},cloneWithUpdates(t,e){return G({...t,updates:t.updates?G([...t.updates,...e]):e})},cloneWithLimit(t,e){return G({...t,limit:e})}}),wO=G({is(t){return t.kind==="UsingNode"},create(t){return G({kind:"UsingNode",tables:G(t)})},cloneWithTables(t,e){return G({...t,tables:G([...t.tables,...e])})}}),Ru=G({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return G({kind:"DeleteQueryNode",from:yv.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return G({...t,orderBy:t.orderBy?Vl.cloneWithItems(t.orderBy,e):Vl.create(e)})},cloneWithoutOrderBy(t){return G({...t,orderBy:void 0})},cloneWithLimit(t,e){return G({...t,limit:e})},cloneWithoutLimit(t){return G({...t,limit:void 0})},cloneWithUsing(t,e){return G({...t,using:t.using!==void 0?wO.cloneWithTables(t.using,e):wO.create(e)})}}),ls=G({is(t){return t.kind==="WhereNode"},create(t){return G({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return G({...t,where:e==="And"?Wl.create(t.where,n):of.create(t.where,n)})}}),SO=G({is(t){return t.kind==="ReturningNode"},create(t){return G({kind:"ReturningNode",selections:G(t)})},cloneWithSelections(t,e){return G({...t,selections:t.selections?G([...t.selections,...e]):G(e)})}}),J5=G({is(t){return t.kind==="ExplainNode"},create(t,e){return G({kind:"ExplainNode",format:t,options:e})}}),im=G({is(t){return t.kind==="WhenNode"},create(t){return G({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return G({...t,result:e})}}),us=G({is(t){return t.kind==="MergeQueryNode"},create(t,e){return G({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return G({...t,using:e})},cloneWithWhen(t,e){return G({...t,whens:t.whens?G([...t.whens,e]):G([e])})},cloneWithThen(t,e){return G({...t,whens:t.whens?G([...t.whens.slice(0,-1),im.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}}),EO=G({is(t){return t.kind==="OutputNode"},create(t){return G({kind:"OutputNode",selections:G(t)})},cloneWithSelections(t,e){return G({...t,selections:t.selections?G([...t.selections,...e]):G(e)})}}),Pt=G({is(t){return Gn.is(t)||Es.is(t)||_d.is(t)||Ru.is(t)||us.is(t)},cloneWithEndModifier(t,e){return G({...t,endModifiers:t.endModifiers?G([...t.endModifiers,e]):G([e])})},cloneWithWhere(t,e){return G({...t,where:t.where?ls.cloneWithOperation(t.where,"And",e):ls.create(e)})},cloneWithJoin(t,e){return G({...t,joins:t.joins?G([...t.joins,e]):G([e])})},cloneWithReturning(t,e){return G({...t,returning:t.returning?SO.cloneWithSelections(t.returning,e):SO.create(e)})},cloneWithoutReturning(t){return G({...t,returning:void 0})},cloneWithoutWhere(t){return G({...t,where:void 0})},cloneWithExplain(t,e,n){return G({...t,explain:J5.create(e,n?.toOperationNode())})},cloneWithTop(t,e){return G({...t,top:e})},cloneWithOutput(t,e){return G({...t,output:t.output?EO.cloneWithSelections(t.output,e):EO.create(e)})}}),QP=G({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return G({kind:"ColumnUpdateNode",column:t,value:e})}});function Y5(...t){return t.length===2?[QP.create(Is(t[0]),Zr(t[1]))]:$1(t[0])}function $1(t){const e=Fs(t)?t(lf()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>QP.create(Vr.create(n),Zr(r)))}const X5=G({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return G({kind:"OnDuplicateKeyNode",updates:t})}});class e8{insertId;numInsertedOrUpdatedRows;constructor(e,n){this.insertId=e,this.numInsertedOrUpdatedRows=n}}class sm extends Error{node;constructor(e){super("no result"),this.node=e}}function om(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const ws=G({is(t){return t.kind==="OnConflictNode"},create(){return G({kind:"OnConflictNode"})},cloneWith(t,e){return G({...t,...e})},cloneWithIndexWhere(t,e){return G({...t,indexWhere:t.indexWhere?ls.cloneWithOperation(t.indexWhere,"And",e):ls.create(e)})},cloneWithIndexOrWhere(t,e){return G({...t,indexWhere:t.indexWhere?ls.cloneWithOperation(t.indexWhere,"Or",e):ls.create(e)})},cloneWithUpdateWhere(t,e){return G({...t,updateWhere:t.updateWhere?ls.cloneWithOperation(t.updateWhere,"And",e):ls.create(e)})},cloneWithUpdateOrWhere(t,e){return G({...t,updateWhere:t.updateWhere?ls.cloneWithOperation(t.updateWhere,"Or",e):ls.create(e)})},cloneWithoutIndexWhere(t){return G({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return G({...t,updateWhere:void 0})}});class Vo{#e;constructor(e){this.#e=G(e)}column(e){const n=Vr.create(e);return new Vo({...this.#e,onConflictNode:ws.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?G([...this.#e.onConflictNode.columns,n]):G([n])})})}columns(e){const n=e.map(Vr.create);return new Vo({...this.#e,onConflictNode:ws.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?G([...this.#e.onConflictNode.columns,...n]):G(n)})})}constraint(e){return new Vo({...this.#e,onConflictNode:ws.cloneWith(this.#e.onConflictNode,{constraint:xr.create(e)})})}expression(e){return new Vo({...this.#e,onConflictNode:ws.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Vo({...this.#e,onConflictNode:ws.cloneWithIndexWhere(this.#e.onConflictNode,pi(e))})}whereRef(e,n,r){return new Vo({...this.#e,onConflictNode:ws.cloneWithIndexWhere(this.#e.onConflictNode,ta(e,n,r))})}clearWhere(){return new Vo({...this.#e,onConflictNode:ws.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new KP({...this.#e,onConflictNode:ws.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new wd({...this.#e,onConflictNode:ws.cloneWith(this.#e.onConflictNode,{updates:$1(e)})})}$call(e){return e(this)}}Sn(Vo,"don't await OnConflictBuilder instances.");class KP{#e;constructor(e){this.#e=G(e)}toOperationNode(){return this.#e.onConflictNode}}Sn(KP,"don't await OnConflictDoNothingBuilder instances.");class wd{#e;constructor(e){this.#e=G(e)}where(...e){return new wd({...this.#e,onConflictNode:ws.cloneWithUpdateWhere(this.#e.onConflictNode,pi(e))})}whereRef(e,n,r){return new wd({...this.#e,onConflictNode:ws.cloneWithUpdateWhere(this.#e.onConflictNode,ta(e,n,r))})}clearWhere(){return new wd({...this.#e,onConflictNode:ws.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}Sn(wd,"don't await OnConflictUpdateBuilder instances.");const t8=G({is(t){return t.kind==="TopNode"},create(t,e){return G({kind:"TopNode",expression:t,modifiers:e})}});function af(t,e){if(!Ib(t)&&!j1(t))throw new Error(`Invalid top expression: ${t}`);if(!Al(e)&&!n8(e))throw new Error(`Invalid top modifiers: ${e}`);return t8.create(t,e)}function n8(t){return t==="percent"||t==="with ties"||t==="percent with ties"}class yr{#e;constructor(e){this.#e=G(e)}values(e){const[n,r]=HP(e);return new yr({...this.#e,queryNode:Es.cloneWith(this.#e.queryNode,{columns:n,values:r})})}columns(e){return new yr({...this.#e,queryNode:Es.cloneWith(this.#e.queryNode,{columns:G(e.map(Vr.create))})})}expression(e){return new yr({...this.#e,queryNode:Es.cloneWith(this.#e.queryNode,{values:lc(e)})})}defaultValues(){return new yr({...this.#e,queryNode:Es.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new yr({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new yr({...this.#e,queryNode:Es.cloneWith(this.#e.queryNode,{ignore:!0})})}top(e,n){return new yr({...this.#e,queryNode:Pt.cloneWithTop(this.#e.queryNode,af(e,n))})}onConflict(e){return new yr({...this.#e,queryNode:Es.cloneWith(this.#e.queryNode,{onConflict:e(new Vo({onConflictNode:ws.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new yr({...this.#e,queryNode:Es.cloneWith(this.#e.queryNode,{onDuplicateKey:X5.create($1(e))})})}returning(e){return new yr({...this.#e,queryNode:Pt.cloneWithReturning(this.#e.queryNode,Oo(e))})}returningAll(){return new yr({...this.#e,queryNode:Pt.cloneWithReturning(this.#e.queryNode,na())})}output(e){return new yr({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,Oo(e))})}outputAll(e){return new yr({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,na(e))})}clearReturning(){return new yr({...this.#e,queryNode:Pt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new yr({...this.#e})}$castTo(){return new yr(this.#e)}$narrowType(){return new yr(this.#e)}$assertType(){return new yr(this.#e)}withPlugin(e){return new yr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new e8(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=sm){const n=await this.executeTakeFirst();if(n===void 0)throw om(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new yr({...this.#e,queryNode:Pt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Sn(yr,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class r8{numDeletedRows;constructor(e){this.numDeletedRows=e}}const B1=G({is(t){return t.kind==="LimitNode"},create(t){return G({kind:"LimitNode",limit:t})}});class Kn{#e;constructor(e){this.#e=G(e)}where(...e){return new Kn({...this.#e,queryNode:Pt.cloneWithWhere(this.#e.queryNode,pi(e))})}whereRef(e,n,r){return new Kn({...this.#e,queryNode:Pt.cloneWithWhere(this.#e.queryNode,ta(e,n,r))})}clearWhere(){return new Kn({...this.#e,queryNode:Pt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new Kn({...this.#e,queryNode:Pt.cloneWithTop(this.#e.queryNode,af(e,n))})}using(e){return new Kn({...this.#e,queryNode:Ru.cloneWithUsing(this.#e.queryNode,hh(e))})}innerJoin(...e){return new Kn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("InnerJoin",e))})}leftJoin(...e){return new Kn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("LeftJoin",e))})}rightJoin(...e){return new Kn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("RightJoin",e))})}fullJoin(...e){return new Kn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("FullJoin",e))})}returning(e){return new Kn({...this.#e,queryNode:Pt.cloneWithReturning(this.#e.queryNode,Oo(e))})}returningAll(e){return new Kn({...this.#e,queryNode:Pt.cloneWithReturning(this.#e.queryNode,na(e))})}output(e){return new Kn({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,Oo(e))})}outputAll(e){return new Kn({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,na(e))})}clearReturning(){return new Kn({...this.#e,queryNode:Pt.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new Kn({...this.#e,queryNode:Ru.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new Kn({...this.#e,queryNode:Ru.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(e,n){return new Kn({...this.#e,queryNode:Ru.cloneWithOrderByItems(this.#e.queryNode,rm([e,n]))})}limit(e){return new Kn({...this.#e,queryNode:Ru.cloneWithLimit(this.#e.queryNode,B1.create(Zr(e)))})}modifyEnd(e){return new Kn({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,n){return e?n(this):new Kn({...this.#e})}$castTo(){return new Kn(this.#e)}$narrowType(){return new Kn(this.#e)}$assertType(){return new Kn(this.#e)}withPlugin(e){return new Kn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new r8(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=sm){const n=await this.executeTakeFirst();if(n===void 0)throw om(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Kn({...this.#e,queryNode:Pt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Sn(Kn,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class i8{numUpdatedRows;numChangedRows;constructor(e,n){this.numUpdatedRows=e,this.numChangedRows=n}}class tr{#e;constructor(e){this.#e=G(e)}where(...e){return new tr({...this.#e,queryNode:Pt.cloneWithWhere(this.#e.queryNode,pi(e))})}whereRef(e,n,r){return new tr({...this.#e,queryNode:Pt.cloneWithWhere(this.#e.queryNode,ta(e,n,r))})}clearWhere(){return new tr({...this.#e,queryNode:Pt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new tr({...this.#e,queryNode:Pt.cloneWithTop(this.#e.queryNode,af(e,n))})}from(e){return new tr({...this.#e,queryNode:_d.cloneWithFromItems(this.#e.queryNode,hh(e))})}innerJoin(...e){return new tr({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("InnerJoin",e))})}leftJoin(...e){return new tr({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("LeftJoin",e))})}rightJoin(...e){return new tr({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("RightJoin",e))})}fullJoin(...e){return new tr({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("FullJoin",e))})}limit(e){return new tr({...this.#e,queryNode:_d.cloneWithLimit(this.#e.queryNode,B1.create(Zr(e)))})}set(...e){return new tr({...this.#e,queryNode:_d.cloneWithUpdates(this.#e.queryNode,Y5(...e))})}returning(e){return new tr({...this.#e,queryNode:Pt.cloneWithReturning(this.#e.queryNode,Oo(e))})}returningAll(e){return new tr({...this.#e,queryNode:Pt.cloneWithReturning(this.#e.queryNode,na(e))})}output(e){return new tr({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,Oo(e))})}outputAll(e){return new tr({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,na(e))})}modifyEnd(e){return new tr({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new tr({...this.#e,queryNode:Pt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new tr({...this.#e})}$castTo(){return new tr(this.#e)}$narrowType(){return new tr(this.#e)}$assertType(){return new tr(this.#e)}withPlugin(e){return new tr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new i8(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0),n.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=sm){const n=await this.executeTakeFirst();if(n===void 0)throw om(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new tr({...this.#e,queryNode:Pt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Sn(tr,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const NO=G({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return G({kind:"CommonTableExpressionNameNode",table:Fl.create(t),columns:e?G(e.map(Vr.create)):void 0})}}),vv=G({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return G({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return G({...t,...e})}});class fh{#e;constructor(e){this.#e=G(e)}materialized(){return new fh({...this.#e,node:vv.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new fh({...this.#e,node:vv.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}Sn(fh,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function kO(t,e){const n=e(g8()).toOperationNode();return Fs(t)?t(s8(n)).toOperationNode():vv.create(GP(t),n)}function s8(t){return e=>new fh({node:vv.create(GP(e),t)})}function GP(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(i=>i.trim());return NO.create(n,r)}else return NO.create(t)}const Bg=G({is(t){return t.kind==="WithNode"},create(t,e){return G({kind:"WithNode",expressions:G([t]),...e})},cloneWithExpression(t,e){return G({...t,expressions:G([...t.expressions,e])})}}),IO=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function o8(t){let e="";for(let n=0;n<t;++n)e+=a8();return e}function a8(){return IO[~~(Math.random()*IO.length)]}function Jn(){return new l8}class l8{#e;get queryId(){return this.#e===void 0&&(this.#e=o8(8)),this.#e}}class ZP{nodeStack=[];#e=G({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),G(n)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&G(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:G([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}const u8=G({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});class c8 extends ZP{#e;#t=new Set;#n=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);const n=this.#s(e);for(const s of n)this.#n.add(s);const r=this.#i(e);for(const s of r)this.#t.add(s);const i=super.transformNodeImpl(e);for(const s of r)this.#t.delete(s);for(const s of n)this.#n.delete(s);return i}transformSchemableIdentifier(e){const n=super.transformSchemableIdentifier(e);return n.schema||!this.#t.has(e.identifier.name)?n:{...n,schema:xr.create(this.#e)}}transformReferences(e){const n=super.transformReferences(e);return n.table.table.schema?n:{...n,table:Fl.createWithSchema(this.#e,n.table.table.identifier.name)}}#r(e){return e.kind in u8}#i(e){const n=new Set;if("name"in e&&e.name&&zl.is(e.name)&&this.#a(e.name,n),"from"in e&&e.from)for(const r of e.from.froms)this.#o(r,n);if("into"in e&&e.into&&this.#o(e.into,n),"table"in e&&e.table&&this.#o(e.table,n),"joins"in e&&e.joins)for(const r of e.joins)this.#o(r.table,n);return"using"in e&&e.using&&this.#o(e.using,n),n}#s(e){const n=new Set;return"with"in e&&e.with&&this.#u(e.with,n),n}#o(e,n){const r=Fl.is(e)?e:Yl.is(e)&&Fl.is(e.node)?e.node:null;r&&this.#a(r.table,n)}#a(e,n){const r=e.identifier.name;!this.#t.has(r)&&!this.#n.has(r)&&n.add(r)}#u(e,n){for(const r of e.expressions){const i=r.name.table.table.identifier.name;this.#n.has(i)||n.add(i)}}}class am{#e;constructor(e){this.#e=new c8(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}}const d8=G({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return G({kind:"MatchedNode",not:t,bySource:e})}});function CO(t,e,n){return im.create(gv([d8.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&n?ta(e[0],e[1],e[2]):pi(e)]:[]],"and",!1))}function Jp(t){return js(t)?wi.create([t],[]):gs(t)?t.toOperationNode():t}class TO{#e;#t;#n;constructor(){this.#e=new Promise((e,n)=>{this.#n=n,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#n&&this.#n(e)}}const OO=new Set;function f8(t){OO.has(t)||(OO.add(t),console.log(t))}const p8=G([]);class JP{#e;constructor(e=p8){this.#e=e}get plugins(){return this.#e}transformQuery(e,n){for(const r of this.#e){const i=r.transformQuery({node:e,queryId:n});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const i=await r.executeQuery(e),s=await this.#t(i,n);return h8(i,s),s})}async *stream(e,n,r){const i=new TO,s=new TO;this.provideConnection(async l=>(i.resolve(l),await s.promise)).catch(l=>i.reject(l));const o=await i.promise;try{for await(const l of o.streamQuery(e,n))yield await this.#t(l,r)}finally{s.resolve()}}async #t(e,n){for(const r of this.#e)e=await r.transformResult({result:e,queryId:n});return e}}function h8(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||f8("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class od extends JP{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new od([...this.plugins,e])}withPlugins(e){return new od([...this.plugins,...e])}withPluginAtFront(e){return new od([e,...this.plugins])}withoutPlugins(){return new od([])}}const Tb=new od;class m8{numChangedRows;constructor(e){this.numChangedRows=e}}class $u{#e;constructor(e){this.#e=G(e)}modifyEnd(e){return new $u({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new $u({...this.#e,queryNode:Pt.cloneWithTop(this.#e.queryNode,af(e,n))})}using(...e){return new Cs({...this.#e,queryNode:us.cloneWithUsing(this.#e.queryNode,Fi("Using",e))})}output(e){return new $u({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,Oo(e))})}outputAll(e){return new $u({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,na(e))})}}Sn($u,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Cs{#e;constructor(e){this.#e=G(e)}modifyEnd(e){return new Cs({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new Cs({...this.#e,queryNode:Pt.cloneWithTop(this.#e.queryNode,af(e,n))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,n,r){return this.#t([e,n,r],!0)}#t(e,n){return new bE({...this.#e,queryNode:us.cloneWithWhen(this.#e.queryNode,CO({isMatched:!0},e,n))})}whenNotMatched(){return this.#n([])}whenNotMatchedAnd(...e){return this.#n(e)}whenNotMatchedAndRef(e,n,r){return this.#n([e,n,r],!0)}whenNotMatchedBySource(){return this.#n([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#n(e,!1,!0)}whenNotMatchedBySourceAndRef(e,n,r){return this.#n([e,n,r],!0,!0)}output(e){return new Cs({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,Oo(e))})}outputAll(e){return new Cs({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,na(e))})}#n(e,n=!1,r=!1){const i={...this.#e,queryNode:us.cloneWithWhen(this.#e.queryNode,CO({isMatched:!1,bySource:r},e,n))},s=r?bE:YP;return new s(i)}$call(e){return e(this)}$if(e,n){return e?n(this):new Cs({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId);return e.query.output&&this.#e.executor.adapter.supportsOutput?n.rows:[new m8(n.numAffectedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=sm){const n=await this.executeTakeFirst();if(n===void 0)throw om(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}}Sn(Cs,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class bE{#e;constructor(e){this.#e=G(e)}thenDelete(){return new Cs({...this.#e,queryNode:us.cloneWithThen(this.#e.queryNode,Jp("delete"))})}thenDoNothing(){return new Cs({...this.#e,queryNode:us.cloneWithThen(this.#e.queryNode,Jp("do nothing"))})}thenUpdate(e){return new Cs({...this.#e,queryNode:us.cloneWithThen(this.#e.queryNode,Jp(e(new tr({queryId:this.#e.queryId,executor:Tb,queryNode:_d.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(n=>n.set(...e))}}Sn(bE,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class YP{#e;constructor(e){this.#e=G(e)}thenDoNothing(){return new Cs({...this.#e,queryNode:us.cloneWithThen(this.#e.queryNode,Jp("do nothing"))})}thenInsertValues(e){const[n,r]=HP(e);return new Cs({...this.#e,queryNode:us.cloneWithThen(this.#e.queryNode,Jp(Es.cloneWith(Es.createWithoutInto(),{columns:n,values:r})))})}}Sn(YP,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class kl{#e;constructor(e){this.#e=G(e)}selectFrom(e){return xE({queryId:Jn(),executor:this.#e.executor,queryNode:Gn.createFrom(hh(e),this.#e.withNode)})}selectNoFrom(e){return xE({queryId:Jn(),executor:this.#e.executor,queryNode:Gn.cloneWithSelections(Gn.create(this.#e.withNode),Oo(e))})}insertInto(e){return new yr({queryId:Jn(),executor:this.#e.executor,queryNode:Es.create(zr(e),this.#e.withNode)})}replaceInto(e){return new yr({queryId:Jn(),executor:this.#e.executor,queryNode:Es.create(zr(e),this.#e.withNode,!0)})}deleteFrom(e){return new Kn({queryId:Jn(),executor:this.#e.executor,queryNode:Ru.create(hh(e),this.#e.withNode)})}updateTable(e){return new tr({queryId:Jn(),executor:this.#e.executor,queryNode:_d.create(mh(e),this.#e.withNode)})}mergeInto(e){return new $u({queryId:Jn(),executor:this.#e.executor,queryNode:us.create(sF(e),this.#e.withNode)})}with(e,n){const r=kO(e,n);return new kl({...this.#e,withNode:this.#e.withNode?Bg.cloneWithExpression(this.#e.withNode,r):Bg.create(r)})}withRecursive(e,n){const r=kO(e,n);return new kl({...this.#e,withNode:this.#e.withNode?Bg.cloneWithExpression(this.#e.withNode,r):Bg.create(r,{recursive:!0})})}withPlugin(e){return new kl({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new kl({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new kl({...this.#e,executor:this.#e.executor.withPluginAtFront(new am(e))})}}function g8(){return new kl({executor:Tb})}function y8(t,e){return new xd({joinNode:Kp.create(t,mh(e))})}function v8(){return new dh({overNode:vE.create()})}function Fi(t,e){if(e.length===3)return x8(t,e[0],e[1],e[2]);if(e.length===2)return b8(t,e[0],e[1]);throw new Error("not implemented")}function b8(t,e,n){return n(y8(t,e)).toOperationNode()}function x8(t,e,n,r){return Kp.createWithOn(t,mh(e),ta(n,"=",r))}const _8=G({is(t){return t.kind==="OffsetNode"},create(t){return G({kind:"OffsetNode",offset:t})}}),w8=G({is(t){return t.kind==="GroupByItemNode"},create(t){return G({kind:"GroupByItemNode",groupBy:t})}});function S8(t){return t=Fs(t)?t(lf()):t,ch(t).map(w8.create)}const XP=G({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return G({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function Qc(t,e,n){return Fs(e)&&(e=e(W1())),Ma(e)||(e=[e]),e.map(r=>XP.create(t,lc(r),n))}class nr{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new z1(this,e)}or(...e){return new bv(of.create(this.#e,pi(e)))}and(...e){return new xv(Wl.create(this.#e,pi(e)))}$castTo(){return new nr(this.#e)}$notNull(){return new nr(this.#e)}toOperationNode(){return this.#e}}class z1{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Yl.create(this.#e.toOperationNode(),gs(this.#t)?this.#t.toOperationNode():xr.create(this.#t))}}class bv{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new z1(this,e)}or(...e){return new bv(of.create(this.#e,pi(e)))}$castTo(){return new bv(this.#e)}toOperationNode(){return Pd.create(this.#e)}}class xv{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new z1(this,e)}and(...e){return new xv(Wl.create(this.#e,pi(e)))}$castTo(){return new xv(this.#e)}toOperationNode(){return Pd.create(this.#e)}}const E8={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:ea.create(t),modifier:e}}};function N8(t,e){if(!Ib(t)&&!j1(t))throw new Error(`Invalid fetch row count: ${t}`);if(!k8(e))throw new Error(`Invalid fetch modifier: ${e}`);return E8.create(t,e)}function k8(t){return t==="only"||t==="with ties"}class sn{#e;constructor(e){this.#e=G(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new sn({...this.#e,queryNode:Pt.cloneWithWhere(this.#e.queryNode,pi(e))})}whereRef(e,n,r){return new sn({...this.#e,queryNode:Pt.cloneWithWhere(this.#e.queryNode,ta(e,n,r))})}having(...e){return new sn({...this.#e,queryNode:Gn.cloneWithHaving(this.#e.queryNode,pi(e))})}havingRef(e,n,r){return new sn({...this.#e,queryNode:Gn.cloneWithHaving(this.#e.queryNode,ta(e,n,r))})}select(e){return new sn({...this.#e,queryNode:Gn.cloneWithSelections(this.#e.queryNode,Oo(e))})}distinctOn(e){return new sn({...this.#e,queryNode:Gn.cloneWithDistinctOn(this.#e.queryNode,ch(e))})}modifyFront(e){return new sn({...this.#e,queryNode:Gn.cloneWithFrontModifier(this.#e.queryNode,Ea.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new sn({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,Ea.createWithExpression(e.toOperationNode()))})}distinct(){return new sn({...this.#e,queryNode:Gn.cloneWithFrontModifier(this.#e.queryNode,Ea.create("Distinct"))})}forUpdate(e){return new sn({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,Ea.create("ForUpdate",e?$g(e).map(zr):void 0))})}forShare(e){return new sn({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,Ea.create("ForShare",e?$g(e).map(zr):void 0))})}forKeyShare(e){return new sn({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,Ea.create("ForKeyShare",e?$g(e).map(zr):void 0))})}forNoKeyUpdate(e){return new sn({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,Ea.create("ForNoKeyUpdate",e?$g(e).map(zr):void 0))})}skipLocked(){return new sn({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,Ea.create("SkipLocked"))})}noWait(){return new sn({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,Ea.create("NoWait"))})}selectAll(e){return new sn({...this.#e,queryNode:Gn.cloneWithSelections(this.#e.queryNode,na(e))})}innerJoin(...e){return new sn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("InnerJoin",e))})}leftJoin(...e){return new sn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("LeftJoin",e))})}rightJoin(...e){return new sn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("RightJoin",e))})}fullJoin(...e){return new sn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("FullJoin",e))})}innerJoinLateral(...e){return new sn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("LateralInnerJoin",e))})}leftJoinLateral(...e){return new sn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Fi("LateralLeftJoin",e))})}orderBy(...e){return new sn({...this.#e,queryNode:Gn.cloneWithOrderByItems(this.#e.queryNode,rm(e))})}groupBy(e){return new sn({...this.#e,queryNode:Gn.cloneWithGroupByItems(this.#e.queryNode,S8(e))})}limit(e){return new sn({...this.#e,queryNode:Gn.cloneWithLimit(this.#e.queryNode,B1.create(Zr(e)))})}offset(e){return new sn({...this.#e,queryNode:Gn.cloneWithOffset(this.#e.queryNode,_8.create(Zr(e)))})}fetch(e,n="only"){return new sn({...this.#e,queryNode:Gn.cloneWithFetch(this.#e.queryNode,N8(e,n))})}top(e,n){return new sn({...this.#e,queryNode:Pt.cloneWithTop(this.#e.queryNode,af(e,n))})}union(e){return new sn({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Qc("union",e,!1))})}unionAll(e){return new sn({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Qc("union",e,!0))})}intersect(e){return new sn({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Qc("intersect",e,!1))})}intersectAll(e){return new sn({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Qc("intersect",e,!0))})}except(e){return new sn({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Qc("except",e,!1))})}exceptAll(e){return new sn({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Qc("except",e,!0))})}as(e){return new eF(this,e)}clearSelect(){return new sn({...this.#e,queryNode:Gn.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new sn({...this.#e,queryNode:Pt.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new sn({...this.#e,queryNode:Gn.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new sn({...this.#e,queryNode:Gn.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new sn({...this.#e,queryNode:Gn.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new sn({...this.#e,queryNode:Gn.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new sn({...this.#e})}$castTo(){return new sn(this.#e)}$narrowType(){return new sn(this.#e)}$assertType(){return new sn(this.#e)}$asTuple(){return new nr(this.toOperationNode())}withPlugin(e){return new sn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=sm){const n=await this.executeTakeFirst();if(n===void 0)throw om(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new sn({...this.#e,queryNode:Pt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Sn(sn,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function xE(t){return new sn(t)}class eF{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return Yl.create(this.#e.toOperationNode(),xr.create(this.#t))}}Sn(eF,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Il=G({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return G({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return G({...t,distinct:!0})},cloneWithOrderBy(t,e){return G({...t,orderBy:t.orderBy?Vl.cloneWithItems(t.orderBy,e):Vl.create(e)})},cloneWithFilter(t,e){return G({...t,filter:t.filter?ls.cloneWithOperation(t.filter,"And",e):ls.create(e)})},cloneWithOrFilter(t,e){return G({...t,filter:t.filter?ls.cloneWithOperation(t.filter,"Or",e):ls.create(e)})},cloneWithOver(t,e){return G({...t,over:e})}}),qO=G({is(t){return t.kind==="FunctionNode"},create(t,e){return G({kind:"FunctionNode",func:t,arguments:e})}});class Ys{#e;constructor(e){this.#e=G(e)}get expressionType(){}as(e){return new I8(this,e)}distinct(){return new Ys({...this.#e,aggregateFunctionNode:Il.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(e,n){return new Ys({...this.#e,aggregateFunctionNode:Il.cloneWithOrderBy(this.#e.aggregateFunctionNode,rm([e,n]))})}filterWhere(...e){return new Ys({...this.#e,aggregateFunctionNode:Il.cloneWithFilter(this.#e.aggregateFunctionNode,pi(e))})}filterWhereRef(e,n,r){return new Ys({...this.#e,aggregateFunctionNode:Il.cloneWithFilter(this.#e.aggregateFunctionNode,ta(e,n,r))})}over(e){const n=v8();return new Ys({...this.#e,aggregateFunctionNode:Il.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}$castTo(){return new Ys(this.#e)}$notNull(){return new Ys(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}Sn(Ys,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class I8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Yl.create(this.#e.toOperationNode(),xr.create(this.#t))}}function tF(){const t=(n,r)=>new nr(qO.create(n,ch(r??[]))),e=(n,r)=>new Ys({aggregateFunctionNode:Il.create(n,r?ch(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(...n){return t("coalesce",n)},count(n){return e("count",[n])},countAll(n){return new Ys({aggregateFunctionNode:Il.create("count",na(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])},jsonAgg(n){return new Ys({aggregateFunctionNode:Il.create("json_agg",[js(n)?zr(n):n.toOperationNode()])})},toJson(n){return new nr(qO.create("to_json",[js(n)?zr(n):n.toOperationNode()]))}})}const C8=G({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return G({kind:"UnaryOperationNode",operator:t,operand:e})}});function T8(t,e){return C8.create(Ul.create(t),Is(e))}const Ko=G({is(t){return t.kind==="CaseNode"},create(t){return G({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return G({...t,when:G(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return G({...t,when:t.when?G([...t.when.slice(0,-1),im.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return G({...t,...e})}});class nF{#e;constructor(e){this.#e=G(e)}when(...e){return new rF({...this.#e,node:Ko.cloneWithWhen(this.#e.node,im.create(pi(e)))})}}class rF{#e;constructor(e){this.#e=G(e)}then(e){return new O8({...this.#e,node:Ko.cloneWithThen(this.#e.node,D1(e)?L1(e):Zr(e))})}}class O8{#e;constructor(e){this.#e=G(e)}when(...e){return new rF({...this.#e,node:Ko.cloneWithWhen(this.#e.node,im.create(pi(e)))})}else(e){return new q8({...this.#e,node:Ko.cloneWith(this.#e.node,{else:D1(e)?L1(e):Zr(e)})})}end(){return new nr(Ko.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new nr(Ko.cloneWith(this.#e.node,{isStatement:!0}))}}class q8{#e;constructor(e){this.#e=G(e)}end(){return new nr(Ko.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new nr(Ko.cloneWith(this.#e.node,{isStatement:!0}))}}const RO=G({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return G({kind:"JSONPathLegNode",type:t,value:e})}});class _E{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,n){return hv.is(this.#e)?new ph(hv.cloneWithTraversal(this.#e,Gp.is(this.#e.traversal)?Gp.cloneWithLeg(this.#e.traversal,RO.create(e,n)):BP.cloneWithValue(this.#e.traversal,ea.createImmediate(n)))):new ph(Gp.cloneWithLeg(this.#e,RO.create(e,n)))}}class ph extends _E{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new R8(this,e)}$castTo(){return new ph(this.#e)}$notNull(){return new ph(this.#e)}toOperationNode(){return this.#e}}class R8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Yl.create(this.#e.toOperationNode(),gs(this.#t)?this.#t.toOperationNode():xr.create(this.#t))}}const jO=G({is(t){return t.kind==="TupleNode"},create(t){return G({kind:"TupleNode",values:G(t)})}}),j8=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],A8=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],P8=G({is(t){return t.kind==="DataTypeNode"},create(t){return G({kind:"DataTypeNode",dataType:t})}});function F8(t){return!!(j8.includes(t)||A8.some(e=>e.test(t)))}function Ju(t){if(gs(t))return t.toOperationNode();if(F8(t))return P8.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}const D8=G({is(t){return t.kind==="CastNode"},create(t,e){return G({kind:"CastNode",expression:t,dataType:e})}});function W1(t=Tb){function e(i,s,o){return new nr(M1(i,s,o))}function n(i,s){return new nr(T8(i,s))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(i){return xE({queryId:Jn(),executor:t,queryNode:Gn.createFrom(hh(i))})},case(i){return new nF({node:Ko.create(Al(i)?void 0:Is(i))})},ref(i,s){return Al(s)?new nr($a(i)):new _E(D5(i,s))},jsonPath(){return new _E(Gp.create())},table(i){return new nr(zr(i))},val(i){return new nr(Zr(i))},refTuple(...i){return new nr(jO.create(i.map(Is)))},tuple(...i){return new nr(jO.create(i.map(Zr)))},lit(i){return new nr(L1(i))},unary:n,not(i){return n("not",i)},exists(i){return n("exists",i)},neg(i){return n("-",i)},between(i,s,o){return new nr(Ad.create(Is(i),Ul.create("between"),Wl.create(Zr(s),Zr(o))))},betweenSymmetric(i,s,o){return new nr(Ad.create(Is(i),Ul.create("between symmetric"),Wl.create(Zr(s),Zr(o))))},and(i){return Ma(i)?new nr(gv(i,"and")):new nr(mO(i,"and"))},or(i){return Ma(i)?new nr(gv(i,"or")):new nr(mO(i,"or"))},parens(...i){const s=pi(i);return Pd.is(s)?new nr(s):new nr(Pd.create(s))},cast(i,s){return new nr(D8.create(Is(i),Ju(s)))},withSchema(i){return W1(t.withPluginAtFront(new am(i)))}});return r.fn=tF(),r.eb=r,r}function lf(t){return W1()}function lc(t){if(gs(t))return t.toOperationNode();if(Fs(t))return t(lf()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function iF(t){if(gs(t))return t.toOperationNode();if(Fs(t))return t(lf()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function lm(t){return I5(t)||C5(t)||Fs(t)}function hh(t){return Ma(t)?t.map(e=>mh(e)):[mh(t)]}function mh(t){return js(t)?sF(t):iF(t)}function sF(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(oF);return Yl.create(zr(n),xr.create(r))}else return zr(t)}function zr(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(oF);return Fl.createWithSchema(n,r)}else return Fl.create(t)}function oF(t){return t.trim()}const aF=G({is(t){return t.kind==="AddColumnNode"},create(t){return G({kind:"AddColumnNode",column:t})}}),vr=G({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return G({kind:"ColumnDefinitionNode",column:Vr.create(t),dataType:e})},cloneWithFrontModifier(t,e){return G({...t,frontModifiers:t.frontModifiers?G([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return G({...t,endModifiers:t.endModifiers?G([...t.endModifiers,e]):[e]})},cloneWith(t,e){return G({...t,...e})}}),lF=G({is(t){return t.kind==="DropColumnNode"},create(t){return G({kind:"DropColumnNode",column:Vr.create(t)})}}),uF=G({is(t){return t.kind==="RenameColumnNode"},create(t,e){return G({kind:"RenameColumnNode",column:Vr.create(t),renameTo:Vr.create(e)})}}),U1=G({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return G({kind:"CheckConstraintNode",expression:t,name:e?xr.create(e):void 0})}}),L8=["no action","restrict","cascade","set null","set default"],wy=G({is(t){return t.kind==="ReferencesNode"},create(t,e){return G({kind:"ReferencesNode",table:t,columns:G([...e])})},cloneWithOnDelete(t,e){return G({...t,onDelete:e})},cloneWithOnUpdate(t,e){return G({...t,onUpdate:e})}});function cF(t){return gs(t)?t.toOperationNode():ea.createImmediate(t)}const zg=G({is(t){return t.kind==="GeneratedNode"},create(t){return G({kind:"GeneratedNode",...t})},createWithExpression(t){return G({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return G({...t,...e})}}),M8=G({is(t){return t.kind==="DefaultValueNode"},create(t){return G({kind:"DefaultValueNode",defaultValue:t})}});function _v(t){if(L8.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}class lr{#e;constructor(e){this.#e=e}autoIncrement(){return new lr(vr.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new lr(vr.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new lr(vr.cloneWith(this.#e,{primaryKey:!0}))}references(e){const n=$a(e);if(!n.table||A1.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new lr(vr.cloneWith(this.#e,{references:wy.create(n.table,[n.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new lr(vr.cloneWith(this.#e,{references:wy.cloneWithOnDelete(this.#e.references,_v(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new lr(vr.cloneWith(this.#e,{references:wy.cloneWithOnUpdate(this.#e.references,_v(e))}))}unique(){return new lr(vr.cloneWith(this.#e,{unique:!0}))}notNull(){return new lr(vr.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new lr(vr.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new lr(vr.cloneWith(this.#e,{defaultTo:M8.create(cF(e))}))}check(e){return new lr(vr.cloneWith(this.#e,{check:U1.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new lr(vr.cloneWith(this.#e,{generated:zg.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new lr(vr.cloneWith(this.#e,{generated:zg.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new lr(vr.cloneWith(this.#e,{generated:zg.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new lr(vr.cloneWith(this.#e,{generated:zg.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new lr(vr.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new lr(vr.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new lr(vr.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new lr(vr.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}Sn(lr,"don't await ColumnDefinitionBuilder instances directly.");const dF=G({is(t){return t.kind==="ModifyColumnNode"},create(t){return G({kind:"ModifyColumnNode",column:t})}}),wv=G({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return G({kind:"ForeignKeyConstraintNode",columns:t,references:wy.create(e,n),name:r?xr.create(r):void 0})},cloneWith(t,e){return G({...t,...e})}});class Fd{#e;constructor(e){this.#e=e}onDelete(e){return new Fd(wv.cloneWith(this.#e,{onDelete:_v(e)}))}onUpdate(e){return new Fd(wv.cloneWith(this.#e,{onUpdate:_v(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}}Sn(Fd,"don't await ForeignKeyConstraintBuilder instances directly.");const Sy=G({is(t){return t.kind==="AddConstraintNode"},create(t){return G({kind:"AddConstraintNode",constraint:t})}}),V1=G({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,n){return G({kind:"UniqueConstraintNode",columns:G(t.map(Vr.create)),name:e?xr.create(e):void 0,nullsNotDistinct:n})},cloneWith(t,e){return G({...t,...e})}}),Ey=G({is(t){return t.kind==="DropConstraintNode"},create(t){return G({kind:"DropConstraintNode",constraintName:xr.create(t)})},cloneWith(t,e){return G({...t,...e})}}),hp=G({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return G({kind:"AlterColumnNode",column:Vr.create(t),[e]:n})}});class H1{#e;constructor(e){this.#e=e}setDataType(e){return new nd(hp.create(this.#e,"dataType",Ju(e)))}setDefault(e){return new nd(hp.create(this.#e,"setDefault",cF(e)))}dropDefault(){return new nd(hp.create(this.#e,"dropDefault",!0))}setNotNull(){return new nd(hp.create(this.#e,"setNotNull",!0))}dropNotNull(){return new nd(hp.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}}Sn(H1,"don't await AlterColumnBuilder instances");class nd{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}Sn(nd,"don't await AlteredColumnBuilder instances");class Cu{#e;constructor(e){this.#e=G(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Cu,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class gh{#e;constructor(e){this.#e=G(e)}onDelete(e){return new gh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new gh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Zn.cloneWithTableProps(this.#e.node,{addConstraint:Sy.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(gh,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class Sd{#e;constructor(e){this.#e=G(e)}ifExists(){return new Sd({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{dropConstraint:Ey.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new Sd({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{dropConstraint:Ey.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new Sd({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{dropConstraint:Ey.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Sd,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const fF=G({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return G({kind:"PrimaryKeyConstraintNode",columns:G(t.map(Vr.create)),name:e?xr.create(e):void 0})}}),rd=G({is(t){return t.kind==="AddIndexNode"},create(t){return G({kind:"AddIndexNode",name:xr.create(t)})},cloneWith(t,e){return G({...t,...e})},cloneWithColumns(t,e){return G({...t,columns:[...t.columns||[],...e]})}});class Cl{#e;constructor(e){this.#e=G(e)}unique(){return new Cl({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{addIndex:rd.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new Cl({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{addIndex:rd.cloneWithColumns(this.#e.node.addIndex,[mv(e)])})})}columns(e){return new Cl({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{addIndex:rd.cloneWithColumns(this.#e.node.addIndex,e.map(mv))})})}expression(e){return new Cl({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{addIndex:rd.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new Cl({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{addIndex:rd.cloneWith(this.#e.node.addIndex,{using:wi.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Cl,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class um{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}nullsNotDistinct(){return new um(V1.cloneWith(this.#e,{nullsNotDistinct:!0}))}}Sn(um,"don't await UniqueConstraintNodeBuilder instances directly.");class pF{#e;constructor(e){this.#e=G(e)}renameTo(e){return new Cu({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{renameTo:zr(e)})})}setSchema(e){return new Cu({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{setSchema:xr.create(e)})})}alterColumn(e,n){const r=n(new H1(e));return new eo({...this.#e,node:Zn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new eo({...this.#e,node:Zn.cloneWithColumnAlteration(this.#e.node,lF.create(e))})}renameColumn(e,n){return new eo({...this.#e,node:Zn.cloneWithColumnAlteration(this.#e.node,uF.create(e,n))})}addColumn(e,n,r=Pl){const i=r(new lr(vr.create(e,Ju(n))));return new eo({...this.#e,node:Zn.cloneWithColumnAlteration(this.#e.node,aF.create(i.toOperationNode()))})}modifyColumn(e,n,r=Pl){const i=r(new lr(vr.create(e,Ju(n))));return new eo({...this.#e,node:Zn.cloneWithColumnAlteration(this.#e.node,dF.create(i.toOperationNode()))})}addUniqueConstraint(e,n,r=Pl){const i=r(new um(V1.create(n,e)));return new Cu({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{addConstraint:Sy.create(i.toOperationNode())})})}addCheckConstraint(e,n){return new Cu({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{addConstraint:Sy.create(U1.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,i){return new gh({...this.#e,constraintBuilder:new Fd(wv.create(n.map(Vr.create),zr(r),i.map(Vr.create),e))})}addPrimaryKeyConstraint(e,n){return new Cu({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{addConstraint:Sy.create(fF.create(n,e))})})}dropConstraint(e){return new Sd({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{dropConstraint:Ey.create(e)})})}addIndex(e){return new Cl({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{addIndex:rd.create(e)})})}dropIndex(e){return new Cu({...this.#e,node:Zn.cloneWithTableProps(this.#e.node,{dropIndex:Qp.create(e)})})}$call(e){return e(this)}}Sn(pF,"don't await AlterTableBuilder instances");class eo{#e;constructor(e){this.#e=G(e)}alterColumn(e,n){const r=n(new H1(e));return new eo({...this.#e,node:Zn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new eo({...this.#e,node:Zn.cloneWithColumnAlteration(this.#e.node,lF.create(e))})}renameColumn(e,n){return new eo({...this.#e,node:Zn.cloneWithColumnAlteration(this.#e.node,uF.create(e,n))})}addColumn(e,n,r=Pl){const i=r(new lr(vr.create(e,Ju(n))));return new eo({...this.#e,node:Zn.cloneWithColumnAlteration(this.#e.node,aF.create(i.toOperationNode()))})}modifyColumn(e,n,r=Pl){const i=r(new lr(vr.create(e,Ju(n))));return new eo({...this.#e,node:Zn.cloneWithColumnAlteration(this.#e.node,dF.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(eo,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class hF extends ZP{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class Zs{#e;constructor(e){this.#e=G(e)}ifNotExists(){return new Zs({...this.#e,node:Ca.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new Zs({...this.#e,node:Ca.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new Zs({...this.#e,node:Ca.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new Zs({...this.#e,node:Ca.cloneWith(this.#e.node,{table:zr(e)})})}column(e){return new Zs({...this.#e,node:Ca.cloneWithColumns(this.#e.node,[mv(e)])})}columns(e){return new Zs({...this.#e,node:Ca.cloneWithColumns(this.#e.node,e.map(mv))})}expression(e){return new Zs({...this.#e,node:Ca.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new Zs({...this.#e,node:Ca.cloneWith(this.#e.node,{using:wi.createWithSql(e)})})}where(...e){const n=new hF;return new Zs({...this.#e,node:Pt.cloneWithWhere(this.#e.node,n.transformNode(pi(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Zs,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class Ob{#e;constructor(e){this.#e=G(e)}ifNotExists(){return new Ob({...this.#e,node:FP.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Ob,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function $8(t){if(k5.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}class ss{#e;constructor(e){this.#e=G(e)}temporary(){return new ss({...this.#e,node:_s.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new ss({...this.#e,node:_s.cloneWith(this.#e.node,{onCommit:$8(e)})})}ifNotExists(){return new ss({...this.#e,node:_s.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,n,r=Pl){const i=r(new lr(vr.create(e,Ju(n))));return new ss({...this.#e,node:_s.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new ss({...this.#e,node:_s.cloneWithConstraint(this.#e.node,fF.create(n,e))})}addUniqueConstraint(e,n,r=Pl){const i=r(new um(V1.create(n,e)));return new ss({...this.#e,node:_s.cloneWithConstraint(this.#e.node,i.toOperationNode())})}addCheckConstraint(e,n){return new ss({...this.#e,node:_s.cloneWithConstraint(this.#e.node,U1.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,i,s=Pl){const o=s(new Fd(wv.create(n.map(Vr.create),zr(r),i.map(Vr.create),e)));return new ss({...this.#e,node:_s.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(e){return new ss({...this.#e,node:_s.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new ss({...this.#e,node:_s.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new ss({...this.#e,node:_s.cloneWith(this.#e.node,{selectQuery:lc(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(ss,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class Ed{#e;constructor(e){this.#e=G(e)}on(e){return new Ed({...this.#e,node:Qp.cloneWith(this.#e.node,{table:zr(e)})})}ifExists(){return new Ed({...this.#e,node:Qp.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Ed({...this.#e,node:Qp.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Ed,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class yh{#e;constructor(e){this.#e=G(e)}ifExists(){return new yh({...this.#e,node:hE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new yh({...this.#e,node:hE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(yh,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class vh{#e;constructor(e){this.#e=G(e)}ifExists(){return new vh({...this.#e,node:mE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new vh({...this.#e,node:mE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(vh,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const wl=G({is(t){return t.kind==="CreateViewNode"},create(t){return G({kind:"CreateViewNode",name:zl.create(t)})},cloneWith(t,e){return G({...t,...e})}});class B8{#e=new hF;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class qa{#e;constructor(e){this.#e=G(e)}temporary(){return new qa({...this.#e,node:wl.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new qa({...this.#e,node:wl.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new qa({...this.#e,node:wl.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new qa({...this.#e,node:wl.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new qa({...this.#e,node:wl.cloneWith(this.#e.node,{columns:e.map(WP)})})}as(e){const n=e.withPlugin(new B8).toOperationNode();return new qa({...this.#e,node:wl.cloneWith(this.#e.node,{as:n})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(qa,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Ny=G({is(t){return t.kind==="DropViewNode"},create(t){return G({kind:"DropViewNode",name:zl.create(t)})},cloneWith(t,e){return G({...t,...e})}});class Nd{#e;constructor(e){this.#e=G(e)}materialized(){return new Nd({...this.#e,node:Ny.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new Nd({...this.#e,node:Ny.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Nd({...this.#e,node:Ny.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Nd,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const mF=G({is(t){return t.kind==="CreateTypeNode"},create(t){return G({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return G({...t,enum:F1.create(e.map(n=>ea.createImmediate(n)))})}});class qb{#e;constructor(e){this.#e=G(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new qb({...this.#e,node:mF.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(qb,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const gF=G({is(t){return t.kind==="DropTypeNode"},create(t){return G({kind:"DropTypeNode",name:t})},cloneWith(t,e){return G({...t,...e})}});class Rb{#e;constructor(e){this.#e=G(e)}ifExists(){return new Rb({...this.#e,node:gF.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Rb,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function AO(t){const e=".";if(t.includes(e)){const n=t.split(e).map(z8);if(n.length===2)return zl.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return zl.create(t)}function z8(t){return t.trim()}class Yp{#e;constructor(e){this.#e=e}createTable(e){return new ss({queryId:Jn(),executor:this.#e,node:_s.create(zr(e))})}dropTable(e){return new vh({queryId:Jn(),executor:this.#e,node:mE.create(zr(e))})}createIndex(e){return new Zs({queryId:Jn(),executor:this.#e,node:Ca.create(e)})}dropIndex(e){return new Ed({queryId:Jn(),executor:this.#e,node:Qp.create(e)})}createSchema(e){return new Ob({queryId:Jn(),executor:this.#e,node:FP.create(e)})}dropSchema(e){return new yh({queryId:Jn(),executor:this.#e,node:hE.create(e)})}alterTable(e){return new pF({queryId:Jn(),executor:this.#e,node:Zn.create(zr(e))})}createView(e){return new qa({queryId:Jn(),executor:this.#e,node:wl.create(e)})}dropView(e){return new Nd({queryId:Jn(),executor:this.#e,node:Ny.create(e)})}createType(e){return new qb({queryId:Jn(),executor:this.#e,node:mF.create(AO(e))})}dropType(e){return new Rb({queryId:Jn(),executor:this.#e,node:gF.create(AO(e))})}withPlugin(e){return new Yp(this.#e.withPlugin(e))}withoutPlugins(){return new Yp(this.#e.withoutPlugins())}withSchema(e){return new Yp(this.#e.withPluginAtFront(new am(e)))}}class W8{ref(e){return new P5(e)}}class U8{#e;constructor(e){this.#e=e}async provideConnection(e){const n=await this.#e.acquireConnection();try{return await e(n)}finally{await this.#e.releaseConnection(n)}}}class ju extends JP{#e;#t;#n;constructor(e,n,r,i=[]){super(i),this.#e=e,this.#t=n,this.#n=r}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#n.provideConnection(e)}withPlugins(e){return new ju(this.#e,this.#t,this.#n,[...this.plugins,...e])}withPlugin(e){return new ju(this.#e,this.#t,this.#n,[...this.plugins,e])}withPluginAtFront(e){return new ju(this.#e,this.#t,this.#n,[e,...this.plugins])}withConnectionProvider(e){return new ju(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new ju(this.#e,this.#t,this.#n,[])}}function PO(){return typeof performance<"u"&&Fs(performance.now)?performance.now():Date.now()}class V8{#e;#t;#n;#r;#i;#s=new WeakSet;constructor(e,n){this.#r=!1,this.#e=e,this.#t=n}async init(){if(this.#i)throw new Error("driver has already been destroyed");this.#n||(this.#n=this.#e.init().then(()=>{this.#r=!0}).catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n}async acquireConnection(){if(this.#i)throw new Error("driver has already been destroyed");this.#r||await this.init();const e=await this.#e.acquireConnection();return this.#s.has(e)||(this.#o()&&this.#a(e),this.#s.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,n){return this.#e.beginTransaction(e,n)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#n&&(await this.#n,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#o(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#a(e){const n=e.executeQuery;e.executeQuery=async r=>{let i;const s=PO();try{return await n.call(e,r)}catch(o){throw i=o,await this.#u(o,r,s),o}finally{i||await this.#l(r,s)}}}async #u(e,n,r){await this.#t.error(()=>({level:"error",error:e,query:n,queryDurationMillis:this.#c(r)}))}async #l(e,n){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#c(n)}))}#c(e){return PO()-e}}const H8=()=>{};class yF{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(H8);return this.#t=this.#n(e).finally(()=>{this.#t=void 0}),this.#t}async #n(e){return await e(this.#e)}}const Q8=["read uncommitted","read committed","repeatable read","serializable","snapshot"];G(["query","error"]);class K8{#e;#t;constructor(e){Fs(e)?(this.#t=e,this.#e=G({query:!0,error:!0})):(this.#t=G8,this.#e=G({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}function G8(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function Z8(t){return Ho(t)&&Fs(t.compile)}let Q1=class Ip extends kl{#e;constructor(e){let n,r;if(J8(e))n={executor:e.executor},r={...e};else{const i=e.dialect,s=i.createDriver(),o=i.createQueryCompiler(),l=i.createAdapter(),c=new K8(e.log??[]),d=new V8(s,c),p=new U8(d),h=new ju(o,l,p,e.plugins??[]);n={executor:h},r={config:e,executor:h,dialect:i,driver:d}}super(n),this.#e=G(r)}get schema(){return new Yp(this.#e.executor)}get dynamic(){return new W8}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new nF({node:Ko.create(Al(e)?void 0:lc(e))})}get fn(){return tF()}transaction(){return new jb({...this.#e})}connection(){return new vF({...this.#e})}withPlugin(e){return new Ip({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Ip({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Ip({...this.#e,executor:this.#e.executor.withPluginAtFront(new am(e))})}withTables(){return new Ip({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,n=Jn()){const r=Z8(e)?e.compile():e;return this.getExecutor().executeQuery(r,n)}};class ad extends Q1{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new ad({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new ad({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new ad({...this.#e,executor:this.#e.executor.withPluginAtFront(new am(e))})}withTables(){return new ad({...this.#e})}}function J8(t){return Ho(t)&&Ho(t.config)&&Ho(t.driver)&&Ho(t.executor)&&Ho(t.dialect)}class vF{#e;constructor(e){this.#e=G(e)}async execute(e){return this.#e.executor.provideConnection(async n=>{const r=this.#e.executor.withConnectionProvider(new yF(n)),i=new Q1({...this.#e,executor:r});return await e(i)})}}Sn(vF,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class jb{#e;constructor(e){this.#e=G(e)}setIsolationLevel(e){return new jb({...this.#e,isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=this.#e,i={isolationLevel:n};return Y8(i),this.#e.executor.provideConnection(async s=>{const o=this.#e.executor.withConnectionProvider(new yF(s)),l=new ad({...r,executor:o});try{await this.#e.driver.beginTransaction(s,i);const c=await e(l);return await this.#e.driver.commitTransaction(s),c}catch(c){throw await this.#e.driver.rollbackTransaction(s),c}})}}Sn(jb,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function Y8(t){if(t.isolationLevel&&!Q8.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}class kd{#e;constructor(e){this.#e=G(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new bF(this,e)}$castTo(){return new kd({...this.#e})}$notNull(){return new kd(this.#e)}withPlugin(e){return new kd({...this.#e,plugins:this.#e.plugins!==void 0?G([...this.#e.plugins,e]):G([e])})}toOperationNode(){return this.#n(this.#t())}compile(e){return this.#r(this.#t(e))}async execute(e){const n=this.#t(e);return n.executeQuery(this.#r(n),this.#e.queryId)}#t(e){const n=e!==void 0?e.getExecutor():Tb;return this.#e.plugins!==void 0?n.withPlugins(this.#e.plugins):n}#n(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#r(e){return e.compileQuery(this.#n(e),this.#e.queryId)}}function gl(t){return new kd(t)}Sn(kd,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class bF{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return Yl.create(this.#e.toOperationNode(),gs(this.#t)?this.#t.toOperationNode():xr.create(this.#t))}}Sn(bF,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const Pr=Object.assign((t,...e)=>gl({queryId:Jn(),rawNode:wi.create(t,e?.map(FO)??[])}),{ref(t){return gl({queryId:Jn(),rawNode:wi.createWithChild($a(t))})},val(t){return gl({queryId:Jn(),rawNode:wi.createWithChild(Zr(t))})},value(t){return this.val(t)},table(t){return gl({queryId:Jn(),rawNode:wi.createWithChild(zr(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",gl({queryId:Jn(),rawNode:wi.create(e,t.map(xr.create))})},lit(t){return gl({queryId:Jn(),rawNode:wi.createWithChild(ea.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return gl({queryId:Jn(),rawNode:wi.createWithSql(t)})},join(t,e=Pr`, `){const n=new Array(2*t.length-1),r=e.toOperationNode();for(let i=0;i<t.length;++i)n[2*i]=FO(t[i]),i!==t.length-1&&(n[2*i+1]=r);return gl({queryId:Jn(),rawNode:wi.createWithChildren(n)})}});function FO(t){return gs(t)?t.toOperationNode():Zr(t)}class X8{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=G({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}class eH extends X8{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),G({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){const n=this.parentNode!==void 0&&!Pd.is(this.parentNode)&&!Es.is(this.parentNode)&&!_s.is(this.parentNode)&&!wl.is(this.parentNode)&&!XP.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),n&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,n=", "){const r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(n)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){const n=this.nodeStack.find(Pt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!us.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!us.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){const n=this.nodeStack.find(Pt.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!js(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");const{values:n}=e;for(let r=0;r<n.length;++r)this.appendValue(n[r]),r!==n.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(nH[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){const{sqlFragments:n,parameters:r}=e;for(let i=0;i<n.length;++i)this.append(n[i]),r.length>i&&this.visitNode(r[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){const n=this.nodeStack.find(Pt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!us.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!us.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),pv(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(tH[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return Ul.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(const n of e.pathLegs)this.visitNode(n);this.append("'")}visitJSONPathLeg(e){const n=e.type==="ArrayLocation";this.append(n?"[":"."),this.append(String(e.value)),n&&this.append("]")}visitJSONOperatorChain(e){for(let n=0,r=e.values.length;n<r;n++)n===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[n])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){const n=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper();let i="";for(const s of e)i+=s,s===n?i+=n:s===r&&(i+=r);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(js(e))this.append(`'${e}'`);else if(Ib(e)||pv(e))this.append(e.toString());else if(R1(e))this.append("null");else if(N5(e))this.appendImmediateValue(e.toISOString());else if(j1(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((n,r)=>n.modifier&&r.modifier?DO[n.modifier]-DO[r.modifier]:1),G(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}const tH=G({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),DO=G({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),nH=G({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"});class rH{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}const iH=/"/g;class sH extends eH{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(iH,'""')}visitDefaultInsertValue(e){this.append("null")}}const oH="kysely_migration",aH="kysely_migration_lock";G({__noMigrations__:!0});class lH{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let n=this.#e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(n=n.where("name","!=",oH).where("name","!=",aH));const r=await n.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(e){return{tables:await this.getTables(e)}}async #t(e){const n=this.#e,r=await n.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),i=r.sql?.split(/[\(\),]/)?.find(o=>o.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),s=await n.selectFrom(Pr`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:s.map(o=>({name:o.name,dataType:o.type,isNullable:!o.notnull,isAutoIncrementing:o.name===i,hasDefaultValue:o.dflt_value!=null,comment:void 0}))}}}class uH extends rH{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}const xF={jsonObject(t){const e=Pr.join(Object.entries(t).map(([n,r])=>Pr`${n}, ${r}`));return Pr`json_object(${e})`},jsonGroupArray(t){return Pr`json_group_array(${xF.jsonObject(t)})`}},_F={hash(t){return pE.sha224(t)},verify(t,e){return pE.sha224(t)===e}};var qn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of s)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(qn||(qn={}));var wE;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(wE||(wE={}));const At=qn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ra=t=>{switch(typeof t){case"undefined":return At.undefined;case"string":return At.string;case"number":return isNaN(t)?At.nan:At.number;case"boolean":return At.boolean;case"function":return At.function;case"bigint":return At.bigint;case"symbol":return At.symbol;case"object":return Array.isArray(t)?At.array:t===null?At.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?At.promise:typeof Map<"u"&&t instanceof Map?At.map:typeof Set<"u"&&t instanceof Set?At.set:typeof Date<"u"&&t instanceof Date?At.date:At.object;default:return At.unknown}},yt=qn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),cH=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Rs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return i(this),r}static assert(e){if(!(e instanceof Rs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,qn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Rs.create=t=>new Rs(t);const Dd=(t,e)=>{let n;switch(t.code){case yt.invalid_type:t.received===At.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case yt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,qn.jsonStringifyReplacer)}`;break;case yt.unrecognized_keys:n=`Unrecognized key(s) in object: ${qn.joinValues(t.keys,", ")}`;break;case yt.invalid_union:n="Invalid input";break;case yt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${qn.joinValues(t.options)}`;break;case yt.invalid_enum_value:n=`Invalid enum value. Expected ${qn.joinValues(t.options)}, received '${t.received}'`;break;case yt.invalid_arguments:n="Invalid function arguments";break;case yt.invalid_return_type:n="Invalid function return type";break;case yt.invalid_date:n="Invalid date";break;case yt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:qn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case yt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case yt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case yt.custom:n="Invalid input";break;case yt.invalid_intersection_types:n="Intersection results could not be merged";break;case yt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case yt.not_finite:n="Number must be finite";break;default:n=e.defaultError,qn.assertNever(t)}return{message:n}};let wF=Dd;function dH(t){wF=t}function Sv(){return wF}const Ev=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const c=r.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:e,defaultError:l}).message;return{...i,path:s,message:l}},fH=[];function It(t,e){const n=Sv(),r=Ev({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Dd?void 0:Dd].filter(i=>!!i)});t.common.issues.push(r)}class Ni{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return an;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Ni.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return an;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const an=Object.freeze({status:"aborted"}),ld=t=>({status:"dirty",value:t}),zi=t=>({status:"valid",value:t}),SE=t=>t.status==="aborted",EE=t=>t.status==="dirty",Yu=t=>t.status==="valid",bh=t=>typeof Promise<"u"&&t instanceof Promise;function Nv(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function SF(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Ht;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Ht||(Ht={}));var Cp,Tp;class ra{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const LO=(t,e)=>{if(Yu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Rs(t.common.issues);return this._error=n,this._error}}};function xn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{var c,d;const{message:p}=t;return o.code==="invalid_enum_value"?{message:p??l.defaultError}:typeof l.data>"u"?{message:(c=p??r)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(d=p??n)!==null&&d!==void 0?d:l.defaultError}},description:i}}class En{get description(){return this._def.description}_getType(e){return Ra(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ra(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ni,ctx:{common:e.parent.common,data:e.data,parsedType:Ra(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(bh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ra(e)},s=this._parseSync({data:e,path:i.path,parent:i});return LO(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ra(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return Yu(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>Yu(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ra(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await (bh(i)?i:Promise.resolve(i));return LO(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),l=()=>s.addIssue({code:yt.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new qo({schema:this,typeName:on.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Zo.create(this,this._def)}nullable(){return Gl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Co.create(this)}promise(){return Md.create(this,this._def)}or(e){return Sh.create([this,e],this._def)}and(e){return Eh.create(this,e,this._def)}transform(e){return new qo({...xn(this._def),schema:this,typeName:on.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Th({...xn(this._def),innerType:this,defaultValue:n,typeName:on.ZodDefault})}brand(){return new K1({typeName:on.ZodBranded,type:this,...xn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Oh({...xn(this._def),innerType:this,catchValue:n,typeName:on.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return cm.create(this,e)}readonly(){return qh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const pH=/^c[^\s-]{8,}$/i,hH=/^[0-9a-z]+$/,mH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,gH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,yH=/^[a-z0-9_-]{21}$/i,vH=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,bH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,xH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_H="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let n0;const wH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,SH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,EH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,NH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,kH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,IH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,EF="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",CH=new RegExp(`^${EF}$`);function NF(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function TH(t){return new RegExp(`^${NF(t)}$`)}function kF(t){let e=`${EF}T${NF(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function OH(t,e){return!!((e==="v4"||!e)&&wH.test(t)||(e==="v6"||!e)&&EH.test(t))}function qH(t,e){if(!vH.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function RH(t,e){return!!((e==="v4"||!e)&&SH.test(t)||(e==="v6"||!e)&&NH.test(t))}class ko extends En{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==At.string){const s=this._getOrReturnCtx(e);return It(s,{code:yt.invalid_type,expected:At.string,received:s.parsedType}),an}const r=new Ni;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),It(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),It(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,l=e.data.length<s.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?It(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&It(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")xH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"email",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")n0||(n0=new RegExp(_H,"u")),n0.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"emoji",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")gH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"uuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")yH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"nanoid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")pH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"cuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")hH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"cuid2",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")mH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"ulid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),It(i,{validation:"url",code:yt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"regex",code:yt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),It(i,{code:yt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),It(i,{code:yt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),It(i,{code:yt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?kF(s).test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{code:yt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?CH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{code:yt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?TH(s).test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{code:yt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?bH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"duration",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?OH(e.data,s.version)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"ip",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?qH(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"jwt",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?RH(e.data,s.version)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"cidr",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?kH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"base64",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?IH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"base64url",code:yt.invalid_string,message:s.message}),r.dirty()):qn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:yt.invalid_string,...Ht.errToObj(r)})}_addCheck(e){return new ko({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ht.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ht.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ht.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ht.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ht.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ht.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ht.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ht.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ht.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ht.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ht.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ht.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ht.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Ht.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Ht.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Ht.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ht.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Ht.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ht.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ht.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ht.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ht.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ht.errToObj(n)})}nonempty(e){return this.min(1,Ht.errToObj(e))}trim(){return new ko({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ko({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ko({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ko.create=t=>{var e;return new ko({checks:[],typeName:on.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...xn(t)})};function jH(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Hl extends En{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==At.number){const s=this._getOrReturnCtx(e);return It(s,{code:yt.invalid_type,expected:At.number,received:s.parsedType}),an}let r;const i=new Ni;for(const s of this._def.checks)s.kind==="int"?qn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),It(r,{code:yt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),It(r,{code:yt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),It(r,{code:yt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?jH(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),It(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),It(r,{code:yt.not_finite,message:s.message}),i.dirty()):qn.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ht.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ht.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ht.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ht.toString(n))}setLimit(e,n,r,i){return new Hl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ht.toString(i)}]})}_addCheck(e){return new Hl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ht.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ht.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ht.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ht.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ht.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ht.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ht.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ht.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ht.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&qn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Hl.create=t=>new Hl({checks:[],typeName:on.ZodNumber,coerce:t?.coerce||!1,...xn(t)});class Ql extends En{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==At.bigint)return this._getInvalidInput(e);let r;const i=new Ni;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),It(r,{code:yt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),It(r,{code:yt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),It(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):qn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return It(n,{code:yt.invalid_type,expected:At.bigint,received:n.parsedType}),an}gte(e,n){return this.setLimit("min",e,!0,Ht.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ht.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ht.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ht.toString(n))}setLimit(e,n,r,i){return new Ql({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ht.toString(i)}]})}_addCheck(e){return new Ql({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ht.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ht.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ht.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ht.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ht.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ql.create=t=>{var e;return new Ql({checks:[],typeName:on.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...xn(t)})};class xh extends En{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==At.boolean){const r=this._getOrReturnCtx(e);return It(r,{code:yt.invalid_type,expected:At.boolean,received:r.parsedType}),an}return zi(e.data)}}xh.create=t=>new xh({typeName:on.ZodBoolean,coerce:t?.coerce||!1,...xn(t)});class Xu extends En{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==At.date){const s=this._getOrReturnCtx(e);return It(s,{code:yt.invalid_type,expected:At.date,received:s.parsedType}),an}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return It(s,{code:yt.invalid_date}),an}const r=new Ni;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),It(i,{code:yt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),It(i,{code:yt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):qn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Xu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ht.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ht.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Xu.create=t=>new Xu({checks:[],coerce:t?.coerce||!1,typeName:on.ZodDate,...xn(t)});class kv extends En{_parse(e){if(this._getType(e)!==At.symbol){const r=this._getOrReturnCtx(e);return It(r,{code:yt.invalid_type,expected:At.symbol,received:r.parsedType}),an}return zi(e.data)}}kv.create=t=>new kv({typeName:on.ZodSymbol,...xn(t)});class _h extends En{_parse(e){if(this._getType(e)!==At.undefined){const r=this._getOrReturnCtx(e);return It(r,{code:yt.invalid_type,expected:At.undefined,received:r.parsedType}),an}return zi(e.data)}}_h.create=t=>new _h({typeName:on.ZodUndefined,...xn(t)});class wh extends En{_parse(e){if(this._getType(e)!==At.null){const r=this._getOrReturnCtx(e);return It(r,{code:yt.invalid_type,expected:At.null,received:r.parsedType}),an}return zi(e.data)}}wh.create=t=>new wh({typeName:on.ZodNull,...xn(t)});class Ld extends En{constructor(){super(...arguments),this._any=!0}_parse(e){return zi(e.data)}}Ld.create=t=>new Ld({typeName:on.ZodAny,...xn(t)});class Vu extends En{constructor(){super(...arguments),this._unknown=!0}_parse(e){return zi(e.data)}}Vu.create=t=>new Vu({typeName:on.ZodUnknown,...xn(t)});class Ba extends En{_parse(e){const n=this._getOrReturnCtx(e);return It(n,{code:yt.invalid_type,expected:At.never,received:n.parsedType}),an}}Ba.create=t=>new Ba({typeName:on.ZodNever,...xn(t)});class Iv extends En{_parse(e){if(this._getType(e)!==At.undefined){const r=this._getOrReturnCtx(e);return It(r,{code:yt.invalid_type,expected:At.void,received:r.parsedType}),an}return zi(e.data)}}Iv.create=t=>new Iv({typeName:on.ZodVoid,...xn(t)});class Co extends En{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==At.array)return It(n,{code:yt.invalid_type,expected:At.array,received:n.parsedType}),an;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(It(n,{code:o?yt.too_big:yt.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(It(n,{code:yt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(It(n,{code:yt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new ra(n,o,n.path,l)))).then(o=>Ni.mergeArray(r,o));const s=[...n.data].map((o,l)=>i.type._parseSync(new ra(n,o,n.path,l)));return Ni.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Co({...this._def,minLength:{value:e,message:Ht.toString(n)}})}max(e,n){return new Co({...this._def,maxLength:{value:e,message:Ht.toString(n)}})}length(e,n){return new Co({...this._def,exactLength:{value:e,message:Ht.toString(n)}})}nonempty(e){return this.min(1,e)}}Co.create=(t,e)=>new Co({type:t,minLength:null,maxLength:null,exactLength:null,typeName:on.ZodArray,...xn(e)});function id(t){if(t instanceof Ar){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Zo.create(id(r))}return new Ar({...t._def,shape:()=>e})}else return t instanceof Co?new Co({...t._def,type:id(t.element)}):t instanceof Zo?Zo.create(id(t.unwrap())):t instanceof Gl?Gl.create(id(t.unwrap())):t instanceof ia?ia.create(t.items.map(e=>id(e))):t}class Ar extends En{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=qn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==At.object){const d=this._getOrReturnCtx(e);return It(d,{code:yt.invalid_type,expected:At.object,received:d.parsedType}),an}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ba&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const p=s[d],h=i.data[d];c.push({key:{status:"valid",value:d},value:p._parse(new ra(i,h,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof Ba){const d=this._def.unknownKeys;if(d==="passthrough")for(const p of l)c.push({key:{status:"valid",value:p},value:{status:"valid",value:i.data[p]}});else if(d==="strict")l.length>0&&(It(i,{code:yt.unrecognized_keys,keys:l}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const p of l){const h=i.data[p];c.push({key:{status:"valid",value:p},value:d._parse(new ra(i,h,i.path,p)),alwaysSet:p in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const p of c){const h=await p.key,b=await p.value;d.push({key:h,value:b,alwaysSet:p.alwaysSet})}return d}).then(d=>Ni.mergeObjectSync(r,d)):Ni.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ht.errToObj,new Ar({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,l;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Ht.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new Ar({...this._def,unknownKeys:"strip"})}passthrough(){return new Ar({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ar({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ar({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:on.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ar({...this._def,catchall:e})}pick(e){const n={};return qn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ar({...this._def,shape:()=>n})}omit(e){const n={};return qn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ar({...this._def,shape:()=>n})}deepPartial(){return id(this)}partial(e){const n={};return qn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Ar({...this._def,shape:()=>n})}required(e){const n={};return qn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Zo;)s=s._def.innerType;n[r]=s}}),new Ar({...this._def,shape:()=>n})}keyof(){return IF(qn.objectKeys(this.shape))}}Ar.create=(t,e)=>new Ar({shape:()=>t,unknownKeys:"strip",catchall:Ba.create(),typeName:on.ZodObject,...xn(e)});Ar.strictCreate=(t,e)=>new Ar({shape:()=>t,unknownKeys:"strict",catchall:Ba.create(),typeName:on.ZodObject,...xn(e)});Ar.lazycreate=(t,e)=>new Ar({shape:t,unknownKeys:"strip",catchall:Ba.create(),typeName:on.ZodObject,...xn(e)});class Sh extends En{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new Rs(l.ctx.common.issues));return It(n,{code:yt.invalid_union,unionErrors:o}),an}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const d={...n,common:{...n.common,issues:[]},parent:null},p=c._parseSync({data:n.data,path:n.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(c=>new Rs(c));return It(n,{code:yt.invalid_union,unionErrors:l}),an}}get options(){return this._def.options}}Sh.create=(t,e)=>new Sh({options:t,typeName:on.ZodUnion,...xn(e)});const Ta=t=>t instanceof kh?Ta(t.schema):t instanceof qo?Ta(t.innerType()):t instanceof Ih?[t.value]:t instanceof Kl?t.options:t instanceof Ch?qn.objectValues(t.enum):t instanceof Th?Ta(t._def.innerType):t instanceof _h?[void 0]:t instanceof wh?[null]:t instanceof Zo?[void 0,...Ta(t.unwrap())]:t instanceof Gl?[null,...Ta(t.unwrap())]:t instanceof K1||t instanceof qh?Ta(t.unwrap()):t instanceof Oh?Ta(t._def.innerType):[];class Ab extends En{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==At.object)return It(n,{code:yt.invalid_type,expected:At.object,received:n.parsedType}),an;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(It(n,{code:yt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),an)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=Ta(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,s)}}return new Ab({typeName:on.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...xn(r)})}}function NE(t,e){const n=Ra(t),r=Ra(e);if(t===e)return{valid:!0,data:t};if(n===At.object&&r===At.object){const i=qn.objectKeys(e),s=qn.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of s){const c=NE(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===At.array&&r===At.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],l=e[s],c=NE(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===At.date&&r===At.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Eh extends En{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(SE(s)||SE(o))return an;const l=NE(s.value,o.value);return l.valid?((EE(s)||EE(o))&&n.dirty(),{status:n.value,value:l.data}):(It(r,{code:yt.invalid_intersection_types}),an)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Eh.create=(t,e,n)=>new Eh({left:t,right:e,typeName:on.ZodIntersection,...xn(n)});class ia extends En{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.array)return It(r,{code:yt.invalid_type,expected:At.array,received:r.parsedType}),an;if(r.data.length<this._def.items.length)return It(r,{code:yt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),an;!this._def.rest&&r.data.length>this._def.items.length&&(It(r,{code:yt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new ra(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Ni.mergeArray(n,o)):Ni.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ia({...this._def,rest:e})}}ia.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ia({items:t,typeName:on.ZodTuple,rest:null,...xn(e)})};class Nh extends En{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.object)return It(r,{code:yt.invalid_type,expected:At.object,received:r.parsedType}),an;const i=[],s=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:s._parse(new ra(r,l,r.path,l)),value:o._parse(new ra(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?Ni.mergeObjectAsync(n,i):Ni.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof En?new Nh({keyType:e,valueType:n,typeName:on.ZodRecord,...xn(r)}):new Nh({keyType:ko.create(),valueType:e,typeName:on.ZodRecord,...xn(n)})}}class Cv extends En{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.map)return It(r,{code:yt.invalid_type,expected:At.map,received:r.parsedType}),an;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([l,c],d)=>({key:i._parse(new ra(r,l,r.path,[d,"key"])),value:s._parse(new ra(r,c,r.path,[d,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,p=await c.value;if(d.status==="aborted"||p.status==="aborted")return an;(d.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(d.value,p.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,p=c.value;if(d.status==="aborted"||p.status==="aborted")return an;(d.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(d.value,p.value)}return{status:n.value,value:l}}}}Cv.create=(t,e,n)=>new Cv({valueType:e,keyType:t,typeName:on.ZodMap,...xn(n)});class ec extends En{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.set)return It(r,{code:yt.invalid_type,expected:At.set,received:r.parsedType}),an;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(It(r,{code:yt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(It(r,{code:yt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(c){const d=new Set;for(const p of c){if(p.status==="aborted")return an;p.status==="dirty"&&n.dirty(),d.add(p.value)}return{status:n.value,value:d}}const l=[...r.data.values()].map((c,d)=>s._parse(new ra(r,c,r.path,d)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new ec({...this._def,minSize:{value:e,message:Ht.toString(n)}})}max(e,n){return new ec({...this._def,maxSize:{value:e,message:Ht.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ec.create=(t,e)=>new ec({valueType:t,minSize:null,maxSize:null,typeName:on.ZodSet,...xn(e)});class Id extends En{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==At.function)return It(n,{code:yt.invalid_type,expected:At.function,received:n.parsedType}),an;function r(l,c){return Ev({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Sv(),Dd].filter(d=>!!d),issueData:{code:yt.invalid_arguments,argumentsError:c}})}function i(l,c){return Ev({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Sv(),Dd].filter(d=>!!d),issueData:{code:yt.invalid_return_type,returnTypeError:c}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Md){const l=this;return zi(async function(...c){const d=new Rs([]),p=await l._def.args.parseAsync(c,s).catch(x=>{throw d.addIssue(r(c,x)),d}),h=await Reflect.apply(o,this,p);return await l._def.returns._def.type.parseAsync(h,s).catch(x=>{throw d.addIssue(i(h,x)),d})})}else{const l=this;return zi(function(...c){const d=l._def.args.safeParse(c,s);if(!d.success)throw new Rs([r(c,d.error)]);const p=Reflect.apply(o,this,d.data),h=l._def.returns.safeParse(p,s);if(!h.success)throw new Rs([i(p,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Id({...this._def,args:ia.create(e).rest(Vu.create())})}returns(e){return new Id({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Id({args:e||ia.create([]).rest(Vu.create()),returns:n||Vu.create(),typeName:on.ZodFunction,...xn(r)})}}class kh extends En{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}kh.create=(t,e)=>new kh({getter:t,typeName:on.ZodLazy,...xn(e)});class Ih extends En{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return It(n,{received:n.data,code:yt.invalid_literal,expected:this._def.value}),an}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ih.create=(t,e)=>new Ih({value:t,typeName:on.ZodLiteral,...xn(e)});function IF(t,e){return new Kl({values:t,typeName:on.ZodEnum,...xn(e)})}class Kl extends En{constructor(){super(...arguments),Cp.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return It(n,{expected:qn.joinValues(r),received:n.parsedType,code:yt.invalid_type}),an}if(Nv(this,Cp)||SF(this,Cp,new Set(this._def.values)),!Nv(this,Cp).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return It(n,{received:n.data,code:yt.invalid_enum_value,options:r}),an}return zi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Kl.create(e,{...this._def,...n})}exclude(e,n=this._def){return Kl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Cp=new WeakMap;Kl.create=IF;class Ch extends En{constructor(){super(...arguments),Tp.set(this,void 0)}_parse(e){const n=qn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==At.string&&r.parsedType!==At.number){const i=qn.objectValues(n);return It(r,{expected:qn.joinValues(i),received:r.parsedType,code:yt.invalid_type}),an}if(Nv(this,Tp)||SF(this,Tp,new Set(qn.getValidEnumValues(this._def.values))),!Nv(this,Tp).has(e.data)){const i=qn.objectValues(n);return It(r,{received:r.data,code:yt.invalid_enum_value,options:i}),an}return zi(e.data)}get enum(){return this._def.values}}Tp=new WeakMap;Ch.create=(t,e)=>new Ch({values:t,typeName:on.ZodNativeEnum,...xn(e)});class Md extends En{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==At.promise&&n.common.async===!1)return It(n,{code:yt.invalid_type,expected:At.promise,received:n.parsedType}),an;const r=n.parsedType===At.promise?n.data:Promise.resolve(n.data);return zi(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Md.create=(t,e)=>new Md({type:t,typeName:on.ZodPromise,...xn(e)});class qo extends En{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===on.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{It(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return an;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?an:c.status==="dirty"||n.value==="dirty"?ld(c.value):c});{if(n.value==="aborted")return an;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?an:l.status==="dirty"||n.value==="dirty"?ld(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?an:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?an:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Yu(o))return o;const l=i.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Yu(o)?Promise.resolve(i.transform(o.value,s)).then(l=>({status:n.value,value:l})):o);qn.assertNever(i)}}qo.create=(t,e,n)=>new qo({schema:t,typeName:on.ZodEffects,effect:e,...xn(n)});qo.createWithPreprocess=(t,e,n)=>new qo({schema:e,effect:{type:"preprocess",transform:t},typeName:on.ZodEffects,...xn(n)});class Zo extends En{_parse(e){return this._getType(e)===At.undefined?zi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Zo.create=(t,e)=>new Zo({innerType:t,typeName:on.ZodOptional,...xn(e)});class Gl extends En{_parse(e){return this._getType(e)===At.null?zi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Gl.create=(t,e)=>new Gl({innerType:t,typeName:on.ZodNullable,...xn(e)});class Th extends En{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===At.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Th.create=(t,e)=>new Th({innerType:t,typeName:on.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xn(e)});class Oh extends En{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return bh(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Rs(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Rs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Oh.create=(t,e)=>new Oh({innerType:t,typeName:on.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xn(e)});class Tv extends En{_parse(e){if(this._getType(e)!==At.nan){const r=this._getOrReturnCtx(e);return It(r,{code:yt.invalid_type,expected:At.nan,received:r.parsedType}),an}return{status:"valid",value:e.data}}}Tv.create=t=>new Tv({typeName:on.ZodNaN,...xn(t)});const AH=Symbol("zod_brand");class K1 extends En{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class cm extends En{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?an:s.status==="dirty"?(n.dirty(),ld(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?an:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new cm({in:e,out:n,typeName:on.ZodPipeline})}}class qh extends En{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Yu(i)&&(i.value=Object.freeze(i.value)),i);return bh(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}qh.create=(t,e)=>new qh({innerType:t,typeName:on.ZodReadonly,...xn(e)});function CF(t,e={},n){return t?Ld.create().superRefine((r,i)=>{var s,o;if(!t(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,d=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...d,fatal:c})}}):Ld.create()}const PH={object:Ar.lazycreate};var on;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(on||(on={}));const FH=(t,e={message:`Input not instance of ${t.name}`})=>CF(n=>n instanceof t,e),TF=ko.create,OF=Hl.create,DH=Tv.create,LH=Ql.create,qF=xh.create,MH=Xu.create,$H=kv.create,BH=_h.create,zH=wh.create,WH=Ld.create,UH=Vu.create,VH=Ba.create,HH=Iv.create,QH=Co.create,KH=Ar.create,GH=Ar.strictCreate,ZH=Sh.create,JH=Ab.create,YH=Eh.create,XH=ia.create,e9=Nh.create,t9=Cv.create,n9=ec.create,r9=Id.create,i9=kh.create,s9=Ih.create,o9=Kl.create,a9=Ch.create,l9=Md.create,MO=qo.create,u9=Zo.create,c9=Gl.create,d9=qo.createWithPreprocess,f9=cm.create,p9=()=>TF().optional(),h9=()=>OF().optional(),m9=()=>qF().optional(),g9={string:t=>ko.create({...t,coerce:!0}),number:t=>Hl.create({...t,coerce:!0}),boolean:t=>xh.create({...t,coerce:!0}),bigint:t=>Ql.create({...t,coerce:!0}),date:t=>Xu.create({...t,coerce:!0})},y9=an;var U=Object.freeze({__proto__:null,defaultErrorMap:Dd,setErrorMap:dH,getErrorMap:Sv,makeIssue:Ev,EMPTY_PATH:fH,addIssueToContext:It,ParseStatus:Ni,INVALID:an,DIRTY:ld,OK:zi,isAborted:SE,isDirty:EE,isValid:Yu,isAsync:bh,get util(){return qn},get objectUtil(){return wE},ZodParsedType:At,getParsedType:Ra,ZodType:En,datetimeRegex:kF,ZodString:ko,ZodNumber:Hl,ZodBigInt:Ql,ZodBoolean:xh,ZodDate:Xu,ZodSymbol:kv,ZodUndefined:_h,ZodNull:wh,ZodAny:Ld,ZodUnknown:Vu,ZodNever:Ba,ZodVoid:Iv,ZodArray:Co,ZodObject:Ar,ZodUnion:Sh,ZodDiscriminatedUnion:Ab,ZodIntersection:Eh,ZodTuple:ia,ZodRecord:Nh,ZodMap:Cv,ZodSet:ec,ZodFunction:Id,ZodLazy:kh,ZodLiteral:Ih,ZodEnum:Kl,ZodNativeEnum:Ch,ZodPromise:Md,ZodEffects:qo,ZodTransformer:qo,ZodOptional:Zo,ZodNullable:Gl,ZodDefault:Th,ZodCatch:Oh,ZodNaN:Tv,BRAND:AH,ZodBranded:K1,ZodPipeline:cm,ZodReadonly:qh,custom:CF,Schema:En,ZodSchema:En,late:PH,get ZodFirstPartyTypeKind(){return on},coerce:g9,any:WH,array:QH,bigint:LH,boolean:qF,date:MH,discriminatedUnion:JH,effect:MO,enum:o9,function:r9,instanceof:FH,intersection:YH,lazy:i9,literal:s9,map:t9,nan:DH,nativeEnum:a9,never:VH,null:zH,nullable:c9,number:OF,object:KH,oboolean:m9,onumber:h9,optional:u9,ostring:p9,pipeline:f9,preprocess:d9,promise:l9,record:e9,set:n9,strictObject:GH,string:TF,symbol:$H,transformer:MO,tuple:XH,undefined:BH,union:ZH,unknown:UH,void:HH,NEVER:y9,ZodIssueCode:yt,quotelessJson:cH,ZodError:Rs});const v9=U.object({page:U.number().gte(0,"Page must be greater than zero"),size:U.number().gte(1,"Page size must be greater than one to get any data")}),Wi=U.object({id:U.string().min(1)}),G1=U.object({message:U.string()}),Ui=U.object({id:U.string().optional(),idIn:U.array(U.string()).optional(),fulltext:U.string().optional()}),b9=U.enum(["asc","desc"]),Ro=()=>U.union([U.boolean(),U.number().int().refine(t=>t===0||t===1).transform(t=>typeof t=="boolean"?t:t===1)]),sa=()=>U.union([U.number(),U.string().transform(t=>parseFloat(t)).refine(t=>!isNaN(t))]),Xp=()=>U.union([U.number().int(),U.string().transform(t=>parseInt(t,10)).refine(t=>!isNaN(t))]),Bi=t=>U.string().transform(e=>JSON.parse(e)).refine(e=>Array.isArray(e)).transform(e=>U.array(t).parse(e)),kE=new Proxy(()=>kE,{get:()=>kE}),Vi=({entity:t,shape:e,filter:n,sort:r})=>{const i=kE();return{entity:t,"~entity":i,"~entity-array":[],"~entity-partial-exclude-id":i,shape:e,"~shape":i,"~shape-partial":i,filter:n,"~filter":i,sort:U.array(U.object({name:U.enum(r),sort:b9})),"~sort":i,"~sort-keyof":i}},yl=(t,e)=>Array.from({length:e-t+1},(n,r)=>r+t),x9=({page:t,total:e,siblings:n=1,boundaries:r=1})=>{const i=Math.max(Math.trunc(e),0);if(n*2+3+r*2>=i)return{type:"simple",page:t,total:e,pages:yl(1,i),start:[],end:[]};const o=Math.max(t-n,r),l=Math.min(t+n,i-r),c=o>r+2,d=l<i-(r+1);return!c&&d?{type:"end",page:t,total:e,start:[],pages:yl(1,n*2+r+2),end:yl(e-(r-1),i)}:c&&!d?{type:"start",page:t,total:e,start:yl(1,r),pages:yl(e-(r+1+2*n),i),end:[]}:{type:"both",page:t,total:e,start:yl(1,r),pages:yl(o,l),end:yl(i-r+1,i)}};var Kc={},Na={},ar={},vl={},$O;function RF(){if($O)return vl;$O=1,Object.defineProperty(vl,"__esModule",{value:!0}),vl.anumber=t,vl.abytes=n,vl.ahash=r,vl.aexists=i,vl.aoutput=s;function t(o){if(!Number.isSafeInteger(o)||o<0)throw new Error("positive integer expected, got "+o)}function e(o){return o instanceof Uint8Array||ArrayBuffer.isView(o)&&o.constructor.name==="Uint8Array"}function n(o,...l){if(!e(o))throw new Error("Uint8Array expected");if(l.length>0&&!l.includes(o.length))throw new Error("Uint8Array expected of length "+l+", got length="+o.length)}function r(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(o.outputLen),t(o.blockLen)}function i(o,l=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(l&&o.finished)throw new Error("Hash#digest() has already been called")}function s(o,l){n(o);const c=l.outputLen;if(o.length<c)throw new Error("digestInto() expects output buffer of length at least "+c)}return vl}var pn={},BO;function _9(){if(BO)return pn;BO=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.add5L=pn.add5H=pn.add4H=pn.add4L=pn.add3H=pn.add3L=pn.rotlBL=pn.rotlBH=pn.rotlSL=pn.rotlSH=pn.rotr32L=pn.rotr32H=pn.rotrBL=pn.rotrBH=pn.rotrSL=pn.rotrSH=pn.shrSL=pn.shrSH=pn.toBig=void 0,pn.fromBig=n,pn.split=r,pn.add=T;const t=BigInt(2**32-1),e=BigInt(32);function n(R,M=!1){return M?{h:Number(R&t),l:Number(R>>e&t)}:{h:Number(R>>e&t)|0,l:Number(R&t)|0}}function r(R,M=!1){let F=new Uint32Array(R.length),W=new Uint32Array(R.length);for(let V=0;V<R.length;V++){const{h:B,l:te}=n(R[V],M);[F[V],W[V]]=[B,te]}return[F,W]}const i=(R,M)=>BigInt(R>>>0)<<e|BigInt(M>>>0);pn.toBig=i;const s=(R,M,F)=>R>>>F;pn.shrSH=s;const o=(R,M,F)=>R<<32-F|M>>>F;pn.shrSL=o;const l=(R,M,F)=>R>>>F|M<<32-F;pn.rotrSH=l;const c=(R,M,F)=>R<<32-F|M>>>F;pn.rotrSL=c;const d=(R,M,F)=>R<<64-F|M>>>F-32;pn.rotrBH=d;const p=(R,M,F)=>R>>>F-32|M<<64-F;pn.rotrBL=p;const h=(R,M)=>M;pn.rotr32H=h;const b=(R,M)=>R;pn.rotr32L=b;const x=(R,M,F)=>R<<F|M>>>32-F;pn.rotlSH=x;const w=(R,M,F)=>M<<F|R>>>32-F;pn.rotlSL=w;const E=(R,M,F)=>M<<F-32|R>>>64-F;pn.rotlBH=E;const I=(R,M,F)=>R<<F-32|M>>>64-F;pn.rotlBL=I;function T(R,M,F,W){const V=(M>>>0)+(W>>>0);return{h:R+F+(V/2**32|0)|0,l:V|0}}const O=(R,M,F)=>(R>>>0)+(M>>>0)+(F>>>0);pn.add3L=O;const q=(R,M,F,W)=>M+F+W+(R/2**32|0)|0;pn.add3H=q;const A=(R,M,F,W)=>(R>>>0)+(M>>>0)+(F>>>0)+(W>>>0);pn.add4L=A;const D=(R,M,F,W,V)=>M+F+W+V+(R/2**32|0)|0;pn.add4H=D;const L=(R,M,F,W,V)=>(R>>>0)+(M>>>0)+(F>>>0)+(W>>>0)+(V>>>0);pn.add5L=L;const z=(R,M,F,W,V,B)=>M+F+W+V+B+(R/2**32|0)|0;pn.add5H=z;const P={fromBig:n,split:r,toBig:i,shrSH:s,shrSL:o,rotrSH:l,rotrSL:c,rotrBH:d,rotrBL:p,rotr32H:h,rotr32L:b,rotlSH:x,rotlSL:w,rotlBH:E,rotlBL:I,add:T,add3L:O,add3H:q,add4L:A,add4H:D,add5H:z,add5L:L};return pn.default=P,pn}var r0={},mp={},zO;function w9(){return zO||(zO=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.crypto=void 0,mp.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),mp}var WO;function S9(){return WO||(WO=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=r,t.u8=i,t.u32=s,t.createView=o,t.rotr=l,t.rotl=c,t.byteSwap=d,t.byteSwap32=p,t.bytesToHex=b,t.hexToBytes=E,t.asyncLoop=T,t.utf8ToBytes=O,t.toBytes=q,t.concatBytes=A,t.checkOpts=L,t.wrapConstructor=z,t.wrapConstructorWithOpts=P,t.wrapXOFConstructorWithOpts=R,t.randomBytes=M;const e=w9(),n=RF();function r(F){return F instanceof Uint8Array||ArrayBuffer.isView(F)&&F.constructor.name==="Uint8Array"}function i(F){return new Uint8Array(F.buffer,F.byteOffset,F.byteLength)}function s(F){return new Uint32Array(F.buffer,F.byteOffset,Math.floor(F.byteLength/4))}function o(F){return new DataView(F.buffer,F.byteOffset,F.byteLength)}function l(F,W){return F<<32-W|F>>>W}function c(F,W){return F<<W|F>>>32-W>>>0}t.isLE=new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]===68;function d(F){return F<<24&0xff000000|F<<8&0xff0000|F>>>8&65280|F>>>24&255}t.byteSwapIfBE=t.isLE?F=>F:F=>d(F);function p(F){for(let W=0;W<F.length;W++)F[W]=d(F[W])}const h=Array.from({length:256},(F,W)=>W.toString(16).padStart(2,"0"));function b(F){(0,n.abytes)(F);let W="";for(let V=0;V<F.length;V++)W+=h[F[V]];return W}const x={_0:48,_9:57,A:65,F:70,a:97,f:102};function w(F){if(F>=x._0&&F<=x._9)return F-x._0;if(F>=x.A&&F<=x.F)return F-(x.A-10);if(F>=x.a&&F<=x.f)return F-(x.a-10)}function E(F){if(typeof F!="string")throw new Error("hex string expected, got "+typeof F);const W=F.length,V=W/2;if(W%2)throw new Error("hex string expected, got unpadded hex of length "+W);const B=new Uint8Array(V);for(let te=0,J=0;te<V;te++,J+=2){const le=w(F.charCodeAt(J)),se=w(F.charCodeAt(J+1));if(le===void 0||se===void 0){const ne=F[J]+F[J+1];throw new Error('hex string expected, got non-hex character "'+ne+'" at index '+J)}B[te]=le*16+se}return B}const I=async()=>{};t.nextTick=I;async function T(F,W,V){let B=Date.now();for(let te=0;te<F;te++){V(te);const J=Date.now()-B;J>=0&&J<W||(await (0,t.nextTick)(),B+=J)}}function O(F){if(typeof F!="string")throw new Error("utf8ToBytes expected string, got "+typeof F);return new Uint8Array(new TextEncoder().encode(F))}function q(F){return typeof F=="string"&&(F=O(F)),(0,n.abytes)(F),F}function A(...F){let W=0;for(let B=0;B<F.length;B++){const te=F[B];(0,n.abytes)(te),W+=te.length}const V=new Uint8Array(W);for(let B=0,te=0;B<F.length;B++){const J=F[B];V.set(J,te),te+=J.length}return V}class D{clone(){return this._cloneInto()}}t.Hash=D;function L(F,W){if(W!==void 0&&{}.toString.call(W)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(F,W)}function z(F){const W=B=>F().update(q(B)).digest(),V=F();return W.outputLen=V.outputLen,W.blockLen=V.blockLen,W.create=()=>F(),W}function P(F){const W=(B,te)=>F(te).update(q(B)).digest(),V=F({});return W.outputLen=V.outputLen,W.blockLen=V.blockLen,W.create=B=>F(B),W}function R(F){const W=(B,te)=>F(te).update(q(B)).digest(),V=F({});return W.outputLen=V.outputLen,W.blockLen=V.blockLen,W.create=B=>F(B),W}function M(F=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(F));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(F);throw new Error("crypto.getRandomValues must be defined")}}(r0)),r0}var UO;function E9(){if(UO)return ar;UO=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.shake256=ar.shake128=ar.keccak_512=ar.keccak_384=ar.keccak_256=ar.keccak_224=ar.sha3_512=ar.sha3_384=ar.sha3_256=ar.sha3_224=ar.Keccak=void 0,ar.keccakP=I;const t=RF(),e=_9(),n=S9(),r=[],i=[],s=[],o=BigInt(0),l=BigInt(1),c=BigInt(2),d=BigInt(7),p=BigInt(256),h=BigInt(113);for(let A=0,D=l,L=1,z=0;A<24;A++){[L,z]=[z,(2*L+3*z)%5],r.push(2*(5*z+L)),i.push((A+1)*(A+2)/2%64);let P=o;for(let R=0;R<7;R++)D=(D<<l^(D>>d)*h)%p,D&c&&(P^=l<<(l<<BigInt(R))-l);s.push(P)}const[b,x]=(0,e.split)(s,!0),w=(A,D,L)=>L>32?(0,e.rotlBH)(A,D,L):(0,e.rotlSH)(A,D,L),E=(A,D,L)=>L>32?(0,e.rotlBL)(A,D,L):(0,e.rotlSL)(A,D,L);function I(A,D=24){const L=new Uint32Array(10);for(let z=24-D;z<24;z++){for(let M=0;M<10;M++)L[M]=A[M]^A[M+10]^A[M+20]^A[M+30]^A[M+40];for(let M=0;M<10;M+=2){const F=(M+8)%10,W=(M+2)%10,V=L[W],B=L[W+1],te=w(V,B,1)^L[F],J=E(V,B,1)^L[F+1];for(let le=0;le<50;le+=10)A[M+le]^=te,A[M+le+1]^=J}let P=A[2],R=A[3];for(let M=0;M<24;M++){const F=i[M],W=w(P,R,F),V=E(P,R,F),B=r[M];P=A[B],R=A[B+1],A[B]=W,A[B+1]=V}for(let M=0;M<50;M+=10){for(let F=0;F<10;F++)L[F]=A[M+F];for(let F=0;F<10;F++)A[M+F]^=~L[(F+2)%10]&L[(F+4)%10]}A[0]^=b[z],A[1]^=x[z]}L.fill(0)}class T extends n.Hash{constructor(D,L,z,P=!1,R=24){if(super(),this.blockLen=D,this.suffix=L,this.outputLen=z,this.enableXOF=P,this.rounds=R,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,t.anumber)(z),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,n.u32)(this.state)}keccak(){n.isLE||(0,n.byteSwap32)(this.state32),I(this.state32,this.rounds),n.isLE||(0,n.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(D){(0,t.aexists)(this);const{blockLen:L,state:z}=this;D=(0,n.toBytes)(D);const P=D.length;for(let R=0;R<P;){const M=Math.min(L-this.pos,P-R);for(let F=0;F<M;F++)z[this.pos++]^=D[R++];this.pos===L&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:D,suffix:L,pos:z,blockLen:P}=this;D[z]^=L,L&128&&z===P-1&&this.keccak(),D[P-1]^=128,this.keccak()}writeInto(D){(0,t.aexists)(this,!1),(0,t.abytes)(D),this.finish();const L=this.state,{blockLen:z}=this;for(let P=0,R=D.length;P<R;){this.posOut>=z&&this.keccak();const M=Math.min(z-this.posOut,R-P);D.set(L.subarray(this.posOut,this.posOut+M),P),this.posOut+=M,P+=M}return D}xofInto(D){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(D)}xof(D){return(0,t.anumber)(D),this.xofInto(new Uint8Array(D))}digestInto(D){if((0,t.aoutput)(D,this),this.finished)throw new Error("digest() was already called");return this.writeInto(D),this.destroy(),D}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(D){const{blockLen:L,suffix:z,outputLen:P,rounds:R,enableXOF:M}=this;return D||(D=new T(L,z,P,M,R)),D.state32.set(this.state32),D.pos=this.pos,D.posOut=this.posOut,D.finished=this.finished,D.rounds=R,D.suffix=z,D.outputLen=P,D.enableXOF=M,D.destroyed=this.destroyed,D}}ar.Keccak=T;const O=(A,D,L)=>(0,n.wrapConstructor)(()=>new T(D,A,L));ar.sha3_224=O(6,144,224/8),ar.sha3_256=O(6,136,256/8),ar.sha3_384=O(6,104,384/8),ar.sha3_512=O(6,72,512/8),ar.keccak_224=O(1,144,224/8),ar.keccak_256=O(1,136,256/8),ar.keccak_384=O(1,104,384/8),ar.keccak_512=O(1,72,512/8);const q=(A,D,L)=>(0,n.wrapXOFConstructorWithOpts)((z={})=>new T(D,A,z.dkLen===void 0?L:z.dkLen,!0));return ar.shake128=q(31,168,128/8),ar.shake256=q(31,136,256/8),ar}var VO;function N9(){if(VO)return Na;VO=1;const{sha3_512:t}=E9(),e=24,n=32,r=(w=4,E=Math.random)=>{let I="";for(;I.length<w;)I=I+Math.floor(E()*36).toString(36);return I};function i(w){let E=8n,I=0n;for(const T of w.values()){const O=BigInt(T);I=(I<<E)+O}return I}const s=(w="")=>i(t(w)).toString(36).slice(1),o=Array.from({length:26},(w,E)=>String.fromCharCode(E+97)),l=w=>o[Math.floor(w()*o.length)],c=({globalObj:w=typeof Pu<"u"?Pu:typeof window<"u"?window:{},random:E=Math.random}={})=>{const I=Object.keys(w).toString(),T=I.length?I+r(n,E):r(n,E);return s(T).substring(0,n)},d=w=>()=>w++,p=0x1c6b1f1f,h=({random:w=Math.random,counter:E=d(Math.floor(w()*p)),length:I=e,fingerprint:T=c({random:w})}={})=>function(){const q=l(w),A=Date.now().toString(36),D=E().toString(36),L=r(I,w),z=`${A+L+D+T}`;return`${q+s(z).substring(1,I)}`},b=h(),x=(w,{minLength:E=2,maxLength:I=n}={})=>{const T=w.length,O=/^[0-9a-z]+$/;try{if(typeof w=="string"&&T>=E&&T<=I&&O.test(w))return!0}finally{}return!1};return Na.getConstants=()=>({defaultLength:e,bigLength:n}),Na.init=h,Na.createId=b,Na.bufToBigInt=i,Na.createCounter=d,Na.createFingerprint=c,Na.isCuid=x,Na}var HO;function k9(){if(HO)return Kc;HO=1;const{createId:t,init:e,getConstants:n,isCuid:r}=N9();return Kc.createId=t,Kc.init=e,Kc.getConstants=n,Kc.isCuid=r,Kc}var I9=k9();const Rn=I9.createId;var i0,QO;function C9(){if(QO)return i0;QO=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(O){O!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(q){try{var A=t.call(q);return i.test(A)}catch{return!1}},o=function(q){try{return s(q)?!1:(t.call(q),!0)}catch{return!1}},l=Object.prototype.toString,c="[object Object]",d="[object Function]",p="[object GeneratorFunction]",h="[object HTMLAllCollection]",b="[object HTML document.all class]",x="[object HTMLCollection]",w=typeof Symbol=="function"&&!!Symbol.toStringTag,E=!(0 in[,]),I=function(){return!1};if(typeof document=="object"){var T=document.all;l.call(T)===l.call(document.all)&&(I=function(q){if((E||!q)&&(typeof q>"u"||typeof q=="object"))try{var A=l.call(q);return(A===h||A===b||A===x||A===c)&&q("")==null}catch{}return!1})}return i0=e?function(q){if(I(q))return!0;if(!q||typeof q!="function"&&typeof q!="object")return!1;try{e(q,null,n)}catch(A){if(A!==r)return!1}return!s(q)&&o(q)}:function(q){if(I(q))return!0;if(!q||typeof q!="function"&&typeof q!="object")return!1;if(w)return o(q);if(s(q))return!1;var A=l.call(q);return A!==d&&A!==p&&!/^\[object HTML/.test(A)?!1:o(q)},i0}var T9=C9();const O9=io(T9),q9=t=>O9(t);var ky={exports:{}},R9=ky.exports,KO;function j9(){return KO||(KO=1,function(t){(function(e,n){t.exports=n()})(R9,function(){var e=Object.prototype.toString;function n(h,b){return h==null?!1:Object.prototype.hasOwnProperty.call(h,b)}function r(h){if(!h||o(h)&&h.length===0)return!0;if(typeof h!="string"){for(var b in h)if(n(h,b))return!1;return!0}return!1}function i(h){return e.call(h)}function s(h){return typeof h=="object"&&i(h)==="[object Object]"}var o=Array.isArray||function(h){return e.call(h)==="[object Array]"};function l(h){return typeof h=="boolean"||i(h)==="[object Boolean]"}function c(h){var b=parseInt(h);return b.toString()===h?b:h}function d(h){h=h||{};var b=function(T){return Object.keys(b).reduce(function(O,q){return q==="create"||typeof b[q]=="function"&&(O[q]=b[q].bind(b,T)),O},{})},x;h.includeInheritedProps?x=function(){return!0}:x=function(T,O){return typeof O=="number"&&Array.isArray(T)||n(T,O)};function w(T,O){if(x(T,O))return T[O]}var E;h.includeInheritedProps?E=function(T,O){typeof O!="string"&&typeof O!="number"&&(O=String(O));var q=w(T,O);if(O==="__proto__"||O==="prototype"||O==="constructor"&&typeof q=="function")throw new Error("For security reasons, object's magic properties cannot be set");return q}:E=function(T,O){return w(T,O)};function I(T,O,q,A){if(typeof O=="number"&&(O=[O]),!O||O.length===0)return T;if(typeof O=="string")return I(T,O.split(".").map(c),q,A);var D=O[0],L=E(T,D);return O.length===1?((L===void 0||!A)&&(T[D]=q),L):(L===void 0&&(typeof O[1]=="number"?T[D]=[]:T[D]={}),I(T[D],O.slice(1),q,A))}return b.has=function(T,O){if(typeof O=="number"?O=[O]:typeof O=="string"&&(O=O.split(".")),!O||O.length===0)return!!T;for(var q=0;q<O.length;q++){var A=c(O[q]);if(typeof A=="number"&&o(T)&&A<T.length||(h.includeInheritedProps?A in Object(T):n(T,A)))T=T[A];else return!1}return!0},b.ensureExists=function(T,O,q){return I(T,O,q,!0)},b.set=function(T,O,q,A){return I(T,O,q,A)},b.insert=function(T,O,q,A){var D=b.get(T,O);A=~~A,o(D)||(D=[],b.set(T,O,D)),D.splice(A,0,q)},b.empty=function(T,O){if(!r(O)&&T!=null){var q,A;if(q=b.get(T,O)){if(typeof q=="string")return b.set(T,O,"");if(l(q))return b.set(T,O,!1);if(typeof q=="number")return b.set(T,O,0);if(o(q))q.length=0;else if(s(q))for(A in q)x(q,A)&&delete q[A];else return b.set(T,O,null)}}},b.push=function(T,O){var q=b.get(T,O);o(q)||(q=[],b.set(T,O,q)),q.push.apply(q,Array.prototype.slice.call(arguments,2))},b.coalesce=function(T,O,q){for(var A,D=0,L=O.length;D<L;D++)if((A=b.get(T,O[D]))!==void 0)return A;return q},b.get=function(T,O,q){if(typeof O=="number"&&(O=[O]),!O||O.length===0)return T;if(T==null)return q;if(typeof O=="string")return b.get(T,O.split("."),q);var A=c(O[0]),D=E(T,A);return D===void 0?q:O.length===1?D:b.get(T[A],O.slice(1),q)},b.del=function(O,q){if(typeof q=="number"&&(q=[q]),O==null||r(q))return O;if(typeof q=="string")return b.del(O,q.split("."));var A=c(q[0]);if(E(O,A),!x(O,A))return O;if(q.length===1)o(O)?O.splice(A,1):delete O[A];else return b.del(O[A],q.slice(1));return O},b}var p=d();return p.create=d,p.withInheritedProps=d({includeInheritedProps:!0}),p})}(ky)),ky.exports}var A9=j9();const GO=io(A9);function wn({number:t,empty:e="-",fraction:n=2}){if(t==null)return e;try{return t.toLocaleString(void 0,{maximumFractionDigits:n})}catch(r){return console.error("toHumanNumber",t,r),t.toFixed(2)}}const Z1=({error:t,errors:e,onError:n})=>{const r=e.some(s=>s),i=t instanceof Error;return!r&&i&&n(t),r||i},jF=yn({slot:{base:["flex","flex-row","gap-2","items-center","rounded","px-2","py-0.5","hover:bg-slate-100","text-slate-500","hover:text-blue-500","cursor-pointer"]},variant:{variant:{common:[],warning:["text-amber-500","hover:text-amber-600","hover:bg-amber-100"],danger:["text-red-500","hover:text-red-600","hover:bg-red-100"]},disabled:{true:["cursor-not-allowed","text-slate-300","bg-slate-100","hover:bg-slate-100"]}},defaults:{variant:"common",disabled:!1}}),P9=yn({use:jF,slot:{},variant:{},defaults:{}}),Iy=({icon:t,iconProps:e,variant:n,tva:r=P9,css:i,children:s,...o})=>{const l=r({...n,css:i}).slots;return f.jsxs("div",{className:l.base(),...o,children:[kb(t)?f.jsx(rn,{icon:t,...e}):t,s]})};function Pb(){return typeof window<"u"}function Xl(t){return AF(t)?(t.nodeName||"").toLowerCase():"#document"}function ps(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function aa(t){var e;return(e=(AF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function AF(t){return Pb()?t instanceof Node||t instanceof ps(t).Node:!1}function ur(t){return Pb()?t instanceof Element||t instanceof ps(t).Element:!1}function Jr(t){return Pb()?t instanceof HTMLElement||t instanceof ps(t).HTMLElement:!1}function IE(t){return!Pb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ps(t).ShadowRoot}function dm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ro(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function F9(t){return["table","td","th"].includes(Xl(t))}function Fb(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function J1(t){const e=Db(),n=ur(t)?ro(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function D9(t){let e=za(t);for(;Jr(e)&&!Pa(e);){if(J1(e))return e;if(Fb(e))return null;e=za(e)}return null}function Db(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Pa(t){return["html","body","#document"].includes(Xl(t))}function ro(t){return ps(t).getComputedStyle(t)}function Lb(t){return ur(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function za(t){if(Xl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||IE(t)&&t.host||aa(t);return IE(e)?e.host:e}function PF(t){const e=za(t);return Pa(e)?t.ownerDocument?t.ownerDocument.body:t.body:Jr(e)&&dm(e)?e:PF(e)}function Dl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=PF(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ps(i);if(s){const l=CE(o);return e.concat(o,o.visualViewport||[],dm(i)?i:[],l&&n?Dl(l):[])}return e.concat(i,Dl(i,[],n))}function CE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function wo(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function di(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&IE(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function Y1(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function FF(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function DF(t){return t.mozInputSource===0&&t.isTrusted?!0:TE()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function X1(t){return M9()?!1:!TE()&&t.width===0&&t.height===0||TE()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function LF(){return/apple/i.test(navigator.vendor)}function TE(){const t=/android/i;return t.test(Y1())||t.test(FF())}function L9(){return Y1().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function M9(){return FF().includes("jsdom/")}function Rh(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function $9(t){return"nativeEvent"in t}function B9(t){return t.matches("html,body")}function fi(t){return t?.ownerDocument||document}function s0(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Tl(t){return"composedPath"in t?t.composedPath()[0]:t.target}const z9="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function eN(t){return Jr(t)&&t.matches(z9)}function Ai(t){t.preventDefault(),t.stopPropagation()}function MF(t){return t?t.getAttribute("role")==="combobox"&&eN(t):!1}const $d=Math.min,ks=Math.max,Ov=Math.round,ud=Math.floor,Jo=t=>({x:t,y:t}),W9={left:"right",right:"left",bottom:"top",top:"bottom"},U9={start:"end",end:"start"};function ZO(t,e,n){return ks(t,$d(e,n))}function fm(t,e){return typeof t=="function"?t(e):t}function Zl(t){return t.split("-")[0]}function pm(t){return t.split("-")[1]}function $F(t){return t==="x"?"y":"x"}function BF(t){return t==="y"?"height":"width"}function tc(t){return["top","bottom"].includes(Zl(t))?"y":"x"}function zF(t){return $F(tc(t))}function V9(t,e,n){n===void 0&&(n=!1);const r=pm(t),i=zF(t),s=BF(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=qv(o)),[o,qv(o)]}function H9(t){const e=qv(t);return[OE(t),e,OE(e)]}function OE(t){return t.replace(/start|end/g,e=>U9[e])}function Q9(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function K9(t,e,n,r){const i=pm(t);let s=Q9(Zl(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(OE)))),s}function qv(t){return t.replace(/left|right|bottom|top/g,e=>W9[e])}function G9(t){return{top:0,right:0,bottom:0,left:0,...t}}function Z9(t){return typeof t!="number"?G9(t):{top:t,right:t,bottom:t,left:t}}function Rv(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}var J9=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],jv=J9.join(","),WF=typeof Element>"u",Bd=WF?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Av=!WF&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},Pv=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},Y9=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},X9=function(e,n,r){if(Pv(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(jv));return n&&Bd.call(e,jv)&&i.unshift(e),i=i.filter(r),i},eQ=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!Pv(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),c=l.length?l:o.children,d=t(c,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:o,candidates:d})}else{var p=Bd.call(o,jv);p&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),b=!Pv(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&b){var x=t(h===!0?o.children:h.children,!0,r);r.flatten?i.push.apply(i,x):i.push({scopeParent:o,candidates:x})}else s.unshift.apply(s,o.children)}}return i},UF=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},VF=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Y9(e))&&!UF(e)?0:e.tabIndex},tQ=function(e,n){var r=VF(e);return r<0&&n&&!UF(e)?0:r},nQ=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},HF=function(e){return e.tagName==="INPUT"},rQ=function(e){return HF(e)&&e.type==="hidden"},iQ=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},sQ=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},oQ=function(e){if(!e.name)return!0;var n=e.form||Av(e),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=sQ(i,e.form);return!s||s===e},aQ=function(e){return HF(e)&&e.type==="radio"},lQ=function(e){return aQ(e)&&!oQ(e)},uQ=function(e){var n,r=e&&Av(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,l,c;for(s=!!((o=i)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(i)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!s&&i;){var d,p,h;r=Av(i),i=(d=r)===null||d===void 0?void 0:d.host,s=!!((p=i)!==null&&p!==void 0&&(h=p.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return s},JO=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},cQ=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Bd.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Bd.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var l=e;e;){var c=e.parentElement,d=Av(e);if(c&&!c.shadowRoot&&i(c)===!0)return JO(e);e.assignedSlot?e=e.assignedSlot:!c&&d!==e.ownerDocument?e=d.host:e=c}e=l}if(uQ(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return JO(e);return!1},dQ=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return Bd.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},fQ=function(e,n){return!(n.disabled||Pv(n)||rQ(n)||cQ(n,e)||iQ(n)||dQ(n))},qE=function(e,n){return!(lQ(n)||VF(n)<0||!fQ(e,n))},pQ=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},hQ=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,l=o?i.scopeParent:i,c=tQ(l,o),d=o?t(i.candidates):l;c===0?o?n.push.apply(n,d):n.push(l):r.push({documentOrder:s,tabIndex:c,item:i,isScope:o,content:d})}),r.sort(nQ).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},Mb=function(e,n){n=n||{};var r;return n.getShadowRoot?r=eQ([e],n.includeContainer,{filter:qE.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:pQ}):r=X9(e,n.includeContainer,qE.bind(null,n)),hQ(r)},mQ=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Bd.call(e,jv)===!1?!1:qE(n,e)};function YO(t,e,n){let{reference:r,floating:i}=t;const s=tc(e),o=zF(e),l=BF(o),c=Zl(e),d=s==="y",p=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,b=r[l]/2-i[l]/2;let x;switch(c){case"top":x={x:p,y:r.y-i.height};break;case"bottom":x={x:p,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:h};break;case"left":x={x:r.x-i.width,y:h};break;default:x={x:r.x,y:r.y}}switch(pm(e)){case"start":x[o]-=b*(n&&d?-1:1);break;case"end":x[o]+=b*(n&&d?-1:1);break}return x}const gQ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),c=await (o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:h}=YO(d,r,c),b=r,x={},w=0;for(let E=0;E<l.length;E++){const{name:I,fn:T}=l[E],{x:O,y:q,data:A,reset:D}=await T({x:p,y:h,initialPlacement:r,placement:b,strategy:i,middlewareData:x,rects:d,platform:o,elements:{reference:t,floating:e}});p=O??p,h=q??h,x={...x,[I]:{...x[I],...A}},D&&w<=50&&(w++,typeof D=="object"&&(D.placement&&(b=D.placement),D.rects&&(d=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):D.rects),{x:p,y:h}=YO(d,b,c)),E=-1)}return{x:p,y:h,placement:b,strategy:i,middlewareData:x}};async function tN(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:b=!1,padding:x=0}=fm(e,t),w=Z9(x),I=l[b?h==="floating"?"reference":"floating":h],T=Rv(await s.getClippingRect({element:(n=await (s.isElement==null?void 0:s.isElement(I)))==null||n?I:I.contextElement||await (s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:d,rootBoundary:p,strategy:c})),O=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,q=await (s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),A=await (s.isElement==null?void 0:s.isElement(q))?await (s.getScale==null?void 0:s.getScale(q))||{x:1,y:1}:{x:1,y:1},D=Rv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:O,offsetParent:q,strategy:c}):O);return{top:(T.top-D.top+w.top)/A.y,bottom:(D.bottom-T.bottom+w.bottom)/A.y,left:(T.left-D.left+w.left)/A.x,right:(D.right-T.right+w.right)/A.x}}const yQ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:b,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:E=!0,...I}=fm(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const T=Zl(i),O=tc(l),q=Zl(l)===l,A=await (c.isRTL==null?void 0:c.isRTL(d.floating)),D=b||(q||!E?[qv(l)]:H9(l)),L=w!=="none";!b&&L&&D.push(...K9(l,E,w,A));const z=[l,...D],P=await tN(e,I),R=[];let M=((r=s.flip)==null?void 0:r.overflows)||[];if(p&&R.push(P[T]),h){const B=V9(i,o,A);R.push(P[B[0]],P[B[1]])}if(M=[...M,{placement:i,overflows:R}],!R.every(B=>B<=0)){var F,W;const B=(((F=s.flip)==null?void 0:F.index)||0)+1,te=z[B];if(te)return{data:{index:B,overflows:M},reset:{placement:te}};let J=(W=M.filter(le=>le.overflows[0]<=0).sort((le,se)=>le.overflows[1]-se.overflows[1])[0])==null?void 0:W.placement;if(!J)switch(x){case"bestFit":{var V;const le=(V=M.filter(se=>{if(L){const ne=tc(se.placement);return ne===O||ne==="y"}return!0}).map(se=>[se.placement,se.overflows.filter(ne=>ne>0).reduce((ne,oe)=>ne+oe,0)]).sort((se,ne)=>se[1]-ne[1])[0])==null?void 0:V[0];le&&(J=le);break}case"initialPlacement":J=l;break}if(i!==J)return{reset:{placement:J}}}return{}}}};async function vQ(t,e){const{placement:n,platform:r,elements:i}=t,s=await (r.isRTL==null?void 0:r.isRTL(i.floating)),o=Zl(n),l=pm(n),c=tc(n)==="y",d=["left","top"].includes(o)?-1:1,p=s&&c?-1:1,h=fm(e,t);let{mainAxis:b,crossAxis:x,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof w=="number"&&(x=l==="end"?w*-1:w),c?{x:x*p,y:b*d}:{x:b*d,y:x*p}}const bQ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=e,c=await vQ(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},xQ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:I=>{let{x:T,y:O}=I;return{x:T,y:O}}},...c}=fm(t,e),d={x:n,y:r},p=await tN(e,c),h=tc(Zl(i)),b=$F(h);let x=d[b],w=d[h];if(s){const I=b==="y"?"top":"left",T=b==="y"?"bottom":"right",O=x+p[I],q=x-p[T];x=ZO(O,x,q)}if(o){const I=h==="y"?"top":"left",T=h==="y"?"bottom":"right",O=w+p[I],q=w-p[T];w=ZO(O,w,q)}const E=l.fn({...e,[b]:x,[h]:w});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[b]:s,[h]:o}}}}}},_Q=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:c=()=>{},...d}=fm(t,e),p=await tN(e,d),h=Zl(i),b=pm(i),x=tc(i)==="y",{width:w,height:E}=s.floating;let I,T;h==="top"||h==="bottom"?(I=h,T=b===(await (o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(T=h,I=b==="end"?"top":"bottom");const O=E-p.top-p.bottom,q=w-p.left-p.right,A=$d(E-p[I],O),D=$d(w-p[T],q),L=!e.middlewareData.shift;let z=A,P=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=q),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(z=O),L&&!b){const M=ks(p.left,0),F=ks(p.right,0),W=ks(p.top,0),V=ks(p.bottom,0);x?P=w-2*(M!==0||F!==0?M+F:ks(p.left,p.right)):z=E-2*(W!==0||V!==0?W+V:ks(p.top,p.bottom))}await c({...e,availableWidth:P,availableHeight:z});const R=await o.getDimensions(l.floating);return w!==R.width||E!==R.height?{reset:{rects:!0}}:{}}}};function QF(t){const e=ro(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Jr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=Ov(n)!==s||Ov(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function nN(t){return ur(t)?t:t.contextElement}function Cd(t){const e=nN(t);if(!Jr(e))return Jo(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=QF(e);let o=(s?Ov(n.width):n.width)/r,l=(s?Ov(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const wQ=Jo(0);function KF(t){const e=ps(t);return!Db()||!e.visualViewport?wQ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function SQ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ps(t)?!1:e}function nc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=nN(t);let o=Jo(1);e&&(r?ur(r)&&(o=Cd(r)):o=Cd(t));const l=SQ(s,n,r)?KF(s):Jo(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,p=i.width/o.x,h=i.height/o.y;if(s){const b=ps(s),x=r&&ur(r)?ps(r):r;let w=b,E=CE(w);for(;E&&r&&x!==w;){const I=Cd(E),T=E.getBoundingClientRect(),O=ro(E),q=T.left+(E.clientLeft+parseFloat(O.paddingLeft))*I.x,A=T.top+(E.clientTop+parseFloat(O.paddingTop))*I.y;c*=I.x,d*=I.y,p*=I.x,h*=I.y,c+=q,d+=A,w=ps(E),E=CE(w)}}return Rv({width:p,height:h,x:c,y:d})}function rN(t,e){const n=Lb(t).scrollLeft;return e?e.left+n:nc(aa(t)).left+n}function GF(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:rN(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function EQ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=aa(r),l=e?Fb(e.floating):!1;if(r===o||l&&s)return n;let c={scrollLeft:0,scrollTop:0},d=Jo(1);const p=Jo(0),h=Jr(r);if((h||!h&&!s)&&((Xl(r)!=="body"||dm(o))&&(c=Lb(r)),Jr(r))){const x=nc(r);d=Cd(r),p.x=x.x+r.clientLeft,p.y=x.y+r.clientTop}const b=o&&!h&&!s?GF(o,c,!0):Jo(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+p.x+b.x,y:n.y*d.y-c.scrollTop*d.y+p.y+b.y}}function NQ(t){return Array.from(t.getClientRects())}function kQ(t){const e=aa(t),n=Lb(t),r=t.ownerDocument.body,i=ks(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ks(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+rN(t);const l=-n.scrollTop;return ro(r).direction==="rtl"&&(o+=ks(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}function IQ(t,e){const n=ps(t),r=aa(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,c=0;if(i){s=i.width,o=i.height;const d=Db();(!d||d&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:l,y:c}}function CQ(t,e){const n=nc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Jr(t)?Cd(t):Jo(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,c=i*s.x,d=r*s.y;return{width:o,height:l,x:c,y:d}}function XO(t,e,n){let r;if(e==="viewport")r=IQ(t,n);else if(e==="document")r=kQ(aa(t));else if(ur(e))r=CQ(e,n);else{const i=KF(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Rv(r)}function ZF(t,e){const n=za(t);return n===e||!ur(n)||Pa(n)?!1:ro(n).position==="fixed"||ZF(n,e)}function TQ(t,e){const n=e.get(t);if(n)return n;let r=Dl(t,[],!1).filter(l=>ur(l)&&Xl(l)!=="body"),i=null;const s=ro(t).position==="fixed";let o=s?za(t):t;for(;ur(o)&&!Pa(o);){const l=ro(o),c=J1(o);!c&&l.position==="fixed"&&(i=null),(s?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||dm(o)&&!c&&ZF(t,o))?r=r.filter(p=>p!==o):i=l,o=za(o)}return e.set(t,r),r}function OQ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Fb(e)?[]:TQ(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((d,p)=>{const h=XO(e,p,i);return d.top=ks(h.top,d.top),d.right=$d(h.right,d.right),d.bottom=$d(h.bottom,d.bottom),d.left=ks(h.left,d.left),d},XO(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function qQ(t){const{width:e,height:n}=QF(t);return{width:e,height:n}}function RQ(t,e,n){const r=Jr(e),i=aa(e),s=n==="fixed",o=nc(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const c=Jo(0);if(r||!r&&!s)if((Xl(e)!=="body"||dm(i))&&(l=Lb(e)),r){const b=nc(e,!0,s,e);c.x=b.x+e.clientLeft,c.y=b.y+e.clientTop}else i&&(c.x=rN(i));const d=i&&!r&&!s?GF(i,l):Jo(0),p=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:p,y:h,width:o.width,height:o.height}}function o0(t){return ro(t).position==="static"}function eq(t,e){if(!Jr(t)||ro(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return aa(t)===n&&(n=n.ownerDocument.body),n}function JF(t,e){const n=ps(t);if(Fb(t))return n;if(!Jr(t)){let i=za(t);for(;i&&!Pa(i);){if(ur(i)&&!o0(i))return i;i=za(i)}return n}let r=eq(t,e);for(;r&&F9(r)&&o0(r);)r=eq(r,e);return r&&Pa(r)&&o0(r)&&!J1(r)?n:r||D9(t)||n}const jQ=async function(t){const e=this.getOffsetParent||JF,n=this.getDimensions,r=await n(t.floating);return{reference:RQ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function AQ(t){return ro(t).direction==="rtl"}const PQ={convertOffsetParentRelativeRectToViewportRelativeRect:EQ,getDocumentElement:aa,getClippingRect:OQ,getOffsetParent:JF,getElementRects:jQ,getClientRects:NQ,getDimensions:qQ,getScale:Cd,isElement:ur,isRTL:AQ};function YF(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function FQ(t,e){let n=null,r;const i=aa(t);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const d=t.getBoundingClientRect(),{left:p,top:h,width:b,height:x}=d;if(l||e(),!b||!x)return;const w=ud(h),E=ud(i.clientWidth-(p+b)),I=ud(i.clientHeight-(h+x)),T=ud(p),q={rootMargin:-w+"px "+-E+"px "+-I+"px "+-T+"px",threshold:ks(0,$d(1,c))||1};let A=!0;function D(L){const z=L[0].intersectionRatio;if(z!==c){if(!A)return o();z?o(!1,z):r=setTimeout(()=>{o(!1,1e-7)},1e3)}z===1&&!YF(d,t.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(D,{...q,root:i.ownerDocument})}catch{n=new IntersectionObserver(D,q)}n.observe(t)}return o(!0),s}function XF(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=nN(t),p=i||s?[...d?Dl(d):[],...Dl(e)]:[];p.forEach(T=>{i&&T.addEventListener("scroll",n,{passive:!0}),s&&T.addEventListener("resize",n)});const h=d&&l?FQ(d,n):null;let b=-1,x=null;o&&(x=new ResizeObserver(T=>{let[O]=T;O&&O.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var q;(q=x)==null||q.observe(e)})),n()}),d&&!c&&x.observe(d),x.observe(e));let w,E=c?nc(t):null;c&&I();function I(){const T=nc(t);E&&!YF(E,T)&&n(),E=T,w=requestAnimationFrame(I)}return n(),()=>{var T;p.forEach(O=>{i&&O.removeEventListener("scroll",n),s&&O.removeEventListener("resize",n)}),h?.(),(T=x)==null||T.disconnect(),x=null,c&&cancelAnimationFrame(w)}}const DQ=bQ,LQ=xQ,MQ=yQ,$Q=_Q,BQ=(t,e,n)=>{const r=new Map,i={platform:PQ,...n},s={...i.platform,_c:r};return gQ(t,e,{...i,platform:s})};var Cy=typeof document<"u"?K.useLayoutEffect:K.useEffect;function Fv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Fv(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Fv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function eD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function tq(t,e){const n=eD(t);return Math.round(e*n)/n}function a0(t){const e=K.useRef(t);return Cy(()=>{e.current=t}),e}function zQ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[p,h]=K.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[b,x]=K.useState(r);Fv(b,r)||x(r);const[w,E]=K.useState(null),[I,T]=K.useState(null),O=K.useCallback(se=>{se!==L.current&&(L.current=se,E(se))},[]),q=K.useCallback(se=>{se!==z.current&&(z.current=se,T(se))},[]),A=s||w,D=o||I,L=K.useRef(null),z=K.useRef(null),P=K.useRef(p),R=c!=null,M=a0(c),F=a0(i),W=a0(d),V=K.useCallback(()=>{if(!L.current||!z.current)return;const se={placement:e,strategy:n,middleware:b};F.current&&(se.platform=F.current),BQ(L.current,z.current,se).then(ne=>{const oe={...ne,isPositioned:W.current!==!1};B.current&&!Fv(P.current,oe)&&(P.current=oe,fb.flushSync(()=>{h(oe)}))})},[b,e,n,F,W]);Cy(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(se=>({...se,isPositioned:!1})))},[d]);const B=K.useRef(!1);Cy(()=>(B.current=!0,()=>{B.current=!1}),[]),Cy(()=>{if(A&&(L.current=A),D&&(z.current=D),A&&D){if(M.current)return M.current(A,D,V);V()}},[A,D,V,M,R]);const te=K.useMemo(()=>({reference:L,floating:z,setReference:O,setFloating:q}),[O,q]),J=K.useMemo(()=>({reference:A,floating:D}),[A,D]),le=K.useMemo(()=>{const se={position:n,left:0,top:0};if(!J.floating)return se;const ne=tq(J.floating,p.x),oe=tq(J.floating,p.y);return l?{...se,transform:"translate("+ne+"px, "+oe+"px)",...eD(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:oe}},[n,l,J.floating,p.x,p.y]);return K.useMemo(()=>({...p,update:V,refs:te,elements:J,floatingStyles:le}),[p,V,te,J,le])}const tD=(t,e)=>({...DQ(t),options:[t,e]}),WQ=(t,e)=>({...LQ(t),options:[t,e]}),nD=(t,e)=>({...MQ(t),options:[t,e]}),UQ=(t,e)=>({...$Q(t),options:[t,e]});function nq(t){return K.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const rD={...lB},VQ=rD.useInsertionEffect,HQ=VQ||(t=>t());function Di(t){const e=K.useRef(()=>{});return HQ(()=>{e.current=t}),K.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const iN="ArrowUp",hm="ArrowDown",Ll="ArrowLeft",Ml="ArrowRight";function Wg(t,e,n){return Math.floor(t/e)!==n}function eh(t,e){return e<0||e>=t.current.length}function l0(t,e){return xi(t,{disabledIndices:e})}function rq(t,e){return xi(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function xi(t,e){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=e===void 0?{}:e;const o=t.current;let l=n;do l+=r?-s:s;while(l>=0&&l<=o.length-1&&Ty(o,l,i));return l}function QQ(t,e){let{event:n,orientation:r,loop:i,rtl:s,cols:o,disabledIndices:l,minIndex:c,maxIndex:d,prevIndex:p,stopEvent:h=!1}=e,b=p;if(n.key===iN){if(h&&Ai(n),p===-1)b=d;else if(b=xi(t,{startingIndex:b,amount:o,decrement:!0,disabledIndices:l}),i&&(p-o<c||b<0)){const x=p%o,w=d%o,E=d-(w-x);w===x?b=d:b=w>x?E:E-o}eh(t,b)&&(b=p)}if(n.key===hm&&(h&&Ai(n),p===-1?b=c:(b=xi(t,{startingIndex:p,amount:o,disabledIndices:l}),i&&p+o>d&&(b=xi(t,{startingIndex:p%o-o,amount:o,disabledIndices:l}))),eh(t,b)&&(b=p)),r==="both"){const x=ud(p/o);n.key===(s?Ll:Ml)&&(h&&Ai(n),p%o!==o-1?(b=xi(t,{startingIndex:p,disabledIndices:l}),i&&Wg(b,o,x)&&(b=xi(t,{startingIndex:p-p%o-1,disabledIndices:l}))):i&&(b=xi(t,{startingIndex:p-p%o-1,disabledIndices:l})),Wg(b,o,x)&&(b=p)),n.key===(s?Ml:Ll)&&(h&&Ai(n),p%o!==0?(b=xi(t,{startingIndex:p,decrement:!0,disabledIndices:l}),i&&Wg(b,o,x)&&(b=xi(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l}))):i&&(b=xi(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l})),Wg(b,o,x)&&(b=p));const w=ud(d/o)===x;eh(t,b)&&(i&&w?b=n.key===(s?Ml:Ll)?d:xi(t,{startingIndex:p-p%o-1,disabledIndices:l}):b=p)}return b}function KQ(t,e,n){const r=[];let i=0;return t.forEach((s,o)=>{let{width:l,height:c}=s,d=!1;for(n&&(i=0);!d;){const p=[];for(let h=0;h<l;h++)for(let b=0;b<c;b++)p.push(i+h+b*e);i%e+l<=e&&p.every(h=>r[h]==null)?(p.forEach(h=>{r[h]=o}),d=!0):i++}}),[...r]}function GQ(t,e,n,r,i){if(t===-1)return-1;const s=n.indexOf(t),o=e[t];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(t)}}function ZQ(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function Ty(t,e,n){if(n)return n.includes(e);const r=t[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}var br=typeof document<"u"?K.useLayoutEffect:K.useEffect;let iq=!1,JQ=0;const sq=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+JQ++;function YQ(){const[t,e]=K.useState(()=>iq?sq():void 0);return br(()=>{t==null&&e(sq())},[]),K.useEffect(()=>{iq=!0},[]),t}const XQ=rD.useId,sN=XQ||YQ;function iD(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const sD=K.createContext(null),oD=K.createContext(null),mm=()=>{var t;return((t=K.useContext(sD))==null?void 0:t.id)||null},uf=()=>K.useContext(oD);function e7(t){const e=sN(),n=uf(),i=mm();return br(()=>{if(!e)return;const s={id:e,parentId:i};return n?.addNode(s),()=>{n?.removeNode(s)}},[n,e,i]),e}function t7(t){const{children:e,id:n}=t,r=mm();return f.jsx(sD.Provider,{value:K.useMemo(()=>({id:n,parentId:r}),[n,r]),children:e})}function n7(t){const{children:e}=t,n=K.useRef([]),r=K.useCallback(o=>{n.current=[...n.current,o]},[]),i=K.useCallback(o=>{n.current=n.current.filter(l=>l!==o)},[]),s=K.useState(()=>iD())[0];return f.jsx(oD.Provider,{value:K.useMemo(()=>({nodesRef:n,addNode:r,removeNode:i,events:s}),[r,i,s]),children:e})}function rc(t){return"data-floating-ui-"+t}function Li(t){const e=K.useRef(t);return br(()=>{e.current=t}),e}const oq=rc("safe-polygon");function u0(t,e,n){return n&&!Rh(n)?0:typeof t=="number"?t:t?.[e]}function r7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=t,{enabled:l=!0,delay:c=0,handleClose:d=null,mouseOnly:p=!1,restMs:h=0,move:b=!0}=e,x=uf(),w=mm(),E=Li(d),I=Li(c),T=Li(n),O=K.useRef(),q=K.useRef(-1),A=K.useRef(),D=K.useRef(-1),L=K.useRef(!0),z=K.useRef(!1),P=K.useRef(()=>{}),R=K.useRef(!1),M=K.useCallback(()=>{var le;const se=(le=i.current.openEvent)==null?void 0:le.type;return se?.includes("mouse")&&se!=="mousedown"},[i]);K.useEffect(()=>{if(!l)return;function le(se){let{open:ne}=se;ne||(clearTimeout(q.current),clearTimeout(D.current),L.current=!0,R.current=!1)}return s.on("openchange",le),()=>{s.off("openchange",le)}},[l,s]),K.useEffect(()=>{if(!l||!E.current||!n)return;function le(ne){M()&&r(!1,ne,"hover")}const se=fi(o.floating).documentElement;return se.addEventListener("mouseleave",le),()=>{se.removeEventListener("mouseleave",le)}},[o.floating,n,r,l,E,M]);const F=K.useCallback(function(le,se,ne){se===void 0&&(se=!0),ne===void 0&&(ne="hover");const oe=u0(I.current,"close",O.current);oe&&!A.current?(clearTimeout(q.current),q.current=window.setTimeout(()=>r(!1,le,ne),oe)):se&&(clearTimeout(q.current),r(!1,le,ne))},[I,r]),W=Di(()=>{P.current(),A.current=void 0}),V=Di(()=>{if(z.current){const le=fi(o.floating).body;le.style.pointerEvents="",le.removeAttribute(oq),z.current=!1}}),B=Di(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);K.useEffect(()=>{if(!l)return;function le(X){if(clearTimeout(q.current),L.current=!1,p&&!Rh(O.current)||h>0&&!u0(I.current,"open"))return;const ce=u0(I.current,"open",O.current);ce?q.current=window.setTimeout(()=>{T.current||r(!0,X,"hover")},ce):n||r(!0,X,"hover")}function se(X){if(B())return;P.current();const ce=fi(o.floating);if(clearTimeout(D.current),R.current=!1,E.current&&i.current.floatingContext){n||clearTimeout(q.current),A.current=E.current({...i.current.floatingContext,tree:x,x:X.clientX,y:X.clientY,onClose(){V(),W(),B()||F(X,!0,"safe-polygon")}});const ye=A.current;ce.addEventListener("mousemove",ye),P.current=()=>{ce.removeEventListener("mousemove",ye)};return}(O.current==="touch"?!di(o.floating,X.relatedTarget):!0)&&F(X)}function ne(X){B()||i.current.floatingContext&&(E.current==null||E.current({...i.current.floatingContext,tree:x,x:X.clientX,y:X.clientY,onClose(){V(),W(),B()||F(X)}})(X))}if(ur(o.domReference)){var oe;const X=o.domReference;return n&&X.addEventListener("mouseleave",ne),(oe=o.floating)==null||oe.addEventListener("mouseleave",ne),b&&X.addEventListener("mousemove",le,{once:!0}),X.addEventListener("mouseenter",le),X.addEventListener("mouseleave",se),()=>{var ce;n&&X.removeEventListener("mouseleave",ne),(ce=o.floating)==null||ce.removeEventListener("mouseleave",ne),b&&X.removeEventListener("mousemove",le),X.removeEventListener("mouseenter",le),X.removeEventListener("mouseleave",se)}}},[o,l,t,p,h,b,F,W,V,r,n,T,x,I,E,i,B]),br(()=>{var le;if(l&&n&&(le=E.current)!=null&&le.__options.blockPointerEvents&&M()){z.current=!0;const ne=o.floating;if(ur(o.domReference)&&ne){var se;const oe=fi(o.floating).body;oe.setAttribute(oq,"");const X=o.domReference,ce=x==null||(se=x.nodesRef.current.find(de=>de.id===w))==null||(se=se.context)==null?void 0:se.elements.floating;return ce&&(ce.style.pointerEvents=""),oe.style.pointerEvents="none",X.style.pointerEvents="auto",ne.style.pointerEvents="auto",()=>{oe.style.pointerEvents="",X.style.pointerEvents="",ne.style.pointerEvents=""}}}},[l,n,w,o,x,E,M]),br(()=>{n||(O.current=void 0,R.current=!1,W(),V())},[n,W,V]),K.useEffect(()=>()=>{W(),clearTimeout(q.current),clearTimeout(D.current),V()},[l,o.domReference,W,V]);const te=K.useMemo(()=>{function le(se){O.current=se.pointerType}return{onPointerDown:le,onPointerEnter:le,onMouseMove(se){const{nativeEvent:ne}=se;function oe(){!L.current&&!T.current&&r(!0,ne,"hover")}p&&!Rh(O.current)||n||h===0||R.current&&se.movementX**2+se.movementY**2<2||(clearTimeout(D.current),O.current==="touch"?oe():(R.current=!0,D.current=window.setTimeout(oe,h)))}}},[p,r,n,T,h]),J=K.useMemo(()=>({onMouseEnter(){clearTimeout(q.current)},onMouseLeave(le){B()||F(le.nativeEvent,!1)}}),[F,B]);return K.useMemo(()=>l?{reference:te,floating:J}:{},[l,te,J])}let aq=0;function Tu(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(aq);const s=()=>t?.focus({preventScroll:n});i?s():aq=requestAnimationFrame(s)}function lq(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s?.parentId,s&&(r=r.concat(s))}return r}function Td(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var l;return i.parentId===o.id&&((l=i.context)==null?void 0:l.open)})}),n=n.concat(r);return n}function i7(t,e){let n,r=-1;function i(s,o){o>r&&(n=s,r=o),Td(t,s).forEach(c=>{i(c.id,o+1)})}return i(e,0),t.find(s=>s.id===n)}let Gc=new WeakMap,Ug=new WeakSet,Vg={},c0=0;const s7=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,aD=t=>t&&(t.host||aD(t.parentNode)),o7=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=aD(n);return t.contains(r)?r:null}).filter(n=>n!=null);function a7(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=o7(e,t),l=new Set,c=new Set(o),d=[];Vg[i]||(Vg[i]=new WeakMap);const p=Vg[i];o.forEach(h),b(e),l.clear();function h(x){!x||l.has(x)||(l.add(x),x.parentNode&&h(x.parentNode))}function b(x){!x||c.has(x)||[].forEach.call(x.children,w=>{if(Xl(w)!=="script")if(l.has(w))b(w);else{const E=s?w.getAttribute(s):null,I=E!==null&&E!=="false",T=Gc.get(w)||0,O=s?T+1:T,q=(p.get(w)||0)+1;Gc.set(w,O),p.set(w,q),d.push(w),O===1&&I&&Ug.add(w),q===1&&w.setAttribute(i,""),!I&&s&&w.setAttribute(s,"true")}})}return c0++,()=>{d.forEach(x=>{const w=Gc.get(x)||0,E=s?w-1:w,I=(p.get(x)||0)-1;Gc.set(x,E),p.set(x,I),E||(!Ug.has(x)&&s&&x.removeAttribute(s),Ug.delete(x)),I||x.removeAttribute(i)}),c0--,c0||(Gc=new WeakMap,Gc=new WeakMap,Ug=new WeakSet,Vg={})}}function uq(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=fi(t[0]).body;return a7(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const $b=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function lD(t,e){const n=Mb(t,$b());e==="prev"&&n.reverse();const r=n.indexOf(wo(fi(t)));return n.slice(r+1)[0]}function uD(){return lD(document.body,"next")}function cD(){return lD(document.body,"prev")}function th(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!di(n,r)}function l7(t){Mb(t,$b()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function cq(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const Bb={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let u7;function dq(t){t.key==="Tab"&&(t.target,clearTimeout(u7))}const Dv=K.forwardRef(function(e,n){const[r,i]=K.useState();br(()=>(LF()&&i("button"),document.addEventListener("keydown",dq),()=>{document.removeEventListener("keydown",dq)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[rc("focus-guard")]:"",style:Bb};return f.jsx("span",{...e,...s})}),dD=K.createContext(null),fq=rc("portal");function c7(t){t===void 0&&(t={});const{id:e,root:n}=t,r=sN(),i=fD(),[s,o]=K.useState(null),l=K.useRef(null);return br(()=>()=>{s?.remove(),queueMicrotask(()=>{l.current=null})},[s]),br(()=>{if(!r||l.current)return;const c=e?document.getElementById(e):null;if(!c)return;const d=document.createElement("div");d.id=r,d.setAttribute(fq,""),c.appendChild(d),l.current=d,o(d)},[e,r]),br(()=>{if(n===null||!r||l.current)return;let c=n||i?.portalNode;c&&!ur(c)&&(c=c.current),c=c||document.body;let d=null;e&&(d=document.createElement("div"),d.id=e,c.appendChild(d));const p=document.createElement("div");p.id=r,p.setAttribute(fq,""),c=d||c,c.appendChild(p),l.current=p,o(p)},[e,n,r,i]),s}function oN(t){const{children:e,id:n,root:r,preserveTabOrder:i=!0}=t,s=c7({id:n,root:r}),[o,l]=K.useState(null),c=K.useRef(null),d=K.useRef(null),p=K.useRef(null),h=K.useRef(null),b=o?.modal,x=o?.open,w=!!o&&!o.modal&&o.open&&i&&!!(r||s);return K.useEffect(()=>{if(!s||!i||b)return;function E(I){s&&th(I)&&(I.type==="focusin"?cq:l7)(s)}return s.addEventListener("focusin",E,!0),s.addEventListener("focusout",E,!0),()=>{s.removeEventListener("focusin",E,!0),s.removeEventListener("focusout",E,!0)}},[s,i,b]),K.useEffect(()=>{s&&(x||cq(s))},[x,s]),f.jsxs(dD.Provider,{value:K.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:d,beforeInsideRef:p,afterInsideRef:h,portalNode:s,setFocusManagerState:l}),[i,s]),children:[w&&s&&f.jsx(Dv,{"data-type":"outside",ref:c,onFocus:E=>{if(th(E,s)){var I;(I=p.current)==null||I.focus()}else{const T=cD()||o?.domReference;T?.focus()}}}),w&&s&&f.jsx("span",{"aria-owns":s.id,style:Bb}),s&&fb.createPortal(e,s),w&&s&&f.jsx(Dv,{"data-type":"outside",ref:d,onFocus:E=>{if(th(E,s)){var I;(I=h.current)==null||I.focus()}else{const T=uD()||o?.domReference;T?.focus(),o?.closeOnFocusOut&&o?.onOpenChange(!1,E.nativeEvent,"focus-out")}}})]})}const fD=()=>K.useContext(dD),RE="data-floating-ui-focusable";function jE(t){return t?t.hasAttribute(RE)?t:t.querySelector("["+RE+"]")||t:null}const d7=20;let Ou=[];function d0(t){Ou=Ou.filter(e=>e.isConnected),t&&Xl(t)!=="body"&&(Ou.push(t),Ou.length>d7&&(Ou=Ou.slice(-20)))}function pq(){return Ou.slice().reverse().find(t=>t.isConnected)}function f7(t){const e=$b();return mQ(t,e)?t:Mb(t,e)[0]||t}const p7=K.forwardRef(function(e,n){return f.jsx("button",{...e,type:"button",ref:n,tabIndex:-1,style:Bb})});function pD(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:l=!0,restoreFocus:c=!1,modal:d=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:h=!0,outsideElementsInert:b=!1}=t,{open:x,onOpenChange:w,events:E,dataRef:I,elements:{domReference:T,floating:O}}=e,q=Di(()=>{var De;return(De=I.current.floatingContext)==null?void 0:De.nodeId}),A=typeof o=="number"&&o<0,D=MF(T)&&A,L=s7(),z=L?s:!0,P=!z||L&&b,R=Li(i),M=Li(o),F=Li(l),W=uf(),V=fD(),B=K.useRef(null),te=K.useRef(null),J=K.useRef(!1),le=K.useRef(!1),se=K.useRef(-1),ne=V!=null,oe=jE(O),X=Di(function(De){return De===void 0&&(De=oe),De?Mb(De,$b()):[]}),ce=Di(De=>{const Ze=X(De);return R.current.map(Xe=>T&&Xe==="reference"?T:oe&&Xe==="floating"?oe:Ze).filter(Boolean).flat()});K.useEffect(()=>{if(r||!d)return;function De(Xe){if(Xe.key==="Tab"){di(oe,wo(fi(oe)))&&X().length===0&&!D&&Ai(Xe);const Ue=ce(),ut=Tl(Xe);R.current[0]==="reference"&&ut===T&&(Ai(Xe),Xe.shiftKey?Tu(Ue[Ue.length-1]):Tu(Ue[1])),R.current[1]==="floating"&&ut===oe&&Xe.shiftKey&&(Ai(Xe),Tu(Ue[0]))}}const Ze=fi(oe);return Ze.addEventListener("keydown",De),()=>{Ze.removeEventListener("keydown",De)}},[r,T,oe,d,R,D,X,ce]),K.useEffect(()=>{if(r||!O)return;function De(Ze){const Xe=Tl(Ze),ut=X().indexOf(Xe);ut!==-1&&(se.current=ut)}return O.addEventListener("focusin",De),()=>{O.removeEventListener("focusin",De)}},[r,O,X]),K.useEffect(()=>{if(r||!h)return;function De(){le.current=!0,setTimeout(()=>{le.current=!1})}function Ze(Xe){const Ue=Xe.relatedTarget;queueMicrotask(()=>{const ut=q(),wt=!(di(T,Ue)||di(O,Ue)||di(Ue,O)||di(V?.portalNode,Ue)||Ue!=null&&Ue.hasAttribute(rc("focus-guard"))||W&&(Td(W.nodesRef.current,ut).find(Tt=>{var Ut,nn;return di((Ut=Tt.context)==null?void 0:Ut.elements.floating,Ue)||di((nn=Tt.context)==null?void 0:nn.elements.domReference,Ue)})||lq(W.nodesRef.current,ut).find(Tt=>{var Ut,nn,xe;return[(Ut=Tt.context)==null?void 0:Ut.elements.floating,jE((nn=Tt.context)==null?void 0:nn.elements.floating)].includes(Ue)||((xe=Tt.context)==null?void 0:xe.elements.domReference)===Ue})));if(c&&wt&&wo(fi(oe))===fi(oe).body){Jr(oe)&&oe.focus();const Tt=se.current,Ut=X(),nn=Ut[Tt]||Ut[Ut.length-1]||oe;Jr(nn)&&nn.focus()}(D||!d)&&Ue&&wt&&!le.current&&Ue!==pq()&&(J.current=!0,w(!1,Xe,"focus-out"))})}if(O&&Jr(T))return T.addEventListener("focusout",Ze),T.addEventListener("pointerdown",De),O.addEventListener("focusout",Ze),()=>{T.removeEventListener("focusout",Ze),T.removeEventListener("pointerdown",De),O.removeEventListener("focusout",Ze)}},[r,T,O,oe,d,W,V,w,h,c,X,D,q]);const de=K.useRef(null),ye=K.useRef(null),_e=nq([de,V?.beforeInsideRef]),Ne=nq([ye,V?.afterInsideRef]);K.useEffect(()=>{var De;if(r||!O)return;const Ze=Array.from((V==null||(De=V.portalNode)==null?void 0:De.querySelectorAll("["+rc("portal")+"]"))||[]),Xe=W&&!d?lq(W?.nodesRef.current,q()).map(wt=>{var Tt;return(Tt=wt.context)==null?void 0:Tt.elements.floating}):[],Ue=[O,...Ze,...Xe,B.current,te.current,de.current,ye.current,V?.beforeOutsideRef.current,V?.afterOutsideRef.current,R.current.includes("reference")||D?T:null].filter(wt=>wt!=null),ut=d||D?uq(Ue,!P,P):uq(Ue);return()=>{ut()}},[r,T,O,d,R,V,D,z,P,W,q]),br(()=>{if(r||!Jr(oe))return;const De=fi(oe),Ze=wo(De);queueMicrotask(()=>{const Xe=ce(oe),Ue=M.current,ut=(typeof Ue=="number"?Xe[Ue]:Ue.current)||oe,wt=di(oe,Ze);!A&&!wt&&x&&Tu(ut,{preventScroll:ut===oe})})},[r,x,oe,A,ce,M]),br(()=>{if(r||!oe)return;let De=!1;const Ze=fi(oe),Xe=wo(Ze);let ut=I.current.openEvent;d0(Xe);function wt(nn){let{open:xe,reason:ve,event:ke,nested:Ae}=nn;xe&&(ut=ke),ve==="escape-key"&&T&&d0(T),["hover","safe-polygon"].includes(ve)&&ke.type==="mouseleave"&&(J.current=!0),ve==="outside-press"&&(Ae?(J.current=!1,De=!0):J.current=!(DF(ke)||X1(ke)))}E.on("openchange",wt);const Tt=Ze.createElement("span");Tt.setAttribute("tabindex","-1"),Tt.setAttribute("aria-hidden","true"),Object.assign(Tt.style,Bb),ne&&T&&T.insertAdjacentElement("afterend",Tt);function Ut(){return typeof F.current=="boolean"?pq()||Tt:F.current.current||Tt}return()=>{E.off("openchange",wt);const nn=wo(Ze),xe=di(O,nn)||W&&Td(W.nodesRef.current,q()).some(Ae=>{var Ve;return di((Ve=Ae.context)==null?void 0:Ve.elements.floating,nn)});(xe||ut&&["click","mousedown"].includes(ut.type))&&T&&d0(T);const ke=Ut();queueMicrotask(()=>{const Ae=f7(ke);F.current&&!J.current&&Jr(Ae)&&(!(Ae!==nn&&nn!==Ze.body)||xe)&&Ae.focus({preventScroll:De}),Tt.remove()})}},[r,O,oe,F,I,E,W,ne,T,q]),K.useEffect(()=>{queueMicrotask(()=>{J.current=!1})},[r]),br(()=>{if(!r&&V)return V.setFocusManagerState({modal:d,closeOnFocusOut:h,open:x,onOpenChange:w,domReference:T}),()=>{V.setFocusManagerState(null)}},[r,V,d,x,w,h,T]),br(()=>{if(r||!oe||typeof MutationObserver!="function"||A)return;const De=()=>{const Xe=oe.getAttribute("tabindex"),Ue=X(),ut=wo(fi(O)),wt=Ue.indexOf(ut);wt!==-1&&(se.current=wt),R.current.includes("floating")||ut!==T&&Ue.length===0?Xe!=="0"&&oe.setAttribute("tabindex","0"):Xe!=="-1"&&oe.setAttribute("tabindex","-1")};De();const Ze=new MutationObserver(De);return Ze.observe(oe,{childList:!0,subtree:!0,attributes:!0}),()=>{Ze.disconnect()}},[r,O,oe,T,R,X,A]);function ze(De){return r||!p||!d?null:f.jsx(p7,{ref:De==="start"?B:te,onClick:Ze=>w(!1,Ze.nativeEvent),children:typeof p=="string"?p:"Dismiss"})}const qe=!r&&z&&(d?!D:!0)&&(ne||d);return f.jsxs(f.Fragment,{children:[qe&&f.jsx(Dv,{"data-type":"inside",ref:_e,onFocus:De=>{if(d){const Xe=ce();Tu(i[0]==="reference"?Xe[0]:Xe[Xe.length-1])}else if(V!=null&&V.preserveTabOrder&&V.portalNode)if(J.current=!1,th(De,V.portalNode)){const Xe=uD()||T;Xe?.focus()}else{var Ze;(Ze=V.beforeOutsideRef.current)==null||Ze.focus()}}}),!D&&ze("start"),n,ze("end"),qe&&f.jsx(Dv,{"data-type":"inside",ref:Ne,onFocus:De=>{if(d)Tu(ce()[0]);else if(V!=null&&V.preserveTabOrder&&V.portalNode)if(h&&(J.current=!0),th(De,V.portalNode)){const Xe=cD()||T;Xe?.focus()}else{var Ze;(Ze=V.afterOutsideRef.current)==null||Ze.focus()}}})]})}let Hg=0;function h7(){const t=/iP(hone|ad|od)|iOS/.test(Y1()),e=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=e.left?parseFloat(e.left):window.scrollX,o=e.top?parseFloat(e.top):window.scrollY;if(e.overflow="hidden",i&&(e[r]=i+"px"),t){var l,c;const d=((l=window.visualViewport)==null?void 0:l.offsetLeft)||0,p=((c=window.visualViewport)==null?void 0:c.offsetTop)||0;Object.assign(e,{position:"fixed",top:-(o-Math.floor(p))+"px",left:-(s-Math.floor(d))+"px",right:"0"})}return()=>{Object.assign(e,{overflow:"",[r]:""}),t&&(Object.assign(e,{position:"",top:"",left:"",right:""}),window.scrollTo(s,o))}}let hq=()=>{};const m7=K.forwardRef(function(e,n){const{lockScroll:r=!1,...i}=e;return br(()=>{if(r)return Hg++,Hg===1&&(hq=h7()),()=>{Hg--,Hg===0&&hq()}},[r]),f.jsx("div",{ref:n,...i,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}})});function mq(t){return Jr(t.target)&&t.target.tagName==="BUTTON"}function gq(t){return eN(t)}function aN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:l="click",toggle:c=!0,ignoreMouse:d=!1,keyboardHandlers:p=!0,stickIfOpen:h=!0}=e,b=K.useRef(),x=K.useRef(!1),w=K.useMemo(()=>({onPointerDown(E){b.current=E.pointerType},onMouseDown(E){const I=b.current;E.button===0&&l!=="click"&&(Rh(I,!0)&&d||(n&&c&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="mousedown")?r(!1,E.nativeEvent,"click"):(E.preventDefault(),r(!0,E.nativeEvent,"click"))))},onClick(E){const I=b.current;if(l==="mousedown"&&b.current){b.current=void 0;return}Rh(I,!0)&&d||(n&&c&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="click")?r(!1,E.nativeEvent,"click"):r(!0,E.nativeEvent,"click"))},onKeyDown(E){b.current=void 0,!(E.defaultPrevented||!p||mq(E))&&(E.key===" "&&!gq(s)&&(E.preventDefault(),x.current=!0),E.key==="Enter"&&r(!(n&&c),E.nativeEvent,"click"))},onKeyUp(E){E.defaultPrevented||!p||mq(E)||gq(s)||E.key===" "&&x.current&&(x.current=!1,r(!(n&&c),E.nativeEvent,"click"))}}),[i,s,l,d,p,r,n,h,c]);return K.useMemo(()=>o?{reference:w}:{},[o,w])}const g7={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},y7={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},yq=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function lN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=t,{enabled:o=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:d="pointerdown",referencePress:p=!1,referencePressEvent:h="pointerdown",ancestorScroll:b=!1,bubbles:x,capture:w}=e,E=uf(),I=Di(typeof c=="function"?c:()=>!1),T=typeof c=="function"?I:c,O=K.useRef(!1),q=K.useRef(!1),{escapeKey:A,outsidePress:D}=yq(x),{escapeKey:L,outsidePress:z}=yq(w),P=K.useRef(!1),R=Di(te=>{var J;if(!n||!o||!l||te.key!=="Escape"||P.current)return;const le=(J=s.current.floatingContext)==null?void 0:J.nodeId,se=E?Td(E.nodesRef.current,le):[];if(!A&&(te.stopPropagation(),se.length>0)){let ne=!0;if(se.forEach(oe=>{var X;if((X=oe.context)!=null&&X.open&&!oe.context.dataRef.current.__escapeKeyBubbles){ne=!1;return}}),!ne)return}r(!1,$9(te)?te.nativeEvent:te,"escape-key")}),M=Di(te=>{var J;const le=()=>{var se;R(te),(se=Tl(te))==null||se.removeEventListener("keydown",le)};(J=Tl(te))==null||J.addEventListener("keydown",le)}),F=Di(te=>{var J;const le=O.current;O.current=!1;const se=q.current;if(q.current=!1,d==="click"&&se||le||typeof T=="function"&&!T(te))return;const ne=Tl(te),oe="["+rc("inert")+"]",X=fi(i.floating).querySelectorAll(oe);let ce=ur(ne)?ne:null;for(;ce&&!Pa(ce);){const Ne=za(ce);if(Pa(Ne)||!ur(Ne))break;ce=Ne}if(X.length&&ur(ne)&&!B9(ne)&&!di(ne,i.floating)&&Array.from(X).every(Ne=>!di(ce,Ne)))return;if(Jr(ne)&&B){const Ne=Pa(ne),ze=ro(ne),qe=/auto|scroll/,De=Ne||qe.test(ze.overflowX),Ze=Ne||qe.test(ze.overflowY),Xe=De&&ne.clientWidth>0&&ne.scrollWidth>ne.clientWidth,Ue=Ze&&ne.clientHeight>0&&ne.scrollHeight>ne.clientHeight,ut=ze.direction==="rtl",wt=Ue&&(ut?te.offsetX<=ne.offsetWidth-ne.clientWidth:te.offsetX>ne.clientWidth),Tt=Xe&&te.offsetY>ne.clientHeight;if(wt||Tt)return}const de=(J=s.current.floatingContext)==null?void 0:J.nodeId,ye=E&&Td(E.nodesRef.current,de).some(Ne=>{var ze;return s0(te,(ze=Ne.context)==null?void 0:ze.elements.floating)});if(s0(te,i.floating)||s0(te,i.domReference)||ye)return;const _e=E?Td(E.nodesRef.current,de):[];if(_e.length>0){let Ne=!0;if(_e.forEach(ze=>{var qe;if((qe=ze.context)!=null&&qe.open&&!ze.context.dataRef.current.__outsidePressBubbles){Ne=!1;return}}),!Ne)return}r(!1,te,"outside-press")}),W=Di(te=>{var J;const le=()=>{var se;F(te),(se=Tl(te))==null||se.removeEventListener(d,le)};(J=Tl(te))==null||J.addEventListener(d,le)});K.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=A,s.current.__outsidePressBubbles=D;let te=-1;function J(X){r(!1,X,"ancestor-scroll")}function le(){window.clearTimeout(te),P.current=!0}function se(){te=window.setTimeout(()=>{P.current=!1},Db()?5:0)}const ne=fi(i.floating);l&&(ne.addEventListener("keydown",L?M:R,L),ne.addEventListener("compositionstart",le),ne.addEventListener("compositionend",se)),T&&ne.addEventListener(d,z?W:F,z);let oe=[];return b&&(ur(i.domReference)&&(oe=Dl(i.domReference)),ur(i.floating)&&(oe=oe.concat(Dl(i.floating))),!ur(i.reference)&&i.reference&&i.reference.contextElement&&(oe=oe.concat(Dl(i.reference.contextElement)))),oe=oe.filter(X=>{var ce;return X!==((ce=ne.defaultView)==null?void 0:ce.visualViewport)}),oe.forEach(X=>{X.addEventListener("scroll",J,{passive:!0})}),()=>{l&&(ne.removeEventListener("keydown",L?M:R,L),ne.removeEventListener("compositionstart",le),ne.removeEventListener("compositionend",se)),T&&ne.removeEventListener(d,z?W:F,z),oe.forEach(X=>{X.removeEventListener("scroll",J)}),window.clearTimeout(te)}},[s,i,l,T,d,n,r,b,o,A,D,R,L,M,F,z,W]),K.useEffect(()=>{O.current=!1},[T,d]);const V=K.useMemo(()=>({onKeyDown:R,...p&&{[g7[h]]:te=>{r(!1,te.nativeEvent,"reference-press")},...h!=="click"&&{onClick(te){r(!1,te.nativeEvent,"reference-press")}}}}),[R,r,p,h]),B=K.useMemo(()=>({onKeyDown:R,onMouseDown(){q.current=!0},onMouseUp(){q.current=!0},[y7[d]]:()=>{O.current=!0}}),[R,d]);return K.useMemo(()=>o?{reference:V,floating:B}:{},[o,V,B])}function v7(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=sN(),s=K.useRef({}),[o]=K.useState(()=>iD()),l=mm()!=null,[c,d]=K.useState(r.reference),p=Di((x,w,E)=>{s.current.openEvent=x?w:void 0,o.emit("openchange",{open:x,event:w,reason:E,nested:l}),n?.(x,w,E)}),h=K.useMemo(()=>({setPositionReference:d}),[]),b=K.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return K.useMemo(()=>({dataRef:s,open:e,onOpenChange:p,elements:b,events:o,floatingId:i,refs:h}),[e,p,b,o,i,h])}function uN(t){t===void 0&&(t={});const{nodeId:e}=t,n=v7({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=K.useState(null),[l,c]=K.useState(null),p=i?.domReference||s,h=K.useRef(null),b=uf();br(()=>{p&&(h.current=p)},[p]);const x=zQ({...t,elements:{...i,...l&&{reference:l}}}),w=K.useCallback(q=>{const A=ur(q)?{getBoundingClientRect:()=>q.getBoundingClientRect(),contextElement:q}:q;c(A),x.refs.setReference(A)},[x.refs]),E=K.useCallback(q=>{(ur(q)||q===null)&&(h.current=q,o(q)),(ur(x.refs.reference.current)||x.refs.reference.current===null||q!==null&&!ur(q))&&x.refs.setReference(q)},[x.refs]),I=K.useMemo(()=>({...x.refs,setReference:E,setPositionReference:w,domReference:h}),[x.refs,E,w]),T=K.useMemo(()=>({...x.elements,domReference:p}),[x.elements,p]),O=K.useMemo(()=>({...x,...r,refs:I,elements:T,nodeId:e}),[x,I,T,e,r]);return br(()=>{r.dataRef.current.floatingContext=O;const q=b?.nodesRef.current.find(A=>A.id===e);q&&(q.context=O)}),K.useMemo(()=>({...x,context:O,refs:I,elements:T}),[x,I,T,O])}function b7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=t,{enabled:l=!0,visibleOnly:c=!0}=e,d=K.useRef(!1),p=K.useRef(),h=K.useRef(!0);K.useEffect(()=>{if(!l)return;const x=ps(o.domReference);function w(){!n&&Jr(o.domReference)&&o.domReference===wo(fi(o.domReference))&&(d.current=!0)}function E(){h.current=!0}return x.addEventListener("blur",w),x.addEventListener("keydown",E,!0),()=>{x.removeEventListener("blur",w),x.removeEventListener("keydown",E,!0)}},[o.domReference,n,l]),K.useEffect(()=>{if(!l)return;function x(w){let{reason:E}=w;(E==="reference-press"||E==="escape-key")&&(d.current=!0)}return i.on("openchange",x),()=>{i.off("openchange",x)}},[i,l]),K.useEffect(()=>()=>{clearTimeout(p.current)},[]);const b=K.useMemo(()=>({onPointerDown(x){X1(x.nativeEvent)||(h.current=!1)},onMouseLeave(){d.current=!1},onFocus(x){if(d.current)return;const w=Tl(x.nativeEvent);if(c&&ur(w))try{if(LF()&&L9())throw Error();if(!w.matches(":focus-visible"))return}catch{if(!h.current&&!eN(w))return}r(!0,x.nativeEvent,"focus")},onBlur(x){d.current=!1;const w=x.relatedTarget,E=x.nativeEvent,I=ur(w)&&w.hasAttribute(rc("focus-guard"))&&w.getAttribute("data-type")==="outside";p.current=window.setTimeout(()=>{var T;const O=wo(o.domReference?o.domReference.ownerDocument:document);!w&&O===o.domReference||di((T=s.current.floatingContext)==null?void 0:T.refs.floating.current,O)||di(o.domReference,O)||I||r(!1,E,"focus")})}}),[s,o.domReference,r,c]);return K.useMemo(()=>l?{reference:b}:{},[l,b])}const vq="active",bq="selected";function f0(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[vq]:o,[bq]:l,...c}=t;s=c}return{...n==="floating"&&{tabIndex:-1,[RE]:""},...s,...e.map(o=>{const l=o?o[n]:null;return typeof l=="function"?t?l(t):null:l}).concat(t).reduce((o,l)=>(l&&Object.entries(l).forEach(c=>{let[d,p]=c;if(!(i&&[vq,bq].includes(d)))if(d.indexOf("on")===0){if(r.has(d)||r.set(d,[]),typeof p=="function"){var h;(h=r.get(d))==null||h.push(p),o[d]=function(){for(var b,x=arguments.length,w=new Array(x),E=0;E<x;E++)w[E]=arguments[E];return(b=r.get(d))==null?void 0:b.map(I=>I(...w)).find(I=>I!==void 0)}}}else o[d]=p}),o),{})}}function cN(t){t===void 0&&(t=[]);const e=t.map(l=>l?.reference),n=t.map(l=>l?.floating),r=t.map(l=>l?.item),i=K.useCallback(l=>f0(l,t,"reference"),e),s=K.useCallback(l=>f0(l,t,"floating"),n),o=K.useCallback(l=>f0(l,t,"item"),r);return K.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function zb(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function xq(t,e){return zb(e,t===iN||t===hm,t===Ll||t===Ml)}function p0(t,e,n){return zb(e,t===hm,n?t===Ll:t===Ml)||t==="Enter"||t===" "||t===""}function x7(t,e,n){return zb(e,n?t===Ll:t===Ml,t===hm)}function _q(t,e,n){return zb(e,n?t===Ml:t===Ll,t===iN)}function _7(t,e){const{open:n,onOpenChange:r,elements:i}=t,{listRef:s,activeIndex:o,onNavigate:l=()=>{},enabled:c=!0,selectedIndex:d=null,allowEscape:p=!1,loop:h=!1,nested:b=!1,rtl:x=!1,virtual:w=!1,focusItemOnOpen:E="auto",focusItemOnHover:I=!0,openOnArrowKeyDown:T=!0,disabledIndices:O=void 0,orientation:q="vertical",cols:A=1,scrollItemIntoView:D=!0,virtualItemRef:L,itemSizes:z,dense:P=!1}=e,R=jE(i.floating),M=Li(R),F=mm(),W=uf(),V=Di(()=>{l(J.current===-1?null:J.current)}),B=MF(i.domReference),te=K.useRef(E),J=K.useRef(d??-1),le=K.useRef(null),se=K.useRef(!0),ne=K.useRef(V),oe=K.useRef(!!i.floating),X=K.useRef(n),ce=K.useRef(!1),de=K.useRef(!1),ye=Li(O),_e=Li(n),Ne=Li(D),ze=Li(d),[qe,De]=K.useState(),[Ze,Xe]=K.useState(),Ue=Di(()=>{function ve(Ve){w?(De(Ve.id),W?.events.emit("virtualfocus",Ve),L&&(L.current=Ve)):Tu(Ve,{sync:ce.current,preventScroll:!0})}const ke=s.current[J.current];ke&&ve(ke),(ce.current?Ve=>Ve():requestAnimationFrame)(()=>{const Ve=s.current[J.current]||ke;if(!Ve)return;ke||ve(Ve);const rt=Ne.current;rt&&wt&&(de.current||!se.current)&&(Ve.scrollIntoView==null||Ve.scrollIntoView(typeof rt=="boolean"?{block:"nearest",inline:"nearest"}:rt))})});br(()=>{c&&(n&&i.floating?te.current&&d!=null&&(de.current=!0,J.current=d,V()):oe.current&&(J.current=-1,ne.current()))},[c,n,i.floating,d,V]),br(()=>{if(c&&n&&i.floating)if(o==null){if(ce.current=!1,ze.current!=null)return;if(oe.current&&(J.current=-1,Ue()),(!X.current||!oe.current)&&te.current&&(le.current!=null||te.current===!0&&le.current==null)){let ve=0;const ke=()=>{s.current[0]==null?(ve<2&&(ve?requestAnimationFrame:queueMicrotask)(ke),ve++):(J.current=le.current==null||p0(le.current,q,x)||b?l0(s,ye.current):rq(s,ye.current),le.current=null,V())};ke()}}else eh(s,o)||(J.current=o,Ue(),de.current=!1)},[c,n,i.floating,o,ze,b,s,q,x,V,Ue,ye]),br(()=>{var ve;if(!c||i.floating||!W||w||!oe.current)return;const ke=W.nodesRef.current,Ae=(ve=ke.find(Me=>Me.id===F))==null||(ve=ve.context)==null?void 0:ve.elements.floating,Ve=wo(fi(i.floating)),rt=ke.some(Me=>Me.context&&di(Me.context.elements.floating,Ve));Ae&&!rt&&se.current&&Ae.focus({preventScroll:!0})},[c,i.floating,W,F,w]),br(()=>{if(!c||!W||!w||F)return;function ve(ke){Xe(ke.id),L&&(L.current=ke)}return W.events.on("virtualfocus",ve),()=>{W.events.off("virtualfocus",ve)}},[c,W,w,F,L]),br(()=>{ne.current=V,X.current=n,oe.current=!!i.floating}),br(()=>{n||(le.current=null)},[n]);const ut=o!=null,wt=K.useMemo(()=>{function ve(Ae){if(!n)return;const Ve=s.current.indexOf(Ae);Ve!==-1&&J.current!==Ve&&(J.current=Ve,V())}return{onFocus(Ae){let{currentTarget:Ve}=Ae;ce.current=!0,ve(Ve)},onClick:Ae=>{let{currentTarget:Ve}=Ae;return Ve.focus({preventScroll:!0})},...I&&{onMouseMove(Ae){let{currentTarget:Ve}=Ae;ce.current=!0,de.current=!1,ve(Ve)},onPointerLeave(Ae){let{pointerType:Ve}=Ae;if(!(!se.current||Ve==="touch")&&(ce.current=!0,J.current=-1,V(),!w)){var rt;(rt=M.current)==null||rt.focus({preventScroll:!0})}}}}},[n,M,I,s,V,w]),Tt=Di(ve=>{if(se.current=!1,ce.current=!0,ve.which===229||!_e.current&&ve.currentTarget===M.current)return;if(b&&_q(ve.key,q,x)){Ai(ve),r(!1,ve.nativeEvent,"list-navigation"),Jr(i.domReference)&&(w?W?.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const ke=J.current,Ae=l0(s,O),Ve=rq(s,O);if(B||(ve.key==="Home"&&(Ai(ve),J.current=Ae,V()),ve.key==="End"&&(Ai(ve),J.current=Ve,V())),A>1){const rt=z||Array.from({length:s.current.length},()=>({width:1,height:1})),Me=KQ(rt,A,P),ct=Me.findIndex(hn=>hn!=null&&!Ty(s.current,hn,O)),Qt=Me.reduce((hn,cr,Dn)=>cr!=null&&!Ty(s.current,cr,O)?Dn:hn,-1),Kt=Me[QQ({current:Me.map(hn=>hn!=null?s.current[hn]:null)},{event:ve,orientation:q,loop:h,rtl:x,cols:A,disabledIndices:ZQ([...O||s.current.map((hn,cr)=>Ty(s.current,cr)?cr:void 0),void 0],Me),minIndex:ct,maxIndex:Qt,prevIndex:GQ(J.current>Ve?Ae:J.current,rt,Me,A,ve.key===hm?"bl":ve.key===(x?Ll:Ml)?"tr":"tl"),stopEvent:!0})];if(Kt!=null&&(J.current=Kt,V()),q==="both")return}if(xq(ve.key,q)){if(Ai(ve),n&&!w&&wo(ve.currentTarget.ownerDocument)===ve.currentTarget){J.current=p0(ve.key,q,x)?Ae:Ve,V();return}p0(ve.key,q,x)?h?J.current=ke>=Ve?p&&ke!==s.current.length?-1:Ae:xi(s,{startingIndex:ke,disabledIndices:O}):J.current=Math.min(Ve,xi(s,{startingIndex:ke,disabledIndices:O})):h?J.current=ke<=Ae?p&&ke!==-1?s.current.length:Ve:xi(s,{startingIndex:ke,decrement:!0,disabledIndices:O}):J.current=Math.max(Ae,xi(s,{startingIndex:ke,decrement:!0,disabledIndices:O})),eh(s,J.current)&&(J.current=-1),V()}}),Ut=K.useMemo(()=>w&&n&&ut&&{"aria-activedescendant":Ze||qe},[w,n,ut,Ze,qe]),nn=K.useMemo(()=>({"aria-orientation":q==="both"?void 0:q,...B?{}:Ut,onKeyDown:Tt,onPointerMove(){se.current=!0}}),[Ut,Tt,q,B]),xe=K.useMemo(()=>{function ve(Ae){E==="auto"&&DF(Ae.nativeEvent)&&(te.current=!0)}function ke(Ae){te.current=E,E==="auto"&&X1(Ae.nativeEvent)&&(te.current=!0)}return{...Ut,onKeyDown(Ae){se.current=!1;const Ve=Ae.key.startsWith("Arrow"),rt=["Home","End"].includes(Ae.key),Me=Ve||rt,ct=x7(Ae.key,q,x),Qt=_q(Ae.key,q,x),Kt=xq(Ae.key,q),hn=(b?ct:Kt)||Ae.key==="Enter"||Ae.key.trim()==="";if(w&&n){const Oi=W?.nodesRef.current.find(Gt=>Gt.parentId==null),Tr=W&&Oi?i7(W.nodesRef.current,Oi.id):null;if(Me&&Tr&&L){const Gt=new KeyboardEvent("keydown",{key:Ae.key,bubbles:!0});if(ct||Qt){var cr,Dn;const Ki=((cr=Tr.context)==null?void 0:cr.elements.domReference)===Ae.currentTarget,Gi=Qt&&!Ki?(Dn=Tr.context)==null?void 0:Dn.elements.domReference:ct?s.current.find(Zi=>Zi?.id===qe):null;Gi&&(Ai(Ae),Gi.dispatchEvent(Gt),Xe(void 0))}if((Kt||rt)&&Tr.context&&Tr.context.open&&Tr.parentId&&Ae.currentTarget!==Tr.context.elements.domReference){var Hr;Ai(Ae),(Hr=Tr.context.elements.domReference)==null||Hr.dispatchEvent(Gt);return}}return Tt(Ae)}if(!(!n&&!T&&Ve)){if(hn&&(le.current=b&&Kt?null:Ae.key),b){ct&&(Ai(Ae),n?(J.current=l0(s,ye.current),V()):r(!0,Ae.nativeEvent,"list-navigation"));return}Kt&&(d!=null&&(J.current=d),Ai(Ae),!n&&T?r(!0,Ae.nativeEvent,"list-navigation"):Tt(Ae),n&&V())}},onFocus(){n&&!w&&(J.current=-1,V())},onPointerDown:ke,onPointerEnter:ke,onMouseDown:ve,onClick:ve}},[qe,Ut,Tt,ye,E,s,b,V,r,n,T,q,x,d,W,w,L]);return K.useMemo(()=>c?{reference:xe,floating:nn,item:wt}:{},[c,xe,nn,wt])}const wq=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Zc(t,e){return typeof t=="function"?t(e):t}function w7(t,e){const[n,r]=K.useState(t);return t&&!n&&r(!0),K.useEffect(()=>{if(!t&&n){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,n,e]),n}function S7(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[l,c]=K.useState("unmounted"),d=w7(n,o);return!d&&l==="close"&&c("unmounted"),br(()=>{if(r){if(n){c("initial");const p=requestAnimationFrame(()=>{c("open")});return()=>{cancelAnimationFrame(p)}}c("close")}},[n,r]),{isMounted:d,status:l}}function dN(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:s,duration:o=250}=e,l=t.placement,c=l.split("-")[0],d=K.useMemo(()=>({side:c,placement:l}),[c,l]),p=typeof o=="number",h=(p?o:o.open)||0,b=(p?o:o.close)||0,[x,w]=K.useState(()=>({...Zc(s,d),...Zc(n,d)})),{isMounted:E,status:I}=S7(t,{duration:o}),T=Li(n),O=Li(r),q=Li(i),A=Li(s);return br(()=>{const D=Zc(T.current,d),L=Zc(q.current,d),z=Zc(A.current,d),P=Zc(O.current,d)||Object.keys(D).reduce((R,M)=>(R[M]="",R),{});if(I==="initial"&&w(R=>({transitionProperty:R.transitionProperty,...z,...D})),I==="open"&&w({transitionProperty:Object.keys(P).map(wq).join(","),transitionDuration:h+"ms",...z,...P}),I==="close"){const R=L||D;w({transitionProperty:Object.keys(R).map(wq).join(","),transitionDuration:b+"ms",...z,...R})}},[b,q,T,O,A,h,I,d]),{isMounted:E,styles:x}}const E7=K.createContext({close(){}}),N7=yn({slot:{target:["flex","justify-center","items-center"],portal:[]},variant:{mounted:{true:[]}},match:[{if:{mounted:!1},then:{portal:["hidden"]}}],defaults:{mounted:!1}}),k7=({target:t,action:e="hover",disabled:n=!1,closeOnClick:r=!1,delay:i=100,float:s,variant:o,tva:l=N7,css:c,children:d})=>{const[p,h]=K.useState(!1),{refs:b,floatingStyles:x,context:w}=uN({open:p,onOpenChange:h,placement:"top",whileElementsMounted:XF,middleware:[tD(10),nD({fallbackAxisSideDirection:"start"}),WQ()],...s}),{getReferenceProps:E,getFloatingProps:I}=cN([r7(w,{enabled:e==="hover",delay:i}),aN(w,{enabled:e==="click"}),b7(w),lN(w)]),{isMounted:T,styles:O}=dN(w),q=l({mounted:T,...o,css:c}).slots;return f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",ref:b.setReference,...E(),disabled:n,className:q.target(),children:t}),f.jsx(oN,{children:f.jsx("div",{ref:b.setFloating,style:{...x,...O},className:q.portal(),...I(),onClick:r?()=>{h(!1)}:void 0,children:f.jsx(E7.Provider,{value:{close(){h(!1)}},children:d})})})]})},hD="icon-[system-uicons--menu-hamburger]",mD=yn({slot:{base:[]},variant:{size:{xs:"text-sm",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl"},disabled:{true:[]}},match:[{if:{disabled:!0},then:{base:["pointer-events-none","cursor-not-allowed","text-gray-400","opacity-50"]}}],defaults:{size:"xl",disabled:!1}}),rn=({icon:t,variant:e,tva:n=mD,css:r,...i})=>{const s=n({...e,css:r}).slots;return t?f.jsx("div",{className:s.base({css:[t]}),...i}):null},I7=yn({slot:{base:["p-1","bg-slate-50","border","border-slate-300","rounded","shadow-md","text-slate-500","flex","flex-col","gap-2"]},variant:{},defaults:{}}),Hn=({icon:t=hD,iconProps:e,children:n,variant:r,tva:i=I7,css:s,...o})=>{const l=i({...r,css:s}).slots;return f.jsx(n7,{children:f.jsx(k7,{action:"click",target:f.jsx(rn,{icon:t,...e}),delay:100,float:{placement:"bottom-start"},closeOnClick:!0,...o,children:f.jsx("div",{className:l.base(),children:n})})})},gD="icon-[svg-spinners--90-ring-with-bg]",C7=yn({slot:{base:["flex","items-center","justify-center","gap-2","group","w-fit","h-fit","rounded","cursor-pointer","hover:shadow-md","hover:shadow-slate-200","transition-all","hover:bg-slate-200","text-slate-600","text-2xl","p-1"]},variant:{disabled:{true:["cursor-not-allowed","pointer-events-none"]},loading:{true:["cursor-not-allowed","pointer-events-none"]}},match:[{if:{disabled:!0},then:{base:["opacity-50","hover:bg-blue-400"]}}],defaults:{disabled:!1,loading:!1}}),gm=({iconEnabled:t,iconDisabled:e,iconLoading:n=gD,disabled:r=!1,loading:i=!1,onClick:s,variant:o,tva:l=C7,css:c,children:d,...p})=>{const h=l({disabled:r,loading:i,...o,css:c}).slots;return f.jsxs("div",{className:h.base(),onClick:r?void 0:s,...p,children:[r?f.jsx(rn,{icon:i?n:e??t}):f.jsx(rn,{icon:i?n:t}),d]})},fN="icon-[iconamoon--close-light]",Wb=K.createContext(void 0),T7=yn({slot:{base:["bg-slate-500","bg-opacity-75","backdrop-blur-sm","flex","justify-center","py-12"],target:[],modal:["bg-white","rounded","shadow-lg","p-4","w-fit","h-fit","max-h-full","overflow-y-auto","relative","w-2/3","max-w-1/2"]},variant:{disabled:{true:["pointer-events-none"]},loading:{true:[]}},match:[{if:{loading:!0},then:{base:["pointer-events-none","opacity-50"]}}],defaults:{disabled:!1,loading:!1}}),cf=({target:t,icon:e,textTitle:n,disabled:r=!1,defaultOpen:i=!1,outside:s=!1,variant:o,css:l,tva:c=T7,children:d})=>{const[p,h]=K.useState(i),b=e7(),{refs:x,context:w}=uN({nodeId:b,open:p,onOpenChange:h}),E=aN(w),I=lN(w,{outsidePress:s}),{getReferenceProps:T,getFloatingProps:O}=cN([E,I]),{isMounted:q,styles:A}=dN(w),D=c({disabled:r,...o,css:l}).slots;return f.jsxs(Wb.Provider,{value:{close(){h(!1)}},children:[f.jsx("div",{ref:x.setReference,...T({disabled:r}),className:D.target(),children:t}),f.jsx(t7,{id:b,children:q&&f.jsx(f.Fragment,{children:f.jsx(oN,{children:f.jsx(m7,{lockScroll:!0,style:A,className:D.base(),children:f.jsx(pD,{context:w,children:f.jsxs("div",{ref:x.setFloating,...O(),className:D.modal(),children:[f.jsxs("div",{className:"border-b border-slate-200 mb-2 py-1.5 flex flex-row items-center justify-between select-none",children:[f.jsxs("div",{className:"flex flex-row items-center gap-2 pr-4",children:[e&&(kb(e)?f.jsx(rn,{icon:e,variant:{size:"xl"}}):e),n&&f.jsx("div",{className:"text-lg font-semibold text-slate-700",children:n})]}),f.jsx(gm,{iconEnabled:fN,onClick:()=>h(!1)})]}),q9(d)?f.jsx(d,{close:()=>h(!1)}):d]})})})})})})]})},O7=yn({use:jF,slot:{},variant:{},defaults:{}}),gn=({icon:t,iconProps:e,label:n,disabled:r=!1,hidden:i=!1,variant:s,tva:o=O7,css:l,...c})=>{const d=o({...s,disabled:r,css:l}).slots;return i?null:f.jsxs("div",{className:d.base(),children:[kb(t)?f.jsx(rn,{icon:t,...e}):t,f.jsx(cf,{icon:t,target:n,disabled:r,css:{modal:["w-1/2"]},...c})]})},q7=yn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-2xl","bg-blue-50","border","border-blue-200","text-xs","px-4","py-0.5","font-bold"]},variant:{},defaults:{}}),hs=({variant:t,tva:e=q7,css:n,...r})=>{const i=e({...t,css:n}).slots;return f.jsx("div",{className:i.base(),...r})},AE="icon-[material-symbols-light--check-small]",R7="icon-[material-symbols-light--close-small]",j7="icon-[material-symbols-light--check-indeterminate-small]",A7=yn({use:mD,slot:{},variant:{value:{true:"text-green-600",false:"text-amber-600"}},defaults:{value:!1}}),Ub=({value:t,checkIcon:e=AE,unCheckIcon:n=R7,undefinedIcon:r=j7,tva:i=A7,...s})=>t==null?f.jsx(rn,{icon:r,tva:i,...s}):f.jsx(rn,{icon:t?e:n,tva:o=>i({...o,value:t}),...s}),P7=yn({slot:{base:["flex","items-center","justify-between","text-sm","font-medium","text-slate-900","w-full"],switch:["relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"]},variant:{},defaults:{}}),yD=({value:t,onChange:e,variant:n,tva:r=P7,css:i,...s})=>{const o=r({...n,css:i}).slots;return f.jsx("div",{className:o.base(),children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:t,className:"sr-only peer",onChange:l=>{e(l.target.checked)},...s}),f.jsx("div",{className:o.switch()})]})})},F7=yn({slot:{base:["flex","flex-row","items-center","justify-center","gap-2","group","rounded","transition-all"]},variant:{variant:{primary:["text-white"],secondary:["text-slate-700"],subtle:["text-slate-600"],danger:["text-slate-50"]},disabled:{true:"cursor-not-allowed"},size:{xs:[],sm:[],md:[]}},match:[{if:{variant:"primary"},then:{base:["bg-blue-400","hover:bg-blue-500"]}},{if:{variant:"primary",disabled:!0},then:{base:["opacity-50","bg-blue-600","hover:bg-blue-600","cursor-not-allowed"]}},{if:{variant:"secondary"},then:{base:["bg-amber-400","hover:bg-amber-500"]}},{if:{variant:"secondary",disabled:!0},then:{base:["opacity-50","bg-amber-600","hover:bg-amber-600","cursor-not-allowed"]}},{if:{variant:"subtle"},then:{base:["text-slate-600","hover:text-slate-800","hover:bg-blue-50"]}},{if:{variant:"subtle",disabled:!0},then:{base:["opacity-50","bg-blue-50","hover:bg-blue-50","cursor-not-allowed"]}},{if:{variant:"danger"},then:{base:["bg-red-400","hover:bg-red-500","hover:text-white"]}},{if:{size:"xs"},then:{base:["py-0.5","px-1"]}},{if:{size:"sm"},then:{base:["py-1","px-2"]}},{if:{size:"md"},then:{base:["py-2","px-4"]}}],defaults:{variant:"primary",disabled:!1,size:"md"}}),Cn=({iconEnabled:t,iconDisabled:e,iconLoading:n=gD,iconProps:r,loading:i,variant:s,tva:o=F7,css:l,children:c,...d})=>{const p=o({disabled:d.disabled,...s,css:l}).slots;return f.jsxs("button",{type:"button",className:p.base({disabled:d.disabled}),...d,children:[d.disabled?f.jsx(rn,{icon:i===!0?n:e,variant:{size:"xl"},...r}):f.jsx(rn,{icon:i===!0?n:t,variant:{size:"xl"},...r}),c]})},pN=K.createContext({inline:!1}),D7=yn({slot:{base:["border","border-slate-100","px-2","py-1","rounded-md"],label:["text-sm","font-semibold","text-slate-600","border-b","mb-2"],value:[]},variant:{inline:{true:[]},withBackground:{true:[]}},match:[{if:{inline:!0},then:{base:["border-none","flex","flex-row","items-center","gap-2"],label:["mb-0","font-light","text-md","text-slate-600","border-none"],value:["text-md","text-slate-800"]}},{if:{withBackground:!0},then:{base:["bg-slate-50","hover:bg-slate-100"]}}],defaults:{inline:!1,withBackground:!0}}),L7=({inline:t,label:e,value:n,variant:r,tva:i=D7,css:s})=>{const o=K.useContext(pN),l=t??o?.inline,c=i({inline:l,...r,css:s}).slots;return f.jsxs("div",{className:c.base(),children:[e?f.jsx("div",{className:c.label(),children:e}):null,f.jsx("div",{className:c.value(),children:n})]})},M7=yn({slot:{base:["flex","flex-col","gap-4","border","border-slate-100","p-4","rounded-lg"]},variant:{inline:{true:["flex-row","border-none","gap-1","p-0","flex-1"]}},defaults:{inline:!1}}),vD=({items:t,hidden:e=[],valueOfProps:n,entity:r,variant:i,tva:s=M7,css:o,inline:l=!1})=>{const c=s({inline:l,...i,css:o}).slots;return f.jsx(pN.Provider,{value:{inline:l},children:f.jsx("div",{className:c.base(),children:t.filter(({id:d})=>!e.includes(d)).map(({id:d,render:p,...h})=>f.jsx(L7,{value:f.jsx(p,{entity:r}),...n,...h},d))})})},$7=yn({slot:{base:["flex","flex-col","gap-2"]},variant:{},defaults:{}}),Sq="icon-[tabler--dots]",B7=yn({slot:{base:["flex","items-center","justify-between","gap-2"],sums:["flex","items-center","gap-2","text-sm"]},variant:{},defaults:{}}),z7=yn({slot:{base:["select-none"],list:["flex","items-center","-space-x-px","text-xs","gap-2"],page:["flex","items-center","justify-center","w-12","px-2","py-1","rounded","border","border-slate-200","hover:bg-slate-200","cursor-pointer","transition-all","duration-200"]},variant:{current:{true:[]}},match:[{if:{current:!0},then:{page:["bg-slate-100","hover:bg-slate-200","text-slate-800","font-bold"]}}],defaults:{current:!1}}),h0=({pages:t,page:e,onPage:n,variant:r,tva:i=z7,css:s})=>{const o=i({...r,css:s}).slots;return f.jsx("nav",{className:o.base(),children:f.jsx("ul",{className:o.list(),children:t.map((l,c)=>f.jsx("li",{className:o.page({current:e===l-1}),onClick:()=>n(l-1),children:l},`page-${l}-${c}`))})})},W7=yn({slot:{base:["cursor-pointer","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded","focus:border-sky-400","focus:outline-none","p-2.5","hover:shadow-md","transition-all","group"],input:["flex","flex-row","items-center","justify-between","gap-2"],popup:["z-50","cursor-pointer","overflow-y-auto","rounded","border","border-slate-300","bg-white","shadow-lg","focus:outline-none"],item:["focus:outline-none","py-2","px-2.5","flex","items-center","justify-between"]},variant:{disabled:{true:["cursor-not-allowed","hover:shadow-none","focus:border-slate-300","opacity-50"]},active:{true:[]},selected:{true:[]}},match:[{if:{selected:!0},then:{item:["bg-slate-100"]}},{if:{active:!0},then:{item:["bg-slate-200"]}}],defaults:{disabled:!1,selected:!1,active:!1}}),U7=({items:t,icon:e,defaultValue:n,render:r,textSelect:i,disabled:s=!1,onItem:o,onSelect:l,onChange:c,value:d,variant:p,tva:h=W7,css:b})=>{const[x,w]=K.useState(!1),[E,I]=K.useState(null),[T,O]=K.useState(t.findIndex(ne=>ne.id===n));K.useEffect(()=>{O(t.findIndex(ne=>ne.id===d))},[d]);const{refs:q,floatingStyles:A,context:D}=uN({placement:"bottom-start",open:x,onOpenChange:w,whileElementsMounted:XF,middleware:[tD(5),nD({padding:10}),UQ({apply({rects:ne,elements:oe,availableHeight:X}){Object.assign(oe.floating.style,{maxHeight:`${X}px`,minWidth:`${ne.reference.width}px`})},padding:10})]}),L=K.useRef([]),z=K.useRef(!1),P=aN(D,{event:"mousedown"}),R=lN(D),M=_7(D,{listRef:L,activeIndex:E,selectedIndex:T,onNavigate:I,loop:!0}),{getReferenceProps:F,getFloatingProps:W,getItemProps:V}=cN([R,M,P]),{isMounted:B,styles:te}=dN(D),J=ne=>{O(ne),w(!1);const oe=t[ne];oe&&o?.(oe),l?.(oe),c?.(oe?.id)},le=T===null?void 0:t[T],se=h({disabled:s,...p,css:b}).slots;return f.jsxs(f.Fragment,{children:[f.jsx("div",{tabIndex:s?-1:0,ref:s?void 0:q.setReference,"aria-labelledby":"select-label","aria-autocomplete":"none",...s?{}:F(),className:se.base(),children:f.jsxs("div",{className:se.input(),children:[e?f.jsx(rn,{icon:e,variant:{size:"xl"},css:{base:["text-slate-400","group-hover:text-slate-600"]}}):null,le?f.jsx(r,{entity:le}):i||Bl.rich("Select item"),f.jsx(rn,{icon:"icon-[gg--select]",variant:{size:"xl"},css:{base:[!x&&"text-slate-400",x&&"text-slate-600","group-hover:text-slate-600"]}})]})}),B&&f.jsx(oN,{children:f.jsx(pD,{context:D,modal:!1,children:f.jsx("div",{ref:q.setFloating,style:{...A,...te},className:se.popup(),...W(),children:t.map((ne,oe)=>f.jsxs("div",{ref:X=>{L.current[oe]=X},role:"option",tabIndex:oe===E?0:-1,"aria-selected":oe===T&&oe===E,className:se.item({selected:oe===T,active:oe===E}),...V({onClick(){J(oe)},onKeyDown(X){X.key==="Enter"&&(X.preventDefault(),J(oe)),X.key===" "&&!z.current&&(X.preventDefault(),J(oe))}}),children:[f.jsx(r,{entity:ne}),oe===T&&f.jsx(rn,{icon:"icon-[basil--check-outline]",variant:{size:"xl"}})]},ne.id))})})})]})},V7=({sizes:t=[5,15,30,50,100],size:e,onSize:n,...r})=>f.jsx(U7,{items:t.map(i=>({id:`${i}`,size:i})),defaultValue:`${e}`,value:`${e}`,onItem:({size:i})=>n(i),render:({entity:{size:i}})=>i,css:{base:["px-8","py-1"],item:["px-8","py-1"]},...r}),Eq=({cursor:t,count:e,textTotal:n,onPage:r,onSize:i,variant:s,tva:o=B7,css:l})=>{const c=K.useMemo(()=>x9({page:t.page,total:Math.ceil(e.filter/t.size),siblings:1,boundaries:1}),[t.page,e.filter,t.size]),d=o({...s,css:l}).slots;return f.jsxs("div",{className:d.base(),children:[c.total>1?f.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[["both","start"].includes(c.type)&&f.jsxs(f.Fragment,{children:[f.jsx(h0,{page:t.page,pages:c.start,onPage:r}),f.jsx(rn,{icon:Sq})]}),f.jsx(h0,{page:t.page,pages:c.pages,onPage:r}),["both","end"].includes(c.type)&&f.jsxs(f.Fragment,{children:[f.jsx(rn,{icon:Sq}),f.jsx(h0,{page:t.page,pages:c.end,onPage:r})]})]}):null,f.jsxs("div",{className:d.sums(),children:[f.jsx("div",{children:n}),f.jsx("div",{className:"font-bold",children:e.filter}),e.filter!==e.where&&f.jsxs(f.Fragment,{children:[f.jsx("div",{children:"/"}),f.jsx("div",{className:"font-semibold",children:e.where})]})]}),f.jsx(V7,{size:t.size,onSize:i})]})},Nq="function",cd="64e10b34-2bf7-4616-9668-f99de5aa046e",H7="get",Q7="has",K7="set",{isArray:Oy}=Array;let{SharedArrayBuffer:Lv,window:G7}=globalThis,{notify:bD,wait:xD,waitAsync:Mv}=Atomics,_D=null;Mv||(Mv=t=>({value:new Promise(e=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=e,n.postMessage(t)})}));try{new Lv(4)}catch{Lv=ArrayBuffer;const e=new WeakMap;if(G7){const n=new Map,{prototype:{postMessage:r}}=Worker,i=s=>{const o=s.data?.[cd];if(!Oy(o)){s.stopImmediatePropagation();const{id:l,sb:c}=o;n.get(l)(c)}};_D=function(s,...o){const l=s?.[cd];if(Oy(l)){const[c,d]=l;e.set(d,c),this.addEventListener("message",i)}return r.call(this,s,...o)},Mv=s=>({value:new Promise(o=>{n.set(e.get(s),o)}).then(o=>{n.delete(e.get(s)),e.delete(s);for(let l=0;l<o.length;l++)s[l]=o[l];return"ok"})})}else{const n=(r,i)=>({[cd]:{id:r,sb:i}});bD=r=>{postMessage(n(e.get(r),r))},addEventListener("message",r=>{const i=r.data?.[cd];if(Oy(i)){const[s,o]=i;e.set(o,s)}})}}const{Int32Array:PE,Map:kq,Uint16Array:FE}=globalThis,{BYTES_PER_ELEMENT:Iq}=PE,{BYTES_PER_ELEMENT:Z7}=FE,J7=(t,e,n)=>{for(;xD(t,0,0,e)==="timed-out";)n()},DE=new WeakSet,m0=new WeakMap,Y7={value:{then:t=>t()}};let X7=0;const hN=(t,{parse:e=JSON.parse,stringify:n=JSON.stringify,transform:r,interrupt:i}=JSON)=>{if(!m0.has(t)){const s=_D||t.postMessage,o=(b,...x)=>s.call(t,{[cd]:x},{transfer:b}),l=typeof i===Nq?i:i?.handler,c=i?.delay||42,d=new TextDecoder("utf-16"),p=(b,x)=>b?Mv(x,0):(l?J7(x,c,l):xD(x,0),Y7);let h=!1;m0.set(t,new Proxy(new kq,{[Q7]:(b,x)=>typeof x=="string"&&!x.startsWith("_"),[H7]:(b,x)=>x==="then"?null:(...w)=>{const E=X7++;let I=new PE(new Lv(Iq*2)),T=[];DE.has(w.at(-1)||T)&&DE.delete(T=w.pop()),o(T,E,I,x,r?w.map(r):w);const O=t!==globalThis;let q=0;return h&&O&&(q=setTimeout(console.warn,1e3,` - Possible deadlock if proxy.${x}(...args) is awaited`)),p(O,I).value.then(()=>{clearTimeout(q);const A=I[1];if(!A)return;const D=Z7*A;return I=new PE(new Lv(D+D%Iq)),o([],E,I),p(O,I).value.then(()=>e(d.decode(new FE(I.buffer).slice(0,A))))})},[K7](b,x,w){const E=typeof w;if(E!==Nq)throw new Error(`Unable to assign ${x} as ${E}`);if(!b.size){const I=new kq;t.addEventListener("message",async T=>{const O=T.data?.[cd];if(Oy(O)){T.stopImmediatePropagation();const[q,A,...D]=O;let L;if(D.length){const[z,P]=D;if(b.has(z)){h=!0;try{const R=await b.get(z)(...P);if(R!==void 0){const M=n(r?r(R):R);I.set(q,M),A[1]=M.length}}catch(R){L=R}finally{h=!1}}else L=new Error(`Unsupported action: ${z}`);A[0]=1}else{const z=I.get(q);I.delete(q);for(let P=new FE(A.buffer),R=0;R<z.length;R++)P[R]=z.charCodeAt(R)}if(bD(A,0),L)throw L}})}return!!b.set(x,w)}}))}return m0.get(t)};hN.transfer=(...t)=>(DE.add(t),t);var mN=(()=>{var t=import.meta.url;return function(e={}){var n,r=e,i,s,o=new Promise((g,y)=>{i=g,s=y}),l=typeof window=="object",c=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;const d=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,d.debugModule("globalThis.location =",globalThis.location);var p=Object.assign({},r),h="./this.program",b="";function x(g){return r.locateFile?r.locateFile(g,b):b+g}var w,E;(l||c)&&(c?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),t&&(b=t),b.startsWith("blob:")?b="":b=b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),c&&(E=g=>{var y=new XMLHttpRequest;return y.open("GET",g,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),w=g=>fetch(g,{credentials:"same-origin"}).then(y=>y.ok?y.arrayBuffer():Promise.reject(new Error(y.status+" : "+y.url))));var I=r.print||console.log.bind(console),T=r.printErr||console.error.bind(console);Object.assign(r,p),p=null,r.arguments&&r.arguments,r.thisProgram&&(h=r.thisProgram);var O=r.wasmBinary,q,A=!1,D,L,z,P,R,M;function F(){var g=q.buffer;r.HEAP8=D=new Int8Array(g),r.HEAP16=z=new Int16Array(g),r.HEAPU8=L=new Uint8Array(g),r.HEAPU16=new Uint16Array(g),r.HEAP32=P=new Int32Array(g),r.HEAPU32=R=new Uint32Array(g),r.HEAPF32=new Float32Array(g),r.HEAPF64=new Float64Array(g),r.HEAP64=M=new BigInt64Array(g),r.HEAPU64=new BigUint64Array(g)}if(r.wasmMemory)q=r.wasmMemory;else{var W=r.INITIAL_MEMORY||0x1000000;q=new WebAssembly.Memory({initial:W/65536,maximum:32768})}F();var V=[],B=[],te=[];function J(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)ne(r.preRun.shift());xe(V)}function le(){!r.noFSInit&&!H.initialized&&H.init(),H.ignorePermissions=!1,xe(B)}function se(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)X(r.postRun.shift());xe(te)}function ne(g){V.unshift(g)}function oe(g){B.unshift(g)}function X(g){te.unshift(g)}var ce=0,de=null;function ye(g){return g}function _e(g){ce++,r.monitorRunDependencies?.(ce)}function Ne(g){if(ce--,r.monitorRunDependencies?.(ce),ce==0&&de){var y=de;de=null,y()}}function ze(g){r.onAbort?.(g),g="Aborted("+g+")",T(g),A=!0,g+=". Build with -sASSERTIONS for more info.";var y=new WebAssembly.RuntimeError(g);throw s(y),y}var qe="data:application/octet-stream;base64,",De=g=>g.startsWith(qe);function Ze(){if(r.locateFile){var g="sqlite3.wasm";return De(g)?g:x(g)}return new URL("/assets/sqlite3-CgX3seBP.wasm",import.meta.url).href}var Xe;function Ue(g){if(g==Xe&&O)return new Uint8Array(O);if(E)return E(g);throw"both async and sync fetching of the wasm failed"}function ut(g){return O?Promise.resolve().then(()=>Ue(g)):w(g).then(y=>new Uint8Array(y),()=>Ue(g))}function wt(g,y,S){return ut(g).then(N=>WebAssembly.instantiate(N,y)).then(S,N=>{T(`failed to asynchronously prepare wasm: ${N}`),ze(N)})}function Tt(g,y,S,N){return!g&&typeof WebAssembly.instantiateStreaming=="function"&&!De(y)&&typeof fetch=="function"?fetch(y,{credentials:"same-origin"}).then(C=>{var $=WebAssembly.instantiateStreaming(C,S);return $.then(N,function(fe){return T(`wasm streaming compile failed: ${fe}`),T("falling back to ArrayBuffer instantiation"),wt(y,S,N)})}):wt(y,S,N)}function Ut(){return{env:Pf,wasi_snapshot_preview1:Pf}}function nn(){var g=Ut();function y(N,C){return he=N.exports,oe(he.__wasm_call_ctors),Ne(),he}_e();function S(N){y(N.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(g,y)}catch(N){T(`Module.instantiateWasm callback failed with error: ${N}`),s(N)}return Xe||(Xe=Ze()),Tt(O,Xe,g,S).catch(s),{}}var xe=g=>{for(;g.length>0;)g.shift()(r)};r.noExitRuntime;var ve={isAbs:g=>g.charAt(0)==="/",splitPath:g=>{var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return y.exec(g).slice(1)},normalizeArray:(g,y)=>{for(var S=0,N=g.length-1;N>=0;N--){var C=g[N];C==="."?g.splice(N,1):C===".."?(g.splice(N,1),S++):S&&(g.splice(N,1),S--)}if(y)for(;S;S--)g.unshift("..");return g},normalize:g=>{var y=ve.isAbs(g),S=g.substr(-1)==="/";return g=ve.normalizeArray(g.split("/").filter(N=>!!N),!y).join("/"),!g&&!y&&(g="."),g&&S&&(g+="/"),(y?"/":"")+g},dirname:g=>{var y=ve.splitPath(g),S=y[0],N=y[1];return!S&&!N?".":(N&&(N=N.substr(0,N.length-1)),S+N)},basename:g=>{if(g==="/")return"/";g=ve.normalize(g),g=g.replace(/\/$/,"");var y=g.lastIndexOf("/");return y===-1?g:g.substr(y+1)},join:(...g)=>ve.normalize(g.join("/")),join2:(g,y)=>ve.normalize(g+"/"+y)},ke=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return g=>crypto.getRandomValues(g);ze("initRandomDevice")},Ae=g=>(Ae=ke())(g),Ve={resolve:(...g)=>{for(var y="",S=!1,N=g.length-1;N>=-1&&!S;N--){var C=N>=0?g[N]:H.cwd();if(typeof C!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!C)return"";y=C+"/"+y,S=ve.isAbs(C)}return y=ve.normalizeArray(y.split("/").filter($=>!!$),!S).join("/"),(S?"/":"")+y||"."},relative:(g,y)=>{g=Ve.resolve(g).substr(1),y=Ve.resolve(y).substr(1);function S(tt){for(var at=0;at<tt.length&&tt[at]==="";at++);for(var mt=tt.length-1;mt>=0&&tt[mt]==="";mt--);return at>mt?[]:tt.slice(at,mt-at+1)}for(var N=S(g.split("/")),C=S(y.split("/")),$=Math.min(N.length,C.length),fe=$,me=0;me<$;me++)if(N[me]!==C[me]){fe=me;break}for(var Qe=[],me=fe;me<N.length;me++)Qe.push("..");return Qe=Qe.concat(C.slice(fe)),Qe.join("/")}},rt=typeof TextDecoder<"u"?new TextDecoder:void 0,Me=(g,y,S)=>{for(var N=y+S,C=y;g[C]&&!(C>=N);)++C;if(C-y>16&&g.buffer&&rt)return rt.decode(g.subarray(y,C));for(var $="";y<C;){var fe=g[y++];if(!(fe&128)){$+=String.fromCharCode(fe);continue}var me=g[y++]&63;if((fe&224)==192){$+=String.fromCharCode((fe&31)<<6|me);continue}var Qe=g[y++]&63;if((fe&240)==224?fe=(fe&15)<<12|me<<6|Qe:fe=(fe&7)<<18|me<<12|Qe<<6|g[y++]&63,fe<65536)$+=String.fromCharCode(fe);else{var tt=fe-65536;$+=String.fromCharCode(55296|tt>>10,56320|tt&1023)}}return $},ct=[],Qt=g=>{for(var y=0,S=0;S<g.length;++S){var N=g.charCodeAt(S);N<=127?y++:N<=2047?y+=2:N>=55296&&N<=57343?(y+=4,++S):y+=3}return y},Kt=(g,y,S,N)=>{if(!(N>0))return 0;for(var C=S,$=S+N-1,fe=0;fe<g.length;++fe){var me=g.charCodeAt(fe);if(me>=55296&&me<=57343){var Qe=g.charCodeAt(++fe);me=65536+((me&1023)<<10)|Qe&1023}if(me<=127){if(S>=$)break;y[S++]=me}else if(me<=2047){if(S+1>=$)break;y[S++]=192|me>>6,y[S++]=128|me&63}else if(me<=65535){if(S+2>=$)break;y[S++]=224|me>>12,y[S++]=128|me>>6&63,y[S++]=128|me&63}else{if(S+3>=$)break;y[S++]=240|me>>18,y[S++]=128|me>>12&63,y[S++]=128|me>>6&63,y[S++]=128|me&63}}return y[S]=0,S-C};function hn(g,y,S){var N=Qt(g)+1,C=new Array(N),$=Kt(g,C,0,C.length);return C.length=$,C}var cr=()=>{if(!ct.length){var g=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(g=window.prompt("Input: "),g!==null&&(g+=`
`)),!g)return null;ct=hn(g)}return ct.shift()},Dn={ttys:[],init(){},shutdown(){},register(g,y){Dn.ttys[g]={input:[],output:[],ops:y},H.registerDevice(g,Dn.stream_ops)},stream_ops:{open(g){var y=Dn.ttys[g.node.rdev];if(!y)throw new H.ErrnoError(43);g.tty=y,g.seekable=!1},close(g){g.tty.ops.fsync(g.tty)},fsync(g){g.tty.ops.fsync(g.tty)},read(g,y,S,N,C){if(!g.tty||!g.tty.ops.get_char)throw new H.ErrnoError(60);for(var $=0,fe=0;fe<N;fe++){var me;try{me=g.tty.ops.get_char(g.tty)}catch{throw new H.ErrnoError(29)}if(me===void 0&&$===0)throw new H.ErrnoError(6);if(me==null)break;$++,y[S+fe]=me}return $&&(g.node.timestamp=Date.now()),$},write(g,y,S,N,C){if(!g.tty||!g.tty.ops.put_char)throw new H.ErrnoError(60);try{for(var $=0;$<N;$++)g.tty.ops.put_char(g.tty,y[S+$])}catch{throw new H.ErrnoError(29)}return N&&(g.node.timestamp=Date.now()),$}},default_tty_ops:{get_char(g){return cr()},put_char(g,y){y===null||y===10?(I(Me(g.output,0)),g.output=[]):y!=0&&g.output.push(y)},fsync(g){g.output&&g.output.length>0&&(I(Me(g.output,0)),g.output=[])},ioctl_tcgets(g){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(g,y,S){return 0},ioctl_tiocgwinsz(g){return[24,80]}},default_tty1_ops:{put_char(g,y){y===null||y===10?(T(Me(g.output,0)),g.output=[]):y!=0&&g.output.push(y)},fsync(g){g.output&&g.output.length>0&&(T(Me(g.output,0)),g.output=[])}}},Hr=(g,y)=>(L.fill(0,g,g+y),g),Oi=(g,y)=>Math.ceil(g/y)*y,Tr=g=>{g=Oi(g,65536);var y=Ff(65536,g);return y?Hr(y,g):0},Gt={ops_table:null,mount(g){return Gt.createNode(null,"/",16895,0)},createNode(g,y,S,N){if(H.isBlkdev(S)||H.isFIFO(S))throw new H.ErrnoError(63);Gt.ops_table||={dir:{node:{getattr:Gt.node_ops.getattr,setattr:Gt.node_ops.setattr,lookup:Gt.node_ops.lookup,mknod:Gt.node_ops.mknod,rename:Gt.node_ops.rename,unlink:Gt.node_ops.unlink,rmdir:Gt.node_ops.rmdir,readdir:Gt.node_ops.readdir,symlink:Gt.node_ops.symlink},stream:{llseek:Gt.stream_ops.llseek}},file:{node:{getattr:Gt.node_ops.getattr,setattr:Gt.node_ops.setattr},stream:{llseek:Gt.stream_ops.llseek,read:Gt.stream_ops.read,write:Gt.stream_ops.write,allocate:Gt.stream_ops.allocate,mmap:Gt.stream_ops.mmap,msync:Gt.stream_ops.msync}},link:{node:{getattr:Gt.node_ops.getattr,setattr:Gt.node_ops.setattr,readlink:Gt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Gt.node_ops.getattr,setattr:Gt.node_ops.setattr},stream:H.chrdev_stream_ops}};var C=H.createNode(g,y,S,N);return H.isDir(C.mode)?(C.node_ops=Gt.ops_table.dir.node,C.stream_ops=Gt.ops_table.dir.stream,C.contents={}):H.isFile(C.mode)?(C.node_ops=Gt.ops_table.file.node,C.stream_ops=Gt.ops_table.file.stream,C.usedBytes=0,C.contents=null):H.isLink(C.mode)?(C.node_ops=Gt.ops_table.link.node,C.stream_ops=Gt.ops_table.link.stream):H.isChrdev(C.mode)&&(C.node_ops=Gt.ops_table.chrdev.node,C.stream_ops=Gt.ops_table.chrdev.stream),C.timestamp=Date.now(),g&&(g.contents[y]=C,g.timestamp=C.timestamp),C},getFileDataAsTypedArray(g){return g.contents?g.contents.subarray?g.contents.subarray(0,g.usedBytes):new Uint8Array(g.contents):new Uint8Array(0)},expandFileStorage(g,y){var S=g.contents?g.contents.length:0;if(!(S>=y)){var N=1024*1024;y=Math.max(y,S*(S<N?2:1.125)>>>0),S!=0&&(y=Math.max(y,256));var C=g.contents;g.contents=new Uint8Array(y),g.usedBytes>0&&g.contents.set(C.subarray(0,g.usedBytes),0)}},resizeFileStorage(g,y){if(g.usedBytes!=y)if(y==0)g.contents=null,g.usedBytes=0;else{var S=g.contents;g.contents=new Uint8Array(y),S&&g.contents.set(S.subarray(0,Math.min(y,g.usedBytes))),g.usedBytes=y}},node_ops:{getattr(g){var y={};return y.dev=H.isChrdev(g.mode)?g.id:1,y.ino=g.id,y.mode=g.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=g.rdev,H.isDir(g.mode)?y.size=4096:H.isFile(g.mode)?y.size=g.usedBytes:H.isLink(g.mode)?y.size=g.link.length:y.size=0,y.atime=new Date(g.timestamp),y.mtime=new Date(g.timestamp),y.ctime=new Date(g.timestamp),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},setattr(g,y){y.mode!==void 0&&(g.mode=y.mode),y.timestamp!==void 0&&(g.timestamp=y.timestamp),y.size!==void 0&&Gt.resizeFileStorage(g,y.size)},lookup(g,y){throw H.genericErrors[44]},mknod(g,y,S,N){return Gt.createNode(g,y,S,N)},rename(g,y,S){if(H.isDir(g.mode)){var N;try{N=H.lookupNode(y,S)}catch{}if(N)for(var C in N.contents)throw new H.ErrnoError(55)}delete g.parent.contents[g.name],g.parent.timestamp=Date.now(),g.name=S,y.contents[S]=g,y.timestamp=g.parent.timestamp},unlink(g,y){delete g.contents[y],g.timestamp=Date.now()},rmdir(g,y){var S=H.lookupNode(g,y);for(var N in S.contents)throw new H.ErrnoError(55);delete g.contents[y],g.timestamp=Date.now()},readdir(g){var y=[".",".."];for(var S of Object.keys(g.contents))y.push(S);return y},symlink(g,y,S){var N=Gt.createNode(g,y,41471,0);return N.link=S,N},readlink(g){if(!H.isLink(g.mode))throw new H.ErrnoError(28);return g.link}},stream_ops:{read(g,y,S,N,C){var $=g.node.contents;if(C>=g.node.usedBytes)return 0;var fe=Math.min(g.node.usedBytes-C,N);if(fe>8&&$.subarray)y.set($.subarray(C,C+fe),S);else for(var me=0;me<fe;me++)y[S+me]=$[C+me];return fe},write(g,y,S,N,C,$){if(y.buffer===D.buffer&&($=!1),!N)return 0;var fe=g.node;if(fe.timestamp=Date.now(),y.subarray&&(!fe.contents||fe.contents.subarray)){if($)return fe.contents=y.subarray(S,S+N),fe.usedBytes=N,N;if(fe.usedBytes===0&&C===0)return fe.contents=y.slice(S,S+N),fe.usedBytes=N,N;if(C+N<=fe.usedBytes)return fe.contents.set(y.subarray(S,S+N),C),N}if(Gt.expandFileStorage(fe,C+N),fe.contents.subarray&&y.subarray)fe.contents.set(y.subarray(S,S+N),C);else for(var me=0;me<N;me++)fe.contents[C+me]=y[S+me];return fe.usedBytes=Math.max(fe.usedBytes,C+N),N},llseek(g,y,S){var N=y;if(S===1?N+=g.position:S===2&&H.isFile(g.node.mode)&&(N+=g.node.usedBytes),N<0)throw new H.ErrnoError(28);return N},allocate(g,y,S){Gt.expandFileStorage(g.node,y+S),g.node.usedBytes=Math.max(g.node.usedBytes,y+S)},mmap(g,y,S,N,C){if(!H.isFile(g.node.mode))throw new H.ErrnoError(43);var $,fe,me=g.node.contents;if(!(C&2)&&me&&me.buffer===D.buffer)fe=!1,$=me.byteOffset;else{if(fe=!0,$=Tr(y),!$)throw new H.ErrnoError(48);me&&((S>0||S+y<me.length)&&(me.subarray?me=me.subarray(S,S+y):me=Array.prototype.slice.call(me,S,S+y)),D.set(me,$))}return{ptr:$,allocated:fe}},msync(g,y,S,N,C){return Gt.stream_ops.write(g,y,0,N,S,!1),0}}},Ki=(g,y,S,N)=>{var C=`al ${g}`;w(g).then($=>{y(new Uint8Array($)),C&&Ne()},$=>{if(S)S();else throw`Loading data file "${g}" failed.`}),C&&_e()},Gi=(g,y,S,N,C,$)=>{H.createDataFile(g,y,S,N,C,$)},Zi=r.preloadPlugins||[],lo=(g,y,S,N)=>{typeof Browser<"u"&&Browser.init();var C=!1;return Zi.forEach($=>{C||$.canHandle(y)&&($.handle(g,y,S,N),C=!0)}),C},ua=(g,y,S,N,C,$,fe,me,Qe,tt)=>{var at=y?Ve.resolve(ve.join2(g,y)):g;function mt(Be){function Re(et){tt?.(),me||Gi(g,y,et,N,C,Qe),$?.(),Ne()}lo(Be,at,Re,()=>{fe?.(),Ne()})||Re(Be)}_e(),typeof S=="string"?Ki(S,mt,fe):mt(S)},su=g=>{var y={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},S=y[g];if(typeof S>"u")throw new Error(`Unknown file open mode: ${g}`);return S},Ds=(g,y)=>{var S=0;return g&&(S|=365),y&&(S|=146),S},H={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(g){this.name="ErrnoError",this.errno=g}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(g){this.node=g}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(g){this.shared.flags=g}get position(){return this.shared.position}set position(g){this.shared.position=g}},FSNode:class{constructor(g,y,S,N){g||(g=this),this.parent=g,this.mount=g.mount,this.mounted=null,this.id=H.nextInode++,this.name=y,this.mode=S,this.node_ops={},this.stream_ops={},this.rdev=N,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(g){g?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(g){g?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return H.isDir(this.mode)}get isDevice(){return H.isChrdev(this.mode)}},lookupPath(g,y={}){if(g=Ve.resolve(g),!g)return{path:"",node:null};var S={follow_mount:!0,recurse_count:0};if(y=Object.assign(S,y),y.recurse_count>8)throw new H.ErrnoError(32);for(var N=g.split("/").filter(mt=>!!mt),C=H.root,$="/",fe=0;fe<N.length;fe++){var me=fe===N.length-1;if(me&&y.parent)break;if(C=H.lookupNode(C,N[fe]),$=ve.join2($,N[fe]),H.isMountpoint(C)&&(!me||me&&y.follow_mount)&&(C=C.mounted.root),!me||y.follow)for(var Qe=0;H.isLink(C.mode);){var tt=H.readlink($);$=Ve.resolve(ve.dirname($),tt);var at=H.lookupPath($,{recurse_count:y.recurse_count+1});if(C=at.node,Qe++>40)throw new H.ErrnoError(32)}}return{path:$,node:C}},getPath(g){for(var y;;){if(H.isRoot(g)){var S=g.mount.mountpoint;return y?S[S.length-1]!=="/"?`${S}/${y}`:S+y:S}y=y?`${g.name}/${y}`:g.name,g=g.parent}},hashName(g,y){for(var S=0,N=0;N<y.length;N++)S=(S<<5)-S+y.charCodeAt(N)|0;return(g+S>>>0)%H.nameTable.length},hashAddNode(g){var y=H.hashName(g.parent.id,g.name);g.name_next=H.nameTable[y],H.nameTable[y]=g},hashRemoveNode(g){var y=H.hashName(g.parent.id,g.name);if(H.nameTable[y]===g)H.nameTable[y]=g.name_next;else for(var S=H.nameTable[y];S;){if(S.name_next===g){S.name_next=g.name_next;break}S=S.name_next}},lookupNode(g,y){var S=H.mayLookup(g);if(S)throw new H.ErrnoError(S);for(var N=H.hashName(g.id,y),C=H.nameTable[N];C;C=C.name_next){var $=C.name;if(C.parent.id===g.id&&$===y)return C}return H.lookup(g,y)},createNode(g,y,S,N){var C=new H.FSNode(g,y,S,N);return H.hashAddNode(C),C},destroyNode(g){H.hashRemoveNode(g)},isRoot(g){return g===g.parent},isMountpoint(g){return!!g.mounted},isFile(g){return(g&61440)===32768},isDir(g){return(g&61440)===16384},isLink(g){return(g&61440)===40960},isChrdev(g){return(g&61440)===8192},isBlkdev(g){return(g&61440)===24576},isFIFO(g){return(g&61440)===4096},isSocket(g){return(g&49152)===49152},flagsToPermissionString(g){var y=["r","w","rw"][g&3];return g&512&&(y+="w"),y},nodePermissions(g,y){return H.ignorePermissions?0:y.includes("r")&&!(g.mode&292)||y.includes("w")&&!(g.mode&146)||y.includes("x")&&!(g.mode&73)?2:0},mayLookup(g){if(!H.isDir(g.mode))return 54;var y=H.nodePermissions(g,"x");return y||(g.node_ops.lookup?0:2)},mayCreate(g,y){try{var S=H.lookupNode(g,y);return 20}catch{}return H.nodePermissions(g,"wx")},mayDelete(g,y,S){var N;try{N=H.lookupNode(g,y)}catch($){return $.errno}var C=H.nodePermissions(g,"wx");if(C)return C;if(S){if(!H.isDir(N.mode))return 54;if(H.isRoot(N)||H.getPath(N)===H.cwd())return 10}else if(H.isDir(N.mode))return 31;return 0},mayOpen(g,y){return g?H.isLink(g.mode)?32:H.isDir(g.mode)&&(H.flagsToPermissionString(y)!=="r"||y&512)?31:H.nodePermissions(g,H.flagsToPermissionString(y)):44},MAX_OPEN_FDS:4096,nextfd(){for(var g=0;g<=H.MAX_OPEN_FDS;g++)if(!H.streams[g])return g;throw new H.ErrnoError(33)},getStreamChecked(g){var y=H.getStream(g);if(!y)throw new H.ErrnoError(8);return y},getStream:g=>H.streams[g],createStream(g,y=-1){return g=Object.assign(new H.FSStream,g),y==-1&&(y=H.nextfd()),g.fd=y,H.streams[y]=g,g},closeStream(g){H.streams[g]=null},dupStream(g,y=-1){var S=H.createStream(g,y);return S.stream_ops?.dup?.(S),S},chrdev_stream_ops:{open(g){var y=H.getDevice(g.node.rdev);g.stream_ops=y.stream_ops,g.stream_ops.open?.(g)},llseek(){throw new H.ErrnoError(70)}},major:g=>g>>8,minor:g=>g&255,makedev:(g,y)=>g<<8|y,registerDevice(g,y){H.devices[g]={stream_ops:y}},getDevice:g=>H.devices[g],getMounts(g){for(var y=[],S=[g];S.length;){var N=S.pop();y.push(N),S.push(...N.mounts)}return y},syncfs(g,y){typeof g=="function"&&(y=g,g=!1),H.syncFSRequests++,H.syncFSRequests>1&&T(`warning: ${H.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var S=H.getMounts(H.root.mount),N=0;function C(fe){return H.syncFSRequests--,y(fe)}function $(fe){if(fe)return $.errored?void 0:($.errored=!0,C(fe));++N>=S.length&&C(null)}S.forEach(fe=>{if(!fe.type.syncfs)return $(null);fe.type.syncfs(fe,g,$)})},mount(g,y,S){var N=S==="/",C=!S,$;if(N&&H.root)throw new H.ErrnoError(10);if(!N&&!C){var fe=H.lookupPath(S,{follow_mount:!1});if(S=fe.path,$=fe.node,H.isMountpoint($))throw new H.ErrnoError(10);if(!H.isDir($.mode))throw new H.ErrnoError(54)}var me={type:g,opts:y,mountpoint:S,mounts:[]},Qe=g.mount(me);return Qe.mount=me,me.root=Qe,N?H.root=Qe:$&&($.mounted=me,$.mount&&$.mount.mounts.push(me)),Qe},unmount(g){var y=H.lookupPath(g,{follow_mount:!1});if(!H.isMountpoint(y.node))throw new H.ErrnoError(28);var S=y.node,N=S.mounted,C=H.getMounts(N);Object.keys(H.nameTable).forEach(fe=>{for(var me=H.nameTable[fe];me;){var Qe=me.name_next;C.includes(me.mount)&&H.destroyNode(me),me=Qe}}),S.mounted=null;var $=S.mount.mounts.indexOf(N);S.mount.mounts.splice($,1)},lookup(g,y){return g.node_ops.lookup(g,y)},mknod(g,y,S){var N=H.lookupPath(g,{parent:!0}),C=N.node,$=ve.basename(g);if(!$||$==="."||$==="..")throw new H.ErrnoError(28);var fe=H.mayCreate(C,$);if(fe)throw new H.ErrnoError(fe);if(!C.node_ops.mknod)throw new H.ErrnoError(63);return C.node_ops.mknod(C,$,y,S)},create(g,y){return y=y!==void 0?y:438,y&=4095,y|=32768,H.mknod(g,y,0)},mkdir(g,y){return y=y!==void 0?y:511,y&=1023,y|=16384,H.mknod(g,y,0)},mkdirTree(g,y){for(var S=g.split("/"),N="",C=0;C<S.length;++C)if(S[C]){N+="/"+S[C];try{H.mkdir(N,y)}catch($){if($.errno!=20)throw $}}},mkdev(g,y,S){return typeof S>"u"&&(S=y,y=438),y|=8192,H.mknod(g,y,S)},symlink(g,y){if(!Ve.resolve(g))throw new H.ErrnoError(44);var S=H.lookupPath(y,{parent:!0}),N=S.node;if(!N)throw new H.ErrnoError(44);var C=ve.basename(y),$=H.mayCreate(N,C);if($)throw new H.ErrnoError($);if(!N.node_ops.symlink)throw new H.ErrnoError(63);return N.node_ops.symlink(N,C,g)},rename(g,y){var S=ve.dirname(g),N=ve.dirname(y),C=ve.basename(g),$=ve.basename(y),fe,me,Qe;if(fe=H.lookupPath(g,{parent:!0}),me=fe.node,fe=H.lookupPath(y,{parent:!0}),Qe=fe.node,!me||!Qe)throw new H.ErrnoError(44);if(me.mount!==Qe.mount)throw new H.ErrnoError(75);var tt=H.lookupNode(me,C),at=Ve.relative(g,N);if(at.charAt(0)!==".")throw new H.ErrnoError(28);if(at=Ve.relative(y,S),at.charAt(0)!==".")throw new H.ErrnoError(55);var mt;try{mt=H.lookupNode(Qe,$)}catch{}if(tt!==mt){var Be=H.isDir(tt.mode),Re=H.mayDelete(me,C,Be);if(Re)throw new H.ErrnoError(Re);if(Re=mt?H.mayDelete(Qe,$,Be):H.mayCreate(Qe,$),Re)throw new H.ErrnoError(Re);if(!me.node_ops.rename)throw new H.ErrnoError(63);if(H.isMountpoint(tt)||mt&&H.isMountpoint(mt))throw new H.ErrnoError(10);if(Qe!==me&&(Re=H.nodePermissions(me,"w"),Re))throw new H.ErrnoError(Re);H.hashRemoveNode(tt);try{me.node_ops.rename(tt,Qe,$),tt.parent=Qe}catch(et){throw et}finally{H.hashAddNode(tt)}}},rmdir(g){var y=H.lookupPath(g,{parent:!0}),S=y.node,N=ve.basename(g),C=H.lookupNode(S,N),$=H.mayDelete(S,N,!0);if($)throw new H.ErrnoError($);if(!S.node_ops.rmdir)throw new H.ErrnoError(63);if(H.isMountpoint(C))throw new H.ErrnoError(10);S.node_ops.rmdir(S,N),H.destroyNode(C)},readdir(g){var y=H.lookupPath(g,{follow:!0}),S=y.node;if(!S.node_ops.readdir)throw new H.ErrnoError(54);return S.node_ops.readdir(S)},unlink(g){var y=H.lookupPath(g,{parent:!0}),S=y.node;if(!S)throw new H.ErrnoError(44);var N=ve.basename(g),C=H.lookupNode(S,N),$=H.mayDelete(S,N,!1);if($)throw new H.ErrnoError($);if(!S.node_ops.unlink)throw new H.ErrnoError(63);if(H.isMountpoint(C))throw new H.ErrnoError(10);S.node_ops.unlink(S,N),H.destroyNode(C)},readlink(g){var y=H.lookupPath(g),S=y.node;if(!S)throw new H.ErrnoError(44);if(!S.node_ops.readlink)throw new H.ErrnoError(28);return Ve.resolve(H.getPath(S.parent),S.node_ops.readlink(S))},stat(g,y){var S=H.lookupPath(g,{follow:!y}),N=S.node;if(!N)throw new H.ErrnoError(44);if(!N.node_ops.getattr)throw new H.ErrnoError(63);return N.node_ops.getattr(N)},lstat(g){return H.stat(g,!0)},chmod(g,y,S){var N;if(typeof g=="string"){var C=H.lookupPath(g,{follow:!S});N=C.node}else N=g;if(!N.node_ops.setattr)throw new H.ErrnoError(63);N.node_ops.setattr(N,{mode:y&4095|N.mode&-4096,timestamp:Date.now()})},lchmod(g,y){H.chmod(g,y,!0)},fchmod(g,y){var S=H.getStreamChecked(g);H.chmod(S.node,y)},chown(g,y,S,N){var C;if(typeof g=="string"){var $=H.lookupPath(g,{follow:!N});C=$.node}else C=g;if(!C.node_ops.setattr)throw new H.ErrnoError(63);C.node_ops.setattr(C,{timestamp:Date.now()})},lchown(g,y,S){H.chown(g,y,S,!0)},fchown(g,y,S){var N=H.getStreamChecked(g);H.chown(N.node,y,S)},truncate(g,y){if(y<0)throw new H.ErrnoError(28);var S;if(typeof g=="string"){var N=H.lookupPath(g,{follow:!0});S=N.node}else S=g;if(!S.node_ops.setattr)throw new H.ErrnoError(63);if(H.isDir(S.mode))throw new H.ErrnoError(31);if(!H.isFile(S.mode))throw new H.ErrnoError(28);var C=H.nodePermissions(S,"w");if(C)throw new H.ErrnoError(C);S.node_ops.setattr(S,{size:y,timestamp:Date.now()})},ftruncate(g,y){var S=H.getStreamChecked(g);if(!(S.flags&2097155))throw new H.ErrnoError(28);H.truncate(S.node,y)},utime(g,y,S){var N=H.lookupPath(g,{follow:!0}),C=N.node;C.node_ops.setattr(C,{timestamp:Math.max(y,S)})},open(g,y,S){if(g==="")throw new H.ErrnoError(44);y=typeof y=="string"?su(y):y,y&64?(S=typeof S>"u"?438:S,S=S&4095|32768):S=0;var N;if(typeof g=="object")N=g;else{g=ve.normalize(g);try{var C=H.lookupPath(g,{follow:!(y&131072)});N=C.node}catch{}}var $=!1;if(y&64)if(N){if(y&128)throw new H.ErrnoError(20)}else N=H.mknod(g,S,0),$=!0;if(!N)throw new H.ErrnoError(44);if(H.isChrdev(N.mode)&&(y&=-513),y&65536&&!H.isDir(N.mode))throw new H.ErrnoError(54);if(!$){var fe=H.mayOpen(N,y);if(fe)throw new H.ErrnoError(fe)}y&512&&!$&&H.truncate(N,0),y&=-131713;var me=H.createStream({node:N,path:H.getPath(N),flags:y,seekable:!0,position:0,stream_ops:N.stream_ops,ungotten:[],error:!1});return me.stream_ops.open&&me.stream_ops.open(me),r.logReadFiles&&!(y&1)&&(H.readFiles||(H.readFiles={}),g in H.readFiles||(H.readFiles[g]=1)),me},close(g){if(H.isClosed(g))throw new H.ErrnoError(8);g.getdents&&(g.getdents=null);try{g.stream_ops.close&&g.stream_ops.close(g)}catch(y){throw y}finally{H.closeStream(g.fd)}g.fd=null},isClosed(g){return g.fd===null},llseek(g,y,S){if(H.isClosed(g))throw new H.ErrnoError(8);if(!g.seekable||!g.stream_ops.llseek)throw new H.ErrnoError(70);if(S!=0&&S!=1&&S!=2)throw new H.ErrnoError(28);return g.position=g.stream_ops.llseek(g,y,S),g.ungotten=[],g.position},read(g,y,S,N,C){if(N<0||C<0)throw new H.ErrnoError(28);if(H.isClosed(g))throw new H.ErrnoError(8);if((g.flags&2097155)===1)throw new H.ErrnoError(8);if(H.isDir(g.node.mode))throw new H.ErrnoError(31);if(!g.stream_ops.read)throw new H.ErrnoError(28);var $=typeof C<"u";if(!$)C=g.position;else if(!g.seekable)throw new H.ErrnoError(70);var fe=g.stream_ops.read(g,y,S,N,C);return $||(g.position+=fe),fe},write(g,y,S,N,C,$){if(N<0||C<0)throw new H.ErrnoError(28);if(H.isClosed(g))throw new H.ErrnoError(8);if(!(g.flags&2097155))throw new H.ErrnoError(8);if(H.isDir(g.node.mode))throw new H.ErrnoError(31);if(!g.stream_ops.write)throw new H.ErrnoError(28);g.seekable&&g.flags&1024&&H.llseek(g,0,2);var fe=typeof C<"u";if(!fe)C=g.position;else if(!g.seekable)throw new H.ErrnoError(70);var me=g.stream_ops.write(g,y,S,N,C,$);return fe||(g.position+=me),me},allocate(g,y,S){if(H.isClosed(g))throw new H.ErrnoError(8);if(y<0||S<=0)throw new H.ErrnoError(28);if(!(g.flags&2097155))throw new H.ErrnoError(8);if(!H.isFile(g.node.mode)&&!H.isDir(g.node.mode))throw new H.ErrnoError(43);if(!g.stream_ops.allocate)throw new H.ErrnoError(138);g.stream_ops.allocate(g,y,S)},mmap(g,y,S,N,C){if(N&2&&!(C&2)&&(g.flags&2097155)!==2)throw new H.ErrnoError(2);if((g.flags&2097155)===1)throw new H.ErrnoError(2);if(!g.stream_ops.mmap)throw new H.ErrnoError(43);if(!y)throw new H.ErrnoError(28);return g.stream_ops.mmap(g,y,S,N,C)},msync(g,y,S,N,C){return g.stream_ops.msync?g.stream_ops.msync(g,y,S,N,C):0},ioctl(g,y,S){if(!g.stream_ops.ioctl)throw new H.ErrnoError(59);return g.stream_ops.ioctl(g,y,S)},readFile(g,y={}){if(y.flags=y.flags||0,y.encoding=y.encoding||"binary",y.encoding!=="utf8"&&y.encoding!=="binary")throw new Error(`Invalid encoding type "${y.encoding}"`);var S,N=H.open(g,y.flags),C=H.stat(g),$=C.size,fe=new Uint8Array($);return H.read(N,fe,0,$,0),y.encoding==="utf8"?S=Me(fe,0):y.encoding==="binary"&&(S=fe),H.close(N),S},writeFile(g,y,S={}){S.flags=S.flags||577;var N=H.open(g,S.flags,S.mode);if(typeof y=="string"){var C=new Uint8Array(Qt(y)+1),$=Kt(y,C,0,C.length);H.write(N,C,0,$,void 0,S.canOwn)}else if(ArrayBuffer.isView(y))H.write(N,y,0,y.byteLength,void 0,S.canOwn);else throw new Error("Unsupported data type");H.close(N)},cwd:()=>H.currentPath,chdir(g){var y=H.lookupPath(g,{follow:!0});if(y.node===null)throw new H.ErrnoError(44);if(!H.isDir(y.node.mode))throw new H.ErrnoError(54);var S=H.nodePermissions(y.node,"x");if(S)throw new H.ErrnoError(S);H.currentPath=y.path},createDefaultDirectories(){H.mkdir("/tmp"),H.mkdir("/home"),H.mkdir("/home/web_user")},createDefaultDevices(){H.mkdir("/dev"),H.registerDevice(H.makedev(1,3),{read:()=>0,write:(N,C,$,fe,me)=>fe}),H.mkdev("/dev/null",H.makedev(1,3)),Dn.register(H.makedev(5,0),Dn.default_tty_ops),Dn.register(H.makedev(6,0),Dn.default_tty1_ops),H.mkdev("/dev/tty",H.makedev(5,0)),H.mkdev("/dev/tty1",H.makedev(6,0));var g=new Uint8Array(1024),y=0,S=()=>(y===0&&(y=Ae(g).byteLength),g[--y]);H.createDevice("/dev","random",S),H.createDevice("/dev","urandom",S),H.mkdir("/dev/shm"),H.mkdir("/dev/shm/tmp")},createSpecialDirectories(){H.mkdir("/proc");var g=H.mkdir("/proc/self");H.mkdir("/proc/self/fd"),H.mount({mount(){var y=H.createNode(g,"fd",16895,73);return y.node_ops={lookup(S,N){var C=+N,$=H.getStreamChecked(C),fe={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>$.path}};return fe.parent=fe,fe}},y}},{},"/proc/self/fd")},createStandardStreams(g,y,S){g?H.createDevice("/dev","stdin",g):H.symlink("/dev/tty","/dev/stdin"),y?H.createDevice("/dev","stdout",null,y):H.symlink("/dev/tty","/dev/stdout"),S?H.createDevice("/dev","stderr",null,S):H.symlink("/dev/tty1","/dev/stderr"),H.open("/dev/stdin",0),H.open("/dev/stdout",1),H.open("/dev/stderr",1)},staticInit(){[44].forEach(g=>{H.genericErrors[g]=new H.ErrnoError(g),H.genericErrors[g].stack="<generic error, no stack>"}),H.nameTable=new Array(4096),H.mount(Gt,{},"/"),H.createDefaultDirectories(),H.createDefaultDevices(),H.createSpecialDirectories(),H.filesystems={MEMFS:Gt}},init(g,y,S){H.initialized=!0,g??=r.stdin,y??=r.stdout,S??=r.stderr,H.createStandardStreams(g,y,S)},quit(){H.initialized=!1;for(var g=0;g<H.streams.length;g++){var y=H.streams[g];y&&H.close(y)}},findObject(g,y){var S=H.analyzePath(g,y);return S.exists?S.object:null},analyzePath(g,y){try{var S=H.lookupPath(g,{follow:!y});g=S.path}catch{}var N={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var S=H.lookupPath(g,{parent:!0});N.parentExists=!0,N.parentPath=S.path,N.parentObject=S.node,N.name=ve.basename(g),S=H.lookupPath(g,{follow:!y}),N.exists=!0,N.path=S.path,N.object=S.node,N.name=S.node.name,N.isRoot=S.path==="/"}catch(C){N.error=C.errno}return N},createPath(g,y,S,N){g=typeof g=="string"?g:H.getPath(g);for(var C=y.split("/").reverse();C.length;){var $=C.pop();if($){var fe=ve.join2(g,$);try{H.mkdir(fe)}catch{}g=fe}}return fe},createFile(g,y,S,N,C){var $=ve.join2(typeof g=="string"?g:H.getPath(g),y),fe=Ds(N,C);return H.create($,fe)},createDataFile(g,y,S,N,C,$){var fe=y;g&&(g=typeof g=="string"?g:H.getPath(g),fe=y?ve.join2(g,y):g);var me=Ds(N,C),Qe=H.create(fe,me);if(S){if(typeof S=="string"){for(var tt=new Array(S.length),at=0,mt=S.length;at<mt;++at)tt[at]=S.charCodeAt(at);S=tt}H.chmod(Qe,me|146);var Be=H.open(Qe,577);H.write(Be,S,0,S.length,0,$),H.close(Be),H.chmod(Qe,me)}},createDevice(g,y,S,N){var C=ve.join2(typeof g=="string"?g:H.getPath(g),y),$=Ds(!!S,!!N);H.createDevice.major||(H.createDevice.major=64);var fe=H.makedev(H.createDevice.major++,0);return H.registerDevice(fe,{open(me){me.seekable=!1},close(me){N?.buffer?.length&&N(10)},read(me,Qe,tt,at,mt){for(var Be=0,Re=0;Re<at;Re++){var et;try{et=S()}catch{throw new H.ErrnoError(29)}if(et===void 0&&Be===0)throw new H.ErrnoError(6);if(et==null)break;Be++,Qe[tt+Re]=et}return Be&&(me.node.timestamp=Date.now()),Be},write(me,Qe,tt,at,mt){for(var Be=0;Be<at;Be++)try{N(Qe[tt+Be])}catch{throw new H.ErrnoError(29)}return at&&(me.node.timestamp=Date.now()),Be}}),H.mkdev(C,$,fe)},forceLoadFile(g){if(g.isDevice||g.isFolder||g.link||g.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{g.contents=E(g.url),g.usedBytes=g.contents.length}catch{throw new H.ErrnoError(29)}},createLazyFile(g,y,S,N,C){class ${constructor(){this.lengthKnown=!1,this.chunks=[]}get(Re){if(!(Re>this.length-1||Re<0)){var et=Re%this.chunkSize,be=Re/this.chunkSize|0;return this.getter(be)[et]}}setDataGetter(Re){this.getter=Re}cacheLength(){var Re=new XMLHttpRequest;if(Re.open("HEAD",S,!1),Re.send(null),!(Re.status>=200&&Re.status<300||Re.status===304))throw new Error("Couldn't load "+S+". Status: "+Re.status);var et=Number(Re.getResponseHeader("Content-length")),be,Ie=(be=Re.getResponseHeader("Accept-Ranges"))&&be==="bytes",Te=(be=Re.getResponseHeader("Content-Encoding"))&&be==="gzip",Je=1024*1024;Ie||(Je=et);var Ge=(Ke,St)=>{if(Ke>St)throw new Error("invalid range ("+Ke+", "+St+") or no bytes requested!");if(St>et-1)throw new Error("only "+et+" bytes available! programmer error!");var Y=new XMLHttpRequest;if(Y.open("GET",S,!1),et!==Je&&Y.setRequestHeader("Range","bytes="+Ke+"-"+St),Y.responseType="arraybuffer",Y.overrideMimeType&&Y.overrideMimeType("text/plain; charset=x-user-defined"),Y.send(null),!(Y.status>=200&&Y.status<300||Y.status===304))throw new Error("Couldn't load "+S+". Status: "+Y.status);return Y.response!==void 0?new Uint8Array(Y.response||[]):hn(Y.responseText||"")},Oe=this;Oe.setDataGetter(Ke=>{var St=Ke*Je,Y=(Ke+1)*Je-1;if(Y=Math.min(Y,et-1),typeof Oe.chunks[Ke]>"u"&&(Oe.chunks[Ke]=Ge(St,Y)),typeof Oe.chunks[Ke]>"u")throw new Error("doXHR failed!");return Oe.chunks[Ke]}),(Te||!et)&&(Je=et=1,et=this.getter(0).length,Je=et,I("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=et,this._chunkSize=Je,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!c)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var fe=new $,me={isDevice:!1,contents:fe}}else var me={isDevice:!1,url:S};var Qe=H.createFile(g,y,me,N,C);me.contents?Qe.contents=me.contents:me.url&&(Qe.contents=null,Qe.url=me.url),Object.defineProperties(Qe,{usedBytes:{get:function(){return this.contents.length}}});var tt={},at=Object.keys(Qe.stream_ops);at.forEach(Be=>{var Re=Qe.stream_ops[Be];tt[Be]=(...et)=>(H.forceLoadFile(Qe),Re(...et))});function mt(Be,Re,et,be,Ie){var Te=Be.node.contents;if(Ie>=Te.length)return 0;var Je=Math.min(Te.length-Ie,be);if(Te.slice)for(var Ge=0;Ge<Je;Ge++)Re[et+Ge]=Te[Ie+Ge];else for(var Ge=0;Ge<Je;Ge++)Re[et+Ge]=Te.get(Ie+Ge);return Je}return tt.read=(Be,Re,et,be,Ie)=>(H.forceLoadFile(Qe),mt(Be,Re,et,be,Ie)),tt.mmap=(Be,Re,et,be,Ie)=>{H.forceLoadFile(Qe);var Te=Tr(Re);if(!Te)throw new H.ErrnoError(48);return mt(Be,D,Te,Re,et),{ptr:Te,allocated:!0}},Qe.stream_ops=tt,Qe}},fc=(g,y)=>g?Me(L,g,y):"",cn={DEFAULT_POLLMASK:5,calculateAt(g,y,S){if(ve.isAbs(y))return y;var N;if(g===-100)N=H.cwd();else{var C=cn.getStreamFromFD(g);N=C.path}if(y.length==0){if(!S)throw new H.ErrnoError(44);return N}return ve.join2(N,y)},doStat(g,y,S){var N=g(y);P[S>>2]=N.dev,P[S+4>>2]=N.mode,R[S+8>>2]=N.nlink,P[S+12>>2]=N.uid,P[S+16>>2]=N.gid,P[S+20>>2]=N.rdev,M[S+24>>3]=BigInt(N.size),P[S+32>>2]=4096,P[S+36>>2]=N.blocks;var C=N.atime.getTime(),$=N.mtime.getTime(),fe=N.ctime.getTime();return M[S+40>>3]=BigInt(Math.floor(C/1e3)),R[S+48>>2]=C%1e3*1e3*1e3,M[S+56>>3]=BigInt(Math.floor($/1e3)),R[S+64>>2]=$%1e3*1e3*1e3,M[S+72>>3]=BigInt(Math.floor(fe/1e3)),R[S+80>>2]=fe%1e3*1e3*1e3,M[S+88>>3]=BigInt(N.ino),0},doMsync(g,y,S,N,C){if(!H.isFile(y.node.mode))throw new H.ErrnoError(43);if(N&2)return 0;var $=L.slice(g,g+S);H.msync(y,$,C,S,N)},getStreamFromFD(g){var y=H.getStreamChecked(g);return y},varargs:void 0,getStr(g){var y=fc(g);return y}};function pc(g,y){try{return g=cn.getStr(g),H.chmod(g,y),0}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function hc(g,y,S,N){try{if(y=cn.getStr(y),y=cn.calculateAt(g,y),S&-8)return-28;var C=H.lookupPath(y,{follow:!0}),$=C.node;if(!$)return-44;var fe="";return S&4&&(fe+="r"),S&2&&(fe+="w"),S&1&&(fe+="x"),fe&&H.nodePermissions($,fe)?-2:0}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function mc(g,y){try{return H.fchmod(g,y),0}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function ou(g,y,S){try{return H.fchown(g,y,S),0}catch(N){if(typeof H>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function ca(){var g=P[+cn.varargs>>2];return cn.varargs+=4,g}var Ji=ca;function au(g,y,S){cn.varargs=S;try{var N=cn.getStreamFromFD(g);switch(y){case 0:{var C=ca();if(C<0)return-28;for(;H.streams[C];)C++;var $;return $=H.dupStream(N,C),$.fd}case 1:case 2:return 0;case 3:return N.flags;case 4:{var C=ca();return N.flags|=C,0}case 12:{var C=Ji(),fe=0;return z[C+fe>>1]=2,0}case 13:case 14:return 0}return-28}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function da(g,y){try{var S=cn.getStreamFromFD(g);return cn.doStat(H.stat,S.path,y)}catch(N){if(typeof H>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}var _f=0x20000000000000,fa=-0x20000000000000,Ls=g=>g<fa||g>_f?NaN:Number(g);function Qa(g,y){y=Ls(y);try{return isNaN(y)?61:(H.ftruncate(g,y),0)}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}var Ms=(g,y,S)=>Kt(g,L,y,S);function wf(g,y){try{if(y===0)return-28;var S=H.cwd(),N=Qt(S)+1;return y<N?-68:(Ms(S,g,y),N)}catch(C){if(typeof H>"u"||C.name!=="ErrnoError")throw C;return-C.errno}}function Sf(g,y,S){cn.varargs=S;try{var N=cn.getStreamFromFD(g);switch(y){case 21509:return N.tty?0:-59;case 21505:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tcgets){var C=N.tty.ops.ioctl_tcgets(N),$=Ji();P[$>>2]=C.c_iflag||0,P[$+4>>2]=C.c_oflag||0,P[$+8>>2]=C.c_cflag||0,P[$+12>>2]=C.c_lflag||0;for(var fe=0;fe<32;fe++)D[$+fe+17]=C.c_cc[fe]||0;return 0}return 0}case 21510:case 21511:case 21512:return N.tty?0:-59;case 21506:case 21507:case 21508:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tcsets){for(var $=Ji(),me=P[$>>2],Qe=P[$+4>>2],tt=P[$+8>>2],at=P[$+12>>2],mt=[],fe=0;fe<32;fe++)mt.push(D[$+fe+17]);return N.tty.ops.ioctl_tcsets(N.tty,y,{c_iflag:me,c_oflag:Qe,c_cflag:tt,c_lflag:at,c_cc:mt})}return 0}case 21519:{if(!N.tty)return-59;var $=Ji();return P[$>>2]=0,0}case 21520:return N.tty?-28:-59;case 21531:{var $=Ji();return H.ioctl(N,y,$)}case 21523:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tiocgwinsz){var Be=N.tty.ops.ioctl_tiocgwinsz(N.tty),$=Ji();z[$>>1]=Be[0],z[$+2>>1]=Be[1]}return 0}case 21524:return N.tty?0:-59;case 21515:return N.tty?0:-59;default:return-28}}catch(Re){if(typeof H>"u"||Re.name!=="ErrnoError")throw Re;return-Re.errno}}function gc(g,y){try{return g=cn.getStr(g),cn.doStat(H.lstat,g,y)}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function $s(g,y,S){try{return y=cn.getStr(y),y=cn.calculateAt(g,y),y=ve.normalize(y),y[y.length-1]==="/"&&(y=y.substr(0,y.length-1)),H.mkdir(y,S,0),0}catch(N){if(typeof H>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function yc(g,y,S,N){try{y=cn.getStr(y);var C=N&256,$=N&4096;return N=N&-6401,y=cn.calculateAt(g,y,$),cn.doStat(C?H.lstat:H.stat,y,S)}catch(fe){if(typeof H>"u"||fe.name!=="ErrnoError")throw fe;return-fe.errno}}function vc(g,y,S,N){cn.varargs=N;try{y=cn.getStr(y),y=cn.calculateAt(g,y);var C=N?ca():0;return H.open(y,S,C).fd}catch($){if(typeof H>"u"||$.name!=="ErrnoError")throw $;return-$.errno}}function Ef(g,y,S,N){try{if(y=cn.getStr(y),y=cn.calculateAt(g,y),N<=0)return-28;var C=H.readlink(y),$=Math.min(N,Qt(C)),fe=D[S+$];return Ms(C,S,N+1),D[S+$]=fe,$}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function bc(g){try{return g=cn.getStr(g),H.rmdir(g),0}catch(y){if(typeof H>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function xc(g,y){try{return g=cn.getStr(g),cn.doStat(H.stat,g,y)}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function _c(g,y,S){try{return y=cn.getStr(y),y=cn.calculateAt(g,y),S===0?H.unlink(y):S===512?H.rmdir(y):ze("Invalid flags passed to unlinkat"),0}catch(N){if(typeof H>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}var lu=g=>R[g>>2]+P[g+4>>2]*0x100000000;function wc(g,y,S,N){try{y=cn.getStr(y),y=cn.calculateAt(g,y,!0);var C=Date.now(),$,fe;if(!S)$=C,fe=C;else{var me=lu(S),Qe=P[S+8>>2];Qe==0x3fffffff?$=C:Qe==0x3ffffffe?$=-1:$=me*1e3+Qe/(1e3*1e3),S+=16,me=lu(S),Qe=P[S+8>>2],Qe==0x3fffffff?fe=C:Qe==0x3ffffffe?fe=-1:fe=me*1e3+Qe/(1e3*1e3)}return(fe!=-1||$!=-1)&&H.utime(y,$,fe),0}catch(tt){if(typeof H>"u"||tt.name!=="ErrnoError")throw tt;return-tt.errno}}var Nf=1,dr=()=>Nf,kf=g=>g%4===0&&(g%100!==0||g%400===0),uu=[0,31,60,91,121,152,182,213,244,274,305,335],Sc=[0,31,59,90,120,151,181,212,243,273,304,334],Ka=g=>{var y=kf(g.getFullYear()),S=y?uu:Sc,N=S[g.getMonth()]+g.getDate()-1;return N};function If(g,y){g=Ls(g);var S=new Date(g*1e3);P[y>>2]=S.getSeconds(),P[y+4>>2]=S.getMinutes(),P[y+8>>2]=S.getHours(),P[y+12>>2]=S.getDate(),P[y+16>>2]=S.getMonth(),P[y+20>>2]=S.getFullYear()-1900,P[y+24>>2]=S.getDay();var N=Ka(S)|0;P[y+28>>2]=N,P[y+36>>2]=-(S.getTimezoneOffset()*60);var C=new Date(S.getFullYear(),0,1),$=new Date(S.getFullYear(),6,1).getTimezoneOffset(),fe=C.getTimezoneOffset(),me=($!=fe&&S.getTimezoneOffset()==Math.min(fe,$))|0;P[y+32>>2]=me}function cu(g,y,S,N,C,$,fe){C=Ls(C);try{if(isNaN(C))return 61;var me=cn.getStreamFromFD(N),Qe=H.mmap(me,g,C,y,S),tt=Qe.ptr;return P[$>>2]=Qe.allocated,R[fe>>2]=tt,0}catch(at){if(typeof H>"u"||at.name!=="ErrnoError")throw at;return-at.errno}}function Ga(g,y,S,N,C,$){$=Ls($);try{var fe=cn.getStreamFromFD(C);S&2&&cn.doMsync(g,fe,y,N,$)}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}var Yi=(g,y,S,N)=>{var C=new Date().getFullYear(),$=new Date(C,0,1),fe=new Date(C,6,1),me=$.getTimezoneOffset(),Qe=fe.getTimezoneOffset(),tt=Math.max(me,Qe);R[g>>2]=tt*60,P[y>>2]=+(me!=Qe);var at=Re=>{var et=Re>=0?"-":"+",be=Math.abs(Re),Ie=String(Math.floor(be/60)).padStart(2,"0"),Te=String(be%60).padStart(2,"0");return`UTC${et}${Ie}${Te}`},mt=at(me),Be=at(Qe);Qe<me?(Ms(mt,S,17),Ms(Be,N,17)):(Ms(mt,N,17),Ms(Be,S,17))},Cf=()=>Date.now(),mi;mi=()=>performance.now();var Tf=()=>0x80000000,Of=g=>{var y=q.buffer,S=(g-y.byteLength+65535)/65536;try{return q.grow(S),F(),1}catch{}},qf=g=>{var y=L.length;g>>>=0;var S=Tf();if(g>S)return!1;for(var N=1;N<=4;N*=2){var C=y*(1+.2/N);C=Math.min(C,g+0x6000000);var $=Math.min(S,Oi(Math.max(g,C),65536)),fe=Of($);if(fe)return!0}return!1},Lo={},Za=()=>h||"./this.program",qi=()=>{if(!qi.strings){var g=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",y={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:g,_:Za()};for(var S in Lo)Lo[S]===void 0?delete y[S]:y[S]=Lo[S];var N=[];for(var S in y)N.push(`${S}=${y[S]}`);qi.strings=N}return qi.strings},Ja=(g,y)=>{for(var S=0;S<g.length;++S)D[y++]=g.charCodeAt(S);D[y]=0},dx=(g,y)=>{var S=0;return qi().forEach((N,C)=>{var $=y+S;R[g+C*4>>2]=$,Ja(N,$),S+=N.length+1}),0},fx=(g,y)=>{var S=qi();R[g>>2]=S.length;var N=0;return S.forEach(C=>N+=C.length+1),R[y>>2]=N,0};function Rf(g){try{var y=cn.getStreamFromFD(g);return H.close(y),0}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return S.errno}}function Rm(g,y){try{var S=0,N=0,C=0,$=cn.getStreamFromFD(g),fe=$.tty?2:H.isDir($.mode)?3:H.isLink($.mode)?7:4;return D[y]=fe,z[y+2>>1]=C,M[y+8>>3]=BigInt(S),M[y+16>>3]=BigInt(N),0}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return me.errno}}var jf=(g,y,S,N)=>{for(var C=0,$=0;$<S;$++){var fe=R[y>>2],me=R[y+4>>2];y+=8;var Qe=H.read(g,D,fe,me,N);if(Qe<0)return-1;if(C+=Qe,Qe<me)break}return C};function du(g,y,S,N){try{var C=cn.getStreamFromFD(g),$=jf(C,y,S);return R[N>>2]=$,0}catch(fe){if(typeof H>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}function px(g,y,S,N){y=Ls(y);try{if(isNaN(y))return 61;var C=cn.getStreamFromFD(g);return H.llseek(C,y,S),M[N>>3]=BigInt(C.position),C.getdents&&y===0&&S===0&&(C.getdents=null),0}catch($){if(typeof H>"u"||$.name!=="ErrnoError")throw $;return $.errno}}function Af(g){try{var y=cn.getStreamFromFD(g);return y.stream_ops?.fsync?y.stream_ops.fsync(y):0}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return S.errno}}var Ln=(g,y,S,N)=>{for(var C=0,$=0;$<S;$++){var fe=R[y>>2],me=R[y+4>>2];y+=8;var Qe=H.write(g,D,fe,me,N);if(Qe<0)return-1;if(C+=Qe,Qe<me)break}return C};function jm(g,y,S,N){try{var C=cn.getStreamFromFD(g),$=Ln(C,y,S);return R[N>>2]=$,0}catch(fe){if(typeof H>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}H.createPreloadedFile=ua,H.staticInit();var Pf={__syscall_chmod:pc,__syscall_faccessat:hc,__syscall_fchmod:mc,__syscall_fchown32:ou,__syscall_fcntl64:au,__syscall_fstat64:da,__syscall_ftruncate64:Qa,__syscall_getcwd:wf,__syscall_ioctl:Sf,__syscall_lstat64:gc,__syscall_mkdirat:$s,__syscall_newfstatat:yc,__syscall_openat:vc,__syscall_readlinkat:Ef,__syscall_rmdir:bc,__syscall_stat64:xc,__syscall_unlinkat:_c,__syscall_utimensat:wc,_emscripten_get_now_is_monotonic:dr,_localtime_js:If,_mmap_js:cu,_munmap_js:Ga,_tzset_js:Yi,emscripten_date_now:Cf,emscripten_get_now:mi,emscripten_resize_heap:qf,environ_get:dx,environ_sizes_get:fx,fd_close:Rf,fd_fdstat_get:Rm,fd_read:du,fd_seek:px,fd_sync:Af,fd_write:jm,memory:q},he=nn();r._sqlite3_status64=(g,y,S,N)=>(r._sqlite3_status64=he.sqlite3_status64)(g,y,S,N),r._sqlite3_status=(g,y,S,N)=>(r._sqlite3_status=he.sqlite3_status)(g,y,S,N),r._sqlite3_db_status=(g,y,S,N,C)=>(r._sqlite3_db_status=he.sqlite3_db_status)(g,y,S,N,C),r._sqlite3_msize=g=>(r._sqlite3_msize=he.sqlite3_msize)(g),r._sqlite3_vfs_find=g=>(r._sqlite3_vfs_find=he.sqlite3_vfs_find)(g),r._sqlite3_initialize=()=>(r._sqlite3_initialize=he.sqlite3_initialize)(),r._sqlite3_malloc=g=>(r._sqlite3_malloc=he.sqlite3_malloc)(g),r._sqlite3_free=g=>(r._sqlite3_free=he.sqlite3_free)(g),r._sqlite3_vfs_register=(g,y)=>(r._sqlite3_vfs_register=he.sqlite3_vfs_register)(g,y),r._sqlite3_vfs_unregister=g=>(r._sqlite3_vfs_unregister=he.sqlite3_vfs_unregister)(g),r._sqlite3_malloc64=g=>(r._sqlite3_malloc64=he.sqlite3_malloc64)(g),r._sqlite3_realloc=(g,y)=>(r._sqlite3_realloc=he.sqlite3_realloc)(g,y),r._sqlite3_realloc64=(g,y)=>(r._sqlite3_realloc64=he.sqlite3_realloc64)(g,y),r._sqlite3_value_text=g=>(r._sqlite3_value_text=he.sqlite3_value_text)(g),r._sqlite3_randomness=(g,y)=>(r._sqlite3_randomness=he.sqlite3_randomness)(g,y),r._sqlite3_stricmp=(g,y)=>(r._sqlite3_stricmp=he.sqlite3_stricmp)(g,y),r._sqlite3_strnicmp=(g,y,S)=>(r._sqlite3_strnicmp=he.sqlite3_strnicmp)(g,y,S),r._sqlite3_uri_parameter=(g,y)=>(r._sqlite3_uri_parameter=he.sqlite3_uri_parameter)(g,y),r._sqlite3_uri_boolean=(g,y,S)=>(r._sqlite3_uri_boolean=he.sqlite3_uri_boolean)(g,y,S),r._sqlite3_serialize=(g,y,S,N)=>(r._sqlite3_serialize=he.sqlite3_serialize)(g,y,S,N),r._sqlite3_prepare_v2=(g,y,S,N,C)=>(r._sqlite3_prepare_v2=he.sqlite3_prepare_v2)(g,y,S,N,C),r._sqlite3_step=g=>(r._sqlite3_step=he.sqlite3_step)(g),r._sqlite3_column_int64=(g,y)=>(r._sqlite3_column_int64=he.sqlite3_column_int64)(g,y),r._sqlite3_reset=g=>(r._sqlite3_reset=he.sqlite3_reset)(g),r._sqlite3_exec=(g,y,S,N,C)=>(r._sqlite3_exec=he.sqlite3_exec)(g,y,S,N,C),r._sqlite3_column_int=(g,y)=>(r._sqlite3_column_int=he.sqlite3_column_int)(g,y),r._sqlite3_finalize=g=>(r._sqlite3_finalize=he.sqlite3_finalize)(g),r._sqlite3_file_control=(g,y,S,N)=>(r._sqlite3_file_control=he.sqlite3_file_control)(g,y,S,N),r._sqlite3_column_name=(g,y)=>(r._sqlite3_column_name=he.sqlite3_column_name)(g,y),r._sqlite3_column_text=(g,y)=>(r._sqlite3_column_text=he.sqlite3_column_text)(g,y),r._sqlite3_column_type=(g,y)=>(r._sqlite3_column_type=he.sqlite3_column_type)(g,y),r._sqlite3_errmsg=g=>(r._sqlite3_errmsg=he.sqlite3_errmsg)(g),r._sqlite3_deserialize=(g,y,S,N,C,$)=>(r._sqlite3_deserialize=he.sqlite3_deserialize)(g,y,S,N,C,$),r._sqlite3_clear_bindings=g=>(r._sqlite3_clear_bindings=he.sqlite3_clear_bindings)(g),r._sqlite3_value_blob=g=>(r._sqlite3_value_blob=he.sqlite3_value_blob)(g),r._sqlite3_value_bytes=g=>(r._sqlite3_value_bytes=he.sqlite3_value_bytes)(g),r._sqlite3_value_double=g=>(r._sqlite3_value_double=he.sqlite3_value_double)(g),r._sqlite3_value_int=g=>(r._sqlite3_value_int=he.sqlite3_value_int)(g),r._sqlite3_value_int64=g=>(r._sqlite3_value_int64=he.sqlite3_value_int64)(g),r._sqlite3_value_subtype=g=>(r._sqlite3_value_subtype=he.sqlite3_value_subtype)(g),r._sqlite3_value_pointer=(g,y)=>(r._sqlite3_value_pointer=he.sqlite3_value_pointer)(g,y),r._sqlite3_value_type=g=>(r._sqlite3_value_type=he.sqlite3_value_type)(g),r._sqlite3_value_nochange=g=>(r._sqlite3_value_nochange=he.sqlite3_value_nochange)(g),r._sqlite3_value_frombind=g=>(r._sqlite3_value_frombind=he.sqlite3_value_frombind)(g),r._sqlite3_value_dup=g=>(r._sqlite3_value_dup=he.sqlite3_value_dup)(g),r._sqlite3_value_free=g=>(r._sqlite3_value_free=he.sqlite3_value_free)(g),r._sqlite3_result_blob=(g,y,S,N)=>(r._sqlite3_result_blob=he.sqlite3_result_blob)(g,y,S,N),r._sqlite3_result_error_toobig=g=>(r._sqlite3_result_error_toobig=he.sqlite3_result_error_toobig)(g),r._sqlite3_result_error_nomem=g=>(r._sqlite3_result_error_nomem=he.sqlite3_result_error_nomem)(g),r._sqlite3_result_double=(g,y)=>(r._sqlite3_result_double=he.sqlite3_result_double)(g,y),r._sqlite3_result_error=(g,y,S)=>(r._sqlite3_result_error=he.sqlite3_result_error)(g,y,S),r._sqlite3_result_int=(g,y)=>(r._sqlite3_result_int=he.sqlite3_result_int)(g,y),r._sqlite3_result_int64=(g,y)=>(r._sqlite3_result_int64=he.sqlite3_result_int64)(g,y),r._sqlite3_result_null=g=>(r._sqlite3_result_null=he.sqlite3_result_null)(g),r._sqlite3_result_pointer=(g,y,S,N)=>(r._sqlite3_result_pointer=he.sqlite3_result_pointer)(g,y,S,N),r._sqlite3_result_subtype=(g,y)=>(r._sqlite3_result_subtype=he.sqlite3_result_subtype)(g,y),r._sqlite3_result_text=(g,y,S,N)=>(r._sqlite3_result_text=he.sqlite3_result_text)(g,y,S,N),r._sqlite3_result_zeroblob=(g,y)=>(r._sqlite3_result_zeroblob=he.sqlite3_result_zeroblob)(g,y),r._sqlite3_result_zeroblob64=(g,y)=>(r._sqlite3_result_zeroblob64=he.sqlite3_result_zeroblob64)(g,y),r._sqlite3_result_error_code=(g,y)=>(r._sqlite3_result_error_code=he.sqlite3_result_error_code)(g,y),r._sqlite3_user_data=g=>(r._sqlite3_user_data=he.sqlite3_user_data)(g),r._sqlite3_context_db_handle=g=>(r._sqlite3_context_db_handle=he.sqlite3_context_db_handle)(g),r._sqlite3_vtab_nochange=g=>(r._sqlite3_vtab_nochange=he.sqlite3_vtab_nochange)(g),r._sqlite3_vtab_in_first=(g,y)=>(r._sqlite3_vtab_in_first=he.sqlite3_vtab_in_first)(g,y),r._sqlite3_vtab_in_next=(g,y)=>(r._sqlite3_vtab_in_next=he.sqlite3_vtab_in_next)(g,y),r._sqlite3_aggregate_context=(g,y)=>(r._sqlite3_aggregate_context=he.sqlite3_aggregate_context)(g,y),r._sqlite3_get_auxdata=(g,y)=>(r._sqlite3_get_auxdata=he.sqlite3_get_auxdata)(g,y),r._sqlite3_set_auxdata=(g,y,S,N)=>(r._sqlite3_set_auxdata=he.sqlite3_set_auxdata)(g,y,S,N),r._sqlite3_column_count=g=>(r._sqlite3_column_count=he.sqlite3_column_count)(g),r._sqlite3_data_count=g=>(r._sqlite3_data_count=he.sqlite3_data_count)(g),r._sqlite3_column_blob=(g,y)=>(r._sqlite3_column_blob=he.sqlite3_column_blob)(g,y),r._sqlite3_column_bytes=(g,y)=>(r._sqlite3_column_bytes=he.sqlite3_column_bytes)(g,y),r._sqlite3_column_double=(g,y)=>(r._sqlite3_column_double=he.sqlite3_column_double)(g,y),r._sqlite3_column_value=(g,y)=>(r._sqlite3_column_value=he.sqlite3_column_value)(g,y),r._sqlite3_column_decltype=(g,y)=>(r._sqlite3_column_decltype=he.sqlite3_column_decltype)(g,y),r._sqlite3_bind_blob=(g,y,S,N,C)=>(r._sqlite3_bind_blob=he.sqlite3_bind_blob)(g,y,S,N,C),r._sqlite3_bind_double=(g,y,S)=>(r._sqlite3_bind_double=he.sqlite3_bind_double)(g,y,S),r._sqlite3_bind_int=(g,y,S)=>(r._sqlite3_bind_int=he.sqlite3_bind_int)(g,y,S),r._sqlite3_bind_int64=(g,y,S)=>(r._sqlite3_bind_int64=he.sqlite3_bind_int64)(g,y,S),r._sqlite3_bind_null=(g,y)=>(r._sqlite3_bind_null=he.sqlite3_bind_null)(g,y),r._sqlite3_bind_pointer=(g,y,S,N,C)=>(r._sqlite3_bind_pointer=he.sqlite3_bind_pointer)(g,y,S,N,C),r._sqlite3_bind_text=(g,y,S,N,C)=>(r._sqlite3_bind_text=he.sqlite3_bind_text)(g,y,S,N,C),r._sqlite3_bind_parameter_count=g=>(r._sqlite3_bind_parameter_count=he.sqlite3_bind_parameter_count)(g),r._sqlite3_bind_parameter_name=(g,y)=>(r._sqlite3_bind_parameter_name=he.sqlite3_bind_parameter_name)(g,y),r._sqlite3_bind_parameter_index=(g,y)=>(r._sqlite3_bind_parameter_index=he.sqlite3_bind_parameter_index)(g,y),r._sqlite3_db_handle=g=>(r._sqlite3_db_handle=he.sqlite3_db_handle)(g),r._sqlite3_stmt_readonly=g=>(r._sqlite3_stmt_readonly=he.sqlite3_stmt_readonly)(g),r._sqlite3_stmt_isexplain=g=>(r._sqlite3_stmt_isexplain=he.sqlite3_stmt_isexplain)(g),r._sqlite3_stmt_explain=(g,y)=>(r._sqlite3_stmt_explain=he.sqlite3_stmt_explain)(g,y),r._sqlite3_stmt_busy=g=>(r._sqlite3_stmt_busy=he.sqlite3_stmt_busy)(g),r._sqlite3_stmt_status=(g,y,S)=>(r._sqlite3_stmt_status=he.sqlite3_stmt_status)(g,y,S),r._sqlite3_sql=g=>(r._sqlite3_sql=he.sqlite3_sql)(g),r._sqlite3_expanded_sql=g=>(r._sqlite3_expanded_sql=he.sqlite3_expanded_sql)(g),r._sqlite3_preupdate_old=(g,y,S)=>(r._sqlite3_preupdate_old=he.sqlite3_preupdate_old)(g,y,S),r._sqlite3_preupdate_count=g=>(r._sqlite3_preupdate_count=he.sqlite3_preupdate_count)(g),r._sqlite3_preupdate_depth=g=>(r._sqlite3_preupdate_depth=he.sqlite3_preupdate_depth)(g),r._sqlite3_preupdate_blobwrite=g=>(r._sqlite3_preupdate_blobwrite=he.sqlite3_preupdate_blobwrite)(g),r._sqlite3_preupdate_new=(g,y,S)=>(r._sqlite3_preupdate_new=he.sqlite3_preupdate_new)(g,y,S),r._sqlite3_value_numeric_type=g=>(r._sqlite3_value_numeric_type=he.sqlite3_value_numeric_type)(g),r._sqlite3_set_authorizer=(g,y,S)=>(r._sqlite3_set_authorizer=he.sqlite3_set_authorizer)(g,y,S),r._sqlite3_strglob=(g,y)=>(r._sqlite3_strglob=he.sqlite3_strglob)(g,y),r._sqlite3_strlike=(g,y,S)=>(r._sqlite3_strlike=he.sqlite3_strlike)(g,y,S),r._sqlite3_auto_extension=g=>(r._sqlite3_auto_extension=he.sqlite3_auto_extension)(g),r._sqlite3_cancel_auto_extension=g=>(r._sqlite3_cancel_auto_extension=he.sqlite3_cancel_auto_extension)(g),r._sqlite3_reset_auto_extension=()=>(r._sqlite3_reset_auto_extension=he.sqlite3_reset_auto_extension)(),r._sqlite3_prepare_v3=(g,y,S,N,C,$)=>(r._sqlite3_prepare_v3=he.sqlite3_prepare_v3)(g,y,S,N,C,$),r._sqlite3_create_module=(g,y,S,N)=>(r._sqlite3_create_module=he.sqlite3_create_module)(g,y,S,N),r._sqlite3_create_module_v2=(g,y,S,N,C)=>(r._sqlite3_create_module_v2=he.sqlite3_create_module_v2)(g,y,S,N,C),r._sqlite3_drop_modules=(g,y)=>(r._sqlite3_drop_modules=he.sqlite3_drop_modules)(g,y),r._sqlite3_declare_vtab=(g,y)=>(r._sqlite3_declare_vtab=he.sqlite3_declare_vtab)(g,y),r._sqlite3_vtab_on_conflict=g=>(r._sqlite3_vtab_on_conflict=he.sqlite3_vtab_on_conflict)(g),r._sqlite3_vtab_collation=(g,y)=>(r._sqlite3_vtab_collation=he.sqlite3_vtab_collation)(g,y),r._sqlite3_vtab_in=(g,y,S)=>(r._sqlite3_vtab_in=he.sqlite3_vtab_in)(g,y,S),r._sqlite3_vtab_rhs_value=(g,y,S)=>(r._sqlite3_vtab_rhs_value=he.sqlite3_vtab_rhs_value)(g,y,S),r._sqlite3_vtab_distinct=g=>(r._sqlite3_vtab_distinct=he.sqlite3_vtab_distinct)(g),r._sqlite3_keyword_name=(g,y,S)=>(r._sqlite3_keyword_name=he.sqlite3_keyword_name)(g,y,S),r._sqlite3_keyword_count=()=>(r._sqlite3_keyword_count=he.sqlite3_keyword_count)(),r._sqlite3_keyword_check=(g,y)=>(r._sqlite3_keyword_check=he.sqlite3_keyword_check)(g,y),r._sqlite3_complete=g=>(r._sqlite3_complete=he.sqlite3_complete)(g),r._sqlite3_libversion=()=>(r._sqlite3_libversion=he.sqlite3_libversion)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=he.sqlite3_libversion_number)(),r._sqlite3_shutdown=()=>(r._sqlite3_shutdown=he.sqlite3_shutdown)(),r._sqlite3_last_insert_rowid=g=>(r._sqlite3_last_insert_rowid=he.sqlite3_last_insert_rowid)(g),r._sqlite3_set_last_insert_rowid=(g,y)=>(r._sqlite3_set_last_insert_rowid=he.sqlite3_set_last_insert_rowid)(g,y),r._sqlite3_changes64=g=>(r._sqlite3_changes64=he.sqlite3_changes64)(g),r._sqlite3_changes=g=>(r._sqlite3_changes=he.sqlite3_changes)(g),r._sqlite3_total_changes64=g=>(r._sqlite3_total_changes64=he.sqlite3_total_changes64)(g),r._sqlite3_total_changes=g=>(r._sqlite3_total_changes=he.sqlite3_total_changes)(g),r._sqlite3_txn_state=(g,y)=>(r._sqlite3_txn_state=he.sqlite3_txn_state)(g,y),r._sqlite3_close_v2=g=>(r._sqlite3_close_v2=he.sqlite3_close_v2)(g),r._sqlite3_busy_handler=(g,y,S)=>(r._sqlite3_busy_handler=he.sqlite3_busy_handler)(g,y,S),r._sqlite3_progress_handler=(g,y,S,N)=>(r._sqlite3_progress_handler=he.sqlite3_progress_handler)(g,y,S,N),r._sqlite3_busy_timeout=(g,y)=>(r._sqlite3_busy_timeout=he.sqlite3_busy_timeout)(g,y),r._sqlite3_interrupt=g=>(r._sqlite3_interrupt=he.sqlite3_interrupt)(g),r._sqlite3_is_interrupted=g=>(r._sqlite3_is_interrupted=he.sqlite3_is_interrupted)(g),r._sqlite3_create_function=(g,y,S,N,C,$,fe,me)=>(r._sqlite3_create_function=he.sqlite3_create_function)(g,y,S,N,C,$,fe,me),r._sqlite3_create_function_v2=(g,y,S,N,C,$,fe,me,Qe)=>(r._sqlite3_create_function_v2=he.sqlite3_create_function_v2)(g,y,S,N,C,$,fe,me,Qe),r._sqlite3_create_window_function=(g,y,S,N,C,$,fe,me,Qe,tt)=>(r._sqlite3_create_window_function=he.sqlite3_create_window_function)(g,y,S,N,C,$,fe,me,Qe,tt),r._sqlite3_overload_function=(g,y,S)=>(r._sqlite3_overload_function=he.sqlite3_overload_function)(g,y,S),r._sqlite3_trace_v2=(g,y,S,N)=>(r._sqlite3_trace_v2=he.sqlite3_trace_v2)(g,y,S,N),r._sqlite3_commit_hook=(g,y,S)=>(r._sqlite3_commit_hook=he.sqlite3_commit_hook)(g,y,S),r._sqlite3_update_hook=(g,y,S)=>(r._sqlite3_update_hook=he.sqlite3_update_hook)(g,y,S),r._sqlite3_rollback_hook=(g,y,S)=>(r._sqlite3_rollback_hook=he.sqlite3_rollback_hook)(g,y,S),r._sqlite3_preupdate_hook=(g,y,S)=>(r._sqlite3_preupdate_hook=he.sqlite3_preupdate_hook)(g,y,S),r._sqlite3_error_offset=g=>(r._sqlite3_error_offset=he.sqlite3_error_offset)(g),r._sqlite3_errcode=g=>(r._sqlite3_errcode=he.sqlite3_errcode)(g),r._sqlite3_extended_errcode=g=>(r._sqlite3_extended_errcode=he.sqlite3_extended_errcode)(g),r._sqlite3_errstr=g=>(r._sqlite3_errstr=he.sqlite3_errstr)(g),r._sqlite3_limit=(g,y,S)=>(r._sqlite3_limit=he.sqlite3_limit)(g,y,S),r._sqlite3_open=(g,y)=>(r._sqlite3_open=he.sqlite3_open)(g,y),r._sqlite3_open_v2=(g,y,S,N)=>(r._sqlite3_open_v2=he.sqlite3_open_v2)(g,y,S,N),r._sqlite3_create_collation=(g,y,S,N,C)=>(r._sqlite3_create_collation=he.sqlite3_create_collation)(g,y,S,N,C),r._sqlite3_create_collation_v2=(g,y,S,N,C,$)=>(r._sqlite3_create_collation_v2=he.sqlite3_create_collation_v2)(g,y,S,N,C,$),r._sqlite3_collation_needed=(g,y,S)=>(r._sqlite3_collation_needed=he.sqlite3_collation_needed)(g,y,S),r._sqlite3_get_autocommit=g=>(r._sqlite3_get_autocommit=he.sqlite3_get_autocommit)(g),r._sqlite3_table_column_metadata=(g,y,S,N,C,$,fe,me,Qe)=>(r._sqlite3_table_column_metadata=he.sqlite3_table_column_metadata)(g,y,S,N,C,$,fe,me,Qe),r._sqlite3_extended_result_codes=(g,y)=>(r._sqlite3_extended_result_codes=he.sqlite3_extended_result_codes)(g,y),r._sqlite3_uri_key=(g,y)=>(r._sqlite3_uri_key=he.sqlite3_uri_key)(g,y),r._sqlite3_uri_int64=(g,y,S)=>(r._sqlite3_uri_int64=he.sqlite3_uri_int64)(g,y,S),r._sqlite3_db_name=(g,y)=>(r._sqlite3_db_name=he.sqlite3_db_name)(g,y),r._sqlite3_db_filename=(g,y)=>(r._sqlite3_db_filename=he.sqlite3_db_filename)(g,y),r._sqlite3_db_readonly=(g,y)=>(r._sqlite3_db_readonly=he.sqlite3_db_readonly)(g,y),r._sqlite3_compileoption_used=g=>(r._sqlite3_compileoption_used=he.sqlite3_compileoption_used)(g),r._sqlite3_compileoption_get=g=>(r._sqlite3_compileoption_get=he.sqlite3_compileoption_get)(g),r._sqlite3session_diff=(g,y,S,N)=>(r._sqlite3session_diff=he.sqlite3session_diff)(g,y,S,N),r._sqlite3session_attach=(g,y)=>(r._sqlite3session_attach=he.sqlite3session_attach)(g,y),r._sqlite3session_create=(g,y,S)=>(r._sqlite3session_create=he.sqlite3session_create)(g,y,S),r._sqlite3session_delete=g=>(r._sqlite3session_delete=he.sqlite3session_delete)(g),r._sqlite3session_table_filter=(g,y,S)=>(r._sqlite3session_table_filter=he.sqlite3session_table_filter)(g,y,S),r._sqlite3session_changeset=(g,y,S)=>(r._sqlite3session_changeset=he.sqlite3session_changeset)(g,y,S),r._sqlite3session_changeset_strm=(g,y,S)=>(r._sqlite3session_changeset_strm=he.sqlite3session_changeset_strm)(g,y,S),r._sqlite3session_patchset_strm=(g,y,S)=>(r._sqlite3session_patchset_strm=he.sqlite3session_patchset_strm)(g,y,S),r._sqlite3session_patchset=(g,y,S)=>(r._sqlite3session_patchset=he.sqlite3session_patchset)(g,y,S),r._sqlite3session_enable=(g,y)=>(r._sqlite3session_enable=he.sqlite3session_enable)(g,y),r._sqlite3session_indirect=(g,y)=>(r._sqlite3session_indirect=he.sqlite3session_indirect)(g,y),r._sqlite3session_isempty=g=>(r._sqlite3session_isempty=he.sqlite3session_isempty)(g),r._sqlite3session_memory_used=g=>(r._sqlite3session_memory_used=he.sqlite3session_memory_used)(g),r._sqlite3session_object_config=(g,y,S)=>(r._sqlite3session_object_config=he.sqlite3session_object_config)(g,y,S),r._sqlite3session_changeset_size=g=>(r._sqlite3session_changeset_size=he.sqlite3session_changeset_size)(g),r._sqlite3changeset_start=(g,y,S)=>(r._sqlite3changeset_start=he.sqlite3changeset_start)(g,y,S),r._sqlite3changeset_start_v2=(g,y,S,N)=>(r._sqlite3changeset_start_v2=he.sqlite3changeset_start_v2)(g,y,S,N),r._sqlite3changeset_start_strm=(g,y,S)=>(r._sqlite3changeset_start_strm=he.sqlite3changeset_start_strm)(g,y,S),r._sqlite3changeset_start_v2_strm=(g,y,S,N)=>(r._sqlite3changeset_start_v2_strm=he.sqlite3changeset_start_v2_strm)(g,y,S,N),r._sqlite3changeset_next=g=>(r._sqlite3changeset_next=he.sqlite3changeset_next)(g),r._sqlite3changeset_op=(g,y,S,N,C)=>(r._sqlite3changeset_op=he.sqlite3changeset_op)(g,y,S,N,C),r._sqlite3changeset_pk=(g,y,S)=>(r._sqlite3changeset_pk=he.sqlite3changeset_pk)(g,y,S),r._sqlite3changeset_old=(g,y,S)=>(r._sqlite3changeset_old=he.sqlite3changeset_old)(g,y,S),r._sqlite3changeset_new=(g,y,S)=>(r._sqlite3changeset_new=he.sqlite3changeset_new)(g,y,S),r._sqlite3changeset_conflict=(g,y,S)=>(r._sqlite3changeset_conflict=he.sqlite3changeset_conflict)(g,y,S),r._sqlite3changeset_fk_conflicts=(g,y)=>(r._sqlite3changeset_fk_conflicts=he.sqlite3changeset_fk_conflicts)(g,y),r._sqlite3changeset_finalize=g=>(r._sqlite3changeset_finalize=he.sqlite3changeset_finalize)(g),r._sqlite3changeset_invert=(g,y,S,N)=>(r._sqlite3changeset_invert=he.sqlite3changeset_invert)(g,y,S,N),r._sqlite3changeset_invert_strm=(g,y,S,N)=>(r._sqlite3changeset_invert_strm=he.sqlite3changeset_invert_strm)(g,y,S,N),r._sqlite3changeset_apply_v2=(g,y,S,N,C,$,fe,me,Qe)=>(r._sqlite3changeset_apply_v2=he.sqlite3changeset_apply_v2)(g,y,S,N,C,$,fe,me,Qe),r._sqlite3changeset_apply=(g,y,S,N,C,$)=>(r._sqlite3changeset_apply=he.sqlite3changeset_apply)(g,y,S,N,C,$),r._sqlite3changeset_apply_v2_strm=(g,y,S,N,C,$,fe,me,Qe)=>(r._sqlite3changeset_apply_v2_strm=he.sqlite3changeset_apply_v2_strm)(g,y,S,N,C,$,fe,me,Qe),r._sqlite3changeset_apply_strm=(g,y,S,N,C,$)=>(r._sqlite3changeset_apply_strm=he.sqlite3changeset_apply_strm)(g,y,S,N,C,$),r._sqlite3changegroup_new=g=>(r._sqlite3changegroup_new=he.sqlite3changegroup_new)(g),r._sqlite3changegroup_add=(g,y,S)=>(r._sqlite3changegroup_add=he.sqlite3changegroup_add)(g,y,S),r._sqlite3changegroup_output=(g,y,S)=>(r._sqlite3changegroup_output=he.sqlite3changegroup_output)(g,y,S),r._sqlite3changegroup_add_strm=(g,y,S)=>(r._sqlite3changegroup_add_strm=he.sqlite3changegroup_add_strm)(g,y,S),r._sqlite3changegroup_output_strm=(g,y,S)=>(r._sqlite3changegroup_output_strm=he.sqlite3changegroup_output_strm)(g,y,S),r._sqlite3changegroup_delete=g=>(r._sqlite3changegroup_delete=he.sqlite3changegroup_delete)(g),r._sqlite3changeset_concat=(g,y,S,N,C,$)=>(r._sqlite3changeset_concat=he.sqlite3changeset_concat)(g,y,S,N,C,$),r._sqlite3changeset_concat_strm=(g,y,S,N,C,$)=>(r._sqlite3changeset_concat_strm=he.sqlite3changeset_concat_strm)(g,y,S,N,C,$),r._sqlite3session_config=(g,y)=>(r._sqlite3session_config=he.sqlite3session_config)(g,y),r._sqlite3_sourceid=()=>(r._sqlite3_sourceid=he.sqlite3_sourceid)(),r._sqlite3__wasm_pstack_ptr=()=>(r._sqlite3__wasm_pstack_ptr=he.sqlite3__wasm_pstack_ptr)(),r._sqlite3__wasm_pstack_restore=g=>(r._sqlite3__wasm_pstack_restore=he.sqlite3__wasm_pstack_restore)(g),r._sqlite3__wasm_pstack_alloc=g=>(r._sqlite3__wasm_pstack_alloc=he.sqlite3__wasm_pstack_alloc)(g),r._sqlite3__wasm_pstack_remaining=()=>(r._sqlite3__wasm_pstack_remaining=he.sqlite3__wasm_pstack_remaining)(),r._sqlite3__wasm_pstack_quota=()=>(r._sqlite3__wasm_pstack_quota=he.sqlite3__wasm_pstack_quota)(),r._sqlite3__wasm_db_error=(g,y,S)=>(r._sqlite3__wasm_db_error=he.sqlite3__wasm_db_error)(g,y,S),r._sqlite3__wasm_test_struct=g=>(r._sqlite3__wasm_test_struct=he.sqlite3__wasm_test_struct)(g),r._sqlite3__wasm_enum_json=()=>(r._sqlite3__wasm_enum_json=he.sqlite3__wasm_enum_json)(),r._sqlite3__wasm_vfs_unlink=(g,y)=>(r._sqlite3__wasm_vfs_unlink=he.sqlite3__wasm_vfs_unlink)(g,y),r._sqlite3__wasm_db_vfs=(g,y)=>(r._sqlite3__wasm_db_vfs=he.sqlite3__wasm_db_vfs)(g,y),r._sqlite3__wasm_db_reset=g=>(r._sqlite3__wasm_db_reset=he.sqlite3__wasm_db_reset)(g),r._sqlite3__wasm_db_export_chunked=(g,y)=>(r._sqlite3__wasm_db_export_chunked=he.sqlite3__wasm_db_export_chunked)(g,y),r._sqlite3__wasm_db_serialize=(g,y,S,N,C)=>(r._sqlite3__wasm_db_serialize=he.sqlite3__wasm_db_serialize)(g,y,S,N,C),r._sqlite3__wasm_vfs_create_file=(g,y,S,N)=>(r._sqlite3__wasm_vfs_create_file=he.sqlite3__wasm_vfs_create_file)(g,y,S,N),r._sqlite3__wasm_posix_create_file=(g,y,S)=>(r._sqlite3__wasm_posix_create_file=he.sqlite3__wasm_posix_create_file)(g,y,S),r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(g,y)=>(r._sqlite3__wasm_kvvfsMakeKeyOnPstack=he.sqlite3__wasm_kvvfsMakeKeyOnPstack)(g,y),r._sqlite3__wasm_kvvfs_methods=()=>(r._sqlite3__wasm_kvvfs_methods=he.sqlite3__wasm_kvvfs_methods)(),r._sqlite3__wasm_vtab_config=(g,y,S)=>(r._sqlite3__wasm_vtab_config=he.sqlite3__wasm_vtab_config)(g,y,S),r._sqlite3__wasm_db_config_ip=(g,y,S,N)=>(r._sqlite3__wasm_db_config_ip=he.sqlite3__wasm_db_config_ip)(g,y,S,N),r._sqlite3__wasm_db_config_pii=(g,y,S,N,C)=>(r._sqlite3__wasm_db_config_pii=he.sqlite3__wasm_db_config_pii)(g,y,S,N,C),r._sqlite3__wasm_db_config_s=(g,y,S)=>(r._sqlite3__wasm_db_config_s=he.sqlite3__wasm_db_config_s)(g,y,S),r._sqlite3__wasm_config_i=(g,y)=>(r._sqlite3__wasm_config_i=he.sqlite3__wasm_config_i)(g,y),r._sqlite3__wasm_config_ii=(g,y,S)=>(r._sqlite3__wasm_config_ii=he.sqlite3__wasm_config_ii)(g,y,S),r._sqlite3__wasm_config_j=(g,y)=>(r._sqlite3__wasm_config_j=he.sqlite3__wasm_config_j)(g,y),r._sqlite3__wasm_qfmt_token=(g,y)=>(r._sqlite3__wasm_qfmt_token=he.sqlite3__wasm_qfmt_token)(g,y),r._sqlite3__wasm_init_wasmfs=g=>(r._sqlite3__wasm_init_wasmfs=he.sqlite3__wasm_init_wasmfs)(g),r._sqlite3__wasm_test_intptr=g=>(r._sqlite3__wasm_test_intptr=he.sqlite3__wasm_test_intptr)(g),r._sqlite3__wasm_test_voidptr=g=>(r._sqlite3__wasm_test_voidptr=he.sqlite3__wasm_test_voidptr)(g),r._sqlite3__wasm_test_int64_max=()=>(r._sqlite3__wasm_test_int64_max=he.sqlite3__wasm_test_int64_max)(),r._sqlite3__wasm_test_int64_min=()=>(r._sqlite3__wasm_test_int64_min=he.sqlite3__wasm_test_int64_min)(),r._sqlite3__wasm_test_int64_times2=g=>(r._sqlite3__wasm_test_int64_times2=he.sqlite3__wasm_test_int64_times2)(g),r._sqlite3__wasm_test_int64_minmax=(g,y)=>(r._sqlite3__wasm_test_int64_minmax=he.sqlite3__wasm_test_int64_minmax)(g,y),r._sqlite3__wasm_test_int64ptr=g=>(r._sqlite3__wasm_test_int64ptr=he.sqlite3__wasm_test_int64ptr)(g),r._sqlite3__wasm_test_stack_overflow=g=>(r._sqlite3__wasm_test_stack_overflow=he.sqlite3__wasm_test_stack_overflow)(g),r._sqlite3__wasm_test_str_hello=g=>(r._sqlite3__wasm_test_str_hello=he.sqlite3__wasm_test_str_hello)(g),r._sqlite3__wasm_SQLTester_strglob=(g,y)=>(r._sqlite3__wasm_SQLTester_strglob=he.sqlite3__wasm_SQLTester_strglob)(g,y),r._malloc=g=>(r._malloc=he.malloc)(g),r._free=g=>(r._free=he.free)(g),r._realloc=(g,y)=>(r._realloc=he.realloc)(g,y);var Ff=(g,y)=>(Ff=he.emscripten_builtin_memalign)(g,y);r.wasmMemory=q;var fu;de=function g(){fu||Df(),fu||(de=g)};function Df(){if(ce>0||(J(),ce>0))return;function g(){fu||(fu=!0,r.calledRun=!0,!A&&(le(),i(r),r.onRuntimeInitialized?.(),se()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),g()},1)):g()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Df(),r.postRun||(r.postRun=[]),r.postRun.push(function(g){if(globalThis.sqlite3ApiBootstrap=function y(S=globalThis.sqlite3ApiConfig||y.defaultConfig){if(y.sqlite3)return(y.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),y.sqlite3;const N=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof g<"u"&&g.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},S||{});Object.assign(N,{allocExportName:N.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:N.useStdAlloc?"free":"sqlite3_free",reallocExportName:N.useStdAlloc?"realloc":"sqlite3_realloc"},N),["exports","memory","wasmfsOpfsDir"].forEach(Q=>{typeof N[Q]=="function"&&(N[Q]=N[Q]())}),delete globalThis.sqlite3ApiConfig,delete y.defaultConfig;const C=Object.create(null),$=Object.create(null),fe=Q=>C.sqlite3_js_rc_str&&C.sqlite3_js_rc_str(Q)||"Unknown result code #"+Q,me=Q=>typeof Q=="number"&&Q===(Q|0);class Qe extends Error{constructor(...re){let ie;if(re.length)if(me(re[0]))if(ie=re[0],re.length===1)super(fe(re[0]));else{const Le=fe(ie);typeof re[1]=="object"?super(Le,re[1]):(re[0]=Le+":",super(re.join(" ")))}else re.length===2&&typeof re[1]=="object"?super(...re):super(re.join(" "));this.resultCode=ie||C.SQLITE_ERROR,this.name="SQLite3Error"}}Qe.toss=(...Q)=>{throw new Qe(...Q)};const tt=Qe.toss;N.wasmfsOpfsDir&&!/^\/[^/]+$/.test(N.wasmfsOpfsDir)&&tt("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const at=Q=>typeof Q!="bigint"&&Q===(Q|0)&&Q<=0x7fffffff&&Q>=-0x80000000,mt=function Q(re){return Q._max||(Q._max=BigInt("0x7fffffffffffffff"),Q._min=~Q._max),re>=Q._min&&re<=Q._max},Be=Q=>Q>=-2147483647n-1n&&Q<=2147483647n,Re=function Q(re){return Q._min||(Q._min=Number.MIN_SAFE_INTEGER,Q._max=Number.MAX_SAFE_INTEGER),re>=Q._min&&re<=Q._max},et=Q=>Q&&Q.constructor&&at(Q.constructor.BYTES_PER_ELEMENT)?Q:!1,be=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Ie=Q=>Q.buffer instanceof be,Te=(Q,re,ie)=>Ie(Q)?Q.slice(re,ie):Q.subarray(re,ie),Je=Q=>Q&&(Q instanceof Uint8Array||Q instanceof Int8Array||Q instanceof ArrayBuffer),Ge=Q=>Q&&(Q instanceof Uint8Array||Q instanceof Int8Array||Q instanceof ArrayBuffer),Oe=Q=>Je(Q)||tt("Value is not of a supported TypedArray type."),Ke=new TextDecoder("utf-8"),St=function(Q,re,ie){return Ke.decode(Te(Q,re,ie))},Y=function(Q){return Ge(Q)?St(Q instanceof ArrayBuffer?new Uint8Array(Q):Q):Array.isArray(Q)?Q.join(""):($.isPtr(Q)&&(Q=$.cstrToJs(Q)),Q)};class ue extends Error{constructor(...re){re.length===2&&typeof re[1]=="object"?super(...re):re.length?super(re.join(" ")):super("Allocation failed."),this.resultCode=C.SQLITE_NOMEM,this.name="WasmAllocError"}}ue.toss=(...Q)=>{throw new ue(...Q)},Object.assign(C,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(Q,re,ie,Le,it,qt,Bt,Jt,lt)=>{},sqlite3_create_function:(Q,re,ie,Le,it,qt,Bt,Jt)=>{},sqlite3_create_window_function:(Q,re,ie,Le,it,qt,Bt,Jt,lt,we)=>{},sqlite3_prepare_v3:(Q,re,ie,Le,it,qt)=>{},sqlite3_prepare_v2:(Q,re,ie,Le,it)=>{},sqlite3_exec:(Q,re,ie,Le,it)=>{},sqlite3_randomness:(Q,re)=>{}});const Ee={affirmBindableTypedArray:Oe,flexibleString:Y,bigIntFits32:Be,bigIntFits64:mt,bigIntFitsDouble:Re,isBindableTypedArray:Je,isInt32:at,isSQLableTypedArray:Ge,isTypedArray:et,typedArrayToString:St,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:Ie,toss:function(...Q){throw new Error(Q.join(" "))},toss3:tt,typedArrayPart:Te,affirmDbHeader:function(Q){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q));const re="SQLite format 3";re.length>Q.byteLength&&tt("Input does not contain an SQLite3 database header.");for(let ie=0;ie<re.length;++ie)re.charCodeAt(ie)!==Q[ie]&&tt("Input does not contain an SQLite3 database header.")},affirmIsDb:function(Q){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q));const re=Q.byteLength;(re<512||re%512!==0)&&tt("Byte array size",re,"is invalid for an SQLite3 db."),Ee.affirmDbHeader(Q)}};Object.assign($,{ptrSizeof:N.wasmPtrSizeof||4,ptrIR:N.wasmPtrIR||"i32",bigIntEnabled:!!N.bigIntEnabled,exports:N.exports||tt("Missing API config.exports (WASM module exports)."),memory:N.memory||N.exports.memory||tt("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),$.allocFromTypedArray=function(Q){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q)),Oe(Q);const re=$.alloc(Q.byteLength||1);return $.heapForSize(Q.constructor).set(Q.byteLength?Q:[0],re),re};{const Q=N.allocExportName,re=N.deallocExportName,ie=N.reallocExportName;for(const Le of[Q,re,ie])$.exports[Le]instanceof Function||tt("Missing required exports[",Le,"] function.");$.alloc=function Le(it){return Le.impl(it)||ue.toss("Failed to allocate",it," bytes.")},$.alloc.impl=$.exports[Q],$.realloc=function Le(it,qt){const Bt=Le.impl(it,qt);return qt?Bt||ue.toss("Failed to reallocate",qt," bytes."):0},$.realloc.impl=$.exports[ie],$.dealloc=$.exports[re]}$.compileOptionUsed=function Q(re){if(arguments.length){if(Array.isArray(re)){const ie={};return re.forEach(Le=>{ie[Le]=C.sqlite3_compileoption_used(Le)}),ie}else if(typeof re=="object")return Object.keys(re).forEach(ie=>{re[ie]=C.sqlite3_compileoption_used(ie)}),re}else{if(Q._result)return Q._result;Q._opt||(Q._rx=/^([^=]+)=(.+)/,Q._rxInt=/^-?\d+$/,Q._opt=function(Bt,Jt){const lt=Q._rx.exec(Bt);Jt[0]=lt?lt[1]:Bt,Jt[1]=lt?Q._rxInt.test(lt[2])?+lt[2]:lt[2]:!0});const ie={},Le=[0,0];let it=0,qt;for(;qt=C.sqlite3_compileoption_get(it++);)Q._opt(qt,Le),ie[Le[0]]=Le[1];return Q._result=ie}return typeof re=="string"?!!C.sqlite3_compileoption_used(re):!1},$.pstack=Object.assign(Object.create(null),{restore:$.exports.sqlite3__wasm_pstack_restore,alloc:function(Q){return typeof Q=="string"&&!(Q=$.sizeofIR(Q))&&ue.toss("Invalid value for pstack.alloc(",arguments[0],")"),$.exports.sqlite3__wasm_pstack_alloc(Q)||ue.toss("Could not allocate",Q,"bytes from the pstack.")},allocChunks:function(Q,re){typeof re=="string"&&!(re=$.sizeofIR(re))&&ue.toss("Invalid size value for allocChunks(",arguments[1],")");const ie=$.pstack.alloc(Q*re),Le=[];let it=0,qt=0;for(;it<Q;++it,qt+=re)Le.push(ie+qt);return Le},allocPtr:(Q=1,re=!0)=>Q===1?$.pstack.alloc(re?8:$.ptrSizeof):$.pstack.allocChunks(Q,re?8:$.ptrSizeof),call:function(Q){const re=$.pstack.pointer;try{return Q(pe)}finally{$.pstack.restore(re)}}}),Object.defineProperties($.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:$.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:$.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:$.exports.sqlite3__wasm_pstack_remaining}}),C.sqlite3_randomness=(...Q)=>{if(Q.length===1&&Ee.isTypedArray(Q[0])&&Q[0].BYTES_PER_ELEMENT===1){const re=Q[0];if(re.byteLength===0)return $.exports.sqlite3_randomness(0,0),re;const ie=$.pstack.pointer;try{let Le=re.byteLength,it=0;const qt=$.exports.sqlite3_randomness,Bt=$.heap8u(),Jt=Le<512?Le:512,lt=$.pstack.alloc(Jt);do{const we=Le>Jt?Jt:Le;qt(we,lt),re.set(Te(Bt,lt,lt+we),it),Le-=we,it+=we}while(Le>0)}catch(Le){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",Le)}finally{$.pstack.restore(ie)}return re}$.exports.sqlite3_randomness(...Q)};let st;if(C.sqlite3_wasmfs_opfs_dir=function(){if(st!==void 0)return st;const Q=N.wasmfsOpfsDir;if(!Q||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return st="";try{return Q&&$.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],Q)===0?st=Q:st=""}catch{return st=""}},C.sqlite3_wasmfs_filename_is_persistent=function(Q){const re=C.sqlite3_wasmfs_opfs_dir();return re&&Q?Q.startsWith(re+"/"):!1},C.sqlite3_js_db_uses_vfs=function(Q,re,ie=0){try{const Le=C.sqlite3_vfs_find(re);return Le?Q?Le===C.sqlite3_js_db_vfs(Q,ie)?Le:!1:Le===C.sqlite3_vfs_find(0)?Le:!1:!1}catch{return!1}},C.sqlite3_js_vfs_list=function(){const Q=[];let re=C.sqlite3_vfs_find(0);for(;re;){const ie=new C.sqlite3_vfs(re);Q.push($.cstrToJs(ie.$zName)),re=ie.$pNext,ie.dispose()}return Q},C.sqlite3_js_db_export=function(Q,re=0){Q=$.xWrap.testConvertArg("sqlite3*",Q),Q||tt("Invalid sqlite3* argument."),$.bigIntEnabled||tt("BigInt64 support is not enabled.");const ie=$.scopedAllocPush();let Le;try{const it=$.scopedAlloc(8+$.ptrSizeof),qt=it+8,Bt=re?$.isPtr(re)?re:$.scopedAllocCString(""+re):0;let Jt=$.exports.sqlite3__wasm_db_serialize(Q,Bt,qt,it,0);Jt&&tt("Database serialization failed with code",pe.capi.sqlite3_js_rc_str(Jt)),Le=$.peekPtr(qt);const lt=$.peek(it,"i64");return Jt=lt?$.heap8u().slice(Le,Le+Number(lt)):new Uint8Array,Jt}finally{Le&&$.exports.sqlite3_free(Le),$.scopedAllocPop(ie)}},C.sqlite3_js_db_vfs=(Q,re=0)=>Ee.sqlite3__wasm_db_vfs(Q,re),C.sqlite3_js_aggregate_context=(Q,re)=>C.sqlite3_aggregate_context(Q,re)||(re?ue.toss("Cannot allocate",re,"bytes for sqlite3_aggregate_context()"):0),C.sqlite3_js_posix_create_file=function(Q,re,ie){let Le;re&&$.isPtr(re)?Le=re:re instanceof ArrayBuffer||re instanceof Uint8Array?(Le=$.allocFromTypedArray(re),(arguments.length<3||!Ee.isInt32(ie)||ie<0)&&(ie=re.byteLength)):Qe.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!Ee.isInt32(ie)||ie<0)&&Qe.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const it=Ee.sqlite3__wasm_posix_create_file(Q,Le,ie);it&&Qe.toss("Creation of file failed with sqlite3 result code",C.sqlite3_js_rc_str(it))}finally{$.dealloc(Le)}},C.sqlite3_js_vfs_create_file=function(Q,re,ie,Le){N.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let it;ie?($.isPtr(ie)?it=ie:ie instanceof ArrayBuffer&&(ie=new Uint8Array(ie)),ie instanceof Uint8Array?(it=$.allocFromTypedArray(ie),(arguments.length<4||!Ee.isInt32(Le)||Le<0)&&(Le=ie.byteLength)):Qe.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):it=0,(!Ee.isInt32(Le)||Le<0)&&($.dealloc(it),Qe.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const qt=Ee.sqlite3__wasm_vfs_create_file(Q,re,it,Le);qt&&Qe.toss("Creation of file failed with sqlite3 result code",C.sqlite3_js_rc_str(qt))}finally{$.dealloc(it)}},C.sqlite3_js_sql_to_string=Q=>{if(typeof Q=="string")return Q;const re=Y(v);return re===v?void 0:re},Ee.isUIThread()){const Q=function(re){const ie=Object.create(null);return ie.prefix="kvvfs-"+re,ie.stores=[],(re==="session"||re==="")&&ie.stores.push(globalThis.sessionStorage),(re==="local"||re==="")&&ie.stores.push(globalThis.localStorage),ie};C.sqlite3_js_kvvfs_clear=function(re=""){let ie=0;const Le=Q(re);return Le.stores.forEach(it=>{const qt=[];let Bt;for(Bt=0;Bt<it.length;++Bt){const Jt=it.key(Bt);Jt.startsWith(Le.prefix)&&qt.push(Jt)}qt.forEach(Jt=>it.removeItem(Jt)),ie+=qt.length}),ie},C.sqlite3_js_kvvfs_size=function(re=""){let ie=0;const Le=Q(re);return Le.stores.forEach(it=>{let qt;for(qt=0;qt<it.length;++qt){const Bt=it.key(qt);Bt.startsWith(Le.prefix)&&(ie+=Bt.length,ie+=it.getItem(Bt).length)}}),ie*2}}C.sqlite3_db_config=function(Q,re,...ie){switch(this.s||(this.s=$.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=$.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=$.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),re){case C.SQLITE_DBCONFIG_ENABLE_FKEY:case C.SQLITE_DBCONFIG_ENABLE_TRIGGER:case C.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case C.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case C.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case C.SQLITE_DBCONFIG_ENABLE_QPSG:case C.SQLITE_DBCONFIG_TRIGGER_EQP:case C.SQLITE_DBCONFIG_RESET_DATABASE:case C.SQLITE_DBCONFIG_DEFENSIVE:case C.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case C.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case C.SQLITE_DBCONFIG_DQS_DML:case C.SQLITE_DBCONFIG_DQS_DDL:case C.SQLITE_DBCONFIG_ENABLE_VIEW:case C.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case C.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case C.SQLITE_DBCONFIG_STMT_SCANSTATUS:case C.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(Q,re,ie[0],ie[1]||0);case C.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(Q,re,ie[0],ie[1],ie[2]);case C.SQLITE_DBCONFIG_MAINDBNAME:return this.s(Q,re,ie[0]);default:return C.SQLITE_MISUSE}}.bind(Object.create(null)),C.sqlite3_value_to_js=function(Q,re=!0){let ie;const Le=C.sqlite3_value_type(Q);switch(Le){case C.SQLITE_INTEGER:$.bigIntEnabled?(ie=C.sqlite3_value_int64(Q),Ee.bigIntFitsDouble(ie)&&(ie=Number(ie))):ie=C.sqlite3_value_double(Q);break;case C.SQLITE_FLOAT:ie=C.sqlite3_value_double(Q);break;case C.SQLITE_TEXT:ie=C.sqlite3_value_text(Q);break;case C.SQLITE_BLOB:{const it=C.sqlite3_value_bytes(Q),qt=C.sqlite3_value_blob(Q);it&&!qt&&pe.WasmAllocError.toss("Cannot allocate memory for blob argument of",it,"byte(s)"),ie=it?$.heap8u().slice(qt,qt+Number(it)):null;break}case C.SQLITE_NULL:ie=null;break;default:re&&tt(C.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",Le),ie=void 0}return ie},C.sqlite3_values_to_js=function(Q,re,ie=!0){let Le;const it=[];for(Le=0;Le<Q;++Le)it.push(C.sqlite3_value_to_js($.peekPtr(re+$.ptrSizeof*Le),ie));return it},C.sqlite3_result_error_js=function(Q,re){re instanceof ue?C.sqlite3_result_error_nomem(Q):C.sqlite3_result_error(Q,""+re,-1)},C.sqlite3_result_js=function(Q,re){if(re instanceof Error){C.sqlite3_result_error_js(Q,re);return}try{switch(typeof re){case"undefined":break;case"boolean":C.sqlite3_result_int(Q,re?1:0);break;case"bigint":Ee.bigIntFits32(re)?C.sqlite3_result_int(Q,Number(re)):Ee.bigIntFitsDouble(re)?C.sqlite3_result_double(Q,Number(re)):$.bigIntEnabled?Ee.bigIntFits64(re)?C.sqlite3_result_int64(Q,re):tt("BigInt value",re.toString(),"is too BigInt for int64."):tt("BigInt value",re.toString(),"is too BigInt.");break;case"number":{let ie;Ee.isInt32(re)?ie=C.sqlite3_result_int:$.bigIntEnabled&&Number.isInteger(re)&&Ee.bigIntFits64(BigInt(re))?ie=C.sqlite3_result_int64:ie=C.sqlite3_result_double,ie(Q,re);break}case"string":{const[ie,Le]=$.allocCString(re,!0);C.sqlite3_result_text(Q,ie,Le,C.SQLITE_WASM_DEALLOC);break}case"object":if(re===null){C.sqlite3_result_null(Q);break}else if(Ee.isBindableTypedArray(re)){const ie=$.allocFromTypedArray(re);C.sqlite3_result_blob(Q,ie,re.byteLength,C.SQLITE_WASM_DEALLOC);break}default:tt("Don't not how to handle this UDF result value:",typeof re,re)}}catch(ie){C.sqlite3_result_error_js(Q,ie)}},C.sqlite3_column_js=function(Q,re,ie=!0){const Le=C.sqlite3_column_value(Q,re);return Le===0?void 0:C.sqlite3_value_to_js(Le,ie)};const ae=function(Q,re,ie){ie=C[ie],this.ptr?$.pokePtr(this.ptr,0):this.ptr=$.allocPtr();const Le=ie(Q,re,this.ptr);if(Le)return Qe.toss(Le,arguments[2]+"() failed with code "+Le);const it=$.peekPtr(this.ptr);return it?C.sqlite3_value_to_js(it,!0):void 0}.bind(Object.create(null));C.sqlite3_preupdate_new_js=(Q,re)=>ae(Q,re,"sqlite3_preupdate_new"),C.sqlite3_preupdate_old_js=(Q,re)=>ae(Q,re,"sqlite3_preupdate_old"),C.sqlite3changeset_new_js=(Q,re)=>ae(Q,re,"sqlite3changeset_new"),C.sqlite3changeset_old_js=(Q,re)=>ae(Q,re,"sqlite3changeset_old");const pe={WasmAllocError:ue,SQLite3Error:Qe,capi:C,util:Ee,wasm:$,config:N,version:Object.create(null),client:void 0,asyncPostInit:async function Q(){if(Q.isReady instanceof Promise)return Q.isReady;let re=y.initializersAsync;delete y.initializersAsync;const ie=async()=>(pe.__isUnderTest||(delete pe.util,delete pe.StructBinder),pe),Le=qt=>{throw N.error("an async sqlite3 initializer failed:",qt),qt};if(!re||!re.length)return Q.isReady=ie().catch(Le);re=re.map(qt=>qt instanceof Function?async Bt=>qt(pe):qt),re.push(ie);let it=Promise.resolve(pe);for(;re.length;)it=it.then(re.shift());return Q.isReady=it.catch(Le)},scriptInfo:void 0};try{y.initializers.forEach(Q=>{Q(pe)})}catch(Q){throw console.error("sqlite3 bootstrap initializer threw:",Q),Q}return delete y.initializers,y.sqlite3=pe,pe},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(y){y.bigIntEnabled===void 0&&(y.bigIntEnabled=!!globalThis.BigInt64Array);const S=(...Y)=>{throw new Error(Y.join(" "))};y.exports||Object.defineProperty(y,"exports",{enumerable:!0,configurable:!0,get:()=>y.instance&&y.instance.exports});const N=y.pointerIR||"i32",C=y.ptrSizeof=N==="i32"?4:N==="i64"?8:S("Unhandled ptrSizeof:",N),$=Object.create(null);$.heapSize=0,$.memory=null,$.freeFuncIndexes=[],$.scopedAlloc=[],$.utf8Decoder=new TextDecoder,$.utf8Encoder=new TextEncoder("utf-8"),y.sizeofIR=Y=>{switch(Y){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return C;default:return(""+Y).endsWith("*")?C:void 0}};const fe=function(){if(!$.memory)$.memory=y.memory instanceof WebAssembly.Memory?y.memory:y.exports.memory;else if($.heapSize===$.memory.buffer.byteLength)return $;const Y=$.memory.buffer;return $.HEAP8=new Int8Array(Y),$.HEAP8U=new Uint8Array(Y),$.HEAP16=new Int16Array(Y),$.HEAP16U=new Uint16Array(Y),$.HEAP32=new Int32Array(Y),$.HEAP32U=new Uint32Array(Y),y.bigIntEnabled&&($.HEAP64=new BigInt64Array(Y),$.HEAP64U=new BigUint64Array(Y)),$.HEAP32F=new Float32Array(Y),$.HEAP64F=new Float64Array(Y),$.heapSize=Y.byteLength,$};y.heap8=()=>fe().HEAP8,y.heap8u=()=>fe().HEAP8U,y.heap16=()=>fe().HEAP16,y.heap16u=()=>fe().HEAP16U,y.heap32=()=>fe().HEAP32,y.heap32u=()=>fe().HEAP32U,y.heapForSize=function(Y,ue=!0){const Ee=$.memory&&$.heapSize===$.memory.buffer.byteLength?$:fe();switch(Y){case Int8Array:return Ee.HEAP8;case Uint8Array:return Ee.HEAP8U;case Int16Array:return Ee.HEAP16;case Uint16Array:return Ee.HEAP16U;case Int32Array:return Ee.HEAP32;case Uint32Array:return Ee.HEAP32U;case 8:return ue?Ee.HEAP8U:Ee.HEAP8;case 16:return ue?Ee.HEAP16U:Ee.HEAP16;case 32:return ue?Ee.HEAP32U:Ee.HEAP32;case 64:if(Ee.HEAP64)return ue?Ee.HEAP64U:Ee.HEAP64;break;default:if(y.bigIntEnabled){if(Y===globalThis.BigUint64Array)return Ee.HEAP64U;if(Y===globalThis.BigInt64Array)return Ee.HEAP64;break}}S("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},y.functionTable=function(){return y.exports.__indirect_function_table},y.functionEntry=function(Y){const ue=y.functionTable();return Y<ue.length?ue.get(Y):void 0},y.jsFuncToWasm=function Y(ue,Ee){if(Y._||(Y._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(pe,Q,re){re<128?pe[Q](re):pe[Q](re%128|128,re>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(pe){const Q=Y._.rxJSig.exec(pe);return Q?Q[2]:pe.substr(1)},letterType:pe=>Y._.sigTypes[pe]||S("Invalid signature letter:",pe),pushSigType:(pe,Q)=>pe.push(Y._.typeCodes[Y._.letterType(Q)])}),typeof ue=="string"){const pe=Ee;Ee=ue,ue=pe}const st=Y._.sigParams(Ee),ae=[1,96];Y._.uleb128Encode(ae,"push",st.length);for(const pe of st)Y._.pushSigType(ae,pe);return Ee[0]==="v"?ae.push(0):(ae.push(1),Y._.pushSigType(ae,Ee[0])),Y._.uleb128Encode(ae,"unshift",ae.length),ae.unshift(0,97,115,109,1,0,0,0,1),ae.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(ae)),{e:{f:ue}}).exports.f};const me=function(ue,Ee,st){if(st&&!$.scopedAlloc.length&&S("No scopedAllocPush() scope is active."),typeof ue=="string"){const re=Ee;Ee=ue,ue=re}(typeof Ee!="string"||!(ue instanceof Function))&&S("Invalid arguments: expecting (function,signature) or (signature,function).");const ae=y.functionTable(),pe=ae.length;let Q;for(;$.freeFuncIndexes.length&&(Q=$.freeFuncIndexes.pop(),ae.get(Q));){Q=null;continue}Q||(Q=pe,ae.grow(1));try{return ae.set(Q,ue),st&&$.scopedAlloc[$.scopedAlloc.length-1].push(Q),Q}catch(re){if(!(re instanceof TypeError))throw Q===pe&&$.freeFuncIndexes.push(pe),re}try{const re=y.jsFuncToWasm(ue,Ee);ae.set(Q,re),st&&$.scopedAlloc[$.scopedAlloc.length-1].push(Q)}catch(re){throw Q===pe&&$.freeFuncIndexes.push(pe),re}return Q};y.installFunction=(Y,ue)=>me(Y,ue,!1),y.scopedInstallFunction=(Y,ue)=>me(Y,ue,!0),y.uninstallFunction=function(Y){if(!Y&&Y!==0)return;const ue=$.freeFuncIndexes,Ee=y.functionTable();ue.push(Y);const st=Ee.get(Y);return Ee.set(Y,null),st},y.peek=function(ue,Ee="i8"){Ee.endsWith("*")&&(Ee=N);const st=$.memory&&$.heapSize===$.memory.buffer.byteLength?$:fe(),ae=Array.isArray(ue)?[]:void 0;let pe;do{switch(ae&&(ue=arguments[0].shift()),Ee){case"i1":case"i8":pe=st.HEAP8[ue>>0];break;case"i16":pe=st.HEAP16[ue>>1];break;case"i32":pe=st.HEAP32[ue>>2];break;case"float":case"f32":pe=st.HEAP32F[ue>>2];break;case"double":case"f64":pe=Number(st.HEAP64F[ue>>3]);break;case"i64":if(y.bigIntEnabled){pe=BigInt(st.HEAP64[ue>>3]);break}default:S("Invalid type for peek():",Ee)}ae&&ae.push(pe)}while(ae&&arguments[0].length);return ae||pe},y.poke=function(Y,ue,Ee="i8"){Ee.endsWith("*")&&(Ee=N);const st=$.memory&&$.heapSize===$.memory.buffer.byteLength?$:fe();for(const ae of Array.isArray(Y)?Y:[Y])switch(Ee){case"i1":case"i8":st.HEAP8[ae>>0]=ue;continue;case"i16":st.HEAP16[ae>>1]=ue;continue;case"i32":st.HEAP32[ae>>2]=ue;continue;case"float":case"f32":st.HEAP32F[ae>>2]=ue;continue;case"double":case"f64":st.HEAP64F[ae>>3]=ue;continue;case"i64":if(st.HEAP64){st.HEAP64[ae>>3]=BigInt(ue);continue}default:S("Invalid type for poke(): "+Ee)}return this},y.peekPtr=(...Y)=>y.peek(Y.length===1?Y[0]:Y,N),y.pokePtr=(Y,ue=0)=>y.poke(Y,ue,N),y.peek8=(...Y)=>y.peek(Y.length===1?Y[0]:Y,"i8"),y.poke8=(Y,ue)=>y.poke(Y,ue,"i8"),y.peek16=(...Y)=>y.peek(Y.length===1?Y[0]:Y,"i16"),y.poke16=(Y,ue)=>y.poke(Y,ue,"i16"),y.peek32=(...Y)=>y.peek(Y.length===1?Y[0]:Y,"i32"),y.poke32=(Y,ue)=>y.poke(Y,ue,"i32"),y.peek64=(...Y)=>y.peek(Y.length===1?Y[0]:Y,"i64"),y.poke64=(Y,ue)=>y.poke(Y,ue,"i64"),y.peek32f=(...Y)=>y.peek(Y.length===1?Y[0]:Y,"f32"),y.poke32f=(Y,ue)=>y.poke(Y,ue,"f32"),y.peek64f=(...Y)=>y.peek(Y.length===1?Y[0]:Y,"f64"),y.poke64f=(Y,ue)=>y.poke(Y,ue,"f64"),y.getMemValue=y.peek,y.getPtrValue=y.peekPtr,y.setMemValue=y.poke,y.setPtrValue=y.pokePtr,y.isPtr32=Y=>typeof Y=="number"&&Y===(Y|0)&&Y>=0,y.isPtr=y.isPtr32,y.cstrlen=function(Y){if(!Y||!y.isPtr(Y))return null;const ue=fe().HEAP8U;let Ee=Y;for(;ue[Ee]!==0;++Ee);return Ee-Y};const Qe=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,tt=function(Y,ue,Ee){return $.utf8Decoder.decode(Y.buffer instanceof Qe?Y.slice(ue,Ee):Y.subarray(ue,Ee))};y.cstrToJs=function(Y){const ue=y.cstrlen(Y);return ue?tt(fe().HEAP8U,Y,Y+ue):ue===null?ue:""},y.jstrlen=function(Y){if(typeof Y!="string")return null;const ue=Y.length;let Ee=0;for(let st=0;st<ue;++st){let ae=Y.charCodeAt(st);ae>=55296&&ae<=57343&&(ae=65536+((ae&1023)<<10)|Y.charCodeAt(++st)&1023),ae<=127?++Ee:ae<=2047?Ee+=2:ae<=65535?Ee+=3:Ee+=4}return Ee},y.jstrcpy=function(Y,ue,Ee=0,st=-1,ae=!0){if((!ue||!(ue instanceof Int8Array)&&!(ue instanceof Uint8Array))&&S("jstrcpy() target must be an Int8Array or Uint8Array."),st<0&&(st=ue.length-Ee),!(st>0)||!(Ee>=0))return 0;let pe=0,Q=Y.length;const re=Ee,ie=Ee+st-(ae?1:0);for(;pe<Q&&Ee<ie;++pe){let Le=Y.charCodeAt(pe);if(Le>=55296&&Le<=57343&&(Le=65536+((Le&1023)<<10)|Y.charCodeAt(++pe)&1023),Le<=127){if(Ee>=ie)break;ue[Ee++]=Le}else if(Le<=2047){if(Ee+1>=ie)break;ue[Ee++]=192|Le>>6,ue[Ee++]=128|Le&63}else if(Le<=65535){if(Ee+2>=ie)break;ue[Ee++]=224|Le>>12,ue[Ee++]=128|Le>>6&63,ue[Ee++]=128|Le&63}else{if(Ee+3>=ie)break;ue[Ee++]=240|Le>>18,ue[Ee++]=128|Le>>12&63,ue[Ee++]=128|Le>>6&63,ue[Ee++]=128|Le&63}}return ae&&(ue[Ee++]=0),Ee-re},y.cstrncpy=function(Y,ue,Ee){if((!Y||!ue)&&S("cstrncpy() does not accept NULL strings."),Ee<0)Ee=y.cstrlen(strPtr)+1;else if(!(Ee>0))return 0;const st=y.heap8u();let ae=0,pe;for(;ae<Ee&&(pe=st[ue+ae]);++ae)st[Y+ae]=pe;return ae<Ee&&(st[Y+ae++]=0),ae},y.jstrToUintArray=(Y,ue=!1)=>$.utf8Encoder.encode(ue?Y+"\0":Y);const at=(Y,ue)=>{(!(Y.alloc instanceof Function)||!(Y.dealloc instanceof Function))&&S("Object is missing alloc() and/or dealloc() function(s)","required by",ue+"().")},mt=function(Y,ue,Ee,st){if(at(y,st),typeof Y!="string")return null;{const ae=$.utf8Encoder.encode(Y),pe=Ee(ae.length+1),Q=fe().HEAP8U;return Q.set(ae,pe),Q[pe+ae.length]=0,ue?[pe,ae.length]:pe}};y.allocCString=(Y,ue=!1)=>mt(Y,ue,y.alloc,"allocCString()"),y.scopedAllocPush=function(){at(y,"scopedAllocPush");const Y=[];return $.scopedAlloc.push(Y),Y},y.scopedAllocPop=function(Y){at(y,"scopedAllocPop");const ue=arguments.length?$.scopedAlloc.indexOf(Y):$.scopedAlloc.length-1;ue<0&&S("Invalid state object for scopedAllocPop()."),arguments.length===0&&(Y=$.scopedAlloc[ue]),$.scopedAlloc.splice(ue,1);for(let Ee;Ee=Y.pop();)y.functionEntry(Ee)?y.uninstallFunction(Ee):y.dealloc(Ee)},y.scopedAlloc=function(Y){$.scopedAlloc.length||S("No scopedAllocPush() scope is active.");const ue=y.alloc(Y);return $.scopedAlloc[$.scopedAlloc.length-1].push(ue),ue},Object.defineProperty(y.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>$.scopedAlloc.length,set:()=>S("The 'active' property is read-only.")}),y.scopedAllocCString=(Y,ue=!1)=>mt(Y,ue,y.scopedAlloc,"scopedAllocCString()");const Be=function(Y,ue){const Ee=y[Y?"scopedAlloc":"alloc"]((ue.length+1)*y.ptrSizeof);let st=0;return ue.forEach(ae=>{y.pokePtr(Ee+y.ptrSizeof*st++,y[Y?"scopedAllocCString":"allocCString"](""+ae))}),y.pokePtr(Ee+y.ptrSizeof*st,0),Ee};y.scopedAllocMainArgv=Y=>Be(!0,Y),y.allocMainArgv=Y=>Be(!1,Y),y.cArgvToJs=(Y,ue)=>{const Ee=[];for(let st=0;st<Y;++st){const ae=y.peekPtr(ue+y.ptrSizeof*st);Ee.push(ae?y.cstrToJs(ae):null)}return Ee},y.scopedAllocCall=function(Y){y.scopedAllocPush();try{return Y()}finally{y.scopedAllocPop()}};const Re=function(Y,ue,Ee){at(y,Ee);const st=ue?"i64":N;let ae=y[Ee](Y*(ue?8:C));if(y.poke(ae,0,st),Y===1)return ae;const pe=[ae];for(let Q=1;Q<Y;++Q)ae+=ue?8:C,pe[Q]=ae,y.poke(ae,0,st);return pe};y.allocPtr=(Y=1,ue=!0)=>Re(Y,ue,"alloc"),y.scopedAllocPtr=(Y=1,ue=!0)=>Re(Y,ue,"scopedAlloc"),y.xGet=function(Y){return y.exports[Y]||S("Cannot find exported symbol:",Y)};const et=(Y,ue)=>S(Y+"() requires",ue,"argument(s).");y.xCall=function(Y,...ue){const Ee=Y instanceof Function?Y:y.xGet(Y);return Ee instanceof Function||S("Exported symbol",Y,"is not a function."),Ee.length!==ue.length&&et(Ee===Y?Ee.name:Y,Ee.length),arguments.length===2&&Array.isArray(arguments[1])?Ee.apply(null,arguments[1]):Ee.apply(null,ue)},$.xWrap=Object.create(null),$.xWrap.convert=Object.create(null),$.xWrap.convert.arg=new Map,$.xWrap.convert.result=new Map;const be=$.xWrap.convert.arg,Ie=$.xWrap.convert.result;y.bigIntEnabled&&be.set("i64",Y=>BigInt(Y));const Te=N==="i32"?Y=>Y|0:Y=>BigInt(Y)|BigInt(0);be.set("i32",Te).set("i16",Y=>(Y|0)&65535).set("i8",Y=>(Y|0)&255).set("f32",Y=>Number(Y).valueOf()).set("float",be.get("f32")).set("f64",be.get("f32")).set("double",be.get("f64")).set("int",be.get("i32")).set("null",Y=>Y).set(null,be.get("null")).set("**",Te).set("*",Te),Ie.set("*",Te).set("pointer",Te).set("number",Y=>Number(Y)).set("void",Y=>{}).set("null",Y=>Y).set(null,Ie.get("null"));{const Y=["i8","i16","i32","int","f32","float","f64","double"];y.bigIntEnabled&&Y.push("i64");const ue=be.get(N);for(const Ee of Y)be.set(Ee+"*",ue),Ie.set(Ee+"*",ue),Ie.set(Ee,be.get(Ee)||S("Missing arg converter:",Ee))}const Je=function(Y){return typeof Y=="string"?y.scopedAllocCString(Y):Y?Te(Y):null};be.set("string",Je).set("utf8",Je).set("pointer",Je),Ie.set("string",Y=>y.cstrToJs(Y)).set("utf8",Ie.get("string")).set("string:dealloc",Y=>{try{return Y?y.cstrToJs(Y):null}finally{y.dealloc(Y)}}).set("utf8:dealloc",Ie.get("string:dealloc")).set("json",Y=>JSON.parse(y.cstrToJs(Y))).set("json:dealloc",Y=>{try{return Y?JSON.parse(y.cstrToJs(Y)):null}finally{y.dealloc(Y)}});const Ge=class{constructor(Y){this.name=Y.name||"unnamed adapter"}convertArg(Y,ue,Ee){S("AbstractArgAdapter must be subclassed.")}};be.FuncPtrAdapter=class Oa extends Ge{constructor(ue){super(ue),be.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",ue),this.name=ue.name||"unnamed",this.signature=ue.signature,ue.contextKey instanceof Function&&(this.contextKey=ue.contextKey,ue.bindScope||(ue.bindScope="context")),this.bindScope=ue.bindScope||S("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Oa.bindScopes.indexOf(ue.bindScope)<0&&S("Invalid options.bindScope ("+ue.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Oa.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=ue.callProxy instanceof Function?ue.callProxy:void 0}contextKey(ue,Ee){return this}contextMap(ue){const Ee=this.__cmap||(this.__cmap=new Map);let st=Ee.get(ue);return st===void 0&&Ee.set(ue,st=[]),st}convertArg(ue,Ee,st){let ae=this.singleton;if(!ae&&this.isContext&&(ae=this.contextMap(this.contextKey(Ee,st))),ae&&ae[0]===ue)return ae[1];if(ue instanceof Function){this.callProxy&&(ue=this.callProxy(ue));const pe=me(ue,this.signature,this.isTransient);if(Oa.debugFuncInstall&&Oa.debugOut("FuncPtrAdapter installed",this,this.contextKey(Ee,st),"@"+pe,ue),ae){if(ae[1]){Oa.debugFuncInstall&&Oa.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ue);try{$.scopedAlloc[$.scopedAlloc.length-1].push(ae[1])}catch{}}ae[0]=ue,ae[1]=pe}return pe}else if(y.isPtr(ue)||ue===null||ue===void 0){if(ae&&ae[1]&&ae[1]!==ue){Oa.debugFuncInstall&&Oa.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ue);try{$.scopedAlloc[$.scopedAlloc.length-1].push(ae[1])}catch{}ae[0]=ae[1]=ue|0}return ue||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},be.FuncPtrAdapter.warnOnUse=!1,be.FuncPtrAdapter.debugFuncInstall=!1,be.FuncPtrAdapter.debugOut=console.debug.bind(console),be.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const Oe=Y=>be.get(Y)||S("Argument adapter not found:",Y),Ke=Y=>Ie.get(Y)||S("Result adapter not found:",Y);$.xWrap.convertArg=(Y,...ue)=>Oe(Y)(...ue),$.xWrap.convertArgNoCheck=(Y,...ue)=>be.get(Y)(...ue),$.xWrap.convertResult=(Y,ue)=>Y===null?ue:Y?Ke(Y)(ue):void 0,$.xWrap.convertResultNoCheck=(Y,ue)=>Y===null?ue:Y?Ie.get(Y)(ue):void 0,y.xWrap=function(Y,ue,...Ee){arguments.length===3&&Array.isArray(arguments[2])&&(Ee=arguments[2]),y.isPtr(Y)&&(Y=y.functionEntry(Y)||S("Function pointer not found in WASM function table."));const st=Y instanceof Function,ae=st?Y:y.xGet(Y);if(st&&(Y=ae.name||"unnamed function"),Ee.length!==ae.length&&et(Y,ae.length),ue===null&&ae.length===0)return ae;ue!=null&&Ke(ue);for(const Q of Ee)Q instanceof Ge?be.set(Q,(...re)=>Q.convertArg(...re)):Oe(Q);const pe=$.xWrap;return ae.length===0?(...Q)=>Q.length?et(Y,ae.length):pe.convertResult(ue,ae.call(null)):function(...Q){Q.length!==ae.length&&et(Y,ae.length);const re=y.scopedAllocPush();try{let ie=0;for(;ie<Q.length;++ie)Q[ie]=pe.convertArgNoCheck(Ee[ie],Q[ie],Q,ie);return pe.convertResultNoCheck(ue,ae.apply(null,Q))}finally{y.scopedAllocPop(re)}}};const St=function(Y,ue,Ee,st,ae,pe){if(typeof Ee=="string"){if(ue===1)return pe.get(Ee);if(ue===2){if(st)st instanceof Function||S(ae,"requires a function argument.");else return delete pe.get(Ee),Y;return pe.set(Ee,st),Y}}S("Invalid arguments to",ae)};return y.xWrap.resultAdapter=function Y(ue,Ee){return St(Y,arguments.length,ue,Ee,"resultAdapter()",Ie)},y.xWrap.argAdapter=function Y(ue,Ee){return St(Y,arguments.length,ue,Ee,"argAdapter()",be)},y.xWrap.FuncPtrAdapter=be.FuncPtrAdapter,y.xCallWrapped=function(Y,ue,Ee,...st){return Array.isArray(arguments[3])&&(st=arguments[3]),y.xWrap(Y,ue,Ee||[]).apply(null,st||[])},y.xWrap.testConvertArg=$.xWrap.convertArg,y.xWrap.testConvertResult=$.xWrap.convertResult,y},globalThis.WhWasmUtilInstaller.yawl=function(y){const S=()=>fetch(y.uri,{credentials:"same-origin"}),N=this,C=function(fe){if(y.wasmUtilTarget){const me=(...tt)=>{throw new Error(tt.join(" "))},Qe=y.wasmUtilTarget;if(Qe.module=fe.module,Qe.instance=fe.instance,Qe.instance.exports.memory||(Qe.memory=y.imports&&y.imports.env&&y.imports.env.memory||me("Missing 'memory' object!")),!Qe.alloc&&fe.instance.exports.malloc){const tt=fe.instance.exports;Qe.alloc=function(at){return tt.malloc(at)||me("Allocation of",at,"bytes failed.")},Qe.dealloc=function(at){tt.free(at)}}N(Qe)}return y.onload&&y.onload(fe,y),fe};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(S(),y.imports||{}).then(C)}:function(){return S().then(me=>me.arrayBuffer()).then(me=>WebAssembly.instantiate(me,y.imports||{})).then(C)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function y(S){const N=(...We)=>{throw new Error(We.join(" "))};!(S.heap instanceof WebAssembly.Memory)&&!(S.heap instanceof Function)&&N("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(We){S[We]instanceof Function||N("Config option '"+We+"' must be a function.")});const C=y,$=S.heap instanceof Function?S.heap:()=>new Uint8Array(S.heap.buffer),fe=S.alloc,me=S.dealloc,Qe=S.log||console.log.bind(console),tt=S.memberPrefix||"",at=S.memberSuffix||"",mt=S.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!S.bigIntEnabled,Be=globalThis.BigInt,Re=globalThis.BigInt64Array,et=S.ptrSizeof||4,be=S.ptrIR||"i32";C.debugFlags||(C.__makeDebugFlags=function(We=null){We&&We.__flags&&(We=We.__flags);const vt=function _t(kt){return arguments.length===0?_t.__flags:(kt<0?(delete _t.__flags.getter,delete _t.__flags.setter,delete _t.__flags.alloc,delete _t.__flags.dealloc):(_t.__flags.getter=(1&kt)!==0,_t.__flags.setter=(2&kt)!==0,_t.__flags.alloc=(4&kt)!==0,_t.__flags.dealloc=(8&kt)!==0),_t._flags)};return Object.defineProperty(vt,"__flags",{iterable:!1,writable:!1,value:Object.create(We)}),We||vt(0),vt},C.debugFlags=C.__makeDebugFlags());const Ie=function(){const We=new ArrayBuffer(2);return new DataView(We).setInt16(0,256,!0),new Int16Array(We)[0]===256}(),Te=We=>We[1]==="(",Je=We=>We==="P",Ge=We=>Te(We)?"p":We[0],Oe=function(We){switch(Ge(We)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return be;case"j":return"i64";case"f":return"float";case"d":return"double"}N("Unhandled signature IR:",We)},Ke=Re?()=>!0:()=>N("BigInt64Array is not available."),St=function(We){switch(Ge(We)){case"p":case"P":case"s":{switch(et){case 4:return"getInt32";case 8:return Ke()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return Ke()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}N("Unhandled DataView getter for signature:",We)},Y=function(We){switch(Ge(We)){case"p":case"P":case"s":{switch(et){case 4:return"setInt32";case 8:return Ke()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return Ke()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}N("Unhandled DataView setter for signature:",We)},ue=function(We){switch(Ge(We)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return Ke()&&Be;case"p":case"P":case"s":switch(et){case 4:return Number;case 8:return Ke()&&Be}break}N("Unhandled DataView set wrapper for signature:",We)},Ee=(We,vt)=>We+"::"+vt,st=function(We,vt){return()=>N(Ee(We,vt),"is read-only.")},ae=new WeakMap,pe="(pointer-is-external)",Q=function(We,vt,_t){if(_t||(_t=ae.get(vt)),_t){if(ae.delete(vt),Array.isArray(vt.ondispose)){let kt;for(;kt=vt.ondispose.shift();)try{kt instanceof Function?kt.call(vt):kt instanceof $t?kt.dispose():typeof kt=="number"&&me(kt)}catch(vn){console.warn("ondispose() for",We.structName,"@",_t,"threw. NOT propagating it.",vn)}}else if(vt.ondispose instanceof Function)try{vt.ondispose()}catch(kt){console.warn("ondispose() for",We.structName,"@",_t,"threw. NOT propagating it.",kt)}delete vt.ondispose,We.debugFlags.__flags.dealloc&&Qe("debug.dealloc:",vt[pe]?"EXTERNAL":"",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+_t),vt[pe]||me(_t)}},re=We=>({configurable:!1,writable:!1,iterable:!1,value:We}),ie=function(We,vt,_t){let kt=!_t;_t?Object.defineProperty(vt,pe,re(_t)):(_t=fe(We.structInfo.sizeof),_t||N("Allocation of",We.structName,"structure failed."));try{We.debugFlags.__flags.alloc&&Qe("debug.alloc:",kt?"":"EXTERNAL",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+_t),kt&&$().fill(0,_t,_t+We.structInfo.sizeof),ae.set(vt,_t)}catch(vn){throw Q(We,vt,_t),vn}},Le=function(){const We=this.pointer;return We?new Uint8Array($().slice(We,We+this.structInfo.sizeof)):null},qt=re(We=>tt+We+at),Bt=function(We,vt,_t=!0){let kt=We.members[vt];if(!kt&&(tt||at)){for(const vn of Object.values(We.members))if(vn.key===vt){kt=vn;break}!kt&&_t&&N(Ee(We.name,vt),"is not a mapped struct member.")}return kt},Jt=function We(vt,_t,kt=!1){We._||(We._=Qn=>Qn.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const vn=Bt(vt.structInfo,_t,!0);return kt?We._(vn.signature):vn.signature},lt={configurable:!1,enumerable:!1,get:function(){return ae.get(this)},set:()=>N("Cannot assign the 'pointer' property of a struct.")},we=re(function(){const We=[];for(const vt of Object.keys(this.structInfo.members))We.push(this.memberKey(vt));return We}),Pe=new TextDecoder("utf-8"),ot=new TextEncoder,pt=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Ft=function(We,vt,_t){return Pe.decode(We.buffer instanceof pt?We.slice(vt,_t):We.subarray(vt,_t))},Yt=function(We,vt,_t=!1){const kt=Bt(We.structInfo,vt,_t);return kt&&kt.signature.length===1&&kt.signature[0]==="s"?kt:!1},je=function(We){We.signature!=="s"&&N("Invalid member type signature for C-string value:",JSON.stringify(We))},nt=function(vt,_t){const kt=Bt(vt.structInfo,_t,!0);je(kt);const vn=vt[kt.key];if(!vn)return null;let Qn=vn;const Bn=$();for(;Bn[Qn]!==0;++Qn);return vn===Qn?"":Ft(Bn,vn,Qn)},dt=function(We,...vt){We.ondispose?Array.isArray(We.ondispose)||(We.ondispose=[We.ondispose]):We.ondispose=[],We.ondispose.push(...vt)},Nt=function(We){const vt=ot.encode(We),_t=fe(vt.length+1);_t||N("Allocation error while duplicating string:",We);const kt=$();return kt.set(vt,_t),kt[_t+vt.length]=0,_t},xt=function(We,vt,_t){const kt=Bt(We.structInfo,vt,!0);je(kt);const vn=Nt(_t);return We[kt.key]=vn,dt(We,vn),We},$t=function(vt,_t){arguments[2]!==re&&N("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:re(vt),structInfo:re(_t)})};$t.prototype=Object.create(null,{dispose:re(function(){Q(this.constructor,this)}),lookupMember:re(function(We,vt=!0){return Bt(this.structInfo,We,vt)}),memberToJsString:re(function(We){return nt(this,We)}),memberIsString:re(function(We,vt=!0){return Yt(this,We,vt)}),memberKey:qt,memberKeys:we,memberSignature:re(function(We,vt=!1){return Jt(this,We,vt)}),memoryDump:re(Le),pointer:lt,setMemberCString:re(function(We,vt){return xt(this,We,vt)})}),Object.assign($t.prototype,{addOnDispose:function(...We){return dt(this,...We),this}}),Object.defineProperties($t,{allocCString:re(Nt),isA:re(We=>We instanceof $t),hasExternalPointer:re(We=>We instanceof $t&&!!We[pe]),memberKey:qt});const mn=We=>Number.isFinite(We)||We instanceof(Be||Number),Rt=function We(vt,_t,kt){if(!We._){We._={getters:{},setters:{},sw:{}};const ai=["i","c","C","p","P","s","f","d","v()"];mt&&ai.push("j"),ai.forEach(function(Bs){We._.getters[Bs]=St(Bs),We._.setters[Bs]=Y(Bs),We._.sw[Bs]=ue(Bs)});const hx=/^[ipPsjfdcC]$/,mx=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;We.sigCheck=function(Bs,gx,Am,Lf){Object.prototype.hasOwnProperty.call(Bs,Am)&&N(Bs.structName,"already has a property named",Am+"."),hx.test(Lf)||mx.test(Lf)||N("Malformed signature for",Ee(Bs.structName,gx)+":",Lf)}}const vn=vt.memberKey(_t);We.sigCheck(vt.prototype,_t,vn,kt.signature),kt.key=vn,kt.name=_t;const Qn=Ge(kt.signature),Bn=Ee(vt.prototype.structName,vn),Vn=vt.prototype.debugFlags.__flags,pa=Object.create(null);pa.configurable=!1,pa.enumerable=!1,pa.get=function(){Vn.getter&&Qe("debug.getter:",We._.getters[Qn],"for",Oe(Qn),Bn,"@",this.pointer,"+",kt.offset,"sz",kt.sizeof);let ai=new DataView($().buffer,this.pointer+kt.offset,kt.sizeof)[We._.getters[Qn]](0,Ie);return Vn.getter&&Qe("debug.getter:",Bn,"result =",ai),ai},kt.readOnly?pa.set=st(vt.prototype.structName,vn):pa.set=function(ai){if(Vn.setter&&Qe("debug.setter:",We._.setters[Qn],"for",Oe(Qn),Bn,"@",this.pointer,"+",kt.offset,"sz",kt.sizeof,ai),this.pointer||N("Cannot set struct property on disposed instance."),ai===null)ai=0;else for(;!mn(ai);){if(Je(kt.signature)&&ai instanceof $t){ai=ai.pointer||0,Vn.setter&&Qe("debug.setter:",Bn,"resolved to",ai);break}N("Invalid value for pointer-type",Bn+".")}new DataView($().buffer,this.pointer+kt.offset,kt.sizeof)[We._.setters[Qn]](0,We._.sw[Qn](ai),Ie)},Object.defineProperty(vt.prototype,vn,pa)},Or=function We(vt,_t){arguments.length===1?(_t=vt,vt=_t.name):_t.name||(_t.name=vt),vt||N("Struct name is required.");let kt=!1;Object.keys(_t.members).forEach(Bn=>{const Vn=_t.members[Bn];Vn.sizeof?Vn.sizeof===1?Vn.signature==="c"||Vn.signature==="C"||N("Unexpected sizeof==1 member",Ee(_t.name,Bn),"with signature",Vn.signature):(Vn.sizeof%4!==0&&(console.warn("Invalid struct member description =",Vn,"from",_t),N(vt,"member",Bn,"sizeof is not aligned. sizeof="+Vn.sizeof)),Vn.offset%4!==0&&(console.warn("Invalid struct member description =",Vn,"from",_t),N(vt,"member",Bn,"offset is not aligned. offset="+Vn.offset))):N(vt,"member",Bn,"is missing sizeof."),(!kt||kt.offset<Vn.offset)&&(kt=Vn)}),kt?_t.sizeof<kt.offset+kt.sizeof&&N("Invalid struct config:",vt,"max member offset ("+kt.offset+") ","extends past end of struct (sizeof="+_t.sizeof+")."):N("No member property descriptions found.");const vn=re(C.__makeDebugFlags(We.debugFlags)),Qn=function Bn(Vn){this instanceof Bn?arguments.length?((Vn!==(Vn|0)||Vn<=0)&&N("Invalid pointer value for",vt,"constructor."),ie(Bn,this,Vn)):ie(Bn,this):N("The",vt,"constructor may only be called via 'new'.")};return Object.defineProperties(Qn,{debugFlags:vn,isA:re(Bn=>Bn instanceof Qn),memberKey:qt,memberKeys:we,methodInfoForKey:re(function(Bn){}),structInfo:re(_t),structName:re(vt)}),Qn.prototype=new $t(vt,_t,re),Object.defineProperties(Qn.prototype,{debugFlags:vn,constructor:re(Qn)}),Object.keys(_t.members).forEach(Bn=>Rt(Qn,Bn,_t.members[Bn])),Qn};return Or.StructType=$t,Or.config=S,Or.allocCString=Nt,Or.debugFlags||(Or.debugFlags=C.__makeDebugFlags(C.debugFlags)),Or},globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=(...be)=>{throw new Error(be.join(" "))};y.SQLite3Error.toss;const N=y.capi,C=y.wasm,$=y.util;if(globalThis.WhWasmUtilInstaller(C),delete globalThis.WhWasmUtilInstaller,C.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new C.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(be,Ie)=>be[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:be=>be[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new C.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:be=>{let Ie;return(Te,Je,Ge,Oe)=>{try{const Ke=C.cArgvToJs(Je,Ge);return Ie||(Ie=C.cArgvToJs(Je,Oe)),be(Ke,Ie)|0}catch(Ke){return Ke.resultCode||N.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:be=>be[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new C.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(be,Ie)=>be[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new C.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(be,Ie)=>be[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],C.exports.sqlite3_progress_handler&&C.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new C.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(be,Ie)=>be[0]}),"*"]]),C.exports.sqlite3_stmt_explain&&C.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),C.exports.sqlite3_set_authorizer&&C.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(be,Ie)=>be[0],callProxy:be=>(Ie,Te,Je,Ge,Oe,Ke)=>{try{return Je=Je&&C.cstrToJs(Je),Ge=Ge&&C.cstrToJs(Ge),Oe=Oe&&C.cstrToJs(Oe),Ke=Ke&&C.cstrToJs(Ke),be(Ie,Te,Je,Ge,Oe,Ke)||0}catch(St){return St.resultCode||N.SQLITE_ERROR}}}),"*"]]),C.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:be=>be[0],callProxy:be=>(Ie,Te,Je,Ge,Oe)=>{be(Ie,Te,C.cstrToJs(Je),C.cstrToJs(Ge),Oe)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],C.bigIntEnabled&&C.exports.sqlite3_declare_vtab&&C.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),C.bigIntEnabled&&C.exports.sqlite3_preupdate_hook&&C.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:be=>be[0],callProxy:be=>(Ie,Te,Je,Ge,Oe,Ke,St)=>{be(Ie,Te,Je,C.cstrToJs(Ge),C.cstrToJs(Oe),Ke,St)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),C.bigIntEnabled&&C.exports.sqlite3changegroup_add&&C.exports.sqlite3session_create&&C.exports.sqlite3_preupdate_hook){const be={signature:"i(ps)",callProxy:Ie=>(Te,Je)=>{try{return Ie(Te,C.cstrToJs(Je))|0}catch(Ge){return Ge.resultCode||N.SQLITE_ERROR}}};C.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new C.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...be}),new C.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...be}),new C.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new C.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...be}),new C.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...be}),new C.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new C.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new C.xWrap.FuncPtrAdapter({name:"xFilter",...be,contextKey:(Ie,Te)=>Ie[0]}),"*"]])}C.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],y.StructBinder=globalThis.Jaccwabyt({heap:C.heap8u,alloc:C.alloc,dealloc:C.dealloc,bigIntEnabled:C.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const be=C.xWrap.argAdapter("string");C.xWrap.argAdapter("string:flexible",Oe=>be($.flexibleString(Oe))),C.xWrap.argAdapter("string:static",function(Oe){return C.isPtr(Oe)?Oe:(Oe=""+Oe,this[Oe]||(this[Oe]=C.allocCString(Oe)))}.bind(Object.create(null)));const Ie=C.xWrap.argAdapter("*"),Te=function(){};C.xWrap.argAdapter("sqlite3_filename",Ie)("sqlite3_context*",Ie)("sqlite3_value*",Ie)("void*",Ie)("sqlite3_changegroup*",Ie)("sqlite3_changeset_iter*",Ie)("sqlite3_session*",Ie)("sqlite3_stmt*",Oe=>Ie(Oe instanceof(y?.oo1?.Stmt||Te)?Oe.pointer:Oe))("sqlite3*",Oe=>Ie(Oe instanceof(y?.oo1?.DB||Te)?Oe.pointer:Oe))("sqlite3_vfs*",Oe=>typeof Oe=="string"?N.sqlite3_vfs_find(Oe)||y.SQLite3Error.toss(N.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",Oe):Ie(Oe instanceof(N.sqlite3_vfs||Te)?Oe.pointer:Oe)),C.exports.sqlite3_declare_vtab&&C.xWrap.argAdapter("sqlite3_index_info*",Oe=>Ie(Oe instanceof(N.sqlite3_index_info||Te)?Oe.pointer:Oe))("sqlite3_module*",Oe=>Ie(Oe instanceof(N.sqlite3_module||Te)?Oe.pointer:Oe));const Je=C.xWrap.resultAdapter("*");C.xWrap.resultAdapter("sqlite3*",Je)("sqlite3_context*",Je)("sqlite3_stmt*",Je)("sqlite3_value*",Je)("sqlite3_vfs*",Je)("void*",Je),C.exports.sqlite3_step.length===0&&(C.xWrap.doArgcCheck=!1,y.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const Oe of C.bindingSignatures)N[Oe[0]]=C.xWrap.apply(null,Oe);for(const Oe of C.bindingSignatures.wasmInternal)$[Oe[0]]=C.xWrap.apply(null,Oe);const Ge=function(Oe){return()=>S(Oe+"() is unavailable due to lack","of BigInt support in this build.")};for(const Oe of C.bindingSignatures.int64)N[Oe[0]]=C.bigIntEnabled?C.xWrap.apply(null,Oe):Ge(Oe[0]);if(delete C.bindingSignatures,C.exports.sqlite3__wasm_db_error){const Oe=C.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");$.sqlite3__wasm_db_error=function(Ke,St,Y){return St instanceof y.WasmAllocError?(St=N.SQLITE_NOMEM,Y=0):St instanceof Error&&(Y=Y||""+St,St=St.resultCode||N.SQLITE_ERROR),Ke?Oe(Ke,St,Y):St}}else $.sqlite3__wasm_db_error=function(Oe,Ke,St){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),Ke}}{const be=C.xCall("sqlite3__wasm_enum_json");be||S("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),C.ctype=JSON.parse(C.cstrToJs(be));const Ie=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];C.bigIntEnabled&&Ie.push("serialize","session","vtab");for(const Ge of Ie)for(const Oe of Object.entries(C.ctype[Ge]))N[Oe[0]]=Oe[1];C.functionEntry(N.SQLITE_WASM_DEALLOC)||S("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+N.SQLITE_WASM_DEALLOC+").");const Te=Object.create(null);for(const Ge of["resultCodes"])for(const Oe of Object.entries(C.ctype[Ge]))Te[Oe[1]]=Oe[0];N.sqlite3_js_rc_str=Ge=>Te[Ge];const Je=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!$.isUIThread(),sqlite3_index_info:!C.bigIntEnabled,sqlite3_index_constraint:!C.bigIntEnabled,sqlite3_index_orderby:!C.bigIntEnabled,sqlite3_index_constraint_usage:!C.bigIntEnabled});for(const Ge of C.ctype.structs)Je[Ge.name]||(N[Ge.name]=y.StructBinder(Ge));if(N.sqlite3_index_info){for(const Ge of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])N.sqlite3_index_info[Ge]=N[Ge],delete N[Ge];N.sqlite3_vtab_config=C.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const fe=(be,Ie,Te)=>$.sqlite3__wasm_db_error(be,N.SQLITE_MISUSE,Ie+"() requires "+Te+" argument"+(Te===1?"":"s")+"."),me=be=>$.sqlite3__wasm_db_error(be,N.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),Qe=be=>C.xWrap.argAdapter("sqlite3*")(be),tt=be=>C.isPtr(be)?C.cstrToJs(be):be,at=function(be,Ie){be=Qe(be);let Te=this.dbMap.get(be);if(Ie)!Te&&Ie>0&&this.dbMap.set(be,Te=Object.create(null));else return this.dbMap.delete(be),Te;return Te}.bind(Object.assign(Object.create(null),{dbMap:new Map}));at.addCollation=function(be,Ie){const Te=at(be,1);Te.collation||(Te.collation=new Set),Te.collation.add(tt(Ie).toLowerCase())},at._addUDF=function(be,Ie,Te,Je){Ie=tt(Ie).toLowerCase();let Ge=Je.get(Ie);Ge||Je.set(Ie,Ge=new Set),Ge.add(Te<0?-1:Te)},at.addFunction=function(be,Ie,Te){const Je=at(be,1);Je.udf||(Je.udf=new Map),this._addUDF(be,Ie,Te,Je.udf)},C.exports.sqlite3_create_window_function&&(at.addWindowFunc=function(be,Ie,Te){const Je=at(be,1);Je.wudf||(Je.wudf=new Map),this._addUDF(be,Ie,Te,Je.wudf)}),at.cleanup=function(be){be=Qe(be);const Ie=[be];for(const Ge of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const Oe=C.exports[Ge];if(Oe){Ie.length=Oe.length;try{N[Ge](...Ie)}catch(Ke){y.config.warn("close-time call of",Ge+"(",Ie,") threw:",Ke)}}}const Te=at(be,0);if(!Te)return;if(Te.collation){for(const Ge of Te.collation)try{N.sqlite3_create_collation_v2(be,Ge,N.SQLITE_UTF8,0,0,0)}catch{}delete Te.collation}let Je;for(Je=0;Je<2;++Je){const Ge=Je?Te.wudf:Te.udf;if(!Ge)continue;const Oe=Je?N.sqlite3_create_window_function:N.sqlite3_create_function_v2;for(const Ke of Ge){const St=Ke[0],Y=Ke[1],ue=[be,St,0,N.SQLITE_UTF8,0,0,0,0,0];Je&&ue.push(0);for(const Ee of Y)try{ue[2]=Ee,Oe.apply(null,ue)}catch{}Y.clear()}Ge.clear()}delete Te.udf,delete Te.wudf};{const be=C.xWrap("sqlite3_close_v2","int","sqlite3*");N.sqlite3_close_v2=function(Ie){if(arguments.length!==1)return fe(Ie,"sqlite3_close_v2",1);if(Ie)try{at.cleanup(Ie)}catch{}return be(Ie)}}if(N.sqlite3session_create){const be=C.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);N.sqlite3session_delete=function(Ie){if(arguments.length!==1)return fe(pDb,"sqlite3session_delete",1);Ie&&N.sqlite3session_table_filter(Ie,0,0),be(Ie)}}{const be=(Te,Je)=>"argv["+Je+"]:"+Te[0]+":"+C.cstrToJs(Te[1]).toLowerCase(),Ie=C.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new C.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:be}),new C.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:be})]);N.sqlite3_create_collation_v2=function(Te,Je,Ge,Oe,Ke,St){if(arguments.length!==6)return fe(Te,"sqlite3_create_collation_v2",6);if(!(Ge&15))Ge|=N.SQLITE_UTF8;else if(N.SQLITE_UTF8!==(Ge&15))return me(Te);try{const Y=Ie(Te,Je,Ge,Oe,Ke,St);return Y===0&&Ke instanceof Function&&at.addCollation(Te,Je),Y}catch(Y){return $.sqlite3__wasm_db_error(Te,Y)}},N.sqlite3_create_collation=(Te,Je,Ge,Oe,Ke)=>arguments.length===5?N.sqlite3_create_collation_v2(Te,Je,Ge,Oe,Ke,0):fe(Te,"sqlite3_create_collation",5)}{const be=function(Ge,Oe){return Ge[0]+":"+(Ge[2]<0?-1:Ge[2])+":"+Oe+":"+C.cstrToJs(Ge[1]).toLowerCase()},Ie=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:be,callProxy:Ge=>(Oe,Ke,St)=>{try{Ge(Oe,...N.sqlite3_values_to_js(Ke,St))}catch(Y){N.sqlite3_result_error_js(Oe,Y)}}},xFinalAndValue:{signature:"v(p)",contextKey:be,callProxy:Ge=>Oe=>{try{N.sqlite3_result_js(Oe,Ge(Oe))}catch(Ke){N.sqlite3_result_error_js(Oe,Ke)}}},xFunc:{signature:"v(pip)",contextKey:be,callProxy:Ge=>(Oe,Ke,St)=>{try{N.sqlite3_result_js(Oe,Ge(Oe,...N.sqlite3_values_to_js(Ke,St)))}catch(Y){N.sqlite3_result_error_js(Oe,Y)}}},xDestroy:{signature:"v(p)",contextKey:be,callProxy:Ge=>Oe=>{try{Ge(Oe)}catch(Ke){console.error("UDF xDestroy method threw:",Ke)}}}}),Te=C.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new C.xWrap.FuncPtrAdapter({name:"xFunc",...Ie.xFunc}),new C.xWrap.FuncPtrAdapter({name:"xStep",...Ie.xInverseAndStep}),new C.xWrap.FuncPtrAdapter({name:"xFinal",...Ie.xFinalAndValue}),new C.xWrap.FuncPtrAdapter({name:"xDestroy",...Ie.xDestroy})]),Je=C.exports.sqlite3_create_window_function?C.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new C.xWrap.FuncPtrAdapter({name:"xStep",...Ie.xInverseAndStep}),new C.xWrap.FuncPtrAdapter({name:"xFinal",...Ie.xFinalAndValue}),new C.xWrap.FuncPtrAdapter({name:"xValue",...Ie.xFinalAndValue}),new C.xWrap.FuncPtrAdapter({name:"xInverse",...Ie.xInverseAndStep}),new C.xWrap.FuncPtrAdapter({name:"xDestroy",...Ie.xDestroy})]):void 0;N.sqlite3_create_function_v2=function Ge(Oe,Ke,St,Y,ue,Ee,st,ae,pe){if(Ge.length!==arguments.length)return fe(Oe,"sqlite3_create_function_v2",Ge.length);if(!(Y&15))Y|=N.SQLITE_UTF8;else if(N.SQLITE_UTF8!==(Y&15))return me(Oe);try{const Q=Te(Oe,Ke,St,Y,ue,Ee,st,ae,pe);return Q===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function)&&at.addFunction(Oe,Ke,St),Q}catch(Q){return console.error("sqlite3_create_function_v2() setup threw:",Q),$.sqlite3__wasm_db_error(Oe,Q,"Creation of UDF threw: "+Q)}},N.sqlite3_create_function=function Ge(Oe,Ke,St,Y,ue,Ee,st,ae){return Ge.length===arguments.length?N.sqlite3_create_function_v2(Oe,Ke,St,Y,ue,Ee,st,ae,0):fe(Oe,"sqlite3_create_function",Ge.length)},Je?N.sqlite3_create_window_function=function Ge(Oe,Ke,St,Y,ue,Ee,st,ae,pe,Q){if(Ge.length!==arguments.length)return fe(Oe,"sqlite3_create_window_function",Ge.length);if(!(Y&15))Y|=N.SQLITE_UTF8;else if(N.SQLITE_UTF8!==(Y&15))return me(Oe);try{const re=Je(Oe,Ke,St,Y,ue,Ee,st,ae,pe,Q);return re===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function||Q instanceof Function)&&at.addWindowFunc(Oe,Ke,St),re}catch(re){return console.error("sqlite3_create_window_function() setup threw:",re),$.sqlite3__wasm_db_error(Oe,re,"Creation of UDF threw: "+re)}}:delete N.sqlite3_create_window_function,N.sqlite3_create_function_v2.udfSetResult=N.sqlite3_create_function.udfSetResult=N.sqlite3_result_js,N.sqlite3_create_window_function&&(N.sqlite3_create_window_function.udfSetResult=N.sqlite3_result_js),N.sqlite3_create_function_v2.udfConvertArgs=N.sqlite3_create_function.udfConvertArgs=N.sqlite3_values_to_js,N.sqlite3_create_window_function&&(N.sqlite3_create_window_function.udfConvertArgs=N.sqlite3_values_to_js),N.sqlite3_create_function_v2.udfSetError=N.sqlite3_create_function.udfSetError=N.sqlite3_result_error_js,N.sqlite3_create_window_function&&(N.sqlite3_create_window_function.udfSetError=N.sqlite3_result_error_js)}{const be=(Te,Je)=>(typeof Te=="string"?Je=-1:$.isSQLableTypedArray(Te)?(Je=Te.byteLength,Te=$.typedArrayToString(Te instanceof ArrayBuffer?new Uint8Array(Te):Te)):Array.isArray(Te)&&(Te=Te.join(""),Je=-1),[Te,Je]),Ie={basic:C.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:C.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};N.sqlite3_prepare_v3=function Te(Je,Ge,Oe,Ke,St,Y){if(Te.length!==arguments.length)return fe(Je,"sqlite3_prepare_v3",Te.length);const[ue,Ee]=be(Ge,Oe);switch(typeof ue){case"string":return Ie.basic(Je,ue,Ee,Ke,St,null);case"number":return Ie.full(Je,ue,Ee,Ke,St,Y);default:return $.sqlite3__wasm_db_error(Je,N.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},N.sqlite3_prepare_v2=function Te(Je,Ge,Oe,Ke,St){return Te.length===arguments.length?N.sqlite3_prepare_v3(Je,Ge,Oe,0,Ke,St):fe(Je,"sqlite3_prepare_v2",Te.length)}}{const be=C.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),Ie=C.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);N.sqlite3_bind_text=function Te(Je,Ge,Oe,Ke,St){if(Te.length!==arguments.length)return fe(N.sqlite3_db_handle(Je),"sqlite3_bind_text",Te.length);if(C.isPtr(Oe)||Oe===null)return be(Je,Ge,Oe,Ke,St);Oe instanceof ArrayBuffer?Oe=new Uint8Array(Oe):Array.isArray(pMem)&&(Oe=pMem.join(""));let Y,ue;try{if($.isSQLableTypedArray(Oe))Y=C.allocFromTypedArray(Oe),ue=Oe.byteLength;else if(typeof Oe=="string")[Y,ue]=C.allocCString(Oe);else return $.sqlite3__wasm_db_error(N.sqlite3_db_handle(Je),N.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return be(Je,Ge,Y,ue,N.SQLITE_WASM_DEALLOC)}catch(Ee){return C.dealloc(Y),$.sqlite3__wasm_db_error(N.sqlite3_db_handle(Je),Ee)}},N.sqlite3_bind_blob=function Te(Je,Ge,Oe,Ke,St){if(Te.length!==arguments.length)return fe(N.sqlite3_db_handle(Je),"sqlite3_bind_blob",Te.length);if(C.isPtr(Oe)||Oe===null)return Ie(Je,Ge,Oe,Ke,St);Oe instanceof ArrayBuffer?Oe=new Uint8Array(Oe):Array.isArray(Oe)&&(Oe=Oe.join(""));let Y,ue;try{if($.isBindableTypedArray(Oe))Y=C.allocFromTypedArray(Oe),ue=Ke>=0?Ke:Oe.byteLength;else if(typeof Oe=="string")[Y,ue]=C.allocCString(Oe);else return $.sqlite3__wasm_db_error(N.sqlite3_db_handle(Je),N.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return Ie(Je,Ge,Y,ue,N.SQLITE_WASM_DEALLOC)}catch(Ee){return C.dealloc(Y),$.sqlite3__wasm_db_error(N.sqlite3_db_handle(Je),Ee)}}}N.sqlite3_config=function(be,...Ie){if(arguments.length<2)return N.SQLITE_MISUSE;switch(be){case N.SQLITE_CONFIG_COVERING_INDEX_SCAN:case N.SQLITE_CONFIG_MEMSTATUS:case N.SQLITE_CONFIG_SMALL_MALLOC:case N.SQLITE_CONFIG_SORTERREF_SIZE:case N.SQLITE_CONFIG_STMTJRNL_SPILL:case N.SQLITE_CONFIG_URI:return C.exports.sqlite3__wasm_config_i(be,Ie[0]);case N.SQLITE_CONFIG_LOOKASIDE:return C.exports.sqlite3__wasm_config_ii(be,Ie[0],Ie[1]);case N.SQLITE_CONFIG_MEMDB_MAXSIZE:return C.exports.sqlite3__wasm_config_j(be,Ie[0]);case N.SQLITE_CONFIG_GETMALLOC:case N.SQLITE_CONFIG_GETMUTEX:case N.SQLITE_CONFIG_GETPCACHE2:case N.SQLITE_CONFIG_GETPCACHE:case N.SQLITE_CONFIG_HEAP:case N.SQLITE_CONFIG_LOG:case N.SQLITE_CONFIG_MALLOC:case N.SQLITE_CONFIG_MMAP_SIZE:case N.SQLITE_CONFIG_MULTITHREAD:case N.SQLITE_CONFIG_MUTEX:case N.SQLITE_CONFIG_PAGECACHE:case N.SQLITE_CONFIG_PCACHE2:case N.SQLITE_CONFIG_PCACHE:case N.SQLITE_CONFIG_PCACHE_HDRSZ:case N.SQLITE_CONFIG_PMASZ:case N.SQLITE_CONFIG_SERIALIZED:case N.SQLITE_CONFIG_SINGLETHREAD:case N.SQLITE_CONFIG_SQLLOG:case N.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return N.SQLITE_NOTFOUND}};{const be=new Set;N.sqlite3_auto_extension=function(Ie){if(Ie instanceof Function)Ie=C.installFunction("i(ppp)",Ie);else if(arguments.length!==1||!C.isPtr(Ie))return N.SQLITE_MISUSE;const Te=C.exports.sqlite3_auto_extension(Ie);return Ie!==arguments[0]&&(Te===0?be.add(Ie):C.uninstallFunction(Ie)),Te},N.sqlite3_cancel_auto_extension=function(Ie){return!Ie||arguments.length!==1||!C.isPtr(Ie)?0:C.exports.sqlite3_cancel_auto_extension(Ie)},N.sqlite3_reset_auto_extension=function(){C.exports.sqlite3_reset_auto_extension();for(const Ie of be)C.uninstallFunction(Ie);be.clear()}}const mt=N.sqlite3_vfs_find("kvvfs");if(mt)if($.isUIThread()){const be=new N.sqlite3_kvvfs_methods(C.exports.sqlite3__wasm_kvvfs_methods());delete N.sqlite3_kvvfs_methods;const Ie=C.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,Te=C.pstack,Je=Oe=>C.peek(Oe)===115?sessionStorage:localStorage,Ge={xRead:(Oe,Ke,St,Y)=>{const ue=Te.pointer,Ee=C.scopedAllocPush();try{const st=Ie(Oe,Ke);if(!st)return-3;const ae=C.cstrToJs(st),pe=Je(Oe).getItem(ae);if(!pe)return-1;const Q=pe.length;if(Y<=0)return Q;if(Y===1)return C.poke(St,0),Q;const re=C.scopedAllocCString(pe);return Y>Q+1&&(Y=Q+1),C.heap8u().copyWithin(St,re,re+Y-1),C.poke(St+Y-1,0),Y-1}catch(st){return console.error("kvstorageRead()",st),-2}finally{Te.restore(ue),C.scopedAllocPop(Ee)}},xWrite:(Oe,Ke,St)=>{const Y=Te.pointer;try{const ue=Ie(Oe,Ke);if(!ue)return 1;const Ee=C.cstrToJs(ue);return Je(Oe).setItem(Ee,C.cstrToJs(St)),0}catch(ue){return console.error("kvstorageWrite()",ue),N.SQLITE_IOERR}finally{Te.restore(Y)}},xDelete:(Oe,Ke)=>{const St=Te.pointer;try{const Y=Ie(Oe,Ke);return Y?(Je(Oe).removeItem(C.cstrToJs(Y)),0):1}catch(Y){return console.error("kvstorageDelete()",Y),N.SQLITE_IOERR}finally{Te.restore(St)}}};for(const Oe of Object.keys(Ge))be[be.memberKey(Oe)]=C.installFunction(be.memberSignature(Oe),Ge[Oe])}else N.sqlite3_vfs_unregister(mt);C.xWrap.FuncPtrAdapter.warnOnUse=!0;const Be=y.StructBinder,Re=function be(Ie,Te,Je,Ge=be.installMethodArgcCheck){if(Ie instanceof Be.StructType?!(Je instanceof Function)&&!C.isPtr(Je)&&S("Usage errror: expecting a Function or WASM pointer to one."):S("Usage error: target object is-not-a StructType."),arguments.length===1)return(Y,ue)=>be(Ie,Y,ue,Ge);be.argcProxy||(be.argcProxy=function(Y,ue,Ee,st){return function(...ae){return Ee.length!==arguments.length&&S("Argument mismatch for",Y.structInfo.name+"::"+ue+": Native signature is:",st),Ee.apply(this,ae)}},be.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((Y,ue)=>{if(typeof Y=="number")try{C.uninstallFunction(Y)}catch{}}),delete this.ondispose.__removeFuncList)});const Oe=Ie.memberSignature(Te);Oe.length<2&&S("Member",Te,"does not have a function pointer signature:",Oe);const Ke=Ie.memberKey(Te),St=Ge&&!C.isPtr(Je)?be.argcProxy(Ie,Ke,Je,Oe):Je;if(C.isPtr(St))St&&!C.functionEntry(St)&&S("Pointer",St,"is not a WASM function table entry."),Ie[Ke]=St;else{const Y=C.installFunction(St,Ie.memberSignature(Te,!0));Ie[Ke]=Y,(!Ie.ondispose||!Ie.ondispose.__removeFuncList)&&(Ie.addOnDispose("ondispose.__removeFuncList handler",be.removeFuncList),Ie.ondispose.__removeFuncList=[]),Ie.ondispose.__removeFuncList.push(Ke,Y)}return(Y,ue)=>be(Ie,Y,ue,Ge)};Re.installMethodArgcCheck=!1;const et=function(be,Ie,Te=Re.installMethodArgcCheck){const Je=new Map;for(const Ge of Object.keys(Ie)){const Oe=Ie[Ge],Ke=Je.get(Oe);if(Ke){const St=be.memberKey(Ge);be[St]=be[be.memberKey(Ke)]}else Re(be,Ge,Oe,Te),Je.set(Oe,Ge)}return be};Be.StructType.prototype.installMethod=function(Ie,Te,Je=Re.installMethodArgcCheck){return arguments.length<3&&Ie&&typeof Ie=="object"?et(this,...arguments):Re(this,...arguments)},Be.StructType.prototype.installMethods=function(be,Ie=Re.installMethodArgcCheck){return et(this,be,Ie)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){y.version={libVersion:"3.47.1",libVersionNumber:3047001,sourceId:"2024-11-25 12:07:48 b95d11e958643b969c47a8e5857f3793b9e69700b8f1469371386369a26e577e",downloadVersion:3470100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=(...ae)=>{throw new y.SQLite3Error(...ae)},N=y.capi,C=y.wasm,$=y.util,fe=new WeakMap,me=new WeakMap,Qe=(ae,pe,Q)=>{const re=Object.getOwnPropertyDescriptor(ae,pe);return re?re.value:Q},tt=function(ae,pe){return pe&&(ae instanceof Re&&(ae=ae.pointer),S(pe,"sqlite3 result code",pe+":",ae?N.sqlite3_errmsg(ae):N.sqlite3_errstr(pe))),arguments[0]},at=C.installFunction("i(ippp)",function(ae,pe,Q,re){N.SQLITE_TRACE_STMT===ae&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+pe+":",C.cstrToJs(re))}.bind({counter:0})),mt=Object.create(null),Be=function ae(...pe){if(!ae._name2vfs){ae._name2vfs=Object.create(null);const we=typeof importScripts=="function"?Pe=>S("The VFS for",Pe,"is only available in the main window thread."):!1;ae._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:we||(()=>"local")},ae._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:we||(()=>"session")}}const Q=ae.normalizeArgs(...pe);let re=Q.filename,ie=Q.vfs,Le=Q.flags;(typeof re!="string"&&typeof re!="number"||typeof Le!="string"||ie&&typeof ie!="string"&&typeof ie!="number")&&(y.config.error("Invalid DB ctor args",Q,arguments),S("Invalid arguments for DB constructor."));let it=typeof re=="number"?C.cstrToJs(re):re;const qt=ae._name2vfs[it];qt&&(ie=qt.vfs,re=it=qt.filename(it));let Bt,Jt=0;Le.indexOf("c")>=0&&(Jt|=N.SQLITE_OPEN_CREATE|N.SQLITE_OPEN_READWRITE),Le.indexOf("w")>=0&&(Jt|=N.SQLITE_OPEN_READWRITE),Jt===0&&(Jt|=N.SQLITE_OPEN_READONLY),Jt|=N.SQLITE_OPEN_EXRESCODE;const lt=C.pstack.pointer;try{const we=C.pstack.allocPtr();let Pe=N.sqlite3_open_v2(re,we,Jt,ie||0);Bt=C.peekPtr(we),tt(Bt,Pe),N.sqlite3_extended_result_codes(Bt,1),Le.indexOf("t")>=0&&N.sqlite3_trace_v2(Bt,N.SQLITE_TRACE_STMT,at,Bt)}catch(we){throw Bt&&N.sqlite3_close_v2(Bt),we}finally{C.pstack.restore(lt)}this.filename=it,fe.set(this,Bt),me.set(this,Object.create(null));try{const we=N.sqlite3_js_db_vfs(Bt)||S("Internal error: cannot get VFS for new db handle."),Pe=mt[we];Pe&&(Pe instanceof Function?Pe(this,y):tt(Bt,N.sqlite3_exec(Bt,Pe,0,0,0)))}catch(we){throw this.close(),we}};Be.setVfsPostOpenCallback=function(ae,pe){pe instanceof Function||S("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),mt[ae]=pe},Be.normalizeArgs=function(ae=":memory:",pe="c",Q=null){const re={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(re,arguments[0]),re.flags===void 0&&(re.flags="c"),re.vfs===void 0&&(re.vfs=null),re.filename===void 0&&(re.filename=":memory:")):(re.filename=ae,re.flags=pe,re.vfs=Q),re};const Re=function(...ae){Be.apply(this,ae)};Re.dbCtorHelper=Be;const et={null:1,number:2,string:3,boolean:4,blob:5};et.undefined==et.null,C.bigIntEnabled&&(et.bigint=et.number);const be=function(){et!==arguments[2]&&S(N.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],fe.set(this,arguments[1]),this.parameterCount=N.sqlite3_bind_parameter_count(this.pointer)},Ie=function(ae){return ae.pointer||S("DB has been closed."),ae},Te=function(ae,pe){return(pe!==(pe|0)||pe<0||pe>=ae.columnCount)&&S("Column index",pe,"is out of range."),ae},Je=function(ae,pe){const Q=Object.create(null);switch(Q.opt=Object.create(null),pe.length){case 1:typeof pe[0]=="string"||$.isSQLableTypedArray(pe[0])||Array.isArray(pe[0])?Q.sql=pe[0]:pe[0]&&typeof pe[0]=="object"&&(Q.opt=pe[0],Q.sql=Q.opt.sql);break;case 2:Q.sql=pe[0],Q.opt=pe[1];break;default:S("Invalid argument count for exec().")}Q.sql=$.flexibleString(Q.sql),typeof Q.sql!="string"&&S("Missing SQL argument or unsupported SQL value type.");const re=Q.opt;switch(re.returnValue){case"resultRows":re.resultRows||(re.resultRows=[]),Q.returnVal=()=>re.resultRows;break;case"saveSql":re.saveSql||(re.saveSql=[]),Q.returnVal=()=>re.saveSql;break;case void 0:case"this":Q.returnVal=()=>ae;break;default:S("Invalid returnValue value:",re.returnValue)}if(!re.callback&&!re.returnValue&&re.rowMode!==void 0&&(re.resultRows||(re.resultRows=[]),Q.returnVal=()=>re.resultRows),re.callback||re.resultRows)switch(re.rowMode===void 0?"array":re.rowMode){case"object":Q.cbArg=(ie,Le)=>{Le.columnNames||(Le.columnNames=ie.getColumnNames([]));const it=ie.get([]),qt=Object.create(null);for(const Bt in Le.columnNames)qt[Le.columnNames[Bt]]=it[Bt];return qt};break;case"array":Q.cbArg=ie=>ie.get([]);break;case"stmt":Array.isArray(re.resultRows)&&S("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),Q.cbArg=ie=>ie;break;default:if($.isInt32(re.rowMode)){Q.cbArg=ie=>ie.get(re.rowMode);break}else if(typeof re.rowMode=="string"&&re.rowMode.length>1&&re.rowMode[0]==="$"){const ie=re.rowMode.substr(1);Q.cbArg=Le=>{const it=Le.get(Object.create(null))[ie];return it===void 0?S(N.SQLITE_NOTFOUND,"exec(): unknown result column:",ie):it};break}S("Invalid rowMode:",re.rowMode)}return Q},Ge=(ae,pe,Q,...re)=>{const ie=ae.prepare(pe);try{const Le=ie.bind(Q).step()?ie.get(...re):void 0;return ie.reset(),Le}finally{ie.finalize()}},Oe=(ae,pe,Q,re)=>ae.exec({sql:pe,bind:Q,rowMode:re,returnValue:"resultRows"});Re.checkRc=(ae,pe)=>tt(ae,pe),Re.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return Ie(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const ae=this.pointer;if(Object.keys(me.get(this)).forEach((pe,Q)=>{if(Q&&Q.pointer)try{Q.finalize()}catch{}}),fe.delete(this),me.delete(this),N.sqlite3_close_v2(ae),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(ae=!1,pe=!1){const Q=Ie(this).pointer;return ae?pe?N.sqlite3_total_changes64(Q):N.sqlite3_total_changes(Q):pe?N.sqlite3_changes64(Q):N.sqlite3_changes(Q)},dbFilename:function(ae="main"){return N.sqlite3_db_filename(Ie(this).pointer,ae)},dbName:function(ae=0){return N.sqlite3_db_name(Ie(this).pointer,ae)},dbVfsName:function(ae=0){let pe;const Q=N.sqlite3_js_db_vfs(Ie(this).pointer,ae);if(Q){const re=new N.sqlite3_vfs(Q);try{pe=C.cstrToJs(re.$zName)}finally{re.dispose()}}return pe},prepare:function(ae){Ie(this);const pe=C.pstack.pointer;let Q,re;try{Q=C.pstack.alloc(8),Re.checkRc(this,N.sqlite3_prepare_v2(this.pointer,ae,-1,Q,null)),re=C.peekPtr(Q)}finally{C.pstack.restore(pe)}re||S("Cannot prepare empty SQL.");const ie=new be(this,re,et);return me.get(this)[re]=ie,ie},exec:function(){Ie(this);const ae=Je(this,arguments);if(!ae.sql)return S("exec() requires an SQL string.");const pe=ae.opt,Q=pe.callback,re=Array.isArray(pe.resultRows)?pe.resultRows:void 0;let ie,Le=pe.bind,it=!!(ae.cbArg||pe.columnNames||re);const qt=C.scopedAllocPush(),Bt=Array.isArray(pe.saveSql)?pe.saveSql:void 0;try{const Jt=$.isSQLableTypedArray(ae.sql);let lt=Jt?ae.sql.byteLength:C.jstrlen(ae.sql);const we=C.scopedAlloc(2*C.ptrSizeof+(lt+1)),Pe=we+C.ptrSizeof;let ot=Pe+C.ptrSizeof;const pt=ot+lt;for(Jt?C.heap8().set(ae.sql,ot):C.jstrcpy(ae.sql,C.heap8(),ot,lt,!1),C.poke(ot+lt,0);ot&&C.peek(ot,"i8");){C.pokePtr([we,Pe],0),Re.checkRc(this,N.sqlite3_prepare_v3(this.pointer,ot,lt,0,we,Pe));const Ft=C.peekPtr(we);if(ot=C.peekPtr(Pe),lt=pt-ot,!!Ft){if(Bt&&Bt.push(N.sqlite3_sql(Ft).trim()),ie=new be(this,Ft,et),Le&&ie.parameterCount&&(ie.bind(Le),Le=null),it&&ie.columnCount){let Yt=Array.isArray(pe.columnNames)?0:1;if(it=!1,ae.cbArg||re){const je=Object.create(null);for(;ie.step();ie._lockedByExec=!1){Yt++===0&&ie.getColumnNames(je.columnNames=pe.columnNames||[]),ie._lockedByExec=!0;const nt=ae.cbArg(ie,je);if(re&&re.push(nt),Q&&Q.call(pe,nt,ie)===!1)break}ie._lockedByExec=!1}Yt===0&&ie.getColumnNames(pe.columnNames)}else ie.step();ie.reset().finalize(),ie=null}}}finally{C.scopedAllocPop(qt),ie&&(delete ie._lockedByExec,ie.finalize())}return ae.returnVal()},createFunction:function(pe,Q,re){const ie=je=>je instanceof Function;switch(arguments.length){case 1:re=pe,pe=re.name,Q=re.xFunc||0;break;case 2:ie(Q)||(re=Q,Q=re.xFunc||0);break}re||(re={}),typeof pe!="string"&&S("Invalid arguments: missing function name.");let Le=re.xStep||0,it=re.xFinal||0;const qt=re.xValue||0,Bt=re.xInverse||0;let Jt;ie(Q)?(Jt=!1,(ie(Le)||ie(it))&&S("Ambiguous arguments: scalar or aggregate?"),Le=it=null):ie(Le)?(ie(it)||S("Missing xFinal() callback for aggregate or window UDF."),Q=null):ie(it)?S("Missing xStep() callback for aggregate or window UDF."):S("Missing function-type properties."),Jt===!1?(ie(qt)||ie(Bt))&&S("xValue and xInverse are not permitted for non-window UDFs."):ie(qt)?(ie(Bt)||S("xInverse must be provided if xValue is."),Jt=!0):ie(Bt)&&S("xValue must be provided if xInverse is.");const lt=re.pApp;lt!=null&&(typeof lt!="number"||!$.isInt32(lt))&&S("Invalid value for pApp property. Must be a legal WASM pointer value.");const we=re.xDestroy||0;we&&!ie(we)&&S("xDestroy property must be a function.");let Pe=0;Qe(re,"deterministic")&&(Pe|=N.SQLITE_DETERMINISTIC),Qe(re,"directOnly")&&(Pe|=N.SQLITE_DIRECTONLY),Qe(re,"innocuous")&&(Pe|=N.SQLITE_INNOCUOUS),pe=pe.toLowerCase();const ot=Q||Le,pt=Qe(re,"arity"),Ft=typeof pt=="number"?pt:ot.length?ot.length-1:0;let Yt;return Jt?Yt=N.sqlite3_create_window_function(this.pointer,pe,Ft,N.SQLITE_UTF8|Pe,lt||0,Le,it,qt,Bt,we):Yt=N.sqlite3_create_function_v2(this.pointer,pe,Ft,N.SQLITE_UTF8|Pe,lt||0,Q,Le,it,we),Re.checkRc(this,Yt),this},selectValue:function(ae,pe,Q){return Ge(this,ae,pe,0,Q)},selectValues:function(ae,pe,Q){const re=this.prepare(ae),ie=[];try{for(re.bind(pe);re.step();)ie.push(re.get(0,Q));re.reset()}finally{re.finalize()}return ie},selectArray:function(ae,pe){return Ge(this,ae,pe,[])},selectObject:function(ae,pe){return Ge(this,ae,pe,{})},selectArrays:function(ae,pe){return Oe(this,ae,pe,"array")},selectObjects:function(ae,pe){return Oe(this,ae,pe,"object")},openStatementCount:function(){return this.pointer?Object.keys(me.get(this)).length:0},transaction:function(ae){let pe="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&S(N.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),pe+=" "+arguments[0],ae=arguments[1]),Ie(this).exec(pe);try{const Q=ae(this);return this.exec("COMMIT"),Q}catch(Q){throw this.exec("ROLLBACK"),Q}},savepoint:function(ae){Ie(this).exec("SAVEPOINT oo1");try{const pe=ae(this);return this.exec("RELEASE oo1"),pe}catch(pe){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),pe}},checkRc:function(ae){return tt(this,ae)}};const Ke=function(ae){return ae.pointer||S("Stmt has been closed."),ae},St=function(ae){let pe=et[ae==null?"null":typeof ae];switch(pe){case et.boolean:case et.null:case et.number:case et.string:return pe;case et.bigint:if(C.bigIntEnabled)return pe;default:return $.isBindableTypedArray(ae)?et.blob:void 0}},Y=function(ae){return St(ae)||S("Unsupported bind() argument type:",typeof ae)},ue=function(ae,pe){const Q=typeof pe=="number"?pe:N.sqlite3_bind_parameter_index(ae.pointer,pe);return Q===0||!$.isInt32(Q)?S("Invalid bind() parameter name: "+pe):(Q<1||Q>ae.parameterCount)&&S("Bind index",pe,"is out of range."),Q},Ee=function(ae,pe){return ae._lockedByExec&&S("Operation is illegal when statement is locked:",pe),ae},st=function ae(pe,Q,re,ie){Ee(Ke(pe),"bind()"),ae._||(ae._tooBigInt=it=>S("BigInt value is too big to store without precision loss:",it),ae._={string:function(it,qt,Bt,Jt){const[lt,we]=C.allocCString(Bt,!0);return(Jt?N.sqlite3_bind_blob:N.sqlite3_bind_text)(it.pointer,qt,lt,we,N.SQLITE_WASM_DEALLOC)}}),Y(ie),Q=ue(pe,Q);let Le=0;switch(ie==null?et.null:re){case et.null:Le=N.sqlite3_bind_null(pe.pointer,Q);break;case et.string:Le=ae._.string(pe,Q,ie,!1);break;case et.number:{let it;$.isInt32(ie)?it=N.sqlite3_bind_int:typeof ie=="bigint"?$.bigIntFits64(ie)?C.bigIntEnabled?it=N.sqlite3_bind_int64:$.bigIntFitsDouble(ie)?(ie=Number(ie),it=N.sqlite3_bind_double):ae._tooBigInt(ie):ae._tooBigInt(ie):(ie=Number(ie),C.bigIntEnabled&&Number.isInteger(ie)?it=N.sqlite3_bind_int64:it=N.sqlite3_bind_double),Le=it(pe.pointer,Q,ie);break}case et.boolean:Le=N.sqlite3_bind_int(pe.pointer,Q,ie?1:0);break;case et.blob:{if(typeof ie=="string"){Le=ae._.string(pe,Q,ie,!0);break}else ie instanceof ArrayBuffer?ie=new Uint8Array(ie):$.isBindableTypedArray(ie)||S("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const it=C.alloc(ie.byteLength||1);C.heap8().set(ie.byteLength?ie:[0],it),Le=N.sqlite3_bind_blob(pe.pointer,Q,it,ie.byteLength,N.SQLITE_WASM_DEALLOC);break}default:y.config.warn("Unsupported bind() argument type:",ie),S("Unsupported bind() argument type: "+typeof ie)}return Le&&Re.checkRc(pe.db.pointer,Le),pe._mayGet=!1,pe};be.prototype={finalize:function(){if(this.pointer){Ee(this,"finalize()");const ae=N.sqlite3_finalize(this.pointer);return delete me.get(this.db)[this.pointer],fe.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,ae}},clearBindings:function(){return Ee(Ke(this),"clearBindings()"),N.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(ae){Ee(this,"reset()"),ae&&this.clearBindings();const pe=N.sqlite3_reset(Ke(this).pointer);return this._mayGet=!1,tt(this.db,pe),this},bind:function(){Ke(this);let ae,pe;switch(arguments.length){case 1:ae=1,pe=arguments[0];break;case 2:ae=arguments[0],pe=arguments[1];break;default:S("Invalid bind() arguments.")}return pe===void 0?this:(this.parameterCount||S("This statement has no bindable parameters."),this._mayGet=!1,pe===null?st(this,ae,et.null,pe):Array.isArray(pe)?(arguments.length!==1&&S("When binding an array, an index argument is not permitted."),pe.forEach((Q,re)=>st(this,re+1,Y(Q),Q)),this):(pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe)),typeof pe=="object"&&!$.isBindableTypedArray(pe)?(arguments.length!==1&&S("When binding an object, an index argument is not permitted."),Object.keys(pe).forEach(Q=>st(this,Q,Y(pe[Q]),pe[Q])),this):st(this,ae,Y(pe),pe)))},bindAsBlob:function(ae,pe){Ke(this),arguments.length===1&&(pe=ae,ae=1);const Q=Y(pe);return et.string!==Q&&et.blob!==Q&&et.null!==Q&&S("Invalid value type for bindAsBlob()"),st(this,ae,et.blob,pe)},step:function(){Ee(this,"step()");const ae=N.sqlite3_step(Ke(this).pointer);switch(ae){case N.SQLITE_DONE:return this._mayGet=!1;case N.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,y.config.warn("sqlite3_step() rc=",ae,N.sqlite3_js_rc_str(ae),"SQL =",N.sqlite3_sql(this.pointer)),Re.checkRc(this.db.pointer,ae)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const ae=this.step();return this.reset(),ae}finally{try{this.finalize()}catch{}}},get:function(ae,pe){if(Ke(this)._mayGet||S("Stmt.step() has not (recently) returned true."),Array.isArray(ae)){let Q=0;const re=this.columnCount;for(;Q<re;)ae[Q]=this.get(Q++);return ae}else if(ae&&typeof ae=="object"){let Q=0;const re=this.columnCount;for(;Q<re;)ae[N.sqlite3_column_name(this.pointer,Q)]=this.get(Q++);return ae}switch(Te(this,ae),pe===void 0?N.sqlite3_column_type(this.pointer,ae):pe){case N.SQLITE_NULL:return null;case N.SQLITE_INTEGER:if(C.bigIntEnabled){const Q=N.sqlite3_column_int64(this.pointer,ae);return Q>=Number.MIN_SAFE_INTEGER&&Q<=Number.MAX_SAFE_INTEGER?Number(Q).valueOf():Q}else{const Q=N.sqlite3_column_double(this.pointer,ae);return(Q>Number.MAX_SAFE_INTEGER||Q<Number.MIN_SAFE_INTEGER)&&S("Integer is out of range for JS integer range: "+Q),$.isInt32(Q)?Q|0:Q}case N.SQLITE_FLOAT:return N.sqlite3_column_double(this.pointer,ae);case N.SQLITE_TEXT:return N.sqlite3_column_text(this.pointer,ae);case N.SQLITE_BLOB:{const Q=N.sqlite3_column_bytes(this.pointer,ae),re=N.sqlite3_column_blob(this.pointer,ae),ie=new Uint8Array(Q);return Q&&ie.set(C.heap8u().slice(re,re+Q),0),Q&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(ie.buffer),ie}default:S("Don't know how to translate","type of result column #"+ae+".")}S("Not reached.")},getInt:function(ae){return this.get(ae,N.SQLITE_INTEGER)},getFloat:function(ae){return this.get(ae,N.SQLITE_FLOAT)},getString:function(ae){return this.get(ae,N.SQLITE_TEXT)},getBlob:function(ae){return this.get(ae,N.SQLITE_BLOB)},getJSON:function(ae){const pe=this.get(ae,N.SQLITE_STRING);return pe===null?pe:JSON.parse(pe)},getColumnName:function(ae){return N.sqlite3_column_name(Te(Ke(this),ae).pointer,ae)},getColumnNames:function(ae=[]){Te(Ke(this),0);const pe=this.columnCount;for(let Q=0;Q<pe;++Q)ae.push(N.sqlite3_column_name(this.pointer,Q));return ae},getParamIndex:function(ae){return Ke(this).parameterCount?N.sqlite3_bind_parameter_index(this.pointer,ae):void 0},getParamName:function(ae){return Ke(this).parameterCount?N.sqlite3_bind_parameter_name(this.pointer,ae):void 0},isBusy:function(){return N.sqlite3_stmt_busy(Ke(this))!==0},isReadOnly:function(){return N.sqlite3_stmt_readonly(Ke(this))!==0}};{const ae={enumerable:!0,get:function(){return fe.get(this)},set:()=>S("The pointer property is read-only.")};Object.defineProperty(be.prototype,"pointer",ae),Object.defineProperty(Re.prototype,"pointer",ae)}if(Object.defineProperty(be.prototype,"columnCount",{enumerable:!1,get:function(){return N.sqlite3_column_count(this.pointer)},set:()=>S("The columnCount property is read-only.")}),y.oo1={DB:Re,Stmt:be},$.isUIThread()){y.oo1.JsStorageDb=function(pe="session"){const Q=Be.normalizeArgs(...arguments);pe=Q.filename,pe!=="session"&&pe!=="local"&&S("JsStorageDb db name must be one of 'session' or 'local'."),Q.vfs="kvvfs",Be.call(this,Q)};const ae=y.oo1.JsStorageDb;ae.prototype=Object.create(Re.prototype),ae.clearStorage=N.sqlite3_js_kvvfs_clear,ae.prototype.clearStorage=function(){return ae.clearStorage(Ie(this).filename)},ae.storageSize=N.sqlite3_js_kvvfs_size,ae.prototype.storageSize=function(){return ae.storageSize(Ie(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.util;y.initWorker1API=function(){const N=(...Be)=>{throw new Error(Be.join(" "))};globalThis.WorkerGlobalScope instanceof Function||N("initWorker1API() must be run from a Worker thread.");const C=this.sqlite3||N("Missing this.sqlite3 object."),$=C.oo1.DB,fe=function(Be){let Re=me.idMap.get(Be);return Re||(Re="db#"+ ++me.idSeq+"@"+Be.pointer,me.idMap.set(Be,Re),Re)},me={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(Be){const Re=new $(Be);return this.dbs[fe(Re)]=Re,this.dbList.indexOf(Re)<0&&this.dbList.push(Re),Re},close:function(Be,Re){if(Be){delete this.dbs[fe(Be)];const et=Be.filename,be=S.sqlite3__wasm_db_vfs(Be.pointer,0);Be.close();const Ie=this.dbList.indexOf(Be);Ie>=0&&this.dbList.splice(Ie,1),Re&&et&&be&&S.sqlite3__wasm_vfs_unlink(be,et)}},post:function(Be,Re){Re&&Re.length?(globalThis.postMessage(Be,Array.from(Re)),Re.length=0):globalThis.postMessage(Be)},dbs:Object.create(null),getDb:function(Be,Re=!0){return this.dbs[Be]||(Re?N("Unknown (or closed) DB ID:",Be):void 0)}},Qe=function(Be=me.dbList[0]){return Be&&Be.pointer?Be:N("DB is not opened.")},tt=function(Be,Re=!0){const et=me.getDb(Be.dbId,!1)||me.dbList[0];return Re?Qe(et):et},at=function(){return me.dbList[0]&&fe(me.dbList[0])},mt={open:function(Be){const Re=Object.create(null),et=Be.args||Object.create(null);et.simulateError&&N("Throwing because of simulateError flag.");const be=Object.create(null);Re.vfs=et.vfs,Re.filename=et.filename||"";const Ie=me.open(Re);return be.filename=Ie.filename,be.persistent=!!C.capi.sqlite3_js_db_uses_vfs(Ie.pointer,"opfs"),be.dbId=fe(Ie),be.vfs=Ie.dbVfsName(),be},close:function(Be){const Re=tt(Be,!1),et={filename:Re&&Re.filename};if(Re){const be=Be.args&&typeof Be.args=="object"?!!Be.args.unlink:!1;me.close(Re,be)}return et},exec:function(Be){const Re=typeof Be.args=="string"?{sql:Be.args}:Be.args||Object.create(null);Re.rowMode==="stmt"?N("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):Re.sql||N("'exec' requires input SQL.");const et=tt(Be);(Re.callback||Array.isArray(Re.resultRows))&&(et._blobXfer=me.xfer);const be=Re.callback;let Ie=0;const Te=!!Re.columnNames;typeof be=="string"&&(Te||(Re.columnNames=[]),Re.callback=function(Je,Ge){me.post({type:be,columnNames:Re.columnNames,rowNumber:++Ie,row:Je},me.xfer)});try{const Je=Re.countChanges?et.changes(!0,Re.countChanges===64):void 0;et.exec(Re),Je!==void 0&&(Re.changeCount=et.changes(!0,Re.countChanges===64)-Je),Re.callback instanceof Function&&(Re.callback=be,me.post({type:be,columnNames:Re.columnNames,rowNumber:null,row:void 0}))}finally{delete et._blobXfer,Re.callback&&(Re.callback=be)}return Re},"config-get":function(){const Be=Object.create(null),Re=C.config;return["bigIntEnabled"].forEach(function(et){Object.getOwnPropertyDescriptor(Re,et)&&(Be[et]=Re[et])}),Be.version=C.version,Be.vfsList=C.capi.sqlite3_js_vfs_list(),Be},export:function(Be){const Re=tt(Be),et={byteArray:C.capi.sqlite3_js_db_export(Re.pointer),filename:Re.filename,mimetype:"application/x-sqlite3"};return me.xfer.push(et.byteArray.buffer),et},toss:function(Be){N("Testing worker exception")}};globalThis.onmessage=async function(Be){Be=Be.data;let Re,et=Be.dbId,be=Be.type;const Ie=performance.now();try{mt.hasOwnProperty(be)&&mt[be]instanceof Function?Re=await mt[be](Be):N("Unknown db worker message type:",Be.type)}catch(Te){be="error",Re={operation:Be.type,message:Te.message,errorClass:Te.name,input:Be},Te.stack&&(Re.stack=typeof Te.stack=="string"?Te.stack.split(/\n\s*/):Te.stack)}et||(et=Re.dbId||at()),me.post({type:be,dbId:et,messageId:Be.messageId,workerReceivedTime:Ie,workerRespondTime:performance.now(),departureTime:Be.departureTime,result:Re},me.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:y})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.wasm,N=y.capi,C=y.util.toss3,$=Object.create(null);y.vfs=$,N.sqlite3_vfs.prototype.registerVfs=function(fe=!1){this instanceof y.capi.sqlite3_vfs||C("Expecting a sqlite3_vfs-type argument.");const me=N.sqlite3_vfs_register(this,fe?1:0);return me&&C("sqlite3_vfs_register(",this,") failed with rc",me),this.pointer!==N.sqlite3_vfs_find(this.$zName)&&C("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},$.installVfs=function(fe){let me=0;const Qe=["io","vfs"];for(const tt of Qe){const at=fe[tt];at&&(++me,at.struct.installMethods(at.methods,!!at.applyArgcCheck),tt==="vfs"&&(!at.struct.$zName&&typeof at.name=="string"&&at.struct.addOnDispose(at.struct.$zName=S.allocCString(at.name)),at.struct.registerVfs(!!at.asDefault)))}return me||C("Misuse: installVfs() options object requires at least","one of:",Qe),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){if(!y.wasm.exports.sqlite3_declare_vtab)return;const S=y.wasm,N=y.capi,C=y.util.toss3,$=Object.create(null);y.vtab=$;const fe=N.sqlite3_index_info;fe.prototype.nthConstraint=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraint+fe.sqlite3_index_constraint.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint(mt)},fe.prototype.nthConstraintUsage=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraintUsage+fe.sqlite3_index_constraint_usage.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint_usage(mt)},fe.prototype.nthOrderBy=function(tt,at=!1){if(tt<0||tt>=this.$nOrderBy)return!1;const mt=this.$aOrderBy+fe.sqlite3_index_orderby.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_orderby(mt)};const me=function(tt,at){return function(mt,Be=!1){if(arguments.length===0&&(mt=new at),mt instanceof at)return this.set(mt.pointer,mt),mt;S.isPtr(mt)||y.SQLite3Error.toss("Invalid argument to",tt+"()");let Re=this.get(mt);return Be&&this.delete(mt),Re}.bind(new Map)},Qe=function(tt,at){const mt=me(tt,at);return Object.assign(Object.create(null),{StructType:at,create:Be=>{const Re=mt();return S.pokePtr(Be,Re.pointer),Re},get:Be=>mt(Be),unget:Be=>mt(Be,!0),dispose:Be=>{const Re=mt(Be,!0);Re&&Re.dispose()}})};$.xVtab=Qe("xVtab",N.sqlite3_vtab),$.xCursor=Qe("xCursor",N.sqlite3_vtab_cursor),$.xIndexInfo=tt=>new N.sqlite3_index_info(tt),$.xError=function tt(at,mt,Be){if(tt.errorReporter instanceof Function)try{tt.errorReporter("sqlite3_module::"+at+"(): "+mt.message)}catch{}let Re;return mt instanceof y.WasmAllocError?Re=N.SQLITE_NOMEM:arguments.length>2?Re=Be:mt instanceof y.SQLite3Error&&(Re=mt.resultCode),Re||N.SQLITE_ERROR},$.xError.errorReporter=console.error.bind(console),$.xRowid=(tt,at)=>S.poke(tt,at,"i64"),$.setupModule=function(tt){let at=!1;const mt=this instanceof N.sqlite3_module?this:tt.struct||(at=new N.sqlite3_module);try{const Be=tt.methods||C("Missing 'methods' object.");for(const Re of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const et=Re[0],be=Re[1];Be[et]===!0?Be[et]=Be[be]:Be[be]===!0&&(Be[be]=Be[et])}if(tt.catchExceptions){const Re=function(Ie,Te){return["xConnect","xCreate"].indexOf(Ie)>=0?function(Je,Ge,Oe,Ke,St,Y){try{return Te(...arguments)||0}catch(ue){return ue instanceof y.WasmAllocError||(S.dealloc(S.peekPtr(Y)),S.pokePtr(Y,S.allocCString(ue.message))),$.xError(Ie,ue)}}:function(...Je){try{return Te(...Je)||0}catch(Ge){return $.xError(Ie,Ge)}}},et=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],be=Object.create(null);for(const Ie of et){const Te=Be[Ie];if(Te instanceof Function)Ie==="xConnect"&&Be.xCreate===Te?be[Ie]=Be.xCreate:Ie==="xCreate"&&Be.xConnect===Te?be[Ie]=Be.xConnect:be[Ie]=Re(Ie,Te);else continue}mt.installMethods(be,!1)}else mt.installMethods(Be,!!tt.applyArgcCheck);if(mt.$iVersion===0){let Re;typeof tt.iVersion=="number"?Re=tt.iVersion:mt.$xShadowName?Re=3:mt.$xSavePoint||mt.$xRelease||mt.$xRollbackTo?Re=2:Re=1,mt.$iVersion=Re}}catch(Be){throw at&&at.dispose(),Be}return mt},N.sqlite3_module.prototype.setupModule=function(tt){return $.setupModule.call(this,tt)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=function N(C){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!C||typeof C!="object")&&(C=Object.create(null));const $=new URL(globalThis.location.href).searchParams;return $.has("opfs-disable")?Promise.resolve(y):(C.verbose===void 0&&(C.verbose=$.has("opfs-verbose")?+$.get("opfs-verbose")||2:1),C.sanityChecks===void 0&&(C.sanityChecks=$.has("opfs-sanity-check")),C.proxyUri===void 0&&(C.proxyUri=N.defaultProxyUri),typeof C.proxyUri=="function"&&(C.proxyUri=C.proxyUri()),new Promise(function(me,Qe){const tt=[y.config.error,y.config.warn,y.config.log],at=(je,...nt)=>{C.verbose>je&&tt[je]("OPFS syncer:",...nt)},mt=(...je)=>at(2,...je),Be=(...je)=>at(1,...je),Re=(...je)=>at(0,...je),et=y.util.toss,be=y.capi,Ie=y.util,Te=y.wasm,Je=be.sqlite3_vfs,Ge=be.sqlite3_file,Oe=be.sqlite3_io_methods,Ke=Object.create(null),St=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;Ke.metrics={dump:function(){let je,nt=0,dt=0,Nt=0;for(je in ie.opIds){const xt=Le[je];nt+=xt.count,dt+=xt.time,Nt+=xt.wait,xt.avgTime=xt.count&&xt.time?xt.time/xt.count:0,xt.avgWait=xt.count&&xt.wait?xt.wait/xt.count:0}y.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",Le,`
Total of`,nt,"op(s) for",dt,"ms (incl. "+Nt+" ms of waiting on the async side)"),y.config.log("Serialization metrics:",Le.s11n),pe.postMessage({type:"opfs-async-metrics"})},reset:function(){let je;const nt=Nt=>Nt.count=Nt.time=Nt.wait=0;for(je in ie.opIds)nt(Le[je]=Object.create(null));let dt=Le.s11n=Object.create(null);dt=dt.serialize=Object.create(null),dt.count=dt.time=0,dt=Le.s11n.deserialize=Object.create(null),dt.count=dt.time=0}};const Y=new Oe,ue=new Je().addOnDispose(()=>Y.dispose());let Ee;const st=je=>(Ee=!0,ue.dispose(),Qe(je)),ae=()=>(Ee=!1,me(y)),pe=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-C_otN2ZJ.js",import.meta.url));setTimeout(()=>{Ee===void 0&&st(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),pe._originalOnError=pe.onerror,pe.onerror=function(je){Re("Error initializing OPFS asyncer:",je),st(new Error("Loading OPFS async Worker failed for unknown reasons."))};const Q=be.sqlite3_vfs_find(null),re=Q?new Je(Q):null;Y.$iVersion=1,ue.$iVersion=2,ue.$szOsFile=be.sqlite3_file.structInfo.sizeof,ue.$mxPathname=1024,ue.$zName=Te.allocCString("opfs"),ue.$xDlOpen=ue.$xDlError=ue.$xDlSym=ue.$xDlClose=null,ue.addOnDispose("$zName",ue.$zName,"cleanup default VFS wrapper",()=>re?re.dispose():null);const ie=Object.create(null);ie.verbose=C.verbose,ie.littleEndian=(()=>{const je=new ArrayBuffer(2);return new DataView(je).setInt16(0,256,!0),new Int16Array(je)[0]===256})(),ie.asyncIdleWaitTime=150,ie.asyncS11nExceptions=1,ie.fileBufferSize=1024*64,ie.sabS11nOffset=ie.fileBufferSize,ie.sabS11nSize=ue.$mxPathname*2,ie.sabIO=new SharedArrayBuffer(ie.fileBufferSize+ie.sabS11nSize),ie.opIds=Object.create(null);const Le=Object.create(null);{let je=0;ie.opIds.whichOp=je++,ie.opIds.rc=je++,ie.opIds.xAccess=je++,ie.opIds.xClose=je++,ie.opIds.xDelete=je++,ie.opIds.xDeleteNoWait=je++,ie.opIds.xFileSize=je++,ie.opIds.xLock=je++,ie.opIds.xOpen=je++,ie.opIds.xRead=je++,ie.opIds.xSleep=je++,ie.opIds.xSync=je++,ie.opIds.xTruncate=je++,ie.opIds.xUnlock=je++,ie.opIds.xWrite=je++,ie.opIds.mkdir=je++,ie.opIds["opfs-async-metrics"]=je++,ie.opIds["opfs-async-shutdown"]=je++,ie.opIds.retry=je++,ie.sabOP=new SharedArrayBuffer(je*4),Ke.metrics.reset()}ie.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(je=>{(ie.sq3Codes[je]=be[je])===void 0&&et("Maintenance required: not found:",je)}),ie.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const it=(je,...nt)=>{const dt=ie.opIds[je]||et("Invalid op ID:",je);ie.s11n.serialize(...nt),Atomics.store(ie.sabOPView,ie.opIds.rc,-1),Atomics.store(ie.sabOPView,ie.opIds.whichOp,dt),Atomics.notify(ie.sabOPView,ie.opIds.whichOp);const Nt=performance.now();for(;Atomics.wait(ie.sabOPView,ie.opIds.rc,-1)!=="not-equal";);const xt=Atomics.load(ie.sabOPView,ie.opIds.rc);if(Le[je].wait+=performance.now()-Nt,xt&&ie.asyncS11nExceptions){const $t=ie.s11n.deserialize();$t&&Re(je+"() async error:",...$t)}return xt};Ke.debug={asyncShutdown:()=>{Be("Shutting down OPFS async listener. The OPFS VFS will no longer work."),it("opfs-async-shutdown")},asyncRestart:()=>{Be("Attempting to restart OPFS VFS async listener. Might work, might not."),pe.postMessage({type:"opfs-async-restart"})}};const qt=()=>{if(ie.s11n)return ie.s11n;const je=new TextDecoder,nt=new TextEncoder("utf-8"),dt=new Uint8Array(ie.sabIO,ie.sabS11nOffset,ie.sabS11nSize),Nt=new DataView(ie.sabIO,ie.sabS11nOffset,ie.sabS11nSize);ie.s11n=Object.create(null);const xt=Object.create(null);xt.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},xt.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},xt.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},xt.string={id:4};const $t=Rt=>xt[typeof Rt]||et("Maintenance required: this value type cannot be serialized.",Rt),mn=Rt=>{switch(Rt){case xt.number.id:return xt.number;case xt.bigint.id:return xt.bigint;case xt.boolean.id:return xt.boolean;case xt.string.id:return xt.string;default:et("Invalid type ID:",Rt)}};return ie.s11n.deserialize=function(Rt=!1){++Le.s11n.deserialize.count;const Or=performance.now(),We=dt[0],vt=We?[]:null;if(We){const _t=[];let kt=1,vn,Qn,Bn;for(vn=0;vn<We;++vn,++kt)_t.push(mn(dt[kt]));for(vn=0;vn<We;++vn){const Vn=_t[vn];Vn.getter?(Bn=Nt[Vn.getter](kt,ie.littleEndian),kt+=Vn.size):(Qn=Nt.getInt32(kt,ie.littleEndian),kt+=4,Bn=je.decode(dt.slice(kt,kt+Qn)),kt+=Qn),vt.push(Bn)}}return Rt&&(dt[0]=0),Le.s11n.deserialize.time+=performance.now()-Or,vt},ie.s11n.serialize=function(...Rt){const Or=performance.now();if(++Le.s11n.serialize.count,Rt.length){const We=[];let vt=0,_t=1;for(dt[0]=Rt.length&255;vt<Rt.length;++vt,++_t)We.push($t(Rt[vt])),dt[_t]=We[vt].id;for(vt=0;vt<Rt.length;++vt){const kt=We[vt];if(kt.setter)Nt[kt.setter](_t,Rt[vt],ie.littleEndian),_t+=kt.size;else{const vn=nt.encode(Rt[vt]);Nt.setInt32(_t,vn.byteLength,ie.littleEndian),_t+=4,dt.set(vn,_t),_t+=vn.byteLength}}}else dt[0]=0;Le.s11n.serialize.time+=performance.now()-Or},ie.s11n},Bt=function je(nt=16){je._chars||(je._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",je._n=je._chars.length);const dt=[];let Nt=0;for(;Nt<nt;++Nt){const xt=Math.random()*(je._n*64)%je._n|0;dt[Nt]=je._chars[xt]}return dt.join("")},Jt=Object.create(null),lt=Object.create(null);lt.op=void 0,lt.start=void 0;const we=je=>{lt.start=performance.now(),lt.op=je,++Le[je].count},Pe=()=>Le[lt.op].time+=performance.now()-lt.start,ot={xCheckReservedLock:function(je,nt){return Te.poke(nt,0,"i32"),0},xClose:function(je){we("xClose");let nt=0;const dt=Jt[je];return dt&&(delete Jt[je],nt=it("xClose",je),dt.sq3File&&dt.sq3File.dispose()),Pe(),nt},xDeviceCharacteristics:function(je){return be.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(je,nt,dt){return be.SQLITE_NOTFOUND},xFileSize:function(je,nt){we("xFileSize");let dt=it("xFileSize",je);if(dt==0)try{const Nt=ie.s11n.deserialize()[0];Te.poke(nt,Nt,"i64")}catch(Nt){Re("Unexpected error reading xFileSize() result:",Nt),dt=ie.sq3Codes.SQLITE_IOERR}return Pe(),dt},xLock:function(je,nt){we("xLock");const dt=Jt[je];let Nt=0;return dt.lockType?dt.lockType=nt:(Nt=it("xLock",je,nt),Nt===0&&(dt.lockType=nt)),Pe(),Nt},xRead:function(je,nt,dt,Nt){we("xRead");const xt=Jt[je];let $t;try{$t=it("xRead",je,dt,Number(Nt)),($t===0||be.SQLITE_IOERR_SHORT_READ===$t)&&Te.heap8u().set(xt.sabView.subarray(0,dt),nt)}catch(mn){Re("xRead(",arguments,") failed:",mn,xt),$t=be.SQLITE_IOERR_READ}return Pe(),$t},xSync:function(je,nt){we("xSync"),++Le.xSync.count;const dt=it("xSync",je,nt);return Pe(),dt},xTruncate:function(je,nt){we("xTruncate");const dt=it("xTruncate",je,Number(nt));return Pe(),dt},xUnlock:function(je,nt){we("xUnlock");const dt=Jt[je];let Nt=0;return be.SQLITE_LOCK_NONE===nt&&dt.lockType&&(Nt=it("xUnlock",je,nt)),Nt===0&&(dt.lockType=nt),Pe(),Nt},xWrite:function(je,nt,dt,Nt){we("xWrite");const xt=Jt[je];let $t;try{xt.sabView.set(Te.heap8u().subarray(nt,nt+dt)),$t=it("xWrite",je,dt,Number(Nt))}catch(mn){Re("xWrite(",arguments,") failed:",mn,xt),$t=be.SQLITE_IOERR_WRITE}return Pe(),$t}},pt={xAccess:function(je,nt,dt,Nt){we("xAccess");const xt=it("xAccess",Te.cstrToJs(nt));return Te.poke(Nt,xt?0:1,"i32"),Pe(),0},xCurrentTime:function(je,nt){return Te.poke(nt,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(je,nt){return Te.poke(nt,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(je,nt,dt){we("xDelete");const Nt=it("xDelete",Te.cstrToJs(nt),dt,!1);return Pe(),Nt},xFullPathname:function(je,nt,dt,Nt){return Te.cstrncpy(Nt,nt,dt)<dt?0:be.SQLITE_CANTOPEN},xGetLastError:function(je,nt,dt){return Be("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(nt,dt,Nt,xt,$t){we("xOpen");let mn=0;dt===0?dt=Bt():Te.isPtr(dt)&&(be.sqlite3_uri_boolean(dt,"opfs-unlock-asap",0)&&(mn|=ie.opfsFlags.OPFS_UNLOCK_ASAP),be.sqlite3_uri_boolean(dt,"delete-before-open",0)&&(mn|=ie.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),dt=Te.cstrToJs(dt));const Rt=Object.create(null);Rt.fid=Nt,Rt.filename=dt,Rt.sab=new SharedArrayBuffer(ie.fileBufferSize),Rt.flags=xt,Rt.readOnly=!(y.SQLITE_OPEN_CREATE&xt)&&!!(xt&be.SQLITE_OPEN_READONLY);const Or=it("xOpen",Nt,dt,xt,mn);return Or||(Rt.readOnly&&Te.poke($t,be.SQLITE_OPEN_READONLY,"i32"),Jt[Nt]=Rt,Rt.sabView=ie.sabFileBufView,Rt.sq3File=new Ge(Nt),Rt.sq3File.$pMethods=Y.pointer,Rt.lockType=be.SQLITE_LOCK_NONE),Pe(),Or}};re&&(ue.$xRandomness=re.$xRandomness,ue.$xSleep=re.$xSleep),ue.$xRandomness||(pt.xRandomness=function(je,nt,dt){const Nt=Te.heap8u();let xt=0;for(;xt<nt;++xt)Nt[dt+xt]=Math.random()*255e3&255;return xt}),ue.$xSleep||(pt.xSleep=function(je,nt){return Atomics.wait(ie.sabOPView,ie.opIds.xSleep,0,nt),0}),Ke.getResolvedPath=function(je,nt){const dt=new URL(je,"file://irrelevant").pathname;return nt?dt.split("/").filter(Nt=>!!Nt):dt},Ke.getDirForFilename=async function(nt,dt=!1){const Nt=Ke.getResolvedPath(nt,!0),xt=Nt.pop();let $t=Ke.rootDirectory;for(const mn of Nt)mn&&($t=await $t.getDirectoryHandle(mn,{create:!!dt}));return[$t,xt]},Ke.mkdir=async function(je){try{return await Ke.getDirForFilename(je+"/filepart",!0),!0}catch{return!1}},Ke.entryExists=async function(je){try{const[nt,dt]=await Ke.getDirForFilename(je);return await nt.getFileHandle(dt),!0}catch{return!1}},Ke.randomFilename=Bt,Ke.treeList=async function(){const je=async function dt(Nt,xt){xt.name=Nt.name,xt.dirs=[],xt.files=[];for await(const $t of Nt.values())if($t.kind==="directory"){const mn=Object.create(null);xt.dirs.push(mn),await dt($t,mn)}else xt.files.push($t.name)},nt=Object.create(null);return await je(Ke.rootDirectory,nt),nt},Ke.rmfr=async function(){const je=Ke.rootDirectory,nt={recurse:!0};for await(const dt of je.values())je.removeEntry(dt.name,nt)},Ke.unlink=async function(je,nt=!1,dt=!1){try{const[Nt,xt]=await Ke.getDirForFilename(je,!1);return await Nt.removeEntry(xt,{recursive:nt}),!0}catch(Nt){if(dt)throw new Error("unlink(",arguments[0],") failed: "+Nt.message,{cause:Nt});return!1}},Ke.traverse=async function(je){const nt={recursive:!0,directory:Ke.rootDirectory};typeof je=="function"&&(je={callback:je}),je=Object.assign(nt,je||{}),async function Nt(xt,$t){for await(const mn of xt.values()){if(je.callback(mn,xt,$t)===!1)return!1;if(je.recursive&&mn.kind==="directory"&&await Nt(mn,$t+1)===!1)break}}(je.directory,0)};const Ft=async function(je,nt){const[dt,Nt]=await Ke.getDirForFilename(je,!0);let $t=await (await dt.getFileHandle(Nt,{create:!0})).createSyncAccessHandle(),mn=0,Rt,Or=!1;try{for($t.truncate(0);(Rt=await nt())!==void 0;)Rt instanceof ArrayBuffer&&(Rt=new Uint8Array(Rt)),mn===0&&Rt.byteLength>=15&&(Ie.affirmDbHeader(Rt),Or=!0),$t.write(Rt,{at:mn}),mn+=Rt.byteLength;if((mn<512||mn%512!==0)&&et("Input size",mn,"is not correct for an SQLite database."),!Or){const We=new Uint8Array(20);$t.read(We,{at:0}),Ie.affirmDbHeader(We)}return $t.write(new Uint8Array([1,1]),{at:18}),mn}catch(We){throw await $t.close(),$t=void 0,await dt.removeEntry(Nt).catch(()=>{}),We}finally{$t&&await $t.close()}};if(Ke.importDb=async function(je,nt){if(nt instanceof Function)return Ft(je,nt);nt instanceof ArrayBuffer&&(nt=new Uint8Array(nt)),Ie.affirmIsDb(nt);const dt=nt.byteLength,[Nt,xt]=await Ke.getDirForFilename(je,!0);let $t,mn=0;try{return $t=await (await Nt.getFileHandle(xt,{create:!0})).createSyncAccessHandle(),$t.truncate(0),mn=$t.write(nt,{at:0}),mn!=dt&&et("Expected to write "+dt+" bytes but wrote "+mn+"."),$t.write(new Uint8Array([1,1]),{at:18}),mn}catch(Rt){throw $t&&(await $t.close(),$t=void 0),await Nt.removeEntry(xt).catch(()=>{}),Rt}finally{$t&&await $t.close()}},y.oo1){const je=function(...nt){const dt=y.oo1.DB.dbCtorHelper.normalizeArgs(...nt);dt.vfs=ue.$zName,y.oo1.DB.dbCtorHelper.call(this,dt)};je.prototype=Object.create(y.oo1.DB.prototype),y.oo1.OpfsDb=je,je.importDb=Ke.importDb,y.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(ue.pointer,function(nt,dt){dt.capi.sqlite3_busy_timeout(nt,1e4)})}const Yt=function(){const je=Te.scopedAllocPush(),nt=new Ge;try{const dt=nt.pointer,Nt=be.SQLITE_OPEN_CREATE|be.SQLITE_OPEN_READWRITE|be.SQLITE_OPEN_MAIN_DB,xt=Te.scopedAlloc(8),$t="/sanity/check/file"+Bt(8),mn=Te.scopedAllocCString($t);let Rt;if(ie.s11n.serialize("This is \xe4 string."),Rt=ie.s11n.deserialize(),mt("deserialize() says:",Rt),Rt[0]!=="This is \xe4 string."&&et("String d13n error."),pt.xAccess(ue.pointer,mn,0,xt),Rt=Te.peek(xt,"i32"),mt("xAccess(",$t,") exists ?=",Rt),Rt=pt.xOpen(ue.pointer,mn,dt,Nt,xt),mt("open rc =",Rt,"state.sabOPView[xOpen] =",ie.sabOPView[ie.opIds.xOpen]),Rt!==0){Re("open failed with code",Rt);return}pt.xAccess(ue.pointer,mn,0,xt),Rt=Te.peek(xt,"i32"),Rt||et("xAccess() failed to detect file."),Rt=ot.xSync(nt.pointer,0),Rt&&et("sync failed w/ rc",Rt),Rt=ot.xTruncate(nt.pointer,1024),Rt&&et("truncate failed w/ rc",Rt),Te.poke(xt,0,"i64"),Rt=ot.xFileSize(nt.pointer,xt),Rt&&et("xFileSize failed w/ rc",Rt),mt("xFileSize says:",Te.peek(xt,"i64")),Rt=ot.xWrite(nt.pointer,mn,10,1),Rt&&et("xWrite() failed!");const Or=Te.scopedAlloc(16);Rt=ot.xRead(nt.pointer,Or,6,2),Te.poke(Or+6,0);let We=Te.cstrToJs(Or);mt("xRead() got:",We),We!=="sanity"&&et("Unexpected xRead() value."),pt.xSleep&&(mt("xSleep()ing before close()ing..."),pt.xSleep(ue.pointer,2e3),mt("waking up from xSleep()")),Rt=ot.xClose(dt),mt("xClose rc =",Rt,"sabOPView =",ie.sabOPView),mt("Deleting file:",$t),pt.xDelete(ue.pointer,mn,4660),pt.xAccess(ue.pointer,mn,0,xt),Rt=Te.peek(xt,"i32"),Rt&&et("Expecting 0 from xAccess(",$t,") after xDelete()."),Be("End of OPFS sanity checks.")}finally{nt.dispose(),Te.scopedAllocPop(je)}};pe.onmessage=function({data:je}){switch(je.type){case"opfs-unavailable":st(new Error(je.payload.join(" ")));break;case"opfs-async-loaded":pe.postMessage({type:"opfs-async-init",args:ie});break;case"opfs-async-inited":{if(Ee===!0)break;try{y.vfs.installVfs({io:{struct:Y,methods:ot},vfs:{struct:ue,methods:pt}}),ie.sabOPView=new Int32Array(ie.sabOP),ie.sabFileBufView=new Uint8Array(ie.sabIO,0,ie.fileBufferSize),ie.sabS11nView=new Uint8Array(ie.sabIO,ie.sabS11nOffset,ie.sabS11nSize),qt(),C.sanityChecks&&(Be("Running sanity checks because of opfs-sanity-check URL arg..."),Yt()),St()?navigator.storage.getDirectory().then(nt=>{pe.onerror=pe._originalOnError,delete pe._originalOnError,y.opfs=Ke,Ke.rootDirectory=nt,mt("End of OPFS sqlite3_vfs setup.",ue),ae()}).catch(st):ae()}catch(nt){Re(nt),st(nt)}break}default:{const nt="Unexpected message from the OPFS async worker: "+JSON.stringify(je);Re(nt),st(new Error(nt));break}}}}))};S.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async N=>{try{let C=S.defaultProxyUri;return N.scriptInfo.sqlite3Dir&&(S.defaultProxyUri=N.scriptInfo.sqlite3Dir+C),S().catch($=>{N.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",$.message)})}catch(C){return N.config.error("installOpfsVfs() exception:",C),Promise.reject(C)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.util.toss,N=y.util.toss3,C=Object.create(null),$=y.capi,fe=y.util,me=y.wasm,Qe=4096,tt=512,at=4,mt=8,Be=tt+at,Re=tt,et=Be,be=Qe,Ie=$.SQLITE_OPEN_MAIN_DB|$.SQLITE_OPEN_MAIN_JOURNAL|$.SQLITE_OPEN_SUPER_JOURNAL|$.SQLITE_OPEN_WAL,Te=".opaque",Je=()=>Math.random().toString(36).slice(2),Ge=new TextDecoder,Oe=new TextEncoder,Ke=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),St=[y.config.error,y.config.warn,y.config.log];y.config.log;const Y=y.config.warn;y.config.error;const ue=new Map,Ee=lt=>ue.get(lt),st=(lt,we)=>{we?ue.set(lt,we):ue.delete(lt)},ae=new Map,pe=lt=>ae.get(lt),Q=(lt,we)=>{we?ae.set(lt,we):ae.delete(lt)},re={xCheckReservedLock:function(lt,we){const Pe=pe(lt);return Pe.log("xCheckReservedLock"),Pe.storeErr(),me.poke32(we,1),0},xClose:function(lt){const we=pe(lt);we.storeErr();const Pe=we.getOFileForS3File(lt);if(Pe)try{we.log(`xClose ${Pe.path}`),we.mapS3FileToOFile(lt,!1),Pe.sah.flush(),Pe.flags&$.SQLITE_OPEN_DELETEONCLOSE&&we.deletePath(Pe.path)}catch(ot){return we.storeErr(ot,$.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(lt){return $.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(lt,we,Pe){return $.SQLITE_NOTFOUND},xFileSize:function(lt,we){const Pe=pe(lt);Pe.log("xFileSize");const pt=Pe.getOFileForS3File(lt).sah.getSize()-be;return me.poke64(we,BigInt(pt)),0},xLock:function(lt,we){const Pe=pe(lt);Pe.log(`xLock ${we}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);return ot.lockType=we,0},xRead:function(lt,we,Pe,ot){const pt=pe(lt);pt.storeErr();const Ft=pt.getOFileForS3File(lt);pt.log(`xRead ${Ft.path} ${Pe} @ ${ot}`);try{const Yt=Ft.sah.read(me.heap8u().subarray(we,we+Pe),{at:be+Number(ot)});return Yt<Pe?(me.heap8u().fill(0,we+Yt,we+Pe),$.SQLITE_IOERR_SHORT_READ):0}catch(Yt){return pt.storeErr(Yt,$.SQLITE_IOERR)}},xSectorSize:function(lt){return Qe},xSync:function(lt,we){const Pe=pe(lt);Pe.log(`xSync ${we}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.flush(),0}catch(pt){return Pe.storeErr(pt,$.SQLITE_IOERR)}},xTruncate:function(lt,we){const Pe=pe(lt);Pe.log(`xTruncate ${we}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.truncate(be+Number(we)),0}catch(pt){return Pe.storeErr(pt,$.SQLITE_IOERR)}},xUnlock:function(lt,we){const Pe=pe(lt);Pe.log("xUnlock");const ot=Pe.getOFileForS3File(lt);return ot.lockType=we,0},xWrite:function(lt,we,Pe,ot){const pt=pe(lt);pt.storeErr();const Ft=pt.getOFileForS3File(lt);pt.log(`xWrite ${Ft.path} ${Pe} ${ot}`);try{const Yt=Ft.sah.write(me.heap8u().subarray(we,we+Pe),{at:be+Number(ot)});return Pe===Yt?0:S("Unknown write() failure.")}catch(Yt){return pt.storeErr(Yt,$.SQLITE_IOERR)}}},ie=new $.sqlite3_io_methods;ie.$iVersion=1,y.vfs.installVfs({io:{struct:ie,methods:re}});const Le={xAccess:function(lt,we,Pe,ot){const pt=Ee(lt);pt.storeErr();try{const Ft=pt.getPath(we);me.poke32(ot,pt.hasFilename(Ft)?1:0)}catch{me.poke32(ot,0)}return 0},xCurrentTime:function(lt,we){return me.poke(we,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(lt,we){return me.poke(we,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(lt,we,Pe){const ot=Ee(lt);ot.log(`xDelete ${me.cstrToJs(we)}`),ot.storeErr();try{return ot.deletePath(ot.getPath(we)),0}catch(pt){return ot.storeErr(pt),$.SQLITE_IOERR_DELETE}},xFullPathname:function(lt,we,Pe,ot){return me.cstrncpy(ot,we,Pe)<Pe?0:$.SQLITE_CANTOPEN},xGetLastError:function(lt,we,Pe){const ot=Ee(lt),pt=ot.popErr();if(ot.log(`xGetLastError ${we} e =`,pt),pt){const Ft=me.scopedAllocPush();try{const[Yt,je]=me.scopedAllocCString(pt.message,!0);me.cstrncpy(Pe,Yt,we),je>we&&me.poke8(Pe+we-1,0)}catch{return $.SQLITE_NOMEM}finally{me.scopedAllocPop(Ft)}}return pt?pt.sqlite3Rc||$.SQLITE_IOERR:0},xOpen:function(we,Pe,ot,pt,Ft){const Yt=Ee(we);try{Yt.log(`xOpen ${me.cstrToJs(Pe)} ${pt}`);const je=Pe&&me.peek8(Pe)?Yt.getPath(Pe):Je();let nt=Yt.getSAHForPath(je);!nt&&pt&$.SQLITE_OPEN_CREATE&&(Yt.getFileCount()<Yt.getCapacity()?(nt=Yt.nextAvailableSAH(),Yt.setAssociatedPath(nt,je,pt)):S("SAH pool is full. Cannot create file",je)),nt||S("file not found:",je);const dt={path:je,flags:pt,sah:nt};Yt.mapS3FileToOFile(ot,dt),dt.lockType=$.SQLITE_LOCK_NONE;const Nt=new $.sqlite3_file(ot);return Nt.$pMethods=ie.pointer,Nt.dispose(),me.poke32(Ft,pt),0}catch(je){return Yt.storeErr(je),$.SQLITE_CANTOPEN}}},it=function(lt){y.capi.sqlite3_vfs_find(lt)&&N("VFS name is already registered:",lt);const we=new $.sqlite3_vfs,Pe=$.sqlite3_vfs_find(null),ot=Pe?new $.sqlite3_vfs(Pe):null;return we.$iVersion=2,we.$szOsFile=$.sqlite3_file.structInfo.sizeof,we.$mxPathname=tt,we.addOnDispose(we.$zName=me.allocCString(lt),()=>st(we.pointer,0)),ot&&(we.$xRandomness=ot.$xRandomness,we.$xSleep=ot.$xSleep,ot.dispose()),!we.$xRandomness&&!Le.xRandomness&&(Le.xRandomness=function(pt,Ft,Yt){const je=me.heap8u();let nt=0;for(;nt<Ft;++nt)je[Yt+nt]=Math.random()*255e3&255;return nt}),!we.$xSleep&&!Le.xSleep&&(Le.xSleep=(pt,Ft)=>0),y.vfs.installVfs({vfs:{struct:we,methods:Le}}),we};class qt{vfsDir;#e;#t;#n;#r=new Map;#i=new Map;#s=new Set;#o=new Map;#a=new Uint8Array(Be);#u;#l;#c;constructor(we=Object.create(null)){this.#c=we.verbosity??Ke.verbosity,this.vfsName=we.name||Ke.name,this.#l=it(this.vfsName),st(this.#l.pointer,this),this.vfsDir=we.directory||"."+this.vfsName,this.#u=new DataView(this.#a.buffer,this.#a.byteOffset),this.isReady=this.reset(!!(we.clearOnInit??Ke.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(we.initialCapacity||Ke.initialCapacity)})}#d(we,...Pe){this.#c>we&&St[we](this.vfsName+":",...Pe)}log(...we){this.#d(2,...we)}warn(...we){this.#d(1,...we)}error(...we){this.#d(0,...we)}getVfs(){return this.#l}getCapacity(){return this.#r.size}getFileCount(){return this.#i.size}getFileNames(){const we=[],Pe=this.#i.keys();for(const ot of Pe)we.push(ot);return we}async addCapacity(we){for(let Pe=0;Pe<we;++Pe){const ot=Je(),Ft=await (await this.#t.getFileHandle(ot,{create:!0})).createSyncAccessHandle();this.#r.set(Ft,ot),this.setAssociatedPath(Ft,"",0)}return this.getCapacity()}async reduceCapacity(we){let Pe=0;for(const ot of Array.from(this.#s)){if(Pe===we||this.getFileCount()===this.getCapacity())break;const pt=this.#r.get(ot);ot.close(),await this.#t.removeEntry(pt),this.#r.delete(ot),this.#s.delete(ot),++Pe}return Pe}releaseAccessHandles(){for(const we of this.#r.keys())we.close();this.#r.clear(),this.#i.clear(),this.#s.clear()}async acquireAccessHandles(we){const Pe=[];for await(const[ot,pt]of this.#t)pt.kind==="file"&&Pe.push([ot,pt]);return Promise.all(Pe.map(async([ot,pt])=>{try{const Ft=await pt.createSyncAccessHandle();if(this.#r.set(Ft,ot),we)Ft.truncate(be),this.setAssociatedPath(Ft,"",0);else{const Yt=this.getAssociatedPath(Ft);Yt?this.#i.set(Yt,Ft):this.#s.add(Ft)}}catch(Ft){throw this.storeErr(Ft),this.releaseAccessHandles(),Ft}}))}getAssociatedPath(we){we.read(this.#a,{at:0});const Pe=this.#u.getUint32(Re);if(this.#a[0]&&(Pe&$.SQLITE_OPEN_DELETEONCLOSE||!(Pe&Ie)))return Y(`Removing file with unexpected flags ${Pe.toString(16)}`,this.#a),this.setAssociatedPath(we,"",0),"";const ot=new Uint32Array(mt/4);we.read(ot,{at:et});const pt=this.computeDigest(this.#a);if(ot.every((Ft,Yt)=>Ft===pt[Yt])){const Ft=this.#a.findIndex(Yt=>Yt===0);return Ft===0&&we.truncate(be),Ft?Ge.decode(this.#a.subarray(0,Ft)):""}else return Y("Disassociating file with bad digest."),this.setAssociatedPath(we,"",0),""}setAssociatedPath(we,Pe,ot){const pt=Oe.encodeInto(Pe,this.#a);tt<=pt.written+1&&S("Path too long:",Pe),this.#a.fill(0,pt.written,tt),this.#u.setUint32(Re,ot);const Ft=this.computeDigest(this.#a);we.write(this.#a,{at:0}),we.write(Ft,{at:et}),we.flush(),Pe?(this.#i.set(Pe,we),this.#s.delete(we)):(we.truncate(be),this.#s.add(we))}computeDigest(we){let Pe=0xdeadbeef,ot=0x41c6ce57;for(const pt of we)Pe=31*Pe+pt*307,ot=31*ot+pt*307;return new Uint32Array([Pe>>>0,ot>>>0])}async reset(we){await this.isReady;let Pe=await navigator.storage.getDirectory(),ot;for(const pt of this.vfsDir.split("/"))pt&&(ot=Pe,Pe=await Pe.getDirectoryHandle(pt,{create:!0}));return this.#e=Pe,this.#n=ot,this.#t=await this.#e.getDirectoryHandle(Te,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(we)}getPath(we){return me.isPtr(we)&&(we=me.cstrToJs(we)),(we instanceof URL?we:new URL(we,"file://localhost/")).pathname}deletePath(we){const Pe=this.#i.get(we);return Pe&&(this.#i.delete(we),this.setAssociatedPath(Pe,"",0)),!!Pe}storeErr(we,Pe){return we&&(we.sqlite3Rc=Pe||$.SQLITE_IOERR,this.error(we)),this.$error=we,Pe}popErr(){const we=this.$error;return this.$error=void 0,we}nextAvailableSAH(){const[we]=this.#s.keys();return we}getOFileForS3File(we){return this.#o.get(we)}mapS3FileToOFile(we,Pe){Pe?(this.#o.set(we,Pe),Q(we,this)):(this.#o.delete(we),Q(we,!1))}hasFilename(we){return this.#i.has(we)}getSAHForPath(we){return this.#i.get(we)}async removeVfs(){if(!this.#l.pointer||!this.#t)return!1;$.sqlite3_vfs_unregister(this.#l.pointer),this.#l.dispose(),delete C[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(Te,{recursive:!0}),this.#t=void 0,await this.#n.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#n=void 0}catch(we){y.config.error(this.vfsName,"removeVfs() failed:",we)}return!0}exportFile(we){const Pe=this.#i.get(we)||S("File not found:",we),ot=Pe.getSize()-be,pt=new Uint8Array(ot>0?ot:0);if(ot>0){const Ft=Pe.read(pt,{at:be});Ft!=ot&&S("Expected to read "+ot+" bytes but read "+Ft+".")}return pt}async importDbChunked(we,Pe){const ot=this.#i.get(we)||this.nextAvailableSAH()||S("No available handles to import to.");ot.truncate(0);let pt=0,Ft,Yt=!1;try{for(;(Ft=await Pe())!==void 0;)Ft instanceof ArrayBuffer&&(Ft=new Uint8Array(Ft)),pt===0&&Ft.byteLength>=15&&(fe.affirmDbHeader(Ft),Yt=!0),ot.write(Ft,{at:be+pt}),pt+=Ft.byteLength;if((pt<512||pt%512!==0)&&S("Input size",pt,"is not correct for an SQLite database."),!Yt){const je=new Uint8Array(20);ot.read(je,{at:0}),fe.affirmDbHeader(je)}ot.write(new Uint8Array([1,1]),{at:be+18})}catch(je){throw this.setAssociatedPath(ot,"",0),je}return this.setAssociatedPath(ot,we,$.SQLITE_OPEN_MAIN_DB),pt}importDb(we,Pe){if(Pe instanceof ArrayBuffer)Pe=new Uint8Array(Pe);else if(Pe instanceof Function)return this.importDbChunked(we,Pe);const ot=this.#i.get(we)||this.nextAvailableSAH()||S("No available handles to import to."),pt=Pe.byteLength;(pt<512||pt%512!=0)&&S("Byte array size is invalid for an SQLite db.");const Ft="SQLite format 3";for(let je=0;je<Ft.length;++je)Ft.charCodeAt(je)!==Pe[je]&&S("Input does not contain an SQLite database header.");const Yt=ot.write(Pe,{at:be});return Yt!=pt?(this.setAssociatedPath(ot,"",0),S("Expected to write "+pt+" bytes but wrote "+Yt+".")):(ot.write(new Uint8Array([1,1]),{at:be+18}),this.setAssociatedPath(ot,we,$.SQLITE_OPEN_MAIN_DB)),Yt}}class Bt{#e;constructor(we){this.#e=we,this.vfsName=we.vfsName}async addCapacity(we){return this.#e.addCapacity(we)}async reduceCapacity(we){return this.#e.reduceCapacity(we)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(we){const Pe=this.#e.getCapacity();return Pe<we?this.#e.addCapacity(we-Pe):Pe}exportFile(we){return this.#e.exportFile(we)}importDb(we,Pe){return this.#e.importDb(we,Pe)}async wipeFiles(){return this.#e.reset(!0)}unlink(we){return this.#e.deletePath(we)}async removeVfs(){return this.#e.removeVfs()}}const Jt=async()=>{const lt=await navigator.storage.getDirectory(),we=".opfs-sahpool-sync-check-"+Je(),pt=(await (await lt.getFileHandle(we,{create:!0})).createSyncAccessHandle()).close();return await pt,await lt.removeEntry(we),pt?.then&&S("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};y.installOpfsSAHPoolVfs=async function(lt=Object.create(null)){lt=Object.assign(Object.create(null),Ke,lt||{});const we=lt.name;if(lt.$testThrowPhase1)throw lt.$testThrowPhase1;if(C[we])try{return await C[we]}catch(Pe){if(lt.forceReinitIfPreviouslyFailed)delete C[we];else throw Pe}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?C[we]=Promise.reject(new Error("Missing required OPFS APIs.")):C[we]=Jt().then(async function(){if(lt.$testThrowPhase2)throw lt.$testThrowPhase2;const Pe=new qt(lt);return Pe.isReady.then(async()=>{const ot=new Bt(Pe);if(y.oo1){const pt=y.oo1,Ft=Pe.getVfs(),Yt=function(...je){const nt=pt.DB.dbCtorHelper.normalizeArgs(...je);nt.vfs=Ft.$zName,pt.DB.dbCtorHelper.call(this,nt)};Yt.prototype=Object.create(pt.DB.prototype),ot.OpfsSAHPoolDb=Yt}return Pe.log("VFS initialized."),ot}).catch(async ot=>{throw await Pe.removeVfs().catch(()=>{}),ot})}).catch(Pe=>C[we]=Promise.reject(Pe))}}),typeof g<"u"){const y=Object.assign(Object.create(null),{exports:typeof he>"u"?g.asm:he,memory:g.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=y;let S;try{S=globalThis.sqlite3ApiBootstrap()}catch(N){throw console.error("sqlite3ApiBootstrap() error:",N),N}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}g.sqlite3=S}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),n=o,n}})();const eK=function(){const t=mN;if(!t)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...n)=>console.warn("sqlite3.debugModule:",...n):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const n=e.moduleScript.src.split("/");n.pop(),e.sqlite3Dir=n.join("/")+"/"}if(globalThis.sqlite3InitModule=function n(...r){return t(...r).then(i=>{const s=i.sqlite3;s.scriptInfo=e,n.__isUnderTest&&(s.__isUnderTest=!0);const o=s.asyncPostInit;return delete s.asyncPostInit,o()}).catch(i=>{throw console.error("Exception loading sqlite3 module:",i),i})},globalThis.sqlite3InitModule.ready=t.ready,globalThis.sqlite3InitModuleState.moduleScript){const n=globalThis.sqlite3InitModuleState;let r=n.moduleScript.src.split("/");r.pop(),n.scriptDir=r.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();mN=eK;const tK=mN;globalThis.sqlite3Worker1Promiser=function t(e=t.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const h=e;e=Object.assign(Object.create(null),t.defaultConfig),e.onready=h}else e=Object.assign(Object.create(null),t.defaultConfig,e);const n=Object.create(null),r=function(){},i=e.onerror||r,s=e.debug||r,o=e.generateMessageId?void 0:Object.create(null),l=e.generateMessageId||function(h){return h.type+"#"+(o[h.type]=(o[h.type]||0)+1)},c=(...h)=>{throw new Error(h.join(" "))};e.worker||(e.worker=t.defaultConfig.worker),typeof e.worker=="function"&&(e.worker=e.worker());let d,p;return e.worker.onmessage=function(h){h=h.data,s("worker1.onmessage",h);let b=n[h.messageId];if(!b){if(h&&h.type==="sqlite3-api"&&h.result==="worker1-ready"){e.onready&&e.onready(p);return}if(b=n[h.type],b&&b.onrow){b.onrow(h);return}e.onunhandled?e.onunhandled(arguments[0]):i("sqlite3Worker1Promiser() unhandled worker message:",h);return}switch(delete n[h.messageId],h.type){case"error":b.reject(h);return;case"open":d||(d=h.dbId);break;case"close":h.dbId===d&&(d=void 0);break}try{b.resolve(h)}catch(x){b.reject(x)}},p=function(){let h;arguments.length===1?h=arguments[0]:arguments.length===2?(h=Object.create(null),h.type=arguments[0],h.args=arguments[1],h.dbId=h.args.dbId):c("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!h.dbId&&h.type!=="open"&&(h.dbId=d),h.messageId=l(h),h.departureTime=performance.now();const b=Object.create(null);b.message=h;let x;h.type==="exec"&&h.args&&(typeof h.args.callback=="function"?(x=h.messageId+":row",b.onrow=h.args.callback,h.args.callback=x,n[x]=b):typeof h.args.callback=="string"&&c("exec callback may not be a string when using the Promise interface."));let w=new Promise(function(E,I){b.resolve=E,b.reject=I,n[h.messageId]=b,s("Posting",h.type,"message to Worker dbId="+(d||"default")+":",h),e.worker.postMessage(h)});return x&&(w=w.finally(()=>delete n[x])),w}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-BF9rosUC.js",import.meta.url),{type:"module"})},onerror:(...t)=>console.error("worker1 promiser error",...t)};sqlite3Worker1Promiser.v2=function(t){let e;typeof t=="function"?(e=t,t={}):typeof t?.onready=="function"&&(e=t.onready,delete t.onready);const n=Object.create(null);t=Object.assign(t||Object.create(null),{onready:async function(i){try{e&&await e(i),n.resolve(i)}catch(s){n.reject(s)}}});const r=new Promise(function(i,s){n.resolve=i,n.reject=s});try{this.original(t)}catch(i){n.reject(i)}return r}.bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;function Cq(){let t,e;return{lock:async()=>{for(;t;)await t;t=new Promise(i=>{e=i})},unlock:async()=>{const i=e;t=void 0,e=void 0,i?.()}}}function g0(t,e){const n={rows:[],columns:[]},r=t.exec({sql:e.sql,bind:e.params,returnValue:"resultRows",rowMode:"array",columnNames:n.columns});switch(e.method){case"run":break;case"get":n.rows=r[0]??[];break;case"all":default:n.rows=r;break}return n}function wD(t){const e=t.split(/[\\/]/).filter(s=>s!==""),n=e.pop();if(!n)throw new Error("Database path is invalid.");const r=["journal","wal","shm"].map(s=>`${n}-${s}`);return{directories:e,fileName:n,tempFileNames:r,getDirectoryHandle:async()=>{let s=await navigator.storage.getDirectory();for(let o of e)s=await s.getDirectoryHandle(o);return s}}}async function LE(t,e){let n;if(t instanceof Blob?n=t.stream():n=t,n instanceof ReadableStream&&e){const i=n.getReader();switch(e){case"callback":return async()=>(await i.read()).value;case"buffer":const s=[];let o=!1;for(;!o;){const p=await i.read();p.value&&s.push(p.value),o=p.done}const l=s.reduce((p,h)=>p+h.length,0),c=new Uint8Array(l);let d=0;return s.forEach(p=>{c.set(p,d),d+=p.length}),c}}else return n}class nK{constructor(e){Object.defineProperty(this,"sqlite3",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"db",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dbStorageType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"pointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userFunctions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"initMutex",{enumerable:!0,configurable:!0,writable:!0,value:Cq()}),Object.defineProperty(this,"transactionMutex",{enumerable:!0,configurable:!0,writable:!0,value:Cq()}),Object.defineProperty(this,"transactionKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"init",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;await this.initMutex.lock();const{databasePath:i,readOnly:s,verbose:o}=this.config,l=[s===!0?"r":"cw",o===!0?"t":""].join("");try{this.sqlite3||(this.sqlite3=await tK()),this.db&&this.destroy(),"opfs"in this.sqlite3&&i!==":memory:"?(this.db=new this.sqlite3.oo1.OpfsDb(i,l),this.dbStorageType="opfs"):(this.db=new this.sqlite3.oo1.DB(i,l),this.dbStorageType="memory",i!==":memory:"&&console.warn(`The origin private file system is not available, so ${i} will not be persisted. Make sure your web server is configured to use the correct HTTP response headers (See https://sqlocal.dallashoffman.com/guide/setup#cross-origin-isolation).`)),this.dbStorageType!=="memory"&&(this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${i})`),this.reinitChannel.onmessage=c=>{this.config.clientKey!==c.data.clientKey&&this.init(c.data.reason)}),this.userFunctions.forEach(this.initUserFunction),this.execInitStatements(),this.emitMessage({type:"event",event:"connect",reason:r})}catch(c){this.emitMessage({type:"error",error:c,queryKey:null}),this.destroy()}finally{await this.initMutex.unlock()}}}),Object.defineProperty(this,"postMessage",{enumerable:!0,configurable:!0,writable:!0,value:async(r,i)=>{const s=r instanceof MessageEvent?r.data:r;switch(await this.initMutex.lock(),s.type){case"config":this.editConfig(s);break;case"query":case"batch":case"transaction":this.exec(s);break;case"function":this.createUserFunction(s);break;case"getinfo":this.getDatabaseInfo(s);break;case"import":this.importDb(s);break;case"export":this.exportDb(s);break;case"delete":this.deleteDb(s);break;case"destroy":this.destroy(s);break}await this.initMutex.unlock()}}),Object.defineProperty(this,"emitMessage",{enumerable:!0,configurable:!0,writable:!0,value:(r,i=[])=>{this.onmessage&&this.onmessage(r,i)}}),Object.defineProperty(this,"editConfig",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.config=r.config,this.init("initial")}}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(this.db)try{const i={type:"data",queryKey:r.queryKey,data:[]};switch(r.type){case"query":const s=this.transactionKey!==null&&this.transactionKey===r.transactionKey;try{s||await this.transactionMutex.lock();const o=g0(this.db,r);i.data.push(o)}finally{s||await this.transactionMutex.unlock()}break;case"batch":try{await this.transactionMutex.lock(),this.db.transaction(o=>{for(let l of r.statements){const c=g0(o,l);i.data.push(c)}})}finally{await this.transactionMutex.unlock()}break;case"transaction":if(r.action==="begin"&&(await this.transactionMutex.lock(),this.transactionKey=r.transactionKey,this.db.exec({sql:"BEGIN"})),(r.action==="commit"||r.action==="rollback")&&this.transactionKey!==null&&this.transactionKey===r.transactionKey){const o=r.action==="commit"?"COMMIT":"ROLLBACK";this.db.exec({sql:o}),this.transactionKey=null,await this.transactionMutex.unlock()}break}this.emitMessage(i)}catch(i){this.emitMessage({type:"error",error:i,queryKey:r.queryKey})}}}),Object.defineProperty(this,"execInitStatements",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.db&&this.config.onInitStatements)for(let r of this.config.onInitStatements)g0(this.db,r)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{try{const i=this.config.databasePath,s=this.dbStorageType,o=s!==void 0?s!=="memory"?await navigator.storage?.persisted():!1:void 0,c=this.db?.exec({sql:"SELECT page_count * page_size AS size FROM pragma_page_count(), pragma_page_size()",returnValue:"resultRows",rowMode:"array"})?.[0]?.[0],d=typeof c=="number"?c:void 0;this.emitMessage({type:"info",queryKey:r.queryKey,info:{databasePath:i,databaseSizeBytes:d,storageType:s,persisted:o}})}catch(i){this.emitMessage({type:"error",queryKey:r.queryKey,error:i})}}}),Object.defineProperty(this,"createUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{const{functionName:i,functionType:s,queryKey:o}=r;let l;if(this.userFunctions.has(i)){this.emitMessage({type:"error",error:new Error(`A user-defined function with the name "${i}" has already been created for this SQLocal instance.`),queryKey:o});return}s==="callback"?l=(...c)=>{this.emitMessage({type:"callback",name:i,args:c})}:l=this.proxy[`_sqlocal_func_${i}`];try{this.initUserFunction({type:s,name:i,func:l}),this.emitMessage({type:"success",queryKey:o})}catch(c){this.emitMessage({type:"error",error:c,queryKey:o})}}}),Object.defineProperty(this,"initUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.createFunction({name:r.name,xFunc:(i,...s)=>r.func(...s),arity:-1}),this.userFunctions.set(r.name,r))}}),Object.defineProperty(this,"importDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.sqlite3||!this.config.databasePath||!this.db)return;const{queryKey:i,database:s}=r;let o=!1;try{if(this.dbStorageType==="opfs"){this.destroy();const l=await LE(s,"callback");await this.sqlite3.oo1.OpfsDb.importDb(this.config.databasePath,l)}else{const l=await LE(s,"buffer"),c=this.sqlite3.wasm.allocFromTypedArray(l);this.pointers.push(c);const d=this.sqlite3.capi.sqlite3_deserialize(this.db,"main",c,l.byteLength,l.byteLength,this.config.readOnly?this.sqlite3.capi.SQLITE_DESERIALIZE_READONLY:this.sqlite3.capi.SQLITE_DESERIALIZE_RESIZEABLE);this.db.checkRc(d),this.execInitStatements()}}catch(l){this.emitMessage({type:"error",error:l,queryKey:i}),o=!0}finally{this.dbStorageType!=="memory"&&await this.init("overwrite")}o||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"exportDb",{enumerable:!0,configurable:!0,writable:!0,value:r=>{if(!this.sqlite3||!this.db)return;const{queryKey:i}=r;try{const s=this.sqlite3.capi.sqlite3_js_db_export(this.db);this.emitMessage({type:"buffer",queryKey:i,buffer:s},[s])}catch(s){this.emitMessage({type:"error",error:s,queryKey:i})}}}),Object.defineProperty(this,"deleteDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;const{queryKey:i}=r;let s=!1;try{if(this.dbStorageType==="opfs"){const{getDirectoryHandle:o,fileName:l,tempFileNames:c}=wD(this.config.databasePath),d=await o(),p=[l,...c];this.destroy(),await Promise.all(p.map(async h=>d.removeEntry(h).catch(b=>{if(!(b instanceof DOMException&&b.name==="NotFoundError"))throw b})))}else this.destroy()}catch(o){this.emitMessage({type:"error",error:o,queryKey:i}),s=!0}finally{await this.init("delete")}s||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.exec({sql:"PRAGMA optimize"}),this.db.close(),this.db=void 0,this.dbStorageType=void 0),this.reinitChannel&&(this.reinitChannel.close(),this.reinitChannel=void 0),this.pointers.forEach(i=>this.sqlite3?.wasm.dealloc(i)),this.pointers=[],r&&this.emitMessage({type:"success",queryKey:r.queryKey})}});const n=e?globalThis:hN(globalThis);this.proxy=n,this.init("initial")}}function $v(t,...e){return{sql:t.join("?"),params:e}}function rK(t){return!t.some(e=>!Array.isArray(e))}function y0(t,e){let n;return rK(t)?n=t:n=[t],n.map(r=>{const i={};return e.forEach((s,o)=>{i[s]=r[o]}),i})}function iK(t){return typeof t=="object"&&t!==null&&"getSQL"in t&&typeof t.getSQL=="function"}function sK(t){return typeof t=="object"&&t!==null&&"sql"in t&&typeof t.sql=="string"&&"params"in t}function oK(t){if(typeof t=="function"&&(t=t($v)),iK(t))try{if(!("toSQL"in t&&typeof t.toSQL=="function"))throw 1;const r=t.toSQL();if(!sK(r))throw 2;return r}catch{throw new Error("The passed statement could not be parsed.")}const e=t.sql;let n=[];return"params"in t?n=t.params:"parameters"in t&&(n=t.parameters),{sql:e,params:n}}function v0(){return crypto.randomUUID()}function Tq(t,e){let n;return typeof t=="string"?n={sql:t,params:e}:n=$v(t,...e),n}async function Qg(t,e,n,r){return!e&&"locks"in navigator?navigator.locks.request(`_sqlocal_mutation_(${n.databasePath})`,{mode:t},r):r()}class aK{constructor(e){Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"bypassMutationLock",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"userCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"queriesInProgress",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processMessageEvent",{enumerable:!0,configurable:!0,writable:!0,value:o=>{const l=o instanceof MessageEvent?o.data:o,c=this.queriesInProgress;switch(l.type){case"success":case"data":case"buffer":case"info":case"error":if(l.queryKey&&c.has(l.queryKey)){const[p,h]=c.get(l.queryKey);l.type==="error"?h(l.error):p(l),c.delete(l.queryKey)}else if(l.type==="error")throw l.error;break;case"callback":const d=this.userCallbacks.get(l.name);d&&d(...l.args??[]);break;case"event":this.config.onConnect?.(l.reason);break}}}),Object.defineProperty(this,"createQuery",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Qg("shared",this.bypassMutationLock||o.type==="import"||o.type==="delete",this.config,async()=>{if(this.isDestroyed===!0)throw new Error("This SQLocal client has been destroyed. You will need to initialize a new client in order to make further queries.");const l=v0();switch(o.type){case"import":this.processor.postMessage({...o,queryKey:l},[o.database]);break;default:this.processor.postMessage({...o,queryKey:l});break}return new Promise((c,d)=>{this.queriesInProgress.set(l,[c,d])})})}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l,c="all",d)=>{const p=await this.createQuery({type:"query",transactionKey:d,sql:o,params:l,method:c}),h={rows:[],columns:[]};return p.type==="data"&&(h.rows=p.data[0]?.rows??[],h.columns=p.data[0]?.columns??[]),h}}),Object.defineProperty(this,"execBatch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const l=await this.createQuery({type:"batch",statements:o}),c=new Array(o.length).fill({rows:[],columns:[]});return l.type==="data"&&l.data.forEach((d,p)=>{c[p]=d}),c}}),Object.defineProperty(this,"sql",{enumerable:!0,configurable:!0,writable:!0,value:async(o,...l)=>{const c=Tq(o,l),{rows:d,columns:p}=await this.exec(c.sql,c.params,"all");return y0(d,p)}}),Object.defineProperty(this,"batch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const l=o($v);return(await this.execBatch(l)).map(({rows:d,columns:p})=>y0(d,p))}}),Object.defineProperty(this,"beginTransaction",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=v0();await this.createQuery({type:"transaction",transactionKey:o,action:"begin"});const l=async h=>{const b=oK(h),{rows:x,columns:w}=await this.exec(b.sql,b.params,"all",o);return y0(x,w)};return{query:l,sql:async(h,...b)=>{const x=Tq(h,b);return await l(x)},commit:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"commit"})},rollback:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"rollback"})}}}}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Qg("exclusive",!1,this.config,async()=>{let l;this.bypassMutationLock=!0;try{l=await this.beginTransaction();const c=await o({sql:l.sql,query:l.query});return await l.commit(),c}catch(c){throw await l?.rollback(),c}finally{this.bypassMutationLock=!1}})}),Object.defineProperty(this,"createCallbackFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{await this.createQuery({type:"function",functionName:o,functionType:"callback"}),this.userCallbacks.set(o,l)}}),Object.defineProperty(this,"createScalarFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{const c=`_sqlocal_func_${o}`;this.proxy===globalThis&&(this.proxy[c]=l),await this.createQuery({type:"function",functionName:o,functionType:"scalar"}),this.proxy!==globalThis&&(this.proxy[c]=l)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=await this.createQuery({type:"getinfo"});if(o.type==="info")return o.info;throw new Error("The database failed to return valid information.")}}),Object.defineProperty(this,"getDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{let o,l;const{storageType:c}=await this.getDatabaseInfo();if(c==="opfs"){const d=wD(this.config.databasePath),{directories:p,getDirectoryHandle:h}=d;o=d.fileName;const b=`backup-${Date.now()}--${o}`,x=`${p.join("/")}/${b}`;await this.exec("VACUUM INTO ?",[x]);const w=await h();l=await (await (await w.getFileHandle(b)).getFile()).arrayBuffer(),await w.removeEntry(b)}else{const d=await this.createQuery({type:"export"});if(d.type==="buffer")o="database.sqlite3",l=d.buffer;else throw new Error("The database failed to export.")}return new File([l],o,{type:"application/x-sqlite3"})}}),Object.defineProperty(this,"overwriteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{await Qg("exclusive",!1,this.config,async()=>{try{const c=await LE(o);await this.createQuery({type:"import",database:c}),typeof l=="function"&&(this.bypassMutationLock=!0,await l()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"overwrite"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"deleteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{await Qg("exclusive",!1,this.config,async()=>{try{await this.createQuery({type:"delete"}),typeof o=="function"&&(this.bypassMutationLock=!0,await o()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"delete"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{await this.createQuery({type:"destroy"}),this.processor instanceof Worker&&(this.processor.removeEventListener("message",this.processMessageEvent),this.processor.terminate()),this.queriesInProgress.clear(),this.userCallbacks.clear(),this.reinitChannel.close(),this.isDestroyed=!0}});const n=typeof e=="string"?{databasePath:e}:e,{onInit:r,onConnect:i,...s}=n;this.config=n,this.clientKey=v0(),this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${s.databasePath})`),typeof globalThis.Worker<"u"&&s.databasePath!==":memory:"?(this.processor=new Worker(new URL("/assets/worker-DxuAzsZq.js",import.meta.url),{type:"module"}),this.processor.addEventListener("message",this.processMessageEvent),this.proxy=hN(this.processor)):(this.processor=new nK(!0),this.processor.onmessage=o=>this.processMessageEvent(o),this.proxy=globalThis),this.processor.postMessage({type:"config",config:{...s,clientKey:this.clientKey,onInitStatements:r?.($v)??[]}})}}class lK extends aK{constructor(){super(...arguments),Object.defineProperty(this,"dialect",{enumerable:!0,configurable:!0,writable:!0,value:{createAdapter:()=>new uH,createDriver:()=>new uK(this),createIntrospector:e=>new lH(e),createQueryCompiler:()=>new sH}})}}class uK{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e})}async init(){}async acquireConnection(){return new cK(this.client)}async releaseConnection(){}async beginTransaction(e){e.transaction=await this.client.beginTransaction()}async commitTransaction(e){await e.transaction?.commit(),e.transaction=null}async rollbackTransaction(e){await e.transaction?.rollback(),e.transaction=null}async destroy(){await this.client.destroy()}}class cK{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:null})}async executeQuery(e){let n;return this.transaction===null?n=await this.client.sql(e.sql,...e.parameters):n=await this.transaction.query(e),{rows:n}}async *streamQuery(){throw new Error("SQLite3 does not support streaming.")}}const dK=({database:t,bootstrap:e})=>{const{dialect:n}=new lK({databasePath:`${t}.sqlite3`,onInit(i){return[i`PRAGMA foreign_keys = ON;`]}}),r=new Q1({dialect:n});return{kysely:r,async bootstrap(){return e({kysely:r})}}},Ii=yn({slot:{base:["border","border-gray-300","rounded-md","p-4","flex","flex-col","gap-2","items-center"],input:["w-full","border","border-gray-300","rounded-md","p-2","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"]},variant:{isLoading:{true:[]},isSubmitting:{true:[]}},match:[{if:{isSubmitting:!0},then:{base:["opacity-50","pointer-events-none","select-none"]}}],defaults:{isLoading:!1,isSubmitting:!1}}),fK="icon-[material-symbols--error-outline]",pK=yn({slot:{base:["flex","flex-row","gap-1","items-center","text-red-600","p-2"]},variant:{highlight:{true:[]},compact:{true:[]}},match:[{if:{highlight:!0},then:{base:["bg-red-100","p-2","font-bold","border","border-red-200","rounded-md","w-full"]}},{if:{compact:!0},then:{base:["p-0"]}}],defaults:{highlight:!1,compact:!1}}),hi=({error:t,variant:e,tva:n=pK,css:r})=>{const i=n({...e,css:r}).slots;return t?.message?f.jsxs("div",{className:i.base(),children:[f.jsx(rn,{icon:fK}),f.jsx("span",{children:Bl.rich(t.message)})]}):null},hK=yn({slot:{base:["flex","flex-col","gap-1","w-full"],input:[]},variant:{required:{true:[]},disabled:{true:[]},isSubmitting:{true:[]},isLoading:{true:[]},isError:{true:[]}},match:[{if:{isError:!0},then:{base:["text-red-600"]}},{if:{required:!0},then:{base:["text-emerald-600","font-bold"]}}],defaults:{required:!1,disabled:!1,isSubmitting:!1,isLoading:!1,isError:!1}}),In=({label:t,hint:e,required:n=!1,formState:r,name:i,children:s,variant:o,tva:l=hK,css:c})=>{const d=l({isSubmitting:r.isSubmitting,isLoading:r.isLoading,isError:!!r.errors[i],required:n,...o,css:c}).slots;return f.jsxs("div",{className:d.base(),children:[f.jsxs("div",{className:"flex flex-row justify-between",children:[t?f.jsx("label",{htmlFor:i,children:t}):null,f.jsx(hi,{variant:{compact:!0},error:r.errors[i]})]}),e?f.jsx("div",{className:"text-sm italic",children:e}):null,f.jsx("div",{className:d.input(),children:s})]})},ys=({form:t,mutation:e})=>{const n=t.handleSubmit(async r=>e.mutateAsync(r,{onError:i=>{Z1({error:i,errors:[T1({error:i,schema:G1,onError:({data:s})=>{t.setError("root",{message:s.message})}})],onError:s=>{t.setError("root",{message:s.message})}})}}).catch(()=>{}));return r=>{r.stopPropagation(),n(r)}};function mK(t,e,n,r={leading:!1}){const[i,s]=K.useState(t),[o,l]=K.useState(t),c=K.useRef(null),d=K.useRef(!0),p=()=>window.clearTimeout(c.current||void 0);K.useEffect(()=>p,[]),K.useEffect(()=>{e(i)},[i]),K.useEffect(()=>{l(t),s(t)},[t]);const h=K.useCallback(b=>{l(b),p(),d.current&&r.leading?s(b):c.current=window.setTimeout(()=>{d.current=!0,s(b)},n),d.current=!1},[r.leading]);return[o,h]}const gK=yn({slot:{base:["relative","w-full"],search:["absolute","inset-y-0","left-2","flex","items-center","pointer-events-none","text-slate-500"],input:["pl-8","py-1","w-full","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded","focus:border-sky-400","focus:outline-none","block"],clear:["absolute","inset-y-0","right-2","flex","items-center","cursor-pointer","text-slate-300","hover:text-slate-500"]},variant:{},defaults:{}}),SD=({value:t="",onFulltext:e,textPlaceholder:n,variant:r,tva:i=gK,css:s})=>{const o=i({...r,css:s}).slots,[l,c]=mK(t,d=>{e(d||"")},500);return f.jsxs("div",{className:o.base(),children:[f.jsx("div",{className:o.search(),children:f.jsx(rn,{icon:"icon-[material-symbols-light--search]",variant:{size:"xl"}})}),f.jsx("input",{value:l||"",className:o.input(),type:"text",placeholder:n||Bl.text("Fulltext (placeholder)"),onChange:d=>{c(d.target.value)}}),t&&f.jsx("div",{className:o.clear(),onClick:()=>{e("")},children:f.jsx(rn,{icon:"icon-[gridicons--cross]",variant:{size:"md"}})})]})},jo="icon-[pajamas--go-back]",Bv="icon-[line-md--confirm-circle]",ED="icon-[mage--edit]",yK="icon-[arcticons--nothing-x]",vK="icon-[tabler--filter-plus]",Oq="icon-[tabler--filter-minus]",Vb="icon-[ph--list-dashes-thin]",bK="icon-[svg-spinners--3-dots-scale]",gN="icon-[material-symbols-light--logout-sharp]",xK="icon-[fluent--shape-intersect-20-regular]",Hb="icon-[fluent--checkbox-unchecked-20-regular]",Qb="icon-[fluent--checkbox-checked-20-regular]",jh="icon-[teenyicons--tag-outline]",Xr="icon-[ph--trash]",_K="icon-[clarity--upload-cloud-line]",yN="icon-[ph--user]",wK=async({queryClient:t,keys:e})=>{for await(const n of e)await t.invalidateQueries({queryKey:n,refetchType:"all"})},Yn=t=>{const e=lb(),n=Po();return async()=>{await wK({keys:t,queryClient:e}),await n.invalidate()}};var b0={exports:{}},x0,qq;function SK(){if(qq)return x0;qq=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return x0=t,x0}var _0,Rq;function EK(){if(Rq)return _0;Rq=1;var t=SK();function e(){}function n(){}return n.resetWarningCache=e,_0=function(){function r(o,l,c,d,p,h){if(h!==t){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},_0}var jq;function NK(){return jq||(jq=1,b0.exports=EK()()),b0.exports}var kK=NK();const er=io(kK);function uc(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(p){try{d(r.next(p))}catch(h){o(h)}}function c(p){try{d(r.throw(p))}catch(h){o(h)}}function d(p){p.done?s(p.value):i(p.value).then(l,c)}d((r=r.apply(t,e||[])).next())})}const IK=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function zd(t,e,n){const r=CK(t),{webkitRelativePath:i}=t,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&Aq(r,"path",s),Aq(r,"relativePath",s),r}function CK(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=IK.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function Aq(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const TK=[".DS_Store","Thumbs.db"];function OK(t){return uc(this,void 0,void 0,function*(){return zv(t)&&qK(t.dataTransfer)?PK(t.dataTransfer,t.type):RK(t)?jK(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?AK(t):[]})}function qK(t){return zv(t)}function RK(t){return zv(t)&&zv(t.target)}function zv(t){return typeof t=="object"&&t!==null}function jK(t){return ME(t.target.files).map(e=>zd(e))}function AK(t){return uc(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>zd(n))})}function PK(t,e){return uc(this,void 0,void 0,function*(){if(t.items){const n=ME(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(FK));return Pq(ND(r))}return Pq(ME(t.files).map(n=>zd(n)))})}function Pq(t){return t.filter(e=>TK.indexOf(e.name)===-1)}function ME(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function FK(t){if(typeof t.webkitGetAsEntry!="function")return Fq(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?kD(e):Fq(t,e)}function ND(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?ND(n):[n]],[])}function Fq(t,e){return uc(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const s=yield t.getAsFileSystemHandle();if(s===null)throw new Error(`${t} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,zd(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return zd(r,(n=e?.fullPath)!==null&&n!==void 0?n:void 0)})}function DK(t){return uc(this,void 0,void 0,function*(){return t.isDirectory?kD(t):LK(t)})}function kD(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function s(){e.readEntries(o=>uc(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(DK));i.push(l),s()}else try{const l=yield Promise.all(i);n(l)}catch(l){r(l)}}),o=>{r(o)})}s()})}function LK(t){return uc(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=zd(r,t.fullPath);e(i)},r=>{n(r)})})})}var Kg={},Dq;function MK(){return Dq||(Dq=1,Kg.__esModule=!0,Kg.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?s===l.replace(/\/.*$/,""):i===l})}return!0}),Kg}var $K=MK();const w0=io($K);function Lq(t){return WK(t)||zK(t)||CD(t)||BK()}function BK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WK(t){if(Array.isArray(t))return $E(t)}function Mq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mq(Object(n),!0).forEach(function(r){ID(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ID(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ah(t,e){return HK(t)||VK(t,e)||CD(t,e)||UK()}function UK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CD(t,e){if(t){if(typeof t=="string")return $E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $E(t,e)}}function $E(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function VK(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(c){s=!0,l=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function HK(t){if(Array.isArray(t))return t}var QK=typeof w0=="function"?w0:w0.default,TD="file-invalid-type",OD="file-too-large",qD="file-too-small",RD="too-many-files",KK={FileInvalidType:TD,FileTooLarge:OD,FileTooSmall:qD,TooManyFiles:RD},GK=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:TD,message:"File type must be ".concat(r)}},Bq=function(e){return{code:OD,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},zq=function(e){return{code:qD,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},ZK={code:RD,message:"Too many files"};function jD(t,e){var n=t.type==="application/x-moz-file"||QK(t,e);return[n,n?null:GK(e)]}function AD(t,e,n){if(Au(t.size))if(Au(e)&&Au(n)){if(t.size>n)return[!1,Bq(n)];if(t.size<e)return[!1,zq(e)]}else{if(Au(e)&&t.size<e)return[!1,zq(e)];if(Au(n)&&t.size>n)return[!1,Bq(n)]}return[!0,null]}function Au(t){return t!=null}function JK(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,l=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(c){var d=jD(c,n),p=Ah(d,1),h=p[0],b=AD(c,r,i),x=Ah(b,1),w=x[0],E=l?l(c):null;return h&&w&&!E})}function Wv(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Gg(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function Wq(t){t.preventDefault()}function YK(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function XK(t){return t.indexOf("Edge/")!==-1}function eG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return YK(t)||XK(t)}function Uo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(l){return!Wv(r)&&l&&l.apply(void 0,[r].concat(s)),Wv(r)})}}function tG(){return"showOpenFilePicker"in window}function nG(t){if(Au(t)){var e=Object.entries(t).filter(function(n){var r=Ah(n,2),i=r[0],s=r[1],o=!0;return PD(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(FD))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=Ah(r,2),s=i[0],o=i[1];return $q($q({},n),{},ID({},s,o))},{});return[{description:"Files",accept:e}]}return t}function rG(t){if(Au(t))return Object.entries(t).reduce(function(e,n){var r=Ah(n,2),i=r[0],s=r[1];return[].concat(Lq(e),[i],Lq(s))},[]).filter(function(e){return PD(e)||FD(e)}).join(",")}function iG(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function sG(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function PD(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function FD(t){return/^.*\.[\w]+$/.test(t)}var oG=["children"],aG=["open"],lG=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],uG=["refKey","onChange","onClick"];function cG(t){return pG(t)||fG(t)||DD(t)||dG()}function dG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pG(t){if(Array.isArray(t))return BE(t)}function S0(t,e){return gG(t)||mG(t,e)||DD(t,e)||hG()}function hG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DD(t,e){if(t){if(typeof t=="string")return BE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BE(t,e)}}function BE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mG(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(c){s=!0,l=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function gG(t){if(Array.isArray(t))return t}function Uq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uq(Object(n),!0).forEach(function(r){zE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uv(t,e){if(t==null)return{};var n=yG(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yG(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Kb=K.forwardRef(function(t,e){var n=t.children,r=Uv(t,oG),i=MD(r),s=i.open,o=Uv(i,aG);return K.useImperativeHandle(e,function(){return{open:s}},[s]),$n.createElement(K.Fragment,null,n(jr(jr({},o),{},{open:s})))});Kb.displayName="Dropzone";var LD={disabled:!1,getFilesFromEvent:OK,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Kb.defaultProps=LD;Kb.propTypes={children:er.func,accept:er.objectOf(er.arrayOf(er.string)),multiple:er.bool,preventDropOnDocument:er.bool,noClick:er.bool,noKeyboard:er.bool,noDrag:er.bool,noDragEventsBubbling:er.bool,minSize:er.number,maxSize:er.number,maxFiles:er.number,disabled:er.bool,getFilesFromEvent:er.func,onFileDialogCancel:er.func,onFileDialogOpen:er.func,useFsAccessApi:er.bool,autoFocus:er.bool,onDragEnter:er.func,onDragLeave:er.func,onDragOver:er.func,onDrop:er.func,onDropAccepted:er.func,onDropRejected:er.func,onError:er.func,validator:er.func};var WE={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function MD(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=jr(jr({},LD),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,l=e.multiple,c=e.maxFiles,d=e.onDragEnter,p=e.onDragLeave,h=e.onDragOver,b=e.onDrop,x=e.onDropAccepted,w=e.onDropRejected,E=e.onFileDialogCancel,I=e.onFileDialogOpen,T=e.useFsAccessApi,O=e.autoFocus,q=e.preventDropOnDocument,A=e.noClick,D=e.noKeyboard,L=e.noDrag,z=e.noDragEventsBubbling,P=e.onError,R=e.validator,M=K.useMemo(function(){return rG(n)},[n]),F=K.useMemo(function(){return nG(n)},[n]),W=K.useMemo(function(){return typeof I=="function"?I:Vq},[I]),V=K.useMemo(function(){return typeof E=="function"?E:Vq},[E]),B=K.useRef(null),te=K.useRef(null),J=K.useReducer(vG,WE),le=S0(J,2),se=le[0],ne=le[1],oe=se.isFocused,X=se.isFileDialogActive,ce=K.useRef(typeof window<"u"&&window.isSecureContext&&T&&tG()),de=function(){!ce.current&&X&&setTimeout(function(){if(te.current){var ct=te.current.files;ct.length||(ne({type:"closeDialog"}),V())}},300)};K.useEffect(function(){return window.addEventListener("focus",de,!1),function(){window.removeEventListener("focus",de,!1)}},[te,X,V,ce]);var ye=K.useRef([]),_e=function(ct){B.current&&B.current.contains(ct.target)||(ct.preventDefault(),ye.current=[])};K.useEffect(function(){return q&&(document.addEventListener("dragover",Wq,!1),document.addEventListener("drop",_e,!1)),function(){q&&(document.removeEventListener("dragover",Wq),document.removeEventListener("drop",_e))}},[B,q]),K.useEffect(function(){return!r&&O&&B.current&&B.current.focus(),function(){}},[B,O,r]);var Ne=K.useCallback(function(Me){P?P(Me):console.error(Me)},[P]),ze=K.useCallback(function(Me){Me.preventDefault(),Me.persist(),ke(Me),ye.current=[].concat(cG(ye.current),[Me.target]),Gg(Me)&&Promise.resolve(i(Me)).then(function(ct){if(!(Wv(Me)&&!z)){var Qt=ct.length,Kt=Qt>0&&JK({files:ct,accept:M,minSize:o,maxSize:s,multiple:l,maxFiles:c,validator:R}),hn=Qt>0&&!Kt;ne({isDragAccept:Kt,isDragReject:hn,isDragActive:!0,type:"setDraggedFiles"}),d&&d(Me)}}).catch(function(ct){return Ne(ct)})},[i,d,Ne,z,M,o,s,l,c,R]),qe=K.useCallback(function(Me){Me.preventDefault(),Me.persist(),ke(Me);var ct=Gg(Me);if(ct&&Me.dataTransfer)try{Me.dataTransfer.dropEffect="copy"}catch{}return ct&&h&&h(Me),!1},[h,z]),De=K.useCallback(function(Me){Me.preventDefault(),Me.persist(),ke(Me);var ct=ye.current.filter(function(Kt){return B.current&&B.current.contains(Kt)}),Qt=ct.indexOf(Me.target);Qt!==-1&&ct.splice(Qt,1),ye.current=ct,!(ct.length>0)&&(ne({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Gg(Me)&&p&&p(Me))},[B,p,z]),Ze=K.useCallback(function(Me,ct){var Qt=[],Kt=[];Me.forEach(function(hn){var cr=jD(hn,M),Dn=S0(cr,2),Hr=Dn[0],Oi=Dn[1],Tr=AD(hn,o,s),Gt=S0(Tr,2),Ki=Gt[0],Gi=Gt[1],Zi=R?R(hn):null;if(Hr&&Ki&&!Zi)Qt.push(hn);else{var lo=[Oi,Gi];Zi&&(lo=lo.concat(Zi)),Kt.push({file:hn,errors:lo.filter(function(ua){return ua})})}}),(!l&&Qt.length>1||l&&c>=1&&Qt.length>c)&&(Qt.forEach(function(hn){Kt.push({file:hn,errors:[ZK]})}),Qt.splice(0)),ne({acceptedFiles:Qt,fileRejections:Kt,isDragReject:Kt.length>0,type:"setFiles"}),b&&b(Qt,Kt,ct),Kt.length>0&&w&&w(Kt,ct),Qt.length>0&&x&&x(Qt,ct)},[ne,l,M,o,s,c,b,x,w,R]),Xe=K.useCallback(function(Me){Me.preventDefault(),Me.persist(),ke(Me),ye.current=[],Gg(Me)&&Promise.resolve(i(Me)).then(function(ct){Wv(Me)&&!z||Ze(ct,Me)}).catch(function(ct){return Ne(ct)}),ne({type:"reset"})},[i,Ze,Ne,z]),Ue=K.useCallback(function(){if(ce.current){ne({type:"openDialog"}),W();var Me={multiple:l,types:F};window.showOpenFilePicker(Me).then(function(ct){return i(ct)}).then(function(ct){Ze(ct,null),ne({type:"closeDialog"})}).catch(function(ct){iG(ct)?(V(ct),ne({type:"closeDialog"})):sG(ct)?(ce.current=!1,te.current?(te.current.value=null,te.current.click()):Ne(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ne(ct)});return}te.current&&(ne({type:"openDialog"}),W(),te.current.value=null,te.current.click())},[ne,W,V,T,Ze,Ne,F,l]),ut=K.useCallback(function(Me){!B.current||!B.current.isEqualNode(Me.target)||(Me.key===" "||Me.key==="Enter"||Me.keyCode===32||Me.keyCode===13)&&(Me.preventDefault(),Ue())},[B,Ue]),wt=K.useCallback(function(){ne({type:"focus"})},[]),Tt=K.useCallback(function(){ne({type:"blur"})},[]),Ut=K.useCallback(function(){A||(eG()?setTimeout(Ue,0):Ue())},[A,Ue]),nn=function(ct){return r?null:ct},xe=function(ct){return D?null:nn(ct)},ve=function(ct){return L?null:nn(ct)},ke=function(ct){z&&ct.stopPropagation()},Ae=K.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ct=Me.refKey,Qt=ct===void 0?"ref":ct,Kt=Me.role,hn=Me.onKeyDown,cr=Me.onFocus,Dn=Me.onBlur,Hr=Me.onClick,Oi=Me.onDragEnter,Tr=Me.onDragOver,Gt=Me.onDragLeave,Ki=Me.onDrop,Gi=Uv(Me,lG);return jr(jr(zE({onKeyDown:xe(Uo(hn,ut)),onFocus:xe(Uo(cr,wt)),onBlur:xe(Uo(Dn,Tt)),onClick:nn(Uo(Hr,Ut)),onDragEnter:ve(Uo(Oi,ze)),onDragOver:ve(Uo(Tr,qe)),onDragLeave:ve(Uo(Gt,De)),onDrop:ve(Uo(Ki,Xe)),role:typeof Kt=="string"&&Kt!==""?Kt:"presentation"},Qt,B),!r&&!D?{tabIndex:0}:{}),Gi)}},[B,ut,wt,Tt,Ut,ze,qe,De,Xe,D,L,r]),Ve=K.useCallback(function(Me){Me.stopPropagation()},[]),rt=K.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ct=Me.refKey,Qt=ct===void 0?"ref":ct,Kt=Me.onChange,hn=Me.onClick,cr=Uv(Me,uG),Dn=zE({accept:M,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:nn(Uo(Kt,Xe)),onClick:nn(Uo(hn,Ve)),tabIndex:-1},Qt,te);return jr(jr({},Dn),cr)}},[te,n,l,Xe,r]);return jr(jr({},se),{},{isFocused:oe&&!r,getRootProps:Ae,getInputProps:rt,rootRef:B,inputRef:te,open:nn(Ue)})}function vG(t,e){switch(e.type){case"focus":return jr(jr({},t),{},{isFocused:!0});case"blur":return jr(jr({},t),{},{isFocused:!1});case"openDialog":return jr(jr({},WE),{},{isFileDialogActive:!0});case"closeDialog":return jr(jr({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return jr(jr({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return jr(jr({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return jr({},WE);default:return t}}function Vq(){}const bG=Object.freeze(Object.defineProperty({__proto__:null,ErrorCode:KK,default:Kb,useDropzone:MD},Symbol.toStringTag,{value:"Module"})),xG=yn({slot:{base:["flex","items-center","justify-center","w-full"],label:["flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100"],zone:["flex","flex-col","items-center","justify-center","pt-5","pb-6","text-slate-500"]},variant:{active:{true:[]},rejected:{true:[]}},match:[{if:{active:!0},then:{label:["text-blue-400"],zone:["text-blue-400"]}},{if:{rejected:!0},then:{label:["text-red-400"],zone:["text-red-400"]}}],defaults:{active:!1,rejected:!1}}),{useDropzone:_G}=bG,wG=({id:t,accept:e,text:n,variant:r,tva:i=xG,css:s,...o})=>{const{getRootProps:l,getInputProps:c,isDragActive:d,isDragReject:p}=_G({noClick:!0,multiple:!1,accept:e,maxFiles:1,minSize:0,maxSize:8388608,...o}),h=i({active:d,rejected:p,...r,css:s}).slots;return f.jsx("div",{...l(),className:h.base(),children:f.jsxs("label",{htmlFor:t,className:h.label(),children:[f.jsxs("div",{className:h.zone(),children:[f.jsx(rn,{icon:_K,variant:{size:"4xl"}}),f.jsx("p",{className:"mb-2 text-sm font-semibold",children:n?.title||Bl.rich("Drag 'n' drop a file here")}),n?.message?f.jsx("p",{className:"text-xs",children:n.message}):null]}),f.jsx("input",{id:t,type:"file",className:"hidden",...c()})]})})},SG=yn({slot:{base:["min-h-screen","flex","flex-col"],header:["flex","flex-row","items-center","bg-slate-50","shadow-sm","border-b","border-b-slate-200","w-full","gap-4","p-4"],content:["flex-grow","h-full","border-b","border-b-slate-200","p-2"]},variant:{},defaults:{}}),$D=({logo:t,menu:e,actions:n,variant:r,tva:i=SG,css:s,children:o})=>{const l=i({...r,css:s}).slots;return f.jsxs("div",{className:l.base(),children:[f.jsx(wz,{position:"top-right"}),f.jsxs("div",{className:l.header(),children:[f.jsx("div",{children:t}),f.jsx("div",{className:"flex-grow",children:e}),f.jsx("div",{className:"flex flex-row gap-2 items-center",children:n})]}),f.jsx("div",{className:l.content(),children:o??f.jsx(oo,{})})]})},EG=yn({slot:{base:["flex","flex-row","gap-2","items-center","justify-between","text-blue-500","rounded","px-1","py-0.5","hover:text-blue-700","focus:outline-none","w-fit"]},variant:{},defaults:{}}),NG=K.forwardRef(({icon:t,iconProps:e,variant:n,tva:r=EG,css:i,children:s,...o},l)=>{const c=r({...n,css:i}).slots;return f.jsxs("a",{...o,ref:l,className:c.base(),children:[t&&f.jsx(rn,{icon:t,...e}),s]})}),kG=V3(NG),Zt=t=>f.jsx(kG,{preload:"intent",...t}),IG=yn({slot:{base:["fixed","inset-0","h-full","items-center","justify-center","bg-slate-100","flex","transition-all","duration-200","z-[10]","pointer-events-none","bg-opacity-0","backdrop-blur-none"]},variant:{show:{true:["bg-opacity-50","backdrop-blur-sm","pointer-events-auto"]}},defaults:{show:!0}}),CG=({show:t=!0,variant:e,tva:n=IG,css:r})=>{const i=n({show:t,...e,css:r}).slots;return t?f.jsx("div",{className:i.base(),children:f.jsx(rn,{icon:"icon-[svg-spinners--pulse-rings-multiple]",variant:{size:"8xl"},css:{base:["text-sky-400"]}})}):null};var qy={exports:{}},TG=qy.exports,Hq;function OG(){return Hq||(Hq=1,function(t,e){(function(n,r){t.exports=r()})(TG,()=>(()=>{var n={d:(w,E)=>{for(var I in E)n.o(E,I)&&!n.o(w,I)&&Object.defineProperty(w,I,{enumerable:!0,get:E[I]})},o:(w,E)=>Object.prototype.hasOwnProperty.call(w,E)},r={};n.d(r,{default:()=>x});const i=(...w)=>{},s=w=>w!==null&&w?.constructor.name==="Object";let o,l;const c=()=>{if(!o){o=!0;try{l=h.storage||localStorage,l.getItem("")}catch{l=(()=>{const w={getItem:I=>E[I]||null,setItem:(I,T)=>{E[I]=T},removeItem:I=>{E[I]=void 0},clear:()=>{E={__proto__:w}}};let E={__proto__:w};return E})()}b()}},d="\0",p=(w,E,I=!0)=>I?[...JSON.stringify(w)].map(T=>String.fromCharCode(T.charCodeAt(0)+E)).join(""):JSON.parse([...w].map(T=>String.fromCharCode(T.charCodeAt(0)-E)).join("")),h={ttl:null,encrypt:!1,encrypter:p,decrypter:(w,E)=>p(w,E,!1),secret:75,storage:void 0};Object.seal(h);const b=(w=!1)=>{c();for(const E of Object.keys(l)){const I=l.getItem(E);let T;try{T=JSON.parse(I||"")}catch{continue}s(T)&&d in T&&(Date.now()>T.ttl||w)&&l.removeItem(E)}},x={config:h,set:(w,E,I={})=>{c();const T={...h,...I,encrypt:I.encrypt!==!1&&(I.encrypt||h.encrypt),ttl:I.ttl===null?null:I.ttl||h.ttl};try{const O=T.ttl&&!isNaN(T.ttl)&&T.ttl>0;let q=O?{[d]:E,ttl:Date.now()+1e3*T.ttl}:E;T.encrypt&&(O?q[d]=(T.encrypter||i)(q[d],T.secret):q=(T.encrypter||i)(q,T.secret)),l.setItem(w,JSON.stringify(q))}catch{return!1}},get:(w,E={})=>{c();const I=l.getItem(w),T={...h,...E,encrypt:E.encrypt!==!1&&(E.encrypt||h.encrypt),ttl:E.ttl===null?null:E.ttl||h.ttl};let O,q;try{O=JSON.parse(I||""),q=s(O)&&d in O,(T.decrypt||T.encrypt)&&(q?O[d]=(T.decrypter||i)(O[d],T.secret):O=(T.decrypter||i)(O,T.secret))}catch{}return q?Date.now()>O.ttl?(l.removeItem(w),null):O[d]:O!==void 0?O:I},flush:b,clear:()=>{c(),l.clear()},remove:w=>{c(),l.removeItem(w)}};return r.default})())}(qy)),qy.exports}var qG=OG();const RG=io(qG),df=RG,jG=yn({slot:{base:["flex","flex-row","gap-2","items-center"]},variant:{},defaults:{}}),eu=({variant:t,tva:e=jG,css:n,children:r})=>{const i=e({...t,css:n}).slots;return f.jsx("div",{className:i.base(),children:r})},BD=yn({slot:{base:["flex","flex-row","gap-2","items-center","rounded","px-2","py-1","border","border-b-2","border-transparent","hover:text-slate-500"]},variant:{active:{true:[]},inner:{true:[]},subtle:{true:[]}},match:[{if:{active:!0,inner:!1},then:{base:["border","border-b-2","border-blue-400","bg-blue-50","hover:border-blue-500","text-slate-800","hover:text-blue-800"]}},{if:{active:!0,inner:!0},then:{base:["border-none","text-blue-600","hover:text-blue-800"]}},{if:{subtle:!0},then:{base:["hover:bg-slate-50","hover:border-slate-300","hover:text-slate-600"]}},{if:{active:!0,subtle:!0},then:{base:["bg-slate-100","border-slate-400"]}}],defaults:{active:!1,inner:!1,subtle:!1}}),AG=K.forwardRef(({icon:t=null,variant:e,tva:n=BD,css:r,children:i,...s},o)=>{const l=n({...e,css:r}).slots;return f.jsxs("a",{...s,className:l.base(),ref:o,children:[kb(t)?f.jsx(rn,{icon:t}):t,i]})}),PG=V3(AG),Fn=({match:t=[],variant:e,tva:n=BD,css:r,...i})=>{const s=E4(),o=t.some(l=>!!s(l));return f.jsx(PG,{preload:"intent",variant:{active:!!s({to:i.to,params:i.params})||o,...e},tva:n,css:r,...i})},FG=yn({slot:{base:["flex","flex-row","flex-wrap","items-center","gap-2","text-sm","font-semibold"],item:["border","border-blue-200","bg-blue-50","rounded-md","px-2","py-1"]},variant:{},defaults:{}}),Wd=({textTitle:t,textEmpty:e,items:n,render:r,limit:i,variant:s,tva:o=FG,css:l})=>{const c=i?n.slice(0,i):n,d=o({...s,css:l}).slots;return f.jsxs("div",{className:d.base(),children:[n.length?null:e,c.map(p=>f.jsx(r,{entity:p},`items-${p.id}`)),i&&n.length>i&&f.jsx(cf,{textTitle:t,target:f.jsx(gm,{iconEnabled:hD}),outside:!0,children:f.jsx("div",{className:"flex flex-col gap-2",children:n.map(p=>f.jsx(r,{entity:p},`items-${p.id}`))})})]})},DG=yn({slot:{base:[]},variant:{},defaults:{}}),ee=({label:t,fallback:e,variant:n,tva:r=DG,css:i})=>{const s=r({...n,css:i}).slots;return f.jsx("div",{className:s.base(),children:Bl.rich(t,e)})},zD=yn({slot:{base:["flex","flex-col","gap-2"],input:["py-2","px-2","flex","flex-row","gap-2","items-center","cursor-pointer","hover:bg-slate-50","border","border-gray-300","rounded-md","text-slate-400","hover:text-slate-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],content:[],footer:["flex","items-center","justify-between","gap-2","border-t-2","border-slate-100","mt-4","pt-2"]},variant:{loading:{true:[]},selected:{true:[]}},match:[{if:{loading:!0},then:{input:["text-slate-300"]}},{if:{selected:!0},then:{input:["bg-slate-50","text-slate-700","hover:bg-slate-100","hover:text-slate-800"]}}],defaults:{loading:!1,selected:!1}}),LG=yn({use:zD,slot:{},variant:{},defaults:{}}),MG=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:l,query:c,value:d,onChange:p,variant:h,tva:b=LG,css:x})=>{const w=b({...h,css:x}).slots,[E,I]=K.useState(0),[T,O]=K.useState(15),[q,A]=K.useState(d||[]),[D,L]=K.useState(void 0),z=nv({queryKey:[l,"PopupMultiSelect","data",{fulltext:D,page:E,size:T}],async queryFn(){return c({filter:{fulltext:D},cursor:{page:E,size:T}})}}),P=nv({queryKey:[l,"PopupMultiSelect","selected",{value:d}],async queryFn(){return c({filter:{idIn:d}})},enabled:!!d});return f.jsx(cf,{icon:t,target:f.jsxs("label",{className:w.input({loading:P.isLoading,selected:!!P.data?.data.length}),children:[f.jsx(rn,{icon:P.data?.data?.length?Qb:Hb}),P.data&&P.data.data.length?f.jsx(s,{entities:P.data.data}):n||f.jsx(ee,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:z.isLoading},disabled:z.isLoading,...r,children:f.jsxs("div",{className:w.base(),children:[f.jsx("div",{className:w.content(),children:f.jsx(i,{cursor:{cursor:{page:E,size:T},count:z.data?.count?z.data.count:{filter:-1,total:-1,where:-1},textTotal:f.jsx(ee,{label:"Total count of items (label)"}),onPage(R){I(R)},onSize(R){O(R),I(0)}},fulltext:{value:D,set(R){L(R),I(0)}},table:{data:z.data?.data??[],selection:{type:"multi",value:q,set(R){A(R)}}}})}),f.jsx(Wb.Consumer,{children:R=>f.jsxs("div",{className:w.footer(),children:[f.jsx(Cn,{iconEnabled:jo,iconDisabled:jo,onClick:()=>{R?.close()},variant:{variant:"subtle"},children:f.jsx(ee,{label:"Close (label)"})}),f.jsx(Cn,{iconEnabled:Bv,iconDisabled:Bv,disabled:!q.length&&!o,onClick:()=>{p(q),R?.close()},children:f.jsx(ee,{label:"Confirm selection (label)"})})]})})]})})},WD=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:l,query:c,value:d,onChange:p,variant:h,tva:b=zD,css:x})=>{const w=b({...h,css:x}).slots,[E,I]=K.useState(0),[T,O]=K.useState(15),[q,A]=K.useState(d?[d]:[]),[D,L]=K.useState(void 0),z=nv({queryKey:[l,"PopupSelect","data",{fulltext:D,page:E,size:T}],async queryFn(){return c({filter:{fulltext:D},cursor:{page:E,size:T}})}}),P=nv({queryKey:[l,"PopupSelect","selected",{value:d}],async queryFn(){return c({filter:{id:d||void 0}})},enabled:!!d});return f.jsx(cf,{icon:t,target:f.jsxs("label",{className:w.input({loading:P.isLoading,selected:!!P.data?.data?.length}),children:[f.jsx(rn,{icon:P.data?.data?.[0]?Qb:Hb}),P.data?.data?.[0]?f.jsx(s,{entity:P.data?.data?.[0]}):n||f.jsx(ee,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:z.isLoading},disabled:z.isLoading,...r,children:f.jsxs("div",{className:w.base(),children:[f.jsx("div",{className:w.content(),children:f.jsx(i,{cursor:{cursor:{page:E,size:T},count:z.data?.count?z.data.count:{filter:-1,total:-1,where:-1},textTotal:f.jsx(ee,{label:"Total count of items (label)"}),onPage(R){I(R)},onSize(R){O(R),I(0)}},fulltext:{value:D,set(R){L(R),I(0)}},table:{data:z.data?.data??[],selection:{type:"single",value:q,set(R){A(R)}}}})}),f.jsx(Wb.Consumer,{children:R=>f.jsxs("div",{className:w.footer(),children:[f.jsx(Cn,{iconEnabled:jo,iconDisabled:jo,onClick:()=>{R?.close()},variant:{variant:"subtle"},children:f.jsx(ee,{label:"Close (label)"})}),f.jsx(Cn,{iconEnabled:Bv,iconDisabled:Bv,disabled:!q.length&&!o,onClick:()=>{p(q?.[0]),R?.close()},children:f.jsx(ee,{label:"Confirm selection (label)"})})]})})]})})},$G=yn({slot:{base:["bg-blue-50","p-2","rounded-md","border","border-blue-200"],container:["grid","grid-cols-2","grid-rows-2","gap-1"],title:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2"],links:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2","flex","flex-row","items-center","gap-4","justify-end"],actions:["col-span-1","row-span-1","flex","flex-row","items-center","gap-4"],extra:["col-span-1","row-span-1","flex","flex-row","gap-4","justify-end"]},variant:{},defaults:{}}),ff=({entity:t,title:e=()=>null,links:n=()=>null,actions:r=()=>null,extra:i=()=>null,variant:s,tva:o=$G,css:l})=>{const c=o({...s,css:l}).slots;return f.jsx(pN.Provider,{value:{inline:!0},children:f.jsx("div",{className:c.base(),children:f.jsxs("div",{className:c.container(),children:[f.jsx("div",{className:c.title(),children:f.jsx(e,{entity:t})}),f.jsx("div",{className:c.links(),children:f.jsx(n,{entity:t})}),f.jsx("div",{className:c.actions(),children:f.jsx(r,{entity:t})}),f.jsx("div",{className:c.extra(),children:f.jsx(i,{entity:t})})]})})})},BG=yn({slot:{base:["w-full","bg-slate-200","rounded","transition-all"],progress:["h-full","bg-blue-400","rounded","leading-none","transition-all"]},variant:{size:{xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-4"}},defaults:{size:"md"}}),pf=({value:t,variant:e,tva:n=BG,css:r})=>{const i=n({...e,css:r}).slots;return f.jsx("div",{className:i.base(),children:f.jsx("div",{style:{width:`${t}%`},className:i.progress()})})},zG=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,page:e}})})},WG=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,size:e,page:0}})})},_r=t=>({onPage:zG(t),onSize:WG(t)}),wr=t=>e=>t({search:({cursor:n,...r})=>({...r,filter:e,cursor:{...n,page:0}})}),Sr=t=>e=>{t({search:({cursor:n,filter:r,...i})=>({...i,filter:{...r,fulltext:e},cursor:{...n,page:e?0:n.page}}),replace:!!e})},Hi=t=>e=>{t({search(n){return{...n,selection:e}}})},mr=t=>({loading:f.jsx(ee,{label:`${t} - Loading (label)`}),success:f.jsx(ee,{label:`${t} - Success (label)`}),error:f.jsx(ee,{label:`${t} - Error (label)`})}),UG=yn({slot:{base:["flex","flex-col","gap-4"],content:["text-bold","text-red-500","font-bold"],footer:["flex","flex-row","items-center","justify-between","gap-4"]},variant:{},defaults:{}}),Qi=({textContent:t,textToast:e,callback:n,onCancel:r,invalidator:i,variant:s,tva:o=UG,css:l})=>{const c=o({...s,css:l}).slots,d=K.useContext(Wb),p=Xt({async mutationFn(){return Sz.promise(n(),mr(e))},async onSuccess(){await i?.(),d?.close()}});return f.jsxs("div",{className:c.base(),children:[f.jsx("div",{className:c.content(),children:t}),f.jsxs("div",{className:c.footer(),children:[f.jsx(Cn,{variant:{variant:"subtle",size:"sm"},iconEnabled:jo,onClick:()=>{d?.close(),r?.()},children:f.jsx(ee,{label:"Cancel (button)"})}),f.jsx(Cn,{variant:{variant:"danger",size:"md"},iconEnabled:Xr,onClick:()=>{p.mutate()},children:f.jsx(ee,{label:"Delete (button)"})})]})]})},VG=async({select:t,query:e=()=>t,filter:n,where:r})=>({total:(await t.clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,filter:(await e({select:e({select:t,where:r}),where:n}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,where:(await e({select:t,where:r}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count}),tu=async({select:t,query:e=()=>t,output:n,filter:r,where:i})=>n.parse(await e({select:e({select:t,where:i}),where:r}).executeTakeFirstOrThrow()),cs=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>{const o=l=>{let c=l;return s&&(c=l.limit(s.size).offset(s.page*s.size)),c};return U.array(n).parse(await o(e({select:e({select:t,where:i}),where:r})).execute())},sr=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>({data:await cs({select:t,output:n,where:i,filter:r,query:e,cursor:s}),count:await VG({select:t,where:i,filter:r,query:e})}),Xn=t=>{const e="input"in t?t.input:"input",n="output"in t?t.output:"output",r="schema"in t?t.schema._input:t._input,i="schema"in t?t.schema._output:t._output;return{types:{input:e==="output"?i:r,output:n==="input"?r:i},parse:s=>"schema"in t?t.schema.parse(s):t.parse(s)}},Zg=(t,e)=>U.custom().pipe(t.catch(e)),Er=({filter:t},{size:e=30}={size:30})=>U.object({filter:Zg(t.optional(),void 0),cursor:Zg(v9,{page:0,size:e}).default({page:0,size:e}),sort:Zg(U.any().optional(),[]).default([]),selection:Zg(U.array(U.string()),[]).default([])}),HG=yn({slot:{base:["w-full","flex","flex-col","items-center","justify-center"],title:["text-xl","text-bold"],message:["text-base","text-slate-500"],body:["pt-2"]},variant:{},defaults:{}}),UD=({textTitle:t,textMessage:e,icon:n,iconProps:r,variant:i,tva:s=HG,css:o,children:l})=>{const c=s({...i,css:o}).slots;return f.jsxs("div",{className:c.base(),children:[n?f.jsx(rn,{icon:n,variant:{size:"6xl"},css:{base:["text-slate-500","opacity-50"]},...r}):null,f.jsx("div",{className:c.title(),children:t}),f.jsx("div",{className:c.message(),children:e}),f.jsx("div",{className:c.body(),children:l})]})},vN=yn({slot:{base:["min-w-full","flex","flex-col","gap-2","text-sm"],table:["min-w-full","w-max","table-fixed"],thead:["border","border-slate-200","bg-slate-100"],th:["text-left","px-2","py-1","border-t","border-b","border-slate-300"],tbody:[],tr:["border-b","border-b-slate-200","odd:bg-slate-50","hover:bg-purple-100","hover:border-purple-300"],td:["px-2","py-1"],tfoot:[],select:["cursor-pointer","text-slate-400","hover:text-slate-600"]},variant:{selected:{true:[]}},match:[{if:{selected:!0},then:{tr:["bg-blue-100","odd:bg-blue-50","border-blue-300"],select:["text-slate-600"]}}],defaults:{selected:!1}}),QG=({table:t,cell:{column:e,data:n,value:r},variant:i,tva:s=vN,css:o})=>{const l=e.def.render,c=s({...i,css:o}).slots;return f.jsx("td",{className:c.td(),children:f.jsxs("div",{className:"group flex flex-row items-center gap-2 justify-between",children:[f.jsx(l,{table:t,data:n,value:r,context:t.context}),e.filter&&!e.filter.is()?f.jsx(rn,{icon:vK,css:{base:["group-hover:visible","invisible","opacity-50 hover:opacity-100","cursor-pointer"]},variant:{size:"xl"},onClick:()=>{e.filter&&(e.def.filter?.onFilter({data:n,filter:e.filter}),window.scrollTo({top:0,behavior:"smooth"}))}}):null]})})},KG=({table:t,row:e,action:n,variant:r,tva:i=vN,css:s})=>{const o=i({...r,css:s}).slots,l=n?.table,c=n?.row;return f.jsxs("tr",{className:o.tr({selected:t.selection.isSelected(e)}),children:[l||c||t.selection.enabled?f.jsx("td",{className:"w-0",children:f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?f.jsx(rn,{icon:t.selection.isSelected(e)?Qb:Hb,css:{base:o.select({selected:t.selection.isSelected(e)})},onClick:t.selection.withRowHandler(e)}):null,c?f.jsx(c,{table:t,data:e.data}):null]})}):null,e.cells.map(d=>f.jsx(QG,{table:t,cell:d,variant:r,tva:i,css:s},`${e.id}-${d.column.id}`)),f.jsx("td",{})]})},Nr=({table:t,fulltext:e,cursor:n,empty:r=()=>f.jsx(UD,{icon:yK,textTitle:f.jsx(ee,{label:"Nothing here"}),textMessage:f.jsx(ee,{label:"There is nothing to see right now."})}),action:i,variant:s,tva:o=vN,css:l})=>{const c=o({...s,css:l}).slots,d=i?.table,p=i?.row;return f.jsxs("div",{className:c.base(),children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center gap-6 w-1/3",children:e?f.jsx(SD,{value:e.value,onFulltext:e.set}):null}),f.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[f.jsx(Eq,{...n}),t.filter.is()&&f.jsx(gm,{iconEnabled:Oq,css:{base:["text-amber-500"]},onClick:()=>t.filter.reset()})]})]}),f.jsx("div",{className:"relative overflow-x-auto",children:f.jsxs("table",{className:c.table(),children:[f.jsx("thead",{className:c.thead(),children:f.jsxs("tr",{children:[d||p||t.selection.enabled?f.jsx("th",{className:"w-0",children:f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?f.jsx(rn,{icon:t.selection.isAll()?Qb:t.selection.isAny()?xK:Hb,variant:{disabled:t.selection.isSingle},css:{base:c.select({selected:t.selection.isAny()})},onClick:t.selection.withAllHandler()}):null,d?f.jsx(d,{table:t}):null]})}):null,t.visible.map(h=>{const b=h.def.header||(()=>null);return f.jsx("th",{className:c.th(),style:h.def.size?{width:`${h.def.size}rem`}:void 0,children:f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx(b,{table:t}),f.jsx("div",{className:"flex flex-row items-center gap-2",children:h.filter?.is()&&f.jsx(rn,{icon:Oq,variant:{size:"md"},css:{base:["opacity-50","hover:opacity-100","cursor-pointer"]},onClick:()=>{h.filter?.reset()}})})]})},h.id)}),f.jsx("th",{})]})}),t.isEmpty?null:f.jsx("tbody",{className:c.tbody(),children:t.rows?.map(h=>f.jsx(KG,{row:h,table:t,action:i,variant:s,tva:o,css:l},h.id))})]})}),t.isEmpty?f.jsx(r,{}):null,f.jsxs("div",{className:"flex flex-row items-center justify-end gap-2",children:[f.jsx("div",{}),f.jsx(Eq,{...n})]})]})},ci=[];for(let t=0;t<256;++t)ci.push((t+256).toString(16).slice(1));function GG(t,e=0){return(ci[t[e+0]]+ci[t[e+1]]+ci[t[e+2]]+ci[t[e+3]]+"-"+ci[t[e+4]]+ci[t[e+5]]+"-"+ci[t[e+6]]+ci[t[e+7]]+"-"+ci[t[e+8]]+ci[t[e+9]]+"-"+ci[t[e+10]]+ci[t[e+11]]+ci[t[e+12]]+ci[t[e+13]]+ci[t[e+14]]+ci[t[e+15]]).toLowerCase()}let E0;const ZG=new Uint8Array(16);function JG(){if(!E0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");E0=crypto.getRandomValues.bind(crypto)}return E0(ZG)}const YG=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qq={randomUUID:YG};function Kq(t,e,n){if(Qq.randomUUID&&!t)return Qq.randomUUID();t=t||{};const r=t.random??t.rng?.()??JG();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,GG(r)}const kr=({columns:t,order:e=t.map(c=>c.name),hidden:n=[],visible:r=t.map(c=>c.name),data:i,filter:s,selection:o,context:l})=>{const c={...s?.value||{}},d=GO(c),p=new Set(o?.value),h=t.map(x=>({id:Kq(),def:x,filter:x.filter?{is(){return x.filter?d.get(x.filter.path)!==void 0:!1},reset(){x.filter&&d.set(x.filter.path,void 0),s?.set({...c})},shallow(w,E){x.filter&&d.set(w,E),s?.set({...c})},set(w){s?.set({...w})}}:void 0})),b=h.filter(x=>r.includes(x.def.name)&&!n.includes(x.def.name)).sort((x,w)=>{const E=e.indexOf(x.def.name),I=e.indexOf(w.def.name);return(E===-1?1/0:E)-(I===-1?1/0:I)});return{columns:h,visible:b,rows:i?.map(x=>({id:Kq(),data:x,cells:b.map(w=>({column:w,data:x,value:GO(x).get(w.def.name)}))})),isEmpty:i.length===0,filter:{is(){return h.some(x=>x.filter?.is())},reset(){s?.set({})},set(x){s?.set({...x})},shallow(x,w){d.set(x,w)}},selection:{enabled:!!o&&i.length>0,selection:Array.from(p),isSingle:o?.type==="single",isMulti:o?.type==="multi",isSelected({data:x}){return p.has(x.id)||!1},isAll(){return i.every(x=>p.has(x.id))},isAny(){return i.some(x=>p.has(x.id))},withRowHandler({data:x}){return()=>{if(o?.type==="single"){const w=p.has(x.id);p.clear(),w?p.delete(x.id):p.add(x.id)}else p.has(x.id)?p.delete(x.id):p.add(x.id);o?.set(Array.from(p))}},withAllHandler(){return()=>{i.every(x=>p.has(x.id))?p.clear():i.forEach(({id:x})=>p.add(x)),o?.set(Array.from(p))}}},context:l}},Ir=()=>t=>t,VD=({tags:t=[],render:e=({tag:i})=>i.label,onClick:n,textEmpty:r})=>{const i=t.filter(Boolean).sort((s,o)=>s.sort-o.sort);return f.jsx("div",{className:"flex flex-wrap flex-row gap-2 items-center",children:i.length?i.map(s=>f.jsx(hs,{onClick:()=>n?.(s),children:e({tag:s})},s.id)):r||f.jsx(ee,{label:"No tags (label)"})})},XG=yn({slot:{base:["flex","flex-row","gap-2","items-center"],title:["flex","flex-row","gap-2","items-center","text-lg","text-slate-500","font-bold"],subtitle:["flex","flex-row","gap-4","items-center","text-lg"]},variant:{withSubtitle:{true:[]}},match:[{if:{withSubtitle:!0},then:{title:["border-r","border-r-slate-300","pr-2"]}}],defaults:{withSubtitle:!1}}),hf=({icon:t,title:e,subtitle:n,variant:r,tva:i=XG,css:s})=>{const o=i({withSubtitle:!!n,...r,css:s}).slots;return f.jsxs("div",{className:o.base(),children:[f.jsxs("div",{className:o.title(),children:[t?f.jsx(rn,{icon:t}):null,e]}),n?f.jsx("div",{className:o.subtitle(),children:n}):null]})};var Jg={},Gq;function eZ(){if(Gq)return Jg;Gq=1;var t=U3();return Jg.createRoot=t.createRoot,Jg.hydrateRoot=t.hydrateRoot,Jg}var tZ=eZ();const nZ=io(tZ),bN=u4()({component:()=>f.jsxs(f.Fragment,{children:[f.jsx(q4,{}),f.jsx(oo,{})]})}),rZ="modulepreload",iZ=function(t){return"/"+t},Zq={},Jq=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(n.map(c=>{if(c=iZ(c),c in Zq)return;Zq[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":rZ,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((b,x)=>{h.addEventListener("load",b),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},sZ=Wt("/$locale")({component:oo,loader:async({params:{locale:t}})=>{try{Bl.push((await oZ(`../translation/${t}.yaml`)).default)}catch(e){console.error(e)}}});function oZ(t){switch(t){case"../translation/cs":case"../translation/cs.yaml":return Jq(()=>import("./cs-BdGxy_qT.js"),[]);case"../translation/en":case"../translation/en.yaml":return Jq(()=>import("./en-CLh3C8Ec.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const HD="cs",aZ=[HD,"en"],lZ=Wt("/")({loader:async()=>{throw Gh({to:"/$locale",params:{locale:v5({available:aZ,fallback:HD})}})}}),uZ=Wt("/$locale/")({component:()=>{const{locale:t}=un({from:"/$locale"});return f.jsx("div",{className:"flex flex-col items-center justify-center h-screen w-screen",children:f.jsxs("div",{className:"rounded bg-slate-50 p-4 shadow-md border border-slate-300",children:[f.jsx("h1",{className:"text-3xl text-center",children:"Apps"}),f.jsx("ul",{children:f.jsx("li",{children:f.jsx(Zt,{icon:"icon-[bx--game]",to:"/$locale/apps/derivean/public/login",params:{locale:t},children:"DeRivean"})})})]})})}}),{kysely:Ot,bootstrap:cZ}=dK({database:"derivean",async bootstrap({kysely:t}){const e="varchar(36)";try{await t.selectFrom("User").select(n=>n.fn.countAll().as("count")).executeTakeFirstOrThrow()}catch{await t.schema.createTable("User").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("login","varchar(128)",r=>r.notNull()).addColumn("password","varchar(256)",r=>r.notNull()).addUniqueConstraint("[User] login",["login"]).execute(),await t.schema.createTable("Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("code","varchar(64)",r=>r.notNull()).addColumn("label","varchar(128)",r=>r.notNull()).addColumn("group","varchar(64)").addColumn("sort","integer",r=>r.notNull().defaultTo(0)).addUniqueConstraint("Tag_code_group",["code","group"]).execute(),await t.schema.createTable("Cycle").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("stamp","datetime",r=>r.defaultTo(Pr`CURRENT_TIMESTAMP`).notNull()).execute(),await t.schema.createTable("Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addUniqueConstraint("[Resource] name",["name"]).execute(),await t.schema.createTable("Resource_Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("tagId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] tagId",["tagId"],"Tag",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Resource_Tag] resourceId-tagId",["resourceId","tagId"]).execute(),await t.schema.createTable("Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("limit","float4",r=>r.notNull()).execute(),await t.schema.createTable("Default_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Default_Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("limit","float4",r=>r.notNull()).addUniqueConstraint("[Default_Inventory] resourceId",["resourceId"]).execute(),await t.schema.createTable("User_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[User_Inventory] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[User_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[User_Inventory] userId-inventoryId",["userId","inventoryId"]).execute(),await t.schema.createTable("Blueprint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).addColumn("sort","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Blueprint] name",["name"]).execute(),await t.schema.createTable("Blueprint_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Inventory] blueprintId-inventoryId",["blueprintId","inventoryId"]).execute(),await t.schema.createTable("Blueprint_Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).execute(),await t.schema.createTable("Blueprint_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Requirement] blueprintId-requirementId",["blueprintId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("dependencyId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] dependencyId",["dependencyId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Dependency] blueprintId-dependencyId",["blueprintId","dependencyId"]).execute(),await t.schema.createTable("Blueprint_Conflict").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("conflictId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] conflictId",["conflictId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Conflict] blueprintId-conflictId",["blueprintId","conflictId"]).execute(),await t.schema.createTable("Blueprint_Production_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Requirement] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Production_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-blueprintId",["blueprintProductionId","blueprintId"]).execute(),await t.schema.createTable("Blueprint_Production_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("from","integer",r=>r.notNull()).addColumn("to","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Production_Queue").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("count","integer",r=>r.notNull().defaultTo(0)).addColumn("limit","integer",r=>r.notNull().defaultTo(0)).addColumn("priority","integer",r=>r.notNull().defaultTo(0)).addColumn("paused","boolean",r=>r.notNull().defaultTo(!1)).addUniqueConstraint("[Production_Queue] userId-blueprintProductionId",["blueprintProductionId","userId"]).execute(),await t.schema.createTable("Construction").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Construction] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Construction] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","float4",r=>r.notNull().defaultTo(0)).addColumn("y","float4",r=>r.notNull().defaultTo(0)).addColumn("plan","boolean",r=>r.notNull().defaultTo(!0)).addColumn("valid","boolean",r=>r.notNull().defaultTo(!0)).addColumn("from","integer",r=>r.notNull()).addColumn("to","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","float4",r=>r.notNull().defaultTo(0)).addColumn("y","float4",r=>r.notNull().defaultTo(0)).execute(),await t.schema.createTable("Building_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Inventory] buildingId-inventoryId",["buildingId","inventoryId"]).execute(),await t.schema.createTable("Route").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("fromId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] fromId",["fromId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("toId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] toId",["toId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Route] userId-fromId-toId",["userId","fromId","toId"]).execute(),await t.schema.createTable("Route_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("routeId",e,r=>r.notNull()).addForeignKeyConstraint("[Route_Resource] routeId",["routeId"],"Route",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Route_Resource] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4").execute()}}}),dZ=Wt("/$locale/apps/derivean")({loader:cZ}),xN="icon-[proicons--game]",fZ=yn({slot:{base:["text-orange-500","font-bold","text-2xl","shadow-md","hover:shadow-lg","hover:text-orange-600","rounded","px-2","py-1","bg-slate-100"]},variant:{},defaults:{}}),QD=({variant:t,tva:e=fZ,css:n})=>{const r=e({...t,css:n}).slots;return f.jsx("div",{className:r.base(),children:"DeRivean"})},Ua="icon-[fluent--building-shop-20-regular]",ki="icon-[mingcute--inventory-line]",Un="icon-[hugeicons--resources-add]",pZ=t=>{const{locale:e}=un({from:"/$locale"});return f.jsxs(eu,{...t,children:[f.jsx(Fn,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},children:f.jsx(ee,{label:"Editor (menu)"})}),f.jsx(Fn,{icon:Ua,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/blueprint/$id/view"},{to:"/$locale/apps/derivean/root/blueprint/$id/dependencies"},{to:"/$locale/apps/derivean/root/blueprint/$id/production"},{to:"/$locale/apps/derivean/root/blueprint/$id/requirements"},{to:"/$locale/apps/derivean/root/blueprint/$id/edit"},{to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements"}],children:f.jsx(ee,{label:"Blueprint list (menu)"})}),f.jsx(Fn,{icon:Un,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:f.jsx(ee,{label:"Resource list (menu)"})}),f.jsx(Fn,{icon:ki,to:"/$locale/apps/derivean/root/default/inventory",params:{locale:e},children:f.jsx(ee,{label:"Default inventory (menu)"})}),f.jsx(Fn,{icon:yN,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/user/$id/view"},{to:"/$locale/apps/derivean/root/user/$id/building/list"},{to:"/$locale/apps/derivean/root/user/$id/inventory"}],children:f.jsx(ee,{label:"User list (menu)"})}),f.jsx(Fn,{icon:jh,to:"/$locale/apps/derivean/root/tag/list",params:{locale:e},children:f.jsx(ee,{label:"Tag list (menu)"})})]})},ym=U.object({id:U.string(),name:U.string(),login:U.string()}),hZ=Wt("/$locale/apps/derivean/root")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return ym.parse(df.get("session"))}catch{throw Gh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{session:t}}){return{session:await t()}},component:()=>{const{locale:t}=un({from:"/$locale"}),{session:e}=so({from:"/$locale/apps/derivean/root"});return f.jsx($D,{logo:f.jsx(Zt,{to:"/$locale/apps/derivean/root",params:{locale:t},children:f.jsx(QD,{})}),menu:f.jsx(pZ,{}),actions:f.jsxs(f.Fragment,{children:[e.name,f.jsx(Zt,{icon:xN,to:"/$locale/apps/derivean/game",params:{locale:t}}),f.jsx(Zt,{icon:gN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]})})}});function ei(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=ei(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var mZ={value:()=>{}};function Gb(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ry(n)}function Ry(t){this._=t}function gZ(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ry.prototype=Gb.prototype={constructor:Ry,on:function(t,e){var n=this._,r=gZ(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=yZ(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Yq(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Yq(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ry(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function yZ(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Yq(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=mZ,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var UE="http://www.w3.org/1999/xhtml";const Xq={svg:"http://www.w3.org/2000/svg",xhtml:UE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zb(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Xq.hasOwnProperty(e)?{space:Xq[e],local:t}:t}function vZ(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===UE&&e.documentElement.namespaceURI===UE?e.createElement(t):e.createElementNS(n,t)}}function bZ(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function KD(t){var e=Zb(t);return(e.local?bZ:vZ)(e)}function xZ(){}function _N(t){return t==null?xZ:function(){return this.querySelector(t)}}function _Z(t){typeof t!="function"&&(t=_N(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),c,d,p=0;p<o;++p)(c=s[p])&&(d=t.call(c,c.__data__,p,s))&&("__data__"in c&&(d.__data__=c.__data__),l[p]=d);return new As(r,this._parents)}function wZ(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function SZ(){return[]}function GD(t){return t==null?SZ:function(){return this.querySelectorAll(t)}}function EZ(t){return function(){return wZ(t.apply(this,arguments))}}function NZ(t){typeof t=="function"?t=EZ(t):t=GD(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],l=o.length,c,d=0;d<l;++d)(c=o[d])&&(r.push(t.call(c,c.__data__,d,o)),i.push(c));return new As(r,i)}function ZD(t){return function(){return this.matches(t)}}function JD(t){return function(e){return e.matches(t)}}var kZ=Array.prototype.find;function IZ(t){return function(){return kZ.call(this.children,t)}}function CZ(){return this.firstElementChild}function TZ(t){return this.select(t==null?CZ:IZ(typeof t=="function"?t:JD(t)))}var OZ=Array.prototype.filter;function qZ(){return Array.from(this.children)}function RZ(t){return function(){return OZ.call(this.children,t)}}function jZ(t){return this.selectAll(t==null?qZ:RZ(typeof t=="function"?t:JD(t)))}function AZ(t){typeof t!="function"&&(t=ZD(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],c,d=0;d<o;++d)(c=s[d])&&t.call(c,c.__data__,d,s)&&l.push(c);return new As(r,this._parents)}function YD(t){return new Array(t.length)}function PZ(){return new As(this._enter||this._groups.map(YD),this._parents)}function Vv(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Vv.prototype={constructor:Vv,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function FZ(t){return function(){return t}}function DZ(t,e,n,r,i,s){for(var o=0,l,c=e.length,d=s.length;o<d;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):n[o]=new Vv(t,s[o]);for(;o<c;++o)(l=e[o])&&(i[o]=l)}function LZ(t,e,n,r,i,s,o){var l,c,d=new Map,p=e.length,h=s.length,b=new Array(p),x;for(l=0;l<p;++l)(c=e[l])&&(b[l]=x=o.call(c,c.__data__,l,e)+"",d.has(x)?i[l]=c:d.set(x,c));for(l=0;l<h;++l)x=o.call(t,s[l],l,s)+"",(c=d.get(x))?(r[l]=c,c.__data__=s[l],d.delete(x)):n[l]=new Vv(t,s[l]);for(l=0;l<p;++l)(c=e[l])&&d.get(b[l])===c&&(i[l]=c)}function MZ(t){return t.__data__}function $Z(t,e){if(!arguments.length)return Array.from(this,MZ);var n=e?LZ:DZ,r=this._parents,i=this._groups;typeof t!="function"&&(t=FZ(t));for(var s=i.length,o=new Array(s),l=new Array(s),c=new Array(s),d=0;d<s;++d){var p=r[d],h=i[d],b=h.length,x=BZ(t.call(p,p&&p.__data__,d,r)),w=x.length,E=l[d]=new Array(w),I=o[d]=new Array(w),T=c[d]=new Array(b);n(p,h,E,I,T,x,e);for(var O=0,q=0,A,D;O<w;++O)if(A=E[O]){for(O>=q&&(q=O+1);!(D=I[q])&&++q<w;);A._next=D||null}}return o=new As(o,r),o._enter=l,o._exit=c,o}function BZ(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zZ(){return new As(this._exit||this._groups.map(YD),this._parents)}function WZ(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function UZ(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),c=0;c<o;++c)for(var d=n[c],p=r[c],h=d.length,b=l[c]=new Array(h),x,w=0;w<h;++w)(x=d[w]||p[w])&&(b[w]=x);for(;c<i;++c)l[c]=n[c];return new As(l,this._parents)}function VZ(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function HZ(t){t||(t=QZ);function e(h,b){return h&&b?t(h.__data__,b.__data__):!h-!b}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,c=i[s]=new Array(l),d,p=0;p<l;++p)(d=o[p])&&(c[p]=d);c.sort(e)}return new As(i,this._parents).order()}function QZ(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function KZ(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function GZ(){return Array.from(this)}function ZZ(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function JZ(){let t=0;for(const e of this)++t;return t}function YZ(){return!this.node()}function XZ(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function eJ(t){return function(){this.removeAttribute(t)}}function tJ(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nJ(t,e){return function(){this.setAttribute(t,e)}}function rJ(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function iJ(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function sJ(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function oJ(t,e){var n=Zb(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?tJ:eJ:typeof e=="function"?n.local?sJ:iJ:n.local?rJ:nJ)(n,e))}function XD(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function aJ(t){return function(){this.style.removeProperty(t)}}function lJ(t,e,n){return function(){this.style.setProperty(t,e,n)}}function uJ(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function cJ(t,e,n){return arguments.length>1?this.each((e==null?aJ:typeof e=="function"?uJ:lJ)(t,e,n??"")):Ud(this.node(),t)}function Ud(t,e){return t.style.getPropertyValue(e)||XD(t).getComputedStyle(t,null).getPropertyValue(e)}function dJ(t){return function(){delete this[t]}}function fJ(t,e){return function(){this[t]=e}}function pJ(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function hJ(t,e){return arguments.length>1?this.each((e==null?dJ:typeof e=="function"?pJ:fJ)(t,e)):this.node()[t]}function e2(t){return t.trim().split(/^|\s+/)}function wN(t){return t.classList||new t2(t)}function t2(t){this._node=t,this._names=e2(t.getAttribute("class")||"")}t2.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function n2(t,e){for(var n=wN(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function r2(t,e){for(var n=wN(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function mJ(t){return function(){n2(this,t)}}function gJ(t){return function(){r2(this,t)}}function yJ(t,e){return function(){(e.apply(this,arguments)?n2:r2)(this,t)}}function vJ(t,e){var n=e2(t+"");if(arguments.length<2){for(var r=wN(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?yJ:e?mJ:gJ)(n,e))}function bJ(){this.textContent=""}function xJ(t){return function(){this.textContent=t}}function _J(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function wJ(t){return arguments.length?this.each(t==null?bJ:(typeof t=="function"?_J:xJ)(t)):this.node().textContent}function SJ(){this.innerHTML=""}function EJ(t){return function(){this.innerHTML=t}}function NJ(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function kJ(t){return arguments.length?this.each(t==null?SJ:(typeof t=="function"?NJ:EJ)(t)):this.node().innerHTML}function IJ(){this.nextSibling&&this.parentNode.appendChild(this)}function CJ(){return this.each(IJ)}function TJ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function OJ(){return this.each(TJ)}function qJ(t){var e=typeof t=="function"?t:KD(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function RJ(){return null}function jJ(t,e){var n=typeof t=="function"?t:KD(t),r=e==null?RJ:typeof e=="function"?e:_N(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function AJ(){var t=this.parentNode;t&&t.removeChild(this)}function PJ(){return this.each(AJ)}function FJ(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function DJ(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function LJ(t){return this.select(t?DJ:FJ)}function MJ(t){return arguments.length?this.property("__data__",t):this.node().__data__}function $J(t){return function(e){t.call(this,e,this.__data__)}}function BJ(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function zJ(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function WJ(t,e,n){return function(){var r=this.__on,i,s=$J(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function UJ(t,e,n){var r=BJ(t+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,d=l.length,p;c<d;++c)for(i=0,p=l[c];i<s;++i)if((o=r[i]).type===p.type&&o.name===p.name)return p.value}return}for(l=e?WJ:zJ,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function i2(t,e,n){var r=XD(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function VJ(t,e){return function(){return i2(this,t,e)}}function HJ(t,e){return function(){return i2(this,t,e.apply(this,arguments))}}function QJ(t,e){return this.each((typeof e=="function"?HJ:VJ)(t,e))}function*KJ(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var s2=[null];function As(t,e){this._groups=t,this._parents=e}function vm(){return new As([[document.documentElement]],s2)}function GJ(){return this}As.prototype=vm.prototype={constructor:As,select:_Z,selectAll:NZ,selectChild:TZ,selectChildren:jZ,filter:AZ,data:$Z,enter:PZ,exit:zZ,join:WZ,merge:UZ,selection:GJ,order:VZ,sort:HZ,call:KZ,nodes:GZ,node:ZZ,size:JZ,empty:YZ,each:XZ,attr:oJ,style:cJ,property:hJ,classed:vJ,text:wJ,html:kJ,raise:CJ,lower:OJ,append:qJ,insert:jJ,remove:PJ,clone:LJ,datum:MJ,on:UJ,dispatch:QJ,[Symbol.iterator]:KJ};function Ts(t){return typeof t=="string"?new As([[document.querySelector(t)]],[document.documentElement]):new As([[t]],s2)}function ZJ(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xo(t,e){if(t=ZJ(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const JJ={passive:!1},Ph={capture:!0,passive:!1};function N0(t){t.stopImmediatePropagation()}function Od(t){t.preventDefault(),t.stopImmediatePropagation()}function o2(t){var e=t.document.documentElement,n=Ts(t).on("dragstart.drag",Od,Ph);"onselectstart"in e?n.on("selectstart.drag",Od,Ph):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function a2(t,e){var n=t.document.documentElement,r=Ts(t).on("dragstart.drag",null);e&&(r.on("click.drag",Od,Ph),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Yg=t=>()=>t;function VE(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:c,dy:d,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:p}})}VE.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function YJ(t){return!t.ctrlKey&&!t.button}function XJ(){return this.parentNode}function eY(t,e){return e??{x:t.x,y:t.y}}function tY(){return navigator.maxTouchPoints||"ontouchstart"in this}function l2(){var t=YJ,e=XJ,n=eY,r=tY,i={},s=Gb("start","drag","end"),o=0,l,c,d,p,h=0;function b(A){A.on("mousedown.drag",x).filter(r).on("touchstart.drag",I).on("touchmove.drag",T,JJ).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(A,D){if(!(p||!t.call(this,A,D))){var L=q(this,e.call(this,A,D),A,D,"mouse");L&&(Ts(A.view).on("mousemove.drag",w,Ph).on("mouseup.drag",E,Ph),o2(A.view),N0(A),d=!1,l=A.clientX,c=A.clientY,L("start",A))}}function w(A){if(Od(A),!d){var D=A.clientX-l,L=A.clientY-c;d=D*D+L*L>h}i.mouse("drag",A)}function E(A){Ts(A.view).on("mousemove.drag mouseup.drag",null),a2(A.view,d),Od(A),i.mouse("end",A)}function I(A,D){if(t.call(this,A,D)){var L=A.changedTouches,z=e.call(this,A,D),P=L.length,R,M;for(R=0;R<P;++R)(M=q(this,z,A,D,L[R].identifier,L[R]))&&(N0(A),M("start",A,L[R]))}}function T(A){var D=A.changedTouches,L=D.length,z,P;for(z=0;z<L;++z)(P=i[D[z].identifier])&&(Od(A),P("drag",A,D[z]))}function O(A){var D=A.changedTouches,L=D.length,z,P;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),z=0;z<L;++z)(P=i[D[z].identifier])&&(N0(A),P("end",A,D[z]))}function q(A,D,L,z,P,R){var M=s.copy(),F=xo(R||L,D),W,V,B;if((B=n.call(A,new VE("beforestart",{sourceEvent:L,target:b,identifier:P,active:o,x:F[0],y:F[1],dx:0,dy:0,dispatch:M}),z))!=null)return W=B.x-F[0]||0,V=B.y-F[1]||0,function te(J,le,se){var ne=F,oe;switch(J){case"start":i[P]=te,oe=o++;break;case"end":delete i[P],--o;case"drag":F=xo(se||le,D),oe=o;break}M.call(J,A,new VE(J,{sourceEvent:le,subject:B,target:b,identifier:P,active:oe,x:F[0]+W,y:F[1]+V,dx:F[0]-ne[0],dy:F[1]-ne[1],dispatch:M}),z)}}return b.filter=function(A){return arguments.length?(t=typeof A=="function"?A:Yg(!!A),b):t},b.container=function(A){return arguments.length?(e=typeof A=="function"?A:Yg(A),b):e},b.subject=function(A){return arguments.length?(n=typeof A=="function"?A:Yg(A),b):n},b.touchable=function(A){return arguments.length?(r=typeof A=="function"?A:Yg(!!A),b):r},b.on=function(){var A=s.on.apply(s,arguments);return A===s?b:A},b.clickDistance=function(A){return arguments.length?(h=(A=+A)*A,b):Math.sqrt(h)},b}function SN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function u2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function bm(){}var Fh=.7,Hv=1/Fh,qd="\\s*([+-]?\\d+)\\s*",Dh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nY=/^#([0-9a-f]{3,8})$/,rY=new RegExp(`^rgb\\(${qd},${qd},${qd}\\)$`),iY=new RegExp(`^rgb\\(${Yo},${Yo},${Yo}\\)$`),sY=new RegExp(`^rgba\\(${qd},${qd},${qd},${Dh}\\)$`),oY=new RegExp(`^rgba\\(${Yo},${Yo},${Yo},${Dh}\\)$`),aY=new RegExp(`^hsl\\(${Dh},${Yo},${Yo}\\)$`),lY=new RegExp(`^hsla\\(${Dh},${Yo},${Yo},${Dh}\\)$`),eR={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};SN(bm,Lh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:tR,formatHex:tR,formatHex8:uY,formatHsl:cY,formatRgb:nR,toString:nR});function tR(){return this.rgb().formatHex()}function uY(){return this.rgb().formatHex8()}function cY(){return c2(this).formatHsl()}function nR(){return this.rgb().formatRgb()}function Lh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=nY.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rR(e):n===3?new ds(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Xg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Xg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=rY.exec(t))?new ds(e[1],e[2],e[3],1):(e=iY.exec(t))?new ds(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=sY.exec(t))?Xg(e[1],e[2],e[3],e[4]):(e=oY.exec(t))?Xg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=aY.exec(t))?oR(e[1],e[2]/100,e[3]/100,1):(e=lY.exec(t))?oR(e[1],e[2]/100,e[3]/100,e[4]):eR.hasOwnProperty(t)?rR(eR[t]):t==="transparent"?new ds(NaN,NaN,NaN,0):null}function rR(t){return new ds(t>>16&255,t>>8&255,t&255,1)}function Xg(t,e,n,r){return r<=0&&(t=e=n=NaN),new ds(t,e,n,r)}function dY(t){return t instanceof bm||(t=Lh(t)),t?(t=t.rgb(),new ds(t.r,t.g,t.b,t.opacity)):new ds}function HE(t,e,n,r){return arguments.length===1?dY(t):new ds(t,e,n,r??1)}function ds(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}SN(ds,HE,u2(bm,{brighter(t){return t=t==null?Hv:Math.pow(Hv,t),new ds(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Fh:Math.pow(Fh,t),new ds(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ds(Hu(this.r),Hu(this.g),Hu(this.b),Qv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iR,formatHex:iR,formatHex8:fY,formatRgb:sR,toString:sR}));function iR(){return`#${Bu(this.r)}${Bu(this.g)}${Bu(this.b)}`}function fY(){return`#${Bu(this.r)}${Bu(this.g)}${Bu(this.b)}${Bu((isNaN(this.opacity)?1:this.opacity)*255)}`}function sR(){const t=Qv(this.opacity);return`${t===1?"rgb(":"rgba("}${Hu(this.r)}, ${Hu(this.g)}, ${Hu(this.b)}${t===1?")":`, ${t})`}`}function Qv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Hu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Bu(t){return t=Hu(t),(t<16?"0":"")+t.toString(16)}function oR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new So(t,e,n,r)}function c2(t){if(t instanceof So)return new So(t.h,t.s,t.l,t.opacity);if(t instanceof bm||(t=Lh(t)),!t)return new So;if(t instanceof So)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new So(o,l,c,t.opacity)}function pY(t,e,n,r){return arguments.length===1?c2(t):new So(t,e,n,r??1)}function So(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}SN(So,pY,u2(bm,{brighter(t){return t=t==null?Hv:Math.pow(Hv,t),new So(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Fh:Math.pow(Fh,t),new So(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ds(k0(t>=240?t-240:t+120,i,r),k0(t,i,r),k0(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new So(aR(this.h),ey(this.s),ey(this.l),Qv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qv(this.opacity);return`${t===1?"hsl(":"hsla("}${aR(this.h)}, ${ey(this.s)*100}%, ${ey(this.l)*100}%${t===1?")":`, ${t})`}`}}));function aR(t){return t=(t||0)%360,t<0?t+360:t}function ey(t){return Math.max(0,Math.min(1,t||0))}function k0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const d2=t=>()=>t;function hY(t,e){return function(n){return t+n*e}}function mY(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function gY(t){return(t=+t)==1?f2:function(e,n){return n-e?mY(e,n,t):d2(isNaN(e)?n:e)}}function f2(t,e){var n=e-t;return n?hY(t,n):d2(isNaN(t)?e:t)}const lR=function t(e){var n=gY(e);function r(i,s){var o=n((i=HE(i)).r,(s=HE(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),d=f2(i.opacity,s.opacity);return function(p){return i.r=o(p),i.g=l(p),i.b=c(p),i.opacity=d(p),i+""}}return r.gamma=t,r}(1);function Sl(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var QE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,I0=new RegExp(QE.source,"g");function yY(t){return function(){return t}}function vY(t){return function(e){return t(e)+""}}function bY(t,e){var n=QE.lastIndex=I0.lastIndex=0,r,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(r=QE.exec(t))&&(i=I0.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Sl(r,i)})),n=I0.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?vY(c[0].x):yY(e):(e=c.length,function(d){for(var p=0,h;p<e;++p)l[(h=c[p]).i]=h.x(d);return l.join("")})}var uR=180/Math.PI,KE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function p2(t,e,n,r,i,s){var o,l,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*uR,skewX:Math.atan(c)*uR,scaleX:o,scaleY:l}}var ty;function xY(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?KE:p2(e.a,e.b,e.c,e.d,e.e,e.f)}function _Y(t){return t==null||(ty||(ty=document.createElementNS("http://www.w3.org/2000/svg","g")),ty.setAttribute("transform",t),!(t=ty.transform.baseVal.consolidate()))?KE:(t=t.matrix,p2(t.a,t.b,t.c,t.d,t.e,t.f))}function h2(t,e,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,p,h,b,x,w){if(d!==h||p!==b){var E=x.push("translate(",null,e,null,n);w.push({i:E-4,x:Sl(d,h)},{i:E-2,x:Sl(p,b)})}else(h||b)&&x.push("translate("+h+e+b+n)}function o(d,p,h,b){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),b.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Sl(d,p)})):p&&h.push(i(h)+"rotate("+p+r)}function l(d,p,h,b){d!==p?b.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Sl(d,p)}):p&&h.push(i(h)+"skewX("+p+r)}function c(d,p,h,b,x,w){if(d!==h||p!==b){var E=x.push(i(x)+"scale(",null,",",null,")");w.push({i:E-4,x:Sl(d,h)},{i:E-2,x:Sl(p,b)})}else(h!==1||b!==1)&&x.push(i(x)+"scale("+h+","+b+")")}return function(d,p){var h=[],b=[];return d=t(d),p=t(p),s(d.translateX,d.translateY,p.translateX,p.translateY,h,b),o(d.rotate,p.rotate,h,b),l(d.skewX,p.skewX,h,b),c(d.scaleX,d.scaleY,p.scaleX,p.scaleY,h,b),d=p=null,function(x){for(var w=-1,E=b.length,I;++w<E;)h[(I=b[w]).i]=I.x(x);return h.join("")}}}var wY=h2(xY,"px, ","px)","deg)"),SY=h2(_Y,", ",")",")"),EY=1e-12;function cR(t){return((t=Math.exp(t))+1/t)/2}function NY(t){return((t=Math.exp(t))-1/t)/2}function kY(t){return((t=Math.exp(2*t))-1)/(t+1)}const IY=function t(e,n,r){function i(s,o){var l=s[0],c=s[1],d=s[2],p=o[0],h=o[1],b=o[2],x=p-l,w=h-c,E=x*x+w*w,I,T;if(E<EY)T=Math.log(b/d)/e,I=function(z){return[l+z*x,c+z*w,d*Math.exp(e*z*T)]};else{var O=Math.sqrt(E),q=(b*b-d*d+r*E)/(2*d*n*O),A=(b*b-d*d-r*E)/(2*b*n*O),D=Math.log(Math.sqrt(q*q+1)-q),L=Math.log(Math.sqrt(A*A+1)-A);T=(L-D)/e,I=function(z){var P=z*T,R=cR(D),M=d/(n*O)*(R*kY(e*P+D)-NY(D));return[l+M*x,c+M*w,d*R/cR(e*P+D)]}}return I.duration=T*1e3*e/Math.SQRT2,I}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,c=l*l;return t(o,l,c)},i}(Math.SQRT2,2,4);var Vd=0,Op=0,gp=0,m2=1e3,Kv,qp,Gv=0,ic=0,Jb=0,Mh=typeof performance=="object"&&performance.now?performance:Date,g2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function EN(){return ic||(g2(CY),ic=Mh.now()+Jb)}function CY(){ic=0}function Zv(){this._call=this._time=this._next=null}Zv.prototype=y2.prototype={constructor:Zv,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?EN():+n)+(e==null?0:+e),!this._next&&qp!==this&&(qp?qp._next=this:Kv=this,qp=this),this._call=t,this._time=n,GE()},stop:function(){this._call&&(this._call=null,this._time=1/0,GE())}};function y2(t,e,n){var r=new Zv;return r.restart(t,e,n),r}function TY(){EN(),++Vd;for(var t=Kv,e;t;)(e=ic-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Vd}function dR(){ic=(Gv=Mh.now())+Jb,Vd=Op=0;try{TY()}finally{Vd=0,qY(),ic=0}}function OY(){var t=Mh.now(),e=t-Gv;e>m2&&(Jb-=e,Gv=t)}function qY(){for(var t,e=Kv,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Kv=n);qp=t,GE(r)}function GE(t){if(!Vd){Op&&(Op=clearTimeout(Op));var e=t-ic;e>24?(t<1/0&&(Op=setTimeout(dR,t-Mh.now()-Jb)),gp&&(gp=clearInterval(gp))):(gp||(Gv=Mh.now(),gp=setInterval(OY,m2)),Vd=1,g2(dR))}}function fR(t,e,n){var r=new Zv;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var RY=Gb("start","end","cancel","interrupt"),jY=[],v2=0,pR=1,ZE=2,jy=3,hR=4,JE=5,Ay=6;function Yb(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;AY(t,n,{name:e,index:r,group:i,on:RY,tween:jY,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:v2})}function NN(t,e){var n=Do(t,e);if(n.state>v2)throw new Error("too late; already scheduled");return n}function la(t,e){var n=Do(t,e);if(n.state>jy)throw new Error("too late; already running");return n}function Do(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function AY(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=y2(s,0,n.time);function s(d){n.state=pR,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var p,h,b,x;if(n.state!==pR)return c();for(p in r)if(x=r[p],x.name===n.name){if(x.state===jy)return fR(o);x.state===hR?(x.state=Ay,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[p]):+p<e&&(x.state=Ay,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[p])}if(fR(function(){n.state===jy&&(n.state=hR,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=ZE,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ZE){for(n.state=jy,i=new Array(b=n.tween.length),p=0,h=-1;p<b;++p)(x=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=x);i.length=h+1}}function l(d){for(var p=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(c),n.state=JE,1),h=-1,b=i.length;++h<b;)i[h].call(t,p);n.state===JE&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Ay,n.timer.stop(),delete r[e];for(var d in r)return;delete t.__transition}}function Py(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>ZE&&r.state<JE,r.state=Ay,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function PY(t){return this.each(function(){Py(this,t)})}function FY(t,e){var n,r;return function(){var i=la(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function DY(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=la(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},c=0,d=i.length;c<d;++c)if(i[c].name===e){i[c]=l;break}c===d&&i.push(l)}s.tween=i}}function LY(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Do(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?FY:DY)(n,t,e))}function kN(t,e,n){var r=t._id;return t.each(function(){var i=la(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Do(i,r).value[e]}}function b2(t,e){var n;return(typeof e=="number"?Sl:e instanceof Lh?lR:(n=Lh(e))?(e=n,lR):bY)(t,e)}function MY(t){return function(){this.removeAttribute(t)}}function $Y(t){return function(){this.removeAttributeNS(t.space,t.local)}}function BY(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function zY(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function WY(t,e,n){var r,i,s;return function(){var o,l=n(this),c;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=l+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,l)))}}function UY(t,e,n){var r,i,s;return function(){var o,l=n(this),c;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=l+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,l)))}}function VY(t,e){var n=Zb(t),r=n==="transform"?SY:b2;return this.attrTween(t,typeof e=="function"?(n.local?UY:WY)(n,r,kN(this,"attr."+t,e)):e==null?(n.local?$Y:MY)(n):(n.local?zY:BY)(n,r,e))}function HY(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function QY(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function KY(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&QY(t,s)),n}return i._value=e,i}function GY(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&HY(t,s)),n}return i._value=e,i}function ZY(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Zb(t);return this.tween(n,(r.local?KY:GY)(r,e))}function JY(t,e){return function(){NN(this,t).delay=+e.apply(this,arguments)}}function YY(t,e){return e=+e,function(){NN(this,t).delay=e}}function XY(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?JY:YY)(e,t)):Do(this.node(),e).delay}function eX(t,e){return function(){la(this,t).duration=+e.apply(this,arguments)}}function tX(t,e){return e=+e,function(){la(this,t).duration=e}}function nX(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?eX:tX)(e,t)):Do(this.node(),e).duration}function rX(t,e){if(typeof e!="function")throw new Error;return function(){la(this,t).ease=e}}function iX(t){var e=this._id;return arguments.length?this.each(rX(e,t)):Do(this.node(),e).ease}function sX(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;la(this,t).ease=n}}function oX(t){if(typeof t!="function")throw new Error;return this.each(sX(this._id,t))}function aX(t){typeof t!="function"&&(t=ZD(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],c,d=0;d<o;++d)(c=s[d])&&t.call(c,c.__data__,d,s)&&l.push(c);return new Wa(r,this._parents,this._name,this._id)}function lX(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var c=e[l],d=n[l],p=c.length,h=o[l]=new Array(p),b,x=0;x<p;++x)(b=c[x]||d[x])&&(h[x]=b);for(;l<r;++l)o[l]=e[l];return new Wa(o,this._parents,this._name,this._id)}function uX(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function cX(t,e,n){var r,i,s=uX(e)?NN:la;return function(){var o=s(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function dX(t,e){var n=this._id;return arguments.length<2?Do(this.node(),n).on.on(t):this.each(cX(n,t,e))}function fX(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function pX(){return this.on("end.remove",fX(this._id))}function hX(t){var e=this._name,n=this._id;typeof t!="function"&&(t=_N(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],c=l.length,d=s[o]=new Array(c),p,h,b=0;b<c;++b)(p=l[b])&&(h=t.call(p,p.__data__,b,l))&&("__data__"in p&&(h.__data__=p.__data__),d[b]=h,Yb(d[b],e,n,b,d,Do(p,n)));return new Wa(s,this._parents,e,n)}function mX(t){var e=this._name,n=this._id;typeof t!="function"&&(t=GD(t));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var c=r[l],d=c.length,p,h=0;h<d;++h)if(p=c[h]){for(var b=t.call(p,p.__data__,h,c),x,w=Do(p,n),E=0,I=b.length;E<I;++E)(x=b[E])&&Yb(x,e,n,E,b,w);s.push(b),o.push(p)}return new Wa(s,o,e,n)}var gX=vm.prototype.constructor;function yX(){return new gX(this._groups,this._parents)}function vX(t,e){var n,r,i;return function(){var s=Ud(this,t),o=(this.style.removeProperty(t),Ud(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function x2(t){return function(){this.style.removeProperty(t)}}function bX(t,e,n){var r,i=n+"",s;return function(){var o=Ud(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function xX(t,e,n){var r,i,s;return function(){var o=Ud(this,t),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(t),Ud(this,t))),o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,l))}}function _X(t,e){var n,r,i,s="style."+e,o="end."+s,l;return function(){var c=la(this,t),d=c.on,p=c.value[s]==null?l||(l=x2(e)):void 0;(d!==n||i!==p)&&(r=(n=d).copy()).on(o,i=p),c.on=r}}function wX(t,e,n){var r=(t+="")=="transform"?wY:b2;return e==null?this.styleTween(t,vX(t,r)).on("end.style."+t,x2(t)):typeof e=="function"?this.styleTween(t,xX(t,r,kN(this,"style."+t,e))).each(_X(this._id,t)):this.styleTween(t,bX(t,r,e),n).on("end.style."+t,null)}function SX(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function EX(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&SX(t,o,n)),r}return s._value=e,s}function NX(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,EX(t,e,n??""))}function kX(t){return function(){this.textContent=t}}function IX(t){return function(){var e=t(this);this.textContent=e??""}}function CX(t){return this.tween("text",typeof t=="function"?IX(kN(this,"text",t)):kX(t==null?"":t+""))}function TX(t){return function(e){this.textContent=t.call(this,e)}}function OX(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&TX(i)),e}return r._value=t,r}function qX(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,OX(t))}function RX(){for(var t=this._name,e=this._id,n=_2(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,c,d=0;d<l;++d)if(c=o[d]){var p=Do(c,e);Yb(c,t,n,d,o,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Wa(r,this._parents,t,n)}function jX(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var d=la(this,r),p=d.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),d.on=e}),i===0&&s()})}var AX=0;function Wa(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function _2(){return++AX}var ka=vm.prototype;Wa.prototype={constructor:Wa,select:hX,selectAll:mX,selectChild:ka.selectChild,selectChildren:ka.selectChildren,filter:aX,merge:lX,selection:yX,transition:RX,call:ka.call,nodes:ka.nodes,node:ka.node,size:ka.size,empty:ka.empty,each:ka.each,on:dX,attr:VY,attrTween:ZY,style:wX,styleTween:NX,text:CX,textTween:qX,remove:pX,tween:LY,delay:XY,duration:nX,ease:iX,easeVarying:oX,end:jX,[Symbol.iterator]:ka[Symbol.iterator]};function PX(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var FX={time:null,delay:0,duration:250,ease:PX};function DX(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function LX(t){var e,n;t instanceof Wa?(e=t._id,t=t._name):(e=_2(),(n=FX).time=EN(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,c,d=0;d<l;++d)(c=o[d])&&Yb(c,t,e,d,o,n||DX(c,e));return new Wa(r,this._parents,t,e)}vm.prototype.interrupt=PY;vm.prototype.transition=LX;const ny=t=>()=>t;function MX(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ja(t,e,n){this.k=t,this.x=e,this.y=n}ja.prototype={constructor:ja,scale:function(t){return t===1?this:new ja(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ja(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Xb=new ja(1,0,0);w2.prototype=ja.prototype;function w2(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Xb;return t.__zoom}function C0(t){t.stopImmediatePropagation()}function yp(t){t.preventDefault(),t.stopImmediatePropagation()}function $X(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function BX(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function mR(){return this.__zoom||Xb}function zX(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function WX(){return navigator.maxTouchPoints||"ontouchstart"in this}function UX(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function S2(){var t=$X,e=BX,n=UX,r=zX,i=WX,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=IY,d=Gb("start","zoom","end"),p,h,b,x=500,w=150,E=0,I=10;function T(B){B.property("__zoom",mR).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",M).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(B,te,J,le){var se=B.selection?B.selection():B;se.property("__zoom",mR),B!==se?D(B,te,J,le):se.interrupt().each(function(){L(this,arguments).event(le).start().zoom(null,typeof te=="function"?te.apply(this,arguments):te).end()})},T.scaleBy=function(B,te,J,le){T.scaleTo(B,function(){var se=this.__zoom.k,ne=typeof te=="function"?te.apply(this,arguments):te;return se*ne},J,le)},T.scaleTo=function(B,te,J,le){T.transform(B,function(){var se=e.apply(this,arguments),ne=this.__zoom,oe=J==null?A(se):typeof J=="function"?J.apply(this,arguments):J,X=ne.invert(oe),ce=typeof te=="function"?te.apply(this,arguments):te;return n(q(O(ne,ce),oe,X),se,o)},J,le)},T.translateBy=function(B,te,J,le){T.transform(B,function(){return n(this.__zoom.translate(typeof te=="function"?te.apply(this,arguments):te,typeof J=="function"?J.apply(this,arguments):J),e.apply(this,arguments),o)},null,le)},T.translateTo=function(B,te,J,le,se){T.transform(B,function(){var ne=e.apply(this,arguments),oe=this.__zoom,X=le==null?A(ne):typeof le=="function"?le.apply(this,arguments):le;return n(Xb.translate(X[0],X[1]).scale(oe.k).translate(typeof te=="function"?-te.apply(this,arguments):-te,typeof J=="function"?-J.apply(this,arguments):-J),ne,o)},le,se)};function O(B,te){return te=Math.max(s[0],Math.min(s[1],te)),te===B.k?B:new ja(te,B.x,B.y)}function q(B,te,J){var le=te[0]-J[0]*B.k,se=te[1]-J[1]*B.k;return le===B.x&&se===B.y?B:new ja(B.k,le,se)}function A(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function D(B,te,J,le){B.on("start.zoom",function(){L(this,arguments).event(le).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(le).end()}).tween("zoom",function(){var se=this,ne=arguments,oe=L(se,ne).event(le),X=e.apply(se,ne),ce=J==null?A(X):typeof J=="function"?J.apply(se,ne):J,de=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),ye=se.__zoom,_e=typeof te=="function"?te.apply(se,ne):te,Ne=c(ye.invert(ce).concat(de/ye.k),_e.invert(ce).concat(de/_e.k));return function(ze){if(ze===1)ze=_e;else{var qe=Ne(ze),De=de/qe[2];ze=new ja(De,ce[0]-qe[0]*De,ce[1]-qe[1]*De)}oe.zoom(null,ze)}})}function L(B,te,J){return!J&&B.__zooming||new z(B,te)}function z(B,te){this.that=B,this.args=te,this.active=0,this.sourceEvent=null,this.extent=e.apply(B,te),this.taps=0}z.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,te){return this.mouse&&B!=="mouse"&&(this.mouse[1]=te.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=te.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=te.invert(this.touch1[0])),this.that.__zoom=te,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var te=Ts(this.that).datum();d.call(B,this.that,new MX(B,{sourceEvent:this.sourceEvent,target:T,type:B,transform:this.that.__zoom,dispatch:d}),te)}};function P(B,...te){if(!t.apply(this,arguments))return;var J=L(this,te).event(B),le=this.__zoom,se=Math.max(s[0],Math.min(s[1],le.k*Math.pow(2,r.apply(this,arguments)))),ne=xo(B);if(J.wheel)(J.mouse[0][0]!==ne[0]||J.mouse[0][1]!==ne[1])&&(J.mouse[1]=le.invert(J.mouse[0]=ne)),clearTimeout(J.wheel);else{if(le.k===se)return;J.mouse=[ne,le.invert(ne)],Py(this),J.start()}yp(B),J.wheel=setTimeout(oe,w),J.zoom("mouse",n(q(O(le,se),J.mouse[0],J.mouse[1]),J.extent,o));function oe(){J.wheel=null,J.end()}}function R(B,...te){if(b||!t.apply(this,arguments))return;var J=B.currentTarget,le=L(this,te,!0).event(B),se=Ts(B.view).on("mousemove.zoom",ce,!0).on("mouseup.zoom",de,!0),ne=xo(B,J),oe=B.clientX,X=B.clientY;o2(B.view),C0(B),le.mouse=[ne,this.__zoom.invert(ne)],Py(this),le.start();function ce(ye){if(yp(ye),!le.moved){var _e=ye.clientX-oe,Ne=ye.clientY-X;le.moved=_e*_e+Ne*Ne>E}le.event(ye).zoom("mouse",n(q(le.that.__zoom,le.mouse[0]=xo(ye,J),le.mouse[1]),le.extent,o))}function de(ye){se.on("mousemove.zoom mouseup.zoom",null),a2(ye.view,le.moved),yp(ye),le.event(ye).end()}}function M(B,...te){if(t.apply(this,arguments)){var J=this.__zoom,le=xo(B.changedTouches?B.changedTouches[0]:B,this),se=J.invert(le),ne=J.k*(B.shiftKey?.5:2),oe=n(q(O(J,ne),le,se),e.apply(this,te),o);yp(B),l>0?Ts(this).transition().duration(l).call(D,oe,le,B):Ts(this).call(T.transform,oe,le,B)}}function F(B,...te){if(t.apply(this,arguments)){var J=B.touches,le=J.length,se=L(this,te,B.changedTouches.length===le).event(B),ne,oe,X,ce;for(C0(B),oe=0;oe<le;++oe)X=J[oe],ce=xo(X,this),ce=[ce,this.__zoom.invert(ce),X.identifier],se.touch0?!se.touch1&&se.touch0[2]!==ce[2]&&(se.touch1=ce,se.taps=0):(se.touch0=ce,ne=!0,se.taps=1+!!p);p&&(p=clearTimeout(p)),ne&&(se.taps<2&&(h=ce[0],p=setTimeout(function(){p=null},x)),Py(this),se.start())}}function W(B,...te){if(this.__zooming){var J=L(this,te).event(B),le=B.changedTouches,se=le.length,ne,oe,X,ce;for(yp(B),ne=0;ne<se;++ne)oe=le[ne],X=xo(oe,this),J.touch0&&J.touch0[2]===oe.identifier?J.touch0[0]=X:J.touch1&&J.touch1[2]===oe.identifier&&(J.touch1[0]=X);if(oe=J.that.__zoom,J.touch1){var de=J.touch0[0],ye=J.touch0[1],_e=J.touch1[0],Ne=J.touch1[1],ze=(ze=_e[0]-de[0])*ze+(ze=_e[1]-de[1])*ze,qe=(qe=Ne[0]-ye[0])*qe+(qe=Ne[1]-ye[1])*qe;oe=O(oe,Math.sqrt(ze/qe)),X=[(de[0]+_e[0])/2,(de[1]+_e[1])/2],ce=[(ye[0]+Ne[0])/2,(ye[1]+Ne[1])/2]}else if(J.touch0)X=J.touch0[0],ce=J.touch0[1];else return;J.zoom("touch",n(q(oe,X,ce),J.extent,o))}}function V(B,...te){if(this.__zooming){var J=L(this,te).event(B),le=B.changedTouches,se=le.length,ne,oe;for(C0(B),b&&clearTimeout(b),b=setTimeout(function(){b=null},x),ne=0;ne<se;++ne)oe=le[ne],J.touch0&&J.touch0[2]===oe.identifier?delete J.touch0:J.touch1&&J.touch1[2]===oe.identifier&&delete J.touch1;if(J.touch1&&!J.touch0&&(J.touch0=J.touch1,delete J.touch1),J.touch0)J.touch0[1]=this.__zoom.invert(J.touch0[0]);else if(J.end(),J.taps===2&&(oe=xo(oe,this),Math.hypot(h[0]-oe[0],h[1]-oe[1])<I)){var X=Ts(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return T.wheelDelta=function(B){return arguments.length?(r=typeof B=="function"?B:ny(+B),T):r},T.filter=function(B){return arguments.length?(t=typeof B=="function"?B:ny(!!B),T):t},T.touchable=function(B){return arguments.length?(i=typeof B=="function"?B:ny(!!B),T):i},T.extent=function(B){return arguments.length?(e=typeof B=="function"?B:ny([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),T):e},T.scaleExtent=function(B){return arguments.length?(s[0]=+B[0],s[1]=+B[1],T):[s[0],s[1]]},T.translateExtent=function(B){return arguments.length?(o[0][0]=+B[0][0],o[1][0]=+B[1][0],o[0][1]=+B[0][1],o[1][1]=+B[1][1],T):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},T.constrain=function(B){return arguments.length?(n=B,T):n},T.duration=function(B){return arguments.length?(l=+B,T):l},T.interpolate=function(B){return arguments.length?(c=B,T):c},T.on=function(){var B=d.on.apply(d,arguments);return B===d?T:B},T.clickDistance=function(B){return arguments.length?(E=(B=+B)*B,T):Math.sqrt(E)},T.tapDistance=function(B){return arguments.length?(I=+B,T):I},T}const Va={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},$h=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],E2=["Enter"," ","Escape"];var Hd;(function(t){t.Strict="strict",t.Loose="loose"})(Hd||(Hd={}));var Qu;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Qu||(Qu={}));var Bh;(function(t){t.Partial="partial",t.Full="full"})(Bh||(Bh={}));const N2={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ol;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ol||(Ol={}));var zh;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(zh||(zh={}));var Lt;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Lt||(Lt={}));const gR={[Lt.Left]:Lt.Right,[Lt.Right]:Lt.Left,[Lt.Top]:Lt.Bottom,[Lt.Bottom]:Lt.Top};function k2(t){return t===null?null:t?"valid":"invalid"}const I2=t=>"id"in t&&"source"in t&&"target"in t,VX=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),IN=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),xm=(t,e=[0,0])=>{const{width:n,height:r}=Ha(t),i=t.origin??e,s=n*i[0],o=r*i[1];return{x:t.position.x-s,y:t.position.y-o}},HX=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):IN(i)?i:e.nodeLookup.get(i.id));const l=o?Jv(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return ex(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return tx(n)},_m=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=Jv(r);n=ex(n,i)}}),tx(n)},C2=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...wm(e,[n,r,i]),width:e.width/i,height:e.height/i},c=[];for(const d of t.values()){const{measured:p,selectable:h=!0,hidden:b=!1}=d;if(o&&!h||b)continue;const x=p.width??d.width??d.initialWidth??null,w=p.height??d.height??d.initialHeight??null,E=Wh(l,Kd(d)),I=(x??0)*(w??0),T=s&&E>0;(!d.internals.handleBounds||T||E>=I||d.dragging)&&c.push(d)}return c},QX=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function YE(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function XE({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(t.size===0)return Promise.resolve(!1);const l=_m(t),c=CN(l,e,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(c,{duration:o?.duration}),Promise.resolve(!0)}function T2({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(t),l=o.parentId?n.get(o.parentId):void 0,{x:c,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},p=o.origin??r;let h=i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",Va.error005());else{const x=l.measured.width,w=l.measured.height;x&&w&&(h=[[c,d],[c+x,d+w]])}else l&&Gd(o.extent)&&(h=[[o.extent[0][0]+c,o.extent[0][1]+d],[o.extent[1][0]+c,o.extent[1][1]+d]]);const b=Gd(h)?sc(e,h,o.measured):e;return{position:{x:b.x-c+o.measured.width*p[0],y:b.y-d+o.measured.height*p[1]},positionAbsolute:b}}async function KX({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(b=>b.id)),o=[];for(const b of n){if(b.deletable===!1)continue;const x=s.has(b.id),w=!x&&b.parentId&&o.find(E=>E.id===b.parentId);(x||w)&&o.push(b)}const l=new Set(e.map(b=>b.id)),c=r.filter(b=>b.deletable!==!1),p=QX(o,c);for(const b of c)l.has(b.id)&&!p.find(w=>w.id===b.id)&&p.push(b);if(!i)return{edges:p,nodes:o};const h=await i({nodes:o,edges:p});return typeof h=="boolean"?h?{edges:p,nodes:o}:{edges:[],nodes:[]}:h}const Qd=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),sc=(t={x:0,y:0},e,n)=>({x:Qd(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Qd(t.y,e[0][1],e[1][1]-(n?.height??0))});function O2(t,e,n){const{width:r,height:i}=Ha(n),{x:s,y:o}=n.internals.positionAbsolute;return sc(t,[[s,o],[s+r,o+i]],e)}const yR=(t,e,n)=>t<e?Qd(Math.abs(t-e),1,e)/e:t>n?-Qd(Math.abs(t-n),1,e)/e:0,q2=(t,e,n=15,r=40)=>{const i=yR(t.x,r,e.width-r)*n,s=yR(t.y,r,e.height-r)*n;return[i,s]},ex=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),e1=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),tx=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Kd=(t,e=[0,0])=>{const{x:n,y:r}=IN(t)?t.internals.positionAbsolute:xm(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Jv=(t,e=[0,0])=>{const{x:n,y:r}=IN(t)?t.internals.positionAbsolute:xm(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},R2=(t,e)=>tx(ex(e1(t),e1(e))),Wh=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},vR=t=>Io(t.width)&&Io(t.height)&&Io(t.x)&&Io(t.y),Io=t=>!isNaN(t)&&isFinite(t),GX=(t,e)=>{},nx=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),wm=({x:t,y:e},[n,r,i],s=!1,o=[1,1])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?nx(l,o):l},j2=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),CN=(t,e,n,r,i,s)=>{const o=e/(t.width*(1+s)),l=n/(t.height*(1+s)),c=Math.min(o,l),d=Qd(c,r,i),p=t.x+t.width/2,h=t.y+t.height/2,b=e/2-p*d,x=n/2-h*d;return{x:b,y:x,zoom:d}},Yv=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Gd(t){return t!==void 0&&t!=="parent"}function Ha(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function A2(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function P2(t,e={width:0,height:0},n,r,i){const s={...t},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}return s}function bR(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function nh(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=Fa(t),l=wm({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:c,y:d}=n?nx(l,e):l;return{xSnapped:c,ySnapped:d,...l}}const rx=t=>({width:t.offsetWidth,height:t.offsetHeight}),F2=t=>t?.getRootNode?.()||window?.document,ZX=["INPUT","SELECT","TEXTAREA"];function t1(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:ZX.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const D2=t=>"clientX"in t,Fa=(t,e)=>{const n=D2(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},xR=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:t,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...rx(o)}})};function L2({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const c=t*.125+i*.375+o*.375+n*.125,d=e*.125+s*.375+l*.375+r*.125,p=Math.abs(c-t),h=Math.abs(d-e);return[c,d,p,h]}function ry(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function _R({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case Lt.Left:return[e-ry(e-r,s),n];case Lt.Right:return[e+ry(r-e,s),n];case Lt.Top:return[e,n-ry(n-i,s)];case Lt.Bottom:return[e,n+ry(i-n,s)]}}function TN({sourceX:t,sourceY:e,sourcePosition:n=Lt.Bottom,targetX:r,targetY:i,targetPosition:s=Lt.Top,curvature:o=.25}){const[l,c]=_R({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[d,p]=_R({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[h,b,x,w]=L2({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:p});return[`M${t},${e} C${l},${c} ${d},${p} ${r},${i}`,h,b,x,w]}function M2({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,l=r<e?r+o:r-o;return[s,l,i,o]}function JX({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const s=n||e.selected||t.selected,o=Math.max(t.internals.z||0,e.internals.z||0,1e3);return r+(s?o:0)}function YX({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=ex(Jv(t),Jv(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Wh(o,tx(s))>0}const XX=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,eee=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),$2=(t,e)=>{if(!t.source||!t.target)return e;let n;return I2(t)?n={...t}:n={...t,id:XX(t)},eee(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function ON({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,l]=M2({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,l]}const wR={[Lt.Left]:{x:-1,y:0},[Lt.Right]:{x:1,y:0},[Lt.Top]:{x:0,y:-1},[Lt.Bottom]:{x:0,y:1}},tee=({source:t,sourcePosition:e=Lt.Bottom,target:n})=>e===Lt.Left||e===Lt.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},SR=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function nee({source:t,sourcePosition:e=Lt.Bottom,target:n,targetPosition:r=Lt.Top,center:i,offset:s}){const o=wR[e],l=wR[r],c={x:t.x+o.x*s,y:t.y+o.y*s},d={x:n.x+l.x*s,y:n.y+l.y*s},p=tee({source:c,sourcePosition:e,target:d}),h=p.x!==0?"x":"y",b=p[h];let x=[],w,E;const I={x:0,y:0},T={x:0,y:0},[O,q,A,D]=M2({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[h]*l[h]===-1){w=i.x??O,E=i.y??q;const z=[{x:w,y:c.y},{x:w,y:d.y}],P=[{x:c.x,y:E},{x:d.x,y:E}];o[h]===b?x=h==="x"?z:P:x=h==="x"?P:z}else{const z=[{x:c.x,y:d.y}],P=[{x:d.x,y:c.y}];if(h==="x"?x=o.x===b?P:z:x=o.y===b?z:P,e===r){const V=Math.abs(t[h]-n[h]);if(V<=s){const B=Math.min(s-1,s-V);o[h]===b?I[h]=(c[h]>t[h]?-1:1)*B:T[h]=(d[h]>n[h]?-1:1)*B}}if(e!==r){const V=h==="x"?"y":"x",B=o[h]===l[V],te=c[V]>d[V],J=c[V]<d[V];(o[h]===1&&(!B&&te||B&&J)||o[h]!==1&&(!B&&J||B&&te))&&(x=h==="x"?z:P)}const R={x:c.x+I.x,y:c.y+I.y},M={x:d.x+T.x,y:d.y+T.y},F=Math.max(Math.abs(R.x-x[0].x),Math.abs(M.x-x[0].x)),W=Math.max(Math.abs(R.y-x[0].y),Math.abs(M.y-x[0].y));F>=W?(w=(R.x+M.x)/2,E=x[0].y):(w=x[0].x,E=(R.y+M.y)/2)}return[[t,{x:c.x+I.x,y:c.y+I.y},...x,{x:d.x+T.x,y:d.y+T.y},n],w,E,A,D]}function ree(t,e,n,r){const i=Math.min(SR(t,e)/2,SR(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const d=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*p}`}const l=t.x<n.x?1:-1,c=t.y<n.y?-1:1;return`L ${s},${o+i*c}Q ${s},${o} ${s+i*l},${o}`}function n1({sourceX:t,sourceY:e,sourcePosition:n=Lt.Bottom,targetX:r,targetY:i,targetPosition:s=Lt.Top,borderRadius:o=5,centerX:l,centerY:c,offset:d=20}){const[p,h,b,x,w]=nee({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:c},offset:d});return[p.reduce((I,T,O)=>{let q="";return O>0&&O<p.length-1?q=ree(p[O-1],T,p[O+1],o):q=`${O===0?"M":"L"}${T.x} ${T.y}`,I+=q,I},""),h,b,x,w]}function ER(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function iee(t){const{sourceNode:e,targetNode:n}=t;if(!ER(e)||!ER(n))return null;const r=e.internals.handleBounds||NR(e.handles),i=n.internals.handleBounds||NR(n.handles),s=kR(r?.source??[],t.sourceHandle),o=kR(t.connectionMode===Hd.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!s||!o)return t.onError?.("008",Va.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=s?.position||Lt.Bottom,c=o?.position||Lt.Top,d=Uh(e,s,l),p=Uh(n,o,c);return{sourceX:d.x,sourceY:d.y,targetX:p.x,targetY:p.y,sourcePosition:l,targetPosition:c}}function NR(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function Uh(t,e,n=Lt.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:o,height:l}=e??Ha(t);if(r)return{x:i+o/2,y:s+l/2};switch(e?.position??n){case Lt.Top:return{x:i+o/2,y:s};case Lt.Right:return{x:i+o,y:s+l/2};case Lt.Bottom:return{x:i+o/2,y:s+l};case Lt.Left:return{x:i,y:s+l/2}}}function kR(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function r1(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function see(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(c=>{if(c&&typeof c=="object"){const d=r1(c,e);s.has(d)||(o.push({id:d,color:c.color||n,...c}),s.add(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const qN={nodeOrigin:[0,0],nodeExtent:$h,elevateNodesOnSelect:!0,defaults:{}},oee={...qN,checkEquality:!0};function RN(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function aee(t,e,n){const r=RN(qN,n);for(const i of t.values())if(i.parentId)jN(i,t,e,r);else{const s=xm(i,r.nodeOrigin),o=Gd(i.extent)?i.extent:r.nodeExtent,l=sc(s,o,Ha(i));i.internals.positionAbsolute=l}}function i1(t,e,n,r){const i=RN(oee,r),s=new Map(e),o=i?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const l of t){let c=s.get(l.id);if(i.checkEquality&&l===c?.internals.userNode)e.set(l.id,c);else{const d=xm(l,i.nodeOrigin),p=Gd(l.extent)?l.extent:i.nodeExtent,h=sc(d,p,Ha(l));c={...i.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:h,handleBounds:l.measured?c?.internals.handleBounds:void 0,z:B2(l,o),userNode:l}},e.set(l.id,c)}l.parentId&&jN(c,e,n,r)}}function lee(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function jN(t,e,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=RN(qN,r),l=t.parentId,c=e.get(l);if(!c){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}lee(t,n);const d=i?1e3:0,{x:p,y:h,z:b}=uee(t,c,s,o,d),{positionAbsolute:x}=t.internals,w=p!==x.x||h!==x.y;(w||b!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:w?{x:p,y:h}:x,z:b}})}function B2(t,e){return(Io(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function uee(t,e,n,r,i){const{x:s,y:o}=e.internals.positionAbsolute,l=Ha(t),c=xm(t,n),d=Gd(t.extent)?sc(c,t.extent,l):c;let p=sc({x:s+d.x,y:o+d.y},r,l);t.extent==="parent"&&(p=O2(p,l,e));const h=B2(t,i),b=e.internals.z??0;return{x:p.x,y:p.y,z:b>h?b:h}}function AN(t,e,n,r=[0,0]){const i=[],s=new Map;for(const o of t){const l=e.get(o.parentId);if(!l)continue;const c=s.get(o.parentId)?.expandedRect??Kd(l),d=R2(c,o.rect);s.set(o.parentId,{expandedRect:d,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},c)=>{const d=l.internals.positionAbsolute,p=Ha(l),h=l.origin??r,b=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,x=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,w=Math.max(p.width,Math.round(o.width)),E=Math.max(p.height,Math.round(o.height)),I=(w-p.width)*h[0],T=(E-p.height)*h[1];(b>0||x>0||I||T)&&(i.push({id:c,type:"position",position:{x:l.position.x-b+I,y:l.position.y-x+T}}),n.get(c)?.forEach(O=>{t.some(q=>q.id===O.id)||i.push({id:O.id,type:"position",position:{x:O.position.x+b,y:O.position.y+x}})})),(p.width<o.width||p.height<o.height||b||x)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:w+(b?h[0]*b-I:0),height:E+(x?h[1]*x-T:0)}})}),i}function cee(t,e,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const c=[],d=window.getComputedStyle(o),{m22:p}=new window.DOMMatrixReadOnly(d.transform),h=[];for(const b of t.values()){const x=e.get(b.id);if(!x)continue;if(x.hidden){e.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),l=!0;continue}const w=rx(b.nodeElement),E=x.measured.width!==w.width||x.measured.height!==w.height;if(!!(w.width&&w.height&&(E||!x.internals.handleBounds||b.force))){const T=b.nodeElement.getBoundingClientRect(),O=Gd(x.extent)?x.extent:s;let{positionAbsolute:q}=x.internals;x.parentId&&x.extent==="parent"?q=O2(q,w,e.get(x.parentId)):O&&(q=sc(q,O,w));const A={...x,measured:w,internals:{...x.internals,positionAbsolute:q,handleBounds:{source:xR("source",b.nodeElement,T,p,x.id),target:xR("target",b.nodeElement,T,p,x.id)}}};e.set(x.id,A),x.parentId&&jN(A,e,n,{nodeOrigin:i}),l=!0,E&&(c.push({id:x.id,type:"dimensions",dimensions:w}),x.expandParent&&x.parentId&&h.push({id:x.id,parentId:x.parentId,rect:Kd(A,i)}))}}if(h.length>0){const b=AN(h,e,n,i);c.push(...b)}return{changes:c,updatedInternals:l}}async function dee({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function IR(t,e,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,e)),o=`${i}-${t}`;const c=r.get(o)||new Map;if(r.set(o,c.set(n,e)),s){o=`${i}-${t}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,e))}}function z2(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,c={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},d=`${i}-${o}--${s}-${l}`,p=`${s}-${l}--${i}-${o}`;IR("source",c,p,t,i,o),IR("target",c,d,t,s,l),e.set(r.id,r)}}function W2(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:W2(n,e):!1}function CR(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function fee(t,e,n,r){const i=new Map;for(const[s,o]of t)if((o.selected||o.id===r)&&(!o.parentId||!W2(o,t))&&(o.draggable||e&&typeof o.draggable>"u")){const l=t.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function T0({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of e){const c=n.get(o)?.internals.userNode;c&&i.push({...c,position:l.position,dragging:r})}if(!t)return[i[0],i];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:r}:i[0],i]}function pee({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,c=!1,d={x:0,y:0},p=null,h=!1,b=null,x=!1;function w({noDragClassName:I,handleSelector:T,domNode:O,isSelectable:q,nodeId:A,nodeClickDistance:D=0}){b=Ts(O);function L({x:M,y:F},W){const{nodeLookup:V,nodeExtent:B,snapGrid:te,snapToGrid:J,nodeOrigin:le,onNodeDrag:se,onSelectionDrag:ne,onError:oe,updateNodePositions:X}=e();s={x:M,y:F};let ce=!1,de={x:0,y:0,x2:0,y2:0};if(l.size>1&&B){const ye=_m(l);de=e1(ye)}for(const[ye,_e]of l){if(!V.has(ye))continue;let Ne={x:M-_e.distance.x,y:F-_e.distance.y};J&&(Ne=nx(Ne,te));let ze=[[B[0][0],B[0][1]],[B[1][0],B[1][1]]];if(l.size>1&&B&&!_e.extent){const{positionAbsolute:Ze}=_e.internals,Xe=Ze.x-de.x+B[0][0],Ue=Ze.x+_e.measured.width-de.x2+B[1][0],ut=Ze.y-de.y+B[0][1],wt=Ze.y+_e.measured.height-de.y2+B[1][1];ze=[[Xe,ut],[Ue,wt]]}const{position:qe,positionAbsolute:De}=T2({nodeId:ye,nextPosition:Ne,nodeLookup:V,nodeExtent:ze,nodeOrigin:le,onError:oe});ce=ce||_e.position.x!==qe.x||_e.position.y!==qe.y,_e.position=qe,_e.internals.positionAbsolute=De}if(ce&&(X(l,!0),W&&(r||se||!A&&ne))){const[ye,_e]=T0({nodeId:A,dragItems:l,nodeLookup:V});r?.(W,l,ye,_e),se?.(W,ye,_e),A||ne?.(W,_e)}}async function z(){if(!p)return;const{transform:M,panBy:F,autoPanSpeed:W}=e(),[V,B]=q2(d,p,W);(V!==0||B!==0)&&(s.x=(s.x??0)-V/M[2],s.y=(s.y??0)-B/M[2],await F({x:V,y:B})&&L(s,null)),o=requestAnimationFrame(z)}function P(M){const{nodeLookup:F,multiSelectionActive:W,nodesDraggable:V,transform:B,snapGrid:te,snapToGrid:J,selectNodesOnDrag:le,onNodeDragStart:se,onSelectionDragStart:ne,unselectNodesAndEdges:oe}=e();h=!0,(!le||!q)&&!W&&A&&(F.get(A)?.selected||oe()),q&&le&&A&&t?.(A);const X=nh(M.sourceEvent,{transform:B,snapGrid:te,snapToGrid:J,containerBounds:p});if(s=X,l=fee(F,V,X,A),l.size>0&&(n||se||!A&&ne)){const[ce,de]=T0({nodeId:A,dragItems:l,nodeLookup:F});n?.(M.sourceEvent,l,ce,de),se?.(M.sourceEvent,ce,de),A||ne?.(M.sourceEvent,de)}}const R=l2().clickDistance(D).on("start",M=>{const{domNode:F,nodeDragThreshold:W,transform:V,snapGrid:B,snapToGrid:te}=e();p=F?.getBoundingClientRect()||null,x=!1,W===0&&P(M),s=nh(M.sourceEvent,{transform:V,snapGrid:B,snapToGrid:te,containerBounds:p}),d=Fa(M.sourceEvent,p)}).on("drag",M=>{const{autoPanOnNodeDrag:F,transform:W,snapGrid:V,snapToGrid:B,nodeDragThreshold:te,nodeLookup:J}=e(),le=nh(M.sourceEvent,{transform:W,snapGrid:V,snapToGrid:B,containerBounds:p});if((M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1||A&&!J.has(A))&&(x=!0),!x){if(!c&&F&&h&&(c=!0,z()),!h){const se=le.xSnapped-(s.x??0),ne=le.ySnapped-(s.y??0);Math.sqrt(se*se+ne*ne)>te&&P(M)}(s.x!==le.xSnapped||s.y!==le.ySnapped)&&l&&h&&(d=Fa(M.sourceEvent,p),L(le,M.sourceEvent))}}).on("end",M=>{if(!(!h||x)&&(c=!1,h=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:F,updateNodePositions:W,onNodeDragStop:V,onSelectionDragStop:B}=e();if(W(l,!1),i||V||!A&&B){const[te,J]=T0({nodeId:A,dragItems:l,nodeLookup:F,dragging:!1});i?.(M.sourceEvent,l,te,J),V?.(M.sourceEvent,te,J),A||B?.(M.sourceEvent,J)}}}).filter(M=>{const F=M.target;return!M.button&&(!I||!CR(F,`.${I}`,O))&&(!T||CR(F,T,O))});b.call(R)}function E(){b?.on(".drag",null)}return{update:w,destroy:E}}function hee(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())Wh(i,Kd(s))>0&&r.push(s);return r}const mee=250;function gee(t,e,n,r){let i=[],s=1/0;const o=hee(t,n,e+mee);for(const l of o){const c=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of c){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:p,y:h}=Uh(l,d,d.position,!0),b=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(h-t.y,2));b>e||(b<s?(i=[{...d,x:p,y:h}],s=b):b===s&&i.push({...d,x:p,y:h}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(c=>c.type===l)??i[0]}return i[0]}function U2(t,e,n,r,i,s=!1){const o=r.get(t);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[e]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],c=(n?l?.find(d=>d.id===n):l?.[0])??null;return c&&s?{...c,...Uh(o,c,c.position,!0)}:c}function V2(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function yee(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const H2=()=>!0;function vee(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:c,lib:d,autoPanOnConnect:p,flowId:h,panBy:b,cancelConnection:x,onConnectStart:w,onConnect:E,onConnectEnd:I,isValidConnection:T=H2,onReconnectEnd:O,updateConnection:q,getTransform:A,getFromHandle:D,autoPanSpeed:L}){const z=F2(t.target);let P=0,R;const{x:M,y:F}=Fa(t),W=z?.elementFromPoint(M,F),V=V2(s,W),B=l?.getBoundingClientRect();if(!B||!V)return;const te=U2(i,V,r,c,e);if(!te)return;let J=Fa(t,B),le=!1,se=null,ne=!1,oe=null;function X(){if(!p||!B)return;const[De,Ze]=q2(J,B,L);b({x:De,y:Ze}),P=requestAnimationFrame(X)}const ce={...te,nodeId:i,type:V,position:te.position},de=c.get(i),_e={inProgress:!0,isValid:null,from:Uh(de,ce,Lt.Left,!0),fromHandle:ce,fromPosition:ce.position,fromNode:de,to:J,toHandle:null,toPosition:gR[ce.position],toNode:null};q(_e);let Ne=_e;w?.(t,{nodeId:i,handleId:r,handleType:V});function ze(De){if(!D()||!ce){qe(De);return}const Ze=A();J=Fa(De,B),R=gee(wm(J,Ze,!1,[1,1]),n,c,ce),le||(X(),le=!0);const Xe=Q2(De,{handle:R,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:T,doc:z,lib:d,flowId:h,nodeLookup:c});oe=Xe.handleDomNode,se=Xe.connection,ne=yee(!!R,Xe.isValid);const Ue={...Ne,isValid:ne,to:R&&ne?j2({x:R.x,y:R.y},Ze):J,toHandle:Xe.toHandle,toPosition:ne&&Xe.toHandle?Xe.toHandle.position:gR[ce.position],toNode:Xe.toHandle?c.get(Xe.toHandle.nodeId):null};ne&&R&&Ne.toHandle&&Ue.toHandle&&Ne.toHandle.type===Ue.toHandle.type&&Ne.toHandle.nodeId===Ue.toHandle.nodeId&&Ne.toHandle.id===Ue.toHandle.id&&Ne.to.x===Ue.to.x&&Ne.to.y===Ue.to.y||(q(Ue),Ne=Ue)}function qe(De){(R||oe)&&se&&ne&&E?.(se);const{inProgress:Ze,...Xe}=Ne,Ue={...Xe,toPosition:Ne.toHandle?Ne.toPosition:null};I?.(De,Ue),s&&O?.(De,Ue),x(),cancelAnimationFrame(P),le=!1,ne=!1,se=null,oe=null,z.removeEventListener("mousemove",ze),z.removeEventListener("mouseup",qe),z.removeEventListener("touchmove",ze),z.removeEventListener("touchend",qe)}z.addEventListener("mousemove",ze),z.addEventListener("mouseup",qe),z.addEventListener("touchmove",ze),z.addEventListener("touchend",qe)}function Q2(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:c,isValidConnection:d=H2,nodeLookup:p}){const h=s==="target",b=e?o.querySelector(`.${l}-flow__handle[data-id="${c}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x,y:w}=Fa(t),E=o.elementFromPoint(x,w),I=E?.classList.contains(`${l}-flow__handle`)?E:b,T={handleDomNode:I,isValid:!1,connection:null,toHandle:null};if(I){const O=V2(void 0,I),q=I.getAttribute("data-nodeid"),A=I.getAttribute("data-handleid"),D=I.classList.contains("connectable"),L=I.classList.contains("connectableend");if(!q||!O)return T;const z={source:h?q:r,sourceHandle:h?A:i,target:h?r:q,targetHandle:h?i:A};T.connection=z;const R=D&&L&&(n===Hd.Strict?h&&O==="source"||!h&&O==="target":q!==r||A!==i);T.isValid=R&&d(z),T.toHandle=U2(q,O,A,p,n,!1)}return T}const s1={onPointerDown:vee,isValid:Q2};function bee({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=Ts(t);function s({translateExtent:l,width:c,height:d,zoomStep:p=10,pannable:h=!0,zoomable:b=!0,inversePan:x=!1}){const w=q=>{const A=n();if(q.sourceEvent.type!=="wheel"||!e)return;const D=-q.sourceEvent.deltaY*(q.sourceEvent.deltaMode===1?.05:q.sourceEvent.deltaMode?1:.002)*p,L=A[2]*Math.pow(2,D);e.scaleTo(L)};let E=[0,0];const I=q=>{(q.sourceEvent.type==="mousedown"||q.sourceEvent.type==="touchstart")&&(E=[q.sourceEvent.clientX??q.sourceEvent.touches[0].clientX,q.sourceEvent.clientY??q.sourceEvent.touches[0].clientY])},T=q=>{const A=n();if(q.sourceEvent.type!=="mousemove"&&q.sourceEvent.type!=="touchmove"||!e)return;const D=[q.sourceEvent.clientX??q.sourceEvent.touches[0].clientX,q.sourceEvent.clientY??q.sourceEvent.touches[0].clientY],L=[D[0]-E[0],D[1]-E[1]];E=D;const z=r()*Math.max(A[2],Math.log(A[2]))*(x?-1:1),P={x:A[0]-L[0]*z,y:A[1]-L[1]*z},R=[[0,0],[c,d]];e.setViewportConstrained({x:P.x,y:P.y,zoom:A[2]},R,l)},O=S2().on("start",I).on("zoom",h?T:null).on("zoom.wheel",b?w:null);i.call(O,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:xo}}const xee=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,ix=t=>({x:t.x,y:t.y,zoom:t.k}),O0=({x:t,y:e,zoom:n})=>Xb.translate(t,e).scale(n),dd=(t,e)=>t.target.closest(`.${e}`),K2=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),q0=(t,e=0,n=()=>{})=>{const r=typeof e=="number"&&e>0;return r||n(),r?t.transition().duration(e).on("end",n):t},G2=t=>{const e=t.ctrlKey&&Yv()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function _ee({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:c,onPanZoomEnd:d}){return p=>{if(dd(p,e))return!1;p.preventDefault(),p.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(p.ctrlKey&&o){const I=xo(p),T=G2(p),O=h*Math.pow(2,T);r.scaleTo(n,O,I,p);return}const b=p.deltaMode===1?20:1;let x=i===Qu.Vertical?0:p.deltaX*b,w=i===Qu.Horizontal?0:p.deltaY*b;!Yv()&&p.shiftKey&&i!==Qu.Vertical&&(x=p.deltaY*b,w=0),r.translateBy(n,-(x/h)*s,-(w/h)*s,{internal:!0});const E=ix(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l?.(p,E)),t.isPanScrolling&&(c?.(p,E),t.panScrollTimeout=setTimeout(()=>{d?.(p,E),t.isPanScrolling=!1},150))}}function wee({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){if(!e&&r.type==="wheel"&&!r.ctrlKey||dd(r,t))return null;r.preventDefault(),n.call(this,r,i)}}function See({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=ix(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function Eee({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{t.usedRightMouseButton=!!(n&&K2(e,t.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,ix(s.transform))}}function Nee({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&K2(e,t.mouseButton??0)&&!t.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&xee(t.prevViewport,o.transform))){const l=ix(o.transform);t.prevViewport=l,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function kee({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:c,lib:d}){return p=>{const h=t||e,b=n&&p.ctrlKey;if(p.button===1&&p.type==="mousedown"&&(dd(p,`${d}-flow__node`)||dd(p,`${d}-flow__edge`)))return!0;if(!r&&!h&&!i&&!s&&!n||o||dd(p,l)&&p.type==="wheel"||dd(p,c)&&(p.type!=="wheel"||i&&p.type==="wheel"&&!t)||!n&&p.ctrlKey&&p.type==="wheel")return!1;if(!n&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!h&&!i&&!b&&p.type==="wheel"||!r&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(r)&&!r.includes(p.button)&&p.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||p.type==="wheel")&&x}}function Iee({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:c,onDraggingChange:d}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),b=S2().clickDistance(!Io(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(i),x=Ts(t).call(b);q({x:s.x,y:s.y,zoom:Qd(s.zoom,e,n)},[[0,0],[h.width,h.height]],i);const w=x.on("wheel.zoom"),E=x.on("dblclick.zoom");b.wheelDelta(G2);function I(W,V){return x?new Promise(B=>{b?.transform(q0(x,V?.duration,()=>B(!0)),W)}):Promise.resolve(!1)}function T({noWheelClassName:W,noPanClassName:V,onPaneContextMenu:B,userSelectionActive:te,panOnScroll:J,panOnDrag:le,panOnScrollMode:se,panOnScrollSpeed:ne,preventScrolling:oe,zoomOnPinch:X,zoomOnScroll:ce,zoomOnDoubleClick:de,zoomActivationKeyPressed:ye,lib:_e,onTransformChange:Ne}){te&&!p.isZoomingOrPanning&&O();const qe=J&&!ye&&!te?_ee({zoomPanValues:p,noWheelClassName:W,d3Selection:x,d3Zoom:b,panOnScrollMode:se,panOnScrollSpeed:ne,zoomOnPinch:X,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:c}):wee({noWheelClassName:W,preventScrolling:oe,d3ZoomHandler:w});if(x.on("wheel.zoom",qe,{passive:!1}),!te){const Ze=See({zoomPanValues:p,onDraggingChange:d,onPanZoomStart:l});b.on("start",Ze);const Xe=Eee({zoomPanValues:p,panOnDrag:le,onPaneContextMenu:!!B,onPanZoom:o,onTransformChange:Ne});b.on("zoom",Xe);const Ue=Nee({zoomPanValues:p,panOnDrag:le,panOnScroll:J,onPaneContextMenu:B,onPanZoomEnd:c,onDraggingChange:d});b.on("end",Ue)}const De=kee({zoomActivationKeyPressed:ye,panOnDrag:le,zoomOnScroll:ce,panOnScroll:J,zoomOnDoubleClick:de,zoomOnPinch:X,userSelectionActive:te,noPanClassName:V,noWheelClassName:W,lib:_e});b.filter(De),de?x.on("dblclick.zoom",E):x.on("dblclick.zoom",null)}function O(){b.on("zoom",null)}async function q(W,V,B){const te=O0(W),J=b?.constrain()(te,V,B);return J&&await I(J),new Promise(le=>le(J))}async function A(W,V){const B=O0(W);return await I(B,V),new Promise(te=>te(B))}function D(W){if(x){const V=O0(W),B=x.property("__zoom");(B.k!==W.zoom||B.x!==W.x||B.y!==W.y)&&b?.transform(x,V,null,{sync:!0})}}function L(){const W=x?w2(x.node()):{x:0,y:0,k:1};return{x:W.x,y:W.y,zoom:W.k}}function z(W,V){return x?new Promise(B=>{b?.scaleTo(q0(x,V?.duration,()=>B(!0)),W)}):Promise.resolve(!1)}function P(W,V){return x?new Promise(B=>{b?.scaleBy(q0(x,V?.duration,()=>B(!0)),W)}):Promise.resolve(!1)}function R(W){b?.scaleExtent(W)}function M(W){b?.translateExtent(W)}function F(W){const V=!Io(W)||W<0?0:W;b?.clickDistance(V)}return{update:T,destroy:O,setViewport:A,setViewportConstrained:q,getViewport:L,scaleTo:z,scaleBy:P,setScaleExtent:R,setTranslateExtent:M,syncViewport:D,setClickDistance:F}}var rh;(function(t){t.Line="line",t.Handle="handle"})(rh||(rh={}));function Cee({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=t-e,l=n-r,c=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(c[0]=c[0]*-1),l&&s&&(c[1]=c[1]*-1),c}function Tee(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function bl(t,e){return Math.max(0,e-t)}function xl(t,e){return Math.max(0,t-e)}function iy(t,e,n){return Math.max(0,e-t,t-n)}function TR(t,e){return t?!e:e}function Oee(t,e,n,r,i,s,o,l){let{affectsX:c,affectsY:d}=e;const{isHorizontal:p,isVertical:h}=e,b=p&&h,{xSnapped:x,ySnapped:w}=n,{minWidth:E,maxWidth:I,minHeight:T,maxHeight:O}=r,{x:q,y:A,width:D,height:L,aspectRatio:z}=t;let P=Math.floor(p?x-t.pointerX:0),R=Math.floor(h?w-t.pointerY:0);const M=D+(c?-P:P),F=L+(d?-R:R),W=-s[0]*D,V=-s[1]*L;let B=iy(M,E,I),te=iy(F,T,O);if(o){let se=0,ne=0;c&&P<0?se=bl(q+P+W,o[0][0]):!c&&P>0&&(se=xl(q+M+W,o[1][0])),d&&R<0?ne=bl(A+R+V,o[0][1]):!d&&R>0&&(ne=xl(A+F+V,o[1][1])),B=Math.max(B,se),te=Math.max(te,ne)}if(l){let se=0,ne=0;c&&P>0?se=xl(q+P,l[0][0]):!c&&P<0&&(se=bl(q+M,l[1][0])),d&&R>0?ne=xl(A+R,l[0][1]):!d&&R<0&&(ne=bl(A+F,l[1][1])),B=Math.max(B,se),te=Math.max(te,ne)}if(i){if(p){const se=iy(M/z,T,O)*z;if(B=Math.max(B,se),o){let ne=0;!c&&!d||c&&!d&&b?ne=xl(A+V+M/z,o[1][1])*z:ne=bl(A+V+(c?P:-P)/z,o[0][1])*z,B=Math.max(B,ne)}if(l){let ne=0;!c&&!d||c&&!d&&b?ne=bl(A+M/z,l[1][1])*z:ne=xl(A+(c?P:-P)/z,l[0][1])*z,B=Math.max(B,ne)}}if(h){const se=iy(F*z,E,I)/z;if(te=Math.max(te,se),o){let ne=0;!c&&!d||d&&!c&&b?ne=xl(q+F*z+W,o[1][0])/z:ne=bl(q+(d?R:-R)*z+W,o[0][0])/z,te=Math.max(te,ne)}if(l){let ne=0;!c&&!d||d&&!c&&b?ne=bl(q+F*z,l[1][0])/z:ne=xl(q+(d?R:-R)*z,l[0][0])/z,te=Math.max(te,ne)}}}R=R+(R<0?te:-te),P=P+(P<0?B:-B),i&&(b?M>F*z?R=(TR(c,d)?-P:P)/z:P=(TR(c,d)?-R:R)*z:p?(R=P/z,d=c):(P=R*z,c=d));const J=c?q+P:q,le=d?A+R:A;return{width:D+(c?-P:P),height:L+(d?-R:R),x:s[0]*P*(c?-1:1)+J,y:s[1]*R*(d?-1:1)+le}}const Z2={width:0,height:0,x:0,y:0},qee={...Z2,pointerX:0,pointerY:0,aspectRatio:1};function Ree(t){return[[0,0],[t.measured.width,t.measured.height]]}function jee(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,o=t.measured.height??0,l=n[0]*s,c=n[1]*o;return[[r-l,i-c],[r+s-l,i+o-c]]}function Aee({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=Ts(t);function o({controlPosition:c,boundaries:d,keepAspectRatio:p,onResizeStart:h,onResize:b,onResizeEnd:x,shouldResize:w}){let E={...Z2},I={...qee};const T=Tee(c);let O,q=null,A=[],D,L,z;const P=l2().on("start",R=>{const{nodeLookup:M,transform:F,snapGrid:W,snapToGrid:V,nodeOrigin:B,paneDomNode:te}=n();if(O=M.get(e),!O)return;q=te?.getBoundingClientRect()??null;const{xSnapped:J,ySnapped:le}=nh(R.sourceEvent,{transform:F,snapGrid:W,snapToGrid:V,containerBounds:q});E={width:O.measured.width??0,height:O.measured.height??0,x:O.position.x??0,y:O.position.y??0},I={...E,pointerX:J,pointerY:le,aspectRatio:E.width/E.height},D=void 0,O.parentId&&(O.extent==="parent"||O.expandParent)&&(D=M.get(O.parentId),L=D&&O.extent==="parent"?Ree(D):void 0),A=[],z=void 0;for(const[se,ne]of M)if(ne.parentId===e&&(A.push({id:se,position:{...ne.position},extent:ne.extent}),ne.extent==="parent"||ne.expandParent)){const oe=jee(ne,O,ne.origin??B);z?z=[[Math.min(oe[0][0],z[0][0]),Math.min(oe[0][1],z[0][1])],[Math.max(oe[1][0],z[1][0]),Math.max(oe[1][1],z[1][1])]]:z=oe}h?.(R,{...E})}).on("drag",R=>{const{transform:M,snapGrid:F,snapToGrid:W,nodeOrigin:V}=n(),B=nh(R.sourceEvent,{transform:M,snapGrid:F,snapToGrid:W,containerBounds:q}),te=[];if(!O)return;const{x:J,y:le,width:se,height:ne}=E,oe={},X=O.origin??V,{width:ce,height:de,x:ye,y:_e}=Oee(I,T,B,d,p,X,L,z),Ne=ce!==se,ze=de!==ne,qe=ye!==J&&Ne,De=_e!==le&&ze;if(!qe&&!De&&!Ne&&!ze)return;if((qe||De||X[0]===1||X[1]===1)&&(oe.x=qe?ye:E.x,oe.y=De?_e:E.y,E.x=oe.x,E.y=oe.y,A.length>0)){const ut=ye-J,wt=_e-le;for(const Tt of A)Tt.position={x:Tt.position.x-ut+X[0]*(ce-se),y:Tt.position.y-wt+X[1]*(de-ne)},te.push(Tt)}if((Ne||ze)&&(oe.width=Ne?ce:E.width,oe.height=ze?de:E.height,E.width=oe.width,E.height=oe.height),D&&O.expandParent){const ut=X[0]*(oe.width??0);oe.x&&oe.x<ut&&(E.x=ut,I.x=I.x-(oe.x-ut));const wt=X[1]*(oe.height??0);oe.y&&oe.y<wt&&(E.y=wt,I.y=I.y-(oe.y-wt))}const Ze=Cee({width:E.width,prevWidth:se,height:E.height,prevHeight:ne,affectsX:T.affectsX,affectsY:T.affectsY}),Xe={...E,direction:Ze};w?.(R,Xe)!==!1&&(b?.(R,Xe),r(oe,te))}).on("end",R=>{x?.(R,{...E}),i?.()});s.call(P)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const OR=t=>{let e;const n=new Set,r=(p,h)=>{const b=typeof p=="function"?p(e):p;if(!Object.is(b,e)){const x=e;e=h??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(w=>w(e,x))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{n.clear()}},d=e=t(r,i,c);return c},Pee=t=>t?OR(t):OR,{useDebugValue:Fee}=$n,{useSyncExternalStoreWithSelector:Dee}=OB,Lee=t=>t;function J2(t,e=Lee,n){const r=Dee(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Fee(r),r}const qR=(t,e)=>{const n=Pee(t),r=(i,s=e)=>J2(n,i,s);return Object.assign(r,n),r},Mee=(t,e)=>t?qR(t,e):qR;function Fr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const sx=K.createContext(null),$ee=sx.Provider,Y2=Va.error001();function Tn(t,e){const n=K.useContext(sx);if(n===null)throw new Error(Y2);return J2(n,t,e)}function Cr(){const t=K.useContext(sx);if(t===null)throw new Error(Y2);return K.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const RR={display:"none"},Bee={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},X2="react-flow__node-desc",eL="react-flow__edge-desc",zee="react-flow__aria-live",Wee=t=>t.ariaLiveMessage;function Uee({rfId:t}){const e=Tn(Wee);return f.jsx("div",{id:`${zee}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Bee,children:e})}function Vee({rfId:t,disableKeyboardA11y:e}){return f.jsxs(f.Fragment,{children:[f.jsxs("div",{id:`${X2}-${t}`,style:RR,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),f.jsx("div",{id:`${eL}-${t}`,style:RR,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&f.jsx(Uee,{rfId:t})]})}const Hee=t=>t.userSelectionActive?"none":"all",PN=K.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const o=Tn(Hee),l=`${t}`.split("-");return f.jsx("div",{className:ei(["react-flow__panel",n,...l]),style:{...r,pointerEvents:o},ref:s,...i,children:e})});function Qee({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:f.jsx(PN,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:f.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Kee=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},sy=t=>t.id;function Gee(t,e){return Fr(t.selectedNodes.map(sy),e.selectedNodes.map(sy))&&Fr(t.selectedEdges.map(sy),e.selectedEdges.map(sy))}function Zee({onSelectionChange:t}){const e=Cr(),{selectedNodes:n,selectedEdges:r}=Tn(Kee,Gee);return K.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const Jee=t=>!!t.onSelectionChangeHandlers;function Yee({onSelectionChange:t}){const e=Tn(Jee);return t||e?f.jsx(Zee,{onSelectionChange:t}):null}const tL=[0,0],Xee={x:0,y:0,zoom:1},ete=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],jR=[...ete,"rfId"],tte=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),AR={translateExtent:$h,nodeOrigin:tL,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function nte(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:c,setPaneClickDistance:d}=Tn(tte,Fr),p=Cr();K.useEffect(()=>(c(t.defaultNodes,t.defaultEdges),()=>{h.current=AR,l()}),[]);const h=K.useRef(AR);return K.useEffect(()=>{for(const b of jR){const x=t[b],w=h.current[b];x!==w&&(typeof t[b]>"u"||(b==="nodes"?e(x):b==="edges"?n(x):b==="minZoom"?r(x):b==="maxZoom"?i(x):b==="translateExtent"?s(x):b==="nodeExtent"?o(x):b==="paneClickDistance"?d(x):b==="fitView"?p.setState({fitViewOnInit:x}):b==="fitViewOptions"?p.setState({fitViewOnInitOptions:x}):p.setState({[b]:x})))}h.current=t},jR.map(b=>t[b])),null}function PR(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function rte(t){const[e,n]=K.useState(t==="system"?null:t);return K.useEffect(()=>{if(t!=="system"){n(t);return}const r=PR(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:PR()?.matches?"dark":"light"}const FR=typeof document<"u"?document:null;function Vh(t=null,e={target:FR,actInsideInputWithModifier:!0}){const[n,r]=K.useState(!1),i=K.useRef(!1),s=K.useRef(new Set([])),[o,l]=K.useMemo(()=>{if(t!==null){const d=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=d.reduce((h,b)=>h.concat(...b),[]);return[d,p]}return[[],[]]},[t]);return K.useEffect(()=>{const c=e?.target||FR;if(t!==null){const d=b=>{if(i.current=b.ctrlKey||b.metaKey||b.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&t1(b))return!1;const w=LR(b.code,l);s.current.add(b[w]),DR(o,s.current,!1)&&(b.preventDefault(),r(!0))},p=b=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&t1(b))return!1;const w=LR(b.code,l);DR(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(b[w]),b.key==="Meta"&&s.current.clear(),i.current=!1},h=()=>{s.current.clear(),r(!1)};return c?.addEventListener("keydown",d),c?.addEventListener("keyup",p),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{c?.removeEventListener("keydown",d),c?.removeEventListener("keyup",p),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[t,r]),n}function DR(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function LR(t,e){return e.includes(t)?"code":"key"}const ite=()=>{const t=Cr();return K.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:o}=t.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},fitView:e=>{const{nodeLookup:n,minZoom:r,maxZoom:i,panZoom:s,domNode:o}=t.getState();if(!s||!o)return Promise.resolve(!1);const l=YE(n,e),{width:c,height:d}=rx(o);return XE({nodes:l,width:c,height:d,minZoom:r,maxZoom:i,panZoom:s},e)},setCenter:async(e,n,r)=>{const{width:i,height:s,maxZoom:o,panZoom:l}=t.getState(),c=typeof r?.zoom<"u"?r.zoom:o,d=i/2-e*c,p=s/2-n*c;return l?(await l.setViewport({x:d,y:p,zoom:c},{duration:r?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=t.getState(),c=CN(e,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(c,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={snapToGrid:!0})=>{const{transform:r,snapGrid:i,domNode:s}=t.getState();if(!s)return e;const{x:o,y:l}=s.getBoundingClientRect(),c={x:e.x-o,y:e.y-l};return wm(c,r,n.snapToGrid,i)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=j2(e,n);return{x:o.x+i,y:o.y+s}}}),[])};function nL(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const c of o)ste(c,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function ste(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&(e.width=t.dimensions.width,e.height=t.dimensions.height)),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function FN(t,e){return nL(t,e)}function rL(t,e){return nL(t,e)}function qu(t,e){return{id:t,type:"select",selected:e}}function fd(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(qu(s.id,o)))}return r}function MR({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const o=e.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function $R(t){return{id:t.id,type:"remove"}}const BR=t=>VX(t),ote=t=>I2(t);function iL(t){return K.forwardRef(t)}const ate=typeof window<"u"?K.useLayoutEffect:K.useEffect;function zR(t){const[e,n]=K.useState(BigInt(0)),[r]=K.useState(()=>lte(()=>n(i=>i+BigInt(1))));return ate(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function lte(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const sL=K.createContext(null);function ute({children:t}){const e=Cr(),n=K.useCallback(l=>{const{nodes:c=[],setNodes:d,hasDefaultNodes:p,onNodesChange:h,nodeLookup:b}=e.getState();let x=c;for(const w of l)x=typeof w=="function"?w(x):w;p?d(x):h&&h(MR({items:x,lookup:b}))},[]),r=zR(n),i=K.useCallback(l=>{const{edges:c=[],setEdges:d,hasDefaultEdges:p,onEdgesChange:h,edgeLookup:b}=e.getState();let x=c;for(const w of l)x=typeof w=="function"?w(x):w;p?d(x):h&&h(MR({items:x,lookup:b}))},[]),s=zR(i),o=K.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return f.jsx(sL.Provider,{value:o,children:t})}function cte(){const t=K.useContext(sL);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const dte=t=>!!t.panZoom;function mf(){const t=ite(),e=Cr(),n=cte(),r=Tn(dte),i=K.useMemo(()=>{const s=h=>e.getState().nodeLookup.get(h),o=h=>{n.nodeQueue.push(h)},l=h=>{n.edgeQueue.push(h)},c=h=>{const{nodeLookup:b,nodeOrigin:x}=e.getState(),w=BR(h)?h:b.get(h.id),E=w.parentId?P2(w.position,w.measured,w.parentId,b,x):w.position,I={...w,position:E,width:w.measured?.width??w.width,height:w.measured?.height??w.height};return Kd(I)},d=(h,b,x={replace:!1})=>{o(w=>w.map(E=>{if(E.id===h){const I=typeof b=="function"?b(E):b;return x.replace&&BR(I)?I:{...E,...I}}return E}))},p=(h,b,x={replace:!1})=>{l(w=>w.map(E=>{if(E.id===h){const I=typeof b=="function"?b(E):b;return x.replace&&ote(I)?I:{...E,...I}}return E}))};return{getNodes:()=>e.getState().nodes.map(h=>({...h})),getNode:h=>s(h)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:h=[]}=e.getState();return h.map(b=>({...b}))},getEdge:h=>e.getState().edgeLookup.get(h),setNodes:o,setEdges:l,addNodes:h=>{const b=Array.isArray(h)?h:[h];n.nodeQueue.push(x=>[...x,...b])},addEdges:h=>{const b=Array.isArray(h)?h:[h];n.edgeQueue.push(x=>[...x,...b])},toObject:()=>{const{nodes:h=[],edges:b=[],transform:x}=e.getState(),[w,E,I]=x;return{nodes:h.map(T=>({...T})),edges:b.map(T=>({...T})),viewport:{x:w,y:E,zoom:I}}},deleteElements:async({nodes:h=[],edges:b=[]})=>{const{nodes:x,edges:w,onNodesDelete:E,onEdgesDelete:I,triggerNodeChanges:T,triggerEdgeChanges:O,onDelete:q,onBeforeDelete:A}=e.getState(),{nodes:D,edges:L}=await KX({nodesToRemove:h,edgesToRemove:b,nodes:x,edges:w,onBeforeDelete:A}),z=L.length>0,P=D.length>0;if(z){const R=L.map($R);I?.(L),O(R)}if(P){const R=D.map($R);E?.(D),T(R)}return(P||z)&&q?.({nodes:D,edges:L}),{deletedNodes:D,deletedEdges:L}},getIntersectingNodes:(h,b=!0,x)=>{const w=vR(h),E=w?h:c(h),I=x!==void 0;return E?(x||e.getState().nodes).filter(T=>{const O=e.getState().nodeLookup.get(T.id);if(O&&!w&&(T.id===h.id||!O.internals.positionAbsolute))return!1;const q=Kd(I?T:O),A=Wh(q,E);return b&&A>0||A>=E.width*E.height}):[]},isNodeIntersecting:(h,b,x=!0)=>{const E=vR(h)?h:c(h);if(!E)return!1;const I=Wh(E,b);return x&&I>0||I>=E.width*E.height},updateNode:d,updateNodeData:(h,b,x={replace:!1})=>{d(h,w=>{const E=typeof b=="function"?b(w):b;return x.replace?{...w,data:E}:{...w,data:{...w.data,...E}}},x)},updateEdge:p,updateEdgeData:(h,b,x={replace:!1})=>{p(h,w=>{const E=typeof b=="function"?b(w):b;return x.replace?{...w,data:E}:{...w,data:{...w.data,...E}}},x)},getNodesBounds:h=>{const{nodeLookup:b,nodeOrigin:x}=e.getState();return HX(h,{nodeLookup:b,nodeOrigin:x})},getHandleConnections:({type:h,id:b,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}-${h}${b?`-${b}`:""}`)?.values()??[]),getNodeConnections:({type:h,handleId:b,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}${h?b?`-${h}-${b}`:`-${h}`:""}`)?.values()??[])}},[]);return K.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const WR=t=>t.selected,fte={actInsideInputWithModifier:!1},pte=typeof window<"u"?window:void 0;function hte({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=Cr(),{deleteElements:r}=mf(),i=Vh(t,fte),s=Vh(e,{target:pte});K.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(WR),edges:o.filter(WR)}),n.setState({nodesSelectionActive:!1})}},[i]),K.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function mte(t){const e=Cr();K.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=rx(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Va.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const ox={position:"absolute",width:"100%",height:"100%",top:0,left:0},gte=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function yte({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Qu.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:c,translateExtent:d,minZoom:p,maxZoom:h,zoomActivationKeyCode:b,preventScrolling:x=!0,children:w,noWheelClassName:E,noPanClassName:I,onViewportChange:T,isControlledViewport:O,paneClickDistance:q}){const A=Cr(),D=K.useRef(null),{userSelectionActive:L,lib:z}=Tn(gte,Fr),P=Vh(b),R=K.useRef();mte(D);const M=K.useCallback(F=>{T?.({x:F[0],y:F[1],zoom:F[2]}),O||A.setState({transform:F})},[T,O]);return K.useEffect(()=>{if(D.current){R.current=Iee({domNode:D.current,minZoom:p,maxZoom:h,translateExtent:d,viewport:c,paneClickDistance:q,onDraggingChange:B=>A.setState({paneDragging:B}),onPanZoomStart:(B,te)=>{const{onViewportChangeStart:J,onMoveStart:le}=A.getState();le?.(B,te),J?.(te)},onPanZoom:(B,te)=>{const{onViewportChange:J,onMove:le}=A.getState();le?.(B,te),J?.(te)},onPanZoomEnd:(B,te)=>{const{onViewportChangeEnd:J,onMoveEnd:le}=A.getState();le?.(B,te),J?.(te)}});const{x:F,y:W,zoom:V}=R.current.getViewport();return A.setState({panZoom:R.current,transform:[F,W,V],domNode:D.current.closest(".react-flow")}),()=>{R.current?.destroy()}}},[]),K.useEffect(()=>{R.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:P,preventScrolling:x,noPanClassName:I,userSelectionActive:L,noWheelClassName:E,lib:z,onTransformChange:M})},[t,e,n,r,i,s,o,l,P,x,I,L,E,z,M]),f.jsx("div",{className:"react-flow__renderer",ref:D,style:ox,children:w})}const vte=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function bte(){const{userSelectionActive:t,userSelectionRect:e}=Tn(vte,Fr);return t&&e?f.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const R0=(t,e)=>n=>{n.target===e.current&&t?.(n)},xte=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging});function _te({isSelecting:t,selectionKeyPressed:e,selectionMode:n=Bh.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:p,onPaneMouseMove:h,onPaneMouseLeave:b,children:x}){const w=Cr(),{userSelectionActive:E,elementsSelectable:I,dragging:T}=Tn(xte,Fr),O=I&&(t||E),q=K.useRef(null),A=K.useRef(),D=K.useRef(new Set),L=K.useRef(new Set),z=K.useRef(!1),P=K.useRef(!1),R=J=>{if(z.current){z.current=!1;return}l?.(J),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},M=J=>{if(Array.isArray(r)&&r?.includes(2)){J.preventDefault();return}c?.(J)},F=d?J=>d(J):void 0,W=J=>{const{resetSelectedElements:le,domNode:se}=w.getState();if(A.current=se?.getBoundingClientRect(),!I||!t||J.button!==0||J.target!==q.current||!A.current)return;J.target?.setPointerCapture?.(J.pointerId),P.current=!0,z.current=!1;const{x:ne,y:oe}=Fa(J.nativeEvent,A.current);le(),w.setState({userSelectionRect:{width:0,height:0,startX:ne,startY:oe,x:ne,y:oe}}),s?.(J)},V=J=>{const{userSelectionRect:le,transform:se,nodeLookup:ne,edgeLookup:oe,connectionLookup:X,triggerNodeChanges:ce,triggerEdgeChanges:de,defaultEdgeOptions:ye}=w.getState();if(!A.current||!le)return;z.current=!0;const{x:_e,y:Ne}=Fa(J.nativeEvent,A.current),{startX:ze,startY:qe}=le,De={startX:ze,startY:qe,x:_e<ze?_e:ze,y:Ne<qe?Ne:qe,width:Math.abs(_e-ze),height:Math.abs(Ne-qe)},Ze=D.current,Xe=L.current;D.current=new Set(C2(ne,De,se,n===Bh.Partial,!0).map(ut=>ut.id)),L.current=new Set;const Ue=ye?.selectable??!0;for(const ut of D.current){const wt=X.get(ut);if(wt)for(const{edgeId:Tt}of wt.values()){const Ut=oe.get(Tt);Ut&&(Ut.selectable??Ue)&&L.current.add(Tt)}}if(!bR(Ze,D.current)){const ut=fd(ne,D.current,!0);ce(ut)}if(!bR(Xe,L.current)){const ut=fd(oe,L.current);de(ut)}w.setState({userSelectionRect:De,userSelectionActive:!0,nodesSelectionActive:!1})},B=J=>{if(J.button!==0||!P.current)return;J.target?.releasePointerCapture?.(J.pointerId);const{userSelectionRect:le}=w.getState();!E&&le&&J.target===q.current&&R?.(J),w.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:D.current.size>0}),o?.(J),(e||i)&&(z.current=!1),P.current=!1},te=r===!0||Array.isArray(r)&&r.includes(0);return f.jsxs("div",{className:ei(["react-flow__pane",{draggable:te,dragging:T,selection:t}]),onClick:O?void 0:R0(R,q),onContextMenu:R0(M,q),onWheel:R0(F,q),onPointerEnter:O?void 0:p,onPointerDown:O?W:h,onPointerMove:O?V:h,onPointerUp:O?B:void 0,onPointerLeave:b,ref:q,style:ox,children:[x,f.jsx(bte,{})]})}function o1({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:c}=e.getState(),d=l.get(t);if(!d){c?.("012",Va.error012(t));return}e.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function oL({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=Cr(),[c,d]=K.useState(!1),p=K.useRef();return K.useEffect(()=>{p.current=pee({getStoreItems:()=>l.getState(),onNodeMouseDown:h=>{o1({id:h,store:l,nodeRef:t})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),K.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{p.current?.destroy()}},[n,r,e,s,t,i]),c}const wte=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function aL(){const t=Cr();return K.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:c,nodeLookup:d,nodeOrigin:p}=t.getState(),h=new Map,b=wte(o),x=i?s[0]:5,w=i?s[1]:5,E=n.direction.x*x*n.factor,I=n.direction.y*w*n.factor;for(const[,T]of d){if(!b(T))continue;let O={x:T.internals.positionAbsolute.x+E,y:T.internals.positionAbsolute.y+I};i&&(O=nx(O,s));const{position:q,positionAbsolute:A}=T2({nodeId:T.id,nextPosition:O,nodeLookup:d,nodeExtent:r,nodeOrigin:p,onError:l});T.position=q,T.internals.positionAbsolute=A,h.set(T.id,T)}c(h)},[])}const DN=K.createContext(null),Ste=DN.Provider;DN.Consumer;const lL=()=>K.useContext(DN),Ete=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),Nte=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:c,isValid:d}=o,p=c?.nodeId===t&&c?.id===e&&c?.type===n;return{connectingFrom:l?.nodeId===t&&l?.id===e&&l?.type===n,connectingTo:p,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:s===Hd.Strict?l?.type!==n:t!==l?.nodeId||e!==l?.id,connectionInProcess:!!l,valid:p&&d}};function kte({type:t="source",position:e=Lt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:c,className:d,onMouseDown:p,onTouchStart:h,...b},x){const w=o||null,E=t==="target",I=Cr(),T=lL(),{connectOnClick:O,noPanClassName:q,rfId:A}=Tn(Ete,Fr),{connectingFrom:D,connectingTo:L,clickConnecting:z,isPossibleEndHandle:P,connectionInProcess:R,valid:M}=Tn(Nte(T,w,t),Fr);T||I.getState().onError?.("010",Va.error010());const F=B=>{const{defaultEdgeOptions:te,onConnect:J,hasDefaultEdges:le}=I.getState(),se={...te,...B};if(le){const{edges:ne,setEdges:oe}=I.getState();oe($2(se,ne))}J?.(se),l?.(se)},W=B=>{if(!T)return;const te=D2(B.nativeEvent);if(i&&(te&&B.button===0||!te)){const J=I.getState();s1.onPointerDown(B.nativeEvent,{autoPanOnConnect:J.autoPanOnConnect,connectionMode:J.connectionMode,connectionRadius:J.connectionRadius,domNode:J.domNode,nodeLookup:J.nodeLookup,lib:J.lib,isTarget:E,handleId:w,nodeId:T,flowId:J.rfId,panBy:J.panBy,cancelConnection:J.cancelConnection,onConnectStart:J.onConnectStart,onConnectEnd:J.onConnectEnd,updateConnection:J.updateConnection,onConnect:F,isValidConnection:n||J.isValidConnection,getTransform:()=>I.getState().transform,getFromHandle:()=>I.getState().connection.fromHandle,autoPanSpeed:J.autoPanSpeed})}te?p?.(B):h?.(B)},V=B=>{const{onClickConnectStart:te,onClickConnectEnd:J,connectionClickStartHandle:le,connectionMode:se,isValidConnection:ne,lib:oe,rfId:X,nodeLookup:ce,connection:de}=I.getState();if(!T||!le&&!i)return;if(!le){te?.(B.nativeEvent,{nodeId:T,handleId:w,handleType:t}),I.setState({connectionClickStartHandle:{nodeId:T,type:t,id:w}});return}const ye=F2(B.target),_e=n||ne,{connection:Ne,isValid:ze}=s1.isValid(B.nativeEvent,{handle:{nodeId:T,id:w,type:t},connectionMode:se,fromNodeId:le.nodeId,fromHandleId:le.id||null,fromType:le.type,isValidConnection:_e,flowId:X,doc:ye,lib:oe,nodeLookup:ce});ze&&Ne&&F(Ne);const qe=structuredClone(de);delete qe.inProgress,qe.toPosition=qe.toHandle?qe.toHandle.position:null,J?.(B,qe),I.setState({connectionClickStartHandle:null})};return f.jsx("div",{"data-handleid":w,"data-nodeid":T,"data-handlepos":e,"data-id":`${A}-${T}-${w}-${t}`,className:ei(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",q,d,{source:!E,target:E,connectable:r,connectablestart:i,connectableend:s,clickconnecting:z,connectingfrom:D,connectingto:L,valid:M,connectionindicator:r&&(!R||P)&&(R?s:i)}]),onMouseDown:W,onTouchStart:W,onClick:O?V:void 0,ref:x,...b,children:c})}const oa=K.memo(iL(kte));function Ite({data:t,isConnectable:e,sourcePosition:n=Lt.Bottom}){return f.jsxs(f.Fragment,{children:[t?.label,f.jsx(oa,{type:"source",position:n,isConnectable:e})]})}function Cte({data:t,isConnectable:e,targetPosition:n=Lt.Top,sourcePosition:r=Lt.Bottom}){return f.jsxs(f.Fragment,{children:[f.jsx(oa,{type:"target",position:n,isConnectable:e}),t?.label,f.jsx(oa,{type:"source",position:r,isConnectable:e})]})}function Tte(){return null}function Ote({data:t,isConnectable:e,targetPosition:n=Lt.Top}){return f.jsxs(f.Fragment,{children:[f.jsx(oa,{type:"target",position:n,isConnectable:e}),t?.label]})}const Xv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},UR={input:Ite,default:Cte,output:Ote,group:Tte};function qte(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const Rte=t=>{const{width:e,height:n,x:r,y:i}=_m(t.nodeLookup,{filter:s=>!!s.selected});return{width:Io(e)?e:null,height:Io(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function jte({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Cr(),{width:i,height:s,transformString:o,userSelectionActive:l}=Tn(Rte,Fr),c=aL(),d=K.useRef(null);if(K.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),oL({nodeRef:d}),l||!i||!s)return null;const p=t?b=>{const x=r.getState().nodes.filter(w=>w.selected);t(b,x)}:void 0,h=b=>{Object.prototype.hasOwnProperty.call(Xv,b.key)&&(b.preventDefault(),c({direction:Xv[b.key],factor:b.shiftKey?4:1}))};return f.jsx("div",{className:ei(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:f.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s}})})}const VR=typeof window<"u"?window:void 0,Ate=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function uL({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:c,selectionKeyCode:d,selectionOnDrag:p,selectionMode:h,onSelectionStart:b,onSelectionEnd:x,multiSelectionKeyCode:w,panActivationKeyCode:E,zoomActivationKeyCode:I,elementsSelectable:T,zoomOnScroll:O,zoomOnPinch:q,panOnScroll:A,panOnScrollSpeed:D,panOnScrollMode:L,zoomOnDoubleClick:z,panOnDrag:P,defaultViewport:R,translateExtent:M,minZoom:F,maxZoom:W,preventScrolling:V,onSelectionContextMenu:B,noWheelClassName:te,noPanClassName:J,disableKeyboardA11y:le,onViewportChange:se,isControlledViewport:ne}){const{nodesSelectionActive:oe,userSelectionActive:X}=Tn(Ate),ce=Vh(d,{target:VR}),de=Vh(E,{target:VR}),ye=de||P,_e=de||A,Ne=p&&ye!==!0,ze=ce||X||Ne;return hte({deleteKeyCode:c,multiSelectionKeyCode:w}),f.jsx(yte,{onPaneContextMenu:s,elementsSelectable:T,zoomOnScroll:O,zoomOnPinch:q,panOnScroll:_e,panOnScrollSpeed:D,panOnScrollMode:L,zoomOnDoubleClick:z,panOnDrag:!ce&&ye,defaultViewport:R,translateExtent:M,minZoom:F,maxZoom:W,zoomActivationKeyCode:I,preventScrolling:V,noWheelClassName:te,noPanClassName:J,onViewportChange:se,isControlledViewport:ne,paneClickDistance:l,children:f.jsxs(_te,{onSelectionStart:b,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ye,isSelecting:!!ze,selectionMode:h,selectionKeyPressed:ce,selectionOnDrag:Ne,children:[t,oe&&f.jsx(jte,{onSelectionContextMenu:B,noPanClassName:J,disableKeyboardA11y:le})]})})}uL.displayName="FlowRenderer";const Pte=K.memo(uL),Fte=t=>e=>t?C2(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function Dte(t){return Tn(K.useCallback(Fte(t),[t]),Fr)}const Lte=t=>t.updateNodeInternals;function Mte(){const t=Tn(Lte),[e]=K.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return K.useEffect(()=>()=>{e?.disconnect()},[e]),e}function $te({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=Cr(),s=K.useRef(null),o=K.useRef(null),l=K.useRef(t.sourcePosition),c=K.useRef(t.targetPosition),d=K.useRef(e),p=n&&!!t.internals.handleBounds;return K.useEffect(()=>{s.current&&!t.hidden&&(!p||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[p,t.hidden]),K.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),K.useEffect(()=>{if(s.current){const h=d.current!==e,b=l.current!==t.sourcePosition,x=c.current!==t.targetPosition;(h||b||x)&&(d.current=e,l.current=t.sourcePosition,c.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function Bte({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:c,nodesConnectable:d,nodesFocusable:p,resizeObserver:h,noDragClassName:b,noPanClassName:x,disableKeyboardA11y:w,rfId:E,nodeTypes:I,nodeExtent:T,nodeClickDistance:O,onError:q}){const{node:A,internals:D,isParent:L}=Tn(qe=>{const De=qe.nodeLookup.get(t),Ze=qe.parentLookup.has(t);return{node:De,internals:De.internals,isParent:Ze}},Fr);let z=A.type||"default",P=I?.[z]||UR[z];P===void 0&&(q?.("003",Va.error003(z)),z="default",P=UR.default);const R=!!(A.draggable||l&&typeof A.draggable>"u"),M=!!(A.selectable||c&&typeof A.selectable>"u"),F=!!(A.connectable||d&&typeof A.connectable>"u"),W=!!(A.focusable||p&&typeof A.focusable>"u"),V=Cr(),B=A2(A),te=$te({node:A,nodeType:z,hasDimensions:B,resizeObserver:h}),J=oL({nodeRef:te,disabled:A.hidden||!R,noDragClassName:b,handleSelector:A.dragHandle,nodeId:t,isSelectable:M,nodeClickDistance:O}),le=aL();if(A.hidden)return null;const se=Ha(A),ne=qte(A),oe=M||R||e||n||r||i,X=n?qe=>n(qe,{...D.userNode}):void 0,ce=r?qe=>r(qe,{...D.userNode}):void 0,de=i?qe=>i(qe,{...D.userNode}):void 0,ye=s?qe=>s(qe,{...D.userNode}):void 0,_e=o?qe=>o(qe,{...D.userNode}):void 0,Ne=qe=>{const{selectNodesOnDrag:De,nodeDragThreshold:Ze}=V.getState();M&&(!De||!R||Ze>0)&&o1({id:t,store:V,nodeRef:te}),e&&e(qe,{...D.userNode})},ze=qe=>{if(!(t1(qe.nativeEvent)||w))if(E2.includes(qe.key)&&M){const De=qe.key==="Escape";o1({id:t,store:V,unselect:De,nodeRef:te})}else R&&A.selected&&Object.prototype.hasOwnProperty.call(Xv,qe.key)&&(qe.preventDefault(),V.setState({ariaLiveMessage:`Moved selected node ${qe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~D.positionAbsolute.x}, y: ${~~D.positionAbsolute.y}`}),le({direction:Xv[qe.key],factor:qe.shiftKey?4:1}))};return f.jsx("div",{className:ei(["react-flow__node",`react-flow__node-${z}`,{[x]:R},A.className,{selected:A.selected,selectable:M,parent:L,draggable:R,dragging:J}]),ref:te,style:{zIndex:D.z,transform:`translate(${D.positionAbsolute.x}px,${D.positionAbsolute.y}px)`,pointerEvents:oe?"all":"none",visibility:B?"visible":"hidden",...A.style,...ne},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:X,onMouseMove:ce,onMouseLeave:de,onContextMenu:ye,onClick:Ne,onDoubleClick:_e,onKeyDown:W?ze:void 0,tabIndex:W?0:void 0,role:W?"button":void 0,"aria-describedby":w?void 0:`${X2}-${E}`,"aria-label":A.ariaLabel,children:f.jsx(Ste,{value:t,children:f.jsx(P,{id:t,data:A.data,type:z,positionAbsoluteX:D.positionAbsolute.x,positionAbsoluteY:D.positionAbsolute.y,selected:A.selected??!1,selectable:M,draggable:R,deletable:A.deletable??!0,isConnectable:F,sourcePosition:A.sourcePosition,targetPosition:A.targetPosition,dragging:J,dragHandle:A.dragHandle,zIndex:D.z,parentId:A.parentId,...se})})})}const zte=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function cL(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Tn(zte,Fr),o=Dte(t.onlyRenderVisibleElements),l=Mte();return f.jsx("div",{className:"react-flow__nodes",style:ox,children:o.map(c=>f.jsx(Bte,{id:c,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:l,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},c))})}cL.displayName="NodeRenderer";const Wte=K.memo(cL);function Ute(t){return Tn(K.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&YX({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),Fr)}const Vte=({color:t="none",strokeWidth:e=1})=>f.jsx("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Hte=({color:t="none",strokeWidth:e=1})=>f.jsx("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),HR={[zh.Arrow]:Vte,[zh.ArrowClosed]:Hte};function Qte(t){const e=Cr();return K.useMemo(()=>Object.prototype.hasOwnProperty.call(HR,t)?HR[t]:(e.getState().onError?.("009",Va.error009(t)),null),[t])}const Kte=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=Qte(e);return c?f.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:f.jsx(c,{color:n,strokeWidth:o})}):null},dL=({defaultColor:t,rfId:e})=>{const n=Tn(s=>s.edges),r=Tn(s=>s.defaultEdgeOptions),i=K.useMemo(()=>see(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?f.jsx("svg",{className:"react-flow__marker",children:f.jsx("defs",{children:i.map(s=>f.jsx(Kte,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};dL.displayName="MarkerDefinitions";var Gte=K.memo(dL);function fL({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:d,...p}){const[h,b]=K.useState({x:1,y:0,width:0,height:0}),x=ei(["react-flow__edge-textwrapper",d]),w=K.useRef(null);return K.useEffect(()=>{if(w.current){const E=w.current.getBBox();b({x:E.x,y:E.y,width:E.width,height:E.height})}},[n]),typeof n>"u"||!n?null:f.jsxs("g",{transform:`translate(${t-h.width/2} ${e-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...p,children:[i&&f.jsx("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),f.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:w,style:r,children:n}),c]})}fL.displayName="EdgeText";const Zte=K.memo(fL);function Sm({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,interactionWidth:d=20,...p}){return f.jsxs(f.Fragment,{children:[f.jsx("path",{...p,d:t,fill:"none",className:ei(["react-flow__edge-path",p.className])}),d&&f.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r&&Io(e)&&Io(n)?f.jsx(Zte,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c}):null]})}function QR({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Lt.Left||t===Lt.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function LN({sourceX:t,sourceY:e,sourcePosition:n=Lt.Bottom,targetX:r,targetY:i,targetPosition:s=Lt.Top}){const[o,l]=QR({pos:n,x1:t,y1:e,x2:r,y2:i}),[c,d]=QR({pos:s,x1:r,y1:i,x2:t,y2:e}),[p,h,b,x]=L2({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${t},${e} C${o},${l} ${c},${d} ${r},${i}`,p,h,b,x]}function pL(t){return K.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Lt.Bottom,targetPosition:l=Lt.Top,label:c,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:w,markerEnd:E,markerStart:I,interactionWidth:T})=>{const[O,q,A]=LN({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),D=t.isInternal?void 0:e;return f.jsx(Sm,{id:D,path:O,labelX:q,labelY:A,label:c,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:w,markerEnd:E,markerStart:I,interactionWidth:T})})}const Jte=pL({isInternal:!1}),hL=pL({isInternal:!0});Jte.displayName="SimpleBezierEdge";hL.displayName="SimpleBezierEdgeInternal";function mL(t){return K.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:b,sourcePosition:x=Lt.Bottom,targetPosition:w=Lt.Top,markerEnd:E,markerStart:I,pathOptions:T,interactionWidth:O})=>{const[q,A,D]=n1({sourceX:n,sourceY:r,sourcePosition:x,targetX:i,targetY:s,targetPosition:w,borderRadius:T?.borderRadius,offset:T?.offset}),L=t.isInternal?void 0:e;return f.jsx(Sm,{id:L,path:q,labelX:A,labelY:D,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:E,markerStart:I,interactionWidth:O})})}const gL=mL({isInternal:!1}),yL=mL({isInternal:!0});gL.displayName="SmoothStepEdge";yL.displayName="SmoothStepEdgeInternal";function vL(t){return K.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return f.jsx(gL,{...n,id:r,pathOptions:K.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Yte=vL({isInternal:!1}),bL=vL({isInternal:!0});Yte.displayName="StepEdge";bL.displayName="StepEdgeInternal";function xL(t){return K.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:x,markerStart:w,interactionWidth:E})=>{const[I,T,O]=ON({sourceX:n,sourceY:r,targetX:i,targetY:s}),q=t.isInternal?void 0:e;return f.jsx(Sm,{id:q,path:I,labelX:T,labelY:O,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:x,markerStart:w,interactionWidth:E})})}const Xte=xL({isInternal:!1}),_L=xL({isInternal:!0});Xte.displayName="StraightEdge";_L.displayName="StraightEdgeInternal";function wL(t){return K.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Lt.Bottom,targetPosition:l=Lt.Top,label:c,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:w,markerEnd:E,markerStart:I,pathOptions:T,interactionWidth:O})=>{const[q,A,D]=TN({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:T?.curvature}),L=t.isInternal?void 0:e;return f.jsx(Sm,{id:L,path:q,labelX:A,labelY:D,label:c,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:w,markerEnd:E,markerStart:I,interactionWidth:O})})}const ene=wL({isInternal:!1}),SL=wL({isInternal:!0});ene.displayName="BezierEdge";SL.displayName="BezierEdgeInternal";const KR={default:SL,straight:_L,step:bL,smoothstep:yL,simplebezier:hL},GR={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},tne=(t,e,n)=>n===Lt.Left?t-e:n===Lt.Right?t+e:t,nne=(t,e,n)=>n===Lt.Top?t-e:n===Lt.Bottom?t+e:t,ZR="react-flow__edgeupdater";function JR({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return f.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:ei([ZR,`${ZR}-${l}`]),cx:tne(e,r,t),cy:nne(n,r,t),r,stroke:"transparent",fill:"transparent"})}function rne({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:c,onReconnect:d,onReconnectStart:p,onReconnectEnd:h,setReconnecting:b,setUpdateHover:x}){const w=Cr(),E=(A,D)=>{if(A.button!==0)return;const{autoPanOnConnect:L,domNode:z,isValidConnection:P,connectionMode:R,connectionRadius:M,lib:F,onConnectStart:W,onConnectEnd:V,cancelConnection:B,nodeLookup:te,rfId:J,panBy:le,updateConnection:se}=w.getState(),ne=D.type==="target";b(!0),p?.(A,n,D.type);const oe=(ce,de)=>{b(!1),h?.(ce,n,D.type,de)},X=ce=>d?.(n,ce);s1.onPointerDown(A.nativeEvent,{autoPanOnConnect:L,connectionMode:R,connectionRadius:M,domNode:z,handleId:D.id,nodeId:D.nodeId,nodeLookup:te,isTarget:ne,edgeUpdaterType:D.type,lib:F,flowId:J,cancelConnection:B,panBy:le,isValidConnection:P,onConnect:X,onConnectStart:W,onConnectEnd:V,onReconnectEnd:oe,updateConnection:se,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle})},I=A=>E(A,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),T=A=>E(A,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),O=()=>x(!0),q=()=>x(!1);return f.jsxs(f.Fragment,{children:[(t===!0||t==="source")&&f.jsx(JR,{position:l,centerX:r,centerY:i,radius:e,onMouseDown:I,onMouseEnter:O,onMouseOut:q,type:"source"}),(t===!0||t==="target")&&f.jsx(JR,{position:c,centerX:s,centerY:o,radius:e,onMouseDown:T,onMouseEnter:O,onMouseOut:q,type:"target"})]})}function ine({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,reconnectRadius:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,rfId:w,edgeTypes:E,noPanClassName:I,onError:T,disableKeyboardA11y:O}){let q=Tn(Ue=>Ue.edgeLookup.get(t));const A=Tn(Ue=>Ue.defaultEdgeOptions);q=A?{...A,...q}:q;let D=q.type||"default",L=E?.[D]||KR[D];L===void 0&&(T?.("011",Va.error011(D)),D="default",L=KR.default);const z=!!(q.focusable||e&&typeof q.focusable>"u"),P=typeof h<"u"&&(q.reconnectable||n&&typeof q.reconnectable>"u"),R=!!(q.selectable||r&&typeof q.selectable>"u"),M=K.useRef(null),[F,W]=K.useState(!1),[V,B]=K.useState(!1),te=Cr(),{zIndex:J,sourceX:le,sourceY:se,targetX:ne,targetY:oe,sourcePosition:X,targetPosition:ce}=Tn(K.useCallback(Ue=>{const ut=Ue.nodeLookup.get(q.source),wt=Ue.nodeLookup.get(q.target);if(!ut||!wt)return{zIndex:q.zIndex,...GR};const Tt=iee({id:t,sourceNode:ut,targetNode:wt,sourceHandle:q.sourceHandle||null,targetHandle:q.targetHandle||null,connectionMode:Ue.connectionMode,onError:T});return{zIndex:JX({selected:q.selected,zIndex:q.zIndex,sourceNode:ut,targetNode:wt,elevateOnSelect:Ue.elevateEdgesOnSelect}),...Tt||GR}},[q.source,q.target,q.sourceHandle,q.targetHandle,q.selected,q.zIndex]),Fr),de=K.useMemo(()=>q.markerStart?`url('#${r1(q.markerStart,w)}')`:void 0,[q.markerStart,w]),ye=K.useMemo(()=>q.markerEnd?`url('#${r1(q.markerEnd,w)}')`:void 0,[q.markerEnd,w]);if(q.hidden||le===null||se===null||ne===null||oe===null)return null;const _e=Ue=>{const{addSelectedEdges:ut,unselectNodesAndEdges:wt,multiSelectionActive:Tt}=te.getState();R&&(te.setState({nodesSelectionActive:!1}),q.selected&&Tt?(wt({nodes:[],edges:[q]}),M.current?.blur()):ut([t])),i&&i(Ue,q)},Ne=s?Ue=>{s(Ue,{...q})}:void 0,ze=o?Ue=>{o(Ue,{...q})}:void 0,qe=l?Ue=>{l(Ue,{...q})}:void 0,De=c?Ue=>{c(Ue,{...q})}:void 0,Ze=d?Ue=>{d(Ue,{...q})}:void 0,Xe=Ue=>{if(!O&&E2.includes(Ue.key)&&R){const{unselectNodesAndEdges:ut,addSelectedEdges:wt}=te.getState();Ue.key==="Escape"?(M.current?.blur(),ut({edges:[q]})):wt([t])}};return f.jsx("svg",{style:{zIndex:J},children:f.jsxs("g",{className:ei(["react-flow__edge",`react-flow__edge-${D}`,q.className,I,{selected:q.selected,animated:q.animated,inactive:!R&&!i,updating:F,selectable:R}]),onClick:_e,onDoubleClick:Ne,onContextMenu:ze,onMouseEnter:qe,onMouseMove:De,onMouseLeave:Ze,onKeyDown:z?Xe:void 0,tabIndex:z?0:void 0,role:z?"button":"img","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":q.ariaLabel===null?void 0:q.ariaLabel||`Edge from ${q.source} to ${q.target}`,"aria-describedby":z?`${eL}-${w}`:void 0,ref:M,children:[!V&&f.jsx(L,{id:t,source:q.source,target:q.target,type:q.type,selected:q.selected,animated:q.animated,selectable:R,deletable:q.deletable??!0,label:q.label,labelStyle:q.labelStyle,labelShowBg:q.labelShowBg,labelBgStyle:q.labelBgStyle,labelBgPadding:q.labelBgPadding,labelBgBorderRadius:q.labelBgBorderRadius,sourceX:le,sourceY:se,targetX:ne,targetY:oe,sourcePosition:X,targetPosition:ce,data:q.data,style:q.style,sourceHandleId:q.sourceHandle,targetHandleId:q.targetHandle,markerStart:de,markerEnd:ye,pathOptions:"pathOptions"in q?q.pathOptions:void 0,interactionWidth:q.interactionWidth}),P&&f.jsx(rne,{edge:q,isReconnectable:P,reconnectRadius:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,sourceX:le,sourceY:se,targetX:ne,targetY:oe,sourcePosition:X,targetPosition:ce,setUpdateHover:W,setReconnecting:B})]})})}const sne=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function EL({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:d,onEdgeClick:p,reconnectRadius:h,onEdgeDoubleClick:b,onReconnectStart:x,onReconnectEnd:w,disableKeyboardA11y:E}){const{edgesFocusable:I,edgesReconnectable:T,elementsSelectable:O,onError:q}=Tn(sne,Fr),A=Ute(e);return f.jsxs("div",{className:"react-flow__edges",children:[f.jsx(Gte,{defaultColor:t,rfId:n}),A.map(D=>f.jsx(ine,{id:D,edgesFocusable:I,edgesReconnectable:T,elementsSelectable:O,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onClick:p,reconnectRadius:h,onDoubleClick:b,onReconnectStart:x,onReconnectEnd:w,rfId:n,onError:q,edgeTypes:r,disableKeyboardA11y:E},D))]})}EL.displayName="EdgeRenderer";const one=K.memo(EL),ane=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function lne({children:t}){const e=Tn(ane);return f.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function une(t){const e=mf(),n=K.useRef(!1);K.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const cne=t=>t.panZoom?.syncViewport;function dne(t){const e=Tn(cne),n=Cr();return K.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function fne(t){return t.connection.inProgress?{...t.connection,to:wm(t.connection.to,t.transform)}:{...t.connection}}function pne(t){return fne}function NL(t){const e=pne();return Tn(e,Fr)}const hne=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function mne({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:c}=Tn(hne,Fr);return!(s&&i&&c)?null:f.jsx("svg",{style:t,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:f.jsx("g",{className:ei(["react-flow__connection",k2(l)]),children:f.jsx(kL,{style:e,type:n,CustomComponent:r,isValid:l})})})}const kL=({style:t,type:e=Ol.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:c,to:d,toNode:p,toHandle:h,toPosition:b}=NL();if(!i)return;if(n)return f.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:c,toPosition:b,connectionStatus:k2(r),toNode:p,toHandle:h});let x="";const w={sourceX:s.x,sourceY:s.y,sourcePosition:c,targetX:d.x,targetY:d.y,targetPosition:b};switch(e){case Ol.Bezier:[x]=TN(w);break;case Ol.SimpleBezier:[x]=LN(w);break;case Ol.Step:[x]=n1({...w,borderRadius:0});break;case Ol.SmoothStep:[x]=n1(w);break;default:[x]=ON(w)}return f.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};kL.displayName="ConnectionLine";const gne={};function YR(t=gne){K.useRef(t),Cr(),K.useEffect(()=>{},[t])}function yne(){Cr(),K.useRef(!1),K.useEffect(()=>{},[])}function IL({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:d,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:b,onSelectionEnd:x,connectionLineType:w,connectionLineStyle:E,connectionLineComponent:I,connectionLineContainerStyle:T,selectionKeyCode:O,selectionOnDrag:q,selectionMode:A,multiSelectionKeyCode:D,panActivationKeyCode:L,zoomActivationKeyCode:z,deleteKeyCode:P,onlyRenderVisibleElements:R,elementsSelectable:M,defaultViewport:F,translateExtent:W,minZoom:V,maxZoom:B,preventScrolling:te,defaultMarkerColor:J,zoomOnScroll:le,zoomOnPinch:se,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:X,zoomOnDoubleClick:ce,panOnDrag:de,onPaneClick:ye,onPaneMouseEnter:_e,onPaneMouseMove:Ne,onPaneMouseLeave:ze,onPaneScroll:qe,onPaneContextMenu:De,paneClickDistance:Ze,nodeClickDistance:Xe,onEdgeContextMenu:Ue,onEdgeMouseEnter:ut,onEdgeMouseMove:wt,onEdgeMouseLeave:Tt,reconnectRadius:Ut,onReconnect:nn,onReconnectStart:xe,onReconnectEnd:ve,noDragClassName:ke,noWheelClassName:Ae,noPanClassName:Ve,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ct,viewport:Qt,onViewportChange:Kt}){return YR(t),YR(e),yne(),une(n),dne(Qt),f.jsx(Pte,{onPaneClick:ye,onPaneMouseEnter:_e,onPaneMouseMove:Ne,onPaneMouseLeave:ze,onPaneContextMenu:De,onPaneScroll:qe,paneClickDistance:Ze,deleteKeyCode:P,selectionKeyCode:O,selectionOnDrag:q,selectionMode:A,onSelectionStart:b,onSelectionEnd:x,multiSelectionKeyCode:D,panActivationKeyCode:L,zoomActivationKeyCode:z,elementsSelectable:M,zoomOnScroll:le,zoomOnPinch:se,zoomOnDoubleClick:ce,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:X,panOnDrag:de,defaultViewport:F,translateExtent:W,minZoom:V,maxZoom:B,onSelectionContextMenu:h,preventScrolling:te,noDragClassName:ke,noWheelClassName:Ae,noPanClassName:Ve,disableKeyboardA11y:rt,onViewportChange:Kt,isControlledViewport:!!Qt,children:f.jsxs(lne,{children:[f.jsx(one,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:nn,onReconnectStart:xe,onReconnectEnd:ve,onlyRenderVisibleElements:R,onEdgeContextMenu:Ue,onEdgeMouseEnter:ut,onEdgeMouseMove:wt,onEdgeMouseLeave:Tt,reconnectRadius:Ut,defaultMarkerColor:J,noPanClassName:Ve,disableKeyboardA11y:rt,rfId:ct}),f.jsx(mne,{style:E,type:w,component:I,containerStyle:T}),f.jsx("div",{className:"react-flow__edgelabel-renderer"}),f.jsx(Wte,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:d,onNodeContextMenu:p,nodeClickDistance:Xe,onlyRenderVisibleElements:R,noPanClassName:Ve,noDragClassName:ke,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ct}),f.jsx("div",{className:"react-flow__viewport-portal"})]})})}IL.displayName="GraphView";const vne=K.memo(IL),XR=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:c}={})=>{const d=new Map,p=new Map,h=new Map,b=new Map,x=r??e??[],w=n??t??[],E=l??[0,0],I=c??$h;z2(h,b,x),i1(w,d,p,{nodeOrigin:E,nodeExtent:I,elevateNodesOnSelect:!1});let T=[0,0,1];if(o&&i&&s){const O=_m(d,{filter:L=>!!((L.width||L.initialWidth)&&(L.height||L.initialHeight))}),{x:q,y:A,zoom:D}=CN(O,i,s,.5,2,.1);T=[q,A,D]}return{rfId:"1",width:0,height:0,transform:T,nodes:w,nodeLookup:d,parentLookup:p,edges:x,edgeLookup:b,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:$h,nodeExtent:I,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Hd.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...N2},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:GX,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},bne=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:c})=>Mee((d,p)=>({...XR({nodes:t,edges:e,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:h=>{const{nodeLookup:b,parentLookup:x,nodeOrigin:w,elevateNodesOnSelect:E}=p();i1(h,b,x,{nodeOrigin:w,nodeExtent:c,elevateNodesOnSelect:E,checkEquality:!0}),d({nodes:h})},setEdges:h=>{const{connectionLookup:b,edgeLookup:x}=p();z2(b,x,h),d({edges:h})},setDefaultNodesAndEdges:(h,b)=>{if(h){const{setNodes:x}=p();x(h),d({hasDefaultNodes:!0})}if(b){const{setEdges:x}=p();x(b),d({hasDefaultEdges:!0})}},updateNodeInternals:(h,b={triggerFitView:!0})=>{const{triggerNodeChanges:x,nodeLookup:w,parentLookup:E,fitViewOnInit:I,fitViewDone:T,fitViewOnInitOptions:O,domNode:q,nodeOrigin:A,nodeExtent:D,debug:L,fitViewSync:z}=p(),{changes:P,updatedInternals:R}=cee(h,w,E,q,A,D);if(R){if(aee(w,E,{nodeOrigin:A,nodeExtent:D}),b.triggerFitView){let M=T;!T&&I&&(M=z({...O,nodes:O?.nodes})),d({fitViewDone:M})}else d({});P?.length>0&&(L&&console.log("React Flow: trigger node changes",P),x?.(P))}},updateNodePositions:(h,b=!1)=>{const x=[],w=[];for(const[E,I]of h){const T=!!(I?.expandParent&&I?.parentId&&I?.position),O={id:E,type:"position",position:T?{x:Math.max(0,I.position.x),y:Math.max(0,I.position.y)}:I.position,dragging:b};T&&x.push({id:E,parentId:I.parentId,rect:{...I.internals.positionAbsolute,width:I.measured.width,height:I.measured.height}}),w.push(O)}if(x.length>0){const{nodeLookup:E,parentLookup:I,nodeOrigin:T}=p(),O=AN(x,E,I,T);w.push(...O)}p().triggerNodeChanges(w)},triggerNodeChanges:h=>{const{onNodesChange:b,setNodes:x,nodes:w,hasDefaultNodes:E,debug:I}=p();if(h?.length){if(E){const T=FN(h,w);x(T)}I&&console.log("React Flow: trigger node changes",h),b?.(h)}},triggerEdgeChanges:h=>{const{onEdgesChange:b,setEdges:x,edges:w,hasDefaultEdges:E,debug:I}=p();if(h?.length){if(E){const T=rL(h,w);x(T)}I&&console.log("React Flow: trigger edge changes",h),b?.(h)}},addSelectedNodes:h=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:w,triggerNodeChanges:E,triggerEdgeChanges:I}=p();if(b){const T=h.map(O=>qu(O,!0));E(T);return}E(fd(w,new Set([...h]),!0)),I(fd(x))},addSelectedEdges:h=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:w,triggerNodeChanges:E,triggerEdgeChanges:I}=p();if(b){const T=h.map(O=>qu(O,!0));I(T);return}I(fd(x,new Set([...h]))),E(fd(w,new Set,!0))},unselectNodesAndEdges:({nodes:h,edges:b}={})=>{const{edges:x,nodes:w,nodeLookup:E,triggerNodeChanges:I,triggerEdgeChanges:T}=p(),O=h||w,q=b||x,A=O.map(L=>{const z=E.get(L.id);return z&&(z.selected=!1),qu(L.id,!1)}),D=q.map(L=>qu(L.id,!1));I(A),T(D)},setMinZoom:h=>{const{panZoom:b,maxZoom:x}=p();b?.setScaleExtent([h,x]),d({minZoom:h})},setMaxZoom:h=>{const{panZoom:b,minZoom:x}=p();b?.setScaleExtent([x,h]),d({maxZoom:h})},setTranslateExtent:h=>{p().panZoom?.setTranslateExtent(h),d({translateExtent:h})},setPaneClickDistance:h=>{p().panZoom?.setClickDistance(h)},resetSelectedElements:()=>{const{edges:h,nodes:b,triggerNodeChanges:x,triggerEdgeChanges:w}=p(),E=b.reduce((T,O)=>O.selected?[...T,qu(O.id,!1)]:T,[]),I=h.reduce((T,O)=>O.selected?[...T,qu(O.id,!1)]:T,[]);x(E),w(I)},setNodeExtent:h=>{const{nodes:b,nodeLookup:x,parentLookup:w,nodeOrigin:E,elevateNodesOnSelect:I,nodeExtent:T}=p();h[0][0]===T[0][0]&&h[0][1]===T[0][1]&&h[1][0]===T[1][0]&&h[1][1]===T[1][1]||(i1(b,x,w,{nodeOrigin:E,nodeExtent:h,elevateNodesOnSelect:I,checkEquality:!1}),d({nodeExtent:h}))},panBy:h=>{const{transform:b,width:x,height:w,panZoom:E,translateExtent:I}=p();return dee({delta:h,panZoom:E,transform:b,translateExtent:I,width:x,height:w})},fitView:h=>{const{panZoom:b,width:x,height:w,minZoom:E,maxZoom:I,nodeLookup:T}=p();if(!b)return Promise.resolve(!1);const O=YE(T,h);return XE({nodes:O,width:x,height:w,panZoom:b,minZoom:E,maxZoom:I},h)},fitViewSync:h=>{const{panZoom:b,width:x,height:w,minZoom:E,maxZoom:I,nodeLookup:T}=p();if(!b)return!1;const O=YE(T,h);return XE({nodes:O,width:x,height:w,panZoom:b,minZoom:E,maxZoom:I},h),O.size>0},cancelConnection:()=>{d({connection:{...N2}})},updateConnection:h=>{d({connection:h})},reset:()=>d({...XR()})}),Object.is);function CL({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:o,nodeOrigin:l,nodeExtent:c,children:d}){const[p]=K.useState(()=>bne({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:c}));return f.jsx($ee,{value:p,children:f.jsx(ute,{children:d})})}function xne({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,nodeOrigin:c,nodeExtent:d}){return K.useContext(sx)?f.jsx(f.Fragment,{children:t}):f.jsx(CL,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,nodeOrigin:c,nodeExtent:d,children:t})}const _ne={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function wne({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:c,onInit:d,onMove:p,onMoveStart:h,onMoveEnd:b,onConnect:x,onConnectStart:w,onConnectEnd:E,onClickConnectStart:I,onClickConnectEnd:T,onNodeMouseEnter:O,onNodeMouseMove:q,onNodeMouseLeave:A,onNodeContextMenu:D,onNodeDoubleClick:L,onNodeDragStart:z,onNodeDrag:P,onNodeDragStop:R,onNodesDelete:M,onEdgesDelete:F,onDelete:W,onSelectionChange:V,onSelectionDragStart:B,onSelectionDrag:te,onSelectionDragStop:J,onSelectionContextMenu:le,onSelectionStart:se,onSelectionEnd:ne,onBeforeDelete:oe,connectionMode:X,connectionLineType:ce=Ol.Bezier,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:_e,deleteKeyCode:Ne="Backspace",selectionKeyCode:ze="Shift",selectionOnDrag:qe=!1,selectionMode:De=Bh.Full,panActivationKeyCode:Ze="Space",multiSelectionKeyCode:Xe=Yv()?"Meta":"Control",zoomActivationKeyCode:Ue=Yv()?"Meta":"Control",snapToGrid:ut,snapGrid:wt,onlyRenderVisibleElements:Tt=!1,selectNodesOnDrag:Ut,nodesDraggable:nn,nodesConnectable:xe,nodesFocusable:ve,nodeOrigin:ke=tL,edgesFocusable:Ae,edgesReconnectable:Ve,elementsSelectable:rt=!0,defaultViewport:Me=Xee,minZoom:ct=.5,maxZoom:Qt=2,translateExtent:Kt=$h,preventScrolling:hn=!0,nodeExtent:cr,defaultMarkerColor:Dn="#b1b1b7",zoomOnScroll:Hr=!0,zoomOnPinch:Oi=!0,panOnScroll:Tr=!1,panOnScrollSpeed:Gt=.5,panOnScrollMode:Ki=Qu.Free,zoomOnDoubleClick:Gi=!0,panOnDrag:Zi=!0,onPaneClick:lo,onPaneMouseEnter:ua,onPaneMouseMove:su,onPaneMouseLeave:Ds,onPaneScroll:H,onPaneContextMenu:fc,paneClickDistance:cn=0,nodeClickDistance:pc=0,children:hc,onReconnect:mc,onReconnectStart:ou,onReconnectEnd:ca,onEdgeContextMenu:Ji,onEdgeDoubleClick:au,onEdgeMouseEnter:da,onEdgeMouseMove:_f,onEdgeMouseLeave:fa,reconnectRadius:Ls=10,onNodesChange:Qa,onEdgesChange:Ms,noDragClassName:wf="nodrag",noWheelClassName:Sf="nowheel",noPanClassName:gc="nopan",fitView:$s,fitViewOptions:yc,connectOnClick:vc,attributionPosition:Ef,proOptions:bc,defaultEdgeOptions:xc,elevateNodesOnSelect:_c,elevateEdgesOnSelect:lu,disableKeyboardA11y:wc=!1,autoPanOnConnect:Nf,autoPanOnNodeDrag:dr,autoPanSpeed:kf,connectionRadius:uu,isValidConnection:Sc,onError:Ka,style:If,id:cu,nodeDragThreshold:Ga,viewport:Yi,onViewportChange:Cf,width:mi,height:Tf,colorMode:Of="light",debug:qf,...Lo},Za){const qi=cu||"1",Ja=rte(Of);return f.jsx("div",{"data-testid":"rf__wrapper",...Lo,style:{...If,..._ne},ref:Za,className:ei(["react-flow",i,Ja]),id:cu,children:f.jsxs(xne,{nodes:t,edges:e,width:mi,height:Tf,fitView:$s,nodeOrigin:ke,nodeExtent:cr,children:[f.jsx(vne,{onInit:d,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:O,onNodeMouseMove:q,onNodeMouseLeave:A,onNodeContextMenu:D,onNodeDoubleClick:L,nodeTypes:s,edgeTypes:o,connectionLineType:ce,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:_e,selectionKeyCode:ze,selectionOnDrag:qe,selectionMode:De,deleteKeyCode:Ne,multiSelectionKeyCode:Xe,panActivationKeyCode:Ze,zoomActivationKeyCode:Ue,onlyRenderVisibleElements:Tt,defaultViewport:Me,translateExtent:Kt,minZoom:ct,maxZoom:Qt,preventScrolling:hn,zoomOnScroll:Hr,zoomOnPinch:Oi,zoomOnDoubleClick:Gi,panOnScroll:Tr,panOnScrollSpeed:Gt,panOnScrollMode:Ki,panOnDrag:Zi,onPaneClick:lo,onPaneMouseEnter:ua,onPaneMouseMove:su,onPaneMouseLeave:Ds,onPaneScroll:H,onPaneContextMenu:fc,paneClickDistance:cn,nodeClickDistance:pc,onSelectionContextMenu:le,onSelectionStart:se,onSelectionEnd:ne,onReconnect:mc,onReconnectStart:ou,onReconnectEnd:ca,onEdgeContextMenu:Ji,onEdgeDoubleClick:au,onEdgeMouseEnter:da,onEdgeMouseMove:_f,onEdgeMouseLeave:fa,reconnectRadius:Ls,defaultMarkerColor:Dn,noDragClassName:wf,noWheelClassName:Sf,noPanClassName:gc,rfId:qi,disableKeyboardA11y:wc,nodeExtent:cr,viewport:Yi,onViewportChange:Cf}),f.jsx(nte,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:x,onConnectStart:w,onConnectEnd:E,onClickConnectStart:I,onClickConnectEnd:T,nodesDraggable:nn,nodesConnectable:xe,nodesFocusable:ve,edgesFocusable:Ae,edgesReconnectable:Ve,elementsSelectable:rt,elevateNodesOnSelect:_c,elevateEdgesOnSelect:lu,minZoom:ct,maxZoom:Qt,nodeExtent:cr,onNodesChange:Qa,onEdgesChange:Ms,snapToGrid:ut,snapGrid:wt,connectionMode:X,translateExtent:Kt,connectOnClick:vc,defaultEdgeOptions:xc,fitView:$s,fitViewOptions:yc,onNodesDelete:M,onEdgesDelete:F,onDelete:W,onNodeDragStart:z,onNodeDrag:P,onNodeDragStop:R,onSelectionDrag:te,onSelectionDragStart:B,onSelectionDragStop:J,onMove:p,onMoveStart:h,onMoveEnd:b,noPanClassName:gc,nodeOrigin:ke,rfId:qi,autoPanOnConnect:Nf,autoPanOnNodeDrag:dr,autoPanSpeed:kf,onError:Ka,connectionRadius:uu,isValidConnection:Sc,selectNodesOnDrag:Ut,nodeDragThreshold:Ga,onBeforeDelete:oe,paneClickDistance:cn,debug:qf}),f.jsx(Yee,{onSelectionChange:V}),hc,f.jsx(Qee,{proOptions:bc,position:Ef}),f.jsx(Vee,{rfId:qi,disableKeyboardA11y:wc})]})})}var TL=iL(wne);const Sne=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function Ene({children:t}){const e=Tn(Sne);return e?fb.createPortal(t,e):null}function Nne(t){const[e,n]=K.useState(t),r=K.useCallback(i=>n(s=>FN(i,s)),[]);return[e,n,r]}function kne(t){const[e,n]=K.useState(t),r=K.useCallback(i=>n(s=>rL(i,s)),[]);return[e,n,r]}function ej(t){return Tn(K.useCallback(n=>n.nodeLookup.get(t),[t]),Fr)}function Ine({dimensions:t,lineWidth:e,variant:n,className:r}){return f.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:ei(["react-flow__background-pattern",n,r])})}function Cne({radius:t,className:e}){return f.jsx("circle",{cx:t,cy:t,r:t,className:ei(["react-flow__background-pattern","dots",e])})}var Xo;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Xo||(Xo={}));const Tne={[Xo.Dots]:1,[Xo.Lines]:1,[Xo.Cross]:6},One=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function OL({id:t,variant:e=Xo.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:c,className:d,patternClassName:p}){const h=K.useRef(null),{transform:b,patternId:x}=Tn(One,Fr),w=r||Tne[e],E=e===Xo.Dots,I=e===Xo.Cross,T=Array.isArray(n)?n:[n,n],O=[T[0]*b[2]||1,T[1]*b[2]||1],q=w*b[2],A=Array.isArray(s)?s:[s,s],D=I?[q,q]:O,L=[A[0]*b[2]||1+D[0]/2,A[1]*b[2]||1+D[1]/2],z=`${x}${t||""}`;return f.jsxs("svg",{className:ei(["react-flow__background",d]),style:{...c,...ox,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:h,"data-testid":"rf__background",children:[f.jsx("pattern",{id:z,x:b[0]%O[0],y:b[1]%O[1],width:O[0],height:O[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${L[0]},-${L[1]})`,children:E?f.jsx(Cne,{radius:q/2,className:p}):f.jsx(Ine,{dimensions:D,lineWidth:i,variant:e,className:p})}),f.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${z})`})]})}OL.displayName="Background";const qL=K.memo(OL);function qne(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:f.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Rne(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:f.jsx("path",{d:"M0 0h32v4.2H0z"})})}function jne(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:f.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Ane(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Pne(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function oy({children:t,className:e,...n}){return f.jsx("button",{type:"button",className:ei(["react-flow__controls-button",e]),...n,children:t})}const Fne=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom});function RL({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:d,children:p,position:h="bottom-left",orientation:b="vertical","aria-label":x="React Flow controls"}){const w=Cr(),{isInteractive:E,minZoomReached:I,maxZoomReached:T}=Tn(Fne,Fr),{zoomIn:O,zoomOut:q,fitView:A}=mf(),D=()=>{O(),s?.()},L=()=>{q(),o?.()},z=()=>{A(i),l?.()},P=()=>{w.setState({nodesDraggable:!E,nodesConnectable:!E,elementsSelectable:!E}),c?.(!E)},R=b==="horizontal"?"horizontal":"vertical";return f.jsxs(PN,{className:ei(["react-flow__controls",R,d]),position:h,style:t,"data-testid":"rf__controls","aria-label":x,children:[e&&f.jsxs(f.Fragment,{children:[f.jsx(oy,{onClick:D,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:T,children:f.jsx(qne,{})}),f.jsx(oy,{onClick:L,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:I,children:f.jsx(Rne,{})})]}),n&&f.jsx(oy,{className:"react-flow__controls-fitview",onClick:z,title:"fit view","aria-label":"fit view",children:f.jsx(jne,{})}),r&&f.jsx(oy,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:E?f.jsx(Pne,{}):f.jsx(Ane,{})}),p]})}RL.displayName="Controls";const jL=K.memo(RL);function Dne({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:c,className:d,borderRadius:p,shapeRendering:h,selected:b,onClick:x}){const{background:w,backgroundColor:E}=s||{},I=o||w||E;return f.jsx("rect",{className:ei(["react-flow__minimap-node",{selected:b},d]),x:e,y:n,rx:p,ry:p,width:r,height:i,style:{fill:I,stroke:l,strokeWidth:c},shapeRendering:h,onClick:x?T=>x(T,t):void 0})}const Lne=K.memo(Dne),Mne=t=>t.nodes.map(e=>e.id),j0=t=>t instanceof Function?t:()=>t;function $ne({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Lne,onClick:o}){const l=Tn(Mne,Fr),c=j0(e),d=j0(t),p=j0(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return f.jsx(f.Fragment,{children:l.map(b=>f.jsx(zne,{id:b,nodeColorFunc:c,nodeStrokeColorFunc:d,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:h},b))})}function Bne({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:c}){const{node:d,x:p,y:h,width:b,height:x}=Tn(w=>{const E=w.nodeLookup.get(t),{x:I,y:T}=E.internals.positionAbsolute,{width:O,height:q}=Ha(E);return{node:E,x:I,y:T,width:O,height:q}},Fr);return!d||d.hidden||!A2(d)?null:f.jsx(l,{x:p,y:h,width:b,height:x,style:d.style,selected:!!d.selected,className:r(d),color:e(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:c,id:d.id})}const zne=K.memo(Bne);var Wne=K.memo($ne);const Une=200,Vne=150,Hne=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?R2(_m(t.nodeLookup),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height}},Qne="react-flow__minimap-desc";function AL({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:c,maskColor:d,maskStrokeColor:p,maskStrokeWidth:h,position:b="bottom-right",onClick:x,onNodeClick:w,pannable:E=!1,zoomable:I=!1,ariaLabel:T="React Flow mini map",inversePan:O,zoomStep:q=10,offsetScale:A=5}){const D=Cr(),L=K.useRef(null),{boundingRect:z,viewBB:P,rfId:R,panZoom:M,translateExtent:F,flowWidth:W,flowHeight:V}=Tn(Hne,Fr),B=t?.width??Une,te=t?.height??Vne,J=z.width/B,le=z.height/te,se=Math.max(J,le),ne=se*B,oe=se*te,X=A*se,ce=z.x-(ne-z.width)/2-X,de=z.y-(oe-z.height)/2-X,ye=ne+X*2,_e=oe+X*2,Ne=`${Qne}-${R}`,ze=K.useRef(0),qe=K.useRef();ze.current=se,K.useEffect(()=>{if(L.current&&M)return qe.current=bee({domNode:L.current,panZoom:M,getTransform:()=>D.getState().transform,getViewScale:()=>ze.current}),()=>{qe.current?.destroy()}},[M]),K.useEffect(()=>{qe.current?.update({translateExtent:F,width:W,height:V,inversePan:O,pannable:E,zoomStep:q,zoomable:I})},[E,I,O,q,F,W,V]);const De=x?Xe=>{const[Ue,ut]=qe.current?.pointer(Xe)||[0,0];x(Xe,{x:Ue,y:ut})}:void 0,Ze=w?K.useCallback((Xe,Ue)=>{const ut=D.getState().nodeLookup.get(Ue);w(Xe,ut)},[]):void 0;return f.jsx(PN,{position:b,style:{...t,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*se:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:ei(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:f.jsxs("svg",{width:B,height:te,viewBox:`${ce} ${de} ${ye} ${_e}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Ne,ref:L,onClick:De,children:[T&&f.jsx("title",{id:Ne,children:T}),f.jsx(Wne,{onClick:Ze,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),f.jsx("path",{className:"react-flow__minimap-mask",d:`M${ce-X},${de-X}h${ye+X*2}v${_e+X*2}h${-ye-X*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}AL.displayName="MiniMap";const PL=K.memo(AL);function Kne({nodeId:t,position:e,variant:n=rh.Handle,className:r,style:i={},children:s,color:o,minWidth:l=10,minHeight:c=10,maxWidth:d=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:b,onResizeStart:x,onResize:w,onResizeEnd:E}){const I=lL(),T=typeof t=="string"?t:I,O=Cr(),q=K.useRef(null),A=n===rh.Line?"right":"bottom-right",D=e??A,L=K.useRef(null);K.useEffect(()=>{if(!(!q.current||!T))return L.current||(L.current=Aee({domNode:q.current,nodeId:T,getStoreItems:()=>{const{nodeLookup:M,transform:F,snapGrid:W,snapToGrid:V,nodeOrigin:B,domNode:te}=O.getState();return{nodeLookup:M,transform:F,snapGrid:W,snapToGrid:V,nodeOrigin:B,paneDomNode:te}},onChange:(M,F)=>{const{triggerNodeChanges:W,nodeLookup:V,parentLookup:B,nodeOrigin:te}=O.getState(),J=[],le={x:M.x,y:M.y},se=V.get(T);if(se&&se.expandParent&&se.parentId){const ne=se.origin??te,oe=M.width??se.measured.width,X=M.height??se.measured.height,ce={id:se.id,parentId:se.parentId,rect:{width:oe,height:X,...P2({x:M.x??se.position.x,y:M.y??se.position.y},{width:oe,height:X},se.parentId,V,ne)}},de=AN([ce],V,B,te);J.push(...de),le.x=M.x?Math.max(ne[0]*oe,M.x):void 0,le.y=M.y?Math.max(ne[1]*X,M.y):void 0}if(le.x!==void 0&&le.y!==void 0){const ne={id:T,type:"position",position:{...le}};J.push(ne)}if(M.width!==void 0&&M.height!==void 0){const ne={id:T,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:M.width,height:M.height}};J.push(ne)}for(const ne of F){const oe={...ne,type:"position"};J.push(oe)}W(J)},onEnd:()=>{const M={id:T,type:"dimensions",resizing:!1};O.getState().triggerNodeChanges([M])}})),L.current.update({controlPosition:D,boundaries:{minWidth:l,minHeight:c,maxWidth:d,maxHeight:p},keepAspectRatio:h,onResizeStart:x,onResize:w,onResizeEnd:E,shouldResize:b}),()=>{L.current?.destroy()}},[D,l,c,d,p,h,x,w,E,b]);const z=D.split("-"),P=n===rh.Line?"borderColor":"backgroundColor",R=o?{...i,[P]:o}:i;return f.jsx("div",{className:ei(["react-flow__resize-control","nodrag",...z,n,r]),ref:q,style:R,children:s})}K.memo(Kne);const Hh="icon-[gala--clock]",Gne=async({tx:t,userId:e,buildingId:n,blueprintProductionId:r})=>{const i=await t.selectFrom("Blueprint_Production as bp").select(["bp.cycles"]).where("bp.id","=",r).executeTakeFirstOrThrow(),{count:s}=await t.selectFrom("Cycle as c").select(l=>l.fn.count("c.id").as("count")).where("c.userId","=",e).executeTakeFirstOrThrow(),o=await t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",r).execute();for await(const{resourceId:l,amount:c,passive:d}of o){const p=await t.selectFrom("Inventory as i").innerJoin("User_Inventory as ui","ui.inventoryId","i.id").select(["i.id","i.amount"]).where("ui.userId","=",e).where("i.resourceId","=",l).where("i.amount",">=",c).executeTakeFirstOrThrow();d||await t.updateTable("Inventory").set({amount:p.amount-c}).where("id","=",p.id).execute()}await t.insertInto("Production").values({id:Rn(),buildingId:n,blueprintProductionId:r,userId:e,cycle:0,from:s,to:s+i.cycles}).execute()},Zne=async({tx:t,userId:e})=>{await t.insertInto("Cycle").values({id:Rn(),stamp:dn.now().toUTC().toSQLTime(),userId:e}).execute();const n=(await t.selectFrom("Cycle as c").select(o=>o.fn.count("c.id").as("count")).where("c.userId","=",e).executeTakeFirstOrThrow()).count,r=await t.selectFrom("Construction as c").select(["c.id","c.cycle","c.to","c.blueprintId","c.x","c.y"]).where("userId","=",e).where("c.plan","=",!1).execute();for await(const{id:o,blueprintId:l,cycle:c,to:d,x:p,y:h}of r){if(n>d){const b=await t.insertInto("Building").values({id:Rn(),blueprintId:l,userId:e,x:p,y:h}).returning("id").executeTakeFirstOrThrow(),x=await t.selectFrom("Inventory as i").select(["i.amount","i.limit","i.resourceId"]).where("i.id","in",t.selectFrom("Blueprint_Inventory as bi").select("bi.inventoryId").where("bi.blueprintId","=",l)).execute();for await(const{amount:w,limit:E,resourceId:I}of x)await t.insertInto("Building_Inventory").values({id:Rn(),buildingId:b.id,inventoryId:(await t.insertInto("Inventory").values({id:Rn(),amount:w,limit:E,resourceId:I}).returning("id").executeTakeFirstOrThrow()).id}).execute();await t.deleteFrom("Construction").where("id","=",o).execute();continue}await t.updateTable("Construction").set("cycle",c+1).where("id","=",o).execute()}const i=await t.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","p.cycle","p.to","bp.resourceId","r.name","bp.amount"]).where("userId","=",e).execute();for await(const{id:o,resourceId:l,cycle:c,to:d,amount:p}of i){if(n>d){const h=await t.selectFrom("Inventory as i").innerJoin("User_Inventory as ui","i.id","ui.inventoryId").select(["i.id","i.amount","i.limit"]).where("ui.userId","=",e).where("i.resourceId","=",l).executeTakeFirst();if(!h||h.limit>0&&h.amount+p>h.limit)continue;await t.updateTable("Inventory").set({amount:h.amount+p}).where("id","=",h.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",o).execute();continue}await t.updateTable("Production").set("cycle",c+1).where("id","=",o).execute()}const s=await t.selectFrom("Production_Queue as pq").innerJoin("Blueprint_Production as bp","bp.id","pq.blueprintProductionId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["pq.id","pq.count","pq.limit","pq.blueprintProductionId","pq.buildingId"]).where("pq.userId","=",e).where("pq.paused","=",!1).orderBy("pq.priority","desc").execute();for await(const{id:o,count:l,limit:c,blueprintProductionId:d,buildingId:p}of s)try{const{count:h}=await t.selectFrom("Production as p").where("p.buildingId","=",p).select(b=>b.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(h>0)continue;await Gne({tx:t,blueprintProductionId:d,buildingId:p,userId:e}),await t.updateTable("Production_Queue").set({count:l+1}).where("id","=",o).execute(),c>0&&l+1>=c&&await t.deleteFrom("Production_Queue").where("id","=",o).execute()}catch{}},FL=({userId:t,cycle:e,...n})=>{const r=Yn([["Cycle"],["GameMap"],["Resource_Queue"],["Building_Queue"],["Building"],["User_Inventory"],["Inventory"],["Building_Base_Production"]]),i=Xt({mutationKey:["useCycleMutation"],async mutationFn({userId:s}){return Ot.transaction().execute(async o=>Zne({userId:s,tx:o}))},async onSuccess(){await r()}});return f.jsxs(Cn,{iconEnabled:Hh,iconDisabled:Hh,onClick:()=>{i.mutate({userId:t})},loading:i.isPending,...n,children:[f.jsx(ee,{css:{base:["font-bold"]},label:"New cycle (label)"}),f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx("div",{className:"font-light text-sm",children:wn({number:e})}),f.jsx(rn,{icon:"icon-[solar--arrow-right-linear]"}),f.jsx("div",{className:"font-bold",children:wn({number:e+1})})]})]})},Jne=({fromX:t,fromY:e,toX:n,toY:r,connectionLineStyle:i})=>{const[s]=ON({sourceX:t,sourceY:e,targetX:n,targetY:r});return f.jsx("g",{children:f.jsx("path",{style:i,fill:"none",d:s})})};function tj(t,e){const n={...t.internals.positionAbsolute,...t},r=Math.round(n.x),i=Math.round(n.y),s=Math.round(e.x),o=Math.round(e.y);return s<=r+1?Lt.Left:s>=r+n.measured.width-1?Lt.Right:o<=i+1?Lt.Top:o>=n.y+n.measured.height-1?Lt.Bottom:Lt.Top}function nj(t,e){const{width:n,height:r}=t.measured,i=t.internals.positionAbsolute,s=e.internals.positionAbsolute,o=n/2,l=r/2,c=i.x+o,d=i.y+l,p=s.x+e.measured.width/2,h=s.y+e.measured.height/2,b=(p-c)/(2*o)-(h-d)/(2*l),x=(p-c)/(2*o)+(h-d)/(2*l),w=1/(Math.abs(b)+Math.abs(x)||1),E=w*b,I=w*x,T=o*(E+I)+c,O=l*(-E+I)+d;return{x:T,y:O}}function Yne(t,e){const n=nj(t,e),r=nj(e,t);return{sx:n.x,sy:n.y,tx:r.x,ty:r.y,sourcePos:tj(t,n),targetPos:tj(e,r)}}const Xne=({id:t,source:e,target:n,markerEnd:r,style:i})=>{const s=ej(e),o=ej(n);if(!s||!o)return null;const{sx:l,sy:c,tx:d,ty:p}=Yne(s,o),[h]=LN({sourceX:l,sourceY:c,targetX:d,targetY:p});return f.jsx("path",{id:t,className:"react-flow__edge-path",d:h,markerEnd:r,style:i})},ere=({id:t,data:e})=>{const{locale:n}=un({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2 w-full items-center justify-between",children:[f.jsx("div",{className:"flex flex-row gap-2 items-center",children:f.jsx(Zt,{icon:Ua,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:n,id:t},css:{base:["font-bold"]},children:e.name})}),f.jsx("div",{className:"flex flex-row gap-1 items-center",onClick:r=>r.stopPropagation(),onDoubleClick:r=>r.stopPropagation(),onMouseDown:r=>r.stopPropagation()}),f.jsx(oa,{className:"hidden",position:Lt.Right,type:"source",isConnectable:!1}),f.jsx(oa,{className:"hidden",position:Lt.Left,type:"target",isConnectable:!1})]})},tre=({id:t,data:e})=>{const n=NL(),r=n.inProgress&&n.fromNode.id!==t;return f.jsxs("div",{className:"flex flex-row gap-2 w-full",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(rn,{icon:"icon-[gis--route-end]",css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:e.name})]}),f.jsxs("div",{className:"w-full h-full absolute top-0 left-0",children:[!n.inProgress&&f.jsx(oa,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Lt.Right,type:"source"}),(!n.inProgress||r)&&f.jsx(oa,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Lt.Left,type:"target",isConnectableStart:!1})]})]})},nre=({data:t})=>{const e=Yn([["GameMap"]]),n=Xt({async mutationFn({constructionId:r}){return Ot.transaction().execute(i=>i.updateTable("Construction").set({plan:!1}).where("id","=",r).execute())},async onSuccess(){await e()}});return f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(rn,{icon:"icon-[carbon--floorplan]",css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:t.name})]}),f.jsx(Cn,{iconEnabled:AE,iconDisabled:AE,loading:n.isPending,disabled:!t.valid,onClick:()=>{n.mutate({constructionId:t.id})}})]})},eb="icon-[emojione-monotone--construction]",rre=({data:t})=>f.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(rn,{icon:eb,css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:t.name})]}),f.jsx(pf,{value:100*t.cycle/(t.to-t.from)})]}),On="icon-[solar--home-outline]",Fy=256,A0=Fy/4,P0=["bg-white","border-[4px]","border-slate-300","shadow-slate-200"],ire={stroke:"#b1b1b7"},sre={construction:nre,queue:rre,building:ere,"building-route":tre},ore={route:Xne},are=({userId:t,cycle:e,construction:n,queue:r,building:i,route:s,zoomToId:o,routing:l})=>{const c=Yn([["GameMap"]]),{locale:d}=un({from:"/$locale"}),p=K.useMemo(()=>[...n.map(R=>({id:R.id,data:R,position:{x:R.x,y:R.y},type:"construction",width:Fy,height:A0,className:rr(P0,["z-10",R.valid?["border-green-500"]:["border-red-500"]])})),...r.map(R=>({id:R.id,data:R,position:{x:R.x,y:R.y},type:"queue",width:Fy,height:A0,className:rr(P0,["nodrag"])})),...i.map(R=>({id:R.id,data:R,position:{x:R.x,y:R.y},type:l?"building-route":"building",width:Fy,height:A0,className:rr(P0,["nodrag"])}))],[n,r,i,l]),h=K.useMemo(()=>[...s.map(R=>({id:R.id,source:R.fromId,target:R.toId,type:"route",animated:!1,markerEnd:{type:zh.ArrowClosed,color:"#b1b1b7"}}))],[s]),[b,x]=Nne(p),[w,E]=kne(h),{updateNode:I,getIntersectingNodes:T,fitView:O}=mf();K.useEffect(()=>{x(p)},[p]),K.useEffect(()=>{E(h)},[h]),K.useEffect(()=>{o&&setTimeout(()=>{O({nodes:[{id:o}],duration:750,minZoom:2,maxZoom:2})},250)},[O,o]);const q=Xt({mutationKey:["Construction","position"],async mutationFn({constructionId:R,x:M,y:F,valid:W}){return Ot.transaction().execute(async V=>(await V.selectFrom("Construction as c").select(["c.id"]).where("c.plan","=",!0).where("c.id","=",R).executeTakeFirstOrThrow(()=>new Error("Construction not found or not planned.")),V.updateTable("Construction").set({x:M,y:F,valid:W}).where("id","=",R).execute()))},async onSuccess(){await c()}}),A=K.useCallback(R=>{x(M=>FN(R,M))},[x]),D=K.useCallback((R,M)=>{const F=T(M).length>0;I(M.id,{...M,data:{...M.data,valid:!F},className:rr([M.className,F?["border-red-500"]:["border-green-500"]])})},[T,I]),L=K.useCallback((R,M)=>{if(M.type==="construction"){const F=T(M).length>0;q.mutate({constructionId:M.id,x:M.position.x,y:M.position.y,valid:!F})}},[T,q]),z=Xt({async mutationFn({fromId:R,toId:M}){return Ot.transaction().execute(async F=>F.insertInto("Route").values({id:Rn(),fromId:R,toId:M,userId:t}).execute())},async onSuccess(){await c()}}),P=K.useCallback(R=>E(M=>(setTimeout(()=>{z.mutate({fromId:R.source,toId:R.target})},0),$2(R,M))),[E]);return f.jsx(f.Fragment,{children:f.jsxs("div",{className:"flex flex-row",children:[f.jsxs(TL,{nodes:b,edges:w,onNodesChange:A,onNodeDrag:D,onNodeDragStop:L,onConnect:P,className:"flex-grow h-screen",fitView:!0,snapToGrid:!0,snapGrid:[32,32],elementsSelectable:!1,nodeTypes:sre,edgeTypes:ore,connectionLineComponent:Jne,connectionLineStyle:ire,children:[f.jsx(FL,{userId:t,cycle:e,css:{base:["react-flow__panel","absolute","top-1","right-1"]}}),f.jsx(jL,{orientation:"horizontal",showInteractive:!1,showZoom:!0}),f.jsx(PL,{zoomable:!0,draggable:!0,pannable:!0}),f.jsx(qL,{variant:Xo.Dots,gap:32,size:1}),f.jsxs("div",{className:"react-flow__panel flex flex-row p-2 border bg-white border-slate-300 shadow-sm",children:[f.jsx(Zt,{icon:jo,to:"/$locale/apps/derivean/game",params:{locale:d}}),f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/map/construction",params:{locale:d}}),f.jsx(Zt,{icon:ki,to:"/$locale/apps/derivean/map/inventory",params:{locale:d}}),f.jsx(Zt,{icon:"icon-[gis--route-end]",to:"/$locale/apps/derivean/map",params:{locale:d},search:{routing:!l},css:{base:l?["text-green-600"]:void 0}})]})]}),f.jsx(oo,{})]})})},lre=({cycle:t,userId:e,construction:n,building:r,queue:i,route:s,zoomToId:o,routing:l})=>f.jsx(CL,{children:f.jsx(are,{userId:e,cycle:t,construction:n,queue:i,building:r,route:s,zoomToId:o,routing:l})}),a1=Wt("/$locale/apps/derivean/map")({validateSearch:Xn(U.object({zoomToId:U.string().optional(),routing:U.boolean().optional()})),async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return ym.parse(df.get("session"))}catch{throw Gh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{user:r,construction:await t.ensureQueryData({queryKey:["GameMap","construction",r.id],async queryFn(){return e.transaction().execute(i=>cs({select:i.selectFrom("Construction as c").innerJoin("Blueprint as bl","bl.id","c.blueprintId").select(["c.id","c.blueprintId","bl.name","c.x","c.y","c.valid"]).where("c.plan","=",!0).where("c.userId","=",r.id),output:U.object({id:U.string().min(1),blueprintId:U.string().min(1),name:U.string().min(1),x:U.number(),y:U.number(),valid:Ro()})}))}}),queue:await t.ensureQueryData({queryKey:["GameMap","queue",r.id],async queryFn(){return e.transaction().execute(i=>cs({select:i.selectFrom("Construction as c").innerJoin("Blueprint as bl","bl.id","c.blueprintId").select(["c.id","c.blueprintId","bl.name","c.x","c.y","c.valid","c.from","c.to","c.cycle"]).where("c.plan","=",!1).where("c.userId","=",r.id),output:U.object({id:U.string().min(1),blueprintId:U.string().min(1),name:U.string().min(1),x:U.number(),y:U.number(),from:U.number().int().nonnegative(),to:U.number().int().nonnegative(),cycle:U.number().int().nonnegative(),valid:Ro()})}))}}),building:await t.ensureQueryData({queryKey:["GameMap","building",r.id],async queryFn(){return e.transaction().execute(i=>cs({select:i.selectFrom("Building as bg").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bl.name","bg.x","bg.y"]).where("bg.userId","=",r.id),output:U.object({id:U.string().min(1),blueprintId:U.string().min(1),name:U.string().min(1),x:U.number(),y:U.number()})}))}}),route:await t.ensureQueryData({queryKey:["GameMap","route",r.id],async queryFn(){return e.transaction().execute(i=>cs({select:i.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Blueprint as blf","blf.id","bf.blueprintId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blf.name as fromName","blt.name as toName"]).where("r.userId","=",r.id),output:U.object({id:U.string().min(1),fromId:U.string().min(1),toId:U.string().min(1),fromName:U.string().min(1),toName:U.string().min(1)})}))}}),cycle:await t.ensureQueryData({queryKey:["GameMap","Cycle",r.id],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{user:t,construction:e,queue:n,building:r,route:i,cycle:s}=a1.useLoaderData(),{zoomToId:o,routing:l}=a1.useSearch();return f.jsx(lre,{userId:t.id,cycle:s,construction:e,queue:n,building:r,route:i,zoomToId:o,routing:l})}}),Ps="icon-[fluent-mdl2--production-floor-management]",ure=t=>{const{locale:e}=un({from:"/$locale"});return f.jsxs(eu,{...t,children:[f.jsx(Fn,{icon:"icon-[et--map]",to:"/$locale/apps/derivean/map",params:{locale:e},children:f.jsx(ee,{label:"Map (menu)"})}),f.jsx(Fn,{icon:Ps,to:"/$locale/apps/derivean/game/production/queue",params:{locale:e},children:f.jsx(ee,{label:"Production queue (menu)"})}),f.jsx(Fn,{icon:On,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:e},children:f.jsx(ee,{label:"Blueprint list (menu)"})}),f.jsx(Fn,{icon:ki,to:"/$locale/apps/derivean/game/inventory",params:{locale:e},children:f.jsx(ee,{label:"Inventory (menu)"})})]})},cre=Wt("/$locale/apps/derivean/game")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return ym.parse(df.get("session"))}catch{throw Gh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{session:r,inventory:await t.ensureQueryData({queryKey:["User_Inventory"],async queryFn(){return e.transaction().execute(async i=>i.selectFrom("Inventory as i").innerJoin("User_Inventory as ui","ui.inventoryId","i.id").select(["i.id","i.amount","i.limit","i.resourceId"]).where("ui.userId","=",r.id).execute())}}),cycle:await t.ensureQueryData({queryKey:["Cycle"],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{locale:t}=un({from:"/$locale"}),{session:e,cycle:n}=so({from:"/$locale/apps/derivean/game"}),r=_B({filters:{status:"pending",mutationKey:["useCycleMutation"]},select(i){return i.state.status}});return f.jsx($D,{logo:f.jsx(Zt,{to:"/$locale/apps/derivean/game",params:{locale:t},children:f.jsx(QD,{})}),menu:f.jsxs("div",{className:"flex flex-row items-center gap-4",children:[f.jsx(ure,{}),f.jsx(FL,{cycle:n,userId:e.id})]}),actions:f.jsxs(f.Fragment,{children:[e.name,f.jsx(Zt,{icon:"icon-[clarity--crown-line]",to:"/$locale/apps/derivean/root",params:{locale:t}}),f.jsx(Zt,{icon:gN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]}),css:{base:r.length?["select-none","pointer-events-none","opacity-50"]:void 0},children:f.jsx(oo,{})})}});var Dy={exports:{}},dre=Dy.exports,rj;function fre(){return rj||(rj=1,function(t,e){(function(n,r){r()})(dre,function(){function n(d,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function r(d,p,h){var b=new XMLHttpRequest;b.open("GET",d),b.responseType="blob",b.onload=function(){c(b.response,p,h)},b.onerror=function(){console.error("could not download file")},b.send()}function i(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function s(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Pu=="object"&&Pu.global===Pu?Pu:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(d,p,h){var b=o.URL||o.webkitURL,x=document.createElement("a");p=p||d.name||"download",x.download=p,x.rel="noopener",typeof d=="string"?(x.href=d,x.origin===location.origin?s(x):i(x.href)?r(d,p,h):s(x,x.target="_blank")):(x.href=b.createObjectURL(d),setTimeout(function(){b.revokeObjectURL(x.href)},4e4),setTimeout(function(){s(x)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,h){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,h),p);else if(i(d))r(d,p,h);else{var b=document.createElement("a");b.href=d,b.target="_blank",setTimeout(function(){s(b)})}}:function(d,p,h,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof d=="string")return r(d,p,h);var x=d.type==="application/octet-stream",w=/constructor/i.test(o.HTMLElement)||o.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||x&&w||l)&&typeof FileReader<"u"){var I=new FileReader;I.onloadend=function(){var q=I.result;q=E?q:q.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=q:location=q,b=null},I.readAsDataURL(d)}else{var T=o.URL||o.webkitURL,O=T.createObjectURL(d);b?b.location=O:location.href=O,b=null,setTimeout(function(){T.revokeObjectURL(O)},4e4)}});o.saveAs=c.saveAs=c,t.exports=c})}(Dy)),Dy.exports}var pre=fre();const hre=io(pre),F0=["Tag","Resource","Resource_Tag","Blueprint","Blueprint_Inventory","Blueprint_Dependency","Blueprint_Conflict","Blueprint_Requirement","Blueprint_Production","Blueprint_Production_Requirement","Blueprint_Production_Dependency","Blueprint_Production_Resource","Default_Inventory"],mre=Wt("/$locale/apps/derivean/root/")({component(){const t=Xt({mutationKey:["export"],async mutationFn(){return Nn.promise((async()=>{const e=[];await Ot.transaction().execute(async n=>{for await(const r of F0)e.push({source:r,entities:await n.selectFrom(r).selectAll().execute()})}),hre.saveAs(new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"}),"export.json")})(),mr("Export game files"))}});return f.jsxs("div",{className:"flex flex-col gap-4 w-2/3 mx-auto",children:[f.jsx(wG,{onDrop:async e=>{const[n]=e;if(!n)return;const r=JSON.parse(await n.text());await Pr`PRAGMA foreign_keys = OFF`.execute(Ot),await Nn.promise(Ot.transaction().execute(async i=>{for await(const{source:s}of r){const o=F0.find(l=>l===s);if(!o)throw new Error(`Unknown source [${s}]`);await i.deleteFrom(o).execute()}for await(const{source:s,entities:o}of r){const l=F0.find(c=>c===s);if(!l)throw new Error(`Unknown source [${s}]`);for await(const c of Object.values(o))await i.insertInto(l).values(c).execute()}}),mr("Import game files")),await Pr`PRAGMA foreign_keys = ON`.execute(Ot)}}),f.jsx("div",{className:"flex items-center justify-center mt-10 gap-4",children:f.jsx(Cn,{iconEnabled:xN,loading:t.isPending,onClick:()=>t.mutate(),variant:{variant:"subtle"},children:f.jsx(ee,{label:"Export game files (label)"})})}),f.jsx("h2",{children:"TODO"}),f.jsxs("ul",{className:"flex flex-col gap-2",children:[f.jsx("li",{children:'Add exclusive to (building "exclusiveToId" cannot be built when target exists); Ok, exclusive to will be m:n.'}),f.jsx("li",{children:'Upgrades: Put everything into the building, drive upgrades by passive "Research" points'}),f.jsx("li",{children:"Bundle default gameplay as exported json (put into public); add button to root to load default/selected gameplay; idea is a few buttons: Settler like, Fantasy, AoE and so on."}),f.jsx("li",{children:"Define game ending rules: amount of resources in (individual resourece per required cycle), required building in a cycle. When a player fail, game end with the ability to reset. Each game rule may have an ending message to show."}),f.jsx("li",{children:"Define winning rules: amount of resources / building built in specific cycle. When rules are not met, it's like a fail."}),f.jsx("li",{children:"Idea: Blueprint should have display list (like present resource in inventory), also production should have display list (like present resource in inventory)."}),f.jsx("li",{children:"Add something like world available resources + the ability to drain and add resources to the world. Something like Wolrd_Inventory where 0 means unlimited resources."}),f.jsx("li",{children:"World renewal resources: a list of resources with cycles and amount when they got renewed (world_renewal_queue)."}),f.jsx("li",{children:"Defines seasons: list of cyclic seasons with their length; resource production may be bound to specific season(s)."}),f.jsx("li",{children:"Add maintenance cost for a building: when a cycle ends, cost is deducted from the inventory. If there is not enough resources, building will be marked as offline (closed for production)."}),f.jsx("li",{children:"Dispaly resources per season (some resources will be available only in specific season)"}),f.jsx("li",{children:"Add resource probability drop: some resources may have not be produces (like a crop). This should be thinked out."}),f.jsx("li",{children:'Production line should have requirements, but also something like "display requirements" required to even show the production line. Same for buildings.'})]})]})}}),gre=Wt("/$locale/apps/derivean/map/")({}),yre=Wt("/$locale/apps/derivean/game/")({component(){const{tva:t}=ir({from:"__root__"}),e=t().slots;return f.jsx("div",{className:e.base(),children:f.jsx("div",{children:"management here"})})}});var D0,ij;function MN(){if(ij)return D0;ij=1;var t="\0",e="\0",n="\x01";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(p){p&&(this._isDirected=Object.hasOwn(p,"directed")?p.directed:!0,this._isMultigraph=Object.hasOwn(p,"multigraph")?p.multigraph:!1,this._isCompound=Object.hasOwn(p,"compound")?p.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(p){return this._label=p,this}graph(){return this._label}setDefaultNodeLabel(p){return this._defaultNodeLabelFn=p,typeof p!="function"&&(this._defaultNodeLabelFn=()=>p),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var p=this;return this.nodes().filter(h=>Object.keys(p._in[h]).length===0)}sinks(){var p=this;return this.nodes().filter(h=>Object.keys(p._out[h]).length===0)}setNodes(p,h){var b=arguments,x=this;return p.forEach(function(w){b.length>1?x.setNode(w,h):x.setNode(w)}),this}setNode(p,h){return Object.hasOwn(this._nodes,p)?(arguments.length>1&&(this._nodes[p]=h),this):(this._nodes[p]=arguments.length>1?h:this._defaultNodeLabelFn(p),this._isCompound&&(this._parent[p]=e,this._children[p]={},this._children[e][p]=!0),this._in[p]={},this._preds[p]={},this._out[p]={},this._sucs[p]={},++this._nodeCount,this)}node(p){return this._nodes[p]}hasNode(p){return Object.hasOwn(this._nodes,p)}removeNode(p){var h=this;if(Object.hasOwn(this._nodes,p)){var b=x=>h.removeEdge(h._edgeObjs[x]);delete this._nodes[p],this._isCompound&&(this._removeFromParentsChildList(p),delete this._parent[p],this.children(p).forEach(function(x){h.setParent(x)}),delete this._children[p]),Object.keys(this._in[p]).forEach(b),delete this._in[p],delete this._preds[p],Object.keys(this._out[p]).forEach(b),delete this._out[p],delete this._sucs[p],--this._nodeCount}return this}setParent(p,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(h===void 0)h=e;else{h+="";for(var b=h;b!==void 0;b=this.parent(b))if(b===p)throw new Error("Setting "+h+" as parent of "+p+" would create a cycle");this.setNode(h)}return this.setNode(p),this._removeFromParentsChildList(p),this._parent[p]=h,this._children[h][p]=!0,this}_removeFromParentsChildList(p){delete this._children[this._parent[p]][p]}parent(p){if(this._isCompound){var h=this._parent[p];if(h!==e)return h}}children(p=e){if(this._isCompound){var h=this._children[p];if(h)return Object.keys(h)}else{if(p===e)return this.nodes();if(this.hasNode(p))return[]}}predecessors(p){var h=this._preds[p];if(h)return Object.keys(h)}successors(p){var h=this._sucs[p];if(h)return Object.keys(h)}neighbors(p){var h=this.predecessors(p);if(h){const x=new Set(h);for(var b of this.successors(p))x.add(b);return Array.from(x.values())}}isLeaf(p){var h;return this.isDirected()?h=this.successors(p):h=this.neighbors(p),h.length===0}filterNodes(p){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var b=this;Object.entries(this._nodes).forEach(function([E,I]){p(E)&&h.setNode(E,I)}),Object.values(this._edgeObjs).forEach(function(E){h.hasNode(E.v)&&h.hasNode(E.w)&&h.setEdge(E,b.edge(E))});var x={};function w(E){var I=b.parent(E);return I===void 0||h.hasNode(I)?(x[E]=I,I):I in x?x[I]:w(I)}return this._isCompound&&h.nodes().forEach(E=>h.setParent(E,w(E))),h}setDefaultEdgeLabel(p){return this._defaultEdgeLabelFn=p,typeof p!="function"&&(this._defaultEdgeLabelFn=()=>p),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(p,h){var b=this,x=arguments;return p.reduce(function(w,E){return x.length>1?b.setEdge(w,E,h):b.setEdge(w,E),E}),this}setEdge(){var p,h,b,x,w=!1,E=arguments[0];typeof E=="object"&&E!==null&&"v"in E?(p=E.v,h=E.w,b=E.name,arguments.length===2&&(x=arguments[1],w=!0)):(p=E,h=arguments[1],b=arguments[3],arguments.length>2&&(x=arguments[2],w=!0)),p=""+p,h=""+h,b!==void 0&&(b=""+b);var I=o(this._isDirected,p,h,b);if(Object.hasOwn(this._edgeLabels,I))return w&&(this._edgeLabels[I]=x),this;if(b!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(p),this.setNode(h),this._edgeLabels[I]=w?x:this._defaultEdgeLabelFn(p,h,b);var T=l(this._isDirected,p,h,b);return p=T.v,h=T.w,Object.freeze(T),this._edgeObjs[I]=T,i(this._preds[h],p),i(this._sucs[p],h),this._in[h][I]=T,this._out[p][I]=T,this._edgeCount++,this}edge(p,h,b){var x=arguments.length===1?c(this._isDirected,arguments[0]):o(this._isDirected,p,h,b);return this._edgeLabels[x]}edgeAsObj(){const p=this.edge(...arguments);return typeof p!="object"?{label:p}:p}hasEdge(p,h,b){var x=arguments.length===1?c(this._isDirected,arguments[0]):o(this._isDirected,p,h,b);return Object.hasOwn(this._edgeLabels,x)}removeEdge(p,h,b){var x=arguments.length===1?c(this._isDirected,arguments[0]):o(this._isDirected,p,h,b),w=this._edgeObjs[x];return w&&(p=w.v,h=w.w,delete this._edgeLabels[x],delete this._edgeObjs[x],s(this._preds[h],p),s(this._sucs[p],h),delete this._in[h][x],delete this._out[p][x],this._edgeCount--),this}inEdges(p,h){var b=this._in[p];if(b){var x=Object.values(b);return h?x.filter(w=>w.v===h):x}}outEdges(p,h){var b=this._out[p];if(b){var x=Object.values(b);return h?x.filter(w=>w.w===h):x}}nodeEdges(p,h){var b=this.inEdges(p,h);if(b)return b.concat(this.outEdges(p,h))}}function i(d,p){d[p]?d[p]++:d[p]=1}function s(d,p){--d[p]||delete d[p]}function o(d,p,h,b){var x=""+p,w=""+h;if(!d&&x>w){var E=x;x=w,w=E}return x+n+w+n+(b===void 0?t:b)}function l(d,p,h,b){var x=""+p,w=""+h;if(!d&&x>w){var E=x;x=w,w=E}var I={v:x,w};return b&&(I.name=b),I}function c(d,p){return o(d,p.v,p.w,p.name)}return D0=r,D0}var L0,sj;function vre(){return sj||(sj=1,L0="2.2.4"),L0}var M0,oj;function bre(){return oj||(oj=1,M0={Graph:MN(),version:vre()}),M0}var $0,aj;function xre(){if(aj)return $0;aj=1;var t=MN();$0={write:e,read:i};function e(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:r(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function n(s){return s.nodes().map(function(o){var l=s.node(o),c=s.parent(o),d={v:o};return l!==void 0&&(d.value=l),c!==void 0&&(d.parent=c),d})}function r(s){return s.edges().map(function(o){var l=s.edge(o),c={v:o.v,w:o.w};return o.name!==void 0&&(c.name=o.name),l!==void 0&&(c.value=l),c})}function i(s){var o=new t(s.options).setGraph(s.value);return s.nodes.forEach(function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),s.edges.forEach(function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return $0}var B0,lj;function _re(){if(lj)return B0;lj=1,B0=t;function t(e){var n={},r=[],i;function s(o){Object.hasOwn(n,o)||(n[o]=!0,i.push(o),e.successors(o).forEach(s),e.predecessors(o).forEach(s))}return e.nodes().forEach(function(o){i=[],s(o),i.length&&r.push(i)}),r}return B0}var z0,uj;function DL(){if(uj)return z0;uj=1;class t{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))}_decrease(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s}_swap(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r}}return z0=t,z0}var W0,cj;function LL(){if(cj)return W0;cj=1;var t=DL();W0=n;var e=()=>1;function n(i,s,o,l){return r(i,String(s),o||e,l||function(c){return i.outEdges(c)})}function r(i,s,o,l){var c={},d=new t,p,h,b=function(x){var w=x.v!==p?x.v:x.w,E=c[w],I=o(x),T=h.distance+I;if(I<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+I);T<E.distance&&(E.distance=T,E.predecessor=p,d.decrease(w,T))};for(i.nodes().forEach(function(x){var w=x===s?0:Number.POSITIVE_INFINITY;c[x]={distance:w},d.add(x,w)});d.size()>0&&(p=d.removeMin(),h=c[p],h.distance!==Number.POSITIVE_INFINITY);)l(p).forEach(b);return c}return W0}var U0,dj;function wre(){if(dj)return U0;dj=1;var t=LL();U0=e;function e(n,r,i){return n.nodes().reduce(function(s,o){return s[o]=t(n,o,r,i),s},{})}return U0}var V0,fj;function ML(){if(fj)return V0;fj=1,V0=t;function t(e){var n=0,r=[],i={},s=[];function o(l){var c=i[l]={onStack:!0,lowlink:n,index:n++};if(r.push(l),e.successors(l).forEach(function(h){Object.hasOwn(i,h)?i[h].onStack&&(c.lowlink=Math.min(c.lowlink,i[h].index)):(o(h),c.lowlink=Math.min(c.lowlink,i[h].lowlink))}),c.lowlink===c.index){var d=[],p;do p=r.pop(),i[p].onStack=!1,d.push(p);while(l!==p);s.push(d)}}return e.nodes().forEach(function(l){Object.hasOwn(i,l)||o(l)}),s}return V0}var H0,pj;function Sre(){if(pj)return H0;pj=1;var t=ML();H0=e;function e(n){return t(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return H0}var Q0,hj;function Ere(){if(hj)return Q0;hj=1,Q0=e;var t=()=>1;function e(r,i,s){return n(r,i||t,s||function(o){return r.outEdges(o)})}function n(r,i,s){var o={},l=r.nodes();return l.forEach(function(c){o[c]={},o[c][c]={distance:0},l.forEach(function(d){c!==d&&(o[c][d]={distance:Number.POSITIVE_INFINITY})}),s(c).forEach(function(d){var p=d.v===c?d.w:d.v,h=i(d);o[c][p]={distance:h,predecessor:c}})}),l.forEach(function(c){var d=o[c];l.forEach(function(p){var h=o[p];l.forEach(function(b){var x=h[c],w=d[b],E=h[b],I=x.distance+w.distance;I<E.distance&&(E.distance=I,E.predecessor=w.predecessor)})})}),o}return Q0}var K0,mj;function $L(){if(mj)return K0;mj=1;function t(n){var r={},i={},s=[];function o(l){if(Object.hasOwn(i,l))throw new e;Object.hasOwn(r,l)||(i[l]=!0,r[l]=!0,n.predecessors(l).forEach(o),delete i[l],s.push(l))}if(n.sinks().forEach(o),Object.keys(r).length!==n.nodeCount())throw new e;return s}class e extends Error{constructor(){super(...arguments)}}return K0=t,t.CycleException=e,K0}var G0,gj;function Nre(){if(gj)return G0;gj=1;var t=$L();G0=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return G0}var Z0,yj;function BL(){if(yj)return Z0;yj=1,Z0=t;function t(i,s,o){Array.isArray(s)||(s=[s]);var l=i.isDirected()?h=>i.successors(h):h=>i.neighbors(h),c=o==="post"?e:n,d=[],p={};return s.forEach(h=>{if(!i.hasNode(h))throw new Error("Graph does not have node: "+h);c(h,l,p,d)}),d}function e(i,s,o,l){for(var c=[[i,!1]];c.length>0;){var d=c.pop();d[1]?l.push(d[0]):Object.hasOwn(o,d[0])||(o[d[0]]=!0,c.push([d[0],!0]),r(s(d[0]),p=>c.push([p,!1])))}}function n(i,s,o,l){for(var c=[i];c.length>0;){var d=c.pop();Object.hasOwn(o,d)||(o[d]=!0,l.push(d),r(s(d),p=>c.push(p)))}}function r(i,s){for(var o=i.length;o--;)s(i[o],o,i);return i}return Z0}var J0,vj;function kre(){if(vj)return J0;vj=1;var t=BL();J0=e;function e(n,r){return t(n,r,"post")}return J0}var Y0,bj;function Ire(){if(bj)return Y0;bj=1;var t=BL();Y0=e;function e(n,r){return t(n,r,"pre")}return Y0}var X0,xj;function Cre(){if(xj)return X0;xj=1;var t=MN(),e=DL();X0=n;function n(r,i){var s=new t,o={},l=new e,c;function d(h){var b=h.v===c?h.w:h.v,x=l.priority(b);if(x!==void 0){var w=i(h);w<x&&(o[b]=c,l.decrease(b,w))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(h){l.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),l.decrease(r.nodes()[0],0);for(var p=!1;l.size()>0;){if(c=l.removeMin(),Object.hasOwn(o,c))s.setEdge(c,o[c]);else{if(p)throw new Error("Input graph is not connected: "+r);p=!0}r.nodeEdges(c).forEach(d)}return s}return X0}var eS,_j;function Tre(){return _j||(_j=1,eS={components:_re(),dijkstra:LL(),dijkstraAll:wre(),findCycles:Sre(),floydWarshall:Ere(),isAcyclic:Nre(),postorder:kre(),preorder:Ire(),prim:Cre(),tarjan:ML(),topsort:$L()}),eS}var tS,wj;function Ao(){if(wj)return tS;wj=1;var t=bre();return tS={Graph:t.Graph,json:xre(),alg:Tre(),version:t.version},tS}var nS,Sj;function Ore(){if(Sj)return nS;Sj=1;class t{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return e(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&e(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,o=s._prev;for(;o!==s;)i.push(JSON.stringify(o,n)),o=o._prev;return"["+i.join(", ")+"]"}}function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return nS=t,nS}var rS,Ej;function qre(){if(Ej)return rS;Ej=1;let t=Ao().Graph,e=Ore();rS=r;let n=()=>1;function r(d,p){if(d.nodeCount()<=1)return[];let h=o(d,p||n);return i(h.graph,h.buckets,h.zeroIdx).flatMap(x=>d.outEdges(x.v,x.w))}function i(d,p,h){let b=[],x=p[p.length-1],w=p[0],E;for(;d.nodeCount();){for(;E=w.dequeue();)s(d,p,h,E);for(;E=x.dequeue();)s(d,p,h,E);if(d.nodeCount()){for(let I=p.length-2;I>0;--I)if(E=p[I].dequeue(),E){b=b.concat(s(d,p,h,E,!0));break}}}return b}function s(d,p,h,b,x){let w=x?[]:void 0;return d.inEdges(b.v).forEach(E=>{let I=d.edge(E),T=d.node(E.v);x&&w.push({v:E.v,w:E.w}),T.out-=I,l(p,h,T)}),d.outEdges(b.v).forEach(E=>{let I=d.edge(E),T=E.w,O=d.node(T);O.in-=I,l(p,h,O)}),d.removeNode(b.v),w}function o(d,p){let h=new t,b=0,x=0;d.nodes().forEach(I=>{h.setNode(I,{v:I,in:0,out:0})}),d.edges().forEach(I=>{let T=h.edge(I.v,I.w)||0,O=p(I),q=T+O;h.setEdge(I.v,I.w,q),x=Math.max(x,h.node(I.v).out+=O),b=Math.max(b,h.node(I.w).in+=O)});let w=c(x+b+3).map(()=>new e),E=b+1;return h.nodes().forEach(I=>{l(w,E,h.node(I))}),{graph:h,buckets:w,zeroIdx:E}}function l(d,p,h){h.out?h.in?d[h.out-h.in+p].enqueue(h):d[d.length-1].enqueue(h):d[0].enqueue(h)}function c(d){const p=[];for(let h=0;h<d;h++)p.push(h);return p}return rS}var iS,Nj;function Yr(){if(Nj)return iS;Nj=1;let t=Ao().Graph;iS={addBorderNode:p,addDummyNode:e,applyWithChunking:x,asNonCompoundGraph:r,buildLayerMatrix:l,intersectRect:o,mapValues:L,maxRank:w,normalizeRanks:c,notime:T,partition:E,pick:D,predecessorWeights:s,range:A,removeEmptyRanks:d,simplify:n,successorWeights:i,time:I,uniqueId:q,zipObject:z};function e(P,R,M,F){let W;do W=q(F);while(P.hasNode(W));return M.dummy=R,P.setNode(W,M),W}function n(P){let R=new t().setGraph(P.graph());return P.nodes().forEach(M=>R.setNode(M,P.node(M))),P.edges().forEach(M=>{let F=R.edge(M.v,M.w)||{weight:0,minlen:1},W=P.edge(M);R.setEdge(M.v,M.w,{weight:F.weight+W.weight,minlen:Math.max(F.minlen,W.minlen)})}),R}function r(P){let R=new t({multigraph:P.isMultigraph()}).setGraph(P.graph());return P.nodes().forEach(M=>{P.children(M).length||R.setNode(M,P.node(M))}),P.edges().forEach(M=>{R.setEdge(M,P.edge(M))}),R}function i(P){let R=P.nodes().map(M=>{let F={};return P.outEdges(M).forEach(W=>{F[W.w]=(F[W.w]||0)+P.edge(W).weight}),F});return z(P.nodes(),R)}function s(P){let R=P.nodes().map(M=>{let F={};return P.inEdges(M).forEach(W=>{F[W.v]=(F[W.v]||0)+P.edge(W).weight}),F});return z(P.nodes(),R)}function o(P,R){let M=P.x,F=P.y,W=R.x-M,V=R.y-F,B=P.width/2,te=P.height/2;if(!W&&!V)throw new Error("Not possible to find intersection inside of the rectangle");let J,le;return Math.abs(V)*B>Math.abs(W)*te?(V<0&&(te=-te),J=te*W/V,le=te):(W<0&&(B=-B),J=B,le=B*V/W),{x:M+J,y:F+le}}function l(P){let R=A(w(P)+1).map(()=>[]);return P.nodes().forEach(M=>{let F=P.node(M),W=F.rank;W!==void 0&&(R[W][F.order]=M)}),R}function c(P){let R=P.nodes().map(F=>{let W=P.node(F).rank;return W===void 0?Number.MAX_VALUE:W}),M=x(Math.min,R);P.nodes().forEach(F=>{let W=P.node(F);Object.hasOwn(W,"rank")&&(W.rank-=M)})}function d(P){let R=P.nodes().map(B=>P.node(B).rank),M=x(Math.min,R),F=[];P.nodes().forEach(B=>{let te=P.node(B).rank-M;F[te]||(F[te]=[]),F[te].push(B)});let W=0,V=P.graph().nodeRankFactor;Array.from(F).forEach((B,te)=>{B===void 0&&te%V!==0?--W:B!==void 0&&W&&B.forEach(J=>P.node(J).rank+=W)})}function p(P,R,M,F){let W={width:0,height:0};return arguments.length>=4&&(W.rank=M,W.order=F),e(P,"border",W,R)}function h(P,R=b){const M=[];for(let F=0;F<P.length;F+=R){const W=P.slice(F,F+R);M.push(W)}return M}const b=65535;function x(P,R){if(R.length>b){const M=h(R);return P.apply(null,M.map(F=>P.apply(null,F)))}else return P.apply(null,R)}function w(P){const M=P.nodes().map(F=>{let W=P.node(F).rank;return W===void 0?Number.MIN_VALUE:W});return x(Math.max,M)}function E(P,R){let M={lhs:[],rhs:[]};return P.forEach(F=>{R(F)?M.lhs.push(F):M.rhs.push(F)}),M}function I(P,R){let M=Date.now();try{return R()}finally{console.log(P+" time: "+(Date.now()-M)+"ms")}}function T(P,R){return R()}let O=0;function q(P){var R=++O;return toString(P)+R}function A(P,R,M=1){R==null&&(R=P,P=0);let F=V=>V<R;M<0&&(F=V=>R<V);const W=[];for(let V=P;F(V);V+=M)W.push(V);return W}function D(P,R){const M={};for(const F of R)P[F]!==void 0&&(M[F]=P[F]);return M}function L(P,R){let M=R;return typeof R=="string"&&(M=F=>F[R]),Object.entries(P).reduce((F,[W,V])=>(F[W]=M(V,W),F),{})}function z(P,R){return P.reduce((M,F,W)=>(M[F]=R[W],M),{})}return iS}var sS,kj;function Rre(){if(kj)return sS;kj=1;let t=qre(),e=Yr().uniqueId;sS={run:n,undo:i};function n(s){(s.graph().acyclicer==="greedy"?t(s,l(s)):r(s)).forEach(c=>{let d=s.edge(c);s.removeEdge(c),d.forwardName=c.name,d.reversed=!0,s.setEdge(c.w,c.v,d,e("rev"))});function l(c){return d=>c.edge(d).weight}}function r(s){let o=[],l={},c={};function d(p){Object.hasOwn(c,p)||(c[p]=!0,l[p]=!0,s.outEdges(p).forEach(h=>{Object.hasOwn(l,h.w)?o.push(h):d(h.w)}),delete l[p])}return s.nodes().forEach(d),o}function i(s){s.edges().forEach(o=>{let l=s.edge(o);if(l.reversed){s.removeEdge(o);let c=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,c)}})}return sS}var oS,Ij;function jre(){if(Ij)return oS;Ij=1;let t=Yr();oS={run:e,undo:r};function e(i){i.graph().dummyChains=[],i.edges().forEach(s=>n(i,s))}function n(i,s){let o=s.v,l=i.node(o).rank,c=s.w,d=i.node(c).rank,p=s.name,h=i.edge(s),b=h.labelRank;if(d===l+1)return;i.removeEdge(s);let x,w,E;for(E=0,++l;l<d;++E,++l)h.points=[],w={width:0,height:0,edgeLabel:h,edgeObj:s,rank:l},x=t.addDummyNode(i,"edge",w,"_d"),l===b&&(w.width=h.width,w.height=h.height,w.dummy="edge-label",w.labelpos=h.labelpos),i.setEdge(o,x,{weight:h.weight},p),E===0&&i.graph().dummyChains.push(x),o=x;i.setEdge(o,c,{weight:h.weight},p)}function r(i){i.graph().dummyChains.forEach(s=>{let o=i.node(s),l=o.edgeLabel,c;for(i.setEdge(o.edgeObj,l);o.dummy;)c=i.successors(s)[0],i.removeNode(s),l.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(l.x=o.x,l.y=o.y,l.width=o.width,l.height=o.height),s=c,o=i.node(s)})}return oS}var aS,Cj;function tb(){if(Cj)return aS;Cj=1;const{applyWithChunking:t}=Yr();aS={longestPath:e,slack:n};function e(r){var i={};function s(o){var l=r.node(o);if(Object.hasOwn(i,o))return l.rank;i[o]=!0;let c=r.outEdges(o).map(p=>p==null?Number.POSITIVE_INFINITY:s(p.w)-r.edge(p).minlen);var d=t(Math.min,c);return d===Number.POSITIVE_INFINITY&&(d=0),l.rank=d}r.sources().forEach(s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return aS}var lS,Tj;function zL(){if(Tj)return lS;Tj=1;var t=Ao().Graph,e=tb().slack;lS=n;function n(o){var l=new t({directed:!1}),c=o.nodes()[0],d=o.nodeCount();l.setNode(c,{});for(var p,h;r(l,o)<d;)p=i(l,o),h=l.hasNode(p.v)?e(o,p):-e(o,p),s(l,o,h);return l}function r(o,l){function c(d){l.nodeEdges(d).forEach(p=>{var h=p.v,b=d===h?p.w:h;!o.hasNode(b)&&!e(l,p)&&(o.setNode(b,{}),o.setEdge(d,b,{}),c(b))})}return o.nodes().forEach(c),o.nodeCount()}function i(o,l){return l.edges().reduce((d,p)=>{let h=Number.POSITIVE_INFINITY;return o.hasNode(p.v)!==o.hasNode(p.w)&&(h=e(l,p)),h<d[0]?[h,p]:d},[Number.POSITIVE_INFINITY,null])[1]}function s(o,l,c){o.nodes().forEach(d=>l.node(d).rank+=c)}return lS}var uS,Oj;function Are(){if(Oj)return uS;Oj=1;var t=zL(),e=tb().slack,n=tb().longestPath,r=Ao().alg.preorder,i=Ao().alg.postorder,s=Yr().simplify;uS=o,o.initLowLimValues=p,o.initCutValues=l,o.calcCutValue=d,o.leaveEdge=b,o.enterEdge=x,o.exchangeEdges=w;function o(O){O=s(O),n(O);var q=t(O);p(q),l(q,O);for(var A,D;A=b(q);)D=x(q,O,A),w(q,O,A,D)}function l(O,q){var A=i(O,O.nodes());A=A.slice(0,A.length-1),A.forEach(D=>c(O,q,D))}function c(O,q,A){var D=O.node(A),L=D.parent;O.edge(A,L).cutvalue=d(O,q,A)}function d(O,q,A){var D=O.node(A),L=D.parent,z=!0,P=q.edge(A,L),R=0;return P||(z=!1,P=q.edge(L,A)),R=P.weight,q.nodeEdges(A).forEach(M=>{var F=M.v===A,W=F?M.w:M.v;if(W!==L){var V=F===z,B=q.edge(M).weight;if(R+=V?B:-B,I(O,A,W)){var te=O.edge(A,W).cutvalue;R+=V?-te:te}}}),R}function p(O,q){arguments.length<2&&(q=O.nodes()[0]),h(O,{},1,q)}function h(O,q,A,D,L){var z=A,P=O.node(D);return q[D]=!0,O.neighbors(D).forEach(R=>{Object.hasOwn(q,R)||(A=h(O,q,A,R,D))}),P.low=z,P.lim=A++,L?P.parent=L:delete P.parent,A}function b(O){return O.edges().find(q=>O.edge(q).cutvalue<0)}function x(O,q,A){var D=A.v,L=A.w;q.hasEdge(D,L)||(D=A.w,L=A.v);var z=O.node(D),P=O.node(L),R=z,M=!1;z.lim>P.lim&&(R=P,M=!0);var F=q.edges().filter(W=>M===T(O,O.node(W.v),R)&&M!==T(O,O.node(W.w),R));return F.reduce((W,V)=>e(q,V)<e(q,W)?V:W)}function w(O,q,A,D){var L=A.v,z=A.w;O.removeEdge(L,z),O.setEdge(D.v,D.w,{}),p(O),l(O,q),E(O,q)}function E(O,q){var A=O.nodes().find(L=>!q.node(L).parent),D=r(O,A);D=D.slice(1),D.forEach(L=>{var z=O.node(L).parent,P=q.edge(L,z),R=!1;P||(P=q.edge(z,L),R=!0),q.node(L).rank=q.node(z).rank+(R?P.minlen:-P.minlen)})}function I(O,q,A){return O.hasEdge(q,A)}function T(O,q,A){return A.low<=q.lim&&q.lim<=A.lim}return uS}var cS,qj;function Pre(){if(qj)return cS;qj=1;var t=tb(),e=t.longestPath,n=zL(),r=Are();cS=i;function i(c){switch(c.graph().ranker){case"network-simplex":l(c);break;case"tight-tree":o(c);break;case"longest-path":s(c);break;default:l(c)}}var s=e;function o(c){e(c),n(c)}function l(c){r(c)}return cS}var dS,Rj;function Fre(){if(Rj)return dS;Rj=1,dS=t;function t(r){let i=n(r);r.graph().dummyChains.forEach(s=>{let o=r.node(s),l=o.edgeObj,c=e(r,i,l.v,l.w),d=c.path,p=c.lca,h=0,b=d[h],x=!0;for(;s!==l.w;){if(o=r.node(s),x){for(;(b=d[h])!==p&&r.node(b).maxRank<o.rank;)h++;b===p&&(x=!1)}if(!x){for(;h<d.length-1&&r.node(b=d[h+1]).minRank<=o.rank;)h++;b=d[h]}r.setParent(s,b),s=r.successors(s)[0]}})}function e(r,i,s,o){let l=[],c=[],d=Math.min(i[s].low,i[o].low),p=Math.max(i[s].lim,i[o].lim),h,b;h=s;do h=r.parent(h),l.push(h);while(h&&(i[h].low>d||p>i[h].lim));for(b=h,h=o;(h=r.parent(h))!==b;)c.push(h);return{path:l.concat(c.reverse()),lca:b}}function n(r){let i={},s=0;function o(l){let c=s;r.children(l).forEach(o),i[l]={low:c,lim:s++}}return r.children().forEach(o),i}return dS}var fS,jj;function Dre(){if(jj)return fS;jj=1;let t=Yr();fS={run:e,cleanup:s};function e(o){let l=t.addDummyNode(o,"root",{},"_root"),c=r(o),d=Object.values(c),p=t.applyWithChunking(Math.max,d)-1,h=2*p+1;o.graph().nestingRoot=l,o.edges().forEach(x=>o.edge(x).minlen*=h);let b=i(o)+1;o.children().forEach(x=>n(o,l,h,b,p,c,x)),o.graph().nodeRankFactor=h}function n(o,l,c,d,p,h,b){let x=o.children(b);if(!x.length){b!==l&&o.setEdge(l,b,{weight:0,minlen:c});return}let w=t.addBorderNode(o,"_bt"),E=t.addBorderNode(o,"_bb"),I=o.node(b);o.setParent(w,b),I.borderTop=w,o.setParent(E,b),I.borderBottom=E,x.forEach(T=>{n(o,l,c,d,p,h,T);let O=o.node(T),q=O.borderTop?O.borderTop:T,A=O.borderBottom?O.borderBottom:T,D=O.borderTop?d:2*d,L=q!==A?1:p-h[b]+1;o.setEdge(w,q,{weight:D,minlen:L,nestingEdge:!0}),o.setEdge(A,E,{weight:D,minlen:L,nestingEdge:!0})}),o.parent(b)||o.setEdge(l,w,{weight:0,minlen:p+h[b]})}function r(o){var l={};function c(d,p){var h=o.children(d);h&&h.length&&h.forEach(b=>c(b,p+1)),l[d]=p}return o.children().forEach(d=>c(d,1)),l}function i(o){return o.edges().reduce((l,c)=>l+o.edge(c).weight,0)}function s(o){var l=o.graph();o.removeNode(l.nestingRoot),delete l.nestingRoot,o.edges().forEach(c=>{var d=o.edge(c);d.nestingEdge&&o.removeEdge(c)})}return fS}var pS,Aj;function Lre(){if(Aj)return pS;Aj=1;let t=Yr();pS=e;function e(r){function i(s){let o=r.children(s),l=r.node(s);if(o.length&&o.forEach(i),Object.hasOwn(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(let c=l.minRank,d=l.maxRank+1;c<d;++c)n(r,"borderLeft","_bl",s,l,c),n(r,"borderRight","_br",s,l,c)}}r.children().forEach(i)}function n(r,i,s,o,l,c){let d={width:0,height:0,rank:c,borderType:i},p=l[i][c-1],h=t.addDummyNode(r,"border",d,s);l[i][c]=h,r.setParent(h,o),p&&r.setEdge(p,h,{weight:1})}return pS}var hS,Pj;function Mre(){if(Pj)return hS;Pj=1,hS={adjust:t,undo:e};function t(c){let d=c.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&n(c)}function e(c){let d=c.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&i(c),(d==="lr"||d==="rl")&&(o(c),n(c))}function n(c){c.nodes().forEach(d=>r(c.node(d))),c.edges().forEach(d=>r(c.edge(d)))}function r(c){let d=c.width;c.width=c.height,c.height=d}function i(c){c.nodes().forEach(d=>s(c.node(d))),c.edges().forEach(d=>{let p=c.edge(d);p.points.forEach(s),Object.hasOwn(p,"y")&&s(p)})}function s(c){c.y=-c.y}function o(c){c.nodes().forEach(d=>l(c.node(d))),c.edges().forEach(d=>{let p=c.edge(d);p.points.forEach(l),Object.hasOwn(p,"x")&&l(p)})}function l(c){let d=c.x;c.x=c.y,c.y=d}return hS}var mS,Fj;function $re(){if(Fj)return mS;Fj=1;let t=Yr();mS=e;function e(n){let r={},i=n.nodes().filter(p=>!n.children(p).length),s=i.map(p=>n.node(p).rank),o=t.applyWithChunking(Math.max,s),l=t.range(o+1).map(()=>[]);function c(p){if(r[p])return;r[p]=!0;let h=n.node(p);l[h.rank].push(p),n.successors(p).forEach(c)}return i.sort((p,h)=>n.node(p).rank-n.node(h).rank).forEach(c),l}return mS}var gS,Dj;function Bre(){if(Dj)return gS;Dj=1;let t=Yr().zipObject;gS=e;function e(r,i){let s=0;for(let o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){let o=t(s,s.map((b,x)=>x)),l=i.flatMap(b=>r.outEdges(b).map(x=>({pos:o[x.w],weight:r.edge(x).weight})).sort((x,w)=>x.pos-w.pos)),c=1;for(;c<s.length;)c<<=1;let d=2*c-1;c-=1;let p=new Array(d).fill(0),h=0;return l.forEach(b=>{let x=b.pos+c;p[x]+=b.weight;let w=0;for(;x>0;)x%2&&(w+=p[x+1]),x=x-1>>1,p[x]+=b.weight;h+=b.weight*w}),h}return gS}var yS,Lj;function zre(){if(Lj)return yS;Lj=1,yS=t;function t(e,n=[]){return n.map(r=>{let i=e.inEdges(r);if(i.length){let s=i.reduce((o,l)=>{let c=e.edge(l),d=e.node(l.v);return{sum:o.sum+c.weight*d.order,weight:o.weight+c.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return yS}var vS,Mj;function Wre(){if(Mj)return vS;Mj=1;let t=Yr();vS=e;function e(i,s){let o={};i.forEach((c,d)=>{let p=o[c.v]={indegree:0,in:[],out:[],vs:[c.v],i:d};c.barycenter!==void 0&&(p.barycenter=c.barycenter,p.weight=c.weight)}),s.edges().forEach(c=>{let d=o[c.v],p=o[c.w];d!==void 0&&p!==void 0&&(p.indegree++,d.out.push(o[c.w]))});let l=Object.values(o).filter(c=>!c.indegree);return n(l)}function n(i){let s=[];function o(c){return d=>{d.merged||(d.barycenter===void 0||c.barycenter===void 0||d.barycenter>=c.barycenter)&&r(c,d)}}function l(c){return d=>{d.in.push(c),--d.indegree===0&&i.push(d)}}for(;i.length;){let c=i.pop();s.push(c),c.in.reverse().forEach(o(c)),c.out.forEach(l(c))}return s.filter(c=>!c.merged).map(c=>t.pick(c,["vs","i","barycenter","weight"]))}function r(i,s){let o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return vS}var bS,$j;function Ure(){if($j)return bS;$j=1;let t=Yr();bS=e;function e(i,s){let o=t.partition(i,w=>Object.hasOwn(w,"barycenter")),l=o.lhs,c=o.rhs.sort((w,E)=>E.i-w.i),d=[],p=0,h=0,b=0;l.sort(r(!!s)),b=n(d,c,b),l.forEach(w=>{b+=w.vs.length,d.push(w.vs),p+=w.barycenter*w.weight,h+=w.weight,b=n(d,c,b)});let x={vs:d.flat(!0)};return h&&(x.barycenter=p/h,x.weight=h),x}function n(i,s,o){let l;for(;s.length&&(l=s[s.length-1]).i<=o;)s.pop(),i.push(l.vs),o++;return o}function r(i){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}return bS}var xS,Bj;function Vre(){if(Bj)return xS;Bj=1;let t=zre(),e=Wre(),n=Ure();xS=r;function r(o,l,c,d){let p=o.children(l),h=o.node(l),b=h?h.borderLeft:void 0,x=h?h.borderRight:void 0,w={};b&&(p=p.filter(O=>O!==b&&O!==x));let E=t(o,p);E.forEach(O=>{if(o.children(O.v).length){let q=r(o,O.v,c,d);w[O.v]=q,Object.hasOwn(q,"barycenter")&&s(O,q)}});let I=e(E,c);i(I,w);let T=n(I,d);if(b&&(T.vs=[b,T.vs,x].flat(!0),o.predecessors(b).length)){let O=o.node(o.predecessors(b)[0]),q=o.node(o.predecessors(x)[0]);Object.hasOwn(T,"barycenter")||(T.barycenter=0,T.weight=0),T.barycenter=(T.barycenter*T.weight+O.order+q.order)/(T.weight+2),T.weight+=2}return T}function i(o,l){o.forEach(c=>{c.vs=c.vs.flatMap(d=>l[d]?l[d].vs:d)})}function s(o,l){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+l.barycenter*l.weight)/(o.weight+l.weight),o.weight+=l.weight):(o.barycenter=l.barycenter,o.weight=l.weight)}return xS}var _S,zj;function Hre(){if(zj)return _S;zj=1;let t=Ao().Graph,e=Yr();_S=n;function n(i,s,o){let l=r(i),c=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(d=>i.node(d));return i.nodes().forEach(d=>{let p=i.node(d),h=i.parent(d);(p.rank===s||p.minRank<=s&&s<=p.maxRank)&&(c.setNode(d),c.setParent(d,h||l),i[o](d).forEach(b=>{let x=b.v===d?b.w:b.v,w=c.edge(x,d),E=w!==void 0?w.weight:0;c.setEdge(x,d,{weight:i.edge(b).weight+E})}),Object.hasOwn(p,"minRank")&&c.setNode(d,{borderLeft:p.borderLeft[s],borderRight:p.borderRight[s]}))}),c}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return _S}var wS,Wj;function Qre(){if(Wj)return wS;Wj=1,wS=t;function t(e,n,r){let i={},s;r.forEach(o=>{let l=e.parent(o),c,d;for(;l;){if(c=e.parent(l),c?(d=i[c],i[c]=l):(d=s,s=l),d&&d!==l){n.setEdge(d,l);return}l=c}})}return wS}var SS,Uj;function Kre(){if(Uj)return SS;Uj=1;let t=$re(),e=Bre(),n=Vre(),r=Hre(),i=Qre(),s=Ao().Graph,o=Yr();SS=l;function l(h,b){if(b&&typeof b.customOrder=="function"){b.customOrder(h,l);return}let x=o.maxRank(h),w=c(h,o.range(1,x+1),"inEdges"),E=c(h,o.range(x-1,-1,-1),"outEdges"),I=t(h);if(p(h,I),b&&b.disableOptimalOrderHeuristic)return;let T=Number.POSITIVE_INFINITY,O;for(let q=0,A=0;A<4;++q,++A){d(q%2?w:E,q%4>=2),I=o.buildLayerMatrix(h);let D=e(h,I);D<T&&(A=0,O=Object.assign({},I),T=D)}p(h,O)}function c(h,b,x){return b.map(function(w){return r(h,w,x)})}function d(h,b){let x=new s;h.forEach(function(w){let E=w.graph().root,I=n(w,E,x,b);I.vs.forEach((T,O)=>w.node(T).order=O),i(w,x,I.vs)})}function p(h,b){Object.values(b).forEach(x=>x.forEach((w,E)=>h.node(w).order=E))}return SS}var ES,Vj;function Gre(){if(Vj)return ES;Vj=1;let t=Ao().Graph,e=Yr();ES={positionX:x,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:o,verticalAlignment:l,horizontalCompaction:c,alignCoordinates:h,findSmallestWidthAlignment:p,balance:b};function n(I,T){let O={};function q(A,D){let L=0,z=0,P=A.length,R=D[D.length-1];return D.forEach((M,F)=>{let W=i(I,M),V=W?I.node(W).order:P;(W||M===R)&&(D.slice(z,F+1).forEach(B=>{I.predecessors(B).forEach(te=>{let J=I.node(te),le=J.order;(le<L||V<le)&&!(J.dummy&&I.node(B).dummy)&&s(O,te,B)})}),z=F+1,L=V)}),D}return T.length&&T.reduce(q),O}function r(I,T){let O={};function q(D,L,z,P,R){let M;e.range(L,z).forEach(F=>{M=D[F],I.node(M).dummy&&I.predecessors(M).forEach(W=>{let V=I.node(W);V.dummy&&(V.order<P||V.order>R)&&s(O,W,M)})})}function A(D,L){let z=-1,P,R=0;return L.forEach((M,F)=>{if(I.node(M).dummy==="border"){let W=I.predecessors(M);W.length&&(P=I.node(W[0]).order,q(L,R,F,z,P),R=F,z=P)}q(L,R,L.length,P,D.length)}),L}return T.length&&T.reduce(A),O}function i(I,T){if(I.node(T).dummy)return I.predecessors(T).find(O=>I.node(O).dummy)}function s(I,T,O){if(T>O){let A=T;T=O,O=A}let q=I[T];q||(I[T]=q={}),q[O]=!0}function o(I,T,O){if(T>O){let q=T;T=O,O=q}return!!I[T]&&Object.hasOwn(I[T],O)}function l(I,T,O,q){let A={},D={},L={};return T.forEach(z=>{z.forEach((P,R)=>{A[P]=P,D[P]=P,L[P]=R})}),T.forEach(z=>{let P=-1;z.forEach(R=>{let M=q(R);if(M.length){M=M.sort((W,V)=>L[W]-L[V]);let F=(M.length-1)/2;for(let W=Math.floor(F),V=Math.ceil(F);W<=V;++W){let B=M[W];D[R]===R&&P<L[B]&&!o(O,R,B)&&(D[B]=R,D[R]=A[R]=A[B],P=L[B])}}})}),{root:A,align:D}}function c(I,T,O,q,A){let D={},L=d(I,T,O,A),z=A?"borderLeft":"borderRight";function P(F,W){let V=L.nodes(),B=V.pop(),te={};for(;B;)te[B]?F(B):(te[B]=!0,V.push(B),V=V.concat(W(B))),B=V.pop()}function R(F){D[F]=L.inEdges(F).reduce((W,V)=>Math.max(W,D[V.v]+L.edge(V)),0)}function M(F){let W=L.outEdges(F).reduce((B,te)=>Math.min(B,D[te.w]-L.edge(te)),Number.POSITIVE_INFINITY),V=I.node(F);W!==Number.POSITIVE_INFINITY&&V.borderType!==z&&(D[F]=Math.max(D[F],W))}return P(R,L.predecessors.bind(L)),P(M,L.successors.bind(L)),Object.keys(q).forEach(F=>D[F]=D[O[F]]),D}function d(I,T,O,q){let A=new t,D=I.graph(),L=w(D.nodesep,D.edgesep,q);return T.forEach(z=>{let P;z.forEach(R=>{let M=O[R];if(A.setNode(M),P){var F=O[P],W=A.edge(F,M);A.setEdge(F,M,Math.max(L(I,R,P),W||0))}P=R})}),A}function p(I,T){return Object.values(T).reduce((O,q)=>{let A=Number.NEGATIVE_INFINITY,D=Number.POSITIVE_INFINITY;Object.entries(q).forEach(([z,P])=>{let R=E(I,z)/2;A=Math.max(P+R,A),D=Math.min(P-R,D)});const L=A-D;return L<O[0]&&(O=[L,q]),O},[Number.POSITIVE_INFINITY,null])[1]}function h(I,T){let O=Object.values(T),q=e.applyWithChunking(Math.min,O),A=e.applyWithChunking(Math.max,O);["u","d"].forEach(D=>{["l","r"].forEach(L=>{let z=D+L,P=I[z];if(P===T)return;let R=Object.values(P),M=q-e.applyWithChunking(Math.min,R);L!=="l"&&(M=A-e.applyWithChunking(Math.max,R)),M&&(I[z]=e.mapValues(P,F=>F+M))})})}function b(I,T){return e.mapValues(I.ul,(O,q)=>{if(T)return I[T.toLowerCase()][q];{let A=Object.values(I).map(D=>D[q]).sort((D,L)=>D-L);return(A[1]+A[2])/2}})}function x(I){let T=e.buildLayerMatrix(I),O=Object.assign(n(I,T),r(I,T)),q={},A;["u","d"].forEach(L=>{A=L==="u"?T:Object.values(T).reverse(),["l","r"].forEach(z=>{z==="r"&&(A=A.map(F=>Object.values(F).reverse()));let P=(L==="u"?I.predecessors:I.successors).bind(I),R=l(I,A,O,P),M=c(I,A,R.root,R.align,z==="r");z==="r"&&(M=e.mapValues(M,F=>-F)),q[L+z]=M})});let D=p(I,q);return h(q,D),b(q,I.graph().align)}function w(I,T,O){return(q,A,D)=>{let L=q.node(A),z=q.node(D),P=0,R;if(P+=L.width/2,Object.hasOwn(L,"labelpos"))switch(L.labelpos.toLowerCase()){case"l":R=-L.width/2;break;case"r":R=L.width/2;break}if(R&&(P+=O?R:-R),R=0,P+=(L.dummy?T:I)/2,P+=(z.dummy?T:I)/2,P+=z.width/2,Object.hasOwn(z,"labelpos"))switch(z.labelpos.toLowerCase()){case"l":R=z.width/2;break;case"r":R=-z.width/2;break}return R&&(P+=O?R:-R),R=0,P}}function E(I,T){return I.node(T).width}return ES}var NS,Hj;function Zre(){if(Hj)return NS;Hj=1;let t=Yr(),e=Gre().positionX;NS=n;function n(i){i=t.asNonCompoundGraph(i),r(i),Object.entries(e(i)).forEach(([s,o])=>i.node(s).x=o)}function r(i){let s=t.buildLayerMatrix(i),o=i.graph().ranksep,l=0;s.forEach(c=>{const d=c.reduce((p,h)=>{const b=i.node(h).height;return p>b?p:b},0);c.forEach(p=>i.node(p).y=l+d/2),l+=d+o})}return NS}var kS,Qj;function Jre(){if(Qj)return kS;Qj=1;let t=Rre(),e=jre(),n=Pre(),r=Yr().normalizeRanks,i=Fre(),s=Yr().removeEmptyRanks,o=Dre(),l=Lre(),c=Mre(),d=Kre(),p=Zre(),h=Yr(),b=Ao().Graph;kS=x;function x(de,ye){let _e=ye&&ye.debugTiming?h.time:h.notime;_e("layout",()=>{let Ne=_e("  buildLayoutGraph",()=>P(de));_e("  runLayout",()=>w(Ne,_e,ye)),_e("  updateInputGraph",()=>E(de,Ne))})}function w(de,ye,_e){ye("    makeSpaceForEdgeLabels",()=>R(de)),ye("    removeSelfEdges",()=>se(de)),ye("    acyclic",()=>t.run(de)),ye("    nestingGraph.run",()=>o.run(de)),ye("    rank",()=>n(h.asNonCompoundGraph(de))),ye("    injectEdgeLabelProxies",()=>M(de)),ye("    removeEmptyRanks",()=>s(de)),ye("    nestingGraph.cleanup",()=>o.cleanup(de)),ye("    normalizeRanks",()=>r(de)),ye("    assignRankMinMax",()=>F(de)),ye("    removeEdgeLabelProxies",()=>W(de)),ye("    normalize.run",()=>e.run(de)),ye("    parentDummyChains",()=>i(de)),ye("    addBorderSegments",()=>l(de)),ye("    order",()=>d(de,_e)),ye("    insertSelfEdges",()=>ne(de)),ye("    adjustCoordinateSystem",()=>c.adjust(de)),ye("    position",()=>p(de)),ye("    positionSelfEdges",()=>oe(de)),ye("    removeBorderNodes",()=>le(de)),ye("    normalize.undo",()=>e.undo(de)),ye("    fixupEdgeLabelCoords",()=>te(de)),ye("    undoCoordinateSystem",()=>c.undo(de)),ye("    translateGraph",()=>V(de)),ye("    assignNodeIntersects",()=>B(de)),ye("    reversePoints",()=>J(de)),ye("    acyclic.undo",()=>t.undo(de))}function E(de,ye){de.nodes().forEach(_e=>{let Ne=de.node(_e),ze=ye.node(_e);Ne&&(Ne.x=ze.x,Ne.y=ze.y,Ne.rank=ze.rank,ye.children(_e).length&&(Ne.width=ze.width,Ne.height=ze.height))}),de.edges().forEach(_e=>{let Ne=de.edge(_e),ze=ye.edge(_e);Ne.points=ze.points,Object.hasOwn(ze,"x")&&(Ne.x=ze.x,Ne.y=ze.y)}),de.graph().width=ye.graph().width,de.graph().height=ye.graph().height}let I=["nodesep","edgesep","ranksep","marginx","marginy"],T={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},O=["acyclicer","ranker","rankdir","align"],q=["width","height"],A={width:0,height:0},D=["minlen","weight","width","height","labeloffset"],L={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},z=["labelpos"];function P(de){let ye=new b({multigraph:!0,compound:!0}),_e=ce(de.graph());return ye.setGraph(Object.assign({},T,X(_e,I),h.pick(_e,O))),de.nodes().forEach(Ne=>{let ze=ce(de.node(Ne));const qe=X(ze,q);Object.keys(A).forEach(De=>{qe[De]===void 0&&(qe[De]=A[De])}),ye.setNode(Ne,qe),ye.setParent(Ne,de.parent(Ne))}),de.edges().forEach(Ne=>{let ze=ce(de.edge(Ne));ye.setEdge(Ne,Object.assign({},L,X(ze,D),h.pick(ze,z)))}),ye}function R(de){let ye=de.graph();ye.ranksep/=2,de.edges().forEach(_e=>{let Ne=de.edge(_e);Ne.minlen*=2,Ne.labelpos.toLowerCase()!=="c"&&(ye.rankdir==="TB"||ye.rankdir==="BT"?Ne.width+=Ne.labeloffset:Ne.height+=Ne.labeloffset)})}function M(de){de.edges().forEach(ye=>{let _e=de.edge(ye);if(_e.width&&_e.height){let Ne=de.node(ye.v),qe={rank:(de.node(ye.w).rank-Ne.rank)/2+Ne.rank,e:ye};h.addDummyNode(de,"edge-proxy",qe,"_ep")}})}function F(de){let ye=0;de.nodes().forEach(_e=>{let Ne=de.node(_e);Ne.borderTop&&(Ne.minRank=de.node(Ne.borderTop).rank,Ne.maxRank=de.node(Ne.borderBottom).rank,ye=Math.max(ye,Ne.maxRank))}),de.graph().maxRank=ye}function W(de){de.nodes().forEach(ye=>{let _e=de.node(ye);_e.dummy==="edge-proxy"&&(de.edge(_e.e).labelRank=_e.rank,de.removeNode(ye))})}function V(de){let ye=Number.POSITIVE_INFINITY,_e=0,Ne=Number.POSITIVE_INFINITY,ze=0,qe=de.graph(),De=qe.marginx||0,Ze=qe.marginy||0;function Xe(Ue){let ut=Ue.x,wt=Ue.y,Tt=Ue.width,Ut=Ue.height;ye=Math.min(ye,ut-Tt/2),_e=Math.max(_e,ut+Tt/2),Ne=Math.min(Ne,wt-Ut/2),ze=Math.max(ze,wt+Ut/2)}de.nodes().forEach(Ue=>Xe(de.node(Ue))),de.edges().forEach(Ue=>{let ut=de.edge(Ue);Object.hasOwn(ut,"x")&&Xe(ut)}),ye-=De,Ne-=Ze,de.nodes().forEach(Ue=>{let ut=de.node(Ue);ut.x-=ye,ut.y-=Ne}),de.edges().forEach(Ue=>{let ut=de.edge(Ue);ut.points.forEach(wt=>{wt.x-=ye,wt.y-=Ne}),Object.hasOwn(ut,"x")&&(ut.x-=ye),Object.hasOwn(ut,"y")&&(ut.y-=Ne)}),qe.width=_e-ye+De,qe.height=ze-Ne+Ze}function B(de){de.edges().forEach(ye=>{let _e=de.edge(ye),Ne=de.node(ye.v),ze=de.node(ye.w),qe,De;_e.points?(qe=_e.points[0],De=_e.points[_e.points.length-1]):(_e.points=[],qe=ze,De=Ne),_e.points.unshift(h.intersectRect(Ne,qe)),_e.points.push(h.intersectRect(ze,De))})}function te(de){de.edges().forEach(ye=>{let _e=de.edge(ye);if(Object.hasOwn(_e,"x"))switch((_e.labelpos==="l"||_e.labelpos==="r")&&(_e.width-=_e.labeloffset),_e.labelpos){case"l":_e.x-=_e.width/2+_e.labeloffset;break;case"r":_e.x+=_e.width/2+_e.labeloffset;break}})}function J(de){de.edges().forEach(ye=>{let _e=de.edge(ye);_e.reversed&&_e.points.reverse()})}function le(de){de.nodes().forEach(ye=>{if(de.children(ye).length){let _e=de.node(ye),Ne=de.node(_e.borderTop),ze=de.node(_e.borderBottom),qe=de.node(_e.borderLeft[_e.borderLeft.length-1]),De=de.node(_e.borderRight[_e.borderRight.length-1]);_e.width=Math.abs(De.x-qe.x),_e.height=Math.abs(ze.y-Ne.y),_e.x=qe.x+_e.width/2,_e.y=Ne.y+_e.height/2}}),de.nodes().forEach(ye=>{de.node(ye).dummy==="border"&&de.removeNode(ye)})}function se(de){de.edges().forEach(ye=>{if(ye.v===ye.w){var _e=de.node(ye.v);_e.selfEdges||(_e.selfEdges=[]),_e.selfEdges.push({e:ye,label:de.edge(ye)}),de.removeEdge(ye)}})}function ne(de){var ye=h.buildLayerMatrix(de);ye.forEach(_e=>{var Ne=0;_e.forEach((ze,qe)=>{var De=de.node(ze);De.order=qe+Ne,(De.selfEdges||[]).forEach(Ze=>{h.addDummyNode(de,"selfedge",{width:Ze.label.width,height:Ze.label.height,rank:De.rank,order:qe+ ++Ne,e:Ze.e,label:Ze.label},"_se")}),delete De.selfEdges})})}function oe(de){de.nodes().forEach(ye=>{var _e=de.node(ye);if(_e.dummy==="selfedge"){var Ne=de.node(_e.e.v),ze=Ne.x+Ne.width/2,qe=Ne.y,De=_e.x-ze,Ze=Ne.height/2;de.setEdge(_e.e,_e.label),de.removeNode(ye),_e.label.points=[{x:ze+2*De/3,y:qe-Ze},{x:ze+5*De/6,y:qe-Ze},{x:ze+De,y:qe},{x:ze+5*De/6,y:qe+Ze},{x:ze+2*De/3,y:qe+Ze}],_e.label.x=_e.x,_e.label.y=_e.y}})}function X(de,ye){return h.mapValues(h.pick(de,ye),Number)}function ce(de){var ye={};return de&&Object.entries(de).forEach(([_e,Ne])=>{typeof _e=="string"&&(_e=_e.toLowerCase()),ye[_e]=Ne}),ye}return kS}var IS,Kj;function Yre(){if(Kj)return IS;Kj=1;let t=Yr(),e=Ao().Graph;IS={debugOrdering:n};function n(r){let i=t.buildLayerMatrix(r),s=new e({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+r.node(o).rank)}),r.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),i.forEach((o,l)=>{let c="layer"+l;s.setNode(c,{rank:"same"}),o.reduce((d,p)=>(s.setEdge(d,p,{style:"invis"}),p))}),s}return IS}var CS,Gj;function Xre(){return Gj||(Gj=1,CS="1.1.4"),CS}var TS,Zj;function eie(){return Zj||(Zj=1,TS={graphlib:Ao(),layout:Jre(),debug:Yre(),util:{time:Yr().time,notime:Yr().notime},version:Xre()}),TS}var tie=eie();const WL=io(tie);var Em=t=>t.type==="checkbox",zu=t=>t instanceof Date,Pi=t=>t==null;const UL=t=>typeof t=="object";var Wr=t=>!Pi(t)&&!Array.isArray(t)&&UL(t)&&!zu(t),VL=t=>Wr(t)&&t.target?Em(t.target)?t.target.checked:t.target.value:t,nie=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,HL=(t,e)=>t.has(nie(e)),rie=t=>{const e=t.constructor&&t.constructor.prototype;return Wr(e)&&e.hasOwnProperty("isPrototypeOf")},$N=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function os(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!($N&&(t instanceof Blob||r))&&(n||Wr(t)))if(e=n?[]:{},!n&&!rie(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=os(t[i]));else return t;return e}var ax=t=>Array.isArray(t)?t.filter(Boolean):[],Br=t=>t===void 0,Et=(t,e,n)=>{if(!e||!Wr(t))return n;const r=ax(e.split(/[,[\].]+?/)).reduce((i,s)=>Pi(i)?i:i[s],t);return Br(r)||r===t?Br(t[e])?n:t[e]:r},Xs=t=>typeof t=="boolean",BN=t=>/^\w*$/.test(t),QL=t=>ax(t.replace(/["|']|\]/g,"").split(/\.|\[/)),zn=(t,e,n)=>{let r=-1;const i=BN(e)?[e]:QL(e),s=i.length,o=s-1;for(;++r<s;){const l=i[r];let c=n;if(r!==o){const d=t[l];c=Wr(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}return t};const nb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Eo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ia={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iie=$n.createContext(null),zN=()=>$n.useContext(iie);var KL=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Eo.all&&(e._proxyFormState[o]=!r||Eo.all),n&&(n[o]=!0),t[o]}});return i},as=t=>Wr(t)&&!Object.keys(t).length,GL=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return as(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Eo.all))},ih=t=>Array.isArray(t)?t:[t],ZL=(t,e,n)=>!t||!e||t===e||ih(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function WN(t){const e=$n.useRef(t);e.current=t,$n.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function sie(t){const e=zN(),{control:n=e.control,disabled:r,name:i,exact:s}=t,[o,l]=$n.useState(n._formState),c=$n.useRef(!0),d=$n.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=$n.useRef(i);return p.current=i,WN({disabled:r,next:h=>c.current&&ZL(p.current,h.name,s)&&GL(h,d.current,n._updateFormState)&&l({...n._formState,...h}),subject:n._subjects.state}),$n.useEffect(()=>(c.current=!0,d.current.isValid&&n._updateValid(!0),()=>{c.current=!1}),[n]),$n.useMemo(()=>KL(o,n,d.current,!1),[o,n])}var Go=t=>typeof t=="string",JL=(t,e,n,r,i)=>Go(t)?(r&&e.watch.add(t),Et(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Et(n,s))):(r&&(e.watchAll=!0),n);function oie(t){const e=zN(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t,l=$n.useRef(r);l.current=r,WN({disabled:s,subject:n._subjects.values,next:p=>{ZL(l.current,p.name,o)&&d(os(JL(l.current,n._names,p.values||n._formValues,!1,i)))}});const[c,d]=$n.useState(n._getWatch(r,i));return $n.useEffect(()=>n._removeUnmounted()),c}function aie(t){const e=zN(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=HL(i._names.array,n),l=oie({control:i,name:n,defaultValue:Et(i._formValues,n,Et(i._defaultValues,n,t.defaultValue)),exact:!0}),c=sie({control:i,name:n,exact:!0}),d=$n.useRef(i.register(n,{...t.rules,value:l,...Xs(t.disabled)?{disabled:t.disabled}:{}})),p=$n.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Et(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Et(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Et(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Et(c.validatingFields,n)},error:{enumerable:!0,get:()=>Et(c.errors,n)}}),[c,n]),h=$n.useMemo(()=>({name:n,value:l,...Xs(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:b=>d.current.onChange({target:{value:VL(b),name:n},type:nb.CHANGE}),onBlur:()=>d.current.onBlur({target:{value:Et(i._formValues,n),name:n},type:nb.BLUR}),ref:b=>{const x=Et(i._fields,n);x&&b&&(x._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:w=>b.setCustomValidity(w),reportValidity:()=>b.reportValidity()})}}),[n,i._formValues,r,c.disabled,l,i._fields]);return $n.useEffect(()=>{const b=i._options.shouldUnregister||s,x=(w,E)=>{const I=Et(i._fields,w);I&&I._f&&(I._f.mount=E)};if(x(n,!0),b){const w=os(Et(i._options.defaultValues,n));zn(i._defaultValues,n,w),Br(Et(i._formValues,n))&&zn(i._formValues,n,w)}return!o&&i.register(n),()=>{(o?b&&!i._state.action:b)?i.unregister(n):x(n,!1)}},[n,i,o,s]),$n.useEffect(()=>{i._updateDisabledField({disabled:r,fields:i._fields,name:n})},[r,n,i]),$n.useMemo(()=>({field:h,formState:c,fieldState:p}),[h,c,p])}const ms=t=>t.render(aie(t));var YL=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Jj=t=>({isOnSubmit:!t||t===Eo.onSubmit,isOnBlur:t===Eo.onBlur,isOnChange:t===Eo.onChange,isOnAll:t===Eo.all,isOnTouch:t===Eo.onTouched}),Yj=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const sh=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Et(t,i);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(sh(l,e))break}else if(Wr(l)&&sh(l,e))break}}};var lie=(t,e,n)=>{const r=ih(Et(t,n));return zn(r,"root",e[n]),zn(t,n,r),t},UN=t=>t.type==="file",Qo=t=>typeof t=="function",rb=t=>{if(!$N)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Ly=t=>Go(t),VN=t=>t.type==="radio",ib=t=>t instanceof RegExp;const Xj={value:!1,isValid:!1},e3={value:!0,isValid:!0};var XL=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Br(t[0].attributes.value)?Br(t[0].value)||t[0].value===""?e3:{value:t[0].value,isValid:!0}:e3:Xj}return Xj};const t3={isValid:!1,value:null};var eM=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,t3):t3;function n3(t,e,n="validate"){if(Ly(t)||Array.isArray(t)&&t.every(Ly)||Xs(t)&&!t)return{type:n,message:Ly(t)?t:"",ref:e}}var Jc=t=>Wr(t)&&!ib(t)?t:{value:t,message:""},r3=async(t,e,n,r,i,s)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:p,min:h,max:b,pattern:x,validate:w,name:E,valueAsNumber:I,mount:T}=t._f,O=Et(n,E);if(!T||e.has(E))return{};const q=l?l[0]:o,A=W=>{i&&q.reportValidity&&(q.setCustomValidity(Xs(W)?"":W||""),q.reportValidity())},D={},L=VN(o),z=Em(o),P=L||z,R=(I||UN(o))&&Br(o.value)&&Br(O)||rb(o)&&o.value===""||O===""||Array.isArray(O)&&!O.length,M=YL.bind(null,E,r,D),F=(W,V,B,te=Ia.maxLength,J=Ia.minLength)=>{const le=W?V:B;D[E]={type:W?te:J,message:le,ref:o,...M(W?te:J,le)}};if(s?!Array.isArray(O)||!O.length:c&&(!P&&(R||Pi(O))||Xs(O)&&!O||z&&!XL(l).isValid||L&&!eM(l).isValid)){const{value:W,message:V}=Ly(c)?{value:!!c,message:c}:Jc(c);if(W&&(D[E]={type:Ia.required,message:V,ref:q,...M(Ia.required,V)},!r))return A(V),D}if(!R&&(!Pi(h)||!Pi(b))){let W,V;const B=Jc(b),te=Jc(h);if(!Pi(O)&&!isNaN(O)){const J=o.valueAsNumber||O&&+O;Pi(B.value)||(W=J>B.value),Pi(te.value)||(V=J<te.value)}else{const J=o.valueAsDate||new Date(O),le=oe=>new Date(new Date().toDateString()+" "+oe),se=o.type=="time",ne=o.type=="week";Go(B.value)&&O&&(W=se?le(O)>le(B.value):ne?O>B.value:J>new Date(B.value)),Go(te.value)&&O&&(V=se?le(O)<le(te.value):ne?O<te.value:J<new Date(te.value))}if((W||V)&&(F(!!W,B.message,te.message,Ia.max,Ia.min),!r))return A(D[E].message),D}if((d||p)&&!R&&(Go(O)||s&&Array.isArray(O))){const W=Jc(d),V=Jc(p),B=!Pi(W.value)&&O.length>+W.value,te=!Pi(V.value)&&O.length<+V.value;if((B||te)&&(F(B,W.message,V.message),!r))return A(D[E].message),D}if(x&&!R&&Go(O)){const{value:W,message:V}=Jc(x);if(ib(W)&&!O.match(W)&&(D[E]={type:Ia.pattern,message:V,ref:o,...M(Ia.pattern,V)},!r))return A(V),D}if(w){if(Qo(w)){const W=await w(O,n),V=n3(W,q);if(V&&(D[E]={...V,...M(Ia.validate,V.message)},!r))return A(V.message),D}else if(Wr(w)){let W={};for(const V in w){if(!as(W)&&!r)break;const B=n3(await w[V](O,n),q,V);B&&(W={...B,...M(V,B.message)},A(B.message),r&&(D[E]=W))}if(!as(W)&&(D[E]={ref:q,...W},!r))return D}}return A(!0),D};function uie(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Br(t)?r++:t[e[r++]];return t}function cie(t){for(const e in t)if(t.hasOwnProperty(e)&&!Br(t[e]))return!1;return!0}function ri(t,e){const n=Array.isArray(e)?e:BN(e)?[e]:QL(e),r=n.length===1?t:uie(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Wr(r)&&as(r)||Array.isArray(r)&&cie(r))&&ri(t,n.slice(0,-1)),t}var OS=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},l1=t=>Pi(t)||!UL(t);function ql(t,e){if(l1(t)||l1(e))return t===e;if(zu(t)&&zu(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(zu(s)&&zu(o)||Wr(s)&&Wr(o)||Array.isArray(s)&&Array.isArray(o)?!ql(s,o):s!==o)return!1}}return!0}var tM=t=>t.type==="select-multiple",die=t=>VN(t)||Em(t),qS=t=>rb(t)&&t.isConnected,nM=t=>{for(const e in t)if(Qo(t[e]))return!0;return!1};function sb(t,e={}){const n=Array.isArray(t);if(Wr(t)||n)for(const r in t)Array.isArray(t[r])||Wr(t[r])&&!nM(t[r])?(e[r]=Array.isArray(t[r])?[]:{},sb(t[r],e[r])):Pi(t[r])||(e[r]=!0);return e}function rM(t,e,n){const r=Array.isArray(t);if(Wr(t)||r)for(const i in t)Array.isArray(t[i])||Wr(t[i])&&!nM(t[i])?Br(e)||l1(n[i])?n[i]=Array.isArray(t[i])?sb(t[i],[]):{...sb(t[i])}:rM(t[i],Pi(e)?{}:e[i],n[i]):n[i]=!ql(t[i],e[i]);return n}var vp=(t,e)=>rM(t,e,sb(e)),iM=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Br(t)?t:e?t===""?NaN:t&&+t:n&&Go(t)?new Date(t):r?r(t):t;function RS(t){const e=t.ref;return UN(e)?e.files:VN(e)?eM(t.refs).value:tM(e)?[...e.selectedOptions].map(({value:n})=>n):Em(e)?XL(t.refs).value:iM(Br(e.value)?t.ref.value:e.value,t)}var fie=(t,e,n,r)=>{const i={};for(const s of t){const o=Et(e,s);o&&zn(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},bp=t=>Br(t)?t:ib(t)?t.source:Wr(t)?ib(t.value)?t.value.source:t.value:t;const i3="AsyncFunction";var pie=t=>!!t&&!!t.validate&&!!(Qo(t.validate)&&t.validate.constructor.name===i3||Wr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===i3)),hie=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function s3(t,e,n){const r=Et(t,n);if(r||BN(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Et(e,s),l=Et(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(l&&l.type)return{name:s,error:l};i.pop()}return{name:n}}var mie=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,gie=(t,e)=>!ax(Et(t,e)).length&&ri(t,e);const yie={mode:Eo.onSubmit,reValidateMode:Eo.onChange,shouldFocusError:!0};function vie(t={}){let e={...yie,...t},n={submitCount:0,isDirty:!1,isLoading:Qo(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Wr(e.defaultValues)||Wr(e.values)?os(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:os(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:OS(),array:OS(),state:OS()},b=Jj(e.mode),x=Jj(e.reValidateMode),w=e.criteriaMode===Eo.all,E=xe=>ve=>{clearTimeout(d),d=setTimeout(xe,ve)},I=async xe=>{if(!e.disabled&&(p.isValid||xe)){const ve=e.resolver?as((await P()).errors):await M(r,!0);ve!==n.isValid&&h.state.next({isValid:ve})}},T=(xe,ve)=>{!e.disabled&&(p.isValidating||p.validatingFields)&&((xe||Array.from(l.mount)).forEach(ke=>{ke&&(ve?zn(n.validatingFields,ke,ve):ri(n.validatingFields,ke))}),h.state.next({validatingFields:n.validatingFields,isValidating:!as(n.validatingFields)}))},O=(xe,ve=[],ke,Ae,Ve=!0,rt=!0)=>{if(Ae&&ke&&!e.disabled){if(o.action=!0,rt&&Array.isArray(Et(r,xe))){const Me=ke(Et(r,xe),Ae.argA,Ae.argB);Ve&&zn(r,xe,Me)}if(rt&&Array.isArray(Et(n.errors,xe))){const Me=ke(Et(n.errors,xe),Ae.argA,Ae.argB);Ve&&zn(n.errors,xe,Me),gie(n.errors,xe)}if(p.touchedFields&&rt&&Array.isArray(Et(n.touchedFields,xe))){const Me=ke(Et(n.touchedFields,xe),Ae.argA,Ae.argB);Ve&&zn(n.touchedFields,xe,Me)}p.dirtyFields&&(n.dirtyFields=vp(i,s)),h.state.next({name:xe,isDirty:W(xe,ve),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else zn(s,xe,ve)},q=(xe,ve)=>{zn(n.errors,xe,ve),h.state.next({errors:n.errors})},A=xe=>{n.errors=xe,h.state.next({errors:n.errors,isValid:!1})},D=(xe,ve,ke,Ae)=>{const Ve=Et(r,xe);if(Ve){const rt=Et(s,xe,Br(ke)?Et(i,xe):ke);Br(rt)||Ae&&Ae.defaultChecked||ve?zn(s,xe,ve?rt:RS(Ve._f)):te(xe,rt),o.mount&&I()}},L=(xe,ve,ke,Ae,Ve)=>{let rt=!1,Me=!1;const ct={name:xe};if(!e.disabled){const Qt=!!(Et(r,xe)&&Et(r,xe)._f&&Et(r,xe)._f.disabled);if(!ke||Ae){p.isDirty&&(Me=n.isDirty,n.isDirty=ct.isDirty=W(),rt=Me!==ct.isDirty);const Kt=Qt||ql(Et(i,xe),ve);Me=!!(!Qt&&Et(n.dirtyFields,xe)),Kt||Qt?ri(n.dirtyFields,xe):zn(n.dirtyFields,xe,!0),ct.dirtyFields=n.dirtyFields,rt=rt||p.dirtyFields&&Me!==!Kt}if(ke){const Kt=Et(n.touchedFields,xe);Kt||(zn(n.touchedFields,xe,ke),ct.touchedFields=n.touchedFields,rt=rt||p.touchedFields&&Kt!==ke)}rt&&Ve&&h.state.next(ct)}return rt?ct:{}},z=(xe,ve,ke,Ae)=>{const Ve=Et(n.errors,xe),rt=p.isValid&&Xs(ve)&&n.isValid!==ve;if(e.delayError&&ke?(c=E(()=>q(xe,ke)),c(e.delayError)):(clearTimeout(d),c=null,ke?zn(n.errors,xe,ke):ri(n.errors,xe)),(ke?!ql(Ve,ke):Ve)||!as(Ae)||rt){const Me={...Ae,...rt&&Xs(ve)?{isValid:ve}:{},errors:n.errors,name:xe};n={...n,...Me},h.state.next(Me)}},P=async xe=>{T(xe,!0);const ve=await e.resolver(s,e.context,fie(xe||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return T(xe),ve},R=async xe=>{const{errors:ve}=await P(xe);if(xe)for(const ke of xe){const Ae=Et(ve,ke);Ae?zn(n.errors,ke,Ae):ri(n.errors,ke)}else n.errors=ve;return ve},M=async(xe,ve,ke={valid:!0})=>{for(const Ae in xe){const Ve=xe[Ae];if(Ve){const{_f:rt,...Me}=Ve;if(rt){const ct=l.array.has(rt.name),Qt=Ve._f&&pie(Ve._f);Qt&&p.validatingFields&&T([Ae],!0);const Kt=await r3(Ve,l.disabled,s,w,e.shouldUseNativeValidation&&!ve,ct);if(Qt&&p.validatingFields&&T([Ae]),Kt[rt.name]&&(ke.valid=!1,ve))break;!ve&&(Et(Kt,rt.name)?ct?lie(n.errors,Kt,rt.name):zn(n.errors,rt.name,Kt[rt.name]):ri(n.errors,rt.name))}!as(Me)&&await M(Me,ve,ke)}}return ke.valid},F=()=>{for(const xe of l.unMount){const ve=Et(r,xe);ve&&(ve._f.refs?ve._f.refs.every(ke=>!qS(ke)):!qS(ve._f.ref))&&Ne(xe)}l.unMount=new Set},W=(xe,ve)=>!e.disabled&&(xe&&ve&&zn(s,xe,ve),!ql(X(),i)),V=(xe,ve,ke)=>JL(xe,l,{...o.mount?s:Br(ve)?i:Go(xe)?{[xe]:ve}:ve},ke,ve),B=xe=>ax(Et(o.mount?s:i,xe,e.shouldUnregister?Et(i,xe,[]):[])),te=(xe,ve,ke={})=>{const Ae=Et(r,xe);let Ve=ve;if(Ae){const rt=Ae._f;rt&&(!rt.disabled&&zn(s,xe,iM(ve,rt)),Ve=rb(rt.ref)&&Pi(ve)?"":ve,tM(rt.ref)?[...rt.ref.options].forEach(Me=>Me.selected=Ve.includes(Me.value)):rt.refs?Em(rt.ref)?rt.refs.length>1?rt.refs.forEach(Me=>(!Me.defaultChecked||!Me.disabled)&&(Me.checked=Array.isArray(Ve)?!!Ve.find(ct=>ct===Me.value):Ve===Me.value)):rt.refs[0]&&(rt.refs[0].checked=!!Ve):rt.refs.forEach(Me=>Me.checked=Me.value===Ve):UN(rt.ref)?rt.ref.value="":(rt.ref.value=Ve,rt.ref.type||h.values.next({name:xe,values:{...s}})))}(ke.shouldDirty||ke.shouldTouch)&&L(xe,Ve,ke.shouldTouch,ke.shouldDirty,!0),ke.shouldValidate&&oe(xe)},J=(xe,ve,ke)=>{for(const Ae in ve){const Ve=ve[Ae],rt=`${xe}.${Ae}`,Me=Et(r,rt);(l.array.has(xe)||Wr(Ve)||Me&&!Me._f)&&!zu(Ve)?J(rt,Ve,ke):te(rt,Ve,ke)}},le=(xe,ve,ke={})=>{const Ae=Et(r,xe),Ve=l.array.has(xe),rt=os(ve);zn(s,xe,rt),Ve?(h.array.next({name:xe,values:{...s}}),(p.isDirty||p.dirtyFields)&&ke.shouldDirty&&h.state.next({name:xe,dirtyFields:vp(i,s),isDirty:W(xe,rt)})):Ae&&!Ae._f&&!Pi(rt)?J(xe,rt,ke):te(xe,rt,ke),Yj(xe,l)&&h.state.next({...n}),h.values.next({name:o.mount?xe:void 0,values:{...s}})},se=async xe=>{o.mount=!0;const ve=xe.target;let ke=ve.name,Ae=!0;const Ve=Et(r,ke),rt=()=>ve.type?RS(Ve._f):VL(xe),Me=ct=>{Ae=Number.isNaN(ct)||zu(ct)&&isNaN(ct.getTime())||ql(ct,Et(s,ke,ct))};if(Ve){let ct,Qt;const Kt=rt(),hn=xe.type===nb.BLUR||xe.type===nb.FOCUS_OUT,cr=!hie(Ve._f)&&!e.resolver&&!Et(n.errors,ke)&&!Ve._f.deps||mie(hn,Et(n.touchedFields,ke),n.isSubmitted,x,b),Dn=Yj(ke,l,hn);zn(s,ke,Kt),hn?(Ve._f.onBlur&&Ve._f.onBlur(xe),c&&c(0)):Ve._f.onChange&&Ve._f.onChange(xe);const Hr=L(ke,Kt,hn,!1),Oi=!as(Hr)||Dn;if(!hn&&h.values.next({name:ke,type:xe.type,values:{...s}}),cr)return p.isValid&&(e.mode==="onBlur"&&hn?I():hn||I()),Oi&&h.state.next({name:ke,...Dn?{}:Hr});if(!hn&&Dn&&h.state.next({...n}),e.resolver){const{errors:Tr}=await P([ke]);if(Me(Kt),Ae){const Gt=s3(n.errors,r,ke),Ki=s3(Tr,r,Gt.name||ke);ct=Ki.error,ke=Ki.name,Qt=as(Tr)}}else T([ke],!0),ct=(await r3(Ve,l.disabled,s,w,e.shouldUseNativeValidation))[ke],T([ke]),Me(Kt),Ae&&(ct?Qt=!1:p.isValid&&(Qt=await M(r,!0)));Ae&&(Ve._f.deps&&oe(Ve._f.deps),z(ke,Qt,ct,Hr))}},ne=(xe,ve)=>{if(Et(n.errors,ve)&&xe.focus)return xe.focus(),1},oe=async(xe,ve={})=>{let ke,Ae;const Ve=ih(xe);if(e.resolver){const rt=await R(Br(xe)?xe:Ve);ke=as(rt),Ae=xe?!Ve.some(Me=>Et(rt,Me)):ke}else xe?(Ae=(await Promise.all(Ve.map(async rt=>{const Me=Et(r,rt);return await M(Me&&Me._f?{[rt]:Me}:Me)}))).every(Boolean),!(!Ae&&!n.isValid)&&I()):Ae=ke=await M(r);return h.state.next({...!Go(xe)||p.isValid&&ke!==n.isValid?{}:{name:xe},...e.resolver||!xe?{isValid:ke}:{},errors:n.errors}),ve.shouldFocus&&!Ae&&sh(r,ne,xe?Ve:l.mount),Ae},X=xe=>{const ve={...o.mount?s:i};return Br(xe)?ve:Go(xe)?Et(ve,xe):xe.map(ke=>Et(ve,ke))},ce=(xe,ve)=>({invalid:!!Et((ve||n).errors,xe),isDirty:!!Et((ve||n).dirtyFields,xe),error:Et((ve||n).errors,xe),isValidating:!!Et(n.validatingFields,xe),isTouched:!!Et((ve||n).touchedFields,xe)}),de=xe=>{xe&&ih(xe).forEach(ve=>ri(n.errors,ve)),h.state.next({errors:xe?n.errors:{}})},ye=(xe,ve,ke)=>{const Ae=(Et(r,xe,{_f:{}})._f||{}).ref,Ve=Et(n.errors,xe)||{},{ref:rt,message:Me,type:ct,...Qt}=Ve;zn(n.errors,xe,{...Qt,...ve,ref:Ae}),h.state.next({name:xe,errors:n.errors,isValid:!1}),ke&&ke.shouldFocus&&Ae&&Ae.focus&&Ae.focus()},_e=(xe,ve)=>Qo(xe)?h.values.subscribe({next:ke=>xe(V(void 0,ve),ke)}):V(xe,ve,!0),Ne=(xe,ve={})=>{for(const ke of xe?ih(xe):l.mount)l.mount.delete(ke),l.array.delete(ke),ve.keepValue||(ri(r,ke),ri(s,ke)),!ve.keepError&&ri(n.errors,ke),!ve.keepDirty&&ri(n.dirtyFields,ke),!ve.keepTouched&&ri(n.touchedFields,ke),!ve.keepIsValidating&&ri(n.validatingFields,ke),!e.shouldUnregister&&!ve.keepDefaultValue&&ri(i,ke);h.values.next({values:{...s}}),h.state.next({...n,...ve.keepDirty?{isDirty:W()}:{}}),!ve.keepIsValid&&I()},ze=({disabled:xe,name:ve,field:ke,fields:Ae})=>{(Xs(xe)&&o.mount||xe||l.disabled.has(ve))&&(xe?l.disabled.add(ve):l.disabled.delete(ve),L(ve,RS(ke?ke._f:Et(Ae,ve)._f),!1,!1,!0))},qe=(xe,ve={})=>{let ke=Et(r,xe);const Ae=Xs(ve.disabled)||Xs(e.disabled);return zn(r,xe,{...ke||{},_f:{...ke&&ke._f?ke._f:{ref:{name:xe}},name:xe,mount:!0,...ve}}),l.mount.add(xe),ke?ze({field:ke,disabled:Xs(ve.disabled)?ve.disabled:e.disabled,name:xe}):D(xe,!0,ve.value),{...Ae?{disabled:ve.disabled||e.disabled}:{},...e.progressive?{required:!!ve.required,min:bp(ve.min),max:bp(ve.max),minLength:bp(ve.minLength),maxLength:bp(ve.maxLength),pattern:bp(ve.pattern)}:{},name:xe,onChange:se,onBlur:se,ref:Ve=>{if(Ve){qe(xe,ve),ke=Et(r,xe);const rt=Br(Ve.value)&&Ve.querySelectorAll&&Ve.querySelectorAll("input,select,textarea")[0]||Ve,Me=die(rt),ct=ke._f.refs||[];if(Me?ct.find(Qt=>Qt===rt):rt===ke._f.ref)return;zn(r,xe,{_f:{...ke._f,...Me?{refs:[...ct.filter(qS),rt,...Array.isArray(Et(i,xe))?[{}]:[]],ref:{type:rt.type,name:xe}}:{ref:rt}}}),D(xe,!1,void 0,rt)}else ke=Et(r,xe,{}),ke._f&&(ke._f.mount=!1),(e.shouldUnregister||ve.shouldUnregister)&&!(HL(l.array,xe)&&o.action)&&l.unMount.add(xe)}}},De=()=>e.shouldFocusError&&sh(r,ne,l.mount),Ze=xe=>{Xs(xe)&&(h.state.next({disabled:xe}),sh(r,(ve,ke)=>{const Ae=Et(r,ke);Ae&&(ve.disabled=Ae._f.disabled||xe,Array.isArray(Ae._f.refs)&&Ae._f.refs.forEach(Ve=>{Ve.disabled=Ae._f.disabled||xe}))},0,!1))},Xe=(xe,ve)=>async ke=>{let Ae;ke&&(ke.preventDefault&&ke.preventDefault(),ke.persist&&ke.persist());let Ve=os(s);if(l.disabled.size)for(const rt of l.disabled)zn(Ve,rt,void 0);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:rt,values:Me}=await P();n.errors=rt,Ve=Me}else await M(r);if(ri(n.errors,"root"),as(n.errors)){h.state.next({errors:{}});try{await xe(Ve,ke)}catch(rt){Ae=rt}}else ve&&await ve({...n.errors},ke),De(),setTimeout(De);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:as(n.errors)&&!Ae,submitCount:n.submitCount+1,errors:n.errors}),Ae)throw Ae},Ue=(xe,ve={})=>{Et(r,xe)&&(Br(ve.defaultValue)?le(xe,os(Et(i,xe))):(le(xe,ve.defaultValue),zn(i,xe,os(ve.defaultValue))),ve.keepTouched||ri(n.touchedFields,xe),ve.keepDirty||(ri(n.dirtyFields,xe),n.isDirty=ve.defaultValue?W(xe,os(Et(i,xe))):W()),ve.keepError||(ri(n.errors,xe),p.isValid&&I()),h.state.next({...n}))},ut=(xe,ve={})=>{const ke=xe?os(xe):i,Ae=os(ke),Ve=as(xe),rt=Ve?i:Ae;if(ve.keepDefaultValues||(i=ke),!ve.keepValues){if(ve.keepDirtyValues){const Me=new Set([...l.mount,...Object.keys(vp(i,s))]);for(const ct of Array.from(Me))Et(n.dirtyFields,ct)?zn(rt,ct,Et(s,ct)):le(ct,Et(rt,ct))}else{if($N&&Br(xe))for(const Me of l.mount){const ct=Et(r,Me);if(ct&&ct._f){const Qt=Array.isArray(ct._f.refs)?ct._f.refs[0]:ct._f.ref;if(rb(Qt)){const Kt=Qt.closest("form");if(Kt){Kt.reset();break}}}}r={}}s=e.shouldUnregister?ve.keepDefaultValues?os(i):{}:os(rt),h.array.next({values:{...rt}}),h.values.next({values:{...rt}})}l={mount:ve.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!p.isValid||!!ve.keepIsValid||!!ve.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:ve.keepSubmitCount?n.submitCount:0,isDirty:Ve?!1:ve.keepDirty?n.isDirty:!!(ve.keepDefaultValues&&!ql(xe,i)),isSubmitted:ve.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ve?{}:ve.keepDirtyValues?ve.keepDefaultValues&&s?vp(i,s):n.dirtyFields:ve.keepDefaultValues&&xe?vp(i,xe):ve.keepDirty?n.dirtyFields:{},touchedFields:ve.keepTouched?n.touchedFields:{},errors:ve.keepErrors?n.errors:{},isSubmitSuccessful:ve.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},wt=(xe,ve)=>ut(Qo(xe)?xe(s):xe,ve);return{control:{register:qe,unregister:Ne,getFieldState:ce,handleSubmit:Xe,setError:ye,_executeSchema:P,_getWatch:V,_getDirty:W,_updateValid:I,_removeUnmounted:F,_updateFieldArray:O,_updateDisabledField:ze,_getFieldArray:B,_reset:ut,_resetDefaultValues:()=>Qo(e.defaultValues)&&e.defaultValues().then(xe=>{wt(xe,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:xe=>{n={...n,...xe}},_disableForm:Ze,_subjects:h,_proxyFormState:p,_setErrors:A,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(xe){o=xe},get _defaultValues(){return i},get _names(){return l},set _names(xe){l=xe},get _formState(){return n},set _formState(xe){n=xe},get _options(){return e},set _options(xe){e={...e,...xe}}},trigger:oe,register:qe,handleSubmit:Xe,watch:_e,setValue:le,getValues:X,reset:wt,resetField:Ue,clearErrors:de,unregister:Ne,setError:ye,setFocus:(xe,ve={})=>{const ke=Et(r,xe),Ae=ke&&ke._f;if(Ae){const Ve=Ae.refs?Ae.refs[0]:Ae.ref;Ve.focus&&(Ve.focus(),ve.shouldSelect&&Qo(Ve.select)&&Ve.select())}},getFieldState:ce}}function Ci(t={}){const e=$n.useRef(void 0),n=$n.useRef(void 0),[r,i]=$n.useState({isDirty:!1,isValidating:!1,isLoading:Qo(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Qo(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...vie(t),formState:r});const s=e.current.control;return s._options=t,WN({subject:s._subjects.state,next:o=>{GL(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),$n.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),$n.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),$n.useEffect(()=>{t.values&&!ql(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),$n.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),$n.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),$n.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=KL(r,s),e.current}const o3=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Et(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},sM=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?o3(r.ref,n,t):r.refs&&r.refs.forEach(i=>o3(i,n,t))}},bie=(t,e)=>{e.shouldUseNativeValidation&&sM(t,e);const n={};for(const r in t){const i=Et(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(xie(e.names||Object.keys(t),r)){const o=Object.assign({},Et(n,r));zn(o,"root",s),zn(n,r,o)}else zn(n,r,s)}return n},xie=(t,e)=>t.some(n=>n.startsWith(e+"."));var _ie=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(p){return p.errors.forEach(function(h){return t.push(h)})}),e){var c=n[o].types,d=c&&c[r.code];n[o]=YL(o,e,n,i,d?[].concat(d,r.message):r.message)}t.shift()}return n},Ti=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return s.shouldUseNativeValidation&&sM({},s),{errors:{},values:n.raw?r:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l?.errors)}(o))return{values:{},errors:bie(_ie(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}};const wie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({name:U.string().min(1),cycles:U.number().int(),sort:U.number().int(),limit:U.number().int()})),shape:t,filter:e,sort:["id","name","cycles","sort","limit"]}),Sie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({blueprintId:U.string().min(1),conflictId:U.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","conflictId"]}),Eie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({blueprintId:U.string().min(1),dependencyId:U.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","dependencyId"]}),Nie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({blueprintId:U.string().min(1),inventoryId:U.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","inventoryId"]}),kie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({blueprintId:U.string().min(1),resourceId:U.string().min(1),amount:U.number(),cycles:U.number().int()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","cycles"]}),Iie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({blueprintProductionId:U.string().min(1),blueprintId:U.string().min(1)})),shape:t,filter:e,sort:["id","blueprintProductionId","blueprintId"]}),Cie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({blueprintProductionId:U.string().min(1),resourceId:U.string().min(1),amount:U.number(),passive:Ro()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount","passive"]}),Tie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({blueprintProductionId:U.string().min(1),resourceId:U.string().min(1),amount:U.number()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount"]}),Oie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({blueprintId:U.string().min(1),resourceId:U.string().min(1),amount:U.number(),passive:Ro()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","passive"]}),qie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({userId:U.string().min(1),blueprintId:U.string().min(1),x:U.number(),y:U.number()})),shape:t,filter:e,sort:["id","userId","blueprintId","x","y"]}),Rie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({resourceId:U.string().min(1),amount:U.number(),limit:U.number()})),shape:t,filter:e,sort:["id","resourceId","amount","limit"]}),jie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({resourceId:U.string().min(1),amount:U.number(),limit:U.number()})),shape:t,filter:e,sort:["id","resourceId","amount","limit"]}),Aie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({name:U.string().min(1)})),shape:t,filter:e,sort:["id","name"]}),Pie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({code:U.string().min(1),label:U.string().min(1),group:U.string().nullish(),sort:U.number().int()})),shape:t,filter:e,sort:["id","code","label","group","sort"]}),Fie=({shape:t,filter:e})=>Vi({entity:Wi.merge(U.object({name:U.string().min(1),login:U.string().min(1),password:U.string().min(1)})),shape:t,filter:e,sort:["id","name","login","password"]}),HN=wie({shape:U.object({name:U.string().min(1),cycles:Xp(),sort:Xp(),limit:Xp()}),filter:Ui.merge(U.object({name:U.string().optional()}))}),ob=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(HN.shape),defaultValues:{cycles:1,sort:0,limit:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"name",label:f.jsx(ee,{label:"Building name (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),f.jsx(In,{formState:s.formState,name:"cycles",label:f.jsx(ee,{label:"Construction cycles (label)"}),hint:f.jsx(ee,{label:"Amount of cycles to build this building (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,...s.register("cycles")})}),f.jsx(In,{formState:s.formState,name:"limit",label:f.jsx(ee,{label:"Building limit (label)"}),hint:f.jsx(ee,{label:"Maximum number of building a player can build (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,...s.register("limit")})}),f.jsx(In,{formState:s.formState,name:"sort",label:f.jsx(ee,{label:"Blueprint sort (label)"}),hint:f.jsx(ee,{label:"Sort blueprints by this number (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:0,...s.register("sort")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:On,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},Die=({id:t,data:e,isConnectable:n})=>{const{locale:r}=un({from:"/$locale"}),i=Jd();return f.jsxs("div",{className:"min-w-[14rem]",onClick:()=>{i({to:"/$locale/apps/derivean/root/editor",params:{locale:r},search:{zoomTo:t}})},onDoubleClick:()=>{i({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t}})},children:[f.jsx(oa,{type:"target",position:Lt.Left,className:"w-4 h-4"}),f.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[f.jsx("div",{className:"flex flex-row items-center gap-2",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t},children:e.name})}),f.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 border bg-slate-50 border-slate-200 rounded w-full p-1",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:[f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsx(Zt,{icon:Un,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:r,id:t}}),f.jsx(Zt,{icon:Ps,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:r,id:t}}),f.jsx(Zt,{icon:ED,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:r,id:t}})]}),f.jsx("div",{children:f.jsx(cf,{target:f.jsx(gm,{iconEnabled:Xr,css:{base:["text-red-500"]}}),outside:!0,textTitle:f.jsx(ee,{label:"Delete blueprint (modal)"}),css:{modal:["w-1/3"]},children:()=>{const s=Yn([["Editor"]]);return f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",e.id).execute()),textContent:f.jsx(ee,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:s})}})})]})]}),f.jsx(oa,{type:"source",position:Lt.Right,isConnectable:n,className:"w-4 h-4"})]})},Lie=({nodeId:t})=>{const{fitView:e}=mf();return K.useEffect(()=>{t&&setTimeout(()=>{e({nodes:[{id:t}],duration:750,minZoom:1,maxZoom:1})},50)},[t]),null},Mie=({data:t,zoomTo:e})=>{const n=Yn([]),r=Xt({async mutationFn({blueprintId:i,dependencyId:s}){return Ot.transaction().execute(async o=>o.insertInto("Blueprint_Dependency").values({id:Rn(),blueprintId:i,dependencyId:s}).execute())},async onSuccess(){await n()}});return f.jsx("div",{className:"w-fit h-fit mx-auto border border-slate-300 rounded-md shadow-md m-8",children:f.jsx("div",{style:{width:"95vw",height:"85vh"},children:f.jsxs(TL,{nodes:t.nodes,edges:t.edges,onConnect:i=>{r.mutate({blueprintId:i.target,dependencyId:i.source})},fitView:!0,snapGrid:[16,16],elementsSelectable:!1,nodeTypes:K.useMemo(()=>({blueprint(i){return f.jsx(Die,{...i})}}),[]),edgeTypes:K.useMemo(()=>({dependency({id:i,sourceX:s,sourceY:o,targetX:l,targetY:c,sourcePosition:d,targetPosition:p,style:h={},markerEnd:b}){const{setEdges:x}=mf(),[w,E,I]=TN({sourceX:s,sourceY:o,sourcePosition:d,targetX:l,targetY:c,targetPosition:p}),T=Yn([]),O=Xt({async mutationFn({id:q}){return Ot.transaction().execute(async A=>{await A.deleteFrom("Blueprint_Dependency").where("id","=",q).execute()})},async onSuccess(){x(q=>q.filter(A=>A.id!==i)),await T()}});return f.jsxs(f.Fragment,{children:[f.jsx(Sm,{path:w,markerEnd:b,style:h}),f.jsx(Ene,{children:f.jsx("div",{className:rr("nodrag nopan",["flex","items-center","justify-center","cursor-pointer","bg-red-200","text-red-500","border","border-red-300","hover:border-red-600","hover:bg-red-300","hover:text-red-700","rounded-full","w-4","h-4","z-20"]),style:{position:"absolute",pointerEvents:"all",transformOrigin:"center",transform:`translate(-50%, -50%) translate(${E}px,${I}px)`},children:f.jsx(rn,{icon:O.isPending?bK:fN,onClick:()=>{O.mutate({id:i})}})})})]})}}),[]),children:[f.jsx(Lie,{nodeId:e}),f.jsx(jL,{orientation:"horizontal",showInteractive:!1,showZoom:!1,children:f.jsx(cf,{target:f.jsx(gm,{className:"react-flow__controls-button",iconEnabled:On}),outside:!1,textTitle:f.jsx(ee,{label:"Create blueprint (modal)"}),css:{modal:["w-1/3"]},children:({close:i})=>{const s=Yn([["Editor"]]),{locale:o}=un({from:"/$locale"}),l=Jd();return f.jsx(ob,{mutation:Xt({async mutationFn(c){return Nn.promise(Ot.transaction().execute(d=>d.insertInto("Blueprint").values({id:Rn(),...c}).returningAll().executeTakeFirstOrThrow()),mr("Create blueprint"))},async onSuccess(c){await s(),l({to:"/$locale/apps/derivean/root/editor",params:{locale:o},search:{zoomTo:c.id}}),i()}})})}})}),f.jsx(PL,{}),f.jsx(qL,{variant:Xo.Dots,gap:12,size:1})]})})})},$ie=({graph:t,nodes:e,edges:n,size:r={width:344,height:36}})=>(t.setGraph({rankdir:"LR",nodesep:125,edgesep:65,ranksep:50}),e.forEach(i=>{t.setNode(i.id,{width:r.width,height:r.height})}),n.forEach(i=>{t.setEdge(i.source,i.target)}),WL.layout(t,{}),{nodes:e.map(i=>{const s=t.node(i.id);return{...i,targetPosition:"left",sourcePosition:"right",position:{x:s.x-r.width/2,y:s.y-r.height/2}}}),edges:n}),u1=Wt("/$locale/apps/derivean/root/editor")({validateSearch:Xn(U.object({zoomTo:U.string().optional()})),async loader({context:{kysely:t}}){const e=(await t.selectFrom("Blueprint").select(["id","name","cycles","sort"]).execute()).map(r=>({id:r.id,position:{x:0,y:0},data:r,type:"blueprint"})),n=(await t.selectFrom("Blueprint_Dependency").select(["id","blueprintId","dependencyId"]).execute()).map(({id:r,blueprintId:i,dependencyId:s})=>({id:r,source:s,target:i,type:"dependency"}));return $ie({graph:new WL.graphlib.Graph().setDefaultEdgeLabel(()=>({})),nodes:[...e],edges:[...n]})},component(){const t=u1.useLoaderData(),{zoomTo:e}=u1.useSearch();return f.jsx(Mie,{data:t,zoomTo:e})}}),c1=async({tx:t,userId:e})=>{const n=await t.selectFrom("Default_Inventory as di").select(["di.amount","di.resourceId","di.limit"]).limit(5e3).execute();await t.deleteFrom("User_Inventory").where("userId","=",e).execute();for await(const{amount:r,resourceId:i,limit:s}of n)t.insertInto("User_Inventory").values({id:Rn(),userId:e,inventoryId:(await t.insertInto("Inventory").values({id:Rn(),amount:r,resourceId:i,limit:s}).returning("id").executeTakeFirstOrThrow()).id}).execute()},Bie=async({tx:t,userId:e})=>{await c1({tx:t,userId:e})},zie=()=>Xt({mutationKey:["useRegisterMutation"],async mutationFn({login:t,name:e,password1:n}){return Ot.transaction().execute(async r=>{const i=ym.parse(await r.insertInto("User").values({id:Rn(),name:e,login:t,password:_F.hash(n)}).returning(["User.id","User.name","User.login"]).executeTakeFirstOrThrow());try{await Bie({tx:r,userId:i.id})}catch(s){console.error(s)}return i})}}),Wie=U.object({name:U.string().min(1),login:U.string().min(1),password1:U.string().min(1),password2:U.string().min(1)}).refine(t=>t.password1===t.password2,{message:"Passwords must match",path:["password1"]}),Uie=({onSuccess:t})=>{const e=zie(),n=Ci({resolver:Ti(Wie)}),r=Ii({isLoading:n.formState.isLoading,isSubmitting:n.formState.isSubmitting}).slots;return f.jsxs("form",{className:r.base(),onSubmit:n.handleSubmit(async i=>e.mutateAsync(i,{onSuccess:t,onError:s=>{Z1({error:s,errors:[T1({error:s,schema:G1,onError:({data:o})=>{n.setError("root",{message:o.message})}})],onError:o=>{n.setError("root",{message:o.message})}})}}).catch(()=>{})),children:[f.jsx(hi,{variant:{highlight:!0},error:n.formState.errors.root}),f.jsx(In,{formState:n.formState,name:"name",label:f.jsx(ee,{label:"Name (label)"}),children:f.jsx("input",{type:"text",className:r.input(),...n.register("name")})}),f.jsx(In,{formState:n.formState,name:"login",label:f.jsx(ee,{label:"Login (label)"}),children:f.jsx("input",{type:"text",className:r.input(),...n.register("login")})}),f.jsx(In,{formState:n.formState,name:"password1",label:f.jsx(ee,{label:"Password 1 (label)"}),children:f.jsx("input",{type:"password",className:r.input(),...n.register("password1")})}),f.jsx(In,{formState:n.formState,name:"password2",label:f.jsx(ee,{label:"Password 2 (label)"}),children:f.jsx("input",{type:"password",className:r.input(),...n.register("password2")})}),f.jsx(Cn,{iconEnabled:"icon-[mdi--register-outline]",iconDisabled:"icon-[mdi--register-outline]",type:"submit",children:f.jsx(ee,{label:"Register (submit)"})})]})},Vie=Wt("/$locale/apps/derivean/public/register")({component:()=>{const t=Jd();return f.jsx("div",{className:rr(["flex","justify-center","h-screen","bg-gradient-to-tr","from-blue-700","to-blue-400"]),children:f.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[f.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),f.jsx(Uie,{onSuccess:async e=>{df.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),Hie=Wt("/$locale/apps/derivean/public/logout")({pendingComponent(){return f.jsx("div",{className:rr(["flex items-center justify-center h-screen","bg-gradient-to-tr","from-blue-700","to-blue-400"]),children:f.jsx(UD,{icon:gN,textTitle:f.jsx(ee,{label:"Logout (label)"}),textMessage:f.jsx(ee,{label:"Logout in progress..."}),css:{base:["p-4","bg-slate-200","rounded"]}})})},async loader({params:{locale:t}}){throw df.remove("session"),Gh({to:"/$locale/apps/derivean/public/login",params:{locale:t}})}}),Qie=()=>Xt({mutationKey:["useLoginMutation"],async mutationFn({login:t,password:e}){return Ot.transaction().execute(async n=>{const r=await n.selectFrom("User as u").select(["u.id","u.login","u.name"]).where("u.login","=",t).where("u.password","=",_F.hash(e)).executeTakeFirstOrThrow();return{id:r.id,login:r.login,name:r.name}})}}),Kie=U.object({login:U.string().min(1),password:U.string().min(1)}),Gie=({onSuccess:t})=>{const{locale:e}=un({from:"/$locale"}),n=Qie(),r=Ci({resolver:Ti(Kie)}),i=Ii({isLoading:r.formState.isLoading,isSubmitting:r.formState.isSubmitting}).slots;return f.jsxs("form",{className:i.base(),onSubmit:r.handleSubmit(async s=>n.mutateAsync(s,{onSuccess:t,onError:o=>{Z1({error:o,errors:[T1({error:o,schema:G1,onError:({data:l})=>{r.setError("root",{message:l.message})}})],onError:l=>{r.setError("root",{message:l.message})}})}}).catch(()=>{})),children:[f.jsx(hi,{variant:{highlight:!0},error:r.formState.errors.root}),f.jsx(In,{formState:r.formState,name:"login",label:f.jsx(ee,{label:"Login (label)"}),children:f.jsx("input",{type:"text",className:i.input(),...r.register("login")})}),f.jsx(In,{formState:r.formState,name:"password",label:f.jsx(ee,{label:"Password (label)"}),children:f.jsx("input",{type:"password",className:i.input(),...r.register("password")})}),f.jsxs("div",{className:"flex flex-row justify-between gap-8",children:[f.jsx(Zt,{icon:"icon-[mdi--register-outline]",to:"/$locale/apps/derivean/public/register",params:{locale:e},children:f.jsx(ee,{label:"Register (link)"})}),f.jsx(Cn,{iconEnabled:"icon-[uiw--login]",iconDisabled:"icon-[uiw--login]",type:"submit",children:f.jsx(ee,{label:"Login (submit)"})})]})]})},Zie=Wt("/$locale/apps/derivean/public/login")({component:()=>{const t=Jd();return f.jsx("div",{className:rr(["flex","justify-center","h-screen","bg-gradient-to-tr","from-blue-700","to-blue-400"]),children:f.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[f.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),f.jsx(Gie,{onSuccess:async e=>{df.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),Jie=({inventory:t})=>f.jsxs("div",{className:rr(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:[f.jsx("div",{className:"font-bold",children:t.name}),t.limit>0?f.jsx(pf,{variant:{size:"md"},value:100*t.amount/t.limit}):null]}),Yie=yn({slot:{base:["flex","flex-col","gap-4","w-4/12","border-l-2","border-slate-200","shadow-sm","relative","max-h-screen"],title:["flex","flex-row","justify-between","items-center","px-4","py-4","shadow-md"],content:["flex","flex-col","gap-2","max-h-full","overflow-y-auto","px-4","mb-4"]},variant:{},defaults:{}}),cc=({icon:t,textTitle:e,textSubTitle:n,variant:r,tva:i=Yie,css:s,children:o})=>{const{locale:l}=un({from:"/$locale"}),c=i({...r,css:s}).slots;return f.jsxs("div",{className:c.base(),children:[f.jsxs("div",{className:c.title(),children:[f.jsxs("div",{className:"flex flex-col gap-2 font-bold",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(rn,{icon:t,css:{base:["text-slate-500"]}}),e]}),n?f.jsx("div",{className:"flex flex-row gap-2 items-center text-sm text-slate-500",children:n}):null]}),f.jsx(Zt,{icon:fN,to:"/$locale/apps/derivean/map",params:{locale:l}})]}),f.jsx("div",{className:c.content(),children:o})]})},oM=({inventory:t,fulltextProps:e,...n})=>f.jsxs(cc,{icon:ki,textTitle:f.jsx(ee,{label:"Inventory (label)"}),...n,children:[f.jsx(SD,{...e}),t.map(r=>f.jsx(Jie,{inventory:r},r.id))]}),My=Wt("/$locale/apps/derivean/map/inventory")({validateSearch:Xn(U.object({fulltext:U.string().optional()})),loaderDeps({search:{fulltext:t}}){return{fulltext:t}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{fulltext:r}}){const i=await n();return{inventory:await t.ensureQueryData({queryKey:["User_Inventory",i.id,{fulltext:r}],async queryFn(){return e.transaction().execute(async s=>cs({select:s.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.amount","i.limit","r.name"]).where("i.id","in",s.selectFrom("User_Inventory as ui").select("ui.inventoryId").where("ui.userId","=",i.id)).orderBy("r.name"),query({select:o,where:l}){let c=o;if(l?.fulltext){const d=`%${l.fulltext}%`.toLowerCase();c=c.where(p=>p.or([p("r.name","like",d)]))}return c},output:U.object({id:U.string().min(1),amount:U.number().nonnegative(),limit:U.number().nonnegative(),name:U.string().min(1)}),filter:{fulltext:r}}))}})}},component(){const{fulltext:t}=My.useSearch(),e=My.useNavigate(),{inventory:n}=My.useLoaderData();return f.jsx(oM,{inventory:n,fulltextProps:{value:t,onFulltext(r){e({search:{fulltext:r}})}}})}}),Xie=yn({slot:{base:["flex","flex-col","gap-2","rounded-md","bg-white","border","border-slate-300","p-2","hover:bg-slate-100","cursor-draggable"]},variant:{isDragging:{true:[]}},match:[{if:{isDragging:!0},then:{base:["cursor-grabbing","bg-slate-100"]}}],defaults:{isDragging:!1}}),ese=async({blueprintId:t,userId:e,x:n,y:r,plan:i,valid:s})=>Ot.transaction().execute(async o=>{const l=await o.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.resourceId","br.amount","br.passive","r.name"]).where("br.blueprintId","=",t).execute();for await(const{resourceId:p,amount:h,passive:b,name:x}of l){const w=await o.selectFrom("Inventory as i").select(["i.id","i.amount"]).where("i.resourceId","=",p).where("i.amount",">=",h).where("i.id","in",o.selectFrom("User_Inventory as ui").select("ui.inventoryId").where("ui.userId","=",e)).executeTakeFirstOrThrow(()=>new Error(`"Not enough resources [${x}]; required [${h}]`));b||await o.updateTable("Inventory").set({amount:w.amount-h}).where("id","=",w.id).execute()}const{count:c}=await o.selectFrom("Cycle as c").select(p=>p.fn.count("c.id").as("count")).executeTakeFirstOrThrow(),d=await o.selectFrom("Blueprint as b").select(["b.cycles"]).where("b.id","=",t).executeTakeFirstOrThrow();return o.insertInto("Construction").values({id:Rn(),blueprintId:t,userId:e,cycle:0,from:c,to:c+d.cycles,x:n,y:r,plan:i,valid:s}).returningAll().executeTakeFirstOrThrow()}),tse=({userId:t,entity:e,variant:n,tva:r=Xie,css:i})=>{const{locale:s}=un({from:"/$locale"}),o=Jd(),l=Yn([["GameMap"]]),c=Xt({async mutationFn({blueprintId:p}){const h=await ese({userId:t,blueprintId:p,x:0,y:0,plan:!0,valid:!1});o({to:"/$locale/apps/derivean/map/construction",params:{locale:s},search:{zoomToId:h.id}})},async onSuccess(){await l()},onError(p){console.error(p)}}),d=r({...n,css:i}).slots;return f.jsx("div",{className:d.base(),children:f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between",children:[f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsxs(hs,{children:["x",e.count]}),f.jsx("div",{className:"font-bold",children:e.name})]}),f.jsx("div",{className:"flex flex-row gap-2",children:f.jsx(Cn,{iconEnabled:eb,iconDisabled:eb,loading:c.isPending,onClick:()=>{c.mutate({blueprintId:e.id})}})})]})})},nse=({userId:t,blueprints:e,...n})=>f.jsx(cc,{icon:eb,textTitle:f.jsx(ee,{label:"Construction (label)"}),...n,children:e.map(r=>f.jsx(tse,{userId:t,entity:r},r.id))}),aM=Wt("/$locale/apps/derivean/map/construction")({async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{user:r,blueprints:await t.ensureQueryData({queryKey:["GameMap",r.id],async queryFn(){return e.transaction().execute(async i=>cs({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name",s=>s.selectFrom("Building as bg").select(o=>o.fn.count("bg.id").as("count")).whereRef("bg.blueprintId","=","bl.id").where("bg.userId","=",r.id).as("count")]).orderBy("bl.sort","asc"),output:U.object({id:U.string().min(1),name:U.string().min(1),count:U.number().int().nonnegative()})}))}})}},component(){const{user:t,blueprints:e}=aM.useLoaderData();return f.jsx(nse,{userId:t.id,blueprints:e})}}),ay=Ir(),rse=[ay({name:"name",header(){return f.jsx(ee,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),ay({name:"amount",header(){return f.jsx(ee,{label:"Amount (label)"})},render({value:t}){return wn({number:t})},size:18}),ay({name:"limit",header(){return f.jsx(ee,{label:"Inventory limit (label)"})},render({value:t}){return wn({number:t})},size:14}),ay({name:"storage",header(){return f.jsx(ee,{label:"Storage (label)"})},render({data:t}){return f.jsx(pf,{value:100*t.amount/t.limit})},size:24})],ise=({table:t,...e})=>f.jsx(Nr,{table:kr({...t,columns:rse}),...e}),QN=jie({shape:U.object({resourceId:U.string().min(1),amount:sa(),limit:sa()}),filter:Ui.merge(U.object({resourceId:U.string().optional()}))}),$y=Wt("/$locale/apps/derivean/game/inventory")({validateSearch:Xn(Er(QN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{kysely:t,session:e},deps:{filter:n,cursor:r}}){const i=await e();return t.transaction().execute(s=>sr({select:s.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").selectAll("i").select("r.name").where("i.id","in",s.selectFrom("User_Inventory as ui").select("ui.inventoryId").where("ui.userId","=",i.id)).orderBy("r.name"),query({select:o,where:l}){let c=o;if(l?.id&&(c=c.where("i.id","=",l.id)),l?.idIn&&(c=c.where("i.id","in",l.idIn)),l?.fulltext){const d=`%${l.fulltext}%`.toLowerCase();c=c.where(p=>p.or([p("i.id","like",`%${d}%`),p("r.id","like",`%${d}%`),p("r.name","like",`%${d}%`),p("r.id","in",p.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(h=>h.or([h("t.code","like",d),h("t.label","like",d),h("t.group","like",d)])))]))}return c},output:U.object({id:U.string().min(1),name:U.string().min(1),resourceId:U.string().min(1),amount:U.number().nonnegative(),limit:U.number().nonnegative()}),filter:n,cursor:r}))},component(){const{data:t,count:e}=$y.useLoaderData(),{filter:n,cursor:r}=$y.useSearch(),i=$y.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(ise,{table:{data:t,filter:{value:n,set:wr(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of items"}),..._r(i)}})})}}),lM=Wt("/$locale/apps/derivean/db/schema")({async loader({context:{kysely:t}}){return{tables:await t.introspection.getTables()}},component(){const{tables:t}=lM.useLoaderData(),e=({dataType:i,isNullable:s})=>{const o=i.toLowerCase();let l=`z.never({message: '${i}'})`;switch(o){case"integer":{l="z.number().int()";break}case"float4":{l="z.number()";break}case"datetime":{l="z.string()";break}case"boolean":{l="withBoolSchema()";break}}return o.startsWith("varchar")&&(l=`z.string()${s?"":".min(1)"}`),`
// ${i} / ${s?"nullable":"not nullable"}
${l}${s?".nullish()":""}
`},n=t.map(i=>{const s=i.name.replaceAll("_","");return`
export const with${s}Schema = <
    TShapeSchema extends ShapeSchema,
    TFilterSchema extends FilterSchema,
>({
    shape,
    filter,
}: {
    shape: TShapeSchema;
    filter: TFilterSchema;
}) => {
    return withSourceSchema({
        entity: IdentitySchema.merge(z.object({
                ${i.columns.filter(({name:o})=>o!=="id").map(o=>`
    "${o.name}": ${e(o)}
        `.trim()).join(`,
			`)},
        })),
        shape,
        filter,
        sort: [${i.columns.map(o=>`"${o.name}"`).join(", ")}],
    });
}

export type ${s}Entity = ReturnType<typeof with${s}Schema>['~entity'];
            `.trim()}),r=t.map(i=>{const s=i.name.replaceAll("_","");return`${i.name}: ${s}Entity;`});return f.jsxs("pre",{children:[`
import {
    IdentitySchema,
    withSourceSchema,
    type FilterSchema,
    type ShapeSchema,
    withBoolSchema,
} from "@use-pico/common";
import { z } from "zod";
            `.trim(),`

${n.join(`

`)}`,`

export interface Database {
    ${r.join(`
	`)}
}
                `]})}}),a3=Ir(),sse=[a3({name:"name",header(){return f.jsx(ee,{label:"User name (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsx(Zt,{to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:e})},size:14}),a3({name:"login",header(){return f.jsx(ee,{label:"User login (label)"})},render({value:t}){return t},size:14})],ose=({table:t,...e})=>{const n=Yn([["Management"],["User_Inventory"]]),r=Xt({async mutationFn({userId:o}){return Ot.transaction().execute(l=>c1({tx:l,userId:o}))},async onSuccess(){await n()}}),i=Xt({async mutationFn({userId:o}){return Ot.transaction().execute(async l=>{await c1({tx:l,userId:o}),await l.deleteFrom("Building").where("userId","=",o).execute(),await l.deleteFrom("Production").where("userId","=",o).execute(),await l.deleteFrom("Construction").where("userId","=",o).execute(),await l.deleteFrom("Cycle").where("userId","=",o).execute()})},async onSuccess(){await n()}}),s=Xt({async mutationFn({userId:o}){return Ot.transaction().execute(async l=>{await l.updateTable("Inventory").set({amount:1e3}).where("id","in",l.selectFrom("User_Inventory").select("inventoryId").where("userId","=",o)).execute()})},async onSuccess(){await n()}});return f.jsx(Nr,{table:kr({...t,columns:sse}),action:{row({data:o}){return f.jsxs(Hn,{children:[f.jsx(Iy,{icon:ki,onClick:()=>{r.mutateAsync({userId:o.id})},children:f.jsx(ee,{label:"Apply default inventory (menu)"})}),f.jsx(Iy,{icon:xN,onClick:()=>{s.mutateAsync({userId:o.id})},children:f.jsx(ee,{label:"Cheat inventory (menu)"})}),f.jsx(Iy,{icon:Xr,onClick:()=>{i.mutateAsync({userId:o.id})},children:f.jsx(ee,{label:"Reset game (menu)"})})]})}},...e})},ase=Fie({shape:U.object({name:U.string().min(1),login:U.string().min(1),password:U.string().min(1)}),filter:Ui.merge(U.object({login:U.string().optional(),password:U.string().optional()}))}),By=Wt("/$locale/apps/derivean/root/user/list")({validateSearch:Xn(Er(ase)),loaderDeps({search:{filter:t,cursor:e}}){return{filter:t,cursor:e}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["User","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>sr({select:i.selectFrom("User as u").select(["u.id","u.name","u.login"]),output:U.object({id:U.string().min(1),name:U.string().min(1),login:U.string().min(1)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=By.useLoaderData(),{filter:n,cursor:r,selection:i}=By.useSearch(),s=By.useNavigate(),{tva:o}=ir({from:"__root__"}),l=o().slots;return f.jsx("div",{className:l.base(),children:f.jsx(ose,{table:{data:t,filter:{value:n,set:wr(s)},selection:{type:"multi",value:i,set:Hi(s)}},fulltext:{value:n?.fulltext,set:Sr(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of users (label)"}),..._r(s)}})})}}),lse=({entity:t,...e})=>{const{locale:n}=un({from:"/$locale"});return f.jsxs(eu,{...e,children:[f.jsx(Fn,{icon:yN,to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"View detail (menu)"})}),f.jsx(Fn,{icon:Ua,to:"/$locale/apps/derivean/root/user/$id/building/list",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Building list (menu)"})}),f.jsx(Fn,{icon:ki,to:"/$locale/apps/derivean/root/user/$id/inventory",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Inventory (menu)"})})]})},use=t=>{const{locale:e}=un({from:"/$locale"});return f.jsx(ff,{title:({entity:n})=>f.jsx(hf,{icon:yN,title:n.name}),actions:()=>f.jsx(f.Fragment,{children:f.jsx(Zt,{icon:Vb,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},children:f.jsx(ee,{label:"User list (label)"})})}),...t})},uM=Wt("/$locale/apps/derivean/root/user/$id")({async loader({context:{kysely:t},params:{id:e}}){return t.transaction().execute(async n=>({entity:await tu({select:n.selectFrom("User as u").select(["u.id","u.name"]).where("u.id","=",e),output:U.object({id:U.string().min(1),name:U.string().min(1)})})}))},component(){const{tva:t}=ir({from:"__root__"}),{entity:e}=uM.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(use,{entity:e}),f.jsx(lse,{entity:e}),f.jsx(oo,{})]})}}),Nm=Pie({shape:U.object({code:U.string().min(1),label:U.string().min(1),group:U.string().nullish(),sort:Xp()}),filter:Ui.merge(U.object({code:U.string().optional(),group:U.string().optional()}))}),l3=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(Nm.shape),defaultValues:{sort:0,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"code",label:f.jsx(ee,{label:"Tag code (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("code")})}),f.jsx(In,{formState:s.formState,name:"label",label:f.jsx(ee,{label:"Tag label (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("label")})}),f.jsx(In,{formState:s.formState,name:"group",label:f.jsx(ee,{label:"Tag group (label)"}),children:f.jsx("input",{type:"text",className:o.input(),...s.register("group")})}),f.jsx(In,{formState:s.formState,name:"sort",label:f.jsx(ee,{label:"Tag sort (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("sort")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:jh,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},jS=Ir(),cse=[jS({name:"label",header(){return f.jsx(ee,{label:"Tag label (label)"})},render({value:t}){return t},size:14}),jS({name:"code",header(){return f.jsx(ee,{label:"Tag code (label)"})},render({value:t}){return t},size:14}),jS({name:"group",header(){return f.jsx(ee,{label:"Tag group (label)"})},render({value:t}){return t},filter:{path:"group",onFilter({data:t,filter:e}){e.shallow("group",t.group)}},size:24})],cM=({group:t,table:e,...n})=>{const r=Yn([["Tag"],["Resource"]]);return f.jsx(Nr,{table:kr({...e,columns:cse}),action:{table(){return f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create tag (menu)"}),textTitle:f.jsx(ee,{label:"Create tag (modal)"}),icon:jh,children:f.jsx(l3,{defaultValues:{group:t},mutation:Xt({async mutationFn(i){return Nn.promise(Ot.transaction().execute(s=>s.insertInto("Tag").values({id:Rn(),...i}).returningAll().executeTakeFirstOrThrow()),mr("Create tag"))},async onSuccess(){await r()}})})})})},row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit tag (modal)"}),icon:jh,children:f.jsx(l3,{defaultValues:{group:t,...i},mutation:Xt({async mutationFn(s){return Nn.promise(Ot.transaction().execute(o=>o.updateTable("Tag").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),mr("Edit tag"))},async onSuccess(){await r()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete tag (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>{await Ot.transaction().execute(s=>s.deleteFrom("Tag").where("id","=",i.id).execute())},textContent:f.jsx(ee,{label:"Tag delete (content)"}),textToast:"Tag delete",invalidator:r})})]})}},...n})},zy=Wt("/$locale/apps/derivean/root/tag/list")({validateSearch:Xn(Er(Nm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Tag","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async i=>sr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]).orderBy("t.sort","desc"),output:U.object({id:U.string().min(1),code:U.string().min(1),label:U.string().min(1),group:U.string().nullish(),sort:U.number().int().nonnegative()}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=zy.useLoaderData(),{filter:n,cursor:r,selection:i}=zy.useSearch(),s=zy.useNavigate(),{tva:o}=ir({from:"__root__"}),l=o().slots;return f.jsx("div",{className:l.base(),children:f.jsx(cM,{table:{data:t,filter:{value:n,set:wr(s)},selection:{type:"multi",value:i,set:Hi(s)}},fulltext:{value:n?.fulltext,set:Sr(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of items"}),..._r(s)}})})}}),dse=({group:t,...e})=>f.jsx(MG,{icon:jh,table:n=>f.jsx(cM,{group:t,...n}),render:({entities:n})=>f.jsx(VD,{tags:n}),queryKey:"Tag",query:async({filter:n,cursor:r})=>Ot.transaction().execute(async i=>sr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]),output:Nm.entity,query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("t.id","=",o.id)),o?.idIn&&(l=l.where("t.id","in",o.idIn)),o?.fulltext){const c=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("t.code","like",c),d("t.group","like",c),d("t.label","like",c),d("t.id","like",c)]))}return l},filter:n,cursor:r})),...e}),dM=Aie({shape:U.object({name:U.string().min(1),tagIds:U.array(U.string()).optional()}),filter:Ui.merge(U.object({name:U.string().optional()}))}),u3=({group:t="resource",mutation:e,defaultValues:n,variant:r,tva:i=Ii,css:s})=>{const o=Ci({resolver:Ti(dM.shape),defaultValues:n}),l=i({...r,isLoading:o.formState.isLoading,isSubmitting:o.formState.isSubmitting,css:s}).slots;return f.jsxs("form",{className:l.base(),onSubmit:ys({form:o,mutation:e}),children:[f.jsx(hi,{variant:{highlight:!0},error:o.formState.errors.root}),f.jsx(In,{formState:o.formState,name:"name",label:f.jsx(ee,{label:"Resource name (label)"}),children:f.jsx("input",{type:"text",className:l.input(),...o.register("name")})}),f.jsx(In,{formState:o.formState,name:"tagIds",label:f.jsx(ee,{label:"Resource tags (label)"}),children:f.jsx(ms,{control:o.control,name:"tagIds",render:({field:{ref:c,...d}})=>f.jsx(dse,{group:t,textTitle:f.jsx(ee,{label:"Select resource tags (title)"}),textSelect:f.jsx(ee,{label:"Select resource tags (label)"}),allowEmpty:!0,...d})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:Un,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},xp=Ir(),fse=[xp({name:"name",header(){return f.jsx(ee,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsx(Zt,{to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),xp({name:"countProduction",header(){return f.jsx(ee,{label:"Resource production count (label)"})},render({value:t}){return f.jsx(hs,{css:{base:t!==void 0&&t===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:wn({number:t})})},size:12}),xp({name:"countRequirement",header(){return f.jsx(ee,{label:"Resource requirement count (label)"})},render({data:t,value:e}){return f.jsx(hs,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:wn({number:e})})},size:12}),xp({name:"countProductionRequirement",header(){return f.jsx(ee,{label:"Resource production requirement count (label)"})},render({data:t,value:e}){return f.jsx(hs,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:wn({number:e})})},size:18}),xp({name:"tags",header(){return f.jsx(ee,{label:"Resource tags (label)"})},render({value:t}){return f.jsx(VD,{tags:t})},size:32})],fM=({group:t,table:e,...n})=>{const r=Yn([["Resource"],["Resource_Tag"]]);return f.jsx(Nr,{table:kr({...e,columns:fse}),action:{table(){return f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create resource (menu)"}),textTitle:f.jsx(ee,{label:"Create resource (modal)"}),icon:Un,children:({close:i})=>f.jsx(u3,{group:t,mutation:Xt({async mutationFn({name:s,tagIds:o=[]}){return Nn.promise(Ot.transaction().execute(async l=>{const c=await l.insertInto("Resource").values({id:Rn(),name:s}).returningAll().executeTakeFirstOrThrow();return o.length&&await l.insertInto("Resource_Tag").values(o.map(d=>({id:Rn(),resourceId:c.id,tagId:d}))).execute(),c}),mr("Create resource"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit resource (modal)"}),icon:Un,children:({close:s})=>f.jsx(u3,{defaultValues:{...i,tagIds:i.tags.map(({id:o})=>o)},mutation:Xt({async mutationFn({tagIds:o,...l}){return Nn.promise(Ot.transaction().execute(async c=>{const d=await c.updateTable("Resource").set(l).where("id","=",i.id).returningAll().executeTakeFirstOrThrow();return await c.deleteFrom("Resource_Tag").where("resourceId","=",d.id).execute(),o?.length&&await c.insertInto("Resource_Tag").values(o.map(p=>({id:Rn(),resourceId:d.id,tagId:p}))).execute(),d}),mr("Update resource"))},async onSuccess(){await r(),s()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete resource (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Resource").where("id","=",i.id).execute()),textContent:f.jsx(ee,{label:"Resource delete (content)"}),textToast:"Resource delete",invalidator:r})})]})}},...n})},Wy=Wt("/$locale/apps/derivean/root/resource/list")({validateSearch:Xn(Er(dM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Resource","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>sr({select:i.selectFrom("Resource as r").select(["r.id","r.name",s=>s.selectFrom("Tag as t").select(o=>Pr`json_group_array(json_object(
                                            'id', ${o.ref("t.id")},
                                            'code', ${o.ref("t.code")},
                                            'group', ${o.ref("t.group")},
                                            'sort', ${o.ref("t.sort")},
                                            'label', ${o.ref("t.label")}
                                        ))`.as("tags")).where("t.id","in",s.selectFrom("Resource_Tag as rt").select("rt.tagId").whereRef("rt.resourceId","=","r.id")).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const c=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("r.id","like",c),d("r.name","like",c),d("r.id","in",d.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",c),p("t.label","like",c),p("t.group","like",c)])))]))}return l},output:U.object({id:U.string().min(1),name:U.string().min(1),countRequirement:U.number().nonnegative(),countProduction:U.number().nonnegative(),countProductionRequirement:U.number().nonnegative(),tags:Bi(Nm.entity)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=Wy.useLoaderData(),{filter:n,cursor:r,selection:i}=Wy.useSearch(),s=Wy.useNavigate(),{tva:o}=ir({from:"__root__"}),l=o().slots;return f.jsx("div",{className:l.base(),children:f.jsx(fM,{table:{data:t,filter:{value:n,set:wr(s)},selection:{type:"multi",value:i,set:Hi(s)}},fulltext:{value:n?.fulltext,set:Sr(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of items"}),..._r(s)}})})}}),pse=({entity:t,...e})=>{const{locale:n}=un({from:"/$locale"});return f.jsx(eu,{...e,children:f.jsx(Fn,{icon:Un,to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"View detail (menu)"})})})},hse=t=>{const{locale:e}=un({from:"/$locale"});return f.jsx(ff,{title:({entity:n})=>f.jsx(hf,{icon:Un,title:n.name}),actions:()=>f.jsx(f.Fragment,{children:f.jsx(Zt,{icon:Vb,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:f.jsx(ee,{label:"Resource list (label)"})})}),...t})},pM=Wt("/$locale/apps/derivean/root/resource/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Resource",n],async queryFn(){return e.transaction().execute(async r=>({entity:await tu({select:r.selectFrom("Resource as r").select(["r.id","r.name"]).where("r.id","=",n),output:U.object({id:U.string().min(1),name:U.string().min(1)})})}))}})},component:()=>{const{tva:t}=ir({from:"__root__"}),{entity:e}=pM.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(hse,{entity:e}),f.jsx(pse,{entity:e}),f.jsx(oo,{})]})}}),gf=({group:t,...e})=>f.jsx(WD,{icon:Un,textTitle:f.jsx(ee,{label:"Select resource (title)"}),textSelect:f.jsx(ee,{label:"Select resource (label)"}),table:n=>f.jsx(fM,{group:t,...n}),render:({entity:n})=>n.name,queryKey:"Resource",query:async({filter:n,cursor:r})=>Ot.transaction().execute(async i=>sr({select:i.selectFrom("Resource as r").select(["r.id","r.name",s=>s.selectFrom("Tag as t").select(o=>Pr`json_group_array(json_object(
                                                'id', ${o.ref("t.id")},
                                                'code', ${o.ref("t.code")},
                                                'group', ${o.ref("t.group")},
                                                'sort', ${o.ref("t.sort")},
                                                'label', ${o.ref("t.label")}
                                            ))`.as("tags")).where("t.id","in",i.selectFrom("Resource_Tag as rt").select("rt.tagId").where("rt.resourceId","=",s.ref("r.id"))).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("r.id","=",o.id)),o?.fulltext){const c=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("r.id","like",c),d("r.name","like",c),d("r.id","in",d.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",c),p("t.label","like",c),p("t.group","like",c)])))]))}return l},output:U.object({id:U.string().min(1),name:U.string().min(1),tags:Bi(Nm.entity),countRequirement:U.number().nonnegative(),countProduction:U.number().nonnegative(),countProductionRequirement:U.number().nonnegative()}),filter:n,cursor:r})),...e}),hM=Rie({shape:U.object({resourceId:U.string().min(1),amount:sa(),limit:sa()}),filter:Ui}),c3=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(hM.shape),defaultValues:{amount:0,limit:0,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"resourceId",label:f.jsx(ee,{label:"Resource name (label)"}),children:f.jsx(ms,{control:s.control,name:"resourceId",render:({field:{ref:l,...c}})=>f.jsx(gf,{textTitle:f.jsx(ee,{label:"Select resource (title)"}),allowEmpty:!0,...c})})}),f.jsx(In,{formState:s.formState,name:"amount",label:f.jsx(ee,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(In,{formState:s.formState,name:"limit",label:f.jsx(ee,{label:"Limit (label)"}),hint:f.jsx(ee,{label:"Inventory limit (hint)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("limit")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:ki,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},AS=Ir(),mse=[AS({name:"name",header(){return f.jsx(ee,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),AS({name:"amount",header(){return f.jsx(ee,{label:"Amount (label)"})},render({value:t}){return wn({number:t})},size:12}),AS({name:"limit",header(){return f.jsx(ee,{label:"Inventory limit (label)"})},render({value:t,data:e}){return f.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[f.jsx("div",{children:wn({number:t})}),f.jsx(pf,{value:100*e.amount/e.limit})]})},size:14})],gse=({table:t,...e})=>{const n=Yn([["Default_Inventory"]]),r=Xt({async mutationFn(){return Ot.transaction().execute(async i=>{const s=await i.selectFrom("Resource as r").select(["r.id"]).where("r.id","not in",i.selectFrom("Default_Inventory").select("resourceId")).execute();return i.insertInto("Default_Inventory").values(s.map(({id:o})=>({id:Rn(),amount:0,limit:0,resourceId:o}))).execute()})},async onSuccess(){await n()}});return f.jsx(Nr,{table:kr({...t,columns:mse}),action:{table(){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Create inventory item (menu)"}),textTitle:f.jsx(ee,{label:"Create inventory item (modal)"}),icon:ki,children:f.jsx(c3,{mutation:Xt({async mutationFn(i){return Nn.promise(Ot.transaction().execute(async s=>s.insertInto("Default_Inventory").values({id:Rn(),...i}).returningAll().executeTakeFirstOrThrow()),mr("Create inventory item"))},async onSuccess(){await n()}})})}),f.jsx(Iy,{icon:Un,onClick:()=>{r.mutate()},children:f.jsx(ee,{label:"Fill missing resources (label)"})})]})},row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit inventory item (modal)"}),icon:ki,children:f.jsx(c3,{defaultValues:i,mutation:Xt({async mutationFn(s){return Nn.promise(Ot.transaction().execute(async o=>o.updateTable("Default_Inventory").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),mr("Update inventory item"))},async onSuccess(){await n()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Default_Inventory").where("id","=",i.id).execute()),textContent:f.jsx(ee,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:n})})]})}},...e})},Uy=Wt("/$locale/apps/derivean/root/default/inventory")({validateSearch:Xn(Er(hM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Default_Inventory","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>sr({select:i.selectFrom("Default_Inventory as di").innerJoin("Resource as r","r.id","di.resourceId").select(["di.id","r.name","di.amount","di.limit","di.resourceId"]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("di.id","=",o.id)),o?.idIn&&(l=l.where("di.id","in",o.idIn)),o?.fulltext){const c=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("di.id","like",`%${c}%`),d("r.id","like",`%${c}%`),d("r.name","like",`%${c}%`),d("r.id","in",d.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",c),p("t.label","like",c),p("t.group","like",c)])))]))}return l},output:U.object({id:U.string().min(1),name:U.string().min(1),resourceId:U.string().min(1),amount:U.number().nonnegative(),limit:U.number().int().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Uy.useLoaderData(),{filter:n,cursor:r,selection:i}=Uy.useSearch(),s=Uy.useNavigate(),{tva:o}=ir({from:"__root__"}),l=o().slots;return f.jsx("div",{className:l.base(),children:f.jsx(gse,{table:{data:t,filter:{value:n,set:wr(s)},selection:{type:"multi",value:i,set:Hi(s)}},fulltext:{value:n?.fulltext,set:Sr(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of items"}),..._r(s)}})})}}),yse=yn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2","bg-sky-100","border-sky-300","text-sky-500"]},variant:{missing:{true:[]}},match:[{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{missing:!1}}),mM=({dependencies:t,variant:e,tva:n=yse,css:r,...i})=>{const s=n({...e,css:r}).slots;return f.jsx(Wd,{items:t,render:({entity:o})=>f.jsx("div",{className:s.item(),children:f.jsx("div",{children:o.name})}),...i})};var ly={},d3;function vse(){if(d3)return ly;d3=1;function t(r,i,s,o){var l=new Set;return function(c){if(!l.has(c)){var d=new Set,p=[],h=[];for(h.push({node:c,processed:!1});h.length>0;){var b=h[h.length-1],x=b.processed,w=b.node;if(x)h.pop(),p.pop(),d.delete(w),l.add(w),(!i||r.get(w).length===0)&&s.push(w);else{if(l.has(w)){h.pop();continue}else if(d.has(w)){if(o){h.pop();continue}throw p.push(w),new n(p)}d.add(w),p.push(w);for(var E=r.get(w),I=E.length-1;I>=0;I--)h.push({node:E[I],processed:!1});b.processed=!0}}}}}var e=ly.DepGraph=function(i){this.nodes=new Map,this.outgoingEdges=new Map,this.incomingEdges=new Map,this.circular=i&&!!i.circular};e.prototype={size:function(){return this.nodes.size},addNode:function(r,i){this.hasNode(r)||(arguments.length===2?this.nodes.set(r,i):this.nodes.set(r,r),this.outgoingEdges.set(r,[]),this.incomingEdges.set(r,[]))},removeNode:function(r){this.hasNode(r)&&(this.nodes.delete(r),this.outgoingEdges.delete(r),this.incomingEdges.delete(r),[this.incomingEdges,this.outgoingEdges].forEach(function(i){i.forEach(function(s){var o=s.indexOf(r);o>=0&&s.splice(o,1)})}))},hasNode:function(r){return this.nodes.has(r)},getNodeData:function(r){if(this.hasNode(r))return this.nodes.get(r);throw new Error("Node does not exist: "+r)},setNodeData:function(r,i){if(this.hasNode(r))this.nodes.set(r,i);else throw new Error("Node does not exist: "+r)},addDependency:function(r,i){if(!this.hasNode(r))throw new Error("Node does not exist: "+r);if(!this.hasNode(i))throw new Error("Node does not exist: "+i);return this.outgoingEdges.get(r).indexOf(i)===-1&&this.outgoingEdges.get(r).push(i),this.incomingEdges.get(i).indexOf(r)===-1&&this.incomingEdges.get(i).push(r),!0},removeDependency:function(r,i){var s;this.hasNode(r)&&(s=this.outgoingEdges.get(r).indexOf(i),s>=0&&this.outgoingEdges.get(r).splice(s,1)),this.hasNode(i)&&(s=this.incomingEdges.get(i).indexOf(r),s>=0&&this.incomingEdges.get(i).splice(s,1))},clone:function(){var r=this,i=new e;return r.nodes.forEach(function(s,o){i.nodes.set(o,s),i.outgoingEdges.set(o,r.outgoingEdges.get(o).slice(0)),i.incomingEdges.set(o,r.incomingEdges.get(o).slice(0))}),i.circular=r.circular,i},directDependenciesOf:function(r){if(this.hasNode(r))return this.outgoingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},directDependantsOf:function(r){if(this.hasNode(r))return this.incomingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},dependenciesOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.outgoingEdges,i,s,this.circular);o(r);var l=s.indexOf(r);return l>=0&&s.splice(l,1),s}else throw new Error("Node does not exist: "+r)},dependantsOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.incomingEdges,i,s,this.circular);o(r);var l=s.indexOf(r);return l>=0&&s.splice(l,1),s}else throw new Error("Node does not exist: "+r)},overallOrder:function(r){var i=this,s=[],o=Array.from(this.nodes.keys());if(o.length===0)return s;if(!this.circular){var l=t(this.outgoingEdges,!1,[],this.circular);o.forEach(function(d){l(d)})}var c=t(this.outgoingEdges,r,s,this.circular);return o.filter(function(d){return i.incomingEdges.get(d).length===0}).forEach(function(d){c(d)}),this.circular&&o.filter(function(d){return s.indexOf(d)===-1}).forEach(function(d){c(d)}),s},entryNodes:function(){var r=this;return Array.from(this.nodes.keys()).filter(function(i){return r.incomingEdges.get(i).length===0})}},e.prototype.directDependentsOf=e.prototype.directDependantsOf,e.prototype.dependentsOf=e.prototype.dependantsOf;var n=ly.DepGraphCycleError=function(r){var i="Dependency Cycle Found: "+r.join(" -> "),s=new Error(i);return s.cyclePath=r,Object.setPrototypeOf(s,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(s,n),s};return n.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(n,Error),ly}var gM=vse();const km=async({tx:t})=>{const e=new gM.DepGraph({circular:!1});for await(const{id:n,name:r}of await t.selectFrom("Blueprint").select(["id","name"]).execute())e.addNode(n,r);for await(const{blueprintId:n,dependencyId:r}of await t.selectFrom("Blueprint_Dependency").select(["blueprintId","dependencyId"]).execute())e.addDependency(n,r);return e},Qh=async({tx:t})=>{const e=km({tx:t}),n=await t.selectFrom("Blueprint as bl").select(["bl.id"]).execute();for await(const r of n){const i=(await e).dependenciesOf(r.id);await t.updateTable("Blueprint").set({sort:i.length}).where("id","=",r.id).execute()}},bse=yn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]},variant:{passive:{true:[]},missing:{true:[]}},match:[{if:{passive:!0},then:{item:["bg-purple-100","border-purple-300","text-purple-500"]}},{if:{passive:!1},then:{item:["bg-sky-100","border-sky-300","text-sky-500"]}},{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{passive:!1,missing:!1}}),Im=({requirements:t,diff:e,variant:n,tva:r=bse,css:i,...s})=>{const o=r({...n,css:i}).slots;return f.jsx(Wd,{items:t,render:({entity:l})=>{const c=e?.find(p=>p.resourceId===l.resourceId),d=c?.amount?c.amount-l.amount:-l.amount;return f.jsxs("div",{className:o.item({css:!e||d>=0?[]:["text-red-700","bg-red-100","border-red-300"],passive:l.passive}),children:[f.jsx("div",{children:l.name}),f.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",wn({number:l.amount})]}),e?d>=0?f.jsx(rn,{icon:"icon-[pajamas--check-sm]",css:{base:["text-emerald-600"]}}):f.jsxs("div",{className:"flex flex-row gao-2 items-center text-sm text-red-500",children:[f.jsx(rn,{icon:"icon-[charm--cross]",css:{base:["text-red-500"]}}),"(",wn({number:d}),")"]}):null]})},...s})},_p=Ir(),xse=[_p({name:"name",header(){return f.jsx(ee,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(Zt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:n},search:{zoomTo:t.id}}),f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),_p({name:"dependencies",header(){return f.jsx(ee,{label:"Blueprint dependencies (label)"})},render({value:t}){return t.length>0?f.jsxs("div",{className:"flex flex-col flex-wrap gap-2 w-full",children:[f.jsx(mM,{textTitle:f.jsx(ee,{label:"Blueprint dependencies (title)"}),dependencies:t}),f.jsx("div",{className:"border-b border-slate-200"})]}):f.jsx(ee,{label:"No dependencies (label)"})},size:32}),_p({name:"requirements",header(){return f.jsx(ee,{label:"Required resources (label)"})},render({value:t}){return f.jsx(Im,{textTitle:f.jsx(ee,{label:"Blueprint requirements (title)"}),textEmpty:f.jsx(ee,{label:"No requirements (label)"}),requirements:t})},size:32}),_p({name:"cycles",header(){return f.jsx(ee,{label:"Construction cycles (label)"})},render({value:t}){return f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx(rn,{icon:Hh}),wn({number:t})]})},size:8}),_p({name:"limit",header(){return f.jsx(ee,{label:"Building limit (label)"})},render({value:t}){return wn({number:t})},size:8})],yM=({dependencies:t,table:e,...n})=>{const r=Yn([["Blueprint"],["Inventory"]]);return f.jsx(Nr,{table:kr({...e,columns:xse,context:{dependencies:t}}),action:{table(){return f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create blueprint (menu)"}),textTitle:f.jsx(ee,{label:"Create blueprint (modal)"}),icon:On,children:({close:i})=>f.jsx(ob,{mutation:Xt({async mutationFn(s){return Nn.promise(Ot.transaction().execute(async o=>{const l=o.insertInto("Blueprint").values({id:Rn(),...s}).returningAll().executeTakeFirstOrThrow();return await Qh({tx:o}),l}),mr("Create blueprint"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit blueprint (modal)"}),icon:On,children:({close:s})=>f.jsx(ob,{defaultValues:i,mutation:Xt({async mutationFn(o){return Nn.promise(Ot.transaction().execute(async l=>{const c=l.updateTable("Blueprint").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow();return await Qh({tx:l}),c}),mr("Update blueprint"))},async onSuccess(){await r(),s()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete blueprint (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Blueprint").where("id","=",i.id).execute()),textContent:f.jsx(ee,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:r})})]})}},...n})},nu=Eie({shape:U.object({dependencyId:U.string().min(1)}),filter:Ui.merge(U.object({blueprintId:U.string().optional(),dependencyId:U.string().optional()}))}),yf=Oie({shape:U.object({resourceId:U.string().min(1),amount:sa(),passive:U.boolean()}),filter:Ui.merge(U.object({blueprintId:U.string().optional(),resourceId:U.string().optional()}))}),Vy=Wt("/$locale/apps/derivean/root/blueprint/list")({validateSearch:Xn(Er(HN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles","bl.limit",o=>o.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("br.id")},
                                                'amount', ${l.ref("br.amount")},
                                                'passive', ${l.ref("br.passive")},
                                                'resourceId', ${l.ref("br.resourceId")},
                                                'blueprintId', ${l.ref("br.blueprintId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),o=>o.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(l=>Pr`json_group_array(json_object(
                                                        'id', ${l.ref("bd.id")},
                                                        'dependencyId', ${l.ref("bd.dependencyId")},
                                                        'blueprintId', ${l.ref("bd.blueprintId")},
                                                        'name', ${l.ref("bl2.name")}
                                                    ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:o,where:l}){let c=o;if(l?.id&&(c=c.where("bl.id","=",l.id)),l?.fulltext){const d=`%${l.fulltext}%`.toLowerCase();c=c.where(p=>p.or([p("bl.id","like",d),p("bl.name","like",d)]))}return c},output:U.object({id:U.string().min(1),name:U.string().min(1),cycles:U.number().nonnegative(),sort:U.number().nonnegative(),limit:U.number().nonnegative(),requirements:Bi(yf.entity.merge(U.object({name:U.string().min(1)}))),dependencies:Bi(nu.entity.merge(U.object({name:U.string().min(1)})))}),filter:n,cursor:r}))}}),dependencies:await e.transaction().execute(async s=>km({tx:s}))}},component(){const{data:{data:t,count:e},dependencies:n}=Vy.useLoaderData(),{filter:r,cursor:i,selection:s}=Vy.useSearch(),o=Vy.useNavigate(),{tva:l}=ir({from:"__root__"}),c=l().slots;return f.jsx("div",{className:c.base(),children:f.jsx(yM,{dependencies:n,table:{data:t,filter:{value:r,set:wr(o)},selection:{type:"multi",value:s,set:Hi(o)}},fulltext:{value:r?.fulltext,set:Sr(o)},cursor:{count:e,cursor:i,textTotal:f.jsx(ee,{label:"Number of blueprints"}),..._r(o)}})})}}),_se=({entity:t,...e})=>{const{locale:n}=un({from:"/$locale"});return f.jsxs(eu,{...e,children:[f.jsx(Fn,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"View detail (menu)"})}),f.jsx(Fn,{icon:Ua,to:"/$locale/apps/derivean/root/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Blueprint dependencies (menu)"})}),f.jsx(Fn,{icon:Un,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Required resources (menu)"})}),f.jsx(Fn,{icon:Ps,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Resource production (menu)"})}),f.jsx(Fn,{icon:ki,to:"/$locale/apps/derivean/root/blueprint/$id/inventory",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Blueprint inventory (menu)"})}),f.jsx(Fn,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Blueprint conflicts (menu)"})}),f.jsx(Fn,{icon:ED,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Edit (menu)"})})]})},wse=t=>{const{locale:e}=un({from:"/$locale"});return f.jsx(ff,{title:({entity:n})=>f.jsx(hf,{icon:On,title:n.name}),actions:({entity:n})=>f.jsxs(f.Fragment,{children:[f.jsx(Zt,{icon:Vb,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},children:f.jsx(ee,{label:"Blueprint list (label)"})}),f.jsx(Zt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},search:{zoomTo:n.id},children:f.jsx(ee,{label:"Editor (label)"})})]}),...t})},vM=Wt("/$locale/apps/derivean/root/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>tu({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",s=>s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(o=>Pr`json_group_array(json_object(
                                                  'id', ${o.ref("br.id")},
                                                  'amount', ${o.ref("br.amount")},
                                                  'passive', ${o.ref("br.passive")},
                                                  'resourceId', ${o.ref("br.resourceId")},
                                                  'blueprintId', ${o.ref("br.blueprintId")},
                                                  'name', ${o.ref("r.name")}
                                              ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),s=>s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(o=>Pr`json_group_array(json_object(
                                                          'id', ${o.ref("bd.id")},
                                                          'dependencyId', ${o.ref("bd.dependencyId")},
                                                          'blueprintId', ${o.ref("bd.blueprintId")},
                                                          'name', ${o.ref("bl2.name")}
                                                      ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const c=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("bl.id","like",c),d("bl.name","like",c),d("bl.id","in",d.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",c)]))),d("bl.id","in",d.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",c)])))]))}return l},output:U.object({id:U.string().min(1),name:U.string().min(1),cycles:U.number().nonnegative(),sort:U.number().nonnegative(),requirements:Bi(yf.entity.merge(U.object({name:U.string().min(1)}))),dependencies:Bi(nu.entity.merge(U.object({name:U.string().min(1)})))})}))}}),graph:await e.transaction().execute(async i=>km({tx:i}))}},component(){const{tva:t}=ir({from:"__root__"}),{entity:e}=vM.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(wse,{entity:e}),f.jsx(_se,{entity:e}),f.jsx(oo,{})]})}}),Sse=Wt("/$locale/apps/derivean/map/route/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{route:await t.ensureQueryData({queryKey:["GameMap","route",n],async queryFn(){return e.transaction().execute(async r=>tu({select:r.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Blueprint as blf","blf.id","bf.blueprintId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blf.name as fromName","blt.name as toName"]).where("r.id","=",n),output:U.object({id:U.string().min(1),fromId:U.string().min(1),toId:U.string().min(1),fromName:U.string().min(1),toName:U.string().min(1)})}))}})}}}),Ese=Wt("/$locale/apps/derivean/map/building/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{building:await t.ensureQueryData({queryKey:["GameMap","building",n],async queryFn(){return e.transaction().execute(async r=>tu({select:r.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name"]).where("b.id","=",n),output:U.object({id:U.string().min(1),name:U.string().min(1)})}))}})}}}),Nse=U.object({id:U.string().min(1),blueprintProductionId:U.string().min(1),blueprintId:U.string().min(1),name:U.string().min(1),resource:U.string().min(1),amount:U.number().nonnegative(),count:U.number().nonnegative(),limit:U.number().nonnegative(),priority:U.number(),paused:Ro(),requirements:Bi(U.object({id:U.string().min(1),amount:U.number().nonnegative(),passive:Ro(),resourceId:U.string().min(1),name:U.string().min(1)}))}),kse=({entity:t})=>{const{locale:e}=un({from:"/$locale"}),n=Yn([["Management"]]),r=Xt({async mutationFn({id:l,priority:c}){return Ot.transaction().execute(async d=>d.updateTable("Production_Queue").set({priority:c}).where("id","=",l).execute())},async onSuccess(){await n()}}),i=Xt({async mutationFn({id:l,limit:c}){return Ot.transaction().execute(async d=>d.updateTable("Production_Queue").set({limit:c}).where("id","=",l).execute())},async onSuccess(){await n()}}),s=Xt({async mutationFn({id:l,paused:c}){return Ot.transaction().execute(async d=>d.updateTable("Production_Queue").set({paused:c}).where("id","=",l).execute())},async onSuccess(){await n()}}),o=Xt({async mutationFn(){return Ot.transaction().execute(async l=>l.deleteFrom("Production_Queue").where("id","=",t.id).execute())},async onSuccess(){await n()}});return f.jsxs("div",{className:rr("flex flex-row items-center justify-between border border-slate-300 p-2 rounded-md hover:bg-slate-50 hover:border-slate-500",t.paused?["bg-slate-100","hover:bg-slate-200"]:void 0),children:[f.jsxs("div",{className:"flex flex-row gap-6",children:[f.jsxs("div",{className:"flex flex-row items-center gap-2 font-bold",children:[f.jsx(Cn,{iconEnabled:t.paused?"icon-[lucide--play]":"icon-[solar--pause-outline]",loading:i.isPending,onClick:()=>{s.mutate({id:t.id,paused:!t.paused})},variant:{variant:"subtle"}}),f.jsx(Zt,{icon:Ua,to:"/$locale/apps/derivean/game",params:{locale:e},search:{blueprintId:t.blueprintId},children:t.name})]}),f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx(rn,{icon:Un,css:{base:["text-slate-400"]}}),f.jsx("div",{children:t.resource}),f.jsxs(hs,{children:["x",wn({number:t.amount})]})]}),f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx(rn,{icon:"icon-[fluent--text-word-count-20-regular]",css:{base:["text-slate-400"]}}),f.jsxs(hs,{children:[wn({number:t.count}),t.limit>0?` / ${wn({number:t.limit})}`:null]})]}),f.jsxs("div",{className:"flex flex-row items-center gap-2 font-bold",children:[f.jsx(rn,{icon:"icon-[material-symbols-light--low-priority-rounded]",css:{base:["text-slate-400"]}}),f.jsx(hs,{children:wn({number:t.priority})})]})]}),f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(Im,{requirements:t.requirements}),f.jsx(Cn,{iconEnabled:"icon-[ph--minus-fill]",iconDisabled:"icon-[ph--minus-fill]",loading:i.isPending,disabled:t.limit===0,onClick:()=>{i.mutate({id:t.id,limit:Math.max(0,t.limit-1)})}}),f.jsx(Cn,{iconEnabled:"icon-[ph--plus-fill]",loading:i.isPending,onClick:()=>{i.mutate({id:t.id,limit:t.limit+1})}}),f.jsx(Cn,{iconEnabled:"icon-[bx--down-arrow]",iconDisabled:"icon-[bx--down-arrow]",loading:r.isPending,disabled:t.priority===0,onClick:()=>{r.mutate({id:t.id,priority:t.priority-5})}}),f.jsx(Cn,{iconEnabled:"icon-[bx--up-arrow]",loading:r.isPending,onClick:()=>{r.mutate({id:t.id,priority:t.priority+5})}}),f.jsx(Cn,{iconEnabled:Xr,loading:o.isPending,variant:{variant:"danger"},onClick:()=>{o.mutate()}})]})]})},bM=Wt("/$locale/apps/derivean/game/production/queue")({async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{data:await t.ensureQueryData({queryKey:["Management","Production-Queue",r.id],queryFn:async()=>cs({select:e.selectFrom("Production_Queue as pq").innerJoin("Blueprint_Production as bp","bp.id","pq.blueprintProductionId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["pq.id","pq.blueprintProductionId","bl.name","bl.id as blueprintId","r.name as resource","bp.amount","pq.priority","pq.count","pq.limit","pq.paused",s=>s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r2","r2.id","bpr.resourceId").select([o=>xF.jsonGroupArray({id:o.ref("bpr.id"),amount:o.ref("bpr.amount"),passive:o.ref("bpr.passive"),name:o.ref("r2.name"),blueprintId:o.ref("bp.id"),resourceId:o.ref("bpr.resourceId")}).as("requirements")]).whereRef("bpr.blueprintProductionId","=","pq.blueprintProductionId").as("requirements")]).where("userId","=",r.id).orderBy("priority","desc"),output:Nse})})}},component(){const{data:t}=bM.useLoaderData();return f.jsx("div",{className:"flex flex-col gap-2",children:t.map(e=>f.jsx(kse,{entity:e},e.id))})}}),f3=Ir(),Ise=[f3({name:"name",header(){return f.jsx(ee,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(Zt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/game",params:{locale:n},search:{blueprintId:t.id}}),f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),f3({name:"cycles",header(){return f.jsx(ee,{label:"Construction cycles (label)"})},render({value:t}){return f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx(rn,{icon:Hh}),wn({number:t})]})},size:8})],Cse=({table:t,...e})=>f.jsx(Nr,{table:kr({...t,columns:Ise}),...e}),Hy=Wt("/$locale/apps/derivean/game/blueprint/list")({validateSearch:Xn(Er(HN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{filter:r,cursor:i}}){const s=await n();return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:r,cursor:i}],async queryFn(){return e.transaction().execute(async l=>sr({select:l.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","in",l.selectFrom("Building as bg").select("bg.blueprintId").where("bg.userId","=",s.id)).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:c,where:d}){let p=c;if(d?.id&&(p=p.where("bl.id","=",d.id)),d?.fulltext){const h=`%${d.fulltext}%`.toLowerCase();p=p.where(b=>b.or([b("bl.id","like",h),b("bl.name","like",h)]))}return p},output:U.object({id:U.string().min(1),name:U.string().min(1),cycles:U.number().nonnegative()}),filter:r,cursor:i}))}})}},component(){const{data:{data:t,count:e}}=Hy.useLoaderData(),{filter:n,cursor:r}=Hy.useSearch(),i=Hy.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Cse,{table:{data:t,filter:{value:n,set:wr(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of blueprints"}),..._r(i)}})})}}),Tse=({entity:t,...e})=>{const{locale:n}=un({from:"/$locale"});return f.jsxs(eu,{...e,children:[f.jsx(Fn,{icon:On,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"View detail (menu)"})}),f.jsx(Fn,{icon:Ua,to:"/$locale/apps/derivean/game/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Blueprint dependencies (menu)"})}),f.jsx(Fn,{icon:Un,to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Required resources (menu)"})}),f.jsx(Fn,{icon:Ps,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Resource production (menu)"})}),f.jsx(Fn,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Blueprint conflicts (menu)"})})]})},Ose=t=>{const{locale:e}=un({from:"/$locale"});return f.jsx(ff,{title:({entity:n})=>f.jsx(hf,{icon:On,title:n.name}),actions:()=>f.jsx(f.Fragment,{children:f.jsx(Zt,{icon:Vb,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:e},children:f.jsx(ee,{label:"Blueprint list (label)"})})}),...t})},xM=Wt("/$locale/apps/derivean/game/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>tu({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const c=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("bl.id","like",c),d("bl.name","like",c),d("bl.id","in",d.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",c)]))),d("bl.id","in",d.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",c)])))]))}return l},output:U.object({id:U.string().min(1),name:U.string().min(1),cycles:U.number().nonnegative()})}))}}),graph:await e.transaction().execute(async i=>km({tx:i}))}},component(){const{tva:t}=ir({from:"__root__"}),{entity:e}=xM.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(Ose,{entity:e}),f.jsx(Tse,{entity:e}),f.jsx(oo,{})]})}}),qse=Wt("/$locale/apps/derivean/root/user/$id/view")({component:()=>"yep"}),ab=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(QN.shape),defaultValues:{amount:0,limit:0,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"resourceId",label:f.jsx(ee,{label:"Resource name (label)"}),children:f.jsx(ms,{control:s.control,name:"resourceId",render:({field:{ref:l,...c}})=>f.jsx(gf,{textTitle:f.jsx(ee,{label:"Select resource (title)"}),allowEmpty:!0,...c})})}),f.jsx(In,{formState:s.formState,name:"amount",label:f.jsx(ee,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(In,{formState:s.formState,name:"limit",label:f.jsx(ee,{label:"Inventory limit (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("limit")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:ki,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},PS=Ir(),Rse=[PS({name:"name",header(){return f.jsx(ee,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),PS({name:"amount",header(){return f.jsx(ee,{label:"Amount (label)"})},render({value:t}){return wn({number:t})},size:12}),PS({name:"limit",header(){return f.jsx(ee,{label:"Inventory limit (label)"})},render({value:t,data:e}){return f.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[f.jsx("div",{children:wn({number:t})}),f.jsx(pf,{value:100*e.amount/e.limit})]})},size:14})],jse=({onCreate:t,table:e,...n})=>{const r=Yn([["Inventory"],["User_Inventory"],["Building_Base_Production"]]);return f.jsx(Nr,{table:kr({...e,columns:Rse}),action:{table:t?()=>f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create inventory item (menu)"}),textTitle:f.jsx(ee,{label:"Create inventory item (modal)"}),icon:ki,children:f.jsx(ab,{mutation:Xt({async mutationFn(i){return Nn.promise(Ot.transaction().execute(async s=>{const o=await s.insertInto("Inventory").values({id:Rn(),...i}).returningAll().executeTakeFirstOrThrow();return await t?.({tx:s,entity:o}),o}),mr("Create inventory item"))},async onSuccess(){await r()}})})})}):void 0,row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit inventory item (modal)"}),icon:ki,children:f.jsx(ab,{defaultValues:i,mutation:Xt({async mutationFn(s){return Nn.promise(Ot.transaction().execute(async o=>o.updateTable("Inventory").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),mr("Update inventory item"))},async onSuccess(){await r()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Inventory").where("id","=",i.id).execute()),textContent:f.jsx(ee,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:r})})]})}},...n})},Rp=Wt("/$locale/apps/derivean/root/user/$id/inventory")({validateSearch:Xn(Er(QN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Inventory","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>sr({select:s.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","r.name","i.amount","i.limit"]).where("i.id","in",s.selectFrom("User_Inventory as ui").where("ui.userId","=",i).select("ui.inventoryId")).orderBy("r.name","asc"),query({select:o,where:l}){let c=o;if(l?.id&&(c=c.where("i.id","=",l.id)),l?.idIn&&(c=c.where("i.id","in",l.idIn)),l?.fulltext){const d=`%${l.fulltext}%`.toLowerCase();c=c.where(p=>p.or([p("i.id","like",`%${d}%`),p("r.id","like",`%${d}%`),p("r.name","like",`%${d}%`),p("r.id","in",p.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(h=>h.or([h("t.code","like",d),h("t.label","like",d),h("t.group","like",d)])))]))}return c},output:U.object({id:U.string().min(1),resourceId:U.string().min(1),name:U.string().min(1),amount:U.number().nonnegative(),limit:U.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Rp.useLoaderData(),{filter:n,cursor:r,selection:i}=Rp.useSearch(),s=Rp.useNavigate(),{id:o}=Rp.useParams(),{tva:l}=ir({from:"__root__"}),c=l().slots;return f.jsx("div",{className:c.base(),children:f.jsx(jse,{onCreate:async({tx:d,entity:p})=>d.insertInto("User_Inventory").values({id:Rn(),userId:o,inventoryId:p.id}).execute(),table:{data:t,filter:{value:n,set:wr(s)},selection:{type:"multi",value:i,set:Hi(s)}},fulltext:{value:n?.fulltext,set:Sr(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of items"}),..._r(s)}})})}}),Ase=Wt("/$locale/apps/derivean/root/resource/$id/view")({component:()=>f.jsx("div",{children:'Hello "/$locale/apps/derivean/root/resource/$id/view/"!'})}),_M="icon-[carbon--document-requirements]",Pse=({entity:t,...e})=>{const{locale:n}=un({from:"/$locale"});return f.jsxs(eu,{...e,children:[f.jsx(Fn,{icon:_M,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Production requirements (menu)"})}),f.jsx(Fn,{icon:Un,to:"/$locale/apps/derivean/root/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Production resource requirements (menu)"})}),f.jsx(Fn,{icon:On,to:"/$locale/apps/derivean/root/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Production resource dependencies (menu)"})})]})},Fse=t=>{const{locale:e}=un({from:"/$locale"});return f.jsx(ff,{title:({entity:n})=>f.jsx(hf,{icon:Ps,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>f.jsx(f.Fragment,{children:f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:f.jsx(ee,{label:"Building base detail (label)"})})}),...t})},wM=Wt("/$locale/apps/derivean/root/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await tu({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:U.object({id:U.string().min(1),resource:U.string().min(1),blueprint:U.string().min(1),blueprintId:U.string().min(1),amount:U.number().nonnegative(),cycles:U.number().int().nonnegative()})})}))}})},component(){const{entity:t}=wM.useLoaderData(),{tva:e}=ir({from:"__root__"}),n=e().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(Fse,{entity:t}),f.jsx(Pse,{entity:t}),f.jsx(oo,{})]})}}),Dse=({graph:t,blueprintId:e,mode:n="dependencies",reverse:r=!1})=>{try{const i=(s=>r?s.reverse():s)(n==="dependants"?t.dependantsOf(e):t.dependenciesOf(e));return f.jsxs("div",{className:rr(["flex","flex-row","flex-wrap","gap-2","items-center"]),children:[i.length>0?f.jsx(rn,{css:{base:["text-emerald-500"]},icon:"icon-[charm--circle-tick]"}):f.jsx(rn,{css:{base:["text-amber-500"]},icon:"icon-[fe--question]"}),i.length>0?i.map(s=>f.jsx(hs,{css:{base:["bg-emerald-200","text-emerald-700","border-emerald-500"]},children:t.getNodeData(s)},Rn())):f.jsx(ee,{css:{base:["text-amber-500","font-bold"]},label:"No dependents (label)"})]})}catch(i){return i instanceof gM.DepGraphCycleError?f.jsxs("div",{className:rr(["flex","flex-row","gap-2","items-center"]),children:[f.jsx(rn,{css:{base:["text-red-500"]},icon:"icon-[charm--circle-cross]"}),i.cyclePath.map(s=>f.jsx(hs,{css:{base:["bg-red-200","text-red-700","border-red-500"]},children:t.getNodeData(s)},Rn()))]}):"kaboom"}},Lse=({dependencies:t,...e})=>f.jsx(vD,{items:[{id:"name",label:f.jsx(ee,{label:"Building name (label)"}),render({entity:n}){return n.name}},{id:"cycles",label:f.jsx(ee,{label:"Construction cycles (label)"}),render({entity:n}){return wn({number:n.cycles})}},{id:"requirements",label:f.jsx(ee,{label:"Required resources (label)"}),render({entity:n}){return f.jsx(Im,{requirements:n.requirements,textEmpty:f.jsx(ee,{label:"No requirements (label)"})})}},{id:"dependencies",label:f.jsx(ee,{label:"Blueprint dependencies (label)"}),render({entity:n}){return f.jsx(mM,{dependencies:n.dependencies,textEmpty:f.jsx(ee,{label:"No dependencies (label)"})})}},{id:"deps",label:f.jsx(ee,{label:"Blueprint dependency graph (label)"}),render({entity:n}){return f.jsx(Dse,{graph:t,blueprintId:n.id})}}],...e}),SM=Wt("/$locale/apps/derivean/root/blueprint/$id/view")({async loader({context:{kysely:t}}){return{dependencies:await t.transaction().execute(async e=>km({tx:e}))}},component(){const{dependencies:t}=SM.useLoaderData(),{entity:e}=so({from:"/$locale/apps/derivean/root/blueprint/$id"});return f.jsx("div",{className:"w-1/2 mx-auto",children:f.jsx(Lse,{dependencies:t,entity:e})})}}),p3=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(yf.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"resourceId",label:f.jsx(ee,{label:"Requirement (label)"}),children:f.jsx(ms,{control:s.control,name:"resourceId",render:({field:{ref:l,...c}})=>f.jsx(gf,{allowEmpty:!0,...c})})}),f.jsx(In,{formState:s.formState,name:"amount",label:f.jsx(ee,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(In,{formState:s.formState,name:"passive",label:f.jsx(ee,{label:"Passive requirement (label)"}),hint:f.jsx(ee,{label:"Passive requirement (hint)"}),children:f.jsx(ms,{control:s.control,name:"passive",render:({field:{ref:l,...c}})=>f.jsx(yD,{...c})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:Un,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},FS=Ir(),Mse=[FS({name:"name",header(){return f.jsx(ee,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),FS({name:"amount",header(){return f.jsx(ee,{label:"Amount (label)"})},render({value:t}){return wn({number:t})},size:10}),FS({name:"passive",header(){return f.jsx(ee,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx(Ub,{value:t})},size:10})],$se=({blueprintId:t,table:e,...n})=>{const r=Yn([["Blueprint"],["Blueprint_Requirement"],["Blueprint_Resource_Requirement"],["Resource"]]);return f.jsx(Nr,{table:kr({...e,columns:Mse}),action:{table(){return f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create requirement item (menu)"}),textTitle:f.jsx(ee,{label:"Create requirement item (modal)"}),icon:Un,children:f.jsx(p3,{mutation:Xt({async mutationFn(i){return Ot.transaction().execute(async s=>s.insertInto("Blueprint_Requirement").values({id:Rn(),...i,blueprintId:t}).execute())},async onSuccess(){await r()}})})})})},row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit requirement item (modal)"}),icon:Un,children:f.jsx(p3,{defaultValues:i,mutation:Xt({async mutationFn(s){return Ot.transaction().execute(async o=>o.updateTable("Blueprint_Requirement").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete requirement item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Blueprint_Requirement").where("id","=",i.id).execute()),textContent:f.jsx(ee,{label:"Delete requirement item (content)"}),textToast:"Delete requirement item",invalidator:r})})]})}},...n})},jp=Wt("/$locale/apps/derivean/root/blueprint/$id/requirements")({validateSearch:Xn(Er(yf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let c=o;return l?.id&&(c=c.where("br.id","=",l.id)),l?.idIn&&(c=c.where("br.id","in",l.idIn)),l?.resourceId&&(c=c.where("br.resourceId","=",l.resourceId)),c},output:U.object({id:U.string().min(1),name:U.string().min(1),resourceId:U.string().min(1),amount:U.number().nonnegative(),passive:Ro()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=jp.useLoaderData(),{filter:n,cursor:r,selection:i}=jp.useSearch(),{id:s}=jp.useParams(),o=jp.useNavigate(),{tva:l}=ir({from:"__root__"}),c=l().slots;return f.jsx("div",{className:c.base(),children:f.jsx($se,{blueprintId:s,table:{data:t,filter:{value:n,set:wr(o)},selection:{type:"multi",value:i,set:Hi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of requirements (label)"}),..._r(o)}})})}}),KN=kie({shape:U.object({resourceId:U.string().min(1),amount:sa(),cycles:Xp()}),filter:Ui.merge(U.object({blueprintId:U.string().optional(),resourceId:U.string().optional()}))}),h3=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(KN.shape),defaultValues:{amount:1,cycles:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"resourceId",label:f.jsx(ee,{label:"Resource name (label)"}),children:f.jsx(ms,{control:s.control,name:"resourceId",render:({field:{ref:l,...c}})=>f.jsx(gf,{textTitle:f.jsx(ee,{label:"Select resource (title)"}),allowEmpty:!0,...c})})}),f.jsx(In,{formState:s.formState,name:"amount",label:f.jsx(ee,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(In,{formState:s.formState,name:"cycles",label:f.jsx(ee,{label:"Production cycles (label)"}),hint:f.jsx(ee,{label:"Production cycles (hint)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("cycles")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:Ps,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},Cm=t=>f.jsx(WD,{icon:On,textTitle:f.jsx(ee,{label:"Select blueprint (title)"}),table:({table:e,...n})=>f.jsx(yM,{table:{...e,hidden:["requirements","dependencies"]},...n}),render:({entity:e})=>e.name,queryKey:"Blueprint",query:async({filter:e,cursor:n})=>Ot.transaction().execute(async r=>sr({select:r.selectFrom("Blueprint as b").select(["b.id","b.name","b.sort","b.cycles","b.limit",i=>i.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(s=>Pr`json_group_array(json_object(
                                                    'id', ${s.ref("br.id")},
                                                    'amount', ${s.ref("br.amount")},
                                                    'passive', ${s.ref("br.passive")},
                                                    'resourceId', ${s.ref("br.resourceId")},
                                                    'blueprintId', ${s.ref("br.blueprintId")},
                                                    'name', ${s.ref("r.name")}
                                                ))`.as("requirements")).whereRef("br.blueprintId","=","b.id").as("requirements"),i=>i.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.blueprintId").select(s=>Pr`json_group_array(json_object(
                                                    'id', ${s.ref("bd.id")},
                                                    'dependencyId', ${s.ref("bd.dependencyId")},
                                                    'blueprintId', ${s.ref("bd.blueprintId")},
                                                    'name', ${s.ref("b.name")}
                                                ))`.as("requirements")).whereRef("bd.blueprintId","=","b.id").as("dependencies")]).orderBy("b.name","asc"),query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("b.id","=",s.id)),s?.fulltext){const l=`%${s.fulltext}%`.toLowerCase();o=o.where(c=>c.or([c("b.id","like",l),c("b.name","like",l)]))}return o},output:U.object({id:U.string().min(1),name:U.string().min(1),cycles:U.number().nonnegative(),sort:U.number().nonnegative(),limit:U.number().nonnegative(),requirements:Bi(yf.entity.merge(U.object({name:U.string().min(1)}))),dependencies:Bi(nu.entity.merge(U.object({name:U.string().min(1)})))}),filter:e,cursor:n})),...t}),Bse=U.object({blueprintId:U.string().min(1)}),zse=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(Bse),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"blueprintId",label:f.jsx(ee,{label:"Target blueprint (label)"}),children:f.jsx(ms,{control:s.control,name:"blueprintId",render:({field:{ref:l,...c}})=>f.jsx(Cm,{allowEmpty:!0,...c})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:On,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},Yc=Ir(),Wse=[Yc({name:"name",header(){return f.jsx(ee,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsx(Zt,{icon:Ps,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),Yc({name:"amount",header(){return f.jsx(ee,{label:"Amount (label)"})},render({value:t}){return wn({number:t})},size:8}),Yc({name:"cycles",header(){return f.jsx(ee,{label:"Production cycles (label)"})},render({value:t}){return wn({number:t})},size:8}),Yc({name:"requirements",header(){return f.jsx(ee,{label:"Required resources (label)"})},render({value:t}){return f.jsx(Im,{textTitle:f.jsx(ee,{label:"Resource requirements (title)"}),textEmpty:f.jsx(ee,{label:"No requirements (label)"}),requirements:t})},size:32}),Yc({name:"resources",header(){return f.jsx(ee,{label:"Required production resources (label)"})},render({value:t}){return f.jsx(Wd,{items:t,render:({entity:e})=>f.jsxs("div",{className:rr(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]),children:[f.jsx("div",{children:e.name}),f.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",wn({number:e.amount})]})]})})},size:32}),Yc({name:"dependencies",header(){return f.jsx(ee,{label:"Required production dependencies (label)"})},render({value:t}){return f.jsx(Wd,{items:t,render:({entity:e})=>f.jsx("div",{className:rr(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]),children:f.jsx("div",{children:e.name})})})},size:32})],Use=({blueprintId:t,table:e,...n})=>{const r=Yn([["Blueprint"],["Blueprint_Production"],["Blueprint_Production_Requirement"],["Resource"]]);return f.jsx(Nr,{table:kr({...e,columns:Wse}),action:{table(){return f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create blueprint production (menu)"}),textTitle:f.jsx(ee,{label:"Create blueprint production (modal)"}),icon:Ps,children:({close:i})=>f.jsx(h3,{mutation:Xt({async mutationFn(s){return Ot.transaction().execute(async o=>await o.insertInto("Blueprint_Production").values({id:Rn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit blueprint production (modal)"}),icon:Ps,children:f.jsx(h3,{defaultValues:i,mutation:Xt({async mutationFn(s){return Ot.transaction().execute(async o=>o.updateTable("Blueprint_Production").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),f.jsx(gn,{label:f.jsx(ee,{label:"Move production to (menu)"}),textTitle:f.jsx(ee,{label:"Move production to (modal)"}),icon:Un,children:({close:s})=>f.jsx(zse,{mutation:Xt({async mutationFn(o){return Ot.transaction().execute(async l=>{await l.updateTable("Blueprint_Production").set({blueprintId:o.blueprintId}).where("id","=",i.id).execute()})},async onSuccess(){await r(),s()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete blueprint production (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Blueprint_Production").where("id","=",i.id).execute()),textContent:f.jsx(ee,{label:"Delete blueprint production (content)"}),textToast:"Delete blueprint production",invalidator:r})})]})}},...n})},Tm=Iie({shape:U.object({blueprintId:U.string().min(1)}),filter:Ui}),Om=Cie({shape:U.object({resourceId:U.string().min(1),amount:sa(),passive:U.boolean()}),filter:Ui.merge(U.object({blueprintProductionId:U.string().optional(),resourceId:U.string().optional()}))}),qm=Tie({shape:U.object({resourceId:U.string().min(1),amount:sa()}),filter:Ui.merge(U.object({resourceId:U.string().optional()}))}),Ap=Wt("/$locale/apps/derivean/root/blueprint/$id/production")({validateSearch:Xn(Er(KN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'passive', ${l.ref("bpr.passive")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("bpd.id")},
                                                'blueprintProductionId', ${l.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${l.ref("bpd.blueprintId")},
                                                'name', ${l.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:U.object({id:U.string().min(1),name:U.string().min(1),blueprintId:U.string().min(1),resourceId:U.string().min(1),amount:U.number().nonnegative(),cycles:U.number().nonnegative(),requirements:Bi(Om.entity.merge(U.object({name:U.string().min(1)}))),resources:Bi(qm.entity.merge(U.object({name:U.string().min(1)}))),dependencies:Bi(Tm.entity.merge(U.object({name:U.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Ap.useLoaderData(),{filter:n,cursor:r,selection:i}=Ap.useSearch(),{id:s}=Ap.useParams(),o=Ap.useNavigate(),{tva:l}=ir({from:"__root__"}),c=l().slots;return f.jsx("div",{className:c.base(),children:f.jsx(Use,{blueprintId:s,table:{data:t,filter:{value:n,set:wr(o)},selection:{type:"multi",value:i,set:Hi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of productions (label)"}),..._r(o)}})})}}),DS=Ir(),Vse=[DS({name:"name",header(){return f.jsx(ee,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),DS({name:"amount",header(){return f.jsx(ee,{label:"Amount (label)"})},render({value:t}){return wn({number:t})},size:12}),DS({name:"limit",header(){return f.jsx(ee,{label:"Inventory limit (label)"})},render({value:t,data:e}){return f.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[f.jsx("div",{children:wn({number:t})}),f.jsx(pf,{value:100*e.amount/e.limit})]})},size:14})],Hse=({blueprintId:t,table:e,...n})=>{const r=Yn([["Blueprint_Inventory"]]);return f.jsx(Nr,{table:kr({...e,columns:Vse}),action:{table(){return f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create inventory item (menu)"}),textTitle:f.jsx(ee,{label:"Create inventory item (modal)"}),icon:ki,children:f.jsx(ab,{mutation:Xt({async mutationFn(i){return Nn.promise(Ot.transaction().execute(async s=>s.insertInto("Blueprint_Inventory").values({id:Rn(),blueprintId:t,inventoryId:(await s.insertInto("Inventory").values({id:Rn(),...i}).returningAll().executeTakeFirstOrThrow()).id}).returningAll().executeTakeFirstOrThrow()),mr("Create inventory item"))},async onSuccess(){await r()}})})})})},row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit inventory item (modal)"}),icon:ki,children:f.jsx(ab,{defaultValues:i,mutation:Xt({async mutationFn(s){return Nn.promise(Ot.transaction().execute(async o=>o.updateTable("Inventory").set(s).where("id","=",i.inventoryId).returningAll().executeTakeFirstOrThrow()),mr("Update inventory item"))},async onSuccess(){await r()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Inventory").where("id","=",i.inventoryId).execute()),textContent:f.jsx(ee,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:r})})]})}},...n})},Qse=Nie({shape:U.object({blueprintId:U.string().min(1),inventoryId:U.string().min(1)}),filter:Ui.merge(U.object({blueprintId:U.string().optional(),inventoryId:U.string().optional()}))}),Pp=Wt("/$locale/apps/derivean/root/blueprint/$id/inventory")({validateSearch:Xn(Er(Qse)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Inventory","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>sr({select:s.selectFrom("Blueprint_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").innerJoin("Resource as r","r.id","i.resourceId").select(["bi.id","r.name","i.amount","i.limit","i.resourceId","bi.blueprintId","bi.inventoryId"]).where("bi.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let c=o;if(l?.id&&(c=c.where("bi.id","=",l.id)),l?.idIn&&(c=c.where("bi.id","in",l.idIn)),l?.fulltext){const d=`%${l.fulltext}%`.toLowerCase();c=c.where(p=>p.or([p("bi.id","like",`%${d}%`),p("r.id","like",`%${d}%`),p("r.name","like",`%${d}%`),p("r.id","in",p.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(h=>h.or([h("t.code","like",d),h("t.label","like",d),h("t.group","like",d)])))]))}return c},output:U.object({id:U.string().min(1),name:U.string().min(1),resourceId:U.string().min(1),blueprintId:U.string().min(1),inventoryId:U.string().min(1),amount:U.number().nonnegative(),limit:U.number().int().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Pp.useLoaderData(),{filter:n,cursor:r,selection:i}=Pp.useSearch(),{id:s}=Pp.useParams(),o=Pp.useNavigate(),{tva:l}=ir({from:"__root__"}),c=l().slots;return f.jsx("div",{className:c.base(),children:f.jsx(Hse,{blueprintId:s,table:{data:t,filter:{value:n,set:wr(o)},selection:{type:"multi",value:i,set:Hi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of items"}),..._r(o)}})})}}),EM=Wt("/$locale/apps/derivean/root/blueprint/$id/edit")({component:()=>{const{entity:t}=so({from:"/$locale/apps/derivean/root/blueprint/$id"}),e=EM.useNavigate(),n=Yn([["Blueprint"]]);return f.jsx("div",{className:"w-1/2 mx-auto",children:f.jsx(ob,{defaultValues:t,mutation:Xt({async mutationFn(r){return Nn.promise(Ot.transaction().execute(async i=>i.updateTable("Blueprint").set(r).where("id","=",t.id).returningAll().executeTakeFirstOrThrow()),mr("Update blueprint"))},async onSuccess(){await n(),e({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{id:t.id}})}})})})}}),m3=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(nu.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"dependencyId",label:f.jsx(ee,{label:"Blueprint dependency (label)"}),children:f.jsx(ms,{control:s.control,name:"dependencyId",render:({field:{ref:l,...c}})=>f.jsx(Cm,{textTitle:f.jsx(ee,{label:"Select blueprint (title)"}),allowEmpty:!0,...c})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:On,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},Kse=Ir(),Gse=[Kse({name:"name",header(){return f.jsx(ee,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],Zse=({blueprintId:t,table:e,...n})=>{const r=Yn([["Blueprint_Dependency"],["Blueprint"]]);return f.jsx(Nr,{table:kr({...e,columns:Gse}),action:{table(){return f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create blueprint dependency (menu)"}),textTitle:f.jsx(ee,{label:"Create blueprint dependency (modal)"}),icon:On,children:({close:i})=>f.jsx(m3,{mutation:Xt({async mutationFn(s){return Nn.promise(Ot.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Dependency").values({id:Rn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await Qh({tx:o}),l}),mr("Create blueprint dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit blueprint dependency (modal)"}),icon:On,children:({close:s})=>f.jsx(m3,{defaultValues:i,mutation:Xt({async mutationFn(o){return Nn.promise(Ot.transaction().execute(async l=>l.updateTable("Blueprint_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),mr("Update blueprint dependency"))},async onSuccess(){await r(),s()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete blueprint dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Blueprint_Dependency").where("id","=",i.id).execute()),textContent:f.jsx(ee,{label:"Delete blueprint dependency (content)"}),textToast:"Delete blueprint dependency",invalidator:r})})]})}},...n})},Fp=Wt("/$locale/apps/derivean/root/blueprint/$id/dependencies")({validateSearch:Xn(Er(nu)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let c=o;return l?.id&&(c=c.where("bd.id","=",l.id)),l?.idIn&&(c=c.where("bd.id","in",l.idIn)),l?.blueprintId&&(c=c.where("bd.blueprintId","=",l.blueprintId)),l?.dependencyId&&(c=c.where("bd.dependencyId","=",l.dependencyId)),c},output:U.object({id:U.string().min(1),name:U.string().min(1),blueprintId:U.string().min(1),dependencyId:U.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Fp.useLoaderData(),{filter:n,cursor:r,selection:i}=Fp.useSearch(),{id:s}=Fp.useParams(),o=Fp.useNavigate(),{tva:l}=ir({from:"__root__"}),c=l().slots;return f.jsx("div",{className:c.base(),children:f.jsx(Zse,{blueprintId:s,table:{data:t,filter:{value:n,set:wr(o)},selection:{type:"multi",value:i,set:Hi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of requirements (label)"}),..._r(o)}})})}}),Jse=Sie({shape:U.object({conflictId:U.string().min(1)}),filter:Ui}),g3=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(Jse.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"conflictId",label:f.jsx(ee,{label:"Blueprint conflict (label)"}),hint:f.jsx(ee,{label:"Blueprint conflict (hint)"}),children:f.jsx(ms,{control:s.control,name:"conflictId",render:({field:{ref:l,...c}})=>f.jsx(Cm,{textTitle:f.jsx(ee,{label:"Select blueprint conflict (title)"}),allowEmpty:!0,...c})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:On,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},Yse=Ir(),Xse=[Yse({name:"name",header(){return f.jsx(ee,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],eoe=({blueprintId:t,table:e,...n})=>{const r=Yn([["Blueprint_Conflict"],["Blueprint"]]);return f.jsx(Nr,{table:kr({...e,columns:Xse}),action:{table(){return f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create blueprint conflict (menu)"}),textTitle:f.jsx(ee,{label:"Create blueprint conflict (modal)"}),icon:On,children:({close:i})=>f.jsx(g3,{mutation:Xt({async mutationFn(s){return Nn.promise(Ot.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Conflict").values({id:Rn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await Qh({tx:o}),l}),mr("Create blueprint conflict"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit blueprint conflict (modal)"}),icon:On,children:({close:s})=>f.jsx(g3,{defaultValues:i,mutation:Xt({async mutationFn(o){return Nn.promise(Ot.transaction().execute(async l=>l.updateTable("Blueprint_Conflict").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),mr("Update blueprint conflict"))},async onSuccess(){await r(),s()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete blueprint conflict (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Blueprint_Conflict").where("id","=",i.id).execute()),textContent:f.jsx(ee,{label:"Delete blueprint conflict (content)"}),textToast:"Delete blueprint conflict",invalidator:r})})]})}},...n})},Dp=Wt("/$locale/apps/derivean/root/blueprint/$id/conflicts")({validateSearch:Xn(Er(nu)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let c=o;return l?.id&&(c=c.where("bc.id","=",l.id)),l?.idIn&&(c=c.where("bc.id","in",l.idIn)),c},output:U.object({id:U.string().min(1),name:U.string().min(1),blueprintId:U.string().min(1),conflictId:U.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Dp.useLoaderData(),{filter:n,cursor:r,selection:i}=Dp.useSearch(),{id:s}=Dp.useParams(),o=Dp.useNavigate(),{tva:l}=ir({from:"__root__"}),c=l().slots;return f.jsx("div",{className:c.base(),children:f.jsx(eoe,{blueprintId:s,table:{data:t,filter:{value:n,set:wr(o)},selection:{type:"multi",value:i,set:Hi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of conflicts (label)"}),..._r(o)}})})}}),toe=({routeId:t,inventory:e})=>{const n=Yn([["GameMap"]]),r=Xt({async mutationFn({routeId:i,resourceId:s}){return Ot.transaction().execute(async o=>o.insertInto("Route_Resource").values({id:Rn(),resourceId:s,routeId:i,amount:1}).execute())},async onSuccess(){await n()}});return f.jsxs("div",{className:rr(["flex","flex-row","justify-between","p-4","border","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(rn,{icon:Un,css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:e.name})]}),f.jsx("div",{children:f.jsx(Cn,{variant:{variant:"secondary"},iconEnabled:"icon-[icons8--plus]",loading:r.isPending,onClick:()=>{r.mutate({resourceId:e.resourceId,routeId:t})}})})]})},noe=({resource:t})=>{const e=Yn([["GameMap"]]),n=Xt({async mutationFn({routeResourceId:r}){return Ot.transaction().execute(async i=>i.deleteFrom("Route_Resource").where("id","=",r).execute())},async onSuccess(){await e()}});return f.jsxs("div",{className:rr(["flex","flex-row","justify-between","p-4","border","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(rn,{icon:Un,css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:t.name}),f.jsxs(hs,{children:["x",wn({number:t.amount})]})]}),f.jsx("div",{children:f.jsx(Cn,{variant:{variant:"secondary"},iconEnabled:Xr,loading:n.isPending,onClick:()=>{n.mutate({routeResourceId:t.id})}})})]})},roe=({route:t,resource:e,inventory:n,...r})=>{const{locale:i}=un({from:"/$locale"});return f.jsxs(cc,{icon:Un,textTitle:f.jsx(ee,{label:"Route resources (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(Zt,{icon:jo,to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:i,id:t.fromId}}),f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx("div",{className:"font-light",children:t.fromName}),f.jsx(rn,{icon:"icon-[cil--arrow-right]"}),f.jsx("div",{children:t.toName})]})]}),...r,children:[f.jsx("div",{children:e.length>0?e.map(s=>f.jsx(noe,{resource:s},s.id)):f.jsx("div",{className:rr(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ee,{label:"No route resources yet (label)"})})}),f.jsx("div",{className:"border-b border-slate-300 shadow-md"}),f.jsx("div",{children:n.length>0?n.map(s=>f.jsx(toe,{inventory:s,routeId:t.id},s.id)):f.jsx("div",{className:rr(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ee,{label:"There are no available items for transport (label)"})})})]})},NM=Wt("/$locale/apps/derivean/map/route/$id/resources")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{resource:await t.ensureQueryData({queryKey:["GameMap","building","routes",n,"resources"],async queryFn(){return e.transaction().execute(async r=>cs({select:r.selectFrom("Route_Resource as rr").innerJoin("Resource as r","r.id","rr.resourceId").select(["rr.id","r.name","rr.amount","rr.routeId","rr.resourceId"]).where("rr.routeId","=",n),output:U.object({id:U.string().min(1),routeId:U.string().min(1),resourceId:U.string().min(1),name:U.string().min(1),amount:U.number().nonnegative()})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap","building","route","inventory",n],async queryFn(){return e.transaction().execute(async r=>cs({select:r.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","r.name"]).where("i.id","in",r.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",n))).where("r.id","in",r.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.fromId").where("ro.id","=",n))).where("r.id","in",r.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",n))).where("r.id","not in",r.selectFrom("Route_Resource as rr").where("rr.routeId","=",n).select("rr.resourceId")),output:U.object({id:U.string().min(1),resourceId:U.string().min(1),name:U.string().min(1)})}))}})}},component(){const{route:t}=so({from:"/$locale/apps/derivean/map/route/$id"}),{resource:e,inventory:n}=NM.useLoaderData();return f.jsx(roe,{route:t,resource:e,inventory:n})}}),LS=["p-4","border","border-slate-300","w-full","justify-start"],ioe=({building:t})=>{const{locale:e}=un({from:"/$locale"});return f.jsxs(cc,{icon:Ua,textTitle:t.name,children:[f.jsx(Zt,{icon:Ps,to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:e,id:t.id},css:{base:LS},children:f.jsx(ee,{label:"Building production (label)"})}),f.jsx(Zt,{icon:ki,to:"/$locale/apps/derivean/map/building/$id/inventory",params:{locale:e,id:t.id},css:{base:LS},children:f.jsx(ee,{label:"Building inventory (label)"})}),f.jsx(Zt,{icon:"icon-[gis--route-end]",to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:e,id:t.id},css:{base:LS},children:f.jsx(ee,{label:"Building routes (label)"})})]})},soe=Wt("/$locale/apps/derivean/map/building/$id/view")({component(){const{building:t}=so({from:"/$locale/apps/derivean/map/building/$id"});return f.jsx(ioe,{building:t})}}),ooe=({route:t})=>{const{locale:e}=un({from:"/$locale"}),n=Yn([["GameMap"]]),r=Xt({async mutationFn({routeId:i}){return Ot.transaction().execute(async s=>s.deleteFrom("Route").where("id","=",i).execute())},async onSuccess(){await n()}});return f.jsxs("div",{className:rr(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.count>0?void 0:["border-amber-400","hover:border-amber-600","hover:bg-amber-100"]]),children:[f.jsx(Zt,{icon:Un,to:"/$locale/apps/derivean/map/route/$id/resources",params:{locale:e,id:t.id},children:t.toName}),f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(Zt,{icon:"icon-[cil--arrow-right]",to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:e,id:t.fromId},search:{zoomToId:t.toId},children:f.jsx(hs,{children:wn({number:t.count})})}),f.jsx(Cn,{iconEnabled:Xr,variant:{variant:"secondary"},loading:r.isPending,onClick:()=>{r.mutate({routeId:t.id})}})]})]})},aoe=({building:t,route:e,...n})=>{const{locale:r}=un({from:"/$locale"});return f.jsx(cc,{icon:"icon-[gis--route-end]",textTitle:f.jsx(ee,{label:"Routes (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(Zt,{icon:jo,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:r,id:t.id}}),f.jsx(Zt,{to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:r,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(i=>f.jsx(ooe,{route:i},i.id)):f.jsx("div",{className:rr(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ee,{label:"No outcomming routes yet (label)"})})})},kM=Wt("/$locale/apps/derivean/map/building/$id/routes")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{route:await t.ensureQueryData({queryKey:["GameMap","building","routes",n],async queryFn(){return e.transaction().execute(async r=>cs({select:r.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blt.name as toName",i=>i.selectFrom("Route_Resource as rr").select(s=>s.fn.count("rr.id").as("count")).whereRef("rr.routeId","=","r.id").as("count")]).where("r.fromId","=",n),output:U.object({id:U.string().min(1),fromId:U.string().min(1),toId:U.string().min(1),toName:U.string().min(1),count:U.number().nonnegative()})}))}})}},component(){const{building:t}=so({from:"/$locale/apps/derivean/map/building/$id"}),{route:e}=kM.useLoaderData();return f.jsx(aoe,{building:t,route:e})}}),Lp=Wt("/$locale/apps/derivean/map/building/$id/inventory")({validateSearch:Xn(U.object({fulltext:U.string().optional()})),loaderDeps({search:{fulltext:t}}){return{fulltext:t}},async loader({context:{queryClient:t,kysely:e},deps:{fulltext:n},params:{id:r}}){return{inventory:await t.ensureQueryData({queryKey:["GameMap",r,{fulltext:n}],async queryFn(){return e.transaction().execute(async i=>cs({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.amount","i.limit","r.name"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).orderBy("r.name"),query({select:s,where:o}){let l=s;if(o?.fulltext){const c=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("r.name","like",c)]))}return l},output:U.object({id:U.string().min(1),amount:U.number().nonnegative(),limit:U.number().nonnegative(),name:U.string().min(1)}),filter:{fulltext:n}}))}})}},component(){const{building:t}=so({from:"/$locale/apps/derivean/map/building/$id"}),{fulltext:e}=Lp.useSearch(),{locale:n}=Lp.useParams(),r=Lp.useNavigate(),{inventory:i}=Lp.useLoaderData();return f.jsx(oM,{inventory:i,textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(Zt,{icon:jo,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:n,id:t.id}}),f.jsx(Zt,{to:"/$locale/apps/derivean/map/building/$id/inventory",params:{locale:n,id:t.id},search:{zoomToId:t.id},children:t.name})]}),fulltextProps:{value:e,onFulltext(s){r({search:{fulltext:s}})}}})}}),loe=({entity:t,...e})=>{const{locale:n}=un({from:"/$locale"});return f.jsxs(eu,{...e,children:[f.jsx(Fn,{icon:_M,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Production requirements (menu)"})}),f.jsx(Fn,{icon:Un,to:"/$locale/apps/derivean/game/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Production resource requirements (menu)"})}),f.jsx(Fn,{icon:On,to:"/$locale/apps/derivean/game/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(ee,{label:"Production resource dependencies (menu)"})})]})},uoe=t=>{const{locale:e}=un({from:"/$locale"});return f.jsx(ff,{title:({entity:n})=>f.jsx(hf,{icon:Ps,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>f.jsx(f.Fragment,{children:f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:f.jsx(ee,{label:"Building base detail (label)"})})}),...t})},IM=Wt("/$locale/apps/derivean/game/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await tu({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:U.object({id:U.string().min(1),resource:U.string().min(1),blueprint:U.string().min(1),blueprintId:U.string().min(1),amount:U.number().nonnegative(),cycles:U.number().int().nonnegative()})})}))}})},component(){const{entity:t}=IM.useLoaderData(),{tva:e}=ir({from:"__root__"}),n=e().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(uoe,{entity:t}),f.jsx(loe,{entity:t}),f.jsx(oo,{})]})}}),coe=t=>f.jsx(vD,{items:[{id:"name",label:f.jsx(ee,{label:"Building name (label)"}),render({entity:e}){return e.name}},{id:"cycles",label:f.jsx(ee,{label:"Construction cycles (label)"}),render({entity:e}){return wn({number:e.cycles})}}],...t}),doe=Wt("/$locale/apps/derivean/game/blueprint/$id/view")({component(){const{entity:t}=so({from:"/$locale/apps/derivean/game/blueprint/$id"});return f.jsx("div",{className:"w-1/2 mx-auto",children:f.jsx(coe,{entity:t})})}}),MS=Ir(),foe=[MS({name:"name",header(){return f.jsx(ee,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),MS({name:"amount",header(){return f.jsx(ee,{label:"Amount (label)"})},render({value:t}){return wn({number:t})},size:10}),MS({name:"passive",header(){return f.jsx(ee,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx(Ub,{value:t})},size:10})],poe=({table:t,...e})=>f.jsx(Nr,{table:kr({...t,columns:foe}),...e}),Qy=Wt("/$locale/apps/derivean/game/blueprint/$id/requirements")({validateSearch:Xn(Er(yf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let c=o;return l?.id&&(c=c.where("br.id","=",l.id)),l?.idIn&&(c=c.where("br.id","in",l.idIn)),l?.resourceId&&(c=c.where("br.resourceId","=",l.resourceId)),c},output:U.object({id:U.string().min(1),name:U.string().min(1),resourceId:U.string().min(1),amount:U.number().nonnegative(),passive:Ro()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Qy.useLoaderData(),{filter:n,cursor:r}=Qy.useSearch(),i=Qy.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(poe,{table:{data:t,filter:{value:n,set:wr(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of requirements (label)"}),..._r(i)}})})}}),Xc=Ir(),hoe=[Xc({name:"name",header(){return f.jsx(ee,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsx(Zt,{icon:Ps,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),Xc({name:"amount",header(){return f.jsx(ee,{label:"Amount (label)"})},render({value:t}){return wn({number:t})},size:8}),Xc({name:"cycles",header(){return f.jsx(ee,{label:"Production cycles (label)"})},render({value:t}){return wn({number:t})},size:8}),Xc({name:"requirements",header(){return f.jsx(ee,{label:"Required resources (label)"})},render({value:t}){return f.jsx(Im,{textTitle:f.jsx(ee,{label:"Resource requirements (title)"}),textEmpty:f.jsx(ee,{label:"No requirements (label)"}),requirements:t})},size:32}),Xc({name:"resources",header(){return f.jsx(ee,{label:"Required production resources (label)"})},render({value:t}){return f.jsx(Wd,{items:t,render:({entity:e})=>f.jsxs("div",{className:rr(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]),children:[f.jsx("div",{children:e.name}),f.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",wn({number:e.amount})]})]})})},size:32}),Xc({name:"dependencies",header(){return f.jsx(ee,{label:"Required production dependencies (label)"})},render({value:t}){const{locale:e}=un({from:"/$locale"});return f.jsx(Wd,{items:t,render:({entity:n})=>f.jsx("div",{className:rr(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]),children:f.jsx(Zt,{to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:e,id:n.blueprintId},children:n.name})})})},size:32})],moe=({table:t,...e})=>f.jsx(Nr,{table:kr({...t,columns:hoe}),...e}),Ky=Wt("/$locale/apps/derivean/game/blueprint/$id/production")({validateSearch:Xn(Er(KN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'passive', ${l.ref("bpr.passive")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("bpd.id")},
                                                'blueprintProductionId', ${l.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${l.ref("bpd.blueprintId")},
                                                'name', ${l.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:U.object({id:U.string().min(1),name:U.string().min(1),blueprintId:U.string().min(1),resourceId:U.string().min(1),amount:U.number().nonnegative(),cycles:U.number().nonnegative(),requirements:Bi(Om.entity.merge(U.object({name:U.string().min(1)}))),resources:Bi(qm.entity.merge(U.object({name:U.string().min(1)}))),dependencies:Bi(Tm.entity.merge(U.object({name:U.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Ky.useLoaderData(),{filter:n,cursor:r}=Ky.useSearch(),i=Ky.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(moe,{table:{data:t,filter:{value:n,set:wr(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of productions (label)"}),..._r(i)}})})}}),goe=Ir(),yoe=[goe({name:"name",header(){return f.jsx(ee,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],voe=({table:t,...e})=>f.jsx(Nr,{table:kr({...t,columns:yoe}),...e}),Gy=Wt("/$locale/apps/derivean/game/blueprint/$id/dependencies")({validateSearch:Xn(Er(nu)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let c=o;return l?.id&&(c=c.where("bd.id","=",l.id)),l?.idIn&&(c=c.where("bd.id","in",l.idIn)),l?.blueprintId&&(c=c.where("bd.blueprintId","=",l.blueprintId)),l?.dependencyId&&(c=c.where("bd.dependencyId","=",l.dependencyId)),c},output:U.object({id:U.string().min(1),name:U.string().min(1),blueprintId:U.string().min(1),dependencyId:U.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Gy.useLoaderData(),{filter:n,cursor:r}=Gy.useSearch(),i=Gy.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(voe,{table:{data:t,filter:{value:n,set:wr(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of dependencies (label)"}),..._r(i)}})})}}),boe=Ir(),xoe=[boe({name:"name",header(){return f.jsx(ee,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],_oe=({table:t,...e})=>f.jsx(Nr,{table:kr({...t,columns:xoe}),...e}),Zy=Wt("/$locale/apps/derivean/game/blueprint/$id/conflicts")({validateSearch:Xn(Er(nu)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let c=o;return l?.id&&(c=c.where("bc.id","=",l.id)),l?.idIn&&(c=c.where("bc.id","in",l.idIn)),c},output:U.object({id:U.string().min(1),name:U.string().min(1),blueprintId:U.string().min(1),conflictId:U.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Zy.useLoaderData(),{filter:n,cursor:r}=Zy.useSearch(),i=Zy.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(_oe,{table:{data:t,filter:{value:n,set:wr(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of conflicts (label)"}),..._r(i)}})})}}),CM=qie({shape:U.object({blueprintId:U.string().min(1),x:sa(),y:sa()}),filter:Ui.merge(U.object({userId:U.string().optional(),blueprintId:U.string().optional(),name:U.string().optional()}))}),y3=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(CM.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"blueprintId",label:f.jsx(ee,{label:"Select blueprint (label)"}),children:f.jsx(ms,{control:s.control,name:"blueprintId",render:({field:{ref:l,...c}})=>f.jsx(Cm,{allowEmpty:!0,...c})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:Ua,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},woe=Ir(),Soe=[woe({name:"name",header(){return f.jsx(ee,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId}}),e]})},size:14})],Eoe=({userId:t,table:e,...n})=>{const r=Yn([["Building"]]);return f.jsx(Nr,{table:kr({...e,columns:Soe}),action:{table:t?()=>f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create building (menu)"}),textTitle:f.jsx(ee,{label:"Create building (modal)"}),icon:Un,children:f.jsx(y3,{mutation:Xt({async mutationFn(i){return Nn.promise(Ot.transaction().execute(s=>s.insertInto("Building").values({id:Rn(),...i,userId:t}).returningAll().executeTakeFirstOrThrow()),mr("Create building"))},async onSuccess(){await r()}})})})}):void 0,row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit building (modal)"}),icon:Ua,children:f.jsx(y3,{defaultValues:i,mutation:Xt({async mutationFn(s){return Nn.promise(Ot.transaction().execute(o=>o.updateTable("Building").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),mr("Edit building"))},async onSuccess(){await r()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete building (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Building").where("id","=",i.id).execute()),textContent:f.jsx(ee,{label:"Building delete (content)"}),textToast:"Building delete",invalidator:r})})]})}},...n})},Mp=Wt("/$locale/apps/derivean/root/user/$id/building/list")({validateSearch:Xn(Er(CM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Building","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>sr({select:s.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name","b.blueprintId"]).where("b.userId","=",i),output:U.object({id:U.string().min(1),name:U.string().min(1),blueprintId:U.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Mp.useLoaderData(),{filter:n,cursor:r,selection:i}=Mp.useSearch(),{id:s}=Mp.useParams(),o=Mp.useNavigate(),{tva:l}=ir({from:"__root__"}),c=l().slots;return f.jsx("div",{className:c.base(),children:f.jsx(Eoe,{userId:s,table:{data:t,filter:{value:n,set:wr(o)},selection:{type:"multi",value:i,set:Hi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of buildings (label)"}),..._r(o)}})})}}),v3=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(qm.shape),defaultValues:{amount:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"resourceId",label:f.jsx(ee,{label:"Requirement (label)"}),children:f.jsx(ms,{control:s.control,name:"resourceId",render:({field:{ref:l,...c}})=>f.jsx(gf,{allowEmpty:!0,...c})})}),f.jsx(In,{formState:s.formState,name:"amount",label:f.jsx(ee,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:Un,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},b3=Ir(),Noe=[b3({name:"name",header(){return f.jsx(ee,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),b3({name:"amount",header(){return f.jsx(ee,{label:"Amount (label)"})},render({value:t}){return wn({number:t})},size:10})],koe=({blueprintProductionId:t,table:e,...n})=>{const r=Yn([["Blueprint_Production_Resource"],["Blueprint_Production"],["Resource"]]);return f.jsx(Nr,{table:kr({...e,columns:Noe}),action:{table(){return f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create production resource requirement (menu)"}),textTitle:f.jsx(ee,{label:"Create production resource requirement (modal)"}),icon:Un,children:({close:i})=>f.jsx(v3,{mutation:Xt({async mutationFn(s){return Ot.transaction().execute(async o=>o.insertInto("Blueprint_Production_Resource").values({id:Rn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit production resource requirement (modal)"}),icon:Un,children:({close:s})=>f.jsx(v3,{defaultValues:i,mutation:Xt({async mutationFn(o){return Ot.transaction().execute(async l=>l.updateTable("Blueprint_Production_Resource").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete production resource requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Resource").where("id","=",i.id).execute()),textContent:f.jsx(ee,{label:"Delete production resource requirement (content)"}),textToast:"Delete production resource requirement item",invalidator:r})})]})}},...n})},$p=Wt("/$locale/apps/derivean/root/blueprint/production/$id/resources")({validateSearch:Xn(Er(qm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let c=o;return l?.id&&(c=c.where("bpr.id","=",l.id)),l?.idIn&&(c=c.where("bpr.id","in",l.idIn)),l?.resourceId&&(c=c.where("bpr.resourceId","=",l.resourceId)),c},output:U.object({id:U.string().min(1),name:U.string().min(1),resourceId:U.string().min(1),amount:U.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=$p.useLoaderData(),{filter:n,cursor:r,selection:i}=$p.useSearch(),{id:s}=$p.useParams(),o=$p.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(koe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:wr(o)},selection:{type:"multi",value:i,set:Hi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of production resource requirements (label)"}),..._r(o)}})})}}),x3=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(Om.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"resourceId",label:f.jsx(ee,{label:"Requirement (label)"}),children:f.jsx(ms,{control:s.control,name:"resourceId",render:({field:{ref:l,...c}})=>f.jsx(gf,{allowEmpty:!0,...c})})}),f.jsx(In,{formState:s.formState,name:"amount",label:f.jsx(ee,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(In,{formState:s.formState,name:"passive",label:f.jsx(ee,{label:"Passive requirement (label)"}),hint:f.jsx(ee,{label:"Passive requirement (hint)"}),children:f.jsx(ms,{control:s.control,name:"passive",render:({field:{ref:l,...c}})=>f.jsx(yD,{...c})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:Un,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},$S=Ir(),Ioe=[$S({name:"name",header(){return f.jsx(ee,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),$S({name:"amount",header(){return f.jsx(ee,{label:"Amount (label)"})},render({value:t}){return wn({number:t})},size:10}),$S({name:"passive",header(){return f.jsx(ee,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx(Ub,{value:t})},size:10})],Coe=({blueprintProductionId:t,table:e,...n})=>{const r=Yn([["Blueprint_Production_Requirement"],["Blueprint_Production"],["Resource"]]);return f.jsx(Nr,{table:kr({...e,columns:Ioe}),action:{table(){return f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create production requirement (menu)"}),textTitle:f.jsx(ee,{label:"Create production requirement (modal)"}),icon:Un,children:({close:i})=>f.jsx(x3,{mutation:Xt({async mutationFn(s){return Ot.transaction().execute(async o=>o.insertInto("Blueprint_Production_Requirement").values({id:Rn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit production requirement (modal)"}),icon:Un,children:({close:s})=>f.jsx(x3,{defaultValues:i,mutation:Xt({async mutationFn(o){return Ot.transaction().execute(async l=>l.updateTable("Blueprint_Production_Requirement").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete production requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Requirement").where("id","=",i.id).execute()),textContent:f.jsx(ee,{label:"Delete production requirement (content)"}),textToast:"Delete production requirement item",invalidator:r})})]})}},...n})},Bp=Wt("/$locale/apps/derivean/root/blueprint/production/$id/requirements")({validateSearch:Xn(Er(Om)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let c=o;return l?.id&&(c=c.where("bpr.id","=",l.id)),l?.idIn&&(c=c.where("bpr.id","in",l.idIn)),l?.resourceId&&(c=c.where("bpr.resourceId","=",l.resourceId)),c},output:U.object({id:U.string().min(1),name:U.string().min(1),resourceId:U.string().min(1),amount:U.number().nonnegative(),passive:Ro()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Bp.useLoaderData(),{filter:n,cursor:r,selection:i}=Bp.useSearch(),{id:s}=Bp.useParams(),o=Bp.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(Coe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:wr(o)},selection:{type:"multi",value:i,set:Hi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of production requirements (label)"}),..._r(o)}})})}}),_3=({mutation:t,defaultValues:e,variant:n,tva:r=Ii,css:i})=>{const s=Ci({resolver:Ti(Tm.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ys({form:s,mutation:t}),children:[f.jsx(hi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(In,{formState:s.formState,name:"blueprintId",label:f.jsx(ee,{label:"Blueprint dependency (label)"}),children:f.jsx(ms,{control:s.control,name:"blueprintId",render:({field:{ref:l,...c}})=>f.jsx(Cm,{textTitle:f.jsx(ee,{label:"Select blueprint (title)"}),allowEmpty:!0,...c})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(Cn,{iconEnabled:On,type:"submit",children:f.jsx(ee,{label:"Save (submit)"})})})]})},Toe=Ir(),Ooe=[Toe({name:"name",header(){return f.jsx(ee,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],qoe=({blueprintProductionId:t,table:e,...n})=>{const r=Yn([["Blueprint_Production_Dependency"],["Blueprint"]]);return f.jsx(Nr,{table:kr({...e,columns:Ooe}),action:{table(){return f.jsx(Hn,{children:f.jsx(gn,{label:f.jsx(ee,{label:"Create blueprint production dependency (menu)"}),textTitle:f.jsx(ee,{label:"Create blueprint production dependency (modal)"}),icon:On,children:({close:i})=>f.jsx(_3,{mutation:Xt({async mutationFn(s){return Nn.promise(Ot.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Production_Dependency").values({id:Rn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow();return await Qh({tx:o}),l}),mr("Create blueprint production dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(Hn,{children:[f.jsx(gn,{label:f.jsx(ee,{label:"Edit (menu)"}),textTitle:f.jsx(ee,{label:"Edit blueprint production dependency (modal)"}),icon:On,children:({close:s})=>f.jsx(_3,{defaultValues:i,mutation:Xt({async mutationFn(o){return Nn.promise(Ot.transaction().execute(async l=>l.updateTable("Blueprint_Production_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),mr("Update blueprint production dependency"))},async onSuccess(){await r(),s()}})})}),f.jsx(gn,{icon:Xr,label:f.jsx(ee,{label:"Delete (menu)"}),textTitle:f.jsx(ee,{label:"Delete blueprint production dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Qi,{callback:async()=>Ot.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Dependency").where("id","=",i.id).execute()),textContent:f.jsx(ee,{label:"Delete blueprint production dependency (content)"}),textToast:"Delete blueprint production dependency",invalidator:r})})]})}},...n})},zp=Wt("/$locale/apps/derivean/root/blueprint/production/$id/dependencies")({validateSearch:Xn(Er(Tm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let c=o;return l?.id&&(c=c.where("bpd.id","=",l.id)),l?.idIn&&(c=c.where("bpd.id","in",l.idIn)),c},output:U.object({id:U.string().min(1),name:U.string().min(1),blueprintId:U.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=zp.useLoaderData(),{filter:n,cursor:r,selection:i}=zp.useSearch(),{id:s}=zp.useParams(),o=zp.useNavigate(),{tva:l}=ir({from:"__root__"}),c=l().slots;return f.jsx("div",{className:c.base(),children:f.jsx(qoe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:wr(o)},selection:{type:"multi",value:i,set:Hi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of dependencies (label)"}),..._r(o)}})})}}),Roe=({cycles:t})=>f.jsxs("div",{className:rr(["flex","flex-row","items-center","gap-2"]),children:[f.jsx(rn,{css:{base:["text-slate-400"]},icon:Hh}),f.jsx("div",{className:"font-bold text-md",children:wn({number:t})})]}),joe=({building:t,production:e})=>{const{locale:n}=un({from:"/$locale"});return f.jsxs("div",{className:rr(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsxs(Zt,{to:"/$locale/apps/derivean/map/building/$id/production/$productionId/requirements",params:{locale:n,id:t.id,productionId:e.id},children:[e.name,f.jsxs(hs,{children:["x",wn({number:e.amount})]})]}),f.jsx(Roe,{cycles:e.cycles})]})},Aoe=({building:t,production:e,...n})=>{const{locale:r}=un({from:"/$locale"});return f.jsx(cc,{icon:Ps,textTitle:f.jsx(ee,{label:"Building production (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(Zt,{icon:jo,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:r,id:t.id}}),f.jsx(Zt,{to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:r,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(i=>f.jsx(joe,{building:t,production:i},i.id)):f.jsx("div",{className:rr(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ee,{label:"This building does not produce anything. (label)"})})})},TM=Wt("/$locale/apps/derivean/map/building/$id/production/list")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{production:await t.ensureQueryData({queryKey:["GameMap","building","production",n],async queryFn(){return e.transaction().execute(async r=>cs({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.cycles"]).where("bp.blueprintId","=",r.selectFrom("Building as b").select("b.blueprintId").where("b.id","=",n)),output:U.object({id:U.string().min(1),name:U.string().min(1),amount:U.number().nonnegative(),cycles:U.number().int().nonnegative()})}))}})}},component(){const{building:t}=so({from:"/$locale/apps/derivean/map/building/$id"}),{production:e}=TM.useLoaderData();return f.jsx(Aoe,{building:t,production:e})}}),w3=Ir(),Poe=[w3({name:"name",header(){return f.jsx(ee,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),w3({name:"amount",header(){return f.jsx(ee,{label:"Amount (label)"})},render({value:t}){return wn({number:t})},size:10})],Foe=({table:t,...e})=>f.jsx(Nr,{table:kr({...t,columns:Poe}),...e}),Jy=Wt("/$locale/apps/derivean/game/blueprint/production/$id/resources")({validateSearch:Xn(Er(qm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let c=o;return l?.id&&(c=c.where("bpr.id","=",l.id)),l?.idIn&&(c=c.where("bpr.id","in",l.idIn)),l?.resourceId&&(c=c.where("bpr.resourceId","=",l.resourceId)),c},output:U.object({id:U.string().min(1),name:U.string().min(1),resourceId:U.string().min(1),amount:U.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Jy.useLoaderData(),{filter:n,cursor:r}=Jy.useSearch(),i=Jy.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(Foe,{table:{data:t,filter:{value:n,set:wr(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of production resource requirements (label)"}),..._r(i)}})})}}),BS=Ir(),Doe=[BS({name:"name",header(){return f.jsx(ee,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),BS({name:"amount",header(){return f.jsx(ee,{label:"Amount (label)"})},render({value:t}){return wn({number:t})},size:10}),BS({name:"passive",header(){return f.jsx(ee,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx(Ub,{value:t})},size:10})],Loe=({table:t,...e})=>f.jsx(Nr,{table:kr({...t,columns:Doe}),...e}),Yy=Wt("/$locale/apps/derivean/game/blueprint/production/$id/requirements")({validateSearch:Xn(Er(Om)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let c=o;return l?.id&&(c=c.where("bpr.id","=",l.id)),l?.idIn&&(c=c.where("bpr.id","in",l.idIn)),l?.resourceId&&(c=c.where("bpr.resourceId","=",l.resourceId)),c},output:U.object({id:U.string().min(1),name:U.string().min(1),resourceId:U.string().min(1),amount:U.number().nonnegative(),passive:Ro()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Yy.useLoaderData(),{filter:n,cursor:r}=Yy.useSearch(),i=Yy.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(Loe,{table:{data:t,filter:{value:n,set:wr(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of production requirements (label)"}),..._r(i)}})})}}),Moe=Ir(),$oe=[Moe({name:"name",header(){return f.jsx(ee,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=un({from:"/$locale"});return f.jsx(Zt,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],Boe=({table:t,...e})=>f.jsx(Nr,{table:kr({...t,columns:$oe}),...e}),Xy=Wt("/$locale/apps/derivean/game/blueprint/production/$id/dependencies")({validateSearch:Xn(Er(Tm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let c=o;return l?.id&&(c=c.where("bpd.id","=",l.id)),l?.idIn&&(c=c.where("bpd.id","in",l.idIn)),c},output:U.object({id:U.string().min(1),name:U.string().min(1),blueprintId:U.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Xy.useLoaderData(),{filter:n,cursor:r}=Xy.useSearch(),i=Xy.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Boe,{table:{data:t,filter:{value:n,set:wr(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ee,{label:"Number of dependencies (label)"}),..._r(i)}})})}}),zoe=({requirement:t})=>f.jsxs("div",{className:rr(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.passive?["border-purple-300","hover:border-purple-500","hover:bg-purple-100"]:void 0]),children:[f.jsx("div",{className:"font-bold",children:t.name}),f.jsxs(hs,{children:["x",wn({number:t.amount})]})]}),Woe=({building:t,requirement:e,...n})=>{const{locale:r}=un({from:"/$locale"});return f.jsx(cc,{icon:Un,textTitle:f.jsx(ee,{label:"Production requirements (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(Zt,{icon:jo,to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:r,id:t.id}}),f.jsx(Zt,{to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:r,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(i=>f.jsx(zoe,{requirement:i},i.id)):f.jsx("div",{className:rr(["flex","items-center","justify-center","rounded","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(ee,{label:"There are no requirements. (label)"})})})},OM=Wt("/$locale/apps/derivean/map/building/$id/production/$productionId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{productionId:n}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","building","production",n],async queryFn(){return e.transaction().execute(async r=>cs({select:r.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",n),output:U.object({id:U.string().min(1),name:U.string().min(1),amount:U.number().nonnegative(),passive:Ro()})}))}})}},component(){const{building:t}=so({from:"/$locale/apps/derivean/map/building/$id"}),{requirement:e}=OM.useLoaderData();return f.jsx(Woe,{building:t,requirement:e})}}),GN=sZ.update({id:"/$locale",path:"/$locale",getParentRoute:()=>bN}),Uoe=lZ.update({id:"/",path:"/",getParentRoute:()=>bN}),Voe=uZ.update({id:"/",path:"/",getParentRoute:()=>GN}),ru=dZ.update({id:"/apps/derivean",path:"/apps/derivean",getParentRoute:()=>GN}),ao=hZ.update({id:"/root",path:"/root",getParentRoute:()=>ru}),vf=a1.update({id:"/map",path:"/map",getParentRoute:()=>ru}),dc=cre.update({id:"/game",path:"/game",getParentRoute:()=>ru}),Hoe=mre.update({id:"/",path:"/",getParentRoute:()=>ao}),Qoe=gre.update({id:"/",path:"/",getParentRoute:()=>vf}),Koe=yre.update({id:"/",path:"/",getParentRoute:()=>dc}),Goe=u1.update({id:"/editor",path:"/editor",getParentRoute:()=>ao}),Zoe=Vie.update({id:"/public/register",path:"/public/register",getParentRoute:()=>ru}),Joe=Hie.update({id:"/public/logout",path:"/public/logout",getParentRoute:()=>ru}),Yoe=Zie.update({id:"/public/login",path:"/public/login",getParentRoute:()=>ru}),Xoe=My.update({id:"/inventory",path:"/inventory",getParentRoute:()=>vf}),eae=aM.update({id:"/construction",path:"/construction",getParentRoute:()=>vf}),tae=$y.update({id:"/inventory",path:"/inventory",getParentRoute:()=>dc}),nae=lM.update({id:"/db/schema",path:"/db/schema",getParentRoute:()=>ru}),rae=By.update({id:"/user/list",path:"/user/list",getParentRoute:()=>ao}),lx=uM.update({id:"/user/$id",path:"/user/$id",getParentRoute:()=>ao}),iae=zy.update({id:"/tag/list",path:"/tag/list",getParentRoute:()=>ao}),sae=Wy.update({id:"/resource/list",path:"/resource/list",getParentRoute:()=>ao}),qM=pM.update({id:"/resource/$id",path:"/resource/$id",getParentRoute:()=>ao}),oae=Uy.update({id:"/default/inventory",path:"/default/inventory",getParentRoute:()=>ao}),aae=Vy.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>ao}),iu=vM.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>ao}),RM=Sse.update({id:"/route/$id",path:"/route/$id",getParentRoute:()=>vf}),bf=Ese.update({id:"/building/$id",path:"/building/$id",getParentRoute:()=>vf}),lae=bM.update({id:"/production/queue",path:"/production/queue",getParentRoute:()=>dc}),uae=Hy.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>dc}),xf=xM.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>dc}),cae=qse.update({id:"/view",path:"/view",getParentRoute:()=>lx}),dae=Rp.update({id:"/inventory",path:"/inventory",getParentRoute:()=>lx}),fae=Ase.update({id:"/view",path:"/view",getParentRoute:()=>qM}),ux=wM.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>ao}),pae=SM.update({id:"/view",path:"/view",getParentRoute:()=>iu}),hae=jp.update({id:"/requirements",path:"/requirements",getParentRoute:()=>iu}),mae=Ap.update({id:"/production",path:"/production",getParentRoute:()=>iu}),gae=Pp.update({id:"/inventory",path:"/inventory",getParentRoute:()=>iu}),yae=EM.update({id:"/edit",path:"/edit",getParentRoute:()=>iu}),vae=Fp.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>iu}),bae=Dp.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>iu}),xae=NM.update({id:"/resources",path:"/resources",getParentRoute:()=>RM}),_ae=soe.update({id:"/view",path:"/view",getParentRoute:()=>bf}),wae=kM.update({id:"/routes",path:"/routes",getParentRoute:()=>bf}),Sae=Lp.update({id:"/inventory",path:"/inventory",getParentRoute:()=>bf}),cx=IM.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>dc}),Eae=doe.update({id:"/view",path:"/view",getParentRoute:()=>xf}),Nae=Qy.update({id:"/requirements",path:"/requirements",getParentRoute:()=>xf}),kae=Ky.update({id:"/production",path:"/production",getParentRoute:()=>xf}),Iae=Gy.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>xf}),Cae=Zy.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>xf}),Tae=Mp.update({id:"/building/list",path:"/building/list",getParentRoute:()=>lx}),Oae=$p.update({id:"/resources",path:"/resources",getParentRoute:()=>ux}),qae=Bp.update({id:"/requirements",path:"/requirements",getParentRoute:()=>ux}),Rae=zp.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>ux}),jae=TM.update({id:"/production/list",path:"/production/list",getParentRoute:()=>bf}),Aae=Jy.update({id:"/resources",path:"/resources",getParentRoute:()=>cx}),Pae=Yy.update({id:"/requirements",path:"/requirements",getParentRoute:()=>cx}),Fae=Xy.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>cx}),Dae=OM.update({id:"/production/$productionId/requirements",path:"/production/$productionId/requirements",getParentRoute:()=>bf}),Lae={LocaleAppsDeriveanGameBlueprintIdConflictsRoute:Cae,LocaleAppsDeriveanGameBlueprintIdDependenciesRoute:Iae,LocaleAppsDeriveanGameBlueprintIdProductionRoute:kae,LocaleAppsDeriveanGameBlueprintIdRequirementsRoute:Nae,LocaleAppsDeriveanGameBlueprintIdViewRoute:Eae},Mae=xf._addFileChildren(Lae),$ae={LocaleAppsDeriveanGameBlueprintProductionIdDependenciesRoute:Fae,LocaleAppsDeriveanGameBlueprintProductionIdRequirementsRoute:Pae,LocaleAppsDeriveanGameBlueprintProductionIdResourcesRoute:Aae},Bae=cx._addFileChildren($ae),zae={LocaleAppsDeriveanGameInventoryRoute:tae,LocaleAppsDeriveanGameIndexRoute:Koe,LocaleAppsDeriveanGameBlueprintIdRoute:Mae,LocaleAppsDeriveanGameBlueprintListRoute:uae,LocaleAppsDeriveanGameProductionQueueRoute:lae,LocaleAppsDeriveanGameBlueprintProductionIdRoute:Bae},Wae=dc._addFileChildren(zae),Uae={LocaleAppsDeriveanMapBuildingIdInventoryRoute:Sae,LocaleAppsDeriveanMapBuildingIdRoutesRoute:wae,LocaleAppsDeriveanMapBuildingIdViewRoute:_ae,LocaleAppsDeriveanMapBuildingIdProductionListRoute:jae,LocaleAppsDeriveanMapBuildingIdProductionProductionIdRequirementsRoute:Dae},Vae=bf._addFileChildren(Uae),Hae={LocaleAppsDeriveanMapRouteIdResourcesRoute:xae},Qae=RM._addFileChildren(Hae),Kae={LocaleAppsDeriveanMapConstructionRoute:eae,LocaleAppsDeriveanMapInventoryRoute:Xoe,LocaleAppsDeriveanMapIndexRoute:Qoe,LocaleAppsDeriveanMapBuildingIdRoute:Vae,LocaleAppsDeriveanMapRouteIdRoute:Qae},Gae=vf._addFileChildren(Kae),Zae={LocaleAppsDeriveanRootBlueprintIdConflictsRoute:bae,LocaleAppsDeriveanRootBlueprintIdDependenciesRoute:vae,LocaleAppsDeriveanRootBlueprintIdEditRoute:yae,LocaleAppsDeriveanRootBlueprintIdInventoryRoute:gae,LocaleAppsDeriveanRootBlueprintIdProductionRoute:mae,LocaleAppsDeriveanRootBlueprintIdRequirementsRoute:hae,LocaleAppsDeriveanRootBlueprintIdViewRoute:pae},Jae=iu._addFileChildren(Zae),Yae={LocaleAppsDeriveanRootResourceIdViewRoute:fae},Xae=qM._addFileChildren(Yae),ele={LocaleAppsDeriveanRootUserIdInventoryRoute:dae,LocaleAppsDeriveanRootUserIdViewRoute:cae,LocaleAppsDeriveanRootUserIdBuildingListRoute:Tae},tle=lx._addFileChildren(ele),nle={LocaleAppsDeriveanRootBlueprintProductionIdDependenciesRoute:Rae,LocaleAppsDeriveanRootBlueprintProductionIdRequirementsRoute:qae,LocaleAppsDeriveanRootBlueprintProductionIdResourcesRoute:Oae},rle=ux._addFileChildren(nle),ile={LocaleAppsDeriveanRootEditorRoute:Goe,LocaleAppsDeriveanRootIndexRoute:Hoe,LocaleAppsDeriveanRootBlueprintIdRoute:Jae,LocaleAppsDeriveanRootBlueprintListRoute:aae,LocaleAppsDeriveanRootDefaultInventoryRoute:oae,LocaleAppsDeriveanRootResourceIdRoute:Xae,LocaleAppsDeriveanRootResourceListRoute:sae,LocaleAppsDeriveanRootTagListRoute:iae,LocaleAppsDeriveanRootUserIdRoute:tle,LocaleAppsDeriveanRootUserListRoute:rae,LocaleAppsDeriveanRootBlueprintProductionIdRoute:rle},sle=ao._addFileChildren(ile),ole={LocaleAppsDeriveanGameRoute:Wae,LocaleAppsDeriveanMapRoute:Gae,LocaleAppsDeriveanRootRoute:sle,LocaleAppsDeriveanDbSchemaRoute:nae,LocaleAppsDeriveanPublicLoginRoute:Yoe,LocaleAppsDeriveanPublicLogoutRoute:Joe,LocaleAppsDeriveanPublicRegisterRoute:Zoe},ale=ru._addFileChildren(ole),lle={LocaleIndexRoute:Voe,LocaleAppsDeriveanRoute:ale},ule=GN._addFileChildren(lle),cle={IndexRoute:Uoe,LocaleRoute:ule},dle=bN._addFileChildren(cle)._addFileTypes(),jM=new rB({defaultOptions:{queries:{placeholderData:U$}}}),fle=e4({routeTree:dle,context:{queryClient:jM,tva:$7,async session(){return ym.parse(null)},kysely:Ot},defaultPendingComponent:CG,defaultPreload:"intent",defaultPreloadStaleTime:0,defaultPendingMinMs:200}),S3=document.getElementById("app");oV({limit:{maxRequests:10,perMilliseconds:100}});S3.innerHTML||nZ.createRoot(S3).render(f.jsx(uB,{client:jM,children:f.jsx(k4,{router:fle})}))})();