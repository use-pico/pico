(async()=>{function w4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _4(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var c_={exports:{}},kp={},d_={exports:{}},On={};var QC;function S4(){if(QC)return On;QC=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;function y(te){return te===null||typeof te!="object"?null:(te=h&&te[h]||te["@@iterator"],typeof te=="function"?te:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function I(te,ce,de){this.props=te,this.context=ce,this.refs=S,this.updater=de||x}I.prototype.isReactComponent={},I.prototype.setState=function(te,ce){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,ce,"setState")},I.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function C(){}C.prototype=I.prototype;function k(te,ce,de){this.props=te,this.context=ce,this.refs=S,this.updater=de||x}var R=k.prototype=new C;R.constructor=k,_(R,I.prototype),R.isPureReactComponent=!0;var j=Array.isArray,A=Object.prototype.hasOwnProperty,F={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function P(te,ce,de){var ye,we={},Ie=null,ze=null;if(ce!=null)for(ye in ce.ref!==void 0&&(ze=ce.ref),ce.key!==void 0&&(Ie=""+ce.key),ce)A.call(ce,ye)&&!$.hasOwnProperty(ye)&&(we[ye]=ce[ye]);var je=arguments.length-2;if(je===1)we.children=de;else if(1<je){for(var De=Array(je),Je=0;Je<je;Je++)De[Je]=arguments[Je+2];we.children=De}if(te&&te.defaultProps)for(ye in je=te.defaultProps,je)we[ye]===void 0&&(we[ye]=je[ye]);return{$$typeof:t,type:te,key:Ie,ref:ze,props:we,_owner:F.current}}function q(te,ce){return{$$typeof:t,type:te.type,key:ce,ref:te.ref,props:te.props,_owner:te._owner}}function B(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function L(te){var ce={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(de){return ce[de]})}var U=/\/+/g;function V(te,ce){return typeof te=="object"&&te!==null&&te.key!=null?L(""+te.key):ce.toString(36)}function z(te,ce,de,ye,we){var Ie=typeof te;(Ie==="undefined"||Ie==="boolean")&&(te=null);var ze=!1;if(te===null)ze=!0;else switch(Ie){case"string":case"number":ze=!0;break;case"object":switch(te.$$typeof){case t:case e:ze=!0}}if(ze)return ze=te,we=we(ze),te=ye===""?"."+V(ze,0):ye,j(we)?(de="",te!=null&&(de=te.replace(U,"$&/")+"/"),z(we,ce,de,"",function(Je){return Je})):we!=null&&(B(we)&&(we=q(we,de+(!we.key||ze&&ze.key===we.key?"":(""+we.key).replace(U,"$&/")+"/")+te)),ce.push(we)),1;if(ze=0,ye=ye===""?".":ye+":",j(te))for(var je=0;je<te.length;je++){Ie=te[je];var De=ye+V(Ie,je);ze+=z(Ie,ce,de,De,we)}else if(De=y(te),typeof De=="function")for(te=De.call(te),je=0;!(Ie=te.next()).done;)Ie=Ie.value,De=ye+V(Ie,je++),ze+=z(Ie,ce,de,De,we);else if(Ie==="object")throw ce=String(te),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.");return ze}function X(te,ce,de){if(te==null)return te;var ye=[],we=0;return z(te,ye,"","",function(Ie){return ce.call(de,Ie,we++)}),ye}function J(te){if(te._status===-1){var ce=te._result;ce=ce(),ce.then(function(de){(te._status===0||te._status===-1)&&(te._status=1,te._result=de)},function(de){(te._status===0||te._status===-1)&&(te._status=2,te._result=de)}),te._status===-1&&(te._status=0,te._result=ce)}if(te._status===1)return te._result.default;throw te._result}var le={current:null},ie={transition:null},ne={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:ie,ReactCurrentOwner:F};function oe(){throw Error("act(...) is not supported in production builds of React.")}return On.Children={map:X,forEach:function(te,ce,de){X(te,function(){ce.apply(this,arguments)},de)},count:function(te){var ce=0;return X(te,function(){ce++}),ce},toArray:function(te){return X(te,function(ce){return ce})||[]},only:function(te){if(!B(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},On.Component=I,On.Fragment=n,On.Profiler=i,On.PureComponent=k,On.StrictMode=r,On.Suspense=u,On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,On.act=oe,On.cloneElement=function(te,ce,de){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var ye=_({},te.props),we=te.key,Ie=te.ref,ze=te._owner;if(ce!=null){if(ce.ref!==void 0&&(Ie=ce.ref,ze=F.current),ce.key!==void 0&&(we=""+ce.key),te.type&&te.type.defaultProps)var je=te.type.defaultProps;for(De in ce)A.call(ce,De)&&!$.hasOwnProperty(De)&&(ye[De]=ce[De]===void 0&&je!==void 0?je[De]:ce[De])}var De=arguments.length-2;if(De===1)ye.children=de;else if(1<De){je=Array(De);for(var Je=0;Je<De;Je++)je[Je]=arguments[Je+2];ye.children=je}return{$$typeof:t,type:te.type,key:we,ref:Ie,props:ye,_owner:ze}},On.createContext=function(te){return te={$$typeof:o,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:s,_context:te},te.Consumer=te},On.createElement=P,On.createFactory=function(te){var ce=P.bind(null,te);return ce.type=te,ce},On.createRef=function(){return{current:null}},On.forwardRef=function(te){return{$$typeof:a,render:te}},On.isValidElement=B,On.lazy=function(te){return{$$typeof:p,_payload:{_status:-1,_result:te},_init:J}},On.memo=function(te,ce){return{$$typeof:d,type:te,compare:ce===void 0?null:ce}},On.startTransition=function(te){var ce=ie.transition;ie.transition={};try{te()}finally{ie.transition=ce}},On.unstable_act=oe,On.useCallback=function(te,ce){return le.current.useCallback(te,ce)},On.useContext=function(te){return le.current.useContext(te)},On.useDebugValue=function(){},On.useDeferredValue=function(te){return le.current.useDeferredValue(te)},On.useEffect=function(te,ce){return le.current.useEffect(te,ce)},On.useId=function(){return le.current.useId()},On.useImperativeHandle=function(te,ce,de){return le.current.useImperativeHandle(te,ce,de)},On.useInsertionEffect=function(te,ce){return le.current.useInsertionEffect(te,ce)},On.useLayoutEffect=function(te,ce){return le.current.useLayoutEffect(te,ce)},On.useMemo=function(te,ce){return le.current.useMemo(te,ce)},On.useReducer=function(te,ce,de){return le.current.useReducer(te,ce,de)},On.useRef=function(te){return le.current.useRef(te)},On.useState=function(te){return le.current.useState(te)},On.useSyncExternalStore=function(te,ce,de){return le.current.useSyncExternalStore(te,ce,de)},On.useTransition=function(){return le.current.useTransition()},On.version="18.3.1",On}var JC;function fm(){return JC||(JC=1,d_.exports=S4()),d_.exports}var ZC;function E4(){if(ZC)return kp;ZC=1;var t=fm(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,d){var p,h={},y=null,x=null;d!==void 0&&(y=""+d),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(x=u.ref);for(p in u)r.call(u,p)&&!s.hasOwnProperty(p)&&(h[p]=u[p]);if(a&&a.defaultProps)for(p in u=a.defaultProps,u)h[p]===void 0&&(h[p]=u[p]);return{$$typeof:e,type:a,key:y,ref:x,props:h,_owner:i.current}}return kp.Fragment=n,kp.jsx=o,kp.jsxs=o,kp}var YC;function I4(){return YC||(YC=1,c_.exports=E4()),c_.exports}var f=I4(),mf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},fc=typeof window>"u"||"Deno"in globalThis;function lo(){}function N4(t,e){return typeof t=="function"?t(e):t}function vE(t){return typeof t=="number"&&t>=0&&t!==1/0}function T3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Od(t,e){return typeof t=="function"?t(e):t}function Ao(t,e){return typeof t=="function"?t(e):t}function XC(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==UI(o,e.options))return!1}else if(!Eh(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function eT(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(pc(e.options.mutationKey)!==pc(s))return!1}else if(!Eh(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function UI(t,e){return(e?.queryKeyHashFn||pc)(t)}function pc(t){return JSON.stringify(t,(e,n)=>xE(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Eh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Eh(t[n],e[n])):!1}function VI(t,e){if(t===e)return t;const n=tT(t)&&tT(e);if(n||xE(t)&&xE(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{};let u=0;for(let d=0;d<o;d++){const p=n?d:s[d];(!n&&r.includes(p)||n)&&t[p]===void 0&&e[p]===void 0?(a[p]=void 0,u++):(a[p]=VI(t[p],e[p]),a[p]===t[p]&&t[p]!==void 0&&u++)}return i===o&&u===i?t:a}return e}function Sb(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function tT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function xE(t){if(!nT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!nT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function nT(t){return Object.prototype.toString.call(t)==="[object Object]"}function k4(t){return new Promise(e=>{setTimeout(e,t)})}function wE(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?VI(t,e):e}function C4(t){return t}function T4(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function R4(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var HI=Symbol();function R3(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===HI?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var j4=class extends mf{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!fc&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},GI=new j4,O4=class extends mf{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!fc&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Eb=new O4;function _E(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function q4(t){return Math.min(1e3*2**t,3e4)}function j3(t){return(t??"online")==="online"?Eb.isOnline():!0}var O3=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function f_(t){return t instanceof O3}function q3(t){let e=!1,n=0,r=!1,i;const s=_E(),o=S=>{r||(y(new O3(S)),t.abort?.())},a=()=>{e=!0},u=()=>{e=!1},d=()=>GI.isFocused()&&(t.networkMode==="always"||Eb.isOnline())&&t.canRun(),p=()=>j3(t.networkMode)&&t.canRun(),h=S=>{r||(r=!0,t.onSuccess?.(S),i?.(),s.resolve(S))},y=S=>{r||(r=!0,t.onError?.(S),i?.(),s.reject(S))},x=()=>new Promise(S=>{i=I=>{(r||d())&&S(I)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),_=()=>{if(r)return;let S;const I=n===0?t.initialPromise:void 0;try{S=I??t.fn()}catch(C){S=Promise.reject(C)}Promise.resolve(S).then(h).catch(C=>{if(r)return;const k=t.retry??(fc?0:3),R=t.retryDelay??q4,j=typeof R=="function"?R(n,C):R,A=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,C);if(e||!A){y(C);return}n++,t.onFail?.(n,C),k4(j).then(()=>d()?void 0:x()).then(()=>{e?y(C):_()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:a,continueRetry:u,canStart:p,start:()=>(p()?_():x().then(_),s)}}function A4(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(u=>{n(u)})})})};return{batch:a=>{let u;e++;try{u=a()}finally{e--,e||o()}return u},batchCalls:a=>(...u)=>{s(()=>{a(...u)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var ei=A4(),A3=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vE(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(fc?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},P4=class extends A3{#e;#t;#n;#r;#i;#s;constructor(t){super(),this.#s=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=F4(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=wE(this.state.data,t,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#o({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(lo).catch(lo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Ao(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===HI||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!T3(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const a=this.observers.find(u=>u.options.queryFn);a&&this.setOptions(a.options)}const n=new AbortController,r=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#s=!0,n.signal)})},i=()=>{const a=R3(this.options,e),u={queryKey:this.queryKey,meta:this.meta};return r(u),this.#s=!1,this.options.persister?this.options.persister(a,u,this):a(u)},s={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(s),this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#o({type:"fetch",meta:s.fetchOptions?.meta});const o=a=>{f_(a)&&a.silent||this.#o({type:"error",error:a}),f_(a)||(this.#n.config.onError?.(a,this),this.#n.config.onSettled?.(this.state.data,a,this)),this.scheduleGc()};return this.#r=q3({initialPromise:e?.initialPromise,fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:a=>{if(a===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(a)}catch(u){o(u);return}this.#n.config.onSuccess?.(a,this),this.#n.config.onSettled?.(a,this.state.error,this),this.scheduleGc()},onError:o,onFail:(a,u)=>{this.#o({type:"failed",failureCount:a,error:u})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#r.start()}#o(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...P3(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return f_(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),ei.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function P3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:j3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function F4(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var D4=class extends mf{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??UI(r,e);let s=this.get(i);return s||(s=new P4({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ei.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>XC(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>XC(t,n)):e}notify(t){ei.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){ei.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ei.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},L4=class extends A3{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||F3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=q3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,i)=>{this.#r({type:"failed",failureCount:r,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:n})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#r({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#r({type:"error",error:r})}}finally{this.#t.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),ei.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function F3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var M4=class extends mf{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new L4({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Gg(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Gg(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Gg(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Gg(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ei.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>eT(e,n))}findAll(t={}){return this.getAll().filter(e=>eT(t,e))}notify(t){ei.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return ei.batch(()=>Promise.all(t.map(e=>e.continue().catch(lo))))}};function Gg(t){return t.options.scope?.id}function rT(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},u=0;const d=async()=>{let p=!1;const h=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},y=R3(e.options,e.fetchOptions),x=async(_,S,I)=>{if(p)return Promise.reject();if(S==null&&_.pages.length)return Promise.resolve(_);const C={queryKey:e.queryKey,pageParam:S,direction:I?"backward":"forward",meta:e.options.meta};h(C);const k=await y(C),{maxPages:R}=e.options,j=I?R4:T4;return{pages:j(_.pages,k,R),pageParams:j(_.pageParams,S,R)}};if(i&&s.length){const _=i==="backward",S=_?$4:iT,I={pages:s,pageParams:o},C=S(r,I);a=await x(I,C,_)}else{const _=t??s.length;do{const S=u===0?o[0]??r.initialPageParam:iT(r,a);if(u>0&&S==null)break;a=await x(a,S),u++}while(u<_)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function iT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function $4(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var B4=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(t={}){this.#e=t.queryCache||new D4,this.#t=t.mutationCache||new M4,this.#n=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=GI.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Eb.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Od(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,o=N4(e,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ei.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;ei.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,r={type:"active",...t};return ei.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=ei.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(lo).catch(lo)}invalidateQueries(t,e={}){return ei.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none")return Promise.resolve();const n={...t,type:t?.refetchType??t?.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=ei.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(lo)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(lo)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Od(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(lo).catch(lo)}fetchInfiniteQuery(t){return t.behavior=rT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(lo).catch(lo)}ensureInfiniteQueryData(t){return t.behavior=rT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Eb.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(pc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Eh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(pc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()];let n={};return e.forEach(r=>{Eh(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=UI(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===HI&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},z4=class extends mf{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#o=_E(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#s;#o;#a;#u;#l;#c;#d;#p;#f;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),sT(this.#t,this.options)?this.#h():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return SE(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return SE(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#w(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ao(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!Sb(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&oT(this.#t,r,this.options,n)&&this.#h(),this.updateResult(e),i&&(this.#t!==r||Ao(this.options.enabled,this.#t)!==Ao(n.enabled,this.#t)||Od(this.options.staleTime,this.#t)!==Od(n.staleTime,this.#t))&&this.#g();const s=this.#y();i&&(this.#t!==r||Ao(this.options.enabled,this.#t)!==Ao(n.enabled,this.#t)||s!==this.#f)&&this.#b(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return U4(this,n)&&(this.#r=n,this.#s=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#_();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(lo)),e}#g(){this.#x();const t=Od(this.options.staleTime,this.#t);if(fc||this.#r.isStale||!vE(t))return;const n=T3(this.#r.dataUpdatedAt,t)+1;this.#d=setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#w(),this.#f=t,!(fc||Ao(this.options.enabled,this.#t)===!1||!vE(this.#f)||this.#f===0)&&(this.#p=setInterval(()=>{(this.options.refetchIntervalInBackground||GI.isFocused())&&this.#h()},this.#f))}#v(){this.#g(),this.#b(this.#y())}#x(){this.#d&&(clearTimeout(this.#d),this.#d=void 0)}#w(){this.#p&&(clearInterval(this.#p),this.#p=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#r,s=this.#i,o=this.#s,u=t!==n?t.state:this.#n,{state:d}=t;let p={...d},h=!1,y;if(e._optimisticResults){const $=this.hasListeners(),P=!$&&sT(t,e),q=$&&oT(t,n,e,r);(P||q)&&(p={...p,...P3(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:_,status:S}=p;if(e.select&&p.data!==void 0)if(i&&p.data===s?.data&&e.select===this.#u)y=this.#l;else try{this.#u=e.select,y=e.select(p.data),y=wE(i?.data,y,e),this.#l=y,this.#a=null}catch($){this.#a=$}else y=p.data;if(e.placeholderData!==void 0&&y===void 0&&S==="pending"){let $;if(i?.isPlaceholderData&&e.placeholderData===o?.placeholderData)$=i.data;else if($=typeof e.placeholderData=="function"?e.placeholderData(this.#c?.state.data,this.#c):e.placeholderData,e.select&&$!==void 0)try{$=e.select($),this.#a=null}catch(P){this.#a=P}$!==void 0&&(S="success",y=wE(i?.data,$,e),h=!0)}this.#a&&(x=this.#a,y=this.#l,_=Date.now(),S="error");const I=p.fetchStatus==="fetching",C=S==="pending",k=S==="error",R=C&&I,j=y!==void 0,F={status:S,fetchStatus:p.fetchStatus,isPending:C,isSuccess:S==="success",isError:k,isInitialLoading:R,isLoading:R,data:y,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:_,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:I,isRefetching:I&&!C,isLoadingError:k&&!j,isPaused:p.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:k&&j,isStale:KI(t,e),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const $=B=>{F.status==="error"?B.reject(F.error):F.data!==void 0&&B.resolve(F.data)},P=()=>{const B=this.#o=F.promise=_E();$(B)},q=this.#o;switch(q.status){case"pending":t.queryHash===n.queryHash&&$(q);break;case"fulfilled":(F.status==="error"||F.data!==q.value)&&P();break;case"rejected":(F.status!=="error"||F.error!==q.reason)&&P();break}}return F}updateResult(t){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#s=this.options,this.#i.data!==void 0&&(this.#c=this.#t),Sb(n,e))return;this.#r=n;const r={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#m.size)return!0;const a=new Set(o??this.#m);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(u=>{const d=u;return this.#r[d]!==e[d]&&a.has(d)})};t?.listeners!==!1&&i()&&(r.listeners=!0),this.#S({...r,...t})}#_(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(t){ei.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function W4(t,e){return Ao(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function sT(t,e){return W4(t,e)||t.state.data!==void 0&&SE(t,e,e.refetchOnMount)}function SE(t,e,n){if(Ao(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&KI(t,e)}return!1}function oT(t,e,n,r){return(t!==e||Ao(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&KI(t,n)}function KI(t,e){return Ao(e.enabled,t)!==!1&&t.isStaleByTime(Od(e.staleTime,t))}function U4(t,e){return!Sb(t.getCurrentResult(),e)}var V4=class extends mf{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),Sb(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&pc(n.mutationKey)!==pc(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#s()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??F3();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){ei.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},H=fm();const Un=vo(H),H4=w4({__proto__:null,default:Un},[H]);var D3=H.createContext(void 0),qv=t=>{const e=H.useContext(D3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},G4=({client:t,children:e})=>(H.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),f.jsx(D3.Provider,{value:t,children:e})),L3=H.createContext(!1),K4=()=>H.useContext(L3);L3.Provider;function Q4(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var J4=H.createContext(Q4()),Z4=()=>H.useContext(J4);function M3(t,e){return typeof t=="function"?t(...e):!!t}function EE(){}var Y4=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},X4=t=>{H.useEffect(()=>{t.clearReset()},[t])},ez=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&M3(n,[t.error,r]),tz=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},nz=(t,e)=>t.isLoading&&t.isFetching&&!e,rz=(t,e)=>t?.suspense&&e.isPending,aT=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function iz(t,e,n){const r=qv(),i=K4(),s=Z4(),o=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=i?"isRestoring":"optimistic",tz(o),Y4(o,s),X4(s);const a=!r.getQueryCache().get(o.queryHash),[u]=H.useState(()=>new e(r,o)),d=u.getOptimisticResult(o),p=!i&&t.subscribed!==!1;if(H.useSyncExternalStore(H.useCallback(h=>{const y=p?u.subscribe(ei.batchCalls(h)):EE;return u.updateResult(),y},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),H.useEffect(()=>{u.setOptions(o,{listeners:!1})},[o,u]),rz(o,d))throw aT(o,u,s);if(ez({result:d,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw d.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,d),o.experimental_prefetchInRender&&!fc&&nz(d,i)&&(a?aT(o,u,s):r.getQueryCache().get(o.queryHash)?.promise)?.catch(EE).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?d:u.trackResult(d)}function Ib(t,e){return iz(t,z4)}function lT(t,e){return t.findAll(e.filters).map(n=>e.select?e.select(n):n.state)}function sz(t={},e){const n=qv().getMutationCache(),r=H.useRef(t),i=H.useRef(null);return i.current||(i.current=lT(n,t)),H.useEffect(()=>{r.current=t}),H.useSyncExternalStore(H.useCallback(s=>n.subscribe(()=>{const o=VI(i.current,lT(n,r.current));i.current!==o&&(i.current=o,ei.schedule(s))}),[n]),()=>i.current,()=>i.current)}function Xt(t,e){const n=qv(),[r]=H.useState(()=>new V4(n,t));H.useEffect(()=>{r.setOptions(t)},[r,t]);const i=H.useSyncExternalStore(H.useCallback(o=>r.subscribe(ei.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=H.useCallback((o,a)=>{r.mutate(o,a).catch(EE)},[r]);if(i.error&&M3(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const oc="__TSR_index",uT="popstate",cT="beforeunload";function $3(t){let e=t.getLocation();const n=new Set,r=o=>{e=t.getLocation(),n.forEach(a=>a({location:e,action:o}))},i=o=>{t.notifyOnIndexChange??!0?r(o):e=t.getLocation()},s=async({task:o,navigateOpts:a,...u})=>{var d,p;if(a?.ignoreBlocker??!1){o();return}const y=((d=t.getBlockers)==null?void 0:d.call(t))??[],x=u.type==="PUSH"||u.type==="REPLACE";if(typeof document<"u"&&y.length&&x)for(const _ of y){const S=Ih(u.path,u.state);if(await _.blockerFn({currentLocation:e,nextLocation:S,action:u.type})){(p=t.onBlocked)==null||p.call(t);return}}o()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,a,u)=>{const d=e.state[oc];a=IE(d+1,a),s({task:()=>{t.pushState(o,a),r({type:"PUSH"})},navigateOpts:u,type:"PUSH",path:o,state:a})},replace:(o,a,u)=>{const d=e.state[oc];a=IE(d,a),s({task:()=>{t.replaceState(o,a),r({type:"REPLACE"})},navigateOpts:u,type:"REPLACE",path:o,state:a})},go:(o,a)=>{s({task:()=>{t.go(o),i({type:"GO",index:o})},navigateOpts:a,type:"GO"})},back:o=>{s({task:()=>{t.back(o?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{s({task:()=>{t.forward(o?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>e.state[oc]!==0,createHref:o=>t.createHref(o),block:o=>{var a;if(!t.setBlockers)return()=>{};const u=((a=t.getBlockers)==null?void 0:a.call(t))??[];return t.setBlockers([...u,o]),()=>{var d,p;const h=((d=t.getBlockers)==null?void 0:d.call(t))??[];(p=t.setBlockers)==null||p.call(t,h.filter(y=>y!==o))}},flush:()=>{var o;return(o=t.flush)==null?void 0:o.call(t)},destroy:()=>{var o;return(o=t.destroy)==null?void 0:o.call(t)},notify:r}}function IE(t,e){return e||(e={}),{...e,key:lz(),[oc]:t}}function oz(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState;let i=[];const s=()=>i,o=P=>i=P,a=P=>P,u=()=>Ih(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);let d=u(),p,h=!1,y=!1,x=!1,_=!1;const S=()=>d;let I,C;const k=()=>{I&&($._ignoreSubscribers=!0,(I.isPush?e.history.pushState:e.history.replaceState)(I.state,"",I.href),$._ignoreSubscribers=!1,I=void 0,C=void 0,p=void 0)},R=(P,q,B)=>{const L=a(q);C||(p=d),d=Ih(q,B),I={href:L,state:B,isPush:I?.isPush||P==="push"},C||(C=Promise.resolve().then(()=>k()))},j=P=>{d=u(),$.notify({type:P})},A=async()=>{if(y){y=!1;return}const P=u(),q=P.state[oc]-d.state[oc],B=q===1,L=q===-1,U=!B&&!L||h;h=!1;const V=U?"GO":L?"BACK":"FORWARD",z=U?{type:"GO",index:q}:{type:L?"BACK":"FORWARD"};if(x)x=!1;else{const X=s();if(typeof document<"u"&&X.length){for(const J of X)if(await J.blockerFn({currentLocation:d,nextLocation:P,action:V})){y=!0,e.history.go(1),$.notify(z);return}}}d=u(),$.notify(z)},F=P=>{if(_){_=!1;return}let q=!1;const B=s();if(typeof document<"u"&&B.length)for(const L of B){const U=L.enableBeforeUnload??!0;if(U===!0){q=!0;break}if(typeof U=="function"&&U()===!0){q=!0;break}}if(q)return P.preventDefault(),P.returnValue=""},$=$3({getLocation:S,getLength:()=>e.history.length,pushState:(P,q)=>R("push",P,q),replaceState:(P,q)=>R("replace",P,q),back:P=>(P&&(x=!0),_=!0,e.history.back()),forward:P=>{P&&(x=!0),_=!0,e.history.forward()},go:P=>{h=!0,e.history.go(P)},createHref:P=>a(P),flush:k,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(cT,F,{capture:!0}),e.removeEventListener(uT,A)},onBlocked:()=>{p&&d!==p&&(d=p)},getBlockers:s,setBlockers:o,notifyOnIndexChange:!1});return e.addEventListener(cT,F,{capture:!0}),e.addEventListener(uT,A),e.history.pushState=function(...P){const q=n.apply(e.history,P);return $._ignoreSubscribers||j("PUSH"),q},e.history.replaceState=function(...P){const q=r.apply(e.history,P);return $._ignoreSubscribers||j("REPLACE"),q},$}function az(t={initialEntries:["/"]}){const e=t.initialEntries;let n=t.initialIndex?Math.min(Math.max(t.initialIndex,0),e.length-1):e.length-1;const r=e.map((s,o)=>IE(o,void 0));return $3({getLocation:()=>Ih(e[n],r[n]),getLength:()=>e.length,pushState:(s,o)=>{n<e.length-1&&(e.splice(n+1),r.splice(n+1)),r.push(o),e.push(s),n=Math.max(e.length-1,0)},replaceState:(s,o)=>{r[n]=o,e[n]=s},back:()=>{n=Math.max(n-1,0)},forward:()=>{n=Math.min(n+1,e.length-1)},go:s=>{n=Math.min(Math.max(n+s,0),e.length-1)},createHref:s=>s})}function Ih(t,e){const n=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[oc]:0}}}function lz(){return(Math.random()+1).toString(36).substring(7)}var uz="Invariant failed";function qs(t,e){if(!t)throw new Error(uz)}const p_=H.createContext(null);function B3(){return typeof document>"u"?p_:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=p_,p_)}function Ko(t){const e=H.useContext(B3());return t?.warn,e}var h_={exports:{}},m_={},g_={exports:{}},y_={};var dT;function cz(){if(dT)return y_;dT=1;var t=fm();function e(h,y){return h===y&&(h!==0||1/h===1/y)||h!==h&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(h,y){var x=y(),_=r({inst:{value:x,getSnapshot:y}}),S=_[0].inst,I=_[1];return s(function(){S.value=x,S.getSnapshot=y,u(S)&&I({inst:S})},[h,x,y]),i(function(){return u(S)&&I({inst:S}),h(function(){u(S)&&I({inst:S})})},[h]),o(x),x}function u(h){var y=h.getSnapshot;h=h.value;try{var x=y();return!n(h,x)}catch{return!0}}function d(h,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:a;return y_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,y_}var fT;function dz(){return fT||(fT=1,g_.exports=cz()),g_.exports}var pT;function fz(){if(pT)return m_;pT=1;var t=fm(),e=dz();function n(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,u=t.useDebugValue;return m_.useSyncExternalStoreWithSelector=function(d,p,h,y,x){var _=s(null);if(_.current===null){var S={hasValue:!1,value:null};_.current=S}else S=_.current;_=a(function(){function C(F){if(!k){if(k=!0,R=F,F=y(F),x!==void 0&&S.hasValue){var $=S.value;if(x($,F))return j=$}return j=F}if($=j,r(R,F))return $;var P=y(F);return x!==void 0&&x($,P)?(R=F,$):(R=F,j=P)}var k=!1,R,j,A=h===void 0?null:h;return[function(){return C(p())},A===null?void 0:function(){return C(A())}]},[p,h,y,x]);var I=i(d,_[0],_[1]);return o(function(){S.hasValue=!0,S.value=I},[I]),u(I),I},m_}var hT;function pz(){return hT||(hT=1,h_.exports=fz()),h_.exports}var z3=pz();const hz=vo(z3),qd=new WeakMap,Py=new WeakMap,Nb={current:[]};let b_=!1,lh=0;const Wp=new Set,Kg=new Map;function W3(t){const e=Array.from(t).sort((n,r)=>n instanceof Ad&&n.options.deps.includes(r)?1:r instanceof Ad&&r.options.deps.includes(n)?-1:0);for(const n of e){if(Nb.current.includes(n))continue;Nb.current.push(n),n.recompute();const r=Py.get(n);if(r)for(const i of r){const s=qd.get(i);s&&W3(s)}}}function mz(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function gz(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function U3(t){if(lh>0&&!Kg.has(t)&&Kg.set(t,t.prevState),Wp.add(t),!(lh>0)&&!b_)try{for(b_=!0;Wp.size>0;){const e=Array.from(Wp);Wp.clear();for(const n of e){const r=Kg.get(n)??n.prevState;n.prevState=r,mz(n)}for(const n of e){const r=qd.get(n);r&&(Nb.current.push(n),W3(r))}for(const n of e){const r=qd.get(n);if(r)for(const i of r)gz(i)}}}finally{b_=!1,Nb.current=[],Kg.clear()}}function v_(t){lh++;try{t()}finally{if(lh--,lh===0){const e=Array.from(Wp)[0];e&&U3(e)}}}class NE{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var i,s;this.listeners.add(r);const o=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),o?.()}},this.setState=r=>{var i,s,o;this.prevState=this.state,this.state=(i=this.options)!=null&&i.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(s=this.options)==null?void 0:s.onUpdate)==null||o.call(s),U3(this)},this.prevState=e,this.state=e,this.options=n}}class Ad{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const i of this.options.deps)n.push(i.prevState),r.push(i.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:i,currDepVals:s,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:s,prevVal:o}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const s of this.options.deps)s instanceof Ad&&s.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==r[s]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,i;this.listeners.add(n);const s=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),s?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const n of e)if(n instanceof Ad)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof NE){let r=qd.get(n);r||(r=new Set,qd.set(n,r)),r.add(this);let i=Py.get(this);i||(i=new Set,Py.set(this,i)),i.add(n)}}unregisterFromGraph(e=this.options.deps){for(const n of e)if(n instanceof Ad)this.unregisterFromGraph(n.options.deps);else if(n instanceof NE){const r=qd.get(n);r&&r.delete(this);const i=Py.get(this);i&&i.delete(n)}}}function yz(t,e=n=>n){return z3.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,bz)}function bz(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var x_,mT;function vz(){if(mT)return x_;mT=1;const t={},e=t.hasOwnProperty,n=(P,q)=>{for(const B in P)e.call(P,B)&&q(B,P[B])},r=(P,q)=>(q&&n(q,(B,L)=>{P[B]=L}),P),i=(P,q)=>{const B=P.length;let L=-1;for(;++L<B;)q(P[L])},s=P=>"\\u"+("0000"+P).slice(-4),o=(P,q)=>{let B=P.toString(16);return q?B:B.toUpperCase()},a=t.toString,u=Array.isArray,d=P=>typeof Buffer=="function"&&Buffer.isBuffer(P),p=P=>a.call(P)=="[object Object]",h=P=>typeof P=="string"||a.call(P)=="[object String]",y=P=>typeof P=="number"||a.call(P)=="[object Number]",x=P=>typeof P=="bigint",_=P=>typeof P=="function",S=P=>a.call(P)=="[object Map]",I=P=>a.call(P)=="[object Set]",C={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},k=/[\\\b\f\n\r\t]/,R=/[0-9]/,j=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,A=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,F=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,$=(P,q)=>{const B=()=>{le=J,++q.indentLevel,J=q.indent.repeat(q.indentLevel)},L={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},U=q&&q.json;U&&(L.quotes="double",L.wrap=!0),q=r(L,q),q.quotes!="single"&&q.quotes!="double"&&q.quotes!="backtick"&&(q.quotes="single");const V=q.quotes=="double"?'"':q.quotes=="backtick"?"`":"'",z=q.compact,X=q.lowercaseHex;let J=q.indent.repeat(q.indentLevel),le="";const ie=q.__inline1__,ne=q.__inline2__,oe=z?"":`
`;let te,ce=!0;const de=q.numbers=="binary",ye=q.numbers=="octal",we=q.numbers=="decimal",Ie=q.numbers=="hexadecimal";if(U&&P&&_(P.toJSON)&&(P=P.toJSON()),!h(P)){if(S(P))return P.size==0?"new Map()":(z||(q.__inline1__=!0,q.__inline2__=!1),"new Map("+$(Array.from(P),q)+")");if(I(P))return P.size==0?"new Set()":"new Set("+$(Array.from(P),q)+")";if(d(P))return P.length==0?"Buffer.from([])":"Buffer.from("+$(Array.from(P),q)+")";if(u(P))return te=[],q.wrap=!0,ie&&(q.__inline1__=!1,q.__inline2__=!0),ne||B(),i(P,je=>{ce=!1,ne&&(q.__inline2__=!1),te.push((z||ne?"":J)+$(je,q))}),ce?"[]":ne?"["+te.join(", ")+"]":"["+oe+te.join(","+oe)+oe+(z?"":le)+"]";if(y(P)||x(P)){if(U)return JSON.stringify(Number(P));let je;if(we)je=String(P);else if(Ie){let De=P.toString(16);X||(De=De.toUpperCase()),je="0x"+De}else de?je="0b"+P.toString(2):ye&&(je="0o"+P.toString(8));return x(P)?je+"n":je}else return x(P)?U?JSON.stringify(Number(P)):P+"n":p(P)?(te=[],q.wrap=!0,B(),n(P,(je,De)=>{ce=!1,te.push((z?"":J)+$(je,q)+":"+(z?"":" ")+$(De,q))}),ce?"{}":"{"+oe+te.join(","+oe)+oe+(z?"":le)+"}"):U?JSON.stringify(P)||"null":String(P)}const ze=q.escapeEverything?A:F;return te=P.replace(ze,(je,De,Je,Xe,Ue,ut)=>{if(De){if(q.minimal)return De;const Ot=De.charCodeAt(0),Gt=De.charCodeAt(1);if(q.es6){const an=(Ot-55296)*1024+Gt-56320+65536;return"\\u{"+o(an,X)+"}"}return s(o(Ot,X))+s(o(Gt,X))}if(Je)return s(o(Je.charCodeAt(0),X));if(je=="\0"&&!U&&!R.test(ut.charAt(Ue+1)))return"\\0";if(Xe)return Xe==V||q.escapeEverything?"\\"+Xe:Xe;if(k.test(je))return C[je];if(q.minimal&&!j.test(je))return je;const St=o(je.charCodeAt(0),X);return U||St.length>2?s(St):"\\x"+("00"+St).slice(-2)}),V=="`"&&(te=te.replace(/\$\{/g,"\\${")),q.isScriptContext&&(te=te.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,U?"\\u003C!--":"\\x3C!--")),q.wrap&&(te=V+te+V),te};return $.version="3.0.2",x_=$,x_}vz();const js="__root__";function xz(t,e){let n,r,i,s="";for(n in t)if((i=t[n])!==void 0)if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i);return""+s}function gT(t){if(!t)return"";const e=decodeURIComponent(t);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function wz(t,e){let n,r;const i={},s=t.split("&");for(;n=s.shift();){const o=n.indexOf("=");if(o!==-1){r=n.slice(0,o),r=decodeURIComponent(r);const a=n.slice(o+1);i[r]!==void 0?i[r]=[].concat(i[r],gT(a)):i[r]=gT(a)}else r=n,r=decodeURIComponent(r),i[r]=""}return i}const _z=Ez(JSON.parse),Sz=Iz(JSON.stringify,JSON.parse);function Ez(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const n=wz(e);for(const r in n){const i=n[r];if(typeof i=="string")try{n[r]=t(i)}catch{}}return n}}function Iz(t,e){function n(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(s=>{const o=r[s];typeof o>"u"||o===void 0?delete r[s]:r[s]=n(o)});const i=xz(r).toString();return i?`?${i}`:""}}function uh(t){return t[t.length-1]}function Nz(t){return typeof t=="function"}function Xu(t,e){return Nz(t)?t(e):t}function Fy(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function oo(t,e){if(t===e)return t;const n=e,r=bT(t)&&bT(n);if(r||Kl(t)&&Kl(n)){const i=r?t:Object.keys(t),s=i.length,o=r?n:Object.keys(n),a=o.length,u=r?[]:{};let d=0;for(let p=0;p<a;p++){const h=r?p:o[p];(!r&&i.includes(h)||r)&&t[h]===void 0&&n[h]===void 0?(u[h]=void 0,d++):(u[h]=oo(t[h],n[h]),u[h]===t[h]&&t[h]!==void 0&&d++)}return s===a&&d===s?t:u}return n}function Kl(t){if(!yT(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!yT(n)||!n.hasOwnProperty("isPrototypeOf"))}function yT(t){return Object.prototype.toString.call(t)==="[object Object]"}function bT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function vT(t,e){let n=Object.keys(t);return e&&(n=n.filter(r=>t[r]!==void 0)),n}function Pd(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Kl(t)&&Kl(e)){const r=n?.ignoreUndefined??!0,i=vT(t,r),s=vT(e,r);return!n?.partial&&i.length!==s.length?!1:s.every(o=>Pd(t[o],e[o],n))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((r,i)=>!Pd(r,e[i],n)):!1}const Up=typeof window<"u"?H.useLayoutEffect:H.useEffect;function vd(t){let e,n;const r=new Promise((i,s)=>{e=i,n=s});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,e(i),t?.(i)},r.reject=i=>{r.status="rejected",n(i)},r}function w_(t){const e=H.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function kz(t,e,n={},r={}){const i=H.useRef(typeof IntersectionObserver=="function"),s=H.useRef(null);return H.useEffect(()=>{if(!(!t.current||!i.current||r.disabled))return s.current=new IntersectionObserver(([o])=>{e(o)},n),s.current.observe(t.current),()=>{var o;(o=s.current)==null||o.disconnect()}},[e,n,r.disabled,t]),s.current}function Cz(t){const e=H.useRef(null);return H.useEffect(()=>{t&&(typeof t=="function"?t(e.current):t.current=e.current)}),e}function Ga(t){return Av(t.filter(e=>e!==void 0).join("/"))}function Av(t){return t.replace(/\/{2,}/g,"/")}function QI(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function ec(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function Tz(t){return ec(QI(t))}function kb(t,e){return t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function Rz(t,e,n){return kb(t,n)===kb(e,n)}function jz({basepath:t,base:e,to:n,trailingSlash:r="never",caseSensitive:i}){var s,o;e=Cb(t,e,i),n=Cb(t,n,i);let a=Zd(e);const u=Zd(n);a.length>1&&((s=uh(a))==null?void 0:s.value)==="/"&&a.pop(),u.forEach((p,h)=>{p.value==="/"?h?h===u.length-1&&a.push(p):a=[p]:p.value===".."?a.pop():p.value==="."||a.push(p)}),a.length>1&&(((o=uh(a))==null?void 0:o.value)==="/"?r==="never"&&a.pop():r==="always"&&a.push({type:"pathname",value:"/"}));const d=Ga([t,...a.map(p=>p.value)]);return Av(d)}function Zd(t){if(!t)return[];t=Av(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const n=t.split("/").filter(Boolean);return e.push(...n.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function Qg({path:t,params:e,leaveWildcards:n,leaveParams:r,decodeCharMap:i}){const s=Zd(t),o={};for(const[a,u]of Object.entries(e)){const d=typeof u=="string";["*","_splat"].includes(a)?o[a]=d?encodeURI(u):u:o[a]=d?Oz(u,i):u}return Ga(s.map(a=>{if(a.type==="wildcard"){const u=o._splat;return n?`${a.value}${u??""}`:u}if(a.type==="param"){if(r){const u=o[a.value];return`${a.value}${u??""}`}return o[a.value.substring(1)]??"undefined"}return a.value}))}function Oz(t,e){let n=encodeURIComponent(t);if(e)for(const[r,i]of e)n=n.replaceAll(r,i);return n}function Jg(t,e,n){const r=qz(t,e,n);if(!(n.to&&!r))return r??{}}function Cb(t,e,n=!1){const r=n?t:t.toLowerCase(),i=n?e:e.toLowerCase();switch(!0){case r==="/":return e;case i===r:return"";case e.length<t.length:return e;case i[r.length]!=="/":return e;case i.startsWith(r):return e.slice(t.length);default:return e}}function qz(t,e,n){if(t!=="/"&&!e.startsWith(t))return;e=Cb(t,e,n.caseSensitive);const r=Cb(t,`${n.to??"$"}`,n.caseSensitive),i=Zd(e),s=Zd(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"}),r.startsWith("/")||s.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let u=0;u<Math.max(i.length,s.length);u++){const d=i[u],p=s[u],h=u>=i.length-1,y=u>=s.length-1;if(p){if(p.type==="wildcard"){const x=decodeURI(Ga(i.slice(u).map(_=>_.value)));return o["*"]=x,o._splat=x,!0}if(p.type==="pathname"){if(p.value==="/"&&!d?.value)return!0;if(d){if(n.caseSensitive){if(p.value!==d.value)return!1}else if(p.value.toLowerCase()!==d.value.toLowerCase())return!1}}if(!d)return!1;if(p.type==="param"){if(d.value==="/")return!1;d.value.charAt(0)!=="$"&&(o[p.value.substring(1)]=decodeURIComponent(d.value))}}if(!h&&y)return o["**"]=Ga(i.slice(u+1).map(x=>x.value)),!!n.fuzzy&&p?.value!=="/"}return!0})()?o:void 0}function pm(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},!t.reloadDocument){t.reloadDocument=!1;try{new URL(`${t.href}`),t.reloadDocument=!0}catch{}}if(t.throw)throw t;return t}function Uu(t){return!!t?.isRedirect}function __(t){return!!t?.isRedirect&&t.href}function JI(t){const e=t.errorComponent??Pv;return f.jsx(Az,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?H.createElement(e,{error:n,reset:r}):t.children})}class Az extends H.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Pv({error:t}){const[e,n]=H.useState(!1);return f.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[f.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),f.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),f.jsx("div",{style:{height:".25rem"}}),e?f.jsx("div",{children:f.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?f.jsx("code",{children:t.message}):null})}):null]})}function es(t){const e=Ko({warn:t?.router===void 0}),n=t?.router||e,r=H.useRef();return yz(n.__store,i=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const s=oo(r.current,t.select(i));return r.current=s,s}return t.select(i)}return i})}function Oo(t){return!!t?.isNotFound}function Pz(t){const e=es({select:n=>`not-found-${n.location.pathname}-${n.status}`});return f.jsx(JI,{getResetKey:()=>e,onCatch:(n,r)=>{var i;if(Oo(n))(i=t.onCatch)==null||i.call(t,n,r);else throw n},errorComponent:({error:n})=>{var r;if(Oo(n))return(r=t.fallback)==null?void 0:r.call(t,n);throw n},children:t.children})}function Fz(){return f.jsx("p",{children:"Not Found"})}const Vp={stringify:t=>JSON.stringify(t,function(n,r){const i=this[n],s=Yg.find(o=>o.stringifyCondition(i));return s?s.stringify(i):r}),parse:t=>JSON.parse(t,function(n,r){const i=this[n];if(Kl(i)){const s=Yg.find(o=>o.parseCondition(i));if(s)return s.parse(i)}return r}),encode:t=>{if(Array.isArray(t))return t.map(n=>Vp.encode(n));if(Kl(t))return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Vp.encode(r)]));const e=Yg.find(n=>n.stringifyCondition(t));return e?e.stringify(t):t},decode:t=>{if(Kl(t)){const e=Yg.find(n=>n.parseCondition(t));if(e)return e.parse(t)}return Array.isArray(t)?t.map(e=>Vp.decode(e)):Kl(t)?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,Vp.decode(n)])):t}},Zg=(t,e,n,r)=>({key:t,stringifyCondition:e,stringify:i=>({[`$${t}`]:n(i)}),parseCondition:i=>Object.hasOwn(i,`$${t}`),parse:i=>r(i[`$${t}`])}),Yg=[Zg("undefined",t=>t===void 0,()=>0,()=>{}),Zg("date",t=>t instanceof Date,t=>t.toISOString(),t=>new Date(t)),Zg("error",t=>t instanceof Error,t=>({...t,message:t.message,stack:t.stack,cause:t.cause}),t=>Object.assign(new Error(t.message),t)),Zg("formData",t=>t instanceof FormData,t=>{const e={};return t.forEach((n,r)=>{const i=e[r];i!==void 0?Array.isArray(i)?i.push(n):e[r]=[i,n]:e[r]=n}),e},t=>{const e=new FormData;return Object.entries(t).forEach(([n,r])=>{Array.isArray(r)?r.forEach(i=>e.append(n,i)):e.append(n,r)}),e})],V3=["component","errorComponent","pendingComponent","notFoundComponent"];function Dz(t){var e;for(const n of V3)if((e=t.options[n])!=null&&e.preload)return!0;return!1}function S_(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new kE("Async validation not supported");if(n.issues)throw new kE(JSON.stringify(n.issues,void 0,2));return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function Lz(t){return new Mz(t)}class Mz{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=n=>n(),this.update=n=>{var r;n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options;this.options={...this.options,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(s=>[encodeURIComponent(s),s])):void 0,(!this.basepath||n.basepath&&n.basepath!==i.basepath)&&(n.basepath===void 0||n.basepath===""||n.basepath==="/"?this.basepath="/":this.basepath=`/${Tz(n.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?az({initialEntries:[this.basepath||"/"]}):oz()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new NE(Bz(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const n=this.options.notFoundRoute;n&&(n.init({originalIndex:0x174876e7ff,defaultSsr:this.options.defaultSsr}),this.routesById[n.id]=n);const r=o=>{o.forEach((a,u)=>{a.init({originalIndex:u,defaultSsr:this.options.defaultSsr});const d=this.routesById[a.id];if(qs(!d,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const h=ec(a.fullPath);(!this.routesByPath[h]||a.fullPath.endsWith("/"))&&(this.routesByPath[h]=a)}const p=a.children;p?.length&&r(p)})};r([this.routeTree]);const i=[];Object.values(this.routesById).forEach((o,a)=>{var u;if(o.isRoot||!o.path)return;const d=QI(o.fullPath),p=Zd(d);for(;p.length>1&&((u=p[0])==null?void 0:u.value)==="/";)p.shift();const h=p.map(y=>y.value==="/"?.75:y.type==="param"?.5:y.type==="wildcard"?.25:1);i.push({child:o,trimmed:d,parsed:p,index:a,scores:h})}),this.flatRoutes=i.sort((o,a)=>{const u=Math.min(o.scores.length,a.scores.length);for(let d=0;d<u;d++)if(o.scores[d]!==a.scores[d])return a.scores[d]-o.scores[d];if(o.scores.length!==a.scores.length)return a.scores.length-o.scores.length;for(let d=0;d<u;d++)if(o.parsed[d].value!==a.parsed[d].value)return o.parsed[d].value>a.parsed[d].value?1:-1;return o.index-a.index}).map((o,a)=>(o.child.rank=a,o.child))},this.subscribe=(n,r)=>{const i={eventType:n,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const i=({pathname:u,search:d,hash:p,state:h})=>{const y=this.options.parseSearch(d),x=this.options.stringifySearch(y);return{pathname:u,searchStr:x,search:oo(n?.search,y),hash:p.split("#").reverse()[0]??"",href:`${u}${x}${p}`,state:oo(n?.state,h)}},s=i(r??this.history.location),{__tempLocation:o,__tempKey:a}=s.state;if(o&&(!a||a===this.tempLocationKey)){const u=i(o);return u.state.key=s.state.key,delete u.state.__tempLocation,{...u,maskedLocation:s}}return s},this.resolvePathWithBase=(n,r)=>jz({basepath:this.basepath,base:n,to:Av(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(n,r)=>{let i={};const s=ec(n.pathname),o=p=>Jg(this.basepath,s,{to:p.fullPath,caseSensitive:p.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let a=r?.to!==void 0?this.routesByPath[r.to]:void 0;a?i=o(a):a=this.flatRoutes.find(p=>{const h=o(p);return h?(i=h,!0):!1});let u=a||this.routesById[js];const d=[u];for(;u.parentRoute;)u=u.parentRoute,d.unshift(u);return{matchedRoutes:d,routeParams:i,foundRoute:a}},this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var n;(n=this.state.pendingMatches)==null||n.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=n=>{const r=(s={},o)=>{var a,u,d,p,h,y;const x=s._fromLocation?this.matchRoutes(s._fromLocation,{_buildLocation:!0}):this.state.matches,_=s.from!=null?x.find(L=>Jg(this.basepath,ec(L.pathname),{to:s.from,caseSensitive:!1,fuzzy:!1})):void 0,S=_?.pathname||this.latestLocation.pathname;qs(s.from==null||_!=null,"Could not find match for from: "+s.from);const I=(a=this.state.pendingMatches)!=null&&a.length?(u=uh(this.state.pendingMatches))==null?void 0:u.search:((d=uh(x))==null?void 0:d.search)||this.latestLocation.search,C=o?.matchedRoutes.filter(L=>x.find(U=>U.routeId===L.id));let k;if(s.to)k=this.resolvePathWithBase(S,`${s.to}`);else{const L=this.routesById[(p=C?.find(U=>{const V=Qg({path:U.fullPath,params:o?.routeParams??{},decodeCharMap:this.pathParamsDecodeCharMap});return Ga([this.basepath,V])===S}))==null?void 0:p.id];k=this.resolvePathWithBase(S,L?.to??S)}const R={...(h=uh(x))==null?void 0:h.params};let j=(s.params??!0)===!0?R:{...R,...Xu(s.params,R)};Object.keys(j).length>0&&o?.matchedRoutes.map(L=>{var U;return((U=L.options.params)==null?void 0:U.stringify)??L.options.stringifyParams}).filter(Boolean).forEach(L=>{j={...j,...L(j)}}),k=Qg({path:k,params:j??{},leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let A=I;if(n._includeValidateSearch&&((y=this.options.search)!=null&&y.strict)){let L={};o?.matchedRoutes.forEach(U=>{try{U.options.validateSearch&&(L={...L,...S_(U.options.validateSearch,{...L,...A})??{}})}catch{}}),A=L}A=(L=>{const U=o?.matchedRoutes.reduce((X,J)=>{var le;const ie=[];if("search"in J.options)(le=J.options.search)!=null&&le.middlewares&&ie.push(...J.options.search.middlewares);else if(J.options.preSearchFilters||J.options.postSearchFilters){const ne=({search:oe,next:te})=>{let ce=oe;"preSearchFilters"in J.options&&J.options.preSearchFilters&&(ce=J.options.preSearchFilters.reduce((ye,we)=>we(ye),oe));const de=te(ce);return"postSearchFilters"in J.options&&J.options.postSearchFilters?J.options.postSearchFilters.reduce((ye,we)=>we(ye),de):de};ie.push(ne)}if(n._includeValidateSearch&&J.options.validateSearch){const ne=({search:oe,next:te})=>{try{const ce=te(oe);return{...ce,...S_(J.options.validateSearch,ce)??{}}}catch{}};ie.push(ne)}return X.concat(ie)},[])??[],V=({search:X})=>s.search?s.search===!0?X:Xu(s.search,X):{};U.push(V);const z=(X,J)=>{if(X>=U.length)return J;const le=U[X];return le({search:J,next:ne=>z(X+1,ne)})};return z(0,L)})(A),A=oo(I,A);const $=this.options.stringifySearch(A),P=s.hash===!0?this.latestLocation.hash:s.hash?Xu(s.hash,this.latestLocation.hash):void 0,q=P?`#${P}`:"";let B=s.state===!0?this.latestLocation.state:s.state?Xu(s.state,this.latestLocation.state):{};return B=oo(this.latestLocation.state,B),{pathname:k,search:A,searchStr:$,state:B,hash:P??"",href:`${k}${$}${q}`,unmaskOnReload:s.unmaskOnReload}},i=(s={},o)=>{var a;const u=r(s);let d=o?r(o):void 0;if(!d){let y={};const x=(a=this.options.routeMasks)==null?void 0:a.find(_=>{const S=Jg(this.basepath,u.pathname,{to:_.from,caseSensitive:!1,fuzzy:!1});return S?(y=S,!0):!1});if(x){const{from:_,...S}=x;o={...Fy(n,["from"]),...S,params:y},d=r(o)}}const p=this.getMatchedRoutes(u,s),h=r(s,p);if(d){const y=this.getMatchedRoutes(d,o),x=r(o,y);h.maskedLocation=x}return h};return n.mask?i(n,{...Fy(n,["from"]),...n.mask}):i(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...i})=>{const s=()=>{i.state.key=this.latestLocation.state.key;const u=Pd(i.state,this.latestLocation.state);return delete i.state.key,u},o=this.latestLocation.href===i.href,a=this.commitLocationPromise;if(this.commitLocationPromise=vd(()=>{a?.resolve()}),o&&s())this.load();else{let{maskedLocation:u,hashScrollIntoView:d,...p}=i;u&&(p={...u,state:{...u.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=d??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](p.href,p.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:i,viewTransition:s,ignoreBlocker:o,href:a,...u}={})=>{if(a){const p=this.history.location.state.__TSR_index,h=Ih(a,{__TSR_index:n?p:p+1});u.to=h.pathname,u.search=this.options.parseSearch(h.search),u.hash=h.hash.slice(1)}const d=this.buildLocation({...u,_includeValidateSearch:!0});return this.commitLocation({...d,viewTransition:s,replace:n,resetScroll:r,hashScrollIntoView:i,ignoreBlocker:o})},this.navigate=({to:n,reloadDocument:r,href:i,...s})=>{if(r){i||(i=this.buildLocation({to:n,...s}).href),s.replace?window.location.replace(i):window.location.href=i;return}return this.buildAndCommitLocation({...s,href:i,to:n})},this.load=async n=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,i,s;for(s=new Promise(o=>{this.startReactTransition(async()=>{var a;try{const u=this.latestLocation,d=this.state.resolvedLocation,p=d.href!==u.href,h=d.pathname!==u.pathname;this.cancelMatches();let y;v_(()=>{y=this.matchRoutes(u),this.__store.setState(x=>({...x,status:"pending",isLoading:!0,location:u,pendingMatches:y,cachedMatches:x.cachedMatches.filter(_=>!y.find(S=>S.id===_.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:d,toLocation:u,pathChanged:h,hrefChanged:p}),this.emit({type:"onBeforeLoad",fromLocation:d,toLocation:u,pathChanged:h,hrefChanged:p}),await this.loadMatches({sync:n?.sync,matches:y,location:u,onReady:async()=>{this.startViewTransition(async()=>{let x,_,S;v_(()=>{this.__store.setState(I=>{const C=I.matches,k=I.pendingMatches||I.matches;return x=C.filter(R=>!k.find(j=>j.id===R.id)),_=k.filter(R=>!C.find(j=>j.id===R.id)),S=C.filter(R=>k.find(j=>j.id===R.id)),{...I,isLoading:!1,loadedAt:Date.now(),matches:k,pendingMatches:void 0,cachedMatches:[...I.cachedMatches,...x.filter(R=>R.status!=="error")]}}),this.clearExpiredCache()}),[[x,"onLeave"],[_,"onEnter"],[S,"onStay"]].forEach(([I,C])=>{I.forEach(k=>{var R,j;(j=(R=this.looseRoutesById[k.routeId].options)[C])==null||j.call(R,k)})})})}})}catch(u){__(u)?(r=u,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):Oo(u)&&(i=u),this.__store.setState(d=>({...d,statusCode:r?r.statusCode:i?404:d.matches.some(p=>p.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&((a=this.commitLocationPromise)==null||a.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;typeof r=="object"&&this.isViewTransitionTypesSupported?i={update:n,types:r.types}:i=n,document.startViewTransition(i)}else n()},this.updateMatch=(n,r)=>{var i;let s;const o=(i=this.state.pendingMatches)==null?void 0:i.find(p=>p.id===n),a=this.state.matches.find(p=>p.id===n),u=this.state.cachedMatches.find(p=>p.id===n),d=o?"pendingMatches":a?"matches":u?"cachedMatches":"";return d&&this.__store.setState(p=>{var h;return{...p,[d]:(h=p[d])==null?void 0:h.map(y=>y.id===n?s=r(y):y)}}),s},this.getMatch=n=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===n),this.loadMatches=async({location:n,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch,sync:a})=>{let u,d=!1;const p=async()=>{d||(d=!0,await s?.())},h=x=>!!(i&&!this.state.matches.find(_=>_.id===x));!this.isServer&&!this.state.matches.length&&p();const y=(x,_)=>{var S,I,C;if(__(_)&&!_.reloadDocument)throw _;if(Uu(_)||Oo(_)){if(o(x.id,k=>({...k,status:Uu(_)?"redirected":Oo(_)?"notFound":"error",isFetching:!1,error:_,beforeLoadPromise:void 0,loaderPromise:void 0})),_.routeId||(_.routeId=x.routeId),(S=x.beforeLoadPromise)==null||S.resolve(),(I=x.loaderPromise)==null||I.resolve(),(C=x.loadPromise)==null||C.resolve(),Uu(_))throw d=!0,_=this.resolveRedirect({..._,_fromLocation:n}),_;if(Oo(_))throw this._handleNotFound(r,_,{updateMatch:o}),_}};try{await new Promise((x,_)=>{(async()=>{var S,I,C;try{const k=(A,F,$)=>{var P,q;const{id:B,routeId:L}=r[A],U=this.looseRoutesById[L];if(F instanceof Promise)throw F;F.routerCode=$,u=u??A,y(this.getMatch(B),F);try{(q=(P=U.options).onError)==null||q.call(P,F)}catch(V){F=V,y(this.getMatch(B),F)}o(B,V=>{var z,X;return(z=V.beforeLoadPromise)==null||z.resolve(),(X=V.loadPromise)==null||X.resolve(),{...V,error:F,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[A,{id:F,routeId:$}]of r.entries()){const P=this.getMatch(F),q=(S=r[A-1])==null?void 0:S.id,B=this.looseRoutesById[$],L=B.options.pendingMs??this.options.defaultPendingMs,U=!!(s&&!this.isServer&&!h(F)&&(B.options.loader||B.options.beforeLoad)&&typeof L=="number"&&L!==1/0&&(B.options.pendingComponent??this.options.defaultPendingComponent));let V=!0;if((P.beforeLoadPromise||P.loaderPromise)&&(U&&setTimeout(()=>{try{p()}catch{}},L),await P.beforeLoadPromise,V=this.getMatch(F).status!=="success"),V){try{o(F,Ie=>({...Ie,loadPromise:vd(()=>{var ze;(ze=Ie.loadPromise)==null||ze.resolve()}),beforeLoadPromise:vd()}));const z=new AbortController;let X;U&&(X=setTimeout(()=>{try{p()}catch{}},L));const{paramsError:J,searchError:le}=this.getMatch(F);J&&k(A,J,"PARSE_PARAMS"),le&&k(A,le,"VALIDATE_SEARCH");const ie=()=>q?this.getMatch(q).context:this.options.context??{};o(F,Ie=>({...Ie,isFetching:"beforeLoad",fetchCount:Ie.fetchCount+1,abortController:z,pendingTimeout:X,context:{...ie(),...Ie.__routeContext}}));const{search:ne,params:oe,context:te,cause:ce}=this.getMatch(F),de=h(F),ye={search:ne,abortController:z,params:oe,preload:de,context:te,location:n,navigate:Ie=>this.navigate({...Ie,_fromLocation:n}),buildLocation:this.buildLocation,cause:de?"preload":ce,matches:r};let we=await ((C=(I=B.options).beforeLoad)==null?void 0:C.call(I,ye))??{};this.serializeLoaderData&&(we=this.serializeLoaderData("__beforeLoadContext",we,{router:this,match:this.getMatch(F)})),(Uu(we)||Oo(we))&&k(A,we,"BEFORE_LOAD"),o(F,Ie=>({...Ie,__beforeLoadContext:we,context:{...ie(),...Ie.__routeContext,...we},abortController:z}))}catch(z){k(A,z,"BEFORE_LOAD")}o(F,z=>{var X;return(X=z.beforeLoadPromise)==null||X.resolve(),{...z,beforeLoadPromise:void 0,isFetching:!1}})}}const R=r.slice(0,u),j=[];R.forEach(({id:A,routeId:F},$)=>{j.push((async()=>{const{loaderPromise:P}=this.getMatch(A);let q=!1,B=!1;if(P){await P;const L=this.getMatch(A);L.error&&y(L,L.error)}else{const L=j[$-1],U=this.looseRoutesById[F],V=()=>{const{params:ce,loaderDeps:de,abortController:ye,context:we,cause:Ie}=this.getMatch(A),ze=h(A);return{params:ce,deps:de,preload:!!ze,parentMatchPromise:L,abortController:ye,context:we,location:n,navigate:je=>this.navigate({...je,_fromLocation:n}),cause:ze?"preload":Ie,route:U}},z=Date.now()-this.getMatch(A).updatedAt,X=h(A),J=X?U.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:U.options.staleTime??this.options.defaultStaleTime??0,le=U.options.shouldReload,ie=typeof le=="function"?le(V()):le;o(A,ce=>({...ce,loaderPromise:vd(),preload:!!X&&!this.state.matches.find(de=>de.id===A)}));const ne=async()=>{var ce,de,ye,we,Ie,ze,je,De;try{const Je=async()=>{const Xe=this.getMatch(A);Xe.minPendingPromise&&await Xe.minPendingPromise};try{this.loadRouteChunk(U),o(A,an=>({...an,isFetching:"loader"}));let Xe=await ((de=(ce=U.options).loader)==null?void 0:de.call(ce,V()));this.serializeLoaderData&&(Xe=this.serializeLoaderData("loaderData",Xe,{router:this,match:this.getMatch(A)})),y(this.getMatch(A),Xe),await U._lazyPromise,await Je();const Ue=(we=(ye=U.options).head)==null?void 0:we.call(ye,{matches:r,match:this.getMatch(A),params:this.getMatch(A).params,loaderData:Xe}),ut=Ue?.meta,St=Ue?.links,Ot=Ue?.scripts,Gt=(ze=(Ie=U.options).headers)==null?void 0:ze.call(Ie,{loaderData:Xe});o(A,an=>({...an,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Xe,meta:ut,links:St,scripts:Ot,headers:Gt}))}catch(Xe){let Ue=Xe;await Je(),y(this.getMatch(A),Xe);try{(De=(je=U.options).onError)==null||De.call(je,Xe)}catch(ut){Ue=ut,y(this.getMatch(A),ut)}o(A,ut=>({...ut,error:Ue,status:"error",isFetching:!1}))}await U._componentsPromise}catch(Je){o(A,Xe=>({...Xe,loaderPromise:void 0})),y(this.getMatch(A),Je)}},{status:oe,invalid:te}=this.getMatch(A);q=oe==="success"&&(te||(ie??z>J)),X&&U.options.preload===!1||(q&&!a?(B=!0,(async()=>{try{await ne();const{loaderPromise:ce,loadPromise:de}=this.getMatch(A);ce?.resolve(),de?.resolve(),o(A,ye=>({...ye,loaderPromise:void 0}))}catch(ce){__(ce)&&await this.navigate(ce)}})()):(oe!=="success"||q&&a)&&await ne())}if(!B){const{loaderPromise:L,loadPromise:U}=this.getMatch(A);L?.resolve(),U?.resolve()}return o(A,L=>({...L,isFetching:B?L.isFetching:!1,loaderPromise:B?L.loaderPromise:void 0,invalid:!1})),this.getMatch(A)})())}),await Promise.all(j),x()}catch(k){_(k)}})()}),await p()}catch(x){if(Uu(x)||Oo(x))throw Oo(x)&&!i&&await p(),x}return r},this.invalidate=n=>{const r=i=>{var s;return((s=n?.filter)==null?void 0:s.call(n,i))??!0?{...i,invalid:!0,...i.status==="error"?{status:"pending",error:void 0}:{}}:i};return this.__store.setState(i=>{var s;return{...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:(s=i.pendingMatches)==null?void 0:s.map(r)}}),this.load({sync:n?.sync})},this.resolveRedirect=n=>{const r=n;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(s=>!r(s))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const s=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<s)};this.clearCache({filter:n})},this.loadRouteChunk=n=>(n._lazyPromise===void 0&&(n.lazyFn?n._lazyPromise=n.lazyFn().then(r=>{const{id:i,...s}=r.options;Object.assign(n.options,s)}):n._lazyPromise=Promise.resolve()),n._componentsPromise===void 0&&(n._componentsPromise=n._lazyPromise.then(()=>Promise.all(V3.map(async r=>{const i=n.options[r];i?.preload&&await i.preload()})))),n._componentsPromise),this.preloadRoute=async n=>{const r=this.buildLocation(n);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),o=new Set([...s,...this.state.cachedMatches.map(a=>a.id)]);v_(()=>{i.forEach(a=>{o.has(a.id)||this.__store.setState(u=>({...u,cachedMatches:[...u.cachedMatches,a]}))})});try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(a,u)=>{s.has(a)?i=i.map(d=>d.id===a?u(d):d):this.updateMatch(a,u)}}),i}catch(a){if(Uu(a))return a.reloadDocument?void 0:await this.preloadRoute({...a,_fromLocation:r});console.error(a);return}},this.matchRoute=(n,r)=>{const i={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(i);if(r?.pending&&this.state.status!=="pending")return!1;const a=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,u=Jg(this.basepath,a.pathname,{...r,to:s.pathname});return!u||n.params&&!Pd(u,n.params,{partial:!0})?!1:u&&(r?.includeSearch??!0)?Pd(a.search,s.search,{partial:!0})?u:!1:u},this.dehydrate=()=>{var n;const r=((n=this.options.errorSerializer)==null?void 0:n.serialize)??zz;return{state:{dehydratedMatches:this.state.matches.map(i=>({...Fy(i,["id","status","updatedAt"]),error:i.error?{data:r(i.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var n,r,i;let s;typeof document<"u"&&(s=this.options.transformer.parse((n=window.__TSR__)==null?void 0:n.dehydrated)),qs(s),this.dehydratedData=s.payload,(i=(r=this.options).hydrate)==null||i.call(r,s.payload);const o=s.router.state,a=this.matchRoutes(this.state.location).map(u=>{const d=o.dehydratedMatches.find(p=>p.id===u.id);return qs(d,`Could not find a client-side match for dehydrated match with id: ${u.id}!`),{...u,...d}});this.__store.setState(u=>({...u,matches:a})),this.manifest=s.router.manifest},this.injectedHtml=[],this.injectHtml=n=>{const r=()=>(this.injectedHtml=this.injectedHtml.filter(i=>i!==r),n);this.injectedHtml.push(r)},this.injectScript=(n,r)=>{this.injectHtml(`<script class='tsr-once'>${n}; if (typeof __TSR__ !== 'undefined') __TSR__.cleanScripts()</script>`)},this.streamedKeys=new Set,this.getStreamedValue=n=>{var r;if(this.isServer)return;const i=(r=window.__TSR__)==null?void 0:r.streamedValues[n];if(i)return i.parsed||(i.parsed=this.options.transformer.parse(i.value)),i.parsed},this.streamValue=(n,r)=>{var i;this.streamedKeys.has(n),this.streamedKeys.add(n),this.injectScript(`__TSR__.streamedValues['${n}'] = { value: ${(i=this.serializer)==null?void 0:i.call(this,this.options.transformer.stringify(r))}}`)},this._handleNotFound=(n,r,{updateMatch:i=this.updateMatch}={})=>{const s=Object.fromEntries(n.map(u=>[u.routeId,u]));let o=(r.global?this.looseRoutesById[js]:this.looseRoutesById[r.routeId])||this.looseRoutesById[js];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==js;)o=o.parentRoute,qs(o);const a=s[o.id];qs(a,"Could not find match for route: "+o.id),i(a.id,u=>({...u,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(n,r,{updateMatch:i}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??Sz,parseSearch:e.parseSearch??_z,transformer:e.transformer??Vp}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(e,n,r){return typeof e=="string"?this.matchRoutesInternal({pathname:e,search:n},r):this.matchRoutesInternal(e,n)}matchRoutesInternal(e,n){const{foundRoute:r,matchedRoutes:i,routeParams:s}=this.getMatchedRoutes(e,n?.dest);let o=!1;(r?r.path!=="/"&&s["**"]:ec(e.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const a=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let h=i.length-1;h>=0;h--){const y=i[h];if(y.children)return y.id}return js}})(),u=i.map(h=>{var y;let x;const _=((y=h.options.params)==null?void 0:y.parse)??h.options.parseParams;if(_)try{const S=_(s);Object.assign(s,S)}catch(S){if(x=new $z(S.message,{cause:S}),n?.throwOnError)throw x;return x}}),d=[],p=h=>h?.id?h.context??this.options.context??{}:this.options.context??{};return i.forEach((h,y)=>{var x,_,S,I;const C=d[y-1],[k,R]=(()=>{const V=C?.search??e.search;try{const z=S_(h.options.validateSearch,V)??{};return[{...V,...z},void 0]}catch(z){const X=new kE(z.message,{cause:z});if(n?.throwOnError)throw X;return[V,X]}})(),j=((_=(x=h.options).loaderDeps)==null?void 0:_.call(x,{search:k}))??"",A=j?JSON.stringify(j):"",F=Qg({path:h.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),$=Qg({path:h.id,params:s,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+A,P=this.getMatch($),q=this.state.matches.find(V=>V.routeId===h.id),B=q?"stay":"enter";let L;if(P)L={...P,cause:B,params:q?oo(q.params,s):s,search:oo(q?q.search:P.search,k)};else{const V=h.options.loader||h.options.beforeLoad||h.lazyFn||Dz(h)?"pending":"success";L={id:$,index:y,routeId:h.id,params:q?oo(q.params,s):s,pathname:Ga([this.basepath,F]),updatedAt:Date.now(),search:q?oo(q.search,k):k,searchError:void 0,status:V,isFetching:!1,error:void 0,paramsError:u[y],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:B,loaderDeps:q?oo(q.loaderDeps,j):j,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:h.options.staticData||{},loadPromise:vd(),fullPath:h.fullPath}}L.status==="success"&&(L.headers=(I=(S=h.options).headers)==null?void 0:I.call(S,{loaderData:L.loaderData})),n?.preload||(L.globalNotFound=a===h.id),L.searchError=R;const U=p(C);L.context={...U,...L.__routeContext,...L.__beforeLoadContext},d.push(L)}),d.forEach((h,y)=>{var x,_,S,I;const C=this.looseRoutesById[h.routeId];if(!this.getMatch(h.id)&&n?._buildLocation!==!0){const j=d[y-1],A=p(j),F={deps:h.loaderDeps,params:h.params,context:A,location:e,navigate:$=>this.navigate({...$,_fromLocation:e}),buildLocation:this.buildLocation,cause:h.cause,abortController:h.abortController,preload:!!h.preload,matches:d};h.__routeContext=((_=(x=C.options).context)==null?void 0:_.call(x,F))??{},h.context={...A,...h.__routeContext,...h.__beforeLoadContext}}const R=(I=(S=C.options).head)==null?void 0:I.call(S,{matches:d,match:h,params:h.params,loaderData:h.loaderData??void 0});h.links=R?.links,h.scripts=R?.scripts,h.meta=R?.meta}),d}}class kE extends Error{}class $z extends Error{}function Bz(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function zz(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function xT(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function wT(t){if("name"in t&&"message"in t){const e=new Error(t.message);return e.name=t.name,e}return t.data}const Fv=H.createContext(void 0),Wz=H.createContext(void 0);function nu(t){const e=H.useContext(t.from?Wz:Fv);return es({select:r=>{const i=r.matches.find(s=>t.from?t.from===s.routeId:s.id===e);if(qs(!((t.shouldThrow??!0)&&!i),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),i!==void 0)return t.select?t.select(i):i},structuralSharing:t.structuralSharing})}function Di(t){return nu({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function Uz(t){const{select:e,...n}=t;return nu({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function nn(t){return nu({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function Vz(t){return nu({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function pu(t){const{navigate:e}=Ko();return H.useCallback(n=>e({...n}),[e])}let H3=class{constructor(e){this.init=n=>{var r,i;this.originalIndex=n.originalIndex;const s=this.options,o=!s?.path&&!s?.id;this.parentRoute=(i=(r=this.options).getParentRoute)==null?void 0:i.call(r),o?this._path=js:qs(this.parentRoute);let a=o?js:s.path;a&&a!=="/"&&(a=QI(a));const u=s?.id||a;let d=o?js:Ga([this.parentRoute.id===js?"":this.parentRoute.id,u]);a===js&&(a="/"),d!==js&&(d=Ga(["/",d]));const p=d===js?"/":Ga([this.parentRoute.fullPath,a]);this._path=a,this._id=d,this._fullPath=p,this._to=p,this._ssr=s?.ssr??n.defaultSsr??!0},this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.useMatch=n=>nu({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>nu({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Vz({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>nn({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>Uz({...n,from:this.id}),this.useLoaderData=n=>Di({...n,from:this.id}),this.useNavigate=()=>pu({from:this.id}),this.options=e||{},this.isRoot=!e?.getParentRoute,qs(!(e?.id&&e?.path)),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(e){return this._addFileChildren(e)}_addFileChildren(e){return Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this}};function Hz(t){return new H3(t)}function Gz(){return t=>Qz(t)}class Kz extends H3{constructor(e){super(e)}addChildren(e){return super.addChildren(e),this}_addFileChildren(e){return super._addFileChildren(e),this}_addFileTypes(){return this}}function Qz(t){return new Kz(t)}function $t(t){return new Jz(t,{silent:!0}).createRoute}class Jz{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const i=Hz(r);return i.isRoot=!1,i},this.silent=n?.silent}}function Dy(t){return f.jsx(f.Fragment,{children:t.children})}function G3(t,e,n){return e.options.notFoundComponent?f.jsx(e.options.notFoundComponent,{data:n}):t.options.defaultNotFoundComponent?f.jsx(t.options.defaultNotFoundComponent,{data:n}):f.jsx(Fz,{})}const K3=H.memo(function({matchId:e}){var n,r;const i=Ko(),s=es({select:I=>{var C;return(C=I.matches.find(k=>k.id===e))==null?void 0:C.routeId}});qs(s);const o=i.routesById[s],a=o.options.pendingComponent??i.options.defaultPendingComponent,u=a?f.jsx(a,{}):null,d=o.options.errorComponent??i.options.defaultErrorComponent,p=o.options.onCatch??i.options.defaultOnCatch,h=o.isRoot?o.options.notFoundComponent??((n=i.options.notFoundRoute)==null?void 0:n.options.component):o.options.notFoundComponent,y=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??a??((r=o.options.errorComponent)==null?void 0:r.preload))?H.Suspense:Dy,x=d?JI:Dy,_=h?Pz:Dy,S=es({select:I=>I.loadedAt});return f.jsx(Fv.Provider,{value:e,children:f.jsx(y,{fallback:u,children:f.jsx(x,{getResetKey:()=>S,errorComponent:d||Pv,onCatch:(I,C)=>{if(Oo(I))throw I;p?.(I,C)},children:f.jsx(_,{fallback:I=>{if(!h||I.routeId&&I.routeId!==s||!I.routeId&&!o.isRoot)throw I;return H.createElement(h,I)},children:f.jsx(Zz,{matchId:e})})})})})}),Zz=H.memo(function({matchId:e}){var n,r,i,s,o;const a=Ko(),{match:u,matchIndex:d,routeId:p}=es({select:_=>{const S=_.matches.findIndex(k=>k.id===e),I=_.matches[S];return{routeId:I.routeId,matchIndex:S,match:Fy(I,["id","status","error"])}},structuralSharing:!0}),h=a.routesById[p],y=H.useMemo(()=>{const _=h.options.component??a.options.defaultComponent;return _?f.jsx(_,{}):f.jsx(xo,{})},[h.options.component,a.options.defaultComponent]),x=(h.options.errorComponent??a.options.defaultErrorComponent)||Pv;if(u.status==="notFound"){let _;return xT(u.error)?_=(((n=a.options.errorSerializer)==null?void 0:n.deserialize)??wT)(u.error.data):_=u.error,qs(Oo(_)),G3(a,h,_)}if(u.status==="redirected")throw qs(Uu(u.error)),(r=a.getMatch(u.id))==null?void 0:r.loadPromise;if(u.status==="error"){if(a.isServer)return f.jsx(x,{error:u.error,info:{componentStack:""}});throw xT(u.error)?(((i=a.options.errorSerializer)==null?void 0:i.deserialize)??wT)(u.error.data):u.error}if(u.status==="pending"){const _=h.options.pendingMinMs??a.options.defaultPendingMinMs;if(_&&!((s=a.getMatch(u.id))!=null&&s.minPendingPromise)&&!a.isServer){const S=vd();Promise.resolve().then(()=>{a.updateMatch(u.id,I=>({...I,minPendingPromise:S}))}),setTimeout(()=>{S.resolve(),a.updateMatch(u.id,I=>({...I,minPendingPromise:void 0}))},_)}throw(o=a.getMatch(u.id))==null?void 0:o.loadPromise}return f.jsxs(f.Fragment,{children:[y,a.AfterEachMatch?f.jsx(a.AfterEachMatch,{match:u,matchIndex:d}):null]})}),xo=H.memo(function(){const e=Ko(),n=H.useContext(Fv),r=es({select:d=>{var p;return(p=d.matches.find(h=>h.id===n))==null?void 0:p.routeId}}),i=e.routesById[r],s=es({select:d=>{const h=d.matches.find(y=>y.id===n);return qs(h),h.globalNotFound}}),o=es({select:d=>{var p;const h=d.matches,y=h.findIndex(x=>x.id===n);return(p=h[y+1])==null?void 0:p.id}});if(s)return G3(e,i,void 0);if(!o)return null;const a=f.jsx(K3,{matchId:o}),u=e.options.defaultPendingComponent?f.jsx(e.options.defaultPendingComponent,{}):null;return n===js?f.jsx(H.Suspense,{fallback:u,children:a}):a});var E_={exports:{}},ps={},I_={exports:{}},N_={};var _T;function Yz(){return _T||(_T=1,function(t){function e(ie,ne){var oe=ie.length;ie.push(ne);e:for(;0<oe;){var te=oe-1>>>1,ce=ie[te];if(0<i(ce,ne))ie[te]=ne,ie[oe]=ce,oe=te;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ne=ie[0],oe=ie.pop();if(oe!==ne){ie[0]=oe;e:for(var te=0,ce=ie.length,de=ce>>>1;te<de;){var ye=2*(te+1)-1,we=ie[ye],Ie=ye+1,ze=ie[Ie];if(0>i(we,oe))Ie<ce&&0>i(ze,we)?(ie[te]=ze,ie[Ie]=oe,te=Ie):(ie[te]=we,ie[ye]=oe,te=ye);else if(Ie<ce&&0>i(ze,oe))ie[te]=ze,ie[Ie]=oe,te=Ie;else break e}}return ne}function i(ie,ne){var oe=ie.sortIndex-ne.sortIndex;return oe!==0?oe:ie.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],d=[],p=1,h=null,y=3,x=!1,_=!1,S=!1,I=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ie){for(var ne=n(d);ne!==null;){if(ne.callback===null)r(d);else if(ne.startTime<=ie)r(d),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(d)}}function j(ie){if(S=!1,R(ie),!_)if(n(u)!==null)_=!0,J(A);else{var ne=n(d);ne!==null&&le(j,ne.startTime-ie)}}function A(ie,ne){_=!1,S&&(S=!1,C(P),P=-1),x=!0;var oe=y;try{for(R(ne),h=n(u);h!==null&&(!(h.expirationTime>ne)||ie&&!L());){var te=h.callback;if(typeof te=="function"){h.callback=null,y=h.priorityLevel;var ce=te(h.expirationTime<=ne);ne=t.unstable_now(),typeof ce=="function"?h.callback=ce:h===n(u)&&r(u),R(ne)}else r(u);h=n(u)}if(h!==null)var de=!0;else{var ye=n(d);ye!==null&&le(j,ye.startTime-ne),de=!1}return de}finally{h=null,y=oe,x=!1}}var F=!1,$=null,P=-1,q=5,B=-1;function L(){return!(t.unstable_now()-B<q)}function U(){if($!==null){var ie=t.unstable_now();B=ie;var ne=!0;try{ne=$(!0,ie)}finally{ne?V():(F=!1,$=null)}}else F=!1}var V;if(typeof k=="function")V=function(){k(U)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,X=z.port2;z.port1.onmessage=U,V=function(){X.postMessage(null)}}else V=function(){I(U,0)};function J(ie){$=ie,F||(F=!0,V())}function le(ie,ne){P=I(function(){ie(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){_||x||(_=!0,J(A))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(ie){switch(y){case 1:case 2:case 3:var ne=3;break;default:ne=y}var oe=y;y=ne;try{return ie()}finally{y=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,ne){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var oe=y;y=ie;try{return ne()}finally{y=oe}},t.unstable_scheduleCallback=function(ie,ne,oe){var te=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?te+oe:te):oe=te,ie){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=0x3fffffff;break;case 4:ce=1e4;break;default:ce=5e3}return ce=oe+ce,ie={id:p++,callback:ne,priorityLevel:ie,startTime:oe,expirationTime:ce,sortIndex:-1},oe>te?(ie.sortIndex=oe,e(d,ie),n(u)===null&&ie===n(d)&&(S?(C(P),P=-1):S=!0,le(j,oe-te))):(ie.sortIndex=ce,e(u,ie),_||x||(_=!0,J(A))),ie},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(ie){var ne=y;return function(){var oe=y;y=ne;try{return ie.apply(this,arguments)}finally{y=oe}}}}(N_)),N_}var ST;function Xz(){return ST||(ST=1,I_.exports=Yz()),I_.exports}var ET;function eW(){if(ET)return ps;ET=1;var t=fm(),e=Xz();function n(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(l,c){o(l,c),o(l+"Capture",c)}function o(l,c){for(i[l]=c,l=0;l<c.length;l++)r.add(c[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function y(l){return u.call(h,l)?!0:u.call(p,l)?!1:d.test(l)?h[l]=!0:(p[l]=!0,!1)}function x(l,c,m,w){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function _(l,c,m,w){if(c===null||typeof c>"u"||x(l,c,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function S(l,c,m,w,T,D,Z){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=w,this.attributeNamespace=T,this.mustUseProperty=m,this.propertyName=l,this.type=c,this.sanitizeURL=D,this.removeEmptyString=Z}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){I[l]=new S(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var c=l[0];I[c]=new S(c,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){I[l]=new S(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){I[l]=new S(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){I[l]=new S(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){I[l]=new S(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){I[l]=new S(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){I[l]=new S(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){I[l]=new S(l,5,!1,l.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function k(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var c=l.replace(C,k);I[c]=new S(c,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var c=l.replace(C,k);I[c]=new S(c,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var c=l.replace(C,k);I[c]=new S(c,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){I[l]=new S(l,1,!1,l.toLowerCase(),null,!1,!1)}),I.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){I[l]=new S(l,1,!1,l.toLowerCase(),null,!0,!0)});function R(l,c,m,w){var T=I.hasOwnProperty(c)?I[c]:null;(T!==null?T.type!==0:w||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(_(c,m,T,w)&&(m=null),w||T===null?y(c)&&(m===null?l.removeAttribute(c):l.setAttribute(c,""+m)):T.mustUseProperty?l[T.propertyName]=m===null?T.type===3?!1:"":m:(c=T.attributeName,w=T.attributeNamespace,m===null?l.removeAttribute(c):(T=T.type,m=T===3||T===4&&m===!0?"":""+m,w?l.setAttributeNS(w,c,m):l.setAttribute(c,m))))}var j=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),F=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ne(l){return l===null||typeof l!="object"?null:(l=ie&&l[ie]||l["@@iterator"],typeof l=="function"?l:null)}var oe=Object.assign,te;function ce(l){if(te===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);te=c&&c[1]||""}return`
`+te+l}var de=!1;function ye(l,c){if(!l||de)return"";de=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(He){var w=He}Reflect.construct(l,[],c)}else{try{c.call()}catch(He){w=He}l.call(c.prototype)}else{try{throw Error()}catch(He){w=He}l()}}catch(He){if(He&&w&&typeof He.stack=="string"){for(var T=He.stack.split(`
`),D=w.stack.split(`
`),Z=T.length-1,ge=D.length-1;1<=Z&&0<=ge&&T[Z]!==D[ge];)ge--;for(;1<=Z&&0<=ge;Z--,ge--)if(T[Z]!==D[ge]){if(Z!==1||ge!==1)do if(Z--,ge--,0>ge||T[Z]!==D[ge]){var Se=`
`+T[Z].replace(" at new "," at ");return l.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",l.displayName)),Se}while(1<=Z&&0<=ge);break}}}finally{de=!1,Error.prepareStackTrace=m}return(l=l?l.displayName||l.name:"")?ce(l):""}function we(l){switch(l.tag){case 5:return ce(l.type);case 16:return ce("Lazy");case 13:return ce("Suspense");case 19:return ce("SuspenseList");case 0:case 2:case 15:return l=ye(l.type,!1),l;case 11:return l=ye(l.type.render,!1),l;case 1:return l=ye(l.type,!0),l;default:return""}}function Ie(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case $:return"Fragment";case F:return"Portal";case q:return"Profiler";case P:return"StrictMode";case V:return"Suspense";case z:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case L:return(l.displayName||"Context")+".Consumer";case B:return(l._context.displayName||"Context")+".Provider";case U:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case X:return c=l.displayName||null,c!==null?c:Ie(l.type)||"Memo";case J:c=l._payload,l=l._init;try{return Ie(l(c))}catch{}}return null}function ze(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(c);case 8:return c===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function je(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function De(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Je(l){var c=De(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),w=""+l[c];if(!l.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var T=m.get,D=m.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return T.call(this)},set:function(Z){w=""+Z,D.call(this,Z)}}),Object.defineProperty(l,c,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(Z){w=""+Z},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function Xe(l){l._valueTracker||(l._valueTracker=Je(l))}function Ue(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var m=c.getValue(),w="";return l&&(w=De(l)?l.checked?"true":"false":l.value),l=w,l!==m?(c.setValue(l),!0):!1}function ut(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function St(l,c){var m=c.checked;return oe({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??l._wrapperState.initialChecked})}function Ot(l,c){var m=c.defaultValue==null?"":c.defaultValue,w=c.checked!=null?c.checked:c.defaultChecked;m=je(c.value!=null?c.value:m),l._wrapperState={initialChecked:w,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Gt(l,c){c=c.checked,c!=null&&R(l,"checked",c,!1)}function an(l,c){Gt(l,c);var m=je(c.value),w=c.type;if(m!=null)w==="number"?(m===0&&l.value===""||l.value!=m)&&(l.value=""+m):l.value!==""+m&&(l.value=""+m);else if(w==="submit"||w==="reset"){l.removeAttribute("value");return}c.hasOwnProperty("value")?be(l,c.type,m):c.hasOwnProperty("defaultValue")&&be(l,c.type,je(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(l.defaultChecked=!!c.defaultChecked)}function xe(l,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var w=c.type;if(!(w!=="submit"&&w!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+l._wrapperState.initialValue,m||c===l.value||(l.value=c),l.defaultValue=c}m=l.name,m!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,m!==""&&(l.name=m)}function be(l,c,m){(c!=="number"||ut(l.ownerDocument)!==l)&&(m==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+m&&(l.defaultValue=""+m))}var Ne=Array.isArray;function Ae(l,c,m,w){if(l=l.options,c){c={};for(var T=0;T<m.length;T++)c["$"+m[T]]=!0;for(m=0;m<l.length;m++)T=c.hasOwnProperty("$"+l[m].value),l[m].selected!==T&&(l[m].selected=T),T&&w&&(l[m].defaultSelected=!0)}else{for(m=""+je(m),c=null,T=0;T<l.length;T++){if(l[T].value===m){l[T].selected=!0,w&&(l[T].defaultSelected=!0);return}c!==null||l[T].disabled||(c=l[T])}c!==null&&(c.selected=!0)}}function Ve(l,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},c,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function rt(l,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(n(92));if(Ne(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),m=c}l._wrapperState={initialValue:je(m)}}function Me(l,c){var m=je(c.value),w=je(c.defaultValue);m!=null&&(m=""+m,m!==l.value&&(l.value=m),c.defaultValue==null&&l.defaultValue!==m&&(l.defaultValue=m)),w!=null&&(l.defaultValue=""+w)}function ct(l){var c=l.textContent;c===l._wrapperState.initialValue&&c!==""&&c!==null&&(l.value=c)}function Jt(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zt(l,c){return l==null||l==="http://www.w3.org/1999/xhtml"?Jt(c):l==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var wn,dr=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,w,T){MSApp.execUnsafeLocalFunction(function(){return l(c,m,w,T)})}:l}(function(l,c){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=c;else{for(wn=wn||document.createElement("div"),wn.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=wn.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;c.firstChild;)l.appendChild(c.firstChild)}});function Bn(l,c){if(c){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=c;return}}l.textContent=c}var Zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ui=["Webkit","ms","Moz","O"];Object.keys(Zr).forEach(function(l){Ui.forEach(function(c){c=c+l.charAt(0).toUpperCase()+l.substring(1),Zr[c]=Zr[l]})});function kr(l,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||Zr.hasOwnProperty(l)&&Zr[l]?(""+c).trim():c+"px"}function Yt(l,c){l=l.style;for(var m in c)if(c.hasOwnProperty(m)){var w=m.indexOf("--")===0,T=kr(m,c[m],w);m==="float"&&(m="cssFloat"),w?l.setProperty(m,T):l[m]=T}}var rs=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function is(l,c){if(c){if(rs[l]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function ss(l,c){if(l.indexOf("-")===-1)return typeof c.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wo=null;function _a(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var wu=null,Gs=null,G=null;function Tc(l){if(l=fp(l)){if(typeof wu!="function")throw Error(n(280));var c=l.stateNode;c&&(c=lg(c),wu(l.stateNode,l.type,c))}}function gn(l){Gs?G?G.push(l):G=[l]:Gs=l}function Rc(){if(Gs){var l=Gs,c=G;if(G=Gs=null,Tc(l),c)for(l=0;l<c.length;l++)Tc(c[l])}}function jc(l,c){return l(c)}function Oc(){}var _u=!1;function Sa(l,c,m){if(_u)return l(c,m);_u=!0;try{return jc(l,c,m)}finally{_u=!1,(Gs!==null||G!==null)&&(Oc(),Rc())}}function os(l,c){var m=l.stateNode;if(m===null)return null;var w=lg(m);if(w===null)return null;m=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(l=l.type,w=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!w;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(n(231,c,typeof m));return m}var Su=!1;if(a)try{var Ea={};Object.defineProperty(Ea,"passive",{get:function(){Su=!0}}),window.addEventListener("test",Ea,Ea),window.removeEventListener("test",Ea,Ea)}catch{Su=!1}function Mf(l,c,m,w,T,D,Z,ge,Se){var He=Array.prototype.slice.call(arguments,3);try{c.apply(m,He)}catch(ht){this.onError(ht)}}var Ia=!1,Ks=null,ul=!1,Qs=null,$f={onError:function(l){Ia=!0,Ks=l}};function Bf(l,c,m,w,T,D,Z,ge,Se){Ia=!1,Ks=null,Mf.apply($f,arguments)}function qc(l,c,m,w,T,D,Z,ge,Se){if(Bf.apply(this,arguments),Ia){if(Ia){var He=Ks;Ia=!1,Ks=null}else throw Error(n(198));ul||(ul=!0,Qs=He)}}function Js(l){var c=l,m=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,c.flags&4098&&(m=c.return),l=c.return;while(l)}return c.tag===3?m:null}function Ac(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function Pc(l){if(Js(l)!==l)throw Error(n(188))}function zf(l){var c=l.alternate;if(!c){if(c=Js(l),c===null)throw Error(n(188));return c!==l?null:l}for(var m=l,w=c;;){var T=m.return;if(T===null)break;var D=T.alternate;if(D===null){if(w=T.return,w!==null){m=w;continue}break}if(T.child===D.child){for(D=T.child;D;){if(D===m)return Pc(T),l;if(D===w)return Pc(T),c;D=D.sibling}throw Error(n(188))}if(m.return!==w.return)m=T,w=D;else{for(var Z=!1,ge=T.child;ge;){if(ge===m){Z=!0,m=T,w=D;break}if(ge===w){Z=!0,w=T,m=D;break}ge=ge.sibling}if(!Z){for(ge=D.child;ge;){if(ge===m){Z=!0,m=D,w=T;break}if(ge===w){Z=!0,w=D,m=T;break}ge=ge.sibling}if(!Z)throw Error(n(189))}}if(m.alternate!==w)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?l:c}function Fc(l){return l=zf(l),l!==null?Dc(l):null}function Dc(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=Dc(l);if(c!==null)return c;l=l.sibling}return null}var Lc=e.unstable_scheduleCallback,Eu=e.unstable_cancelCallback,Mc=e.unstable_shouldYield,Wf=e.unstable_requestPaint,fr=e.unstable_now,Uf=e.unstable_getCurrentPriorityLevel,Iu=e.unstable_ImmediatePriority,$c=e.unstable_UserBlockingPriority,cl=e.unstable_NormalPriority,Vf=e.unstable_LowPriority,Nu=e.unstable_IdlePriority,dl=null,as=null;function Hf(l){if(as&&typeof as.onCommitFiberRoot=="function")try{as.onCommitFiberRoot(dl,l,void 0,(l.current.flags&128)===128)}catch{}}var Ni=Math.clz32?Math.clz32:Qf,Gf=Math.log,Kf=Math.LN2;function Qf(l){return l>>>=0,l===0?32:31-(Gf(l)/Kf|0)|0}var Zo=64,fl=4194304;function Vi(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return l&0x7c00000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return l}}function pl(l,c){var m=l.pendingLanes;if(m===0)return 0;var w=0,T=l.suspendedLanes,D=l.pingedLanes,Z=m&0xfffffff;if(Z!==0){var ge=Z&~T;ge!==0?w=Vi(ge):(D&=Z,D!==0&&(w=Vi(D)))}else Z=m&~T,Z!==0?w=Vi(Z):D!==0&&(w=Vi(D));if(w===0)return 0;if(c!==0&&c!==w&&!(c&T)&&(T=w&-w,D=c&-c,T>=D||T===16&&(D&4194240)!==0))return c;if(w&4&&(w|=m&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=w;0<c;)m=31-Ni(c),T=1<<m,w|=l[m],c&=~T;return w}function Lx(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return-1;case 0x8000000:case 0x10000000:case 0x20000000:case 0x40000000:return-1;default:return-1}}function Mx(l,c){for(var m=l.suspendedLanes,w=l.pingedLanes,T=l.expirationTimes,D=l.pendingLanes;0<D;){var Z=31-Ni(D),ge=1<<Z,Se=T[Z];Se===-1?(!(ge&m)||ge&w)&&(T[Z]=Lx(ge,c)):Se<=c&&(l.expiredLanes|=ge),D&=~ge}}function Jf(l){return l=l.pendingLanes&-0x40000001,l!==0?l:l&0x40000000?0x40000000:0}function Ym(){var l=Zo;return Zo<<=1,!(Zo&4194240)&&(Zo=64),l}function Zf(l){for(var c=[],m=0;31>m;m++)c.push(l);return c}function ku(l,c,m){l.pendingLanes|=c,c!==0x20000000&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-Ni(c),l[c]=m}function $x(l,c){var m=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var w=l.eventTimes;for(l=l.expirationTimes;0<m;){var T=31-Ni(m),D=1<<T;c[T]=0,w[T]=-1,l[T]=-1,m&=~D}}function Yf(l,c){var m=l.entangledLanes|=c;for(l=l.entanglements;m;){var w=31-Ni(m),T=1<<w;T&c|l[w]&c&&(l[w]|=c),m&=~T}}var zn=0;function Xm(l){return l&=-l,1<l?4<l?l&0xfffffff?16:0x20000000:4:1}var Xf,he,ep,Cu,tp,g=!1,b=[],E=null,N=null,O=null,W=new Map,fe=new Map,me=[],Ge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tt(l,c){switch(l){case"focusin":case"focusout":E=null;break;case"dragenter":case"dragleave":N=null;break;case"mouseover":case"mouseout":O=null;break;case"pointerover":case"pointerout":W.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":fe.delete(c.pointerId)}}function at(l,c,m,w,T,D){return l===null||l.nativeEvent!==D?(l={blockedOn:c,domEventName:m,eventSystemFlags:w,nativeEvent:D,targetContainers:[T]},c!==null&&(c=fp(c),c!==null&&he(c)),l):(l.eventSystemFlags|=w,c=l.targetContainers,T!==null&&c.indexOf(T)===-1&&c.push(T),l)}function mt(l,c,m,w,T){switch(c){case"focusin":return E=at(E,l,c,m,w,T),!0;case"dragenter":return N=at(N,l,c,m,w,T),!0;case"mouseover":return O=at(O,l,c,m,w,T),!0;case"pointerover":var D=T.pointerId;return W.set(D,at(W.get(D)||null,l,c,m,w,T)),!0;case"gotpointercapture":return D=T.pointerId,fe.set(D,at(fe.get(D)||null,l,c,m,w,T)),!0}return!1}function Be(l){var c=Tu(l.target);if(c!==null){var m=Js(c);if(m!==null){if(c=m.tag,c===13){if(c=Ac(m),c!==null){l.blockedOn=c,tp(l.priority,function(){ep(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Oe(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var m=ue(l.domEventName,l.eventSystemFlags,c[0],l.nativeEvent);if(m===null){m=l.nativeEvent;var w=new m.constructor(m.type,m);wo=w,m.target.dispatchEvent(w),wo=null}else return c=fp(m),c!==null&&he(c),l.blockedOn=m,!1;c.shift()}return!0}function et(l,c,m){Oe(l)&&m.delete(c)}function ve(){g=!1,E!==null&&Oe(E)&&(E=null),N!==null&&Oe(N)&&(N=null),O!==null&&Oe(O)&&(O=null),W.forEach(et),fe.forEach(et)}function ke(l,c){l.blockedOn===c&&(l.blockedOn=null,g||(g=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ve)))}function Te(l){function c(T){return ke(T,l)}if(0<b.length){ke(b[0],l);for(var m=1;m<b.length;m++){var w=b[m];w.blockedOn===l&&(w.blockedOn=null)}}for(E!==null&&ke(E,l),N!==null&&ke(N,l),O!==null&&ke(O,l),W.forEach(c),fe.forEach(c),m=0;m<me.length;m++)w=me[m],w.blockedOn===l&&(w.blockedOn=null);for(;0<me.length&&(m=me[0],m.blockedOn===null);)Be(m),m.blockedOn===null&&me.shift()}var Ze=j.ReactCurrentBatchConfig,Qe=!0;function Re(l,c,m,w){var T=zn,D=Ze.transition;Ze.transition=null;try{zn=1,Et(l,c,m,w)}finally{zn=T,Ze.transition=D}}function Ke(l,c,m,w){var T=zn,D=Ze.transition;Ze.transition=null;try{zn=4,Et(l,c,m,w)}finally{zn=T,Ze.transition=D}}function Et(l,c,m,w){if(Qe){var T=ue(l,c,m,w);if(T===null)ew(l,c,w,ee,m),tt(l,w);else if(mt(T,l,c,m,w))w.stopPropagation();else if(tt(l,w),c&4&&-1<Ge.indexOf(l)){for(;T!==null;){var D=fp(T);if(D!==null&&Xf(D),D=ue(l,c,m,w),D===null&&ew(l,c,w,ee,m),D===T)break;T=D}T!==null&&w.stopPropagation()}else ew(l,c,w,null,m)}}var ee=null;function ue(l,c,m,w){if(ee=null,l=_a(w),l=Tu(l),l!==null)if(c=Js(l),c===null)l=null;else if(m=c.tag,m===13){if(l=Ac(c),l!==null)return l;l=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null);return ee=l,null}function Ee(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uf()){case Iu:return 1;case $c:return 4;case cl:case Vf:return 16;case Nu:return 0x20000000;default:return 16}default:return 16}}var st=null,ae=null,pe=null;function K(){if(pe)return pe;var l,c=ae,m=c.length,w,T="value"in st?st.value:st.textContent,D=T.length;for(l=0;l<m&&c[l]===T[l];l++);var Z=m-l;for(w=1;w<=Z&&c[m-w]===T[D-w];w++);return pe=T.slice(l,1<w?1-w:void 0)}function re(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function se(){return!0}function Le(){return!1}function it(l){function c(m,w,T,D,Z){this._reactName=m,this._targetInst=T,this.type=w,this.nativeEvent=D,this.target=Z,this.currentTarget=null;for(var ge in l)l.hasOwnProperty(ge)&&(m=l[ge],this[ge]=m?m(D):D[ge]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?se:Le,this.isPropagationStopped=Le,this}return oe(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=se)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=se)},persist:function(){},isPersistent:se}),c}var At={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vt=it(At),en=oe({},At,{view:0,detail:0}),lt=it(en),_e,Pe,ot,pt=oe({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ot&&(ot&&l.type==="mousemove"?(_e=l.screenX-ot.screenX,Pe=l.screenY-ot.screenY):Pe=_e=0,ot=l),_e)},movementY:function(l){return"movementY"in l?l.movementY:Pe}}),Bt=it(pt),tn=oe({},pt,{dataTransfer:0}),qe=it(tn),nt=oe({},en,{relatedTarget:0}),dt=it(nt),Nt=oe({},At,{animationName:0,elapsedTime:0,pseudoElement:0}),wt=it(Nt),Ut=oe({},At,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),_n=it(Ut),Pt=oe({},At,{data:0}),Cr=it(Pt),We={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_t={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kt(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=_t[l])?!!c[l]:!1}function In(){return kt}var Qn=oe({},en,{key:function(l){if(l.key){var c=We[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=re(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?bt[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(l){return l.type==="keypress"?re(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?re(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Vn=it(Qn),Kn=oe({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Na=it(Kn),hi=oe({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In}),Bx=it(hi),zx=oe({},At,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zs=it(zx),Wx=oe({},pt,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),eg=it(Wx),np=[9,13,27,32],Ux=a&&"CompositionEvent"in window,rp=null;a&&"documentMode"in document&&(rp=document.documentMode);var bB=a&&"TextEvent"in window&&!rp,B1=a&&(!Ux||rp&&8<rp&&11>=rp),z1=" ",W1=!1;function U1(l,c){switch(l){case"keyup":return np.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V1(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Bc=!1;function vB(l,c){switch(l){case"compositionend":return V1(c);case"keypress":return c.which!==32?null:(W1=!0,z1);case"textInput":return l=c.data,l===z1&&W1?null:l;default:return null}}function xB(l,c){if(Bc)return l==="compositionend"||!Ux&&U1(l,c)?(l=K(),pe=ae=st=null,Bc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return B1&&c.locale!=="ko"?null:c.data;default:return null}}var wB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function H1(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!wB[l.type]:c==="textarea"}function G1(l,c,m,w){gn(w),c=sg(c,"onChange"),0<c.length&&(m=new Vt("onChange","change",null,m,w),l.push({event:m,listeners:c}))}var ip=null,sp=null;function _B(l){dk(l,0)}function tg(l){var c=Hc(l);if(Ue(c))return l}function SB(l,c){if(l==="change")return c}var K1=!1;if(a){var Vx;if(a){var Hx="oninput"in document;if(!Hx){var Q1=document.createElement("div");Q1.setAttribute("oninput","return;"),Hx=typeof Q1.oninput=="function"}Vx=Hx}else Vx=!1;K1=Vx&&(!document.documentMode||9<document.documentMode)}function J1(){ip&&(ip.detachEvent("onpropertychange",Z1),sp=ip=null)}function Z1(l){if(l.propertyName==="value"&&tg(sp)){var c=[];G1(c,sp,l,_a(l)),Sa(_B,c)}}function EB(l,c,m){l==="focusin"?(J1(),ip=c,sp=m,ip.attachEvent("onpropertychange",Z1)):l==="focusout"&&J1()}function IB(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return tg(sp)}function NB(l,c){if(l==="click")return tg(c)}function kB(l,c){if(l==="input"||l==="change")return tg(c)}function CB(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var _o=typeof Object.is=="function"?Object.is:CB;function op(l,c){if(_o(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var m=Object.keys(l),w=Object.keys(c);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var T=m[w];if(!u.call(c,T)||!_o(l[T],c[T]))return!1}return!0}function Y1(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function X1(l,c){var m=Y1(l);l=0;for(var w;m;){if(m.nodeType===3){if(w=l+m.textContent.length,l<=c&&w>=c)return{node:m,offset:c-l};l=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Y1(m)}}function ek(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?ek(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function tk(){for(var l=window,c=ut();c instanceof l.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)l=c.contentWindow;else break;c=ut(l.document)}return c}function Gx(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}function TB(l){var c=tk(),m=l.focusedElem,w=l.selectionRange;if(c!==m&&m&&m.ownerDocument&&ek(m.ownerDocument.documentElement,m)){if(w!==null&&Gx(m)){if(c=w.start,l=w.end,l===void 0&&(l=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(l,m.value.length);else if(l=(c=m.ownerDocument||document)&&c.defaultView||window,l.getSelection){l=l.getSelection();var T=m.textContent.length,D=Math.min(w.start,T);w=w.end===void 0?D:Math.min(w.end,T),!l.extend&&D>w&&(T=w,w=D,D=T),T=X1(m,D);var Z=X1(m,w);T&&Z&&(l.rangeCount!==1||l.anchorNode!==T.node||l.anchorOffset!==T.offset||l.focusNode!==Z.node||l.focusOffset!==Z.offset)&&(c=c.createRange(),c.setStart(T.node,T.offset),l.removeAllRanges(),D>w?(l.addRange(c),l.extend(Z.node,Z.offset)):(c.setEnd(Z.node,Z.offset),l.addRange(c)))}}for(c=[],l=m;l=l.parentNode;)l.nodeType===1&&c.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)l=c[m],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var RB=a&&"documentMode"in document&&11>=document.documentMode,zc=null,Kx=null,ap=null,Qx=!1;function nk(l,c,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Qx||zc==null||zc!==ut(w)||(w=zc,"selectionStart"in w&&Gx(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),ap&&op(ap,w)||(ap=w,w=sg(Kx,"onSelect"),0<w.length&&(c=new Vt("onSelect","select",null,c,m),l.push({event:c,listeners:w}),c.target=zc)))}function ng(l,c){var m={};return m[l.toLowerCase()]=c.toLowerCase(),m["Webkit"+l]="webkit"+c,m["Moz"+l]="moz"+c,m}var Wc={animationend:ng("Animation","AnimationEnd"),animationiteration:ng("Animation","AnimationIteration"),animationstart:ng("Animation","AnimationStart"),transitionend:ng("Transition","TransitionEnd")},Jx={},rk={};a&&(rk=document.createElement("div").style,"AnimationEvent"in window||(delete Wc.animationend.animation,delete Wc.animationiteration.animation,delete Wc.animationstart.animation),"TransitionEvent"in window||delete Wc.transitionend.transition);function rg(l){if(Jx[l])return Jx[l];if(!Wc[l])return l;var c=Wc[l],m;for(m in c)if(c.hasOwnProperty(m)&&m in rk)return Jx[l]=c[m];return l}var ik=rg("animationend"),sk=rg("animationiteration"),ok=rg("animationstart"),ak=rg("transitionend"),lk=new Map,uk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hl(l,c){lk.set(l,c),s(c,[l])}for(var Zx=0;Zx<uk.length;Zx++){var Yx=uk[Zx],jB=Yx.toLowerCase(),OB=Yx[0].toUpperCase()+Yx.slice(1);hl(jB,"on"+OB)}hl(ik,"onAnimationEnd"),hl(sk,"onAnimationIteration"),hl(ok,"onAnimationStart"),hl("dblclick","onDoubleClick"),hl("focusin","onFocus"),hl("focusout","onBlur"),hl(ak,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qB=new Set("cancel close invalid load scroll toggle".split(" ").concat(lp));function ck(l,c,m){var w=l.type||"unknown-event";l.currentTarget=m,qc(w,c,void 0,l),l.currentTarget=null}function dk(l,c){c=(c&4)!==0;for(var m=0;m<l.length;m++){var w=l[m],T=w.event;w=w.listeners;e:{var D=void 0;if(c)for(var Z=w.length-1;0<=Z;Z--){var ge=w[Z],Se=ge.instance,He=ge.currentTarget;if(ge=ge.listener,Se!==D&&T.isPropagationStopped())break e;ck(T,ge,He),D=Se}else for(Z=0;Z<w.length;Z++){if(ge=w[Z],Se=ge.instance,He=ge.currentTarget,ge=ge.listener,Se!==D&&T.isPropagationStopped())break e;ck(T,ge,He),D=Se}}}if(ul)throw l=Qs,ul=!1,Qs=null,l}function pr(l,c){var m=c[ow];m===void 0&&(m=c[ow]=new Set);var w=l+"__bubble";m.has(w)||(fk(c,l,2,!1),m.add(w))}function Xx(l,c,m){var w=0;c&&(w|=4),fk(m,l,w,c)}var ig="_reactListening"+Math.random().toString(36).slice(2);function up(l){if(!l[ig]){l[ig]=!0,r.forEach(function(m){m!=="selectionchange"&&(qB.has(m)||Xx(m,!1,l),Xx(m,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[ig]||(c[ig]=!0,Xx("selectionchange",!1,c))}}function fk(l,c,m,w){switch(Ee(c)){case 1:var T=Re;break;case 4:T=Ke;break;default:T=Et}m=T.bind(null,c,m,l),T=void 0,!Su||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(T=!0),w?T!==void 0?l.addEventListener(c,m,{capture:!0,passive:T}):l.addEventListener(c,m,!0):T!==void 0?l.addEventListener(c,m,{passive:T}):l.addEventListener(c,m,!1)}function ew(l,c,m,w,T){var D=w;if(!(c&1)&&!(c&2)&&w!==null)e:for(;;){if(w===null)return;var Z=w.tag;if(Z===3||Z===4){var ge=w.stateNode.containerInfo;if(ge===T||ge.nodeType===8&&ge.parentNode===T)break;if(Z===4)for(Z=w.return;Z!==null;){var Se=Z.tag;if((Se===3||Se===4)&&(Se=Z.stateNode.containerInfo,Se===T||Se.nodeType===8&&Se.parentNode===T))return;Z=Z.return}for(;ge!==null;){if(Z=Tu(ge),Z===null)return;if(Se=Z.tag,Se===5||Se===6){w=D=Z;continue e}ge=ge.parentNode}}w=w.return}Sa(function(){var He=D,ht=_a(m),gt=[];e:{var ft=lk.get(l);if(ft!==void 0){var Dt=Vt,Wt=l;switch(l){case"keypress":if(re(m)===0)break e;case"keydown":case"keyup":Dt=Vn;break;case"focusin":Wt="focus",Dt=dt;break;case"focusout":Wt="blur",Dt=dt;break;case"beforeblur":case"afterblur":Dt=dt;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Dt=Bt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Dt=qe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Dt=Bx;break;case ik:case sk:case ok:Dt=wt;break;case ak:Dt=Zs;break;case"scroll":Dt=lt;break;case"wheel":Dt=eg;break;case"copy":case"cut":case"paste":Dt=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Dt=Na}var Ht=(c&4)!==0,Ur=!Ht&&l==="scroll",Fe=Ht?ft!==null?ft+"Capture":null:ft;Ht=[];for(var Ce=He,$e;Ce!==null;){$e=Ce;var vt=$e.stateNode;if($e.tag===5&&vt!==null&&($e=vt,Fe!==null&&(vt=os(Ce,Fe),vt!=null&&Ht.push(cp(Ce,vt,$e)))),Ur)break;Ce=Ce.return}0<Ht.length&&(ft=new Dt(ft,Wt,null,m,ht),gt.push({event:ft,listeners:Ht}))}}if(!(c&7)){e:{if(ft=l==="mouseover"||l==="pointerover",Dt=l==="mouseout"||l==="pointerout",ft&&m!==wo&&(Wt=m.relatedTarget||m.fromElement)&&(Tu(Wt)||Wt[ka]))break e;if((Dt||ft)&&(ft=ht.window===ht?ht:(ft=ht.ownerDocument)?ft.defaultView||ft.parentWindow:window,Dt?(Wt=m.relatedTarget||m.toElement,Dt=He,Wt=Wt?Tu(Wt):null,Wt!==null&&(Ur=Js(Wt),Wt!==Ur||Wt.tag!==5&&Wt.tag!==6)&&(Wt=null)):(Dt=null,Wt=He),Dt!==Wt)){if(Ht=Bt,vt="onMouseLeave",Fe="onMouseEnter",Ce="mouse",(l==="pointerout"||l==="pointerover")&&(Ht=Na,vt="onPointerLeave",Fe="onPointerEnter",Ce="pointer"),Ur=Dt==null?ft:Hc(Dt),$e=Wt==null?ft:Hc(Wt),ft=new Ht(vt,Ce+"leave",Dt,m,ht),ft.target=Ur,ft.relatedTarget=$e,vt=null,Tu(ht)===He&&(Ht=new Ht(Fe,Ce+"enter",Wt,m,ht),Ht.target=$e,Ht.relatedTarget=Ur,vt=Ht),Ur=vt,Dt&&Wt)t:{for(Ht=Dt,Fe=Wt,Ce=0,$e=Ht;$e;$e=Uc($e))Ce++;for($e=0,vt=Fe;vt;vt=Uc(vt))$e++;for(;0<Ce-$e;)Ht=Uc(Ht),Ce--;for(;0<$e-Ce;)Fe=Uc(Fe),$e--;for(;Ce--;){if(Ht===Fe||Fe!==null&&Ht===Fe.alternate)break t;Ht=Uc(Ht),Fe=Uc(Fe)}Ht=null}else Ht=null;Dt!==null&&pk(gt,ft,Dt,Ht,!1),Wt!==null&&Ur!==null&&pk(gt,Ur,Wt,Ht,!0)}}e:{if(ft=He?Hc(He):window,Dt=ft.nodeName&&ft.nodeName.toLowerCase(),Dt==="select"||Dt==="input"&&ft.type==="file")var Kt=SB;else if(H1(ft))if(K1)Kt=kB;else{Kt=IB;var rn=EB}else(Dt=ft.nodeName)&&Dt.toLowerCase()==="input"&&(ft.type==="checkbox"||ft.type==="radio")&&(Kt=NB);if(Kt&&(Kt=Kt(l,He))){G1(gt,Kt,m,ht);break e}rn&&rn(l,ft,He),l==="focusout"&&(rn=ft._wrapperState)&&rn.controlled&&ft.type==="number"&&be(ft,"number",ft.value)}switch(rn=He?Hc(He):window,l){case"focusin":(H1(rn)||rn.contentEditable==="true")&&(zc=rn,Kx=He,ap=null);break;case"focusout":ap=Kx=zc=null;break;case"mousedown":Qx=!0;break;case"contextmenu":case"mouseup":case"dragend":Qx=!1,nk(gt,m,ht);break;case"selectionchange":if(RB)break;case"keydown":case"keyup":nk(gt,m,ht)}var sn;if(Ux)e:{switch(l){case"compositionstart":var hn="onCompositionStart";break e;case"compositionend":hn="onCompositionEnd";break e;case"compositionupdate":hn="onCompositionUpdate";break e}hn=void 0}else Bc?U1(l,m)&&(hn="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(hn="onCompositionStart");hn&&(B1&&m.locale!=="ko"&&(Bc||hn!=="onCompositionStart"?hn==="onCompositionEnd"&&Bc&&(sn=K()):(st=ht,ae="value"in st?st.value:st.textContent,Bc=!0)),rn=sg(He,hn),0<rn.length&&(hn=new Cr(hn,l,null,m,ht),gt.push({event:hn,listeners:rn}),sn?hn.data=sn:(sn=V1(m),sn!==null&&(hn.data=sn)))),(sn=bB?vB(l,m):xB(l,m))&&(He=sg(He,"onBeforeInput"),0<He.length&&(ht=new Cr("onBeforeInput","beforeinput",null,m,ht),gt.push({event:ht,listeners:He}),ht.data=sn))}dk(gt,c)})}function cp(l,c,m){return{instance:l,listener:c,currentTarget:m}}function sg(l,c){for(var m=c+"Capture",w=[];l!==null;){var T=l,D=T.stateNode;T.tag===5&&D!==null&&(T=D,D=os(l,m),D!=null&&w.unshift(cp(l,D,T)),D=os(l,c),D!=null&&w.push(cp(l,D,T))),l=l.return}return w}function Uc(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function pk(l,c,m,w,T){for(var D=c._reactName,Z=[];m!==null&&m!==w;){var ge=m,Se=ge.alternate,He=ge.stateNode;if(Se!==null&&Se===w)break;ge.tag===5&&He!==null&&(ge=He,T?(Se=os(m,D),Se!=null&&Z.unshift(cp(m,Se,ge))):T||(Se=os(m,D),Se!=null&&Z.push(cp(m,Se,ge)))),m=m.return}Z.length!==0&&l.push({event:c,listeners:Z})}var AB=/\r\n?/g,PB=/\u0000|\uFFFD/g;function hk(l){return(typeof l=="string"?l:""+l).replace(AB,`
`).replace(PB,"")}function og(l,c,m){if(c=hk(c),hk(l)!==c&&m)throw Error(n(425))}function ag(){}var tw=null,nw=null;function rw(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var iw=typeof setTimeout=="function"?setTimeout:void 0,FB=typeof clearTimeout=="function"?clearTimeout:void 0,mk=typeof Promise=="function"?Promise:void 0,DB=typeof queueMicrotask=="function"?queueMicrotask:typeof mk<"u"?function(l){return mk.resolve(null).then(l).catch(LB)}:iw;function LB(l){setTimeout(function(){throw l})}function sw(l,c){var m=c,w=0;do{var T=m.nextSibling;if(l.removeChild(m),T&&T.nodeType===8)if(m=T.data,m==="/$"){if(w===0){l.removeChild(T),Te(c);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=T}while(m);Te(c)}function ml(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return l}function gk(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return l;c--}else m==="/$"&&c++}l=l.previousSibling}return null}var Vc=Math.random().toString(36).slice(2),Yo="__reactFiber$"+Vc,dp="__reactProps$"+Vc,ka="__reactContainer$"+Vc,ow="__reactEvents$"+Vc,MB="__reactListeners$"+Vc,$B="__reactHandles$"+Vc;function Tu(l){var c=l[Yo];if(c)return c;for(var m=l.parentNode;m;){if(c=m[ka]||m[Yo]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(l=gk(l);l!==null;){if(m=l[Yo])return m;l=gk(l)}return c}l=m,m=l.parentNode}return null}function fp(l){return l=l[Yo]||l[ka],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Hc(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function lg(l){return l[dp]||null}var aw=[],Gc=-1;function gl(l){return{current:l}}function hr(l){0>Gc||(l.current=aw[Gc],aw[Gc]=null,Gc--)}function sr(l,c){Gc++,aw[Gc]=l.current,l.current=c}var yl={},ki=gl(yl),ls=gl(!1),Ru=yl;function Kc(l,c){var m=l.type.contextTypes;if(!m)return yl;var w=l.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var T={},D;for(D in m)T[D]=c[D];return w&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=T),T}function us(l){return l=l.childContextTypes,l!=null}function ug(){hr(ls),hr(ki)}function yk(l,c,m){if(ki.current!==yl)throw Error(n(168));sr(ki,c),sr(ls,m)}function bk(l,c,m){var w=l.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var T in w)if(!(T in c))throw Error(n(108,ze(l)||"Unknown",T));return oe({},m,w)}function cg(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||yl,Ru=ki.current,sr(ki,l),sr(ls,ls.current),!0}function vk(l,c,m){var w=l.stateNode;if(!w)throw Error(n(169));m?(l=bk(l,c,Ru),w.__reactInternalMemoizedMergedChildContext=l,hr(ls),hr(ki),sr(ki,l)):hr(ls),sr(ls,m)}var Ca=null,dg=!1,lw=!1;function xk(l){Ca===null?Ca=[l]:Ca.push(l)}function BB(l){dg=!0,xk(l)}function bl(){if(!lw&&Ca!==null){lw=!0;var l=0,c=zn;try{var m=Ca;for(zn=1;l<m.length;l++){var w=m[l];do w=w(!0);while(w!==null)}Ca=null,dg=!1}catch(T){throw Ca!==null&&(Ca=Ca.slice(l+1)),Lc(Iu,bl),T}finally{zn=c,lw=!1}}return null}var Qc=[],Jc=0,fg=null,pg=0,Ys=[],Xs=0,ju=null,Ta=1,Ra="";function Ou(l,c){Qc[Jc++]=pg,Qc[Jc++]=fg,fg=l,pg=c}function wk(l,c,m){Ys[Xs++]=Ta,Ys[Xs++]=Ra,Ys[Xs++]=ju,ju=l;var w=Ta;l=Ra;var T=32-Ni(w)-1;w&=~(1<<T),m+=1;var D=32-Ni(c)+T;if(30<D){var Z=T-T%5;D=(w&(1<<Z)-1).toString(32),w>>=Z,T-=Z,Ta=1<<32-Ni(c)+T|m<<T|w,Ra=D+l}else Ta=1<<D|m<<T|w,Ra=l}function uw(l){l.return!==null&&(Ou(l,1),wk(l,1,0))}function cw(l){for(;l===fg;)fg=Qc[--Jc],Qc[Jc]=null,pg=Qc[--Jc],Qc[Jc]=null;for(;l===ju;)ju=Ys[--Xs],Ys[Xs]=null,Ra=Ys[--Xs],Ys[Xs]=null,Ta=Ys[--Xs],Ys[Xs]=null}var Ns=null,ks=null,br=!1,So=null;function _k(l,c){var m=ro(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=l,c=l.deletions,c===null?(l.deletions=[m],l.flags|=16):c.push(m)}function Sk(l,c){switch(l.tag){case 5:var m=l.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(l.stateNode=c,Ns=l,ks=ml(c.firstChild),!0):!1;case 6:return c=l.pendingProps===""||c.nodeType!==3?null:c,c!==null?(l.stateNode=c,Ns=l,ks=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=ju!==null?{id:Ta,overflow:Ra}:null,l.memoizedState={dehydrated:c,treeContext:m,retryLane:0x40000000},m=ro(18,null,null,0),m.stateNode=c,m.return=l,l.child=m,Ns=l,ks=null,!0):!1;default:return!1}}function dw(l){return(l.mode&1)!==0&&(l.flags&128)===0}function fw(l){if(br){var c=ks;if(c){var m=c;if(!Sk(l,c)){if(dw(l))throw Error(n(418));c=ml(m.nextSibling);var w=Ns;c&&Sk(l,c)?_k(w,m):(l.flags=l.flags&-4097|2,br=!1,Ns=l)}}else{if(dw(l))throw Error(n(418));l.flags=l.flags&-4097|2,br=!1,Ns=l}}}function Ek(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Ns=l}function hg(l){if(l!==Ns)return!1;if(!br)return Ek(l),br=!0,!1;var c;if((c=l.tag!==3)&&!(c=l.tag!==5)&&(c=l.type,c=c!=="head"&&c!=="body"&&!rw(l.type,l.memoizedProps)),c&&(c=ks)){if(dw(l))throw Ik(),Error(n(418));for(;c;)_k(l,c),c=ml(c.nextSibling)}if(Ek(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8){var m=l.data;if(m==="/$"){if(c===0){ks=ml(l.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}l=l.nextSibling}ks=null}}else ks=Ns?ml(l.stateNode.nextSibling):null;return!0}function Ik(){for(var l=ks;l;)l=ml(l.nextSibling)}function Zc(){ks=Ns=null,br=!1}function pw(l){So===null?So=[l]:So.push(l)}var zB=j.ReactCurrentBatchConfig;function pp(l,c,m){if(l=m.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var w=m.stateNode}if(!w)throw Error(n(147,l));var T=w,D=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===D?c.ref:(c=function(Z){var ge=T.refs;Z===null?delete ge[D]:ge[D]=Z},c._stringRef=D,c)}if(typeof l!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,l))}return l}function mg(l,c){throw l=Object.prototype.toString.call(c),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function Nk(l){var c=l._init;return c(l._payload)}function kk(l){function c(Fe,Ce){if(l){var $e=Fe.deletions;$e===null?(Fe.deletions=[Ce],Fe.flags|=16):$e.push(Ce)}}function m(Fe,Ce){if(!l)return null;for(;Ce!==null;)c(Fe,Ce),Ce=Ce.sibling;return null}function w(Fe,Ce){for(Fe=new Map;Ce!==null;)Ce.key!==null?Fe.set(Ce.key,Ce):Fe.set(Ce.index,Ce),Ce=Ce.sibling;return Fe}function T(Fe,Ce){return Fe=Nl(Fe,Ce),Fe.index=0,Fe.sibling=null,Fe}function D(Fe,Ce,$e){return Fe.index=$e,l?($e=Fe.alternate,$e!==null?($e=$e.index,$e<Ce?(Fe.flags|=2,Ce):$e):(Fe.flags|=2,Ce)):(Fe.flags|=1048576,Ce)}function Z(Fe){return l&&Fe.alternate===null&&(Fe.flags|=2),Fe}function ge(Fe,Ce,$e,vt){return Ce===null||Ce.tag!==6?(Ce=i_($e,Fe.mode,vt),Ce.return=Fe,Ce):(Ce=T(Ce,$e),Ce.return=Fe,Ce)}function Se(Fe,Ce,$e,vt){var Kt=$e.type;return Kt===$?ht(Fe,Ce,$e.props.children,vt,$e.key):Ce!==null&&(Ce.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===J&&Nk(Kt)===Ce.type)?(vt=T(Ce,$e.props),vt.ref=pp(Fe,Ce,$e),vt.return=Fe,vt):(vt=Mg($e.type,$e.key,$e.props,null,Fe.mode,vt),vt.ref=pp(Fe,Ce,$e),vt.return=Fe,vt)}function He(Fe,Ce,$e,vt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==$e.containerInfo||Ce.stateNode.implementation!==$e.implementation?(Ce=s_($e,Fe.mode,vt),Ce.return=Fe,Ce):(Ce=T(Ce,$e.children||[]),Ce.return=Fe,Ce)}function ht(Fe,Ce,$e,vt,Kt){return Ce===null||Ce.tag!==7?(Ce=$u($e,Fe.mode,vt,Kt),Ce.return=Fe,Ce):(Ce=T(Ce,$e),Ce.return=Fe,Ce)}function gt(Fe,Ce,$e){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=i_(""+Ce,Fe.mode,$e),Ce.return=Fe,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case A:return $e=Mg(Ce.type,Ce.key,Ce.props,null,Fe.mode,$e),$e.ref=pp(Fe,null,Ce),$e.return=Fe,$e;case F:return Ce=s_(Ce,Fe.mode,$e),Ce.return=Fe,Ce;case J:var vt=Ce._init;return gt(Fe,vt(Ce._payload),$e)}if(Ne(Ce)||ne(Ce))return Ce=$u(Ce,Fe.mode,$e,null),Ce.return=Fe,Ce;mg(Fe,Ce)}return null}function ft(Fe,Ce,$e,vt){var Kt=Ce!==null?Ce.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Kt!==null?null:ge(Fe,Ce,""+$e,vt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case A:return $e.key===Kt?Se(Fe,Ce,$e,vt):null;case F:return $e.key===Kt?He(Fe,Ce,$e,vt):null;case J:return Kt=$e._init,ft(Fe,Ce,Kt($e._payload),vt)}if(Ne($e)||ne($e))return Kt!==null?null:ht(Fe,Ce,$e,vt,null);mg(Fe,$e)}return null}function Dt(Fe,Ce,$e,vt,Kt){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Fe=Fe.get($e)||null,ge(Ce,Fe,""+vt,Kt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case A:return Fe=Fe.get(vt.key===null?$e:vt.key)||null,Se(Ce,Fe,vt,Kt);case F:return Fe=Fe.get(vt.key===null?$e:vt.key)||null,He(Ce,Fe,vt,Kt);case J:var rn=vt._init;return Dt(Fe,Ce,$e,rn(vt._payload),Kt)}if(Ne(vt)||ne(vt))return Fe=Fe.get($e)||null,ht(Ce,Fe,vt,Kt,null);mg(Ce,vt)}return null}function Wt(Fe,Ce,$e,vt){for(var Kt=null,rn=null,sn=Ce,hn=Ce=0,fi=null;sn!==null&&hn<$e.length;hn++){sn.index>hn?(fi=sn,sn=null):fi=sn.sibling;var $n=ft(Fe,sn,$e[hn],vt);if($n===null){sn===null&&(sn=fi);break}l&&sn&&$n.alternate===null&&c(Fe,sn),Ce=D($n,Ce,hn),rn===null?Kt=$n:rn.sibling=$n,rn=$n,sn=fi}if(hn===$e.length)return m(Fe,sn),br&&Ou(Fe,hn),Kt;if(sn===null){for(;hn<$e.length;hn++)sn=gt(Fe,$e[hn],vt),sn!==null&&(Ce=D(sn,Ce,hn),rn===null?Kt=sn:rn.sibling=sn,rn=sn);return br&&Ou(Fe,hn),Kt}for(sn=w(Fe,sn);hn<$e.length;hn++)fi=Dt(sn,Fe,hn,$e[hn],vt),fi!==null&&(l&&fi.alternate!==null&&sn.delete(fi.key===null?hn:fi.key),Ce=D(fi,Ce,hn),rn===null?Kt=fi:rn.sibling=fi,rn=fi);return l&&sn.forEach(function(kl){return c(Fe,kl)}),br&&Ou(Fe,hn),Kt}function Ht(Fe,Ce,$e,vt){var Kt=ne($e);if(typeof Kt!="function")throw Error(n(150));if($e=Kt.call($e),$e==null)throw Error(n(151));for(var rn=Kt=null,sn=Ce,hn=Ce=0,fi=null,$n=$e.next();sn!==null&&!$n.done;hn++,$n=$e.next()){sn.index>hn?(fi=sn,sn=null):fi=sn.sibling;var kl=ft(Fe,sn,$n.value,vt);if(kl===null){sn===null&&(sn=fi);break}l&&sn&&kl.alternate===null&&c(Fe,sn),Ce=D(kl,Ce,hn),rn===null?Kt=kl:rn.sibling=kl,rn=kl,sn=fi}if($n.done)return m(Fe,sn),br&&Ou(Fe,hn),Kt;if(sn===null){for(;!$n.done;hn++,$n=$e.next())$n=gt(Fe,$n.value,vt),$n!==null&&(Ce=D($n,Ce,hn),rn===null?Kt=$n:rn.sibling=$n,rn=$n);return br&&Ou(Fe,hn),Kt}for(sn=w(Fe,sn);!$n.done;hn++,$n=$e.next())$n=Dt(sn,Fe,hn,$n.value,vt),$n!==null&&(l&&$n.alternate!==null&&sn.delete($n.key===null?hn:$n.key),Ce=D($n,Ce,hn),rn===null?Kt=$n:rn.sibling=$n,rn=$n);return l&&sn.forEach(function(x4){return c(Fe,x4)}),br&&Ou(Fe,hn),Kt}function Ur(Fe,Ce,$e,vt){if(typeof $e=="object"&&$e!==null&&$e.type===$&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case A:e:{for(var Kt=$e.key,rn=Ce;rn!==null;){if(rn.key===Kt){if(Kt=$e.type,Kt===$){if(rn.tag===7){m(Fe,rn.sibling),Ce=T(rn,$e.props.children),Ce.return=Fe,Fe=Ce;break e}}else if(rn.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===J&&Nk(Kt)===rn.type){m(Fe,rn.sibling),Ce=T(rn,$e.props),Ce.ref=pp(Fe,rn,$e),Ce.return=Fe,Fe=Ce;break e}m(Fe,rn);break}else c(Fe,rn);rn=rn.sibling}$e.type===$?(Ce=$u($e.props.children,Fe.mode,vt,$e.key),Ce.return=Fe,Fe=Ce):(vt=Mg($e.type,$e.key,$e.props,null,Fe.mode,vt),vt.ref=pp(Fe,Ce,$e),vt.return=Fe,Fe=vt)}return Z(Fe);case F:e:{for(rn=$e.key;Ce!==null;){if(Ce.key===rn)if(Ce.tag===4&&Ce.stateNode.containerInfo===$e.containerInfo&&Ce.stateNode.implementation===$e.implementation){m(Fe,Ce.sibling),Ce=T(Ce,$e.children||[]),Ce.return=Fe,Fe=Ce;break e}else{m(Fe,Ce);break}else c(Fe,Ce);Ce=Ce.sibling}Ce=s_($e,Fe.mode,vt),Ce.return=Fe,Fe=Ce}return Z(Fe);case J:return rn=$e._init,Ur(Fe,Ce,rn($e._payload),vt)}if(Ne($e))return Wt(Fe,Ce,$e,vt);if(ne($e))return Ht(Fe,Ce,$e,vt);mg(Fe,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,Ce!==null&&Ce.tag===6?(m(Fe,Ce.sibling),Ce=T(Ce,$e),Ce.return=Fe,Fe=Ce):(m(Fe,Ce),Ce=i_($e,Fe.mode,vt),Ce.return=Fe,Fe=Ce),Z(Fe)):m(Fe,Ce)}return Ur}var Yc=kk(!0),Ck=kk(!1),gg=gl(null),yg=null,Xc=null,hw=null;function mw(){hw=Xc=yg=null}function gw(l){var c=gg.current;hr(gg),l._currentValue=c}function yw(l,c,m){for(;l!==null;){var w=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),l===m)break;l=l.return}}function ed(l,c){yg=l,hw=Xc=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&c&&(cs=!0),l.firstContext=null)}function eo(l){var c=l._currentValue;if(hw!==l)if(l={context:l,memoizedValue:c,next:null},Xc===null){if(yg===null)throw Error(n(308));Xc=l,yg.dependencies={lanes:0,firstContext:l}}else Xc=Xc.next=l;return c}var qu=null;function bw(l){qu===null?qu=[l]:qu.push(l)}function Tk(l,c,m,w){var T=c.interleaved;return T===null?(m.next=m,bw(c)):(m.next=T.next,T.next=m),c.interleaved=m,ja(l,w)}function ja(l,c){l.lanes|=c;var m=l.alternate;for(m!==null&&(m.lanes|=c),m=l,l=l.return;l!==null;)l.childLanes|=c,m=l.alternate,m!==null&&(m.childLanes|=c),m=l,l=l.return;return m.tag===3?m.stateNode:null}var vl=!1;function vw(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rk(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Oa(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function xl(l,c,m){var w=l.updateQueue;if(w===null)return null;if(w=w.shared,Dn&2){var T=w.pending;return T===null?c.next=c:(c.next=T.next,T.next=c),w.pending=c,ja(l,m)}return T=w.interleaved,T===null?(c.next=c,bw(w)):(c.next=T.next,T.next=c),w.interleaved=c,ja(l,m)}function bg(l,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var w=c.lanes;w&=l.pendingLanes,m|=w,c.lanes=m,Yf(l,m)}}function jk(l,c){var m=l.updateQueue,w=l.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var T=null,D=null;if(m=m.firstBaseUpdate,m!==null){do{var Z={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};D===null?T=D=Z:D=D.next=Z,m=m.next}while(m!==null);D===null?T=D=c:D=D.next=c}else T=D=c;m={baseState:w.baseState,firstBaseUpdate:T,lastBaseUpdate:D,shared:w.shared,effects:w.effects},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=c:l.next=c,m.lastBaseUpdate=c}function vg(l,c,m,w){var T=l.updateQueue;vl=!1;var D=T.firstBaseUpdate,Z=T.lastBaseUpdate,ge=T.shared.pending;if(ge!==null){T.shared.pending=null;var Se=ge,He=Se.next;Se.next=null,Z===null?D=He:Z.next=He,Z=Se;var ht=l.alternate;ht!==null&&(ht=ht.updateQueue,ge=ht.lastBaseUpdate,ge!==Z&&(ge===null?ht.firstBaseUpdate=He:ge.next=He,ht.lastBaseUpdate=Se))}if(D!==null){var gt=T.baseState;Z=0,ht=He=Se=null,ge=D;do{var ft=ge.lane,Dt=ge.eventTime;if((w&ft)===ft){ht!==null&&(ht=ht.next={eventTime:Dt,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var Wt=l,Ht=ge;switch(ft=c,Dt=m,Ht.tag){case 1:if(Wt=Ht.payload,typeof Wt=="function"){gt=Wt.call(Dt,gt,ft);break e}gt=Wt;break e;case 3:Wt.flags=Wt.flags&-65537|128;case 0:if(Wt=Ht.payload,ft=typeof Wt=="function"?Wt.call(Dt,gt,ft):Wt,ft==null)break e;gt=oe({},gt,ft);break e;case 2:vl=!0}}ge.callback!==null&&ge.lane!==0&&(l.flags|=64,ft=T.effects,ft===null?T.effects=[ge]:ft.push(ge))}else Dt={eventTime:Dt,lane:ft,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},ht===null?(He=ht=Dt,Se=gt):ht=ht.next=Dt,Z|=ft;if(ge=ge.next,ge===null){if(ge=T.shared.pending,ge===null)break;ft=ge,ge=ft.next,ft.next=null,T.lastBaseUpdate=ft,T.shared.pending=null}}while(!0);if(ht===null&&(Se=gt),T.baseState=Se,T.firstBaseUpdate=He,T.lastBaseUpdate=ht,c=T.shared.interleaved,c!==null){T=c;do Z|=T.lane,T=T.next;while(T!==c)}else D===null&&(T.shared.lanes=0);Fu|=Z,l.lanes=Z,l.memoizedState=gt}}function Ok(l,c,m){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var w=l[c],T=w.callback;if(T!==null){if(w.callback=null,w=m,typeof T!="function")throw Error(n(191,T));T.call(w)}}}var hp={},Xo=gl(hp),mp=gl(hp),gp=gl(hp);function Au(l){if(l===hp)throw Error(n(174));return l}function xw(l,c){switch(sr(gp,c),sr(mp,l),sr(Xo,hp),l=c.nodeType,l){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Zt(null,"");break;default:l=l===8?c.parentNode:c,c=l.namespaceURI||null,l=l.tagName,c=Zt(c,l)}hr(Xo),sr(Xo,c)}function td(){hr(Xo),hr(mp),hr(gp)}function qk(l){Au(gp.current);var c=Au(Xo.current),m=Zt(c,l.type);c!==m&&(sr(mp,l),sr(Xo,m))}function ww(l){mp.current===l&&(hr(Xo),hr(mp))}var Tr=gl(0);function xg(l){for(var c=l;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var _w=[];function Sw(){for(var l=0;l<_w.length;l++)_w[l]._workInProgressVersionPrimary=null;_w.length=0}var wg=j.ReactCurrentDispatcher,Ew=j.ReactCurrentBatchConfig,Pu=0,Rr=null,oi=null,ci=null,_g=!1,yp=!1,bp=0,WB=0;function Ci(){throw Error(n(321))}function Iw(l,c){if(c===null)return!1;for(var m=0;m<c.length&&m<l.length;m++)if(!_o(l[m],c[m]))return!1;return!0}function Nw(l,c,m,w,T,D){if(Pu=D,Rr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,wg.current=l===null||l.memoizedState===null?GB:KB,l=m(w,T),yp){D=0;do{if(yp=!1,bp=0,25<=D)throw Error(n(301));D+=1,ci=oi=null,c.updateQueue=null,wg.current=QB,l=m(w,T)}while(yp)}if(wg.current=Ig,c=oi!==null&&oi.next!==null,Pu=0,ci=oi=Rr=null,_g=!1,c)throw Error(n(300));return l}function kw(){var l=bp!==0;return bp=0,l}function ea(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?Rr.memoizedState=ci=l:ci=ci.next=l,ci}function to(){if(oi===null){var l=Rr.alternate;l=l!==null?l.memoizedState:null}else l=oi.next;var c=ci===null?Rr.memoizedState:ci.next;if(c!==null)ci=c,oi=l;else{if(l===null)throw Error(n(310));oi=l,l={memoizedState:oi.memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},ci===null?Rr.memoizedState=ci=l:ci=ci.next=l}return ci}function vp(l,c){return typeof c=="function"?c(l):c}function Cw(l){var c=to(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=l;var w=oi,T=w.baseQueue,D=m.pending;if(D!==null){if(T!==null){var Z=T.next;T.next=D.next,D.next=Z}w.baseQueue=T=D,m.pending=null}if(T!==null){D=T.next,w=w.baseState;var ge=Z=null,Se=null,He=D;do{var ht=He.lane;if((Pu&ht)===ht)Se!==null&&(Se=Se.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),w=He.hasEagerState?He.eagerState:l(w,He.action);else{var gt={lane:ht,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Se===null?(ge=Se=gt,Z=w):Se=Se.next=gt,Rr.lanes|=ht,Fu|=ht}He=He.next}while(He!==null&&He!==D);Se===null?Z=w:Se.next=ge,_o(w,c.memoizedState)||(cs=!0),c.memoizedState=w,c.baseState=Z,c.baseQueue=Se,m.lastRenderedState=w}if(l=m.interleaved,l!==null){T=l;do D=T.lane,Rr.lanes|=D,Fu|=D,T=T.next;while(T!==l)}else T===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function Tw(l){var c=to(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=l;var w=m.dispatch,T=m.pending,D=c.memoizedState;if(T!==null){m.pending=null;var Z=T=T.next;do D=l(D,Z.action),Z=Z.next;while(Z!==T);_o(D,c.memoizedState)||(cs=!0),c.memoizedState=D,c.baseQueue===null&&(c.baseState=D),m.lastRenderedState=D}return[D,w]}function Ak(){}function Pk(l,c){var m=Rr,w=to(),T=c(),D=!_o(w.memoizedState,T);if(D&&(w.memoizedState=T,cs=!0),w=w.queue,Rw(Lk.bind(null,m,w,l),[l]),w.getSnapshot!==c||D||ci!==null&&ci.memoizedState.tag&1){if(m.flags|=2048,xp(9,Dk.bind(null,m,w,T,c),void 0,null),di===null)throw Error(n(349));Pu&30||Fk(m,c,T)}return T}function Fk(l,c,m){l.flags|=16384,l={getSnapshot:c,value:m},c=Rr.updateQueue,c===null?(c={lastEffect:null,stores:null},Rr.updateQueue=c,c.stores=[l]):(m=c.stores,m===null?c.stores=[l]:m.push(l))}function Dk(l,c,m,w){c.value=m,c.getSnapshot=w,Mk(c)&&$k(l)}function Lk(l,c,m){return m(function(){Mk(c)&&$k(l)})}function Mk(l){var c=l.getSnapshot;l=l.value;try{var m=c();return!_o(l,m)}catch{return!0}}function $k(l){var c=ja(l,1);c!==null&&ko(c,l,1,-1)}function Bk(l){var c=ea();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vp,lastRenderedState:l},c.queue=l,l=l.dispatch=HB.bind(null,Rr,l),[c.memoizedState,l]}function xp(l,c,m,w){return l={tag:l,create:c,destroy:m,deps:w,next:null},c=Rr.updateQueue,c===null?(c={lastEffect:null,stores:null},Rr.updateQueue=c,c.lastEffect=l.next=l):(m=c.lastEffect,m===null?c.lastEffect=l.next=l:(w=m.next,m.next=l,l.next=w,c.lastEffect=l)),l}function zk(){return to().memoizedState}function Sg(l,c,m,w){var T=ea();Rr.flags|=l,T.memoizedState=xp(1|c,m,void 0,w===void 0?null:w)}function Eg(l,c,m,w){var T=to();w=w===void 0?null:w;var D=void 0;if(oi!==null){var Z=oi.memoizedState;if(D=Z.destroy,w!==null&&Iw(w,Z.deps)){T.memoizedState=xp(c,m,D,w);return}}Rr.flags|=l,T.memoizedState=xp(1|c,m,D,w)}function Wk(l,c){return Sg(8390656,8,l,c)}function Rw(l,c){return Eg(2048,8,l,c)}function Uk(l,c){return Eg(4,2,l,c)}function Vk(l,c){return Eg(4,4,l,c)}function Hk(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function Gk(l,c,m){return m=m!=null?m.concat([l]):null,Eg(4,4,Hk.bind(null,c,l),m)}function jw(){}function Kk(l,c){var m=to();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&Iw(c,w[1])?w[0]:(m.memoizedState=[l,c],l)}function Qk(l,c){var m=to();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&Iw(c,w[1])?w[0]:(l=l(),m.memoizedState=[l,c],l)}function Jk(l,c,m){return Pu&21?(_o(m,c)||(m=Ym(),Rr.lanes|=m,Fu|=m,l.baseState=!0),c):(l.baseState&&(l.baseState=!1,cs=!0),l.memoizedState=m)}function UB(l,c){var m=zn;zn=m!==0&&4>m?m:4,l(!0);var w=Ew.transition;Ew.transition={};try{l(!1),c()}finally{zn=m,Ew.transition=w}}function Zk(){return to().memoizedState}function VB(l,c,m){var w=El(l);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},Yk(l))Xk(c,m);else if(m=Tk(l,c,m,w),m!==null){var T=Gi();ko(m,l,w,T),eC(m,c,w)}}function HB(l,c,m){var w=El(l),T={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(Yk(l))Xk(c,T);else{var D=l.alternate;if(l.lanes===0&&(D===null||D.lanes===0)&&(D=c.lastRenderedReducer,D!==null))try{var Z=c.lastRenderedState,ge=D(Z,m);if(T.hasEagerState=!0,T.eagerState=ge,_o(ge,Z)){var Se=c.interleaved;Se===null?(T.next=T,bw(c)):(T.next=Se.next,Se.next=T),c.interleaved=T;return}}catch{}finally{}m=Tk(l,c,T,w),m!==null&&(T=Gi(),ko(m,l,w,T),eC(m,c,w))}}function Yk(l){var c=l.alternate;return l===Rr||c!==null&&c===Rr}function Xk(l,c){yp=_g=!0;var m=l.pending;m===null?c.next=c:(c.next=m.next,m.next=c),l.pending=c}function eC(l,c,m){if(m&4194240){var w=c.lanes;w&=l.pendingLanes,m|=w,c.lanes=m,Yf(l,m)}}var Ig={readContext:eo,useCallback:Ci,useContext:Ci,useEffect:Ci,useImperativeHandle:Ci,useInsertionEffect:Ci,useLayoutEffect:Ci,useMemo:Ci,useReducer:Ci,useRef:Ci,useState:Ci,useDebugValue:Ci,useDeferredValue:Ci,useTransition:Ci,useMutableSource:Ci,useSyncExternalStore:Ci,useId:Ci,unstable_isNewReconciler:!1},GB={readContext:eo,useCallback:function(l,c){return ea().memoizedState=[l,c===void 0?null:c],l},useContext:eo,useEffect:Wk,useImperativeHandle:function(l,c,m){return m=m!=null?m.concat([l]):null,Sg(4194308,4,Hk.bind(null,c,l),m)},useLayoutEffect:function(l,c){return Sg(4194308,4,l,c)},useInsertionEffect:function(l,c){return Sg(4,2,l,c)},useMemo:function(l,c){var m=ea();return c=c===void 0?null:c,l=l(),m.memoizedState=[l,c],l},useReducer:function(l,c,m){var w=ea();return c=m!==void 0?m(c):c,w.memoizedState=w.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},w.queue=l,l=l.dispatch=VB.bind(null,Rr,l),[w.memoizedState,l]},useRef:function(l){var c=ea();return l={current:l},c.memoizedState=l},useState:Bk,useDebugValue:jw,useDeferredValue:function(l){return ea().memoizedState=l},useTransition:function(){var l=Bk(!1),c=l[0];return l=UB.bind(null,l[1]),ea().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,m){var w=Rr,T=ea();if(br){if(m===void 0)throw Error(n(407));m=m()}else{if(m=c(),di===null)throw Error(n(349));Pu&30||Fk(w,c,m)}T.memoizedState=m;var D={value:m,getSnapshot:c};return T.queue=D,Wk(Lk.bind(null,w,D,l),[l]),w.flags|=2048,xp(9,Dk.bind(null,w,D,m,c),void 0,null),m},useId:function(){var l=ea(),c=di.identifierPrefix;if(br){var m=Ra,w=Ta;m=(w&~(1<<32-Ni(w)-1)).toString(32)+m,c=":"+c+"R"+m,m=bp++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=WB++,c=":"+c+"r"+m.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},KB={readContext:eo,useCallback:Kk,useContext:eo,useEffect:Rw,useImperativeHandle:Gk,useInsertionEffect:Uk,useLayoutEffect:Vk,useMemo:Qk,useReducer:Cw,useRef:zk,useState:function(){return Cw(vp)},useDebugValue:jw,useDeferredValue:function(l){var c=to();return Jk(c,oi.memoizedState,l)},useTransition:function(){var l=Cw(vp)[0],c=to().memoizedState;return[l,c]},useMutableSource:Ak,useSyncExternalStore:Pk,useId:Zk,unstable_isNewReconciler:!1},QB={readContext:eo,useCallback:Kk,useContext:eo,useEffect:Rw,useImperativeHandle:Gk,useInsertionEffect:Uk,useLayoutEffect:Vk,useMemo:Qk,useReducer:Tw,useRef:zk,useState:function(){return Tw(vp)},useDebugValue:jw,useDeferredValue:function(l){var c=to();return oi===null?c.memoizedState=l:Jk(c,oi.memoizedState,l)},useTransition:function(){var l=Tw(vp)[0],c=to().memoizedState;return[l,c]},useMutableSource:Ak,useSyncExternalStore:Pk,useId:Zk,unstable_isNewReconciler:!1};function Eo(l,c){if(l&&l.defaultProps){c=oe({},c),l=l.defaultProps;for(var m in l)c[m]===void 0&&(c[m]=l[m]);return c}return c}function Ow(l,c,m,w){c=l.memoizedState,m=m(w,c),m=m==null?c:oe({},c,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var Ng={isMounted:function(l){return(l=l._reactInternals)?Js(l)===l:!1},enqueueSetState:function(l,c,m){l=l._reactInternals;var w=Gi(),T=El(l),D=Oa(w,T);D.payload=c,m!=null&&(D.callback=m),c=xl(l,D,T),c!==null&&(ko(c,l,T,w),bg(c,l,T))},enqueueReplaceState:function(l,c,m){l=l._reactInternals;var w=Gi(),T=El(l),D=Oa(w,T);D.tag=1,D.payload=c,m!=null&&(D.callback=m),c=xl(l,D,T),c!==null&&(ko(c,l,T,w),bg(c,l,T))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var m=Gi(),w=El(l),T=Oa(m,w);T.tag=2,c!=null&&(T.callback=c),c=xl(l,T,w),c!==null&&(ko(c,l,w,m),bg(c,l,w))}};function tC(l,c,m,w,T,D,Z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(w,D,Z):c.prototype&&c.prototype.isPureReactComponent?!op(m,w)||!op(T,D):!0}function nC(l,c,m){var w=!1,T=yl,D=c.contextType;return typeof D=="object"&&D!==null?D=eo(D):(T=us(c)?Ru:ki.current,w=c.contextTypes,D=(w=w!=null)?Kc(l,T):yl),c=new c(m,D),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Ng,l.stateNode=c,c._reactInternals=l,w&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=T,l.__reactInternalMemoizedMaskedChildContext=D),c}function rC(l,c,m,w){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,w),c.state!==l&&Ng.enqueueReplaceState(c,c.state,null)}function qw(l,c,m,w){var T=l.stateNode;T.props=m,T.state=l.memoizedState,T.refs={},vw(l);var D=c.contextType;typeof D=="object"&&D!==null?T.context=eo(D):(D=us(c)?Ru:ki.current,T.context=Kc(l,D)),T.state=l.memoizedState,D=c.getDerivedStateFromProps,typeof D=="function"&&(Ow(l,c,D,m),T.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(c=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),c!==T.state&&Ng.enqueueReplaceState(T,T.state,null),vg(l,m,T,w),T.state=l.memoizedState),typeof T.componentDidMount=="function"&&(l.flags|=4194308)}function nd(l,c){try{var m="",w=c;do m+=we(w),w=w.return;while(w);var T=m}catch(D){T=`
Error generating stack: `+D.message+`
`+D.stack}return{value:l,source:c,stack:T,digest:null}}function Aw(l,c,m){return{value:l,source:null,stack:m??null,digest:c??null}}function Pw(l,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var JB=typeof WeakMap=="function"?WeakMap:Map;function iC(l,c,m){m=Oa(-1,m),m.tag=3,m.payload={element:null};var w=c.value;return m.callback=function(){qg||(qg=!0,Jw=w),Pw(l,c)},m}function sC(l,c,m){m=Oa(-1,m),m.tag=3;var w=l.type.getDerivedStateFromError;if(typeof w=="function"){var T=c.value;m.payload=function(){return w(T)},m.callback=function(){Pw(l,c)}}var D=l.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(m.callback=function(){Pw(l,c),typeof w!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var Z=c.stack;this.componentDidCatch(c.value,{componentStack:Z!==null?Z:""})}),m}function oC(l,c,m){var w=l.pingCache;if(w===null){w=l.pingCache=new JB;var T=new Set;w.set(c,T)}else T=w.get(c),T===void 0&&(T=new Set,w.set(c,T));T.has(m)||(T.add(m),l=c4.bind(null,l,c,m),c.then(l,l))}function aC(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function lC(l,c,m,w,T){return l.mode&1?(l.flags|=65536,l.lanes=T,l):(l===c?l.flags|=65536:(l.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=Oa(-1,1),c.tag=2,xl(m,c,1))),m.lanes|=1),l)}var ZB=j.ReactCurrentOwner,cs=!1;function Hi(l,c,m,w){c.child=l===null?Ck(c,null,m,w):Yc(c,l.child,m,w)}function uC(l,c,m,w,T){m=m.render;var D=c.ref;return ed(c,T),w=Nw(l,c,m,w,D,T),m=kw(),l!==null&&!cs?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~T,qa(l,c,T)):(br&&m&&uw(c),c.flags|=1,Hi(l,c,w,T),c.child)}function cC(l,c,m,w,T){if(l===null){var D=m.type;return typeof D=="function"&&!r_(D)&&D.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=D,dC(l,c,D,w,T)):(l=Mg(m.type,null,w,c,c.mode,T),l.ref=c.ref,l.return=c,c.child=l)}if(D=l.child,!(l.lanes&T)){var Z=D.memoizedProps;if(m=m.compare,m=m!==null?m:op,m(Z,w)&&l.ref===c.ref)return qa(l,c,T)}return c.flags|=1,l=Nl(D,w),l.ref=c.ref,l.return=c,c.child=l}function dC(l,c,m,w,T){if(l!==null){var D=l.memoizedProps;if(op(D,w)&&l.ref===c.ref)if(cs=!1,c.pendingProps=w=D,(l.lanes&T)!==0)l.flags&131072&&(cs=!0);else return c.lanes=l.lanes,qa(l,c,T)}return Fw(l,c,m,w,T)}function fC(l,c,m){var w=c.pendingProps,T=w.children,D=l!==null?l.memoizedState:null;if(w.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},sr(id,Cs),Cs|=m;else{if(!(m&0x40000000))return l=D!==null?D.baseLanes|m:m,c.lanes=c.childLanes=0x40000000,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,sr(id,Cs),Cs|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=D!==null?D.baseLanes:m,sr(id,Cs),Cs|=w}else D!==null?(w=D.baseLanes|m,c.memoizedState=null):w=m,sr(id,Cs),Cs|=w;return Hi(l,c,T,m),c.child}function pC(l,c){var m=c.ref;(l===null&&m!==null||l!==null&&l.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function Fw(l,c,m,w,T){var D=us(m)?Ru:ki.current;return D=Kc(c,D),ed(c,T),m=Nw(l,c,m,w,D,T),w=kw(),l!==null&&!cs?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~T,qa(l,c,T)):(br&&w&&uw(c),c.flags|=1,Hi(l,c,m,T),c.child)}function hC(l,c,m,w,T){if(us(m)){var D=!0;cg(c)}else D=!1;if(ed(c,T),c.stateNode===null)Cg(l,c),nC(c,m,w),qw(c,m,w,T),w=!0;else if(l===null){var Z=c.stateNode,ge=c.memoizedProps;Z.props=ge;var Se=Z.context,He=m.contextType;typeof He=="object"&&He!==null?He=eo(He):(He=us(m)?Ru:ki.current,He=Kc(c,He));var ht=m.getDerivedStateFromProps,gt=typeof ht=="function"||typeof Z.getSnapshotBeforeUpdate=="function";gt||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ge!==w||Se!==He)&&rC(c,Z,w,He),vl=!1;var ft=c.memoizedState;Z.state=ft,vg(c,w,Z,T),Se=c.memoizedState,ge!==w||ft!==Se||ls.current||vl?(typeof ht=="function"&&(Ow(c,m,ht,w),Se=c.memoizedState),(ge=vl||tC(c,m,ge,w,ft,Se,He))?(gt||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(c.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=Se),Z.props=w,Z.state=Se,Z.context=He,w=ge):(typeof Z.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{Z=c.stateNode,Rk(l,c),ge=c.memoizedProps,He=c.type===c.elementType?ge:Eo(c.type,ge),Z.props=He,gt=c.pendingProps,ft=Z.context,Se=m.contextType,typeof Se=="object"&&Se!==null?Se=eo(Se):(Se=us(m)?Ru:ki.current,Se=Kc(c,Se));var Dt=m.getDerivedStateFromProps;(ht=typeof Dt=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ge!==gt||ft!==Se)&&rC(c,Z,w,Se),vl=!1,ft=c.memoizedState,Z.state=ft,vg(c,w,Z,T);var Wt=c.memoizedState;ge!==gt||ft!==Wt||ls.current||vl?(typeof Dt=="function"&&(Ow(c,m,Dt,w),Wt=c.memoizedState),(He=vl||tC(c,m,He,w,ft,Wt,Se)||!1)?(ht||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(w,Wt,Se),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(w,Wt,Se)),typeof Z.componentDidUpdate=="function"&&(c.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof Z.componentDidUpdate!="function"||ge===l.memoizedProps&&ft===l.memoizedState||(c.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ge===l.memoizedProps&&ft===l.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=Wt),Z.props=w,Z.state=Wt,Z.context=Se,w=He):(typeof Z.componentDidUpdate!="function"||ge===l.memoizedProps&&ft===l.memoizedState||(c.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ge===l.memoizedProps&&ft===l.memoizedState||(c.flags|=1024),w=!1)}return Dw(l,c,m,w,D,T)}function Dw(l,c,m,w,T,D){pC(l,c);var Z=(c.flags&128)!==0;if(!w&&!Z)return T&&vk(c,m,!1),qa(l,c,D);w=c.stateNode,ZB.current=c;var ge=Z&&typeof m.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,l!==null&&Z?(c.child=Yc(c,l.child,null,D),c.child=Yc(c,null,ge,D)):Hi(l,c,ge,D),c.memoizedState=w.state,T&&vk(c,m,!0),c.child}function mC(l){var c=l.stateNode;c.pendingContext?yk(l,c.pendingContext,c.pendingContext!==c.context):c.context&&yk(l,c.context,!1),xw(l,c.containerInfo)}function gC(l,c,m,w,T){return Zc(),pw(T),c.flags|=256,Hi(l,c,m,w),c.child}var Lw={dehydrated:null,treeContext:null,retryLane:0};function Mw(l){return{baseLanes:l,cachePool:null,transitions:null}}function yC(l,c,m){var w=c.pendingProps,T=Tr.current,D=!1,Z=(c.flags&128)!==0,ge;if((ge=Z)||(ge=l!==null&&l.memoizedState===null?!1:(T&2)!==0),ge?(D=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(T|=1),sr(Tr,T&1),l===null)return fw(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(c.mode&1?l.data==="$!"?c.lanes=8:c.lanes=0x40000000:c.lanes=1,null):(Z=w.children,l=w.fallback,D?(w=c.mode,D=c.child,Z={mode:"hidden",children:Z},!(w&1)&&D!==null?(D.childLanes=0,D.pendingProps=Z):D=$g(Z,w,0,null),l=$u(l,w,m,null),D.return=c,l.return=c,D.sibling=l,c.child=D,c.child.memoizedState=Mw(m),c.memoizedState=Lw,l):$w(c,Z));if(T=l.memoizedState,T!==null&&(ge=T.dehydrated,ge!==null))return YB(l,c,Z,w,ge,T,m);if(D){D=w.fallback,Z=c.mode,T=l.child,ge=T.sibling;var Se={mode:"hidden",children:w.children};return!(Z&1)&&c.child!==T?(w=c.child,w.childLanes=0,w.pendingProps=Se,c.deletions=null):(w=Nl(T,Se),w.subtreeFlags=T.subtreeFlags&0xe00000),ge!==null?D=Nl(ge,D):(D=$u(D,Z,m,null),D.flags|=2),D.return=c,w.return=c,w.sibling=D,c.child=w,w=D,D=c.child,Z=l.child.memoizedState,Z=Z===null?Mw(m):{baseLanes:Z.baseLanes|m,cachePool:null,transitions:Z.transitions},D.memoizedState=Z,D.childLanes=l.childLanes&~m,c.memoizedState=Lw,w}return D=l.child,l=D.sibling,w=Nl(D,{mode:"visible",children:w.children}),!(c.mode&1)&&(w.lanes=m),w.return=c,w.sibling=null,l!==null&&(m=c.deletions,m===null?(c.deletions=[l],c.flags|=16):m.push(l)),c.child=w,c.memoizedState=null,w}function $w(l,c){return c=$g({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function kg(l,c,m,w){return w!==null&&pw(w),Yc(c,l.child,null,m),l=$w(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function YB(l,c,m,w,T,D,Z){if(m)return c.flags&256?(c.flags&=-257,w=Aw(Error(n(422))),kg(l,c,Z,w)):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(D=w.fallback,T=c.mode,w=$g({mode:"visible",children:w.children},T,0,null),D=$u(D,T,Z,null),D.flags|=2,w.return=c,D.return=c,w.sibling=D,c.child=w,c.mode&1&&Yc(c,l.child,null,Z),c.child.memoizedState=Mw(Z),c.memoizedState=Lw,D);if(!(c.mode&1))return kg(l,c,Z,null);if(T.data==="$!"){if(w=T.nextSibling&&T.nextSibling.dataset,w)var ge=w.dgst;return w=ge,D=Error(n(419)),w=Aw(D,w,void 0),kg(l,c,Z,w)}if(ge=(Z&l.childLanes)!==0,cs||ge){if(w=di,w!==null){switch(Z&-Z){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:T=32;break;case 0x20000000:T=0x10000000;break;default:T=0}T=T&(w.suspendedLanes|Z)?0:T,T!==0&&T!==D.retryLane&&(D.retryLane=T,ja(l,T),ko(w,l,T,-1))}return n_(),w=Aw(Error(n(421))),kg(l,c,Z,w)}return T.data==="$?"?(c.flags|=128,c.child=l.child,c=d4.bind(null,l),T._reactRetry=c,null):(l=D.treeContext,ks=ml(T.nextSibling),Ns=c,br=!0,So=null,l!==null&&(Ys[Xs++]=Ta,Ys[Xs++]=Ra,Ys[Xs++]=ju,Ta=l.id,Ra=l.overflow,ju=c),c=$w(c,w.children),c.flags|=4096,c)}function bC(l,c,m){l.lanes|=c;var w=l.alternate;w!==null&&(w.lanes|=c),yw(l.return,c,m)}function Bw(l,c,m,w,T){var D=l.memoizedState;D===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:T}:(D.isBackwards=c,D.rendering=null,D.renderingStartTime=0,D.last=w,D.tail=m,D.tailMode=T)}function vC(l,c,m){var w=c.pendingProps,T=w.revealOrder,D=w.tail;if(Hi(l,c,w.children,m),w=Tr.current,w&2)w=w&1|2,c.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&bC(l,m,c);else if(l.tag===19)bC(l,m,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}w&=1}if(sr(Tr,w),!(c.mode&1))c.memoizedState=null;else switch(T){case"forwards":for(m=c.child,T=null;m!==null;)l=m.alternate,l!==null&&xg(l)===null&&(T=m),m=m.sibling;m=T,m===null?(T=c.child,c.child=null):(T=m.sibling,m.sibling=null),Bw(c,!1,T,m,D);break;case"backwards":for(m=null,T=c.child,c.child=null;T!==null;){if(l=T.alternate,l!==null&&xg(l)===null){c.child=T;break}l=T.sibling,T.sibling=m,m=T,T=l}Bw(c,!0,m,null,D);break;case"together":Bw(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Cg(l,c){!(c.mode&1)&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function qa(l,c,m){if(l!==null&&(c.dependencies=l.dependencies),Fu|=c.lanes,!(m&c.childLanes))return null;if(l!==null&&c.child!==l.child)throw Error(n(153));if(c.child!==null){for(l=c.child,m=Nl(l,l.pendingProps),c.child=m,m.return=c;l.sibling!==null;)l=l.sibling,m=m.sibling=Nl(l,l.pendingProps),m.return=c;m.sibling=null}return c.child}function XB(l,c,m){switch(c.tag){case 3:mC(c),Zc();break;case 5:qk(c);break;case 1:us(c.type)&&cg(c);break;case 4:xw(c,c.stateNode.containerInfo);break;case 10:var w=c.type._context,T=c.memoizedProps.value;sr(gg,w._currentValue),w._currentValue=T;break;case 13:if(w=c.memoizedState,w!==null)return w.dehydrated!==null?(sr(Tr,Tr.current&1),c.flags|=128,null):m&c.child.childLanes?yC(l,c,m):(sr(Tr,Tr.current&1),l=qa(l,c,m),l!==null?l.sibling:null);sr(Tr,Tr.current&1);break;case 19:if(w=(m&c.childLanes)!==0,l.flags&128){if(w)return vC(l,c,m);c.flags|=128}if(T=c.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),sr(Tr,Tr.current),w)break;return null;case 22:case 23:return c.lanes=0,fC(l,c,m)}return qa(l,c,m)}var xC,zw,wC,_C;xC=function(l,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)l.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},zw=function(){},wC=function(l,c,m,w){var T=l.memoizedProps;if(T!==w){l=c.stateNode,Au(Xo.current);var D=null;switch(m){case"input":T=St(l,T),w=St(l,w),D=[];break;case"select":T=oe({},T,{value:void 0}),w=oe({},w,{value:void 0}),D=[];break;case"textarea":T=Ve(l,T),w=Ve(l,w),D=[];break;default:typeof T.onClick!="function"&&typeof w.onClick=="function"&&(l.onclick=ag)}is(m,w);var Z;m=null;for(He in T)if(!w.hasOwnProperty(He)&&T.hasOwnProperty(He)&&T[He]!=null)if(He==="style"){var ge=T[He];for(Z in ge)ge.hasOwnProperty(Z)&&(m||(m={}),m[Z]="")}else He!=="dangerouslySetInnerHTML"&&He!=="children"&&He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&He!=="autoFocus"&&(i.hasOwnProperty(He)?D||(D=[]):(D=D||[]).push(He,null));for(He in w){var Se=w[He];if(ge=T?.[He],w.hasOwnProperty(He)&&Se!==ge&&(Se!=null||ge!=null))if(He==="style")if(ge){for(Z in ge)!ge.hasOwnProperty(Z)||Se&&Se.hasOwnProperty(Z)||(m||(m={}),m[Z]="");for(Z in Se)Se.hasOwnProperty(Z)&&ge[Z]!==Se[Z]&&(m||(m={}),m[Z]=Se[Z])}else m||(D||(D=[]),D.push(He,m)),m=Se;else He==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,ge=ge?ge.__html:void 0,Se!=null&&ge!==Se&&(D=D||[]).push(He,Se)):He==="children"?typeof Se!="string"&&typeof Se!="number"||(D=D||[]).push(He,""+Se):He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&(i.hasOwnProperty(He)?(Se!=null&&He==="onScroll"&&pr("scroll",l),D||ge===Se||(D=[])):(D=D||[]).push(He,Se))}m&&(D=D||[]).push("style",m);var He=D;(c.updateQueue=He)&&(c.flags|=4)}},_C=function(l,c,m,w){m!==w&&(c.flags|=4)};function wp(l,c){if(!br)switch(l.tailMode){case"hidden":c=l.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:w.sibling=null}}function Ti(l){var c=l.alternate!==null&&l.alternate.child===l.child,m=0,w=0;if(c)for(var T=l.child;T!==null;)m|=T.lanes|T.childLanes,w|=T.subtreeFlags&0xe00000,w|=T.flags&0xe00000,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)m|=T.lanes|T.childLanes,w|=T.subtreeFlags,w|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=w,l.childLanes=m,c}function e4(l,c,m){var w=c.pendingProps;switch(cw(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(c),null;case 1:return us(c.type)&&ug(),Ti(c),null;case 3:return w=c.stateNode,td(),hr(ls),hr(ki),Sw(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(l===null||l.child===null)&&(hg(c)?c.flags|=4:l===null||l.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,So!==null&&(Xw(So),So=null))),zw(l,c),Ti(c),null;case 5:ww(c);var T=Au(gp.current);if(m=c.type,l!==null&&c.stateNode!=null)wC(l,c,m,w,T),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(n(166));return Ti(c),null}if(l=Au(Xo.current),hg(c)){w=c.stateNode,m=c.type;var D=c.memoizedProps;switch(w[Yo]=c,w[dp]=D,l=(c.mode&1)!==0,m){case"dialog":pr("cancel",w),pr("close",w);break;case"iframe":case"object":case"embed":pr("load",w);break;case"video":case"audio":for(T=0;T<lp.length;T++)pr(lp[T],w);break;case"source":pr("error",w);break;case"img":case"image":case"link":pr("error",w),pr("load",w);break;case"details":pr("toggle",w);break;case"input":Ot(w,D),pr("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!D.multiple},pr("invalid",w);break;case"textarea":rt(w,D),pr("invalid",w)}is(m,D),T=null;for(var Z in D)if(D.hasOwnProperty(Z)){var ge=D[Z];Z==="children"?typeof ge=="string"?w.textContent!==ge&&(D.suppressHydrationWarning!==!0&&og(w.textContent,ge,l),T=["children",ge]):typeof ge=="number"&&w.textContent!==""+ge&&(D.suppressHydrationWarning!==!0&&og(w.textContent,ge,l),T=["children",""+ge]):i.hasOwnProperty(Z)&&ge!=null&&Z==="onScroll"&&pr("scroll",w)}switch(m){case"input":Xe(w),xe(w,D,!0);break;case"textarea":Xe(w),ct(w);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(w.onclick=ag)}w=T,c.updateQueue=w,w!==null&&(c.flags|=4)}else{Z=T.nodeType===9?T:T.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Jt(m)),l==="http://www.w3.org/1999/xhtml"?m==="script"?(l=Z.createElement("div"),l.innerHTML="<script></script>",l=l.removeChild(l.firstChild)):typeof w.is=="string"?l=Z.createElement(m,{is:w.is}):(l=Z.createElement(m),m==="select"&&(Z=l,w.multiple?Z.multiple=!0:w.size&&(Z.size=w.size))):l=Z.createElementNS(l,m),l[Yo]=c,l[dp]=w,xC(l,c,!1,!1),c.stateNode=l;e:{switch(Z=ss(m,w),m){case"dialog":pr("cancel",l),pr("close",l),T=w;break;case"iframe":case"object":case"embed":pr("load",l),T=w;break;case"video":case"audio":for(T=0;T<lp.length;T++)pr(lp[T],l);T=w;break;case"source":pr("error",l),T=w;break;case"img":case"image":case"link":pr("error",l),pr("load",l),T=w;break;case"details":pr("toggle",l),T=w;break;case"input":Ot(l,w),T=St(l,w),pr("invalid",l);break;case"option":T=w;break;case"select":l._wrapperState={wasMultiple:!!w.multiple},T=oe({},w,{value:void 0}),pr("invalid",l);break;case"textarea":rt(l,w),T=Ve(l,w),pr("invalid",l);break;default:T=w}is(m,T),ge=T;for(D in ge)if(ge.hasOwnProperty(D)){var Se=ge[D];D==="style"?Yt(l,Se):D==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&dr(l,Se)):D==="children"?typeof Se=="string"?(m!=="textarea"||Se!=="")&&Bn(l,Se):typeof Se=="number"&&Bn(l,""+Se):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(i.hasOwnProperty(D)?Se!=null&&D==="onScroll"&&pr("scroll",l):Se!=null&&R(l,D,Se,Z))}switch(m){case"input":Xe(l),xe(l,w,!1);break;case"textarea":Xe(l),ct(l);break;case"option":w.value!=null&&l.setAttribute("value",""+je(w.value));break;case"select":l.multiple=!!w.multiple,D=w.value,D!=null?Ae(l,!!w.multiple,D,!1):w.defaultValue!=null&&Ae(l,!!w.multiple,w.defaultValue,!0);break;default:typeof T.onClick=="function"&&(l.onclick=ag)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ti(c),null;case 6:if(l&&c.stateNode!=null)_C(l,c,l.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(n(166));if(m=Au(gp.current),Au(Xo.current),hg(c)){if(w=c.stateNode,m=c.memoizedProps,w[Yo]=c,(D=w.nodeValue!==m)&&(l=Ns,l!==null))switch(l.tag){case 3:og(w.nodeValue,m,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&og(w.nodeValue,m,(l.mode&1)!==0)}D&&(c.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[Yo]=c,c.stateNode=w}return Ti(c),null;case 13:if(hr(Tr),w=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(br&&ks!==null&&c.mode&1&&!(c.flags&128))Ik(),Zc(),c.flags|=98560,D=!1;else if(D=hg(c),w!==null&&w.dehydrated!==null){if(l===null){if(!D)throw Error(n(318));if(D=c.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[Yo]=c}else Zc(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;Ti(c),D=!1}else So!==null&&(Xw(So),So=null),D=!0;if(!D)return c.flags&65536?c:null}return c.flags&128?(c.lanes=m,c):(w=w!==null,w!==(l!==null&&l.memoizedState!==null)&&w&&(c.child.flags|=8192,c.mode&1&&(l===null||Tr.current&1?ai===0&&(ai=3):n_())),c.updateQueue!==null&&(c.flags|=4),Ti(c),null);case 4:return td(),zw(l,c),l===null&&up(c.stateNode.containerInfo),Ti(c),null;case 10:return gw(c.type._context),Ti(c),null;case 17:return us(c.type)&&ug(),Ti(c),null;case 19:if(hr(Tr),D=c.memoizedState,D===null)return Ti(c),null;if(w=(c.flags&128)!==0,Z=D.rendering,Z===null)if(w)wp(D,!1);else{if(ai!==0||l!==null&&l.flags&128)for(l=c.child;l!==null;){if(Z=xg(l),Z!==null){for(c.flags|=128,wp(D,!1),w=Z.updateQueue,w!==null&&(c.updateQueue=w,c.flags|=4),c.subtreeFlags=0,w=m,m=c.child;m!==null;)D=m,l=w,D.flags&=0xe00002,Z=D.alternate,Z===null?(D.childLanes=0,D.lanes=l,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=Z.childLanes,D.lanes=Z.lanes,D.child=Z.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=Z.memoizedProps,D.memoizedState=Z.memoizedState,D.updateQueue=Z.updateQueue,D.type=Z.type,l=Z.dependencies,D.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),m=m.sibling;return sr(Tr,Tr.current&1|2),c.child}l=l.sibling}D.tail!==null&&fr()>sd&&(c.flags|=128,w=!0,wp(D,!1),c.lanes=4194304)}else{if(!w)if(l=xg(Z),l!==null){if(c.flags|=128,w=!0,m=l.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),wp(D,!0),D.tail===null&&D.tailMode==="hidden"&&!Z.alternate&&!br)return Ti(c),null}else 2*fr()-D.renderingStartTime>sd&&m!==0x40000000&&(c.flags|=128,w=!0,wp(D,!1),c.lanes=4194304);D.isBackwards?(Z.sibling=c.child,c.child=Z):(m=D.last,m!==null?m.sibling=Z:c.child=Z,D.last=Z)}return D.tail!==null?(c=D.tail,D.rendering=c,D.tail=c.sibling,D.renderingStartTime=fr(),c.sibling=null,m=Tr.current,sr(Tr,w?m&1|2:m&1),c):(Ti(c),null);case 22:case 23:return t_(),w=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==w&&(c.flags|=8192),w&&c.mode&1?Cs&0x40000000&&(Ti(c),c.subtreeFlags&6&&(c.flags|=8192)):Ti(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function t4(l,c){switch(cw(c),c.tag){case 1:return us(c.type)&&ug(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return td(),hr(ls),hr(ki),Sw(),l=c.flags,l&65536&&!(l&128)?(c.flags=l&-65537|128,c):null;case 5:return ww(c),null;case 13:if(hr(Tr),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Zc()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return hr(Tr),null;case 4:return td(),null;case 10:return gw(c.type._context),null;case 22:case 23:return t_(),null;case 24:return null;default:return null}}var Tg=!1,Ri=!1,n4=typeof WeakSet=="function"?WeakSet:Set,zt=null;function rd(l,c){var m=l.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){Ar(l,c,w)}else m.current=null}function Ww(l,c,m){try{m()}catch(w){Ar(l,c,w)}}var SC=!1;function r4(l,c){if(tw=Qe,l=tk(),Gx(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var T=w.anchorOffset,D=w.focusNode;w=w.focusOffset;try{m.nodeType,D.nodeType}catch{m=null;break e}var Z=0,ge=-1,Se=-1,He=0,ht=0,gt=l,ft=null;t:for(;;){for(var Dt;gt!==m||T!==0&&gt.nodeType!==3||(ge=Z+T),gt!==D||w!==0&&gt.nodeType!==3||(Se=Z+w),gt.nodeType===3&&(Z+=gt.nodeValue.length),(Dt=gt.firstChild)!==null;)ft=gt,gt=Dt;for(;;){if(gt===l)break t;if(ft===m&&++He===T&&(ge=Z),ft===D&&++ht===w&&(Se=Z),(Dt=gt.nextSibling)!==null)break;gt=ft,ft=gt.parentNode}gt=Dt}m=ge===-1||Se===-1?null:{start:ge,end:Se}}else m=null}m=m||{start:0,end:0}}else m=null;for(nw={focusedElem:l,selectionRange:m},Qe=!1,zt=c;zt!==null;)if(c=zt,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,zt=l;else for(;zt!==null;){c=zt;try{var Wt=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Wt!==null){var Ht=Wt.memoizedProps,Ur=Wt.memoizedState,Fe=c.stateNode,Ce=Fe.getSnapshotBeforeUpdate(c.elementType===c.type?Ht:Eo(c.type,Ht),Ur);Fe.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:var $e=c.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(vt){Ar(c,c.return,vt)}if(l=c.sibling,l!==null){l.return=c.return,zt=l;break}zt=c.return}return Wt=SC,SC=!1,Wt}function _p(l,c,m){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var T=w=w.next;do{if((T.tag&l)===l){var D=T.destroy;T.destroy=void 0,D!==void 0&&Ww(c,m,D)}T=T.next}while(T!==w)}}function Rg(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&l)===l){var w=m.create;m.destroy=w()}m=m.next}while(m!==c)}}function Uw(l){var c=l.ref;if(c!==null){var m=l.stateNode;switch(l.tag){case 5:l=m;break;default:l=m}typeof c=="function"?c(l):c.current=l}}function EC(l){var c=l.alternate;c!==null&&(l.alternate=null,EC(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&(delete c[Yo],delete c[dp],delete c[ow],delete c[MB],delete c[$B])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function IC(l){return l.tag===5||l.tag===3||l.tag===4}function NC(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||IC(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Vw(l,c,m){var w=l.tag;if(w===5||w===6)l=l.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(l,c):m.insertBefore(l,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(l,m)):(c=m,c.appendChild(l)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=ag));else if(w!==4&&(l=l.child,l!==null))for(Vw(l,c,m),l=l.sibling;l!==null;)Vw(l,c,m),l=l.sibling}function Hw(l,c,m){var w=l.tag;if(w===5||w===6)l=l.stateNode,c?m.insertBefore(l,c):m.appendChild(l);else if(w!==4&&(l=l.child,l!==null))for(Hw(l,c,m),l=l.sibling;l!==null;)Hw(l,c,m),l=l.sibling}var mi=null,Io=!1;function wl(l,c,m){for(m=m.child;m!==null;)kC(l,c,m),m=m.sibling}function kC(l,c,m){if(as&&typeof as.onCommitFiberUnmount=="function")try{as.onCommitFiberUnmount(dl,m)}catch{}switch(m.tag){case 5:Ri||rd(m,c);case 6:var w=mi,T=Io;mi=null,wl(l,c,m),mi=w,Io=T,mi!==null&&(Io?(l=mi,m=m.stateNode,l.nodeType===8?l.parentNode.removeChild(m):l.removeChild(m)):mi.removeChild(m.stateNode));break;case 18:mi!==null&&(Io?(l=mi,m=m.stateNode,l.nodeType===8?sw(l.parentNode,m):l.nodeType===1&&sw(l,m),Te(l)):sw(mi,m.stateNode));break;case 4:w=mi,T=Io,mi=m.stateNode.containerInfo,Io=!0,wl(l,c,m),mi=w,Io=T;break;case 0:case 11:case 14:case 15:if(!Ri&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){T=w=w.next;do{var D=T,Z=D.destroy;D=D.tag,Z!==void 0&&(D&2||D&4)&&Ww(m,c,Z),T=T.next}while(T!==w)}wl(l,c,m);break;case 1:if(!Ri&&(rd(m,c),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(ge){Ar(m,c,ge)}wl(l,c,m);break;case 21:wl(l,c,m);break;case 22:m.mode&1?(Ri=(w=Ri)||m.memoizedState!==null,wl(l,c,m),Ri=w):wl(l,c,m);break;default:wl(l,c,m)}}function CC(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var m=l.stateNode;m===null&&(m=l.stateNode=new n4),c.forEach(function(w){var T=f4.bind(null,l,w);m.has(w)||(m.add(w),w.then(T,T))})}}function No(l,c){var m=c.deletions;if(m!==null)for(var w=0;w<m.length;w++){var T=m[w];try{var D=l,Z=c,ge=Z;e:for(;ge!==null;){switch(ge.tag){case 5:mi=ge.stateNode,Io=!1;break e;case 3:mi=ge.stateNode.containerInfo,Io=!0;break e;case 4:mi=ge.stateNode.containerInfo,Io=!0;break e}ge=ge.return}if(mi===null)throw Error(n(160));kC(D,Z,T),mi=null,Io=!1;var Se=T.alternate;Se!==null&&(Se.return=null),T.return=null}catch(He){Ar(T,c,He)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)TC(c,l),c=c.sibling}function TC(l,c){var m=l.alternate,w=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(No(c,l),ta(l),w&4){try{_p(3,l,l.return),Rg(3,l)}catch(Ht){Ar(l,l.return,Ht)}try{_p(5,l,l.return)}catch(Ht){Ar(l,l.return,Ht)}}break;case 1:No(c,l),ta(l),w&512&&m!==null&&rd(m,m.return);break;case 5:if(No(c,l),ta(l),w&512&&m!==null&&rd(m,m.return),l.flags&32){var T=l.stateNode;try{Bn(T,"")}catch(Ht){Ar(l,l.return,Ht)}}if(w&4&&(T=l.stateNode,T!=null)){var D=l.memoizedProps,Z=m!==null?m.memoizedProps:D,ge=l.type,Se=l.updateQueue;if(l.updateQueue=null,Se!==null)try{ge==="input"&&D.type==="radio"&&D.name!=null&&Gt(T,D),ss(ge,Z);var He=ss(ge,D);for(Z=0;Z<Se.length;Z+=2){var ht=Se[Z],gt=Se[Z+1];ht==="style"?Yt(T,gt):ht==="dangerouslySetInnerHTML"?dr(T,gt):ht==="children"?Bn(T,gt):R(T,ht,gt,He)}switch(ge){case"input":an(T,D);break;case"textarea":Me(T,D);break;case"select":var ft=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!D.multiple;var Dt=D.value;Dt!=null?Ae(T,!!D.multiple,Dt,!1):ft!==!!D.multiple&&(D.defaultValue!=null?Ae(T,!!D.multiple,D.defaultValue,!0):Ae(T,!!D.multiple,D.multiple?[]:"",!1))}T[dp]=D}catch(Ht){Ar(l,l.return,Ht)}}break;case 6:if(No(c,l),ta(l),w&4){if(l.stateNode===null)throw Error(n(162));T=l.stateNode,D=l.memoizedProps;try{T.nodeValue=D}catch(Ht){Ar(l,l.return,Ht)}}break;case 3:if(No(c,l),ta(l),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Te(c.containerInfo)}catch(Ht){Ar(l,l.return,Ht)}break;case 4:No(c,l),ta(l);break;case 13:No(c,l),ta(l),T=l.child,T.flags&8192&&(D=T.memoizedState!==null,T.stateNode.isHidden=D,!D||T.alternate!==null&&T.alternate.memoizedState!==null||(Qw=fr())),w&4&&CC(l);break;case 22:if(ht=m!==null&&m.memoizedState!==null,l.mode&1?(Ri=(He=Ri)||ht,No(c,l),Ri=He):No(c,l),ta(l),w&8192){if(He=l.memoizedState!==null,(l.stateNode.isHidden=He)&&!ht&&l.mode&1)for(zt=l,ht=l.child;ht!==null;){for(gt=zt=ht;zt!==null;){switch(ft=zt,Dt=ft.child,ft.tag){case 0:case 11:case 14:case 15:_p(4,ft,ft.return);break;case 1:rd(ft,ft.return);var Wt=ft.stateNode;if(typeof Wt.componentWillUnmount=="function"){w=ft,m=ft.return;try{c=w,Wt.props=c.memoizedProps,Wt.state=c.memoizedState,Wt.componentWillUnmount()}catch(Ht){Ar(w,m,Ht)}}break;case 5:rd(ft,ft.return);break;case 22:if(ft.memoizedState!==null){OC(gt);continue}}Dt!==null?(Dt.return=ft,zt=Dt):OC(gt)}ht=ht.sibling}e:for(ht=null,gt=l;;){if(gt.tag===5){if(ht===null){ht=gt;try{T=gt.stateNode,He?(D=T.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(ge=gt.stateNode,Se=gt.memoizedProps.style,Z=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,ge.style.display=kr("display",Z))}catch(Ht){Ar(l,l.return,Ht)}}}else if(gt.tag===6){if(ht===null)try{gt.stateNode.nodeValue=He?"":gt.memoizedProps}catch(Ht){Ar(l,l.return,Ht)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===l)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===l)break e;for(;gt.sibling===null;){if(gt.return===null||gt.return===l)break e;ht===gt&&(ht=null),gt=gt.return}ht===gt&&(ht=null),gt.sibling.return=gt.return,gt=gt.sibling}}break;case 19:No(c,l),ta(l),w&4&&CC(l);break;case 21:break;default:No(c,l),ta(l)}}function ta(l){var c=l.flags;if(c&2){try{e:{for(var m=l.return;m!==null;){if(IC(m)){var w=m;break e}m=m.return}throw Error(n(160))}switch(w.tag){case 5:var T=w.stateNode;w.flags&32&&(Bn(T,""),w.flags&=-33);var D=NC(l);Hw(l,D,T);break;case 3:case 4:var Z=w.stateNode.containerInfo,ge=NC(l);Vw(l,ge,Z);break;default:throw Error(n(161))}}catch(Se){Ar(l,l.return,Se)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function i4(l,c,m){zt=l,RC(l)}function RC(l,c,m){for(var w=(l.mode&1)!==0;zt!==null;){var T=zt,D=T.child;if(T.tag===22&&w){var Z=T.memoizedState!==null||Tg;if(!Z){var ge=T.alternate,Se=ge!==null&&ge.memoizedState!==null||Ri;ge=Tg;var He=Ri;if(Tg=Z,(Ri=Se)&&!He)for(zt=T;zt!==null;)Z=zt,Se=Z.child,Z.tag===22&&Z.memoizedState!==null?qC(T):Se!==null?(Se.return=Z,zt=Se):qC(T);for(;D!==null;)zt=D,RC(D),D=D.sibling;zt=T,Tg=ge,Ri=He}jC(l)}else T.subtreeFlags&8772&&D!==null?(D.return=T,zt=D):jC(l)}}function jC(l){for(;zt!==null;){var c=zt;if(c.flags&8772){var m=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:Ri||Rg(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!Ri)if(m===null)w.componentDidMount();else{var T=c.elementType===c.type?m.memoizedProps:Eo(c.type,m.memoizedProps);w.componentDidUpdate(T,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var D=c.updateQueue;D!==null&&Ok(c,D,w);break;case 3:var Z=c.updateQueue;if(Z!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}Ok(c,Z,m)}break;case 5:var ge=c.stateNode;if(m===null&&c.flags&4){m=ge;var Se=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&m.focus();break;case"img":Se.src&&(m.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var He=c.alternate;if(He!==null){var ht=He.memoizedState;if(ht!==null){var gt=ht.dehydrated;gt!==null&&Te(gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ri||c.flags&512&&Uw(c)}catch(ft){Ar(c,c.return,ft)}}if(c===l){zt=null;break}if(m=c.sibling,m!==null){m.return=c.return,zt=m;break}zt=c.return}}function OC(l){for(;zt!==null;){var c=zt;if(c===l){zt=null;break}var m=c.sibling;if(m!==null){m.return=c.return,zt=m;break}zt=c.return}}function qC(l){for(;zt!==null;){var c=zt;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{Rg(4,c)}catch(Se){Ar(c,m,Se)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var T=c.return;try{w.componentDidMount()}catch(Se){Ar(c,T,Se)}}var D=c.return;try{Uw(c)}catch(Se){Ar(c,D,Se)}break;case 5:var Z=c.return;try{Uw(c)}catch(Se){Ar(c,Z,Se)}}}catch(Se){Ar(c,c.return,Se)}if(c===l){zt=null;break}var ge=c.sibling;if(ge!==null){ge.return=c.return,zt=ge;break}zt=c.return}}var s4=Math.ceil,jg=j.ReactCurrentDispatcher,Gw=j.ReactCurrentOwner,no=j.ReactCurrentBatchConfig,Dn=0,di=null,Yr=null,gi=0,Cs=0,id=gl(0),ai=0,Sp=null,Fu=0,Og=0,Kw=0,Ep=null,ds=null,Qw=0,sd=1/0,Aa=null,qg=!1,Jw=null,_l=null,Ag=!1,Sl=null,Pg=0,Ip=0,Zw=null,Fg=-1,Dg=0;function Gi(){return Dn&6?fr():Fg!==-1?Fg:Fg=fr()}function El(l){return l.mode&1?Dn&2&&gi!==0?gi&-gi:zB.transition!==null?(Dg===0&&(Dg=Ym()),Dg):(l=zn,l!==0||(l=window.event,l=l===void 0?16:Ee(l.type)),l):1}function ko(l,c,m,w){if(50<Ip)throw Ip=0,Zw=null,Error(n(185));ku(l,m,w),(!(Dn&2)||l!==di)&&(l===di&&(!(Dn&2)&&(Og|=m),ai===4&&Il(l,gi)),fs(l,w),m===1&&Dn===0&&!(c.mode&1)&&(sd=fr()+500,dg&&bl()))}function fs(l,c){var m=l.callbackNode;Mx(l,c);var w=pl(l,l===di?gi:0);if(w===0)m!==null&&Eu(m),l.callbackNode=null,l.callbackPriority=0;else if(c=w&-w,l.callbackPriority!==c){if(m!=null&&Eu(m),c===1)l.tag===0?BB(PC.bind(null,l)):xk(PC.bind(null,l)),DB(function(){!(Dn&6)&&bl()}),m=null;else{switch(Xm(w)){case 1:m=Iu;break;case 4:m=$c;break;case 16:m=cl;break;case 0x20000000:m=Nu;break;default:m=cl}m=WC(m,AC.bind(null,l))}l.callbackPriority=c,l.callbackNode=m}}function AC(l,c){if(Fg=-1,Dg=0,Dn&6)throw Error(n(327));var m=l.callbackNode;if(od()&&l.callbackNode!==m)return null;var w=pl(l,l===di?gi:0);if(w===0)return null;if(w&30||w&l.expiredLanes||c)c=Lg(l,w);else{c=w;var T=Dn;Dn|=2;var D=DC();(di!==l||gi!==c)&&(Aa=null,sd=fr()+500,Lu(l,c));do try{l4();break}catch(ge){FC(l,ge)}while(!0);mw(),jg.current=D,Dn=T,Yr!==null?c=0:(di=null,gi=0,c=ai)}if(c!==0){if(c===2&&(T=Jf(l),T!==0&&(w=T,c=Yw(l,T))),c===1)throw m=Sp,Lu(l,0),Il(l,w),fs(l,fr()),m;if(c===6)Il(l,w);else{if(T=l.current.alternate,!(w&30)&&!o4(T)&&(c=Lg(l,w),c===2&&(D=Jf(l),D!==0&&(w=D,c=Yw(l,D))),c===1))throw m=Sp,Lu(l,0),Il(l,w),fs(l,fr()),m;switch(l.finishedWork=T,l.finishedLanes=w,c){case 0:case 1:throw Error(n(345));case 2:Mu(l,ds,Aa);break;case 3:if(Il(l,w),(w&0x7c00000)===w&&(c=Qw+500-fr(),10<c)){if(pl(l,0)!==0)break;if(T=l.suspendedLanes,(T&w)!==w){Gi(),l.pingedLanes|=l.suspendedLanes&T;break}l.timeoutHandle=iw(Mu.bind(null,l,ds,Aa),c);break}Mu(l,ds,Aa);break;case 4:if(Il(l,w),(w&4194240)===w)break;for(c=l.eventTimes,T=-1;0<w;){var Z=31-Ni(w);D=1<<Z,Z=c[Z],Z>T&&(T=Z),w&=~D}if(w=T,w=fr()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*s4(w/1960))-w,10<w){l.timeoutHandle=iw(Mu.bind(null,l,ds,Aa),w);break}Mu(l,ds,Aa);break;case 5:Mu(l,ds,Aa);break;default:throw Error(n(329))}}}return fs(l,fr()),l.callbackNode===m?AC.bind(null,l):null}function Yw(l,c){var m=Ep;return l.current.memoizedState.isDehydrated&&(Lu(l,c).flags|=256),l=Lg(l,c),l!==2&&(c=ds,ds=m,c!==null&&Xw(c)),l}function Xw(l){ds===null?ds=l:ds.push.apply(ds,l)}function o4(l){for(var c=l;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var T=m[w],D=T.getSnapshot;T=T.value;try{if(!_o(D(),T))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Il(l,c){for(c&=~Kw,c&=~Og,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var m=31-Ni(c),w=1<<m;l[m]=-1,c&=~w}}function PC(l){if(Dn&6)throw Error(n(327));od();var c=pl(l,0);if(!(c&1))return fs(l,fr()),null;var m=Lg(l,c);if(l.tag!==0&&m===2){var w=Jf(l);w!==0&&(c=w,m=Yw(l,w))}if(m===1)throw m=Sp,Lu(l,0),Il(l,c),fs(l,fr()),m;if(m===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,Mu(l,ds,Aa),fs(l,fr()),null}function e_(l,c){var m=Dn;Dn|=1;try{return l(c)}finally{Dn=m,Dn===0&&(sd=fr()+500,dg&&bl())}}function Du(l){Sl!==null&&Sl.tag===0&&!(Dn&6)&&od();var c=Dn;Dn|=1;var m=no.transition,w=zn;try{if(no.transition=null,zn=1,l)return l()}finally{zn=w,no.transition=m,Dn=c,!(Dn&6)&&bl()}}function t_(){Cs=id.current,hr(id)}function Lu(l,c){l.finishedWork=null,l.finishedLanes=0;var m=l.timeoutHandle;if(m!==-1&&(l.timeoutHandle=-1,FB(m)),Yr!==null)for(m=Yr.return;m!==null;){var w=m;switch(cw(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&ug();break;case 3:td(),hr(ls),hr(ki),Sw();break;case 5:ww(w);break;case 4:td();break;case 13:hr(Tr);break;case 19:hr(Tr);break;case 10:gw(w.type._context);break;case 22:case 23:t_()}m=m.return}if(di=l,Yr=l=Nl(l.current,null),gi=Cs=c,ai=0,Sp=null,Kw=Og=Fu=0,ds=Ep=null,qu!==null){for(c=0;c<qu.length;c++)if(m=qu[c],w=m.interleaved,w!==null){m.interleaved=null;var T=w.next,D=m.pending;if(D!==null){var Z=D.next;D.next=T,w.next=Z}m.pending=w}qu=null}return l}function FC(l,c){do{var m=Yr;try{if(mw(),wg.current=Ig,_g){for(var w=Rr.memoizedState;w!==null;){var T=w.queue;T!==null&&(T.pending=null),w=w.next}_g=!1}if(Pu=0,ci=oi=Rr=null,yp=!1,bp=0,Gw.current=null,m===null||m.return===null){ai=1,Sp=c,Yr=null;break}e:{var D=l,Z=m.return,ge=m,Se=c;if(c=gi,ge.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var He=Se,ht=ge,gt=ht.tag;if(!(ht.mode&1)&&(gt===0||gt===11||gt===15)){var ft=ht.alternate;ft?(ht.updateQueue=ft.updateQueue,ht.memoizedState=ft.memoizedState,ht.lanes=ft.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var Dt=aC(Z);if(Dt!==null){Dt.flags&=-257,lC(Dt,Z,ge,D,c),Dt.mode&1&&oC(D,He,c),c=Dt,Se=He;var Wt=c.updateQueue;if(Wt===null){var Ht=new Set;Ht.add(Se),c.updateQueue=Ht}else Wt.add(Se);break e}else{if(!(c&1)){oC(D,He,c),n_();break e}Se=Error(n(426))}}else if(br&&ge.mode&1){var Ur=aC(Z);if(Ur!==null){!(Ur.flags&65536)&&(Ur.flags|=256),lC(Ur,Z,ge,D,c),pw(nd(Se,ge));break e}}D=Se=nd(Se,ge),ai!==4&&(ai=2),Ep===null?Ep=[D]:Ep.push(D),D=Z;do{switch(D.tag){case 3:D.flags|=65536,c&=-c,D.lanes|=c;var Fe=iC(D,Se,c);jk(D,Fe);break e;case 1:ge=Se;var Ce=D.type,$e=D.stateNode;if(!(D.flags&128)&&(typeof Ce.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(_l===null||!_l.has($e)))){D.flags|=65536,c&=-c,D.lanes|=c;var vt=sC(D,ge,c);jk(D,vt);break e}}D=D.return}while(D!==null)}MC(m)}catch(Kt){c=Kt,Yr===m&&m!==null&&(Yr=m=m.return);continue}break}while(!0)}function DC(){var l=jg.current;return jg.current=Ig,l===null?Ig:l}function n_(){(ai===0||ai===3||ai===2)&&(ai=4),di===null||!(Fu&0xfffffff)&&!(Og&0xfffffff)||Il(di,gi)}function Lg(l,c){var m=Dn;Dn|=2;var w=DC();(di!==l||gi!==c)&&(Aa=null,Lu(l,c));do try{a4();break}catch(T){FC(l,T)}while(!0);if(mw(),Dn=m,jg.current=w,Yr!==null)throw Error(n(261));return di=null,gi=0,ai}function a4(){for(;Yr!==null;)LC(Yr)}function l4(){for(;Yr!==null&&!Mc();)LC(Yr)}function LC(l){var c=zC(l.alternate,l,Cs);l.memoizedProps=l.pendingProps,c===null?MC(l):Yr=c,Gw.current=null}function MC(l){var c=l;do{var m=c.alternate;if(l=c.return,c.flags&32768){if(m=t4(m,c),m!==null){m.flags&=32767,Yr=m;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{ai=6,Yr=null;return}}else if(m=e4(m,c,Cs),m!==null){Yr=m;return}if(c=c.sibling,c!==null){Yr=c;return}Yr=c=l}while(c!==null);ai===0&&(ai=5)}function Mu(l,c,m){var w=zn,T=no.transition;try{no.transition=null,zn=1,u4(l,c,m,w)}finally{no.transition=T,zn=w}return null}function u4(l,c,m,w){do od();while(Sl!==null);if(Dn&6)throw Error(n(327));m=l.finishedWork;var T=l.finishedLanes;if(m===null)return null;if(l.finishedWork=null,l.finishedLanes=0,m===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var D=m.lanes|m.childLanes;if($x(l,D),l===di&&(Yr=di=null,gi=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||Ag||(Ag=!0,WC(cl,function(){return od(),null})),D=(m.flags&15990)!==0,m.subtreeFlags&15990||D){D=no.transition,no.transition=null;var Z=zn;zn=1;var ge=Dn;Dn|=4,Gw.current=null,r4(l,m),TC(m,l),TB(nw),Qe=!!tw,nw=tw=null,l.current=m,i4(m),Wf(),Dn=ge,zn=Z,no.transition=D}else l.current=m;if(Ag&&(Ag=!1,Sl=l,Pg=T),D=l.pendingLanes,D===0&&(_l=null),Hf(m.stateNode),fs(l,fr()),c!==null)for(w=l.onRecoverableError,m=0;m<c.length;m++)T=c[m],w(T.value,{componentStack:T.stack,digest:T.digest});if(qg)throw qg=!1,l=Jw,Jw=null,l;return Pg&1&&l.tag!==0&&od(),D=l.pendingLanes,D&1?l===Zw?Ip++:(Ip=0,Zw=l):Ip=0,bl(),null}function od(){if(Sl!==null){var l=Xm(Pg),c=no.transition,m=zn;try{if(no.transition=null,zn=16>l?16:l,Sl===null)var w=!1;else{if(l=Sl,Sl=null,Pg=0,Dn&6)throw Error(n(331));var T=Dn;for(Dn|=4,zt=l.current;zt!==null;){var D=zt,Z=D.child;if(zt.flags&16){var ge=D.deletions;if(ge!==null){for(var Se=0;Se<ge.length;Se++){var He=ge[Se];for(zt=He;zt!==null;){var ht=zt;switch(ht.tag){case 0:case 11:case 15:_p(8,ht,D)}var gt=ht.child;if(gt!==null)gt.return=ht,zt=gt;else for(;zt!==null;){ht=zt;var ft=ht.sibling,Dt=ht.return;if(EC(ht),ht===He){zt=null;break}if(ft!==null){ft.return=Dt,zt=ft;break}zt=Dt}}}var Wt=D.alternate;if(Wt!==null){var Ht=Wt.child;if(Ht!==null){Wt.child=null;do{var Ur=Ht.sibling;Ht.sibling=null,Ht=Ur}while(Ht!==null)}}zt=D}}if(D.subtreeFlags&2064&&Z!==null)Z.return=D,zt=Z;else e:for(;zt!==null;){if(D=zt,D.flags&2048)switch(D.tag){case 0:case 11:case 15:_p(9,D,D.return)}var Fe=D.sibling;if(Fe!==null){Fe.return=D.return,zt=Fe;break e}zt=D.return}}var Ce=l.current;for(zt=Ce;zt!==null;){Z=zt;var $e=Z.child;if(Z.subtreeFlags&2064&&$e!==null)$e.return=Z,zt=$e;else e:for(Z=Ce;zt!==null;){if(ge=zt,ge.flags&2048)try{switch(ge.tag){case 0:case 11:case 15:Rg(9,ge)}}catch(Kt){Ar(ge,ge.return,Kt)}if(ge===Z){zt=null;break e}var vt=ge.sibling;if(vt!==null){vt.return=ge.return,zt=vt;break e}zt=ge.return}}if(Dn=T,bl(),as&&typeof as.onPostCommitFiberRoot=="function")try{as.onPostCommitFiberRoot(dl,l)}catch{}w=!0}return w}finally{zn=m,no.transition=c}}return!1}function $C(l,c,m){c=nd(m,c),c=iC(l,c,1),l=xl(l,c,1),c=Gi(),l!==null&&(ku(l,1,c),fs(l,c))}function Ar(l,c,m){if(l.tag===3)$C(l,l,m);else for(;c!==null;){if(c.tag===3){$C(c,l,m);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(_l===null||!_l.has(w))){l=nd(m,l),l=sC(c,l,1),c=xl(c,l,1),l=Gi(),c!==null&&(ku(c,1,l),fs(c,l));break}}c=c.return}}function c4(l,c,m){var w=l.pingCache;w!==null&&w.delete(c),c=Gi(),l.pingedLanes|=l.suspendedLanes&m,di===l&&(gi&m)===m&&(ai===4||ai===3&&(gi&0x7c00000)===gi&&500>fr()-Qw?Lu(l,0):Kw|=m),fs(l,c)}function BC(l,c){c===0&&(l.mode&1?(c=fl,fl<<=1,!(fl&0x7c00000)&&(fl=4194304)):c=1);var m=Gi();l=ja(l,c),l!==null&&(ku(l,c,m),fs(l,m))}function d4(l){var c=l.memoizedState,m=0;c!==null&&(m=c.retryLane),BC(l,m)}function f4(l,c){var m=0;switch(l.tag){case 13:var w=l.stateNode,T=l.memoizedState;T!==null&&(m=T.retryLane);break;case 19:w=l.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(c),BC(l,m)}var zC;zC=function(l,c,m){if(l!==null)if(l.memoizedProps!==c.pendingProps||ls.current)cs=!0;else{if(!(l.lanes&m)&&!(c.flags&128))return cs=!1,XB(l,c,m);cs=!!(l.flags&131072)}else cs=!1,br&&c.flags&1048576&&wk(c,pg,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;Cg(l,c),l=c.pendingProps;var T=Kc(c,ki.current);ed(c,m),T=Nw(null,c,w,l,T,m);var D=kw();return c.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,us(w)?(D=!0,cg(c)):D=!1,c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,vw(c),T.updater=Ng,c.stateNode=T,T._reactInternals=c,qw(c,w,l,m),c=Dw(null,c,w,!0,D,m)):(c.tag=0,br&&D&&uw(c),Hi(null,c,T,m),c=c.child),c;case 16:w=c.elementType;e:{switch(Cg(l,c),l=c.pendingProps,T=w._init,w=T(w._payload),c.type=w,T=c.tag=h4(w),l=Eo(w,l),T){case 0:c=Fw(null,c,w,l,m);break e;case 1:c=hC(null,c,w,l,m);break e;case 11:c=uC(null,c,w,l,m);break e;case 14:c=cC(null,c,w,Eo(w.type,l),m);break e}throw Error(n(306,w,""))}return c;case 0:return w=c.type,T=c.pendingProps,T=c.elementType===w?T:Eo(w,T),Fw(l,c,w,T,m);case 1:return w=c.type,T=c.pendingProps,T=c.elementType===w?T:Eo(w,T),hC(l,c,w,T,m);case 3:e:{if(mC(c),l===null)throw Error(n(387));w=c.pendingProps,D=c.memoizedState,T=D.element,Rk(l,c),vg(c,w,null,m);var Z=c.memoizedState;if(w=Z.element,D.isDehydrated)if(D={element:w,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},c.updateQueue.baseState=D,c.memoizedState=D,c.flags&256){T=nd(Error(n(423)),c),c=gC(l,c,w,m,T);break e}else if(w!==T){T=nd(Error(n(424)),c),c=gC(l,c,w,m,T);break e}else for(ks=ml(c.stateNode.containerInfo.firstChild),Ns=c,br=!0,So=null,m=Ck(c,null,w,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Zc(),w===T){c=qa(l,c,m);break e}Hi(l,c,w,m)}c=c.child}return c;case 5:return qk(c),l===null&&fw(c),w=c.type,T=c.pendingProps,D=l!==null?l.memoizedProps:null,Z=T.children,rw(w,T)?Z=null:D!==null&&rw(w,D)&&(c.flags|=32),pC(l,c),Hi(l,c,Z,m),c.child;case 6:return l===null&&fw(c),null;case 13:return yC(l,c,m);case 4:return xw(c,c.stateNode.containerInfo),w=c.pendingProps,l===null?c.child=Yc(c,null,w,m):Hi(l,c,w,m),c.child;case 11:return w=c.type,T=c.pendingProps,T=c.elementType===w?T:Eo(w,T),uC(l,c,w,T,m);case 7:return Hi(l,c,c.pendingProps,m),c.child;case 8:return Hi(l,c,c.pendingProps.children,m),c.child;case 12:return Hi(l,c,c.pendingProps.children,m),c.child;case 10:e:{if(w=c.type._context,T=c.pendingProps,D=c.memoizedProps,Z=T.value,sr(gg,w._currentValue),w._currentValue=Z,D!==null)if(_o(D.value,Z)){if(D.children===T.children&&!ls.current){c=qa(l,c,m);break e}}else for(D=c.child,D!==null&&(D.return=c);D!==null;){var ge=D.dependencies;if(ge!==null){Z=D.child;for(var Se=ge.firstContext;Se!==null;){if(Se.context===w){if(D.tag===1){Se=Oa(-1,m&-m),Se.tag=2;var He=D.updateQueue;if(He!==null){He=He.shared;var ht=He.pending;ht===null?Se.next=Se:(Se.next=ht.next,ht.next=Se),He.pending=Se}}D.lanes|=m,Se=D.alternate,Se!==null&&(Se.lanes|=m),yw(D.return,m,c),ge.lanes|=m;break}Se=Se.next}}else if(D.tag===10)Z=D.type===c.type?null:D.child;else if(D.tag===18){if(Z=D.return,Z===null)throw Error(n(341));Z.lanes|=m,ge=Z.alternate,ge!==null&&(ge.lanes|=m),yw(Z,m,c),Z=D.sibling}else Z=D.child;if(Z!==null)Z.return=D;else for(Z=D;Z!==null;){if(Z===c){Z=null;break}if(D=Z.sibling,D!==null){D.return=Z.return,Z=D;break}Z=Z.return}D=Z}Hi(l,c,T.children,m),c=c.child}return c;case 9:return T=c.type,w=c.pendingProps.children,ed(c,m),T=eo(T),w=w(T),c.flags|=1,Hi(l,c,w,m),c.child;case 14:return w=c.type,T=Eo(w,c.pendingProps),T=Eo(w.type,T),cC(l,c,w,T,m);case 15:return dC(l,c,c.type,c.pendingProps,m);case 17:return w=c.type,T=c.pendingProps,T=c.elementType===w?T:Eo(w,T),Cg(l,c),c.tag=1,us(w)?(l=!0,cg(c)):l=!1,ed(c,m),nC(c,w,T),qw(c,w,T,m),Dw(null,c,w,!0,l,m);case 19:return vC(l,c,m);case 22:return fC(l,c,m)}throw Error(n(156,c.tag))};function WC(l,c){return Lc(l,c)}function p4(l,c,m,w){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ro(l,c,m,w){return new p4(l,c,m,w)}function r_(l){return l=l.prototype,!(!l||!l.isReactComponent)}function h4(l){if(typeof l=="function")return r_(l)?1:0;if(l!=null){if(l=l.$$typeof,l===U)return 11;if(l===X)return 14}return 2}function Nl(l,c){var m=l.alternate;return m===null?(m=ro(l.tag,c,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=c,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&0xe00000,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,c=l.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m}function Mg(l,c,m,w,T,D){var Z=2;if(w=l,typeof l=="function")r_(l)&&(Z=1);else if(typeof l=="string")Z=5;else e:switch(l){case $:return $u(m.children,T,D,c);case P:Z=8,T|=8;break;case q:return l=ro(12,m,c,T|2),l.elementType=q,l.lanes=D,l;case V:return l=ro(13,m,c,T),l.elementType=V,l.lanes=D,l;case z:return l=ro(19,m,c,T),l.elementType=z,l.lanes=D,l;case le:return $g(m,T,D,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case B:Z=10;break e;case L:Z=9;break e;case U:Z=11;break e;case X:Z=14;break e;case J:Z=16,w=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return c=ro(Z,m,c,T),c.elementType=l,c.type=w,c.lanes=D,c}function $u(l,c,m,w){return l=ro(7,l,w,c),l.lanes=m,l}function $g(l,c,m,w){return l=ro(22,l,w,c),l.elementType=le,l.lanes=m,l.stateNode={isHidden:!1},l}function i_(l,c,m){return l=ro(6,l,null,c),l.lanes=m,l}function s_(l,c,m){return c=ro(4,l.children!==null?l.children:[],l.key,c),c.lanes=m,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function m4(l,c,m,w,T){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zf(0),this.expirationTimes=Zf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zf(0),this.identifierPrefix=w,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function o_(l,c,m,w,T,D,Z,ge,Se){return l=new m4(l,c,m,ge,Se),c===1?(c=1,D===!0&&(c|=8)):c=0,D=ro(3,null,null,c),l.current=D,D.stateNode=l,D.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},vw(D),l}function g4(l,c,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:w==null?null:""+w,children:l,containerInfo:c,implementation:m}}function UC(l){if(!l)return yl;l=l._reactInternals;e:{if(Js(l)!==l||l.tag!==1)throw Error(n(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(us(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(l.tag===1){var m=l.type;if(us(m))return bk(l,m,c)}return c}function VC(l,c,m,w,T,D,Z,ge,Se){return l=o_(m,w,!0,l,T,D,Z,ge,Se),l.context=UC(null),m=l.current,w=Gi(),T=El(m),D=Oa(w,T),D.callback=c??null,xl(m,D,T),l.current.lanes=T,ku(l,T,w),fs(l,w),l}function Bg(l,c,m,w){var T=c.current,D=Gi(),Z=El(T);return m=UC(m),c.context===null?c.context=m:c.pendingContext=m,c=Oa(D,Z),c.payload={element:l},w=w===void 0?null:w,w!==null&&(c.callback=w),l=xl(T,c,Z),l!==null&&(ko(l,T,Z,D),bg(l,T,Z)),Z}function zg(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function HC(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<c?m:c}}function a_(l,c){HC(l,c),(l=l.alternate)&&HC(l,c)}var GC=typeof reportError=="function"?reportError:function(l){console.error(l)};function l_(l){this._internalRoot=l}Wg.prototype.render=l_.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(n(409));Bg(l,c,null,null)},Wg.prototype.unmount=l_.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;Du(function(){Bg(null,l,null,null)}),c[ka]=null}};function Wg(l){this._internalRoot=l}Wg.prototype.unstable_scheduleHydration=function(l){if(l){var c=Cu();l={blockedOn:null,target:l,priority:c};for(var m=0;m<me.length&&c!==0&&c<me[m].priority;m++);me.splice(m,0,l),m===0&&Be(l)}};function u_(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Ug(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function KC(){}function y4(l,c,m,w,T){if(T){if(typeof w=="function"){var D=w;w=function(){var He=zg(Z);D.call(He)}}var Z=VC(c,w,l,0,null,!1,!1,"",KC);return l._reactRootContainer=Z,l[ka]=Z.current,up(l.nodeType===8?l.parentNode:l),Du(),Z}for(;T=l.lastChild;)l.removeChild(T);if(typeof w=="function"){var ge=w;w=function(){var He=zg(Se);ge.call(He)}}var Se=o_(l,0,!1,null,null,!1,!1,"",KC);return l._reactRootContainer=Se,l[ka]=Se.current,up(l.nodeType===8?l.parentNode:l),Du(function(){Bg(c,Se,m,w)}),Se}function Vg(l,c,m,w,T){var D=m._reactRootContainer;if(D){var Z=D;if(typeof T=="function"){var ge=T;T=function(){var Se=zg(Z);ge.call(Se)}}Bg(c,Z,l,T)}else Z=y4(m,c,l,T,w);return zg(Z)}Xf=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var m=Vi(c.pendingLanes);m!==0&&(Yf(c,m|1),fs(c,fr()),!(Dn&6)&&(sd=fr()+500,bl()))}break;case 13:Du(function(){var w=ja(l,1);if(w!==null){var T=Gi();ko(w,l,1,T)}}),a_(l,1)}},he=function(l){if(l.tag===13){var c=ja(l,0x8000000);if(c!==null){var m=Gi();ko(c,l,0x8000000,m)}a_(l,0x8000000)}},ep=function(l){if(l.tag===13){var c=El(l),m=ja(l,c);if(m!==null){var w=Gi();ko(m,l,c,w)}a_(l,c)}},Cu=function(){return zn},tp=function(l,c){var m=zn;try{return zn=l,c()}finally{zn=m}},wu=function(l,c,m){switch(c){case"input":if(an(l,m),c=m.name,m.type==="radio"&&c!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var w=m[c];if(w!==l&&w.form===l.form){var T=lg(w);if(!T)throw Error(n(90));Ue(w),an(w,T)}}}break;case"textarea":Me(l,m);break;case"select":c=m.value,c!=null&&Ae(l,!!m.multiple,c,!1)}},jc=e_,Oc=Du;var b4={usingClientEntryPoint:!1,Events:[fp,Hc,lg,gn,Rc,e_]},Np={findFiberByHostInstance:Tu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v4={bundleType:Np.bundleType,version:Np.version,rendererPackageName:Np.rendererPackageName,rendererConfig:Np.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Fc(l),l===null?null:l.stateNode},findFiberByHostInstance:Np.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hg.isDisabled&&Hg.supportsFiber)try{dl=Hg.inject(v4),as=Hg}catch{}}return ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b4,ps.createPortal=function(l,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u_(c))throw Error(n(200));return g4(l,c,null,m)},ps.createRoot=function(l,c){if(!u_(l))throw Error(n(299));var m=!1,w="",T=GC;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),c=o_(l,1,!1,null,null,m,!1,w,T),l[ka]=c.current,up(l.nodeType===8?l.parentNode:l),new l_(c)},ps.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=Fc(c),l=l===null?null:l.stateNode,l},ps.flushSync=function(l){return Du(l)},ps.hydrate=function(l,c,m){if(!Ug(c))throw Error(n(200));return Vg(null,l,c,!0,m)},ps.hydrateRoot=function(l,c,m){if(!u_(l))throw Error(n(405));var w=m!=null&&m.hydratedSources||null,T=!1,D="",Z=GC;if(m!=null&&(m.unstable_strictMode===!0&&(T=!0),m.identifierPrefix!==void 0&&(D=m.identifierPrefix),m.onRecoverableError!==void 0&&(Z=m.onRecoverableError)),c=VC(c,null,l,1,m??null,T,!1,D,Z),l[ka]=c.current,up(l),w)for(l=0;l<w.length;l++)m=w[l],T=m._getVersion,T=T(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,T]:c.mutableSourceEagerHydrationData.push(m,T);return new Wg(c)},ps.render=function(l,c,m){if(!Ug(c))throw Error(n(200));return Vg(null,l,c,!1,m)},ps.unmountComponentAtNode=function(l){if(!Ug(l))throw Error(n(40));return l._reactRootContainer?(Du(function(){Vg(null,null,l,!1,function(){l._reactRootContainer=null,l[ka]=null})}),!0):!1},ps.unstable_batchedUpdates=e_,ps.unstable_renderSubtreeIntoContainer=function(l,c,m,w){if(!Ug(m))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return Vg(l,c,m,!1,w)},ps.version="18.3.1-next-f1338f8080-20240426",ps}var IT;function Q3(){if(IT)return E_.exports;IT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),E_.exports=eW(),E_.exports}var hm=Q3();const tW="Error preloading route! ☝️";function nW(t,e){const n=Ko(),[r,i]=H.useState(!1),s=H.useRef(!1),o=Cz(e),{activeProps:a=()=>({className:"active"}),inactiveProps:u=()=>({}),activeOptions:d,to:p,preload:h,preloadDelay:y,hashScrollIntoView:x,replace:_,startTransition:S,resetScroll:I,viewTransition:C,children:k,target:R,disabled:j,style:A,className:F,onClick:$,onFocus:P,onMouseEnter:q,onMouseLeave:B,onTouchStart:L,ignoreBlocker:U,...V}=t,{params:z,search:X,hash:J,state:le,mask:ie,reloadDocument:ne,...oe}=V,te=H.useMemo(()=>{try{return new URL(`${p}`),"external"}catch{}return"internal"},[p]),ce=es({select:Ne=>Ne.location.search,structuralSharing:!0});t={from:nu({strict:!1,select:Ne=>Ne.pathname}),...t};const ye=H.useMemo(()=>n.buildLocation(t),[n,t,ce]),we=H.useMemo(()=>t.reloadDocument?!1:h??n.options.defaultPreload,[n.options.defaultPreload,h,t.reloadDocument]),Ie=y??n.options.defaultPreloadDelay??0,ze=es({select:Ne=>{if(d?.exact){if(!Rz(Ne.location.pathname,ye.pathname,n.basepath))return!1}else{const Ae=kb(Ne.location.pathname,n.basepath).split("/");if(!kb(ye.pathname,n.basepath).split("/").every((Me,ct)=>Me===Ae[ct]))return!1}return(d?.includeSearch??!0)&&!Pd(Ne.location.search,ye.search,{partial:!d?.exact,ignoreUndefined:!d?.explicitUndefined})?!1:d?.includeHash?Ne.location.hash===ye.hash:!0}}),je=H.useCallback(()=>{n.preloadRoute(t).catch(Ne=>{console.warn(Ne),console.warn(tW)})},[t,n]),De=H.useCallback(Ne=>{Ne?.isIntersecting&&je()},[je]);if(kz(o,De,{rootMargin:"100px"},{disabled:!!j||we!=="viewport"}),Up(()=>{s.current||!j&&we==="render"&&(je(),s.current=!0)},[j,je,we]),te==="external")return{...oe,ref:o,type:te,href:p,...k&&{children:k},...R&&{target:R},...j&&{disabled:j},...A&&{style:A},...F&&{className:F},...$&&{onClick:$},...P&&{onFocus:P},...q&&{onMouseEnter:q},...B&&{onMouseLeave:B},...L&&{onTouchStart:L}};const Je=Ne=>{if(!j&&!iW(Ne)&&!Ne.defaultPrevented&&(!R||R==="_self")&&Ne.button===0){Ne.preventDefault(),hm.flushSync(()=>{i(!0)});const Ae=n.subscribe("onResolved",()=>{Ae(),i(!1)});return n.navigate({...t,replace:_,resetScroll:I,hashScrollIntoView:x,startTransition:S,viewTransition:C,ignoreBlocker:U})}},Xe=Ne=>{j||we&&je()},Ue=Xe,ut=Ne=>{if(j)return;const Ae=Ne.target||{};if(we){if(Ae.preloadTimeout)return;Ae.preloadTimeout=setTimeout(()=>{Ae.preloadTimeout=null,je()},Ie)}},St=Ne=>{if(j)return;const Ae=Ne.target||{};Ae.preloadTimeout&&(clearTimeout(Ae.preloadTimeout),Ae.preloadTimeout=null)},Ot=Ne=>Ae=>{var Ve;(Ve=Ae.persist)==null||Ve.call(Ae),Ne.filter(Boolean).forEach(rt=>{Ae.defaultPrevented||rt(Ae)})},Gt=ze?Xu(a,{})??{}:{},an=ze?{}:Xu(u,{}),xe=[F,Gt.className,an.className].filter(Boolean).join(" "),be={...A,...Gt.style,...an.style};return{...oe,...Gt,...an,href:j?void 0:ye.maskedLocation?n.history.createHref(ye.maskedLocation.href):n.history.createHref(ye.href),ref:o,onClick:Ot([$,Je]),onFocus:Ot([P,Xe]),onMouseEnter:Ot([q,ut]),onMouseLeave:Ot([B,St]),onTouchStart:Ot([L,Ue]),disabled:!!j,target:R,...Object.keys(be).length&&{style:be},...xe&&{className:xe},...j&&{role:"link","aria-disabled":!0},...ze&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}function J3(t){return H.forwardRef(function(n,r){return f.jsx(rW,{...n,_asChild:t,ref:r})})}const rW=H.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:i,ref:s,...o}=nW(r,e),a=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof n>"u"&&delete o.disabled,H.createElement(n||"a",{...o,ref:s},a)});function iW(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sW(){const t=Ko(),e=H.useRef({router:t,mounted:!1}),n=es({select:({isLoading:h})=>h}),[r,i]=H.useState(!1),s=es({select:h=>h.matches.some(y=>y.status==="pending"),structuralSharing:!0}),o=w_(n),a=n||r||s,u=w_(a),d=n||s,p=w_(d);return t.isServer||(t.startReactTransition=h=>{i(!0),H.startTransition(()=>{h(),i(!1)})}),H.useEffect(()=>{const h=t.history.subscribe(t.load),y=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return ec(t.latestLocation.href)!==ec(y.href)&&t.commitLocation({...y,replace:!0}),()=>{h()}},[t,t.history]),Up(()=>{var h;if(typeof window<"u"&&((h=window.__TSR__)!=null&&h.dehydrated)||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(x){console.error(x)}})()},[t]),Up(()=>{if(o&&!n){const h=t.state.location,y=t.state.resolvedLocation,x=y.pathname!==h.pathname,_=y.href!==h.href;t.emit({type:"onLoad",fromLocation:y,toLocation:h,pathChanged:x,hrefChanged:_})}},[o,t,n]),Up(()=>{if(p&&!d){const h=t.state.location,y=t.state.resolvedLocation,x=y.pathname!==h.pathname,_=y.href!==h.href;t.emit({type:"onBeforeRouteMount",fromLocation:y,toLocation:h,pathChanged:x,hrefChanged:_})}},[d,p,t]),Up(()=>{if(u&&!a){const h=t.state.location,y=t.state.resolvedLocation,x=y.pathname!==h.pathname,_=y.href!==h.href;if(t.emit({type:"onResolved",fromLocation:y,toLocation:h,pathChanged:x,hrefChanged:_}),t.__store.setState(S=>({...S,status:"idle",resolvedLocation:S.location})),typeof document<"u"&&document.querySelector){const S=t.state.location.state.__hashScrollIntoViewOptions??!0;if(S&&t.state.location.hash!==""){const I=document.getElementById(t.state.location.hash);I&&I.scrollIntoView(S)}}}},[a,u,t]),null}function oW(){const t=Ko(),e=t.options.defaultPendingComponent?f.jsx(t.options.defaultPendingComponent,{}):null,n=t.isServer||typeof document<"u"&&window.__TSR__?Dy:H.Suspense,r=f.jsxs(n,{fallback:e,children:[f.jsx(sW,{}),f.jsx(aW,{})]});return t.options.InnerWrap?f.jsx(t.options.InnerWrap,{children:r}):r}function aW(){const t=es({select:n=>{var r;return(r=n.matches[0])==null?void 0:r.id}}),e=es({select:n=>n.loadedAt});return f.jsx(Fv.Provider,{value:t,children:f.jsx(JI,{getResetKey:()=>e,errorComponent:Pv,onCatch:n=>{n.message||n.toString()},children:t?f.jsx(K3,{matchId:t}):null})})}function lW(){const t=Ko();return es({select:e=>[e.location.href,e.resolvedLocation.href,e.status],structuralSharing:!0}),H.useCallback(e=>{const{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s,...o}=e;return t.matchRoute(o,{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s})},[t])}function uW({router:t,children:e,...n}){t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=B3(),i=f.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?f.jsx(t.options.Wrap,{children:i}):i}function cW({router:t,...e}){return f.jsx(uW,{router:t,...e,children:f.jsx(oW,{})})}const dW=typeof window<"u"?H.useLayoutEffect:H.useEffect,k_="window",NT="___";let C_=new WeakSet;const fW=typeof window<"u"&&window.sessionStorage,jo=fW?(()=>{const t="tsr-scroll-restoration-v2";return{state:JSON.parse(window.sessionStorage.getItem(t)||"null")||{cached:{},next:{}},set:n=>{jo.state=Xu(n,jo.state),window.sessionStorage.setItem(t,JSON.stringify(jo.state))}}})():void 0,pW=t=>t.state.key||t.href;function hW(t){const e=Ko();dW(()=>{const n=t?.getKey||pW,{history:r}=window;r.scrollRestoration="manual";const i=a=>{if(C_.has(a.target))return;C_.add(a.target);let u="";if(a.target===document||a.target===window)u=k_;else{const d=a.target.getAttribute("data-scroll-restoration-id");d?u=`[data-scroll-restoration-id="${d}"]`:u=gW(a.target)}jo.state.next[u]||jo.set(d=>({...d,next:{...d.next,[u]:{scrollX:NaN,scrollY:NaN}}}))};typeof document<"u"&&document.addEventListener("scroll",i,!0);const s=e.subscribe("onBeforeLoad",a=>{if(a.hrefChanged){const u=n(a.fromLocation);for(const d in jo.state.next){const p=jo.state.next[d];if(d===k_)p.scrollX=window.scrollX||0,p.scrollY=window.scrollY||0;else if(d){const h=document.querySelector(d);p.scrollX=h?.scrollLeft||0,p.scrollY=h?.scrollTop||0}jo.set(h=>{const y={...h.next};return delete y[d],{...h,next:y,cached:{...h.cached,[[u,d].join(NT)]:p}}})}}}),o=e.subscribe("onBeforeRouteMount",a=>{if(a.hrefChanged){if(!e.resetNextScroll)return;e.resetNextScroll=!0;const u=n(a.toLocation);let d=!1;for(const p in jo.state.cached){const h=jo.state.cached[p],[y,x]=p.split(NT);if(y===u){if(x===k_)d=!0,window.scrollTo({top:h.scrollY,left:h.scrollX,behavior:t?.scrollBehavior});else if(x){const _=document.querySelector(x);_&&(_.scrollLeft=h.scrollX,_.scrollTop=h.scrollY)}}}d||window.scrollTo(0,0),jo.set(p=>({...p,next:{}})),C_=new WeakSet}});return()=>{document.removeEventListener("scroll",i),s(),o()}},[t?.getKey,e])}function mW(t){return hW(t),null}function gW(t){const e=[];let n;for(;n=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(n.children,t)+1})`),t=n;return`${e.join(" > ")}`.toLowerCase()}function gr(t){return nu({...t,select:e=>t.select?t.select(e.context):e.context})}let yW={data:""},bW=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||yW,vW=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,xW=/\/\*[^]*?\*\/|  +/g,kT=/\n+/g,$l=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?$l(o,s):s+"{"+$l(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=$l(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,a):a?a+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=$l.p?$l.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Pa={},Z3=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Z3(t[n]);return e}return t},wW=(t,e,n,r,i)=>{let s=Z3(t),o=Pa[s]||(Pa[s]=(u=>{let d=0,p=11;for(;d<u.length;)p=101*p+u.charCodeAt(d++)>>>0;return"go"+p})(s));if(!Pa[o]){let u=s!==t?t:(d=>{let p,h,y=[{}];for(;p=vW.exec(d.replace(xW,""));)p[4]?y.shift():p[3]?(h=p[3].replace(kT," ").trim(),y.unshift(y[0][h]=y[0][h]||{})):y[0][p[1]]=p[2].replace(kT," ").trim();return y[0]})(t);Pa[o]=$l(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let a=n&&Pa.g?Pa.g:null;return n&&(Pa.g=Pa[o]),((u,d,p,h)=>{h?d.data=d.data.replace(h,u):d.data.indexOf(u)===-1&&(d.data=p?u+d.data:d.data+u)})(Pa[o],e,r,a),o},_W=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),u=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=u?"."+u:a&&typeof a=="object"?a.props?"":$l(a,""):a===!1?"":a}return r+i+(o??"")},"");function Dv(t){let e=this||{},n=t.call?t(e.p):t;return wW(n.unshift?n.raw?_W(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,bW(e.target),e.g,e.o,e.k)}let Y3,CE,TE;Dv.bind({g:1});let Ya=Dv.bind({k:1});function SW(t,e,n,r){$l.p=e,Y3=t,CE=n,TE=r}function hu(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),u=a.className||i.className;n.p=Object.assign({theme:CE&&CE()},a),n.o=/ *go\d+/.test(u),a.className=Dv.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=a.as||t,delete a.as),TE&&d[0]&&TE(a),Y3(d,a)}return i}}var EW=t=>typeof t=="function",Tb=(t,e)=>EW(t)?t(e):t,IW=(()=>{let t=0;return()=>(++t).toString()})(),X3=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),NW=20,eP=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,NW)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return eP(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},Ly=[],My={toasts:[],pausedAt:void 0},Ec=t=>{My=eP(My,t),Ly.forEach(e=>{e(My)})},kW={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},CW=(t={})=>{let[e,n]=H.useState(My);H.useEffect(()=>(Ly.push(n),()=>{let i=Ly.indexOf(n);i>-1&&Ly.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o,a;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((s=t[i.type])==null?void 0:s.removeDelay)||t?.removeDelay,duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||t?.duration||kW[i.type],style:{...t.style,...(a=t[i.type])==null?void 0:a.style,...i.style}}});return{...e,toasts:r}},TW=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||IW()}),mm=t=>(e,n)=>{let r=TW(e,t,n);return Ec({type:2,toast:r}),r.id},An=(t,e)=>mm("blank")(t,e);An.error=mm("error");An.success=mm("success");An.loading=mm("loading");An.custom=mm("custom");An.dismiss=t=>{Ec({type:3,toastId:t})};An.remove=t=>Ec({type:4,toastId:t});An.promise=(t,e,n)=>{let r=An.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?Tb(e.success,i):void 0;return s?An.success(s,{id:r,...n,...n?.success}):An.dismiss(r),i}).catch(i=>{let s=e.error?Tb(e.error,i):void 0;s?An.error(s,{id:r,...n,...n?.error}):An.dismiss(r)}),t};var RW=(t,e)=>{Ec({type:1,toast:{id:t,height:e}})},jW=()=>{Ec({type:5,time:Date.now()})},ch=new Map,OW=1e3,qW=(t,e=OW)=>{if(ch.has(t))return;let n=setTimeout(()=>{ch.delete(t),Ec({type:4,toastId:t})},e);ch.set(t,n)},AW=t=>{let{toasts:e,pausedAt:n}=CW(t);H.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let u=(a.duration||0)+a.pauseDuration-(s-a.createdAt);if(u<0){a.visible&&An.dismiss(a.id);return}return setTimeout(()=>An.dismiss(a.id),u)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=H.useCallback(()=>{n&&Ec({type:6,time:Date.now()})},[n]),i=H.useCallback((s,o)=>{let{reverseOrder:a=!1,gutter:u=8,defaultPosition:d}=o||{},p=e.filter(x=>(x.position||d)===(s.position||d)&&x.height),h=p.findIndex(x=>x.id===s.id),y=p.filter((x,_)=>_<h&&x.visible).length;return p.filter(x=>x.visible).slice(...a?[y+1]:[0,y]).reduce((x,_)=>x+(_.height||0)+u,0)},[e]);return H.useEffect(()=>{e.forEach(s=>{if(s.dismissed)qW(s.id,s.removeDelay);else{let o=ch.get(s.id);o&&(clearTimeout(o),ch.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:RW,startPause:jW,endPause:r,calculateOffset:i}}},PW=Ya`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,FW=Ya`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,DW=Ya`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,LW=hu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${PW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${FW} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${DW} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,MW=Ya`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,$W=hu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${MW} 1s linear infinite;
`,BW=Ya`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,zW=Ya`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,WW=hu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${BW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${zW} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,UW=hu("div")`
  position: absolute;
`,VW=hu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,HW=Ya`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,GW=hu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${HW} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,KW=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?H.createElement(GW,null,e):e:n==="blank"?null:H.createElement(VW,null,H.createElement($W,{...r}),n!=="loading"&&H.createElement(UW,null,n==="error"?H.createElement(LW,{...r}):H.createElement(WW,{...r})))},QW=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,JW=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,ZW="0%{opacity:0;} 100%{opacity:1;}",YW="0%{opacity:1;} 100%{opacity:0;}",XW=hu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,e6=hu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,t6=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=X3()?[ZW,YW]:[QW(n),JW(n)];return{animation:e?`${Ya(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ya(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},n6=H.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?t6(t.position||e||"top-center",t.visible):{opacity:0},s=H.createElement(KW,{toast:t}),o=H.createElement(e6,{...t.ariaProps},Tb(t.message,t));return H.createElement(XW,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):H.createElement(H.Fragment,null,s,o))});SW(H.createElement);var r6=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=H.useCallback(o=>{if(o){let a=()=>{let u=o.getBoundingClientRect().height;r(t,u)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return H.createElement("div",{ref:s,className:e,style:n},i)},i6=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:X3()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},s6=Dv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Xg=16,o6=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:u}=AW(n);return H.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Xg,left:Xg,right:Xg,bottom:Xg,pointerEvents:"none",...s},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},a.map(d=>{let p=d.position||e,h=u.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),y=i6(p,h);return H.createElement(r6,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?s6:"",style:y},d.type==="custom"?Tb(d.message,d):i?i(d):H.createElement(n6,{toast:d,position:p}))}))},a6=An;class Ic extends Error{}class l6 extends Ic{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class u6 extends Ic{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class c6 extends Ic{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Ed extends Ic{}class tP extends Ic{constructor(e){super(`Invalid unit ${e}`)}}class Oi extends Ic{}class Cl extends Ic{constructor(){super("Zone is an abstract class")}}const jt="numeric",Wo="short",Ls="long",Rb={year:jt,month:jt,day:jt},nP={year:jt,month:Wo,day:jt},d6={year:jt,month:Wo,day:jt,weekday:Wo},rP={year:jt,month:Ls,day:jt},iP={year:jt,month:Ls,day:jt,weekday:Ls},sP={hour:jt,minute:jt},oP={hour:jt,minute:jt,second:jt},aP={hour:jt,minute:jt,second:jt,timeZoneName:Wo},lP={hour:jt,minute:jt,second:jt,timeZoneName:Ls},uP={hour:jt,minute:jt,hourCycle:"h23"},cP={hour:jt,minute:jt,second:jt,hourCycle:"h23"},dP={hour:jt,minute:jt,second:jt,hourCycle:"h23",timeZoneName:Wo},fP={hour:jt,minute:jt,second:jt,hourCycle:"h23",timeZoneName:Ls},pP={year:jt,month:jt,day:jt,hour:jt,minute:jt},hP={year:jt,month:jt,day:jt,hour:jt,minute:jt,second:jt},mP={year:jt,month:Wo,day:jt,hour:jt,minute:jt},gP={year:jt,month:Wo,day:jt,hour:jt,minute:jt,second:jt},f6={year:jt,month:Wo,day:jt,weekday:Wo,hour:jt,minute:jt},yP={year:jt,month:Ls,day:jt,hour:jt,minute:jt,timeZoneName:Wo},bP={year:jt,month:Ls,day:jt,hour:jt,minute:jt,second:jt,timeZoneName:Wo},vP={year:jt,month:Ls,day:jt,weekday:Ls,hour:jt,minute:jt,timeZoneName:Ls},xP={year:jt,month:Ls,day:jt,weekday:Ls,hour:jt,minute:jt,second:jt,timeZoneName:Ls};class gm{get type(){throw new Cl}get name(){throw new Cl}get ianaName(){return this.name}get isUniversal(){throw new Cl}offsetName(e,n){throw new Cl}formatOffset(e,n){throw new Cl}offset(e){throw new Cl}equals(e){throw new Cl}get isValid(){throw new Cl}}let T_=null;class Lv extends gm{static get instance(){return T_===null&&(T_=new Lv),T_}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return TP(e,n,r)}formatOffset(e,n){return dh(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let $y={};function p6(t){return $y[t]||($y[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),$y[t]}const h6={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function m6(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,a,u,d,p]=r;return[o,i,s,a,u,d,p]}function g6(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],a=h6[s];s==="era"?r[a]=o:bn(a)||(r[a]=parseInt(o,10))}return r}let ey={};class Xa extends gm{static create(e){return ey[e]||(ey[e]=new Xa(e)),ey[e]}static resetCache(){ey={},$y={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Xa.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return TP(e,n,r,this.name)}formatOffset(e,n){return dh(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const r=p6(this.name);let[i,s,o,a,u,d,p]=r.formatToParts?g6(r,n):m6(r,n);a==="BC"&&(i=-Math.abs(i)+1);const y=$v({year:i,month:s,day:o,hour:u===24?0:u,minute:d,second:p,millisecond:0});let x=+n;const _=x%1e3;return x-=_>=0?_:1e3+_,(y-x)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let CT={};function y6(t,e={}){const n=JSON.stringify([t,e]);let r=CT[n];return r||(r=new Intl.ListFormat(t,e),CT[n]=r),r}let RE={};function jE(t,e={}){const n=JSON.stringify([t,e]);let r=RE[n];return r||(r=new Intl.DateTimeFormat(t,e),RE[n]=r),r}let OE={};function b6(t,e={}){const n=JSON.stringify([t,e]);let r=OE[n];return r||(r=new Intl.NumberFormat(t,e),OE[n]=r),r}let qE={};function v6(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=qE[i];return s||(s=new Intl.RelativeTimeFormat(t,e),qE[i]=s),s}let Hp=null;function x6(){return Hp||(Hp=new Intl.DateTimeFormat().resolvedOptions().locale,Hp)}let TT={};function w6(t){let e=TT[t];if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,TT[t]=e}return e}function _6(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=jE(t).resolvedOptions(),i=t}catch{const u=t.substring(0,n);r=jE(u).resolvedOptions(),i=u}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function S6(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function E6(t){const e=[];for(let n=1;n<=12;n++){const r=yn.utc(2009,n,1);e.push(t(r))}return e}function I6(t){const e=[];for(let n=1;n<=7;n++){const r=yn.utc(2016,11,13+n);e.push(t(r))}return e}function ty(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function N6(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class k6{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=b6(e,a)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):tN(e,3);return Xr(n,this.padTo)}}}class C6{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Xa.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=jE(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class T6{constructor(e,n,r){this.opts={style:"long",...r},!n&&kP()&&(this.rtf=v6(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):Y6(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const R6={firstDay:1,minimalDays:4,weekend:[6,7]};class Gn{static fromOpts(e){return Gn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){const o=e||Fr.defaultLocale,a=o||(s?"en-US":x6()),u=n||Fr.defaultNumberingSystem,d=r||Fr.defaultOutputCalendar,p=AE(i)||Fr.defaultWeekSettings;return new Gn(a,u,d,p,o)}static resetCache(){Hp=null,RE={},OE={},qE={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Gn.create(e,n,r,i)}constructor(e,n,r,i,s){const[o,a,u]=_6(e);this.locale=o,this.numberingSystem=n||a||null,this.outputCalendar=r||u||null,this.weekSettings=i,this.intl=S6(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=N6(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Gn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,AE(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return ty(this,e,OP,()=>{const r=n?{month:e,day:"numeric"}:{month:e},i=n?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=E6(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,n=!1){return ty(this,e,PP,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=I6(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return ty(this,void 0,()=>FP,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[yn.utc(2016,11,13,9),yn.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return ty(this,e,DP,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[yn.utc(-40,1,1),yn.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new k6(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new C6(e,this.intl,n)}relFormatter(e={}){return new T6(this.intl,this.isEnglish(),e)}listFormatter(e={}){return y6(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:CP()?w6(this.locale):R6}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let R_=null;class Xi extends gm{static get utcInstance(){return R_===null&&(R_=new Xi(0)),R_}static instance(e){return e===0?Xi.utcInstance:new Xi(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Xi(Bv(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${dh(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${dh(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return dh(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class j6 extends gm{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Bl(t,e){if(bn(t)||t===null)return e;if(t instanceof gm)return t;if(D6(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?Lv.instance:n==="utc"||n==="gmt"?Xi.utcInstance:Xi.parseSpecifier(n)||Xa.create(t)}else return Ql(t)?Xi.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new j6(t)}const ZI={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},RT={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},O6=ZI.hanidec.replace(/[\[|\]]/g,"").split("");function q6(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(ZI.hanidec)!==-1)e+=O6.indexOf(t[n]);else for(const i in RT){const[s,o]=RT[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}let xd={};function A6(){xd={}}function Co({numberingSystem:t},e=""){const n=t||"latn";return xd[n]||(xd[n]={}),xd[n][e]||(xd[n][e]=new RegExp(`${ZI[n]}${e}`)),xd[n][e]}let jT=()=>Date.now(),OT="system",qT=null,AT=null,PT=null,FT=60,DT,LT=null;class Fr{static get now(){return jT}static set now(e){jT=e}static set defaultZone(e){OT=e}static get defaultZone(){return Bl(OT,Lv.instance)}static get defaultLocale(){return qT}static set defaultLocale(e){qT=e}static get defaultNumberingSystem(){return AT}static set defaultNumberingSystem(e){AT=e}static get defaultOutputCalendar(){return PT}static set defaultOutputCalendar(e){PT=e}static get defaultWeekSettings(){return LT}static set defaultWeekSettings(e){LT=AE(e)}static get twoDigitCutoffYear(){return FT}static set twoDigitCutoffYear(e){FT=e%100}static get throwOnInvalid(){return DT}static set throwOnInvalid(e){DT=e}static resetCaches(){Gn.resetCache(),Xa.resetCache(),yn.resetCache(),A6()}}class Mo{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const wP=[0,31,59,90,120,151,181,212,243,273,304,334],_P=[0,31,60,91,121,152,182,213,244,274,305,335];function po(t,e){return new Mo("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function YI(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function SP(t,e,n){return n+(ym(t)?_P:wP)[e-1]}function EP(t,e){const n=ym(t)?_P:wP,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function XI(t,e){return(t-e+7)%7+1}function jb(t,e=4,n=1){const{year:r,month:i,day:s}=t,o=SP(r,i,s),a=XI(YI(r,i,s),n);let u=Math.floor((o-a+14-e)/7),d;return u<1?(d=r-1,u=Nh(d,e,n)):u>Nh(r,e,n)?(d=r+1,u=1):d=r,{weekYear:d,weekNumber:u,weekday:a,...zv(t)}}function MT(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=t,o=XI(YI(r,1,e),n),a=Fd(r);let u=i*7+s-o-7+e,d;u<1?(d=r-1,u+=Fd(d)):u>a?(d=r+1,u-=Fd(r)):d=r;const{month:p,day:h}=EP(d,u);return{year:d,month:p,day:h,...zv(t)}}function j_(t){const{year:e,month:n,day:r}=t,i=SP(e,n,r);return{year:e,ordinal:i,...zv(t)}}function $T(t){const{year:e,ordinal:n}=t,{month:r,day:i}=EP(e,n);return{year:e,month:r,day:i,...zv(t)}}function BT(t,e){if(!bn(t.localWeekday)||!bn(t.localWeekNumber)||!bn(t.localWeekYear)){if(!bn(t.weekday)||!bn(t.weekNumber)||!bn(t.weekYear))throw new Ed("Cannot mix locale-based week fields with ISO-based week fields");return bn(t.localWeekday)||(t.weekday=t.localWeekday),bn(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),bn(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function P6(t,e=4,n=1){const r=Mv(t.weekYear),i=ho(t.weekNumber,1,Nh(t.weekYear,e,n)),s=ho(t.weekday,1,7);return r?i?s?!1:po("weekday",t.weekday):po("week",t.weekNumber):po("weekYear",t.weekYear)}function F6(t){const e=Mv(t.year),n=ho(t.ordinal,1,Fd(t.year));return e?n?!1:po("ordinal",t.ordinal):po("year",t.year)}function IP(t){const e=Mv(t.year),n=ho(t.month,1,12),r=ho(t.day,1,Ob(t.year,t.month));return e?n?r?!1:po("day",t.day):po("month",t.month):po("year",t.year)}function NP(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=ho(e,0,23)||e===24&&n===0&&r===0&&i===0,o=ho(n,0,59),a=ho(r,0,59),u=ho(i,0,999);return s?o?a?u?!1:po("millisecond",i):po("second",r):po("minute",n):po("hour",e)}function bn(t){return typeof t>"u"}function Ql(t){return typeof t=="number"}function Mv(t){return typeof t=="number"&&t%1===0}function D6(t){return typeof t=="string"}function L6(t){return Object.prototype.toString.call(t)==="[object Date]"}function kP(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function CP(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function M6(t){return Array.isArray(t)?t:[t]}function zT(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function $6(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Yd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function AE(t){if(t==null)return null;if(typeof t!="object")throw new Oi("Week settings must be an object");if(!ho(t.firstDay,1,7)||!ho(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!ho(e,1,7)))throw new Oi("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function ho(t,e,n){return Mv(t)&&t>=e&&t<=n}function B6(t,e){return t-e*Math.floor(t/e)}function Xr(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Dl(t){if(!(bn(t)||t===null||t===""))return parseInt(t,10)}function Bu(t){if(!(bn(t)||t===null||t===""))return parseFloat(t)}function eN(t){if(!(bn(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function tN(t,e,n=!1){const r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function ym(t){return t%4===0&&(t%100!==0||t%400===0)}function Fd(t){return ym(t)?366:365}function Ob(t,e){const n=B6(e-1,12)+1,r=t+(e-n)/12;return n===2?ym(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function $v(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function WT(t,e,n){return-XI(YI(t,1,e),n)+e-1}function Nh(t,e=4,n=1){const r=WT(t,e,n),i=WT(t+1,e,n);return(Fd(t)-r+i)/7}function PE(t){return t>99?t:t>Fr.twoDigitCutoffYear?1900+t:2e3+t}function TP(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function Bv(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function RP(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Oi(`Invalid unit value ${t}`);return e}function qb(t,e){const n={};for(const r in t)if(Yd(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=RP(i)}return n}function dh(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Xr(n,2)}:${Xr(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Xr(n,2)}${Xr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function zv(t){return $6(t,["hour","minute","second","millisecond"])}const z6=["January","February","March","April","May","June","July","August","September","October","November","December"],jP=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],W6=["J","F","M","A","M","J","J","A","S","O","N","D"];function OP(t){switch(t){case"narrow":return[...W6];case"short":return[...jP];case"long":return[...z6];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const qP=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],AP=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],U6=["M","T","W","T","F","S","S"];function PP(t){switch(t){case"narrow":return[...U6];case"short":return[...AP];case"long":return[...qP];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const FP=["AM","PM"],V6=["Before Christ","Anno Domini"],H6=["BC","AD"],G6=["B","A"];function DP(t){switch(t){case"narrow":return[...G6];case"short":return[...H6];case"long":return[...V6];default:return null}}function K6(t){return FP[t.hour<12?0:1]}function Q6(t,e){return PP(e)[t.weekday-1]}function J6(t,e){return OP(e)[t.month-1]}function Z6(t,e){return DP(e)[t.year<0?0:1]}function Y6(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),u=a===1,d=i[t],p=r?u?d[1]:d[2]||d[1]:u?i[t][0]:t;return o?`${a} ${p} ago`:`in ${a} ${p}`}function UT(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const X6={D:Rb,DD:nP,DDD:rP,DDDD:iP,t:sP,tt:oP,ttt:aP,tttt:lP,T:uP,TT:cP,TTT:dP,TTTT:fP,f:pP,ff:mP,fff:yP,ffff:vP,F:hP,FF:gP,FFF:bP,FFFF:xP};class Ai{static create(e,n={}){return new Ai(e,n)}static parseFormat(e){let n=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||a===n?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,n=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return X6[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Xr(e,n);const r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(x,_)=>this.loc.extract(e,x,_),o=x=>e.isOffsetFixed&&e.offset===0&&x.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,x.format):"",a=()=>r?K6(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(x,_)=>r?J6(e,x):s(_?{month:x}:{month:x,day:"numeric"},"month"),d=(x,_)=>r?Q6(e,x):s(_?{weekday:x}:{weekday:x,month:"long",day:"numeric"},"weekday"),p=x=>{const _=Ai.macroTokenToFormatOpts(x);return _?this.formatWithSystemDefault(e,_):x},h=x=>r?Z6(e,x):s({era:x},"era"),y=x=>{switch(x){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(x)}};return UT(Ai.parseFormat(n),y)}formatDurationFromString(e,n){const r=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=u=>d=>{const p=r(d);return p?this.num(u.get(p),d.length):d},s=Ai.parseFormat(n),o=s.reduce((u,{literal:d,val:p})=>d?u:u.concat(p),[]),a=e.shiftTo(...o.map(r).filter(u=>u));return UT(s,i(a))}}const LP=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function gf(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function yf(...t){return e=>t.reduce(([n,r,i],s)=>{const[o,a,u]=s(e,i);return[{...n,...o},a||r,u]},[{},null,1]).slice(0,2)}function bf(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function MP(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=Dl(e[n+i]);return[r,null,n+i]}}const $P=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,eU=`(?:${$P.source}?(?:\\[(${LP.source})\\])?)?`,nN=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,BP=RegExp(`${nN.source}${eU}`),rN=RegExp(`(?:T${BP.source})?`),tU=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,nU=/(\d{4})-?W(\d\d)(?:-?(\d))?/,rU=/(\d{4})-?(\d{3})/,iU=MP("weekYear","weekNumber","weekDay"),sU=MP("year","ordinal"),oU=/(\d{4})-(\d\d)-(\d\d)/,zP=RegExp(`${nN.source} ?(?:${$P.source}|(${LP.source}))?`),aU=RegExp(`(?: ${zP.source})?`);function Dd(t,e,n){const r=t[e];return bn(r)?n:Dl(r)}function lU(t,e){return[{year:Dd(t,e),month:Dd(t,e+1,1),day:Dd(t,e+2,1)},null,e+3]}function vf(t,e){return[{hours:Dd(t,e,0),minutes:Dd(t,e+1,0),seconds:Dd(t,e+2,0),milliseconds:eN(t[e+3])},null,e+4]}function bm(t,e){const n=!t[e]&&!t[e+1],r=Bv(t[e+1],t[e+2]),i=n?null:Xi.instance(r);return[{},i,e+3]}function vm(t,e){const n=t[e]?Xa.create(t[e]):null;return[{},n,e+1]}const uU=RegExp(`^T?${nN.source}$`),cU=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function dU(t){const[e,n,r,i,s,o,a,u,d]=t,p=e[0]==="-",h=u&&u[0]==="-",y=(x,_=!1)=>x!==void 0&&(_||x&&p)?-x:x;return[{years:y(Bu(n)),months:y(Bu(r)),weeks:y(Bu(i)),days:y(Bu(s)),hours:y(Bu(o)),minutes:y(Bu(a)),seconds:y(Bu(u),u==="-0"),milliseconds:y(eN(d),h)}]}const fU={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function iN(t,e,n,r,i,s,o){const a={year:e.length===2?PE(Dl(e)):Dl(e),month:jP.indexOf(n)+1,day:Dl(r),hour:Dl(i),minute:Dl(s)};return o&&(a.second=Dl(o)),t&&(a.weekday=t.length>3?qP.indexOf(t)+1:AP.indexOf(t)+1),a}const pU=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function hU(t){const[,e,n,r,i,s,o,a,u,d,p,h]=t,y=iN(e,i,r,n,s,o,a);let x;return u?x=fU[u]:d?x=0:x=Bv(p,h),[y,new Xi(x)]}function mU(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const gU=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,yU=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,bU=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function VT(t){const[,e,n,r,i,s,o,a]=t;return[iN(e,i,r,n,s,o,a),Xi.utcInstance]}function vU(t){const[,e,n,r,i,s,o,a]=t;return[iN(e,a,n,r,i,s,o),Xi.utcInstance]}const xU=gf(tU,rN),wU=gf(nU,rN),_U=gf(rU,rN),SU=gf(BP),WP=yf(lU,vf,bm,vm),EU=yf(iU,vf,bm,vm),IU=yf(sU,vf,bm,vm),NU=yf(vf,bm,vm);function kU(t){return bf(t,[xU,WP],[wU,EU],[_U,IU],[SU,NU])}function CU(t){return bf(mU(t),[pU,hU])}function TU(t){return bf(t,[gU,VT],[yU,VT],[bU,vU])}function RU(t){return bf(t,[cU,dU])}const jU=yf(vf);function OU(t){return bf(t,[uU,jU])}const qU=gf(oU,aU),AU=gf(zP),PU=yf(vf,bm,vm);function FU(t){return bf(t,[qU,WP],[AU,PU])}const HT="Invalid Duration",UP={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},DU={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...UP},io=146097/400,ad=146097/4800,LU={years:{quarters:4,months:12,weeks:io/7,days:io,hours:io*24,minutes:io*24*60,seconds:io*24*60*60,milliseconds:io*24*60*60*1e3},quarters:{months:3,weeks:io/28,days:io/4,hours:io*24/4,minutes:io*24*60/4,seconds:io*24*60*60/4,milliseconds:io*24*60*60*1e3/4},months:{weeks:ad/7,days:ad,hours:ad*24,minutes:ad*24*60,seconds:ad*24*60*60,milliseconds:ad*24*60*60*1e3},...UP},tc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],MU=tc.slice(0).reverse();function Tl(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Ln(r)}function VP(t,e){let n=e.milliseconds??0;for(const r of MU.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function GT(t,e){const n=VP(t,e)<0?-1:1;tc.reduceRight((r,i)=>{if(bn(e[i]))return r;if(r){const s=e[r]*n,o=t[i][r],a=Math.floor(s/o);e[i]+=a*n,e[r]-=a*o*n}return i},null),tc.reduce((r,i)=>{if(bn(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function $U(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class Ln{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?LU:DU;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Gn.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return Ln.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new Oi(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ln({values:qb(e,Ln.normalizeUnit),loc:Gn.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Ql(e))return Ln.fromMillis(e);if(Ln.isDuration(e))return e;if(typeof e=="object")return Ln.fromObject(e);throw new Oi(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=RU(e);return r?Ln.fromObject(r,n):Ln.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=OU(e);return r?Ln.fromObject(r,n):Ln.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new Oi("need to specify a reason the Duration is invalid");const r=e instanceof Mo?e:new Mo(e,n);if(Fr.throwOnInvalid)throw new c6(r);return new Ln({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new tP(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Ai.create(this.loc,r).formatDurationFromString(this,e):HT}toHuman(e={}){if(!this.isValid)return HT;const n=tc.map(r=>{const i=this.values[r];return bn(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=tN(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},yn.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?VP(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=Ln.fromDurationLike(e),r={};for(const i of tc)(Yd(n.values,i)||Yd(this.values,i))&&(r[i]=n.get(i)+this.get(i));return Tl(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=Ln.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=RP(e(this.values[r],r));return Tl(this,{values:n},!0)}get(e){return this[Ln.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...qb(e,Ln.normalizeUnit)};return Tl(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return Tl(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return GT(this.matrix,e),Tl(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=$U(this.normalize().shiftToAll().toObject());return Tl(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Ln.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of tc)if(e.indexOf(o)>=0){s=o;let a=0;for(const d in r)a+=this.matrix[d][o]*r[d],r[d]=0;Ql(i[o])&&(a+=i[o]);const u=Math.trunc(a);n[o]=u,r[o]=(a*1e3-u*1e3)/1e3}else Ql(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return GT(this.matrix,n),Tl(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return Tl(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of tc)if(!n(this.values[r],e.values[r]))return!1;return!0}}const ld="Invalid Interval";function BU(t,e){return!t||!t.isValid?Pr.invalid("missing or invalid start"):!e||!e.isValid?Pr.invalid("missing or invalid end"):e<t?Pr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Pr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new Oi("need to specify a reason the Interval is invalid");const r=e instanceof Mo?e:new Mo(e,n);if(Fr.throwOnInvalid)throw new u6(r);return new Pr({invalid:r})}static fromDateTimes(e,n){const r=Cp(e),i=Cp(n),s=BU(r,i);return s??new Pr({start:r,end:i})}static after(e,n){const r=Ln.fromDurationLike(n),i=Cp(e);return Pr.fromDateTimes(i,i.plus(r))}static before(e,n){const r=Ln.fromDurationLike(n),i=Cp(e);return Pr.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=yn.fromISO(r,n),o=s.isValid}catch{o=!1}let a,u;try{a=yn.fromISO(i,n),u=a.isValid}catch{u=!1}if(o&&u)return Pr.fromDateTimes(s,a);if(o){const d=Ln.fromISO(i,n);if(d.isValid)return Pr.after(s,d)}else if(u){const d=Ln.fromISO(r,n);if(d.isValid)return Pr.before(a,d)}}return Pr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Pr.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(Cp).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;r.push(Pr.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(e){const n=Ln.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(n.mapUnits(u=>u*i));s=+a>+this.e?this.e:a,o.push(Pr.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:Pr.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Pr.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((u,d)=>u.time-d.time);for(const u of a)r+=u.type==="s"?1:-1,r===1?n=u.time:(n&&+n!=+u.time&&i.push(Pr.fromDateTimes(n,u.time)),n=null);return Pr.merge(i)}difference(...e){return Pr.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:ld}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Rb,n={}){return this.isValid?Ai.create(this.s.loc.clone(n),e).formatInterval(this):ld}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ld}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ld}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ld}toFormat(e,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:ld}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):Ln.invalid(this.invalidReason)}mapEndpoints(e){return Pr.fromDateTimes(e(this.s),e(this.e))}}class ny{static hasDST(e=Fr.defaultZone){const n=yn.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return Xa.isValidZone(e)}static normalizeZone(e){return Bl(e,Fr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Gn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Gn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Gn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Gn.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Gn.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Gn.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Gn.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Gn.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Gn.create(n,null,"gregory").eras(e)}static features(){return{relative:kP(),localeWeek:CP()}}}function KT(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(Ln.fromMillis(r).as("days"))}function zU(t,e,n){const r=[["years",(u,d)=>d.year-u.year],["quarters",(u,d)=>d.quarter-u.quarter+(d.year-u.year)*4],["months",(u,d)=>d.month-u.month+(d.year-u.year)*12],["weeks",(u,d)=>{const p=KT(u,d);return(p-p%7)/7}],["days",KT]],i={},s=t;let o,a;for(const[u,d]of r)n.indexOf(u)>=0&&(o=u,i[u]=d(t,e),a=s.plus(i),a>e?(i[u]--,t=s.plus(i),t>e&&(a=t,i[u]--,t=s.plus(i))):t=a);return[t,i,a,o]}function WU(t,e,n,r){let[i,s,o,a]=zU(t,e,n);const u=e-i,d=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);d.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+u/(o-i)));const p=Ln.fromObject(s,r);return d.length>0?Ln.fromMillis(u,r).shiftTo(...d).plus(p):p}const UU="missing Intl.DateTimeFormat.formatToParts support";function Wn(t,e=n=>n){return{regex:t,deser:([n])=>e(q6(n))}}const VU="\xa0",HP=`[ ${VU}]`,GP=new RegExp(HP,"g");function HU(t){return t.replace(/\./g,"\\.?").replace(GP,HP)}function QT(t){return t.replace(/\./g,"").replace(GP," ").toLowerCase()}function To(t,e){return t===null?null:{regex:RegExp(t.map(HU).join("|")),deser:([n])=>t.findIndex(r=>QT(n)===QT(r))+e}}function JT(t,e){return{regex:t,deser:([,n,r])=>Bv(n,r),groups:e}}function ry(t){return{regex:t,deser:([e])=>e}}function GU(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function KU(t,e){const n=Co(e),r=Co(e,"{2}"),i=Co(e,"{3}"),s=Co(e,"{4}"),o=Co(e,"{6}"),a=Co(e,"{1,2}"),u=Co(e,"{1,3}"),d=Co(e,"{1,6}"),p=Co(e,"{1,9}"),h=Co(e,"{2,4}"),y=Co(e,"{4,6}"),x=I=>({regex:RegExp(GU(I.val)),deser:([C])=>C,literal:!0}),S=(I=>{if(t.literal)return x(I);switch(I.val){case"G":return To(e.eras("short"),0);case"GG":return To(e.eras("long"),0);case"y":return Wn(d);case"yy":return Wn(h,PE);case"yyyy":return Wn(s);case"yyyyy":return Wn(y);case"yyyyyy":return Wn(o);case"M":return Wn(a);case"MM":return Wn(r);case"MMM":return To(e.months("short",!0),1);case"MMMM":return To(e.months("long",!0),1);case"L":return Wn(a);case"LL":return Wn(r);case"LLL":return To(e.months("short",!1),1);case"LLLL":return To(e.months("long",!1),1);case"d":return Wn(a);case"dd":return Wn(r);case"o":return Wn(u);case"ooo":return Wn(i);case"HH":return Wn(r);case"H":return Wn(a);case"hh":return Wn(r);case"h":return Wn(a);case"mm":return Wn(r);case"m":return Wn(a);case"q":return Wn(a);case"qq":return Wn(r);case"s":return Wn(a);case"ss":return Wn(r);case"S":return Wn(u);case"SSS":return Wn(i);case"u":return ry(p);case"uu":return ry(a);case"uuu":return Wn(n);case"a":return To(e.meridiems(),0);case"kkkk":return Wn(s);case"kk":return Wn(h,PE);case"W":return Wn(a);case"WW":return Wn(r);case"E":case"c":return Wn(n);case"EEE":return To(e.weekdays("short",!1),1);case"EEEE":return To(e.weekdays("long",!1),1);case"ccc":return To(e.weekdays("short",!0),1);case"cccc":return To(e.weekdays("long",!0),1);case"Z":case"ZZ":return JT(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return JT(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return ry(/[a-z_+-/]{1,256}?/i);case" ":return ry(/[^\S\n\r]/);default:return x(I)}})(t)||{invalidReason:UU};return S.token=t,S}const QU={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function JU(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const u=/^\s+$/.test(i);return{literal:!u,val:u?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=QU[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function ZU(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function YU(t,e,n){const r=t.match(e);if(r){const i={};let s=1;for(const o in n)if(Yd(n,o)){const a=n[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+u))),s+=u}return[r,i]}else return[r,{}]}function XU(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return bn(t.z)||(n=Xa.create(t.z)),bn(t.Z)||(n||(n=new Xi(t.Z)),r=t.Z),bn(t.q)||(t.M=(t.q-1)*3+1),bn(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),bn(t.u)||(t.S=eN(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),n,r]}let O_=null;function eV(){return O_||(O_=yn.fromMillis(0x16a2e5618e3)),O_}function tV(t,e){if(t.literal)return t;const n=Ai.macroTokenToFormatOpts(t.val),r=ZP(n,e);return r==null||r.includes(void 0)?t:r}function KP(t,e){return Array.prototype.concat(...t.map(n=>tV(n,e)))}class QP{constructor(e,n){if(this.locale=e,this.format=n,this.tokens=KP(Ai.parseFormat(n),e),this.units=this.tokens.map(r=>KU(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=ZU(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[n,r]=YU(e,this.regex,this.handlers),[i,s,o]=r?XU(r):[null,null,void 0];if(Yd(r,"a")&&Yd(r,"H"))throw new Ed("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function JP(t,e,n){return new QP(t,n).explainFromTokens(e)}function nV(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=JP(t,e,n);return[r,i,s,o]}function ZP(t,e){if(!t)return null;const r=Ai.create(e,t).dtFormatter(eV()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>JU(o,t,s))}const q_="Invalid DateTime",rV=864e13;function Gp(t){return new Mo("unsupported zone",`the zone "${t.name}" is not supported`)}function A_(t){return t.weekData===null&&(t.weekData=jb(t.c)),t.weekData}function P_(t){return t.localWeekData===null&&(t.localWeekData=jb(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function zu(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new yn({...n,...e,old:n})}function YP(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function iy(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function By(t,e,n){return YP($v(t),e,n)}function ZT(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,Ob(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Ln.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=$v(s);let[u,d]=YP(a,n,t.zone);return o!==0&&(u+=o,d=t.zone.offset(u)),{ts:u,o:d}}function ud(t,e,n,r,i,s){const{setZone:o,zone:a}=n;if(t&&Object.keys(t).length!==0||e){const u=e||a,d=yn.fromObject(t,{...n,zone:u,specificOffset:s});return o?d:d.setZone(a)}else return yn.invalid(new Mo("unparsable",`the input "${i}" can't be parsed as ${r}`))}function sy(t,e,n=!0){return t.isValid?Ai.create(Gn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function F_(t,e){const n=t.c.year>9999||t.c.year<0;let r="";return n&&t.c.year>=0&&(r+="+"),r+=Xr(t.c.year,n?6:4),e?(r+="-",r+=Xr(t.c.month),r+="-",r+=Xr(t.c.day)):(r+=Xr(t.c.month),r+=Xr(t.c.day)),r}function YT(t,e,n,r,i,s){let o=Xr(t.c.hour);return e?(o+=":",o+=Xr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=":")):o+=Xr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=Xr(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=Xr(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Xr(Math.trunc(-t.o/60)),o+=":",o+=Xr(Math.trunc(-t.o%60))):(o+="+",o+=Xr(Math.trunc(t.o/60)),o+=":",o+=Xr(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const XP={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},iV={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},sV={ordinal:1,hour:0,minute:0,second:0,millisecond:0},eF=["year","month","day","hour","minute","second","millisecond"],oV=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],aV=["year","ordinal","hour","minute","second","millisecond"];function lV(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new tP(t);return e}function XT(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return lV(t)}}function uV(t){return Wy[t]||(zy===void 0&&(zy=Fr.now()),Wy[t]=t.offset(zy)),Wy[t]}function eR(t,e){const n=Bl(e.zone,Fr.defaultZone);if(!n.isValid)return yn.invalid(Gp(n));const r=Gn.fromObject(e);let i,s;if(bn(t.year))i=Fr.now();else{for(const u of eF)bn(t[u])&&(t[u]=XP[u]);const o=IP(t)||NP(t);if(o)return yn.invalid(o);const a=uV(n);[i,s]=By(t,a,n)}return new yn({ts:i,zone:n,loc:r,o:s})}function tR(t,e,n){const r=bn(n.round)?!0:n.round,i=(o,a)=>(o=tN(o,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(o,a)),s=o=>n.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(n.unit)return i(s(n.unit),n.unit);for(const o of n.units){const a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(t>e?-0:0,n.units[n.units.length-1])}function nR(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}let zy,Wy={};class yn{constructor(e){const n=e.zone||Fr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Mo("invalid input"):null)||(n.isValid?null:Gp(n));this.ts=bn(e.ts)?Fr.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{const a=Ql(e.o)&&!e.old?e.o:n.offset(this.ts);i=iy(this.ts,a),r=Number.isNaN(i.year)?new Mo("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=n,this.loc=e.loc||Gn.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new yn({})}static local(){const[e,n]=nR(arguments),[r,i,s,o,a,u,d]=n;return eR({year:r,month:i,day:s,hour:o,minute:a,second:u,millisecond:d},e)}static utc(){const[e,n]=nR(arguments),[r,i,s,o,a,u,d]=n;return e.zone=Xi.utcInstance,eR({year:r,month:i,day:s,hour:o,minute:a,second:u,millisecond:d},e)}static fromJSDate(e,n={}){const r=L6(e)?e.valueOf():NaN;if(Number.isNaN(r))return yn.invalid("invalid input");const i=Bl(n.zone,Fr.defaultZone);return i.isValid?new yn({ts:r,zone:i,loc:Gn.fromObject(n)}):yn.invalid(Gp(i))}static fromMillis(e,n={}){if(Ql(e))return e<-864e13||e>rV?yn.invalid("Timestamp out of range"):new yn({ts:e,zone:Bl(n.zone,Fr.defaultZone),loc:Gn.fromObject(n)});throw new Oi(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Ql(e))return new yn({ts:e*1e3,zone:Bl(n.zone,Fr.defaultZone),loc:Gn.fromObject(n)});throw new Oi("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=Bl(n.zone,Fr.defaultZone);if(!r.isValid)return yn.invalid(Gp(r));const i=Gn.fromObject(n),s=qb(e,XT),{minDaysInFirstWeek:o,startOfWeek:a}=BT(s,i),u=Fr.now(),d=bn(n.specificOffset)?r.offset(u):n.specificOffset,p=!bn(s.ordinal),h=!bn(s.year),y=!bn(s.month)||!bn(s.day),x=h||y,_=s.weekYear||s.weekNumber;if((x||p)&&_)throw new Ed("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&p)throw new Ed("Can't mix ordinal dates with month/day");const S=_||s.weekday&&!x;let I,C,k=iy(u,d);S?(I=oV,C=iV,k=jb(k,o,a)):p?(I=aV,C=sV,k=j_(k)):(I=eF,C=XP);let R=!1;for(const B of I){const L=s[B];bn(L)?R?s[B]=C[B]:s[B]=k[B]:R=!0}const j=S?P6(s,o,a):p?F6(s):IP(s),A=j||NP(s);if(A)return yn.invalid(A);const F=S?MT(s,o,a):p?$T(s):s,[$,P]=By(F,d,r),q=new yn({ts:$,zone:r,o:P,loc:i});return s.weekday&&x&&e.weekday!==q.weekday?yn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${q.toISO()}`):q.isValid?q:yn.invalid(q.invalid)}static fromISO(e,n={}){const[r,i]=kU(e);return ud(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=CU(e);return ud(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=TU(e);return ud(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(bn(e)||bn(n))throw new Oi("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Gn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,u,d,p]=nV(o,e,n);return p?yn.invalid(p):ud(a,u,r,`format ${n}`,e,d)}static fromString(e,n,r={}){return yn.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=FU(e);return ud(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new Oi("need to specify a reason the DateTime is invalid");const r=e instanceof Mo?e:new Mo(e,n);if(Fr.throwOnInvalid)throw new l6(r);return new yn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=ZP(e,Gn.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return KP(Ai.parseFormat(e),Gn.fromObject(n)).map(i=>i.val).join("")}static resetCache(){zy=void 0,Wy={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?A_(this).weekYear:NaN}get weekNumber(){return this.isValid?A_(this).weekNumber:NaN}get weekday(){return this.isValid?A_(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?P_(this).weekday:NaN}get localWeekNumber(){return this.isValid?P_(this).weekNumber:NaN}get localWeekYear(){return this.isValid?P_(this).weekYear:NaN}get ordinal(){return this.isValid?j_(this.c).ordinal:NaN}get monthShort(){return this.isValid?ny.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ny.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ny.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ny.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=$v(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*n),a=this.zone.offset(r-s*n);if(o===a)return[this];const u=r-o*n,d=r-a*n,p=iy(u,o),h=iy(d,a);return p.hour===h.hour&&p.minute===h.minute&&p.second===h.second&&p.millisecond===h.millisecond?[zu(this,{ts:u}),zu(this,{ts:d})]:[this]}get isInLeapYear(){return ym(this.year)}get daysInMonth(){return Ob(this.year,this.month)}get daysInYear(){return this.isValid?Fd(this.year):NaN}get weeksInWeekYear(){return this.isValid?Nh(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Nh(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=Ai.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(Xi.instance(e),n)}toLocal(){return this.setZone(Fr.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=Bl(e,Fr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const s=e.offset(this.ts),o=this.toObject();[i]=By(o,s,e)}return zu(this,{ts:i,zone:e})}else return yn.invalid(Gp(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return zu(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=qb(e,XT),{minDaysInFirstWeek:r,startOfWeek:i}=BT(n,this.loc),s=!bn(n.weekYear)||!bn(n.weekNumber)||!bn(n.weekday),o=!bn(n.ordinal),a=!bn(n.year),u=!bn(n.month)||!bn(n.day),d=a||u,p=n.weekYear||n.weekNumber;if((d||o)&&p)throw new Ed("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new Ed("Can't mix ordinal dates with month/day");let h;s?h=MT({...jb(this.c,r,i),...n},r,i):bn(n.ordinal)?(h={...this.toObject(),...n},bn(n.day)&&(h.day=Math.min(Ob(h.year,h.month),h.day))):h=$T({...j_(this.c),...n});const[y,x]=By(h,this.o,this.zone);return zu(this,{ts:y,o:x})}plus(e){if(!this.isValid)return this;const n=Ln.fromDurationLike(e);return zu(this,ZT(this,n))}minus(e){if(!this.isValid)return this;const n=Ln.fromDurationLike(e).negate();return zu(this,ZT(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=Ln.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?Ai.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):q_}toLocaleString(e=Rb,n={}){return this.isValid?Ai.create(this.loc.clone(n),e).formatDateTime(this):q_}toLocaleParts(e={}){return this.isValid?Ai.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=F_(this,o);return a+="T",a+=YT(this,o,n,r,i,s),a}toISODate({format:e="extended"}={}){return this.isValid?F_(this,e==="extended"):null}toISOWeekDate(){return sy(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+YT(this,o==="extended",n,e,r,s):null}toRFC2822(){return sy(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return sy(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?F_(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),sy(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():q_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return Ln.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=M6(n).map(Ln.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,u=o?e:this,d=WU(a,u,s,i);return o?d.negate():d}diffNow(e="milliseconds",n={}){return this.diff(yn.now(),e,n)}until(e){return this.isValid?Pr.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||yn.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),tR(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?tR(e.base||yn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(yn.isDateTime))throw new Oi("min requires all arguments be DateTimes");return zT(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(yn.isDateTime))throw new Oi("max requires all arguments be DateTimes");return zT(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Gn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return JP(o,e,n)}static fromStringExplain(e,n,r={}){return yn.fromFormatExplain(e,n,r)}static buildFormatParser(e,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Gn.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new QP(s,e)}static fromFormatParser(e,n,r={}){if(bn(e)||bn(n))throw new Oi("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Gn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new Oi(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:a,zone:u,specificOffset:d,invalidReason:p}=n.explainFromTokens(e);return p?yn.invalid(p):ud(a,u,r,`format ${n.format}`,e,d)}static get DATE_SHORT(){return Rb}static get DATE_MED(){return nP}static get DATE_MED_WITH_WEEKDAY(){return d6}static get DATE_FULL(){return rP}static get DATE_HUGE(){return iP}static get TIME_SIMPLE(){return sP}static get TIME_WITH_SECONDS(){return oP}static get TIME_WITH_SHORT_OFFSET(){return aP}static get TIME_WITH_LONG_OFFSET(){return lP}static get TIME_24_SIMPLE(){return uP}static get TIME_24_WITH_SECONDS(){return cP}static get TIME_24_WITH_SHORT_OFFSET(){return dP}static get TIME_24_WITH_LONG_OFFSET(){return fP}static get DATETIME_SHORT(){return pP}static get DATETIME_SHORT_WITH_SECONDS(){return hP}static get DATETIME_MED(){return mP}static get DATETIME_MED_WITH_SECONDS(){return gP}static get DATETIME_MED_WITH_WEEKDAY(){return f6}static get DATETIME_FULL(){return yP}static get DATETIME_FULL_WITH_SECONDS(){return bP}static get DATETIME_HUGE(){return vP}static get DATETIME_HUGE_WITH_SECONDS(){return xP}}function Cp(t){if(yn.isDateTime(t))return t;if(t&&t.valueOf&&Ql(t.valueOf()))return yn.fromJSDate(t);if(t&&typeof t=="object")return yn.fromObject(t);throw new Oi(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function tF(t,e){return function(){return t.apply(e,arguments)}}const{toString:cV}=Object.prototype,{getPrototypeOf:sN}=Object,Wv=(t=>e=>{const n=cV.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Qo=t=>(t=t.toLowerCase(),e=>Wv(e)===t),Uv=t=>e=>typeof e===t,{isArray:xf}=Array,kh=Uv("undefined");function dV(t){return t!==null&&!kh(t)&&t.constructor!==null&&!kh(t.constructor)&&Ms(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const nF=Qo("ArrayBuffer");function fV(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&nF(t.buffer),e}const pV=Uv("string"),Ms=Uv("function"),rF=Uv("number"),Vv=t=>t!==null&&typeof t=="object",hV=t=>t===!0||t===!1,Uy=t=>{if(Wv(t)!=="object")return!1;const e=sN(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},mV=Qo("Date"),gV=Qo("File"),yV=Qo("Blob"),bV=Qo("FileList"),vV=t=>Vv(t)&&Ms(t.pipe),xV=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ms(t.append)&&((e=Wv(t))==="formdata"||e==="object"&&Ms(t.toString)&&t.toString()==="[object FormData]"))},wV=Qo("URLSearchParams"),[_V,SV,EV,IV]=["ReadableStream","Request","Response","Headers"].map(Qo),NV=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),xf(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function iF(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const nc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sF=t=>!kh(t)&&t!==nc;function FE(){const{caseless:t}=sF(this)&&this||{},e={},n=(r,i)=>{const s=t&&iF(e,i)||i;Uy(e[s])&&Uy(r)?e[s]=FE(e[s],r):Uy(r)?e[s]=FE({},r):xf(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&xm(arguments[r],n);return e}const kV=(t,e,n,{allOwnKeys:r}={})=>(xm(e,(i,s)=>{n&&Ms(i)?t[s]=tF(i,n):t[s]=i},{allOwnKeys:r}),t),CV=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),TV=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},RV=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&sN(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},jV=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},OV=t=>{if(!t)return null;if(xf(t))return t;let e=t.length;if(!rF(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},qV=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&sN(Uint8Array)),AV=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},PV=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},FV=Qo("HTMLFormElement"),DV=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),rR=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),LV=Qo("RegExp"),oF=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};xm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},MV=t=>{oF(t,(e,n)=>{if(Ms(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ms(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},$V=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return xf(t)?r(t):r(String(t).split(e)),n},BV=()=>{},zV=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,D_="abcdefghijklmnopqrstuvwxyz",iR="0123456789",aF={DIGIT:iR,ALPHA:D_,ALPHA_DIGIT:D_+D_.toUpperCase()+iR},WV=(t=16,e=aF.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function UV(t){return!!(t&&Ms(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const VV=t=>{const e=new Array(10),n=(r,i)=>{if(Vv(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=xf(r)?[]:{};return xm(r,(o,a)=>{const u=n(o,i+1);!kh(u)&&(s[a]=u)}),e[i]=void 0,s}}return r};return n(t,0)},HV=Qo("AsyncFunction"),GV=t=>t&&(Vv(t)||Ms(t))&&Ms(t.then)&&Ms(t.catch),lF=((t,e)=>t?setImmediate:e?((n,r)=>(nc.addEventListener("message",({source:i,data:s})=>{i===nc&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),nc.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ms(nc.postMessage)),KV=typeof queueMicrotask<"u"?queueMicrotask.bind(nc):typeof process<"u"&&process.nextTick||lF,Ye={isArray:xf,isArrayBuffer:nF,isBuffer:dV,isFormData:xV,isArrayBufferView:fV,isString:pV,isNumber:rF,isBoolean:hV,isObject:Vv,isPlainObject:Uy,isReadableStream:_V,isRequest:SV,isResponse:EV,isHeaders:IV,isUndefined:kh,isDate:mV,isFile:gV,isBlob:yV,isRegExp:LV,isFunction:Ms,isStream:vV,isURLSearchParams:wV,isTypedArray:qV,isFileList:bV,forEach:xm,merge:FE,extend:kV,trim:NV,stripBOM:CV,inherits:TV,toFlatObject:RV,kindOf:Wv,kindOfTest:Qo,endsWith:jV,toArray:OV,forEachEntry:AV,matchAll:PV,isHTMLForm:FV,hasOwnProperty:rR,hasOwnProp:rR,reduceDescriptors:oF,freezeMethods:MV,toObjectSet:$V,toCamelCase:DV,noop:BV,toFiniteNumber:zV,findKey:iF,global:nc,isContextDefined:sF,ALPHABET:aF,generateString:WV,isSpecCompliantForm:UV,toJSONObject:VV,isAsyncFn:HV,isThenable:GV,setImmediate:lF,asap:KV};function Nn(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ye.inherits(Nn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ye.toJSONObject(this.config),code:this.code,status:this.status}}});const uF=Nn.prototype,cF={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{cF[t]={value:t}});Object.defineProperties(Nn,cF);Object.defineProperty(uF,"isAxiosError",{value:!0});Nn.from=(t,e,n,r,i,s)=>{const o=Object.create(uF);return Ye.toFlatObject(t,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),Nn.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const QV=null;function DE(t){return Ye.isPlainObject(t)||Ye.isArray(t)}function dF(t){return Ye.endsWith(t,"[]")?t.slice(0,-2):t}function sR(t,e,n){return t?t.concat(e).map(function(i,s){return i=dF(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function JV(t){return Ye.isArray(t)&&!t.some(DE)}const ZV=Ye.toFlatObject(Ye,{},null,function(e){return/^is[A-Z]/.test(e)});function Hv(t,e,n){if(!Ye.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ye.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,I){return!Ye.isUndefined(I[S])});const r=n.metaTokens,i=n.visitor||p,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Ye.isSpecCompliantForm(e);if(!Ye.isFunction(i))throw new TypeError("visitor must be a function");function d(_){if(_===null)return"";if(Ye.isDate(_))return _.toISOString();if(!u&&Ye.isBlob(_))throw new Nn("Blob is not supported. Use a Buffer instead.");return Ye.isArrayBuffer(_)||Ye.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,S,I){let C=_;if(_&&!I&&typeof _=="object"){if(Ye.endsWith(S,"{}"))S=r?S:S.slice(0,-2),_=JSON.stringify(_);else if(Ye.isArray(_)&&JV(_)||(Ye.isFileList(_)||Ye.endsWith(S,"[]"))&&(C=Ye.toArray(_)))return S=dF(S),C.forEach(function(R,j){!(Ye.isUndefined(R)||R===null)&&e.append(o===!0?sR([S],j,s):o===null?S:S+"[]",d(R))}),!1}return DE(_)?!0:(e.append(sR(I,S,s),d(_)),!1)}const h=[],y=Object.assign(ZV,{defaultVisitor:p,convertValue:d,isVisitable:DE});function x(_,S){if(!Ye.isUndefined(_)){if(h.indexOf(_)!==-1)throw Error("Circular reference detected in "+S.join("."));h.push(_),Ye.forEach(_,function(C,k){(!(Ye.isUndefined(C)||C===null)&&i.call(e,C,Ye.isString(k)?k.trim():k,S,y))===!0&&x(C,S?S.concat(k):[k])}),h.pop()}}if(!Ye.isObject(t))throw new TypeError("data must be an object");return x(t),e}function oR(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function oN(t,e){this._pairs=[],t&&Hv(t,this,e)}const fF=oN.prototype;fF.append=function(e,n){this._pairs.push([e,n])};fF.toString=function(e){const n=e?function(r){return e.call(this,r,oR)}:oR;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function YV(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pF(t,e,n){if(!e)return t;const r=n&&n.encode||YV;Ye.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Ye.isURLSearchParams(e)?e.toString():new oN(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class aR{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const hF={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},XV=typeof URLSearchParams<"u"?URLSearchParams:oN,e5=typeof FormData<"u"?FormData:null,t5=typeof Blob<"u"?Blob:null,n5={isBrowser:!0,classes:{URLSearchParams:XV,FormData:e5,Blob:t5},protocols:["http","https","file","blob","url","data"]},aN=typeof window<"u"&&typeof document<"u",LE=typeof navigator=="object"&&navigator||void 0,r5=aN&&(!LE||["ReactNative","NativeScript","NS"].indexOf(LE.product)<0),i5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",s5=aN&&window.location.href||"http://localhost",o5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:aN,hasStandardBrowserEnv:r5,hasStandardBrowserWebWorkerEnv:i5,navigator:LE,origin:s5},Symbol.toStringTag,{value:"Module"})),Pi={...o5,...n5};function a5(t,e){return Hv(t,new Pi.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Pi.isNode&&Ye.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function l5(t){return Ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function u5(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function mF(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=s>=n.length;return o=!o&&Ye.isArray(i)?i.length:o,u?(Ye.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Ye.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Ye.isArray(i[o])&&(i[o]=u5(i[o])),!a)}if(Ye.isFormData(t)&&Ye.isFunction(t.entries)){const n={};return Ye.forEachEntry(t,(r,i)=>{e(l5(r),i,n,0)}),n}return null}function c5(t,e,n){if(Ye.isString(t))try{return(e||JSON.parse)(t),Ye.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const wm={transitional:hF,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Ye.isObject(e);if(s&&Ye.isHTMLForm(e)&&(e=new FormData(e)),Ye.isFormData(e))return i?JSON.stringify(mF(e)):e;if(Ye.isArrayBuffer(e)||Ye.isBuffer(e)||Ye.isStream(e)||Ye.isFile(e)||Ye.isBlob(e)||Ye.isReadableStream(e))return e;if(Ye.isArrayBufferView(e))return e.buffer;if(Ye.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return a5(e,this.formSerializer).toString();if((a=Ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Hv(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),c5(e)):e}],transformResponse:[function(e){const n=this.transitional||wm.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Ye.isResponse(e)||Ye.isReadableStream(e))return e;if(e&&Ye.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Nn.from(a,Nn.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pi.classes.FormData,Blob:Pi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ye.forEach(["delete","get","head","post","put","patch"],t=>{wm.headers[t]={}});const d5=Ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),f5=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&d5[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},lR=Symbol("internals");function Tp(t){return t&&String(t).trim().toLowerCase()}function Vy(t){return t===!1||t==null?t:Ye.isArray(t)?t.map(Vy):String(t)}function p5(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const h5=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function L_(t,e,n,r,i){if(Ye.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Ye.isString(e)){if(Ye.isString(r))return e.indexOf(r)!==-1;if(Ye.isRegExp(r))return r.test(e)}}function m5(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function g5(t,e){const n=Ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let xs=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,u,d){const p=Tp(u);if(!p)throw new Error("header name must be a non-empty string");const h=Ye.findKey(i,p);(!h||i[h]===void 0||d===!0||d===void 0&&i[h]!==!1)&&(i[h||u]=Vy(a))}const o=(a,u)=>Ye.forEach(a,(d,p)=>s(d,p,u));if(Ye.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Ye.isString(e)&&(e=e.trim())&&!h5(e))o(f5(e),n);else if(Ye.isHeaders(e))for(const[a,u]of e.entries())s(u,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Tp(e),e){const r=Ye.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return p5(i);if(Ye.isFunction(n))return n.call(this,i,r);if(Ye.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Tp(e),e){const r=Ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||L_(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Tp(o),o){const a=Ye.findKey(r,o);a&&(!n||L_(r,r[a],a,n))&&(delete r[a],i=!0)}}return Ye.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||L_(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Ye.forEach(this,(i,s)=>{const o=Ye.findKey(r,s);if(o){n[o]=Vy(i),delete n[s];return}const a=e?m5(s):String(s).trim();a!==s&&delete n[s],n[a]=Vy(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ye.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Ye.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[lR]=this[lR]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Tp(o);r[a]||(g5(i,o),r[a]=!0)}return Ye.isArray(e)?e.forEach(s):s(e),this}};xs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ye.reduceDescriptors(xs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ye.freezeMethods(xs);function M_(t,e){const n=this||wm,r=e||n,i=xs.from(r.headers);let s=r.data;return Ye.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function gF(t){return!!(t&&t.__CANCEL__)}function wf(t,e,n){Nn.call(this,t??"canceled",Nn.ERR_CANCELED,e,n),this.name="CanceledError"}Ye.inherits(wf,Nn,{__CANCEL__:!0});function yF(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Nn("Request failed with status code "+n.status,[Nn.ERR_BAD_REQUEST,Nn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function y5(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function b5(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),p=r[s];o||(o=d),n[i]=u,r[i]=d;let h=s,y=0;for(;h!==i;)y+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),d-o<e)return;const x=p&&d-p;return x?Math.round(y*1e3/x):void 0}}function v5(t,e){let n=0,r=1e3/e,i,s;const o=(d,p=Date.now())=>{n=p,i=null,s&&(clearTimeout(s),s=null),t.apply(null,d)};return[(...d)=>{const p=Date.now(),h=p-n;h>=r?o(d,p):(i=d,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const Ab=(t,e,n=3)=>{let r=0;const i=b5(50,250);return v5(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,u=o-r,d=i(u),p=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:d||void 0,estimated:d&&a&&p?(a-o)/d:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},uR=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},cR=t=>(...e)=>Ye.asap(()=>t(...e)),x5=Pi.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Pi.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Pi.origin),Pi.navigator&&/(msie|trident)/i.test(Pi.navigator.userAgent)):()=>!0,w5=Pi.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Ye.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ye.isString(r)&&o.push("path="+r),Ye.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _5(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function S5(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function bF(t,e){return t&&!_5(e)?S5(t,e):e}const dR=t=>t instanceof xs?{...t}:t;function hc(t,e){e=e||{};const n={};function r(d,p,h,y){return Ye.isPlainObject(d)&&Ye.isPlainObject(p)?Ye.merge.call({caseless:y},d,p):Ye.isPlainObject(p)?Ye.merge({},p):Ye.isArray(p)?p.slice():p}function i(d,p,h,y){if(Ye.isUndefined(p)){if(!Ye.isUndefined(d))return r(void 0,d,h,y)}else return r(d,p,h,y)}function s(d,p){if(!Ye.isUndefined(p))return r(void 0,p)}function o(d,p){if(Ye.isUndefined(p)){if(!Ye.isUndefined(d))return r(void 0,d)}else return r(void 0,p)}function a(d,p,h){if(h in e)return r(d,p);if(h in t)return r(void 0,d)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(d,p,h)=>i(dR(d),dR(p),h,!0)};return Ye.forEach(Object.keys(Object.assign({},t,e)),function(p){const h=u[p]||i,y=h(t[p],e[p],p);Ye.isUndefined(y)&&h!==a||(n[p]=y)}),n}const vF=t=>{const e=hc({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=xs.from(o),e.url=pF(bF(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(Ye.isFormData(n)){if(Pi.hasStandardBrowserEnv||Pi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[d,...p]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...p].join("; "))}}if(Pi.hasStandardBrowserEnv&&(r&&Ye.isFunction(r)&&(r=r(e)),r||r!==!1&&x5(e.url))){const d=i&&s&&w5.read(s);d&&o.set(i,d)}return e},E5=typeof XMLHttpRequest<"u",I5=E5&&function(t){return new Promise(function(n,r){const i=vF(t);let s=i.data;const o=xs.from(i.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:d}=i,p,h,y,x,_;function S(){x&&x(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let I=new XMLHttpRequest;I.open(i.method.toUpperCase(),i.url,!0),I.timeout=i.timeout;function C(){if(!I)return;const R=xs.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),A={data:!a||a==="text"||a==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:R,config:t,request:I};yF(function($){n($),S()},function($){r($),S()},A),I=null}"onloadend"in I?I.onloadend=C:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(C)},I.onabort=function(){I&&(r(new Nn("Request aborted",Nn.ECONNABORTED,t,I)),I=null)},I.onerror=function(){r(new Nn("Network Error",Nn.ERR_NETWORK,t,I)),I=null},I.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const A=i.transitional||hF;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),r(new Nn(j,A.clarifyTimeoutError?Nn.ETIMEDOUT:Nn.ECONNABORTED,t,I)),I=null},s===void 0&&o.setContentType(null),"setRequestHeader"in I&&Ye.forEach(o.toJSON(),function(j,A){I.setRequestHeader(A,j)}),Ye.isUndefined(i.withCredentials)||(I.withCredentials=!!i.withCredentials),a&&a!=="json"&&(I.responseType=i.responseType),d&&([y,_]=Ab(d,!0),I.addEventListener("progress",y)),u&&I.upload&&([h,x]=Ab(u),I.upload.addEventListener("progress",h),I.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(p=R=>{I&&(r(!R||R.type?new wf(null,t,I):R),I.abort(),I=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const k=y5(i.url);if(k&&Pi.protocols.indexOf(k)===-1){r(new Nn("Unsupported protocol "+k+":",Nn.ERR_BAD_REQUEST,t));return}I.send(s||null)})},N5=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(d){if(!i){i=!0,a();const p=d instanceof Error?d:this.reason;r.abort(p instanceof Nn?p:new wf(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,s(new Nn(`timeout ${e} of ms exceeded`,Nn.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),t=null)};t.forEach(d=>d.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>Ye.asap(a),u}},k5=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},C5=async function*(t,e){for await(const n of T5(t))yield*k5(n,e)},T5=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},fR=(t,e,n,r)=>{const i=C5(t,e);let s=0,o,a=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:p}=await i.next();if(d){a(),u.close();return}let h=p.byteLength;if(n){let y=s+=h;n(y)}u.enqueue(new Uint8Array(p))}catch(d){throw a(d),d}},cancel(u){return a(u),i.return()}},{highWaterMark:2})},Gv=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",xF=Gv&&typeof ReadableStream=="function",R5=Gv&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),wF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},j5=xF&&wF(()=>{let t=!1;const e=new Request(Pi.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),pR=64*1024,ME=xF&&wF(()=>Ye.isReadableStream(new Response("").body)),Pb={stream:ME&&(t=>t.body)};Gv&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Pb[e]&&(Pb[e]=Ye.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Nn(`Response type '${e}' is not supported`,Nn.ERR_NOT_SUPPORT,r)})})})(new Response);const O5=async t=>{if(t==null)return 0;if(Ye.isBlob(t))return t.size;if(Ye.isSpecCompliantForm(t))return(await new Request(Pi.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ye.isArrayBufferView(t)||Ye.isArrayBuffer(t))return t.byteLength;if(Ye.isURLSearchParams(t)&&(t=t+""),Ye.isString(t))return(await R5(t)).byteLength},q5=async(t,e)=>{const n=Ye.toFiniteNumber(t.getContentLength());return n??O5(e)},A5=Gv&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:u,responseType:d,headers:p,withCredentials:h="same-origin",fetchOptions:y}=vF(t);d=d?(d+"").toLowerCase():"text";let x=N5([i,s&&s.toAbortSignal()],o),_;const S=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let I;try{if(u&&j5&&n!=="get"&&n!=="head"&&(I=await q5(p,r))!==0){let A=new Request(e,{method:"POST",body:r,duplex:"half"}),F;if(Ye.isFormData(r)&&(F=A.headers.get("content-type"))&&p.setContentType(F),A.body){const[$,P]=uR(I,Ab(cR(u)));r=fR(A.body,pR,$,P)}}Ye.isString(h)||(h=h?"include":"omit");const C="credentials"in Request.prototype;_=new Request(e,{...y,signal:x,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:C?h:void 0});let k=await fetch(_);const R=ME&&(d==="stream"||d==="response");if(ME&&(a||R&&S)){const A={};["status","statusText","headers"].forEach(q=>{A[q]=k[q]});const F=Ye.toFiniteNumber(k.headers.get("content-length")),[$,P]=a&&uR(F,Ab(cR(a),!0))||[];k=new Response(fR(k.body,pR,$,()=>{P&&P(),S&&S()}),A)}d=d||"text";let j=await Pb[Ye.findKey(Pb,d)||"text"](k,t);return!R&&S&&S(),await new Promise((A,F)=>{yF(A,F,{data:j,headers:xs.from(k.headers),status:k.status,statusText:k.statusText,config:t,request:_})})}catch(C){throw S&&S(),C&&C.name==="TypeError"&&/fetch/i.test(C.message)?Object.assign(new Nn("Network Error",Nn.ERR_NETWORK,t,_),{cause:C.cause||C}):Nn.from(C,C&&C.code,t,_)}}),$E={http:QV,xhr:I5,fetch:A5};Ye.forEach($E,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const hR=t=>`- ${t}`,P5=t=>Ye.isFunction(t)||t===null||t===!1,_F={getAdapter:t=>{t=Ye.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!P5(n)&&(r=$E[(o=String(n)).toLowerCase()],r===void 0))throw new Nn(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(hR).join(`
`):" "+hR(s[0]):"as no adapter specified";throw new Nn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:$E};function $_(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new wf(null,t)}function mR(t){return $_(t),t.headers=xs.from(t.headers),t.data=M_.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),_F.getAdapter(t.adapter||wm.adapter)(t).then(function(r){return $_(t),r.data=M_.call(t,t.transformResponse,r),r.headers=xs.from(r.headers),r},function(r){return gF(r)||($_(t),r&&r.response&&(r.response.data=M_.call(t,t.transformResponse,r.response),r.response.headers=xs.from(r.response.headers))),Promise.reject(r)})}const SF="1.7.9",Kv={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Kv[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const gR={};Kv.transitional=function(e,n,r){function i(s,o){return"[Axios v"+SF+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Nn(i(o," has been removed"+(n?" in "+n:"")),Nn.ERR_DEPRECATED);return n&&!gR[o]&&(gR[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Kv.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function F5(t,e,n){if(typeof t!="object")throw new Nn("options must be an object",Nn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new Nn("option "+s+" must be "+u,Nn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Nn("Unknown option "+s,Nn.ERR_BAD_OPTION)}}const Hy={assertOptions:F5,validators:Kv},na=Hy.validators;let ac=class{constructor(e){this.defaults=e,this.interceptors={request:new aR,response:new aR}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=hc(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Hy.assertOptions(r,{silentJSONParsing:na.transitional(na.boolean),forcedJSONParsing:na.transitional(na.boolean),clarifyTimeoutError:na.transitional(na.boolean)},!1),i!=null&&(Ye.isFunction(i)?n.paramsSerializer={serialize:i}:Hy.assertOptions(i,{encode:na.function,serialize:na.function},!0)),Hy.assertOptions(n,{baseUrl:na.spelling("baseURL"),withXsrfToken:na.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ye.merge(s.common,s[n.method]);s&&Ye.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=xs.concat(o,s);const a=[];let u=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(u=u&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const d=[];this.interceptors.response.forEach(function(S){d.push(S.fulfilled,S.rejected)});let p,h=0,y;if(!u){const _=[mR.bind(this),void 0];for(_.unshift.apply(_,a),_.push.apply(_,d),y=_.length,p=Promise.resolve(n);h<y;)p=p.then(_[h++],_[h++]);return p}y=a.length;let x=n;for(h=0;h<y;){const _=a[h++],S=a[h++];try{x=_(x)}catch(I){S.call(this,I);break}}try{p=mR.call(this,x)}catch(_){return Promise.reject(_)}for(h=0,y=d.length;h<y;)p=p.then(d[h++],d[h++]);return p}getUri(e){e=hc(this.defaults,e);const n=bF(e.baseURL,e.url);return pF(n,e.params,e.paramsSerializer)}};Ye.forEach(["delete","get","head","options"],function(e){ac.prototype[e]=function(n,r){return this.request(hc(r||{},{method:e,url:n,data:(r||{}).data}))}});Ye.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(hc(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ac.prototype[e]=n(),ac.prototype[e+"Form"]=n(!0)});let D5=class EF{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new wf(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new EF(function(i){e=i}),cancel:e}}};function L5(t){return function(n){return t.apply(null,n)}}function M5(t){return Ye.isObject(t)&&t.isAxiosError===!0}const BE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(BE).forEach(([t,e])=>{BE[e]=t});function IF(t){const e=new ac(t),n=tF(ac.prototype.request,e);return Ye.extend(n,ac.prototype,e,{allOwnKeys:!0}),Ye.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return IF(hc(t,i))},n}const Kr=IF(wm);Kr.Axios=ac;Kr.CanceledError=wf;Kr.CancelToken=D5;Kr.isCancel=gF;Kr.VERSION=SF;Kr.toFormData=Hv;Kr.AxiosError=Nn;Kr.Cancel=Kr.CanceledError;Kr.all=function(e){return Promise.all(e)};Kr.spread=L5;Kr.isAxiosError=M5;Kr.mergeConfig=hc;Kr.AxiosHeaders=xs;Kr.formToJSON=t=>mF(Ye.isHTMLForm(t)?new FormData(t):t);Kr.getAdapter=_F.getAdapter;Kr.HttpStatusCode=BE;Kr.default=Kr;const{Axios:pfe,AxiosError:$5,CanceledError:hfe,isCancel:mfe,CancelToken:gfe,VERSION:yfe,all:bfe,Cancel:vfe,isAxiosError:xfe,spread:wfe,toFormData:_fe,AxiosHeaders:Sfe,HttpStatusCode:Efe,formToJSON:Ife,getAdapter:Nfe,mergeConfig:kfe}=Kr,lN=({error:t,schema:e,onError:n})=>{if(t instanceof $5){const i=e.safeParse(t.response?.data);return i.success&&n({error:t,data:i.data}),i.success}return!1};var B_,yR;function B5(){if(yR)return B_;yR=1;function t(r){this.queue=[],this.timeslotRequests=0,this.interceptors={request:null,response:null},this.handleRequest=this.handleRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.enable(r)}t.prototype.getMaxRPS=function(){var r=this.perMilliseconds/1e3;return this.maxRequests/r},t.prototype.getQueue=function(){return this.queue},t.prototype.setMaxRPS=function(r){this.setRateLimitOptions({maxRequests:r,perMilliseconds:1e3})},t.prototype.setRateLimitOptions=function(r){r.maxRPS?this.setMaxRPS(r.maxRPS):(this.perMilliseconds=r.perMilliseconds,this.maxRequests=r.maxRequests)},t.prototype.enable=function(r){function i(s){return Promise.reject(s)}this.interceptors.request=r.interceptors.request.use(this.handleRequest,i),this.interceptors.response=r.interceptors.response.use(this.handleResponse,i)};function e(r){r.cancelToken&&r.cancelToken.throwIfRequested()}t.prototype.handleRequest=function(r){return new Promise(function(i,s){this.push({resolve:function(){try{e(r)}catch(o){return s(o),!1}return i(r),!0}})}.bind(this))},t.prototype.handleResponse=function(r){return this.shift(),r},t.prototype.push=function(r){this.queue.push(r),this.shiftInitial()},t.prototype.shiftInitial=function(){setTimeout(function(){return this.shift()}.bind(this),0)},t.prototype.shift=function(){if(this.queue.length){if(this.timeslotRequests===this.maxRequests){this.timeoutId&&typeof this.timeoutId.ref=="function"&&this.timeoutId.ref();return}var r=this.queue.shift(),i=r.resolve();if(this.timeslotRequests===0&&(this.timeoutId=setTimeout(function(){this.timeslotRequests=0,this.shift()}.bind(this),this.perMilliseconds),typeof this.timeoutId.unref=="function"&&this.queue.length===0&&this.timeoutId.unref()),!i){this.shift();return}this.timeslotRequests+=1}};function n(r,i){var s=new t(r);return s.setRateLimitOptions(i),r.getQueue=t.prototype.getQueue.bind(s),r.getMaxRPS=t.prototype.getMaxRPS.bind(s),r.setMaxRPS=t.prototype.setMaxRPS.bind(s),r.setRateLimitOptions=t.prototype.setRateLimitOptions.bind(s),r}return B_=n,B_}var z5=B5();const W5=vo(z5),U5=({instance:t,limit:e}={})=>W5(t||Kr,e||{maxRequests:5,perMilliseconds:100}),uN="-",V5=t=>{const e=G5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(uN);return a[0]===""&&a.length!==1&&a.shift(),NF(a,e)||H5(o)},getConflictingClassGroupIds:(o,a)=>{const u=n[o]||[];return a&&r[o]?[...u,...r[o]]:u}}},NF=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?NF(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(uN);return e.validators.find(({validator:o})=>o(s))?.classGroupId},bR=/^\[(.+)\]$/,H5=t=>{if(bR.test(t)){const e=bR.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},G5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Q5(Object.entries(t.classGroups),n).forEach(([s,o])=>{zE(o,r,s,e)}),r},zE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:vR(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(K5(i)){zE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{zE(o,vR(e,s),n,r)})})},vR=(t,e)=>{let n=t;return e.split(uN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},K5=t=>t.isThemeGetter,Q5=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,J5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},kF="!",Z5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const u=[];let d=0,p=0,h;for(let I=0;I<a.length;I++){let C=a[I];if(d===0){if(C===i&&(r||a.slice(I,I+s)===e)){u.push(a.slice(p,I)),p=I+s;continue}if(C==="/"){h=I;continue}}C==="["?d++:C==="]"&&d--}const y=u.length===0?a:a.substring(p),x=y.startsWith(kF),_=x?y.substring(1):y,S=h&&h>p?h-p:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:S}};return n?a=>n({className:a,parseClassName:o}):o},Y5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},X5=t=>({cache:J5(t.cacheSize),parseClassName:Z5(t),...V5(t)}),e8=/\s+/,t8=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(e8);let a="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:p,hasImportantModifier:h,baseClassName:y,maybePostfixModifierPosition:x}=n(d);let _=!!x,S=r(_?y.substring(0,x):y);if(!S){if(!_){a=d+(a.length>0?" "+a:a);continue}if(S=r(y),!S){a=d+(a.length>0?" "+a:a);continue}_=!1}const I=Y5(p).join(":"),C=h?I+kF:I,k=C+S;if(s.includes(k))continue;s.push(k);const R=i(S,_);for(let j=0;j<R.length;++j){const A=R[j];s.push(C+A)}a=d+(a.length>0?" "+a:a)}return a};function n8(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=CF(e))&&(r&&(r+=" "),r+=n);return r}const CF=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=CF(t[r]))&&(n&&(n+=" "),n+=e);return n};function r8(t,...e){let n,r,i,s=o;function o(u){const d=e.reduce((p,h)=>h(p),t());return n=X5(d),r=n.cache.get,i=n.cache.set,s=a,a(u)}function a(u){const d=r(u);if(d)return d;const p=t8(u,n);return i(u,p),p}return function(){return s(n8.apply(null,arguments))}}const mr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},TF=/^\[(?:([a-z-]+):)?(.+)\]$/i,i8=/^\d+\/\d+$/,s8=new Set(["px","full","screen"]),o8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,a8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,l8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,u8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,c8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fa=t=>Ld(t)||s8.has(t)||i8.test(t),Rl=t=>_f(t,"length",b8),Ld=t=>!!t&&!Number.isNaN(Number(t)),z_=t=>_f(t,"number",Ld),Rp=t=>!!t&&Number.isInteger(Number(t)),d8=t=>t.endsWith("%")&&Ld(t.slice(0,-1)),Cn=t=>TF.test(t),jl=t=>o8.test(t),f8=new Set(["length","size","percentage"]),p8=t=>_f(t,f8,RF),h8=t=>_f(t,"position",RF),m8=new Set(["image","url"]),g8=t=>_f(t,m8,x8),y8=t=>_f(t,"",v8),jp=()=>!0,_f=(t,e,n)=>{const r=TF.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},b8=t=>a8.test(t)&&!l8.test(t),RF=()=>!1,v8=t=>u8.test(t),x8=t=>c8.test(t),w8=()=>{const t=mr("colors"),e=mr("spacing"),n=mr("blur"),r=mr("brightness"),i=mr("borderColor"),s=mr("borderRadius"),o=mr("borderSpacing"),a=mr("borderWidth"),u=mr("contrast"),d=mr("grayscale"),p=mr("hueRotate"),h=mr("invert"),y=mr("gap"),x=mr("gradientColorStops"),_=mr("gradientColorStopPositions"),S=mr("inset"),I=mr("margin"),C=mr("opacity"),k=mr("padding"),R=mr("saturate"),j=mr("scale"),A=mr("sepia"),F=mr("skew"),$=mr("space"),P=mr("translate"),q=()=>["auto","contain","none"],B=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",Cn,e],U=()=>[Cn,e],V=()=>["",Fa,Rl],z=()=>["auto",Ld,Cn],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>["start","end","center","between","around","evenly","stretch"],ne=()=>["","0",Cn],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[Ld,Cn];return{cacheSize:500,separator:":",theme:{colors:[jp],spacing:[Fa,Rl],blur:["none","",jl,Cn],brightness:te(),borderColor:[t],borderRadius:["none","","full",jl,Cn],borderSpacing:U(),borderWidth:V(),contrast:te(),grayscale:ne(),hueRotate:te(),invert:ne(),gap:U(),gradientColorStops:[t],gradientColorStopPositions:[d8,Rl],inset:L(),margin:L(),opacity:te(),padding:U(),saturate:te(),scale:te(),sepia:ne(),skew:te(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",Cn]}],container:["container"],columns:[{columns:[jl]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),Cn]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:q()}],"overscroll-x":[{"overscroll-x":q()}],"overscroll-y":[{"overscroll-y":q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Rp,Cn]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Cn]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",Rp,Cn]}],"grid-cols":[{"grid-cols":[jp]}],"col-start-end":[{col:["auto",{span:["full",Rp,Cn]},Cn]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[jp]}],"row-start-end":[{row:["auto",{span:[Rp,Cn]},Cn]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Cn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Cn]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...ie()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ie(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ie(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[I]}],mx:[{mx:[I]}],my:[{my:[I]}],ms:[{ms:[I]}],me:[{me:[I]}],mt:[{mt:[I]}],mr:[{mr:[I]}],mb:[{mb:[I]}],ml:[{ml:[I]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Cn,e]}],"min-w":[{"min-w":[Cn,e,"min","max","fit"]}],"max-w":[{"max-w":[Cn,e,"none","full","min","max","fit","prose",{screen:[jl]},jl]}],h:[{h:[Cn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Cn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Cn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Cn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",jl,Rl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",z_]}],"font-family":[{font:[jp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Cn]}],"line-clamp":[{"line-clamp":["none",Ld,z_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Fa,Cn]}],"list-image":[{"list-image":["none",Cn]}],"list-style-type":[{list:["none","disc","decimal",Cn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Fa,Rl]}],"underline-offset":[{"underline-offset":["auto",Fa,Cn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Cn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Cn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),h8]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",p8]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},g8]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:J()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[Fa,Cn]}],"outline-w":[{outline:[Fa,Rl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[Fa,Rl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",jl,y8]}],"shadow-color":[{shadow:[jp]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",jl,Cn]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[h]}],saturate:[{saturate:[R]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Cn]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",Cn]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",Cn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Rp,Cn]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Cn]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Cn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Cn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Fa,Rl,z_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},jF=r8(w8),WE=new Proxy(()=>WE,{get:()=>WE});function En({use:t,slot:e,variant:n,match:r=[],defaults:i}){return({css:s,...o}={})=>({slots:new Proxy({},{get:(a,u)=>({css:d,...p}={})=>{const h=[],y=t,x={...y?.()?.config.defaults,...i,...o,...p};h.push(y?.(x)?.slots[u]?.(x)),h.push(Array.isArray(e[u])?e[u]:[e[u]]);for(const[_,S]of Object.entries(x)){const I=n[_]?.[S];I&&h.push(I)}for(const _ of r)Object.entries(_.if).every(([S,I])=>I===x[S])&&h.push(_.then?.[u]);return h.push(s?.[u]),h.push(d),jF(h)}}),config:{defaults:{...t?.()?.config.defaults,...i},values:{...t?.()?.config.defaults,...i,...o}},type:WE()})}const cn=jF;var W_,xR;function OF(){return xR||(xR=1,W_=Object),W_}var U_,wR;function _8(){return wR||(wR=1,U_=Error),U_}var V_,_R;function S8(){return _R||(_R=1,V_=EvalError),V_}var H_,SR;function E8(){return SR||(SR=1,H_=RangeError),H_}var G_,ER;function I8(){return ER||(ER=1,G_=ReferenceError),G_}var K_,IR;function N8(){return IR||(IR=1,K_=SyntaxError),K_}var Q_,NR;function qF(){return NR||(NR=1,Q_=TypeError),Q_}var J_,kR;function k8(){return kR||(kR=1,J_=URIError),J_}var Z_,CR;function C8(){return CR||(CR=1,Z_=Math.abs),Z_}var Y_,TR;function T8(){return TR||(TR=1,Y_=Math.floor),Y_}var X_,RR;function R8(){return RR||(RR=1,X_=Math.max),X_}var e0,jR;function j8(){return jR||(jR=1,e0=Math.min),e0}var t0,OR;function O8(){return OR||(OR=1,t0=Math.pow),t0}var n0,qR;function q8(){return qR||(qR=1,n0=Math.round),n0}var r0,AR;function A8(){return AR||(AR=1,r0=Number.isNaN||function(e){return e!==e}),r0}var i0,PR;function P8(){if(PR)return i0;PR=1;var t=A8();return i0=function(n){return t(n)||n===0?n:n<0?-1:1},i0}var s0,FR;function F8(){return FR||(FR=1,s0=Object.getOwnPropertyDescriptor),s0}var o0,DR;function AF(){if(DR)return o0;DR=1;var t=F8();if(t)try{t([],"length")}catch{t=null}return o0=t,o0}var a0,LR;function D8(){if(LR)return a0;LR=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return a0=t,a0}var l0,MR;function PF(){return MR||(MR=1,l0=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,n);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),l0}var u0,$R;function L8(){if($R)return u0;$R=1;var t=typeof Symbol<"u"&&Symbol,e=PF();return u0=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},u0}var c0,BR;function FF(){return BR||(BR=1,c0=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),c0}var d0,zR;function DF(){if(zR)return d0;zR=1;var t=OF();return d0=t.getPrototypeOf||null,d0}var f0,WR;function M8(){if(WR)return f0;WR=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(u,d){for(var p=[],h=0;h<u.length;h+=1)p[h]=u[h];for(var y=0;y<d.length;y+=1)p[y+u.length]=d[y];return p},s=function(u,d){for(var p=[],h=d,y=0;h<u.length;h+=1,y+=1)p[y]=u[h];return p},o=function(a,u){for(var d="",p=0;p<a.length;p+=1)d+=a[p],p+1<a.length&&(d+=u);return d};return f0=function(u){var d=this;if(typeof d!="function"||e.apply(d)!==r)throw new TypeError(t+d);for(var p=s(arguments,1),h,y=function(){if(this instanceof h){var C=d.apply(this,i(p,arguments));return Object(C)===C?C:this}return d.apply(u,i(p,arguments))},x=n(0,d.length-p.length),_=[],S=0;S<x;S++)_[S]="$"+S;if(h=Function("binder","return function ("+o(_,",")+"){ return binder.apply(this,arguments); }")(y),d.prototype){var I=function(){};I.prototype=d.prototype,h.prototype=new I,I.prototype=null}return h},f0}var p0,UR;function Qv(){if(UR)return p0;UR=1;var t=M8();return p0=Function.prototype.bind||t,p0}var h0,VR;function cN(){return VR||(VR=1,h0=Function.prototype.call),h0}var m0,HR;function LF(){return HR||(HR=1,m0=Function.prototype.apply),m0}var g0,GR;function $8(){return GR||(GR=1,g0=typeof Reflect<"u"&&Reflect&&Reflect.apply),g0}var y0,KR;function B8(){if(KR)return y0;KR=1;var t=Qv(),e=LF(),n=cN(),r=$8();return y0=r||t.call(n,e),y0}var b0,QR;function MF(){if(QR)return b0;QR=1;var t=Qv(),e=qF(),n=cN(),r=B8();return b0=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(t,n,s)},b0}var v0,JR;function z8(){if(JR)return v0;JR=1;var t=MF(),e=AF(),n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return v0=r&&typeof r.get=="function"?t([r.get]):typeof s=="function"?function(a){return s(a==null?a:i(a))}:!1,v0}var x0,ZR;function W8(){if(ZR)return x0;ZR=1;var t=FF(),e=DF(),n=z8();return x0=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:n?function(i){return n(i)}:null,x0}var w0,YR;function U8(){if(YR)return w0;YR=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=Qv();return w0=n.call(t,e),w0}var _0,XR;function V8(){if(XR)return _0;XR=1;var t,e=OF(),n=_8(),r=S8(),i=E8(),s=I8(),o=N8(),a=qF(),u=k8(),d=C8(),p=T8(),h=R8(),y=j8(),x=O8(),_=q8(),S=P8(),I=Function,C=function(De){try{return I('"use strict"; return ('+De+").constructor;")()}catch{}},k=AF(),R=D8(),j=function(){throw new a},A=k?function(){try{return arguments.callee,j}catch{try{return k(arguments,"callee").get}catch{return j}}}():j,F=L8()(),$=W8(),P=DF(),q=FF(),B=LF(),L=cN(),U={},V=typeof Uint8Array>"u"||!$?t:$(Uint8Array),z={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":F&&$?$([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":U,"%AsyncGenerator%":U,"%AsyncGeneratorFunction%":U,"%AsyncIteratorPrototype%":U,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":I,"%GeneratorFunction%":U,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":F&&$?$($([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!F||!$?t:$(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":k,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!F||!$?t:$(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":F&&$?$(""[Symbol.iterator]()):t,"%Symbol%":F?Symbol:t,"%SyntaxError%":o,"%ThrowTypeError%":A,"%TypedArray%":V,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":L,"%Function.prototype.apply%":B,"%Object.defineProperty%":R,"%Object.getPrototypeOf%":P,"%Math.abs%":d,"%Math.floor%":p,"%Math.max%":h,"%Math.min%":y,"%Math.pow%":x,"%Math.round%":_,"%Math.sign%":S,"%Reflect.getPrototypeOf%":q};if($)try{null.error}catch(De){var X=$($(De));z["%Error.prototype%"]=X}var J=function De(Je){var Xe;if(Je==="%AsyncFunction%")Xe=C("async function () {}");else if(Je==="%GeneratorFunction%")Xe=C("function* () {}");else if(Je==="%AsyncGeneratorFunction%")Xe=C("async function* () {}");else if(Je==="%AsyncGenerator%"){var Ue=De("%AsyncGeneratorFunction%");Ue&&(Xe=Ue.prototype)}else if(Je==="%AsyncIteratorPrototype%"){var ut=De("%AsyncGenerator%");ut&&$&&(Xe=$(ut.prototype))}return z[Je]=Xe,Xe},le={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ie=Qv(),ne=U8(),oe=ie.call(L,Array.prototype.concat),te=ie.call(B,Array.prototype.splice),ce=ie.call(L,String.prototype.replace),de=ie.call(L,String.prototype.slice),ye=ie.call(L,RegExp.prototype.exec),we=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ie=/\\(\\)?/g,ze=function(Je){var Xe=de(Je,0,1),Ue=de(Je,-1);if(Xe==="%"&&Ue!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(Ue==="%"&&Xe!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ut=[];return ce(Je,we,function(St,Ot,Gt,an){ut[ut.length]=Gt?ce(an,Ie,"$1"):Ot||St}),ut},je=function(Je,Xe){var Ue=Je,ut;if(ne(le,Ue)&&(ut=le[Ue],Ue="%"+ut[0]+"%"),ne(z,Ue)){var St=z[Ue];if(St===U&&(St=J(Ue)),typeof St>"u"&&!Xe)throw new a("intrinsic "+Je+" exists, but is not available. Please file an issue!");return{alias:ut,name:Ue,value:St}}throw new o("intrinsic "+Je+" does not exist!")};return _0=function(Je,Xe){if(typeof Je!="string"||Je.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Xe!="boolean")throw new a('"allowMissing" argument must be a boolean');if(ye(/^%?[^%]*%?$/,Je)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ue=ze(Je),ut=Ue.length>0?Ue[0]:"",St=je("%"+ut+"%",Xe),Ot=St.name,Gt=St.value,an=!1,xe=St.alias;xe&&(ut=xe[0],te(Ue,oe([0,1],xe)));for(var be=1,Ne=!0;be<Ue.length;be+=1){var Ae=Ue[be],Ve=de(Ae,0,1),rt=de(Ae,-1);if((Ve==='"'||Ve==="'"||Ve==="`"||rt==='"'||rt==="'"||rt==="`")&&Ve!==rt)throw new o("property names with quotes must have matching quotes");if((Ae==="constructor"||!Ne)&&(an=!0),ut+="."+Ae,Ot="%"+ut+"%",ne(z,Ot))Gt=z[Ot];else if(Gt!=null){if(!(Ae in Gt)){if(!Xe)throw new a("base intrinsic for "+Je+" exists, but the property is not available.");return}if(k&&be+1>=Ue.length){var Me=k(Gt,Ae);Ne=!!Me,Ne&&"get"in Me&&!("originalValue"in Me.get)?Gt=Me.get:Gt=Gt[Ae]}else Ne=ne(Gt,Ae),Gt=Gt[Ae];Ne&&!an&&(z[Ot]=Gt)}}return Gt},_0}var S0,ej;function H8(){if(ej)return S0;ej=1;var t=V8(),e=MF(),n=e([t("%String.prototype.indexOf%")]);return S0=function(i,s){var o=t(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?e([o]):o},S0}var E0,tj;function G8(){if(tj)return E0;tj=1;var t=PF();return E0=function(){return t()&&!!Symbol.toStringTag},E0}var I0,nj;function K8(){if(nj)return I0;nj=1;var t=H8(),e=t("String.prototype.valueOf"),n=function(a){try{return e(a),!0}catch{return!1}},r=t("Object.prototype.toString"),i="[object String]",s=G8()();return I0=function(a){return typeof a=="string"?!0:!a||typeof a!="object"?!1:s?n(a):r(a)===i},I0}var Q8=K8();const J8=vo(Q8),Jv=t=>J8(t),Z8=(t,e,n={})=>{const r=[];return t.filter((s,o)=>{const a=n.regionLowerCase?s.toLowerCase():s;if(e.includes(a))return r.push({index:o,appLocale:a}),!0;const{isAvailable:u,appLocale:d}=Y8(a,e,n);return u&&r.push({index:o,appLocale:n.regionLowerCase?d.toLowerCase():d}),u}).map((s,o)=>!r||r.length===0?s:r[o]?.appLocale)},Y8=(t,e,n={})=>{n?.languageOnly||(n.languageOnly=!1);let r=t;return{isAvailable:e.some(s=>{if(!Gy()&&!n.languageOnly&&t.split("-")[1]===void 0)return!1;const o=Gy()?new Intl.Locale(t).minimize().language:t.split("-")[0],a=Gy()?new Intl.Locale(s).minimize().language:s.split("-")[0],u=o===a;return u&&(r=s),u}),appLocale:r}},X8=(t={})=>{t?.regionLowerCase||(t.regionLowerCase=!1);let e=[];return Intl&&"DateTimeFormat"in Intl?e=[Intl.DateTimeFormat().resolvedOptions().locale]:typeof window=="object"&&window?.navigator?.languages&&(e=[...window.navigator.languages]),e.map(n=>t.regionLowerCase?n.toLowerCase():n)},Gy=()=>Intl&&"Locale"in Intl,eH=(t,e={})=>{e?.regionLowerCase||(e.regionLowerCase=!1),e?.languageOnly||(e.languageOnly=!1);const n=t.map(r=>{const i=r.split("-");if(e.languageOnly)return i[0];const s=Gy()?new Intl.Locale(r).maximize():{language:i[0],script:i.length===3?i[1]:void 0,region:i.length===3?i[2]:i[1]},{language:o,script:a}=s;let{region:u}=s;return e.regionLowerCase&&u&&(u=u.toLowerCase()),i.length>2?`${o}-${a}-${u}`:u?`${o}-${u}`:o});return[...new Set(n)]},tH=(t,e,n={})=>{n.regionLowerCase||(n.regionLowerCase=!1),n.languageOnly||(n.languageOnly=!1);const r=X8(n),i=eH([...r,t],n);return Z8(i,e,n)[0]||t},nH=({available:t,fallback:e})=>tH(e,t,{languageOnly:!0});var N0={exports:{}};const rH={},iH=Object.freeze(Object.defineProperty({__proto__:null,default:rH},Symbol.toStringTag,{value:"Module"})),rj=_4(iH);var ij;function sH(){return ij||(ij=1,function(t){(function(){var e="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",s=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?r=Yu:i&&(r=self);var o=!r.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,a=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),d=[-0x80000000,8388608,32768,128],p=[24,16,8,0],h=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],y=["hex","array","digest","arrayBuffer"],x=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(F){return Object.prototype.toString.call(F)==="[object Array]"}),a&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(F){return typeof F=="object"&&F.buffer&&F.buffer.constructor===ArrayBuffer});var _=function(F,$){return function(P){return new R($,!0).update(P)[F]()}},S=function(F){var $=_("hex",F);s&&($=I($,F)),$.create=function(){return new R(F)},$.update=function(B){return $.create().update(B)};for(var P=0;P<y.length;++P){var q=y[P];$[q]=_(q,F)}return $},I=function(F,$){var P=rj,q=rj.Buffer,B=$?"sha224":"sha256",L;q.from&&!r.JS_SHA256_NO_BUFFER_FROM?L=q.from:L=function(V){return new q(V)};var U=function(V){if(typeof V=="string")return P.createHash(B).update(V,"utf8").digest("hex");if(V==null)throw new Error(e);return V.constructor===ArrayBuffer&&(V=new Uint8Array(V)),Array.isArray(V)||ArrayBuffer.isView(V)||V.constructor===q?P.createHash(B).update(L(V)).digest("hex"):F(V)};return U},C=function(F,$){return function(P,q){return new j(P,$,!0).update(q)[F]()}},k=function(F){var $=C("hex",F);$.create=function(B){return new j(B,F)},$.update=function(B,L){return $.create(B).update(L)};for(var P=0;P<y.length;++P){var q=y[P];$[q]=C(q,F)}return $};function R(F,$){$?(x[0]=x[16]=x[1]=x[2]=x[3]=x[4]=x[5]=x[6]=x[7]=x[8]=x[9]=x[10]=x[11]=x[12]=x[13]=x[14]=x[15]=0,this.blocks=x):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F?(this.h0=0xc1059ed8,this.h1=0x367cd507,this.h2=0x3070dd17,this.h3=0xf70e5939,this.h4=0xffc00b31,this.h5=0x68581511,this.h6=0x64f98fa7,this.h7=0xbefa4fa4):(this.h0=0x6a09e667,this.h1=0xbb67ae85,this.h2=0x3c6ef372,this.h3=0xa54ff53a,this.h4=0x510e527f,this.h5=0x9b05688c,this.h6=0x1f83d9ab,this.h7=0x5be0cd19),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=F}R.prototype.update=function(F){if(!this.finalized){var $,P=typeof F;if(P!=="string"){if(P==="object"){if(F===null)throw new Error(e);if(a&&F.constructor===ArrayBuffer)F=new Uint8Array(F);else if(!Array.isArray(F)&&(!a||!ArrayBuffer.isView(F)))throw new Error(e)}else throw new Error(e);$=!0}for(var q,B=0,L,U=F.length,V=this.blocks;B<U;){if(this.hashed&&(this.hashed=!1,V[0]=this.block,this.block=V[16]=V[1]=V[2]=V[3]=V[4]=V[5]=V[6]=V[7]=V[8]=V[9]=V[10]=V[11]=V[12]=V[13]=V[14]=V[15]=0),$)for(L=this.start;B<U&&L<64;++B)V[L>>>2]|=F[B]<<p[L++&3];else for(L=this.start;B<U&&L<64;++B)q=F.charCodeAt(B),q<128?V[L>>>2]|=q<<p[L++&3]:q<2048?(V[L>>>2]|=(192|q>>>6)<<p[L++&3],V[L>>>2]|=(128|q&63)<<p[L++&3]):q<55296||q>=57344?(V[L>>>2]|=(224|q>>>12)<<p[L++&3],V[L>>>2]|=(128|q>>>6&63)<<p[L++&3],V[L>>>2]|=(128|q&63)<<p[L++&3]):(q=65536+((q&1023)<<10|F.charCodeAt(++B)&1023),V[L>>>2]|=(240|q>>>18)<<p[L++&3],V[L>>>2]|=(128|q>>>12&63)<<p[L++&3],V[L>>>2]|=(128|q>>>6&63)<<p[L++&3],V[L>>>2]|=(128|q&63)<<p[L++&3]);this.lastByteIndex=L,this.bytes+=L-this.start,L>=64?(this.block=V[16],this.start=L-64,this.hash(),this.hashed=!0):this.start=L}return this.bytes>0xffffffff&&(this.hBytes+=this.bytes/0x100000000<<0,this.bytes=this.bytes%0x100000000),this}},R.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var F=this.blocks,$=this.lastByteIndex;F[16]=this.block,F[$>>>2]|=d[$&3],this.block=F[16],$>=56&&(this.hashed||this.hash(),F[0]=this.block,F[16]=F[1]=F[2]=F[3]=F[4]=F[5]=F[6]=F[7]=F[8]=F[9]=F[10]=F[11]=F[12]=F[13]=F[14]=F[15]=0),F[14]=this.hBytes<<3|this.bytes>>>29,F[15]=this.bytes<<3,this.hash()}},R.prototype.hash=function(){var F=this.h0,$=this.h1,P=this.h2,q=this.h3,B=this.h4,L=this.h5,U=this.h6,V=this.h7,z=this.blocks,X,J,le,ie,ne,oe,te,ce,de,ye,we;for(X=16;X<64;++X)ne=z[X-15],J=(ne>>>7|ne<<25)^(ne>>>18|ne<<14)^ne>>>3,ne=z[X-2],le=(ne>>>17|ne<<15)^(ne>>>19|ne<<13)^ne>>>10,z[X]=z[X-16]+J+z[X-7]+le<<0;for(we=$&P,X=0;X<64;X+=4)this.first?(this.is224?(ce=300032,ne=z[0]-0x543c9a5b,V=ne-0x8f1a6c7<<0,q=ne+0x170e9b5<<0):(ce=0x2a01a605,ne=z[0]-0xc881298,V=ne-0x5ab00ac6<<0,q=ne+0x8909ae5<<0),this.first=!1):(J=(F>>>2|F<<30)^(F>>>13|F<<19)^(F>>>22|F<<10),le=(B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7),ce=F&$,ie=ce^F&P^we,te=B&L^~B&U,ne=V+le+te+h[X]+z[X],oe=J+ie,V=q+ne<<0,q=ne+oe<<0),J=(q>>>2|q<<30)^(q>>>13|q<<19)^(q>>>22|q<<10),le=(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7),de=q&F,ie=de^q&$^ce,te=V&B^~V&L,ne=U+le+te+h[X+1]+z[X+1],oe=J+ie,U=P+ne<<0,P=ne+oe<<0,J=(P>>>2|P<<30)^(P>>>13|P<<19)^(P>>>22|P<<10),le=(U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7),ye=P&q,ie=ye^P&F^de,te=U&V^~U&B,ne=L+le+te+h[X+2]+z[X+2],oe=J+ie,L=$+ne<<0,$=ne+oe<<0,J=($>>>2|$<<30)^($>>>13|$<<19)^($>>>22|$<<10),le=(L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7),we=$&P,ie=we^$&q^ye,te=L&U^~L&V,ne=B+le+te+h[X+3]+z[X+3],oe=J+ie,B=F+ne<<0,F=ne+oe<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+F<<0,this.h1=this.h1+$<<0,this.h2=this.h2+P<<0,this.h3=this.h3+q<<0,this.h4=this.h4+B<<0,this.h5=this.h5+L<<0,this.h6=this.h6+U<<0,this.h7=this.h7+V<<0},R.prototype.hex=function(){this.finalize();var F=this.h0,$=this.h1,P=this.h2,q=this.h3,B=this.h4,L=this.h5,U=this.h6,V=this.h7,z=u[F>>>28&15]+u[F>>>24&15]+u[F>>>20&15]+u[F>>>16&15]+u[F>>>12&15]+u[F>>>8&15]+u[F>>>4&15]+u[F&15]+u[$>>>28&15]+u[$>>>24&15]+u[$>>>20&15]+u[$>>>16&15]+u[$>>>12&15]+u[$>>>8&15]+u[$>>>4&15]+u[$&15]+u[P>>>28&15]+u[P>>>24&15]+u[P>>>20&15]+u[P>>>16&15]+u[P>>>12&15]+u[P>>>8&15]+u[P>>>4&15]+u[P&15]+u[q>>>28&15]+u[q>>>24&15]+u[q>>>20&15]+u[q>>>16&15]+u[q>>>12&15]+u[q>>>8&15]+u[q>>>4&15]+u[q&15]+u[B>>>28&15]+u[B>>>24&15]+u[B>>>20&15]+u[B>>>16&15]+u[B>>>12&15]+u[B>>>8&15]+u[B>>>4&15]+u[B&15]+u[L>>>28&15]+u[L>>>24&15]+u[L>>>20&15]+u[L>>>16&15]+u[L>>>12&15]+u[L>>>8&15]+u[L>>>4&15]+u[L&15]+u[U>>>28&15]+u[U>>>24&15]+u[U>>>20&15]+u[U>>>16&15]+u[U>>>12&15]+u[U>>>8&15]+u[U>>>4&15]+u[U&15];return this.is224||(z+=u[V>>>28&15]+u[V>>>24&15]+u[V>>>20&15]+u[V>>>16&15]+u[V>>>12&15]+u[V>>>8&15]+u[V>>>4&15]+u[V&15]),z},R.prototype.toString=R.prototype.hex,R.prototype.digest=function(){this.finalize();var F=this.h0,$=this.h1,P=this.h2,q=this.h3,B=this.h4,L=this.h5,U=this.h6,V=this.h7,z=[F>>>24&255,F>>>16&255,F>>>8&255,F&255,$>>>24&255,$>>>16&255,$>>>8&255,$&255,P>>>24&255,P>>>16&255,P>>>8&255,P&255,q>>>24&255,q>>>16&255,q>>>8&255,q&255,B>>>24&255,B>>>16&255,B>>>8&255,B&255,L>>>24&255,L>>>16&255,L>>>8&255,L&255,U>>>24&255,U>>>16&255,U>>>8&255,U&255];return this.is224||z.push(V>>>24&255,V>>>16&255,V>>>8&255,V&255),z},R.prototype.array=R.prototype.digest,R.prototype.arrayBuffer=function(){this.finalize();var F=new ArrayBuffer(this.is224?28:32),$=new DataView(F);return $.setUint32(0,this.h0),$.setUint32(4,this.h1),$.setUint32(8,this.h2),$.setUint32(12,this.h3),$.setUint32(16,this.h4),$.setUint32(20,this.h5),$.setUint32(24,this.h6),this.is224||$.setUint32(28,this.h7),F};function j(F,$,P){var q,B=typeof F;if(B==="string"){var L=[],U=F.length,V=0,z;for(q=0;q<U;++q)z=F.charCodeAt(q),z<128?L[V++]=z:z<2048?(L[V++]=192|z>>>6,L[V++]=128|z&63):z<55296||z>=57344?(L[V++]=224|z>>>12,L[V++]=128|z>>>6&63,L[V++]=128|z&63):(z=65536+((z&1023)<<10|F.charCodeAt(++q)&1023),L[V++]=240|z>>>18,L[V++]=128|z>>>12&63,L[V++]=128|z>>>6&63,L[V++]=128|z&63);F=L}else if(B==="object"){if(F===null)throw new Error(e);if(a&&F.constructor===ArrayBuffer)F=new Uint8Array(F);else if(!Array.isArray(F)&&(!a||!ArrayBuffer.isView(F)))throw new Error(e)}else throw new Error(e);F.length>64&&(F=new R($,!0).update(F).array());var X=[],J=[];for(q=0;q<64;++q){var le=F[q]||0;X[q]=92^le,J[q]=54^le}R.call(this,$,P),this.update(J),this.oKeyPad=X,this.inner=!0,this.sharedMemory=P}j.prototype=new R,j.prototype.finalize=function(){if(R.prototype.finalize.call(this),this.inner){this.inner=!1;var F=this.array();R.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(F),R.prototype.finalize.call(this)}};var A=S();A.sha256=A,A.sha224=S(!0),A.sha256.hmac=k(),A.sha224.hmac=k(!0),o?t.exports=A:(r.sha256=A.sha256,r.sha224=A.sha224)})()}(N0)),N0.exports}var UE=sH();const oH=UE.sha224,$F=({index:t,key:e,fallback:n})=>t[oH(e)]?.value??t[e]?.value??n??e,aH=({index:t,key:e,fallback:n})=>$F({index:t,key:e,fallback:n}),lH=({index:t,key:e,fallback:n})=>$F({index:t,key:e,fallback:n}),pa={index:{},push(t){this.index={...this.index,...t}},text:(t,e)=>aH({index:pa.index,key:t,fallback:e}),rich:(t,e)=>lH({index:pa.index,key:t,fallback:e})};function Jl(t){return typeof t>"u"||t===void 0}function Bs(t){return typeof t=="string"}function Zv(t){return typeof t=="number"}function Fb(t){return typeof t=="boolean"}function dN(t){return t===null}function uH(t){return t instanceof Date}function fN(t){return typeof t=="bigint"}function Us(t){return typeof t=="function"}function sa(t){return typeof t=="object"&&t!==null}function Q(t){return Object.freeze(t)}function oy(t){return el(t)?t:[t]}function el(t){return Array.isArray(t)}function Zl(t){return t}const Yn=Q({is(t){return t.kind==="AlterTableNode"},create(t){return Q({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return Q({...t,...e})},cloneWithColumnAlteration(t,e){return Q({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),Sr=Q({is(t){return t.kind==="IdentifierNode"},create(t){return Q({kind:"IdentifierNode",name:t})}}),Ba=Q({is(t){return t.kind==="CreateIndexNode"},create(t){return Q({kind:"CreateIndexNode",name:Sr.create(t)})},cloneWith(t,e){return Q({...t,...e})},cloneWithColumns(t,e){return Q({...t,columns:[...t.columns||[],...e]})}}),BF=Q({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return Q({kind:"CreateSchemaNode",schema:Sr.create(t),...e})},cloneWith(t,e){return Q({...t,...e})}}),cH=["preserve rows","delete rows","drop"],Ts=Q({is(t){return t.kind==="CreateTableNode"},create(t){return Q({kind:"CreateTableNode",table:t,columns:Q([])})},cloneWithColumn(t,e){return Q({...t,columns:Q([...t.columns,e])})},cloneWithConstraint(t,e){return Q({...t,constraints:t.constraints?Q([...t.constraints,e]):Q([e])})},cloneWithFrontModifier(t,e){return Q({...t,frontModifiers:t.frontModifiers?Q([...t.frontModifiers,e]):Q([e])})},cloneWithEndModifier(t,e){return Q({...t,endModifiers:t.endModifiers?Q([...t.endModifiers,e]):Q([e])})},cloneWith(t,e){return Q({...t,...e})}}),ru=Q({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return Q({kind:"SchemableIdentifierNode",identifier:Sr.create(t)})},createWithSchema(t,e){return Q({kind:"SchemableIdentifierNode",schema:Sr.create(t),identifier:Sr.create(e)})}}),fh=Q({is(t){return t.kind==="DropIndexNode"},create(t,e){return Q({kind:"DropIndexNode",name:ru.create(t),...e})},cloneWith(t,e){return Q({...t,...e})}}),VE=Q({is(t){return t.kind==="DropSchemaNode"},create(t,e){return Q({kind:"DropSchemaNode",schema:Sr.create(t),...e})},cloneWith(t,e){return Q({...t,...e})}}),HE=Q({is(t){return t.kind==="DropTableNode"},create(t,e){return Q({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return Q({...t,...e})}}),mu=Q({is(t){return t.kind==="AliasNode"},create(t,e){return Q({kind:"AliasNode",node:t,alias:e})}}),Yl=Q({is(t){return t.kind==="TableNode"},create(t){return Q({kind:"TableNode",table:ru.create(t)})},createWithSchema(t,e){return Q({kind:"TableNode",table:ru.createWithSchema(t,e)})}});function Ss(t){return sa(t)&&Us(t.toOperationNode)}function dH(t){return sa(t)&&"expressionType"in t&&Ss(t)}function fH(t){return sa(t)&&"expression"in t&&Bs(t.alias)&&Ss(t)}const Da=Q({is(t){return t.kind==="SelectModifierNode"},create(t,e){return Q({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return Q({kind:"SelectModifierNode",rawModifier:t})}}),iu=Q({is(t){return t.kind==="AndNode"},create(t,e){return Q({kind:"AndNode",left:t,right:e})}}),Sf=Q({is(t){return t.kind==="OrNode"},create(t,e){return Q({kind:"OrNode",left:t,right:e})}}),k0=Q({is(t){return t.kind==="OnNode"},create(t){return Q({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return Q({...t,on:e==="And"?iu.create(t.on,n):Sf.create(t.on,n)})}}),ph=Q({is(t){return t.kind==="JoinNode"},create(t,e){return Q({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return Q({kind:"JoinNode",joinType:t,table:e,on:k0.create(n)})},cloneWithOn(t,e){return Q({...t,on:t.on?k0.cloneWithOperation(t.on,"And",e):k0.create(e)})}}),Xd=Q({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return Q({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),pH=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],hH=["+","-","*","/","%","^","&","|","#","<<",">>"],zF=["->","->>"],mH=[...pH,...hH,"&&","||"],gH=["exists","not exists"],yH=["not","-",...gH],bH=[...mH,...zF,...yH,"between","between symmetric"],su=Q({is(t){return t.kind==="OperatorNode"},create(t){return Q({kind:"OperatorNode",operator:t})}});function sj(t){return Bs(t)&&zF.includes(t)}const Qr=Q({is(t){return t.kind==="ColumnNode"},create(t){return Q({kind:"ColumnNode",column:Sr.create(t)})}}),pN=Q({is(t){return t.kind==="SelectAllNode"},create(){return Q({kind:"SelectAllNode"})}}),Yv=Q({is(t){return t.kind==="ReferenceNode"},create(t,e){return Q({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return Q({kind:"ReferenceNode",table:t,column:pN.create()})}});class vH{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return GF(this.#e)}}function WF(t){return sa(t)&&Ss(t)&&Bs(t.dynamicReference)}const GE=Q({is(t){return t.kind==="OrderByItemNode"},create(t,e){return Q({kind:"OrderByItemNode",orderBy:t,direction:e})}}),qi=Q({is(t){return t.kind==="RawNode"},create(t,e){return Q({kind:"RawNode",sqlFragments:Q(t),parameters:Q(e)})},createWithSql(t){return qi.create([t],[])},createWithChild(t){return qi.create(["",""],[t])},createWithChildren(t){return qi.create(new Array(t.length+1).fill(""),t)}});function UF(t){return t==="asc"||t==="desc"}function _m(t){if(t.length===2)return[C0(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>C0(n)):[C0(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function C0(t,e){const n=xH(t);if(GE.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return GE.create(n,VF(e))}function xH(t){if(km(t))return Nc(t);if(WF(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!UF(n))throw new Error(`Invalid order by direction: ${n}`);return GE.create(tl(e),VF(n))}return tl(t)}function VF(t){if(t)return t==="asc"||t==="desc"?qi.createWithSql(t):t.toOperationNode()}const Db=Q({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return Q({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return Q({...t,traversal:e})}}),HF=Q({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return Q({kind:"JSONOperatorChainNode",operator:t,values:Q([])})},cloneWithValue(t,e){return Q({...t,values:Q([...t.values,e])})}}),hh=Q({is(t){return t.kind==="JSONPathNode"},create(t){return Q({kind:"JSONPathNode",inOperator:t,pathLegs:Q([])})},cloneWithLeg(t,e){return Q({...t,pathLegs:Q([...t.pathLegs,e])})}});function GF(t){return Bs(t)?tl(t):t.toOperationNode()}function Ch(t){return el(t)?t.map(e=>Ps(e)):[Ps(t)]}function Ps(t){return km(t)?Nc(t):GF(t)}function wH(t,e){const n=tl(t);if(sj(e))return Db.create(n,HF.create(su.create(e)));const r=e.slice(0,-1);if(sj(r))return Db.create(n,hh.create(su.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function tl(t){const e=".";if(!t.includes(e))return Yv.create(Qr.create(t));const n=t.split(e).map(hN);if(n.length===3)return SH(n);if(n.length===2)return EH(n);throw new Error(`invalid column reference ${t}`)}function _H(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(hN);return mu.create(tl(n),Sr.create(r))}else return tl(t)}function KF(t){return Qr.create(t)}function Lb(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(hN);if(!UF(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return _m([n,r])[0]}else return KF(t)}function SH(t){const[e,n,r]=t;return Yv.create(Qr.create(r),Yl.createWithSchema(e,n))}function EH(t){const[e,n]=t;return Yv.create(Qr.create(n),Yl.create(e))}function hN(t){return t.trim()}const QF=Q({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return Q({kind:"PrimitiveValueListNode",values:Q([...t])})}}),mN=Q({is(t){return t.kind==="ValueListNode"},create(t){return Q({kind:"ValueListNode",values:Q(t)})}}),ha=Q({is(t){return t.kind==="ValueNode"},create(t){return Q({kind:"ValueNode",value:t})},createImmediate(t){return Q({kind:"ValueNode",value:t,immediate:!0})}});function IH(t){return el(t)?NH(t):ti(t)}function ti(t){return km(t)?Nc(t):ha.create(t)}function gN(t){return Zv(t)||Fb(t)||dN(t)}function yN(t){if(!gN(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return ha.createImmediate(t)}function NH(t){return t.some(km)?mN.create(t.map(e=>ti(e))):QF.create(t)}const ef=Q({is(t){return t.kind==="ParensNode"},create(t){return Q({kind:"ParensNode",node:t})}});function _i(t){if(t.length===3)return bN(t[0],t[1],t[2]);if(t.length===1)return ti(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function bN(t,e,n){return kH(e)&&JF(n)?Xd.create(Ps(t),KE(e),ha.createImmediate(n)):Xd.create(Ps(t),KE(e),IH(n))}function ma(t,e,n){return Xd.create(Ps(t),KE(e),Ps(n))}function oj(t,e){return Mb(Object.entries(t).filter(([,n])=>!Jl(n)).map(([n,r])=>bN(n,JF(r)?"is":"=",r)),e)}function Mb(t,e,n=!0){const r=e==="and"?iu.create:Sf.create;if(t.length===0)return Xd.create(ha.createImmediate(1),su.create("="),ha.createImmediate(e==="and"?1:0));let i=aj(t[0]);for(let s=1;s<t.length;++s)i=r(i,aj(t[s]));return t.length>1&&n?ef.create(i):i}function kH(t){return t==="is"||t==="is not"}function JF(t){return dN(t)||Fb(t)}function KE(t){if(Bs(t)&&bH.includes(t))return su.create(t);if(Ss(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function aj(t){return Ss(t)?t.toOperationNode():t}const ou=Q({is(t){return t.kind==="OrderByNode"},create(t){return Q({kind:"OrderByNode",items:Q([...t])})},cloneWithItems(t,e){return Q({...t,items:Q([...t.items,...e])})}}),lj=Q({is(t){return t.kind==="PartitionByNode"},create(t){return Q({kind:"PartitionByNode",items:Q(t)})},cloneWithItems(t,e){return Q({...t,items:Q([...t.items,...e])})}}),QE=Q({is(t){return t.kind==="OverNode"},create(){return Q({kind:"OverNode"})},cloneWithOrderByItems(t,e){return Q({...t,orderBy:t.orderBy?ou.cloneWithItems(t.orderBy,e):ou.create(e)})},cloneWithPartitionByItems(t,e){return Q({...t,partitionBy:t.partitionBy?lj.cloneWithItems(t.partitionBy,e):lj.create(e)})}}),$b=Q({is(t){return t.kind==="FromNode"},create(t){return Q({kind:"FromNode",froms:Q(t)})},cloneWithFroms(t,e){return Q({...t,froms:Q([...t.froms,...e])})}}),uj=Q({is(t){return t.kind==="GroupByNode"},create(t){return Q({kind:"GroupByNode",items:Q(t)})},cloneWithItems(t,e){return Q({...t,items:Q([...t.items,...e])})}}),cj=Q({is(t){return t.kind==="HavingNode"},create(t){return Q({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return Q({...t,having:e==="And"?iu.create(t.having,n):Sf.create(t.having,n)})}}),Zn=Q({is(t){return t.kind==="SelectQueryNode"},create(t){return Q({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return Q({kind:"SelectQueryNode",from:$b.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return Q({...t,selections:t.selections?Q([...t.selections,...e]):Q(e)})},cloneWithDistinctOn(t,e){return Q({...t,distinctOn:t.distinctOn?Q([...t.distinctOn,...e]):Q(e)})},cloneWithFrontModifier(t,e){return Q({...t,frontModifiers:t.frontModifiers?Q([...t.frontModifiers,e]):Q([e])})},cloneWithOrderByItems(t,e){return Q({...t,orderBy:t.orderBy?ou.cloneWithItems(t.orderBy,e):ou.create(e)})},cloneWithGroupByItems(t,e){return Q({...t,groupBy:t.groupBy?uj.cloneWithItems(t.groupBy,e):uj.create(e)})},cloneWithLimit(t,e){return Q({...t,limit:e})},cloneWithOffset(t,e){return Q({...t,offset:e})},cloneWithFetch(t,e){return Q({...t,fetch:e})},cloneWithHaving(t,e){return Q({...t,having:t.having?cj.cloneWithOperation(t.having,"And",e):cj.create(e)})},cloneWithSetOperations(t,e){return Q({...t,setOperations:t.setOperations?Q([...t.setOperations,...e]):Q([...e])})},cloneWithoutSelections(t){return Q({...t,selections:[]})},cloneWithoutLimit(t){return Q({...t,limit:void 0})},cloneWithoutOffset(t){return Q({...t,offset:void 0})},cloneWithoutOrderBy(t){return Q({...t,orderBy:void 0})},cloneWithoutGroupBy(t){return Q({...t,groupBy:void 0})}});function Tn(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}class Md{#e;constructor(e){this.#e=Q(e)}on(...e){return new Md({...this.#e,joinNode:ph.cloneWithOn(this.#e.joinNode,_i(e))})}onRef(e,n,r){return new Md({...this.#e,joinNode:ph.cloneWithOn(this.#e.joinNode,ma(e,n,r))})}onTrue(){return new Md({...this.#e,joinNode:ph.cloneWithOn(this.#e.joinNode,qi.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}Tn(Md,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const CH=Q({is(t){return t.kind==="PartitionByItemNode"},create(t){return Q({kind:"PartitionByItemNode",partitionBy:t})}});function TH(t){return Ch(t).map(CH.create)}class Th{#e;constructor(e){this.#e=Q(e)}orderBy(e,n){return new Th({overNode:QE.cloneWithOrderByItems(this.#e.overNode,_m([e,n]))})}partitionBy(e){return new Th({overNode:QE.cloneWithPartitionByItems(this.#e.overNode,TH(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}Tn(Th,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const mh=Q({is(t){return t.kind==="SelectionNode"},create(t){return Q({kind:"SelectionNode",selection:t})},createSelectAll(){return Q({kind:"SelectionNode",selection:pN.create()})},createSelectAllFromTable(t){return Q({kind:"SelectionNode",selection:Yv.createSelectAll(t)})}});function Uo(t){return Us(t)?Uo(t(If())):el(t)?t.map(e=>dj(e)):[dj(t)]}function dj(t){return Bs(t)?mh.create(_H(t)):WF(t)?mh.create(t.toOperationNode()):mh.create(uD(t))}function ga(t){return t?Array.isArray(t)?t.map(fj):[fj(t)]:[mh.createSelectAll()]}function fj(t){if(Bs(t))return mh.createSelectAllFromTable(Hr(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const RH=Q({is(t){return t.kind==="ValuesNode"},create(t){return Q({kind:"ValuesNode",values:Q(t)})}}),jH=Q({is(t){return t.kind==="DefaultInsertValueNode"},create(){return Q({kind:"DefaultInsertValueNode"})}});function ZF(t){const e=Us(t)?t(If()):t,n=el(e)?e:Q([e]);return OH(n)}function OH(t){const e=qH(t);return[Q([...e.keys()].map(Qr.create)),RH.create(t.map(n=>AH(n,e)))]}function qH(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const i of r)!e.has(i)&&n[i]!==void 0&&e.set(i,e.size)}return e}function AH(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let i=!1;for(const o of n){const a=e.get(o);if(Jl(a))continue;const u=t[o];(Jl(u)||km(u))&&(i=!0),r[a]=u}if(n.length<e.size||i){const o=jH.create();return mN.create(r.map(a=>Jl(a)?o:ti(a)))}return QF.create(r)}const Os=Q({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return Q({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},createWithoutInto(){return Q({kind:"InsertQueryNode"})},cloneWith(t,e){return Q({...t,...e})}}),$d=Q({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return Q({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return Q({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return Q({...t,from:t.from?$b.cloneWithFroms(t.from,e):$b.create(e)})},cloneWithUpdates(t,e){return Q({...t,updates:t.updates?Q([...t.updates,...e]):e})},cloneWithLimit(t,e){return Q({...t,limit:e})}}),pj=Q({is(t){return t.kind==="UsingNode"},create(t){return Q({kind:"UsingNode",tables:Q(t)})},cloneWithTables(t,e){return Q({...t,tables:Q([...t.tables,...e])})}}),Qu=Q({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return Q({kind:"DeleteQueryNode",from:$b.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return Q({...t,orderBy:t.orderBy?ou.cloneWithItems(t.orderBy,e):ou.create(e)})},cloneWithoutOrderBy(t){return Q({...t,orderBy:void 0})},cloneWithLimit(t,e){return Q({...t,limit:e})},cloneWithoutLimit(t){return Q({...t,limit:void 0})},cloneWithUsing(t,e){return Q({...t,using:t.using!==void 0?pj.cloneWithTables(t.using,e):pj.create(e)})}}),ys=Q({is(t){return t.kind==="WhereNode"},create(t){return Q({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return Q({...t,where:e==="And"?iu.create(t.where,n):Sf.create(t.where,n)})}}),hj=Q({is(t){return t.kind==="ReturningNode"},create(t){return Q({kind:"ReturningNode",selections:Q(t)})},cloneWithSelections(t,e){return Q({...t,selections:t.selections?Q([...t.selections,...e]):Q(e)})}}),PH=Q({is(t){return t.kind==="ExplainNode"},create(t,e){return Q({kind:"ExplainNode",format:t,options:e})}}),Sm=Q({is(t){return t.kind==="WhenNode"},create(t){return Q({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return Q({...t,result:e})}}),bs=Q({is(t){return t.kind==="MergeQueryNode"},create(t,e){return Q({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return Q({...t,using:e})},cloneWithWhen(t,e){return Q({...t,whens:t.whens?Q([...t.whens,e]):Q([e])})},cloneWithThen(t,e){return Q({...t,whens:t.whens?Q([...t.whens.slice(0,-1),Sm.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}}),mj=Q({is(t){return t.kind==="OutputNode"},create(t){return Q({kind:"OutputNode",selections:Q(t)})},cloneWithSelections(t,e){return Q({...t,selections:t.selections?Q([...t.selections,...e]):Q(e)})}}),Mt=Q({is(t){return Zn.is(t)||Os.is(t)||$d.is(t)||Qu.is(t)||bs.is(t)},cloneWithEndModifier(t,e){return Q({...t,endModifiers:t.endModifiers?Q([...t.endModifiers,e]):Q([e])})},cloneWithWhere(t,e){return Q({...t,where:t.where?ys.cloneWithOperation(t.where,"And",e):ys.create(e)})},cloneWithJoin(t,e){return Q({...t,joins:t.joins?Q([...t.joins,e]):Q([e])})},cloneWithReturning(t,e){return Q({...t,returning:t.returning?hj.cloneWithSelections(t.returning,e):hj.create(e)})},cloneWithoutReturning(t){return Q({...t,returning:void 0})},cloneWithoutWhere(t){return Q({...t,where:void 0})},cloneWithExplain(t,e,n){return Q({...t,explain:PH.create(e,n?.toOperationNode())})},cloneWithTop(t,e){return Q({...t,top:e})},cloneWithOutput(t,e){return Q({...t,output:t.output?mj.cloneWithSelections(t.output,e):mj.create(e)})}}),YF=Q({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return Q({kind:"ColumnUpdateNode",column:t,value:e})}});function FH(...t){return t.length===2?[YF.create(Ps(t[0]),ti(t[1]))]:vN(t[0])}function vN(t){const e=Us(t)?t(If()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>YF.create(Qr.create(n),ti(r)))}const DH=Q({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return Q({kind:"OnDuplicateKeyNode",updates:t})}});class LH{insertId;numInsertedOrUpdatedRows;constructor(e,n){this.insertId=e,this.numInsertedOrUpdatedRows=n}}class Em extends Error{node;constructor(e){super("no result"),this.node=e}}function Im(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const Rs=Q({is(t){return t.kind==="OnConflictNode"},create(){return Q({kind:"OnConflictNode"})},cloneWith(t,e){return Q({...t,...e})},cloneWithIndexWhere(t,e){return Q({...t,indexWhere:t.indexWhere?ys.cloneWithOperation(t.indexWhere,"And",e):ys.create(e)})},cloneWithIndexOrWhere(t,e){return Q({...t,indexWhere:t.indexWhere?ys.cloneWithOperation(t.indexWhere,"Or",e):ys.create(e)})},cloneWithUpdateWhere(t,e){return Q({...t,updateWhere:t.updateWhere?ys.cloneWithOperation(t.updateWhere,"And",e):ys.create(e)})},cloneWithUpdateOrWhere(t,e){return Q({...t,updateWhere:t.updateWhere?ys.cloneWithOperation(t.updateWhere,"Or",e):ys.create(e)})},cloneWithoutIndexWhere(t){return Q({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return Q({...t,updateWhere:void 0})}});class ia{#e;constructor(e){this.#e=Q(e)}column(e){const n=Qr.create(e);return new ia({...this.#e,onConflictNode:Rs.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?Q([...this.#e.onConflictNode.columns,n]):Q([n])})})}columns(e){const n=e.map(Qr.create);return new ia({...this.#e,onConflictNode:Rs.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?Q([...this.#e.onConflictNode.columns,...n]):Q(n)})})}constraint(e){return new ia({...this.#e,onConflictNode:Rs.cloneWith(this.#e.onConflictNode,{constraint:Sr.create(e)})})}expression(e){return new ia({...this.#e,onConflictNode:Rs.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new ia({...this.#e,onConflictNode:Rs.cloneWithIndexWhere(this.#e.onConflictNode,_i(e))})}whereRef(e,n,r){return new ia({...this.#e,onConflictNode:Rs.cloneWithIndexWhere(this.#e.onConflictNode,ma(e,n,r))})}clearWhere(){return new ia({...this.#e,onConflictNode:Rs.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new XF({...this.#e,onConflictNode:Rs.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Bd({...this.#e,onConflictNode:Rs.cloneWith(this.#e.onConflictNode,{updates:vN(e)})})}$call(e){return e(this)}}Tn(ia,"don't await OnConflictBuilder instances.");class XF{#e;constructor(e){this.#e=Q(e)}toOperationNode(){return this.#e.onConflictNode}}Tn(XF,"don't await OnConflictDoNothingBuilder instances.");class Bd{#e;constructor(e){this.#e=Q(e)}where(...e){return new Bd({...this.#e,onConflictNode:Rs.cloneWithUpdateWhere(this.#e.onConflictNode,_i(e))})}whereRef(e,n,r){return new Bd({...this.#e,onConflictNode:Rs.cloneWithUpdateWhere(this.#e.onConflictNode,ma(e,n,r))})}clearWhere(){return new Bd({...this.#e,onConflictNode:Rs.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}Tn(Bd,"don't await OnConflictUpdateBuilder instances.");const MH=Q({is(t){return t.kind==="TopNode"},create(t,e){return Q({kind:"TopNode",expression:t,modifiers:e})}});function Ef(t,e){if(!Zv(t)&&!fN(t))throw new Error(`Invalid top expression: ${t}`);if(!Jl(e)&&!$H(e))throw new Error(`Invalid top modifiers: ${e}`);return MH.create(t,e)}function $H(t){return t==="percent"||t==="with ties"||t==="percent with ties"}class vr{#e;constructor(e){this.#e=Q(e)}values(e){const[n,r]=ZF(e);return new vr({...this.#e,queryNode:Os.cloneWith(this.#e.queryNode,{columns:n,values:r})})}columns(e){return new vr({...this.#e,queryNode:Os.cloneWith(this.#e.queryNode,{columns:Q(e.map(Qr.create))})})}expression(e){return new vr({...this.#e,queryNode:Os.cloneWith(this.#e.queryNode,{values:Nc(e)})})}defaultValues(){return new vr({...this.#e,queryNode:Os.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new vr({...this.#e,queryNode:Mt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new vr({...this.#e,queryNode:Os.cloneWith(this.#e.queryNode,{ignore:!0})})}top(e,n){return new vr({...this.#e,queryNode:Mt.cloneWithTop(this.#e.queryNode,Ef(e,n))})}onConflict(e){return new vr({...this.#e,queryNode:Os.cloneWith(this.#e.queryNode,{onConflict:e(new ia({onConflictNode:Rs.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new vr({...this.#e,queryNode:Os.cloneWith(this.#e.queryNode,{onDuplicateKey:DH.create(vN(e))})})}returning(e){return new vr({...this.#e,queryNode:Mt.cloneWithReturning(this.#e.queryNode,Uo(e))})}returningAll(){return new vr({...this.#e,queryNode:Mt.cloneWithReturning(this.#e.queryNode,ga())})}output(e){return new vr({...this.#e,queryNode:Mt.cloneWithOutput(this.#e.queryNode,Uo(e))})}outputAll(e){return new vr({...this.#e,queryNode:Mt.cloneWithOutput(this.#e.queryNode,ga(e))})}clearReturning(){return new vr({...this.#e,queryNode:Mt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new vr({...this.#e})}$castTo(){return new vr(this.#e)}$narrowType(){return new vr(this.#e)}$assertType(){return new vr(this.#e)}withPlugin(e){return new vr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new LH(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Em){const n=await this.executeTakeFirst();if(n===void 0)throw Im(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new vr({...this.#e,queryNode:Mt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Tn(vr,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class BH{numDeletedRows;constructor(e){this.numDeletedRows=e}}const xN=Q({is(t){return t.kind==="LimitNode"},create(t){return Q({kind:"LimitNode",limit:t})}});class Jn{#e;constructor(e){this.#e=Q(e)}where(...e){return new Jn({...this.#e,queryNode:Mt.cloneWithWhere(this.#e.queryNode,_i(e))})}whereRef(e,n,r){return new Jn({...this.#e,queryNode:Mt.cloneWithWhere(this.#e.queryNode,ma(e,n,r))})}clearWhere(){return new Jn({...this.#e,queryNode:Mt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new Jn({...this.#e,queryNode:Mt.cloneWithTop(this.#e.queryNode,Ef(e,n))})}using(e){return new Jn({...this.#e,queryNode:Qu.cloneWithUsing(this.#e.queryNode,Oh(e))})}innerJoin(...e){return new Jn({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("InnerJoin",e))})}leftJoin(...e){return new Jn({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("LeftJoin",e))})}rightJoin(...e){return new Jn({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("RightJoin",e))})}fullJoin(...e){return new Jn({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("FullJoin",e))})}returning(e){return new Jn({...this.#e,queryNode:Mt.cloneWithReturning(this.#e.queryNode,Uo(e))})}returningAll(e){return new Jn({...this.#e,queryNode:Mt.cloneWithReturning(this.#e.queryNode,ga(e))})}output(e){return new Jn({...this.#e,queryNode:Mt.cloneWithOutput(this.#e.queryNode,Uo(e))})}outputAll(e){return new Jn({...this.#e,queryNode:Mt.cloneWithOutput(this.#e.queryNode,ga(e))})}clearReturning(){return new Jn({...this.#e,queryNode:Mt.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new Jn({...this.#e,queryNode:Qu.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new Jn({...this.#e,queryNode:Qu.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(e,n){return new Jn({...this.#e,queryNode:Qu.cloneWithOrderByItems(this.#e.queryNode,_m([e,n]))})}limit(e){return new Jn({...this.#e,queryNode:Qu.cloneWithLimit(this.#e.queryNode,xN.create(ti(e)))})}modifyEnd(e){return new Jn({...this.#e,queryNode:Mt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,n){return e?n(this):new Jn({...this.#e})}$castTo(){return new Jn(this.#e)}$narrowType(){return new Jn(this.#e)}$assertType(){return new Jn(this.#e)}withPlugin(e){return new Jn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new BH(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Em){const n=await this.executeTakeFirst();if(n===void 0)throw Im(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Jn({...this.#e,queryNode:Mt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Tn(Jn,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class zH{numUpdatedRows;numChangedRows;constructor(e,n){this.numUpdatedRows=e,this.numChangedRows=n}}class nr{#e;constructor(e){this.#e=Q(e)}where(...e){return new nr({...this.#e,queryNode:Mt.cloneWithWhere(this.#e.queryNode,_i(e))})}whereRef(e,n,r){return new nr({...this.#e,queryNode:Mt.cloneWithWhere(this.#e.queryNode,ma(e,n,r))})}clearWhere(){return new nr({...this.#e,queryNode:Mt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new nr({...this.#e,queryNode:Mt.cloneWithTop(this.#e.queryNode,Ef(e,n))})}from(e){return new nr({...this.#e,queryNode:$d.cloneWithFromItems(this.#e.queryNode,Oh(e))})}innerJoin(...e){return new nr({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("InnerJoin",e))})}leftJoin(...e){return new nr({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("LeftJoin",e))})}rightJoin(...e){return new nr({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("RightJoin",e))})}fullJoin(...e){return new nr({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("FullJoin",e))})}limit(e){return new nr({...this.#e,queryNode:$d.cloneWithLimit(this.#e.queryNode,xN.create(ti(e)))})}set(...e){return new nr({...this.#e,queryNode:$d.cloneWithUpdates(this.#e.queryNode,FH(...e))})}returning(e){return new nr({...this.#e,queryNode:Mt.cloneWithReturning(this.#e.queryNode,Uo(e))})}returningAll(e){return new nr({...this.#e,queryNode:Mt.cloneWithReturning(this.#e.queryNode,ga(e))})}output(e){return new nr({...this.#e,queryNode:Mt.cloneWithOutput(this.#e.queryNode,Uo(e))})}outputAll(e){return new nr({...this.#e,queryNode:Mt.cloneWithOutput(this.#e.queryNode,ga(e))})}modifyEnd(e){return new nr({...this.#e,queryNode:Mt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new nr({...this.#e,queryNode:Mt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new nr({...this.#e})}$castTo(){return new nr(this.#e)}$narrowType(){return new nr(this.#e)}$assertType(){return new nr(this.#e)}withPlugin(e){return new nr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new zH(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0),n.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Em){const n=await this.executeTakeFirst();if(n===void 0)throw Im(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new nr({...this.#e,queryNode:Mt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Tn(nr,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const gj=Q({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return Q({kind:"CommonTableExpressionNameNode",table:Yl.create(t),columns:e?Q(e.map(Qr.create)):void 0})}}),Bb=Q({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return Q({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return Q({...t,...e})}});class Rh{#e;constructor(e){this.#e=Q(e)}materialized(){return new Rh({...this.#e,node:Bb.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new Rh({...this.#e,node:Bb.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}Tn(Rh,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function yj(t,e){const n=e(eG()).toOperationNode();return Us(t)?t(WH(n)).toOperationNode():Bb.create(eD(t),n)}function WH(t){return e=>new Rh({node:Bb.create(eD(e),t)})}function eD(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(i=>i.trim());return gj.create(n,r)}else return gj.create(t)}const ay=Q({is(t){return t.kind==="WithNode"},create(t,e){return Q({kind:"WithNode",expressions:Q([t]),...e})},cloneWithExpression(t,e){return Q({...t,expressions:Q([...t.expressions,e])})}}),bj=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function UH(t){let e="";for(let n=0;n<t;++n)e+=VH();return e}function VH(){return bj[~~(Math.random()*bj.length)]}function Xn(){return new HH}class HH{#e;get queryId(){return this.#e===void 0&&(this.#e=UH(8)),this.#e}}class tD{nodeStack=[];#e=Q({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),Q(n)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&Q(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:Q([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}const GH=Q({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});class KH extends tD{#e;#t=new Set;#n=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);const n=this.#s(e);for(const s of n)this.#n.add(s);const r=this.#i(e);for(const s of r)this.#t.add(s);const i=super.transformNodeImpl(e);for(const s of r)this.#t.delete(s);for(const s of n)this.#n.delete(s);return i}transformSchemableIdentifier(e){const n=super.transformSchemableIdentifier(e);return n.schema||!this.#t.has(e.identifier.name)?n:{...n,schema:Sr.create(this.#e)}}transformReferences(e){const n=super.transformReferences(e);return n.table.table.schema?n:{...n,table:Yl.createWithSchema(this.#e,n.table.table.identifier.name)}}#r(e){return e.kind in GH}#i(e){const n=new Set;if("name"in e&&e.name&&ru.is(e.name)&&this.#a(e.name,n),"from"in e&&e.from)for(const r of e.from.froms)this.#o(r,n);if("into"in e&&e.into&&this.#o(e.into,n),"table"in e&&e.table&&this.#o(e.table,n),"joins"in e&&e.joins)for(const r of e.joins)this.#o(r.table,n);return"using"in e&&e.using&&this.#o(e.using,n),n}#s(e){const n=new Set;return"with"in e&&e.with&&this.#u(e.with,n),n}#o(e,n){const r=Yl.is(e)?e:mu.is(e)&&Yl.is(e.node)?e.node:null;r&&this.#a(r.table,n)}#a(e,n){const r=e.identifier.name;!this.#t.has(r)&&!this.#n.has(r)&&n.add(r)}#u(e,n){for(const r of e.expressions){const i=r.name.table.table.identifier.name;this.#n.has(i)||n.add(i)}}}class Nm{#e;constructor(e){this.#e=new KH(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}}const QH=Q({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return Q({kind:"MatchedNode",not:t,bySource:e})}});function vj(t,e,n){return Sm.create(Mb([QH.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&n?ma(e[0],e[1],e[2]):_i(e)]:[]],"and",!1))}function gh(t){return Bs(t)?qi.create([t],[]):Ss(t)?t.toOperationNode():t}class xj{#e;#t;#n;constructor(){this.#e=new Promise((e,n)=>{this.#n=n,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#n&&this.#n(e)}}const wj=new Set;function JH(t){wj.has(t)||(wj.add(t),console.log(t))}const ZH=Q([]);class nD{#e;constructor(e=ZH){this.#e=e}get plugins(){return this.#e}transformQuery(e,n){for(const r of this.#e){const i=r.transformQuery({node:e,queryId:n});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const i=await r.executeQuery(e),s=await this.#t(i,n);return YH(i,s),s})}async *stream(e,n,r){const i=new xj,s=new xj;this.provideConnection(async a=>(i.resolve(a),await s.promise)).catch(a=>i.reject(a));const o=await i.promise;try{for await(const a of o.streamQuery(e,n))yield await this.#t(a,r)}finally{s.resolve()}}async #t(e,n){for(const r of this.#e)e=await r.transformResult({result:e,queryId:n});return e}}function YH(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||JH("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class Id extends nD{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new Id([...this.plugins,e])}withPlugins(e){return new Id([...this.plugins,...e])}withPluginAtFront(e){return new Id([e,...this.plugins])}withoutPlugins(){return new Id([])}}const Xv=new Id;class XH{numChangedRows;constructor(e){this.numChangedRows=e}}class rc{#e;constructor(e){this.#e=Q(e)}modifyEnd(e){return new rc({...this.#e,queryNode:Mt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new rc({...this.#e,queryNode:Mt.cloneWithTop(this.#e.queryNode,Ef(e,n))})}using(...e){return new Fs({...this.#e,queryNode:bs.cloneWithUsing(this.#e.queryNode,Ji("Using",e))})}output(e){return new rc({...this.#e,queryNode:Mt.cloneWithOutput(this.#e.queryNode,Uo(e))})}outputAll(e){return new rc({...this.#e,queryNode:Mt.cloneWithOutput(this.#e.queryNode,ga(e))})}}Tn(rc,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Fs{#e;constructor(e){this.#e=Q(e)}modifyEnd(e){return new Fs({...this.#e,queryNode:Mt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new Fs({...this.#e,queryNode:Mt.cloneWithTop(this.#e.queryNode,Ef(e,n))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,n,r){return this.#t([e,n,r],!0)}#t(e,n){return new JE({...this.#e,queryNode:bs.cloneWithWhen(this.#e.queryNode,vj({isMatched:!0},e,n))})}whenNotMatched(){return this.#n([])}whenNotMatchedAnd(...e){return this.#n(e)}whenNotMatchedAndRef(e,n,r){return this.#n([e,n,r],!0)}whenNotMatchedBySource(){return this.#n([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#n(e,!1,!0)}whenNotMatchedBySourceAndRef(e,n,r){return this.#n([e,n,r],!0,!0)}output(e){return new Fs({...this.#e,queryNode:Mt.cloneWithOutput(this.#e.queryNode,Uo(e))})}outputAll(e){return new Fs({...this.#e,queryNode:Mt.cloneWithOutput(this.#e.queryNode,ga(e))})}#n(e,n=!1,r=!1){const i={...this.#e,queryNode:bs.cloneWithWhen(this.#e.queryNode,vj({isMatched:!1,bySource:r},e,n))},s=r?JE:rD;return new s(i)}$call(e){return e(this)}$if(e,n){return e?n(this):new Fs({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId);return e.query.output&&this.#e.executor.adapter.supportsOutput?n.rows:[new XH(n.numAffectedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Em){const n=await this.executeTakeFirst();if(n===void 0)throw Im(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}}Tn(Fs,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class JE{#e;constructor(e){this.#e=Q(e)}thenDelete(){return new Fs({...this.#e,queryNode:bs.cloneWithThen(this.#e.queryNode,gh("delete"))})}thenDoNothing(){return new Fs({...this.#e,queryNode:bs.cloneWithThen(this.#e.queryNode,gh("do nothing"))})}thenUpdate(e){return new Fs({...this.#e,queryNode:bs.cloneWithThen(this.#e.queryNode,gh(e(new nr({queryId:this.#e.queryId,executor:Xv,queryNode:$d.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(n=>n.set(...e))}}Tn(JE,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class rD{#e;constructor(e){this.#e=Q(e)}thenDoNothing(){return new Fs({...this.#e,queryNode:bs.cloneWithThen(this.#e.queryNode,gh("do nothing"))})}thenInsertValues(e){const[n,r]=ZF(e);return new Fs({...this.#e,queryNode:bs.cloneWithThen(this.#e.queryNode,gh(Os.cloneWith(Os.createWithoutInto(),{columns:n,values:r})))})}}Tn(rD,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class zl{#e;constructor(e){this.#e=Q(e)}selectFrom(e){return ZE({queryId:Xn(),executor:this.#e.executor,queryNode:Zn.createFrom(Oh(e),this.#e.withNode)})}selectNoFrom(e){return ZE({queryId:Xn(),executor:this.#e.executor,queryNode:Zn.cloneWithSelections(Zn.create(this.#e.withNode),Uo(e))})}insertInto(e){return new vr({queryId:Xn(),executor:this.#e.executor,queryNode:Os.create(Hr(e),this.#e.withNode)})}replaceInto(e){return new vr({queryId:Xn(),executor:this.#e.executor,queryNode:Os.create(Hr(e),this.#e.withNode,!0)})}deleteFrom(e){return new Jn({queryId:Xn(),executor:this.#e.executor,queryNode:Qu.create(Oh(e),this.#e.withNode)})}updateTable(e){return new nr({queryId:Xn(),executor:this.#e.executor,queryNode:$d.create(qh(e),this.#e.withNode)})}mergeInto(e){return new rc({queryId:Xn(),executor:this.#e.executor,queryNode:bs.create(cD(e),this.#e.withNode)})}with(e,n){const r=yj(e,n);return new zl({...this.#e,withNode:this.#e.withNode?ay.cloneWithExpression(this.#e.withNode,r):ay.create(r)})}withRecursive(e,n){const r=yj(e,n);return new zl({...this.#e,withNode:this.#e.withNode?ay.cloneWithExpression(this.#e.withNode,r):ay.create(r,{recursive:!0})})}withPlugin(e){return new zl({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new zl({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new zl({...this.#e,executor:this.#e.executor.withPluginAtFront(new Nm(e))})}}function eG(){return new zl({executor:Xv})}function tG(t,e){return new Md({joinNode:ph.create(t,qh(e))})}function nG(){return new Th({overNode:QE.create()})}function Ji(t,e){if(e.length===3)return iG(t,e[0],e[1],e[2]);if(e.length===2)return rG(t,e[0],e[1]);throw new Error("not implemented")}function rG(t,e,n){return n(tG(t,e)).toOperationNode()}function iG(t,e,n,r){return ph.createWithOn(t,qh(e),ma(n,"=",r))}const sG=Q({is(t){return t.kind==="OffsetNode"},create(t){return Q({kind:"OffsetNode",offset:t})}}),oG=Q({is(t){return t.kind==="GroupByItemNode"},create(t){return Q({kind:"GroupByItemNode",groupBy:t})}});function aG(t){return t=Us(t)?t(If()):t,Ch(t).map(oG.create)}const iD=Q({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return Q({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function cd(t,e,n){return Us(e)&&(e=e(_N())),el(e)||(e=[e]),e.map(r=>iD.create(t,Nc(r),n))}class rr{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new wN(this,e)}or(...e){return new zb(Sf.create(this.#e,_i(e)))}and(...e){return new Wb(iu.create(this.#e,_i(e)))}$castTo(){return new rr(this.#e)}$notNull(){return new rr(this.#e)}toOperationNode(){return this.#e}}class wN{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return mu.create(this.#e.toOperationNode(),Ss(this.#t)?this.#t.toOperationNode():Sr.create(this.#t))}}class zb{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new wN(this,e)}or(...e){return new zb(Sf.create(this.#e,_i(e)))}$castTo(){return new zb(this.#e)}toOperationNode(){return ef.create(this.#e)}}class Wb{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new wN(this,e)}and(...e){return new Wb(iu.create(this.#e,_i(e)))}$castTo(){return new Wb(this.#e)}toOperationNode(){return ef.create(this.#e)}}const lG={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:ha.create(t),modifier:e}}};function uG(t,e){if(!Zv(t)&&!fN(t))throw new Error(`Invalid fetch row count: ${t}`);if(!cG(e))throw new Error(`Invalid fetch modifier: ${e}`);return lG.create(t,e)}function cG(t){return t==="only"||t==="with ties"}class un{#e;constructor(e){this.#e=Q(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new un({...this.#e,queryNode:Mt.cloneWithWhere(this.#e.queryNode,_i(e))})}whereRef(e,n,r){return new un({...this.#e,queryNode:Mt.cloneWithWhere(this.#e.queryNode,ma(e,n,r))})}having(...e){return new un({...this.#e,queryNode:Zn.cloneWithHaving(this.#e.queryNode,_i(e))})}havingRef(e,n,r){return new un({...this.#e,queryNode:Zn.cloneWithHaving(this.#e.queryNode,ma(e,n,r))})}select(e){return new un({...this.#e,queryNode:Zn.cloneWithSelections(this.#e.queryNode,Uo(e))})}distinctOn(e){return new un({...this.#e,queryNode:Zn.cloneWithDistinctOn(this.#e.queryNode,Ch(e))})}modifyFront(e){return new un({...this.#e,queryNode:Zn.cloneWithFrontModifier(this.#e.queryNode,Da.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new un({...this.#e,queryNode:Mt.cloneWithEndModifier(this.#e.queryNode,Da.createWithExpression(e.toOperationNode()))})}distinct(){return new un({...this.#e,queryNode:Zn.cloneWithFrontModifier(this.#e.queryNode,Da.create("Distinct"))})}forUpdate(e){return new un({...this.#e,queryNode:Mt.cloneWithEndModifier(this.#e.queryNode,Da.create("ForUpdate",e?oy(e).map(Hr):void 0))})}forShare(e){return new un({...this.#e,queryNode:Mt.cloneWithEndModifier(this.#e.queryNode,Da.create("ForShare",e?oy(e).map(Hr):void 0))})}forKeyShare(e){return new un({...this.#e,queryNode:Mt.cloneWithEndModifier(this.#e.queryNode,Da.create("ForKeyShare",e?oy(e).map(Hr):void 0))})}forNoKeyUpdate(e){return new un({...this.#e,queryNode:Mt.cloneWithEndModifier(this.#e.queryNode,Da.create("ForNoKeyUpdate",e?oy(e).map(Hr):void 0))})}skipLocked(){return new un({...this.#e,queryNode:Mt.cloneWithEndModifier(this.#e.queryNode,Da.create("SkipLocked"))})}noWait(){return new un({...this.#e,queryNode:Mt.cloneWithEndModifier(this.#e.queryNode,Da.create("NoWait"))})}selectAll(e){return new un({...this.#e,queryNode:Zn.cloneWithSelections(this.#e.queryNode,ga(e))})}innerJoin(...e){return new un({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("InnerJoin",e))})}leftJoin(...e){return new un({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("LeftJoin",e))})}rightJoin(...e){return new un({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("RightJoin",e))})}fullJoin(...e){return new un({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("FullJoin",e))})}innerJoinLateral(...e){return new un({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("LateralInnerJoin",e))})}leftJoinLateral(...e){return new un({...this.#e,queryNode:Mt.cloneWithJoin(this.#e.queryNode,Ji("LateralLeftJoin",e))})}orderBy(...e){return new un({...this.#e,queryNode:Zn.cloneWithOrderByItems(this.#e.queryNode,_m(e))})}groupBy(e){return new un({...this.#e,queryNode:Zn.cloneWithGroupByItems(this.#e.queryNode,aG(e))})}limit(e){return new un({...this.#e,queryNode:Zn.cloneWithLimit(this.#e.queryNode,xN.create(ti(e)))})}offset(e){return new un({...this.#e,queryNode:Zn.cloneWithOffset(this.#e.queryNode,sG.create(ti(e)))})}fetch(e,n="only"){return new un({...this.#e,queryNode:Zn.cloneWithFetch(this.#e.queryNode,uG(e,n))})}top(e,n){return new un({...this.#e,queryNode:Mt.cloneWithTop(this.#e.queryNode,Ef(e,n))})}union(e){return new un({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,cd("union",e,!1))})}unionAll(e){return new un({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,cd("union",e,!0))})}intersect(e){return new un({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,cd("intersect",e,!1))})}intersectAll(e){return new un({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,cd("intersect",e,!0))})}except(e){return new un({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,cd("except",e,!1))})}exceptAll(e){return new un({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,cd("except",e,!0))})}as(e){return new sD(this,e)}clearSelect(){return new un({...this.#e,queryNode:Zn.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new un({...this.#e,queryNode:Mt.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new un({...this.#e,queryNode:Zn.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new un({...this.#e,queryNode:Zn.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new un({...this.#e,queryNode:Zn.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new un({...this.#e,queryNode:Zn.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new un({...this.#e})}$castTo(){return new un(this.#e)}$narrowType(){return new un(this.#e)}$assertType(){return new un(this.#e)}$asTuple(){return new rr(this.toOperationNode())}withPlugin(e){return new un({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Em){const n=await this.executeTakeFirst();if(n===void 0)throw Im(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new un({...this.#e,queryNode:Mt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Tn(un,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function ZE(t){return new un(t)}class sD{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return mu.create(this.#e.toOperationNode(),Sr.create(this.#t))}}Tn(sD,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Wl=Q({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return Q({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return Q({...t,distinct:!0})},cloneWithOrderBy(t,e){return Q({...t,orderBy:t.orderBy?ou.cloneWithItems(t.orderBy,e):ou.create(e)})},cloneWithFilter(t,e){return Q({...t,filter:t.filter?ys.cloneWithOperation(t.filter,"And",e):ys.create(e)})},cloneWithOrFilter(t,e){return Q({...t,filter:t.filter?ys.cloneWithOperation(t.filter,"Or",e):ys.create(e)})},cloneWithOver(t,e){return Q({...t,over:e})}}),_j=Q({is(t){return t.kind==="FunctionNode"},create(t,e){return Q({kind:"FunctionNode",func:t,arguments:e})}});class uo{#e;constructor(e){this.#e=Q(e)}get expressionType(){}as(e){return new dG(this,e)}distinct(){return new uo({...this.#e,aggregateFunctionNode:Wl.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(e,n){return new uo({...this.#e,aggregateFunctionNode:Wl.cloneWithOrderBy(this.#e.aggregateFunctionNode,_m([e,n]))})}filterWhere(...e){return new uo({...this.#e,aggregateFunctionNode:Wl.cloneWithFilter(this.#e.aggregateFunctionNode,_i(e))})}filterWhereRef(e,n,r){return new uo({...this.#e,aggregateFunctionNode:Wl.cloneWithFilter(this.#e.aggregateFunctionNode,ma(e,n,r))})}over(e){const n=nG();return new uo({...this.#e,aggregateFunctionNode:Wl.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}$castTo(){return new uo(this.#e)}$notNull(){return new uo(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}Tn(uo,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class dG{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return mu.create(this.#e.toOperationNode(),Sr.create(this.#t))}}function oD(){const t=(n,r)=>new rr(_j.create(n,Ch(r??[]))),e=(n,r)=>new uo({aggregateFunctionNode:Wl.create(n,r?Ch(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(...n){return t("coalesce",n)},count(n){return e("count",[n])},countAll(n){return new uo({aggregateFunctionNode:Wl.create("count",ga(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])},jsonAgg(n){return new uo({aggregateFunctionNode:Wl.create("json_agg",[Bs(n)?Hr(n):n.toOperationNode()])})},toJson(n){return new rr(_j.create("to_json",[Bs(n)?Hr(n):n.toOperationNode()]))}})}const fG=Q({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return Q({kind:"UnaryOperationNode",operator:t,operand:e})}});function pG(t,e){return fG.create(su.create(t),Ps(e))}const aa=Q({is(t){return t.kind==="CaseNode"},create(t){return Q({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return Q({...t,when:Q(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return Q({...t,when:t.when?Q([...t.when.slice(0,-1),Sm.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return Q({...t,...e})}});class aD{#e;constructor(e){this.#e=Q(e)}when(...e){return new lD({...this.#e,node:aa.cloneWithWhen(this.#e.node,Sm.create(_i(e)))})}}class lD{#e;constructor(e){this.#e=Q(e)}then(e){return new hG({...this.#e,node:aa.cloneWithThen(this.#e.node,gN(e)?yN(e):ti(e))})}}class hG{#e;constructor(e){this.#e=Q(e)}when(...e){return new lD({...this.#e,node:aa.cloneWithWhen(this.#e.node,Sm.create(_i(e)))})}else(e){return new mG({...this.#e,node:aa.cloneWith(this.#e.node,{else:gN(e)?yN(e):ti(e)})})}end(){return new rr(aa.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new rr(aa.cloneWith(this.#e.node,{isStatement:!0}))}}class mG{#e;constructor(e){this.#e=Q(e)}end(){return new rr(aa.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new rr(aa.cloneWith(this.#e.node,{isStatement:!0}))}}const Sj=Q({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return Q({kind:"JSONPathLegNode",type:t,value:e})}});class YE{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,n){return Db.is(this.#e)?new jh(Db.cloneWithTraversal(this.#e,hh.is(this.#e.traversal)?hh.cloneWithLeg(this.#e.traversal,Sj.create(e,n)):HF.cloneWithValue(this.#e.traversal,ha.createImmediate(n)))):new jh(hh.cloneWithLeg(this.#e,Sj.create(e,n)))}}class jh extends YE{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new gG(this,e)}$castTo(){return new jh(this.#e)}$notNull(){return new jh(this.#e)}toOperationNode(){return this.#e}}class gG{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return mu.create(this.#e.toOperationNode(),Ss(this.#t)?this.#t.toOperationNode():Sr.create(this.#t))}}const Ej=Q({is(t){return t.kind==="TupleNode"},create(t){return Q({kind:"TupleNode",values:Q(t)})}}),yG=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],bG=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],vG=Q({is(t){return t.kind==="DataTypeNode"},create(t){return Q({kind:"DataTypeNode",dataType:t})}});function xG(t){return!!(yG.includes(t)||bG.some(e=>e.test(t)))}function mc(t){if(Ss(t))return t.toOperationNode();if(xG(t))return vG.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}const wG=Q({is(t){return t.kind==="CastNode"},create(t,e){return Q({kind:"CastNode",expression:t,dataType:e})}});function _N(t=Xv){function e(i,s,o){return new rr(bN(i,s,o))}function n(i,s){return new rr(pG(i,s))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(i){return ZE({queryId:Xn(),executor:t,queryNode:Zn.createFrom(Oh(i))})},case(i){return new aD({node:aa.create(Jl(i)?void 0:Ps(i))})},ref(i,s){return Jl(s)?new rr(tl(i)):new YE(wH(i,s))},jsonPath(){return new YE(hh.create())},table(i){return new rr(Hr(i))},val(i){return new rr(ti(i))},refTuple(...i){return new rr(Ej.create(i.map(Ps)))},tuple(...i){return new rr(Ej.create(i.map(ti)))},lit(i){return new rr(yN(i))},unary:n,not(i){return n("not",i)},exists(i){return n("exists",i)},neg(i){return n("-",i)},between(i,s,o){return new rr(Xd.create(Ps(i),su.create("between"),iu.create(ti(s),ti(o))))},betweenSymmetric(i,s,o){return new rr(Xd.create(Ps(i),su.create("between symmetric"),iu.create(ti(s),ti(o))))},and(i){return el(i)?new rr(Mb(i,"and")):new rr(oj(i,"and"))},or(i){return el(i)?new rr(Mb(i,"or")):new rr(oj(i,"or"))},parens(...i){const s=_i(i);return ef.is(s)?new rr(s):new rr(ef.create(s))},cast(i,s){return new rr(wG.create(Ps(i),mc(s)))},withSchema(i){return _N(t.withPluginAtFront(new Nm(i)))}});return r.fn=oD(),r.eb=r,r}function If(t){return _N()}function Nc(t){if(Ss(t))return t.toOperationNode();if(Us(t))return t(If()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function uD(t){if(Ss(t))return t.toOperationNode();if(Us(t))return t(If()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function km(t){return dH(t)||fH(t)||Us(t)}function Oh(t){return el(t)?t.map(e=>qh(e)):[qh(t)]}function qh(t){return Bs(t)?cD(t):uD(t)}function cD(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(dD);return mu.create(Hr(n),Sr.create(r))}else return Hr(t)}function Hr(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(dD);return Yl.createWithSchema(n,r)}else return Yl.create(t)}function dD(t){return t.trim()}const fD=Q({is(t){return t.kind==="AddColumnNode"},create(t){return Q({kind:"AddColumnNode",column:t})}}),xr=Q({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return Q({kind:"ColumnDefinitionNode",column:Qr.create(t),dataType:e})},cloneWithFrontModifier(t,e){return Q({...t,frontModifiers:t.frontModifiers?Q([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return Q({...t,endModifiers:t.endModifiers?Q([...t.endModifiers,e]):[e]})},cloneWith(t,e){return Q({...t,...e})}}),pD=Q({is(t){return t.kind==="DropColumnNode"},create(t){return Q({kind:"DropColumnNode",column:Qr.create(t)})}}),hD=Q({is(t){return t.kind==="RenameColumnNode"},create(t,e){return Q({kind:"RenameColumnNode",column:Qr.create(t),renameTo:Qr.create(e)})}}),SN=Q({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return Q({kind:"CheckConstraintNode",expression:t,name:e?Sr.create(e):void 0})}}),_G=["no action","restrict","cascade","set null","set default"],Ky=Q({is(t){return t.kind==="ReferencesNode"},create(t,e){return Q({kind:"ReferencesNode",table:t,columns:Q([...e])})},cloneWithOnDelete(t,e){return Q({...t,onDelete:e})},cloneWithOnUpdate(t,e){return Q({...t,onUpdate:e})}});function mD(t){return Ss(t)?t.toOperationNode():ha.createImmediate(t)}const ly=Q({is(t){return t.kind==="GeneratedNode"},create(t){return Q({kind:"GeneratedNode",...t})},createWithExpression(t){return Q({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return Q({...t,...e})}}),SG=Q({is(t){return t.kind==="DefaultValueNode"},create(t){return Q({kind:"DefaultValueNode",defaultValue:t})}});function Ub(t){if(_G.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}class ar{#e;constructor(e){this.#e=e}autoIncrement(){return new ar(xr.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new ar(xr.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new ar(xr.cloneWith(this.#e,{primaryKey:!0}))}references(e){const n=tl(e);if(!n.table||pN.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new ar(xr.cloneWith(this.#e,{references:Ky.create(n.table,[n.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new ar(xr.cloneWith(this.#e,{references:Ky.cloneWithOnDelete(this.#e.references,Ub(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new ar(xr.cloneWith(this.#e,{references:Ky.cloneWithOnUpdate(this.#e.references,Ub(e))}))}unique(){return new ar(xr.cloneWith(this.#e,{unique:!0}))}notNull(){return new ar(xr.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new ar(xr.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new ar(xr.cloneWith(this.#e,{defaultTo:SG.create(mD(e))}))}check(e){return new ar(xr.cloneWith(this.#e,{check:SN.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new ar(xr.cloneWith(this.#e,{generated:ly.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new ar(xr.cloneWith(this.#e,{generated:ly.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new ar(xr.cloneWith(this.#e,{generated:ly.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new ar(xr.cloneWith(this.#e,{generated:ly.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new ar(xr.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new ar(xr.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new ar(xr.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new ar(xr.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}Tn(ar,"don't await ColumnDefinitionBuilder instances directly.");const gD=Q({is(t){return t.kind==="ModifyColumnNode"},create(t){return Q({kind:"ModifyColumnNode",column:t})}}),Vb=Q({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return Q({kind:"ForeignKeyConstraintNode",columns:t,references:Ky.create(e,n),name:r?Sr.create(r):void 0})},cloneWith(t,e){return Q({...t,...e})}});class tf{#e;constructor(e){this.#e=e}onDelete(e){return new tf(Vb.cloneWith(this.#e,{onDelete:Ub(e)}))}onUpdate(e){return new tf(Vb.cloneWith(this.#e,{onUpdate:Ub(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}}Tn(tf,"don't await ForeignKeyConstraintBuilder instances directly.");const Qy=Q({is(t){return t.kind==="AddConstraintNode"},create(t){return Q({kind:"AddConstraintNode",constraint:t})}}),EN=Q({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,n){return Q({kind:"UniqueConstraintNode",columns:Q(t.map(Qr.create)),name:e?Sr.create(e):void 0,nullsNotDistinct:n})},cloneWith(t,e){return Q({...t,...e})}}),Jy=Q({is(t){return t.kind==="DropConstraintNode"},create(t){return Q({kind:"DropConstraintNode",constraintName:Sr.create(t)})},cloneWith(t,e){return Q({...t,...e})}}),Op=Q({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return Q({kind:"AlterColumnNode",column:Qr.create(t),[e]:n})}});class IN{#e;constructor(e){this.#e=e}setDataType(e){return new wd(Op.create(this.#e,"dataType",mc(e)))}setDefault(e){return new wd(Op.create(this.#e,"setDefault",mD(e)))}dropDefault(){return new wd(Op.create(this.#e,"dropDefault",!0))}setNotNull(){return new wd(Op.create(this.#e,"setNotNull",!0))}dropNotNull(){return new wd(Op.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}}Tn(IN,"don't await AlterColumnBuilder instances");class wd{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}Tn(wd,"don't await AlteredColumnBuilder instances");class Vu{#e;constructor(e){this.#e=Q(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Vu,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class Ah{#e;constructor(e){this.#e=Q(e)}onDelete(e){return new Ah({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new Ah({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Yn.cloneWithTableProps(this.#e.node,{addConstraint:Qy.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Ah,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class zd{#e;constructor(e){this.#e=Q(e)}ifExists(){return new zd({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropConstraint:Jy.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new zd({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropConstraint:Jy.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new zd({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropConstraint:Jy.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(zd,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const yD=Q({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return Q({kind:"PrimaryKeyConstraintNode",columns:Q(t.map(Qr.create)),name:e?Sr.create(e):void 0})}}),_d=Q({is(t){return t.kind==="AddIndexNode"},create(t){return Q({kind:"AddIndexNode",name:Sr.create(t)})},cloneWith(t,e){return Q({...t,...e})},cloneWithColumns(t,e){return Q({...t,columns:[...t.columns||[],...e]})}});class Ul{#e;constructor(e){this.#e=Q(e)}unique(){return new Ul({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:_d.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new Ul({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:_d.cloneWithColumns(this.#e.node.addIndex,[Lb(e)])})})}columns(e){return new Ul({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:_d.cloneWithColumns(this.#e.node.addIndex,e.map(Lb))})})}expression(e){return new Ul({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:_d.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new Ul({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:_d.cloneWith(this.#e.node.addIndex,{using:qi.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Ul,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class Cm{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}nullsNotDistinct(){return new Cm(EN.cloneWith(this.#e,{nullsNotDistinct:!0}))}}Tn(Cm,"don't await UniqueConstraintNodeBuilder instances directly.");class bD{#e;constructor(e){this.#e=Q(e)}renameTo(e){return new Vu({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{renameTo:Hr(e)})})}setSchema(e){return new Vu({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{setSchema:Sr.create(e)})})}alterColumn(e,n){const r=n(new IN(e));return new fo({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new fo({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,pD.create(e))})}renameColumn(e,n){return new fo({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,hD.create(e,n))})}addColumn(e,n,r=Zl){const i=r(new ar(xr.create(e,mc(n))));return new fo({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,fD.create(i.toOperationNode()))})}modifyColumn(e,n,r=Zl){const i=r(new ar(xr.create(e,mc(n))));return new fo({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,gD.create(i.toOperationNode()))})}addUniqueConstraint(e,n,r=Zl){const i=r(new Cm(EN.create(n,e)));return new Vu({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addConstraint:Qy.create(i.toOperationNode())})})}addCheckConstraint(e,n){return new Vu({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addConstraint:Qy.create(SN.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,i){return new Ah({...this.#e,constraintBuilder:new tf(Vb.create(n.map(Qr.create),Hr(r),i.map(Qr.create),e))})}addPrimaryKeyConstraint(e,n){return new Vu({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addConstraint:Qy.create(yD.create(n,e))})})}dropConstraint(e){return new zd({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropConstraint:Jy.create(e)})})}addIndex(e){return new Ul({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:_d.create(e)})})}dropIndex(e){return new Vu({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropIndex:fh.create(e)})})}$call(e){return e(this)}}Tn(bD,"don't await AlterTableBuilder instances");class fo{#e;constructor(e){this.#e=Q(e)}alterColumn(e,n){const r=n(new IN(e));return new fo({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new fo({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,pD.create(e))})}renameColumn(e,n){return new fo({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,hD.create(e,n))})}addColumn(e,n,r=Zl){const i=r(new ar(xr.create(e,mc(n))));return new fo({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,fD.create(i.toOperationNode()))})}modifyColumn(e,n,r=Zl){const i=r(new ar(xr.create(e,mc(n))));return new fo({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,gD.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(fo,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class vD extends tD{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class ao{#e;constructor(e){this.#e=Q(e)}ifNotExists(){return new ao({...this.#e,node:Ba.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new ao({...this.#e,node:Ba.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new ao({...this.#e,node:Ba.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new ao({...this.#e,node:Ba.cloneWith(this.#e.node,{table:Hr(e)})})}column(e){return new ao({...this.#e,node:Ba.cloneWithColumns(this.#e.node,[Lb(e)])})}columns(e){return new ao({...this.#e,node:Ba.cloneWithColumns(this.#e.node,e.map(Lb))})}expression(e){return new ao({...this.#e,node:Ba.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new ao({...this.#e,node:Ba.cloneWith(this.#e.node,{using:qi.createWithSql(e)})})}where(...e){const n=new vD;return new ao({...this.#e,node:Mt.cloneWithWhere(this.#e.node,n.transformNode(_i(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(ao,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class ex{#e;constructor(e){this.#e=Q(e)}ifNotExists(){return new ex({...this.#e,node:BF.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(ex,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function EG(t){if(cH.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}class hs{#e;constructor(e){this.#e=Q(e)}temporary(){return new hs({...this.#e,node:Ts.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new hs({...this.#e,node:Ts.cloneWith(this.#e.node,{onCommit:EG(e)})})}ifNotExists(){return new hs({...this.#e,node:Ts.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,n,r=Zl){const i=r(new ar(xr.create(e,mc(n))));return new hs({...this.#e,node:Ts.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new hs({...this.#e,node:Ts.cloneWithConstraint(this.#e.node,yD.create(n,e))})}addUniqueConstraint(e,n,r=Zl){const i=r(new Cm(EN.create(n,e)));return new hs({...this.#e,node:Ts.cloneWithConstraint(this.#e.node,i.toOperationNode())})}addCheckConstraint(e,n){return new hs({...this.#e,node:Ts.cloneWithConstraint(this.#e.node,SN.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,i,s=Zl){const o=s(new tf(Vb.create(n.map(Qr.create),Hr(r),i.map(Qr.create),e)));return new hs({...this.#e,node:Ts.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(e){return new hs({...this.#e,node:Ts.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new hs({...this.#e,node:Ts.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new hs({...this.#e,node:Ts.cloneWith(this.#e.node,{selectQuery:Nc(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(hs,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class Wd{#e;constructor(e){this.#e=Q(e)}on(e){return new Wd({...this.#e,node:fh.cloneWith(this.#e.node,{table:Hr(e)})})}ifExists(){return new Wd({...this.#e,node:fh.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Wd({...this.#e,node:fh.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Wd,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class Ph{#e;constructor(e){this.#e=Q(e)}ifExists(){return new Ph({...this.#e,node:VE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Ph({...this.#e,node:VE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Ph,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class Fh{#e;constructor(e){this.#e=Q(e)}ifExists(){return new Fh({...this.#e,node:HE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Fh({...this.#e,node:HE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Fh,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const Ll=Q({is(t){return t.kind==="CreateViewNode"},create(t){return Q({kind:"CreateViewNode",name:ru.create(t)})},cloneWith(t,e){return Q({...t,...e})}});class IG{#e=new vD;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class Ua{#e;constructor(e){this.#e=Q(e)}temporary(){return new Ua({...this.#e,node:Ll.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new Ua({...this.#e,node:Ll.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new Ua({...this.#e,node:Ll.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new Ua({...this.#e,node:Ll.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new Ua({...this.#e,node:Ll.cloneWith(this.#e.node,{columns:e.map(KF)})})}as(e){const n=e.withPlugin(new IG).toOperationNode();return new Ua({...this.#e,node:Ll.cloneWith(this.#e.node,{as:n})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Ua,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Zy=Q({is(t){return t.kind==="DropViewNode"},create(t){return Q({kind:"DropViewNode",name:ru.create(t)})},cloneWith(t,e){return Q({...t,...e})}});class Ud{#e;constructor(e){this.#e=Q(e)}materialized(){return new Ud({...this.#e,node:Zy.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new Ud({...this.#e,node:Zy.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Ud({...this.#e,node:Zy.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(Ud,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const xD=Q({is(t){return t.kind==="CreateTypeNode"},create(t){return Q({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return Q({...t,enum:mN.create(e.map(n=>ha.createImmediate(n)))})}});class tx{#e;constructor(e){this.#e=Q(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new tx({...this.#e,node:xD.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(tx,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const wD=Q({is(t){return t.kind==="DropTypeNode"},create(t){return Q({kind:"DropTypeNode",name:t})},cloneWith(t,e){return Q({...t,...e})}});class nx{#e;constructor(e){this.#e=Q(e)}ifExists(){return new nx({...this.#e,node:wD.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Tn(nx,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Ij(t){const e=".";if(t.includes(e)){const n=t.split(e).map(NG);if(n.length===2)return ru.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return ru.create(t)}function NG(t){return t.trim()}class yh{#e;constructor(e){this.#e=e}createTable(e){return new hs({queryId:Xn(),executor:this.#e,node:Ts.create(Hr(e))})}dropTable(e){return new Fh({queryId:Xn(),executor:this.#e,node:HE.create(Hr(e))})}createIndex(e){return new ao({queryId:Xn(),executor:this.#e,node:Ba.create(e)})}dropIndex(e){return new Wd({queryId:Xn(),executor:this.#e,node:fh.create(e)})}createSchema(e){return new ex({queryId:Xn(),executor:this.#e,node:BF.create(e)})}dropSchema(e){return new Ph({queryId:Xn(),executor:this.#e,node:VE.create(e)})}alterTable(e){return new bD({queryId:Xn(),executor:this.#e,node:Yn.create(Hr(e))})}createView(e){return new Ua({queryId:Xn(),executor:this.#e,node:Ll.create(e)})}dropView(e){return new Ud({queryId:Xn(),executor:this.#e,node:Zy.create(e)})}createType(e){return new tx({queryId:Xn(),executor:this.#e,node:xD.create(Ij(e))})}dropType(e){return new nx({queryId:Xn(),executor:this.#e,node:wD.create(Ij(e))})}withPlugin(e){return new yh(this.#e.withPlugin(e))}withoutPlugins(){return new yh(this.#e.withoutPlugins())}withSchema(e){return new yh(this.#e.withPluginAtFront(new Nm(e)))}}class kG{ref(e){return new vH(e)}}class CG{#e;constructor(e){this.#e=e}async provideConnection(e){const n=await this.#e.acquireConnection();try{return await e(n)}finally{await this.#e.releaseConnection(n)}}}class Ju extends nD{#e;#t;#n;constructor(e,n,r,i=[]){super(i),this.#e=e,this.#t=n,this.#n=r}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#n.provideConnection(e)}withPlugins(e){return new Ju(this.#e,this.#t,this.#n,[...this.plugins,...e])}withPlugin(e){return new Ju(this.#e,this.#t,this.#n,[...this.plugins,e])}withPluginAtFront(e){return new Ju(this.#e,this.#t,this.#n,[e,...this.plugins])}withConnectionProvider(e){return new Ju(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new Ju(this.#e,this.#t,this.#n,[])}}function Nj(){return typeof performance<"u"&&Us(performance.now)?performance.now():Date.now()}class TG{#e;#t;#n;#r;#i;#s=new WeakSet;constructor(e,n){this.#r=!1,this.#e=e,this.#t=n}async init(){if(this.#i)throw new Error("driver has already been destroyed");this.#n||(this.#n=this.#e.init().then(()=>{this.#r=!0}).catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n}async acquireConnection(){if(this.#i)throw new Error("driver has already been destroyed");this.#r||await this.init();const e=await this.#e.acquireConnection();return this.#s.has(e)||(this.#o()&&this.#a(e),this.#s.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,n){return this.#e.beginTransaction(e,n)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#n&&(await this.#n,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#o(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#a(e){const n=e.executeQuery;e.executeQuery=async r=>{let i;const s=Nj();try{return await n.call(e,r)}catch(o){throw i=o,await this.#u(o,r,s),o}finally{i||await this.#l(r,s)}}}async #u(e,n,r){await this.#t.error(()=>({level:"error",error:e,query:n,queryDurationMillis:this.#c(r)}))}async #l(e,n){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#c(n)}))}#c(e){return Nj()-e}}const RG=()=>{};class _D{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(RG);return this.#t=this.#n(e).finally(()=>{this.#t=void 0}),this.#t}async #n(e){return await e(this.#e)}}const jG=["read uncommitted","read committed","repeatable read","serializable","snapshot"];Q(["query","error"]);class OG{#e;#t;constructor(e){Us(e)?(this.#t=e,this.#e=Q({query:!0,error:!0})):(this.#t=qG,this.#e=Q({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}function qG(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function AG(t){return sa(t)&&Us(t.compile)}let NN=class Kp extends zl{#e;constructor(e){let n,r;if(PG(e))n={executor:e.executor},r={...e};else{const i=e.dialect,s=i.createDriver(),o=i.createQueryCompiler(),a=i.createAdapter(),u=new OG(e.log??[]),d=new TG(s,u),p=new CG(d),h=new Ju(o,a,p,e.plugins??[]);n={executor:h},r={config:e,executor:h,dialect:i,driver:d}}super(n),this.#e=Q(r)}get schema(){return new yh(this.#e.executor)}get dynamic(){return new kG}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new aD({node:aa.create(Jl(e)?void 0:Nc(e))})}get fn(){return oD()}transaction(){return new rx({...this.#e})}connection(){return new SD({...this.#e})}withPlugin(e){return new Kp({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Kp({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Kp({...this.#e,executor:this.#e.executor.withPluginAtFront(new Nm(e))})}withTables(){return new Kp({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,n=Xn()){const r=AG(e)?e.compile():e;return this.getExecutor().executeQuery(r,n)}};class Nd extends NN{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new Nd({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Nd({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Nd({...this.#e,executor:this.#e.executor.withPluginAtFront(new Nm(e))})}withTables(){return new Nd({...this.#e})}}function PG(t){return sa(t)&&sa(t.config)&&sa(t.driver)&&sa(t.executor)&&sa(t.dialect)}class SD{#e;constructor(e){this.#e=Q(e)}async execute(e){return this.#e.executor.provideConnection(async n=>{const r=this.#e.executor.withConnectionProvider(new _D(n)),i=new NN({...this.#e,executor:r});return await e(i)})}}Tn(SD,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class rx{#e;constructor(e){this.#e=Q(e)}setIsolationLevel(e){return new rx({...this.#e,isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=this.#e,i={isolationLevel:n};return FG(i),this.#e.executor.provideConnection(async s=>{const o=this.#e.executor.withConnectionProvider(new _D(s)),a=new Nd({...r,executor:o});try{await this.#e.driver.beginTransaction(s,i);const u=await e(a);return await this.#e.driver.commitTransaction(s),u}catch(u){throw await this.#e.driver.rollbackTransaction(s),u}})}}Tn(rx,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function FG(t){if(t.isolationLevel&&!jG.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}class Vd{#e;constructor(e){this.#e=Q(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new ED(this,e)}$castTo(){return new Vd({...this.#e})}$notNull(){return new Vd(this.#e)}withPlugin(e){return new Vd({...this.#e,plugins:this.#e.plugins!==void 0?Q([...this.#e.plugins,e]):Q([e])})}toOperationNode(){return this.#n(this.#t())}compile(e){return this.#r(this.#t(e))}async execute(e){const n=this.#t(e);return n.executeQuery(this.#r(n),this.#e.queryId)}#t(e){const n=e!==void 0?e.getExecutor():Xv;return this.#e.plugins!==void 0?n.withPlugins(this.#e.plugins):n}#n(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#r(e){return e.compileQuery(this.#n(e),this.#e.queryId)}}function Ol(t){return new Vd(t)}Tn(Vd,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class ED{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return mu.create(this.#e.toOperationNode(),Ss(this.#t)?this.#t.toOperationNode():Sr.create(this.#t))}}Tn(ED,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const _r=Object.assign((t,...e)=>Ol({queryId:Xn(),rawNode:qi.create(t,e?.map(kj)??[])}),{ref(t){return Ol({queryId:Xn(),rawNode:qi.createWithChild(tl(t))})},val(t){return Ol({queryId:Xn(),rawNode:qi.createWithChild(ti(t))})},value(t){return this.val(t)},table(t){return Ol({queryId:Xn(),rawNode:qi.createWithChild(Hr(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",Ol({queryId:Xn(),rawNode:qi.create(e,t.map(Sr.create))})},lit(t){return Ol({queryId:Xn(),rawNode:qi.createWithChild(ha.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return Ol({queryId:Xn(),rawNode:qi.createWithSql(t)})},join(t,e=_r`, `){const n=new Array(2*t.length-1),r=e.toOperationNode();for(let i=0;i<t.length;++i)n[2*i]=kj(t[i]),i!==t.length-1&&(n[2*i+1]=r);return Ol({queryId:Xn(),rawNode:qi.createWithChildren(n)})}});function kj(t){return Ss(t)?t.toOperationNode():ti(t)}class DG{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=Q({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}class LG extends DG{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),Q({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){const n=this.parentNode!==void 0&&!ef.is(this.parentNode)&&!Os.is(this.parentNode)&&!Ts.is(this.parentNode)&&!Ll.is(this.parentNode)&&!iD.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),n&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,n=", "){const r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(n)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){const n=this.nodeStack.find(Mt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!bs.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!bs.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){const n=this.nodeStack.find(Mt.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Bs(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");const{values:n}=e;for(let r=0;r<n.length;++r)this.appendValue(n[r]),r!==n.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append($G[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){const{sqlFragments:n,parameters:r}=e;for(let i=0;i<n.length;++i)this.append(n[i]),r.length>i&&this.visitNode(r[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){const n=this.nodeStack.find(Mt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!bs.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!bs.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),Fb(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(MG[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return su.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(const n of e.pathLegs)this.visitNode(n);this.append("'")}visitJSONPathLeg(e){const n=e.type==="ArrayLocation";this.append(n?"[":"."),this.append(String(e.value)),n&&this.append("]")}visitJSONOperatorChain(e){for(let n=0,r=e.values.length;n<r;n++)n===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[n])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){const n=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper();let i="";for(const s of e)i+=s,s===n?i+=n:s===r&&(i+=r);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Bs(e))this.append(`'${e}'`);else if(Zv(e)||Fb(e))this.append(e.toString());else if(dN(e))this.append("null");else if(uH(e))this.appendImmediateValue(e.toISOString());else if(fN(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((n,r)=>n.modifier&&r.modifier?Cj[n.modifier]-Cj[r.modifier]:1),Q(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}const MG=Q({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),Cj=Q({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),$G=Q({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"});class BG{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}const zG=/"/g;class WG extends LG{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(zG,'""')}visitDefaultInsertValue(e){this.append("null")}}const UG="kysely_migration",VG="kysely_migration_lock";Q({__noMigrations__:!0});class HG{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let n=this.#e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(n=n.where("name","!=",UG).where("name","!=",VG));const r=await n.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(e){return{tables:await this.getTables(e)}}async #t(e){const n=this.#e,r=await n.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),i=r.sql?.split(/[\(\),]/)?.find(o=>o.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),s=await n.selectFrom(_r`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:s.map(o=>({name:o.name,dataType:o.type,isNullable:!o.notnull,isAutoIncrementing:o.name===i,hasDefaultValue:o.dflt_value!=null,comment:void 0}))}}}class GG extends BG{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}const lc={jsonObject(t){const e=_r.join(Object.entries(t).map(([n,r])=>_r`${n}, ${r}`));return _r`json_object(${e})`},jsonGroupArray(t){return _r`json_group_array(${lc.jsonObject(t)})`}},ID={hash(t){return UE.sha224(t)},verify(t,e){return UE.sha224(t)===e}};var Pn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Pn||(Pn={}));var XE;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(XE||(XE={}));const Lt=Pn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Va=t=>{switch(typeof t){case"undefined":return Lt.undefined;case"string":return Lt.string;case"number":return isNaN(t)?Lt.nan:Lt.number;case"boolean":return Lt.boolean;case"function":return Lt.function;case"bigint":return Lt.bigint;case"symbol":return Lt.symbol;case"object":return Array.isArray(t)?Lt.array:t===null?Lt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Lt.promise:typeof Map<"u"&&t instanceof Map?Lt.map:typeof Set<"u"&&t instanceof Set?Lt.set:typeof Date<"u"&&t instanceof Date?Lt.date:Lt.object;default:return Lt.unknown}},yt=Pn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),KG=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class $s extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(n(o))):a[d]=a[d]||{_errors:[]},a=a[d],u++}}};return i(this),r}static assert(e){if(!(e instanceof $s))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Pn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}$s.create=t=>new $s(t);const nf=(t,e)=>{let n;switch(t.code){case yt.invalid_type:t.received===Lt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case yt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Pn.jsonStringifyReplacer)}`;break;case yt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Pn.joinValues(t.keys,", ")}`;break;case yt.invalid_union:n="Invalid input";break;case yt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Pn.joinValues(t.options)}`;break;case yt.invalid_enum_value:n=`Invalid enum value. Expected ${Pn.joinValues(t.options)}, received '${t.received}'`;break;case yt.invalid_arguments:n="Invalid function arguments";break;case yt.invalid_return_type:n="Invalid function return type";break;case yt.invalid_date:n="Invalid date";break;case yt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Pn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case yt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case yt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case yt.custom:n="Invalid input";break;case yt.invalid_intersection_types:n="Intersection results could not be merged";break;case yt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case yt.not_finite:n="Number must be finite";break;default:n=e.defaultError,Pn.assertNever(t)}return{message:n}};let ND=nf;function QG(t){ND=t}function Hb(){return ND}const Gb=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const u=r.filter(d=>!!d).slice().reverse();for(const d of u)a=d(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},JG=[];function Rt(t,e){const n=Hb(),r=Gb({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===nf?void 0:nf].filter(i=>!!i)});t.common.issues.push(r)}class Li{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return fn;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Li.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return fn;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const fn=Object.freeze({status:"aborted"}),kd=t=>({status:"dirty",value:t}),ts=t=>({status:"valid",value:t}),eI=t=>t.status==="aborted",tI=t=>t.status==="dirty",gc=t=>t.status==="valid",Dh=t=>typeof Promise<"u"&&t instanceof Promise;function Kb(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function kD(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Qt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Qt||(Qt={}));var Qp,Jp;class ya{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Tj=(t,e)=>{if(gc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new $s(t.common.issues);return this._error=n,this._error}}};function kn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var u,d;const{message:p}=t;return o.code==="invalid_enum_value"?{message:p??a.defaultError}:typeof a.data>"u"?{message:(u=p??r)!==null&&u!==void 0?u:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(d=p??n)!==null&&d!==void 0?d:a.defaultError}},description:i}}class Rn{get description(){return this._def.description}_getType(e){return Va(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Va(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Li,ctx:{common:e.parent.common,data:e.data,parsedType:Va(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Dh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Va(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Tj(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Va(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return gc(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>gc(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Va(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await (Dh(i)?i:Promise.resolve(i));return Tj(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:yt.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Vo({schema:this,typeName:dn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ua.create(this,this._def)}nullable(){return cu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return zo.create(this)}promise(){return sf.create(this,this._def)}or(e){return Bh.create([this,e],this._def)}and(e){return zh.create(this,e,this._def)}transform(e){return new Vo({...kn(this._def),schema:this,typeName:dn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Gh({...kn(this._def),innerType:this,defaultValue:n,typeName:dn.ZodDefault})}brand(){return new kN({typeName:dn.ZodBranded,type:this,...kn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Kh({...kn(this._def),innerType:this,catchValue:n,typeName:dn.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Tm.create(this,e)}readonly(){return Qh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ZG=/^c[^\s-]{8,}$/i,YG=/^[0-9a-z]+$/,XG=/^[0-9A-HJKMNP-TV-Z]{26}$/i,eK=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tK=/^[a-z0-9_-]{21}$/i,nK=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,rK=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,iK=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,sK="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let T0;const oK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,aK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,lK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,uK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cK=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dK=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,CD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fK=new RegExp(`^${CD}$`);function TD(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function pK(t){return new RegExp(`^${TD(t)}$`)}function RD(t){let e=`${CD}T${TD(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function hK(t,e){return!!((e==="v4"||!e)&&oK.test(t)||(e==="v6"||!e)&&lK.test(t))}function mK(t,e){if(!nK.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function gK(t,e){return!!((e==="v4"||!e)&&aK.test(t)||(e==="v6"||!e)&&uK.test(t))}class $o extends Rn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Lt.string){const s=this._getOrReturnCtx(e);return Rt(s,{code:yt.invalid_type,expected:Lt.string,received:s.parsedType}),fn}const r=new Li;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Rt(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Rt(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")iK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"email",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")T0||(T0=new RegExp(sK,"u")),T0.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"emoji",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")eK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"uuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")tK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"nanoid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")ZG.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"cuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")YG.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"cuid2",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")XG.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"ulid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Rt(i,{validation:"url",code:yt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"regex",code:yt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?RD(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?fK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?pK(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?rK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"duration",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?hK(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"ip",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?mK(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"jwt",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?gK(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"cidr",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?cK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"base64",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?dK.test(e.data)||(i=this._getOrReturnCtx(e,i),Rt(i,{validation:"base64url",code:yt.invalid_string,message:s.message}),r.dirty()):Pn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:yt.invalid_string,...Qt.errToObj(r)})}_addCheck(e){return new $o({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Qt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Qt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Qt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Qt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Qt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Qt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Qt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Qt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Qt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Qt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Qt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Qt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Qt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Qt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Qt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Qt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Qt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Qt.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Qt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Qt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Qt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Qt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Qt.errToObj(n)})}nonempty(e){return this.min(1,Qt.errToObj(e))}trim(){return new $o({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $o({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $o({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}$o.create=t=>{var e;return new $o({checks:[],typeName:dn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...kn(t)})};function yK(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class au extends Rn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Lt.number){const s=this._getOrReturnCtx(e);return Rt(s,{code:yt.invalid_type,expected:Lt.number,received:s.parsedType}),fn}let r;const i=new Li;for(const s of this._def.checks)s.kind==="int"?Pn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?yK(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.not_finite,message:s.message}),i.dirty()):Pn.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Qt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Qt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Qt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Qt.toString(n))}setLimit(e,n,r,i){return new au({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Qt.toString(i)}]})}_addCheck(e){return new au({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Qt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Qt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Qt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Qt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Qt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Qt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Qt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Qt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Qt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Pn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}au.create=t=>new au({checks:[],typeName:dn.ZodNumber,coerce:t?.coerce||!1,...kn(t)});class lu extends Rn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Lt.bigint)return this._getInvalidInput(e);let r;const i=new Li;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Rt(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Pn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Rt(n,{code:yt.invalid_type,expected:Lt.bigint,received:n.parsedType}),fn}gte(e,n){return this.setLimit("min",e,!0,Qt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Qt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Qt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Qt.toString(n))}setLimit(e,n,r,i){return new lu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Qt.toString(i)}]})}_addCheck(e){return new lu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Qt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Qt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Qt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Qt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Qt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}lu.create=t=>{var e;return new lu({checks:[],typeName:dn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...kn(t)})};class Lh extends Rn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Lt.boolean){const r=this._getOrReturnCtx(e);return Rt(r,{code:yt.invalid_type,expected:Lt.boolean,received:r.parsedType}),fn}return ts(e.data)}}Lh.create=t=>new Lh({typeName:dn.ZodBoolean,coerce:t?.coerce||!1,...kn(t)});class yc extends Rn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Lt.date){const s=this._getOrReturnCtx(e);return Rt(s,{code:yt.invalid_type,expected:Lt.date,received:s.parsedType}),fn}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Rt(s,{code:yt.invalid_date}),fn}const r=new Li;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Rt(i,{code:yt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Pn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new yc({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Qt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Qt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}yc.create=t=>new yc({checks:[],coerce:t?.coerce||!1,typeName:dn.ZodDate,...kn(t)});class Qb extends Rn{_parse(e){if(this._getType(e)!==Lt.symbol){const r=this._getOrReturnCtx(e);return Rt(r,{code:yt.invalid_type,expected:Lt.symbol,received:r.parsedType}),fn}return ts(e.data)}}Qb.create=t=>new Qb({typeName:dn.ZodSymbol,...kn(t)});class Mh extends Rn{_parse(e){if(this._getType(e)!==Lt.undefined){const r=this._getOrReturnCtx(e);return Rt(r,{code:yt.invalid_type,expected:Lt.undefined,received:r.parsedType}),fn}return ts(e.data)}}Mh.create=t=>new Mh({typeName:dn.ZodUndefined,...kn(t)});class $h extends Rn{_parse(e){if(this._getType(e)!==Lt.null){const r=this._getOrReturnCtx(e);return Rt(r,{code:yt.invalid_type,expected:Lt.null,received:r.parsedType}),fn}return ts(e.data)}}$h.create=t=>new $h({typeName:dn.ZodNull,...kn(t)});class rf extends Rn{constructor(){super(...arguments),this._any=!0}_parse(e){return ts(e.data)}}rf.create=t=>new rf({typeName:dn.ZodAny,...kn(t)});class uc extends Rn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ts(e.data)}}uc.create=t=>new uc({typeName:dn.ZodUnknown,...kn(t)});class nl extends Rn{_parse(e){const n=this._getOrReturnCtx(e);return Rt(n,{code:yt.invalid_type,expected:Lt.never,received:n.parsedType}),fn}}nl.create=t=>new nl({typeName:dn.ZodNever,...kn(t)});class Jb extends Rn{_parse(e){if(this._getType(e)!==Lt.undefined){const r=this._getOrReturnCtx(e);return Rt(r,{code:yt.invalid_type,expected:Lt.void,received:r.parsedType}),fn}return ts(e.data)}}Jb.create=t=>new Jb({typeName:dn.ZodVoid,...kn(t)});class zo extends Rn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Lt.array)return Rt(n,{code:yt.invalid_type,expected:Lt.array,received:n.parsedType}),fn;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(Rt(n,{code:o?yt.too_big:yt.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Rt(n,{code:yt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Rt(n,{code:yt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new ya(n,o,n.path,a)))).then(o=>Li.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new ya(n,o,n.path,a)));return Li.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new zo({...this._def,minLength:{value:e,message:Qt.toString(n)}})}max(e,n){return new zo({...this._def,maxLength:{value:e,message:Qt.toString(n)}})}length(e,n){return new zo({...this._def,exactLength:{value:e,message:Qt.toString(n)}})}nonempty(e){return this.min(1,e)}}zo.create=(t,e)=>new zo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:dn.ZodArray,...kn(e)});function Sd(t){if(t instanceof Or){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ua.create(Sd(r))}return new Or({...t._def,shape:()=>e})}else return t instanceof zo?new zo({...t._def,type:Sd(t.element)}):t instanceof ua?ua.create(Sd(t.unwrap())):t instanceof cu?cu.create(Sd(t.unwrap())):t instanceof ba?ba.create(t.items.map(e=>Sd(e))):t}class Or extends Rn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Pn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Lt.object){const d=this._getOrReturnCtx(e);return Rt(d,{code:yt.invalid_type,expected:Lt.object,received:d.parsedType}),fn}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof nl&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||a.push(d);const u=[];for(const d of o){const p=s[d],h=i.data[d];u.push({key:{status:"valid",value:d},value:p._parse(new ya(i,h,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof nl){const d=this._def.unknownKeys;if(d==="passthrough")for(const p of a)u.push({key:{status:"valid",value:p},value:{status:"valid",value:i.data[p]}});else if(d==="strict")a.length>0&&(Rt(i,{code:yt.unrecognized_keys,keys:a}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const p of a){const h=i.data[p];u.push({key:{status:"valid",value:p},value:d._parse(new ya(i,h,i.path,p)),alwaysSet:p in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const p of u){const h=await p.key,y=await p.value;d.push({key:h,value:y,alwaysSet:p.alwaysSet})}return d}).then(d=>Li.mergeObjectSync(r,d)):Li.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Qt.errToObj,new Or({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const u=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Qt.errToObj(e).message)!==null&&a!==void 0?a:u}:{message:u}}}:{}})}strip(){return new Or({...this._def,unknownKeys:"strip"})}passthrough(){return new Or({...this._def,unknownKeys:"passthrough"})}extend(e){return new Or({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Or({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:dn.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Or({...this._def,catchall:e})}pick(e){const n={};return Pn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Or({...this._def,shape:()=>n})}omit(e){const n={};return Pn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Or({...this._def,shape:()=>n})}deepPartial(){return Sd(this)}partial(e){const n={};return Pn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Or({...this._def,shape:()=>n})}required(e){const n={};return Pn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof ua;)s=s._def.innerType;n[r]=s}}),new Or({...this._def,shape:()=>n})}keyof(){return jD(Pn.objectKeys(this.shape))}}Or.create=(t,e)=>new Or({shape:()=>t,unknownKeys:"strip",catchall:nl.create(),typeName:dn.ZodObject,...kn(e)});Or.strictCreate=(t,e)=>new Or({shape:()=>t,unknownKeys:"strict",catchall:nl.create(),typeName:dn.ZodObject,...kn(e)});Or.lazycreate=(t,e)=>new Or({shape:t,unknownKeys:"strip",catchall:nl.create(),typeName:dn.ZodObject,...kn(e)});class Bh extends Rn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new $s(a.ctx.common.issues));return Rt(n,{code:yt.invalid_union,unionErrors:o}),fn}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const u of r){const d={...n,common:{...n.common,issues:[]},parent:null},p=u._parseSync({data:n.data,path:n.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(u=>new $s(u));return Rt(n,{code:yt.invalid_union,unionErrors:a}),fn}}get options(){return this._def.options}}Bh.create=(t,e)=>new Bh({options:t,typeName:dn.ZodUnion,...kn(e)});const za=t=>t instanceof Uh?za(t.schema):t instanceof Vo?za(t.innerType()):t instanceof Vh?[t.value]:t instanceof uu?t.options:t instanceof Hh?Pn.objectValues(t.enum):t instanceof Gh?za(t._def.innerType):t instanceof Mh?[void 0]:t instanceof $h?[null]:t instanceof ua?[void 0,...za(t.unwrap())]:t instanceof cu?[null,...za(t.unwrap())]:t instanceof kN||t instanceof Qh?za(t.unwrap()):t instanceof Kh?za(t._def.innerType):[];class ix extends Rn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Lt.object)return Rt(n,{code:yt.invalid_type,expected:Lt.object,received:n.parsedType}),fn;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(Rt(n,{code:yt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),fn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=za(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new ix({typeName:dn.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...kn(r)})}}function nI(t,e){const n=Va(t),r=Va(e);if(t===e)return{valid:!0,data:t};if(n===Lt.object&&r===Lt.object){const i=Pn.objectKeys(e),s=Pn.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const u=nI(t[a],e[a]);if(!u.valid)return{valid:!1};o[a]=u.data}return{valid:!0,data:o}}else if(n===Lt.array&&r===Lt.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],u=nI(o,a);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===Lt.date&&r===Lt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class zh extends Rn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(eI(s)||eI(o))return fn;const a=nI(s.value,o.value);return a.valid?((tI(s)||tI(o))&&n.dirty(),{status:n.value,value:a.data}):(Rt(r,{code:yt.invalid_intersection_types}),fn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}zh.create=(t,e,n)=>new zh({left:t,right:e,typeName:dn.ZodIntersection,...kn(n)});class ba extends Rn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Lt.array)return Rt(r,{code:yt.invalid_type,expected:Lt.array,received:r.parsedType}),fn;if(r.data.length<this._def.items.length)return Rt(r,{code:yt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),fn;!this._def.rest&&r.data.length>this._def.items.length&&(Rt(r,{code:yt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const u=this._def.items[a]||this._def.rest;return u?u._parse(new ya(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Li.mergeArray(n,o)):Li.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ba({...this._def,rest:e})}}ba.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ba({items:t,typeName:dn.ZodTuple,rest:null,...kn(e)})};class Wh extends Rn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Lt.object)return Rt(r,{code:yt.invalid_type,expected:Lt.object,received:r.parsedType}),fn;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new ya(r,a,r.path,a)),value:o._parse(new ya(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Li.mergeObjectAsync(n,i):Li.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Rn?new Wh({keyType:e,valueType:n,typeName:dn.ZodRecord,...kn(r)}):new Wh({keyType:$o.create(),valueType:e,typeName:dn.ZodRecord,...kn(n)})}}class Zb extends Rn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Lt.map)return Rt(r,{code:yt.invalid_type,expected:Lt.map,received:r.parsedType}),fn;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,u],d)=>({key:i._parse(new ya(r,a,r.path,[d,"key"])),value:s._parse(new ya(r,u,r.path,[d,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,p=await u.value;if(d.status==="aborted"||p.status==="aborted")return fn;(d.status==="dirty"||p.status==="dirty")&&n.dirty(),a.set(d.value,p.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const u of o){const d=u.key,p=u.value;if(d.status==="aborted"||p.status==="aborted")return fn;(d.status==="dirty"||p.status==="dirty")&&n.dirty(),a.set(d.value,p.value)}return{status:n.value,value:a}}}}Zb.create=(t,e,n)=>new Zb({valueType:e,keyType:t,typeName:dn.ZodMap,...kn(n)});class bc extends Rn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Lt.set)return Rt(r,{code:yt.invalid_type,expected:Lt.set,received:r.parsedType}),fn;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Rt(r,{code:yt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Rt(r,{code:yt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(u){const d=new Set;for(const p of u){if(p.status==="aborted")return fn;p.status==="dirty"&&n.dirty(),d.add(p.value)}return{status:n.value,value:d}}const a=[...r.data.values()].map((u,d)=>s._parse(new ya(r,u,r.path,d)));return r.common.async?Promise.all(a).then(u=>o(u)):o(a)}min(e,n){return new bc({...this._def,minSize:{value:e,message:Qt.toString(n)}})}max(e,n){return new bc({...this._def,maxSize:{value:e,message:Qt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}bc.create=(t,e)=>new bc({valueType:t,minSize:null,maxSize:null,typeName:dn.ZodSet,...kn(e)});class Hd extends Rn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Lt.function)return Rt(n,{code:yt.invalid_type,expected:Lt.function,received:n.parsedType}),fn;function r(a,u){return Gb({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Hb(),nf].filter(d=>!!d),issueData:{code:yt.invalid_arguments,argumentsError:u}})}function i(a,u){return Gb({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Hb(),nf].filter(d=>!!d),issueData:{code:yt.invalid_return_type,returnTypeError:u}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof sf){const a=this;return ts(async function(...u){const d=new $s([]),p=await a._def.args.parseAsync(u,s).catch(x=>{throw d.addIssue(r(u,x)),d}),h=await Reflect.apply(o,this,p);return await a._def.returns._def.type.parseAsync(h,s).catch(x=>{throw d.addIssue(i(h,x)),d})})}else{const a=this;return ts(function(...u){const d=a._def.args.safeParse(u,s);if(!d.success)throw new $s([r(u,d.error)]);const p=Reflect.apply(o,this,d.data),h=a._def.returns.safeParse(p,s);if(!h.success)throw new $s([i(p,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Hd({...this._def,args:ba.create(e).rest(uc.create())})}returns(e){return new Hd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Hd({args:e||ba.create([]).rest(uc.create()),returns:n||uc.create(),typeName:dn.ZodFunction,...kn(r)})}}class Uh extends Rn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Uh.create=(t,e)=>new Uh({getter:t,typeName:dn.ZodLazy,...kn(e)});class Vh extends Rn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Rt(n,{received:n.data,code:yt.invalid_literal,expected:this._def.value}),fn}return{status:"valid",value:e.data}}get value(){return this._def.value}}Vh.create=(t,e)=>new Vh({value:t,typeName:dn.ZodLiteral,...kn(e)});function jD(t,e){return new uu({values:t,typeName:dn.ZodEnum,...kn(e)})}class uu extends Rn{constructor(){super(...arguments),Qp.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Rt(n,{expected:Pn.joinValues(r),received:n.parsedType,code:yt.invalid_type}),fn}if(Kb(this,Qp)||kD(this,Qp,new Set(this._def.values)),!Kb(this,Qp).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Rt(n,{received:n.data,code:yt.invalid_enum_value,options:r}),fn}return ts(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return uu.create(e,{...this._def,...n})}exclude(e,n=this._def){return uu.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Qp=new WeakMap;uu.create=jD;class Hh extends Rn{constructor(){super(...arguments),Jp.set(this,void 0)}_parse(e){const n=Pn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Lt.string&&r.parsedType!==Lt.number){const i=Pn.objectValues(n);return Rt(r,{expected:Pn.joinValues(i),received:r.parsedType,code:yt.invalid_type}),fn}if(Kb(this,Jp)||kD(this,Jp,new Set(Pn.getValidEnumValues(this._def.values))),!Kb(this,Jp).has(e.data)){const i=Pn.objectValues(n);return Rt(r,{received:r.data,code:yt.invalid_enum_value,options:i}),fn}return ts(e.data)}get enum(){return this._def.values}}Jp=new WeakMap;Hh.create=(t,e)=>new Hh({values:t,typeName:dn.ZodNativeEnum,...kn(e)});class sf extends Rn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Lt.promise&&n.common.async===!1)return Rt(n,{code:yt.invalid_type,expected:Lt.promise,received:n.parsedType}),fn;const r=n.parsedType===Lt.promise?n.data:Promise.resolve(n.data);return ts(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}sf.create=(t,e)=>new sf({type:t,typeName:dn.ZodPromise,...kn(e)});class Vo extends Rn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===dn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Rt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return fn;const u=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return u.status==="aborted"?fn:u.status==="dirty"||n.value==="dirty"?kd(u.value):u});{if(n.value==="aborted")return fn;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?fn:a.status==="dirty"||n.value==="dirty"?kd(a.value):a}}if(i.type==="refinement"){const o=a=>{const u=i.refinement(a,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?fn:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?fn:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!gc(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>gc(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);Pn.assertNever(i)}}Vo.create=(t,e,n)=>new Vo({schema:t,typeName:dn.ZodEffects,effect:e,...kn(n)});Vo.createWithPreprocess=(t,e,n)=>new Vo({schema:e,effect:{type:"preprocess",transform:t},typeName:dn.ZodEffects,...kn(n)});class ua extends Rn{_parse(e){return this._getType(e)===Lt.undefined?ts(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ua.create=(t,e)=>new ua({innerType:t,typeName:dn.ZodOptional,...kn(e)});class cu extends Rn{_parse(e){return this._getType(e)===Lt.null?ts(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}cu.create=(t,e)=>new cu({innerType:t,typeName:dn.ZodNullable,...kn(e)});class Gh extends Rn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Lt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Gh.create=(t,e)=>new Gh({innerType:t,typeName:dn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...kn(e)});class Kh extends Rn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Dh(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new $s(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new $s(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Kh.create=(t,e)=>new Kh({innerType:t,typeName:dn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...kn(e)});class Yb extends Rn{_parse(e){if(this._getType(e)!==Lt.nan){const r=this._getOrReturnCtx(e);return Rt(r,{code:yt.invalid_type,expected:Lt.nan,received:r.parsedType}),fn}return{status:"valid",value:e.data}}}Yb.create=t=>new Yb({typeName:dn.ZodNaN,...kn(t)});const bK=Symbol("zod_brand");class kN extends Rn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Tm extends Rn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?fn:s.status==="dirty"?(n.dirty(),kd(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?fn:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Tm({in:e,out:n,typeName:dn.ZodPipeline})}}class Qh extends Rn{_parse(e){const n=this._def.innerType._parse(e),r=i=>(gc(i)&&(i.value=Object.freeze(i.value)),i);return Dh(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Qh.create=(t,e)=>new Qh({innerType:t,typeName:dn.ZodReadonly,...kn(e)});function OD(t,e={},n){return t?rf.create().superRefine((r,i)=>{var s,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,d=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...d,fatal:u})}}):rf.create()}const vK={object:Or.lazycreate};var dn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(dn||(dn={}));const xK=(t,e={message:`Input not instance of ${t.name}`})=>OD(n=>n instanceof t,e),qD=$o.create,AD=au.create,wK=Yb.create,_K=lu.create,PD=Lh.create,SK=yc.create,EK=Qb.create,IK=Mh.create,NK=$h.create,kK=rf.create,CK=uc.create,TK=nl.create,RK=Jb.create,jK=zo.create,OK=Or.create,qK=Or.strictCreate,AK=Bh.create,PK=ix.create,FK=zh.create,DK=ba.create,LK=Wh.create,MK=Zb.create,$K=bc.create,BK=Hd.create,zK=Uh.create,WK=Vh.create,UK=uu.create,VK=Hh.create,HK=sf.create,Rj=Vo.create,GK=ua.create,KK=cu.create,QK=Vo.createWithPreprocess,JK=Tm.create,ZK=()=>qD().optional(),YK=()=>AD().optional(),XK=()=>PD().optional(),e9={string:t=>$o.create({...t,coerce:!0}),number:t=>au.create({...t,coerce:!0}),boolean:t=>Lh.create({...t,coerce:!0}),bigint:t=>lu.create({...t,coerce:!0}),date:t=>yc.create({...t,coerce:!0})},t9=fn;var M=Object.freeze({__proto__:null,defaultErrorMap:nf,setErrorMap:QG,getErrorMap:Hb,makeIssue:Gb,EMPTY_PATH:JG,addIssueToContext:Rt,ParseStatus:Li,INVALID:fn,DIRTY:kd,OK:ts,isAborted:eI,isDirty:tI,isValid:gc,isAsync:Dh,get util(){return Pn},get objectUtil(){return XE},ZodParsedType:Lt,getParsedType:Va,ZodType:Rn,datetimeRegex:RD,ZodString:$o,ZodNumber:au,ZodBigInt:lu,ZodBoolean:Lh,ZodDate:yc,ZodSymbol:Qb,ZodUndefined:Mh,ZodNull:$h,ZodAny:rf,ZodUnknown:uc,ZodNever:nl,ZodVoid:Jb,ZodArray:zo,ZodObject:Or,ZodUnion:Bh,ZodDiscriminatedUnion:ix,ZodIntersection:zh,ZodTuple:ba,ZodRecord:Wh,ZodMap:Zb,ZodSet:bc,ZodFunction:Hd,ZodLazy:Uh,ZodLiteral:Vh,ZodEnum:uu,ZodNativeEnum:Hh,ZodPromise:sf,ZodEffects:Vo,ZodTransformer:Vo,ZodOptional:ua,ZodNullable:cu,ZodDefault:Gh,ZodCatch:Kh,ZodNaN:Yb,BRAND:bK,ZodBranded:kN,ZodPipeline:Tm,ZodReadonly:Qh,custom:OD,Schema:Rn,ZodSchema:Rn,late:vK,get ZodFirstPartyTypeKind(){return dn},coerce:e9,any:kK,array:jK,bigint:_K,boolean:PD,date:SK,discriminatedUnion:PK,effect:Rj,enum:UK,function:BK,instanceof:xK,intersection:FK,lazy:zK,literal:WK,map:MK,nan:wK,nativeEnum:VK,never:TK,null:NK,nullable:KK,number:AD,object:OK,oboolean:XK,onumber:YK,optional:GK,ostring:ZK,pipeline:JK,preprocess:QK,promise:HK,record:LK,set:$K,strictObject:qK,string:qD,symbol:EK,transformer:Rj,tuple:DK,undefined:IK,union:AK,unknown:CK,void:RK,NEVER:t9,ZodIssueCode:yt,quotelessJson:KG,ZodError:$s});const n9=M.object({page:M.number().gte(0,"Page must be greater than zero"),size:M.number().gte(1,"Page size must be greater than one to get any data")}),Bi=M.object({id:M.string().min(1)}),CN=M.object({message:M.string()}),zi=M.object({id:M.string().optional(),idIn:M.array(M.string()).optional(),fulltext:M.string().optional()}),r9=M.enum(["asc","desc"]),Fi=()=>M.union([M.boolean(),M.number().int().refine(t=>t===0||t===1).transform(t=>typeof t=="boolean"?t:t===1)]),Ho=()=>M.union([M.number(),M.string().transform(t=>parseFloat(t)).refine(t=>!isNaN(t))]),Po=()=>M.union([M.number().int(),M.string().transform(t=>parseInt(t,10)).refine(t=>!isNaN(t))]),wi=t=>M.string().transform(e=>JSON.parse(e)).refine(e=>Array.isArray(e)).transform(e=>M.array(t).parse(e)),i9=t=>M.string().transform(e=>JSON.parse(e)).transform(e=>t.parse(e)),rI=new Proxy(()=>rI,{get:()=>rI}),Wi=({entity:t,shape:e,filter:n,sort:r})=>{const i=rI();return{entity:t,"~entity":i,"~entity-array":[],"~entity-partial-exclude-id":i,shape:e,"~shape":i,"~shape-partial":i,filter:n,"~filter":i,sort:M.array(M.object({name:M.enum(r),sort:r9})),"~sort":i,"~sort-keyof":i}},ql=(t,e)=>Array.from({length:e-t+1},(n,r)=>r+t),s9=({page:t,total:e,siblings:n=1,boundaries:r=1})=>{const i=Math.max(Math.trunc(e),0);if(n*2+3+r*2>=i)return{type:"simple",page:t,total:e,pages:ql(1,i),start:[],end:[]};const o=Math.max(t-n,r),a=Math.min(t+n,i-r),u=o>r+2,d=a<i-(r+1);return!u&&d?{type:"end",page:t,total:e,start:[],pages:ql(1,n*2+r+2),end:ql(e-(r-1),i)}:u&&!d?{type:"start",page:t,total:e,start:ql(1,r),pages:ql(e-(r+1+2*n),i),end:[]}:{type:"both",page:t,total:e,start:ql(1,r),pages:ql(o,a),end:ql(i-r+1,i)}};var dd={},La={},or={},Al={},jj;function FD(){if(jj)return Al;jj=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.anumber=t,Al.abytes=n,Al.ahash=r,Al.aexists=i,Al.aoutput=s;function t(o){if(!Number.isSafeInteger(o)||o<0)throw new Error("positive integer expected, got "+o)}function e(o){return o instanceof Uint8Array||ArrayBuffer.isView(o)&&o.constructor.name==="Uint8Array"}function n(o,...a){if(!e(o))throw new Error("Uint8Array expected");if(a.length>0&&!a.includes(o.length))throw new Error("Uint8Array expected of length "+a+", got length="+o.length)}function r(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(o.outputLen),t(o.blockLen)}function i(o,a=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(a&&o.finished)throw new Error("Hash#digest() has already been called")}function s(o,a){n(o);const u=a.outputLen;if(o.length<u)throw new Error("digestInto() expects output buffer of length at least "+u)}return Al}var xn={},Oj;function o9(){if(Oj)return xn;Oj=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.add5L=xn.add5H=xn.add4H=xn.add4L=xn.add3H=xn.add3L=xn.rotlBL=xn.rotlBH=xn.rotlSL=xn.rotlSH=xn.rotr32L=xn.rotr32H=xn.rotrBL=xn.rotrBH=xn.rotrSL=xn.rotrSH=xn.shrSL=xn.shrSH=xn.toBig=void 0,xn.fromBig=n,xn.split=r,xn.add=C;const t=BigInt(2**32-1),e=BigInt(32);function n(q,B=!1){return B?{h:Number(q&t),l:Number(q>>e&t)}:{h:Number(q>>e&t)|0,l:Number(q&t)|0}}function r(q,B=!1){let L=new Uint32Array(q.length),U=new Uint32Array(q.length);for(let V=0;V<q.length;V++){const{h:z,l:X}=n(q[V],B);[L[V],U[V]]=[z,X]}return[L,U]}const i=(q,B)=>BigInt(q>>>0)<<e|BigInt(B>>>0);xn.toBig=i;const s=(q,B,L)=>q>>>L;xn.shrSH=s;const o=(q,B,L)=>q<<32-L|B>>>L;xn.shrSL=o;const a=(q,B,L)=>q>>>L|B<<32-L;xn.rotrSH=a;const u=(q,B,L)=>q<<32-L|B>>>L;xn.rotrSL=u;const d=(q,B,L)=>q<<64-L|B>>>L-32;xn.rotrBH=d;const p=(q,B,L)=>q>>>L-32|B<<64-L;xn.rotrBL=p;const h=(q,B)=>B;xn.rotr32H=h;const y=(q,B)=>q;xn.rotr32L=y;const x=(q,B,L)=>q<<L|B>>>32-L;xn.rotlSH=x;const _=(q,B,L)=>B<<L|q>>>32-L;xn.rotlSL=_;const S=(q,B,L)=>B<<L-32|q>>>64-L;xn.rotlBH=S;const I=(q,B,L)=>q<<L-32|B>>>64-L;xn.rotlBL=I;function C(q,B,L,U){const V=(B>>>0)+(U>>>0);return{h:q+L+(V/2**32|0)|0,l:V|0}}const k=(q,B,L)=>(q>>>0)+(B>>>0)+(L>>>0);xn.add3L=k;const R=(q,B,L,U)=>B+L+U+(q/2**32|0)|0;xn.add3H=R;const j=(q,B,L,U)=>(q>>>0)+(B>>>0)+(L>>>0)+(U>>>0);xn.add4L=j;const A=(q,B,L,U,V)=>B+L+U+V+(q/2**32|0)|0;xn.add4H=A;const F=(q,B,L,U,V)=>(q>>>0)+(B>>>0)+(L>>>0)+(U>>>0)+(V>>>0);xn.add5L=F;const $=(q,B,L,U,V,z)=>B+L+U+V+z+(q/2**32|0)|0;xn.add5H=$;const P={fromBig:n,split:r,toBig:i,shrSH:s,shrSL:o,rotrSH:a,rotrSL:u,rotrBH:d,rotrBL:p,rotr32H:h,rotr32L:y,rotlSH:x,rotlSL:_,rotlBH:S,rotlBL:I,add:C,add3L:k,add3H:R,add4L:j,add4H:A,add5H:$,add5L:F};return xn.default=P,xn}var R0={},qp={},qj;function a9(){return qj||(qj=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.crypto=void 0,qp.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),qp}var Aj;function l9(){return Aj||(Aj=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=r,t.u8=i,t.u32=s,t.createView=o,t.rotr=a,t.rotl=u,t.byteSwap=d,t.byteSwap32=p,t.bytesToHex=y,t.hexToBytes=S,t.asyncLoop=C,t.utf8ToBytes=k,t.toBytes=R,t.concatBytes=j,t.checkOpts=F,t.wrapConstructor=$,t.wrapConstructorWithOpts=P,t.wrapXOFConstructorWithOpts=q,t.randomBytes=B;const e=a9(),n=FD();function r(L){return L instanceof Uint8Array||ArrayBuffer.isView(L)&&L.constructor.name==="Uint8Array"}function i(L){return new Uint8Array(L.buffer,L.byteOffset,L.byteLength)}function s(L){return new Uint32Array(L.buffer,L.byteOffset,Math.floor(L.byteLength/4))}function o(L){return new DataView(L.buffer,L.byteOffset,L.byteLength)}function a(L,U){return L<<32-U|L>>>U}function u(L,U){return L<<U|L>>>32-U>>>0}t.isLE=new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]===68;function d(L){return L<<24&0xff000000|L<<8&0xff0000|L>>>8&65280|L>>>24&255}t.byteSwapIfBE=t.isLE?L=>L:L=>d(L);function p(L){for(let U=0;U<L.length;U++)L[U]=d(L[U])}const h=Array.from({length:256},(L,U)=>U.toString(16).padStart(2,"0"));function y(L){(0,n.abytes)(L);let U="";for(let V=0;V<L.length;V++)U+=h[L[V]];return U}const x={_0:48,_9:57,A:65,F:70,a:97,f:102};function _(L){if(L>=x._0&&L<=x._9)return L-x._0;if(L>=x.A&&L<=x.F)return L-(x.A-10);if(L>=x.a&&L<=x.f)return L-(x.a-10)}function S(L){if(typeof L!="string")throw new Error("hex string expected, got "+typeof L);const U=L.length,V=U/2;if(U%2)throw new Error("hex string expected, got unpadded hex of length "+U);const z=new Uint8Array(V);for(let X=0,J=0;X<V;X++,J+=2){const le=_(L.charCodeAt(J)),ie=_(L.charCodeAt(J+1));if(le===void 0||ie===void 0){const ne=L[J]+L[J+1];throw new Error('hex string expected, got non-hex character "'+ne+'" at index '+J)}z[X]=le*16+ie}return z}const I=async()=>{};t.nextTick=I;async function C(L,U,V){let z=Date.now();for(let X=0;X<L;X++){V(X);const J=Date.now()-z;J>=0&&J<U||(await (0,t.nextTick)(),z+=J)}}function k(L){if(typeof L!="string")throw new Error("utf8ToBytes expected string, got "+typeof L);return new Uint8Array(new TextEncoder().encode(L))}function R(L){return typeof L=="string"&&(L=k(L)),(0,n.abytes)(L),L}function j(...L){let U=0;for(let z=0;z<L.length;z++){const X=L[z];(0,n.abytes)(X),U+=X.length}const V=new Uint8Array(U);for(let z=0,X=0;z<L.length;z++){const J=L[z];V.set(J,X),X+=J.length}return V}class A{clone(){return this._cloneInto()}}t.Hash=A;function F(L,U){if(U!==void 0&&{}.toString.call(U)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(L,U)}function $(L){const U=z=>L().update(R(z)).digest(),V=L();return U.outputLen=V.outputLen,U.blockLen=V.blockLen,U.create=()=>L(),U}function P(L){const U=(z,X)=>L(X).update(R(z)).digest(),V=L({});return U.outputLen=V.outputLen,U.blockLen=V.blockLen,U.create=z=>L(z),U}function q(L){const U=(z,X)=>L(X).update(R(z)).digest(),V=L({});return U.outputLen=V.outputLen,U.blockLen=V.blockLen,U.create=z=>L(z),U}function B(L=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(L));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(L);throw new Error("crypto.getRandomValues must be defined")}}(R0)),R0}var Pj;function u9(){if(Pj)return or;Pj=1,Object.defineProperty(or,"__esModule",{value:!0}),or.shake256=or.shake128=or.keccak_512=or.keccak_384=or.keccak_256=or.keccak_224=or.sha3_512=or.sha3_384=or.sha3_256=or.sha3_224=or.Keccak=void 0,or.keccakP=I;const t=FD(),e=o9(),n=l9(),r=[],i=[],s=[],o=BigInt(0),a=BigInt(1),u=BigInt(2),d=BigInt(7),p=BigInt(256),h=BigInt(113);for(let j=0,A=a,F=1,$=0;j<24;j++){[F,$]=[$,(2*F+3*$)%5],r.push(2*(5*$+F)),i.push((j+1)*(j+2)/2%64);let P=o;for(let q=0;q<7;q++)A=(A<<a^(A>>d)*h)%p,A&u&&(P^=a<<(a<<BigInt(q))-a);s.push(P)}const[y,x]=(0,e.split)(s,!0),_=(j,A,F)=>F>32?(0,e.rotlBH)(j,A,F):(0,e.rotlSH)(j,A,F),S=(j,A,F)=>F>32?(0,e.rotlBL)(j,A,F):(0,e.rotlSL)(j,A,F);function I(j,A=24){const F=new Uint32Array(10);for(let $=24-A;$<24;$++){for(let B=0;B<10;B++)F[B]=j[B]^j[B+10]^j[B+20]^j[B+30]^j[B+40];for(let B=0;B<10;B+=2){const L=(B+8)%10,U=(B+2)%10,V=F[U],z=F[U+1],X=_(V,z,1)^F[L],J=S(V,z,1)^F[L+1];for(let le=0;le<50;le+=10)j[B+le]^=X,j[B+le+1]^=J}let P=j[2],q=j[3];for(let B=0;B<24;B++){const L=i[B],U=_(P,q,L),V=S(P,q,L),z=r[B];P=j[z],q=j[z+1],j[z]=U,j[z+1]=V}for(let B=0;B<50;B+=10){for(let L=0;L<10;L++)F[L]=j[B+L];for(let L=0;L<10;L++)j[B+L]^=~F[(L+2)%10]&F[(L+4)%10]}j[0]^=y[$],j[1]^=x[$]}F.fill(0)}class C extends n.Hash{constructor(A,F,$,P=!1,q=24){if(super(),this.blockLen=A,this.suffix=F,this.outputLen=$,this.enableXOF=P,this.rounds=q,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,t.anumber)($),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,n.u32)(this.state)}keccak(){n.isLE||(0,n.byteSwap32)(this.state32),I(this.state32,this.rounds),n.isLE||(0,n.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(A){(0,t.aexists)(this);const{blockLen:F,state:$}=this;A=(0,n.toBytes)(A);const P=A.length;for(let q=0;q<P;){const B=Math.min(F-this.pos,P-q);for(let L=0;L<B;L++)$[this.pos++]^=A[q++];this.pos===F&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:A,suffix:F,pos:$,blockLen:P}=this;A[$]^=F,F&128&&$===P-1&&this.keccak(),A[P-1]^=128,this.keccak()}writeInto(A){(0,t.aexists)(this,!1),(0,t.abytes)(A),this.finish();const F=this.state,{blockLen:$}=this;for(let P=0,q=A.length;P<q;){this.posOut>=$&&this.keccak();const B=Math.min($-this.posOut,q-P);A.set(F.subarray(this.posOut,this.posOut+B),P),this.posOut+=B,P+=B}return A}xofInto(A){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(A)}xof(A){return(0,t.anumber)(A),this.xofInto(new Uint8Array(A))}digestInto(A){if((0,t.aoutput)(A,this),this.finished)throw new Error("digest() was already called");return this.writeInto(A),this.destroy(),A}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(A){const{blockLen:F,suffix:$,outputLen:P,rounds:q,enableXOF:B}=this;return A||(A=new C(F,$,P,B,q)),A.state32.set(this.state32),A.pos=this.pos,A.posOut=this.posOut,A.finished=this.finished,A.rounds=q,A.suffix=$,A.outputLen=P,A.enableXOF=B,A.destroyed=this.destroyed,A}}or.Keccak=C;const k=(j,A,F)=>(0,n.wrapConstructor)(()=>new C(A,j,F));or.sha3_224=k(6,144,224/8),or.sha3_256=k(6,136,256/8),or.sha3_384=k(6,104,384/8),or.sha3_512=k(6,72,512/8),or.keccak_224=k(1,144,224/8),or.keccak_256=k(1,136,256/8),or.keccak_384=k(1,104,384/8),or.keccak_512=k(1,72,512/8);const R=(j,A,F)=>(0,n.wrapXOFConstructorWithOpts)(($={})=>new C(A,j,$.dkLen===void 0?F:$.dkLen,!0));return or.shake128=R(31,168,128/8),or.shake256=R(31,136,256/8),or}var Fj;function c9(){if(Fj)return La;Fj=1;const{sha3_512:t}=u9(),e=24,n=32,r=(_=4,S=Math.random)=>{let I="";for(;I.length<_;)I=I+Math.floor(S()*36).toString(36);return I};function i(_){let S=8n,I=0n;for(const C of _.values()){const k=BigInt(C);I=(I<<S)+k}return I}const s=(_="")=>i(t(_)).toString(36).slice(1),o=Array.from({length:26},(_,S)=>String.fromCharCode(S+97)),a=_=>o[Math.floor(_()*o.length)],u=({globalObj:_=typeof Yu<"u"?Yu:typeof window<"u"?window:{},random:S=Math.random}={})=>{const I=Object.keys(_).toString(),C=I.length?I+r(n,S):r(n,S);return s(C).substring(0,n)},d=_=>()=>_++,p=0x1c6b1f1f,h=({random:_=Math.random,counter:S=d(Math.floor(_()*p)),length:I=e,fingerprint:C=u({random:_})}={})=>function(){const R=a(_),j=Date.now().toString(36),A=S().toString(36),F=r(I,_),$=`${j+F+A+C}`;return`${R+s($).substring(1,I)}`},y=h(),x=(_,{minLength:S=2,maxLength:I=n}={})=>{const C=_.length,k=/^[0-9a-z]+$/;try{if(typeof _=="string"&&C>=S&&C<=I&&k.test(_))return!0}finally{}return!1};return La.getConstants=()=>({defaultLength:e,bigLength:n}),La.init=h,La.createId=y,La.bufToBigInt=i,La.createCounter=d,La.createFingerprint=u,La.isCuid=x,La}var Dj;function d9(){if(Dj)return dd;Dj=1;const{createId:t,init:e,getConstants:n,isCuid:r}=c9();return dd.createId=t,dd.init=e,dd.getConstants=n,dd.isCuid=r,dd}var f9=d9();const Sn=f9.createId;var j0,Lj;function p9(){if(Lj)return j0;Lj=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(k){k!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(R){try{var j=t.call(R);return i.test(j)}catch{return!1}},o=function(R){try{return s(R)?!1:(t.call(R),!0)}catch{return!1}},a=Object.prototype.toString,u="[object Object]",d="[object Function]",p="[object GeneratorFunction]",h="[object HTMLAllCollection]",y="[object HTML document.all class]",x="[object HTMLCollection]",_=typeof Symbol=="function"&&!!Symbol.toStringTag,S=!(0 in[,]),I=function(){return!1};if(typeof document=="object"){var C=document.all;a.call(C)===a.call(document.all)&&(I=function(R){if((S||!R)&&(typeof R>"u"||typeof R=="object"))try{var j=a.call(R);return(j===h||j===y||j===x||j===u)&&R("")==null}catch{}return!1})}return j0=e?function(R){if(I(R))return!0;if(!R||typeof R!="function"&&typeof R!="object")return!1;try{e(R,null,n)}catch(j){if(j!==r)return!1}return!s(R)&&o(R)}:function(R){if(I(R))return!0;if(!R||typeof R!="function"&&typeof R!="object")return!1;if(_)return o(R);if(s(R))return!1;var j=a.call(R);return j!==d&&j!==p&&!/^\[object HTML/.test(j)?!1:o(R)},j0}var h9=p9();const m9=vo(h9),g9=t=>m9(t);var Yy={exports:{}},y9=Yy.exports,Mj;function b9(){return Mj||(Mj=1,function(t){(function(e,n){t.exports=n()})(y9,function(){var e=Object.prototype.toString;function n(h,y){return h==null?!1:Object.prototype.hasOwnProperty.call(h,y)}function r(h){if(!h||o(h)&&h.length===0)return!0;if(typeof h!="string"){for(var y in h)if(n(h,y))return!1;return!0}return!1}function i(h){return e.call(h)}function s(h){return typeof h=="object"&&i(h)==="[object Object]"}var o=Array.isArray||function(h){return e.call(h)==="[object Array]"};function a(h){return typeof h=="boolean"||i(h)==="[object Boolean]"}function u(h){var y=parseInt(h);return y.toString()===h?y:h}function d(h){h=h||{};var y=function(C){return Object.keys(y).reduce(function(k,R){return R==="create"||typeof y[R]=="function"&&(k[R]=y[R].bind(y,C)),k},{})},x;h.includeInheritedProps?x=function(){return!0}:x=function(C,k){return typeof k=="number"&&Array.isArray(C)||n(C,k)};function _(C,k){if(x(C,k))return C[k]}var S;h.includeInheritedProps?S=function(C,k){typeof k!="string"&&typeof k!="number"&&(k=String(k));var R=_(C,k);if(k==="__proto__"||k==="prototype"||k==="constructor"&&typeof R=="function")throw new Error("For security reasons, object's magic properties cannot be set");return R}:S=function(C,k){return _(C,k)};function I(C,k,R,j){if(typeof k=="number"&&(k=[k]),!k||k.length===0)return C;if(typeof k=="string")return I(C,k.split(".").map(u),R,j);var A=k[0],F=S(C,A);return k.length===1?((F===void 0||!j)&&(C[A]=R),F):(F===void 0&&(typeof k[1]=="number"?C[A]=[]:C[A]={}),I(C[A],k.slice(1),R,j))}return y.has=function(C,k){if(typeof k=="number"?k=[k]:typeof k=="string"&&(k=k.split(".")),!k||k.length===0)return!!C;for(var R=0;R<k.length;R++){var j=u(k[R]);if(typeof j=="number"&&o(C)&&j<C.length||(h.includeInheritedProps?j in Object(C):n(C,j)))C=C[j];else return!1}return!0},y.ensureExists=function(C,k,R){return I(C,k,R,!0)},y.set=function(C,k,R,j){return I(C,k,R,j)},y.insert=function(C,k,R,j){var A=y.get(C,k);j=~~j,o(A)||(A=[],y.set(C,k,A)),A.splice(j,0,R)},y.empty=function(C,k){if(!r(k)&&C!=null){var R,j;if(R=y.get(C,k)){if(typeof R=="string")return y.set(C,k,"");if(a(R))return y.set(C,k,!1);if(typeof R=="number")return y.set(C,k,0);if(o(R))R.length=0;else if(s(R))for(j in R)x(R,j)&&delete R[j];else return y.set(C,k,null)}}},y.push=function(C,k){var R=y.get(C,k);o(R)||(R=[],y.set(C,k,R)),R.push.apply(R,Array.prototype.slice.call(arguments,2))},y.coalesce=function(C,k,R){for(var j,A=0,F=k.length;A<F;A++)if((j=y.get(C,k[A]))!==void 0)return j;return R},y.get=function(C,k,R){if(typeof k=="number"&&(k=[k]),!k||k.length===0)return C;if(C==null)return R;if(typeof k=="string")return y.get(C,k.split("."),R);var j=u(k[0]),A=S(C,j);return A===void 0?R:k.length===1?A:y.get(C[j],k.slice(1),R)},y.del=function(k,R){if(typeof R=="number"&&(R=[R]),k==null||r(R))return k;if(typeof R=="string")return y.del(k,R.split("."));var j=u(R[0]);if(S(k,j),!x(k,j))return k;if(R.length===1)o(k)?k.splice(j,1):delete k[j];else return y.del(k[j],R.slice(1));return k},y}var p=d();return p.create=d,p.withInheritedProps=d({includeInheritedProps:!0}),p})}(Yy)),Yy.exports}var v9=b9();const $j=vo(v9);function pn({number:t,empty:e="-",fraction:n=2}){if(t==null)return e;try{return t.toLocaleString(void 0,{maximumFractionDigits:n})}catch(r){return console.error("toHumanNumber",t,r),t.toFixed(2)}}const TN=({error:t,errors:e,onError:n})=>{const r=e.some(s=>s),i=t instanceof Error;return!r&&i&&n(t),r||i},DD=En({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-0.5","hover:bg-slate-100","text-slate-500","hover:text-blue-500","cursor-pointer"]},variant:{variant:{common:[],warning:["text-amber-500","hover:text-amber-600","hover:bg-amber-100"],danger:["text-red-500","hover:text-red-600","hover:bg-red-100"]},disabled:{true:["cursor-not-allowed","text-slate-300","bg-slate-100","hover:bg-slate-100"]}},defaults:{variant:"common",disabled:!1}}),x9=En({use:DD,slot:{},variant:{},defaults:{}}),RN=({icon:t,iconProps:e,variant:n,tva:r=x9,css:i,children:s,...o})=>{const a=r({...n,css:i}).slots;return f.jsxs("div",{className:a.base(),...o,children:[Jv(t)?f.jsx(on,{icon:t,...e}):t,s]})};function sx(){return typeof window<"u"}function gu(t){return LD(t)?(t.nodeName||"").toLowerCase():"#document"}function ws(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function va(t){var e;return(e=(LD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function LD(t){return sx()?t instanceof Node||t instanceof ws(t).Node:!1}function lr(t){return sx()?t instanceof Element||t instanceof ws(t).Element:!1}function ni(t){return sx()?t instanceof HTMLElement||t instanceof ws(t).HTMLElement:!1}function iI(t){return!sx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ws(t).ShadowRoot}function Rm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=go(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function w9(t){return["table","td","th"].includes(gu(t))}function ox(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function jN(t){const e=ax(),n=lr(t)?go(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function _9(t){let e=rl(t);for(;ni(e)&&!Ka(e);){if(jN(e))return e;if(ox(e))return null;e=rl(e)}return null}function ax(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ka(t){return["html","body","#document"].includes(gu(t))}function go(t){return ws(t).getComputedStyle(t)}function lx(t){return lr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function rl(t){if(gu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||iI(t)&&t.host||va(t);return iI(e)?e.host:e}function MD(t){const e=rl(t);return Ka(e)?t.ownerDocument?t.ownerDocument.body:t.body:ni(e)&&Rm(e)?e:MD(e)}function Xl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=MD(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ws(i);if(s){const a=sI(o);return e.concat(o,o.visualViewport||[],Rm(i)?i:[],a&&n?Xl(a):[])}return e.concat(i,Xl(i,[],n))}function sI(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Fo(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function bi(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&iI(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function ON(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function $D(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function BD(t){return t.mozInputSource===0&&t.isTrusted?!0:oI()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function qN(t){return E9()?!1:!oI()&&t.width===0&&t.height===0||oI()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function zD(){return/apple/i.test(navigator.vendor)}function oI(){const t=/android/i;return t.test(ON())||t.test($D())}function S9(){return ON().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function E9(){return $D().includes("jsdom/")}function Jh(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function I9(t){return"nativeEvent"in t}function N9(t){return t.matches("html,body")}function vi(t){return t?.ownerDocument||document}function O0(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Vl(t){return"composedPath"in t?t.composedPath()[0]:t.target}const k9="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function AN(t){return ni(t)&&t.matches(k9)}function Ki(t){t.preventDefault(),t.stopPropagation()}function WD(t){return t?t.getAttribute("role")==="combobox"&&AN(t):!1}const of=Math.min,As=Math.max,Xb=Math.round,Cd=Math.floor,ca=t=>({x:t,y:t}),C9={left:"right",right:"left",bottom:"top",top:"bottom"},T9={start:"end",end:"start"};function Bj(t,e,n){return As(t,of(e,n))}function jm(t,e){return typeof t=="function"?t(e):t}function du(t){return t.split("-")[0]}function Om(t){return t.split("-")[1]}function UD(t){return t==="x"?"y":"x"}function VD(t){return t==="y"?"height":"width"}function vc(t){return["top","bottom"].includes(du(t))?"y":"x"}function HD(t){return UD(vc(t))}function R9(t,e,n){n===void 0&&(n=!1);const r=Om(t),i=HD(t),s=VD(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ev(o)),[o,ev(o)]}function j9(t){const e=ev(t);return[aI(t),e,aI(e)]}function aI(t){return t.replace(/start|end/g,e=>T9[e])}function O9(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function q9(t,e,n,r){const i=Om(t);let s=O9(du(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(aI)))),s}function ev(t){return t.replace(/left|right|bottom|top/g,e=>C9[e])}function A9(t){return{top:0,right:0,bottom:0,left:0,...t}}function P9(t){return typeof t!="number"?A9(t):{top:t,right:t,bottom:t,left:t}}function tv(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}var F9=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],nv=F9.join(","),GD=typeof Element>"u",af=GD?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,rv=!GD&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},iv=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},D9=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},L9=function(e,n,r){if(iv(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(nv));return n&&af.call(e,nv)&&i.unshift(e),i=i.filter(r),i},M9=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!iv(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),u=a.length?a:o.children,d=t(u,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:o,candidates:d})}else{var p=af.call(o,nv);p&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),y=!iv(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&y){var x=t(h===!0?o.children:h.children,!0,r);r.flatten?i.push.apply(i,x):i.push({scopeParent:o,candidates:x})}else s.unshift.apply(s,o.children)}}return i},KD=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},QD=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||D9(e))&&!KD(e)?0:e.tabIndex},$9=function(e,n){var r=QD(e);return r<0&&n&&!KD(e)?0:r},B9=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},JD=function(e){return e.tagName==="INPUT"},z9=function(e){return JD(e)&&e.type==="hidden"},W9=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},U9=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},V9=function(e){if(!e.name)return!0;var n=e.form||rv(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=U9(i,e.form);return!s||s===e},H9=function(e){return JD(e)&&e.type==="radio"},G9=function(e){return H9(e)&&!V9(e)},K9=function(e){var n,r=e&&rv(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,u;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!s&&i;){var d,p,h;r=rv(i),i=(d=r)===null||d===void 0?void 0:d.host,s=!!((p=i)!==null&&p!==void 0&&(h=p.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return s},zj=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},Q9=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=af.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(af.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var u=e.parentElement,d=rv(e);if(u&&!u.shadowRoot&&i(u)===!0)return zj(e);e.assignedSlot?e=e.assignedSlot:!u&&d!==e.ownerDocument?e=d.host:e=u}e=a}if(K9(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return zj(e);return!1},J9=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return af.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},Z9=function(e,n){return!(n.disabled||iv(n)||z9(n)||Q9(n,e)||W9(n)||J9(n))},lI=function(e,n){return!(G9(n)||QD(n)<0||!Z9(e,n))},Y9=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},X9=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,u=$9(a,o),d=o?t(i.candidates):a;u===0?o?n.push.apply(n,d):n.push(a):r.push({documentOrder:s,tabIndex:u,item:i,isScope:o,content:d})}),r.sort(B9).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},ux=function(e,n){n=n||{};var r;return n.getShadowRoot?r=M9([e],n.includeContainer,{filter:lI.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Y9}):r=L9(e,n.includeContainer,lI.bind(null,n)),X9(r)},eQ=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return af.call(e,nv)===!1?!1:lI(n,e)};function Wj(t,e,n){let{reference:r,floating:i}=t;const s=vc(e),o=HD(e),a=VD(o),u=du(e),d=s==="y",p=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,y=r[a]/2-i[a]/2;let x;switch(u){case"top":x={x:p,y:r.y-i.height};break;case"bottom":x={x:p,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:h};break;case"left":x={x:r.x-i.width,y:h};break;default:x={x:r.x,y:r.y}}switch(Om(e)){case"start":x[o]-=y*(n&&d?-1:1);break;case"end":x[o]+=y*(n&&d?-1:1);break}return x}const tQ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await (o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:h}=Wj(d,r,u),y=r,x={},_=0;for(let S=0;S<a.length;S++){const{name:I,fn:C}=a[S],{x:k,y:R,data:j,reset:A}=await C({x:p,y:h,initialPlacement:r,placement:y,strategy:i,middlewareData:x,rects:d,platform:o,elements:{reference:t,floating:e}});p=k??p,h=R??h,x={...x,[I]:{...x[I],...j}},A&&_<=50&&(_++,typeof A=="object"&&(A.placement&&(y=A.placement),A.rects&&(d=A.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):A.rects),{x:p,y:h}=Wj(d,y,u)),S=-1)}return{x:p,y:h,placement:y,strategy:i,middlewareData:x}};async function PN(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:y=!1,padding:x=0}=jm(e,t),_=P9(x),I=a[y?h==="floating"?"reference":"floating":h],C=tv(await s.getClippingRect({element:(n=await (s.isElement==null?void 0:s.isElement(I)))==null||n?I:I.contextElement||await (s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:d,rootBoundary:p,strategy:u})),k=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,R=await (s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),j=await (s.isElement==null?void 0:s.isElement(R))?await (s.getScale==null?void 0:s.getScale(R))||{x:1,y:1}:{x:1,y:1},A=tv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:k,offsetParent:R,strategy:u}):k);return{top:(C.top-A.top+_.top)/j.y,bottom:(A.bottom-C.bottom+_.bottom)/j.y,left:(C.left-A.left+_.left)/j.x,right:(A.right-C.right+_.right)/j.x}}const nQ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:d}=e,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:y,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:S=!0,...I}=jm(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const C=du(i),k=vc(a),R=du(a)===a,j=await (u.isRTL==null?void 0:u.isRTL(d.floating)),A=y||(R||!S?[ev(a)]:j9(a)),F=_!=="none";!y&&F&&A.push(...q9(a,S,_,j));const $=[a,...A],P=await PN(e,I),q=[];let B=((r=s.flip)==null?void 0:r.overflows)||[];if(p&&q.push(P[C]),h){const z=R9(i,o,j);q.push(P[z[0]],P[z[1]])}if(B=[...B,{placement:i,overflows:q}],!q.every(z=>z<=0)){var L,U;const z=(((L=s.flip)==null?void 0:L.index)||0)+1,X=$[z];if(X)return{data:{index:z,overflows:B},reset:{placement:X}};let J=(U=B.filter(le=>le.overflows[0]<=0).sort((le,ie)=>le.overflows[1]-ie.overflows[1])[0])==null?void 0:U.placement;if(!J)switch(x){case"bestFit":{var V;const le=(V=B.filter(ie=>{if(F){const ne=vc(ie.placement);return ne===k||ne==="y"}return!0}).map(ie=>[ie.placement,ie.overflows.filter(ne=>ne>0).reduce((ne,oe)=>ne+oe,0)]).sort((ie,ne)=>ie[1]-ne[1])[0])==null?void 0:V[0];le&&(J=le);break}case"initialPlacement":J=a;break}if(i!==J)return{reset:{placement:J}}}return{}}}};async function rQ(t,e){const{placement:n,platform:r,elements:i}=t,s=await (r.isRTL==null?void 0:r.isRTL(i.floating)),o=du(n),a=Om(n),u=vc(n)==="y",d=["left","top"].includes(o)?-1:1,p=s&&u?-1:1,h=jm(e,t);let{mainAxis:y,crossAxis:x,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof _=="number"&&(x=a==="end"?_*-1:_),u?{x:x*p,y:y*d}:{x:y*d,y:x*p}}const iQ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,u=await rQ(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},sQ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:I=>{let{x:C,y:k}=I;return{x:C,y:k}}},...u}=jm(t,e),d={x:n,y:r},p=await PN(e,u),h=vc(du(i)),y=UD(h);let x=d[y],_=d[h];if(s){const I=y==="y"?"top":"left",C=y==="y"?"bottom":"right",k=x+p[I],R=x-p[C];x=Bj(k,x,R)}if(o){const I=h==="y"?"top":"left",C=h==="y"?"bottom":"right",k=_+p[I],R=_-p[C];_=Bj(k,_,R)}const S=a.fn({...e,[y]:x,[h]:_});return{...S,data:{x:S.x-n,y:S.y-r,enabled:{[y]:s,[h]:o}}}}}},oQ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:u=()=>{},...d}=jm(t,e),p=await PN(e,d),h=du(i),y=Om(i),x=vc(i)==="y",{width:_,height:S}=s.floating;let I,C;h==="top"||h==="bottom"?(I=h,C=y===(await (o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(C=h,I=y==="end"?"top":"bottom");const k=S-p.top-p.bottom,R=_-p.left-p.right,j=of(S-p[I],k),A=of(_-p[C],R),F=!e.middlewareData.shift;let $=j,P=A;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=R),(r=e.middlewareData.shift)!=null&&r.enabled.y&&($=k),F&&!y){const B=As(p.left,0),L=As(p.right,0),U=As(p.top,0),V=As(p.bottom,0);x?P=_-2*(B!==0||L!==0?B+L:As(p.left,p.right)):$=S-2*(U!==0||V!==0?U+V:As(p.top,p.bottom))}await u({...e,availableWidth:P,availableHeight:$});const q=await o.getDimensions(a.floating);return _!==q.width||S!==q.height?{reset:{rects:!0}}:{}}}};function ZD(t){const e=go(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ni(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Xb(n)!==s||Xb(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function FN(t){return lr(t)?t:t.contextElement}function Gd(t){const e=FN(t);if(!ni(e))return ca(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=ZD(e);let o=(s?Xb(n.width):n.width)/r,a=(s?Xb(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const aQ=ca(0);function YD(t){const e=ws(t);return!ax()||!e.visualViewport?aQ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function lQ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ws(t)?!1:e}function xc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=FN(t);let o=ca(1);e&&(r?lr(r)&&(o=Gd(r)):o=Gd(t));const a=lQ(s,n,r)?YD(s):ca(0);let u=(i.left+a.x)/o.x,d=(i.top+a.y)/o.y,p=i.width/o.x,h=i.height/o.y;if(s){const y=ws(s),x=r&&lr(r)?ws(r):r;let _=y,S=sI(_);for(;S&&r&&x!==_;){const I=Gd(S),C=S.getBoundingClientRect(),k=go(S),R=C.left+(S.clientLeft+parseFloat(k.paddingLeft))*I.x,j=C.top+(S.clientTop+parseFloat(k.paddingTop))*I.y;u*=I.x,d*=I.y,p*=I.x,h*=I.y,u+=R,d+=j,_=ws(S),S=sI(_)}}return tv({width:p,height:h,x:u,y:d})}function DN(t,e){const n=lx(t).scrollLeft;return e?e.left+n:xc(va(t)).left+n}function XD(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:DN(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function uQ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=va(r),a=e?ox(e.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},d=ca(1);const p=ca(0),h=ni(r);if((h||!h&&!s)&&((gu(r)!=="body"||Rm(o))&&(u=lx(r)),ni(r))){const x=xc(r);d=Gd(r),p.x=x.x+r.clientLeft,p.y=x.y+r.clientTop}const y=o&&!h&&!s?XD(o,u,!0):ca(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+p.x+y.x,y:n.y*d.y-u.scrollTop*d.y+p.y+y.y}}function cQ(t){return Array.from(t.getClientRects())}function dQ(t){const e=va(t),n=lx(t),r=t.ownerDocument.body,i=As(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=As(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+DN(t);const a=-n.scrollTop;return go(r).direction==="rtl"&&(o+=As(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function fQ(t,e){const n=ws(t),r=va(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const d=ax();(!d||d&&e==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function pQ(t,e){const n=xc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=ni(t)?Gd(t):ca(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,u=i*s.x,d=r*s.y;return{width:o,height:a,x:u,y:d}}function Uj(t,e,n){let r;if(e==="viewport")r=fQ(t,n);else if(e==="document")r=dQ(va(t));else if(lr(e))r=pQ(e,n);else{const i=YD(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return tv(r)}function e2(t,e){const n=rl(t);return n===e||!lr(n)||Ka(n)?!1:go(n).position==="fixed"||e2(n,e)}function hQ(t,e){const n=e.get(t);if(n)return n;let r=Xl(t,[],!1).filter(a=>lr(a)&&gu(a)!=="body"),i=null;const s=go(t).position==="fixed";let o=s?rl(t):t;for(;lr(o)&&!Ka(o);){const a=go(o),u=jN(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Rm(o)&&!u&&e2(t,o))?r=r.filter(p=>p!==o):i=a,o=rl(o)}return e.set(t,r),r}function mQ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?ox(e)?[]:hQ(e,this._c):[].concat(n),r],a=o[0],u=o.reduce((d,p)=>{const h=Uj(e,p,i);return d.top=As(h.top,d.top),d.right=of(h.right,d.right),d.bottom=of(h.bottom,d.bottom),d.left=As(h.left,d.left),d},Uj(e,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function gQ(t){const{width:e,height:n}=ZD(t);return{width:e,height:n}}function yQ(t,e,n){const r=ni(e),i=va(e),s=n==="fixed",o=xc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const u=ca(0);if(r||!r&&!s)if((gu(e)!=="body"||Rm(i))&&(a=lx(e)),r){const y=xc(e,!0,s,e);u.x=y.x+e.clientLeft,u.y=y.y+e.clientTop}else i&&(u.x=DN(i));const d=i&&!r&&!s?XD(i,a):ca(0),p=o.left+a.scrollLeft-u.x-d.x,h=o.top+a.scrollTop-u.y-d.y;return{x:p,y:h,width:o.width,height:o.height}}function q0(t){return go(t).position==="static"}function Vj(t,e){if(!ni(t)||go(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return va(t)===n&&(n=n.ownerDocument.body),n}function t2(t,e){const n=ws(t);if(ox(t))return n;if(!ni(t)){let i=rl(t);for(;i&&!Ka(i);){if(lr(i)&&!q0(i))return i;i=rl(i)}return n}let r=Vj(t,e);for(;r&&w9(r)&&q0(r);)r=Vj(r,e);return r&&Ka(r)&&q0(r)&&!jN(r)?n:r||_9(t)||n}const bQ=async function(t){const e=this.getOffsetParent||t2,n=this.getDimensions,r=await n(t.floating);return{reference:yQ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function vQ(t){return go(t).direction==="rtl"}const xQ={convertOffsetParentRelativeRectToViewportRelativeRect:uQ,getDocumentElement:va,getClippingRect:mQ,getOffsetParent:t2,getElementRects:bQ,getClientRects:cQ,getDimensions:gQ,getScale:Gd,isElement:lr,isRTL:vQ};function n2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function wQ(t,e){let n=null,r;const i=va(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const d=t.getBoundingClientRect(),{left:p,top:h,width:y,height:x}=d;if(a||e(),!y||!x)return;const _=Cd(h),S=Cd(i.clientWidth-(p+y)),I=Cd(i.clientHeight-(h+x)),C=Cd(p),R={rootMargin:-_+"px "+-S+"px "+-I+"px "+-C+"px",threshold:As(0,of(1,u))||1};let j=!0;function A(F){const $=F[0].intersectionRatio;if($!==u){if(!j)return o();$?o(!1,$):r=setTimeout(()=>{o(!1,1e-7)},1e3)}$===1&&!n2(d,t.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(A,{...R,root:i.ownerDocument})}catch{n=new IntersectionObserver(A,R)}n.observe(t)}return o(!0),s}function r2(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=FN(t),p=i||s?[...d?Xl(d):[],...Xl(e)]:[];p.forEach(C=>{i&&C.addEventListener("scroll",n,{passive:!0}),s&&C.addEventListener("resize",n)});const h=d&&a?wQ(d,n):null;let y=-1,x=null;o&&(x=new ResizeObserver(C=>{let[k]=C;k&&k.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var R;(R=x)==null||R.observe(e)})),n()}),d&&!u&&x.observe(d),x.observe(e));let _,S=u?xc(t):null;u&&I();function I(){const C=xc(t);S&&!n2(S,C)&&n(),S=C,_=requestAnimationFrame(I)}return n(),()=>{var C;p.forEach(k=>{i&&k.removeEventListener("scroll",n),s&&k.removeEventListener("resize",n)}),h?.(),(C=x)==null||C.disconnect(),x=null,u&&cancelAnimationFrame(_)}}const _Q=iQ,SQ=sQ,EQ=nQ,IQ=oQ,NQ=(t,e,n)=>{const r=new Map,i={platform:xQ,...n},s={...i.platform,_c:r};return tQ(t,e,{...i,platform:s})};var Xy=typeof document<"u"?H.useLayoutEffect:H.useEffect;function sv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!sv(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!sv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function i2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Hj(t,e){const n=i2(t);return Math.round(e*n)/n}function A0(t){const e=H.useRef(t);return Xy(()=>{e.current=t}),e}function kQ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:d}=t,[p,h]=H.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[y,x]=H.useState(r);sv(y,r)||x(r);const[_,S]=H.useState(null),[I,C]=H.useState(null),k=H.useCallback(ie=>{ie!==F.current&&(F.current=ie,S(ie))},[]),R=H.useCallback(ie=>{ie!==$.current&&($.current=ie,C(ie))},[]),j=s||_,A=o||I,F=H.useRef(null),$=H.useRef(null),P=H.useRef(p),q=u!=null,B=A0(u),L=A0(i),U=A0(d),V=H.useCallback(()=>{if(!F.current||!$.current)return;const ie={placement:e,strategy:n,middleware:y};L.current&&(ie.platform=L.current),NQ(F.current,$.current,ie).then(ne=>{const oe={...ne,isPositioned:U.current!==!1};z.current&&!sv(P.current,oe)&&(P.current=oe,hm.flushSync(()=>{h(oe)}))})},[y,e,n,L,U]);Xy(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(ie=>({...ie,isPositioned:!1})))},[d]);const z=H.useRef(!1);Xy(()=>(z.current=!0,()=>{z.current=!1}),[]),Xy(()=>{if(j&&(F.current=j),A&&($.current=A),j&&A){if(B.current)return B.current(j,A,V);V()}},[j,A,V,B,q]);const X=H.useMemo(()=>({reference:F,floating:$,setReference:k,setFloating:R}),[k,R]),J=H.useMemo(()=>({reference:j,floating:A}),[j,A]),le=H.useMemo(()=>{const ie={position:n,left:0,top:0};if(!J.floating)return ie;const ne=Hj(J.floating,p.x),oe=Hj(J.floating,p.y);return a?{...ie,transform:"translate("+ne+"px, "+oe+"px)",...i2(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:oe}},[n,a,J.floating,p.x,p.y]);return H.useMemo(()=>({...p,update:V,refs:X,elements:J,floatingStyles:le}),[p,V,X,J,le])}const s2=(t,e)=>({..._Q(t),options:[t,e]}),CQ=(t,e)=>({...SQ(t),options:[t,e]}),o2=(t,e)=>({...EQ(t),options:[t,e]}),TQ=(t,e)=>({...IQ(t),options:[t,e]});function Gj(t){return H.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const a2={...H4},RQ=a2.useInsertionEffect,jQ=RQ||(t=>t());function Zi(t){const e=H.useRef(()=>{});return jQ(()=>{e.current=t}),H.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const LN="ArrowUp",qm="ArrowDown",eu="ArrowLeft",tu="ArrowRight";function uy(t,e,n){return Math.floor(t/e)!==n}function bh(t,e){return e<0||e>=t.current.length}function P0(t,e){return ji(t,{disabledIndices:e})}function Kj(t,e){return ji(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function ji(t,e){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=e===void 0?{}:e;const o=t.current;let a=n;do a+=r?-s:s;while(a>=0&&a<=o.length-1&&eb(o,a,i));return a}function OQ(t,e){let{event:n,orientation:r,loop:i,rtl:s,cols:o,disabledIndices:a,minIndex:u,maxIndex:d,prevIndex:p,stopEvent:h=!1}=e,y=p;if(n.key===LN){if(h&&Ki(n),p===-1)y=d;else if(y=ji(t,{startingIndex:y,amount:o,decrement:!0,disabledIndices:a}),i&&(p-o<u||y<0)){const x=p%o,_=d%o,S=d-(_-x);_===x?y=d:y=_>x?S:S-o}bh(t,y)&&(y=p)}if(n.key===qm&&(h&&Ki(n),p===-1?y=u:(y=ji(t,{startingIndex:p,amount:o,disabledIndices:a}),i&&p+o>d&&(y=ji(t,{startingIndex:p%o-o,amount:o,disabledIndices:a}))),bh(t,y)&&(y=p)),r==="both"){const x=Cd(p/o);n.key===(s?eu:tu)&&(h&&Ki(n),p%o!==o-1?(y=ji(t,{startingIndex:p,disabledIndices:a}),i&&uy(y,o,x)&&(y=ji(t,{startingIndex:p-p%o-1,disabledIndices:a}))):i&&(y=ji(t,{startingIndex:p-p%o-1,disabledIndices:a})),uy(y,o,x)&&(y=p)),n.key===(s?tu:eu)&&(h&&Ki(n),p%o!==0?(y=ji(t,{startingIndex:p,decrement:!0,disabledIndices:a}),i&&uy(y,o,x)&&(y=ji(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:a}))):i&&(y=ji(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:a})),uy(y,o,x)&&(y=p));const _=Cd(d/o)===x;bh(t,y)&&(i&&_?y=n.key===(s?tu:eu)?d:ji(t,{startingIndex:p-p%o-1,disabledIndices:a}):y=p)}return y}function qQ(t,e,n){const r=[];let i=0;return t.forEach((s,o)=>{let{width:a,height:u}=s,d=!1;for(n&&(i=0);!d;){const p=[];for(let h=0;h<a;h++)for(let y=0;y<u;y++)p.push(i+h+y*e);i%e+a<=e&&p.every(h=>r[h]==null)?(p.forEach(h=>{r[h]=o}),d=!0):i++}}),[...r]}function AQ(t,e,n,r,i){if(t===-1)return-1;const s=n.indexOf(t),o=e[t];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(t)}}function PQ(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function eb(t,e,n){if(n)return n.includes(e);const r=t[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}var wr=typeof document<"u"?H.useLayoutEffect:H.useEffect;let Qj=!1,FQ=0;const Jj=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+FQ++;function DQ(){const[t,e]=H.useState(()=>Qj?Jj():void 0);return wr(()=>{t==null&&e(Jj())},[]),H.useEffect(()=>{Qj=!0},[]),t}const LQ=a2.useId,MN=LQ||DQ;function l2(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const u2=H.createContext(null),c2=H.createContext(null),Am=()=>{var t;return((t=H.useContext(u2))==null?void 0:t.id)||null},Nf=()=>H.useContext(c2);function MQ(t){const e=MN(),n=Nf(),i=Am();return wr(()=>{if(!e)return;const s={id:e,parentId:i};return n?.addNode(s),()=>{n?.removeNode(s)}},[n,e,i]),e}function $Q(t){const{children:e,id:n}=t,r=Am();return f.jsx(u2.Provider,{value:H.useMemo(()=>({id:n,parentId:r}),[n,r]),children:e})}function BQ(t){const{children:e}=t,n=H.useRef([]),r=H.useCallback(o=>{n.current=[...n.current,o]},[]),i=H.useCallback(o=>{n.current=n.current.filter(a=>a!==o)},[]),s=H.useState(()=>l2())[0];return f.jsx(c2.Provider,{value:H.useMemo(()=>({nodesRef:n,addNode:r,removeNode:i,events:s}),[r,i,s]),children:e})}function wc(t){return"data-floating-ui-"+t}function Yi(t){const e=H.useRef(t);return wr(()=>{e.current=t}),e}const Zj=wc("safe-polygon");function F0(t,e,n){return n&&!Jh(n)?0:typeof t=="number"?t:t?.[e]}function zQ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=t,{enabled:a=!0,delay:u=0,handleClose:d=null,mouseOnly:p=!1,restMs:h=0,move:y=!0}=e,x=Nf(),_=Am(),S=Yi(d),I=Yi(u),C=Yi(n),k=H.useRef(),R=H.useRef(-1),j=H.useRef(),A=H.useRef(-1),F=H.useRef(!0),$=H.useRef(!1),P=H.useRef(()=>{}),q=H.useRef(!1),B=H.useCallback(()=>{var le;const ie=(le=i.current.openEvent)==null?void 0:le.type;return ie?.includes("mouse")&&ie!=="mousedown"},[i]);H.useEffect(()=>{if(!a)return;function le(ie){let{open:ne}=ie;ne||(clearTimeout(R.current),clearTimeout(A.current),F.current=!0,q.current=!1)}return s.on("openchange",le),()=>{s.off("openchange",le)}},[a,s]),H.useEffect(()=>{if(!a||!S.current||!n)return;function le(ne){B()&&r(!1,ne,"hover")}const ie=vi(o.floating).documentElement;return ie.addEventListener("mouseleave",le),()=>{ie.removeEventListener("mouseleave",le)}},[o.floating,n,r,a,S,B]);const L=H.useCallback(function(le,ie,ne){ie===void 0&&(ie=!0),ne===void 0&&(ne="hover");const oe=F0(I.current,"close",k.current);oe&&!j.current?(clearTimeout(R.current),R.current=window.setTimeout(()=>r(!1,le,ne),oe)):ie&&(clearTimeout(R.current),r(!1,le,ne))},[I,r]),U=Zi(()=>{P.current(),j.current=void 0}),V=Zi(()=>{if($.current){const le=vi(o.floating).body;le.style.pointerEvents="",le.removeAttribute(Zj),$.current=!1}}),z=Zi(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);H.useEffect(()=>{if(!a)return;function le(te){if(clearTimeout(R.current),F.current=!1,p&&!Jh(k.current)||h>0&&!F0(I.current,"open"))return;const ce=F0(I.current,"open",k.current);ce?R.current=window.setTimeout(()=>{C.current||r(!0,te,"hover")},ce):n||r(!0,te,"hover")}function ie(te){if(z())return;P.current();const ce=vi(o.floating);if(clearTimeout(A.current),q.current=!1,S.current&&i.current.floatingContext){n||clearTimeout(R.current),j.current=S.current({...i.current.floatingContext,tree:x,x:te.clientX,y:te.clientY,onClose(){V(),U(),z()||L(te,!0,"safe-polygon")}});const ye=j.current;ce.addEventListener("mousemove",ye),P.current=()=>{ce.removeEventListener("mousemove",ye)};return}(k.current==="touch"?!bi(o.floating,te.relatedTarget):!0)&&L(te)}function ne(te){z()||i.current.floatingContext&&(S.current==null||S.current({...i.current.floatingContext,tree:x,x:te.clientX,y:te.clientY,onClose(){V(),U(),z()||L(te)}})(te))}if(lr(o.domReference)){var oe;const te=o.domReference;return n&&te.addEventListener("mouseleave",ne),(oe=o.floating)==null||oe.addEventListener("mouseleave",ne),y&&te.addEventListener("mousemove",le,{once:!0}),te.addEventListener("mouseenter",le),te.addEventListener("mouseleave",ie),()=>{var ce;n&&te.removeEventListener("mouseleave",ne),(ce=o.floating)==null||ce.removeEventListener("mouseleave",ne),y&&te.removeEventListener("mousemove",le),te.removeEventListener("mouseenter",le),te.removeEventListener("mouseleave",ie)}}},[o,a,t,p,h,y,L,U,V,r,n,C,x,I,S,i,z]),wr(()=>{var le;if(a&&n&&(le=S.current)!=null&&le.__options.blockPointerEvents&&B()){$.current=!0;const ne=o.floating;if(lr(o.domReference)&&ne){var ie;const oe=vi(o.floating).body;oe.setAttribute(Zj,"");const te=o.domReference,ce=x==null||(ie=x.nodesRef.current.find(de=>de.id===_))==null||(ie=ie.context)==null?void 0:ie.elements.floating;return ce&&(ce.style.pointerEvents=""),oe.style.pointerEvents="none",te.style.pointerEvents="auto",ne.style.pointerEvents="auto",()=>{oe.style.pointerEvents="",te.style.pointerEvents="",ne.style.pointerEvents=""}}}},[a,n,_,o,x,S,B]),wr(()=>{n||(k.current=void 0,q.current=!1,U(),V())},[n,U,V]),H.useEffect(()=>()=>{U(),clearTimeout(R.current),clearTimeout(A.current),V()},[a,o.domReference,U,V]);const X=H.useMemo(()=>{function le(ie){k.current=ie.pointerType}return{onPointerDown:le,onPointerEnter:le,onMouseMove(ie){const{nativeEvent:ne}=ie;function oe(){!F.current&&!C.current&&r(!0,ne,"hover")}p&&!Jh(k.current)||n||h===0||q.current&&ie.movementX**2+ie.movementY**2<2||(clearTimeout(A.current),k.current==="touch"?oe():(q.current=!0,A.current=window.setTimeout(oe,h)))}}},[p,r,n,C,h]),J=H.useMemo(()=>({onMouseEnter(){clearTimeout(R.current)},onMouseLeave(le){z()||L(le.nativeEvent,!1)}}),[L,z]);return H.useMemo(()=>a?{reference:X,floating:J}:{},[a,X,J])}let Yj=0;function Hu(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(Yj);const s=()=>t?.focus({preventScroll:n});i?s():Yj=requestAnimationFrame(s)}function Xj(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s?.parentId,s&&(r=r.concat(s))}return r}function Kd(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}function WQ(t,e){let n,r=-1;function i(s,o){o>r&&(n=s,r=o),Kd(t,s).forEach(u=>{i(u.id,o+1)})}return i(e,0),t.find(s=>s.id===n)}let fd=new WeakMap,cy=new WeakSet,dy={},D0=0;const UQ=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,d2=t=>t&&(t.host||d2(t.parentNode)),VQ=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=d2(n);return t.contains(r)?r:null}).filter(n=>n!=null);function HQ(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=VQ(e,t),a=new Set,u=new Set(o),d=[];dy[i]||(dy[i]=new WeakMap);const p=dy[i];o.forEach(h),y(e),a.clear();function h(x){!x||a.has(x)||(a.add(x),x.parentNode&&h(x.parentNode))}function y(x){!x||u.has(x)||[].forEach.call(x.children,_=>{if(gu(_)!=="script")if(a.has(_))y(_);else{const S=s?_.getAttribute(s):null,I=S!==null&&S!=="false",C=fd.get(_)||0,k=s?C+1:C,R=(p.get(_)||0)+1;fd.set(_,k),p.set(_,R),d.push(_),k===1&&I&&cy.add(_),R===1&&_.setAttribute(i,""),!I&&s&&_.setAttribute(s,"true")}})}return D0++,()=>{d.forEach(x=>{const _=fd.get(x)||0,S=s?_-1:_,I=(p.get(x)||0)-1;fd.set(x,S),p.set(x,I),S||(!cy.has(x)&&s&&x.removeAttribute(s),cy.delete(x)),I||x.removeAttribute(i)}),D0--,D0||(fd=new WeakMap,fd=new WeakMap,cy=new WeakSet,dy={})}}function eO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=vi(t[0]).body;return HQ(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const cx=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function f2(t,e){const n=ux(t,cx());e==="prev"&&n.reverse();const r=n.indexOf(Fo(vi(t)));return n.slice(r+1)[0]}function p2(){return f2(document.body,"next")}function h2(){return f2(document.body,"prev")}function vh(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!bi(n,r)}function GQ(t){ux(t,cx()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function tO(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const dx={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let KQ;function nO(t){t.key==="Tab"&&(t.target,clearTimeout(KQ))}const ov=H.forwardRef(function(e,n){const[r,i]=H.useState();wr(()=>(zD()&&i("button"),document.addEventListener("keydown",nO),()=>{document.removeEventListener("keydown",nO)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[wc("focus-guard")]:"",style:dx};return f.jsx("span",{...e,...s})}),m2=H.createContext(null),rO=wc("portal");function QQ(t){t===void 0&&(t={});const{id:e,root:n}=t,r=MN(),i=g2(),[s,o]=H.useState(null),a=H.useRef(null);return wr(()=>()=>{s?.remove(),queueMicrotask(()=>{a.current=null})},[s]),wr(()=>{if(!r||a.current)return;const u=e?document.getElementById(e):null;if(!u)return;const d=document.createElement("div");d.id=r,d.setAttribute(rO,""),u.appendChild(d),a.current=d,o(d)},[e,r]),wr(()=>{if(n===null||!r||a.current)return;let u=n||i?.portalNode;u&&!lr(u)&&(u=u.current),u=u||document.body;let d=null;e&&(d=document.createElement("div"),d.id=e,u.appendChild(d));const p=document.createElement("div");p.id=r,p.setAttribute(rO,""),u=d||u,u.appendChild(p),a.current=p,o(p)},[e,n,r,i]),s}function $N(t){const{children:e,id:n,root:r,preserveTabOrder:i=!0}=t,s=QQ({id:n,root:r}),[o,a]=H.useState(null),u=H.useRef(null),d=H.useRef(null),p=H.useRef(null),h=H.useRef(null),y=o?.modal,x=o?.open,_=!!o&&!o.modal&&o.open&&i&&!!(r||s);return H.useEffect(()=>{if(!s||!i||y)return;function S(I){s&&vh(I)&&(I.type==="focusin"?tO:GQ)(s)}return s.addEventListener("focusin",S,!0),s.addEventListener("focusout",S,!0),()=>{s.removeEventListener("focusin",S,!0),s.removeEventListener("focusout",S,!0)}},[s,i,y]),H.useEffect(()=>{s&&(x||tO(s))},[x,s]),f.jsxs(m2.Provider,{value:H.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:u,afterOutsideRef:d,beforeInsideRef:p,afterInsideRef:h,portalNode:s,setFocusManagerState:a}),[i,s]),children:[_&&s&&f.jsx(ov,{"data-type":"outside",ref:u,onFocus:S=>{if(vh(S,s)){var I;(I=p.current)==null||I.focus()}else{const C=h2()||o?.domReference;C?.focus()}}}),_&&s&&f.jsx("span",{"aria-owns":s.id,style:dx}),s&&hm.createPortal(e,s),_&&s&&f.jsx(ov,{"data-type":"outside",ref:d,onFocus:S=>{if(vh(S,s)){var I;(I=h.current)==null||I.focus()}else{const C=p2()||o?.domReference;C?.focus(),o?.closeOnFocusOut&&o?.onOpenChange(!1,S.nativeEvent,"focus-out")}}})]})}const g2=()=>H.useContext(m2),uI="data-floating-ui-focusable";function cI(t){return t?t.hasAttribute(uI)?t:t.querySelector("["+uI+"]")||t:null}const JQ=20;let Gu=[];function L0(t){Gu=Gu.filter(e=>e.isConnected),t&&gu(t)!=="body"&&(Gu.push(t),Gu.length>JQ&&(Gu=Gu.slice(-20)))}function iO(){return Gu.slice().reverse().find(t=>t.isConnected)}function ZQ(t){const e=cx();return eQ(t,e)?t:ux(t,e)[0]||t}const YQ=H.forwardRef(function(e,n){return f.jsx("button",{...e,type:"button",ref:n,tabIndex:-1,style:dx})});function y2(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:a=!0,restoreFocus:u=!1,modal:d=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:h=!0,outsideElementsInert:y=!1}=t,{open:x,onOpenChange:_,events:S,dataRef:I,elements:{domReference:C,floating:k}}=e,R=Zi(()=>{var De;return(De=I.current.floatingContext)==null?void 0:De.nodeId}),j=typeof o=="number"&&o<0,A=WD(C)&&j,F=UQ(),$=F?s:!0,P=!$||F&&y,q=Yi(i),B=Yi(o),L=Yi(a),U=Nf(),V=g2(),z=H.useRef(null),X=H.useRef(null),J=H.useRef(!1),le=H.useRef(!1),ie=H.useRef(-1),ne=V!=null,oe=cI(k),te=Zi(function(De){return De===void 0&&(De=oe),De?ux(De,cx()):[]}),ce=Zi(De=>{const Je=te(De);return q.current.map(Xe=>C&&Xe==="reference"?C:oe&&Xe==="floating"?oe:Je).filter(Boolean).flat()});H.useEffect(()=>{if(r||!d)return;function De(Xe){if(Xe.key==="Tab"){bi(oe,Fo(vi(oe)))&&te().length===0&&!A&&Ki(Xe);const Ue=ce(),ut=Vl(Xe);q.current[0]==="reference"&&ut===C&&(Ki(Xe),Xe.shiftKey?Hu(Ue[Ue.length-1]):Hu(Ue[1])),q.current[1]==="floating"&&ut===oe&&Xe.shiftKey&&(Ki(Xe),Hu(Ue[0]))}}const Je=vi(oe);return Je.addEventListener("keydown",De),()=>{Je.removeEventListener("keydown",De)}},[r,C,oe,d,q,A,te,ce]),H.useEffect(()=>{if(r||!k)return;function De(Je){const Xe=Vl(Je),ut=te().indexOf(Xe);ut!==-1&&(ie.current=ut)}return k.addEventListener("focusin",De),()=>{k.removeEventListener("focusin",De)}},[r,k,te]),H.useEffect(()=>{if(r||!h)return;function De(){le.current=!0,setTimeout(()=>{le.current=!1})}function Je(Xe){const Ue=Xe.relatedTarget;queueMicrotask(()=>{const ut=R(),St=!(bi(C,Ue)||bi(k,Ue)||bi(Ue,k)||bi(V?.portalNode,Ue)||Ue!=null&&Ue.hasAttribute(wc("focus-guard"))||U&&(Kd(U.nodesRef.current,ut).find(Ot=>{var Gt,an;return bi((Gt=Ot.context)==null?void 0:Gt.elements.floating,Ue)||bi((an=Ot.context)==null?void 0:an.elements.domReference,Ue)})||Xj(U.nodesRef.current,ut).find(Ot=>{var Gt,an,xe;return[(Gt=Ot.context)==null?void 0:Gt.elements.floating,cI((an=Ot.context)==null?void 0:an.elements.floating)].includes(Ue)||((xe=Ot.context)==null?void 0:xe.elements.domReference)===Ue})));if(u&&St&&Fo(vi(oe))===vi(oe).body){ni(oe)&&oe.focus();const Ot=ie.current,Gt=te(),an=Gt[Ot]||Gt[Gt.length-1]||oe;ni(an)&&an.focus()}(A||!d)&&Ue&&St&&!le.current&&Ue!==iO()&&(J.current=!0,_(!1,Xe,"focus-out"))})}if(k&&ni(C))return C.addEventListener("focusout",Je),C.addEventListener("pointerdown",De),k.addEventListener("focusout",Je),()=>{C.removeEventListener("focusout",Je),C.removeEventListener("pointerdown",De),k.removeEventListener("focusout",Je)}},[r,C,k,oe,d,U,V,_,h,u,te,A,R]);const de=H.useRef(null),ye=H.useRef(null),we=Gj([de,V?.beforeInsideRef]),Ie=Gj([ye,V?.afterInsideRef]);H.useEffect(()=>{var De;if(r||!k)return;const Je=Array.from((V==null||(De=V.portalNode)==null?void 0:De.querySelectorAll("["+wc("portal")+"]"))||[]),Xe=U&&!d?Xj(U?.nodesRef.current,R()).map(St=>{var Ot;return(Ot=St.context)==null?void 0:Ot.elements.floating}):[],Ue=[k,...Je,...Xe,z.current,X.current,de.current,ye.current,V?.beforeOutsideRef.current,V?.afterOutsideRef.current,q.current.includes("reference")||A?C:null].filter(St=>St!=null),ut=d||A?eO(Ue,!P,P):eO(Ue);return()=>{ut()}},[r,C,k,d,q,V,A,$,P,U,R]),wr(()=>{if(r||!ni(oe))return;const De=vi(oe),Je=Fo(De);queueMicrotask(()=>{const Xe=ce(oe),Ue=B.current,ut=(typeof Ue=="number"?Xe[Ue]:Ue.current)||oe,St=bi(oe,Je);!j&&!St&&x&&Hu(ut,{preventScroll:ut===oe})})},[r,x,oe,j,ce,B]),wr(()=>{if(r||!oe)return;let De=!1;const Je=vi(oe),Xe=Fo(Je);let ut=I.current.openEvent;L0(Xe);function St(an){let{open:xe,reason:be,event:Ne,nested:Ae}=an;xe&&(ut=Ne),be==="escape-key"&&C&&L0(C),["hover","safe-polygon"].includes(be)&&Ne.type==="mouseleave"&&(J.current=!0),be==="outside-press"&&(Ae?(J.current=!1,De=!0):J.current=!(BD(Ne)||qN(Ne)))}S.on("openchange",St);const Ot=Je.createElement("span");Ot.setAttribute("tabindex","-1"),Ot.setAttribute("aria-hidden","true"),Object.assign(Ot.style,dx),ne&&C&&C.insertAdjacentElement("afterend",Ot);function Gt(){return typeof L.current=="boolean"?iO()||Ot:L.current.current||Ot}return()=>{S.off("openchange",St);const an=Fo(Je),xe=bi(k,an)||U&&Kd(U.nodesRef.current,R()).some(Ae=>{var Ve;return bi((Ve=Ae.context)==null?void 0:Ve.elements.floating,an)});(xe||ut&&["click","mousedown"].includes(ut.type))&&C&&L0(C);const Ne=Gt();queueMicrotask(()=>{const Ae=ZQ(Ne);L.current&&!J.current&&ni(Ae)&&(!(Ae!==an&&an!==Je.body)||xe)&&Ae.focus({preventScroll:De}),Ot.remove()})}},[r,k,oe,L,I,S,U,ne,C,R]),H.useEffect(()=>{queueMicrotask(()=>{J.current=!1})},[r]),wr(()=>{if(!r&&V)return V.setFocusManagerState({modal:d,closeOnFocusOut:h,open:x,onOpenChange:_,domReference:C}),()=>{V.setFocusManagerState(null)}},[r,V,d,x,_,h,C]),wr(()=>{if(r||!oe||typeof MutationObserver!="function"||j)return;const De=()=>{const Xe=oe.getAttribute("tabindex"),Ue=te(),ut=Fo(vi(k)),St=Ue.indexOf(ut);St!==-1&&(ie.current=St),q.current.includes("floating")||ut!==C&&Ue.length===0?Xe!=="0"&&oe.setAttribute("tabindex","0"):Xe!=="-1"&&oe.setAttribute("tabindex","-1")};De();const Je=new MutationObserver(De);return Je.observe(oe,{childList:!0,subtree:!0,attributes:!0}),()=>{Je.disconnect()}},[r,k,oe,C,q,te,j]);function ze(De){return r||!p||!d?null:f.jsx(YQ,{ref:De==="start"?z:X,onClick:Je=>_(!1,Je.nativeEvent),children:typeof p=="string"?p:"Dismiss"})}const je=!r&&$&&(d?!A:!0)&&(ne||d);return f.jsxs(f.Fragment,{children:[je&&f.jsx(ov,{"data-type":"inside",ref:we,onFocus:De=>{if(d){const Xe=ce();Hu(i[0]==="reference"?Xe[0]:Xe[Xe.length-1])}else if(V!=null&&V.preserveTabOrder&&V.portalNode)if(J.current=!1,vh(De,V.portalNode)){const Xe=p2()||C;Xe?.focus()}else{var Je;(Je=V.beforeOutsideRef.current)==null||Je.focus()}}}),!A&&ze("start"),n,ze("end"),je&&f.jsx(ov,{"data-type":"inside",ref:Ie,onFocus:De=>{if(d)Hu(ce()[0]);else if(V!=null&&V.preserveTabOrder&&V.portalNode)if(h&&(J.current=!0),vh(De,V.portalNode)){const Xe=h2()||C;Xe?.focus()}else{var Je;(Je=V.afterOutsideRef.current)==null||Je.focus()}}})]})}let fy=0;function XQ(){const t=/iP(hone|ad|od)|iOS/.test(ON()),e=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=e.left?parseFloat(e.left):window.scrollX,o=e.top?parseFloat(e.top):window.scrollY;if(e.overflow="hidden",i&&(e[r]=i+"px"),t){var a,u;const d=((a=window.visualViewport)==null?void 0:a.offsetLeft)||0,p=((u=window.visualViewport)==null?void 0:u.offsetTop)||0;Object.assign(e,{position:"fixed",top:-(o-Math.floor(p))+"px",left:-(s-Math.floor(d))+"px",right:"0"})}return()=>{Object.assign(e,{overflow:"",[r]:""}),t&&(Object.assign(e,{position:"",top:"",left:"",right:""}),window.scrollTo(s,o))}}let sO=()=>{};const e7=H.forwardRef(function(e,n){const{lockScroll:r=!1,...i}=e;return wr(()=>{if(r)return fy++,fy===1&&(sO=XQ()),()=>{fy--,fy===0&&sO()}},[r]),f.jsx("div",{ref:n,...i,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}})});function oO(t){return ni(t.target)&&t.target.tagName==="BUTTON"}function aO(t){return AN(t)}function BN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:a="click",toggle:u=!0,ignoreMouse:d=!1,keyboardHandlers:p=!0,stickIfOpen:h=!0}=e,y=H.useRef(),x=H.useRef(!1),_=H.useMemo(()=>({onPointerDown(S){y.current=S.pointerType},onMouseDown(S){const I=y.current;S.button===0&&a!=="click"&&(Jh(I,!0)&&d||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="mousedown")?r(!1,S.nativeEvent,"click"):(S.preventDefault(),r(!0,S.nativeEvent,"click"))))},onClick(S){const I=y.current;if(a==="mousedown"&&y.current){y.current=void 0;return}Jh(I,!0)&&d||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="click")?r(!1,S.nativeEvent,"click"):r(!0,S.nativeEvent,"click"))},onKeyDown(S){y.current=void 0,!(S.defaultPrevented||!p||oO(S))&&(S.key===" "&&!aO(s)&&(S.preventDefault(),x.current=!0),S.key==="Enter"&&r(!(n&&u),S.nativeEvent,"click"))},onKeyUp(S){S.defaultPrevented||!p||oO(S)||aO(s)||S.key===" "&&x.current&&(x.current=!1,r(!(n&&u),S.nativeEvent,"click"))}}),[i,s,a,d,p,r,n,h,u]);return H.useMemo(()=>o?{reference:_}:{},[o,_])}const t7={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},n7={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},lO=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function zN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=t,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:d="pointerdown",referencePress:p=!1,referencePressEvent:h="pointerdown",ancestorScroll:y=!1,bubbles:x,capture:_}=e,S=Nf(),I=Zi(typeof u=="function"?u:()=>!1),C=typeof u=="function"?I:u,k=H.useRef(!1),R=H.useRef(!1),{escapeKey:j,outsidePress:A}=lO(x),{escapeKey:F,outsidePress:$}=lO(_),P=H.useRef(!1),q=Zi(X=>{var J;if(!n||!o||!a||X.key!=="Escape"||P.current)return;const le=(J=s.current.floatingContext)==null?void 0:J.nodeId,ie=S?Kd(S.nodesRef.current,le):[];if(!j&&(X.stopPropagation(),ie.length>0)){let ne=!0;if(ie.forEach(oe=>{var te;if((te=oe.context)!=null&&te.open&&!oe.context.dataRef.current.__escapeKeyBubbles){ne=!1;return}}),!ne)return}r(!1,I9(X)?X.nativeEvent:X,"escape-key")}),B=Zi(X=>{var J;const le=()=>{var ie;q(X),(ie=Vl(X))==null||ie.removeEventListener("keydown",le)};(J=Vl(X))==null||J.addEventListener("keydown",le)}),L=Zi(X=>{var J;const le=k.current;k.current=!1;const ie=R.current;if(R.current=!1,d==="click"&&ie||le||typeof C=="function"&&!C(X))return;const ne=Vl(X),oe="["+wc("inert")+"]",te=vi(i.floating).querySelectorAll(oe);let ce=lr(ne)?ne:null;for(;ce&&!Ka(ce);){const Ie=rl(ce);if(Ka(Ie)||!lr(Ie))break;ce=Ie}if(te.length&&lr(ne)&&!N9(ne)&&!bi(ne,i.floating)&&Array.from(te).every(Ie=>!bi(ce,Ie)))return;if(ni(ne)&&z){const Ie=Ka(ne),ze=go(ne),je=/auto|scroll/,De=Ie||je.test(ze.overflowX),Je=Ie||je.test(ze.overflowY),Xe=De&&ne.clientWidth>0&&ne.scrollWidth>ne.clientWidth,Ue=Je&&ne.clientHeight>0&&ne.scrollHeight>ne.clientHeight,ut=ze.direction==="rtl",St=Ue&&(ut?X.offsetX<=ne.offsetWidth-ne.clientWidth:X.offsetX>ne.clientWidth),Ot=Xe&&X.offsetY>ne.clientHeight;if(St||Ot)return}const de=(J=s.current.floatingContext)==null?void 0:J.nodeId,ye=S&&Kd(S.nodesRef.current,de).some(Ie=>{var ze;return O0(X,(ze=Ie.context)==null?void 0:ze.elements.floating)});if(O0(X,i.floating)||O0(X,i.domReference)||ye)return;const we=S?Kd(S.nodesRef.current,de):[];if(we.length>0){let Ie=!0;if(we.forEach(ze=>{var je;if((je=ze.context)!=null&&je.open&&!ze.context.dataRef.current.__outsidePressBubbles){Ie=!1;return}}),!Ie)return}r(!1,X,"outside-press")}),U=Zi(X=>{var J;const le=()=>{var ie;L(X),(ie=Vl(X))==null||ie.removeEventListener(d,le)};(J=Vl(X))==null||J.addEventListener(d,le)});H.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=j,s.current.__outsidePressBubbles=A;let X=-1;function J(te){r(!1,te,"ancestor-scroll")}function le(){window.clearTimeout(X),P.current=!0}function ie(){X=window.setTimeout(()=>{P.current=!1},ax()?5:0)}const ne=vi(i.floating);a&&(ne.addEventListener("keydown",F?B:q,F),ne.addEventListener("compositionstart",le),ne.addEventListener("compositionend",ie)),C&&ne.addEventListener(d,$?U:L,$);let oe=[];return y&&(lr(i.domReference)&&(oe=Xl(i.domReference)),lr(i.floating)&&(oe=oe.concat(Xl(i.floating))),!lr(i.reference)&&i.reference&&i.reference.contextElement&&(oe=oe.concat(Xl(i.reference.contextElement)))),oe=oe.filter(te=>{var ce;return te!==((ce=ne.defaultView)==null?void 0:ce.visualViewport)}),oe.forEach(te=>{te.addEventListener("scroll",J,{passive:!0})}),()=>{a&&(ne.removeEventListener("keydown",F?B:q,F),ne.removeEventListener("compositionstart",le),ne.removeEventListener("compositionend",ie)),C&&ne.removeEventListener(d,$?U:L,$),oe.forEach(te=>{te.removeEventListener("scroll",J)}),window.clearTimeout(X)}},[s,i,a,C,d,n,r,y,o,j,A,q,F,B,L,$,U]),H.useEffect(()=>{k.current=!1},[C,d]);const V=H.useMemo(()=>({onKeyDown:q,...p&&{[t7[h]]:X=>{r(!1,X.nativeEvent,"reference-press")},...h!=="click"&&{onClick(X){r(!1,X.nativeEvent,"reference-press")}}}}),[q,r,p,h]),z=H.useMemo(()=>({onKeyDown:q,onMouseDown(){R.current=!0},onMouseUp(){R.current=!0},[n7[d]]:()=>{k.current=!0}}),[q,d]);return H.useMemo(()=>o?{reference:V,floating:z}:{},[o,V,z])}function r7(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=MN(),s=H.useRef({}),[o]=H.useState(()=>l2()),a=Am()!=null,[u,d]=H.useState(r.reference),p=Zi((x,_,S)=>{s.current.openEvent=x?_:void 0,o.emit("openchange",{open:x,event:_,reason:S,nested:a}),n?.(x,_,S)}),h=H.useMemo(()=>({setPositionReference:d}),[]),y=H.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return H.useMemo(()=>({dataRef:s,open:e,onOpenChange:p,elements:y,events:o,floatingId:i,refs:h}),[e,p,y,o,i,h])}function WN(t){t===void 0&&(t={});const{nodeId:e}=t,n=r7({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=H.useState(null),[a,u]=H.useState(null),p=i?.domReference||s,h=H.useRef(null),y=Nf();wr(()=>{p&&(h.current=p)},[p]);const x=kQ({...t,elements:{...i,...a&&{reference:a}}}),_=H.useCallback(R=>{const j=lr(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),contextElement:R}:R;u(j),x.refs.setReference(j)},[x.refs]),S=H.useCallback(R=>{(lr(R)||R===null)&&(h.current=R,o(R)),(lr(x.refs.reference.current)||x.refs.reference.current===null||R!==null&&!lr(R))&&x.refs.setReference(R)},[x.refs]),I=H.useMemo(()=>({...x.refs,setReference:S,setPositionReference:_,domReference:h}),[x.refs,S,_]),C=H.useMemo(()=>({...x.elements,domReference:p}),[x.elements,p]),k=H.useMemo(()=>({...x,...r,refs:I,elements:C,nodeId:e}),[x,I,C,e,r]);return wr(()=>{r.dataRef.current.floatingContext=k;const R=y?.nodesRef.current.find(j=>j.id===e);R&&(R.context=k)}),H.useMemo(()=>({...x,context:k,refs:I,elements:C}),[x,I,C,k])}function i7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=t,{enabled:a=!0,visibleOnly:u=!0}=e,d=H.useRef(!1),p=H.useRef(),h=H.useRef(!0);H.useEffect(()=>{if(!a)return;const x=ws(o.domReference);function _(){!n&&ni(o.domReference)&&o.domReference===Fo(vi(o.domReference))&&(d.current=!0)}function S(){h.current=!0}return x.addEventListener("blur",_),x.addEventListener("keydown",S,!0),()=>{x.removeEventListener("blur",_),x.removeEventListener("keydown",S,!0)}},[o.domReference,n,a]),H.useEffect(()=>{if(!a)return;function x(_){let{reason:S}=_;(S==="reference-press"||S==="escape-key")&&(d.current=!0)}return i.on("openchange",x),()=>{i.off("openchange",x)}},[i,a]),H.useEffect(()=>()=>{clearTimeout(p.current)},[]);const y=H.useMemo(()=>({onPointerDown(x){qN(x.nativeEvent)||(h.current=!1)},onMouseLeave(){d.current=!1},onFocus(x){if(d.current)return;const _=Vl(x.nativeEvent);if(u&&lr(_))try{if(zD()&&S9())throw Error();if(!_.matches(":focus-visible"))return}catch{if(!h.current&&!AN(_))return}r(!0,x.nativeEvent,"focus")},onBlur(x){d.current=!1;const _=x.relatedTarget,S=x.nativeEvent,I=lr(_)&&_.hasAttribute(wc("focus-guard"))&&_.getAttribute("data-type")==="outside";p.current=window.setTimeout(()=>{var C;const k=Fo(o.domReference?o.domReference.ownerDocument:document);!_&&k===o.domReference||bi((C=s.current.floatingContext)==null?void 0:C.refs.floating.current,k)||bi(o.domReference,k)||I||r(!1,S,"focus")})}}),[s,o.domReference,r,u]);return H.useMemo(()=>a?{reference:y}:{},[a,y])}const uO="active",cO="selected";function M0(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[uO]:o,[cO]:a,...u}=t;s=u}return{...n==="floating"&&{tabIndex:-1,[uI]:""},...s,...e.map(o=>{const a=o?o[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[d,p]=u;if(!(i&&[uO,cO].includes(d)))if(d.indexOf("on")===0){if(r.has(d)||r.set(d,[]),typeof p=="function"){var h;(h=r.get(d))==null||h.push(p),o[d]=function(){for(var y,x=arguments.length,_=new Array(x),S=0;S<x;S++)_[S]=arguments[S];return(y=r.get(d))==null?void 0:y.map(I=>I(..._)).find(I=>I!==void 0)}}}else o[d]=p}),o),{})}}function UN(t){t===void 0&&(t=[]);const e=t.map(a=>a?.reference),n=t.map(a=>a?.floating),r=t.map(a=>a?.item),i=H.useCallback(a=>M0(a,t,"reference"),e),s=H.useCallback(a=>M0(a,t,"floating"),n),o=H.useCallback(a=>M0(a,t,"item"),r);return H.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function fx(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function dO(t,e){return fx(e,t===LN||t===qm,t===eu||t===tu)}function $0(t,e,n){return fx(e,t===qm,n?t===eu:t===tu)||t==="Enter"||t===" "||t===""}function s7(t,e,n){return fx(e,n?t===eu:t===tu,t===qm)}function fO(t,e,n){return fx(e,n?t===tu:t===eu,t===LN)}function o7(t,e){const{open:n,onOpenChange:r,elements:i}=t,{listRef:s,activeIndex:o,onNavigate:a=()=>{},enabled:u=!0,selectedIndex:d=null,allowEscape:p=!1,loop:h=!1,nested:y=!1,rtl:x=!1,virtual:_=!1,focusItemOnOpen:S="auto",focusItemOnHover:I=!0,openOnArrowKeyDown:C=!0,disabledIndices:k=void 0,orientation:R="vertical",cols:j=1,scrollItemIntoView:A=!0,virtualItemRef:F,itemSizes:$,dense:P=!1}=e,q=cI(i.floating),B=Yi(q),L=Am(),U=Nf(),V=Zi(()=>{a(J.current===-1?null:J.current)}),z=WD(i.domReference),X=H.useRef(S),J=H.useRef(d??-1),le=H.useRef(null),ie=H.useRef(!0),ne=H.useRef(V),oe=H.useRef(!!i.floating),te=H.useRef(n),ce=H.useRef(!1),de=H.useRef(!1),ye=Yi(k),we=Yi(n),Ie=Yi(A),ze=Yi(d),[je,De]=H.useState(),[Je,Xe]=H.useState(),Ue=Zi(()=>{function be(Ve){_?(De(Ve.id),U?.events.emit("virtualfocus",Ve),F&&(F.current=Ve)):Hu(Ve,{sync:ce.current,preventScroll:!0})}const Ne=s.current[J.current];Ne&&be(Ne),(ce.current?Ve=>Ve():requestAnimationFrame)(()=>{const Ve=s.current[J.current]||Ne;if(!Ve)return;Ne||be(Ve);const rt=Ie.current;rt&&St&&(de.current||!ie.current)&&(Ve.scrollIntoView==null||Ve.scrollIntoView(typeof rt=="boolean"?{block:"nearest",inline:"nearest"}:rt))})});wr(()=>{u&&(n&&i.floating?X.current&&d!=null&&(de.current=!0,J.current=d,V()):oe.current&&(J.current=-1,ne.current()))},[u,n,i.floating,d,V]),wr(()=>{if(u&&n&&i.floating)if(o==null){if(ce.current=!1,ze.current!=null)return;if(oe.current&&(J.current=-1,Ue()),(!te.current||!oe.current)&&X.current&&(le.current!=null||X.current===!0&&le.current==null)){let be=0;const Ne=()=>{s.current[0]==null?(be<2&&(be?requestAnimationFrame:queueMicrotask)(Ne),be++):(J.current=le.current==null||$0(le.current,R,x)||y?P0(s,ye.current):Kj(s,ye.current),le.current=null,V())};Ne()}}else bh(s,o)||(J.current=o,Ue(),de.current=!1)},[u,n,i.floating,o,ze,y,s,R,x,V,Ue,ye]),wr(()=>{var be;if(!u||i.floating||!U||_||!oe.current)return;const Ne=U.nodesRef.current,Ae=(be=Ne.find(Me=>Me.id===L))==null||(be=be.context)==null?void 0:be.elements.floating,Ve=Fo(vi(i.floating)),rt=Ne.some(Me=>Me.context&&bi(Me.context.elements.floating,Ve));Ae&&!rt&&ie.current&&Ae.focus({preventScroll:!0})},[u,i.floating,U,L,_]),wr(()=>{if(!u||!U||!_||L)return;function be(Ne){Xe(Ne.id),F&&(F.current=Ne)}return U.events.on("virtualfocus",be),()=>{U.events.off("virtualfocus",be)}},[u,U,_,L,F]),wr(()=>{ne.current=V,te.current=n,oe.current=!!i.floating}),wr(()=>{n||(le.current=null)},[n]);const ut=o!=null,St=H.useMemo(()=>{function be(Ae){if(!n)return;const Ve=s.current.indexOf(Ae);Ve!==-1&&J.current!==Ve&&(J.current=Ve,V())}return{onFocus(Ae){let{currentTarget:Ve}=Ae;ce.current=!0,be(Ve)},onClick:Ae=>{let{currentTarget:Ve}=Ae;return Ve.focus({preventScroll:!0})},...I&&{onMouseMove(Ae){let{currentTarget:Ve}=Ae;ce.current=!0,de.current=!1,be(Ve)},onPointerLeave(Ae){let{pointerType:Ve}=Ae;if(!(!ie.current||Ve==="touch")&&(ce.current=!0,J.current=-1,V(),!_)){var rt;(rt=B.current)==null||rt.focus({preventScroll:!0})}}}}},[n,B,I,s,V,_]),Ot=Zi(be=>{if(ie.current=!1,ce.current=!0,be.which===229||!we.current&&be.currentTarget===B.current)return;if(y&&fO(be.key,R,x)){Ki(be),r(!1,be.nativeEvent,"list-navigation"),ni(i.domReference)&&(_?U?.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const Ne=J.current,Ae=P0(s,k),Ve=Kj(s,k);if(z||(be.key==="Home"&&(Ki(be),J.current=Ae,V()),be.key==="End"&&(Ki(be),J.current=Ve,V())),j>1){const rt=$||Array.from({length:s.current.length},()=>({width:1,height:1})),Me=qQ(rt,j,P),ct=Me.findIndex(wn=>wn!=null&&!eb(s.current,wn,k)),Jt=Me.reduce((wn,dr,Bn)=>dr!=null&&!eb(s.current,dr,k)?Bn:wn,-1),Zt=Me[OQ({current:Me.map(wn=>wn!=null?s.current[wn]:null)},{event:be,orientation:R,loop:h,rtl:x,cols:j,disabledIndices:PQ([...k||s.current.map((wn,dr)=>eb(s.current,dr)?dr:void 0),void 0],Me),minIndex:ct,maxIndex:Jt,prevIndex:AQ(J.current>Ve?Ae:J.current,rt,Me,j,be.key===qm?"bl":be.key===(x?eu:tu)?"tr":"tl"),stopEvent:!0})];if(Zt!=null&&(J.current=Zt,V()),R==="both")return}if(dO(be.key,R)){if(Ki(be),n&&!_&&Fo(be.currentTarget.ownerDocument)===be.currentTarget){J.current=$0(be.key,R,x)?Ae:Ve,V();return}$0(be.key,R,x)?h?J.current=Ne>=Ve?p&&Ne!==s.current.length?-1:Ae:ji(s,{startingIndex:Ne,disabledIndices:k}):J.current=Math.min(Ve,ji(s,{startingIndex:Ne,disabledIndices:k})):h?J.current=Ne<=Ae?p&&Ne!==-1?s.current.length:Ve:ji(s,{startingIndex:Ne,decrement:!0,disabledIndices:k}):J.current=Math.max(Ae,ji(s,{startingIndex:Ne,decrement:!0,disabledIndices:k})),bh(s,J.current)&&(J.current=-1),V()}}),Gt=H.useMemo(()=>_&&n&&ut&&{"aria-activedescendant":Je||je},[_,n,ut,Je,je]),an=H.useMemo(()=>({"aria-orientation":R==="both"?void 0:R,...z?{}:Gt,onKeyDown:Ot,onPointerMove(){ie.current=!0}}),[Gt,Ot,R,z]),xe=H.useMemo(()=>{function be(Ae){S==="auto"&&BD(Ae.nativeEvent)&&(X.current=!0)}function Ne(Ae){X.current=S,S==="auto"&&qN(Ae.nativeEvent)&&(X.current=!0)}return{...Gt,onKeyDown(Ae){ie.current=!1;const Ve=Ae.key.startsWith("Arrow"),rt=["Home","End"].includes(Ae.key),Me=Ve||rt,ct=s7(Ae.key,R,x),Jt=fO(Ae.key,R,x),Zt=dO(Ae.key,R),wn=(y?ct:Zt)||Ae.key==="Enter"||Ae.key.trim()==="";if(_&&n){const Ui=U?.nodesRef.current.find(Yt=>Yt.parentId==null),kr=U&&Ui?WQ(U.nodesRef.current,Ui.id):null;if(Me&&kr&&F){const Yt=new KeyboardEvent("keydown",{key:Ae.key,bubbles:!0});if(ct||Jt){var dr,Bn;const rs=((dr=kr.context)==null?void 0:dr.elements.domReference)===Ae.currentTarget,is=Jt&&!rs?(Bn=kr.context)==null?void 0:Bn.elements.domReference:ct?s.current.find(ss=>ss?.id===je):null;is&&(Ki(Ae),is.dispatchEvent(Yt),Xe(void 0))}if((Zt||rt)&&kr.context&&kr.context.open&&kr.parentId&&Ae.currentTarget!==kr.context.elements.domReference){var Zr;Ki(Ae),(Zr=kr.context.elements.domReference)==null||Zr.dispatchEvent(Yt);return}}return Ot(Ae)}if(!(!n&&!C&&Ve)){if(wn&&(le.current=y&&Zt?null:Ae.key),y){ct&&(Ki(Ae),n?(J.current=P0(s,ye.current),V()):r(!0,Ae.nativeEvent,"list-navigation"));return}Zt&&(d!=null&&(J.current=d),Ki(Ae),!n&&C?r(!0,Ae.nativeEvent,"list-navigation"):Ot(Ae),n&&V())}},onFocus(){n&&!_&&(J.current=-1,V())},onPointerDown:Ne,onPointerEnter:Ne,onMouseDown:be,onClick:be}},[je,Gt,Ot,ye,S,s,y,V,r,n,C,R,x,d,U,_,F]);return H.useMemo(()=>u?{reference:xe,floating:an,item:St}:{},[u,xe,an,St])}const pO=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function pd(t,e){return typeof t=="function"?t(e):t}function a7(t,e){const[n,r]=H.useState(t);return t&&!n&&r(!0),H.useEffect(()=>{if(!t&&n){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,n,e]),n}function l7(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[a,u]=H.useState("unmounted"),d=a7(n,o);return!d&&a==="close"&&u("unmounted"),wr(()=>{if(r){if(n){u("initial");const p=requestAnimationFrame(()=>{u("open")});return()=>{cancelAnimationFrame(p)}}u("close")}},[n,r]),{isMounted:d,status:a}}function VN(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:s,duration:o=250}=e,a=t.placement,u=a.split("-")[0],d=H.useMemo(()=>({side:u,placement:a}),[u,a]),p=typeof o=="number",h=(p?o:o.open)||0,y=(p?o:o.close)||0,[x,_]=H.useState(()=>({...pd(s,d),...pd(n,d)})),{isMounted:S,status:I}=l7(t,{duration:o}),C=Yi(n),k=Yi(r),R=Yi(i),j=Yi(s);return wr(()=>{const A=pd(C.current,d),F=pd(R.current,d),$=pd(j.current,d),P=pd(k.current,d)||Object.keys(A).reduce((q,B)=>(q[B]="",q),{});if(I==="initial"&&_(q=>({transitionProperty:q.transitionProperty,...$,...A})),I==="open"&&_({transitionProperty:Object.keys(P).map(pO).join(","),transitionDuration:h+"ms",...$,...P}),I==="close"){const q=F||A;_({transitionProperty:Object.keys(q).map(pO).join(","),transitionDuration:y+"ms",...$,...q})}},[y,R,C,k,j,h,I,d]),{isMounted:S,styles:x}}const u7=H.createContext({close(){}}),c7=En({slot:{target:["flex","justify-center","items-center"],portal:[]},variant:{mounted:{true:[]}},match:[{if:{mounted:!1},then:{portal:["hidden"]}}],defaults:{mounted:!1}}),d7=({target:t,action:e="hover",disabled:n=!1,closeOnClick:r=!1,delay:i=100,float:s,variant:o,tva:a=c7,css:u,children:d})=>{const[p,h]=H.useState(!1),{refs:y,floatingStyles:x,context:_}=WN({open:p,onOpenChange:h,placement:"top",whileElementsMounted:r2,middleware:[s2(10),o2({fallbackAxisSideDirection:"start"}),CQ()],...s}),{getReferenceProps:S,getFloatingProps:I}=UN([zQ(_,{enabled:e==="hover",delay:i}),BN(_,{enabled:e==="click"}),i7(_),zN(_)]),{isMounted:C,styles:k}=VN(_),R=a({mounted:C,...o,css:u}).slots;return f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",ref:y.setReference,...S(),disabled:n,className:R.target(),children:t}),f.jsx($N,{children:f.jsx("div",{ref:y.setFloating,style:{...x,...k},className:R.portal(),...I(),onClick:r?()=>{h(!1)}:void 0,children:f.jsx(u7.Provider,{value:{close(){h(!1)}},children:d})})})]})},b2="icon-[system-uicons--menu-hamburger]",v2=En({slot:{base:[]},variant:{size:{xs:"text-sm",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl"},disabled:{true:[]}},match:[{if:{disabled:!0},then:{base:["pointer-events-none","cursor-not-allowed","text-gray-400","opacity-50"]}}],defaults:{size:"xl",disabled:!1}}),on=({icon:t,variant:e,tva:n=v2,css:r,...i})=>{const s=n({...e,css:r}).slots;return t?f.jsx("div",{className:s.base({css:[t]}),...i}):null},f7=En({slot:{base:["p-1","bg-slate-50","border","border-slate-300","rounded-sm","shadow-md","text-slate-500","flex","flex-col","gap-2"]},variant:{},defaults:{}}),ur=({icon:t=b2,iconProps:e,children:n,variant:r,tva:i=f7,css:s,...o})=>{const a=i({...r,css:s}).slots;return f.jsx(BQ,{children:f.jsx(d7,{action:"click",target:f.jsx(on,{icon:t,...e}),delay:100,float:{placement:"bottom-start"},closeOnClick:!0,...o,children:f.jsx("div",{className:a.base(),children:n})})})},x2="icon-[svg-spinners--90-ring-with-bg]",p7=En({slot:{base:["flex","items-center","justify-center","gap-2","group","w-fit","h-fit","rounded-sm","cursor-pointer","hover:shadow-md","hover:shadow-slate-200","transition-all","hover:bg-slate-200","text-slate-600","text-2xl","p-1"]},variant:{disabled:{true:["cursor-not-allowed","pointer-events-none"]},loading:{true:["cursor-not-allowed","pointer-events-none"]}},match:[{if:{disabled:!0},then:{base:["opacity-50","hover:bg-blue-400"]}}],defaults:{disabled:!1,loading:!1}}),Pm=({iconEnabled:t,iconDisabled:e,iconLoading:n=x2,disabled:r=!1,loading:i=!1,onClick:s,variant:o,tva:a=p7,css:u,children:d,...p})=>{const h=a({disabled:r,loading:i,...o,css:u}).slots;return f.jsxs("div",{className:h.base(),onClick:r?void 0:s,...p,children:[r?f.jsx(on,{icon:i?n:e??t}):f.jsx(on,{icon:i?n:t}),d]})},HN="icon-[iconamoon--close-light]",px=H.createContext(void 0),h7=En({slot:{base:["bg-slate-400/75","backdrop-blur-xs","flex","justify-center","py-12"],target:[],modal:["bg-white","rounded-lg","shadow-lg","p-4","w-fit","h-fit","max-h-full","overflow-y-auto","relative","w-2/3","max-w-1/2"]},variant:{disabled:{true:["pointer-events-none"]},loading:{true:[]}},match:[{if:{loading:!0},then:{base:["pointer-events-none","opacity-50"]}}],defaults:{disabled:!1,loading:!1}}),kf=({target:t,icon:e,textTitle:n,disabled:r=!1,defaultOpen:i=!1,outside:s=!1,variant:o,css:a,tva:u=h7,children:d})=>{const[p,h]=H.useState(i),y=MQ(),{refs:x,context:_}=WN({nodeId:y,open:p,onOpenChange:h}),S=BN(_),I=zN(_,{outsidePress:s}),{getReferenceProps:C,getFloatingProps:k}=UN([S,I]),{isMounted:R,styles:j}=VN(_),A=u({disabled:r,...o,css:a}).slots;return f.jsxs(px.Provider,{value:{close(){h(!1)}},children:[f.jsx("div",{ref:x.setReference,...C({disabled:r}),className:A.target(),children:t}),f.jsx($Q,{id:y,children:R&&f.jsx(f.Fragment,{children:f.jsx($N,{children:f.jsx(e7,{lockScroll:!0,style:j,className:A.base(),children:f.jsx(y2,{context:_,children:f.jsxs("div",{ref:x.setFloating,...k(),className:A.modal(),children:[f.jsxs("div",{className:"border-b border-slate-200 mb-2 py-1.5 flex flex-row items-center justify-between select-none",children:[f.jsxs("div",{className:"flex flex-row items-center gap-2 pr-4",children:[e&&(Jv(e)?f.jsx(on,{icon:e,variant:{size:"xl"}}):e),n&&f.jsx("div",{className:"text-lg font-semibold text-slate-700",children:n})]}),f.jsx(Pm,{iconEnabled:HN,onClick:()=>h(!1)})]}),g9(d)?f.jsx(d,{close:()=>h(!1)}):d]})})})})})})]})},m7=En({use:DD,slot:{},variant:{},defaults:{}}),jn=({icon:t,iconProps:e,label:n,disabled:r=!1,hidden:i=!1,variant:s,tva:o=m7,css:a,...u})=>{const d=o({...s,disabled:r,css:a}).slots;return i?null:f.jsxs("div",{className:d.base(),children:[Jv(t)?f.jsx(on,{icon:t,...e}):t,f.jsx(kf,{icon:t,target:n,disabled:r,css:{modal:["w-1/2"]},...u})]})},g7=En({slot:{base:["flex","flex-row","gap-2","items-center","rounded-2xl","bg-blue-50","border","border-blue-200","text-xs","px-4","py-0.5","font-bold"]},variant:{},defaults:{}}),_s=({variant:t,tva:e=g7,css:n,...r})=>{const i=e({...t,css:n}).slots;return f.jsx("div",{className:i.base(),...r})},dI="icon-[material-symbols-light--check-small]",y7="icon-[material-symbols-light--close-small]",b7="icon-[material-symbols-light--check-indeterminate-small]",v7=En({use:v2,slot:{},variant:{value:{true:"text-green-600",false:"text-amber-600"}},defaults:{value:!1}}),hx=({value:t,checkIcon:e=dI,unCheckIcon:n=y7,undefinedIcon:r=b7,tva:i=v7,...s})=>t==null?f.jsx(on,{icon:r,tva:i,...s}):f.jsx(on,{icon:t?e:n,tva:o=>i({...o,value:t}),...s}),x7=En({slot:{base:["flex","items-center","justify-between","text-sm","font-medium","text-slate-900","w-full"],switch:["relative","w-11","h-6","bg-gray-200","peer-focus:outline-hidden","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","peer-checked:rtl:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"]},variant:{},defaults:{}}),w2=({value:t,onChange:e,variant:n,tva:r=x7,css:i,...s})=>{const o=r({...n,css:i}).slots;return f.jsx("div",{className:o.base(),children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:t,className:"sr-only peer",onChange:a=>{e(a.target.checked)},...s}),f.jsx("div",{className:o.switch()})]})})},w7=En({slot:{base:["flex","flex-row","items-center","justify-center","gap-2","group","rounded-sm","transition-all","cursor-pointer"]},variant:{variant:{primary:["text-white"],secondary:["text-slate-700"],subtle:["text-slate-600"],danger:["text-slate-50"]},disabled:{true:"cursor-not-allowed"},size:{xs:[],sm:[],md:[]}},match:[{if:{variant:"primary"},then:{base:["bg-blue-400","hover:bg-blue-500"]}},{if:{variant:"primary",disabled:!0},then:{base:["opacity-50","bg-blue-600","hover:bg-blue-600","cursor-not-allowed"]}},{if:{variant:"secondary"},then:{base:["bg-amber-400","hover:bg-amber-500"]}},{if:{variant:"secondary",disabled:!0},then:{base:["opacity-50","bg-amber-600","hover:bg-amber-600","cursor-not-allowed"]}},{if:{variant:"subtle"},then:{base:["text-slate-600","hover:text-slate-800","hover:bg-blue-50"]}},{if:{variant:"subtle",disabled:!0},then:{base:["opacity-50","bg-blue-50","hover:bg-blue-50","cursor-not-allowed"]}},{if:{variant:"danger"},then:{base:["bg-red-400","hover:bg-red-500","hover:text-white"]}},{if:{size:"xs"},then:{base:["py-0.5","px-1"]}},{if:{size:"sm"},then:{base:["py-1","px-2"]}},{if:{size:"md"},then:{base:["py-2","px-4"]}}],defaults:{variant:"primary",disabled:!1,size:"md"}}),vn=({iconEnabled:t,iconDisabled:e,iconLoading:n=x2,iconProps:r,loading:i,variant:s,tva:o=w7,css:a,children:u,...d})=>{const p=o({disabled:d.disabled,...s,css:a}).slots;return f.jsxs("button",{type:"button",className:p.base({disabled:d.disabled}),...d,children:[d.disabled?f.jsx(on,{icon:i===!0?n:e,variant:{size:"xl"},...r}):f.jsx(on,{icon:i===!0?n:t,variant:{size:"xl"},...r}),u]})},GN=H.createContext({inline:!1}),_7=En({slot:{base:["border","border-slate-100","px-2","py-1","rounded-md"],label:["text-sm","font-semibold","text-slate-600","border-b","mb-2"],value:[]},variant:{inline:{true:[]},withBackground:{true:[]}},match:[{if:{inline:!0},then:{base:["border-none","flex","flex-row","items-center","gap-2"],label:["mb-0","font-light","text-md","text-slate-600","border-none"],value:["text-md","text-slate-800"]}},{if:{withBackground:!0},then:{base:["bg-slate-50","hover:bg-slate-100"]}}],defaults:{inline:!1,withBackground:!0}}),S7=({inline:t,label:e,value:n,variant:r,tva:i=_7,css:s})=>{const o=H.useContext(GN),a=t??o?.inline,u=i({inline:a,...r,css:s}).slots;return f.jsxs("div",{className:u.base(),children:[e?f.jsx("div",{className:u.label(),children:e}):null,f.jsx("div",{className:u.value(),children:n})]})},E7=En({slot:{base:["flex","flex-col","gap-4","border","border-slate-100","p-4","rounded-lg"]},variant:{inline:{true:["flex-row","border-none","gap-1","p-0","flex-1"]}},defaults:{inline:!1}}),_2=({items:t,hidden:e=[],valueOfProps:n,entity:r,variant:i,tva:s=E7,css:o,inline:a=!1})=>{const u=s({inline:a,...i,css:o}).slots;return f.jsx(GN.Provider,{value:{inline:a},children:f.jsx("div",{className:u.base(),children:t.filter(({id:d})=>!e.includes(d)).map(({id:d,render:p,...h})=>f.jsx(S7,{value:f.jsx(p,{entity:r}),...n,...h},d))})})},I7=En({slot:{base:["flex","flex-col","gap-2"]},variant:{},defaults:{}}),hO="icon-[tabler--dots]",N7=En({slot:{base:["flex","items-center","justify-between","gap-2"],sums:["flex","items-center","gap-2","text-sm"]},variant:{},defaults:{}}),k7=En({slot:{base:["select-none"],list:["flex","items-center","-space-x-px","text-xs","gap-2"],page:["flex","items-center","justify-center","w-12","px-2","py-1","rounded-sm","border","border-slate-200","hover:bg-slate-200","cursor-pointer","transition-all","duration-200"]},variant:{current:{true:[]}},match:[{if:{current:!0},then:{page:["bg-slate-100","hover:bg-slate-200","text-slate-800","font-bold"]}}],defaults:{current:!1}}),B0=({pages:t,page:e,onPage:n,variant:r,tva:i=k7,css:s})=>{const o=i({...r,css:s}).slots;return f.jsx("nav",{className:o.base(),children:f.jsx("ul",{className:o.list(),children:t.map((a,u)=>f.jsx("li",{className:o.page({current:e===a-1}),onClick:()=>n(a-1),children:a},`page-${a}-${u}`))})})},C7=En({slot:{base:["cursor-pointer","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","p-2.5","hover:shadow-md","transition-all","group"],input:["flex","flex-row","items-center","justify-between","gap-2"],popup:["z-50","cursor-pointer","overflow-y-auto","rounded-sm","border","border-slate-300","bg-white","shadow-lg","focus:outline-hidden"],item:["focus:outline-hidden","py-2","px-2.5","flex","items-center","justify-between"]},variant:{disabled:{true:["cursor-not-allowed","hover:shadow-none","focus:border-slate-300","opacity-50"]},active:{true:[]},selected:{true:[]}},match:[{if:{selected:!0},then:{item:["bg-slate-100"]}},{if:{active:!0},then:{item:["bg-slate-200"]}}],defaults:{disabled:!1,selected:!1,active:!1}}),KN=({items:t,icon:e,defaultValue:n,render:r,textSelect:i,disabled:s=!1,onItem:o,onSelect:a,onChange:u,value:d,variant:p,tva:h=C7,css:y})=>{const[x,_]=H.useState(!1),[S,I]=H.useState(null),[C,k]=H.useState(t.findIndex(ne=>ne.id===n));H.useEffect(()=>{k(t.findIndex(ne=>ne.id===d))},[d]);const{refs:R,floatingStyles:j,context:A}=WN({placement:"bottom-start",open:x,onOpenChange:_,whileElementsMounted:r2,middleware:[s2(5),o2({padding:10}),TQ({apply({rects:ne,elements:oe,availableHeight:te}){Object.assign(oe.floating.style,{maxHeight:`${te}px`,minWidth:`${ne.reference.width}px`})},padding:10})]}),F=H.useRef([]),$=H.useRef(!1),P=BN(A,{event:"mousedown"}),q=zN(A),B=o7(A,{listRef:F,activeIndex:S,selectedIndex:C,onNavigate:I,loop:!0}),{getReferenceProps:L,getFloatingProps:U,getItemProps:V}=UN([q,B,P]),{isMounted:z,styles:X}=VN(A),J=ne=>{k(ne),_(!1);const oe=t[ne];oe&&o?.(oe),a?.(oe),u?.(oe?.id)},le=C===null?void 0:t[C],ie=h({disabled:s,...p,css:y}).slots;return f.jsxs(f.Fragment,{children:[f.jsx("div",{tabIndex:s?-1:0,ref:s?void 0:R.setReference,"aria-labelledby":"select-label","aria-autocomplete":"none",...s?{}:L(),className:ie.base(),children:f.jsxs("div",{className:ie.input(),children:[e?f.jsx(on,{icon:e,variant:{size:"xl"},css:{base:["text-slate-400","group-hover:text-slate-600"]}}):null,le?f.jsx(r,{entity:le}):i||pa.rich("Select item"),f.jsx(on,{icon:"icon-[gg--select]",variant:{size:"xl"},css:{base:[!x&&"text-slate-400",x&&"text-slate-600","group-hover:text-slate-600"]}})]})}),z&&f.jsx($N,{children:f.jsx(y2,{context:A,modal:!1,children:f.jsx("div",{ref:R.setFloating,style:{...j,...X},className:ie.popup(),...U(),children:t.map((ne,oe)=>f.jsxs("div",{ref:te=>{F.current[oe]=te},role:"option",tabIndex:oe===S?0:-1,"aria-selected":oe===C&&oe===S,className:ie.item({selected:oe===C,active:oe===S}),...V({onClick(){J(oe)},onKeyDown(te){te.key==="Enter"&&(te.preventDefault(),J(oe)),te.key===" "&&!$.current&&(te.preventDefault(),J(oe))}}),children:[f.jsx(r,{entity:ne}),oe===C&&f.jsx(on,{icon:"icon-[basil--check-outline]",variant:{size:"xl"}})]},ne.id))})})})]})},T7=({sizes:t=[5,15,30,50,100],size:e,onSize:n,...r})=>f.jsx(KN,{items:t.map(i=>({id:`${i}`,size:i})),defaultValue:`${e}`,value:`${e}`,onItem:({size:i})=>n(i),render:({entity:{size:i}})=>i,css:{base:["px-8","py-1"],item:["px-8","py-1"]},...r}),mO=({cursor:t,count:e,textTotal:n,onPage:r,onSize:i,variant:s,tva:o=N7,css:a})=>{const u=H.useMemo(()=>s9({page:t.page,total:Math.ceil(e.filter/t.size),siblings:1,boundaries:1}),[t.page,e.filter,t.size]),d=o({...s,css:a}).slots;return f.jsxs("div",{className:d.base(),children:[u.total>1?f.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[["both","start"].includes(u.type)&&f.jsxs(f.Fragment,{children:[f.jsx(B0,{page:t.page,pages:u.start,onPage:r}),f.jsx(on,{icon:hO})]}),f.jsx(B0,{page:t.page,pages:u.pages,onPage:r}),["both","end"].includes(u.type)&&f.jsxs(f.Fragment,{children:[f.jsx(on,{icon:hO}),f.jsx(B0,{page:t.page,pages:u.end,onPage:r})]})]}):null,f.jsxs("div",{className:d.sums(),children:[f.jsx("div",{children:n}),f.jsx("div",{className:"font-bold",children:e.filter}),e.filter!==e.where&&f.jsxs(f.Fragment,{children:[f.jsx("div",{children:"/"}),f.jsx("div",{className:"font-semibold",children:e.where})]})]}),f.jsx(T7,{size:t.size,onSize:i})]})},gO="function",Td="64e10b34-2bf7-4616-9668-f99de5aa046e",R7="get",j7="has",O7="set",{isArray:tb}=Array;let{SharedArrayBuffer:av,window:q7}=globalThis,{notify:S2,wait:E2,waitAsync:lv}=Atomics,I2=null;lv||(lv=t=>({value:new Promise(e=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=e,n.postMessage(t)})}));try{new av(4)}catch{av=ArrayBuffer;const e=new WeakMap;if(q7){const n=new Map,{prototype:{postMessage:r}}=Worker,i=s=>{const o=s.data?.[Td];if(!tb(o)){s.stopImmediatePropagation();const{id:a,sb:u}=o;n.get(a)(u)}};I2=function(s,...o){const a=s?.[Td];if(tb(a)){const[u,d]=a;e.set(d,u),this.addEventListener("message",i)}return r.call(this,s,...o)},lv=s=>({value:new Promise(o=>{n.set(e.get(s),o)}).then(o=>{n.delete(e.get(s)),e.delete(s);for(let a=0;a<o.length;a++)s[a]=o[a];return"ok"})})}else{const n=(r,i)=>({[Td]:{id:r,sb:i}});S2=r=>{postMessage(n(e.get(r),r))},addEventListener("message",r=>{const i=r.data?.[Td];if(tb(i)){const[s,o]=i;e.set(o,s)}})}}const{Int32Array:fI,Map:yO,Uint16Array:pI}=globalThis,{BYTES_PER_ELEMENT:bO}=fI,{BYTES_PER_ELEMENT:A7}=pI,P7=(t,e,n)=>{for(;E2(t,0,0,e)==="timed-out";)n()},hI=new WeakSet,z0=new WeakMap,F7={value:{then:t=>t()}};let D7=0;const QN=(t,{parse:e=JSON.parse,stringify:n=JSON.stringify,transform:r,interrupt:i}=JSON)=>{if(!z0.has(t)){const s=I2||t.postMessage,o=(y,...x)=>s.call(t,{[Td]:x},{transfer:y}),a=typeof i===gO?i:i?.handler,u=i?.delay||42,d=new TextDecoder("utf-16"),p=(y,x)=>y?lv(x,0):(a?P7(x,u,a):E2(x,0),F7);let h=!1;z0.set(t,new Proxy(new yO,{[j7]:(y,x)=>typeof x=="string"&&!x.startsWith("_"),[R7]:(y,x)=>x==="then"?null:(..._)=>{const S=D7++;let I=new fI(new av(bO*2)),C=[];hI.has(_.at(-1)||C)&&hI.delete(C=_.pop()),o(C,S,I,x,r?_.map(r):_);const k=t!==globalThis;let R=0;return h&&k&&(R=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${x}(...args) is awaited`)),p(k,I).value.then(()=>{clearTimeout(R);const j=I[1];if(!j)return;const A=A7*j;return I=new fI(new av(A+A%bO)),o([],S,I),p(k,I).value.then(()=>e(d.decode(new pI(I.buffer).slice(0,j))))})},[O7](y,x,_){const S=typeof _;if(S!==gO)throw new Error(`Unable to assign ${x} as ${S}`);if(!y.size){const I=new yO;t.addEventListener("message",async C=>{const k=C.data?.[Td];if(tb(k)){C.stopImmediatePropagation();const[R,j,...A]=k;let F;if(A.length){const[$,P]=A;if(y.has($)){h=!0;try{const q=await y.get($)(...P);if(q!==void 0){const B=n(r?r(q):q);I.set(R,B),j[1]=B.length}}catch(q){F=q}finally{h=!1}}else F=new Error(`Unsupported action: ${$}`);j[0]=1}else{const $=I.get(R);I.delete(R);for(let P=new pI(j.buffer),q=0;q<$.length;q++)P[q]=$.charCodeAt(q)}if(S2(j,0),F)throw F}})}return!!y.set(x,_)}}))}return z0.get(t)};QN.transfer=(...t)=>(hI.add(t),t);var JN=(()=>{var t=import.meta.url;return function(e={}){var n,r=e,i,s,o=new Promise((g,b)=>{i=g,s=b}),a=typeof window=="object",u=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;const d=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,d.debugModule("globalThis.location =",globalThis.location);var p=Object.assign({},r),h="./this.program",y="";function x(g){return r.locateFile?r.locateFile(g,y):y+g}var _,S;(a||u)&&(u?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),t&&(y=t),y.startsWith("blob:")?y="":y=y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(S=g=>{var b=new XMLHttpRequest;return b.open("GET",g,!1),b.responseType="arraybuffer",b.send(null),new Uint8Array(b.response)}),_=g=>fetch(g,{credentials:"same-origin"}).then(b=>b.ok?b.arrayBuffer():Promise.reject(new Error(b.status+" : "+b.url))));var I=r.print||console.log.bind(console),C=r.printErr||console.error.bind(console);Object.assign(r,p),p=null,r.arguments&&r.arguments,r.thisProgram&&(h=r.thisProgram);var k=r.wasmBinary,R,j=!1,A,F,$,P,q,B;function L(){var g=R.buffer;r.HEAP8=A=new Int8Array(g),r.HEAP16=$=new Int16Array(g),r.HEAPU8=F=new Uint8Array(g),r.HEAPU16=new Uint16Array(g),r.HEAP32=P=new Int32Array(g),r.HEAPU32=q=new Uint32Array(g),r.HEAPF32=new Float32Array(g),r.HEAPF64=new Float64Array(g),r.HEAP64=B=new BigInt64Array(g),r.HEAPU64=new BigUint64Array(g)}if(r.wasmMemory)R=r.wasmMemory;else{var U=r.INITIAL_MEMORY||0x1000000;R=new WebAssembly.Memory({initial:U/65536,maximum:32768})}L();var V=[],z=[],X=[];function J(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)ne(r.preRun.shift());xe(V)}function le(){!r.noFSInit&&!G.initialized&&G.init(),G.ignorePermissions=!1,xe(z)}function ie(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)te(r.postRun.shift());xe(X)}function ne(g){V.unshift(g)}function oe(g){z.unshift(g)}function te(g){X.unshift(g)}var ce=0,de=null;function ye(g){return g}function we(g){ce++,r.monitorRunDependencies?.(ce)}function Ie(g){if(ce--,r.monitorRunDependencies?.(ce),ce==0&&de){var b=de;de=null,b()}}function ze(g){r.onAbort?.(g),g="Aborted("+g+")",C(g),j=!0,g+=". Build with -sASSERTIONS for more info.";var b=new WebAssembly.RuntimeError(g);throw s(b),b}var je="data:application/octet-stream;base64,",De=g=>g.startsWith(je);function Je(){if(r.locateFile){var g="sqlite3.wasm";return De(g)?g:x(g)}return new URL("/assets/sqlite3-CgX3seBP.wasm",import.meta.url).href}var Xe;function Ue(g){if(g==Xe&&k)return new Uint8Array(k);if(S)return S(g);throw"both async and sync fetching of the wasm failed"}function ut(g){return k?Promise.resolve().then(()=>Ue(g)):_(g).then(b=>new Uint8Array(b),()=>Ue(g))}function St(g,b,E){return ut(g).then(N=>WebAssembly.instantiate(N,b)).then(E,N=>{C(`failed to asynchronously prepare wasm: ${N}`),ze(N)})}function Ot(g,b,E,N){return!g&&typeof WebAssembly.instantiateStreaming=="function"&&!De(b)&&typeof fetch=="function"?fetch(b,{credentials:"same-origin"}).then(O=>{var W=WebAssembly.instantiateStreaming(O,E);return W.then(N,function(fe){return C(`wasm streaming compile failed: ${fe}`),C("falling back to ArrayBuffer instantiation"),St(b,E,N)})}):St(b,E,N)}function Gt(){return{env:Xf,wasi_snapshot_preview1:Xf}}function an(){var g=Gt();function b(N,O){return he=N.exports,oe(he.__wasm_call_ctors),Ie(),he}we();function E(N){b(N.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(g,b)}catch(N){C(`Module.instantiateWasm callback failed with error: ${N}`),s(N)}return Xe||(Xe=Je()),Ot(k,Xe,g,E).catch(s),{}}var xe=g=>{for(;g.length>0;)g.shift()(r)};r.noExitRuntime;var be={isAbs:g=>g.charAt(0)==="/",splitPath:g=>{var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return b.exec(g).slice(1)},normalizeArray:(g,b)=>{for(var E=0,N=g.length-1;N>=0;N--){var O=g[N];O==="."?g.splice(N,1):O===".."?(g.splice(N,1),E++):E&&(g.splice(N,1),E--)}if(b)for(;E;E--)g.unshift("..");return g},normalize:g=>{var b=be.isAbs(g),E=g.substr(-1)==="/";return g=be.normalizeArray(g.split("/").filter(N=>!!N),!b).join("/"),!g&&!b&&(g="."),g&&E&&(g+="/"),(b?"/":"")+g},dirname:g=>{var b=be.splitPath(g),E=b[0],N=b[1];return!E&&!N?".":(N&&(N=N.substr(0,N.length-1)),E+N)},basename:g=>{if(g==="/")return"/";g=be.normalize(g),g=g.replace(/\/$/,"");var b=g.lastIndexOf("/");return b===-1?g:g.substr(b+1)},join:(...g)=>be.normalize(g.join("/")),join2:(g,b)=>be.normalize(g+"/"+b)},Ne=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return g=>crypto.getRandomValues(g);ze("initRandomDevice")},Ae=g=>(Ae=Ne())(g),Ve={resolve:(...g)=>{for(var b="",E=!1,N=g.length-1;N>=-1&&!E;N--){var O=N>=0?g[N]:G.cwd();if(typeof O!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!O)return"";b=O+"/"+b,E=be.isAbs(O)}return b=be.normalizeArray(b.split("/").filter(W=>!!W),!E).join("/"),(E?"/":"")+b||"."},relative:(g,b)=>{g=Ve.resolve(g).substr(1),b=Ve.resolve(b).substr(1);function E(tt){for(var at=0;at<tt.length&&tt[at]==="";at++);for(var mt=tt.length-1;mt>=0&&tt[mt]==="";mt--);return at>mt?[]:tt.slice(at,mt-at+1)}for(var N=E(g.split("/")),O=E(b.split("/")),W=Math.min(N.length,O.length),fe=W,me=0;me<W;me++)if(N[me]!==O[me]){fe=me;break}for(var Ge=[],me=fe;me<N.length;me++)Ge.push("..");return Ge=Ge.concat(O.slice(fe)),Ge.join("/")}},rt=typeof TextDecoder<"u"?new TextDecoder:void 0,Me=(g,b,E)=>{for(var N=b+E,O=b;g[O]&&!(O>=N);)++O;if(O-b>16&&g.buffer&&rt)return rt.decode(g.subarray(b,O));for(var W="";b<O;){var fe=g[b++];if(!(fe&128)){W+=String.fromCharCode(fe);continue}var me=g[b++]&63;if((fe&224)==192){W+=String.fromCharCode((fe&31)<<6|me);continue}var Ge=g[b++]&63;if((fe&240)==224?fe=(fe&15)<<12|me<<6|Ge:fe=(fe&7)<<18|me<<12|Ge<<6|g[b++]&63,fe<65536)W+=String.fromCharCode(fe);else{var tt=fe-65536;W+=String.fromCharCode(55296|tt>>10,56320|tt&1023)}}return W},ct=[],Jt=g=>{for(var b=0,E=0;E<g.length;++E){var N=g.charCodeAt(E);N<=127?b++:N<=2047?b+=2:N>=55296&&N<=57343?(b+=4,++E):b+=3}return b},Zt=(g,b,E,N)=>{if(!(N>0))return 0;for(var O=E,W=E+N-1,fe=0;fe<g.length;++fe){var me=g.charCodeAt(fe);if(me>=55296&&me<=57343){var Ge=g.charCodeAt(++fe);me=65536+((me&1023)<<10)|Ge&1023}if(me<=127){if(E>=W)break;b[E++]=me}else if(me<=2047){if(E+1>=W)break;b[E++]=192|me>>6,b[E++]=128|me&63}else if(me<=65535){if(E+2>=W)break;b[E++]=224|me>>12,b[E++]=128|me>>6&63,b[E++]=128|me&63}else{if(E+3>=W)break;b[E++]=240|me>>18,b[E++]=128|me>>12&63,b[E++]=128|me>>6&63,b[E++]=128|me&63}}return b[E]=0,E-O};function wn(g,b,E){var N=Jt(g)+1,O=new Array(N),W=Zt(g,O,0,O.length);return O.length=W,O}var dr=()=>{if(!ct.length){var g=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(g=window.prompt("Input: "),g!==null&&(g+=`
`)),!g)return null;ct=wn(g)}return ct.shift()},Bn={ttys:[],init(){},shutdown(){},register(g,b){Bn.ttys[g]={input:[],output:[],ops:b},G.registerDevice(g,Bn.stream_ops)},stream_ops:{open(g){var b=Bn.ttys[g.node.rdev];if(!b)throw new G.ErrnoError(43);g.tty=b,g.seekable=!1},close(g){g.tty.ops.fsync(g.tty)},fsync(g){g.tty.ops.fsync(g.tty)},read(g,b,E,N,O){if(!g.tty||!g.tty.ops.get_char)throw new G.ErrnoError(60);for(var W=0,fe=0;fe<N;fe++){var me;try{me=g.tty.ops.get_char(g.tty)}catch{throw new G.ErrnoError(29)}if(me===void 0&&W===0)throw new G.ErrnoError(6);if(me==null)break;W++,b[E+fe]=me}return W&&(g.node.timestamp=Date.now()),W},write(g,b,E,N,O){if(!g.tty||!g.tty.ops.put_char)throw new G.ErrnoError(60);try{for(var W=0;W<N;W++)g.tty.ops.put_char(g.tty,b[E+W])}catch{throw new G.ErrnoError(29)}return N&&(g.node.timestamp=Date.now()),W}},default_tty_ops:{get_char(g){return dr()},put_char(g,b){b===null||b===10?(I(Me(g.output,0)),g.output=[]):b!=0&&g.output.push(b)},fsync(g){g.output&&g.output.length>0&&(I(Me(g.output,0)),g.output=[])},ioctl_tcgets(g){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(g,b,E){return 0},ioctl_tiocgwinsz(g){return[24,80]}},default_tty1_ops:{put_char(g,b){b===null||b===10?(C(Me(g.output,0)),g.output=[]):b!=0&&g.output.push(b)},fsync(g){g.output&&g.output.length>0&&(C(Me(g.output,0)),g.output=[])}}},Zr=(g,b)=>(F.fill(0,g,g+b),g),Ui=(g,b)=>Math.ceil(g/b)*b,kr=g=>{g=Ui(g,65536);var b=ep(65536,g);return b?Zr(b,g):0},Yt={ops_table:null,mount(g){return Yt.createNode(null,"/",16895,0)},createNode(g,b,E,N){if(G.isBlkdev(E)||G.isFIFO(E))throw new G.ErrnoError(63);Yt.ops_table||={dir:{node:{getattr:Yt.node_ops.getattr,setattr:Yt.node_ops.setattr,lookup:Yt.node_ops.lookup,mknod:Yt.node_ops.mknod,rename:Yt.node_ops.rename,unlink:Yt.node_ops.unlink,rmdir:Yt.node_ops.rmdir,readdir:Yt.node_ops.readdir,symlink:Yt.node_ops.symlink},stream:{llseek:Yt.stream_ops.llseek}},file:{node:{getattr:Yt.node_ops.getattr,setattr:Yt.node_ops.setattr},stream:{llseek:Yt.stream_ops.llseek,read:Yt.stream_ops.read,write:Yt.stream_ops.write,allocate:Yt.stream_ops.allocate,mmap:Yt.stream_ops.mmap,msync:Yt.stream_ops.msync}},link:{node:{getattr:Yt.node_ops.getattr,setattr:Yt.node_ops.setattr,readlink:Yt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Yt.node_ops.getattr,setattr:Yt.node_ops.setattr},stream:G.chrdev_stream_ops}};var O=G.createNode(g,b,E,N);return G.isDir(O.mode)?(O.node_ops=Yt.ops_table.dir.node,O.stream_ops=Yt.ops_table.dir.stream,O.contents={}):G.isFile(O.mode)?(O.node_ops=Yt.ops_table.file.node,O.stream_ops=Yt.ops_table.file.stream,O.usedBytes=0,O.contents=null):G.isLink(O.mode)?(O.node_ops=Yt.ops_table.link.node,O.stream_ops=Yt.ops_table.link.stream):G.isChrdev(O.mode)&&(O.node_ops=Yt.ops_table.chrdev.node,O.stream_ops=Yt.ops_table.chrdev.stream),O.timestamp=Date.now(),g&&(g.contents[b]=O,g.timestamp=O.timestamp),O},getFileDataAsTypedArray(g){return g.contents?g.contents.subarray?g.contents.subarray(0,g.usedBytes):new Uint8Array(g.contents):new Uint8Array(0)},expandFileStorage(g,b){var E=g.contents?g.contents.length:0;if(!(E>=b)){var N=1024*1024;b=Math.max(b,E*(E<N?2:1.125)>>>0),E!=0&&(b=Math.max(b,256));var O=g.contents;g.contents=new Uint8Array(b),g.usedBytes>0&&g.contents.set(O.subarray(0,g.usedBytes),0)}},resizeFileStorage(g,b){if(g.usedBytes!=b)if(b==0)g.contents=null,g.usedBytes=0;else{var E=g.contents;g.contents=new Uint8Array(b),E&&g.contents.set(E.subarray(0,Math.min(b,g.usedBytes))),g.usedBytes=b}},node_ops:{getattr(g){var b={};return b.dev=G.isChrdev(g.mode)?g.id:1,b.ino=g.id,b.mode=g.mode,b.nlink=1,b.uid=0,b.gid=0,b.rdev=g.rdev,G.isDir(g.mode)?b.size=4096:G.isFile(g.mode)?b.size=g.usedBytes:G.isLink(g.mode)?b.size=g.link.length:b.size=0,b.atime=new Date(g.timestamp),b.mtime=new Date(g.timestamp),b.ctime=new Date(g.timestamp),b.blksize=4096,b.blocks=Math.ceil(b.size/b.blksize),b},setattr(g,b){b.mode!==void 0&&(g.mode=b.mode),b.timestamp!==void 0&&(g.timestamp=b.timestamp),b.size!==void 0&&Yt.resizeFileStorage(g,b.size)},lookup(g,b){throw G.genericErrors[44]},mknod(g,b,E,N){return Yt.createNode(g,b,E,N)},rename(g,b,E){if(G.isDir(g.mode)){var N;try{N=G.lookupNode(b,E)}catch{}if(N)for(var O in N.contents)throw new G.ErrnoError(55)}delete g.parent.contents[g.name],g.parent.timestamp=Date.now(),g.name=E,b.contents[E]=g,b.timestamp=g.parent.timestamp},unlink(g,b){delete g.contents[b],g.timestamp=Date.now()},rmdir(g,b){var E=G.lookupNode(g,b);for(var N in E.contents)throw new G.ErrnoError(55);delete g.contents[b],g.timestamp=Date.now()},readdir(g){var b=[".",".."];for(var E of Object.keys(g.contents))b.push(E);return b},symlink(g,b,E){var N=Yt.createNode(g,b,41471,0);return N.link=E,N},readlink(g){if(!G.isLink(g.mode))throw new G.ErrnoError(28);return g.link}},stream_ops:{read(g,b,E,N,O){var W=g.node.contents;if(O>=g.node.usedBytes)return 0;var fe=Math.min(g.node.usedBytes-O,N);if(fe>8&&W.subarray)b.set(W.subarray(O,O+fe),E);else for(var me=0;me<fe;me++)b[E+me]=W[O+me];return fe},write(g,b,E,N,O,W){if(b.buffer===A.buffer&&(W=!1),!N)return 0;var fe=g.node;if(fe.timestamp=Date.now(),b.subarray&&(!fe.contents||fe.contents.subarray)){if(W)return fe.contents=b.subarray(E,E+N),fe.usedBytes=N,N;if(fe.usedBytes===0&&O===0)return fe.contents=b.slice(E,E+N),fe.usedBytes=N,N;if(O+N<=fe.usedBytes)return fe.contents.set(b.subarray(E,E+N),O),N}if(Yt.expandFileStorage(fe,O+N),fe.contents.subarray&&b.subarray)fe.contents.set(b.subarray(E,E+N),O);else for(var me=0;me<N;me++)fe.contents[O+me]=b[E+me];return fe.usedBytes=Math.max(fe.usedBytes,O+N),N},llseek(g,b,E){var N=b;if(E===1?N+=g.position:E===2&&G.isFile(g.node.mode)&&(N+=g.node.usedBytes),N<0)throw new G.ErrnoError(28);return N},allocate(g,b,E){Yt.expandFileStorage(g.node,b+E),g.node.usedBytes=Math.max(g.node.usedBytes,b+E)},mmap(g,b,E,N,O){if(!G.isFile(g.node.mode))throw new G.ErrnoError(43);var W,fe,me=g.node.contents;if(!(O&2)&&me&&me.buffer===A.buffer)fe=!1,W=me.byteOffset;else{if(fe=!0,W=kr(b),!W)throw new G.ErrnoError(48);me&&((E>0||E+b<me.length)&&(me.subarray?me=me.subarray(E,E+b):me=Array.prototype.slice.call(me,E,E+b)),A.set(me,W))}return{ptr:W,allocated:fe}},msync(g,b,E,N,O){return Yt.stream_ops.write(g,b,0,N,E,!1),0}}},rs=(g,b,E,N)=>{var O=`al ${g}`;_(g).then(W=>{b(new Uint8Array(W)),O&&Ie()},W=>{if(E)E();else throw`Loading data file "${g}" failed.`}),O&&we()},is=(g,b,E,N,O,W)=>{G.createDataFile(g,b,E,N,O,W)},ss=r.preloadPlugins||[],wo=(g,b,E,N)=>{typeof Browser<"u"&&Browser.init();var O=!1;return ss.forEach(W=>{O||W.canHandle(b)&&(W.handle(g,b,E,N),O=!0)}),O},_a=(g,b,E,N,O,W,fe,me,Ge,tt)=>{var at=b?Ve.resolve(be.join2(g,b)):g;function mt(Be){function Oe(et){tt?.(),me||is(g,b,et,N,O,Ge),W?.(),Ie()}wo(Be,at,Oe,()=>{fe?.(),Ie()})||Oe(Be)}we(),typeof E=="string"?rs(E,mt,fe):mt(E)},wu=g=>{var b={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},E=b[g];if(typeof E>"u")throw new Error(`Unknown file open mode: ${g}`);return E},Gs=(g,b)=>{var E=0;return g&&(E|=365),b&&(E|=146),E},G={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(g){this.name="ErrnoError",this.errno=g}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(g){this.node=g}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(g){this.shared.flags=g}get position(){return this.shared.position}set position(g){this.shared.position=g}},FSNode:class{constructor(g,b,E,N){g||(g=this),this.parent=g,this.mount=g.mount,this.mounted=null,this.id=G.nextInode++,this.name=b,this.mode=E,this.node_ops={},this.stream_ops={},this.rdev=N,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(g){g?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(g){g?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return G.isDir(this.mode)}get isDevice(){return G.isChrdev(this.mode)}},lookupPath(g,b={}){if(g=Ve.resolve(g),!g)return{path:"",node:null};var E={follow_mount:!0,recurse_count:0};if(b=Object.assign(E,b),b.recurse_count>8)throw new G.ErrnoError(32);for(var N=g.split("/").filter(mt=>!!mt),O=G.root,W="/",fe=0;fe<N.length;fe++){var me=fe===N.length-1;if(me&&b.parent)break;if(O=G.lookupNode(O,N[fe]),W=be.join2(W,N[fe]),G.isMountpoint(O)&&(!me||me&&b.follow_mount)&&(O=O.mounted.root),!me||b.follow)for(var Ge=0;G.isLink(O.mode);){var tt=G.readlink(W);W=Ve.resolve(be.dirname(W),tt);var at=G.lookupPath(W,{recurse_count:b.recurse_count+1});if(O=at.node,Ge++>40)throw new G.ErrnoError(32)}}return{path:W,node:O}},getPath(g){for(var b;;){if(G.isRoot(g)){var E=g.mount.mountpoint;return b?E[E.length-1]!=="/"?`${E}/${b}`:E+b:E}b=b?`${g.name}/${b}`:g.name,g=g.parent}},hashName(g,b){for(var E=0,N=0;N<b.length;N++)E=(E<<5)-E+b.charCodeAt(N)|0;return(g+E>>>0)%G.nameTable.length},hashAddNode(g){var b=G.hashName(g.parent.id,g.name);g.name_next=G.nameTable[b],G.nameTable[b]=g},hashRemoveNode(g){var b=G.hashName(g.parent.id,g.name);if(G.nameTable[b]===g)G.nameTable[b]=g.name_next;else for(var E=G.nameTable[b];E;){if(E.name_next===g){E.name_next=g.name_next;break}E=E.name_next}},lookupNode(g,b){var E=G.mayLookup(g);if(E)throw new G.ErrnoError(E);for(var N=G.hashName(g.id,b),O=G.nameTable[N];O;O=O.name_next){var W=O.name;if(O.parent.id===g.id&&W===b)return O}return G.lookup(g,b)},createNode(g,b,E,N){var O=new G.FSNode(g,b,E,N);return G.hashAddNode(O),O},destroyNode(g){G.hashRemoveNode(g)},isRoot(g){return g===g.parent},isMountpoint(g){return!!g.mounted},isFile(g){return(g&61440)===32768},isDir(g){return(g&61440)===16384},isLink(g){return(g&61440)===40960},isChrdev(g){return(g&61440)===8192},isBlkdev(g){return(g&61440)===24576},isFIFO(g){return(g&61440)===4096},isSocket(g){return(g&49152)===49152},flagsToPermissionString(g){var b=["r","w","rw"][g&3];return g&512&&(b+="w"),b},nodePermissions(g,b){return G.ignorePermissions?0:b.includes("r")&&!(g.mode&292)||b.includes("w")&&!(g.mode&146)||b.includes("x")&&!(g.mode&73)?2:0},mayLookup(g){if(!G.isDir(g.mode))return 54;var b=G.nodePermissions(g,"x");return b||(g.node_ops.lookup?0:2)},mayCreate(g,b){try{var E=G.lookupNode(g,b);return 20}catch{}return G.nodePermissions(g,"wx")},mayDelete(g,b,E){var N;try{N=G.lookupNode(g,b)}catch(W){return W.errno}var O=G.nodePermissions(g,"wx");if(O)return O;if(E){if(!G.isDir(N.mode))return 54;if(G.isRoot(N)||G.getPath(N)===G.cwd())return 10}else if(G.isDir(N.mode))return 31;return 0},mayOpen(g,b){return g?G.isLink(g.mode)?32:G.isDir(g.mode)&&(G.flagsToPermissionString(b)!=="r"||b&512)?31:G.nodePermissions(g,G.flagsToPermissionString(b)):44},MAX_OPEN_FDS:4096,nextfd(){for(var g=0;g<=G.MAX_OPEN_FDS;g++)if(!G.streams[g])return g;throw new G.ErrnoError(33)},getStreamChecked(g){var b=G.getStream(g);if(!b)throw new G.ErrnoError(8);return b},getStream:g=>G.streams[g],createStream(g,b=-1){return g=Object.assign(new G.FSStream,g),b==-1&&(b=G.nextfd()),g.fd=b,G.streams[b]=g,g},closeStream(g){G.streams[g]=null},dupStream(g,b=-1){var E=G.createStream(g,b);return E.stream_ops?.dup?.(E),E},chrdev_stream_ops:{open(g){var b=G.getDevice(g.node.rdev);g.stream_ops=b.stream_ops,g.stream_ops.open?.(g)},llseek(){throw new G.ErrnoError(70)}},major:g=>g>>8,minor:g=>g&255,makedev:(g,b)=>g<<8|b,registerDevice(g,b){G.devices[g]={stream_ops:b}},getDevice:g=>G.devices[g],getMounts(g){for(var b=[],E=[g];E.length;){var N=E.pop();b.push(N),E.push(...N.mounts)}return b},syncfs(g,b){typeof g=="function"&&(b=g,g=!1),G.syncFSRequests++,G.syncFSRequests>1&&C(`warning: ${G.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var E=G.getMounts(G.root.mount),N=0;function O(fe){return G.syncFSRequests--,b(fe)}function W(fe){if(fe)return W.errored?void 0:(W.errored=!0,O(fe));++N>=E.length&&O(null)}E.forEach(fe=>{if(!fe.type.syncfs)return W(null);fe.type.syncfs(fe,g,W)})},mount(g,b,E){var N=E==="/",O=!E,W;if(N&&G.root)throw new G.ErrnoError(10);if(!N&&!O){var fe=G.lookupPath(E,{follow_mount:!1});if(E=fe.path,W=fe.node,G.isMountpoint(W))throw new G.ErrnoError(10);if(!G.isDir(W.mode))throw new G.ErrnoError(54)}var me={type:g,opts:b,mountpoint:E,mounts:[]},Ge=g.mount(me);return Ge.mount=me,me.root=Ge,N?G.root=Ge:W&&(W.mounted=me,W.mount&&W.mount.mounts.push(me)),Ge},unmount(g){var b=G.lookupPath(g,{follow_mount:!1});if(!G.isMountpoint(b.node))throw new G.ErrnoError(28);var E=b.node,N=E.mounted,O=G.getMounts(N);Object.keys(G.nameTable).forEach(fe=>{for(var me=G.nameTable[fe];me;){var Ge=me.name_next;O.includes(me.mount)&&G.destroyNode(me),me=Ge}}),E.mounted=null;var W=E.mount.mounts.indexOf(N);E.mount.mounts.splice(W,1)},lookup(g,b){return g.node_ops.lookup(g,b)},mknod(g,b,E){var N=G.lookupPath(g,{parent:!0}),O=N.node,W=be.basename(g);if(!W||W==="."||W==="..")throw new G.ErrnoError(28);var fe=G.mayCreate(O,W);if(fe)throw new G.ErrnoError(fe);if(!O.node_ops.mknod)throw new G.ErrnoError(63);return O.node_ops.mknod(O,W,b,E)},create(g,b){return b=b!==void 0?b:438,b&=4095,b|=32768,G.mknod(g,b,0)},mkdir(g,b){return b=b!==void 0?b:511,b&=1023,b|=16384,G.mknod(g,b,0)},mkdirTree(g,b){for(var E=g.split("/"),N="",O=0;O<E.length;++O)if(E[O]){N+="/"+E[O];try{G.mkdir(N,b)}catch(W){if(W.errno!=20)throw W}}},mkdev(g,b,E){return typeof E>"u"&&(E=b,b=438),b|=8192,G.mknod(g,b,E)},symlink(g,b){if(!Ve.resolve(g))throw new G.ErrnoError(44);var E=G.lookupPath(b,{parent:!0}),N=E.node;if(!N)throw new G.ErrnoError(44);var O=be.basename(b),W=G.mayCreate(N,O);if(W)throw new G.ErrnoError(W);if(!N.node_ops.symlink)throw new G.ErrnoError(63);return N.node_ops.symlink(N,O,g)},rename(g,b){var E=be.dirname(g),N=be.dirname(b),O=be.basename(g),W=be.basename(b),fe,me,Ge;if(fe=G.lookupPath(g,{parent:!0}),me=fe.node,fe=G.lookupPath(b,{parent:!0}),Ge=fe.node,!me||!Ge)throw new G.ErrnoError(44);if(me.mount!==Ge.mount)throw new G.ErrnoError(75);var tt=G.lookupNode(me,O),at=Ve.relative(g,N);if(at.charAt(0)!==".")throw new G.ErrnoError(28);if(at=Ve.relative(b,E),at.charAt(0)!==".")throw new G.ErrnoError(55);var mt;try{mt=G.lookupNode(Ge,W)}catch{}if(tt!==mt){var Be=G.isDir(tt.mode),Oe=G.mayDelete(me,O,Be);if(Oe)throw new G.ErrnoError(Oe);if(Oe=mt?G.mayDelete(Ge,W,Be):G.mayCreate(Ge,W),Oe)throw new G.ErrnoError(Oe);if(!me.node_ops.rename)throw new G.ErrnoError(63);if(G.isMountpoint(tt)||mt&&G.isMountpoint(mt))throw new G.ErrnoError(10);if(Ge!==me&&(Oe=G.nodePermissions(me,"w"),Oe))throw new G.ErrnoError(Oe);G.hashRemoveNode(tt);try{me.node_ops.rename(tt,Ge,W),tt.parent=Ge}catch(et){throw et}finally{G.hashAddNode(tt)}}},rmdir(g){var b=G.lookupPath(g,{parent:!0}),E=b.node,N=be.basename(g),O=G.lookupNode(E,N),W=G.mayDelete(E,N,!0);if(W)throw new G.ErrnoError(W);if(!E.node_ops.rmdir)throw new G.ErrnoError(63);if(G.isMountpoint(O))throw new G.ErrnoError(10);E.node_ops.rmdir(E,N),G.destroyNode(O)},readdir(g){var b=G.lookupPath(g,{follow:!0}),E=b.node;if(!E.node_ops.readdir)throw new G.ErrnoError(54);return E.node_ops.readdir(E)},unlink(g){var b=G.lookupPath(g,{parent:!0}),E=b.node;if(!E)throw new G.ErrnoError(44);var N=be.basename(g),O=G.lookupNode(E,N),W=G.mayDelete(E,N,!1);if(W)throw new G.ErrnoError(W);if(!E.node_ops.unlink)throw new G.ErrnoError(63);if(G.isMountpoint(O))throw new G.ErrnoError(10);E.node_ops.unlink(E,N),G.destroyNode(O)},readlink(g){var b=G.lookupPath(g),E=b.node;if(!E)throw new G.ErrnoError(44);if(!E.node_ops.readlink)throw new G.ErrnoError(28);return Ve.resolve(G.getPath(E.parent),E.node_ops.readlink(E))},stat(g,b){var E=G.lookupPath(g,{follow:!b}),N=E.node;if(!N)throw new G.ErrnoError(44);if(!N.node_ops.getattr)throw new G.ErrnoError(63);return N.node_ops.getattr(N)},lstat(g){return G.stat(g,!0)},chmod(g,b,E){var N;if(typeof g=="string"){var O=G.lookupPath(g,{follow:!E});N=O.node}else N=g;if(!N.node_ops.setattr)throw new G.ErrnoError(63);N.node_ops.setattr(N,{mode:b&4095|N.mode&-4096,timestamp:Date.now()})},lchmod(g,b){G.chmod(g,b,!0)},fchmod(g,b){var E=G.getStreamChecked(g);G.chmod(E.node,b)},chown(g,b,E,N){var O;if(typeof g=="string"){var W=G.lookupPath(g,{follow:!N});O=W.node}else O=g;if(!O.node_ops.setattr)throw new G.ErrnoError(63);O.node_ops.setattr(O,{timestamp:Date.now()})},lchown(g,b,E){G.chown(g,b,E,!0)},fchown(g,b,E){var N=G.getStreamChecked(g);G.chown(N.node,b,E)},truncate(g,b){if(b<0)throw new G.ErrnoError(28);var E;if(typeof g=="string"){var N=G.lookupPath(g,{follow:!0});E=N.node}else E=g;if(!E.node_ops.setattr)throw new G.ErrnoError(63);if(G.isDir(E.mode))throw new G.ErrnoError(31);if(!G.isFile(E.mode))throw new G.ErrnoError(28);var O=G.nodePermissions(E,"w");if(O)throw new G.ErrnoError(O);E.node_ops.setattr(E,{size:b,timestamp:Date.now()})},ftruncate(g,b){var E=G.getStreamChecked(g);if(!(E.flags&2097155))throw new G.ErrnoError(28);G.truncate(E.node,b)},utime(g,b,E){var N=G.lookupPath(g,{follow:!0}),O=N.node;O.node_ops.setattr(O,{timestamp:Math.max(b,E)})},open(g,b,E){if(g==="")throw new G.ErrnoError(44);b=typeof b=="string"?wu(b):b,b&64?(E=typeof E>"u"?438:E,E=E&4095|32768):E=0;var N;if(typeof g=="object")N=g;else{g=be.normalize(g);try{var O=G.lookupPath(g,{follow:!(b&131072)});N=O.node}catch{}}var W=!1;if(b&64)if(N){if(b&128)throw new G.ErrnoError(20)}else N=G.mknod(g,E,0),W=!0;if(!N)throw new G.ErrnoError(44);if(G.isChrdev(N.mode)&&(b&=-513),b&65536&&!G.isDir(N.mode))throw new G.ErrnoError(54);if(!W){var fe=G.mayOpen(N,b);if(fe)throw new G.ErrnoError(fe)}b&512&&!W&&G.truncate(N,0),b&=-131713;var me=G.createStream({node:N,path:G.getPath(N),flags:b,seekable:!0,position:0,stream_ops:N.stream_ops,ungotten:[],error:!1});return me.stream_ops.open&&me.stream_ops.open(me),r.logReadFiles&&!(b&1)&&(G.readFiles||(G.readFiles={}),g in G.readFiles||(G.readFiles[g]=1)),me},close(g){if(G.isClosed(g))throw new G.ErrnoError(8);g.getdents&&(g.getdents=null);try{g.stream_ops.close&&g.stream_ops.close(g)}catch(b){throw b}finally{G.closeStream(g.fd)}g.fd=null},isClosed(g){return g.fd===null},llseek(g,b,E){if(G.isClosed(g))throw new G.ErrnoError(8);if(!g.seekable||!g.stream_ops.llseek)throw new G.ErrnoError(70);if(E!=0&&E!=1&&E!=2)throw new G.ErrnoError(28);return g.position=g.stream_ops.llseek(g,b,E),g.ungotten=[],g.position},read(g,b,E,N,O){if(N<0||O<0)throw new G.ErrnoError(28);if(G.isClosed(g))throw new G.ErrnoError(8);if((g.flags&2097155)===1)throw new G.ErrnoError(8);if(G.isDir(g.node.mode))throw new G.ErrnoError(31);if(!g.stream_ops.read)throw new G.ErrnoError(28);var W=typeof O<"u";if(!W)O=g.position;else if(!g.seekable)throw new G.ErrnoError(70);var fe=g.stream_ops.read(g,b,E,N,O);return W||(g.position+=fe),fe},write(g,b,E,N,O,W){if(N<0||O<0)throw new G.ErrnoError(28);if(G.isClosed(g))throw new G.ErrnoError(8);if(!(g.flags&2097155))throw new G.ErrnoError(8);if(G.isDir(g.node.mode))throw new G.ErrnoError(31);if(!g.stream_ops.write)throw new G.ErrnoError(28);g.seekable&&g.flags&1024&&G.llseek(g,0,2);var fe=typeof O<"u";if(!fe)O=g.position;else if(!g.seekable)throw new G.ErrnoError(70);var me=g.stream_ops.write(g,b,E,N,O,W);return fe||(g.position+=me),me},allocate(g,b,E){if(G.isClosed(g))throw new G.ErrnoError(8);if(b<0||E<=0)throw new G.ErrnoError(28);if(!(g.flags&2097155))throw new G.ErrnoError(8);if(!G.isFile(g.node.mode)&&!G.isDir(g.node.mode))throw new G.ErrnoError(43);if(!g.stream_ops.allocate)throw new G.ErrnoError(138);g.stream_ops.allocate(g,b,E)},mmap(g,b,E,N,O){if(N&2&&!(O&2)&&(g.flags&2097155)!==2)throw new G.ErrnoError(2);if((g.flags&2097155)===1)throw new G.ErrnoError(2);if(!g.stream_ops.mmap)throw new G.ErrnoError(43);if(!b)throw new G.ErrnoError(28);return g.stream_ops.mmap(g,b,E,N,O)},msync(g,b,E,N,O){return g.stream_ops.msync?g.stream_ops.msync(g,b,E,N,O):0},ioctl(g,b,E){if(!g.stream_ops.ioctl)throw new G.ErrnoError(59);return g.stream_ops.ioctl(g,b,E)},readFile(g,b={}){if(b.flags=b.flags||0,b.encoding=b.encoding||"binary",b.encoding!=="utf8"&&b.encoding!=="binary")throw new Error(`Invalid encoding type "${b.encoding}"`);var E,N=G.open(g,b.flags),O=G.stat(g),W=O.size,fe=new Uint8Array(W);return G.read(N,fe,0,W,0),b.encoding==="utf8"?E=Me(fe,0):b.encoding==="binary"&&(E=fe),G.close(N),E},writeFile(g,b,E={}){E.flags=E.flags||577;var N=G.open(g,E.flags,E.mode);if(typeof b=="string"){var O=new Uint8Array(Jt(b)+1),W=Zt(b,O,0,O.length);G.write(N,O,0,W,void 0,E.canOwn)}else if(ArrayBuffer.isView(b))G.write(N,b,0,b.byteLength,void 0,E.canOwn);else throw new Error("Unsupported data type");G.close(N)},cwd:()=>G.currentPath,chdir(g){var b=G.lookupPath(g,{follow:!0});if(b.node===null)throw new G.ErrnoError(44);if(!G.isDir(b.node.mode))throw new G.ErrnoError(54);var E=G.nodePermissions(b.node,"x");if(E)throw new G.ErrnoError(E);G.currentPath=b.path},createDefaultDirectories(){G.mkdir("/tmp"),G.mkdir("/home"),G.mkdir("/home/web_user")},createDefaultDevices(){G.mkdir("/dev"),G.registerDevice(G.makedev(1,3),{read:()=>0,write:(N,O,W,fe,me)=>fe}),G.mkdev("/dev/null",G.makedev(1,3)),Bn.register(G.makedev(5,0),Bn.default_tty_ops),Bn.register(G.makedev(6,0),Bn.default_tty1_ops),G.mkdev("/dev/tty",G.makedev(5,0)),G.mkdev("/dev/tty1",G.makedev(6,0));var g=new Uint8Array(1024),b=0,E=()=>(b===0&&(b=Ae(g).byteLength),g[--b]);G.createDevice("/dev","random",E),G.createDevice("/dev","urandom",E),G.mkdir("/dev/shm"),G.mkdir("/dev/shm/tmp")},createSpecialDirectories(){G.mkdir("/proc");var g=G.mkdir("/proc/self");G.mkdir("/proc/self/fd"),G.mount({mount(){var b=G.createNode(g,"fd",16895,73);return b.node_ops={lookup(E,N){var O=+N,W=G.getStreamChecked(O),fe={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>W.path}};return fe.parent=fe,fe}},b}},{},"/proc/self/fd")},createStandardStreams(g,b,E){g?G.createDevice("/dev","stdin",g):G.symlink("/dev/tty","/dev/stdin"),b?G.createDevice("/dev","stdout",null,b):G.symlink("/dev/tty","/dev/stdout"),E?G.createDevice("/dev","stderr",null,E):G.symlink("/dev/tty1","/dev/stderr"),G.open("/dev/stdin",0),G.open("/dev/stdout",1),G.open("/dev/stderr",1)},staticInit(){[44].forEach(g=>{G.genericErrors[g]=new G.ErrnoError(g),G.genericErrors[g].stack="<generic error, no stack>"}),G.nameTable=new Array(4096),G.mount(Yt,{},"/"),G.createDefaultDirectories(),G.createDefaultDevices(),G.createSpecialDirectories(),G.filesystems={MEMFS:Yt}},init(g,b,E){G.initialized=!0,g??=r.stdin,b??=r.stdout,E??=r.stderr,G.createStandardStreams(g,b,E)},quit(){G.initialized=!1;for(var g=0;g<G.streams.length;g++){var b=G.streams[g];b&&G.close(b)}},findObject(g,b){var E=G.analyzePath(g,b);return E.exists?E.object:null},analyzePath(g,b){try{var E=G.lookupPath(g,{follow:!b});g=E.path}catch{}var N={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var E=G.lookupPath(g,{parent:!0});N.parentExists=!0,N.parentPath=E.path,N.parentObject=E.node,N.name=be.basename(g),E=G.lookupPath(g,{follow:!b}),N.exists=!0,N.path=E.path,N.object=E.node,N.name=E.node.name,N.isRoot=E.path==="/"}catch(O){N.error=O.errno}return N},createPath(g,b,E,N){g=typeof g=="string"?g:G.getPath(g);for(var O=b.split("/").reverse();O.length;){var W=O.pop();if(W){var fe=be.join2(g,W);try{G.mkdir(fe)}catch{}g=fe}}return fe},createFile(g,b,E,N,O){var W=be.join2(typeof g=="string"?g:G.getPath(g),b),fe=Gs(N,O);return G.create(W,fe)},createDataFile(g,b,E,N,O,W){var fe=b;g&&(g=typeof g=="string"?g:G.getPath(g),fe=b?be.join2(g,b):g);var me=Gs(N,O),Ge=G.create(fe,me);if(E){if(typeof E=="string"){for(var tt=new Array(E.length),at=0,mt=E.length;at<mt;++at)tt[at]=E.charCodeAt(at);E=tt}G.chmod(Ge,me|146);var Be=G.open(Ge,577);G.write(Be,E,0,E.length,0,W),G.close(Be),G.chmod(Ge,me)}},createDevice(g,b,E,N){var O=be.join2(typeof g=="string"?g:G.getPath(g),b),W=Gs(!!E,!!N);G.createDevice.major||(G.createDevice.major=64);var fe=G.makedev(G.createDevice.major++,0);return G.registerDevice(fe,{open(me){me.seekable=!1},close(me){N?.buffer?.length&&N(10)},read(me,Ge,tt,at,mt){for(var Be=0,Oe=0;Oe<at;Oe++){var et;try{et=E()}catch{throw new G.ErrnoError(29)}if(et===void 0&&Be===0)throw new G.ErrnoError(6);if(et==null)break;Be++,Ge[tt+Oe]=et}return Be&&(me.node.timestamp=Date.now()),Be},write(me,Ge,tt,at,mt){for(var Be=0;Be<at;Be++)try{N(Ge[tt+Be])}catch{throw new G.ErrnoError(29)}return at&&(me.node.timestamp=Date.now()),Be}}),G.mkdev(O,W,fe)},forceLoadFile(g){if(g.isDevice||g.isFolder||g.link||g.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{g.contents=S(g.url),g.usedBytes=g.contents.length}catch{throw new G.ErrnoError(29)}},createLazyFile(g,b,E,N,O){class W{constructor(){this.lengthKnown=!1,this.chunks=[]}get(Oe){if(!(Oe>this.length-1||Oe<0)){var et=Oe%this.chunkSize,ve=Oe/this.chunkSize|0;return this.getter(ve)[et]}}setDataGetter(Oe){this.getter=Oe}cacheLength(){var Oe=new XMLHttpRequest;if(Oe.open("HEAD",E,!1),Oe.send(null),!(Oe.status>=200&&Oe.status<300||Oe.status===304))throw new Error("Couldn't load "+E+". Status: "+Oe.status);var et=Number(Oe.getResponseHeader("Content-length")),ve,ke=(ve=Oe.getResponseHeader("Accept-Ranges"))&&ve==="bytes",Te=(ve=Oe.getResponseHeader("Content-Encoding"))&&ve==="gzip",Ze=1024*1024;ke||(Ze=et);var Qe=(Ke,Et)=>{if(Ke>Et)throw new Error("invalid range ("+Ke+", "+Et+") or no bytes requested!");if(Et>et-1)throw new Error("only "+et+" bytes available! programmer error!");var ee=new XMLHttpRequest;if(ee.open("GET",E,!1),et!==Ze&&ee.setRequestHeader("Range","bytes="+Ke+"-"+Et),ee.responseType="arraybuffer",ee.overrideMimeType&&ee.overrideMimeType("text/plain; charset=x-user-defined"),ee.send(null),!(ee.status>=200&&ee.status<300||ee.status===304))throw new Error("Couldn't load "+E+". Status: "+ee.status);return ee.response!==void 0?new Uint8Array(ee.response||[]):wn(ee.responseText||"")},Re=this;Re.setDataGetter(Ke=>{var Et=Ke*Ze,ee=(Ke+1)*Ze-1;if(ee=Math.min(ee,et-1),typeof Re.chunks[Ke]>"u"&&(Re.chunks[Ke]=Qe(Et,ee)),typeof Re.chunks[Ke]>"u")throw new Error("doXHR failed!");return Re.chunks[Ke]}),(Te||!et)&&(Ze=et=1,et=this.getter(0).length,Ze=et,I("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=et,this._chunkSize=Ze,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var fe=new W,me={isDevice:!1,contents:fe}}else var me={isDevice:!1,url:E};var Ge=G.createFile(g,b,me,N,O);me.contents?Ge.contents=me.contents:me.url&&(Ge.contents=null,Ge.url=me.url),Object.defineProperties(Ge,{usedBytes:{get:function(){return this.contents.length}}});var tt={},at=Object.keys(Ge.stream_ops);at.forEach(Be=>{var Oe=Ge.stream_ops[Be];tt[Be]=(...et)=>(G.forceLoadFile(Ge),Oe(...et))});function mt(Be,Oe,et,ve,ke){var Te=Be.node.contents;if(ke>=Te.length)return 0;var Ze=Math.min(Te.length-ke,ve);if(Te.slice)for(var Qe=0;Qe<Ze;Qe++)Oe[et+Qe]=Te[ke+Qe];else for(var Qe=0;Qe<Ze;Qe++)Oe[et+Qe]=Te.get(ke+Qe);return Ze}return tt.read=(Be,Oe,et,ve,ke)=>(G.forceLoadFile(Ge),mt(Be,Oe,et,ve,ke)),tt.mmap=(Be,Oe,et,ve,ke)=>{G.forceLoadFile(Ge);var Te=kr(Oe);if(!Te)throw new G.ErrnoError(48);return mt(Be,A,Te,Oe,et),{ptr:Te,allocated:!0}},Ge.stream_ops=tt,Ge}},Tc=(g,b)=>g?Me(F,g,b):"",gn={DEFAULT_POLLMASK:5,calculateAt(g,b,E){if(be.isAbs(b))return b;var N;if(g===-100)N=G.cwd();else{var O=gn.getStreamFromFD(g);N=O.path}if(b.length==0){if(!E)throw new G.ErrnoError(44);return N}return be.join2(N,b)},doStat(g,b,E){var N=g(b);P[E>>2]=N.dev,P[E+4>>2]=N.mode,q[E+8>>2]=N.nlink,P[E+12>>2]=N.uid,P[E+16>>2]=N.gid,P[E+20>>2]=N.rdev,B[E+24>>3]=BigInt(N.size),P[E+32>>2]=4096,P[E+36>>2]=N.blocks;var O=N.atime.getTime(),W=N.mtime.getTime(),fe=N.ctime.getTime();return B[E+40>>3]=BigInt(Math.floor(O/1e3)),q[E+48>>2]=O%1e3*1e3*1e3,B[E+56>>3]=BigInt(Math.floor(W/1e3)),q[E+64>>2]=W%1e3*1e3*1e3,B[E+72>>3]=BigInt(Math.floor(fe/1e3)),q[E+80>>2]=fe%1e3*1e3*1e3,B[E+88>>3]=BigInt(N.ino),0},doMsync(g,b,E,N,O){if(!G.isFile(b.node.mode))throw new G.ErrnoError(43);if(N&2)return 0;var W=F.slice(g,g+E);G.msync(b,W,O,E,N)},getStreamFromFD(g){var b=G.getStreamChecked(g);return b},varargs:void 0,getStr(g){var b=Tc(g);return b}};function Rc(g,b){try{return g=gn.getStr(g),G.chmod(g,b),0}catch(E){if(typeof G>"u"||E.name!=="ErrnoError")throw E;return-E.errno}}function jc(g,b,E,N){try{if(b=gn.getStr(b),b=gn.calculateAt(g,b),E&-8)return-28;var O=G.lookupPath(b,{follow:!0}),W=O.node;if(!W)return-44;var fe="";return E&4&&(fe+="r"),E&2&&(fe+="w"),E&1&&(fe+="x"),fe&&G.nodePermissions(W,fe)?-2:0}catch(me){if(typeof G>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function Oc(g,b){try{return G.fchmod(g,b),0}catch(E){if(typeof G>"u"||E.name!=="ErrnoError")throw E;return-E.errno}}function _u(g,b,E){try{return G.fchown(g,b,E),0}catch(N){if(typeof G>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function Sa(){var g=P[+gn.varargs>>2];return gn.varargs+=4,g}var os=Sa;function Su(g,b,E){gn.varargs=E;try{var N=gn.getStreamFromFD(g);switch(b){case 0:{var O=Sa();if(O<0)return-28;for(;G.streams[O];)O++;var W;return W=G.dupStream(N,O),W.fd}case 1:case 2:return 0;case 3:return N.flags;case 4:{var O=Sa();return N.flags|=O,0}case 12:{var O=os(),fe=0;return $[O+fe>>1]=2,0}case 13:case 14:return 0}return-28}catch(me){if(typeof G>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function Ea(g,b){try{var E=gn.getStreamFromFD(g);return gn.doStat(G.stat,E.path,b)}catch(N){if(typeof G>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}var Mf=0x20000000000000,Ia=-0x20000000000000,Ks=g=>g<Ia||g>Mf?NaN:Number(g);function ul(g,b){b=Ks(b);try{return isNaN(b)?61:(G.ftruncate(g,b),0)}catch(E){if(typeof G>"u"||E.name!=="ErrnoError")throw E;return-E.errno}}var Qs=(g,b,E)=>Zt(g,F,b,E);function $f(g,b){try{if(b===0)return-28;var E=G.cwd(),N=Jt(E)+1;return b<N?-68:(Qs(E,g,b),N)}catch(O){if(typeof G>"u"||O.name!=="ErrnoError")throw O;return-O.errno}}function Bf(g,b,E){gn.varargs=E;try{var N=gn.getStreamFromFD(g);switch(b){case 21509:return N.tty?0:-59;case 21505:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tcgets){var O=N.tty.ops.ioctl_tcgets(N),W=os();P[W>>2]=O.c_iflag||0,P[W+4>>2]=O.c_oflag||0,P[W+8>>2]=O.c_cflag||0,P[W+12>>2]=O.c_lflag||0;for(var fe=0;fe<32;fe++)A[W+fe+17]=O.c_cc[fe]||0;return 0}return 0}case 21510:case 21511:case 21512:return N.tty?0:-59;case 21506:case 21507:case 21508:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tcsets){for(var W=os(),me=P[W>>2],Ge=P[W+4>>2],tt=P[W+8>>2],at=P[W+12>>2],mt=[],fe=0;fe<32;fe++)mt.push(A[W+fe+17]);return N.tty.ops.ioctl_tcsets(N.tty,b,{c_iflag:me,c_oflag:Ge,c_cflag:tt,c_lflag:at,c_cc:mt})}return 0}case 21519:{if(!N.tty)return-59;var W=os();return P[W>>2]=0,0}case 21520:return N.tty?-28:-59;case 21531:{var W=os();return G.ioctl(N,b,W)}case 21523:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tiocgwinsz){var Be=N.tty.ops.ioctl_tiocgwinsz(N.tty),W=os();$[W>>1]=Be[0],$[W+2>>1]=Be[1]}return 0}case 21524:return N.tty?0:-59;case 21515:return N.tty?0:-59;default:return-28}}catch(Oe){if(typeof G>"u"||Oe.name!=="ErrnoError")throw Oe;return-Oe.errno}}function qc(g,b){try{return g=gn.getStr(g),gn.doStat(G.lstat,g,b)}catch(E){if(typeof G>"u"||E.name!=="ErrnoError")throw E;return-E.errno}}function Js(g,b,E){try{return b=gn.getStr(b),b=gn.calculateAt(g,b),b=be.normalize(b),b[b.length-1]==="/"&&(b=b.substr(0,b.length-1)),G.mkdir(b,E,0),0}catch(N){if(typeof G>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function Ac(g,b,E,N){try{b=gn.getStr(b);var O=N&256,W=N&4096;return N=N&-6401,b=gn.calculateAt(g,b,W),gn.doStat(O?G.lstat:G.stat,b,E)}catch(fe){if(typeof G>"u"||fe.name!=="ErrnoError")throw fe;return-fe.errno}}function Pc(g,b,E,N){gn.varargs=N;try{b=gn.getStr(b),b=gn.calculateAt(g,b);var O=N?Sa():0;return G.open(b,E,O).fd}catch(W){if(typeof G>"u"||W.name!=="ErrnoError")throw W;return-W.errno}}function zf(g,b,E,N){try{if(b=gn.getStr(b),b=gn.calculateAt(g,b),N<=0)return-28;var O=G.readlink(b),W=Math.min(N,Jt(O)),fe=A[E+W];return Qs(O,E,N+1),A[E+W]=fe,W}catch(me){if(typeof G>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function Fc(g){try{return g=gn.getStr(g),G.rmdir(g),0}catch(b){if(typeof G>"u"||b.name!=="ErrnoError")throw b;return-b.errno}}function Dc(g,b){try{return g=gn.getStr(g),gn.doStat(G.stat,g,b)}catch(E){if(typeof G>"u"||E.name!=="ErrnoError")throw E;return-E.errno}}function Lc(g,b,E){try{return b=gn.getStr(b),b=gn.calculateAt(g,b),E===0?G.unlink(b):E===512?G.rmdir(b):ze("Invalid flags passed to unlinkat"),0}catch(N){if(typeof G>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}var Eu=g=>q[g>>2]+P[g+4>>2]*0x100000000;function Mc(g,b,E,N){try{b=gn.getStr(b),b=gn.calculateAt(g,b,!0);var O=Date.now(),W,fe;if(!E)W=O,fe=O;else{var me=Eu(E),Ge=P[E+8>>2];Ge==0x3fffffff?W=O:Ge==0x3ffffffe?W=-1:W=me*1e3+Ge/(1e3*1e3),E+=16,me=Eu(E),Ge=P[E+8>>2],Ge==0x3fffffff?fe=O:Ge==0x3ffffffe?fe=-1:fe=me*1e3+Ge/(1e3*1e3)}return(fe!=-1||W!=-1)&&G.utime(b,W,fe),0}catch(tt){if(typeof G>"u"||tt.name!=="ErrnoError")throw tt;return-tt.errno}}var Wf=1,fr=()=>Wf,Uf=g=>g%4===0&&(g%100!==0||g%400===0),Iu=[0,31,60,91,121,152,182,213,244,274,305,335],$c=[0,31,59,90,120,151,181,212,243,273,304,334],cl=g=>{var b=Uf(g.getFullYear()),E=b?Iu:$c,N=E[g.getMonth()]+g.getDate()-1;return N};function Vf(g,b){g=Ks(g);var E=new Date(g*1e3);P[b>>2]=E.getSeconds(),P[b+4>>2]=E.getMinutes(),P[b+8>>2]=E.getHours(),P[b+12>>2]=E.getDate(),P[b+16>>2]=E.getMonth(),P[b+20>>2]=E.getFullYear()-1900,P[b+24>>2]=E.getDay();var N=cl(E)|0;P[b+28>>2]=N,P[b+36>>2]=-(E.getTimezoneOffset()*60);var O=new Date(E.getFullYear(),0,1),W=new Date(E.getFullYear(),6,1).getTimezoneOffset(),fe=O.getTimezoneOffset(),me=(W!=fe&&E.getTimezoneOffset()==Math.min(fe,W))|0;P[b+32>>2]=me}function Nu(g,b,E,N,O,W,fe){O=Ks(O);try{if(isNaN(O))return 61;var me=gn.getStreamFromFD(N),Ge=G.mmap(me,g,O,b,E),tt=Ge.ptr;return P[W>>2]=Ge.allocated,q[fe>>2]=tt,0}catch(at){if(typeof G>"u"||at.name!=="ErrnoError")throw at;return-at.errno}}function dl(g,b,E,N,O,W){W=Ks(W);try{var fe=gn.getStreamFromFD(O);E&2&&gn.doMsync(g,fe,b,N,W)}catch(me){if(typeof G>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}var as=(g,b,E,N)=>{var O=new Date().getFullYear(),W=new Date(O,0,1),fe=new Date(O,6,1),me=W.getTimezoneOffset(),Ge=fe.getTimezoneOffset(),tt=Math.max(me,Ge);q[g>>2]=tt*60,P[b>>2]=+(me!=Ge);var at=Oe=>{var et=Oe>=0?"-":"+",ve=Math.abs(Oe),ke=String(Math.floor(ve/60)).padStart(2,"0"),Te=String(ve%60).padStart(2,"0");return`UTC${et}${ke}${Te}`},mt=at(me),Be=at(Ge);Ge<me?(Qs(mt,E,17),Qs(Be,N,17)):(Qs(mt,N,17),Qs(Be,E,17))},Hf=()=>Date.now(),Ni;Ni=()=>performance.now();var Gf=()=>0x80000000,Kf=g=>{var b=R.buffer,E=(g-b.byteLength+65535)/65536;try{return R.grow(E),L(),1}catch{}},Qf=g=>{var b=F.length;g>>>=0;var E=Gf();if(g>E)return!1;for(var N=1;N<=4;N*=2){var O=b*(1+.2/N);O=Math.min(O,g+0x6000000);var W=Math.min(E,Ui(Math.max(g,O),65536)),fe=Kf(W);if(fe)return!0}return!1},Zo={},fl=()=>h||"./this.program",Vi=()=>{if(!Vi.strings){var g=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",b={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:g,_:fl()};for(var E in Zo)Zo[E]===void 0?delete b[E]:b[E]=Zo[E];var N=[];for(var E in b)N.push(`${E}=${b[E]}`);Vi.strings=N}return Vi.strings},pl=(g,b)=>{for(var E=0;E<g.length;++E)A[b++]=g.charCodeAt(E);A[b]=0},Lx=(g,b)=>{var E=0;return Vi().forEach((N,O)=>{var W=b+E;q[g+O*4>>2]=W,pl(N,W),E+=N.length+1}),0},Mx=(g,b)=>{var E=Vi();q[g>>2]=E.length;var N=0;return E.forEach(O=>N+=O.length+1),q[b>>2]=N,0};function Jf(g){try{var b=gn.getStreamFromFD(g);return G.close(b),0}catch(E){if(typeof G>"u"||E.name!=="ErrnoError")throw E;return E.errno}}function Ym(g,b){try{var E=0,N=0,O=0,W=gn.getStreamFromFD(g),fe=W.tty?2:G.isDir(W.mode)?3:G.isLink(W.mode)?7:4;return A[b]=fe,$[b+2>>1]=O,B[b+8>>3]=BigInt(E),B[b+16>>3]=BigInt(N),0}catch(me){if(typeof G>"u"||me.name!=="ErrnoError")throw me;return me.errno}}var Zf=(g,b,E,N)=>{for(var O=0,W=0;W<E;W++){var fe=q[b>>2],me=q[b+4>>2];b+=8;var Ge=G.read(g,A,fe,me,N);if(Ge<0)return-1;if(O+=Ge,Ge<me)break}return O};function ku(g,b,E,N){try{var O=gn.getStreamFromFD(g),W=Zf(O,b,E);return q[N>>2]=W,0}catch(fe){if(typeof G>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}function $x(g,b,E,N){b=Ks(b);try{if(isNaN(b))return 61;var O=gn.getStreamFromFD(g);return G.llseek(O,b,E),B[N>>3]=BigInt(O.position),O.getdents&&b===0&&E===0&&(O.getdents=null),0}catch(W){if(typeof G>"u"||W.name!=="ErrnoError")throw W;return W.errno}}function Yf(g){try{var b=gn.getStreamFromFD(g);return b.stream_ops?.fsync?b.stream_ops.fsync(b):0}catch(E){if(typeof G>"u"||E.name!=="ErrnoError")throw E;return E.errno}}var zn=(g,b,E,N)=>{for(var O=0,W=0;W<E;W++){var fe=q[b>>2],me=q[b+4>>2];b+=8;var Ge=G.write(g,A,fe,me,N);if(Ge<0)return-1;if(O+=Ge,Ge<me)break}return O};function Xm(g,b,E,N){try{var O=gn.getStreamFromFD(g),W=zn(O,b,E);return q[N>>2]=W,0}catch(fe){if(typeof G>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}G.createPreloadedFile=_a,G.staticInit();var Xf={__syscall_chmod:Rc,__syscall_faccessat:jc,__syscall_fchmod:Oc,__syscall_fchown32:_u,__syscall_fcntl64:Su,__syscall_fstat64:Ea,__syscall_ftruncate64:ul,__syscall_getcwd:$f,__syscall_ioctl:Bf,__syscall_lstat64:qc,__syscall_mkdirat:Js,__syscall_newfstatat:Ac,__syscall_openat:Pc,__syscall_readlinkat:zf,__syscall_rmdir:Fc,__syscall_stat64:Dc,__syscall_unlinkat:Lc,__syscall_utimensat:Mc,_emscripten_get_now_is_monotonic:fr,_localtime_js:Vf,_mmap_js:Nu,_munmap_js:dl,_tzset_js:as,emscripten_date_now:Hf,emscripten_get_now:Ni,emscripten_resize_heap:Qf,environ_get:Lx,environ_sizes_get:Mx,fd_close:Jf,fd_fdstat_get:Ym,fd_read:ku,fd_seek:$x,fd_sync:Yf,fd_write:Xm,memory:R},he=an();r._sqlite3_status64=(g,b,E,N)=>(r._sqlite3_status64=he.sqlite3_status64)(g,b,E,N),r._sqlite3_status=(g,b,E,N)=>(r._sqlite3_status=he.sqlite3_status)(g,b,E,N),r._sqlite3_db_status=(g,b,E,N,O)=>(r._sqlite3_db_status=he.sqlite3_db_status)(g,b,E,N,O),r._sqlite3_msize=g=>(r._sqlite3_msize=he.sqlite3_msize)(g),r._sqlite3_vfs_find=g=>(r._sqlite3_vfs_find=he.sqlite3_vfs_find)(g),r._sqlite3_initialize=()=>(r._sqlite3_initialize=he.sqlite3_initialize)(),r._sqlite3_malloc=g=>(r._sqlite3_malloc=he.sqlite3_malloc)(g),r._sqlite3_free=g=>(r._sqlite3_free=he.sqlite3_free)(g),r._sqlite3_vfs_register=(g,b)=>(r._sqlite3_vfs_register=he.sqlite3_vfs_register)(g,b),r._sqlite3_vfs_unregister=g=>(r._sqlite3_vfs_unregister=he.sqlite3_vfs_unregister)(g),r._sqlite3_malloc64=g=>(r._sqlite3_malloc64=he.sqlite3_malloc64)(g),r._sqlite3_realloc=(g,b)=>(r._sqlite3_realloc=he.sqlite3_realloc)(g,b),r._sqlite3_realloc64=(g,b)=>(r._sqlite3_realloc64=he.sqlite3_realloc64)(g,b),r._sqlite3_value_text=g=>(r._sqlite3_value_text=he.sqlite3_value_text)(g),r._sqlite3_randomness=(g,b)=>(r._sqlite3_randomness=he.sqlite3_randomness)(g,b),r._sqlite3_stricmp=(g,b)=>(r._sqlite3_stricmp=he.sqlite3_stricmp)(g,b),r._sqlite3_strnicmp=(g,b,E)=>(r._sqlite3_strnicmp=he.sqlite3_strnicmp)(g,b,E),r._sqlite3_uri_parameter=(g,b)=>(r._sqlite3_uri_parameter=he.sqlite3_uri_parameter)(g,b),r._sqlite3_uri_boolean=(g,b,E)=>(r._sqlite3_uri_boolean=he.sqlite3_uri_boolean)(g,b,E),r._sqlite3_serialize=(g,b,E,N)=>(r._sqlite3_serialize=he.sqlite3_serialize)(g,b,E,N),r._sqlite3_prepare_v2=(g,b,E,N,O)=>(r._sqlite3_prepare_v2=he.sqlite3_prepare_v2)(g,b,E,N,O),r._sqlite3_step=g=>(r._sqlite3_step=he.sqlite3_step)(g),r._sqlite3_column_int64=(g,b)=>(r._sqlite3_column_int64=he.sqlite3_column_int64)(g,b),r._sqlite3_reset=g=>(r._sqlite3_reset=he.sqlite3_reset)(g),r._sqlite3_exec=(g,b,E,N,O)=>(r._sqlite3_exec=he.sqlite3_exec)(g,b,E,N,O),r._sqlite3_column_int=(g,b)=>(r._sqlite3_column_int=he.sqlite3_column_int)(g,b),r._sqlite3_finalize=g=>(r._sqlite3_finalize=he.sqlite3_finalize)(g),r._sqlite3_file_control=(g,b,E,N)=>(r._sqlite3_file_control=he.sqlite3_file_control)(g,b,E,N),r._sqlite3_column_name=(g,b)=>(r._sqlite3_column_name=he.sqlite3_column_name)(g,b),r._sqlite3_column_text=(g,b)=>(r._sqlite3_column_text=he.sqlite3_column_text)(g,b),r._sqlite3_column_type=(g,b)=>(r._sqlite3_column_type=he.sqlite3_column_type)(g,b),r._sqlite3_errmsg=g=>(r._sqlite3_errmsg=he.sqlite3_errmsg)(g),r._sqlite3_deserialize=(g,b,E,N,O,W)=>(r._sqlite3_deserialize=he.sqlite3_deserialize)(g,b,E,N,O,W),r._sqlite3_clear_bindings=g=>(r._sqlite3_clear_bindings=he.sqlite3_clear_bindings)(g),r._sqlite3_value_blob=g=>(r._sqlite3_value_blob=he.sqlite3_value_blob)(g),r._sqlite3_value_bytes=g=>(r._sqlite3_value_bytes=he.sqlite3_value_bytes)(g),r._sqlite3_value_double=g=>(r._sqlite3_value_double=he.sqlite3_value_double)(g),r._sqlite3_value_int=g=>(r._sqlite3_value_int=he.sqlite3_value_int)(g),r._sqlite3_value_int64=g=>(r._sqlite3_value_int64=he.sqlite3_value_int64)(g),r._sqlite3_value_subtype=g=>(r._sqlite3_value_subtype=he.sqlite3_value_subtype)(g),r._sqlite3_value_pointer=(g,b)=>(r._sqlite3_value_pointer=he.sqlite3_value_pointer)(g,b),r._sqlite3_value_type=g=>(r._sqlite3_value_type=he.sqlite3_value_type)(g),r._sqlite3_value_nochange=g=>(r._sqlite3_value_nochange=he.sqlite3_value_nochange)(g),r._sqlite3_value_frombind=g=>(r._sqlite3_value_frombind=he.sqlite3_value_frombind)(g),r._sqlite3_value_dup=g=>(r._sqlite3_value_dup=he.sqlite3_value_dup)(g),r._sqlite3_value_free=g=>(r._sqlite3_value_free=he.sqlite3_value_free)(g),r._sqlite3_result_blob=(g,b,E,N)=>(r._sqlite3_result_blob=he.sqlite3_result_blob)(g,b,E,N),r._sqlite3_result_error_toobig=g=>(r._sqlite3_result_error_toobig=he.sqlite3_result_error_toobig)(g),r._sqlite3_result_error_nomem=g=>(r._sqlite3_result_error_nomem=he.sqlite3_result_error_nomem)(g),r._sqlite3_result_double=(g,b)=>(r._sqlite3_result_double=he.sqlite3_result_double)(g,b),r._sqlite3_result_error=(g,b,E)=>(r._sqlite3_result_error=he.sqlite3_result_error)(g,b,E),r._sqlite3_result_int=(g,b)=>(r._sqlite3_result_int=he.sqlite3_result_int)(g,b),r._sqlite3_result_int64=(g,b)=>(r._sqlite3_result_int64=he.sqlite3_result_int64)(g,b),r._sqlite3_result_null=g=>(r._sqlite3_result_null=he.sqlite3_result_null)(g),r._sqlite3_result_pointer=(g,b,E,N)=>(r._sqlite3_result_pointer=he.sqlite3_result_pointer)(g,b,E,N),r._sqlite3_result_subtype=(g,b)=>(r._sqlite3_result_subtype=he.sqlite3_result_subtype)(g,b),r._sqlite3_result_text=(g,b,E,N)=>(r._sqlite3_result_text=he.sqlite3_result_text)(g,b,E,N),r._sqlite3_result_zeroblob=(g,b)=>(r._sqlite3_result_zeroblob=he.sqlite3_result_zeroblob)(g,b),r._sqlite3_result_zeroblob64=(g,b)=>(r._sqlite3_result_zeroblob64=he.sqlite3_result_zeroblob64)(g,b),r._sqlite3_result_error_code=(g,b)=>(r._sqlite3_result_error_code=he.sqlite3_result_error_code)(g,b),r._sqlite3_user_data=g=>(r._sqlite3_user_data=he.sqlite3_user_data)(g),r._sqlite3_context_db_handle=g=>(r._sqlite3_context_db_handle=he.sqlite3_context_db_handle)(g),r._sqlite3_vtab_nochange=g=>(r._sqlite3_vtab_nochange=he.sqlite3_vtab_nochange)(g),r._sqlite3_vtab_in_first=(g,b)=>(r._sqlite3_vtab_in_first=he.sqlite3_vtab_in_first)(g,b),r._sqlite3_vtab_in_next=(g,b)=>(r._sqlite3_vtab_in_next=he.sqlite3_vtab_in_next)(g,b),r._sqlite3_aggregate_context=(g,b)=>(r._sqlite3_aggregate_context=he.sqlite3_aggregate_context)(g,b),r._sqlite3_get_auxdata=(g,b)=>(r._sqlite3_get_auxdata=he.sqlite3_get_auxdata)(g,b),r._sqlite3_set_auxdata=(g,b,E,N)=>(r._sqlite3_set_auxdata=he.sqlite3_set_auxdata)(g,b,E,N),r._sqlite3_column_count=g=>(r._sqlite3_column_count=he.sqlite3_column_count)(g),r._sqlite3_data_count=g=>(r._sqlite3_data_count=he.sqlite3_data_count)(g),r._sqlite3_column_blob=(g,b)=>(r._sqlite3_column_blob=he.sqlite3_column_blob)(g,b),r._sqlite3_column_bytes=(g,b)=>(r._sqlite3_column_bytes=he.sqlite3_column_bytes)(g,b),r._sqlite3_column_double=(g,b)=>(r._sqlite3_column_double=he.sqlite3_column_double)(g,b),r._sqlite3_column_value=(g,b)=>(r._sqlite3_column_value=he.sqlite3_column_value)(g,b),r._sqlite3_column_decltype=(g,b)=>(r._sqlite3_column_decltype=he.sqlite3_column_decltype)(g,b),r._sqlite3_bind_blob=(g,b,E,N,O)=>(r._sqlite3_bind_blob=he.sqlite3_bind_blob)(g,b,E,N,O),r._sqlite3_bind_double=(g,b,E)=>(r._sqlite3_bind_double=he.sqlite3_bind_double)(g,b,E),r._sqlite3_bind_int=(g,b,E)=>(r._sqlite3_bind_int=he.sqlite3_bind_int)(g,b,E),r._sqlite3_bind_int64=(g,b,E)=>(r._sqlite3_bind_int64=he.sqlite3_bind_int64)(g,b,E),r._sqlite3_bind_null=(g,b)=>(r._sqlite3_bind_null=he.sqlite3_bind_null)(g,b),r._sqlite3_bind_pointer=(g,b,E,N,O)=>(r._sqlite3_bind_pointer=he.sqlite3_bind_pointer)(g,b,E,N,O),r._sqlite3_bind_text=(g,b,E,N,O)=>(r._sqlite3_bind_text=he.sqlite3_bind_text)(g,b,E,N,O),r._sqlite3_bind_parameter_count=g=>(r._sqlite3_bind_parameter_count=he.sqlite3_bind_parameter_count)(g),r._sqlite3_bind_parameter_name=(g,b)=>(r._sqlite3_bind_parameter_name=he.sqlite3_bind_parameter_name)(g,b),r._sqlite3_bind_parameter_index=(g,b)=>(r._sqlite3_bind_parameter_index=he.sqlite3_bind_parameter_index)(g,b),r._sqlite3_db_handle=g=>(r._sqlite3_db_handle=he.sqlite3_db_handle)(g),r._sqlite3_stmt_readonly=g=>(r._sqlite3_stmt_readonly=he.sqlite3_stmt_readonly)(g),r._sqlite3_stmt_isexplain=g=>(r._sqlite3_stmt_isexplain=he.sqlite3_stmt_isexplain)(g),r._sqlite3_stmt_explain=(g,b)=>(r._sqlite3_stmt_explain=he.sqlite3_stmt_explain)(g,b),r._sqlite3_stmt_busy=g=>(r._sqlite3_stmt_busy=he.sqlite3_stmt_busy)(g),r._sqlite3_stmt_status=(g,b,E)=>(r._sqlite3_stmt_status=he.sqlite3_stmt_status)(g,b,E),r._sqlite3_sql=g=>(r._sqlite3_sql=he.sqlite3_sql)(g),r._sqlite3_expanded_sql=g=>(r._sqlite3_expanded_sql=he.sqlite3_expanded_sql)(g),r._sqlite3_preupdate_old=(g,b,E)=>(r._sqlite3_preupdate_old=he.sqlite3_preupdate_old)(g,b,E),r._sqlite3_preupdate_count=g=>(r._sqlite3_preupdate_count=he.sqlite3_preupdate_count)(g),r._sqlite3_preupdate_depth=g=>(r._sqlite3_preupdate_depth=he.sqlite3_preupdate_depth)(g),r._sqlite3_preupdate_blobwrite=g=>(r._sqlite3_preupdate_blobwrite=he.sqlite3_preupdate_blobwrite)(g),r._sqlite3_preupdate_new=(g,b,E)=>(r._sqlite3_preupdate_new=he.sqlite3_preupdate_new)(g,b,E),r._sqlite3_value_numeric_type=g=>(r._sqlite3_value_numeric_type=he.sqlite3_value_numeric_type)(g),r._sqlite3_set_authorizer=(g,b,E)=>(r._sqlite3_set_authorizer=he.sqlite3_set_authorizer)(g,b,E),r._sqlite3_strglob=(g,b)=>(r._sqlite3_strglob=he.sqlite3_strglob)(g,b),r._sqlite3_strlike=(g,b,E)=>(r._sqlite3_strlike=he.sqlite3_strlike)(g,b,E),r._sqlite3_auto_extension=g=>(r._sqlite3_auto_extension=he.sqlite3_auto_extension)(g),r._sqlite3_cancel_auto_extension=g=>(r._sqlite3_cancel_auto_extension=he.sqlite3_cancel_auto_extension)(g),r._sqlite3_reset_auto_extension=()=>(r._sqlite3_reset_auto_extension=he.sqlite3_reset_auto_extension)(),r._sqlite3_prepare_v3=(g,b,E,N,O,W)=>(r._sqlite3_prepare_v3=he.sqlite3_prepare_v3)(g,b,E,N,O,W),r._sqlite3_create_module=(g,b,E,N)=>(r._sqlite3_create_module=he.sqlite3_create_module)(g,b,E,N),r._sqlite3_create_module_v2=(g,b,E,N,O)=>(r._sqlite3_create_module_v2=he.sqlite3_create_module_v2)(g,b,E,N,O),r._sqlite3_drop_modules=(g,b)=>(r._sqlite3_drop_modules=he.sqlite3_drop_modules)(g,b),r._sqlite3_declare_vtab=(g,b)=>(r._sqlite3_declare_vtab=he.sqlite3_declare_vtab)(g,b),r._sqlite3_vtab_on_conflict=g=>(r._sqlite3_vtab_on_conflict=he.sqlite3_vtab_on_conflict)(g),r._sqlite3_vtab_collation=(g,b)=>(r._sqlite3_vtab_collation=he.sqlite3_vtab_collation)(g,b),r._sqlite3_vtab_in=(g,b,E)=>(r._sqlite3_vtab_in=he.sqlite3_vtab_in)(g,b,E),r._sqlite3_vtab_rhs_value=(g,b,E)=>(r._sqlite3_vtab_rhs_value=he.sqlite3_vtab_rhs_value)(g,b,E),r._sqlite3_vtab_distinct=g=>(r._sqlite3_vtab_distinct=he.sqlite3_vtab_distinct)(g),r._sqlite3_keyword_name=(g,b,E)=>(r._sqlite3_keyword_name=he.sqlite3_keyword_name)(g,b,E),r._sqlite3_keyword_count=()=>(r._sqlite3_keyword_count=he.sqlite3_keyword_count)(),r._sqlite3_keyword_check=(g,b)=>(r._sqlite3_keyword_check=he.sqlite3_keyword_check)(g,b),r._sqlite3_complete=g=>(r._sqlite3_complete=he.sqlite3_complete)(g),r._sqlite3_libversion=()=>(r._sqlite3_libversion=he.sqlite3_libversion)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=he.sqlite3_libversion_number)(),r._sqlite3_shutdown=()=>(r._sqlite3_shutdown=he.sqlite3_shutdown)(),r._sqlite3_last_insert_rowid=g=>(r._sqlite3_last_insert_rowid=he.sqlite3_last_insert_rowid)(g),r._sqlite3_set_last_insert_rowid=(g,b)=>(r._sqlite3_set_last_insert_rowid=he.sqlite3_set_last_insert_rowid)(g,b),r._sqlite3_changes64=g=>(r._sqlite3_changes64=he.sqlite3_changes64)(g),r._sqlite3_changes=g=>(r._sqlite3_changes=he.sqlite3_changes)(g),r._sqlite3_total_changes64=g=>(r._sqlite3_total_changes64=he.sqlite3_total_changes64)(g),r._sqlite3_total_changes=g=>(r._sqlite3_total_changes=he.sqlite3_total_changes)(g),r._sqlite3_txn_state=(g,b)=>(r._sqlite3_txn_state=he.sqlite3_txn_state)(g,b),r._sqlite3_close_v2=g=>(r._sqlite3_close_v2=he.sqlite3_close_v2)(g),r._sqlite3_busy_handler=(g,b,E)=>(r._sqlite3_busy_handler=he.sqlite3_busy_handler)(g,b,E),r._sqlite3_progress_handler=(g,b,E,N)=>(r._sqlite3_progress_handler=he.sqlite3_progress_handler)(g,b,E,N),r._sqlite3_busy_timeout=(g,b)=>(r._sqlite3_busy_timeout=he.sqlite3_busy_timeout)(g,b),r._sqlite3_interrupt=g=>(r._sqlite3_interrupt=he.sqlite3_interrupt)(g),r._sqlite3_is_interrupted=g=>(r._sqlite3_is_interrupted=he.sqlite3_is_interrupted)(g),r._sqlite3_create_function=(g,b,E,N,O,W,fe,me)=>(r._sqlite3_create_function=he.sqlite3_create_function)(g,b,E,N,O,W,fe,me),r._sqlite3_create_function_v2=(g,b,E,N,O,W,fe,me,Ge)=>(r._sqlite3_create_function_v2=he.sqlite3_create_function_v2)(g,b,E,N,O,W,fe,me,Ge),r._sqlite3_create_window_function=(g,b,E,N,O,W,fe,me,Ge,tt)=>(r._sqlite3_create_window_function=he.sqlite3_create_window_function)(g,b,E,N,O,W,fe,me,Ge,tt),r._sqlite3_overload_function=(g,b,E)=>(r._sqlite3_overload_function=he.sqlite3_overload_function)(g,b,E),r._sqlite3_trace_v2=(g,b,E,N)=>(r._sqlite3_trace_v2=he.sqlite3_trace_v2)(g,b,E,N),r._sqlite3_commit_hook=(g,b,E)=>(r._sqlite3_commit_hook=he.sqlite3_commit_hook)(g,b,E),r._sqlite3_update_hook=(g,b,E)=>(r._sqlite3_update_hook=he.sqlite3_update_hook)(g,b,E),r._sqlite3_rollback_hook=(g,b,E)=>(r._sqlite3_rollback_hook=he.sqlite3_rollback_hook)(g,b,E),r._sqlite3_preupdate_hook=(g,b,E)=>(r._sqlite3_preupdate_hook=he.sqlite3_preupdate_hook)(g,b,E),r._sqlite3_error_offset=g=>(r._sqlite3_error_offset=he.sqlite3_error_offset)(g),r._sqlite3_errcode=g=>(r._sqlite3_errcode=he.sqlite3_errcode)(g),r._sqlite3_extended_errcode=g=>(r._sqlite3_extended_errcode=he.sqlite3_extended_errcode)(g),r._sqlite3_errstr=g=>(r._sqlite3_errstr=he.sqlite3_errstr)(g),r._sqlite3_limit=(g,b,E)=>(r._sqlite3_limit=he.sqlite3_limit)(g,b,E),r._sqlite3_open=(g,b)=>(r._sqlite3_open=he.sqlite3_open)(g,b),r._sqlite3_open_v2=(g,b,E,N)=>(r._sqlite3_open_v2=he.sqlite3_open_v2)(g,b,E,N),r._sqlite3_create_collation=(g,b,E,N,O)=>(r._sqlite3_create_collation=he.sqlite3_create_collation)(g,b,E,N,O),r._sqlite3_create_collation_v2=(g,b,E,N,O,W)=>(r._sqlite3_create_collation_v2=he.sqlite3_create_collation_v2)(g,b,E,N,O,W),r._sqlite3_collation_needed=(g,b,E)=>(r._sqlite3_collation_needed=he.sqlite3_collation_needed)(g,b,E),r._sqlite3_get_autocommit=g=>(r._sqlite3_get_autocommit=he.sqlite3_get_autocommit)(g),r._sqlite3_table_column_metadata=(g,b,E,N,O,W,fe,me,Ge)=>(r._sqlite3_table_column_metadata=he.sqlite3_table_column_metadata)(g,b,E,N,O,W,fe,me,Ge),r._sqlite3_extended_result_codes=(g,b)=>(r._sqlite3_extended_result_codes=he.sqlite3_extended_result_codes)(g,b),r._sqlite3_uri_key=(g,b)=>(r._sqlite3_uri_key=he.sqlite3_uri_key)(g,b),r._sqlite3_uri_int64=(g,b,E)=>(r._sqlite3_uri_int64=he.sqlite3_uri_int64)(g,b,E),r._sqlite3_db_name=(g,b)=>(r._sqlite3_db_name=he.sqlite3_db_name)(g,b),r._sqlite3_db_filename=(g,b)=>(r._sqlite3_db_filename=he.sqlite3_db_filename)(g,b),r._sqlite3_db_readonly=(g,b)=>(r._sqlite3_db_readonly=he.sqlite3_db_readonly)(g,b),r._sqlite3_compileoption_used=g=>(r._sqlite3_compileoption_used=he.sqlite3_compileoption_used)(g),r._sqlite3_compileoption_get=g=>(r._sqlite3_compileoption_get=he.sqlite3_compileoption_get)(g),r._sqlite3session_diff=(g,b,E,N)=>(r._sqlite3session_diff=he.sqlite3session_diff)(g,b,E,N),r._sqlite3session_attach=(g,b)=>(r._sqlite3session_attach=he.sqlite3session_attach)(g,b),r._sqlite3session_create=(g,b,E)=>(r._sqlite3session_create=he.sqlite3session_create)(g,b,E),r._sqlite3session_delete=g=>(r._sqlite3session_delete=he.sqlite3session_delete)(g),r._sqlite3session_table_filter=(g,b,E)=>(r._sqlite3session_table_filter=he.sqlite3session_table_filter)(g,b,E),r._sqlite3session_changeset=(g,b,E)=>(r._sqlite3session_changeset=he.sqlite3session_changeset)(g,b,E),r._sqlite3session_changeset_strm=(g,b,E)=>(r._sqlite3session_changeset_strm=he.sqlite3session_changeset_strm)(g,b,E),r._sqlite3session_patchset_strm=(g,b,E)=>(r._sqlite3session_patchset_strm=he.sqlite3session_patchset_strm)(g,b,E),r._sqlite3session_patchset=(g,b,E)=>(r._sqlite3session_patchset=he.sqlite3session_patchset)(g,b,E),r._sqlite3session_enable=(g,b)=>(r._sqlite3session_enable=he.sqlite3session_enable)(g,b),r._sqlite3session_indirect=(g,b)=>(r._sqlite3session_indirect=he.sqlite3session_indirect)(g,b),r._sqlite3session_isempty=g=>(r._sqlite3session_isempty=he.sqlite3session_isempty)(g),r._sqlite3session_memory_used=g=>(r._sqlite3session_memory_used=he.sqlite3session_memory_used)(g),r._sqlite3session_object_config=(g,b,E)=>(r._sqlite3session_object_config=he.sqlite3session_object_config)(g,b,E),r._sqlite3session_changeset_size=g=>(r._sqlite3session_changeset_size=he.sqlite3session_changeset_size)(g),r._sqlite3changeset_start=(g,b,E)=>(r._sqlite3changeset_start=he.sqlite3changeset_start)(g,b,E),r._sqlite3changeset_start_v2=(g,b,E,N)=>(r._sqlite3changeset_start_v2=he.sqlite3changeset_start_v2)(g,b,E,N),r._sqlite3changeset_start_strm=(g,b,E)=>(r._sqlite3changeset_start_strm=he.sqlite3changeset_start_strm)(g,b,E),r._sqlite3changeset_start_v2_strm=(g,b,E,N)=>(r._sqlite3changeset_start_v2_strm=he.sqlite3changeset_start_v2_strm)(g,b,E,N),r._sqlite3changeset_next=g=>(r._sqlite3changeset_next=he.sqlite3changeset_next)(g),r._sqlite3changeset_op=(g,b,E,N,O)=>(r._sqlite3changeset_op=he.sqlite3changeset_op)(g,b,E,N,O),r._sqlite3changeset_pk=(g,b,E)=>(r._sqlite3changeset_pk=he.sqlite3changeset_pk)(g,b,E),r._sqlite3changeset_old=(g,b,E)=>(r._sqlite3changeset_old=he.sqlite3changeset_old)(g,b,E),r._sqlite3changeset_new=(g,b,E)=>(r._sqlite3changeset_new=he.sqlite3changeset_new)(g,b,E),r._sqlite3changeset_conflict=(g,b,E)=>(r._sqlite3changeset_conflict=he.sqlite3changeset_conflict)(g,b,E),r._sqlite3changeset_fk_conflicts=(g,b)=>(r._sqlite3changeset_fk_conflicts=he.sqlite3changeset_fk_conflicts)(g,b),r._sqlite3changeset_finalize=g=>(r._sqlite3changeset_finalize=he.sqlite3changeset_finalize)(g),r._sqlite3changeset_invert=(g,b,E,N)=>(r._sqlite3changeset_invert=he.sqlite3changeset_invert)(g,b,E,N),r._sqlite3changeset_invert_strm=(g,b,E,N)=>(r._sqlite3changeset_invert_strm=he.sqlite3changeset_invert_strm)(g,b,E,N),r._sqlite3changeset_apply_v2=(g,b,E,N,O,W,fe,me,Ge)=>(r._sqlite3changeset_apply_v2=he.sqlite3changeset_apply_v2)(g,b,E,N,O,W,fe,me,Ge),r._sqlite3changeset_apply=(g,b,E,N,O,W)=>(r._sqlite3changeset_apply=he.sqlite3changeset_apply)(g,b,E,N,O,W),r._sqlite3changeset_apply_v2_strm=(g,b,E,N,O,W,fe,me,Ge)=>(r._sqlite3changeset_apply_v2_strm=he.sqlite3changeset_apply_v2_strm)(g,b,E,N,O,W,fe,me,Ge),r._sqlite3changeset_apply_strm=(g,b,E,N,O,W)=>(r._sqlite3changeset_apply_strm=he.sqlite3changeset_apply_strm)(g,b,E,N,O,W),r._sqlite3changegroup_new=g=>(r._sqlite3changegroup_new=he.sqlite3changegroup_new)(g),r._sqlite3changegroup_add=(g,b,E)=>(r._sqlite3changegroup_add=he.sqlite3changegroup_add)(g,b,E),r._sqlite3changegroup_output=(g,b,E)=>(r._sqlite3changegroup_output=he.sqlite3changegroup_output)(g,b,E),r._sqlite3changegroup_add_strm=(g,b,E)=>(r._sqlite3changegroup_add_strm=he.sqlite3changegroup_add_strm)(g,b,E),r._sqlite3changegroup_output_strm=(g,b,E)=>(r._sqlite3changegroup_output_strm=he.sqlite3changegroup_output_strm)(g,b,E),r._sqlite3changegroup_delete=g=>(r._sqlite3changegroup_delete=he.sqlite3changegroup_delete)(g),r._sqlite3changeset_concat=(g,b,E,N,O,W)=>(r._sqlite3changeset_concat=he.sqlite3changeset_concat)(g,b,E,N,O,W),r._sqlite3changeset_concat_strm=(g,b,E,N,O,W)=>(r._sqlite3changeset_concat_strm=he.sqlite3changeset_concat_strm)(g,b,E,N,O,W),r._sqlite3session_config=(g,b)=>(r._sqlite3session_config=he.sqlite3session_config)(g,b),r._sqlite3_sourceid=()=>(r._sqlite3_sourceid=he.sqlite3_sourceid)(),r._sqlite3__wasm_pstack_ptr=()=>(r._sqlite3__wasm_pstack_ptr=he.sqlite3__wasm_pstack_ptr)(),r._sqlite3__wasm_pstack_restore=g=>(r._sqlite3__wasm_pstack_restore=he.sqlite3__wasm_pstack_restore)(g),r._sqlite3__wasm_pstack_alloc=g=>(r._sqlite3__wasm_pstack_alloc=he.sqlite3__wasm_pstack_alloc)(g),r._sqlite3__wasm_pstack_remaining=()=>(r._sqlite3__wasm_pstack_remaining=he.sqlite3__wasm_pstack_remaining)(),r._sqlite3__wasm_pstack_quota=()=>(r._sqlite3__wasm_pstack_quota=he.sqlite3__wasm_pstack_quota)(),r._sqlite3__wasm_db_error=(g,b,E)=>(r._sqlite3__wasm_db_error=he.sqlite3__wasm_db_error)(g,b,E),r._sqlite3__wasm_test_struct=g=>(r._sqlite3__wasm_test_struct=he.sqlite3__wasm_test_struct)(g),r._sqlite3__wasm_enum_json=()=>(r._sqlite3__wasm_enum_json=he.sqlite3__wasm_enum_json)(),r._sqlite3__wasm_vfs_unlink=(g,b)=>(r._sqlite3__wasm_vfs_unlink=he.sqlite3__wasm_vfs_unlink)(g,b),r._sqlite3__wasm_db_vfs=(g,b)=>(r._sqlite3__wasm_db_vfs=he.sqlite3__wasm_db_vfs)(g,b),r._sqlite3__wasm_db_reset=g=>(r._sqlite3__wasm_db_reset=he.sqlite3__wasm_db_reset)(g),r._sqlite3__wasm_db_export_chunked=(g,b)=>(r._sqlite3__wasm_db_export_chunked=he.sqlite3__wasm_db_export_chunked)(g,b),r._sqlite3__wasm_db_serialize=(g,b,E,N,O)=>(r._sqlite3__wasm_db_serialize=he.sqlite3__wasm_db_serialize)(g,b,E,N,O),r._sqlite3__wasm_vfs_create_file=(g,b,E,N)=>(r._sqlite3__wasm_vfs_create_file=he.sqlite3__wasm_vfs_create_file)(g,b,E,N),r._sqlite3__wasm_posix_create_file=(g,b,E)=>(r._sqlite3__wasm_posix_create_file=he.sqlite3__wasm_posix_create_file)(g,b,E),r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(g,b)=>(r._sqlite3__wasm_kvvfsMakeKeyOnPstack=he.sqlite3__wasm_kvvfsMakeKeyOnPstack)(g,b),r._sqlite3__wasm_kvvfs_methods=()=>(r._sqlite3__wasm_kvvfs_methods=he.sqlite3__wasm_kvvfs_methods)(),r._sqlite3__wasm_vtab_config=(g,b,E)=>(r._sqlite3__wasm_vtab_config=he.sqlite3__wasm_vtab_config)(g,b,E),r._sqlite3__wasm_db_config_ip=(g,b,E,N)=>(r._sqlite3__wasm_db_config_ip=he.sqlite3__wasm_db_config_ip)(g,b,E,N),r._sqlite3__wasm_db_config_pii=(g,b,E,N,O)=>(r._sqlite3__wasm_db_config_pii=he.sqlite3__wasm_db_config_pii)(g,b,E,N,O),r._sqlite3__wasm_db_config_s=(g,b,E)=>(r._sqlite3__wasm_db_config_s=he.sqlite3__wasm_db_config_s)(g,b,E),r._sqlite3__wasm_config_i=(g,b)=>(r._sqlite3__wasm_config_i=he.sqlite3__wasm_config_i)(g,b),r._sqlite3__wasm_config_ii=(g,b,E)=>(r._sqlite3__wasm_config_ii=he.sqlite3__wasm_config_ii)(g,b,E),r._sqlite3__wasm_config_j=(g,b)=>(r._sqlite3__wasm_config_j=he.sqlite3__wasm_config_j)(g,b),r._sqlite3__wasm_qfmt_token=(g,b)=>(r._sqlite3__wasm_qfmt_token=he.sqlite3__wasm_qfmt_token)(g,b),r._sqlite3__wasm_init_wasmfs=g=>(r._sqlite3__wasm_init_wasmfs=he.sqlite3__wasm_init_wasmfs)(g),r._sqlite3__wasm_test_intptr=g=>(r._sqlite3__wasm_test_intptr=he.sqlite3__wasm_test_intptr)(g),r._sqlite3__wasm_test_voidptr=g=>(r._sqlite3__wasm_test_voidptr=he.sqlite3__wasm_test_voidptr)(g),r._sqlite3__wasm_test_int64_max=()=>(r._sqlite3__wasm_test_int64_max=he.sqlite3__wasm_test_int64_max)(),r._sqlite3__wasm_test_int64_min=()=>(r._sqlite3__wasm_test_int64_min=he.sqlite3__wasm_test_int64_min)(),r._sqlite3__wasm_test_int64_times2=g=>(r._sqlite3__wasm_test_int64_times2=he.sqlite3__wasm_test_int64_times2)(g),r._sqlite3__wasm_test_int64_minmax=(g,b)=>(r._sqlite3__wasm_test_int64_minmax=he.sqlite3__wasm_test_int64_minmax)(g,b),r._sqlite3__wasm_test_int64ptr=g=>(r._sqlite3__wasm_test_int64ptr=he.sqlite3__wasm_test_int64ptr)(g),r._sqlite3__wasm_test_stack_overflow=g=>(r._sqlite3__wasm_test_stack_overflow=he.sqlite3__wasm_test_stack_overflow)(g),r._sqlite3__wasm_test_str_hello=g=>(r._sqlite3__wasm_test_str_hello=he.sqlite3__wasm_test_str_hello)(g),r._sqlite3__wasm_SQLTester_strglob=(g,b)=>(r._sqlite3__wasm_SQLTester_strglob=he.sqlite3__wasm_SQLTester_strglob)(g,b),r._malloc=g=>(r._malloc=he.malloc)(g),r._free=g=>(r._free=he.free)(g),r._realloc=(g,b)=>(r._realloc=he.realloc)(g,b);var ep=(g,b)=>(ep=he.emscripten_builtin_memalign)(g,b);r.wasmMemory=R;var Cu;de=function g(){Cu||tp(),Cu||(de=g)};function tp(){if(ce>0||(J(),ce>0))return;function g(){Cu||(Cu=!0,r.calledRun=!0,!j&&(le(),i(r),r.onRuntimeInitialized?.(),ie()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),g()},1)):g()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return tp(),r.postRun||(r.postRun=[]),r.postRun.push(function(g){if(globalThis.sqlite3ApiBootstrap=function b(E=globalThis.sqlite3ApiConfig||b.defaultConfig){if(b.sqlite3)return(b.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),b.sqlite3;const N=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof g<"u"&&g.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},E||{});Object.assign(N,{allocExportName:N.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:N.useStdAlloc?"free":"sqlite3_free",reallocExportName:N.useStdAlloc?"realloc":"sqlite3_realloc"},N),["exports","memory","wasmfsOpfsDir"].forEach(K=>{typeof N[K]=="function"&&(N[K]=N[K]())}),delete globalThis.sqlite3ApiConfig,delete b.defaultConfig;const O=Object.create(null),W=Object.create(null),fe=K=>O.sqlite3_js_rc_str&&O.sqlite3_js_rc_str(K)||"Unknown result code #"+K,me=K=>typeof K=="number"&&K===(K|0);class Ge extends Error{constructor(...re){let se;if(re.length)if(me(re[0]))if(se=re[0],re.length===1)super(fe(re[0]));else{const Le=fe(se);typeof re[1]=="object"?super(Le,re[1]):(re[0]=Le+":",super(re.join(" ")))}else re.length===2&&typeof re[1]=="object"?super(...re):super(re.join(" "));this.resultCode=se||O.SQLITE_ERROR,this.name="SQLite3Error"}}Ge.toss=(...K)=>{throw new Ge(...K)};const tt=Ge.toss;N.wasmfsOpfsDir&&!/^\/[^/]+$/.test(N.wasmfsOpfsDir)&&tt("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const at=K=>typeof K!="bigint"&&K===(K|0)&&K<=0x7fffffff&&K>=-0x80000000,mt=function K(re){return K._max||(K._max=BigInt("0x7fffffffffffffff"),K._min=~K._max),re>=K._min&&re<=K._max},Be=K=>K>=-2147483647n-1n&&K<=2147483647n,Oe=function K(re){return K._min||(K._min=Number.MIN_SAFE_INTEGER,K._max=Number.MAX_SAFE_INTEGER),re>=K._min&&re<=K._max},et=K=>K&&K.constructor&&at(K.constructor.BYTES_PER_ELEMENT)?K:!1,ve=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ke=K=>K.buffer instanceof ve,Te=(K,re,se)=>ke(K)?K.slice(re,se):K.subarray(re,se),Ze=K=>K&&(K instanceof Uint8Array||K instanceof Int8Array||K instanceof ArrayBuffer),Qe=K=>K&&(K instanceof Uint8Array||K instanceof Int8Array||K instanceof ArrayBuffer),Re=K=>Ze(K)||tt("Value is not of a supported TypedArray type."),Ke=new TextDecoder("utf-8"),Et=function(K,re,se){return Ke.decode(Te(K,re,se))},ee=function(K){return Qe(K)?Et(K instanceof ArrayBuffer?new Uint8Array(K):K):Array.isArray(K)?K.join(""):(W.isPtr(K)&&(K=W.cstrToJs(K)),K)};class ue extends Error{constructor(...re){re.length===2&&typeof re[1]=="object"?super(...re):re.length?super(re.join(" ")):super("Allocation failed."),this.resultCode=O.SQLITE_NOMEM,this.name="WasmAllocError"}}ue.toss=(...K)=>{throw new ue(...K)},Object.assign(O,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(K,re,se,Le,it,At,Vt,en,lt)=>{},sqlite3_create_function:(K,re,se,Le,it,At,Vt,en)=>{},sqlite3_create_window_function:(K,re,se,Le,it,At,Vt,en,lt,_e)=>{},sqlite3_prepare_v3:(K,re,se,Le,it,At)=>{},sqlite3_prepare_v2:(K,re,se,Le,it)=>{},sqlite3_exec:(K,re,se,Le,it)=>{},sqlite3_randomness:(K,re)=>{}});const Ee={affirmBindableTypedArray:Re,flexibleString:ee,bigIntFits32:Be,bigIntFits64:mt,bigIntFitsDouble:Oe,isBindableTypedArray:Ze,isInt32:at,isSQLableTypedArray:Qe,isTypedArray:et,typedArrayToString:Et,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:ke,toss:function(...K){throw new Error(K.join(" "))},toss3:tt,typedArrayPart:Te,affirmDbHeader:function(K){K instanceof ArrayBuffer&&(K=new Uint8Array(K));const re="SQLite format 3";re.length>K.byteLength&&tt("Input does not contain an SQLite3 database header.");for(let se=0;se<re.length;++se)re.charCodeAt(se)!==K[se]&&tt("Input does not contain an SQLite3 database header.")},affirmIsDb:function(K){K instanceof ArrayBuffer&&(K=new Uint8Array(K));const re=K.byteLength;(re<512||re%512!==0)&&tt("Byte array size",re,"is invalid for an SQLite3 db."),Ee.affirmDbHeader(K)}};Object.assign(W,{ptrSizeof:N.wasmPtrSizeof||4,ptrIR:N.wasmPtrIR||"i32",bigIntEnabled:!!N.bigIntEnabled,exports:N.exports||tt("Missing API config.exports (WASM module exports)."),memory:N.memory||N.exports.memory||tt("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),W.allocFromTypedArray=function(K){K instanceof ArrayBuffer&&(K=new Uint8Array(K)),Re(K);const re=W.alloc(K.byteLength||1);return W.heapForSize(K.constructor).set(K.byteLength?K:[0],re),re};{const K=N.allocExportName,re=N.deallocExportName,se=N.reallocExportName;for(const Le of[K,re,se])W.exports[Le]instanceof Function||tt("Missing required exports[",Le,"] function.");W.alloc=function Le(it){return Le.impl(it)||ue.toss("Failed to allocate",it," bytes.")},W.alloc.impl=W.exports[K],W.realloc=function Le(it,At){const Vt=Le.impl(it,At);return At?Vt||ue.toss("Failed to reallocate",At," bytes."):0},W.realloc.impl=W.exports[se],W.dealloc=W.exports[re]}W.compileOptionUsed=function K(re){if(arguments.length){if(Array.isArray(re)){const se={};return re.forEach(Le=>{se[Le]=O.sqlite3_compileoption_used(Le)}),se}else if(typeof re=="object")return Object.keys(re).forEach(se=>{re[se]=O.sqlite3_compileoption_used(se)}),re}else{if(K._result)return K._result;K._opt||(K._rx=/^([^=]+)=(.+)/,K._rxInt=/^-?\d+$/,K._opt=function(Vt,en){const lt=K._rx.exec(Vt);en[0]=lt?lt[1]:Vt,en[1]=lt?K._rxInt.test(lt[2])?+lt[2]:lt[2]:!0});const se={},Le=[0,0];let it=0,At;for(;At=O.sqlite3_compileoption_get(it++);)K._opt(At,Le),se[Le[0]]=Le[1];return K._result=se}return typeof re=="string"?!!O.sqlite3_compileoption_used(re):!1},W.pstack=Object.assign(Object.create(null),{restore:W.exports.sqlite3__wasm_pstack_restore,alloc:function(K){return typeof K=="string"&&!(K=W.sizeofIR(K))&&ue.toss("Invalid value for pstack.alloc(",arguments[0],")"),W.exports.sqlite3__wasm_pstack_alloc(K)||ue.toss("Could not allocate",K,"bytes from the pstack.")},allocChunks:function(K,re){typeof re=="string"&&!(re=W.sizeofIR(re))&&ue.toss("Invalid size value for allocChunks(",arguments[1],")");const se=W.pstack.alloc(K*re),Le=[];let it=0,At=0;for(;it<K;++it,At+=re)Le.push(se+At);return Le},allocPtr:(K=1,re=!0)=>K===1?W.pstack.alloc(re?8:W.ptrSizeof):W.pstack.allocChunks(K,re?8:W.ptrSizeof),call:function(K){const re=W.pstack.pointer;try{return K(pe)}finally{W.pstack.restore(re)}}}),Object.defineProperties(W.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:W.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:W.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:W.exports.sqlite3__wasm_pstack_remaining}}),O.sqlite3_randomness=(...K)=>{if(K.length===1&&Ee.isTypedArray(K[0])&&K[0].BYTES_PER_ELEMENT===1){const re=K[0];if(re.byteLength===0)return W.exports.sqlite3_randomness(0,0),re;const se=W.pstack.pointer;try{let Le=re.byteLength,it=0;const At=W.exports.sqlite3_randomness,Vt=W.heap8u(),en=Le<512?Le:512,lt=W.pstack.alloc(en);do{const _e=Le>en?en:Le;At(_e,lt),re.set(Te(Vt,lt,lt+_e),it),Le-=_e,it+=_e}while(Le>0)}catch(Le){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",Le)}finally{W.pstack.restore(se)}return re}W.exports.sqlite3_randomness(...K)};let st;if(O.sqlite3_wasmfs_opfs_dir=function(){if(st!==void 0)return st;const K=N.wasmfsOpfsDir;if(!K||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return st="";try{return K&&W.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],K)===0?st=K:st=""}catch{return st=""}},O.sqlite3_wasmfs_filename_is_persistent=function(K){const re=O.sqlite3_wasmfs_opfs_dir();return re&&K?K.startsWith(re+"/"):!1},O.sqlite3_js_db_uses_vfs=function(K,re,se=0){try{const Le=O.sqlite3_vfs_find(re);return Le?K?Le===O.sqlite3_js_db_vfs(K,se)?Le:!1:Le===O.sqlite3_vfs_find(0)?Le:!1:!1}catch{return!1}},O.sqlite3_js_vfs_list=function(){const K=[];let re=O.sqlite3_vfs_find(0);for(;re;){const se=new O.sqlite3_vfs(re);K.push(W.cstrToJs(se.$zName)),re=se.$pNext,se.dispose()}return K},O.sqlite3_js_db_export=function(K,re=0){K=W.xWrap.testConvertArg("sqlite3*",K),K||tt("Invalid sqlite3* argument."),W.bigIntEnabled||tt("BigInt64 support is not enabled.");const se=W.scopedAllocPush();let Le;try{const it=W.scopedAlloc(8+W.ptrSizeof),At=it+8,Vt=re?W.isPtr(re)?re:W.scopedAllocCString(""+re):0;let en=W.exports.sqlite3__wasm_db_serialize(K,Vt,At,it,0);en&&tt("Database serialization failed with code",pe.capi.sqlite3_js_rc_str(en)),Le=W.peekPtr(At);const lt=W.peek(it,"i64");return en=lt?W.heap8u().slice(Le,Le+Number(lt)):new Uint8Array,en}finally{Le&&W.exports.sqlite3_free(Le),W.scopedAllocPop(se)}},O.sqlite3_js_db_vfs=(K,re=0)=>Ee.sqlite3__wasm_db_vfs(K,re),O.sqlite3_js_aggregate_context=(K,re)=>O.sqlite3_aggregate_context(K,re)||(re?ue.toss("Cannot allocate",re,"bytes for sqlite3_aggregate_context()"):0),O.sqlite3_js_posix_create_file=function(K,re,se){let Le;re&&W.isPtr(re)?Le=re:re instanceof ArrayBuffer||re instanceof Uint8Array?(Le=W.allocFromTypedArray(re),(arguments.length<3||!Ee.isInt32(se)||se<0)&&(se=re.byteLength)):Ge.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!Ee.isInt32(se)||se<0)&&Ge.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const it=Ee.sqlite3__wasm_posix_create_file(K,Le,se);it&&Ge.toss("Creation of file failed with sqlite3 result code",O.sqlite3_js_rc_str(it))}finally{W.dealloc(Le)}},O.sqlite3_js_vfs_create_file=function(K,re,se,Le){N.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let it;se?(W.isPtr(se)?it=se:se instanceof ArrayBuffer&&(se=new Uint8Array(se)),se instanceof Uint8Array?(it=W.allocFromTypedArray(se),(arguments.length<4||!Ee.isInt32(Le)||Le<0)&&(Le=se.byteLength)):Ge.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):it=0,(!Ee.isInt32(Le)||Le<0)&&(W.dealloc(it),Ge.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const At=Ee.sqlite3__wasm_vfs_create_file(K,re,it,Le);At&&Ge.toss("Creation of file failed with sqlite3 result code",O.sqlite3_js_rc_str(At))}finally{W.dealloc(it)}},O.sqlite3_js_sql_to_string=K=>{if(typeof K=="string")return K;const re=ee(v);return re===v?void 0:re},Ee.isUIThread()){const K=function(re){const se=Object.create(null);return se.prefix="kvvfs-"+re,se.stores=[],(re==="session"||re==="")&&se.stores.push(globalThis.sessionStorage),(re==="local"||re==="")&&se.stores.push(globalThis.localStorage),se};O.sqlite3_js_kvvfs_clear=function(re=""){let se=0;const Le=K(re);return Le.stores.forEach(it=>{const At=[];let Vt;for(Vt=0;Vt<it.length;++Vt){const en=it.key(Vt);en.startsWith(Le.prefix)&&At.push(en)}At.forEach(en=>it.removeItem(en)),se+=At.length}),se},O.sqlite3_js_kvvfs_size=function(re=""){let se=0;const Le=K(re);return Le.stores.forEach(it=>{let At;for(At=0;At<it.length;++At){const Vt=it.key(At);Vt.startsWith(Le.prefix)&&(se+=Vt.length,se+=it.getItem(Vt).length)}}),se*2}}O.sqlite3_db_config=function(K,re,...se){switch(this.s||(this.s=W.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=W.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=W.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),re){case O.SQLITE_DBCONFIG_ENABLE_FKEY:case O.SQLITE_DBCONFIG_ENABLE_TRIGGER:case O.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case O.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case O.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case O.SQLITE_DBCONFIG_ENABLE_QPSG:case O.SQLITE_DBCONFIG_TRIGGER_EQP:case O.SQLITE_DBCONFIG_RESET_DATABASE:case O.SQLITE_DBCONFIG_DEFENSIVE:case O.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case O.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case O.SQLITE_DBCONFIG_DQS_DML:case O.SQLITE_DBCONFIG_DQS_DDL:case O.SQLITE_DBCONFIG_ENABLE_VIEW:case O.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case O.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case O.SQLITE_DBCONFIG_STMT_SCANSTATUS:case O.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(K,re,se[0],se[1]||0);case O.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(K,re,se[0],se[1],se[2]);case O.SQLITE_DBCONFIG_MAINDBNAME:return this.s(K,re,se[0]);default:return O.SQLITE_MISUSE}}.bind(Object.create(null)),O.sqlite3_value_to_js=function(K,re=!0){let se;const Le=O.sqlite3_value_type(K);switch(Le){case O.SQLITE_INTEGER:W.bigIntEnabled?(se=O.sqlite3_value_int64(K),Ee.bigIntFitsDouble(se)&&(se=Number(se))):se=O.sqlite3_value_double(K);break;case O.SQLITE_FLOAT:se=O.sqlite3_value_double(K);break;case O.SQLITE_TEXT:se=O.sqlite3_value_text(K);break;case O.SQLITE_BLOB:{const it=O.sqlite3_value_bytes(K),At=O.sqlite3_value_blob(K);it&&!At&&pe.WasmAllocError.toss("Cannot allocate memory for blob argument of",it,"byte(s)"),se=it?W.heap8u().slice(At,At+Number(it)):null;break}case O.SQLITE_NULL:se=null;break;default:re&&tt(O.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",Le),se=void 0}return se},O.sqlite3_values_to_js=function(K,re,se=!0){let Le;const it=[];for(Le=0;Le<K;++Le)it.push(O.sqlite3_value_to_js(W.peekPtr(re+W.ptrSizeof*Le),se));return it},O.sqlite3_result_error_js=function(K,re){re instanceof ue?O.sqlite3_result_error_nomem(K):O.sqlite3_result_error(K,""+re,-1)},O.sqlite3_result_js=function(K,re){if(re instanceof Error){O.sqlite3_result_error_js(K,re);return}try{switch(typeof re){case"undefined":break;case"boolean":O.sqlite3_result_int(K,re?1:0);break;case"bigint":Ee.bigIntFits32(re)?O.sqlite3_result_int(K,Number(re)):Ee.bigIntFitsDouble(re)?O.sqlite3_result_double(K,Number(re)):W.bigIntEnabled?Ee.bigIntFits64(re)?O.sqlite3_result_int64(K,re):tt("BigInt value",re.toString(),"is too BigInt for int64."):tt("BigInt value",re.toString(),"is too BigInt.");break;case"number":{let se;Ee.isInt32(re)?se=O.sqlite3_result_int:W.bigIntEnabled&&Number.isInteger(re)&&Ee.bigIntFits64(BigInt(re))?se=O.sqlite3_result_int64:se=O.sqlite3_result_double,se(K,re);break}case"string":{const[se,Le]=W.allocCString(re,!0);O.sqlite3_result_text(K,se,Le,O.SQLITE_WASM_DEALLOC);break}case"object":if(re===null){O.sqlite3_result_null(K);break}else if(Ee.isBindableTypedArray(re)){const se=W.allocFromTypedArray(re);O.sqlite3_result_blob(K,se,re.byteLength,O.SQLITE_WASM_DEALLOC);break}default:tt("Don't not how to handle this UDF result value:",typeof re,re)}}catch(se){O.sqlite3_result_error_js(K,se)}},O.sqlite3_column_js=function(K,re,se=!0){const Le=O.sqlite3_column_value(K,re);return Le===0?void 0:O.sqlite3_value_to_js(Le,se)};const ae=function(K,re,se){se=O[se],this.ptr?W.pokePtr(this.ptr,0):this.ptr=W.allocPtr();const Le=se(K,re,this.ptr);if(Le)return Ge.toss(Le,arguments[2]+"() failed with code "+Le);const it=W.peekPtr(this.ptr);return it?O.sqlite3_value_to_js(it,!0):void 0}.bind(Object.create(null));O.sqlite3_preupdate_new_js=(K,re)=>ae(K,re,"sqlite3_preupdate_new"),O.sqlite3_preupdate_old_js=(K,re)=>ae(K,re,"sqlite3_preupdate_old"),O.sqlite3changeset_new_js=(K,re)=>ae(K,re,"sqlite3changeset_new"),O.sqlite3changeset_old_js=(K,re)=>ae(K,re,"sqlite3changeset_old");const pe={WasmAllocError:ue,SQLite3Error:Ge,capi:O,util:Ee,wasm:W,config:N,version:Object.create(null),client:void 0,asyncPostInit:async function K(){if(K.isReady instanceof Promise)return K.isReady;let re=b.initializersAsync;delete b.initializersAsync;const se=async()=>(pe.__isUnderTest||(delete pe.util,delete pe.StructBinder),pe),Le=At=>{throw N.error("an async sqlite3 initializer failed:",At),At};if(!re||!re.length)return K.isReady=se().catch(Le);re=re.map(At=>At instanceof Function?async Vt=>At(pe):At),re.push(se);let it=Promise.resolve(pe);for(;re.length;)it=it.then(re.shift());return K.isReady=it.catch(Le)},scriptInfo:void 0};try{b.initializers.forEach(K=>{K(pe)})}catch(K){throw console.error("sqlite3 bootstrap initializer threw:",K),K}return delete b.initializers,b.sqlite3=pe,pe},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(b){b.bigIntEnabled===void 0&&(b.bigIntEnabled=!!globalThis.BigInt64Array);const E=(...ee)=>{throw new Error(ee.join(" "))};b.exports||Object.defineProperty(b,"exports",{enumerable:!0,configurable:!0,get:()=>b.instance&&b.instance.exports});const N=b.pointerIR||"i32",O=b.ptrSizeof=N==="i32"?4:N==="i64"?8:E("Unhandled ptrSizeof:",N),W=Object.create(null);W.heapSize=0,W.memory=null,W.freeFuncIndexes=[],W.scopedAlloc=[],W.utf8Decoder=new TextDecoder,W.utf8Encoder=new TextEncoder("utf-8"),b.sizeofIR=ee=>{switch(ee){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return O;default:return(""+ee).endsWith("*")?O:void 0}};const fe=function(){if(!W.memory)W.memory=b.memory instanceof WebAssembly.Memory?b.memory:b.exports.memory;else if(W.heapSize===W.memory.buffer.byteLength)return W;const ee=W.memory.buffer;return W.HEAP8=new Int8Array(ee),W.HEAP8U=new Uint8Array(ee),W.HEAP16=new Int16Array(ee),W.HEAP16U=new Uint16Array(ee),W.HEAP32=new Int32Array(ee),W.HEAP32U=new Uint32Array(ee),b.bigIntEnabled&&(W.HEAP64=new BigInt64Array(ee),W.HEAP64U=new BigUint64Array(ee)),W.HEAP32F=new Float32Array(ee),W.HEAP64F=new Float64Array(ee),W.heapSize=ee.byteLength,W};b.heap8=()=>fe().HEAP8,b.heap8u=()=>fe().HEAP8U,b.heap16=()=>fe().HEAP16,b.heap16u=()=>fe().HEAP16U,b.heap32=()=>fe().HEAP32,b.heap32u=()=>fe().HEAP32U,b.heapForSize=function(ee,ue=!0){const Ee=W.memory&&W.heapSize===W.memory.buffer.byteLength?W:fe();switch(ee){case Int8Array:return Ee.HEAP8;case Uint8Array:return Ee.HEAP8U;case Int16Array:return Ee.HEAP16;case Uint16Array:return Ee.HEAP16U;case Int32Array:return Ee.HEAP32;case Uint32Array:return Ee.HEAP32U;case 8:return ue?Ee.HEAP8U:Ee.HEAP8;case 16:return ue?Ee.HEAP16U:Ee.HEAP16;case 32:return ue?Ee.HEAP32U:Ee.HEAP32;case 64:if(Ee.HEAP64)return ue?Ee.HEAP64U:Ee.HEAP64;break;default:if(b.bigIntEnabled){if(ee===globalThis.BigUint64Array)return Ee.HEAP64U;if(ee===globalThis.BigInt64Array)return Ee.HEAP64;break}}E("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},b.functionTable=function(){return b.exports.__indirect_function_table},b.functionEntry=function(ee){const ue=b.functionTable();return ee<ue.length?ue.get(ee):void 0},b.jsFuncToWasm=function ee(ue,Ee){if(ee._||(ee._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(pe,K,re){re<128?pe[K](re):pe[K](re%128|128,re>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(pe){const K=ee._.rxJSig.exec(pe);return K?K[2]:pe.substr(1)},letterType:pe=>ee._.sigTypes[pe]||E("Invalid signature letter:",pe),pushSigType:(pe,K)=>pe.push(ee._.typeCodes[ee._.letterType(K)])}),typeof ue=="string"){const pe=Ee;Ee=ue,ue=pe}const st=ee._.sigParams(Ee),ae=[1,96];ee._.uleb128Encode(ae,"push",st.length);for(const pe of st)ee._.pushSigType(ae,pe);return Ee[0]==="v"?ae.push(0):(ae.push(1),ee._.pushSigType(ae,Ee[0])),ee._.uleb128Encode(ae,"unshift",ae.length),ae.unshift(0,97,115,109,1,0,0,0,1),ae.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(ae)),{e:{f:ue}}).exports.f};const me=function(ue,Ee,st){if(st&&!W.scopedAlloc.length&&E("No scopedAllocPush() scope is active."),typeof ue=="string"){const re=Ee;Ee=ue,ue=re}(typeof Ee!="string"||!(ue instanceof Function))&&E("Invalid arguments: expecting (function,signature) or (signature,function).");const ae=b.functionTable(),pe=ae.length;let K;for(;W.freeFuncIndexes.length&&(K=W.freeFuncIndexes.pop(),ae.get(K));){K=null;continue}K||(K=pe,ae.grow(1));try{return ae.set(K,ue),st&&W.scopedAlloc[W.scopedAlloc.length-1].push(K),K}catch(re){if(!(re instanceof TypeError))throw K===pe&&W.freeFuncIndexes.push(pe),re}try{const re=b.jsFuncToWasm(ue,Ee);ae.set(K,re),st&&W.scopedAlloc[W.scopedAlloc.length-1].push(K)}catch(re){throw K===pe&&W.freeFuncIndexes.push(pe),re}return K};b.installFunction=(ee,ue)=>me(ee,ue,!1),b.scopedInstallFunction=(ee,ue)=>me(ee,ue,!0),b.uninstallFunction=function(ee){if(!ee&&ee!==0)return;const ue=W.freeFuncIndexes,Ee=b.functionTable();ue.push(ee);const st=Ee.get(ee);return Ee.set(ee,null),st},b.peek=function(ue,Ee="i8"){Ee.endsWith("*")&&(Ee=N);const st=W.memory&&W.heapSize===W.memory.buffer.byteLength?W:fe(),ae=Array.isArray(ue)?[]:void 0;let pe;do{switch(ae&&(ue=arguments[0].shift()),Ee){case"i1":case"i8":pe=st.HEAP8[ue>>0];break;case"i16":pe=st.HEAP16[ue>>1];break;case"i32":pe=st.HEAP32[ue>>2];break;case"float":case"f32":pe=st.HEAP32F[ue>>2];break;case"double":case"f64":pe=Number(st.HEAP64F[ue>>3]);break;case"i64":if(b.bigIntEnabled){pe=BigInt(st.HEAP64[ue>>3]);break}default:E("Invalid type for peek():",Ee)}ae&&ae.push(pe)}while(ae&&arguments[0].length);return ae||pe},b.poke=function(ee,ue,Ee="i8"){Ee.endsWith("*")&&(Ee=N);const st=W.memory&&W.heapSize===W.memory.buffer.byteLength?W:fe();for(const ae of Array.isArray(ee)?ee:[ee])switch(Ee){case"i1":case"i8":st.HEAP8[ae>>0]=ue;continue;case"i16":st.HEAP16[ae>>1]=ue;continue;case"i32":st.HEAP32[ae>>2]=ue;continue;case"float":case"f32":st.HEAP32F[ae>>2]=ue;continue;case"double":case"f64":st.HEAP64F[ae>>3]=ue;continue;case"i64":if(st.HEAP64){st.HEAP64[ae>>3]=BigInt(ue);continue}default:E("Invalid type for poke(): "+Ee)}return this},b.peekPtr=(...ee)=>b.peek(ee.length===1?ee[0]:ee,N),b.pokePtr=(ee,ue=0)=>b.poke(ee,ue,N),b.peek8=(...ee)=>b.peek(ee.length===1?ee[0]:ee,"i8"),b.poke8=(ee,ue)=>b.poke(ee,ue,"i8"),b.peek16=(...ee)=>b.peek(ee.length===1?ee[0]:ee,"i16"),b.poke16=(ee,ue)=>b.poke(ee,ue,"i16"),b.peek32=(...ee)=>b.peek(ee.length===1?ee[0]:ee,"i32"),b.poke32=(ee,ue)=>b.poke(ee,ue,"i32"),b.peek64=(...ee)=>b.peek(ee.length===1?ee[0]:ee,"i64"),b.poke64=(ee,ue)=>b.poke(ee,ue,"i64"),b.peek32f=(...ee)=>b.peek(ee.length===1?ee[0]:ee,"f32"),b.poke32f=(ee,ue)=>b.poke(ee,ue,"f32"),b.peek64f=(...ee)=>b.peek(ee.length===1?ee[0]:ee,"f64"),b.poke64f=(ee,ue)=>b.poke(ee,ue,"f64"),b.getMemValue=b.peek,b.getPtrValue=b.peekPtr,b.setMemValue=b.poke,b.setPtrValue=b.pokePtr,b.isPtr32=ee=>typeof ee=="number"&&ee===(ee|0)&&ee>=0,b.isPtr=b.isPtr32,b.cstrlen=function(ee){if(!ee||!b.isPtr(ee))return null;const ue=fe().HEAP8U;let Ee=ee;for(;ue[Ee]!==0;++Ee);return Ee-ee};const Ge=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,tt=function(ee,ue,Ee){return W.utf8Decoder.decode(ee.buffer instanceof Ge?ee.slice(ue,Ee):ee.subarray(ue,Ee))};b.cstrToJs=function(ee){const ue=b.cstrlen(ee);return ue?tt(fe().HEAP8U,ee,ee+ue):ue===null?ue:""},b.jstrlen=function(ee){if(typeof ee!="string")return null;const ue=ee.length;let Ee=0;for(let st=0;st<ue;++st){let ae=ee.charCodeAt(st);ae>=55296&&ae<=57343&&(ae=65536+((ae&1023)<<10)|ee.charCodeAt(++st)&1023),ae<=127?++Ee:ae<=2047?Ee+=2:ae<=65535?Ee+=3:Ee+=4}return Ee},b.jstrcpy=function(ee,ue,Ee=0,st=-1,ae=!0){if((!ue||!(ue instanceof Int8Array)&&!(ue instanceof Uint8Array))&&E("jstrcpy() target must be an Int8Array or Uint8Array."),st<0&&(st=ue.length-Ee),!(st>0)||!(Ee>=0))return 0;let pe=0,K=ee.length;const re=Ee,se=Ee+st-(ae?1:0);for(;pe<K&&Ee<se;++pe){let Le=ee.charCodeAt(pe);if(Le>=55296&&Le<=57343&&(Le=65536+((Le&1023)<<10)|ee.charCodeAt(++pe)&1023),Le<=127){if(Ee>=se)break;ue[Ee++]=Le}else if(Le<=2047){if(Ee+1>=se)break;ue[Ee++]=192|Le>>6,ue[Ee++]=128|Le&63}else if(Le<=65535){if(Ee+2>=se)break;ue[Ee++]=224|Le>>12,ue[Ee++]=128|Le>>6&63,ue[Ee++]=128|Le&63}else{if(Ee+3>=se)break;ue[Ee++]=240|Le>>18,ue[Ee++]=128|Le>>12&63,ue[Ee++]=128|Le>>6&63,ue[Ee++]=128|Le&63}}return ae&&(ue[Ee++]=0),Ee-re},b.cstrncpy=function(ee,ue,Ee){if((!ee||!ue)&&E("cstrncpy() does not accept NULL strings."),Ee<0)Ee=b.cstrlen(strPtr)+1;else if(!(Ee>0))return 0;const st=b.heap8u();let ae=0,pe;for(;ae<Ee&&(pe=st[ue+ae]);++ae)st[ee+ae]=pe;return ae<Ee&&(st[ee+ae++]=0),ae},b.jstrToUintArray=(ee,ue=!1)=>W.utf8Encoder.encode(ue?ee+"\0":ee);const at=(ee,ue)=>{(!(ee.alloc instanceof Function)||!(ee.dealloc instanceof Function))&&E("Object is missing alloc() and/or dealloc() function(s)","required by",ue+"().")},mt=function(ee,ue,Ee,st){if(at(b,st),typeof ee!="string")return null;{const ae=W.utf8Encoder.encode(ee),pe=Ee(ae.length+1),K=fe().HEAP8U;return K.set(ae,pe),K[pe+ae.length]=0,ue?[pe,ae.length]:pe}};b.allocCString=(ee,ue=!1)=>mt(ee,ue,b.alloc,"allocCString()"),b.scopedAllocPush=function(){at(b,"scopedAllocPush");const ee=[];return W.scopedAlloc.push(ee),ee},b.scopedAllocPop=function(ee){at(b,"scopedAllocPop");const ue=arguments.length?W.scopedAlloc.indexOf(ee):W.scopedAlloc.length-1;ue<0&&E("Invalid state object for scopedAllocPop()."),arguments.length===0&&(ee=W.scopedAlloc[ue]),W.scopedAlloc.splice(ue,1);for(let Ee;Ee=ee.pop();)b.functionEntry(Ee)?b.uninstallFunction(Ee):b.dealloc(Ee)},b.scopedAlloc=function(ee){W.scopedAlloc.length||E("No scopedAllocPush() scope is active.");const ue=b.alloc(ee);return W.scopedAlloc[W.scopedAlloc.length-1].push(ue),ue},Object.defineProperty(b.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>W.scopedAlloc.length,set:()=>E("The 'active' property is read-only.")}),b.scopedAllocCString=(ee,ue=!1)=>mt(ee,ue,b.scopedAlloc,"scopedAllocCString()");const Be=function(ee,ue){const Ee=b[ee?"scopedAlloc":"alloc"]((ue.length+1)*b.ptrSizeof);let st=0;return ue.forEach(ae=>{b.pokePtr(Ee+b.ptrSizeof*st++,b[ee?"scopedAllocCString":"allocCString"](""+ae))}),b.pokePtr(Ee+b.ptrSizeof*st,0),Ee};b.scopedAllocMainArgv=ee=>Be(!0,ee),b.allocMainArgv=ee=>Be(!1,ee),b.cArgvToJs=(ee,ue)=>{const Ee=[];for(let st=0;st<ee;++st){const ae=b.peekPtr(ue+b.ptrSizeof*st);Ee.push(ae?b.cstrToJs(ae):null)}return Ee},b.scopedAllocCall=function(ee){b.scopedAllocPush();try{return ee()}finally{b.scopedAllocPop()}};const Oe=function(ee,ue,Ee){at(b,Ee);const st=ue?"i64":N;let ae=b[Ee](ee*(ue?8:O));if(b.poke(ae,0,st),ee===1)return ae;const pe=[ae];for(let K=1;K<ee;++K)ae+=ue?8:O,pe[K]=ae,b.poke(ae,0,st);return pe};b.allocPtr=(ee=1,ue=!0)=>Oe(ee,ue,"alloc"),b.scopedAllocPtr=(ee=1,ue=!0)=>Oe(ee,ue,"scopedAlloc"),b.xGet=function(ee){return b.exports[ee]||E("Cannot find exported symbol:",ee)};const et=(ee,ue)=>E(ee+"() requires",ue,"argument(s).");b.xCall=function(ee,...ue){const Ee=ee instanceof Function?ee:b.xGet(ee);return Ee instanceof Function||E("Exported symbol",ee,"is not a function."),Ee.length!==ue.length&&et(Ee===ee?Ee.name:ee,Ee.length),arguments.length===2&&Array.isArray(arguments[1])?Ee.apply(null,arguments[1]):Ee.apply(null,ue)},W.xWrap=Object.create(null),W.xWrap.convert=Object.create(null),W.xWrap.convert.arg=new Map,W.xWrap.convert.result=new Map;const ve=W.xWrap.convert.arg,ke=W.xWrap.convert.result;b.bigIntEnabled&&ve.set("i64",ee=>BigInt(ee));const Te=N==="i32"?ee=>ee|0:ee=>BigInt(ee)|BigInt(0);ve.set("i32",Te).set("i16",ee=>(ee|0)&65535).set("i8",ee=>(ee|0)&255).set("f32",ee=>Number(ee).valueOf()).set("float",ve.get("f32")).set("f64",ve.get("f32")).set("double",ve.get("f64")).set("int",ve.get("i32")).set("null",ee=>ee).set(null,ve.get("null")).set("**",Te).set("*",Te),ke.set("*",Te).set("pointer",Te).set("number",ee=>Number(ee)).set("void",ee=>{}).set("null",ee=>ee).set(null,ke.get("null"));{const ee=["i8","i16","i32","int","f32","float","f64","double"];b.bigIntEnabled&&ee.push("i64");const ue=ve.get(N);for(const Ee of ee)ve.set(Ee+"*",ue),ke.set(Ee+"*",ue),ke.set(Ee,ve.get(Ee)||E("Missing arg converter:",Ee))}const Ze=function(ee){return typeof ee=="string"?b.scopedAllocCString(ee):ee?Te(ee):null};ve.set("string",Ze).set("utf8",Ze).set("pointer",Ze),ke.set("string",ee=>b.cstrToJs(ee)).set("utf8",ke.get("string")).set("string:dealloc",ee=>{try{return ee?b.cstrToJs(ee):null}finally{b.dealloc(ee)}}).set("utf8:dealloc",ke.get("string:dealloc")).set("json",ee=>JSON.parse(b.cstrToJs(ee))).set("json:dealloc",ee=>{try{return ee?JSON.parse(b.cstrToJs(ee)):null}finally{b.dealloc(ee)}});const Qe=class{constructor(ee){this.name=ee.name||"unnamed adapter"}convertArg(ee,ue,Ee){E("AbstractArgAdapter must be subclassed.")}};ve.FuncPtrAdapter=class Wa extends Qe{constructor(ue){super(ue),ve.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",ue),this.name=ue.name||"unnamed",this.signature=ue.signature,ue.contextKey instanceof Function&&(this.contextKey=ue.contextKey,ue.bindScope||(ue.bindScope="context")),this.bindScope=ue.bindScope||E("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Wa.bindScopes.indexOf(ue.bindScope)<0&&E("Invalid options.bindScope ("+ue.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Wa.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=ue.callProxy instanceof Function?ue.callProxy:void 0}contextKey(ue,Ee){return this}contextMap(ue){const Ee=this.__cmap||(this.__cmap=new Map);let st=Ee.get(ue);return st===void 0&&Ee.set(ue,st=[]),st}convertArg(ue,Ee,st){let ae=this.singleton;if(!ae&&this.isContext&&(ae=this.contextMap(this.contextKey(Ee,st))),ae&&ae[0]===ue)return ae[1];if(ue instanceof Function){this.callProxy&&(ue=this.callProxy(ue));const pe=me(ue,this.signature,this.isTransient);if(Wa.debugFuncInstall&&Wa.debugOut("FuncPtrAdapter installed",this,this.contextKey(Ee,st),"@"+pe,ue),ae){if(ae[1]){Wa.debugFuncInstall&&Wa.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ue);try{W.scopedAlloc[W.scopedAlloc.length-1].push(ae[1])}catch{}}ae[0]=ue,ae[1]=pe}return pe}else if(b.isPtr(ue)||ue===null||ue===void 0){if(ae&&ae[1]&&ae[1]!==ue){Wa.debugFuncInstall&&Wa.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ue);try{W.scopedAlloc[W.scopedAlloc.length-1].push(ae[1])}catch{}ae[0]=ae[1]=ue|0}return ue||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},ve.FuncPtrAdapter.warnOnUse=!1,ve.FuncPtrAdapter.debugFuncInstall=!1,ve.FuncPtrAdapter.debugOut=console.debug.bind(console),ve.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const Re=ee=>ve.get(ee)||E("Argument adapter not found:",ee),Ke=ee=>ke.get(ee)||E("Result adapter not found:",ee);W.xWrap.convertArg=(ee,...ue)=>Re(ee)(...ue),W.xWrap.convertArgNoCheck=(ee,...ue)=>ve.get(ee)(...ue),W.xWrap.convertResult=(ee,ue)=>ee===null?ue:ee?Ke(ee)(ue):void 0,W.xWrap.convertResultNoCheck=(ee,ue)=>ee===null?ue:ee?ke.get(ee)(ue):void 0,b.xWrap=function(ee,ue,...Ee){arguments.length===3&&Array.isArray(arguments[2])&&(Ee=arguments[2]),b.isPtr(ee)&&(ee=b.functionEntry(ee)||E("Function pointer not found in WASM function table."));const st=ee instanceof Function,ae=st?ee:b.xGet(ee);if(st&&(ee=ae.name||"unnamed function"),Ee.length!==ae.length&&et(ee,ae.length),ue===null&&ae.length===0)return ae;ue!=null&&Ke(ue);for(const K of Ee)K instanceof Qe?ve.set(K,(...re)=>K.convertArg(...re)):Re(K);const pe=W.xWrap;return ae.length===0?(...K)=>K.length?et(ee,ae.length):pe.convertResult(ue,ae.call(null)):function(...K){K.length!==ae.length&&et(ee,ae.length);const re=b.scopedAllocPush();try{let se=0;for(;se<K.length;++se)K[se]=pe.convertArgNoCheck(Ee[se],K[se],K,se);return pe.convertResultNoCheck(ue,ae.apply(null,K))}finally{b.scopedAllocPop(re)}}};const Et=function(ee,ue,Ee,st,ae,pe){if(typeof Ee=="string"){if(ue===1)return pe.get(Ee);if(ue===2){if(st)st instanceof Function||E(ae,"requires a function argument.");else return delete pe.get(Ee),ee;return pe.set(Ee,st),ee}}E("Invalid arguments to",ae)};return b.xWrap.resultAdapter=function ee(ue,Ee){return Et(ee,arguments.length,ue,Ee,"resultAdapter()",ke)},b.xWrap.argAdapter=function ee(ue,Ee){return Et(ee,arguments.length,ue,Ee,"argAdapter()",ve)},b.xWrap.FuncPtrAdapter=ve.FuncPtrAdapter,b.xCallWrapped=function(ee,ue,Ee,...st){return Array.isArray(arguments[3])&&(st=arguments[3]),b.xWrap(ee,ue,Ee||[]).apply(null,st||[])},b.xWrap.testConvertArg=W.xWrap.convertArg,b.xWrap.testConvertResult=W.xWrap.convertResult,b},globalThis.WhWasmUtilInstaller.yawl=function(b){const E=()=>fetch(b.uri,{credentials:"same-origin"}),N=this,O=function(fe){if(b.wasmUtilTarget){const me=(...tt)=>{throw new Error(tt.join(" "))},Ge=b.wasmUtilTarget;if(Ge.module=fe.module,Ge.instance=fe.instance,Ge.instance.exports.memory||(Ge.memory=b.imports&&b.imports.env&&b.imports.env.memory||me("Missing 'memory' object!")),!Ge.alloc&&fe.instance.exports.malloc){const tt=fe.instance.exports;Ge.alloc=function(at){return tt.malloc(at)||me("Allocation of",at,"bytes failed.")},Ge.dealloc=function(at){tt.free(at)}}N(Ge)}return b.onload&&b.onload(fe,b),fe};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(E(),b.imports||{}).then(O)}:function(){return E().then(me=>me.arrayBuffer()).then(me=>WebAssembly.instantiate(me,b.imports||{})).then(O)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function b(E){const N=(...We)=>{throw new Error(We.join(" "))};!(E.heap instanceof WebAssembly.Memory)&&!(E.heap instanceof Function)&&N("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(We){E[We]instanceof Function||N("Config option '"+We+"' must be a function.")});const O=b,W=E.heap instanceof Function?E.heap:()=>new Uint8Array(E.heap.buffer),fe=E.alloc,me=E.dealloc,Ge=E.log||console.log.bind(console),tt=E.memberPrefix||"",at=E.memberSuffix||"",mt=E.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!E.bigIntEnabled,Be=globalThis.BigInt,Oe=globalThis.BigInt64Array,et=E.ptrSizeof||4,ve=E.ptrIR||"i32";O.debugFlags||(O.__makeDebugFlags=function(We=null){We&&We.__flags&&(We=We.__flags);const bt=function _t(kt){return arguments.length===0?_t.__flags:(kt<0?(delete _t.__flags.getter,delete _t.__flags.setter,delete _t.__flags.alloc,delete _t.__flags.dealloc):(_t.__flags.getter=(1&kt)!==0,_t.__flags.setter=(2&kt)!==0,_t.__flags.alloc=(4&kt)!==0,_t.__flags.dealloc=(8&kt)!==0),_t._flags)};return Object.defineProperty(bt,"__flags",{iterable:!1,writable:!1,value:Object.create(We)}),We||bt(0),bt},O.debugFlags=O.__makeDebugFlags());const ke=function(){const We=new ArrayBuffer(2);return new DataView(We).setInt16(0,256,!0),new Int16Array(We)[0]===256}(),Te=We=>We[1]==="(",Ze=We=>We==="P",Qe=We=>Te(We)?"p":We[0],Re=function(We){switch(Qe(We)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return ve;case"j":return"i64";case"f":return"float";case"d":return"double"}N("Unhandled signature IR:",We)},Ke=Oe?()=>!0:()=>N("BigInt64Array is not available."),Et=function(We){switch(Qe(We)){case"p":case"P":case"s":{switch(et){case 4:return"getInt32";case 8:return Ke()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return Ke()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}N("Unhandled DataView getter for signature:",We)},ee=function(We){switch(Qe(We)){case"p":case"P":case"s":{switch(et){case 4:return"setInt32";case 8:return Ke()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return Ke()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}N("Unhandled DataView setter for signature:",We)},ue=function(We){switch(Qe(We)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return Ke()&&Be;case"p":case"P":case"s":switch(et){case 4:return Number;case 8:return Ke()&&Be}break}N("Unhandled DataView set wrapper for signature:",We)},Ee=(We,bt)=>We+"::"+bt,st=function(We,bt){return()=>N(Ee(We,bt),"is read-only.")},ae=new WeakMap,pe="(pointer-is-external)",K=function(We,bt,_t){if(_t||(_t=ae.get(bt)),_t){if(ae.delete(bt),Array.isArray(bt.ondispose)){let kt;for(;kt=bt.ondispose.shift();)try{kt instanceof Function?kt.call(bt):kt instanceof Ut?kt.dispose():typeof kt=="number"&&me(kt)}catch(In){console.warn("ondispose() for",We.structName,"@",_t,"threw. NOT propagating it.",In)}}else if(bt.ondispose instanceof Function)try{bt.ondispose()}catch(kt){console.warn("ondispose() for",We.structName,"@",_t,"threw. NOT propagating it.",kt)}delete bt.ondispose,We.debugFlags.__flags.dealloc&&Ge("debug.dealloc:",bt[pe]?"EXTERNAL":"",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+_t),bt[pe]||me(_t)}},re=We=>({configurable:!1,writable:!1,iterable:!1,value:We}),se=function(We,bt,_t){let kt=!_t;_t?Object.defineProperty(bt,pe,re(_t)):(_t=fe(We.structInfo.sizeof),_t||N("Allocation of",We.structName,"structure failed."));try{We.debugFlags.__flags.alloc&&Ge("debug.alloc:",kt?"":"EXTERNAL",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+_t),kt&&W().fill(0,_t,_t+We.structInfo.sizeof),ae.set(bt,_t)}catch(In){throw K(We,bt,_t),In}},Le=function(){const We=this.pointer;return We?new Uint8Array(W().slice(We,We+this.structInfo.sizeof)):null},At=re(We=>tt+We+at),Vt=function(We,bt,_t=!0){let kt=We.members[bt];if(!kt&&(tt||at)){for(const In of Object.values(We.members))if(In.key===bt){kt=In;break}!kt&&_t&&N(Ee(We.name,bt),"is not a mapped struct member.")}return kt},en=function We(bt,_t,kt=!1){We._||(We._=Qn=>Qn.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const In=Vt(bt.structInfo,_t,!0);return kt?We._(In.signature):In.signature},lt={configurable:!1,enumerable:!1,get:function(){return ae.get(this)},set:()=>N("Cannot assign the 'pointer' property of a struct.")},_e=re(function(){const We=[];for(const bt of Object.keys(this.structInfo.members))We.push(this.memberKey(bt));return We}),Pe=new TextDecoder("utf-8"),ot=new TextEncoder,pt=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Bt=function(We,bt,_t){return Pe.decode(We.buffer instanceof pt?We.slice(bt,_t):We.subarray(bt,_t))},tn=function(We,bt,_t=!1){const kt=Vt(We.structInfo,bt,_t);return kt&&kt.signature.length===1&&kt.signature[0]==="s"?kt:!1},qe=function(We){We.signature!=="s"&&N("Invalid member type signature for C-string value:",JSON.stringify(We))},nt=function(bt,_t){const kt=Vt(bt.structInfo,_t,!0);qe(kt);const In=bt[kt.key];if(!In)return null;let Qn=In;const Vn=W();for(;Vn[Qn]!==0;++Qn);return In===Qn?"":Bt(Vn,In,Qn)},dt=function(We,...bt){We.ondispose?Array.isArray(We.ondispose)||(We.ondispose=[We.ondispose]):We.ondispose=[],We.ondispose.push(...bt)},Nt=function(We){const bt=ot.encode(We),_t=fe(bt.length+1);_t||N("Allocation error while duplicating string:",We);const kt=W();return kt.set(bt,_t),kt[_t+bt.length]=0,_t},wt=function(We,bt,_t){const kt=Vt(We.structInfo,bt,!0);qe(kt);const In=Nt(_t);return We[kt.key]=In,dt(We,In),We},Ut=function(bt,_t){arguments[2]!==re&&N("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:re(bt),structInfo:re(_t)})};Ut.prototype=Object.create(null,{dispose:re(function(){K(this.constructor,this)}),lookupMember:re(function(We,bt=!0){return Vt(this.structInfo,We,bt)}),memberToJsString:re(function(We){return nt(this,We)}),memberIsString:re(function(We,bt=!0){return tn(this,We,bt)}),memberKey:At,memberKeys:_e,memberSignature:re(function(We,bt=!1){return en(this,We,bt)}),memoryDump:re(Le),pointer:lt,setMemberCString:re(function(We,bt){return wt(this,We,bt)})}),Object.assign(Ut.prototype,{addOnDispose:function(...We){return dt(this,...We),this}}),Object.defineProperties(Ut,{allocCString:re(Nt),isA:re(We=>We instanceof Ut),hasExternalPointer:re(We=>We instanceof Ut&&!!We[pe]),memberKey:At});const _n=We=>Number.isFinite(We)||We instanceof(Be||Number),Pt=function We(bt,_t,kt){if(!We._){We._={getters:{},setters:{},sw:{}};const hi=["i","c","C","p","P","s","f","d","v()"];mt&&hi.push("j"),hi.forEach(function(Zs){We._.getters[Zs]=Et(Zs),We._.setters[Zs]=ee(Zs),We._.sw[Zs]=ue(Zs)});const Bx=/^[ipPsjfdcC]$/,zx=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;We.sigCheck=function(Zs,Wx,eg,np){Object.prototype.hasOwnProperty.call(Zs,eg)&&N(Zs.structName,"already has a property named",eg+"."),Bx.test(np)||zx.test(np)||N("Malformed signature for",Ee(Zs.structName,Wx)+":",np)}}const In=bt.memberKey(_t);We.sigCheck(bt.prototype,_t,In,kt.signature),kt.key=In,kt.name=_t;const Qn=Qe(kt.signature),Vn=Ee(bt.prototype.structName,In),Kn=bt.prototype.debugFlags.__flags,Na=Object.create(null);Na.configurable=!1,Na.enumerable=!1,Na.get=function(){Kn.getter&&Ge("debug.getter:",We._.getters[Qn],"for",Re(Qn),Vn,"@",this.pointer,"+",kt.offset,"sz",kt.sizeof);let hi=new DataView(W().buffer,this.pointer+kt.offset,kt.sizeof)[We._.getters[Qn]](0,ke);return Kn.getter&&Ge("debug.getter:",Vn,"result =",hi),hi},kt.readOnly?Na.set=st(bt.prototype.structName,In):Na.set=function(hi){if(Kn.setter&&Ge("debug.setter:",We._.setters[Qn],"for",Re(Qn),Vn,"@",this.pointer,"+",kt.offset,"sz",kt.sizeof,hi),this.pointer||N("Cannot set struct property on disposed instance."),hi===null)hi=0;else for(;!_n(hi);){if(Ze(kt.signature)&&hi instanceof Ut){hi=hi.pointer||0,Kn.setter&&Ge("debug.setter:",Vn,"resolved to",hi);break}N("Invalid value for pointer-type",Vn+".")}new DataView(W().buffer,this.pointer+kt.offset,kt.sizeof)[We._.setters[Qn]](0,We._.sw[Qn](hi),ke)},Object.defineProperty(bt.prototype,In,Na)},Cr=function We(bt,_t){arguments.length===1?(_t=bt,bt=_t.name):_t.name||(_t.name=bt),bt||N("Struct name is required.");let kt=!1;Object.keys(_t.members).forEach(Vn=>{const Kn=_t.members[Vn];Kn.sizeof?Kn.sizeof===1?Kn.signature==="c"||Kn.signature==="C"||N("Unexpected sizeof==1 member",Ee(_t.name,Vn),"with signature",Kn.signature):(Kn.sizeof%4!==0&&(console.warn("Invalid struct member description =",Kn,"from",_t),N(bt,"member",Vn,"sizeof is not aligned. sizeof="+Kn.sizeof)),Kn.offset%4!==0&&(console.warn("Invalid struct member description =",Kn,"from",_t),N(bt,"member",Vn,"offset is not aligned. offset="+Kn.offset))):N(bt,"member",Vn,"is missing sizeof."),(!kt||kt.offset<Kn.offset)&&(kt=Kn)}),kt?_t.sizeof<kt.offset+kt.sizeof&&N("Invalid struct config:",bt,"max member offset ("+kt.offset+") ","extends past end of struct (sizeof="+_t.sizeof+")."):N("No member property descriptions found.");const In=re(O.__makeDebugFlags(We.debugFlags)),Qn=function Vn(Kn){this instanceof Vn?arguments.length?((Kn!==(Kn|0)||Kn<=0)&&N("Invalid pointer value for",bt,"constructor."),se(Vn,this,Kn)):se(Vn,this):N("The",bt,"constructor may only be called via 'new'.")};return Object.defineProperties(Qn,{debugFlags:In,isA:re(Vn=>Vn instanceof Qn),memberKey:At,memberKeys:_e,methodInfoForKey:re(function(Vn){}),structInfo:re(_t),structName:re(bt)}),Qn.prototype=new Ut(bt,_t,re),Object.defineProperties(Qn.prototype,{debugFlags:In,constructor:re(Qn)}),Object.keys(_t.members).forEach(Vn=>Pt(Qn,Vn,_t.members[Vn])),Qn};return Cr.StructType=Ut,Cr.config=E,Cr.allocCString=Nt,Cr.debugFlags||(Cr.debugFlags=O.__makeDebugFlags(O.debugFlags)),Cr},globalThis.sqlite3ApiBootstrap.initializers.push(function(b){const E=(...ve)=>{throw new Error(ve.join(" "))};b.SQLite3Error.toss;const N=b.capi,O=b.wasm,W=b.util;if(globalThis.WhWasmUtilInstaller(O),delete globalThis.WhWasmUtilInstaller,O.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new O.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(ve,ke)=>ve[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new O.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:ve=>ve[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new O.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:ve=>{let ke;return(Te,Ze,Qe,Re)=>{try{const Ke=O.cArgvToJs(Ze,Qe);return ke||(ke=O.cArgvToJs(Ze,Re)),ve(Ke,ke)|0}catch(Ke){return Ke.resultCode||N.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new O.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:ve=>ve[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new O.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(ve,ke)=>ve[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new O.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(ve,ke)=>ve[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],O.exports.sqlite3_progress_handler&&O.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new O.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(ve,ke)=>ve[0]}),"*"]]),O.exports.sqlite3_stmt_explain&&O.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),O.exports.sqlite3_set_authorizer&&O.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new O.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(ve,ke)=>ve[0],callProxy:ve=>(ke,Te,Ze,Qe,Re,Ke)=>{try{return Ze=Ze&&O.cstrToJs(Ze),Qe=Qe&&O.cstrToJs(Qe),Re=Re&&O.cstrToJs(Re),Ke=Ke&&O.cstrToJs(Ke),ve(ke,Te,Ze,Qe,Re,Ke)||0}catch(Et){return Et.resultCode||N.SQLITE_ERROR}}}),"*"]]),O.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new O.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:ve=>ve[0],callProxy:ve=>(ke,Te,Ze,Qe,Re)=>{ve(ke,Te,O.cstrToJs(Ze),O.cstrToJs(Qe),Re)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],O.bigIntEnabled&&O.exports.sqlite3_declare_vtab&&O.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),O.bigIntEnabled&&O.exports.sqlite3_preupdate_hook&&O.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new O.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:ve=>ve[0],callProxy:ve=>(ke,Te,Ze,Qe,Re,Ke,Et)=>{ve(ke,Te,Ze,O.cstrToJs(Qe),O.cstrToJs(Re),Ke,Et)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),O.bigIntEnabled&&O.exports.sqlite3changegroup_add&&O.exports.sqlite3session_create&&O.exports.sqlite3_preupdate_hook){const ve={signature:"i(ps)",callProxy:ke=>(Te,Ze)=>{try{return ke(Te,O.cstrToJs(Ze))|0}catch(Qe){return Qe.resultCode||N.SQLITE_ERROR}}};O.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new O.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new O.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new O.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new O.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new O.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new O.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new O.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new O.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new O.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new O.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new O.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new O.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new O.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new O.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new O.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new O.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new O.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new O.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new O.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new O.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new O.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new O.xWrap.FuncPtrAdapter({name:"xFilter",...ve,contextKey:(ke,Te)=>ke[0]}),"*"]])}O.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],b.StructBinder=globalThis.Jaccwabyt({heap:O.heap8u,alloc:O.alloc,dealloc:O.dealloc,bigIntEnabled:O.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const ve=O.xWrap.argAdapter("string");O.xWrap.argAdapter("string:flexible",Re=>ve(W.flexibleString(Re))),O.xWrap.argAdapter("string:static",function(Re){return O.isPtr(Re)?Re:(Re=""+Re,this[Re]||(this[Re]=O.allocCString(Re)))}.bind(Object.create(null)));const ke=O.xWrap.argAdapter("*"),Te=function(){};O.xWrap.argAdapter("sqlite3_filename",ke)("sqlite3_context*",ke)("sqlite3_value*",ke)("void*",ke)("sqlite3_changegroup*",ke)("sqlite3_changeset_iter*",ke)("sqlite3_session*",ke)("sqlite3_stmt*",Re=>ke(Re instanceof(b?.oo1?.Stmt||Te)?Re.pointer:Re))("sqlite3*",Re=>ke(Re instanceof(b?.oo1?.DB||Te)?Re.pointer:Re))("sqlite3_vfs*",Re=>typeof Re=="string"?N.sqlite3_vfs_find(Re)||b.SQLite3Error.toss(N.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",Re):ke(Re instanceof(N.sqlite3_vfs||Te)?Re.pointer:Re)),O.exports.sqlite3_declare_vtab&&O.xWrap.argAdapter("sqlite3_index_info*",Re=>ke(Re instanceof(N.sqlite3_index_info||Te)?Re.pointer:Re))("sqlite3_module*",Re=>ke(Re instanceof(N.sqlite3_module||Te)?Re.pointer:Re));const Ze=O.xWrap.resultAdapter("*");O.xWrap.resultAdapter("sqlite3*",Ze)("sqlite3_context*",Ze)("sqlite3_stmt*",Ze)("sqlite3_value*",Ze)("sqlite3_vfs*",Ze)("void*",Ze),O.exports.sqlite3_step.length===0&&(O.xWrap.doArgcCheck=!1,b.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const Re of O.bindingSignatures)N[Re[0]]=O.xWrap.apply(null,Re);for(const Re of O.bindingSignatures.wasmInternal)W[Re[0]]=O.xWrap.apply(null,Re);const Qe=function(Re){return()=>E(Re+"() is unavailable due to lack","of BigInt support in this build.")};for(const Re of O.bindingSignatures.int64)N[Re[0]]=O.bigIntEnabled?O.xWrap.apply(null,Re):Qe(Re[0]);if(delete O.bindingSignatures,O.exports.sqlite3__wasm_db_error){const Re=O.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");W.sqlite3__wasm_db_error=function(Ke,Et,ee){return Et instanceof b.WasmAllocError?(Et=N.SQLITE_NOMEM,ee=0):Et instanceof Error&&(ee=ee||""+Et,Et=Et.resultCode||N.SQLITE_ERROR),Ke?Re(Ke,Et,ee):Et}}else W.sqlite3__wasm_db_error=function(Re,Ke,Et){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),Ke}}{const ve=O.xCall("sqlite3__wasm_enum_json");ve||E("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),O.ctype=JSON.parse(O.cstrToJs(ve));const ke=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];O.bigIntEnabled&&ke.push("serialize","session","vtab");for(const Qe of ke)for(const Re of Object.entries(O.ctype[Qe]))N[Re[0]]=Re[1];O.functionEntry(N.SQLITE_WASM_DEALLOC)||E("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+N.SQLITE_WASM_DEALLOC+").");const Te=Object.create(null);for(const Qe of["resultCodes"])for(const Re of Object.entries(O.ctype[Qe]))Te[Re[1]]=Re[0];N.sqlite3_js_rc_str=Qe=>Te[Qe];const Ze=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!W.isUIThread(),sqlite3_index_info:!O.bigIntEnabled,sqlite3_index_constraint:!O.bigIntEnabled,sqlite3_index_orderby:!O.bigIntEnabled,sqlite3_index_constraint_usage:!O.bigIntEnabled});for(const Qe of O.ctype.structs)Ze[Qe.name]||(N[Qe.name]=b.StructBinder(Qe));if(N.sqlite3_index_info){for(const Qe of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])N.sqlite3_index_info[Qe]=N[Qe],delete N[Qe];N.sqlite3_vtab_config=O.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const fe=(ve,ke,Te)=>W.sqlite3__wasm_db_error(ve,N.SQLITE_MISUSE,ke+"() requires "+Te+" argument"+(Te===1?"":"s")+"."),me=ve=>W.sqlite3__wasm_db_error(ve,N.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),Ge=ve=>O.xWrap.argAdapter("sqlite3*")(ve),tt=ve=>O.isPtr(ve)?O.cstrToJs(ve):ve,at=function(ve,ke){ve=Ge(ve);let Te=this.dbMap.get(ve);if(ke)!Te&&ke>0&&this.dbMap.set(ve,Te=Object.create(null));else return this.dbMap.delete(ve),Te;return Te}.bind(Object.assign(Object.create(null),{dbMap:new Map}));at.addCollation=function(ve,ke){const Te=at(ve,1);Te.collation||(Te.collation=new Set),Te.collation.add(tt(ke).toLowerCase())},at._addUDF=function(ve,ke,Te,Ze){ke=tt(ke).toLowerCase();let Qe=Ze.get(ke);Qe||Ze.set(ke,Qe=new Set),Qe.add(Te<0?-1:Te)},at.addFunction=function(ve,ke,Te){const Ze=at(ve,1);Ze.udf||(Ze.udf=new Map),this._addUDF(ve,ke,Te,Ze.udf)},O.exports.sqlite3_create_window_function&&(at.addWindowFunc=function(ve,ke,Te){const Ze=at(ve,1);Ze.wudf||(Ze.wudf=new Map),this._addUDF(ve,ke,Te,Ze.wudf)}),at.cleanup=function(ve){ve=Ge(ve);const ke=[ve];for(const Qe of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const Re=O.exports[Qe];if(Re){ke.length=Re.length;try{N[Qe](...ke)}catch(Ke){b.config.warn("close-time call of",Qe+"(",ke,") threw:",Ke)}}}const Te=at(ve,0);if(!Te)return;if(Te.collation){for(const Qe of Te.collation)try{N.sqlite3_create_collation_v2(ve,Qe,N.SQLITE_UTF8,0,0,0)}catch{}delete Te.collation}let Ze;for(Ze=0;Ze<2;++Ze){const Qe=Ze?Te.wudf:Te.udf;if(!Qe)continue;const Re=Ze?N.sqlite3_create_window_function:N.sqlite3_create_function_v2;for(const Ke of Qe){const Et=Ke[0],ee=Ke[1],ue=[ve,Et,0,N.SQLITE_UTF8,0,0,0,0,0];Ze&&ue.push(0);for(const Ee of ee)try{ue[2]=Ee,Re.apply(null,ue)}catch{}ee.clear()}Qe.clear()}delete Te.udf,delete Te.wudf};{const ve=O.xWrap("sqlite3_close_v2","int","sqlite3*");N.sqlite3_close_v2=function(ke){if(arguments.length!==1)return fe(ke,"sqlite3_close_v2",1);if(ke)try{at.cleanup(ke)}catch{}return ve(ke)}}if(N.sqlite3session_create){const ve=O.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);N.sqlite3session_delete=function(ke){if(arguments.length!==1)return fe(pDb,"sqlite3session_delete",1);ke&&N.sqlite3session_table_filter(ke,0,0),ve(ke)}}{const ve=(Te,Ze)=>"argv["+Ze+"]:"+Te[0]+":"+O.cstrToJs(Te[1]).toLowerCase(),ke=O.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new O.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:ve}),new O.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:ve})]);N.sqlite3_create_collation_v2=function(Te,Ze,Qe,Re,Ke,Et){if(arguments.length!==6)return fe(Te,"sqlite3_create_collation_v2",6);if(!(Qe&15))Qe|=N.SQLITE_UTF8;else if(N.SQLITE_UTF8!==(Qe&15))return me(Te);try{const ee=ke(Te,Ze,Qe,Re,Ke,Et);return ee===0&&Ke instanceof Function&&at.addCollation(Te,Ze),ee}catch(ee){return W.sqlite3__wasm_db_error(Te,ee)}},N.sqlite3_create_collation=(Te,Ze,Qe,Re,Ke)=>arguments.length===5?N.sqlite3_create_collation_v2(Te,Ze,Qe,Re,Ke,0):fe(Te,"sqlite3_create_collation",5)}{const ve=function(Qe,Re){return Qe[0]+":"+(Qe[2]<0?-1:Qe[2])+":"+Re+":"+O.cstrToJs(Qe[1]).toLowerCase()},ke=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:ve,callProxy:Qe=>(Re,Ke,Et)=>{try{Qe(Re,...N.sqlite3_values_to_js(Ke,Et))}catch(ee){N.sqlite3_result_error_js(Re,ee)}}},xFinalAndValue:{signature:"v(p)",contextKey:ve,callProxy:Qe=>Re=>{try{N.sqlite3_result_js(Re,Qe(Re))}catch(Ke){N.sqlite3_result_error_js(Re,Ke)}}},xFunc:{signature:"v(pip)",contextKey:ve,callProxy:Qe=>(Re,Ke,Et)=>{try{N.sqlite3_result_js(Re,Qe(Re,...N.sqlite3_values_to_js(Ke,Et)))}catch(ee){N.sqlite3_result_error_js(Re,ee)}}},xDestroy:{signature:"v(p)",contextKey:ve,callProxy:Qe=>Re=>{try{Qe(Re)}catch(Ke){console.error("UDF xDestroy method threw:",Ke)}}}}),Te=O.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new O.xWrap.FuncPtrAdapter({name:"xFunc",...ke.xFunc}),new O.xWrap.FuncPtrAdapter({name:"xStep",...ke.xInverseAndStep}),new O.xWrap.FuncPtrAdapter({name:"xFinal",...ke.xFinalAndValue}),new O.xWrap.FuncPtrAdapter({name:"xDestroy",...ke.xDestroy})]),Ze=O.exports.sqlite3_create_window_function?O.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new O.xWrap.FuncPtrAdapter({name:"xStep",...ke.xInverseAndStep}),new O.xWrap.FuncPtrAdapter({name:"xFinal",...ke.xFinalAndValue}),new O.xWrap.FuncPtrAdapter({name:"xValue",...ke.xFinalAndValue}),new O.xWrap.FuncPtrAdapter({name:"xInverse",...ke.xInverseAndStep}),new O.xWrap.FuncPtrAdapter({name:"xDestroy",...ke.xDestroy})]):void 0;N.sqlite3_create_function_v2=function Qe(Re,Ke,Et,ee,ue,Ee,st,ae,pe){if(Qe.length!==arguments.length)return fe(Re,"sqlite3_create_function_v2",Qe.length);if(!(ee&15))ee|=N.SQLITE_UTF8;else if(N.SQLITE_UTF8!==(ee&15))return me(Re);try{const K=Te(Re,Ke,Et,ee,ue,Ee,st,ae,pe);return K===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function)&&at.addFunction(Re,Ke,Et),K}catch(K){return console.error("sqlite3_create_function_v2() setup threw:",K),W.sqlite3__wasm_db_error(Re,K,"Creation of UDF threw: "+K)}},N.sqlite3_create_function=function Qe(Re,Ke,Et,ee,ue,Ee,st,ae){return Qe.length===arguments.length?N.sqlite3_create_function_v2(Re,Ke,Et,ee,ue,Ee,st,ae,0):fe(Re,"sqlite3_create_function",Qe.length)},Ze?N.sqlite3_create_window_function=function Qe(Re,Ke,Et,ee,ue,Ee,st,ae,pe,K){if(Qe.length!==arguments.length)return fe(Re,"sqlite3_create_window_function",Qe.length);if(!(ee&15))ee|=N.SQLITE_UTF8;else if(N.SQLITE_UTF8!==(ee&15))return me(Re);try{const re=Ze(Re,Ke,Et,ee,ue,Ee,st,ae,pe,K);return re===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function||K instanceof Function)&&at.addWindowFunc(Re,Ke,Et),re}catch(re){return console.error("sqlite3_create_window_function() setup threw:",re),W.sqlite3__wasm_db_error(Re,re,"Creation of UDF threw: "+re)}}:delete N.sqlite3_create_window_function,N.sqlite3_create_function_v2.udfSetResult=N.sqlite3_create_function.udfSetResult=N.sqlite3_result_js,N.sqlite3_create_window_function&&(N.sqlite3_create_window_function.udfSetResult=N.sqlite3_result_js),N.sqlite3_create_function_v2.udfConvertArgs=N.sqlite3_create_function.udfConvertArgs=N.sqlite3_values_to_js,N.sqlite3_create_window_function&&(N.sqlite3_create_window_function.udfConvertArgs=N.sqlite3_values_to_js),N.sqlite3_create_function_v2.udfSetError=N.sqlite3_create_function.udfSetError=N.sqlite3_result_error_js,N.sqlite3_create_window_function&&(N.sqlite3_create_window_function.udfSetError=N.sqlite3_result_error_js)}{const ve=(Te,Ze)=>(typeof Te=="string"?Ze=-1:W.isSQLableTypedArray(Te)?(Ze=Te.byteLength,Te=W.typedArrayToString(Te instanceof ArrayBuffer?new Uint8Array(Te):Te)):Array.isArray(Te)&&(Te=Te.join(""),Ze=-1),[Te,Ze]),ke={basic:O.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:O.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};N.sqlite3_prepare_v3=function Te(Ze,Qe,Re,Ke,Et,ee){if(Te.length!==arguments.length)return fe(Ze,"sqlite3_prepare_v3",Te.length);const[ue,Ee]=ve(Qe,Re);switch(typeof ue){case"string":return ke.basic(Ze,ue,Ee,Ke,Et,null);case"number":return ke.full(Ze,ue,Ee,Ke,Et,ee);default:return W.sqlite3__wasm_db_error(Ze,N.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},N.sqlite3_prepare_v2=function Te(Ze,Qe,Re,Ke,Et){return Te.length===arguments.length?N.sqlite3_prepare_v3(Ze,Qe,Re,0,Ke,Et):fe(Ze,"sqlite3_prepare_v2",Te.length)}}{const ve=O.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),ke=O.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);N.sqlite3_bind_text=function Te(Ze,Qe,Re,Ke,Et){if(Te.length!==arguments.length)return fe(N.sqlite3_db_handle(Ze),"sqlite3_bind_text",Te.length);if(O.isPtr(Re)||Re===null)return ve(Ze,Qe,Re,Ke,Et);Re instanceof ArrayBuffer?Re=new Uint8Array(Re):Array.isArray(pMem)&&(Re=pMem.join(""));let ee,ue;try{if(W.isSQLableTypedArray(Re))ee=O.allocFromTypedArray(Re),ue=Re.byteLength;else if(typeof Re=="string")[ee,ue]=O.allocCString(Re);else return W.sqlite3__wasm_db_error(N.sqlite3_db_handle(Ze),N.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return ve(Ze,Qe,ee,ue,N.SQLITE_WASM_DEALLOC)}catch(Ee){return O.dealloc(ee),W.sqlite3__wasm_db_error(N.sqlite3_db_handle(Ze),Ee)}},N.sqlite3_bind_blob=function Te(Ze,Qe,Re,Ke,Et){if(Te.length!==arguments.length)return fe(N.sqlite3_db_handle(Ze),"sqlite3_bind_blob",Te.length);if(O.isPtr(Re)||Re===null)return ke(Ze,Qe,Re,Ke,Et);Re instanceof ArrayBuffer?Re=new Uint8Array(Re):Array.isArray(Re)&&(Re=Re.join(""));let ee,ue;try{if(W.isBindableTypedArray(Re))ee=O.allocFromTypedArray(Re),ue=Ke>=0?Ke:Re.byteLength;else if(typeof Re=="string")[ee,ue]=O.allocCString(Re);else return W.sqlite3__wasm_db_error(N.sqlite3_db_handle(Ze),N.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return ke(Ze,Qe,ee,ue,N.SQLITE_WASM_DEALLOC)}catch(Ee){return O.dealloc(ee),W.sqlite3__wasm_db_error(N.sqlite3_db_handle(Ze),Ee)}}}N.sqlite3_config=function(ve,...ke){if(arguments.length<2)return N.SQLITE_MISUSE;switch(ve){case N.SQLITE_CONFIG_COVERING_INDEX_SCAN:case N.SQLITE_CONFIG_MEMSTATUS:case N.SQLITE_CONFIG_SMALL_MALLOC:case N.SQLITE_CONFIG_SORTERREF_SIZE:case N.SQLITE_CONFIG_STMTJRNL_SPILL:case N.SQLITE_CONFIG_URI:return O.exports.sqlite3__wasm_config_i(ve,ke[0]);case N.SQLITE_CONFIG_LOOKASIDE:return O.exports.sqlite3__wasm_config_ii(ve,ke[0],ke[1]);case N.SQLITE_CONFIG_MEMDB_MAXSIZE:return O.exports.sqlite3__wasm_config_j(ve,ke[0]);case N.SQLITE_CONFIG_GETMALLOC:case N.SQLITE_CONFIG_GETMUTEX:case N.SQLITE_CONFIG_GETPCACHE2:case N.SQLITE_CONFIG_GETPCACHE:case N.SQLITE_CONFIG_HEAP:case N.SQLITE_CONFIG_LOG:case N.SQLITE_CONFIG_MALLOC:case N.SQLITE_CONFIG_MMAP_SIZE:case N.SQLITE_CONFIG_MULTITHREAD:case N.SQLITE_CONFIG_MUTEX:case N.SQLITE_CONFIG_PAGECACHE:case N.SQLITE_CONFIG_PCACHE2:case N.SQLITE_CONFIG_PCACHE:case N.SQLITE_CONFIG_PCACHE_HDRSZ:case N.SQLITE_CONFIG_PMASZ:case N.SQLITE_CONFIG_SERIALIZED:case N.SQLITE_CONFIG_SINGLETHREAD:case N.SQLITE_CONFIG_SQLLOG:case N.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return N.SQLITE_NOTFOUND}};{const ve=new Set;N.sqlite3_auto_extension=function(ke){if(ke instanceof Function)ke=O.installFunction("i(ppp)",ke);else if(arguments.length!==1||!O.isPtr(ke))return N.SQLITE_MISUSE;const Te=O.exports.sqlite3_auto_extension(ke);return ke!==arguments[0]&&(Te===0?ve.add(ke):O.uninstallFunction(ke)),Te},N.sqlite3_cancel_auto_extension=function(ke){return!ke||arguments.length!==1||!O.isPtr(ke)?0:O.exports.sqlite3_cancel_auto_extension(ke)},N.sqlite3_reset_auto_extension=function(){O.exports.sqlite3_reset_auto_extension();for(const ke of ve)O.uninstallFunction(ke);ve.clear()}}const mt=N.sqlite3_vfs_find("kvvfs");if(mt)if(W.isUIThread()){const ve=new N.sqlite3_kvvfs_methods(O.exports.sqlite3__wasm_kvvfs_methods());delete N.sqlite3_kvvfs_methods;const ke=O.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,Te=O.pstack,Ze=Re=>O.peek(Re)===115?sessionStorage:localStorage,Qe={xRead:(Re,Ke,Et,ee)=>{const ue=Te.pointer,Ee=O.scopedAllocPush();try{const st=ke(Re,Ke);if(!st)return-3;const ae=O.cstrToJs(st),pe=Ze(Re).getItem(ae);if(!pe)return-1;const K=pe.length;if(ee<=0)return K;if(ee===1)return O.poke(Et,0),K;const re=O.scopedAllocCString(pe);return ee>K+1&&(ee=K+1),O.heap8u().copyWithin(Et,re,re+ee-1),O.poke(Et+ee-1,0),ee-1}catch(st){return console.error("kvstorageRead()",st),-2}finally{Te.restore(ue),O.scopedAllocPop(Ee)}},xWrite:(Re,Ke,Et)=>{const ee=Te.pointer;try{const ue=ke(Re,Ke);if(!ue)return 1;const Ee=O.cstrToJs(ue);return Ze(Re).setItem(Ee,O.cstrToJs(Et)),0}catch(ue){return console.error("kvstorageWrite()",ue),N.SQLITE_IOERR}finally{Te.restore(ee)}},xDelete:(Re,Ke)=>{const Et=Te.pointer;try{const ee=ke(Re,Ke);return ee?(Ze(Re).removeItem(O.cstrToJs(ee)),0):1}catch(ee){return console.error("kvstorageDelete()",ee),N.SQLITE_IOERR}finally{Te.restore(Et)}}};for(const Re of Object.keys(Qe))ve[ve.memberKey(Re)]=O.installFunction(ve.memberSignature(Re),Qe[Re])}else N.sqlite3_vfs_unregister(mt);O.xWrap.FuncPtrAdapter.warnOnUse=!0;const Be=b.StructBinder,Oe=function ve(ke,Te,Ze,Qe=ve.installMethodArgcCheck){if(ke instanceof Be.StructType?!(Ze instanceof Function)&&!O.isPtr(Ze)&&E("Usage errror: expecting a Function or WASM pointer to one."):E("Usage error: target object is-not-a StructType."),arguments.length===1)return(ee,ue)=>ve(ke,ee,ue,Qe);ve.argcProxy||(ve.argcProxy=function(ee,ue,Ee,st){return function(...ae){return Ee.length!==arguments.length&&E("Argument mismatch for",ee.structInfo.name+"::"+ue+": Native signature is:",st),Ee.apply(this,ae)}},ve.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((ee,ue)=>{if(typeof ee=="number")try{O.uninstallFunction(ee)}catch{}}),delete this.ondispose.__removeFuncList)});const Re=ke.memberSignature(Te);Re.length<2&&E("Member",Te,"does not have a function pointer signature:",Re);const Ke=ke.memberKey(Te),Et=Qe&&!O.isPtr(Ze)?ve.argcProxy(ke,Ke,Ze,Re):Ze;if(O.isPtr(Et))Et&&!O.functionEntry(Et)&&E("Pointer",Et,"is not a WASM function table entry."),ke[Ke]=Et;else{const ee=O.installFunction(Et,ke.memberSignature(Te,!0));ke[Ke]=ee,(!ke.ondispose||!ke.ondispose.__removeFuncList)&&(ke.addOnDispose("ondispose.__removeFuncList handler",ve.removeFuncList),ke.ondispose.__removeFuncList=[]),ke.ondispose.__removeFuncList.push(Ke,ee)}return(ee,ue)=>ve(ke,ee,ue,Qe)};Oe.installMethodArgcCheck=!1;const et=function(ve,ke,Te=Oe.installMethodArgcCheck){const Ze=new Map;for(const Qe of Object.keys(ke)){const Re=ke[Qe],Ke=Ze.get(Re);if(Ke){const Et=ve.memberKey(Qe);ve[Et]=ve[ve.memberKey(Ke)]}else Oe(ve,Qe,Re,Te),Ze.set(Re,Qe)}return ve};Be.StructType.prototype.installMethod=function(ke,Te,Ze=Oe.installMethodArgcCheck){return arguments.length<3&&ke&&typeof ke=="object"?et(this,...arguments):Oe(this,...arguments)},Be.StructType.prototype.installMethods=function(ve,ke=Oe.installMethodArgcCheck){return et(this,ve,ke)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){b.version={libVersion:"3.47.1",libVersionNumber:3047001,sourceId:"2024-11-25 12:07:48 b95d11e958643b969c47a8e5857f3793b9e69700b8f1469371386369a26e577e",downloadVersion:3470100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){const E=(...ae)=>{throw new b.SQLite3Error(...ae)},N=b.capi,O=b.wasm,W=b.util,fe=new WeakMap,me=new WeakMap,Ge=(ae,pe,K)=>{const re=Object.getOwnPropertyDescriptor(ae,pe);return re?re.value:K},tt=function(ae,pe){return pe&&(ae instanceof Oe&&(ae=ae.pointer),E(pe,"sqlite3 result code",pe+":",ae?N.sqlite3_errmsg(ae):N.sqlite3_errstr(pe))),arguments[0]},at=O.installFunction("i(ippp)",function(ae,pe,K,re){N.SQLITE_TRACE_STMT===ae&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+pe+":",O.cstrToJs(re))}.bind({counter:0})),mt=Object.create(null),Be=function ae(...pe){if(!ae._name2vfs){ae._name2vfs=Object.create(null);const _e=typeof importScripts=="function"?Pe=>E("The VFS for",Pe,"is only available in the main window thread."):!1;ae._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:_e||(()=>"local")},ae._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:_e||(()=>"session")}}const K=ae.normalizeArgs(...pe);let re=K.filename,se=K.vfs,Le=K.flags;(typeof re!="string"&&typeof re!="number"||typeof Le!="string"||se&&typeof se!="string"&&typeof se!="number")&&(b.config.error("Invalid DB ctor args",K,arguments),E("Invalid arguments for DB constructor."));let it=typeof re=="number"?O.cstrToJs(re):re;const At=ae._name2vfs[it];At&&(se=At.vfs,re=it=At.filename(it));let Vt,en=0;Le.indexOf("c")>=0&&(en|=N.SQLITE_OPEN_CREATE|N.SQLITE_OPEN_READWRITE),Le.indexOf("w")>=0&&(en|=N.SQLITE_OPEN_READWRITE),en===0&&(en|=N.SQLITE_OPEN_READONLY),en|=N.SQLITE_OPEN_EXRESCODE;const lt=O.pstack.pointer;try{const _e=O.pstack.allocPtr();let Pe=N.sqlite3_open_v2(re,_e,en,se||0);Vt=O.peekPtr(_e),tt(Vt,Pe),N.sqlite3_extended_result_codes(Vt,1),Le.indexOf("t")>=0&&N.sqlite3_trace_v2(Vt,N.SQLITE_TRACE_STMT,at,Vt)}catch(_e){throw Vt&&N.sqlite3_close_v2(Vt),_e}finally{O.pstack.restore(lt)}this.filename=it,fe.set(this,Vt),me.set(this,Object.create(null));try{const _e=N.sqlite3_js_db_vfs(Vt)||E("Internal error: cannot get VFS for new db handle."),Pe=mt[_e];Pe&&(Pe instanceof Function?Pe(this,b):tt(Vt,N.sqlite3_exec(Vt,Pe,0,0,0)))}catch(_e){throw this.close(),_e}};Be.setVfsPostOpenCallback=function(ae,pe){pe instanceof Function||E("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),mt[ae]=pe},Be.normalizeArgs=function(ae=":memory:",pe="c",K=null){const re={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(re,arguments[0]),re.flags===void 0&&(re.flags="c"),re.vfs===void 0&&(re.vfs=null),re.filename===void 0&&(re.filename=":memory:")):(re.filename=ae,re.flags=pe,re.vfs=K),re};const Oe=function(...ae){Be.apply(this,ae)};Oe.dbCtorHelper=Be;const et={null:1,number:2,string:3,boolean:4,blob:5};et.undefined==et.null,O.bigIntEnabled&&(et.bigint=et.number);const ve=function(){et!==arguments[2]&&E(N.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],fe.set(this,arguments[1]),this.parameterCount=N.sqlite3_bind_parameter_count(this.pointer)},ke=function(ae){return ae.pointer||E("DB has been closed."),ae},Te=function(ae,pe){return(pe!==(pe|0)||pe<0||pe>=ae.columnCount)&&E("Column index",pe,"is out of range."),ae},Ze=function(ae,pe){const K=Object.create(null);switch(K.opt=Object.create(null),pe.length){case 1:typeof pe[0]=="string"||W.isSQLableTypedArray(pe[0])||Array.isArray(pe[0])?K.sql=pe[0]:pe[0]&&typeof pe[0]=="object"&&(K.opt=pe[0],K.sql=K.opt.sql);break;case 2:K.sql=pe[0],K.opt=pe[1];break;default:E("Invalid argument count for exec().")}K.sql=W.flexibleString(K.sql),typeof K.sql!="string"&&E("Missing SQL argument or unsupported SQL value type.");const re=K.opt;switch(re.returnValue){case"resultRows":re.resultRows||(re.resultRows=[]),K.returnVal=()=>re.resultRows;break;case"saveSql":re.saveSql||(re.saveSql=[]),K.returnVal=()=>re.saveSql;break;case void 0:case"this":K.returnVal=()=>ae;break;default:E("Invalid returnValue value:",re.returnValue)}if(!re.callback&&!re.returnValue&&re.rowMode!==void 0&&(re.resultRows||(re.resultRows=[]),K.returnVal=()=>re.resultRows),re.callback||re.resultRows)switch(re.rowMode===void 0?"array":re.rowMode){case"object":K.cbArg=(se,Le)=>{Le.columnNames||(Le.columnNames=se.getColumnNames([]));const it=se.get([]),At=Object.create(null);for(const Vt in Le.columnNames)At[Le.columnNames[Vt]]=it[Vt];return At};break;case"array":K.cbArg=se=>se.get([]);break;case"stmt":Array.isArray(re.resultRows)&&E("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),K.cbArg=se=>se;break;default:if(W.isInt32(re.rowMode)){K.cbArg=se=>se.get(re.rowMode);break}else if(typeof re.rowMode=="string"&&re.rowMode.length>1&&re.rowMode[0]==="$"){const se=re.rowMode.substr(1);K.cbArg=Le=>{const it=Le.get(Object.create(null))[se];return it===void 0?E(N.SQLITE_NOTFOUND,"exec(): unknown result column:",se):it};break}E("Invalid rowMode:",re.rowMode)}return K},Qe=(ae,pe,K,...re)=>{const se=ae.prepare(pe);try{const Le=se.bind(K).step()?se.get(...re):void 0;return se.reset(),Le}finally{se.finalize()}},Re=(ae,pe,K,re)=>ae.exec({sql:pe,bind:K,rowMode:re,returnValue:"resultRows"});Oe.checkRc=(ae,pe)=>tt(ae,pe),Oe.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return ke(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const ae=this.pointer;if(Object.keys(me.get(this)).forEach((pe,K)=>{if(K&&K.pointer)try{K.finalize()}catch{}}),fe.delete(this),me.delete(this),N.sqlite3_close_v2(ae),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(ae=!1,pe=!1){const K=ke(this).pointer;return ae?pe?N.sqlite3_total_changes64(K):N.sqlite3_total_changes(K):pe?N.sqlite3_changes64(K):N.sqlite3_changes(K)},dbFilename:function(ae="main"){return N.sqlite3_db_filename(ke(this).pointer,ae)},dbName:function(ae=0){return N.sqlite3_db_name(ke(this).pointer,ae)},dbVfsName:function(ae=0){let pe;const K=N.sqlite3_js_db_vfs(ke(this).pointer,ae);if(K){const re=new N.sqlite3_vfs(K);try{pe=O.cstrToJs(re.$zName)}finally{re.dispose()}}return pe},prepare:function(ae){ke(this);const pe=O.pstack.pointer;let K,re;try{K=O.pstack.alloc(8),Oe.checkRc(this,N.sqlite3_prepare_v2(this.pointer,ae,-1,K,null)),re=O.peekPtr(K)}finally{O.pstack.restore(pe)}re||E("Cannot prepare empty SQL.");const se=new ve(this,re,et);return me.get(this)[re]=se,se},exec:function(){ke(this);const ae=Ze(this,arguments);if(!ae.sql)return E("exec() requires an SQL string.");const pe=ae.opt,K=pe.callback,re=Array.isArray(pe.resultRows)?pe.resultRows:void 0;let se,Le=pe.bind,it=!!(ae.cbArg||pe.columnNames||re);const At=O.scopedAllocPush(),Vt=Array.isArray(pe.saveSql)?pe.saveSql:void 0;try{const en=W.isSQLableTypedArray(ae.sql);let lt=en?ae.sql.byteLength:O.jstrlen(ae.sql);const _e=O.scopedAlloc(2*O.ptrSizeof+(lt+1)),Pe=_e+O.ptrSizeof;let ot=Pe+O.ptrSizeof;const pt=ot+lt;for(en?O.heap8().set(ae.sql,ot):O.jstrcpy(ae.sql,O.heap8(),ot,lt,!1),O.poke(ot+lt,0);ot&&O.peek(ot,"i8");){O.pokePtr([_e,Pe],0),Oe.checkRc(this,N.sqlite3_prepare_v3(this.pointer,ot,lt,0,_e,Pe));const Bt=O.peekPtr(_e);if(ot=O.peekPtr(Pe),lt=pt-ot,!!Bt){if(Vt&&Vt.push(N.sqlite3_sql(Bt).trim()),se=new ve(this,Bt,et),Le&&se.parameterCount&&(se.bind(Le),Le=null),it&&se.columnCount){let tn=Array.isArray(pe.columnNames)?0:1;if(it=!1,ae.cbArg||re){const qe=Object.create(null);for(;se.step();se._lockedByExec=!1){tn++===0&&se.getColumnNames(qe.columnNames=pe.columnNames||[]),se._lockedByExec=!0;const nt=ae.cbArg(se,qe);if(re&&re.push(nt),K&&K.call(pe,nt,se)===!1)break}se._lockedByExec=!1}tn===0&&se.getColumnNames(pe.columnNames)}else se.step();se.reset().finalize(),se=null}}}finally{O.scopedAllocPop(At),se&&(delete se._lockedByExec,se.finalize())}return ae.returnVal()},createFunction:function(pe,K,re){const se=qe=>qe instanceof Function;switch(arguments.length){case 1:re=pe,pe=re.name,K=re.xFunc||0;break;case 2:se(K)||(re=K,K=re.xFunc||0);break}re||(re={}),typeof pe!="string"&&E("Invalid arguments: missing function name.");let Le=re.xStep||0,it=re.xFinal||0;const At=re.xValue||0,Vt=re.xInverse||0;let en;se(K)?(en=!1,(se(Le)||se(it))&&E("Ambiguous arguments: scalar or aggregate?"),Le=it=null):se(Le)?(se(it)||E("Missing xFinal() callback for aggregate or window UDF."),K=null):se(it)?E("Missing xStep() callback for aggregate or window UDF."):E("Missing function-type properties."),en===!1?(se(At)||se(Vt))&&E("xValue and xInverse are not permitted for non-window UDFs."):se(At)?(se(Vt)||E("xInverse must be provided if xValue is."),en=!0):se(Vt)&&E("xValue must be provided if xInverse is.");const lt=re.pApp;lt!=null&&(typeof lt!="number"||!W.isInt32(lt))&&E("Invalid value for pApp property. Must be a legal WASM pointer value.");const _e=re.xDestroy||0;_e&&!se(_e)&&E("xDestroy property must be a function.");let Pe=0;Ge(re,"deterministic")&&(Pe|=N.SQLITE_DETERMINISTIC),Ge(re,"directOnly")&&(Pe|=N.SQLITE_DIRECTONLY),Ge(re,"innocuous")&&(Pe|=N.SQLITE_INNOCUOUS),pe=pe.toLowerCase();const ot=K||Le,pt=Ge(re,"arity"),Bt=typeof pt=="number"?pt:ot.length?ot.length-1:0;let tn;return en?tn=N.sqlite3_create_window_function(this.pointer,pe,Bt,N.SQLITE_UTF8|Pe,lt||0,Le,it,At,Vt,_e):tn=N.sqlite3_create_function_v2(this.pointer,pe,Bt,N.SQLITE_UTF8|Pe,lt||0,K,Le,it,_e),Oe.checkRc(this,tn),this},selectValue:function(ae,pe,K){return Qe(this,ae,pe,0,K)},selectValues:function(ae,pe,K){const re=this.prepare(ae),se=[];try{for(re.bind(pe);re.step();)se.push(re.get(0,K));re.reset()}finally{re.finalize()}return se},selectArray:function(ae,pe){return Qe(this,ae,pe,[])},selectObject:function(ae,pe){return Qe(this,ae,pe,{})},selectArrays:function(ae,pe){return Re(this,ae,pe,"array")},selectObjects:function(ae,pe){return Re(this,ae,pe,"object")},openStatementCount:function(){return this.pointer?Object.keys(me.get(this)).length:0},transaction:function(ae){let pe="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&E(N.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),pe+=" "+arguments[0],ae=arguments[1]),ke(this).exec(pe);try{const K=ae(this);return this.exec("COMMIT"),K}catch(K){throw this.exec("ROLLBACK"),K}},savepoint:function(ae){ke(this).exec("SAVEPOINT oo1");try{const pe=ae(this);return this.exec("RELEASE oo1"),pe}catch(pe){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),pe}},checkRc:function(ae){return tt(this,ae)}};const Ke=function(ae){return ae.pointer||E("Stmt has been closed."),ae},Et=function(ae){let pe=et[ae==null?"null":typeof ae];switch(pe){case et.boolean:case et.null:case et.number:case et.string:return pe;case et.bigint:if(O.bigIntEnabled)return pe;default:return W.isBindableTypedArray(ae)?et.blob:void 0}},ee=function(ae){return Et(ae)||E("Unsupported bind() argument type:",typeof ae)},ue=function(ae,pe){const K=typeof pe=="number"?pe:N.sqlite3_bind_parameter_index(ae.pointer,pe);return K===0||!W.isInt32(K)?E("Invalid bind() parameter name: "+pe):(K<1||K>ae.parameterCount)&&E("Bind index",pe,"is out of range."),K},Ee=function(ae,pe){return ae._lockedByExec&&E("Operation is illegal when statement is locked:",pe),ae},st=function ae(pe,K,re,se){Ee(Ke(pe),"bind()"),ae._||(ae._tooBigInt=it=>E("BigInt value is too big to store without precision loss:",it),ae._={string:function(it,At,Vt,en){const[lt,_e]=O.allocCString(Vt,!0);return(en?N.sqlite3_bind_blob:N.sqlite3_bind_text)(it.pointer,At,lt,_e,N.SQLITE_WASM_DEALLOC)}}),ee(se),K=ue(pe,K);let Le=0;switch(se==null?et.null:re){case et.null:Le=N.sqlite3_bind_null(pe.pointer,K);break;case et.string:Le=ae._.string(pe,K,se,!1);break;case et.number:{let it;W.isInt32(se)?it=N.sqlite3_bind_int:typeof se=="bigint"?W.bigIntFits64(se)?O.bigIntEnabled?it=N.sqlite3_bind_int64:W.bigIntFitsDouble(se)?(se=Number(se),it=N.sqlite3_bind_double):ae._tooBigInt(se):ae._tooBigInt(se):(se=Number(se),O.bigIntEnabled&&Number.isInteger(se)?it=N.sqlite3_bind_int64:it=N.sqlite3_bind_double),Le=it(pe.pointer,K,se);break}case et.boolean:Le=N.sqlite3_bind_int(pe.pointer,K,se?1:0);break;case et.blob:{if(typeof se=="string"){Le=ae._.string(pe,K,se,!0);break}else se instanceof ArrayBuffer?se=new Uint8Array(se):W.isBindableTypedArray(se)||E("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const it=O.alloc(se.byteLength||1);O.heap8().set(se.byteLength?se:[0],it),Le=N.sqlite3_bind_blob(pe.pointer,K,it,se.byteLength,N.SQLITE_WASM_DEALLOC);break}default:b.config.warn("Unsupported bind() argument type:",se),E("Unsupported bind() argument type: "+typeof se)}return Le&&Oe.checkRc(pe.db.pointer,Le),pe._mayGet=!1,pe};ve.prototype={finalize:function(){if(this.pointer){Ee(this,"finalize()");const ae=N.sqlite3_finalize(this.pointer);return delete me.get(this.db)[this.pointer],fe.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,ae}},clearBindings:function(){return Ee(Ke(this),"clearBindings()"),N.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(ae){Ee(this,"reset()"),ae&&this.clearBindings();const pe=N.sqlite3_reset(Ke(this).pointer);return this._mayGet=!1,tt(this.db,pe),this},bind:function(){Ke(this);let ae,pe;switch(arguments.length){case 1:ae=1,pe=arguments[0];break;case 2:ae=arguments[0],pe=arguments[1];break;default:E("Invalid bind() arguments.")}return pe===void 0?this:(this.parameterCount||E("This statement has no bindable parameters."),this._mayGet=!1,pe===null?st(this,ae,et.null,pe):Array.isArray(pe)?(arguments.length!==1&&E("When binding an array, an index argument is not permitted."),pe.forEach((K,re)=>st(this,re+1,ee(K),K)),this):(pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe)),typeof pe=="object"&&!W.isBindableTypedArray(pe)?(arguments.length!==1&&E("When binding an object, an index argument is not permitted."),Object.keys(pe).forEach(K=>st(this,K,ee(pe[K]),pe[K])),this):st(this,ae,ee(pe),pe)))},bindAsBlob:function(ae,pe){Ke(this),arguments.length===1&&(pe=ae,ae=1);const K=ee(pe);return et.string!==K&&et.blob!==K&&et.null!==K&&E("Invalid value type for bindAsBlob()"),st(this,ae,et.blob,pe)},step:function(){Ee(this,"step()");const ae=N.sqlite3_step(Ke(this).pointer);switch(ae){case N.SQLITE_DONE:return this._mayGet=!1;case N.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,b.config.warn("sqlite3_step() rc=",ae,N.sqlite3_js_rc_str(ae),"SQL =",N.sqlite3_sql(this.pointer)),Oe.checkRc(this.db.pointer,ae)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const ae=this.step();return this.reset(),ae}finally{try{this.finalize()}catch{}}},get:function(ae,pe){if(Ke(this)._mayGet||E("Stmt.step() has not (recently) returned true."),Array.isArray(ae)){let K=0;const re=this.columnCount;for(;K<re;)ae[K]=this.get(K++);return ae}else if(ae&&typeof ae=="object"){let K=0;const re=this.columnCount;for(;K<re;)ae[N.sqlite3_column_name(this.pointer,K)]=this.get(K++);return ae}switch(Te(this,ae),pe===void 0?N.sqlite3_column_type(this.pointer,ae):pe){case N.SQLITE_NULL:return null;case N.SQLITE_INTEGER:if(O.bigIntEnabled){const K=N.sqlite3_column_int64(this.pointer,ae);return K>=Number.MIN_SAFE_INTEGER&&K<=Number.MAX_SAFE_INTEGER?Number(K).valueOf():K}else{const K=N.sqlite3_column_double(this.pointer,ae);return(K>Number.MAX_SAFE_INTEGER||K<Number.MIN_SAFE_INTEGER)&&E("Integer is out of range for JS integer range: "+K),W.isInt32(K)?K|0:K}case N.SQLITE_FLOAT:return N.sqlite3_column_double(this.pointer,ae);case N.SQLITE_TEXT:return N.sqlite3_column_text(this.pointer,ae);case N.SQLITE_BLOB:{const K=N.sqlite3_column_bytes(this.pointer,ae),re=N.sqlite3_column_blob(this.pointer,ae),se=new Uint8Array(K);return K&&se.set(O.heap8u().slice(re,re+K),0),K&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(se.buffer),se}default:E("Don't know how to translate","type of result column #"+ae+".")}E("Not reached.")},getInt:function(ae){return this.get(ae,N.SQLITE_INTEGER)},getFloat:function(ae){return this.get(ae,N.SQLITE_FLOAT)},getString:function(ae){return this.get(ae,N.SQLITE_TEXT)},getBlob:function(ae){return this.get(ae,N.SQLITE_BLOB)},getJSON:function(ae){const pe=this.get(ae,N.SQLITE_STRING);return pe===null?pe:JSON.parse(pe)},getColumnName:function(ae){return N.sqlite3_column_name(Te(Ke(this),ae).pointer,ae)},getColumnNames:function(ae=[]){Te(Ke(this),0);const pe=this.columnCount;for(let K=0;K<pe;++K)ae.push(N.sqlite3_column_name(this.pointer,K));return ae},getParamIndex:function(ae){return Ke(this).parameterCount?N.sqlite3_bind_parameter_index(this.pointer,ae):void 0},getParamName:function(ae){return Ke(this).parameterCount?N.sqlite3_bind_parameter_name(this.pointer,ae):void 0},isBusy:function(){return N.sqlite3_stmt_busy(Ke(this))!==0},isReadOnly:function(){return N.sqlite3_stmt_readonly(Ke(this))!==0}};{const ae={enumerable:!0,get:function(){return fe.get(this)},set:()=>E("The pointer property is read-only.")};Object.defineProperty(ve.prototype,"pointer",ae),Object.defineProperty(Oe.prototype,"pointer",ae)}if(Object.defineProperty(ve.prototype,"columnCount",{enumerable:!1,get:function(){return N.sqlite3_column_count(this.pointer)},set:()=>E("The columnCount property is read-only.")}),b.oo1={DB:Oe,Stmt:ve},W.isUIThread()){b.oo1.JsStorageDb=function(pe="session"){const K=Be.normalizeArgs(...arguments);pe=K.filename,pe!=="session"&&pe!=="local"&&E("JsStorageDb db name must be one of 'session' or 'local'."),K.vfs="kvvfs",Be.call(this,K)};const ae=b.oo1.JsStorageDb;ae.prototype=Object.create(Oe.prototype),ae.clearStorage=N.sqlite3_js_kvvfs_clear,ae.prototype.clearStorage=function(){return ae.clearStorage(ke(this).filename)},ae.storageSize=N.sqlite3_js_kvvfs_size,ae.prototype.storageSize=function(){return ae.storageSize(ke(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){const E=b.util;b.initWorker1API=function(){const N=(...Be)=>{throw new Error(Be.join(" "))};globalThis.WorkerGlobalScope instanceof Function||N("initWorker1API() must be run from a Worker thread.");const O=this.sqlite3||N("Missing this.sqlite3 object."),W=O.oo1.DB,fe=function(Be){let Oe=me.idMap.get(Be);return Oe||(Oe="db#"+ ++me.idSeq+"@"+Be.pointer,me.idMap.set(Be,Oe),Oe)},me={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(Be){const Oe=new W(Be);return this.dbs[fe(Oe)]=Oe,this.dbList.indexOf(Oe)<0&&this.dbList.push(Oe),Oe},close:function(Be,Oe){if(Be){delete this.dbs[fe(Be)];const et=Be.filename,ve=E.sqlite3__wasm_db_vfs(Be.pointer,0);Be.close();const ke=this.dbList.indexOf(Be);ke>=0&&this.dbList.splice(ke,1),Oe&&et&&ve&&E.sqlite3__wasm_vfs_unlink(ve,et)}},post:function(Be,Oe){Oe&&Oe.length?(globalThis.postMessage(Be,Array.from(Oe)),Oe.length=0):globalThis.postMessage(Be)},dbs:Object.create(null),getDb:function(Be,Oe=!0){return this.dbs[Be]||(Oe?N("Unknown (or closed) DB ID:",Be):void 0)}},Ge=function(Be=me.dbList[0]){return Be&&Be.pointer?Be:N("DB is not opened.")},tt=function(Be,Oe=!0){const et=me.getDb(Be.dbId,!1)||me.dbList[0];return Oe?Ge(et):et},at=function(){return me.dbList[0]&&fe(me.dbList[0])},mt={open:function(Be){const Oe=Object.create(null),et=Be.args||Object.create(null);et.simulateError&&N("Throwing because of simulateError flag.");const ve=Object.create(null);Oe.vfs=et.vfs,Oe.filename=et.filename||"";const ke=me.open(Oe);return ve.filename=ke.filename,ve.persistent=!!O.capi.sqlite3_js_db_uses_vfs(ke.pointer,"opfs"),ve.dbId=fe(ke),ve.vfs=ke.dbVfsName(),ve},close:function(Be){const Oe=tt(Be,!1),et={filename:Oe&&Oe.filename};if(Oe){const ve=Be.args&&typeof Be.args=="object"?!!Be.args.unlink:!1;me.close(Oe,ve)}return et},exec:function(Be){const Oe=typeof Be.args=="string"?{sql:Be.args}:Be.args||Object.create(null);Oe.rowMode==="stmt"?N("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):Oe.sql||N("'exec' requires input SQL.");const et=tt(Be);(Oe.callback||Array.isArray(Oe.resultRows))&&(et._blobXfer=me.xfer);const ve=Oe.callback;let ke=0;const Te=!!Oe.columnNames;typeof ve=="string"&&(Te||(Oe.columnNames=[]),Oe.callback=function(Ze,Qe){me.post({type:ve,columnNames:Oe.columnNames,rowNumber:++ke,row:Ze},me.xfer)});try{const Ze=Oe.countChanges?et.changes(!0,Oe.countChanges===64):void 0;et.exec(Oe),Ze!==void 0&&(Oe.changeCount=et.changes(!0,Oe.countChanges===64)-Ze),Oe.callback instanceof Function&&(Oe.callback=ve,me.post({type:ve,columnNames:Oe.columnNames,rowNumber:null,row:void 0}))}finally{delete et._blobXfer,Oe.callback&&(Oe.callback=ve)}return Oe},"config-get":function(){const Be=Object.create(null),Oe=O.config;return["bigIntEnabled"].forEach(function(et){Object.getOwnPropertyDescriptor(Oe,et)&&(Be[et]=Oe[et])}),Be.version=O.version,Be.vfsList=O.capi.sqlite3_js_vfs_list(),Be},export:function(Be){const Oe=tt(Be),et={byteArray:O.capi.sqlite3_js_db_export(Oe.pointer),filename:Oe.filename,mimetype:"application/x-sqlite3"};return me.xfer.push(et.byteArray.buffer),et},toss:function(Be){N("Testing worker exception")}};globalThis.onmessage=async function(Be){Be=Be.data;let Oe,et=Be.dbId,ve=Be.type;const ke=performance.now();try{mt.hasOwnProperty(ve)&&mt[ve]instanceof Function?Oe=await mt[ve](Be):N("Unknown db worker message type:",Be.type)}catch(Te){ve="error",Oe={operation:Be.type,message:Te.message,errorClass:Te.name,input:Be},Te.stack&&(Oe.stack=typeof Te.stack=="string"?Te.stack.split(/\n\s*/):Te.stack)}et||(et=Oe.dbId||at()),me.post({type:ve,dbId:et,messageId:Be.messageId,workerReceivedTime:ke,workerRespondTime:performance.now(),departureTime:Be.departureTime,result:Oe},me.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:b})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){const E=b.wasm,N=b.capi,O=b.util.toss3,W=Object.create(null);b.vfs=W,N.sqlite3_vfs.prototype.registerVfs=function(fe=!1){this instanceof b.capi.sqlite3_vfs||O("Expecting a sqlite3_vfs-type argument.");const me=N.sqlite3_vfs_register(this,fe?1:0);return me&&O("sqlite3_vfs_register(",this,") failed with rc",me),this.pointer!==N.sqlite3_vfs_find(this.$zName)&&O("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},W.installVfs=function(fe){let me=0;const Ge=["io","vfs"];for(const tt of Ge){const at=fe[tt];at&&(++me,at.struct.installMethods(at.methods,!!at.applyArgcCheck),tt==="vfs"&&(!at.struct.$zName&&typeof at.name=="string"&&at.struct.addOnDispose(at.struct.$zName=E.allocCString(at.name)),at.struct.registerVfs(!!at.asDefault)))}return me||O("Misuse: installVfs() options object requires at least","one of:",Ge),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){if(!b.wasm.exports.sqlite3_declare_vtab)return;const E=b.wasm,N=b.capi,O=b.util.toss3,W=Object.create(null);b.vtab=W;const fe=N.sqlite3_index_info;fe.prototype.nthConstraint=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraint+fe.sqlite3_index_constraint.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint(mt)},fe.prototype.nthConstraintUsage=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraintUsage+fe.sqlite3_index_constraint_usage.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint_usage(mt)},fe.prototype.nthOrderBy=function(tt,at=!1){if(tt<0||tt>=this.$nOrderBy)return!1;const mt=this.$aOrderBy+fe.sqlite3_index_orderby.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_orderby(mt)};const me=function(tt,at){return function(mt,Be=!1){if(arguments.length===0&&(mt=new at),mt instanceof at)return this.set(mt.pointer,mt),mt;E.isPtr(mt)||b.SQLite3Error.toss("Invalid argument to",tt+"()");let Oe=this.get(mt);return Be&&this.delete(mt),Oe}.bind(new Map)},Ge=function(tt,at){const mt=me(tt,at);return Object.assign(Object.create(null),{StructType:at,create:Be=>{const Oe=mt();return E.pokePtr(Be,Oe.pointer),Oe},get:Be=>mt(Be),unget:Be=>mt(Be,!0),dispose:Be=>{const Oe=mt(Be,!0);Oe&&Oe.dispose()}})};W.xVtab=Ge("xVtab",N.sqlite3_vtab),W.xCursor=Ge("xCursor",N.sqlite3_vtab_cursor),W.xIndexInfo=tt=>new N.sqlite3_index_info(tt),W.xError=function tt(at,mt,Be){if(tt.errorReporter instanceof Function)try{tt.errorReporter("sqlite3_module::"+at+"(): "+mt.message)}catch{}let Oe;return mt instanceof b.WasmAllocError?Oe=N.SQLITE_NOMEM:arguments.length>2?Oe=Be:mt instanceof b.SQLite3Error&&(Oe=mt.resultCode),Oe||N.SQLITE_ERROR},W.xError.errorReporter=console.error.bind(console),W.xRowid=(tt,at)=>E.poke(tt,at,"i64"),W.setupModule=function(tt){let at=!1;const mt=this instanceof N.sqlite3_module?this:tt.struct||(at=new N.sqlite3_module);try{const Be=tt.methods||O("Missing 'methods' object.");for(const Oe of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const et=Oe[0],ve=Oe[1];Be[et]===!0?Be[et]=Be[ve]:Be[ve]===!0&&(Be[ve]=Be[et])}if(tt.catchExceptions){const Oe=function(ke,Te){return["xConnect","xCreate"].indexOf(ke)>=0?function(Ze,Qe,Re,Ke,Et,ee){try{return Te(...arguments)||0}catch(ue){return ue instanceof b.WasmAllocError||(E.dealloc(E.peekPtr(ee)),E.pokePtr(ee,E.allocCString(ue.message))),W.xError(ke,ue)}}:function(...Ze){try{return Te(...Ze)||0}catch(Qe){return W.xError(ke,Qe)}}},et=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],ve=Object.create(null);for(const ke of et){const Te=Be[ke];if(Te instanceof Function)ke==="xConnect"&&Be.xCreate===Te?ve[ke]=Be.xCreate:ke==="xCreate"&&Be.xConnect===Te?ve[ke]=Be.xConnect:ve[ke]=Oe(ke,Te);else continue}mt.installMethods(ve,!1)}else mt.installMethods(Be,!!tt.applyArgcCheck);if(mt.$iVersion===0){let Oe;typeof tt.iVersion=="number"?Oe=tt.iVersion:mt.$xShadowName?Oe=3:mt.$xSavePoint||mt.$xRelease||mt.$xRollbackTo?Oe=2:Oe=1,mt.$iVersion=Oe}}catch(Be){throw at&&at.dispose(),Be}return mt},N.sqlite3_module.prototype.setupModule=function(tt){return W.setupModule.call(this,tt)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){const E=function N(O){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!O||typeof O!="object")&&(O=Object.create(null));const W=new URL(globalThis.location.href).searchParams;return W.has("opfs-disable")?Promise.resolve(b):(O.verbose===void 0&&(O.verbose=W.has("opfs-verbose")?+W.get("opfs-verbose")||2:1),O.sanityChecks===void 0&&(O.sanityChecks=W.has("opfs-sanity-check")),O.proxyUri===void 0&&(O.proxyUri=N.defaultProxyUri),typeof O.proxyUri=="function"&&(O.proxyUri=O.proxyUri()),new Promise(function(me,Ge){const tt=[b.config.error,b.config.warn,b.config.log],at=(qe,...nt)=>{O.verbose>qe&&tt[qe]("OPFS syncer:",...nt)},mt=(...qe)=>at(2,...qe),Be=(...qe)=>at(1,...qe),Oe=(...qe)=>at(0,...qe),et=b.util.toss,ve=b.capi,ke=b.util,Te=b.wasm,Ze=ve.sqlite3_vfs,Qe=ve.sqlite3_file,Re=ve.sqlite3_io_methods,Ke=Object.create(null),Et=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;Ke.metrics={dump:function(){let qe,nt=0,dt=0,Nt=0;for(qe in se.opIds){const wt=Le[qe];nt+=wt.count,dt+=wt.time,Nt+=wt.wait,wt.avgTime=wt.count&&wt.time?wt.time/wt.count:0,wt.avgWait=wt.count&&wt.wait?wt.wait/wt.count:0}b.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",Le,`
Total of`,nt,"op(s) for",dt,"ms (incl. "+Nt+" ms of waiting on the async side)"),b.config.log("Serialization metrics:",Le.s11n),pe.postMessage({type:"opfs-async-metrics"})},reset:function(){let qe;const nt=Nt=>Nt.count=Nt.time=Nt.wait=0;for(qe in se.opIds)nt(Le[qe]=Object.create(null));let dt=Le.s11n=Object.create(null);dt=dt.serialize=Object.create(null),dt.count=dt.time=0,dt=Le.s11n.deserialize=Object.create(null),dt.count=dt.time=0}};const ee=new Re,ue=new Ze().addOnDispose(()=>ee.dispose());let Ee;const st=qe=>(Ee=!0,ue.dispose(),Ge(qe)),ae=()=>(Ee=!1,me(b)),pe=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-C_otN2ZJ.js",import.meta.url));setTimeout(()=>{Ee===void 0&&st(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),pe._originalOnError=pe.onerror,pe.onerror=function(qe){Oe("Error initializing OPFS asyncer:",qe),st(new Error("Loading OPFS async Worker failed for unknown reasons."))};const K=ve.sqlite3_vfs_find(null),re=K?new Ze(K):null;ee.$iVersion=1,ue.$iVersion=2,ue.$szOsFile=ve.sqlite3_file.structInfo.sizeof,ue.$mxPathname=1024,ue.$zName=Te.allocCString("opfs"),ue.$xDlOpen=ue.$xDlError=ue.$xDlSym=ue.$xDlClose=null,ue.addOnDispose("$zName",ue.$zName,"cleanup default VFS wrapper",()=>re?re.dispose():null);const se=Object.create(null);se.verbose=O.verbose,se.littleEndian=(()=>{const qe=new ArrayBuffer(2);return new DataView(qe).setInt16(0,256,!0),new Int16Array(qe)[0]===256})(),se.asyncIdleWaitTime=150,se.asyncS11nExceptions=1,se.fileBufferSize=1024*64,se.sabS11nOffset=se.fileBufferSize,se.sabS11nSize=ue.$mxPathname*2,se.sabIO=new SharedArrayBuffer(se.fileBufferSize+se.sabS11nSize),se.opIds=Object.create(null);const Le=Object.create(null);{let qe=0;se.opIds.whichOp=qe++,se.opIds.rc=qe++,se.opIds.xAccess=qe++,se.opIds.xClose=qe++,se.opIds.xDelete=qe++,se.opIds.xDeleteNoWait=qe++,se.opIds.xFileSize=qe++,se.opIds.xLock=qe++,se.opIds.xOpen=qe++,se.opIds.xRead=qe++,se.opIds.xSleep=qe++,se.opIds.xSync=qe++,se.opIds.xTruncate=qe++,se.opIds.xUnlock=qe++,se.opIds.xWrite=qe++,se.opIds.mkdir=qe++,se.opIds["opfs-async-metrics"]=qe++,se.opIds["opfs-async-shutdown"]=qe++,se.opIds.retry=qe++,se.sabOP=new SharedArrayBuffer(qe*4),Ke.metrics.reset()}se.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(qe=>{(se.sq3Codes[qe]=ve[qe])===void 0&&et("Maintenance required: not found:",qe)}),se.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const it=(qe,...nt)=>{const dt=se.opIds[qe]||et("Invalid op ID:",qe);se.s11n.serialize(...nt),Atomics.store(se.sabOPView,se.opIds.rc,-1),Atomics.store(se.sabOPView,se.opIds.whichOp,dt),Atomics.notify(se.sabOPView,se.opIds.whichOp);const Nt=performance.now();for(;Atomics.wait(se.sabOPView,se.opIds.rc,-1)!=="not-equal";);const wt=Atomics.load(se.sabOPView,se.opIds.rc);if(Le[qe].wait+=performance.now()-Nt,wt&&se.asyncS11nExceptions){const Ut=se.s11n.deserialize();Ut&&Oe(qe+"() async error:",...Ut)}return wt};Ke.debug={asyncShutdown:()=>{Be("Shutting down OPFS async listener. The OPFS VFS will no longer work."),it("opfs-async-shutdown")},asyncRestart:()=>{Be("Attempting to restart OPFS VFS async listener. Might work, might not."),pe.postMessage({type:"opfs-async-restart"})}};const At=()=>{if(se.s11n)return se.s11n;const qe=new TextDecoder,nt=new TextEncoder("utf-8"),dt=new Uint8Array(se.sabIO,se.sabS11nOffset,se.sabS11nSize),Nt=new DataView(se.sabIO,se.sabS11nOffset,se.sabS11nSize);se.s11n=Object.create(null);const wt=Object.create(null);wt.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},wt.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},wt.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},wt.string={id:4};const Ut=Pt=>wt[typeof Pt]||et("Maintenance required: this value type cannot be serialized.",Pt),_n=Pt=>{switch(Pt){case wt.number.id:return wt.number;case wt.bigint.id:return wt.bigint;case wt.boolean.id:return wt.boolean;case wt.string.id:return wt.string;default:et("Invalid type ID:",Pt)}};return se.s11n.deserialize=function(Pt=!1){++Le.s11n.deserialize.count;const Cr=performance.now(),We=dt[0],bt=We?[]:null;if(We){const _t=[];let kt=1,In,Qn,Vn;for(In=0;In<We;++In,++kt)_t.push(_n(dt[kt]));for(In=0;In<We;++In){const Kn=_t[In];Kn.getter?(Vn=Nt[Kn.getter](kt,se.littleEndian),kt+=Kn.size):(Qn=Nt.getInt32(kt,se.littleEndian),kt+=4,Vn=qe.decode(dt.slice(kt,kt+Qn)),kt+=Qn),bt.push(Vn)}}return Pt&&(dt[0]=0),Le.s11n.deserialize.time+=performance.now()-Cr,bt},se.s11n.serialize=function(...Pt){const Cr=performance.now();if(++Le.s11n.serialize.count,Pt.length){const We=[];let bt=0,_t=1;for(dt[0]=Pt.length&255;bt<Pt.length;++bt,++_t)We.push(Ut(Pt[bt])),dt[_t]=We[bt].id;for(bt=0;bt<Pt.length;++bt){const kt=We[bt];if(kt.setter)Nt[kt.setter](_t,Pt[bt],se.littleEndian),_t+=kt.size;else{const In=nt.encode(Pt[bt]);Nt.setInt32(_t,In.byteLength,se.littleEndian),_t+=4,dt.set(In,_t),_t+=In.byteLength}}}else dt[0]=0;Le.s11n.serialize.time+=performance.now()-Cr},se.s11n},Vt=function qe(nt=16){qe._chars||(qe._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",qe._n=qe._chars.length);const dt=[];let Nt=0;for(;Nt<nt;++Nt){const wt=Math.random()*(qe._n*64)%qe._n|0;dt[Nt]=qe._chars[wt]}return dt.join("")},en=Object.create(null),lt=Object.create(null);lt.op=void 0,lt.start=void 0;const _e=qe=>{lt.start=performance.now(),lt.op=qe,++Le[qe].count},Pe=()=>Le[lt.op].time+=performance.now()-lt.start,ot={xCheckReservedLock:function(qe,nt){return Te.poke(nt,0,"i32"),0},xClose:function(qe){_e("xClose");let nt=0;const dt=en[qe];return dt&&(delete en[qe],nt=it("xClose",qe),dt.sq3File&&dt.sq3File.dispose()),Pe(),nt},xDeviceCharacteristics:function(qe){return ve.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(qe,nt,dt){return ve.SQLITE_NOTFOUND},xFileSize:function(qe,nt){_e("xFileSize");let dt=it("xFileSize",qe);if(dt==0)try{const Nt=se.s11n.deserialize()[0];Te.poke(nt,Nt,"i64")}catch(Nt){Oe("Unexpected error reading xFileSize() result:",Nt),dt=se.sq3Codes.SQLITE_IOERR}return Pe(),dt},xLock:function(qe,nt){_e("xLock");const dt=en[qe];let Nt=0;return dt.lockType?dt.lockType=nt:(Nt=it("xLock",qe,nt),Nt===0&&(dt.lockType=nt)),Pe(),Nt},xRead:function(qe,nt,dt,Nt){_e("xRead");const wt=en[qe];let Ut;try{Ut=it("xRead",qe,dt,Number(Nt)),(Ut===0||ve.SQLITE_IOERR_SHORT_READ===Ut)&&Te.heap8u().set(wt.sabView.subarray(0,dt),nt)}catch(_n){Oe("xRead(",arguments,") failed:",_n,wt),Ut=ve.SQLITE_IOERR_READ}return Pe(),Ut},xSync:function(qe,nt){_e("xSync"),++Le.xSync.count;const dt=it("xSync",qe,nt);return Pe(),dt},xTruncate:function(qe,nt){_e("xTruncate");const dt=it("xTruncate",qe,Number(nt));return Pe(),dt},xUnlock:function(qe,nt){_e("xUnlock");const dt=en[qe];let Nt=0;return ve.SQLITE_LOCK_NONE===nt&&dt.lockType&&(Nt=it("xUnlock",qe,nt)),Nt===0&&(dt.lockType=nt),Pe(),Nt},xWrite:function(qe,nt,dt,Nt){_e("xWrite");const wt=en[qe];let Ut;try{wt.sabView.set(Te.heap8u().subarray(nt,nt+dt)),Ut=it("xWrite",qe,dt,Number(Nt))}catch(_n){Oe("xWrite(",arguments,") failed:",_n,wt),Ut=ve.SQLITE_IOERR_WRITE}return Pe(),Ut}},pt={xAccess:function(qe,nt,dt,Nt){_e("xAccess");const wt=it("xAccess",Te.cstrToJs(nt));return Te.poke(Nt,wt?0:1,"i32"),Pe(),0},xCurrentTime:function(qe,nt){return Te.poke(nt,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(qe,nt){return Te.poke(nt,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(qe,nt,dt){_e("xDelete");const Nt=it("xDelete",Te.cstrToJs(nt),dt,!1);return Pe(),Nt},xFullPathname:function(qe,nt,dt,Nt){return Te.cstrncpy(Nt,nt,dt)<dt?0:ve.SQLITE_CANTOPEN},xGetLastError:function(qe,nt,dt){return Be("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(nt,dt,Nt,wt,Ut){_e("xOpen");let _n=0;dt===0?dt=Vt():Te.isPtr(dt)&&(ve.sqlite3_uri_boolean(dt,"opfs-unlock-asap",0)&&(_n|=se.opfsFlags.OPFS_UNLOCK_ASAP),ve.sqlite3_uri_boolean(dt,"delete-before-open",0)&&(_n|=se.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),dt=Te.cstrToJs(dt));const Pt=Object.create(null);Pt.fid=Nt,Pt.filename=dt,Pt.sab=new SharedArrayBuffer(se.fileBufferSize),Pt.flags=wt,Pt.readOnly=!(b.SQLITE_OPEN_CREATE&wt)&&!!(wt&ve.SQLITE_OPEN_READONLY);const Cr=it("xOpen",Nt,dt,wt,_n);return Cr||(Pt.readOnly&&Te.poke(Ut,ve.SQLITE_OPEN_READONLY,"i32"),en[Nt]=Pt,Pt.sabView=se.sabFileBufView,Pt.sq3File=new Qe(Nt),Pt.sq3File.$pMethods=ee.pointer,Pt.lockType=ve.SQLITE_LOCK_NONE),Pe(),Cr}};re&&(ue.$xRandomness=re.$xRandomness,ue.$xSleep=re.$xSleep),ue.$xRandomness||(pt.xRandomness=function(qe,nt,dt){const Nt=Te.heap8u();let wt=0;for(;wt<nt;++wt)Nt[dt+wt]=Math.random()*255e3&255;return wt}),ue.$xSleep||(pt.xSleep=function(qe,nt){return Atomics.wait(se.sabOPView,se.opIds.xSleep,0,nt),0}),Ke.getResolvedPath=function(qe,nt){const dt=new URL(qe,"file://irrelevant").pathname;return nt?dt.split("/").filter(Nt=>!!Nt):dt},Ke.getDirForFilename=async function(nt,dt=!1){const Nt=Ke.getResolvedPath(nt,!0),wt=Nt.pop();let Ut=Ke.rootDirectory;for(const _n of Nt)_n&&(Ut=await Ut.getDirectoryHandle(_n,{create:!!dt}));return[Ut,wt]},Ke.mkdir=async function(qe){try{return await Ke.getDirForFilename(qe+"/filepart",!0),!0}catch{return!1}},Ke.entryExists=async function(qe){try{const[nt,dt]=await Ke.getDirForFilename(qe);return await nt.getFileHandle(dt),!0}catch{return!1}},Ke.randomFilename=Vt,Ke.treeList=async function(){const qe=async function dt(Nt,wt){wt.name=Nt.name,wt.dirs=[],wt.files=[];for await(const Ut of Nt.values())if(Ut.kind==="directory"){const _n=Object.create(null);wt.dirs.push(_n),await dt(Ut,_n)}else wt.files.push(Ut.name)},nt=Object.create(null);return await qe(Ke.rootDirectory,nt),nt},Ke.rmfr=async function(){const qe=Ke.rootDirectory,nt={recurse:!0};for await(const dt of qe.values())qe.removeEntry(dt.name,nt)},Ke.unlink=async function(qe,nt=!1,dt=!1){try{const[Nt,wt]=await Ke.getDirForFilename(qe,!1);return await Nt.removeEntry(wt,{recursive:nt}),!0}catch(Nt){if(dt)throw new Error("unlink(",arguments[0],") failed: "+Nt.message,{cause:Nt});return!1}},Ke.traverse=async function(qe){const nt={recursive:!0,directory:Ke.rootDirectory};typeof qe=="function"&&(qe={callback:qe}),qe=Object.assign(nt,qe||{}),async function Nt(wt,Ut){for await(const _n of wt.values()){if(qe.callback(_n,wt,Ut)===!1)return!1;if(qe.recursive&&_n.kind==="directory"&&await Nt(_n,Ut+1)===!1)break}}(qe.directory,0)};const Bt=async function(qe,nt){const[dt,Nt]=await Ke.getDirForFilename(qe,!0);let Ut=await (await dt.getFileHandle(Nt,{create:!0})).createSyncAccessHandle(),_n=0,Pt,Cr=!1;try{for(Ut.truncate(0);(Pt=await nt())!==void 0;)Pt instanceof ArrayBuffer&&(Pt=new Uint8Array(Pt)),_n===0&&Pt.byteLength>=15&&(ke.affirmDbHeader(Pt),Cr=!0),Ut.write(Pt,{at:_n}),_n+=Pt.byteLength;if((_n<512||_n%512!==0)&&et("Input size",_n,"is not correct for an SQLite database."),!Cr){const We=new Uint8Array(20);Ut.read(We,{at:0}),ke.affirmDbHeader(We)}return Ut.write(new Uint8Array([1,1]),{at:18}),_n}catch(We){throw await Ut.close(),Ut=void 0,await dt.removeEntry(Nt).catch(()=>{}),We}finally{Ut&&await Ut.close()}};if(Ke.importDb=async function(qe,nt){if(nt instanceof Function)return Bt(qe,nt);nt instanceof ArrayBuffer&&(nt=new Uint8Array(nt)),ke.affirmIsDb(nt);const dt=nt.byteLength,[Nt,wt]=await Ke.getDirForFilename(qe,!0);let Ut,_n=0;try{return Ut=await (await Nt.getFileHandle(wt,{create:!0})).createSyncAccessHandle(),Ut.truncate(0),_n=Ut.write(nt,{at:0}),_n!=dt&&et("Expected to write "+dt+" bytes but wrote "+_n+"."),Ut.write(new Uint8Array([1,1]),{at:18}),_n}catch(Pt){throw Ut&&(await Ut.close(),Ut=void 0),await Nt.removeEntry(wt).catch(()=>{}),Pt}finally{Ut&&await Ut.close()}},b.oo1){const qe=function(...nt){const dt=b.oo1.DB.dbCtorHelper.normalizeArgs(...nt);dt.vfs=ue.$zName,b.oo1.DB.dbCtorHelper.call(this,dt)};qe.prototype=Object.create(b.oo1.DB.prototype),b.oo1.OpfsDb=qe,qe.importDb=Ke.importDb,b.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(ue.pointer,function(nt,dt){dt.capi.sqlite3_busy_timeout(nt,1e4)})}const tn=function(){const qe=Te.scopedAllocPush(),nt=new Qe;try{const dt=nt.pointer,Nt=ve.SQLITE_OPEN_CREATE|ve.SQLITE_OPEN_READWRITE|ve.SQLITE_OPEN_MAIN_DB,wt=Te.scopedAlloc(8),Ut="/sanity/check/file"+Vt(8),_n=Te.scopedAllocCString(Ut);let Pt;if(se.s11n.serialize("This is \xe4 string."),Pt=se.s11n.deserialize(),mt("deserialize() says:",Pt),Pt[0]!=="This is \xe4 string."&&et("String d13n error."),pt.xAccess(ue.pointer,_n,0,wt),Pt=Te.peek(wt,"i32"),mt("xAccess(",Ut,") exists ?=",Pt),Pt=pt.xOpen(ue.pointer,_n,dt,Nt,wt),mt("open rc =",Pt,"state.sabOPView[xOpen] =",se.sabOPView[se.opIds.xOpen]),Pt!==0){Oe("open failed with code",Pt);return}pt.xAccess(ue.pointer,_n,0,wt),Pt=Te.peek(wt,"i32"),Pt||et("xAccess() failed to detect file."),Pt=ot.xSync(nt.pointer,0),Pt&&et("sync failed w/ rc",Pt),Pt=ot.xTruncate(nt.pointer,1024),Pt&&et("truncate failed w/ rc",Pt),Te.poke(wt,0,"i64"),Pt=ot.xFileSize(nt.pointer,wt),Pt&&et("xFileSize failed w/ rc",Pt),mt("xFileSize says:",Te.peek(wt,"i64")),Pt=ot.xWrite(nt.pointer,_n,10,1),Pt&&et("xWrite() failed!");const Cr=Te.scopedAlloc(16);Pt=ot.xRead(nt.pointer,Cr,6,2),Te.poke(Cr+6,0);let We=Te.cstrToJs(Cr);mt("xRead() got:",We),We!=="sanity"&&et("Unexpected xRead() value."),pt.xSleep&&(mt("xSleep()ing before close()ing..."),pt.xSleep(ue.pointer,2e3),mt("waking up from xSleep()")),Pt=ot.xClose(dt),mt("xClose rc =",Pt,"sabOPView =",se.sabOPView),mt("Deleting file:",Ut),pt.xDelete(ue.pointer,_n,4660),pt.xAccess(ue.pointer,_n,0,wt),Pt=Te.peek(wt,"i32"),Pt&&et("Expecting 0 from xAccess(",Ut,") after xDelete()."),Be("End of OPFS sanity checks.")}finally{nt.dispose(),Te.scopedAllocPop(qe)}};pe.onmessage=function({data:qe}){switch(qe.type){case"opfs-unavailable":st(new Error(qe.payload.join(" ")));break;case"opfs-async-loaded":pe.postMessage({type:"opfs-async-init",args:se});break;case"opfs-async-inited":{if(Ee===!0)break;try{b.vfs.installVfs({io:{struct:ee,methods:ot},vfs:{struct:ue,methods:pt}}),se.sabOPView=new Int32Array(se.sabOP),se.sabFileBufView=new Uint8Array(se.sabIO,0,se.fileBufferSize),se.sabS11nView=new Uint8Array(se.sabIO,se.sabS11nOffset,se.sabS11nSize),At(),O.sanityChecks&&(Be("Running sanity checks because of opfs-sanity-check URL arg..."),tn()),Et()?navigator.storage.getDirectory().then(nt=>{pe.onerror=pe._originalOnError,delete pe._originalOnError,b.opfs=Ke,Ke.rootDirectory=nt,mt("End of OPFS sqlite3_vfs setup.",ue),ae()}).catch(st):ae()}catch(nt){Oe(nt),st(nt)}break}default:{const nt="Unexpected message from the OPFS async worker: "+JSON.stringify(qe);Oe(nt),st(new Error(nt));break}}}}))};E.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async N=>{try{let O=E.defaultProxyUri;return N.scriptInfo.sqlite3Dir&&(E.defaultProxyUri=N.scriptInfo.sqlite3Dir+O),E().catch(W=>{N.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",W.message)})}catch(O){return N.config.error("installOpfsVfs() exception:",O),Promise.reject(O)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(b){const E=b.util.toss,N=b.util.toss3,O=Object.create(null),W=b.capi,fe=b.util,me=b.wasm,Ge=4096,tt=512,at=4,mt=8,Be=tt+at,Oe=tt,et=Be,ve=Ge,ke=W.SQLITE_OPEN_MAIN_DB|W.SQLITE_OPEN_MAIN_JOURNAL|W.SQLITE_OPEN_SUPER_JOURNAL|W.SQLITE_OPEN_WAL,Te=".opaque",Ze=()=>Math.random().toString(36).slice(2),Qe=new TextDecoder,Re=new TextEncoder,Ke=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),Et=[b.config.error,b.config.warn,b.config.log];b.config.log;const ee=b.config.warn;b.config.error;const ue=new Map,Ee=lt=>ue.get(lt),st=(lt,_e)=>{_e?ue.set(lt,_e):ue.delete(lt)},ae=new Map,pe=lt=>ae.get(lt),K=(lt,_e)=>{_e?ae.set(lt,_e):ae.delete(lt)},re={xCheckReservedLock:function(lt,_e){const Pe=pe(lt);return Pe.log("xCheckReservedLock"),Pe.storeErr(),me.poke32(_e,1),0},xClose:function(lt){const _e=pe(lt);_e.storeErr();const Pe=_e.getOFileForS3File(lt);if(Pe)try{_e.log(`xClose ${Pe.path}`),_e.mapS3FileToOFile(lt,!1),Pe.sah.flush(),Pe.flags&W.SQLITE_OPEN_DELETEONCLOSE&&_e.deletePath(Pe.path)}catch(ot){return _e.storeErr(ot,W.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(lt){return W.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(lt,_e,Pe){return W.SQLITE_NOTFOUND},xFileSize:function(lt,_e){const Pe=pe(lt);Pe.log("xFileSize");const pt=Pe.getOFileForS3File(lt).sah.getSize()-ve;return me.poke64(_e,BigInt(pt)),0},xLock:function(lt,_e){const Pe=pe(lt);Pe.log(`xLock ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xRead:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Bt=pt.getOFileForS3File(lt);pt.log(`xRead ${Bt.path} ${Pe} @ ${ot}`);try{const tn=Bt.sah.read(me.heap8u().subarray(_e,_e+Pe),{at:ve+Number(ot)});return tn<Pe?(me.heap8u().fill(0,_e+tn,_e+Pe),W.SQLITE_IOERR_SHORT_READ):0}catch(tn){return pt.storeErr(tn,W.SQLITE_IOERR)}},xSectorSize:function(lt){return Ge},xSync:function(lt,_e){const Pe=pe(lt);Pe.log(`xSync ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.flush(),0}catch(pt){return Pe.storeErr(pt,W.SQLITE_IOERR)}},xTruncate:function(lt,_e){const Pe=pe(lt);Pe.log(`xTruncate ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.truncate(ve+Number(_e)),0}catch(pt){return Pe.storeErr(pt,W.SQLITE_IOERR)}},xUnlock:function(lt,_e){const Pe=pe(lt);Pe.log("xUnlock");const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xWrite:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Bt=pt.getOFileForS3File(lt);pt.log(`xWrite ${Bt.path} ${Pe} ${ot}`);try{const tn=Bt.sah.write(me.heap8u().subarray(_e,_e+Pe),{at:ve+Number(ot)});return Pe===tn?0:E("Unknown write() failure.")}catch(tn){return pt.storeErr(tn,W.SQLITE_IOERR)}}},se=new W.sqlite3_io_methods;se.$iVersion=1,b.vfs.installVfs({io:{struct:se,methods:re}});const Le={xAccess:function(lt,_e,Pe,ot){const pt=Ee(lt);pt.storeErr();try{const Bt=pt.getPath(_e);me.poke32(ot,pt.hasFilename(Bt)?1:0)}catch{me.poke32(ot,0)}return 0},xCurrentTime:function(lt,_e){return me.poke(_e,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(lt,_e){return me.poke(_e,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(lt,_e,Pe){const ot=Ee(lt);ot.log(`xDelete ${me.cstrToJs(_e)}`),ot.storeErr();try{return ot.deletePath(ot.getPath(_e)),0}catch(pt){return ot.storeErr(pt),W.SQLITE_IOERR_DELETE}},xFullPathname:function(lt,_e,Pe,ot){return me.cstrncpy(ot,_e,Pe)<Pe?0:W.SQLITE_CANTOPEN},xGetLastError:function(lt,_e,Pe){const ot=Ee(lt),pt=ot.popErr();if(ot.log(`xGetLastError ${_e} e =`,pt),pt){const Bt=me.scopedAllocPush();try{const[tn,qe]=me.scopedAllocCString(pt.message,!0);me.cstrncpy(Pe,tn,_e),qe>_e&&me.poke8(Pe+_e-1,0)}catch{return W.SQLITE_NOMEM}finally{me.scopedAllocPop(Bt)}}return pt?pt.sqlite3Rc||W.SQLITE_IOERR:0},xOpen:function(_e,Pe,ot,pt,Bt){const tn=Ee(_e);try{tn.log(`xOpen ${me.cstrToJs(Pe)} ${pt}`);const qe=Pe&&me.peek8(Pe)?tn.getPath(Pe):Ze();let nt=tn.getSAHForPath(qe);!nt&&pt&W.SQLITE_OPEN_CREATE&&(tn.getFileCount()<tn.getCapacity()?(nt=tn.nextAvailableSAH(),tn.setAssociatedPath(nt,qe,pt)):E("SAH pool is full. Cannot create file",qe)),nt||E("file not found:",qe);const dt={path:qe,flags:pt,sah:nt};tn.mapS3FileToOFile(ot,dt),dt.lockType=W.SQLITE_LOCK_NONE;const Nt=new W.sqlite3_file(ot);return Nt.$pMethods=se.pointer,Nt.dispose(),me.poke32(Bt,pt),0}catch(qe){return tn.storeErr(qe),W.SQLITE_CANTOPEN}}},it=function(lt){b.capi.sqlite3_vfs_find(lt)&&N("VFS name is already registered:",lt);const _e=new W.sqlite3_vfs,Pe=W.sqlite3_vfs_find(null),ot=Pe?new W.sqlite3_vfs(Pe):null;return _e.$iVersion=2,_e.$szOsFile=W.sqlite3_file.structInfo.sizeof,_e.$mxPathname=tt,_e.addOnDispose(_e.$zName=me.allocCString(lt),()=>st(_e.pointer,0)),ot&&(_e.$xRandomness=ot.$xRandomness,_e.$xSleep=ot.$xSleep,ot.dispose()),!_e.$xRandomness&&!Le.xRandomness&&(Le.xRandomness=function(pt,Bt,tn){const qe=me.heap8u();let nt=0;for(;nt<Bt;++nt)qe[tn+nt]=Math.random()*255e3&255;return nt}),!_e.$xSleep&&!Le.xSleep&&(Le.xSleep=(pt,Bt)=>0),b.vfs.installVfs({vfs:{struct:_e,methods:Le}}),_e};class At{vfsDir;#e;#t;#n;#r=new Map;#i=new Map;#s=new Set;#o=new Map;#a=new Uint8Array(Be);#u;#l;#c;constructor(_e=Object.create(null)){this.#c=_e.verbosity??Ke.verbosity,this.vfsName=_e.name||Ke.name,this.#l=it(this.vfsName),st(this.#l.pointer,this),this.vfsDir=_e.directory||"."+this.vfsName,this.#u=new DataView(this.#a.buffer,this.#a.byteOffset),this.isReady=this.reset(!!(_e.clearOnInit??Ke.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(_e.initialCapacity||Ke.initialCapacity)})}#d(_e,...Pe){this.#c>_e&&Et[_e](this.vfsName+":",...Pe)}log(..._e){this.#d(2,..._e)}warn(..._e){this.#d(1,..._e)}error(..._e){this.#d(0,..._e)}getVfs(){return this.#l}getCapacity(){return this.#r.size}getFileCount(){return this.#i.size}getFileNames(){const _e=[],Pe=this.#i.keys();for(const ot of Pe)_e.push(ot);return _e}async addCapacity(_e){for(let Pe=0;Pe<_e;++Pe){const ot=Ze(),Bt=await (await this.#t.getFileHandle(ot,{create:!0})).createSyncAccessHandle();this.#r.set(Bt,ot),this.setAssociatedPath(Bt,"",0)}return this.getCapacity()}async reduceCapacity(_e){let Pe=0;for(const ot of Array.from(this.#s)){if(Pe===_e||this.getFileCount()===this.getCapacity())break;const pt=this.#r.get(ot);ot.close(),await this.#t.removeEntry(pt),this.#r.delete(ot),this.#s.delete(ot),++Pe}return Pe}releaseAccessHandles(){for(const _e of this.#r.keys())_e.close();this.#r.clear(),this.#i.clear(),this.#s.clear()}async acquireAccessHandles(_e){const Pe=[];for await(const[ot,pt]of this.#t)pt.kind==="file"&&Pe.push([ot,pt]);return Promise.all(Pe.map(async([ot,pt])=>{try{const Bt=await pt.createSyncAccessHandle();if(this.#r.set(Bt,ot),_e)Bt.truncate(ve),this.setAssociatedPath(Bt,"",0);else{const tn=this.getAssociatedPath(Bt);tn?this.#i.set(tn,Bt):this.#s.add(Bt)}}catch(Bt){throw this.storeErr(Bt),this.releaseAccessHandles(),Bt}}))}getAssociatedPath(_e){_e.read(this.#a,{at:0});const Pe=this.#u.getUint32(Oe);if(this.#a[0]&&(Pe&W.SQLITE_OPEN_DELETEONCLOSE||!(Pe&ke)))return ee(`Removing file with unexpected flags ${Pe.toString(16)}`,this.#a),this.setAssociatedPath(_e,"",0),"";const ot=new Uint32Array(mt/4);_e.read(ot,{at:et});const pt=this.computeDigest(this.#a);if(ot.every((Bt,tn)=>Bt===pt[tn])){const Bt=this.#a.findIndex(tn=>tn===0);return Bt===0&&_e.truncate(ve),Bt?Qe.decode(this.#a.subarray(0,Bt)):""}else return ee("Disassociating file with bad digest."),this.setAssociatedPath(_e,"",0),""}setAssociatedPath(_e,Pe,ot){const pt=Re.encodeInto(Pe,this.#a);tt<=pt.written+1&&E("Path too long:",Pe),this.#a.fill(0,pt.written,tt),this.#u.setUint32(Oe,ot);const Bt=this.computeDigest(this.#a);_e.write(this.#a,{at:0}),_e.write(Bt,{at:et}),_e.flush(),Pe?(this.#i.set(Pe,_e),this.#s.delete(_e)):(_e.truncate(ve),this.#s.add(_e))}computeDigest(_e){let Pe=0xdeadbeef,ot=0x41c6ce57;for(const pt of _e)Pe=31*Pe+pt*307,ot=31*ot+pt*307;return new Uint32Array([Pe>>>0,ot>>>0])}async reset(_e){await this.isReady;let Pe=await navigator.storage.getDirectory(),ot;for(const pt of this.vfsDir.split("/"))pt&&(ot=Pe,Pe=await Pe.getDirectoryHandle(pt,{create:!0}));return this.#e=Pe,this.#n=ot,this.#t=await this.#e.getDirectoryHandle(Te,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(_e)}getPath(_e){return me.isPtr(_e)&&(_e=me.cstrToJs(_e)),(_e instanceof URL?_e:new URL(_e,"file://localhost/")).pathname}deletePath(_e){const Pe=this.#i.get(_e);return Pe&&(this.#i.delete(_e),this.setAssociatedPath(Pe,"",0)),!!Pe}storeErr(_e,Pe){return _e&&(_e.sqlite3Rc=Pe||W.SQLITE_IOERR,this.error(_e)),this.$error=_e,Pe}popErr(){const _e=this.$error;return this.$error=void 0,_e}nextAvailableSAH(){const[_e]=this.#s.keys();return _e}getOFileForS3File(_e){return this.#o.get(_e)}mapS3FileToOFile(_e,Pe){Pe?(this.#o.set(_e,Pe),K(_e,this)):(this.#o.delete(_e),K(_e,!1))}hasFilename(_e){return this.#i.has(_e)}getSAHForPath(_e){return this.#i.get(_e)}async removeVfs(){if(!this.#l.pointer||!this.#t)return!1;W.sqlite3_vfs_unregister(this.#l.pointer),this.#l.dispose(),delete O[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(Te,{recursive:!0}),this.#t=void 0,await this.#n.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#n=void 0}catch(_e){b.config.error(this.vfsName,"removeVfs() failed:",_e)}return!0}exportFile(_e){const Pe=this.#i.get(_e)||E("File not found:",_e),ot=Pe.getSize()-ve,pt=new Uint8Array(ot>0?ot:0);if(ot>0){const Bt=Pe.read(pt,{at:ve});Bt!=ot&&E("Expected to read "+ot+" bytes but read "+Bt+".")}return pt}async importDbChunked(_e,Pe){const ot=this.#i.get(_e)||this.nextAvailableSAH()||E("No available handles to import to.");ot.truncate(0);let pt=0,Bt,tn=!1;try{for(;(Bt=await Pe())!==void 0;)Bt instanceof ArrayBuffer&&(Bt=new Uint8Array(Bt)),pt===0&&Bt.byteLength>=15&&(fe.affirmDbHeader(Bt),tn=!0),ot.write(Bt,{at:ve+pt}),pt+=Bt.byteLength;if((pt<512||pt%512!==0)&&E("Input size",pt,"is not correct for an SQLite database."),!tn){const qe=new Uint8Array(20);ot.read(qe,{at:0}),fe.affirmDbHeader(qe)}ot.write(new Uint8Array([1,1]),{at:ve+18})}catch(qe){throw this.setAssociatedPath(ot,"",0),qe}return this.setAssociatedPath(ot,_e,W.SQLITE_OPEN_MAIN_DB),pt}importDb(_e,Pe){if(Pe instanceof ArrayBuffer)Pe=new Uint8Array(Pe);else if(Pe instanceof Function)return this.importDbChunked(_e,Pe);const ot=this.#i.get(_e)||this.nextAvailableSAH()||E("No available handles to import to."),pt=Pe.byteLength;(pt<512||pt%512!=0)&&E("Byte array size is invalid for an SQLite db.");const Bt="SQLite format 3";for(let qe=0;qe<Bt.length;++qe)Bt.charCodeAt(qe)!==Pe[qe]&&E("Input does not contain an SQLite database header.");const tn=ot.write(Pe,{at:ve});return tn!=pt?(this.setAssociatedPath(ot,"",0),E("Expected to write "+pt+" bytes but wrote "+tn+".")):(ot.write(new Uint8Array([1,1]),{at:ve+18}),this.setAssociatedPath(ot,_e,W.SQLITE_OPEN_MAIN_DB)),tn}}class Vt{#e;constructor(_e){this.#e=_e,this.vfsName=_e.vfsName}async addCapacity(_e){return this.#e.addCapacity(_e)}async reduceCapacity(_e){return this.#e.reduceCapacity(_e)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(_e){const Pe=this.#e.getCapacity();return Pe<_e?this.#e.addCapacity(_e-Pe):Pe}exportFile(_e){return this.#e.exportFile(_e)}importDb(_e,Pe){return this.#e.importDb(_e,Pe)}async wipeFiles(){return this.#e.reset(!0)}unlink(_e){return this.#e.deletePath(_e)}async removeVfs(){return this.#e.removeVfs()}}const en=async()=>{const lt=await navigator.storage.getDirectory(),_e=".opfs-sahpool-sync-check-"+Ze(),pt=(await (await lt.getFileHandle(_e,{create:!0})).createSyncAccessHandle()).close();return await pt,await lt.removeEntry(_e),pt?.then&&E("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};b.installOpfsSAHPoolVfs=async function(lt=Object.create(null)){lt=Object.assign(Object.create(null),Ke,lt||{});const _e=lt.name;if(lt.$testThrowPhase1)throw lt.$testThrowPhase1;if(O[_e])try{return await O[_e]}catch(Pe){if(lt.forceReinitIfPreviouslyFailed)delete O[_e];else throw Pe}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?O[_e]=Promise.reject(new Error("Missing required OPFS APIs.")):O[_e]=en().then(async function(){if(lt.$testThrowPhase2)throw lt.$testThrowPhase2;const Pe=new At(lt);return Pe.isReady.then(async()=>{const ot=new Vt(Pe);if(b.oo1){const pt=b.oo1,Bt=Pe.getVfs(),tn=function(...qe){const nt=pt.DB.dbCtorHelper.normalizeArgs(...qe);nt.vfs=Bt.$zName,pt.DB.dbCtorHelper.call(this,nt)};tn.prototype=Object.create(pt.DB.prototype),ot.OpfsSAHPoolDb=tn}return Pe.log("VFS initialized."),ot}).catch(async ot=>{throw await Pe.removeVfs().catch(()=>{}),ot})}).catch(Pe=>O[_e]=Promise.reject(Pe))}}),typeof g<"u"){const b=Object.assign(Object.create(null),{exports:typeof he>"u"?g.asm:he,memory:g.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=b;let E;try{E=globalThis.sqlite3ApiBootstrap()}catch(N){throw console.error("sqlite3ApiBootstrap() error:",N),N}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}g.sqlite3=E}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),n=o,n}})();const L7=function(){const t=JN;if(!t)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...n)=>console.warn("sqlite3.debugModule:",...n):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const n=e.moduleScript.src.split("/");n.pop(),e.sqlite3Dir=n.join("/")+"/"}if(globalThis.sqlite3InitModule=function n(...r){return t(...r).then(i=>{const s=i.sqlite3;s.scriptInfo=e,n.__isUnderTest&&(s.__isUnderTest=!0);const o=s.asyncPostInit;return delete s.asyncPostInit,o()}).catch(i=>{throw console.error("Exception loading sqlite3 module:",i),i})},globalThis.sqlite3InitModule.ready=t.ready,globalThis.sqlite3InitModuleState.moduleScript){const n=globalThis.sqlite3InitModuleState;let r=n.moduleScript.src.split("/");r.pop(),n.scriptDir=r.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();JN=L7;const M7=JN;globalThis.sqlite3Worker1Promiser=function t(e=t.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const h=e;e=Object.assign(Object.create(null),t.defaultConfig),e.onready=h}else e=Object.assign(Object.create(null),t.defaultConfig,e);const n=Object.create(null),r=function(){},i=e.onerror||r,s=e.debug||r,o=e.generateMessageId?void 0:Object.create(null),a=e.generateMessageId||function(h){return h.type+"#"+(o[h.type]=(o[h.type]||0)+1)},u=(...h)=>{throw new Error(h.join(" "))};e.worker||(e.worker=t.defaultConfig.worker),typeof e.worker=="function"&&(e.worker=e.worker());let d,p;return e.worker.onmessage=function(h){h=h.data,s("worker1.onmessage",h);let y=n[h.messageId];if(!y){if(h&&h.type==="sqlite3-api"&&h.result==="worker1-ready"){e.onready&&e.onready(p);return}if(y=n[h.type],y&&y.onrow){y.onrow(h);return}e.onunhandled?e.onunhandled(arguments[0]):i("sqlite3Worker1Promiser() unhandled worker message:",h);return}switch(delete n[h.messageId],h.type){case"error":y.reject(h);return;case"open":d||(d=h.dbId);break;case"close":h.dbId===d&&(d=void 0);break}try{y.resolve(h)}catch(x){y.reject(x)}},p=function(){let h;arguments.length===1?h=arguments[0]:arguments.length===2?(h=Object.create(null),h.type=arguments[0],h.args=arguments[1],h.dbId=h.args.dbId):u("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!h.dbId&&h.type!=="open"&&(h.dbId=d),h.messageId=a(h),h.departureTime=performance.now();const y=Object.create(null);y.message=h;let x;h.type==="exec"&&h.args&&(typeof h.args.callback=="function"?(x=h.messageId+":row",y.onrow=h.args.callback,h.args.callback=x,n[x]=y):typeof h.args.callback=="string"&&u("exec callback may not be a string when using the Promise interface."));let _=new Promise(function(S,I){y.resolve=S,y.reject=I,n[h.messageId]=y,s("Posting",h.type,"message to Worker dbId="+(d||"default")+":",h),e.worker.postMessage(h)});return x&&(_=_.finally(()=>delete n[x])),_}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-BF9rosUC.js",import.meta.url),{type:"module"})},onerror:(...t)=>console.error("worker1 promiser error",...t)};sqlite3Worker1Promiser.v2=function(t){let e;typeof t=="function"?(e=t,t={}):typeof t?.onready=="function"&&(e=t.onready,delete t.onready);const n=Object.create(null);t=Object.assign(t||Object.create(null),{onready:async function(i){try{e&&await e(i),n.resolve(i)}catch(s){n.reject(s)}}});const r=new Promise(function(i,s){n.resolve=i,n.reject=s});try{this.original(t)}catch(i){n.reject(i)}return r}.bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;function vO(){let t,e;return{lock:async()=>{for(;t;)await t;t=new Promise(i=>{e=i})},unlock:async()=>{const i=e;t=void 0,e=void 0,i?.()}}}function W0(t,e){const n={rows:[],columns:[]},r=t.exec({sql:e.sql,bind:e.params,returnValue:"resultRows",rowMode:"array",columnNames:n.columns});switch(e.method){case"run":break;case"get":n.rows=r[0]??[];break;case"all":default:n.rows=r;break}return n}function N2(t){const e=t.split(/[\\/]/).filter(s=>s!==""),n=e.pop();if(!n)throw new Error("Database path is invalid.");const r=["journal","wal","shm"].map(s=>`${n}-${s}`);return{directories:e,fileName:n,tempFileNames:r,getDirectoryHandle:async()=>{let s=await navigator.storage.getDirectory();for(let o of e)s=await s.getDirectoryHandle(o);return s}}}async function mI(t,e){let n;if(t instanceof Blob?n=t.stream():n=t,n instanceof ReadableStream&&e){const i=n.getReader();switch(e){case"callback":return async()=>(await i.read()).value;case"buffer":const s=[];let o=!1;for(;!o;){const p=await i.read();p.value&&s.push(p.value),o=p.done}const a=s.reduce((p,h)=>p+h.length,0),u=new Uint8Array(a);let d=0;return s.forEach(p=>{u.set(p,d),d+=p.length}),u}}else return n}class $7{constructor(e){Object.defineProperty(this,"sqlite3",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"db",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dbStorageType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"pointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userFunctions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"initMutex",{enumerable:!0,configurable:!0,writable:!0,value:vO()}),Object.defineProperty(this,"transactionMutex",{enumerable:!0,configurable:!0,writable:!0,value:vO()}),Object.defineProperty(this,"transactionKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"init",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;await this.initMutex.lock();const{databasePath:i,readOnly:s,verbose:o}=this.config,a=[s===!0?"r":"cw",o===!0?"t":""].join("");try{this.sqlite3||(this.sqlite3=await M7()),this.db&&this.destroy(),"opfs"in this.sqlite3&&i!==":memory:"?(this.db=new this.sqlite3.oo1.OpfsDb(i,a),this.dbStorageType="opfs"):(this.db=new this.sqlite3.oo1.DB(i,a),this.dbStorageType="memory",i!==":memory:"&&console.warn(`The origin private file system is not available, so ${i} will not be persisted. Make sure your web server is configured to use the correct HTTP response headers (See https://sqlocal.dallashoffman.com/guide/setup#cross-origin-isolation).`)),this.dbStorageType!=="memory"&&(this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${i})`),this.reinitChannel.onmessage=u=>{this.config.clientKey!==u.data.clientKey&&this.init(u.data.reason)}),this.userFunctions.forEach(this.initUserFunction),this.execInitStatements(),this.emitMessage({type:"event",event:"connect",reason:r})}catch(u){this.emitMessage({type:"error",error:u,queryKey:null}),this.destroy()}finally{await this.initMutex.unlock()}}}),Object.defineProperty(this,"postMessage",{enumerable:!0,configurable:!0,writable:!0,value:async(r,i)=>{const s=r instanceof MessageEvent?r.data:r;switch(await this.initMutex.lock(),s.type){case"config":this.editConfig(s);break;case"query":case"batch":case"transaction":this.exec(s);break;case"function":this.createUserFunction(s);break;case"getinfo":this.getDatabaseInfo(s);break;case"import":this.importDb(s);break;case"export":this.exportDb(s);break;case"delete":this.deleteDb(s);break;case"destroy":this.destroy(s);break}await this.initMutex.unlock()}}),Object.defineProperty(this,"emitMessage",{enumerable:!0,configurable:!0,writable:!0,value:(r,i=[])=>{this.onmessage&&this.onmessage(r,i)}}),Object.defineProperty(this,"editConfig",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.config=r.config,this.init("initial")}}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(this.db)try{const i={type:"data",queryKey:r.queryKey,data:[]};switch(r.type){case"query":const s=this.transactionKey!==null&&this.transactionKey===r.transactionKey;try{s||await this.transactionMutex.lock();const o=W0(this.db,r);i.data.push(o)}finally{s||await this.transactionMutex.unlock()}break;case"batch":try{await this.transactionMutex.lock(),this.db.transaction(o=>{for(let a of r.statements){const u=W0(o,a);i.data.push(u)}})}finally{await this.transactionMutex.unlock()}break;case"transaction":if(r.action==="begin"&&(await this.transactionMutex.lock(),this.transactionKey=r.transactionKey,this.db.exec({sql:"BEGIN"})),(r.action==="commit"||r.action==="rollback")&&this.transactionKey!==null&&this.transactionKey===r.transactionKey){const o=r.action==="commit"?"COMMIT":"ROLLBACK";this.db.exec({sql:o}),this.transactionKey=null,await this.transactionMutex.unlock()}break}this.emitMessage(i)}catch(i){this.emitMessage({type:"error",error:i,queryKey:r.queryKey})}}}),Object.defineProperty(this,"execInitStatements",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.db&&this.config.onInitStatements)for(let r of this.config.onInitStatements)W0(this.db,r)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{try{const i=this.config.databasePath,s=this.dbStorageType,o=s!==void 0?s!=="memory"?await navigator.storage?.persisted():!1:void 0,u=this.db?.exec({sql:"SELECT page_count * page_size AS size FROM pragma_page_count(), pragma_page_size()",returnValue:"resultRows",rowMode:"array"})?.[0]?.[0],d=typeof u=="number"?u:void 0;this.emitMessage({type:"info",queryKey:r.queryKey,info:{databasePath:i,databaseSizeBytes:d,storageType:s,persisted:o}})}catch(i){this.emitMessage({type:"error",queryKey:r.queryKey,error:i})}}}),Object.defineProperty(this,"createUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{const{functionName:i,functionType:s,queryKey:o}=r;let a;if(this.userFunctions.has(i)){this.emitMessage({type:"error",error:new Error(`A user-defined function with the name "${i}" has already been created for this SQLocal instance.`),queryKey:o});return}s==="callback"?a=(...u)=>{this.emitMessage({type:"callback",name:i,args:u})}:a=this.proxy[`_sqlocal_func_${i}`];try{this.initUserFunction({type:s,name:i,func:a}),this.emitMessage({type:"success",queryKey:o})}catch(u){this.emitMessage({type:"error",error:u,queryKey:o})}}}),Object.defineProperty(this,"initUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.createFunction({name:r.name,xFunc:(i,...s)=>r.func(...s),arity:-1}),this.userFunctions.set(r.name,r))}}),Object.defineProperty(this,"importDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.sqlite3||!this.config.databasePath||!this.db)return;const{queryKey:i,database:s}=r;let o=!1;try{if(this.dbStorageType==="opfs"){this.destroy();const a=await mI(s,"callback");await this.sqlite3.oo1.OpfsDb.importDb(this.config.databasePath,a)}else{const a=await mI(s,"buffer"),u=this.sqlite3.wasm.allocFromTypedArray(a);this.pointers.push(u);const d=this.sqlite3.capi.sqlite3_deserialize(this.db,"main",u,a.byteLength,a.byteLength,this.config.readOnly?this.sqlite3.capi.SQLITE_DESERIALIZE_READONLY:this.sqlite3.capi.SQLITE_DESERIALIZE_RESIZEABLE);this.db.checkRc(d),this.execInitStatements()}}catch(a){this.emitMessage({type:"error",error:a,queryKey:i}),o=!0}finally{this.dbStorageType!=="memory"&&await this.init("overwrite")}o||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"exportDb",{enumerable:!0,configurable:!0,writable:!0,value:r=>{if(!this.sqlite3||!this.db)return;const{queryKey:i}=r;try{const s=this.sqlite3.capi.sqlite3_js_db_export(this.db);this.emitMessage({type:"buffer",queryKey:i,buffer:s},[s])}catch(s){this.emitMessage({type:"error",error:s,queryKey:i})}}}),Object.defineProperty(this,"deleteDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;const{queryKey:i}=r;let s=!1;try{if(this.dbStorageType==="opfs"){const{getDirectoryHandle:o,fileName:a,tempFileNames:u}=N2(this.config.databasePath),d=await o(),p=[a,...u];this.destroy(),await Promise.all(p.map(async h=>d.removeEntry(h).catch(y=>{if(!(y instanceof DOMException&&y.name==="NotFoundError"))throw y})))}else this.destroy()}catch(o){this.emitMessage({type:"error",error:o,queryKey:i}),s=!0}finally{await this.init("delete")}s||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.exec({sql:"PRAGMA optimize"}),this.db.close(),this.db=void 0,this.dbStorageType=void 0),this.reinitChannel&&(this.reinitChannel.close(),this.reinitChannel=void 0),this.pointers.forEach(i=>this.sqlite3?.wasm.dealloc(i)),this.pointers=[],r&&this.emitMessage({type:"success",queryKey:r.queryKey})}});const n=e?globalThis:QN(globalThis);this.proxy=n,this.init("initial")}}function uv(t,...e){return{sql:t.join("?"),params:e}}function B7(t){return!t.some(e=>!Array.isArray(e))}function U0(t,e){let n;return B7(t)?n=t:n=[t],n.map(r=>{const i={};return e.forEach((s,o)=>{i[s]=r[o]}),i})}function z7(t){return typeof t=="object"&&t!==null&&"getSQL"in t&&typeof t.getSQL=="function"}function W7(t){return typeof t=="object"&&t!==null&&"sql"in t&&typeof t.sql=="string"&&"params"in t}function U7(t){if(typeof t=="function"&&(t=t(uv)),z7(t))try{if(!("toSQL"in t&&typeof t.toSQL=="function"))throw 1;const r=t.toSQL();if(!W7(r))throw 2;return r}catch{throw new Error("The passed statement could not be parsed.")}const e=t.sql;let n=[];return"params"in t?n=t.params:"parameters"in t&&(n=t.parameters),{sql:e,params:n}}function V0(){return crypto.randomUUID()}function xO(t,e){let n;return typeof t=="string"?n={sql:t,params:e}:n=uv(t,...e),n}async function py(t,e,n,r){return!e&&"locks"in navigator?navigator.locks.request(`_sqlocal_mutation_(${n.databasePath})`,{mode:t},r):r()}class V7{constructor(e){Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"bypassMutationLock",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"userCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"queriesInProgress",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processMessageEvent",{enumerable:!0,configurable:!0,writable:!0,value:o=>{const a=o instanceof MessageEvent?o.data:o,u=this.queriesInProgress;switch(a.type){case"success":case"data":case"buffer":case"info":case"error":if(a.queryKey&&u.has(a.queryKey)){const[p,h]=u.get(a.queryKey);a.type==="error"?h(a.error):p(a),u.delete(a.queryKey)}else if(a.type==="error")throw a.error;break;case"callback":const d=this.userCallbacks.get(a.name);d&&d(...a.args??[]);break;case"event":this.config.onConnect?.(a.reason);break}}}),Object.defineProperty(this,"createQuery",{enumerable:!0,configurable:!0,writable:!0,value:async o=>py("shared",this.bypassMutationLock||o.type==="import"||o.type==="delete",this.config,async()=>{if(this.isDestroyed===!0)throw new Error("This SQLocal client has been destroyed. You will need to initialize a new client in order to make further queries.");const a=V0();switch(o.type){case"import":this.processor.postMessage({...o,queryKey:a},[o.database]);break;default:this.processor.postMessage({...o,queryKey:a});break}return new Promise((u,d)=>{this.queriesInProgress.set(a,[u,d])})})}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async(o,a,u="all",d)=>{const p=await this.createQuery({type:"query",transactionKey:d,sql:o,params:a,method:u}),h={rows:[],columns:[]};return p.type==="data"&&(h.rows=p.data[0]?.rows??[],h.columns=p.data[0]?.columns??[]),h}}),Object.defineProperty(this,"execBatch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const a=await this.createQuery({type:"batch",statements:o}),u=new Array(o.length).fill({rows:[],columns:[]});return a.type==="data"&&a.data.forEach((d,p)=>{u[p]=d}),u}}),Object.defineProperty(this,"sql",{enumerable:!0,configurable:!0,writable:!0,value:async(o,...a)=>{const u=xO(o,a),{rows:d,columns:p}=await this.exec(u.sql,u.params,"all");return U0(d,p)}}),Object.defineProperty(this,"batch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const a=o(uv);return(await this.execBatch(a)).map(({rows:d,columns:p})=>U0(d,p))}}),Object.defineProperty(this,"beginTransaction",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=V0();await this.createQuery({type:"transaction",transactionKey:o,action:"begin"});const a=async h=>{const y=U7(h),{rows:x,columns:_}=await this.exec(y.sql,y.params,"all",o);return U0(x,_)};return{query:a,sql:async(h,...y)=>{const x=xO(h,y);return await a(x)},commit:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"commit"})},rollback:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"rollback"})}}}}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:async o=>py("exclusive",!1,this.config,async()=>{let a;this.bypassMutationLock=!0;try{a=await this.beginTransaction();const u=await o({sql:a.sql,query:a.query});return await a.commit(),u}catch(u){throw await a?.rollback(),u}finally{this.bypassMutationLock=!1}})}),Object.defineProperty(this,"createCallbackFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,a)=>{await this.createQuery({type:"function",functionName:o,functionType:"callback"}),this.userCallbacks.set(o,a)}}),Object.defineProperty(this,"createScalarFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,a)=>{const u=`_sqlocal_func_${o}`;this.proxy===globalThis&&(this.proxy[u]=a),await this.createQuery({type:"function",functionName:o,functionType:"scalar"}),this.proxy!==globalThis&&(this.proxy[u]=a)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=await this.createQuery({type:"getinfo"});if(o.type==="info")return o.info;throw new Error("The database failed to return valid information.")}}),Object.defineProperty(this,"getDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{let o,a;const{storageType:u}=await this.getDatabaseInfo();if(u==="opfs"){const d=N2(this.config.databasePath),{directories:p,getDirectoryHandle:h}=d;o=d.fileName;const y=`backup-${Date.now()}--${o}`,x=`${p.join("/")}/${y}`;await this.exec("VACUUM INTO ?",[x]);const _=await h();a=await (await (await _.getFileHandle(y)).getFile()).arrayBuffer(),await _.removeEntry(y)}else{const d=await this.createQuery({type:"export"});if(d.type==="buffer")o="database.sqlite3",a=d.buffer;else throw new Error("The database failed to export.")}return new File([a],o,{type:"application/x-sqlite3"})}}),Object.defineProperty(this,"overwriteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async(o,a)=>{await py("exclusive",!1,this.config,async()=>{try{const u=await mI(o);await this.createQuery({type:"import",database:u}),typeof a=="function"&&(this.bypassMutationLock=!0,await a()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"overwrite"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"deleteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{await py("exclusive",!1,this.config,async()=>{try{await this.createQuery({type:"delete"}),typeof o=="function"&&(this.bypassMutationLock=!0,await o()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"delete"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{await this.createQuery({type:"destroy"}),this.processor instanceof Worker&&(this.processor.removeEventListener("message",this.processMessageEvent),this.processor.terminate()),this.queriesInProgress.clear(),this.userCallbacks.clear(),this.reinitChannel.close(),this.isDestroyed=!0}});const n=typeof e=="string"?{databasePath:e}:e,{onInit:r,onConnect:i,...s}=n;this.config=n,this.clientKey=V0(),this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${s.databasePath})`),typeof globalThis.Worker<"u"&&s.databasePath!==":memory:"?(this.processor=new Worker(new URL("/assets/worker-DxuAzsZq.js",import.meta.url),{type:"module"}),this.processor.addEventListener("message",this.processMessageEvent),this.proxy=QN(this.processor)):(this.processor=new $7(!0),this.processor.onmessage=o=>this.processMessageEvent(o),this.proxy=globalThis),this.processor.postMessage({type:"config",config:{...s,clientKey:this.clientKey,onInitStatements:r?.(uv)??[]}})}}class H7 extends V7{constructor(){super(...arguments),Object.defineProperty(this,"dialect",{enumerable:!0,configurable:!0,writable:!0,value:{createAdapter:()=>new GG,createDriver:()=>new G7(this),createIntrospector:e=>new HG(e),createQueryCompiler:()=>new WG}})}}class G7{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e})}async init(){}async acquireConnection(){return new K7(this.client)}async releaseConnection(){}async beginTransaction(e){e.transaction=await this.client.beginTransaction()}async commitTransaction(e){await e.transaction?.commit(),e.transaction=null}async rollbackTransaction(e){await e.transaction?.rollback(),e.transaction=null}async destroy(){await this.client.destroy()}}class K7{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:null})}async executeQuery(e){let n;return this.transaction===null?n=await this.client.sql(e.sql,...e.parameters):n=await this.transaction.query(e),{rows:n}}async *streamQuery(){throw new Error("SQLite3 does not support streaming.")}}const Q7=({database:t,bootstrap:e})=>{const{dialect:n}=new H7({databasePath:`${t}.sqlite3`,onInit(i){return[i`PRAGMA foreign_keys = ON;`]}}),r=new NN({dialect:n});return{kysely:r,async bootstrap(){return e({kysely:r})}}},Si=En({slot:{base:["border","border-gray-300","rounded-md","p-4","flex","flex-col","gap-2","items-center"],input:["w-full","border","border-gray-300","rounded-md","p-2","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"]},variant:{isLoading:{true:[]},isSubmitting:{true:[]}},match:[{if:{isSubmitting:!0},then:{base:["opacity-50","pointer-events-none","select-none"]}}],defaults:{isLoading:!1,isSubmitting:!1}}),J7="icon-[material-symbols--error-outline]",Z7=En({slot:{base:["flex","flex-row","gap-1","items-center","text-red-600","p-2"]},variant:{highlight:{true:[]},compact:{true:[]}},match:[{if:{highlight:!0},then:{base:["bg-red-100","p-2","font-bold","border","border-red-200","rounded-md","w-full"]}},{if:{compact:!0},then:{base:["p-0"]}}],defaults:{highlight:!1,compact:!1}}),pi=({error:t,variant:e,tva:n=Z7,css:r})=>{const i=n({...e,css:r}).slots;return t?.message?f.jsxs("div",{className:i.base(),children:[f.jsx(on,{icon:J7}),f.jsx("span",{children:pa.rich(t.message)})]}):null},Y7=En({slot:{base:["flex","flex-col","gap-1","w-full"],input:[]},variant:{required:{true:[]},disabled:{true:[]},isSubmitting:{true:[]},isLoading:{true:[]},isError:{true:[]}},match:[{if:{isError:!0},then:{base:["text-red-600"]}},{if:{required:!0},then:{base:["text-emerald-600","font-bold"]}}],defaults:{required:!1,disabled:!1,isSubmitting:!1,isLoading:!1,isError:!1}}),mn=({label:t,hint:e,required:n=!1,formState:r,name:i,children:s,variant:o,tva:a=Y7,css:u})=>{const d=a({isSubmitting:r.isSubmitting,isLoading:r.isLoading,isError:!!r.errors[i],required:n,...o,css:u}).slots;return f.jsxs("div",{className:d.base(),children:[f.jsxs("div",{className:"flex flex-row justify-between",children:[t?f.jsx("label",{htmlFor:i,children:t}):null,f.jsx(pi,{variant:{compact:!0},error:r.errors[i]})]}),e?f.jsx("div",{className:"text-sm italic",children:e}):null,f.jsx("div",{className:d.input(),children:s})]})},ns=({form:t,mutation:e})=>{const n=t.handleSubmit(async r=>e.mutateAsync(r,{onError:i=>{TN({error:i,errors:[lN({error:i,schema:CN,onError:({data:s})=>{t.setError("root",{message:s.message})}})],onError:s=>{t.setError("root",{message:s.message})}})}}).catch(()=>{}));return r=>{r.stopPropagation(),n(r)}};function X7(t,e,n,r={leading:!1}){const[i,s]=H.useState(t),[o,a]=H.useState(t),u=H.useRef(null),d=H.useRef(!0),p=()=>window.clearTimeout(u.current||void 0);H.useEffect(()=>p,[]),H.useEffect(()=>{e(i)},[i]),H.useEffect(()=>{a(t),s(t)},[t]);const h=H.useCallback(y=>{a(y),p(),d.current&&r.leading?s(y):u.current=window.setTimeout(()=>{d.current=!0,s(y)},n),d.current=!1},[r.leading]);return[o,h]}const eJ=En({slot:{base:["relative","w-full"],search:["absolute","inset-y-0","left-2","flex","items-center","pointer-events-none","text-slate-500"],input:["pl-8","py-1","w-full","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","block"],clear:["absolute","inset-y-0","right-2","flex","items-center","cursor-pointer","text-slate-300","hover:text-slate-500"]},variant:{},defaults:{}}),k2=({value:t="",onFulltext:e,textPlaceholder:n,variant:r,tva:i=eJ,css:s})=>{const o=i({...r,css:s}).slots,[a,u]=X7(t,d=>{e(d||"")},500);return f.jsxs("div",{className:o.base(),children:[f.jsx("div",{className:o.search(),children:f.jsx(on,{icon:"icon-[material-symbols-light--search]",variant:{size:"xl"}})}),f.jsx("input",{value:a||"",className:o.input(),type:"text",placeholder:n||pa.text("Fulltext (placeholder)"),onChange:d=>{u(d.target.value)}}),t&&f.jsx("div",{className:o.clear(),onClick:()=>{e("")},children:f.jsx(on,{icon:"icon-[gridicons--cross]",variant:{size:"md"}})})]})},yo="icon-[pajamas--go-back]",cv="icon-[line-md--confirm-circle]",C2="icon-[mage--edit]",tJ="icon-[arcticons--nothing-x]",nJ="icon-[tabler--filter-plus]",wO="icon-[tabler--filter-minus]",mx="icon-[ph--list-dashes-thin]",rJ="icon-[svg-spinners--3-dots-scale]",ZN="icon-[material-symbols-light--logout-sharp]",iJ="icon-[fluent--shape-intersect-20-regular]",gx="icon-[fluent--checkbox-unchecked-20-regular]",yx="icon-[fluent--checkbox-checked-20-regular]",Zh="icon-[teenyicons--tag-outline]",si="icon-[ph--trash]",sJ="icon-[clarity--upload-cloud-line]",YN="icon-[ph--user]",oJ=async({queryClient:t,keys:e})=>{for await(const n of e)await t.invalidateQueries({queryKey:n,refetchType:"all"})},Fn=t=>{const e=qv(),n=Ko();return async()=>{await oJ({keys:t,queryClient:e}),await n.invalidate()}};var H0={exports:{}},G0,_O;function aJ(){if(_O)return G0;_O=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return G0=t,G0}var K0,SO;function lJ(){if(SO)return K0;SO=1;var t=aJ();function e(){}function n(){}return n.resetWarningCache=e,K0=function(){function r(o,a,u,d,p,h){if(h!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},K0}var EO;function uJ(){return EO||(EO=1,H0.exports=lJ()()),H0.exports}var cJ=uJ();const tr=vo(cJ);function kc(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(p){try{d(r.next(p))}catch(h){o(h)}}function u(p){try{d(r.throw(p))}catch(h){o(h)}}function d(p){p.done?s(p.value):i(p.value).then(a,u)}d((r=r.apply(t,e||[])).next())})}const dJ=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function lf(t,e,n){const r=fJ(t),{webkitRelativePath:i}=t,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&IO(r,"path",s),IO(r,"relativePath",s),r}function fJ(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=dJ.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function IO(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const pJ=[".DS_Store","Thumbs.db"];function hJ(t){return kc(this,void 0,void 0,function*(){return dv(t)&&mJ(t.dataTransfer)?vJ(t.dataTransfer,t.type):gJ(t)?yJ(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?bJ(t):[]})}function mJ(t){return dv(t)}function gJ(t){return dv(t)&&dv(t.target)}function dv(t){return typeof t=="object"&&t!==null}function yJ(t){return gI(t.target.files).map(e=>lf(e))}function bJ(t){return kc(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>lf(n))})}function vJ(t,e){return kc(this,void 0,void 0,function*(){if(t.items){const n=gI(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(xJ));return NO(T2(r))}return NO(gI(t.files).map(n=>lf(n)))})}function NO(t){return t.filter(e=>pJ.indexOf(e.name)===-1)}function gI(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function xJ(t){if(typeof t.webkitGetAsEntry!="function")return kO(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?R2(e):kO(t,e)}function T2(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?T2(n):[n]],[])}function kO(t,e){return kc(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const s=yield t.getAsFileSystemHandle();if(s===null)throw new Error(`${t} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,lf(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return lf(r,(n=e?.fullPath)!==null&&n!==void 0?n:void 0)})}function wJ(t){return kc(this,void 0,void 0,function*(){return t.isDirectory?R2(t):_J(t)})}function R2(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function s(){e.readEntries(o=>kc(this,void 0,void 0,function*(){if(o.length){const a=Promise.all(o.map(wJ));i.push(a),s()}else try{const a=yield Promise.all(i);n(a)}catch(a){r(a)}}),o=>{r(o)})}s()})}function _J(t){return kc(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=lf(r,t.fullPath);e(i)},r=>{n(r)})})})}var hy={},CO;function SJ(){return CO||(CO=1,hy.__esModule=!0,hy.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0}),hy}var EJ=SJ();const Q0=vo(EJ);function TO(t){return kJ(t)||NJ(t)||O2(t)||IJ()}function IJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kJ(t){if(Array.isArray(t))return yI(t)}function RO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RO(Object(n),!0).forEach(function(r){j2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yh(t,e){return RJ(t)||TJ(t,e)||O2(t,e)||CJ()}function CJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O2(t,e){if(t){if(typeof t=="string")return yI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yI(t,e)}}function yI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TJ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,a=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function RJ(t){if(Array.isArray(t))return t}var jJ=typeof Q0=="function"?Q0:Q0.default,q2="file-invalid-type",A2="file-too-large",P2="file-too-small",F2="too-many-files",OJ={FileInvalidType:q2,FileTooLarge:A2,FileTooSmall:P2,TooManyFiles:F2},qJ=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:q2,message:"File type must be ".concat(r)}},OO=function(e){return{code:A2,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},qO=function(e){return{code:P2,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},AJ={code:F2,message:"Too many files"};function D2(t,e){var n=t.type==="application/x-moz-file"||jJ(t,e);return[n,n?null:qJ(e)]}function L2(t,e,n){if(Zu(t.size))if(Zu(e)&&Zu(n)){if(t.size>n)return[!1,OO(n)];if(t.size<e)return[!1,qO(e)]}else{if(Zu(e)&&t.size<e)return[!1,qO(e)];if(Zu(n)&&t.size>n)return[!1,OO(n)]}return[!0,null]}function Zu(t){return t!=null}function PJ(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,a=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(u){var d=D2(u,n),p=Yh(d,1),h=p[0],y=L2(u,r,i),x=Yh(y,1),_=x[0],S=a?a(u):null;return h&&_&&!S})}function fv(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function my(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function AO(t){t.preventDefault()}function FJ(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function DJ(t){return t.indexOf("Edge/")!==-1}function LJ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return FJ(t)||DJ(t)}function ra(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!fv(r)&&a&&a.apply(void 0,[r].concat(s)),fv(r)})}}function MJ(){return"showOpenFilePicker"in window}function $J(t){if(Zu(t)){var e=Object.entries(t).filter(function(n){var r=Yh(n,2),i=r[0],s=r[1],o=!0;return M2(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every($2))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=Yh(r,2),s=i[0],o=i[1];return jO(jO({},n),{},j2({},s,o))},{});return[{description:"Files",accept:e}]}return t}function BJ(t){if(Zu(t))return Object.entries(t).reduce(function(e,n){var r=Yh(n,2),i=r[0],s=r[1];return[].concat(TO(e),[i],TO(s))},[]).filter(function(e){return M2(e)||$2(e)}).join(",")}function zJ(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function WJ(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function M2(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function $2(t){return/^.*\.[\w]+$/.test(t)}var UJ=["children"],VJ=["open"],HJ=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],GJ=["refKey","onChange","onClick"];function KJ(t){return ZJ(t)||JJ(t)||B2(t)||QJ()}function QJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZJ(t){if(Array.isArray(t))return bI(t)}function J0(t,e){return eZ(t)||XJ(t,e)||B2(t,e)||YJ()}function YJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B2(t,e){if(t){if(typeof t=="string")return bI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bI(t,e)}}function bI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function XJ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,a=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function eZ(t){if(Array.isArray(t))return t}function PO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PO(Object(n),!0).forEach(function(r){vI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vI(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pv(t,e){if(t==null)return{};var n=tZ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tZ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var bx=H.forwardRef(function(t,e){var n=t.children,r=pv(t,UJ),i=W2(r),s=i.open,o=pv(i,VJ);return H.useImperativeHandle(e,function(){return{open:s}},[s]),Un.createElement(H.Fragment,null,n(jr(jr({},o),{},{open:s})))});bx.displayName="Dropzone";var z2={disabled:!1,getFilesFromEvent:hJ,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};bx.defaultProps=z2;bx.propTypes={children:tr.func,accept:tr.objectOf(tr.arrayOf(tr.string)),multiple:tr.bool,preventDropOnDocument:tr.bool,noClick:tr.bool,noKeyboard:tr.bool,noDrag:tr.bool,noDragEventsBubbling:tr.bool,minSize:tr.number,maxSize:tr.number,maxFiles:tr.number,disabled:tr.bool,getFilesFromEvent:tr.func,onFileDialogCancel:tr.func,onFileDialogOpen:tr.func,useFsAccessApi:tr.bool,autoFocus:tr.bool,onDragEnter:tr.func,onDragLeave:tr.func,onDragOver:tr.func,onDrop:tr.func,onDropAccepted:tr.func,onDropRejected:tr.func,onError:tr.func,validator:tr.func};var xI={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function W2(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=jr(jr({},z2),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,u=e.maxFiles,d=e.onDragEnter,p=e.onDragLeave,h=e.onDragOver,y=e.onDrop,x=e.onDropAccepted,_=e.onDropRejected,S=e.onFileDialogCancel,I=e.onFileDialogOpen,C=e.useFsAccessApi,k=e.autoFocus,R=e.preventDropOnDocument,j=e.noClick,A=e.noKeyboard,F=e.noDrag,$=e.noDragEventsBubbling,P=e.onError,q=e.validator,B=H.useMemo(function(){return BJ(n)},[n]),L=H.useMemo(function(){return $J(n)},[n]),U=H.useMemo(function(){return typeof I=="function"?I:FO},[I]),V=H.useMemo(function(){return typeof S=="function"?S:FO},[S]),z=H.useRef(null),X=H.useRef(null),J=H.useReducer(nZ,xI),le=J0(J,2),ie=le[0],ne=le[1],oe=ie.isFocused,te=ie.isFileDialogActive,ce=H.useRef(typeof window<"u"&&window.isSecureContext&&C&&MJ()),de=function(){!ce.current&&te&&setTimeout(function(){if(X.current){var ct=X.current.files;ct.length||(ne({type:"closeDialog"}),V())}},300)};H.useEffect(function(){return window.addEventListener("focus",de,!1),function(){window.removeEventListener("focus",de,!1)}},[X,te,V,ce]);var ye=H.useRef([]),we=function(ct){z.current&&z.current.contains(ct.target)||(ct.preventDefault(),ye.current=[])};H.useEffect(function(){return R&&(document.addEventListener("dragover",AO,!1),document.addEventListener("drop",we,!1)),function(){R&&(document.removeEventListener("dragover",AO),document.removeEventListener("drop",we))}},[z,R]),H.useEffect(function(){return!r&&k&&z.current&&z.current.focus(),function(){}},[z,k,r]);var Ie=H.useCallback(function(Me){P?P(Me):console.error(Me)},[P]),ze=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me),ye.current=[].concat(KJ(ye.current),[Me.target]),my(Me)&&Promise.resolve(i(Me)).then(function(ct){if(!(fv(Me)&&!$)){var Jt=ct.length,Zt=Jt>0&&PJ({files:ct,accept:B,minSize:o,maxSize:s,multiple:a,maxFiles:u,validator:q}),wn=Jt>0&&!Zt;ne({isDragAccept:Zt,isDragReject:wn,isDragActive:!0,type:"setDraggedFiles"}),d&&d(Me)}}).catch(function(ct){return Ie(ct)})},[i,d,Ie,$,B,o,s,a,u,q]),je=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me);var ct=my(Me);if(ct&&Me.dataTransfer)try{Me.dataTransfer.dropEffect="copy"}catch{}return ct&&h&&h(Me),!1},[h,$]),De=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me);var ct=ye.current.filter(function(Zt){return z.current&&z.current.contains(Zt)}),Jt=ct.indexOf(Me.target);Jt!==-1&&ct.splice(Jt,1),ye.current=ct,!(ct.length>0)&&(ne({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),my(Me)&&p&&p(Me))},[z,p,$]),Je=H.useCallback(function(Me,ct){var Jt=[],Zt=[];Me.forEach(function(wn){var dr=D2(wn,B),Bn=J0(dr,2),Zr=Bn[0],Ui=Bn[1],kr=L2(wn,o,s),Yt=J0(kr,2),rs=Yt[0],is=Yt[1],ss=q?q(wn):null;if(Zr&&rs&&!ss)Jt.push(wn);else{var wo=[Ui,is];ss&&(wo=wo.concat(ss)),Zt.push({file:wn,errors:wo.filter(function(_a){return _a})})}}),(!a&&Jt.length>1||a&&u>=1&&Jt.length>u)&&(Jt.forEach(function(wn){Zt.push({file:wn,errors:[AJ]})}),Jt.splice(0)),ne({acceptedFiles:Jt,fileRejections:Zt,isDragReject:Zt.length>0,type:"setFiles"}),y&&y(Jt,Zt,ct),Zt.length>0&&_&&_(Zt,ct),Jt.length>0&&x&&x(Jt,ct)},[ne,a,B,o,s,u,y,x,_,q]),Xe=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me),ye.current=[],my(Me)&&Promise.resolve(i(Me)).then(function(ct){fv(Me)&&!$||Je(ct,Me)}).catch(function(ct){return Ie(ct)}),ne({type:"reset"})},[i,Je,Ie,$]),Ue=H.useCallback(function(){if(ce.current){ne({type:"openDialog"}),U();var Me={multiple:a,types:L};window.showOpenFilePicker(Me).then(function(ct){return i(ct)}).then(function(ct){Je(ct,null),ne({type:"closeDialog"})}).catch(function(ct){zJ(ct)?(V(ct),ne({type:"closeDialog"})):WJ(ct)?(ce.current=!1,X.current?(X.current.value=null,X.current.click()):Ie(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ie(ct)});return}X.current&&(ne({type:"openDialog"}),U(),X.current.value=null,X.current.click())},[ne,U,V,C,Je,Ie,L,a]),ut=H.useCallback(function(Me){!z.current||!z.current.isEqualNode(Me.target)||(Me.key===" "||Me.key==="Enter"||Me.keyCode===32||Me.keyCode===13)&&(Me.preventDefault(),Ue())},[z,Ue]),St=H.useCallback(function(){ne({type:"focus"})},[]),Ot=H.useCallback(function(){ne({type:"blur"})},[]),Gt=H.useCallback(function(){j||(LJ()?setTimeout(Ue,0):Ue())},[j,Ue]),an=function(ct){return r?null:ct},xe=function(ct){return A?null:an(ct)},be=function(ct){return F?null:an(ct)},Ne=function(ct){$&&ct.stopPropagation()},Ae=H.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ct=Me.refKey,Jt=ct===void 0?"ref":ct,Zt=Me.role,wn=Me.onKeyDown,dr=Me.onFocus,Bn=Me.onBlur,Zr=Me.onClick,Ui=Me.onDragEnter,kr=Me.onDragOver,Yt=Me.onDragLeave,rs=Me.onDrop,is=pv(Me,HJ);return jr(jr(vI({onKeyDown:xe(ra(wn,ut)),onFocus:xe(ra(dr,St)),onBlur:xe(ra(Bn,Ot)),onClick:an(ra(Zr,Gt)),onDragEnter:be(ra(Ui,ze)),onDragOver:be(ra(kr,je)),onDragLeave:be(ra(Yt,De)),onDrop:be(ra(rs,Xe)),role:typeof Zt=="string"&&Zt!==""?Zt:"presentation"},Jt,z),!r&&!A?{tabIndex:0}:{}),is)}},[z,ut,St,Ot,Gt,ze,je,De,Xe,A,F,r]),Ve=H.useCallback(function(Me){Me.stopPropagation()},[]),rt=H.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ct=Me.refKey,Jt=ct===void 0?"ref":ct,Zt=Me.onChange,wn=Me.onClick,dr=pv(Me,GJ),Bn=vI({accept:B,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:an(ra(Zt,Xe)),onClick:an(ra(wn,Ve)),tabIndex:-1},Jt,X);return jr(jr({},Bn),dr)}},[X,n,a,Xe,r]);return jr(jr({},ie),{},{isFocused:oe&&!r,getRootProps:Ae,getInputProps:rt,rootRef:z,inputRef:X,open:an(Ue)})}function nZ(t,e){switch(e.type){case"focus":return jr(jr({},t),{},{isFocused:!0});case"blur":return jr(jr({},t),{},{isFocused:!1});case"openDialog":return jr(jr({},xI),{},{isFileDialogActive:!0});case"closeDialog":return jr(jr({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return jr(jr({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return jr(jr({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return jr({},xI);default:return t}}function FO(){}const rZ=Object.freeze(Object.defineProperty({__proto__:null,ErrorCode:OJ,default:bx,useDropzone:W2},Symbol.toStringTag,{value:"Module"})),iZ=En({slot:{base:["flex","items-center","justify-center","w-full"],label:["flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100"],zone:["flex","flex-col","items-center","justify-center","pt-5","pb-6","text-slate-500"]},variant:{active:{true:[]},rejected:{true:[]}},match:[{if:{active:!0},then:{label:["text-blue-400"],zone:["text-blue-400"]}},{if:{rejected:!0},then:{label:["text-red-400"],zone:["text-red-400"]}}],defaults:{active:!1,rejected:!1}}),{useDropzone:sZ}=rZ,oZ=({id:t,accept:e,text:n,variant:r,tva:i=iZ,css:s,...o})=>{const{getRootProps:a,getInputProps:u,isDragActive:d,isDragReject:p}=sZ({noClick:!0,multiple:!1,accept:e,maxFiles:1,minSize:0,maxSize:8388608,...o}),h=i({active:d,rejected:p,...r,css:s}).slots;return f.jsx("div",{...a(),className:h.base(),children:f.jsxs("label",{htmlFor:t,className:h.label(),children:[f.jsxs("div",{className:h.zone(),children:[f.jsx(on,{icon:sJ,variant:{size:"4xl"}}),f.jsx("p",{className:"mb-2 text-sm font-semibold",children:n?.title||pa.rich("Drag 'n' drop a file here")}),n?.message?f.jsx("p",{className:"text-xs",children:n.message}):null]}),f.jsx("input",{id:t,type:"file",className:"hidden",...u()})]})})},aZ=En({slot:{base:["min-h-screen","flex","flex-col"],header:["flex","flex-row","items-center","bg-slate-50","shadow-xs","border-b","border-b-slate-200","w-full","gap-4","p-4"],content:["grow","h-full","border-b","border-b-slate-200","p-2"]},variant:{},defaults:{}}),U2=({logo:t,menu:e,actions:n,variant:r,tva:i=aZ,css:s,children:o})=>{const a=i({...r,css:s}).slots;return f.jsxs("div",{className:a.base(),children:[f.jsx(o6,{position:"top-right"}),f.jsxs("div",{className:a.header(),children:[f.jsx("div",{children:t}),f.jsx("div",{className:"grow",children:e}),f.jsx("div",{className:"flex flex-row gap-2 items-center",children:n})]}),f.jsx("div",{className:a.content(),children:o??f.jsx(xo,{})})]})},lZ=En({slot:{base:["flex","flex-row","gap-2","items-center","justify-between","text-blue-500","rounded-sm","px-1","py-0.5","hover:text-blue-700","focus:outline-hidden","w-fit"]},variant:{},defaults:{}}),uZ=H.forwardRef(({icon:t,iconProps:e,variant:n,tva:r=lZ,css:i,children:s,...o},a)=>{const u=r({...n,css:i}).slots;return f.jsxs("a",{...o,ref:a,className:u.base(),children:[t&&f.jsx(on,{icon:t,...e}),s]})}),cZ=J3(uZ),qt=t=>f.jsx(cZ,{preload:"intent",...t}),dZ=En({slot:{base:["fixed","inset-0","h-full","items-center","justify-center","bg-slate-100","flex","transition-all","duration-200","z-10","pointer-events-none","bg-opacity-0","backdrop-blur-none"]},variant:{show:{true:["bg-opacity-50","backdrop-blur-xs","pointer-events-auto"]}},defaults:{show:!0}}),fZ=({show:t=!0,variant:e,tva:n=dZ,css:r})=>{const i=n({show:t,...e,css:r}).slots;return t?f.jsx("div",{className:i.base(),children:f.jsx(on,{icon:"icon-[svg-spinners--pulse-rings-multiple]",variant:{size:"8xl"},css:{base:["text-sky-400"]}})}):null};var nb={exports:{}},pZ=nb.exports,DO;function hZ(){return DO||(DO=1,function(t,e){(function(n,r){t.exports=r()})(pZ,()=>(()=>{var n={d:(_,S)=>{for(var I in S)n.o(S,I)&&!n.o(_,I)&&Object.defineProperty(_,I,{enumerable:!0,get:S[I]})},o:(_,S)=>Object.prototype.hasOwnProperty.call(_,S)},r={};n.d(r,{default:()=>x});const i=(..._)=>{},s=_=>_!==null&&_?.constructor.name==="Object";let o,a;const u=()=>{if(!o){o=!0;try{a=h.storage||localStorage,a.getItem("")}catch{a=(()=>{const _={getItem:I=>S[I]||null,setItem:(I,C)=>{S[I]=C},removeItem:I=>{S[I]=void 0},clear:()=>{S={__proto__:_}}};let S={__proto__:_};return S})()}y()}},d="\0",p=(_,S,I=!0)=>I?[...JSON.stringify(_)].map(C=>String.fromCharCode(C.charCodeAt(0)+S)).join(""):JSON.parse([..._].map(C=>String.fromCharCode(C.charCodeAt(0)-S)).join("")),h={ttl:null,encrypt:!1,encrypter:p,decrypter:(_,S)=>p(_,S,!1),secret:75,storage:void 0};Object.seal(h);const y=(_=!1)=>{u();for(const S of Object.keys(a)){const I=a.getItem(S);let C;try{C=JSON.parse(I||"")}catch{continue}s(C)&&d in C&&(Date.now()>C.ttl||_)&&a.removeItem(S)}},x={config:h,set:(_,S,I={})=>{u();const C={...h,...I,encrypt:I.encrypt!==!1&&(I.encrypt||h.encrypt),ttl:I.ttl===null?null:I.ttl||h.ttl};try{const k=C.ttl&&!isNaN(C.ttl)&&C.ttl>0;let R=k?{[d]:S,ttl:Date.now()+1e3*C.ttl}:S;C.encrypt&&(k?R[d]=(C.encrypter||i)(R[d],C.secret):R=(C.encrypter||i)(R,C.secret)),a.setItem(_,JSON.stringify(R))}catch{return!1}},get:(_,S={})=>{u();const I=a.getItem(_),C={...h,...S,encrypt:S.encrypt!==!1&&(S.encrypt||h.encrypt),ttl:S.ttl===null?null:S.ttl||h.ttl};let k,R;try{k=JSON.parse(I||""),R=s(k)&&d in k,(C.decrypt||C.encrypt)&&(R?k[d]=(C.decrypter||i)(k[d],C.secret):k=(C.decrypter||i)(k,C.secret))}catch{}return R?Date.now()>k.ttl?(a.removeItem(_),null):k[d]:k!==void 0?k:I},flush:y,clear:()=>{u(),a.clear()},remove:_=>{u(),a.removeItem(_)}};return r.default})())}(nb)),nb.exports}var mZ=hZ();const gZ=vo(mZ),Cf=gZ,yZ=En({slot:{base:["flex","flex-row","gap-2","items-center"]},variant:{},defaults:{}}),Cc=({variant:t,tva:e=yZ,css:n,children:r})=>{const i=e({...t,css:n}).slots;return f.jsx("div",{className:i.base(),children:r})},V2=En({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-1","border","border-b-2","border-transparent","hover:text-slate-500"]},variant:{active:{true:[]},inner:{true:[]},subtle:{true:[]}},match:[{if:{active:!0,inner:!1},then:{base:["border","border-b-2","border-blue-400","bg-blue-50","hover:border-blue-500","text-slate-800","hover:text-blue-800"]}},{if:{active:!0,inner:!0},then:{base:["border-none","text-blue-600","hover:text-blue-800"]}},{if:{subtle:!0},then:{base:["hover:bg-slate-50","hover:border-slate-300","hover:text-slate-600"]}},{if:{active:!0,subtle:!0},then:{base:["bg-slate-100","border-slate-400"]}}],defaults:{active:!1,inner:!1,subtle:!1}}),bZ=H.forwardRef(({icon:t=null,variant:e,tva:n=V2,css:r,children:i,...s},o)=>{const a=n({...e,css:r}).slots;return f.jsxs("a",{...s,className:a.base(),ref:o,children:[Jv(t)?f.jsx(on,{icon:t}):t,i]})}),vZ=J3(bZ),ir=({match:t=[],variant:e,tva:n=V2,css:r,...i})=>{const s=lW(),o=t.some(a=>!!s(a));return f.jsx(vZ,{preload:"intent",variant:{active:!!s({to:i.to,params:i.params})||o,...e},tva:n,css:r,...i})},xZ=En({slot:{base:["flex","flex-row","flex-wrap","items-center","gap-2","text-sm","font-semibold"],item:["border","border-blue-200","bg-blue-50","rounded-md","px-2","py-1"]},variant:{},defaults:{}}),fu=({textTitle:t,textEmpty:e,items:n,render:r,limit:i,variant:s,tva:o=xZ,css:a})=>{const u=i?n.slice(0,i):n,d=o({...s,css:a}).slots;return f.jsxs("div",{className:d.base(),children:[n.length?null:e,u.map(p=>f.jsx(r,{entity:p},`items-${p.id}`)),i&&n.length>i&&f.jsx(kf,{textTitle:t,target:f.jsx(Pm,{iconEnabled:b2}),outside:!0,children:f.jsx("div",{className:"flex flex-col gap-2",children:n.map(p=>f.jsx(r,{entity:p},`items-${p.id}`))})})]})},wZ=En({slot:{base:[]},variant:{},defaults:{}}),Y=({label:t,fallback:e,variant:n,tva:r=wZ,css:i})=>{const s=r({...n,css:i}).slots;return f.jsx("div",{className:s.base(),children:pa.rich(t,e)})},H2=En({slot:{base:["flex","flex-col","gap-2"],input:["py-2","px-2","flex","flex-row","gap-2","items-center","cursor-pointer","hover:bg-slate-50","border","border-gray-300","rounded-md","text-slate-400","hover:text-slate-700","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],content:[],footer:["flex","items-center","justify-between","gap-2","border-t-2","border-slate-100","mt-4","pt-2"]},variant:{loading:{true:[]},selected:{true:[]}},match:[{if:{loading:!0},then:{input:["text-slate-300"]}},{if:{selected:!0},then:{input:["bg-slate-50","text-slate-700","hover:bg-slate-100","hover:text-slate-800"]}}],defaults:{loading:!1,selected:!1}}),_Z=En({use:H2,slot:{},variant:{},defaults:{}}),G2=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:a,query:u,value:d,onChange:p,variant:h,tva:y=_Z,css:x})=>{const _=y({...h,css:x}).slots,[S,I]=H.useState(0),[C,k]=H.useState(15),[R,j]=H.useState(d||[]),[A,F]=H.useState(void 0),$=Ib({queryKey:[a,"PopupMultiSelect","data",{fulltext:A,page:S,size:C}],async queryFn(){return u({filter:{fulltext:A},cursor:{page:S,size:C}})}}),P=Ib({queryKey:[a,"PopupMultiSelect","selected",{value:d}],async queryFn(){return u({filter:{idIn:d}})},enabled:!!d});return f.jsx(kf,{icon:t,target:f.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data.length}),children:[f.jsx(on,{icon:P.data?.data?.length?yx:gx}),P.data&&P.data.data.length?f.jsx(s,{entities:P.data.data}):n||f.jsx(Y,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:$.isLoading},disabled:$.isLoading,...r,children:f.jsxs("div",{className:_.base(),children:[f.jsx("div",{className:_.content(),children:f.jsx(i,{cursor:{cursor:{page:S,size:C},count:$.data?.count?$.data.count:{filter:-1,total:-1,where:-1},textTotal:f.jsx(Y,{label:"Total count of items (label)"}),onPage(q){I(q)},onSize(q){k(q),I(0)}},fulltext:{value:A,set(q){F(q),I(0)}},table:{data:$.data?.data??[],selection:{type:"multi",value:R,set(q){j(q)}}}})}),f.jsx(px.Consumer,{children:q=>f.jsxs("div",{className:_.footer(),children:[f.jsx(vn,{iconEnabled:yo,iconDisabled:yo,onClick:()=>{q?.close()},variant:{variant:"subtle"},children:f.jsx(Y,{label:"Close (label)"})}),f.jsx(vn,{iconEnabled:cv,iconDisabled:cv,disabled:!R.length&&!o,onClick:()=>{p(R),q?.close()},children:f.jsx(Y,{label:"Confirm selection (label)"})})]})})]})})},K2=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:a,query:u,value:d,onChange:p,variant:h,tva:y=H2,css:x})=>{const _=y({...h,css:x}).slots,[S,I]=H.useState(0),[C,k]=H.useState(15),[R,j]=H.useState(d?[d]:[]),[A,F]=H.useState(void 0),$=Ib({queryKey:[a,"PopupSelect","data",{fulltext:A,page:S,size:C}],async queryFn(){return u({filter:{fulltext:A},cursor:{page:S,size:C}})}}),P=Ib({queryKey:[a,"PopupSelect","selected",{value:d}],async queryFn(){return u({filter:{id:d||void 0}})},enabled:!!d});return f.jsx(kf,{icon:t,target:f.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data?.length}),children:[f.jsx(on,{icon:P.data?.data?.[0]?yx:gx}),P.data?.data?.[0]?f.jsx(s,{entity:P.data?.data?.[0]}):n||f.jsx(Y,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:$.isLoading},disabled:$.isLoading,...r,children:f.jsxs("div",{className:_.base(),children:[f.jsx("div",{className:_.content(),children:f.jsx(i,{cursor:{cursor:{page:S,size:C},count:$.data?.count?$.data.count:{filter:-1,total:-1,where:-1},textTotal:f.jsx(Y,{label:"Total count of items (label)"}),onPage(q){I(q)},onSize(q){k(q),I(0)}},fulltext:{value:A,set(q){F(q),I(0)}},table:{data:$.data?.data??[],selection:{type:"single",value:R,set(q){j(q)}}}})}),f.jsx(px.Consumer,{children:q=>f.jsxs("div",{className:_.footer(),children:[f.jsx(vn,{iconEnabled:yo,iconDisabled:yo,onClick:()=>{q?.close()},variant:{variant:"subtle"},children:f.jsx(Y,{label:"Close (label)"})}),f.jsx(vn,{iconEnabled:cv,iconDisabled:cv,disabled:!R.length&&!o,onClick:()=>{p(R?.[0]),q?.close()},children:f.jsx(Y,{label:"Confirm selection (label)"})})]})})]})})},SZ=En({slot:{base:["bg-blue-50","p-2","rounded-md","border","border-blue-200"],container:["grid","grid-cols-2","grid-rows-2","gap-1"],title:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2"],links:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2","flex","flex-row","items-center","gap-4","justify-end"],actions:["col-span-1","row-span-1","flex","flex-row","items-center","gap-4"],extra:["col-span-1","row-span-1","flex","flex-row","gap-4","justify-end"]},variant:{},defaults:{}}),Tf=({entity:t,title:e=()=>null,links:n=()=>null,actions:r=()=>null,extra:i=()=>null,variant:s,tva:o=SZ,css:a})=>{const u=o({...s,css:a}).slots;return f.jsx(GN.Provider,{value:{inline:!0},children:f.jsx("div",{className:u.base(),children:f.jsxs("div",{className:u.container(),children:[f.jsx("div",{className:u.title(),children:f.jsx(e,{entity:t})}),f.jsx("div",{className:u.links(),children:f.jsx(n,{entity:t})}),f.jsx("div",{className:u.actions(),children:f.jsx(r,{entity:t})}),f.jsx("div",{className:u.extra(),children:f.jsx(i,{entity:t})})]})})})},EZ=En({slot:{base:["w-full","bg-slate-200","rounded-sm","transition-all"],progress:["h-full","bg-blue-400","rounded-sm","leading-none","transition-all"]},variant:{size:{xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-4"}},defaults:{size:"md"}}),Rf=({value:t,variant:e,tva:n=EZ,css:r})=>{const i=n({...e,css:r}).slots;return f.jsx("div",{className:i.base(),children:f.jsx("div",{style:{width:`${t}%`},className:i.progress()})})},IZ=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,page:e}})})},NZ=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,size:e,page:0}})})},Dr=t=>({onPage:IZ(t),onSize:NZ(t)}),Lr=t=>e=>t({search:({cursor:n,...r})=>({...r,filter:e,cursor:{...n,page:0}})}),Mr=t=>e=>{t({search:({cursor:n,filter:r,...i})=>({...i,filter:{...r,fulltext:e},cursor:{...n,page:e?0:n.page}}),replace:!!e})},Es=t=>e=>{t({search(n){return{...n,selection:e}}})},ii=t=>({loading:f.jsx(Y,{label:`${t} - Loading (label)`}),success:f.jsx(Y,{label:`${t} - Success (label)`}),error:f.jsx(Y,{label:`${t} - Error (label)`})}),kZ=En({slot:{base:["flex","flex-col","gap-4"],content:["text-bold","text-red-500","font-bold"],footer:["flex","flex-row","items-center","justify-between","gap-4"]},variant:{},defaults:{}}),Is=({textContent:t,textToast:e,callback:n,onCancel:r,invalidator:i,variant:s,tva:o=kZ,css:a})=>{const u=o({...s,css:a}).slots,d=H.useContext(px),p=Xt({async mutationFn(){return a6.promise(n(),ii(e))},async onSuccess(){await i?.(),d?.close()}});return f.jsxs("div",{className:u.base(),children:[f.jsx("div",{className:u.content(),children:t}),f.jsxs("div",{className:u.footer(),children:[f.jsx(vn,{variant:{variant:"subtle",size:"sm"},iconEnabled:yo,onClick:()=>{d?.close(),r?.()},children:f.jsx(Y,{label:"Cancel (button)"})}),f.jsx(vn,{variant:{variant:"danger",size:"md"},iconEnabled:si,onClick:()=>{p.mutate()},children:f.jsx(Y,{label:"Delete (button)"})})]})]})},CZ=async({select:t,query:e=()=>t,filter:n,where:r})=>({total:(await t.clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,filter:(await e({select:e({select:t,where:r}),where:n}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,where:(await e({select:t,where:r}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count}),xa=async({select:t,query:e=()=>t,output:n,filter:r,where:i})=>n.parse(await e({select:e({select:t,where:i}),where:r}).executeTakeFirstOrThrow()),qr=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>{const o=a=>{let u=a;return s&&(u=a.limit(s.size).offset(s.page*s.size)),u};return M.array(n).parse(await o(e({select:e({select:t,where:i}),where:r})).execute())},cr=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>({data:await qr({select:t,output:n,where:i,filter:r,query:e,cursor:s}),count:await CZ({select:t,where:i,filter:r,query:e})}),yr=t=>{const e="input"in t?t.input:"input",n="output"in t?t.output:"output",r="schema"in t?t.schema._input:t._input,i="schema"in t?t.schema._output:t._output;return{types:{input:e==="output"?i:r,output:n==="input"?r:i},parse:s=>"schema"in t?t.schema.parse(s):t.parse(s)}},gy=(t,e)=>M.custom().pipe(t.catch(e)),$r=({filter:t},{size:e=30}={size:30})=>M.object({filter:gy(t.optional(),void 0),cursor:gy(n9,{page:0,size:e}).default({page:0,size:e}),sort:gy(M.any().optional(),[]).default([]),selection:gy(M.array(M.string()),[]).default([])}),TZ=En({slot:{base:["w-full","flex","flex-col","items-center","justify-center"],title:["text-xl","text-bold"],message:["text-base","text-slate-500"],body:["pt-2"]},variant:{},defaults:{}}),Q2=({textTitle:t,textMessage:e,icon:n,iconProps:r,variant:i,tva:s=TZ,css:o,children:a})=>{const u=s({...i,css:o}).slots;return f.jsxs("div",{className:u.base(),children:[n?f.jsx(on,{icon:n,variant:{size:"6xl"},css:{base:["text-slate-500","opacity-50"]},...r}):null,f.jsx("div",{className:u.title(),children:t}),f.jsx("div",{className:u.message(),children:e}),f.jsx("div",{className:u.body(),children:a})]})},XN=En({slot:{base:["min-w-full","flex","flex-col","gap-2","text-sm"],table:["min-w-full","w-max","table-fixed"],thead:["border","border-slate-200","bg-slate-100"],th:["text-left","px-2","py-1","border-t","border-b","border-slate-300"],tbody:[],tr:["border-b","border-b-slate-200","odd:bg-slate-50","hover:bg-purple-100","hover:border-purple-300"],td:["px-2","py-1"],tfoot:[],select:["cursor-pointer","text-slate-400","hover:text-slate-600"]},variant:{selected:{true:[]}},match:[{if:{selected:!0},then:{tr:["bg-blue-100","odd:bg-blue-50","border-blue-300"],select:["text-slate-600"]}}],defaults:{selected:!1}}),RZ=({table:t,cell:{column:e,data:n,value:r},variant:i,tva:s=XN,css:o})=>{const a=e.def.render,u=s({...i,css:o}).slots;return f.jsx("td",{className:u.td(),children:f.jsxs("div",{className:"group flex flex-row items-center gap-2 justify-between",children:[f.jsx(a,{table:t,data:n,value:r,context:t.context}),e.filter&&!e.filter.is()?f.jsx(on,{icon:nJ,css:{base:["group-hover:visible","invisible","opacity-50 hover:opacity-100","cursor-pointer"]},variant:{size:"xl"},onClick:()=>{e.filter&&(e.def.filter?.onFilter({data:n,filter:e.filter}),window.scrollTo({top:0,behavior:"smooth"}))}}):null]})})},jZ=({table:t,row:e,action:n,variant:r,tva:i=XN,css:s})=>{const o=i({...r,css:s}).slots,a=n?.table,u=n?.row;return f.jsxs("tr",{className:o.tr({selected:t.selection.isSelected(e)}),children:[a||u||t.selection.enabled?f.jsx("td",{className:"w-0",children:f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?f.jsx(on,{icon:t.selection.isSelected(e)?yx:gx,css:{base:o.select({selected:t.selection.isSelected(e)})},onClick:t.selection.withRowHandler(e)}):null,u?f.jsx(u,{table:t,data:e.data}):null]})}):null,e.cells.map(d=>f.jsx(RZ,{table:t,cell:d,variant:r,tva:i,css:s},`${e.id}-${d.column.id}`)),f.jsx("td",{})]})},Br=({table:t,fulltext:e,cursor:n,empty:r=()=>f.jsx(Q2,{icon:tJ,textTitle:f.jsx(Y,{label:"Nothing here"}),textMessage:f.jsx(Y,{label:"There is nothing to see right now."})}),action:i,variant:s,tva:o=XN,css:a})=>{const u=o({...s,css:a}).slots,d=i?.table,p=i?.row;return f.jsxs("div",{className:u.base(),children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center gap-6 w-1/3",children:e?f.jsx(k2,{value:e.value,onFulltext:e.set}):null}),f.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[f.jsx(mO,{...n}),t.filter.is()&&f.jsx(Pm,{iconEnabled:wO,css:{base:["text-amber-500"]},onClick:()=>t.filter.reset()})]})]}),f.jsx("div",{className:"relative overflow-x-auto",children:f.jsxs("table",{className:u.table(),children:[f.jsx("thead",{className:u.thead(),children:f.jsxs("tr",{children:[d||p||t.selection.enabled?f.jsx("th",{className:"w-0",children:f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?f.jsx(on,{icon:t.selection.isAll()?yx:t.selection.isAny()?iJ:gx,variant:{disabled:t.selection.isSingle},css:{base:u.select({selected:t.selection.isAny()})},onClick:t.selection.withAllHandler()}):null,d?f.jsx(d,{table:t}):null]})}):null,t.visible.map(h=>{const y=h.def.header||(()=>null);return f.jsx("th",{className:u.th(),style:h.def.size?{width:`${h.def.size}rem`}:void 0,children:f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx(y,{table:t}),f.jsx("div",{className:"flex flex-row items-center gap-2",children:h.filter?.is()&&f.jsx(on,{icon:wO,variant:{size:"md"},css:{base:["opacity-50","hover:opacity-100","cursor-pointer"]},onClick:()=>{h.filter?.reset()}})})]})},h.id)}),f.jsx("th",{})]})}),t.isEmpty?null:f.jsx("tbody",{className:u.tbody(),children:t.rows?.map(h=>f.jsx(jZ,{row:h,table:t,action:i,variant:s,tva:o,css:a},h.id))})]})}),t.isEmpty?f.jsx(r,{}):null,f.jsxs("div",{className:"flex flex-row items-center justify-end gap-2",children:[f.jsx("div",{}),f.jsx(mO,{...n})]})]})},yi=[];for(let t=0;t<256;++t)yi.push((t+256).toString(16).slice(1));function OZ(t,e=0){return(yi[t[e+0]]+yi[t[e+1]]+yi[t[e+2]]+yi[t[e+3]]+"-"+yi[t[e+4]]+yi[t[e+5]]+"-"+yi[t[e+6]]+yi[t[e+7]]+"-"+yi[t[e+8]]+yi[t[e+9]]+"-"+yi[t[e+10]]+yi[t[e+11]]+yi[t[e+12]]+yi[t[e+13]]+yi[t[e+14]]+yi[t[e+15]]).toLowerCase()}let Z0;const qZ=new Uint8Array(16);function AZ(){if(!Z0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Z0=crypto.getRandomValues.bind(crypto)}return Z0(qZ)}const PZ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),LO={randomUUID:PZ};function MO(t,e,n){if(LO.randomUUID&&!t)return LO.randomUUID();t=t||{};const r=t.random??t.rng?.()??AZ();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,OZ(r)}const zr=({columns:t,order:e=t.map(u=>u.name),hidden:n=[],visible:r=t.map(u=>u.name),data:i,filter:s,selection:o,context:a})=>{const u={...s?.value||{}},d=$j(u),p=new Set(o?.value),h=t.map(x=>({id:MO(),def:x,filter:x.filter?{is(){return x.filter?d.get(x.filter.path)!==void 0:!1},reset(){x.filter&&d.set(x.filter.path,void 0),s?.set({...u})},shallow(_,S){x.filter&&d.set(_,S),s?.set({...u})},set(_){s?.set({..._})}}:void 0})),y=h.filter(x=>r.includes(x.def.name)&&!n.includes(x.def.name)).sort((x,_)=>{const S=e.indexOf(x.def.name),I=e.indexOf(_.def.name);return(S===-1?1/0:S)-(I===-1?1/0:I)});return{columns:h,visible:y,rows:i?.map(x=>({id:MO(),data:x,cells:y.map(_=>({column:_,data:x,value:$j(x).get(_.def.name)}))})),isEmpty:i.length===0,filter:{is(){return h.some(x=>x.filter?.is())},reset(){s?.set({})},set(x){s?.set({...x})},shallow(x,_){d.set(x,_)}},selection:{enabled:!!o&&i.length>0,selection:Array.from(p),isSingle:o?.type==="single",isMulti:o?.type==="multi",isSelected({data:x}){return p.has(x.id)||!1},isAll(){return i.every(x=>p.has(x.id))},isAny(){return i.some(x=>p.has(x.id))},withRowHandler({data:x}){return()=>{if(o?.type==="single"){const _=p.has(x.id);p.clear(),_?p.delete(x.id):p.add(x.id)}else p.has(x.id)?p.delete(x.id):p.add(x.id);o?.set(Array.from(p))}},withAllHandler(){return()=>{i.every(x=>p.has(x.id))?p.clear():i.forEach(({id:x})=>p.add(x)),o?.set(Array.from(p))}}},context:a}},Wr=()=>t=>t,J2=({tags:t=[],render:e=({tag:i})=>i.label,onClick:n,textEmpty:r})=>{const i=t.filter(Boolean).sort((s,o)=>s.sort-o.sort);return f.jsx("div",{className:"flex flex-wrap flex-row gap-2 items-center",children:i.length?i.map(s=>f.jsx(_s,{onClick:()=>n?.(s),children:e({tag:s})},s.id)):r||f.jsx(Y,{label:"No tags (label)"})})},FZ=En({slot:{base:["flex","flex-row","gap-2","items-center"],title:["flex","flex-row","gap-2","items-center","text-lg","text-slate-500","font-bold"],subtitle:["flex","flex-row","gap-4","items-center","text-lg"]},variant:{withSubtitle:{true:[]}},match:[{if:{withSubtitle:!0},then:{title:["border-r","border-r-slate-300","pr-2"]}}],defaults:{withSubtitle:!1}}),jf=({icon:t,title:e,subtitle:n,variant:r,tva:i=FZ,css:s})=>{const o=i({withSubtitle:!!n,...r,css:s}).slots;return f.jsxs("div",{className:o.base(),children:[f.jsxs("div",{className:o.title(),children:[t?f.jsx(on,{icon:t}):null,e]}),n?f.jsx("div",{className:o.subtitle(),children:n}):null]})};var yy={},$O;function DZ(){if($O)return yy;$O=1;var t=Q3();return yy.createRoot=t.createRoot,yy.hydrateRoot=t.hydrateRoot,yy}var LZ=DZ();const MZ=vo(LZ),e1=Gz()({component:()=>f.jsxs(f.Fragment,{children:[f.jsx(mW,{}),f.jsx(xo,{})]})}),$Z="modulepreload",BZ=function(t){return"/"+t},BO={},zO=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(n.map(u=>{if(u=BZ(u),u in BO)return;BO[u]=!0;const d=u.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":$Z,d||(h.as="script"),h.crossOrigin="",h.href=u,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((y,x)=>{h.addEventListener("load",y),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},zZ=$t("/$locale")({component:xo,loader:async({params:{locale:t}})=>{try{pa.push((await WZ(`../translation/${t}.yaml`)).default)}catch(e){console.error(e)}}});function WZ(t){switch(t){case"../translation/cs":case"../translation/cs.yaml":return zO(()=>import("./cs-G1ZGa2bd.js"),[]);case"../translation/en":case"../translation/en.yaml":return zO(()=>import("./en-BwoPi40R.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const Z2="cs",UZ=[Z2,"en"],VZ=$t("/")({loader:async()=>{throw pm({to:"/$locale",params:{locale:nH({available:UZ,fallback:Z2})}})}}),HZ=$t("/$locale/")({component:()=>{const{locale:t}=nn({from:"/$locale"});return f.jsx("div",{className:"flex flex-col items-center justify-center h-screen w-screen",children:f.jsxs("div",{className:"rounded-sm bg-slate-50 p-4 shadow-md border border-slate-300",children:[f.jsx("h1",{className:"text-3xl text-center",children:"Apps"}),f.jsx("ul",{children:f.jsx("li",{children:f.jsx(qt,{icon:"icon-[bx--game]",to:"/$locale/apps/derivean/public/login",params:{locale:t},children:"DeRivean"})})})]})})}}),{kysely:Ct,bootstrap:GZ}=Q7({database:"derivean",async bootstrap({kysely:t}){const e="varchar(36)";try{await t.selectFrom("User").select(n=>n.fn.countAll().as("count")).executeTakeFirstOrThrow()}catch{await t.schema.createTable("User").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("login","varchar(128)",r=>r.notNull()).addColumn("password","varchar(256)",r=>r.notNull()).addUniqueConstraint("[User] login",["login"]).execute(),await t.schema.createTable("Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("code","varchar(64)",r=>r.notNull()).addColumn("label","varchar(128)",r=>r.notNull()).addColumn("group","varchar(64)").addColumn("sort","integer",r=>r.notNull().defaultTo(0)).addUniqueConstraint("Tag_code_group",["code","group"]).execute(),await t.schema.createTable("Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("transport","float4",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Resource] name",["name"]).execute(),await t.schema.createTable("Resource_Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("tagId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] tagId",["tagId"],"Tag",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Resource_Tag] resourceId-tagId",["resourceId","tagId"]).execute();for await(const r of["resourceId","tagId"])await t.schema.createIndex(`[Resource_Tag] ${r}`).on("Resource_Tag").columns([r]).execute();await t.schema.createTable("Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("limit","float4",r=>r.notNull()).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).execute(),await t.schema.createIndex("[Inventory] resourceId").on("Inventory").columns(["resourceId"]).execute(),await t.schema.createTable("Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(128)",r=>r.notNull()).addColumn("color","varchar(128)",r=>r.notNull().defaultTo("slate")).addColumn("minWidth","integer",r=>r.notNull()).addColumn("maxWidth","integer",r=>r.notNull()).addColumn("minHeight","integer",r=>r.notNull()).addColumn("maxHeight","integer",r=>r.notNull()).addColumn("probability","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull()).execute(),await t.schema.createTable("Region_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("minAmount","float4",r=>r.notNull()).addColumn("maxAmount","float4",r=>r.notNull()).addColumn("minLimit","float4",r=>r.notNull()).addColumn("maxLimit","float4",r=>r.notNull()).addUniqueConstraint("[Region_Inventory] regionId-resourceId",["regionId","resourceId"]).execute();for await(const r of["regionId","resourceId"])await t.schema.createIndex(`[Region_Inventory] ${r}`).on("Region_Inventory").columns([r]).execute();await t.schema.createTable("Map").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Map] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("name","varchar(128)",r=>r.notNull()).addUniqueConstraint("[Map] userId-name",["userId","name"]).execute(),await t.schema.createIndex("[Map] userId").on("Map").columns(["userId"]).execute(),await t.schema.createTable("Cycle").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("stamp","datetime",r=>r.defaultTo(_r`CURRENT_TIMESTAMP`).notNull()).execute();for await(const r of["userId","mapId"])await t.schema.createIndex(`[Cycle] ${r}`).on("Cycle").columns([r]).execute();await t.schema.createTable("Land").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","integer",r=>r.notNull()).addColumn("y","integer",r=>r.notNull()).addColumn("width","integer",r=>r.notNull()).addColumn("height","integer",r=>r.notNull()).execute();for await(const r of["mapId","regionId"])await t.schema.createIndex(`[Land] ${r}`).on("Land").columns([r]).execute();await t.schema.createTable("Land_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Land_Inventory] landId-inventoryId",["landId","inventoryId"]).execute();for await(const r of["landId","inventoryId"])await t.schema.createIndex(`[Land_Inventory] ${r}`).on("Land_Inventory").columns([r]).execute();await t.schema.createTable("Blueprint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).addColumn("sort","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Blueprint] name",["name"]).execute(),await t.schema.createTable("Blueprint_Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Region] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Region] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Region] blueprintId-regionId",["blueprintId","regionId"]).execute(),await t.schema.createTable("Blueprint_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Inventory] blueprintId-inventoryId",["blueprintId","inventoryId"]).execute(),await t.schema.createTable("Blueprint_Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).execute(),await t.schema.createTable("Blueprint_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Requirement] blueprintId-requirementId",["blueprintId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("dependencyId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] dependencyId",["dependencyId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Dependency] blueprintId-dependencyId",["blueprintId","dependencyId"]).execute(),await t.schema.createTable("Blueprint_Conflict").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("conflictId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] conflictId",["conflictId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Conflict] blueprintId-conflictId",["blueprintId","conflictId"]).execute(),await t.schema.createTable("Blueprint_Production_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Requirement] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Production_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-blueprintId",["blueprintProductionId","blueprintId"]).execute(),await t.schema.createTable("Blueprint_Production_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Construction").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Construction] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("plan","boolean",r=>r.notNull().defaultTo(!0)).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("constructionId",e).addForeignKeyConstraint("[Building] constructionId",["constructionId"],"Construction",["id"],r=>r.onDelete("set null").onUpdate("set null")).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("productionId",e).addForeignKeyConstraint("[Building] productionId",["productionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("recurringProductionId",e).addForeignKeyConstraint("[Building] recurringProductionId",["recurringProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","float4",r=>r.notNull().defaultTo(0)).addColumn("y","float4",r=>r.notNull().defaultTo(0)).addColumn("valid","boolean",r=>r.notNull().defaultTo(!0)).execute();for await(const r of["userId","blueprintId","constructionId","landId","productionId","recurringProductionId"])await t.schema.createIndex(`[Building] ${r}`).on("Building").columns([r]).execute();await t.schema.createTable("Building_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Inventory] buildingId-inventoryId",["buildingId","inventoryId"]).execute(),await t.schema.createTable("Waypoint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Waypoint] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Waypoint] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","float4",r=>r.notNull().defaultTo(0)).addColumn("y","float4",r=>r.notNull().defaultTo(0)).execute();for await(const r of["userId","mapId"])await t.schema.createIndex(`[Waypoint] ${r}`).on("Waypoint").columns([r]).execute();await t.schema.createTable("Building_Waypoint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Waypoint] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("waypointId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Waypoint] waypointId",["waypointId"],"Waypoint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Waypoint] buildingId-waypointId",["buildingId","waypointId"]).execute();for await(const r of["buildingId","waypointId"])await t.schema.createIndex(`[Building_Waypoint] ${r}`).on("Building_Waypoint").columns([r]).execute();await t.schema.createTable("Route").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("fromId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] fromId",["fromId"],"Waypoint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("toId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] toId",["toId"],"Waypoint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Route] fromId-toId",["fromId","toId"]).execute();for await(const r of["userId","fromId","toId"])await t.schema.createIndex(`[Route] ${r}`).on("Route").columns([r]).execute();await t.schema.createTable("Building_Route_Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Route_Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Route_Building] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Route_Building] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("linkId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Route_Building] linkId",["linkId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Route_Building] buildingId-linkId",["buildingId","linkId"]).execute();for await(const r of["userId","mapId","buildingId","linkId"])await t.schema.createIndex(`[Building_Route_Building] ${r}`).on("Building_Route_Building").columns([r]).execute();await t.schema.createTable("Supply").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Supply] buildingId-resourceId",["buildingId","resourceId"]).execute(),await t.schema.createTable("Demand").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Demand] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("supplierId",e).addForeignKeyConstraint("[Resource_Queue] supplierId",["supplierId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Demand] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("priority","integer",r=>r.notNull().defaultTo(0)).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).addUniqueConstraint("[Demand] buildingId-resourceId",["buildingId","resourceId"]).execute(),await t.schema.createTable("Transport").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("sourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] sourceId",["sourceId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("waypointId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] waypointId",["waypointId"],"Waypoint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("targetId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] targetId",["targetId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).execute();for await(const r of["userId","mapId","resourceId","sourceId","waypointId","targetId"])await t.schema.createIndex(`[Transport] ${r}`).on("Transport").columns([r]).execute()}}}),KZ=$t("/$locale/apps/derivean")({loader:GZ}),Y2="icon-[proicons--game]",QZ=En({slot:{base:["text-orange-500","font-bold","text-2xl","shadow-md","hover:shadow-lg","hover:text-orange-600","rounded-sm","px-2","py-1","bg-slate-100"]},variant:{},defaults:{}}),X2=({variant:t,tva:e=QZ,css:n})=>{const r=e({...t,css:n}).slots;return f.jsx("div",{className:r.base(),children:"DeRivean"})},bo="icon-[fluent--building-shop-20-regular]",hv="icon-[oui--vis-map-region]",Er="icon-[hugeicons--resources-add]",JZ=t=>{const{locale:e}=nn({from:"/$locale"});return f.jsxs(Cc,{...t,children:[f.jsx(ir,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},children:f.jsx(Y,{label:"Editor (menu)"})}),f.jsx(ir,{icon:bo,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/blueprint/$id/view"},{to:"/$locale/apps/derivean/root/blueprint/$id/dependencies"},{to:"/$locale/apps/derivean/root/blueprint/$id/production"},{to:"/$locale/apps/derivean/root/blueprint/$id/requirements"},{to:"/$locale/apps/derivean/root/blueprint/$id/edit"},{to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements"}],children:f.jsx(Y,{label:"Blueprint list (menu)"})}),f.jsx(ir,{icon:hv,to:"/$locale/apps/derivean/root/region/list",params:{locale:e},children:f.jsx(Y,{label:"Region list (menu)"})}),f.jsx(ir,{icon:Er,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:f.jsx(Y,{label:"Resource list (menu)"})}),f.jsx(ir,{icon:YN,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/user/$id/view"},{to:"/$locale/apps/derivean/root/user/$id/building/list"}],children:f.jsx(Y,{label:"User list (menu)"})}),f.jsx(ir,{icon:Zh,to:"/$locale/apps/derivean/root/tag/list",params:{locale:e},children:f.jsx(Y,{label:"Tag list (menu)"})})]})},Fm=M.object({id:M.string(),name:M.string(),login:M.string()}),ZZ=$t("/$locale/apps/derivean/root")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return Fm.parse(Cf.get("session"))}catch{throw pm({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{session:t}}){return{session:await t()}},component:()=>{const{locale:t}=nn({from:"/$locale"}),{session:e}=Di({from:"/$locale/apps/derivean/root"});return f.jsx(U2,{logo:f.jsx(qt,{to:"/$locale/apps/derivean/root",params:{locale:t},children:f.jsx(X2,{})}),menu:f.jsx(JZ,{}),actions:f.jsxs(f.Fragment,{children:[e.name,f.jsx(qt,{icon:Y2,to:"/$locale/apps/derivean/game",params:{locale:t}}),f.jsx(qt,{icon:ZN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]})})}}),YZ=$t("/$locale/apps/derivean/map")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return Fm.parse(Cf.get("session"))}catch{throw pm({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}}}),XZ=$t("/$locale/apps/derivean/game")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return Fm.parse(Cf.get("session"))}catch{throw pm({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{session:r,cycle:await t.ensureQueryData({queryKey:["Cycle"],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{locale:t}=nn({from:"/$locale"}),{session:e}=Di({from:"/$locale/apps/derivean/game"}),n=sz({filters:{status:"pending",mutationKey:["useCycleMutation"]},select(r){return r.state.status}});return f.jsx(U2,{logo:f.jsx(qt,{to:"/$locale/apps/derivean/game",params:{locale:t},children:f.jsx(X2,{})}),actions:f.jsxs(f.Fragment,{children:[e.name,f.jsx(qt,{icon:"icon-[clarity--crown-line]",to:"/$locale/apps/derivean/root",params:{locale:t}}),f.jsx(qt,{icon:ZN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]}),css:{base:n.length?["select-none","pointer-events-none","opacity-50"]:void 0},children:f.jsx(xo,{})})}});var rb={exports:{}},eY=rb.exports,WO;function tY(){return WO||(WO=1,function(t,e){(function(n,r){r()})(eY,function(){function n(d,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function r(d,p,h){var y=new XMLHttpRequest;y.open("GET",d),y.responseType="blob",y.onload=function(){u(y.response,p,h)},y.onerror=function(){console.error("could not download file")},y.send()}function i(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function s(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Yu=="object"&&Yu.global===Yu?Yu:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(d,p,h){var y=o.URL||o.webkitURL,x=document.createElement("a");p=p||d.name||"download",x.download=p,x.rel="noopener",typeof d=="string"?(x.href=d,x.origin===location.origin?s(x):i(x.href)?r(d,p,h):s(x,x.target="_blank")):(x.href=y.createObjectURL(d),setTimeout(function(){y.revokeObjectURL(x.href)},4e4),setTimeout(function(){s(x)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,h){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,h),p);else if(i(d))r(d,p,h);else{var y=document.createElement("a");y.href=d,y.target="_blank",setTimeout(function(){s(y)})}}:function(d,p,h,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof d=="string")return r(d,p,h);var x=d.type==="application/octet-stream",_=/constructor/i.test(o.HTMLElement)||o.safari,S=/CriOS\/[\d]+/.test(navigator.userAgent);if((S||x&&_||a)&&typeof FileReader<"u"){var I=new FileReader;I.onloadend=function(){var R=I.result;R=S?R:R.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=R:location=R,y=null},I.readAsDataURL(d)}else{var C=o.URL||o.webkitURL,k=C.createObjectURL(d);y?y.location=k:location.href=k,y=null,setTimeout(function(){C.revokeObjectURL(k)},4e4)}});o.saveAs=u.saveAs=u,t.exports=u})}(rb)),rb.exports}var nY=tY();const rY=vo(nY),Y0=["Tag","Resource","Resource_Tag","Blueprint","Inventory","Region","Region_Inventory","Blueprint_Inventory","Blueprint_Region","Blueprint_Dependency","Blueprint_Conflict","Blueprint_Requirement","Blueprint_Production","Blueprint_Production_Requirement","Blueprint_Production_Dependency","Blueprint_Production_Resource"],iY=$t("/$locale/apps/derivean/root/")({component(){const t=Xt({mutationKey:["export"],async mutationFn(){return An.promise((async()=>{const e=[];await Ct.transaction().execute(async n=>{for await(const r of Y0)e.push({source:r,entities:await n.selectFrom(r).selectAll().execute()})}),rY.saveAs(new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"}),"export.json")})(),ii("Export game files"))}});return f.jsxs("div",{className:"flex flex-col gap-4 w-2/3 mx-auto",children:[f.jsx(oZ,{onDrop:async e=>{const[n]=e;if(!n)return;const r=JSON.parse(await n.text());await _r`PRAGMA foreign_keys = OFF`.execute(Ct),await An.promise(Ct.transaction().execute(async i=>{for await(const{source:s}of r){const o=Y0.find(a=>a===s);o&&await i.deleteFrom(o).execute()}for await(const{source:s,entities:o}of r){const a=Y0.find(u=>u===s);if(a)for await(const u of Object.values(o))await i.insertInto(a).values(u).execute()}await _r`
                                    DELETE FROM Inventory
                                    WHERE NOT EXISTS (
                                        SELECT 1 FROM Blueprint_Inventory 
                                        WHERE Blueprint_Inventory.inventoryId = Inventory.id
                                    )
                                `.execute(i)}),ii("Import game files")),await _r`PRAGMA foreign_keys = ON`.execute(Ct)}}),f.jsx("div",{className:"flex items-center justify-center mt-10 gap-4",children:f.jsx(vn,{iconEnabled:Y2,loading:t.isPending,onClick:()=>t.mutate(),variant:{variant:"subtle"},children:f.jsx(Y,{label:"Export game files (label)"})})}),f.jsx("h2",{children:"TODO"}),f.jsxs("ul",{className:"flex flex-col gap-2",children:[f.jsxs("li",{children:[f.jsx("p",{children:"New transportation: each waypoint should have it's inventory."}),f.jsx("p",{children:"Compile Transportation list (waypoints); this will require shortest path (we got it!)"})]}),f.jsx("li",{children:"Add notification center like inventory is full, production is full and so on."}),f.jsx("li",{children:'Upgrades: Put everything into the building, drive upgrades by passive "Research" points'}),f.jsx("li",{children:"Bundle default gameplay as exported json (put into public); add button to root to load default/selected gameplay; idea is a few buttons: Settler like, Fantasy, AoE and so on."}),f.jsx("li",{children:"Define game ending rules: amount of resources in (individual resourece per required cycle), required building in a cycle. When a player fail, game end with the ability to reset. Each game rule may have an ending message to show."}),f.jsx("li",{children:"Define winning rules: amount of resources / building built in specific cycle. When rules are not met, it's like a fail."}),f.jsx("li",{children:"Add something like world available resources + the ability to drain and add resources to the world. Something like Wolrd_Inventory where 0 means unlimited resources."}),f.jsx("li",{children:"World renewal resources: a list of resources with cycles and amount when they got renewed (world_renewal_queue)."}),f.jsx("li",{children:"Defines seasons: list of cyclic seasons with their length; resource production may be bound to specific season(s)."}),f.jsx("li",{children:"Add maintenance cost for a building: when a cycle ends, cost is deducted from the inventory. If there is not enough resources, building will be marked as offline (closed for production)."}),f.jsx("li",{children:"Dispaly resources per season (some resources will be available only in specific season)"}),f.jsx("li",{children:"Add resource probability drop: some resources may have not be produces (like a crop). This should be thinked out."})]})]})}});var Dm=t=>t.type==="checkbox",ic=t=>t instanceof Date,Qi=t=>t==null;const eL=t=>typeof t=="object";var Gr=t=>!Qi(t)&&!Array.isArray(t)&&eL(t)&&!ic(t),tL=t=>Gr(t)&&t.target?Dm(t.target)?t.target.checked:t.target.value:t,sY=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,nL=(t,e)=>t.has(sY(e)),oY=t=>{const e=t.constructor&&t.constructor.prototype;return Gr(e)&&e.hasOwnProperty("isPrototypeOf")},t1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ms(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(t1&&(t instanceof Blob||r))&&(n||Gr(t)))if(e=n?[]:{},!n&&!oY(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=ms(t[i]));else return t;return e}var vx=t=>Array.isArray(t)?t.filter(Boolean):[],Vr=t=>t===void 0,It=(t,e,n)=>{if(!e||!Gr(t))return n;const r=vx(e.split(/[,[\].]+?/)).reduce((i,s)=>Qi(i)?i:i[s],t);return Vr(r)||r===t?Vr(t[e])?n:t[e]:r},co=t=>typeof t=="boolean",n1=t=>/^\w*$/.test(t),rL=t=>vx(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Hn=(t,e,n)=>{let r=-1;const i=n1(e)?[e]:rL(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let u=n;if(r!==o){const d=t[a];u=Gr(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=u,t=t[a]}return t};const mv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Do={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ma={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},aY=Un.createContext(null),r1=()=>Un.useContext(aY);var iL=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Do.all&&(e._proxyFormState[o]=!r||Do.all),n&&(n[o]=!0),t[o]}});return i},gs=t=>Gr(t)&&!Object.keys(t).length,sL=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return gs(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Do.all))},xh=t=>Array.isArray(t)?t:[t],oL=(t,e,n)=>!t||!e||t===e||xh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function i1(t){const e=Un.useRef(t);e.current=t,Un.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function lY(t){const e=r1(),{control:n=e.control,disabled:r,name:i,exact:s}=t,[o,a]=Un.useState(n._formState),u=Un.useRef(!0),d=Un.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=Un.useRef(i);return p.current=i,i1({disabled:r,next:h=>u.current&&oL(p.current,h.name,s)&&sL(h,d.current,n._updateFormState)&&a({...n._formState,...h}),subject:n._subjects.state}),Un.useEffect(()=>(u.current=!0,d.current.isValid&&n._updateValid(!0),()=>{u.current=!1}),[n]),Un.useMemo(()=>iL(o,n,d.current,!1),[o,n])}var la=t=>typeof t=="string",aL=(t,e,n,r,i)=>la(t)?(r&&e.watch.add(t),It(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),It(n,s))):(r&&(e.watchAll=!0),n);function uY(t){const e=r1(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t,a=Un.useRef(r);a.current=r,i1({disabled:s,subject:n._subjects.values,next:p=>{oL(a.current,p.name,o)&&d(ms(aL(a.current,n._names,p.values||n._formValues,!1,i)))}});const[u,d]=Un.useState(n._getWatch(r,i));return Un.useEffect(()=>n._removeUnmounted()),u}function cY(t){const e=r1(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=nL(i._names.array,n),a=uY({control:i,name:n,defaultValue:It(i._formValues,n,It(i._defaultValues,n,t.defaultValue)),exact:!0}),u=lY({control:i,name:n,exact:!0}),d=Un.useRef(i.register(n,{...t.rules,value:a,...co(t.disabled)?{disabled:t.disabled}:{}})),p=Un.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!It(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!It(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!It(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!It(u.validatingFields,n)},error:{enumerable:!0,get:()=>It(u.errors,n)}}),[u,n]),h=Un.useMemo(()=>({name:n,value:a,...co(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:y=>d.current.onChange({target:{value:tL(y),name:n},type:mv.CHANGE}),onBlur:()=>d.current.onBlur({target:{value:It(i._formValues,n),name:n},type:mv.BLUR}),ref:y=>{const x=It(i._fields,n);x&&y&&(x._f.ref={focus:()=>y.focus(),select:()=>y.select(),setCustomValidity:_=>y.setCustomValidity(_),reportValidity:()=>y.reportValidity()})}}),[n,i._formValues,r,u.disabled,a,i._fields]);return Un.useEffect(()=>{const y=i._options.shouldUnregister||s,x=(_,S)=>{const I=It(i._fields,_);I&&I._f&&(I._f.mount=S)};if(x(n,!0),y){const _=ms(It(i._options.defaultValues,n));Hn(i._defaultValues,n,_),Vr(It(i._formValues,n))&&Hn(i._formValues,n,_)}return!o&&i.register(n),()=>{(o?y&&!i._state.action:y)?i.unregister(n):x(n,!1)}},[n,i,o,s]),Un.useEffect(()=>{i._updateDisabledField({disabled:r,fields:i._fields,name:n})},[r,n,i]),Un.useMemo(()=>({field:h,formState:u,fieldState:p}),[h,u,p])}const Mi=t=>t.render(cY(t));var lL=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},UO=t=>({isOnSubmit:!t||t===Do.onSubmit,isOnBlur:t===Do.onBlur,isOnChange:t===Do.onChange,isOnAll:t===Do.all,isOnTouch:t===Do.onTouched}),VO=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const wh=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=It(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(wh(a,e))break}else if(Gr(a)&&wh(a,e))break}}};var dY=(t,e,n)=>{const r=xh(It(t,n));return Hn(r,"root",e[n]),Hn(t,n,r),t},s1=t=>t.type==="file",oa=t=>typeof t=="function",gv=t=>{if(!t1)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},ib=t=>la(t),o1=t=>t.type==="radio",yv=t=>t instanceof RegExp;const HO={value:!1,isValid:!1},GO={value:!0,isValid:!0};var uL=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Vr(t[0].attributes.value)?Vr(t[0].value)||t[0].value===""?GO:{value:t[0].value,isValid:!0}:GO:HO}return HO};const KO={isValid:!1,value:null};var cL=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,KO):KO;function QO(t,e,n="validate"){if(ib(t)||Array.isArray(t)&&t.every(ib)||co(t)&&!t)return{type:n,message:ib(t)?t:"",ref:e}}var hd=t=>Gr(t)&&!yv(t)?t:{value:t,message:""},JO=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:u,maxLength:d,minLength:p,min:h,max:y,pattern:x,validate:_,name:S,valueAsNumber:I,mount:C}=t._f,k=It(n,S);if(!C||e.has(S))return{};const R=a?a[0]:o,j=U=>{i&&R.reportValidity&&(R.setCustomValidity(co(U)?"":U||""),R.reportValidity())},A={},F=o1(o),$=Dm(o),P=F||$,q=(I||s1(o))&&Vr(o.value)&&Vr(k)||gv(o)&&o.value===""||k===""||Array.isArray(k)&&!k.length,B=lL.bind(null,S,r,A),L=(U,V,z,X=Ma.maxLength,J=Ma.minLength)=>{const le=U?V:z;A[S]={type:U?X:J,message:le,ref:o,...B(U?X:J,le)}};if(s?!Array.isArray(k)||!k.length:u&&(!P&&(q||Qi(k))||co(k)&&!k||$&&!uL(a).isValid||F&&!cL(a).isValid)){const{value:U,message:V}=ib(u)?{value:!!u,message:u}:hd(u);if(U&&(A[S]={type:Ma.required,message:V,ref:R,...B(Ma.required,V)},!r))return j(V),A}if(!q&&(!Qi(h)||!Qi(y))){let U,V;const z=hd(y),X=hd(h);if(!Qi(k)&&!isNaN(k)){const J=o.valueAsNumber||k&&+k;Qi(z.value)||(U=J>z.value),Qi(X.value)||(V=J<X.value)}else{const J=o.valueAsDate||new Date(k),le=oe=>new Date(new Date().toDateString()+" "+oe),ie=o.type=="time",ne=o.type=="week";la(z.value)&&k&&(U=ie?le(k)>le(z.value):ne?k>z.value:J>new Date(z.value)),la(X.value)&&k&&(V=ie?le(k)<le(X.value):ne?k<X.value:J<new Date(X.value))}if((U||V)&&(L(!!U,z.message,X.message,Ma.max,Ma.min),!r))return j(A[S].message),A}if((d||p)&&!q&&(la(k)||s&&Array.isArray(k))){const U=hd(d),V=hd(p),z=!Qi(U.value)&&k.length>+U.value,X=!Qi(V.value)&&k.length<+V.value;if((z||X)&&(L(z,U.message,V.message),!r))return j(A[S].message),A}if(x&&!q&&la(k)){const{value:U,message:V}=hd(x);if(yv(U)&&!k.match(U)&&(A[S]={type:Ma.pattern,message:V,ref:o,...B(Ma.pattern,V)},!r))return j(V),A}if(_){if(oa(_)){const U=await _(k,n),V=QO(U,R);if(V&&(A[S]={...V,...B(Ma.validate,V.message)},!r))return j(V.message),A}else if(Gr(_)){let U={};for(const V in _){if(!gs(U)&&!r)break;const z=QO(await _[V](k,n),R,V);z&&(U={...z,...B(V,z.message)},j(z.message),r&&(A[S]=U))}if(!gs(U)&&(A[S]={ref:R,...U},!r))return A}}return j(!0),A};function fY(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Vr(t)?r++:t[e[r++]];return t}function pY(t){for(const e in t)if(t.hasOwnProperty(e)&&!Vr(t[e]))return!1;return!0}function li(t,e){const n=Array.isArray(e)?e:n1(e)?[e]:rL(e),r=n.length===1?t:fY(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Gr(r)&&gs(r)||Array.isArray(r)&&pY(r))&&li(t,n.slice(0,-1)),t}var X0=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},wI=t=>Qi(t)||!eL(t);function Hl(t,e){if(wI(t)||wI(e))return t===e;if(ic(t)&&ic(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(ic(s)&&ic(o)||Gr(s)&&Gr(o)||Array.isArray(s)&&Array.isArray(o)?!Hl(s,o):s!==o)return!1}}return!0}var dL=t=>t.type==="select-multiple",hY=t=>o1(t)||Dm(t),eS=t=>gv(t)&&t.isConnected,fL=t=>{for(const e in t)if(oa(t[e]))return!0;return!1};function bv(t,e={}){const n=Array.isArray(t);if(Gr(t)||n)for(const r in t)Array.isArray(t[r])||Gr(t[r])&&!fL(t[r])?(e[r]=Array.isArray(t[r])?[]:{},bv(t[r],e[r])):Qi(t[r])||(e[r]=!0);return e}function pL(t,e,n){const r=Array.isArray(t);if(Gr(t)||r)for(const i in t)Array.isArray(t[i])||Gr(t[i])&&!fL(t[i])?Vr(e)||wI(n[i])?n[i]=Array.isArray(t[i])?bv(t[i],[]):{...bv(t[i])}:pL(t[i],Qi(e)?{}:e[i],n[i]):n[i]=!Hl(t[i],e[i]);return n}var Ap=(t,e)=>pL(t,e,bv(e)),hL=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Vr(t)?t:e?t===""?NaN:t&&+t:n&&la(t)?new Date(t):r?r(t):t;function tS(t){const e=t.ref;return s1(e)?e.files:o1(e)?cL(t.refs).value:dL(e)?[...e.selectedOptions].map(({value:n})=>n):Dm(e)?uL(t.refs).value:hL(Vr(e.value)?t.ref.value:e.value,t)}var mY=(t,e,n,r)=>{const i={};for(const s of t){const o=It(e,s);o&&Hn(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Pp=t=>Vr(t)?t:yv(t)?t.source:Gr(t)?yv(t.value)?t.value.source:t.value:t;const ZO="AsyncFunction";var gY=t=>!!t&&!!t.validate&&!!(oa(t.validate)&&t.validate.constructor.name===ZO||Gr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===ZO)),yY=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function YO(t,e,n){const r=It(t,n);if(r||n1(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=It(e,s),a=It(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var bY=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,vY=(t,e)=>!vx(It(t,e)).length&&li(t,e);const xY={mode:Do.onSubmit,reValidateMode:Do.onChange,shouldFocusError:!0};function wY(t={}){let e={...xY,...t},n={submitCount:0,isDirty:!1,isLoading:oa(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Gr(e.defaultValues)||Gr(e.values)?ms(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:ms(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,d=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:X0(),array:X0(),state:X0()},y=UO(e.mode),x=UO(e.reValidateMode),_=e.criteriaMode===Do.all,S=xe=>be=>{clearTimeout(d),d=setTimeout(xe,be)},I=async xe=>{if(!e.disabled&&(p.isValid||xe)){const be=e.resolver?gs((await P()).errors):await B(r,!0);be!==n.isValid&&h.state.next({isValid:be})}},C=(xe,be)=>{!e.disabled&&(p.isValidating||p.validatingFields)&&((xe||Array.from(a.mount)).forEach(Ne=>{Ne&&(be?Hn(n.validatingFields,Ne,be):li(n.validatingFields,Ne))}),h.state.next({validatingFields:n.validatingFields,isValidating:!gs(n.validatingFields)}))},k=(xe,be=[],Ne,Ae,Ve=!0,rt=!0)=>{if(Ae&&Ne&&!e.disabled){if(o.action=!0,rt&&Array.isArray(It(r,xe))){const Me=Ne(It(r,xe),Ae.argA,Ae.argB);Ve&&Hn(r,xe,Me)}if(rt&&Array.isArray(It(n.errors,xe))){const Me=Ne(It(n.errors,xe),Ae.argA,Ae.argB);Ve&&Hn(n.errors,xe,Me),vY(n.errors,xe)}if(p.touchedFields&&rt&&Array.isArray(It(n.touchedFields,xe))){const Me=Ne(It(n.touchedFields,xe),Ae.argA,Ae.argB);Ve&&Hn(n.touchedFields,xe,Me)}p.dirtyFields&&(n.dirtyFields=Ap(i,s)),h.state.next({name:xe,isDirty:U(xe,be),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Hn(s,xe,be)},R=(xe,be)=>{Hn(n.errors,xe,be),h.state.next({errors:n.errors})},j=xe=>{n.errors=xe,h.state.next({errors:n.errors,isValid:!1})},A=(xe,be,Ne,Ae)=>{const Ve=It(r,xe);if(Ve){const rt=It(s,xe,Vr(Ne)?It(i,xe):Ne);Vr(rt)||Ae&&Ae.defaultChecked||be?Hn(s,xe,be?rt:tS(Ve._f)):X(xe,rt),o.mount&&I()}},F=(xe,be,Ne,Ae,Ve)=>{let rt=!1,Me=!1;const ct={name:xe};if(!e.disabled){const Jt=!!(It(r,xe)&&It(r,xe)._f&&It(r,xe)._f.disabled);if(!Ne||Ae){p.isDirty&&(Me=n.isDirty,n.isDirty=ct.isDirty=U(),rt=Me!==ct.isDirty);const Zt=Jt||Hl(It(i,xe),be);Me=!!(!Jt&&It(n.dirtyFields,xe)),Zt||Jt?li(n.dirtyFields,xe):Hn(n.dirtyFields,xe,!0),ct.dirtyFields=n.dirtyFields,rt=rt||p.dirtyFields&&Me!==!Zt}if(Ne){const Zt=It(n.touchedFields,xe);Zt||(Hn(n.touchedFields,xe,Ne),ct.touchedFields=n.touchedFields,rt=rt||p.touchedFields&&Zt!==Ne)}rt&&Ve&&h.state.next(ct)}return rt?ct:{}},$=(xe,be,Ne,Ae)=>{const Ve=It(n.errors,xe),rt=p.isValid&&co(be)&&n.isValid!==be;if(e.delayError&&Ne?(u=S(()=>R(xe,Ne)),u(e.delayError)):(clearTimeout(d),u=null,Ne?Hn(n.errors,xe,Ne):li(n.errors,xe)),(Ne?!Hl(Ve,Ne):Ve)||!gs(Ae)||rt){const Me={...Ae,...rt&&co(be)?{isValid:be}:{},errors:n.errors,name:xe};n={...n,...Me},h.state.next(Me)}},P=async xe=>{C(xe,!0);const be=await e.resolver(s,e.context,mY(xe||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return C(xe),be},q=async xe=>{const{errors:be}=await P(xe);if(xe)for(const Ne of xe){const Ae=It(be,Ne);Ae?Hn(n.errors,Ne,Ae):li(n.errors,Ne)}else n.errors=be;return be},B=async(xe,be,Ne={valid:!0})=>{for(const Ae in xe){const Ve=xe[Ae];if(Ve){const{_f:rt,...Me}=Ve;if(rt){const ct=a.array.has(rt.name),Jt=Ve._f&&gY(Ve._f);Jt&&p.validatingFields&&C([Ae],!0);const Zt=await JO(Ve,a.disabled,s,_,e.shouldUseNativeValidation&&!be,ct);if(Jt&&p.validatingFields&&C([Ae]),Zt[rt.name]&&(Ne.valid=!1,be))break;!be&&(It(Zt,rt.name)?ct?dY(n.errors,Zt,rt.name):Hn(n.errors,rt.name,Zt[rt.name]):li(n.errors,rt.name))}!gs(Me)&&await B(Me,be,Ne)}}return Ne.valid},L=()=>{for(const xe of a.unMount){const be=It(r,xe);be&&(be._f.refs?be._f.refs.every(Ne=>!eS(Ne)):!eS(be._f.ref))&&Ie(xe)}a.unMount=new Set},U=(xe,be)=>!e.disabled&&(xe&&be&&Hn(s,xe,be),!Hl(te(),i)),V=(xe,be,Ne)=>aL(xe,a,{...o.mount?s:Vr(be)?i:la(xe)?{[xe]:be}:be},Ne,be),z=xe=>vx(It(o.mount?s:i,xe,e.shouldUnregister?It(i,xe,[]):[])),X=(xe,be,Ne={})=>{const Ae=It(r,xe);let Ve=be;if(Ae){const rt=Ae._f;rt&&(!rt.disabled&&Hn(s,xe,hL(be,rt)),Ve=gv(rt.ref)&&Qi(be)?"":be,dL(rt.ref)?[...rt.ref.options].forEach(Me=>Me.selected=Ve.includes(Me.value)):rt.refs?Dm(rt.ref)?rt.refs.length>1?rt.refs.forEach(Me=>(!Me.defaultChecked||!Me.disabled)&&(Me.checked=Array.isArray(Ve)?!!Ve.find(ct=>ct===Me.value):Ve===Me.value)):rt.refs[0]&&(rt.refs[0].checked=!!Ve):rt.refs.forEach(Me=>Me.checked=Me.value===Ve):s1(rt.ref)?rt.ref.value="":(rt.ref.value=Ve,rt.ref.type||h.values.next({name:xe,values:{...s}})))}(Ne.shouldDirty||Ne.shouldTouch)&&F(xe,Ve,Ne.shouldTouch,Ne.shouldDirty,!0),Ne.shouldValidate&&oe(xe)},J=(xe,be,Ne)=>{for(const Ae in be){const Ve=be[Ae],rt=`${xe}.${Ae}`,Me=It(r,rt);(a.array.has(xe)||Gr(Ve)||Me&&!Me._f)&&!ic(Ve)?J(rt,Ve,Ne):X(rt,Ve,Ne)}},le=(xe,be,Ne={})=>{const Ae=It(r,xe),Ve=a.array.has(xe),rt=ms(be);Hn(s,xe,rt),Ve?(h.array.next({name:xe,values:{...s}}),(p.isDirty||p.dirtyFields)&&Ne.shouldDirty&&h.state.next({name:xe,dirtyFields:Ap(i,s),isDirty:U(xe,rt)})):Ae&&!Ae._f&&!Qi(rt)?J(xe,rt,Ne):X(xe,rt,Ne),VO(xe,a)&&h.state.next({...n}),h.values.next({name:o.mount?xe:void 0,values:{...s}})},ie=async xe=>{o.mount=!0;const be=xe.target;let Ne=be.name,Ae=!0;const Ve=It(r,Ne),rt=()=>be.type?tS(Ve._f):tL(xe),Me=ct=>{Ae=Number.isNaN(ct)||ic(ct)&&isNaN(ct.getTime())||Hl(ct,It(s,Ne,ct))};if(Ve){let ct,Jt;const Zt=rt(),wn=xe.type===mv.BLUR||xe.type===mv.FOCUS_OUT,dr=!yY(Ve._f)&&!e.resolver&&!It(n.errors,Ne)&&!Ve._f.deps||bY(wn,It(n.touchedFields,Ne),n.isSubmitted,x,y),Bn=VO(Ne,a,wn);Hn(s,Ne,Zt),wn?(Ve._f.onBlur&&Ve._f.onBlur(xe),u&&u(0)):Ve._f.onChange&&Ve._f.onChange(xe);const Zr=F(Ne,Zt,wn,!1),Ui=!gs(Zr)||Bn;if(!wn&&h.values.next({name:Ne,type:xe.type,values:{...s}}),dr)return p.isValid&&(e.mode==="onBlur"&&wn?I():wn||I()),Ui&&h.state.next({name:Ne,...Bn?{}:Zr});if(!wn&&Bn&&h.state.next({...n}),e.resolver){const{errors:kr}=await P([Ne]);if(Me(Zt),Ae){const Yt=YO(n.errors,r,Ne),rs=YO(kr,r,Yt.name||Ne);ct=rs.error,Ne=rs.name,Jt=gs(kr)}}else C([Ne],!0),ct=(await JO(Ve,a.disabled,s,_,e.shouldUseNativeValidation))[Ne],C([Ne]),Me(Zt),Ae&&(ct?Jt=!1:p.isValid&&(Jt=await B(r,!0)));Ae&&(Ve._f.deps&&oe(Ve._f.deps),$(Ne,Jt,ct,Zr))}},ne=(xe,be)=>{if(It(n.errors,be)&&xe.focus)return xe.focus(),1},oe=async(xe,be={})=>{let Ne,Ae;const Ve=xh(xe);if(e.resolver){const rt=await q(Vr(xe)?xe:Ve);Ne=gs(rt),Ae=xe?!Ve.some(Me=>It(rt,Me)):Ne}else xe?(Ae=(await Promise.all(Ve.map(async rt=>{const Me=It(r,rt);return await B(Me&&Me._f?{[rt]:Me}:Me)}))).every(Boolean),!(!Ae&&!n.isValid)&&I()):Ae=Ne=await B(r);return h.state.next({...!la(xe)||p.isValid&&Ne!==n.isValid?{}:{name:xe},...e.resolver||!xe?{isValid:Ne}:{},errors:n.errors}),be.shouldFocus&&!Ae&&wh(r,ne,xe?Ve:a.mount),Ae},te=xe=>{const be={...o.mount?s:i};return Vr(xe)?be:la(xe)?It(be,xe):xe.map(Ne=>It(be,Ne))},ce=(xe,be)=>({invalid:!!It((be||n).errors,xe),isDirty:!!It((be||n).dirtyFields,xe),error:It((be||n).errors,xe),isValidating:!!It(n.validatingFields,xe),isTouched:!!It((be||n).touchedFields,xe)}),de=xe=>{xe&&xh(xe).forEach(be=>li(n.errors,be)),h.state.next({errors:xe?n.errors:{}})},ye=(xe,be,Ne)=>{const Ae=(It(r,xe,{_f:{}})._f||{}).ref,Ve=It(n.errors,xe)||{},{ref:rt,message:Me,type:ct,...Jt}=Ve;Hn(n.errors,xe,{...Jt,...be,ref:Ae}),h.state.next({name:xe,errors:n.errors,isValid:!1}),Ne&&Ne.shouldFocus&&Ae&&Ae.focus&&Ae.focus()},we=(xe,be)=>oa(xe)?h.values.subscribe({next:Ne=>xe(V(void 0,be),Ne)}):V(xe,be,!0),Ie=(xe,be={})=>{for(const Ne of xe?xh(xe):a.mount)a.mount.delete(Ne),a.array.delete(Ne),be.keepValue||(li(r,Ne),li(s,Ne)),!be.keepError&&li(n.errors,Ne),!be.keepDirty&&li(n.dirtyFields,Ne),!be.keepTouched&&li(n.touchedFields,Ne),!be.keepIsValidating&&li(n.validatingFields,Ne),!e.shouldUnregister&&!be.keepDefaultValue&&li(i,Ne);h.values.next({values:{...s}}),h.state.next({...n,...be.keepDirty?{isDirty:U()}:{}}),!be.keepIsValid&&I()},ze=({disabled:xe,name:be,field:Ne,fields:Ae})=>{(co(xe)&&o.mount||xe||a.disabled.has(be))&&(xe?a.disabled.add(be):a.disabled.delete(be),F(be,tS(Ne?Ne._f:It(Ae,be)._f),!1,!1,!0))},je=(xe,be={})=>{let Ne=It(r,xe);const Ae=co(be.disabled)||co(e.disabled);return Hn(r,xe,{...Ne||{},_f:{...Ne&&Ne._f?Ne._f:{ref:{name:xe}},name:xe,mount:!0,...be}}),a.mount.add(xe),Ne?ze({field:Ne,disabled:co(be.disabled)?be.disabled:e.disabled,name:xe}):A(xe,!0,be.value),{...Ae?{disabled:be.disabled||e.disabled}:{},...e.progressive?{required:!!be.required,min:Pp(be.min),max:Pp(be.max),minLength:Pp(be.minLength),maxLength:Pp(be.maxLength),pattern:Pp(be.pattern)}:{},name:xe,onChange:ie,onBlur:ie,ref:Ve=>{if(Ve){je(xe,be),Ne=It(r,xe);const rt=Vr(Ve.value)&&Ve.querySelectorAll&&Ve.querySelectorAll("input,select,textarea")[0]||Ve,Me=hY(rt),ct=Ne._f.refs||[];if(Me?ct.find(Jt=>Jt===rt):rt===Ne._f.ref)return;Hn(r,xe,{_f:{...Ne._f,...Me?{refs:[...ct.filter(eS),rt,...Array.isArray(It(i,xe))?[{}]:[]],ref:{type:rt.type,name:xe}}:{ref:rt}}}),A(xe,!1,void 0,rt)}else Ne=It(r,xe,{}),Ne._f&&(Ne._f.mount=!1),(e.shouldUnregister||be.shouldUnregister)&&!(nL(a.array,xe)&&o.action)&&a.unMount.add(xe)}}},De=()=>e.shouldFocusError&&wh(r,ne,a.mount),Je=xe=>{co(xe)&&(h.state.next({disabled:xe}),wh(r,(be,Ne)=>{const Ae=It(r,Ne);Ae&&(be.disabled=Ae._f.disabled||xe,Array.isArray(Ae._f.refs)&&Ae._f.refs.forEach(Ve=>{Ve.disabled=Ae._f.disabled||xe}))},0,!1))},Xe=(xe,be)=>async Ne=>{let Ae;Ne&&(Ne.preventDefault&&Ne.preventDefault(),Ne.persist&&Ne.persist());let Ve=ms(s);if(a.disabled.size)for(const rt of a.disabled)Hn(Ve,rt,void 0);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:rt,values:Me}=await P();n.errors=rt,Ve=Me}else await B(r);if(li(n.errors,"root"),gs(n.errors)){h.state.next({errors:{}});try{await xe(Ve,Ne)}catch(rt){Ae=rt}}else be&&await be({...n.errors},Ne),De(),setTimeout(De);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:gs(n.errors)&&!Ae,submitCount:n.submitCount+1,errors:n.errors}),Ae)throw Ae},Ue=(xe,be={})=>{It(r,xe)&&(Vr(be.defaultValue)?le(xe,ms(It(i,xe))):(le(xe,be.defaultValue),Hn(i,xe,ms(be.defaultValue))),be.keepTouched||li(n.touchedFields,xe),be.keepDirty||(li(n.dirtyFields,xe),n.isDirty=be.defaultValue?U(xe,ms(It(i,xe))):U()),be.keepError||(li(n.errors,xe),p.isValid&&I()),h.state.next({...n}))},ut=(xe,be={})=>{const Ne=xe?ms(xe):i,Ae=ms(Ne),Ve=gs(xe),rt=Ve?i:Ae;if(be.keepDefaultValues||(i=Ne),!be.keepValues){if(be.keepDirtyValues){const Me=new Set([...a.mount,...Object.keys(Ap(i,s))]);for(const ct of Array.from(Me))It(n.dirtyFields,ct)?Hn(rt,ct,It(s,ct)):le(ct,It(rt,ct))}else{if(t1&&Vr(xe))for(const Me of a.mount){const ct=It(r,Me);if(ct&&ct._f){const Jt=Array.isArray(ct._f.refs)?ct._f.refs[0]:ct._f.ref;if(gv(Jt)){const Zt=Jt.closest("form");if(Zt){Zt.reset();break}}}}r={}}s=e.shouldUnregister?be.keepDefaultValues?ms(i):{}:ms(rt),h.array.next({values:{...rt}}),h.values.next({values:{...rt}})}a={mount:be.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!p.isValid||!!be.keepIsValid||!!be.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:be.keepSubmitCount?n.submitCount:0,isDirty:Ve?!1:be.keepDirty?n.isDirty:!!(be.keepDefaultValues&&!Hl(xe,i)),isSubmitted:be.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ve?{}:be.keepDirtyValues?be.keepDefaultValues&&s?Ap(i,s):n.dirtyFields:be.keepDefaultValues&&xe?Ap(i,xe):be.keepDirty?n.dirtyFields:{},touchedFields:be.keepTouched?n.touchedFields:{},errors:be.keepErrors?n.errors:{},isSubmitSuccessful:be.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},St=(xe,be)=>ut(oa(xe)?xe(s):xe,be);return{control:{register:je,unregister:Ie,getFieldState:ce,handleSubmit:Xe,setError:ye,_executeSchema:P,_getWatch:V,_getDirty:U,_updateValid:I,_removeUnmounted:L,_updateFieldArray:k,_updateDisabledField:ze,_getFieldArray:z,_reset:ut,_resetDefaultValues:()=>oa(e.defaultValues)&&e.defaultValues().then(xe=>{St(xe,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:xe=>{n={...n,...xe}},_disableForm:Je,_subjects:h,_proxyFormState:p,_setErrors:j,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(xe){o=xe},get _defaultValues(){return i},get _names(){return a},set _names(xe){a=xe},get _formState(){return n},set _formState(xe){n=xe},get _options(){return e},set _options(xe){e={...e,...xe}}},trigger:oe,register:je,handleSubmit:Xe,watch:we,setValue:le,getValues:te,reset:St,resetField:Ue,clearErrors:de,unregister:Ie,setError:ye,setFocus:(xe,be={})=>{const Ne=It(r,xe),Ae=Ne&&Ne._f;if(Ae){const Ve=Ae.refs?Ae.refs[0]:Ae.ref;Ve.focus&&(Ve.focus(),be.shouldSelect&&oa(Ve.select)&&Ve.select())}},getFieldState:ce}}function Ei(t={}){const e=Un.useRef(void 0),n=Un.useRef(void 0),[r,i]=Un.useState({isDirty:!1,isValidating:!1,isLoading:oa(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:oa(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...wY(t),formState:r});const s=e.current.control;return s._options=t,i1({subject:s._subjects.state,next:o=>{sL(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),Un.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Un.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Un.useEffect(()=>{t.values&&!Hl(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),Un.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),Un.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Un.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=iL(r,s),e.current}const XO=(t,e,n)=>{if(t&&"reportValidity"in t){const r=It(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},mL=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?XO(r.ref,n,t):r.refs&&r.refs.forEach(i=>XO(i,n,t))}},_Y=(t,e)=>{e.shouldUseNativeValidation&&mL(t,e);const n={};for(const r in t){const i=It(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(SY(e.names||Object.keys(t),r)){const o=Object.assign({},It(n,r));Hn(o,"root",s),Hn(n,r,o)}else Hn(n,r,s)}return n},SY=(t,e)=>t.some(n=>n.startsWith(e+"."));var EY=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(p){return p.errors.forEach(function(h){return t.push(h)})}),e){var u=n[o].types,d=u&&u[r.code];n[o]=lL(o,e,n,i,d?[].concat(d,r.message):r.message)}t.shift()}return n},Ii=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return s.shouldUseNativeValidation&&mL({},s),{errors:{},values:n.raw?r:d}})}catch(d){return a(d)}return u&&u.then?u.then(void 0,a):u}(0,function(o){if(function(a){return Array.isArray(a?.errors)}(o))return{values:{},errors:_Y(EY(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}};const vv="icon-[cil--arrow-right]",gL="icon-[et--map]",IY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({name:M.string().min(1),cycles:M.number().int(),sort:M.number().int(),limit:M.number().int()})),shape:t,filter:e,sort:["id","name","cycles","sort","limit"]}),NY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintId:M.string().min(1),conflictId:M.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","conflictId"]}),kY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintId:M.string().min(1),dependencyId:M.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","dependencyId"]}),CY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintId:M.string().min(1),inventoryId:M.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","inventoryId"]}),TY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintId:M.string().min(1),resourceId:M.string().min(1),amount:M.number(),cycles:M.number().int()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","cycles"]}),RY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintProductionId:M.string().min(1),blueprintId:M.string().min(1)})),shape:t,filter:e,sort:["id","blueprintProductionId","blueprintId"]}),jY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintProductionId:M.string().min(1),resourceId:M.string().min(1),amount:M.number(),passive:Fi()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount","passive"]}),OY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintProductionId:M.string().min(1),resourceId:M.string().min(1),amount:M.number()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount"]}),qY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({blueprintId:M.string().min(1),resourceId:M.string().min(1),amount:M.number(),passive:Fi()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","passive"]}),AY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({userId:M.string().min(1),blueprintId:M.string().min(1),constructionId:M.string().nullish(),landId:M.string().min(1),productionId:M.string().nullish(),recurringProductionId:M.string().nullish(),x:M.number(),y:M.number(),valid:Fi()})),shape:t,filter:e,sort:["id","userId","blueprintId","constructionId","landId","productionId","recurringProductionId","x","y","valid"]}),PY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({resourceId:M.string().min(1),amount:M.number(),limit:M.number(),type:M.string().min(1)})),shape:t,filter:e,sort:["id","resourceId","amount","limit","type"]}),FY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({userId:M.string().min(1),name:M.string().min(1)})),shape:t,filter:e,sort:["id","userId","name"]}),DY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({name:M.string().min(1),color:M.string().min(1),minWidth:M.number().int(),maxWidth:M.number().int(),minHeight:M.number().int(),maxHeight:M.number().int(),probability:M.number().int(),limit:M.number().int()})),shape:t,filter:e,sort:["id","name","color","minWidth","maxWidth","minHeight","maxHeight","probability","limit"]}),LY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({name:M.string().min(1),transport:M.number()})),shape:t,filter:e,sort:["id","name","transport"]}),MY=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({code:M.string().min(1),label:M.string().min(1),group:M.string().nullish(),sort:M.number().int()})),shape:t,filter:e,sort:["id","code","label","group","sort"]}),$Y=({shape:t,filter:e})=>Wi({entity:Bi.merge(M.object({name:M.string().min(1),login:M.string().min(1),password:M.string().min(1)})),shape:t,filter:e,sort:["id","name","login","password"]}),BY=FY({shape:M.object({name:M.string().min(1)}),filter:zi});function zY(t){return Math.random()<t/100}function WY(t=20480,e=32){const n=()=>Math.floor(Math.random()*(t/e))*e;return{x:n(),y:n()}}async function UY(t,e,n,r){return!!await t.selectFrom("Land as l").where("l.mapId","=",e).where(s=>s.not(s.or([s("l.x",">=",n.x+r.width),s(_r`l.x + l.width`,"<=",n.x),s("l.y",">=",n.y+r.height),s(_r`l.y + l.height`,"<=",n.y)]))).select("id").executeTakeFirst()}const VY=async({tx:t,userId:e,name:n,size:r={world:24,land:384*2}})=>{const i=await t.insertInto("Map").values({id:Sn(),userId:e,name:n}).returning("id").executeTakeFirstOrThrow(),s=await t.selectFrom("Region").selectAll().execute();for await(const{id:o,probability:a,limit:u,minWidth:d,maxWidth:p,minHeight:h,maxHeight:y}of s)for(let x=0;x<u;x++){if(!zY(a))continue;let _=0;const S=6;for(;_<S;){const k=WY(2048*r.world,2048);if(!await UY(t,i.id,k,{width:2048,height:2048})){await t.insertInto("Land").values({id:Sn(),height:2048,width:2048,regionId:o,mapId:i.id,...k}).execute();break}_++}}return i},HY=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(BY.shape),defaultValues:{name:"",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"name",label:f.jsx(Y,{label:"Map name (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:gL,type:"submit",children:f.jsx(Y,{label:"Create map (submit)"})})})]})},yL=$t("/$locale/apps/derivean/game/")({async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{user:r,map:await t.ensureQueryData({queryKey:["GameMap","map",r.id],async queryFn(){return e.transaction().execute(i=>qr({select:i.selectFrom("Map as m").select(["m.id","m.name"]).where("m.userId","=",r.id),output:M.object({id:M.string().min(1),name:M.string().min(1)})}))}})}},component(){const{user:t,map:e}=yL.useLoaderData(),{tva:n}=gr({from:"__root__"}),r=n().slots,i=Fn([["GameMap"]]),{locale:s}=nn({from:"/$locale"}),o=pu(),a=Xt({async mutationFn({id:u}){return Ct.transaction().execute(async d=>d.deleteFrom("Map").where("id","=",u).where("userId","=",t.id).execute())},async onSuccess(){await i()}});return f.jsxs("div",{className:r.base({css:["w-1/2","mx-auto","mt-24","flex","flex-col","gap-6"]}),children:[f.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:f.jsx(Y,{label:"Map list (label)"})}),e.length>0?e.map(u=>f.jsxs("div",{className:cn(["flex","flex-row","gap-2","items-center","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsx(qt,{icon:vv,to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:u.id},children:u.name}),f.jsx("div",{children:f.jsx(vn,{iconEnabled:si,variant:{variant:"danger"},loading:a.isPending,onClick:()=>{a.mutate({id:u.id})}})})]},u.id)):f.jsx("div",{className:cn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(Y,{label:"There are no maps (label)"})}),f.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:f.jsx(Y,{label:"New map (label)"})}),f.jsx("div",{children:f.jsx(HY,{mutation:Xt({async mutationFn(u){return An.promise(Ct.transaction().execute(d=>VY({tx:d,userId:t.id,...u})),ii("Map generator"))},async onSuccess(u){o({to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:u.id}}),await i()}})})})]})}});var nS,eq;function a1(){if(eq)return nS;eq=1;var t="\0",e="\0",n="\x01";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(p){p&&(this._isDirected=Object.hasOwn(p,"directed")?p.directed:!0,this._isMultigraph=Object.hasOwn(p,"multigraph")?p.multigraph:!1,this._isCompound=Object.hasOwn(p,"compound")?p.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(p){return this._label=p,this}graph(){return this._label}setDefaultNodeLabel(p){return this._defaultNodeLabelFn=p,typeof p!="function"&&(this._defaultNodeLabelFn=()=>p),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var p=this;return this.nodes().filter(h=>Object.keys(p._in[h]).length===0)}sinks(){var p=this;return this.nodes().filter(h=>Object.keys(p._out[h]).length===0)}setNodes(p,h){var y=arguments,x=this;return p.forEach(function(_){y.length>1?x.setNode(_,h):x.setNode(_)}),this}setNode(p,h){return Object.hasOwn(this._nodes,p)?(arguments.length>1&&(this._nodes[p]=h),this):(this._nodes[p]=arguments.length>1?h:this._defaultNodeLabelFn(p),this._isCompound&&(this._parent[p]=e,this._children[p]={},this._children[e][p]=!0),this._in[p]={},this._preds[p]={},this._out[p]={},this._sucs[p]={},++this._nodeCount,this)}node(p){return this._nodes[p]}hasNode(p){return Object.hasOwn(this._nodes,p)}removeNode(p){var h=this;if(Object.hasOwn(this._nodes,p)){var y=x=>h.removeEdge(h._edgeObjs[x]);delete this._nodes[p],this._isCompound&&(this._removeFromParentsChildList(p),delete this._parent[p],this.children(p).forEach(function(x){h.setParent(x)}),delete this._children[p]),Object.keys(this._in[p]).forEach(y),delete this._in[p],delete this._preds[p],Object.keys(this._out[p]).forEach(y),delete this._out[p],delete this._sucs[p],--this._nodeCount}return this}setParent(p,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(h===void 0)h=e;else{h+="";for(var y=h;y!==void 0;y=this.parent(y))if(y===p)throw new Error("Setting "+h+" as parent of "+p+" would create a cycle");this.setNode(h)}return this.setNode(p),this._removeFromParentsChildList(p),this._parent[p]=h,this._children[h][p]=!0,this}_removeFromParentsChildList(p){delete this._children[this._parent[p]][p]}parent(p){if(this._isCompound){var h=this._parent[p];if(h!==e)return h}}children(p=e){if(this._isCompound){var h=this._children[p];if(h)return Object.keys(h)}else{if(p===e)return this.nodes();if(this.hasNode(p))return[]}}predecessors(p){var h=this._preds[p];if(h)return Object.keys(h)}successors(p){var h=this._sucs[p];if(h)return Object.keys(h)}neighbors(p){var h=this.predecessors(p);if(h){const x=new Set(h);for(var y of this.successors(p))x.add(y);return Array.from(x.values())}}isLeaf(p){var h;return this.isDirected()?h=this.successors(p):h=this.neighbors(p),h.length===0}filterNodes(p){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var y=this;Object.entries(this._nodes).forEach(function([S,I]){p(S)&&h.setNode(S,I)}),Object.values(this._edgeObjs).forEach(function(S){h.hasNode(S.v)&&h.hasNode(S.w)&&h.setEdge(S,y.edge(S))});var x={};function _(S){var I=y.parent(S);return I===void 0||h.hasNode(I)?(x[S]=I,I):I in x?x[I]:_(I)}return this._isCompound&&h.nodes().forEach(S=>h.setParent(S,_(S))),h}setDefaultEdgeLabel(p){return this._defaultEdgeLabelFn=p,typeof p!="function"&&(this._defaultEdgeLabelFn=()=>p),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(p,h){var y=this,x=arguments;return p.reduce(function(_,S){return x.length>1?y.setEdge(_,S,h):y.setEdge(_,S),S}),this}setEdge(){var p,h,y,x,_=!1,S=arguments[0];typeof S=="object"&&S!==null&&"v"in S?(p=S.v,h=S.w,y=S.name,arguments.length===2&&(x=arguments[1],_=!0)):(p=S,h=arguments[1],y=arguments[3],arguments.length>2&&(x=arguments[2],_=!0)),p=""+p,h=""+h,y!==void 0&&(y=""+y);var I=o(this._isDirected,p,h,y);if(Object.hasOwn(this._edgeLabels,I))return _&&(this._edgeLabels[I]=x),this;if(y!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(p),this.setNode(h),this._edgeLabels[I]=_?x:this._defaultEdgeLabelFn(p,h,y);var C=a(this._isDirected,p,h,y);return p=C.v,h=C.w,Object.freeze(C),this._edgeObjs[I]=C,i(this._preds[h],p),i(this._sucs[p],h),this._in[h][I]=C,this._out[p][I]=C,this._edgeCount++,this}edge(p,h,y){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,y);return this._edgeLabels[x]}edgeAsObj(){const p=this.edge(...arguments);return typeof p!="object"?{label:p}:p}hasEdge(p,h,y){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,y);return Object.hasOwn(this._edgeLabels,x)}removeEdge(p,h,y){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,y),_=this._edgeObjs[x];return _&&(p=_.v,h=_.w,delete this._edgeLabels[x],delete this._edgeObjs[x],s(this._preds[h],p),s(this._sucs[p],h),delete this._in[h][x],delete this._out[p][x],this._edgeCount--),this}inEdges(p,h){var y=this._in[p];if(y){var x=Object.values(y);return h?x.filter(_=>_.v===h):x}}outEdges(p,h){var y=this._out[p];if(y){var x=Object.values(y);return h?x.filter(_=>_.w===h):x}}nodeEdges(p,h){var y=this.inEdges(p,h);if(y)return y.concat(this.outEdges(p,h))}}function i(d,p){d[p]?d[p]++:d[p]=1}function s(d,p){--d[p]||delete d[p]}function o(d,p,h,y){var x=""+p,_=""+h;if(!d&&x>_){var S=x;x=_,_=S}return x+n+_+n+(y===void 0?t:y)}function a(d,p,h,y){var x=""+p,_=""+h;if(!d&&x>_){var S=x;x=_,_=S}var I={v:x,w:_};return y&&(I.name=y),I}function u(d,p){return o(d,p.v,p.w,p.name)}return nS=r,nS}var rS,tq;function GY(){return tq||(tq=1,rS="2.2.4"),rS}var iS,nq;function KY(){return nq||(nq=1,iS={Graph:a1(),version:GY()}),iS}var sS,rq;function QY(){if(rq)return sS;rq=1;var t=a1();sS={write:e,read:i};function e(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:r(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function n(s){return s.nodes().map(function(o){var a=s.node(o),u=s.parent(o),d={v:o};return a!==void 0&&(d.value=a),u!==void 0&&(d.parent=u),d})}function r(s){return s.edges().map(function(o){var a=s.edge(o),u={v:o.v,w:o.w};return o.name!==void 0&&(u.name=o.name),a!==void 0&&(u.value=a),u})}function i(s){var o=new t(s.options).setGraph(s.value);return s.nodes.forEach(function(a){o.setNode(a.v,a.value),a.parent&&o.setParent(a.v,a.parent)}),s.edges.forEach(function(a){o.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),o}return sS}var oS,iq;function JY(){if(iq)return oS;iq=1,oS=t;function t(e){var n={},r=[],i;function s(o){Object.hasOwn(n,o)||(n[o]=!0,i.push(o),e.successors(o).forEach(s),e.predecessors(o).forEach(s))}return e.nodes().forEach(function(o){i=[],s(o),i.length&&r.push(i)}),r}return oS}var aS,sq;function bL(){if(sq)return aS;sq=1;class t{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))}_decrease(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s}_swap(n,r){var i=this._arr,s=this._keyIndices,o=i[n],a=i[r];i[n]=a,i[r]=o,s[a.key]=n,s[o.key]=r}}return aS=t,aS}var lS,oq;function vL(){if(oq)return lS;oq=1;var t=bL();lS=n;var e=()=>1;function n(i,s,o,a){return r(i,String(s),o||e,a||function(u){return i.outEdges(u)})}function r(i,s,o,a){var u={},d=new t,p,h,y=function(x){var _=x.v!==p?x.v:x.w,S=u[_],I=o(x),C=h.distance+I;if(I<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+I);C<S.distance&&(S.distance=C,S.predecessor=p,d.decrease(_,C))};for(i.nodes().forEach(function(x){var _=x===s?0:Number.POSITIVE_INFINITY;u[x]={distance:_},d.add(x,_)});d.size()>0&&(p=d.removeMin(),h=u[p],h.distance!==Number.POSITIVE_INFINITY);)a(p).forEach(y);return u}return lS}var uS,aq;function ZY(){if(aq)return uS;aq=1;var t=vL();uS=e;function e(n,r,i){return n.nodes().reduce(function(s,o){return s[o]=t(n,o,r,i),s},{})}return uS}var cS,lq;function xL(){if(lq)return cS;lq=1,cS=t;function t(e){var n=0,r=[],i={},s=[];function o(a){var u=i[a]={onStack:!0,lowlink:n,index:n++};if(r.push(a),e.successors(a).forEach(function(h){Object.hasOwn(i,h)?i[h].onStack&&(u.lowlink=Math.min(u.lowlink,i[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,i[h].lowlink))}),u.lowlink===u.index){var d=[],p;do p=r.pop(),i[p].onStack=!1,d.push(p);while(a!==p);s.push(d)}}return e.nodes().forEach(function(a){Object.hasOwn(i,a)||o(a)}),s}return cS}var dS,uq;function YY(){if(uq)return dS;uq=1;var t=xL();dS=e;function e(n){return t(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return dS}var fS,cq;function XY(){if(cq)return fS;cq=1,fS=e;var t=()=>1;function e(r,i,s){return n(r,i||t,s||function(o){return r.outEdges(o)})}function n(r,i,s){var o={},a=r.nodes();return a.forEach(function(u){o[u]={},o[u][u]={distance:0},a.forEach(function(d){u!==d&&(o[u][d]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(d){var p=d.v===u?d.w:d.v,h=i(d);o[u][p]={distance:h,predecessor:u}})}),a.forEach(function(u){var d=o[u];a.forEach(function(p){var h=o[p];a.forEach(function(y){var x=h[u],_=d[y],S=h[y],I=x.distance+_.distance;I<S.distance&&(S.distance=I,S.predecessor=_.predecessor)})})}),o}return fS}var pS,dq;function wL(){if(dq)return pS;dq=1;function t(n){var r={},i={},s=[];function o(a){if(Object.hasOwn(i,a))throw new e;Object.hasOwn(r,a)||(i[a]=!0,r[a]=!0,n.predecessors(a).forEach(o),delete i[a],s.push(a))}if(n.sinks().forEach(o),Object.keys(r).length!==n.nodeCount())throw new e;return s}class e extends Error{constructor(){super(...arguments)}}return pS=t,t.CycleException=e,pS}var hS,fq;function eX(){if(fq)return hS;fq=1;var t=wL();hS=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return hS}var mS,pq;function _L(){if(pq)return mS;pq=1,mS=t;function t(i,s,o){Array.isArray(s)||(s=[s]);var a=i.isDirected()?h=>i.successors(h):h=>i.neighbors(h),u=o==="post"?e:n,d=[],p={};return s.forEach(h=>{if(!i.hasNode(h))throw new Error("Graph does not have node: "+h);u(h,a,p,d)}),d}function e(i,s,o,a){for(var u=[[i,!1]];u.length>0;){var d=u.pop();d[1]?a.push(d[0]):Object.hasOwn(o,d[0])||(o[d[0]]=!0,u.push([d[0],!0]),r(s(d[0]),p=>u.push([p,!1])))}}function n(i,s,o,a){for(var u=[i];u.length>0;){var d=u.pop();Object.hasOwn(o,d)||(o[d]=!0,a.push(d),r(s(d),p=>u.push(p)))}}function r(i,s){for(var o=i.length;o--;)s(i[o],o,i);return i}return mS}var gS,hq;function tX(){if(hq)return gS;hq=1;var t=_L();gS=e;function e(n,r){return t(n,r,"post")}return gS}var yS,mq;function nX(){if(mq)return yS;mq=1;var t=_L();yS=e;function e(n,r){return t(n,r,"pre")}return yS}var bS,gq;function rX(){if(gq)return bS;gq=1;var t=a1(),e=bL();bS=n;function n(r,i){var s=new t,o={},a=new e,u;function d(h){var y=h.v===u?h.w:h.v,x=a.priority(y);if(x!==void 0){var _=i(h);_<x&&(o[y]=u,a.decrease(y,_))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(h){a.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),a.decrease(r.nodes()[0],0);for(var p=!1;a.size()>0;){if(u=a.removeMin(),Object.hasOwn(o,u))s.setEdge(u,o[u]);else{if(p)throw new Error("Input graph is not connected: "+r);p=!0}r.nodeEdges(u).forEach(d)}return s}return bS}var vS,yq;function iX(){return yq||(yq=1,vS={components:JY(),dijkstra:vL(),dijkstraAll:ZY(),findCycles:YY(),floydWarshall:XY(),isAcyclic:eX(),postorder:tX(),preorder:nX(),prim:rX(),tarjan:xL(),topsort:wL()}),vS}var xS,bq;function Go(){if(bq)return xS;bq=1;var t=KY();return xS={Graph:t.Graph,json:QY(),alg:iX(),version:t.version},xS}var wS,vq;function sX(){if(vq)return wS;vq=1;class t{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return e(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&e(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,o=s._prev;for(;o!==s;)i.push(JSON.stringify(o,n)),o=o._prev;return"["+i.join(", ")+"]"}}function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return wS=t,wS}var _S,xq;function oX(){if(xq)return _S;xq=1;let t=Go().Graph,e=sX();_S=r;let n=()=>1;function r(d,p){if(d.nodeCount()<=1)return[];let h=o(d,p||n);return i(h.graph,h.buckets,h.zeroIdx).flatMap(x=>d.outEdges(x.v,x.w))}function i(d,p,h){let y=[],x=p[p.length-1],_=p[0],S;for(;d.nodeCount();){for(;S=_.dequeue();)s(d,p,h,S);for(;S=x.dequeue();)s(d,p,h,S);if(d.nodeCount()){for(let I=p.length-2;I>0;--I)if(S=p[I].dequeue(),S){y=y.concat(s(d,p,h,S,!0));break}}}return y}function s(d,p,h,y,x){let _=x?[]:void 0;return d.inEdges(y.v).forEach(S=>{let I=d.edge(S),C=d.node(S.v);x&&_.push({v:S.v,w:S.w}),C.out-=I,a(p,h,C)}),d.outEdges(y.v).forEach(S=>{let I=d.edge(S),C=S.w,k=d.node(C);k.in-=I,a(p,h,k)}),d.removeNode(y.v),_}function o(d,p){let h=new t,y=0,x=0;d.nodes().forEach(I=>{h.setNode(I,{v:I,in:0,out:0})}),d.edges().forEach(I=>{let C=h.edge(I.v,I.w)||0,k=p(I),R=C+k;h.setEdge(I.v,I.w,R),x=Math.max(x,h.node(I.v).out+=k),y=Math.max(y,h.node(I.w).in+=k)});let _=u(x+y+3).map(()=>new e),S=y+1;return h.nodes().forEach(I=>{a(_,S,h.node(I))}),{graph:h,buckets:_,zeroIdx:S}}function a(d,p,h){h.out?h.in?d[h.out-h.in+p].enqueue(h):d[d.length-1].enqueue(h):d[0].enqueue(h)}function u(d){const p=[];for(let h=0;h<d;h++)p.push(h);return p}return _S}var SS,wq;function ri(){if(wq)return SS;wq=1;let t=Go().Graph;SS={addBorderNode:p,addDummyNode:e,applyWithChunking:x,asNonCompoundGraph:r,buildLayerMatrix:a,intersectRect:o,mapValues:F,maxRank:_,normalizeRanks:u,notime:C,partition:S,pick:A,predecessorWeights:s,range:j,removeEmptyRanks:d,simplify:n,successorWeights:i,time:I,uniqueId:R,zipObject:$};function e(P,q,B,L){let U;do U=R(L);while(P.hasNode(U));return B.dummy=q,P.setNode(U,B),U}function n(P){let q=new t().setGraph(P.graph());return P.nodes().forEach(B=>q.setNode(B,P.node(B))),P.edges().forEach(B=>{let L=q.edge(B.v,B.w)||{weight:0,minlen:1},U=P.edge(B);q.setEdge(B.v,B.w,{weight:L.weight+U.weight,minlen:Math.max(L.minlen,U.minlen)})}),q}function r(P){let q=new t({multigraph:P.isMultigraph()}).setGraph(P.graph());return P.nodes().forEach(B=>{P.children(B).length||q.setNode(B,P.node(B))}),P.edges().forEach(B=>{q.setEdge(B,P.edge(B))}),q}function i(P){let q=P.nodes().map(B=>{let L={};return P.outEdges(B).forEach(U=>{L[U.w]=(L[U.w]||0)+P.edge(U).weight}),L});return $(P.nodes(),q)}function s(P){let q=P.nodes().map(B=>{let L={};return P.inEdges(B).forEach(U=>{L[U.v]=(L[U.v]||0)+P.edge(U).weight}),L});return $(P.nodes(),q)}function o(P,q){let B=P.x,L=P.y,U=q.x-B,V=q.y-L,z=P.width/2,X=P.height/2;if(!U&&!V)throw new Error("Not possible to find intersection inside of the rectangle");let J,le;return Math.abs(V)*z>Math.abs(U)*X?(V<0&&(X=-X),J=X*U/V,le=X):(U<0&&(z=-z),J=z,le=z*V/U),{x:B+J,y:L+le}}function a(P){let q=j(_(P)+1).map(()=>[]);return P.nodes().forEach(B=>{let L=P.node(B),U=L.rank;U!==void 0&&(q[U][L.order]=B)}),q}function u(P){let q=P.nodes().map(L=>{let U=P.node(L).rank;return U===void 0?Number.MAX_VALUE:U}),B=x(Math.min,q);P.nodes().forEach(L=>{let U=P.node(L);Object.hasOwn(U,"rank")&&(U.rank-=B)})}function d(P){let q=P.nodes().map(z=>P.node(z).rank),B=x(Math.min,q),L=[];P.nodes().forEach(z=>{let X=P.node(z).rank-B;L[X]||(L[X]=[]),L[X].push(z)});let U=0,V=P.graph().nodeRankFactor;Array.from(L).forEach((z,X)=>{z===void 0&&X%V!==0?--U:z!==void 0&&U&&z.forEach(J=>P.node(J).rank+=U)})}function p(P,q,B,L){let U={width:0,height:0};return arguments.length>=4&&(U.rank=B,U.order=L),e(P,"border",U,q)}function h(P,q=y){const B=[];for(let L=0;L<P.length;L+=q){const U=P.slice(L,L+q);B.push(U)}return B}const y=65535;function x(P,q){if(q.length>y){const B=h(q);return P.apply(null,B.map(L=>P.apply(null,L)))}else return P.apply(null,q)}function _(P){const B=P.nodes().map(L=>{let U=P.node(L).rank;return U===void 0?Number.MIN_VALUE:U});return x(Math.max,B)}function S(P,q){let B={lhs:[],rhs:[]};return P.forEach(L=>{q(L)?B.lhs.push(L):B.rhs.push(L)}),B}function I(P,q){let B=Date.now();try{return q()}finally{console.log(P+" time: "+(Date.now()-B)+"ms")}}function C(P,q){return q()}let k=0;function R(P){var q=++k;return toString(P)+q}function j(P,q,B=1){q==null&&(q=P,P=0);let L=V=>V<q;B<0&&(L=V=>q<V);const U=[];for(let V=P;L(V);V+=B)U.push(V);return U}function A(P,q){const B={};for(const L of q)P[L]!==void 0&&(B[L]=P[L]);return B}function F(P,q){let B=q;return typeof q=="string"&&(B=L=>L[q]),Object.entries(P).reduce((L,[U,V])=>(L[U]=B(V,U),L),{})}function $(P,q){return P.reduce((B,L,U)=>(B[L]=q[U],B),{})}return SS}var ES,_q;function aX(){if(_q)return ES;_q=1;let t=oX(),e=ri().uniqueId;ES={run:n,undo:i};function n(s){(s.graph().acyclicer==="greedy"?t(s,a(s)):r(s)).forEach(u=>{let d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,e("rev"))});function a(u){return d=>u.edge(d).weight}}function r(s){let o=[],a={},u={};function d(p){Object.hasOwn(u,p)||(u[p]=!0,a[p]=!0,s.outEdges(p).forEach(h=>{Object.hasOwn(a,h.w)?o.push(h):d(h.w)}),delete a[p])}return s.nodes().forEach(d),o}function i(s){s.edges().forEach(o=>{let a=s.edge(o);if(a.reversed){s.removeEdge(o);let u=a.forwardName;delete a.reversed,delete a.forwardName,s.setEdge(o.w,o.v,a,u)}})}return ES}var IS,Sq;function lX(){if(Sq)return IS;Sq=1;let t=ri();IS={run:e,undo:r};function e(i){i.graph().dummyChains=[],i.edges().forEach(s=>n(i,s))}function n(i,s){let o=s.v,a=i.node(o).rank,u=s.w,d=i.node(u).rank,p=s.name,h=i.edge(s),y=h.labelRank;if(d===a+1)return;i.removeEdge(s);let x,_,S;for(S=0,++a;a<d;++S,++a)h.points=[],_={width:0,height:0,edgeLabel:h,edgeObj:s,rank:a},x=t.addDummyNode(i,"edge",_,"_d"),a===y&&(_.width=h.width,_.height=h.height,_.dummy="edge-label",_.labelpos=h.labelpos),i.setEdge(o,x,{weight:h.weight},p),S===0&&i.graph().dummyChains.push(x),o=x;i.setEdge(o,u,{weight:h.weight},p)}function r(i){i.graph().dummyChains.forEach(s=>{let o=i.node(s),a=o.edgeLabel,u;for(i.setEdge(o.edgeObj,a);o.dummy;)u=i.successors(s)[0],i.removeNode(s),a.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(a.x=o.x,a.y=o.y,a.width=o.width,a.height=o.height),s=u,o=i.node(s)})}return IS}var NS,Eq;function xv(){if(Eq)return NS;Eq=1;const{applyWithChunking:t}=ri();NS={longestPath:e,slack:n};function e(r){var i={};function s(o){var a=r.node(o);if(Object.hasOwn(i,o))return a.rank;i[o]=!0;let u=r.outEdges(o).map(p=>p==null?Number.POSITIVE_INFINITY:s(p.w)-r.edge(p).minlen);var d=t(Math.min,u);return d===Number.POSITIVE_INFINITY&&(d=0),a.rank=d}r.sources().forEach(s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return NS}var kS,Iq;function SL(){if(Iq)return kS;Iq=1;var t=Go().Graph,e=xv().slack;kS=n;function n(o){var a=new t({directed:!1}),u=o.nodes()[0],d=o.nodeCount();a.setNode(u,{});for(var p,h;r(a,o)<d;)p=i(a,o),h=a.hasNode(p.v)?e(o,p):-e(o,p),s(a,o,h);return a}function r(o,a){function u(d){a.nodeEdges(d).forEach(p=>{var h=p.v,y=d===h?p.w:h;!o.hasNode(y)&&!e(a,p)&&(o.setNode(y,{}),o.setEdge(d,y,{}),u(y))})}return o.nodes().forEach(u),o.nodeCount()}function i(o,a){return a.edges().reduce((d,p)=>{let h=Number.POSITIVE_INFINITY;return o.hasNode(p.v)!==o.hasNode(p.w)&&(h=e(a,p)),h<d[0]?[h,p]:d},[Number.POSITIVE_INFINITY,null])[1]}function s(o,a,u){o.nodes().forEach(d=>a.node(d).rank+=u)}return kS}var CS,Nq;function uX(){if(Nq)return CS;Nq=1;var t=SL(),e=xv().slack,n=xv().longestPath,r=Go().alg.preorder,i=Go().alg.postorder,s=ri().simplify;CS=o,o.initLowLimValues=p,o.initCutValues=a,o.calcCutValue=d,o.leaveEdge=y,o.enterEdge=x,o.exchangeEdges=_;function o(k){k=s(k),n(k);var R=t(k);p(R),a(R,k);for(var j,A;j=y(R);)A=x(R,k,j),_(R,k,j,A)}function a(k,R){var j=i(k,k.nodes());j=j.slice(0,j.length-1),j.forEach(A=>u(k,R,A))}function u(k,R,j){var A=k.node(j),F=A.parent;k.edge(j,F).cutvalue=d(k,R,j)}function d(k,R,j){var A=k.node(j),F=A.parent,$=!0,P=R.edge(j,F),q=0;return P||($=!1,P=R.edge(F,j)),q=P.weight,R.nodeEdges(j).forEach(B=>{var L=B.v===j,U=L?B.w:B.v;if(U!==F){var V=L===$,z=R.edge(B).weight;if(q+=V?z:-z,I(k,j,U)){var X=k.edge(j,U).cutvalue;q+=V?-X:X}}}),q}function p(k,R){arguments.length<2&&(R=k.nodes()[0]),h(k,{},1,R)}function h(k,R,j,A,F){var $=j,P=k.node(A);return R[A]=!0,k.neighbors(A).forEach(q=>{Object.hasOwn(R,q)||(j=h(k,R,j,q,A))}),P.low=$,P.lim=j++,F?P.parent=F:delete P.parent,j}function y(k){return k.edges().find(R=>k.edge(R).cutvalue<0)}function x(k,R,j){var A=j.v,F=j.w;R.hasEdge(A,F)||(A=j.w,F=j.v);var $=k.node(A),P=k.node(F),q=$,B=!1;$.lim>P.lim&&(q=P,B=!0);var L=R.edges().filter(U=>B===C(k,k.node(U.v),q)&&B!==C(k,k.node(U.w),q));return L.reduce((U,V)=>e(R,V)<e(R,U)?V:U)}function _(k,R,j,A){var F=j.v,$=j.w;k.removeEdge(F,$),k.setEdge(A.v,A.w,{}),p(k),a(k,R),S(k,R)}function S(k,R){var j=k.nodes().find(F=>!R.node(F).parent),A=r(k,j);A=A.slice(1),A.forEach(F=>{var $=k.node(F).parent,P=R.edge(F,$),q=!1;P||(P=R.edge($,F),q=!0),R.node(F).rank=R.node($).rank+(q?P.minlen:-P.minlen)})}function I(k,R,j){return k.hasEdge(R,j)}function C(k,R,j){return j.low<=R.lim&&R.lim<=j.lim}return CS}var TS,kq;function cX(){if(kq)return TS;kq=1;var t=xv(),e=t.longestPath,n=SL(),r=uX();TS=i;function i(u){switch(u.graph().ranker){case"network-simplex":a(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:a(u)}}var s=e;function o(u){e(u),n(u)}function a(u){r(u)}return TS}var RS,Cq;function dX(){if(Cq)return RS;Cq=1,RS=t;function t(r){let i=n(r);r.graph().dummyChains.forEach(s=>{let o=r.node(s),a=o.edgeObj,u=e(r,i,a.v,a.w),d=u.path,p=u.lca,h=0,y=d[h],x=!0;for(;s!==a.w;){if(o=r.node(s),x){for(;(y=d[h])!==p&&r.node(y).maxRank<o.rank;)h++;y===p&&(x=!1)}if(!x){for(;h<d.length-1&&r.node(y=d[h+1]).minRank<=o.rank;)h++;y=d[h]}r.setParent(s,y),s=r.successors(s)[0]}})}function e(r,i,s,o){let a=[],u=[],d=Math.min(i[s].low,i[o].low),p=Math.max(i[s].lim,i[o].lim),h,y;h=s;do h=r.parent(h),a.push(h);while(h&&(i[h].low>d||p>i[h].lim));for(y=h,h=o;(h=r.parent(h))!==y;)u.push(h);return{path:a.concat(u.reverse()),lca:y}}function n(r){let i={},s=0;function o(a){let u=s;r.children(a).forEach(o),i[a]={low:u,lim:s++}}return r.children().forEach(o),i}return RS}var jS,Tq;function fX(){if(Tq)return jS;Tq=1;let t=ri();jS={run:e,cleanup:s};function e(o){let a=t.addDummyNode(o,"root",{},"_root"),u=r(o),d=Object.values(u),p=t.applyWithChunking(Math.max,d)-1,h=2*p+1;o.graph().nestingRoot=a,o.edges().forEach(x=>o.edge(x).minlen*=h);let y=i(o)+1;o.children().forEach(x=>n(o,a,h,y,p,u,x)),o.graph().nodeRankFactor=h}function n(o,a,u,d,p,h,y){let x=o.children(y);if(!x.length){y!==a&&o.setEdge(a,y,{weight:0,minlen:u});return}let _=t.addBorderNode(o,"_bt"),S=t.addBorderNode(o,"_bb"),I=o.node(y);o.setParent(_,y),I.borderTop=_,o.setParent(S,y),I.borderBottom=S,x.forEach(C=>{n(o,a,u,d,p,h,C);let k=o.node(C),R=k.borderTop?k.borderTop:C,j=k.borderBottom?k.borderBottom:C,A=k.borderTop?d:2*d,F=R!==j?1:p-h[y]+1;o.setEdge(_,R,{weight:A,minlen:F,nestingEdge:!0}),o.setEdge(j,S,{weight:A,minlen:F,nestingEdge:!0})}),o.parent(y)||o.setEdge(a,_,{weight:0,minlen:p+h[y]})}function r(o){var a={};function u(d,p){var h=o.children(d);h&&h.length&&h.forEach(y=>u(y,p+1)),a[d]=p}return o.children().forEach(d=>u(d,1)),a}function i(o){return o.edges().reduce((a,u)=>a+o.edge(u).weight,0)}function s(o){var a=o.graph();o.removeNode(a.nestingRoot),delete a.nestingRoot,o.edges().forEach(u=>{var d=o.edge(u);d.nestingEdge&&o.removeEdge(u)})}return jS}var OS,Rq;function pX(){if(Rq)return OS;Rq=1;let t=ri();OS=e;function e(r){function i(s){let o=r.children(s),a=r.node(s);if(o.length&&o.forEach(i),Object.hasOwn(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(let u=a.minRank,d=a.maxRank+1;u<d;++u)n(r,"borderLeft","_bl",s,a,u),n(r,"borderRight","_br",s,a,u)}}r.children().forEach(i)}function n(r,i,s,o,a,u){let d={width:0,height:0,rank:u,borderType:i},p=a[i][u-1],h=t.addDummyNode(r,"border",d,s);a[i][u]=h,r.setParent(h,o),p&&r.setEdge(p,h,{weight:1})}return OS}var qS,jq;function hX(){if(jq)return qS;jq=1,qS={adjust:t,undo:e};function t(u){let d=u.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&n(u)}function e(u){let d=u.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&i(u),(d==="lr"||d==="rl")&&(o(u),n(u))}function n(u){u.nodes().forEach(d=>r(u.node(d))),u.edges().forEach(d=>r(u.edge(d)))}function r(u){let d=u.width;u.width=u.height,u.height=d}function i(u){u.nodes().forEach(d=>s(u.node(d))),u.edges().forEach(d=>{let p=u.edge(d);p.points.forEach(s),Object.hasOwn(p,"y")&&s(p)})}function s(u){u.y=-u.y}function o(u){u.nodes().forEach(d=>a(u.node(d))),u.edges().forEach(d=>{let p=u.edge(d);p.points.forEach(a),Object.hasOwn(p,"x")&&a(p)})}function a(u){let d=u.x;u.x=u.y,u.y=d}return qS}var AS,Oq;function mX(){if(Oq)return AS;Oq=1;let t=ri();AS=e;function e(n){let r={},i=n.nodes().filter(p=>!n.children(p).length),s=i.map(p=>n.node(p).rank),o=t.applyWithChunking(Math.max,s),a=t.range(o+1).map(()=>[]);function u(p){if(r[p])return;r[p]=!0;let h=n.node(p);a[h.rank].push(p),n.successors(p).forEach(u)}return i.sort((p,h)=>n.node(p).rank-n.node(h).rank).forEach(u),a}return AS}var PS,qq;function gX(){if(qq)return PS;qq=1;let t=ri().zipObject;PS=e;function e(r,i){let s=0;for(let o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){let o=t(s,s.map((y,x)=>x)),a=i.flatMap(y=>r.outEdges(y).map(x=>({pos:o[x.w],weight:r.edge(x).weight})).sort((x,_)=>x.pos-_.pos)),u=1;for(;u<s.length;)u<<=1;let d=2*u-1;u-=1;let p=new Array(d).fill(0),h=0;return a.forEach(y=>{let x=y.pos+u;p[x]+=y.weight;let _=0;for(;x>0;)x%2&&(_+=p[x+1]),x=x-1>>1,p[x]+=y.weight;h+=y.weight*_}),h}return PS}var FS,Aq;function yX(){if(Aq)return FS;Aq=1,FS=t;function t(e,n=[]){return n.map(r=>{let i=e.inEdges(r);if(i.length){let s=i.reduce((o,a)=>{let u=e.edge(a),d=e.node(a.v);return{sum:o.sum+u.weight*d.order,weight:o.weight+u.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return FS}var DS,Pq;function bX(){if(Pq)return DS;Pq=1;let t=ri();DS=e;function e(i,s){let o={};i.forEach((u,d)=>{let p=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};u.barycenter!==void 0&&(p.barycenter=u.barycenter,p.weight=u.weight)}),s.edges().forEach(u=>{let d=o[u.v],p=o[u.w];d!==void 0&&p!==void 0&&(p.indegree++,d.out.push(o[u.w]))});let a=Object.values(o).filter(u=>!u.indegree);return n(a)}function n(i){let s=[];function o(u){return d=>{d.merged||(d.barycenter===void 0||u.barycenter===void 0||d.barycenter>=u.barycenter)&&r(u,d)}}function a(u){return d=>{d.in.push(u),--d.indegree===0&&i.push(d)}}for(;i.length;){let u=i.pop();s.push(u),u.in.reverse().forEach(o(u)),u.out.forEach(a(u))}return s.filter(u=>!u.merged).map(u=>t.pick(u,["vs","i","barycenter","weight"]))}function r(i,s){let o=0,a=0;i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),s.weight&&(o+=s.barycenter*s.weight,a+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/a,i.weight=a,i.i=Math.min(s.i,i.i),s.merged=!0}return DS}var LS,Fq;function vX(){if(Fq)return LS;Fq=1;let t=ri();LS=e;function e(i,s){let o=t.partition(i,_=>Object.hasOwn(_,"barycenter")),a=o.lhs,u=o.rhs.sort((_,S)=>S.i-_.i),d=[],p=0,h=0,y=0;a.sort(r(!!s)),y=n(d,u,y),a.forEach(_=>{y+=_.vs.length,d.push(_.vs),p+=_.barycenter*_.weight,h+=_.weight,y=n(d,u,y)});let x={vs:d.flat(!0)};return h&&(x.barycenter=p/h,x.weight=h),x}function n(i,s,o){let a;for(;s.length&&(a=s[s.length-1]).i<=o;)s.pop(),i.push(a.vs),o++;return o}function r(i){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}return LS}var MS,Dq;function xX(){if(Dq)return MS;Dq=1;let t=yX(),e=bX(),n=vX();MS=r;function r(o,a,u,d){let p=o.children(a),h=o.node(a),y=h?h.borderLeft:void 0,x=h?h.borderRight:void 0,_={};y&&(p=p.filter(k=>k!==y&&k!==x));let S=t(o,p);S.forEach(k=>{if(o.children(k.v).length){let R=r(o,k.v,u,d);_[k.v]=R,Object.hasOwn(R,"barycenter")&&s(k,R)}});let I=e(S,u);i(I,_);let C=n(I,d);if(y&&(C.vs=[y,C.vs,x].flat(!0),o.predecessors(y).length)){let k=o.node(o.predecessors(y)[0]),R=o.node(o.predecessors(x)[0]);Object.hasOwn(C,"barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+k.order+R.order)/(C.weight+2),C.weight+=2}return C}function i(o,a){o.forEach(u=>{u.vs=u.vs.flatMap(d=>a[d]?a[d].vs:d)})}function s(o,a){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight):(o.barycenter=a.barycenter,o.weight=a.weight)}return MS}var $S,Lq;function wX(){if(Lq)return $S;Lq=1;let t=Go().Graph,e=ri();$S=n;function n(i,s,o){let a=r(i),u=new t({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(d=>i.node(d));return i.nodes().forEach(d=>{let p=i.node(d),h=i.parent(d);(p.rank===s||p.minRank<=s&&s<=p.maxRank)&&(u.setNode(d),u.setParent(d,h||a),i[o](d).forEach(y=>{let x=y.v===d?y.w:y.v,_=u.edge(x,d),S=_!==void 0?_.weight:0;u.setEdge(x,d,{weight:i.edge(y).weight+S})}),Object.hasOwn(p,"minRank")&&u.setNode(d,{borderLeft:p.borderLeft[s],borderRight:p.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return $S}var BS,Mq;function _X(){if(Mq)return BS;Mq=1,BS=t;function t(e,n,r){let i={},s;r.forEach(o=>{let a=e.parent(o),u,d;for(;a;){if(u=e.parent(a),u?(d=i[u],i[u]=a):(d=s,s=a),d&&d!==a){n.setEdge(d,a);return}a=u}})}return BS}var zS,$q;function SX(){if($q)return zS;$q=1;let t=mX(),e=gX(),n=xX(),r=wX(),i=_X(),s=Go().Graph,o=ri();zS=a;function a(h,y){if(y&&typeof y.customOrder=="function"){y.customOrder(h,a);return}let x=o.maxRank(h),_=u(h,o.range(1,x+1),"inEdges"),S=u(h,o.range(x-1,-1,-1),"outEdges"),I=t(h);if(p(h,I),y&&y.disableOptimalOrderHeuristic)return;let C=Number.POSITIVE_INFINITY,k;for(let R=0,j=0;j<4;++R,++j){d(R%2?_:S,R%4>=2),I=o.buildLayerMatrix(h);let A=e(h,I);A<C&&(j=0,k=Object.assign({},I),C=A)}p(h,k)}function u(h,y,x){return y.map(function(_){return r(h,_,x)})}function d(h,y){let x=new s;h.forEach(function(_){let S=_.graph().root,I=n(_,S,x,y);I.vs.forEach((C,k)=>_.node(C).order=k),i(_,x,I.vs)})}function p(h,y){Object.values(y).forEach(x=>x.forEach((_,S)=>h.node(_).order=S))}return zS}var WS,Bq;function EX(){if(Bq)return WS;Bq=1;let t=Go().Graph,e=ri();WS={positionX:x,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:o,verticalAlignment:a,horizontalCompaction:u,alignCoordinates:h,findSmallestWidthAlignment:p,balance:y};function n(I,C){let k={};function R(j,A){let F=0,$=0,P=j.length,q=A[A.length-1];return A.forEach((B,L)=>{let U=i(I,B),V=U?I.node(U).order:P;(U||B===q)&&(A.slice($,L+1).forEach(z=>{I.predecessors(z).forEach(X=>{let J=I.node(X),le=J.order;(le<F||V<le)&&!(J.dummy&&I.node(z).dummy)&&s(k,X,z)})}),$=L+1,F=V)}),A}return C.length&&C.reduce(R),k}function r(I,C){let k={};function R(A,F,$,P,q){let B;e.range(F,$).forEach(L=>{B=A[L],I.node(B).dummy&&I.predecessors(B).forEach(U=>{let V=I.node(U);V.dummy&&(V.order<P||V.order>q)&&s(k,U,B)})})}function j(A,F){let $=-1,P,q=0;return F.forEach((B,L)=>{if(I.node(B).dummy==="border"){let U=I.predecessors(B);U.length&&(P=I.node(U[0]).order,R(F,q,L,$,P),q=L,$=P)}R(F,q,F.length,P,A.length)}),F}return C.length&&C.reduce(j),k}function i(I,C){if(I.node(C).dummy)return I.predecessors(C).find(k=>I.node(k).dummy)}function s(I,C,k){if(C>k){let j=C;C=k,k=j}let R=I[C];R||(I[C]=R={}),R[k]=!0}function o(I,C,k){if(C>k){let R=C;C=k,k=R}return!!I[C]&&Object.hasOwn(I[C],k)}function a(I,C,k,R){let j={},A={},F={};return C.forEach($=>{$.forEach((P,q)=>{j[P]=P,A[P]=P,F[P]=q})}),C.forEach($=>{let P=-1;$.forEach(q=>{let B=R(q);if(B.length){B=B.sort((U,V)=>F[U]-F[V]);let L=(B.length-1)/2;for(let U=Math.floor(L),V=Math.ceil(L);U<=V;++U){let z=B[U];A[q]===q&&P<F[z]&&!o(k,q,z)&&(A[z]=q,A[q]=j[q]=j[z],P=F[z])}}})}),{root:j,align:A}}function u(I,C,k,R,j){let A={},F=d(I,C,k,j),$=j?"borderLeft":"borderRight";function P(L,U){let V=F.nodes(),z=V.pop(),X={};for(;z;)X[z]?L(z):(X[z]=!0,V.push(z),V=V.concat(U(z))),z=V.pop()}function q(L){A[L]=F.inEdges(L).reduce((U,V)=>Math.max(U,A[V.v]+F.edge(V)),0)}function B(L){let U=F.outEdges(L).reduce((z,X)=>Math.min(z,A[X.w]-F.edge(X)),Number.POSITIVE_INFINITY),V=I.node(L);U!==Number.POSITIVE_INFINITY&&V.borderType!==$&&(A[L]=Math.max(A[L],U))}return P(q,F.predecessors.bind(F)),P(B,F.successors.bind(F)),Object.keys(R).forEach(L=>A[L]=A[k[L]]),A}function d(I,C,k,R){let j=new t,A=I.graph(),F=_(A.nodesep,A.edgesep,R);return C.forEach($=>{let P;$.forEach(q=>{let B=k[q];if(j.setNode(B),P){var L=k[P],U=j.edge(L,B);j.setEdge(L,B,Math.max(F(I,q,P),U||0))}P=q})}),j}function p(I,C){return Object.values(C).reduce((k,R)=>{let j=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;Object.entries(R).forEach(([$,P])=>{let q=S(I,$)/2;j=Math.max(P+q,j),A=Math.min(P-q,A)});const F=j-A;return F<k[0]&&(k=[F,R]),k},[Number.POSITIVE_INFINITY,null])[1]}function h(I,C){let k=Object.values(C),R=e.applyWithChunking(Math.min,k),j=e.applyWithChunking(Math.max,k);["u","d"].forEach(A=>{["l","r"].forEach(F=>{let $=A+F,P=I[$];if(P===C)return;let q=Object.values(P),B=R-e.applyWithChunking(Math.min,q);F!=="l"&&(B=j-e.applyWithChunking(Math.max,q)),B&&(I[$]=e.mapValues(P,L=>L+B))})})}function y(I,C){return e.mapValues(I.ul,(k,R)=>{if(C)return I[C.toLowerCase()][R];{let j=Object.values(I).map(A=>A[R]).sort((A,F)=>A-F);return(j[1]+j[2])/2}})}function x(I){let C=e.buildLayerMatrix(I),k=Object.assign(n(I,C),r(I,C)),R={},j;["u","d"].forEach(F=>{j=F==="u"?C:Object.values(C).reverse(),["l","r"].forEach($=>{$==="r"&&(j=j.map(L=>Object.values(L).reverse()));let P=(F==="u"?I.predecessors:I.successors).bind(I),q=a(I,j,k,P),B=u(I,j,q.root,q.align,$==="r");$==="r"&&(B=e.mapValues(B,L=>-L)),R[F+$]=B})});let A=p(I,R);return h(R,A),y(R,I.graph().align)}function _(I,C,k){return(R,j,A)=>{let F=R.node(j),$=R.node(A),P=0,q;if(P+=F.width/2,Object.hasOwn(F,"labelpos"))switch(F.labelpos.toLowerCase()){case"l":q=-F.width/2;break;case"r":q=F.width/2;break}if(q&&(P+=k?q:-q),q=0,P+=(F.dummy?C:I)/2,P+=($.dummy?C:I)/2,P+=$.width/2,Object.hasOwn($,"labelpos"))switch($.labelpos.toLowerCase()){case"l":q=$.width/2;break;case"r":q=-$.width/2;break}return q&&(P+=k?q:-q),q=0,P}}function S(I,C){return I.node(C).width}return WS}var US,zq;function IX(){if(zq)return US;zq=1;let t=ri(),e=EX().positionX;US=n;function n(i){i=t.asNonCompoundGraph(i),r(i),Object.entries(e(i)).forEach(([s,o])=>i.node(s).x=o)}function r(i){let s=t.buildLayerMatrix(i),o=i.graph().ranksep,a=0;s.forEach(u=>{const d=u.reduce((p,h)=>{const y=i.node(h).height;return p>y?p:y},0);u.forEach(p=>i.node(p).y=a+d/2),a+=d+o})}return US}var VS,Wq;function NX(){if(Wq)return VS;Wq=1;let t=aX(),e=lX(),n=cX(),r=ri().normalizeRanks,i=dX(),s=ri().removeEmptyRanks,o=fX(),a=pX(),u=hX(),d=SX(),p=IX(),h=ri(),y=Go().Graph;VS=x;function x(de,ye){let we=ye&&ye.debugTiming?h.time:h.notime;we("layout",()=>{let Ie=we("  buildLayoutGraph",()=>P(de));we("  runLayout",()=>_(Ie,we,ye)),we("  updateInputGraph",()=>S(de,Ie))})}function _(de,ye,we){ye("    makeSpaceForEdgeLabels",()=>q(de)),ye("    removeSelfEdges",()=>ie(de)),ye("    acyclic",()=>t.run(de)),ye("    nestingGraph.run",()=>o.run(de)),ye("    rank",()=>n(h.asNonCompoundGraph(de))),ye("    injectEdgeLabelProxies",()=>B(de)),ye("    removeEmptyRanks",()=>s(de)),ye("    nestingGraph.cleanup",()=>o.cleanup(de)),ye("    normalizeRanks",()=>r(de)),ye("    assignRankMinMax",()=>L(de)),ye("    removeEdgeLabelProxies",()=>U(de)),ye("    normalize.run",()=>e.run(de)),ye("    parentDummyChains",()=>i(de)),ye("    addBorderSegments",()=>a(de)),ye("    order",()=>d(de,we)),ye("    insertSelfEdges",()=>ne(de)),ye("    adjustCoordinateSystem",()=>u.adjust(de)),ye("    position",()=>p(de)),ye("    positionSelfEdges",()=>oe(de)),ye("    removeBorderNodes",()=>le(de)),ye("    normalize.undo",()=>e.undo(de)),ye("    fixupEdgeLabelCoords",()=>X(de)),ye("    undoCoordinateSystem",()=>u.undo(de)),ye("    translateGraph",()=>V(de)),ye("    assignNodeIntersects",()=>z(de)),ye("    reversePoints",()=>J(de)),ye("    acyclic.undo",()=>t.undo(de))}function S(de,ye){de.nodes().forEach(we=>{let Ie=de.node(we),ze=ye.node(we);Ie&&(Ie.x=ze.x,Ie.y=ze.y,Ie.rank=ze.rank,ye.children(we).length&&(Ie.width=ze.width,Ie.height=ze.height))}),de.edges().forEach(we=>{let Ie=de.edge(we),ze=ye.edge(we);Ie.points=ze.points,Object.hasOwn(ze,"x")&&(Ie.x=ze.x,Ie.y=ze.y)}),de.graph().width=ye.graph().width,de.graph().height=ye.graph().height}let I=["nodesep","edgesep","ranksep","marginx","marginy"],C={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},k=["acyclicer","ranker","rankdir","align"],R=["width","height"],j={width:0,height:0},A=["minlen","weight","width","height","labeloffset"],F={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},$=["labelpos"];function P(de){let ye=new y({multigraph:!0,compound:!0}),we=ce(de.graph());return ye.setGraph(Object.assign({},C,te(we,I),h.pick(we,k))),de.nodes().forEach(Ie=>{let ze=ce(de.node(Ie));const je=te(ze,R);Object.keys(j).forEach(De=>{je[De]===void 0&&(je[De]=j[De])}),ye.setNode(Ie,je),ye.setParent(Ie,de.parent(Ie))}),de.edges().forEach(Ie=>{let ze=ce(de.edge(Ie));ye.setEdge(Ie,Object.assign({},F,te(ze,A),h.pick(ze,$)))}),ye}function q(de){let ye=de.graph();ye.ranksep/=2,de.edges().forEach(we=>{let Ie=de.edge(we);Ie.minlen*=2,Ie.labelpos.toLowerCase()!=="c"&&(ye.rankdir==="TB"||ye.rankdir==="BT"?Ie.width+=Ie.labeloffset:Ie.height+=Ie.labeloffset)})}function B(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(we.width&&we.height){let Ie=de.node(ye.v),je={rank:(de.node(ye.w).rank-Ie.rank)/2+Ie.rank,e:ye};h.addDummyNode(de,"edge-proxy",je,"_ep")}})}function L(de){let ye=0;de.nodes().forEach(we=>{let Ie=de.node(we);Ie.borderTop&&(Ie.minRank=de.node(Ie.borderTop).rank,Ie.maxRank=de.node(Ie.borderBottom).rank,ye=Math.max(ye,Ie.maxRank))}),de.graph().maxRank=ye}function U(de){de.nodes().forEach(ye=>{let we=de.node(ye);we.dummy==="edge-proxy"&&(de.edge(we.e).labelRank=we.rank,de.removeNode(ye))})}function V(de){let ye=Number.POSITIVE_INFINITY,we=0,Ie=Number.POSITIVE_INFINITY,ze=0,je=de.graph(),De=je.marginx||0,Je=je.marginy||0;function Xe(Ue){let ut=Ue.x,St=Ue.y,Ot=Ue.width,Gt=Ue.height;ye=Math.min(ye,ut-Ot/2),we=Math.max(we,ut+Ot/2),Ie=Math.min(Ie,St-Gt/2),ze=Math.max(ze,St+Gt/2)}de.nodes().forEach(Ue=>Xe(de.node(Ue))),de.edges().forEach(Ue=>{let ut=de.edge(Ue);Object.hasOwn(ut,"x")&&Xe(ut)}),ye-=De,Ie-=Je,de.nodes().forEach(Ue=>{let ut=de.node(Ue);ut.x-=ye,ut.y-=Ie}),de.edges().forEach(Ue=>{let ut=de.edge(Ue);ut.points.forEach(St=>{St.x-=ye,St.y-=Ie}),Object.hasOwn(ut,"x")&&(ut.x-=ye),Object.hasOwn(ut,"y")&&(ut.y-=Ie)}),je.width=we-ye+De,je.height=ze-Ie+Je}function z(de){de.edges().forEach(ye=>{let we=de.edge(ye),Ie=de.node(ye.v),ze=de.node(ye.w),je,De;we.points?(je=we.points[0],De=we.points[we.points.length-1]):(we.points=[],je=ze,De=Ie),we.points.unshift(h.intersectRect(Ie,je)),we.points.push(h.intersectRect(ze,De))})}function X(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(Object.hasOwn(we,"x"))switch((we.labelpos==="l"||we.labelpos==="r")&&(we.width-=we.labeloffset),we.labelpos){case"l":we.x-=we.width/2+we.labeloffset;break;case"r":we.x+=we.width/2+we.labeloffset;break}})}function J(de){de.edges().forEach(ye=>{let we=de.edge(ye);we.reversed&&we.points.reverse()})}function le(de){de.nodes().forEach(ye=>{if(de.children(ye).length){let we=de.node(ye),Ie=de.node(we.borderTop),ze=de.node(we.borderBottom),je=de.node(we.borderLeft[we.borderLeft.length-1]),De=de.node(we.borderRight[we.borderRight.length-1]);we.width=Math.abs(De.x-je.x),we.height=Math.abs(ze.y-Ie.y),we.x=je.x+we.width/2,we.y=Ie.y+we.height/2}}),de.nodes().forEach(ye=>{de.node(ye).dummy==="border"&&de.removeNode(ye)})}function ie(de){de.edges().forEach(ye=>{if(ye.v===ye.w){var we=de.node(ye.v);we.selfEdges||(we.selfEdges=[]),we.selfEdges.push({e:ye,label:de.edge(ye)}),de.removeEdge(ye)}})}function ne(de){var ye=h.buildLayerMatrix(de);ye.forEach(we=>{var Ie=0;we.forEach((ze,je)=>{var De=de.node(ze);De.order=je+Ie,(De.selfEdges||[]).forEach(Je=>{h.addDummyNode(de,"selfedge",{width:Je.label.width,height:Je.label.height,rank:De.rank,order:je+ ++Ie,e:Je.e,label:Je.label},"_se")}),delete De.selfEdges})})}function oe(de){de.nodes().forEach(ye=>{var we=de.node(ye);if(we.dummy==="selfedge"){var Ie=de.node(we.e.v),ze=Ie.x+Ie.width/2,je=Ie.y,De=we.x-ze,Je=Ie.height/2;de.setEdge(we.e,we.label),de.removeNode(ye),we.label.points=[{x:ze+2*De/3,y:je-Je},{x:ze+5*De/6,y:je-Je},{x:ze+De,y:je},{x:ze+5*De/6,y:je+Je},{x:ze+2*De/3,y:je+Je}],we.label.x=we.x,we.label.y=we.y}})}function te(de,ye){return h.mapValues(h.pick(de,ye),Number)}function ce(de){var ye={};return de&&Object.entries(de).forEach(([we,Ie])=>{typeof we=="string"&&(we=we.toLowerCase()),ye[we]=Ie}),ye}return VS}var HS,Uq;function kX(){if(Uq)return HS;Uq=1;let t=ri(),e=Go().Graph;HS={debugOrdering:n};function n(r){let i=t.buildLayerMatrix(r),s=new e({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+r.node(o).rank)}),r.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),i.forEach((o,a)=>{let u="layer"+a;s.setNode(u,{rank:"same"}),o.reduce((d,p)=>(s.setEdge(d,p,{style:"invis"}),p))}),s}return HS}var GS,Vq;function CX(){return Vq||(Vq=1,GS="1.1.4"),GS}var KS,Hq;function TX(){return Hq||(Hq=1,KS={graphlib:Go(),layout:NX(),debug:kX(),util:{time:ri().time,notime:ri().notime},version:CX()}),KS}var RX=TX();const EL=vo(RX);function Jr(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Jr(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var jX={value:()=>{}};function xx(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new sb(n)}function sb(t){this._=t}function OX(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}sb.prototype=xx.prototype={constructor:sb,on:function(t,e){var n=this._,r=OX(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=qX(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Gq(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Gq(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new sb(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function qX(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Gq(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=jX,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var _I="http://www.w3.org/1999/xhtml";const Kq={svg:"http://www.w3.org/2000/svg",xhtml:_I,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wx(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Kq.hasOwnProperty(e)?{space:Kq[e],local:t}:t}function AX(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===_I&&e.documentElement.namespaceURI===_I?e.createElement(t):e.createElementNS(n,t)}}function PX(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function IL(t){var e=wx(t);return(e.local?PX:AX)(e)}function FX(){}function l1(t){return t==null?FX:function(){return this.querySelector(t)}}function DX(t){typeof t!="function"&&(t=l1(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),u,d,p=0;p<o;++p)(u=s[p])&&(d=t.call(u,u.__data__,p,s))&&("__data__"in u&&(d.__data__=u.__data__),a[p]=d);return new zs(r,this._parents)}function LX(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function MX(){return[]}function NL(t){return t==null?MX:function(){return this.querySelectorAll(t)}}function $X(t){return function(){return LX(t.apply(this,arguments))}}function BX(t){typeof t=="function"?t=$X(t):t=NL(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,u,d=0;d<a;++d)(u=o[d])&&(r.push(t.call(u,u.__data__,d,o)),i.push(u));return new zs(r,i)}function kL(t){return function(){return this.matches(t)}}function CL(t){return function(e){return e.matches(t)}}var zX=Array.prototype.find;function WX(t){return function(){return zX.call(this.children,t)}}function UX(){return this.firstElementChild}function VX(t){return this.select(t==null?UX:WX(typeof t=="function"?t:CL(t)))}var HX=Array.prototype.filter;function GX(){return Array.from(this.children)}function KX(t){return function(){return HX.call(this.children,t)}}function QX(t){return this.selectAll(t==null?GX:KX(typeof t=="function"?t:CL(t)))}function JX(t){typeof t!="function"&&(t=kL(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&t.call(u,u.__data__,d,s)&&a.push(u);return new zs(r,this._parents)}function TL(t){return new Array(t.length)}function ZX(){return new zs(this._enter||this._groups.map(TL),this._parents)}function wv(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}wv.prototype={constructor:wv,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function YX(t){return function(){return t}}function XX(t,e,n,r,i,s){for(var o=0,a,u=e.length,d=s.length;o<d;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new wv(t,s[o]);for(;o<u;++o)(a=e[o])&&(i[o]=a)}function eee(t,e,n,r,i,s,o){var a,u,d=new Map,p=e.length,h=s.length,y=new Array(p),x;for(a=0;a<p;++a)(u=e[a])&&(y[a]=x=o.call(u,u.__data__,a,e)+"",d.has(x)?i[a]=u:d.set(x,u));for(a=0;a<h;++a)x=o.call(t,s[a],a,s)+"",(u=d.get(x))?(r[a]=u,u.__data__=s[a],d.delete(x)):n[a]=new wv(t,s[a]);for(a=0;a<p;++a)(u=e[a])&&d.get(y[a])===u&&(i[a]=u)}function tee(t){return t.__data__}function nee(t,e){if(!arguments.length)return Array.from(this,tee);var n=e?eee:XX,r=this._parents,i=this._groups;typeof t!="function"&&(t=YX(t));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),d=0;d<s;++d){var p=r[d],h=i[d],y=h.length,x=ree(t.call(p,p&&p.__data__,d,r)),_=x.length,S=a[d]=new Array(_),I=o[d]=new Array(_),C=u[d]=new Array(y);n(p,h,S,I,C,x,e);for(var k=0,R=0,j,A;k<_;++k)if(j=S[k]){for(k>=R&&(R=k+1);!(A=I[R])&&++R<_;);j._next=A||null}}return o=new zs(o,r),o._enter=a,o._exit=u,o}function ree(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function iee(){return new zs(this._exit||this._groups.map(TL),this._parents)}function see(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function oee(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var d=n[u],p=r[u],h=d.length,y=a[u]=new Array(h),x,_=0;_<h;++_)(x=d[_]||p[_])&&(y[_]=x);for(;u<i;++u)a[u]=n[u];return new zs(a,this._parents)}function aee(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function lee(t){t||(t=uee);function e(h,y){return h&&y?t(h.__data__,y.__data__):!h-!y}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),d,p=0;p<a;++p)(d=o[p])&&(u[p]=d);u.sort(e)}return new zs(i,this._parents).order()}function uee(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function cee(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function dee(){return Array.from(this)}function fee(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function pee(){let t=0;for(const e of this)++t;return t}function hee(){return!this.node()}function mee(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function gee(t){return function(){this.removeAttribute(t)}}function yee(t){return function(){this.removeAttributeNS(t.space,t.local)}}function bee(t,e){return function(){this.setAttribute(t,e)}}function vee(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function xee(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function wee(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function _ee(t,e){var n=wx(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?yee:gee:typeof e=="function"?n.local?wee:xee:n.local?vee:bee)(n,e))}function RL(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function See(t){return function(){this.style.removeProperty(t)}}function Eee(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Iee(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Nee(t,e,n){return arguments.length>1?this.each((e==null?See:typeof e=="function"?Iee:Eee)(t,e,n??"")):uf(this.node(),t)}function uf(t,e){return t.style.getPropertyValue(e)||RL(t).getComputedStyle(t,null).getPropertyValue(e)}function kee(t){return function(){delete this[t]}}function Cee(t,e){return function(){this[t]=e}}function Tee(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ree(t,e){return arguments.length>1?this.each((e==null?kee:typeof e=="function"?Tee:Cee)(t,e)):this.node()[t]}function jL(t){return t.trim().split(/^|\s+/)}function u1(t){return t.classList||new OL(t)}function OL(t){this._node=t,this._names=jL(t.getAttribute("class")||"")}OL.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function qL(t,e){for(var n=u1(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function AL(t,e){for(var n=u1(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function jee(t){return function(){qL(this,t)}}function Oee(t){return function(){AL(this,t)}}function qee(t,e){return function(){(e.apply(this,arguments)?qL:AL)(this,t)}}function Aee(t,e){var n=jL(t+"");if(arguments.length<2){for(var r=u1(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?qee:e?jee:Oee)(n,e))}function Pee(){this.textContent=""}function Fee(t){return function(){this.textContent=t}}function Dee(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Lee(t){return arguments.length?this.each(t==null?Pee:(typeof t=="function"?Dee:Fee)(t)):this.node().textContent}function Mee(){this.innerHTML=""}function $ee(t){return function(){this.innerHTML=t}}function Bee(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function zee(t){return arguments.length?this.each(t==null?Mee:(typeof t=="function"?Bee:$ee)(t)):this.node().innerHTML}function Wee(){this.nextSibling&&this.parentNode.appendChild(this)}function Uee(){return this.each(Wee)}function Vee(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hee(){return this.each(Vee)}function Gee(t){var e=typeof t=="function"?t:IL(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Kee(){return null}function Qee(t,e){var n=typeof t=="function"?t:IL(t),r=e==null?Kee:typeof e=="function"?e:l1(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Jee(){var t=this.parentNode;t&&t.removeChild(this)}function Zee(){return this.each(Jee)}function Yee(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xee(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ete(t){return this.select(t?Xee:Yee)}function tte(t){return arguments.length?this.property("__data__",t):this.node().__data__}function nte(t){return function(e){t.call(this,e,this.__data__)}}function rte(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ite(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function ste(t,e,n){return function(){var r=this.__on,i,s=nte(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function ote(t,e,n){var r=rte(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,d=a.length,p;u<d;++u)for(i=0,p=a[u];i<s;++i)if((o=r[i]).type===p.type&&o.name===p.name)return p.value}return}for(a=e?ste:ite,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function PL(t,e,n){var r=RL(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ate(t,e){return function(){return PL(this,t,e)}}function lte(t,e){return function(){return PL(this,t,e.apply(this,arguments))}}function ute(t,e){return this.each((typeof e=="function"?lte:ate)(t,e))}function*cte(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var FL=[null];function zs(t,e){this._groups=t,this._parents=e}function Lm(){return new zs([[document.documentElement]],FL)}function dte(){return this}zs.prototype=Lm.prototype={constructor:zs,select:DX,selectAll:BX,selectChild:VX,selectChildren:QX,filter:JX,data:nee,enter:ZX,exit:iee,join:see,merge:oee,selection:dte,order:aee,sort:lee,call:cee,nodes:dee,node:fee,size:pee,empty:hee,each:mee,attr:_ee,style:Nee,property:Ree,classed:Aee,text:Lee,html:zee,raise:Uee,lower:Hee,append:Gee,insert:Qee,remove:Zee,clone:ete,datum:tte,on:ote,dispatch:ute,[Symbol.iterator]:cte};function Ds(t){return typeof t=="string"?new zs([[document.querySelector(t)]],[document.documentElement]):new zs([[t]],FL)}function fte(t){let e;for(;e=t.sourceEvent;)t=e;return t}function qo(t,e){if(t=fte(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const pte={passive:!1},Xh={capture:!0,passive:!1};function QS(t){t.stopImmediatePropagation()}function Qd(t){t.preventDefault(),t.stopImmediatePropagation()}function DL(t){var e=t.document.documentElement,n=Ds(t).on("dragstart.drag",Qd,Xh);"onselectstart"in e?n.on("selectstart.drag",Qd,Xh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function LL(t,e){var n=t.document.documentElement,r=Ds(t).on("dragstart.drag",null);e&&(r.on("click.drag",Qd,Xh),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const by=t=>()=>t;function SI(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:u,dy:d,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:p}})}SI.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function hte(t){return!t.ctrlKey&&!t.button}function mte(){return this.parentNode}function gte(t,e){return e??{x:t.x,y:t.y}}function yte(){return navigator.maxTouchPoints||"ontouchstart"in this}function ML(){var t=hte,e=mte,n=gte,r=yte,i={},s=xx("start","drag","end"),o=0,a,u,d,p,h=0;function y(j){j.on("mousedown.drag",x).filter(r).on("touchstart.drag",I).on("touchmove.drag",C,pte).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(j,A){if(!(p||!t.call(this,j,A))){var F=R(this,e.call(this,j,A),j,A,"mouse");F&&(Ds(j.view).on("mousemove.drag",_,Xh).on("mouseup.drag",S,Xh),DL(j.view),QS(j),d=!1,a=j.clientX,u=j.clientY,F("start",j))}}function _(j){if(Qd(j),!d){var A=j.clientX-a,F=j.clientY-u;d=A*A+F*F>h}i.mouse("drag",j)}function S(j){Ds(j.view).on("mousemove.drag mouseup.drag",null),LL(j.view,d),Qd(j),i.mouse("end",j)}function I(j,A){if(t.call(this,j,A)){var F=j.changedTouches,$=e.call(this,j,A),P=F.length,q,B;for(q=0;q<P;++q)(B=R(this,$,j,A,F[q].identifier,F[q]))&&(QS(j),B("start",j,F[q]))}}function C(j){var A=j.changedTouches,F=A.length,$,P;for($=0;$<F;++$)(P=i[A[$].identifier])&&(Qd(j),P("drag",j,A[$]))}function k(j){var A=j.changedTouches,F=A.length,$,P;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),$=0;$<F;++$)(P=i[A[$].identifier])&&(QS(j),P("end",j,A[$]))}function R(j,A,F,$,P,q){var B=s.copy(),L=qo(q||F,A),U,V,z;if((z=n.call(j,new SI("beforestart",{sourceEvent:F,target:y,identifier:P,active:o,x:L[0],y:L[1],dx:0,dy:0,dispatch:B}),$))!=null)return U=z.x-L[0]||0,V=z.y-L[1]||0,function X(J,le,ie){var ne=L,oe;switch(J){case"start":i[P]=X,oe=o++;break;case"end":delete i[P],--o;case"drag":L=qo(ie||le,A),oe=o;break}B.call(J,j,new SI(J,{sourceEvent:le,subject:z,target:y,identifier:P,active:oe,x:L[0]+U,y:L[1]+V,dx:L[0]-ne[0],dy:L[1]-ne[1],dispatch:B}),$)}}return y.filter=function(j){return arguments.length?(t=typeof j=="function"?j:by(!!j),y):t},y.container=function(j){return arguments.length?(e=typeof j=="function"?j:by(j),y):e},y.subject=function(j){return arguments.length?(n=typeof j=="function"?j:by(j),y):n},y.touchable=function(j){return arguments.length?(r=typeof j=="function"?j:by(!!j),y):r},y.on=function(){var j=s.on.apply(s,arguments);return j===s?y:j},y.clickDistance=function(j){return arguments.length?(h=(j=+j)*j,y):Math.sqrt(h)},y}function c1(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $L(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Mm(){}var em=.7,_v=1/em,Jd="\\s*([+-]?\\d+)\\s*",tm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",da="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bte=/^#([0-9a-f]{3,8})$/,vte=new RegExp(`^rgb\\(${Jd},${Jd},${Jd}\\)$`),xte=new RegExp(`^rgb\\(${da},${da},${da}\\)$`),wte=new RegExp(`^rgba\\(${Jd},${Jd},${Jd},${tm}\\)$`),_te=new RegExp(`^rgba\\(${da},${da},${da},${tm}\\)$`),Ste=new RegExp(`^hsl\\(${tm},${da},${da}\\)$`),Ete=new RegExp(`^hsla\\(${tm},${da},${da},${tm}\\)$`),Qq={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};c1(Mm,nm,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Jq,formatHex:Jq,formatHex8:Ite,formatHsl:Nte,formatRgb:Zq,toString:Zq});function Jq(){return this.rgb().formatHex()}function Ite(){return this.rgb().formatHex8()}function Nte(){return BL(this).formatHsl()}function Zq(){return this.rgb().formatRgb()}function nm(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=bte.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Yq(e):n===3?new vs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?vy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?vy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=vte.exec(t))?new vs(e[1],e[2],e[3],1):(e=xte.exec(t))?new vs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=wte.exec(t))?vy(e[1],e[2],e[3],e[4]):(e=_te.exec(t))?vy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ste.exec(t))?tA(e[1],e[2]/100,e[3]/100,1):(e=Ete.exec(t))?tA(e[1],e[2]/100,e[3]/100,e[4]):Qq.hasOwnProperty(t)?Yq(Qq[t]):t==="transparent"?new vs(NaN,NaN,NaN,0):null}function Yq(t){return new vs(t>>16&255,t>>8&255,t&255,1)}function vy(t,e,n,r){return r<=0&&(t=e=n=NaN),new vs(t,e,n,r)}function kte(t){return t instanceof Mm||(t=nm(t)),t?(t=t.rgb(),new vs(t.r,t.g,t.b,t.opacity)):new vs}function EI(t,e,n,r){return arguments.length===1?kte(t):new vs(t,e,n,r??1)}function vs(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}c1(vs,EI,$L(Mm,{brighter(t){return t=t==null?_v:Math.pow(_v,t),new vs(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?em:Math.pow(em,t),new vs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new vs(cc(this.r),cc(this.g),cc(this.b),Sv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xq,formatHex:Xq,formatHex8:Cte,formatRgb:eA,toString:eA}));function Xq(){return`#${sc(this.r)}${sc(this.g)}${sc(this.b)}`}function Cte(){return`#${sc(this.r)}${sc(this.g)}${sc(this.b)}${sc((isNaN(this.opacity)?1:this.opacity)*255)}`}function eA(){const t=Sv(this.opacity);return`${t===1?"rgb(":"rgba("}${cc(this.r)}, ${cc(this.g)}, ${cc(this.b)}${t===1?")":`, ${t})`}`}function Sv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function cc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function sc(t){return t=cc(t),(t<16?"0":"")+t.toString(16)}function tA(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Lo(t,e,n,r)}function BL(t){if(t instanceof Lo)return new Lo(t.h,t.s,t.l,t.opacity);if(t instanceof Mm||(t=nm(t)),!t)return new Lo;if(t instanceof Lo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Lo(o,a,u,t.opacity)}function Tte(t,e,n,r){return arguments.length===1?BL(t):new Lo(t,e,n,r??1)}function Lo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}c1(Lo,Tte,$L(Mm,{brighter(t){return t=t==null?_v:Math.pow(_v,t),new Lo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?em:Math.pow(em,t),new Lo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new vs(JS(t>=240?t-240:t+120,i,r),JS(t,i,r),JS(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Lo(nA(this.h),xy(this.s),xy(this.l),Sv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Sv(this.opacity);return`${t===1?"hsl(":"hsla("}${nA(this.h)}, ${xy(this.s)*100}%, ${xy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function nA(t){return t=(t||0)%360,t<0?t+360:t}function xy(t){return Math.max(0,Math.min(1,t||0))}function JS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const zL=t=>()=>t;function Rte(t,e){return function(n){return t+n*e}}function jte(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ote(t){return(t=+t)==1?WL:function(e,n){return n-e?jte(e,n,t):zL(isNaN(e)?n:e)}}function WL(t,e){var n=e-t;return n?Rte(t,n):zL(isNaN(t)?e:t)}const rA=function t(e){var n=Ote(e);function r(i,s){var o=n((i=EI(i)).r,(s=EI(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),d=WL(i.opacity,s.opacity);return function(p){return i.r=o(p),i.g=a(p),i.b=u(p),i.opacity=d(p),i+""}}return r.gamma=t,r}(1);function Ml(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var II=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ZS=new RegExp(II.source,"g");function qte(t){return function(){return t}}function Ate(t){return function(e){return t(e)+""}}function Pte(t,e){var n=II.lastIndex=ZS.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(t=t+"",e=e+"";(r=II.exec(t))&&(i=ZS.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Ml(r,i)})),n=ZS.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Ate(u[0].x):qte(e):(e=u.length,function(d){for(var p=0,h;p<e;++p)a[(h=u[p]).i]=h.x(d);return a.join("")})}var iA=180/Math.PI,NI={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function UL(t,e,n,r,i,s){var o,a,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*iA,skewX:Math.atan(u)*iA,scaleX:o,scaleY:a}}var wy;function Fte(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?NI:UL(e.a,e.b,e.c,e.d,e.e,e.f)}function Dte(t){return t==null||(wy||(wy=document.createElementNS("http://www.w3.org/2000/svg","g")),wy.setAttribute("transform",t),!(t=wy.transform.baseVal.consolidate()))?NI:(t=t.matrix,UL(t.a,t.b,t.c,t.d,t.e,t.f))}function VL(t,e,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,p,h,y,x,_){if(d!==h||p!==y){var S=x.push("translate(",null,e,null,n);_.push({i:S-4,x:Ml(d,h)},{i:S-2,x:Ml(p,y)})}else(h||y)&&x.push("translate("+h+e+y+n)}function o(d,p,h,y){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),y.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Ml(d,p)})):p&&h.push(i(h)+"rotate("+p+r)}function a(d,p,h,y){d!==p?y.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Ml(d,p)}):p&&h.push(i(h)+"skewX("+p+r)}function u(d,p,h,y,x,_){if(d!==h||p!==y){var S=x.push(i(x)+"scale(",null,",",null,")");_.push({i:S-4,x:Ml(d,h)},{i:S-2,x:Ml(p,y)})}else(h!==1||y!==1)&&x.push(i(x)+"scale("+h+","+y+")")}return function(d,p){var h=[],y=[];return d=t(d),p=t(p),s(d.translateX,d.translateY,p.translateX,p.translateY,h,y),o(d.rotate,p.rotate,h,y),a(d.skewX,p.skewX,h,y),u(d.scaleX,d.scaleY,p.scaleX,p.scaleY,h,y),d=p=null,function(x){for(var _=-1,S=y.length,I;++_<S;)h[(I=y[_]).i]=I.x(x);return h.join("")}}}var Lte=VL(Fte,"px, ","px)","deg)"),Mte=VL(Dte,", ",")",")"),$te=1e-12;function sA(t){return((t=Math.exp(t))+1/t)/2}function Bte(t){return((t=Math.exp(t))-1/t)/2}function zte(t){return((t=Math.exp(2*t))-1)/(t+1)}const Wte=function t(e,n,r){function i(s,o){var a=s[0],u=s[1],d=s[2],p=o[0],h=o[1],y=o[2],x=p-a,_=h-u,S=x*x+_*_,I,C;if(S<$te)C=Math.log(y/d)/e,I=function($){return[a+$*x,u+$*_,d*Math.exp(e*$*C)]};else{var k=Math.sqrt(S),R=(y*y-d*d+r*S)/(2*d*n*k),j=(y*y-d*d-r*S)/(2*y*n*k),A=Math.log(Math.sqrt(R*R+1)-R),F=Math.log(Math.sqrt(j*j+1)-j);C=(F-A)/e,I=function($){var P=$*C,q=sA(A),B=d/(n*k)*(q*zte(e*P+A)-Bte(A));return[a+B*x,u+B*_,d*q/sA(e*P+A)]}}return I.duration=C*1e3*e/Math.SQRT2,I}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return t(o,a,u)},i}(Math.SQRT2,2,4);var cf=0,Zp=0,Fp=0,HL=1e3,Ev,Yp,Iv=0,_c=0,_x=0,rm=typeof performance=="object"&&performance.now?performance:Date,GL=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function d1(){return _c||(GL(Ute),_c=rm.now()+_x)}function Ute(){_c=0}function Nv(){this._call=this._time=this._next=null}Nv.prototype=KL.prototype={constructor:Nv,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?d1():+n)+(e==null?0:+e),!this._next&&Yp!==this&&(Yp?Yp._next=this:Ev=this,Yp=this),this._call=t,this._time=n,kI()},stop:function(){this._call&&(this._call=null,this._time=1/0,kI())}};function KL(t,e,n){var r=new Nv;return r.restart(t,e,n),r}function Vte(){d1(),++cf;for(var t=Ev,e;t;)(e=_c-t._time)>=0&&t._call.call(void 0,e),t=t._next;--cf}function oA(){_c=(Iv=rm.now())+_x,cf=Zp=0;try{Vte()}finally{cf=0,Gte(),_c=0}}function Hte(){var t=rm.now(),e=t-Iv;e>HL&&(_x-=e,Iv=t)}function Gte(){for(var t,e=Ev,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ev=n);Yp=t,kI(r)}function kI(t){if(!cf){Zp&&(Zp=clearTimeout(Zp));var e=t-_c;e>24?(t<1/0&&(Zp=setTimeout(oA,t-rm.now()-_x)),Fp&&(Fp=clearInterval(Fp))):(Fp||(Iv=rm.now(),Fp=setInterval(Hte,HL)),cf=1,GL(oA))}}function aA(t,e,n){var r=new Nv;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Kte=xx("start","end","cancel","interrupt"),Qte=[],QL=0,lA=1,CI=2,ob=3,uA=4,TI=5,ab=6;function Sx(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Jte(t,n,{name:e,index:r,group:i,on:Kte,tween:Qte,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:QL})}function f1(t,e){var n=Jo(t,e);if(n.state>QL)throw new Error("too late; already scheduled");return n}function wa(t,e){var n=Jo(t,e);if(n.state>ob)throw new Error("too late; already running");return n}function Jo(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Jte(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=KL(s,0,n.time);function s(d){n.state=lA,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var p,h,y,x;if(n.state!==lA)return u();for(p in r)if(x=r[p],x.name===n.name){if(x.state===ob)return aA(o);x.state===uA?(x.state=ab,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[p]):+p<e&&(x.state=ab,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[p])}if(aA(function(){n.state===ob&&(n.state=uA,n.timer.restart(a,n.delay,n.time),a(d))}),n.state=CI,n.on.call("start",t,t.__data__,n.index,n.group),n.state===CI){for(n.state=ob,i=new Array(y=n.tween.length),p=0,h=-1;p<y;++p)(x=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=x);i.length=h+1}}function a(d){for(var p=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=TI,1),h=-1,y=i.length;++h<y;)i[h].call(t,p);n.state===TI&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=ab,n.timer.stop(),delete r[e];for(var d in r)return;delete t.__transition}}function lb(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>CI&&r.state<TI,r.state=ab,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function Zte(t){return this.each(function(){lb(this,t)})}function Yte(t,e){var n,r;return function(){var i=wa(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Xte(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=wa(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===e){i[u]=a;break}u===d&&i.push(a)}s.tween=i}}function ene(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Jo(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Yte:Xte)(n,t,e))}function p1(t,e,n){var r=t._id;return t.each(function(){var i=wa(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Jo(i,r).value[e]}}function JL(t,e){var n;return(typeof e=="number"?Ml:e instanceof nm?rA:(n=nm(e))?(e=n,rA):Pte)(t,e)}function tne(t){return function(){this.removeAttribute(t)}}function nne(t){return function(){this.removeAttributeNS(t.space,t.local)}}function rne(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function ine(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function sne(t,e,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a)))}}function one(t,e,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a)))}}function ane(t,e){var n=wx(t),r=n==="transform"?Mte:JL;return this.attrTween(t,typeof e=="function"?(n.local?one:sne)(n,r,p1(this,"attr."+t,e)):e==null?(n.local?nne:tne)(n):(n.local?ine:rne)(n,r,e))}function lne(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function une(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function cne(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&une(t,s)),n}return i._value=e,i}function dne(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&lne(t,s)),n}return i._value=e,i}function fne(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=wx(t);return this.tween(n,(r.local?cne:dne)(r,e))}function pne(t,e){return function(){f1(this,t).delay=+e.apply(this,arguments)}}function hne(t,e){return e=+e,function(){f1(this,t).delay=e}}function mne(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?pne:hne)(e,t)):Jo(this.node(),e).delay}function gne(t,e){return function(){wa(this,t).duration=+e.apply(this,arguments)}}function yne(t,e){return e=+e,function(){wa(this,t).duration=e}}function bne(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?gne:yne)(e,t)):Jo(this.node(),e).duration}function vne(t,e){if(typeof e!="function")throw new Error;return function(){wa(this,t).ease=e}}function xne(t){var e=this._id;return arguments.length?this.each(vne(e,t)):Jo(this.node(),e).ease}function wne(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;wa(this,t).ease=n}}function _ne(t){if(typeof t!="function")throw new Error;return this.each(wne(this._id,t))}function Sne(t){typeof t!="function"&&(t=kL(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&t.call(u,u.__data__,d,s)&&a.push(u);return new il(r,this._parents,this._name,this._id)}function Ene(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=e[a],d=n[a],p=u.length,h=o[a]=new Array(p),y,x=0;x<p;++x)(y=u[x]||d[x])&&(h[x]=y);for(;a<r;++a)o[a]=e[a];return new il(o,this._parents,this._name,this._id)}function Ine(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Nne(t,e,n){var r,i,s=Ine(e)?f1:wa;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function kne(t,e){var n=this._id;return arguments.length<2?Jo(this.node(),n).on.on(t):this.each(Nne(n,t,e))}function Cne(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Tne(){return this.on("end.remove",Cne(this._id))}function Rne(t){var e=this._name,n=this._id;typeof t!="function"&&(t=l1(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,d=s[o]=new Array(u),p,h,y=0;y<u;++y)(p=a[y])&&(h=t.call(p,p.__data__,y,a))&&("__data__"in p&&(h.__data__=p.__data__),d[y]=h,Sx(d[y],e,n,y,d,Jo(p,n)));return new il(s,this._parents,e,n)}function jne(t){var e=this._name,n=this._id;typeof t!="function"&&(t=NL(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],d=u.length,p,h=0;h<d;++h)if(p=u[h]){for(var y=t.call(p,p.__data__,h,u),x,_=Jo(p,n),S=0,I=y.length;S<I;++S)(x=y[S])&&Sx(x,e,n,S,y,_);s.push(y),o.push(p)}return new il(s,o,e,n)}var One=Lm.prototype.constructor;function qne(){return new One(this._groups,this._parents)}function Ane(t,e){var n,r,i;return function(){var s=uf(this,t),o=(this.style.removeProperty(t),uf(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function ZL(t){return function(){this.style.removeProperty(t)}}function Pne(t,e,n){var r,i=n+"",s;return function(){var o=uf(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function Fne(t,e,n){var r,i,s;return function(){var o=uf(this,t),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(t),uf(this,t))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a))}}function Dne(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var u=wa(this,t),d=u.on,p=u.value[s]==null?a||(a=ZL(e)):void 0;(d!==n||i!==p)&&(r=(n=d).copy()).on(o,i=p),u.on=r}}function Lne(t,e,n){var r=(t+="")=="transform"?Lte:JL;return e==null?this.styleTween(t,Ane(t,r)).on("end.style."+t,ZL(t)):typeof e=="function"?this.styleTween(t,Fne(t,r,p1(this,"style."+t,e))).each(Dne(this._id,t)):this.styleTween(t,Pne(t,r,e),n).on("end.style."+t,null)}function Mne(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function $ne(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Mne(t,o,n)),r}return s._value=e,s}function Bne(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,$ne(t,e,n??""))}function zne(t){return function(){this.textContent=t}}function Wne(t){return function(){var e=t(this);this.textContent=e??""}}function Une(t){return this.tween("text",typeof t=="function"?Wne(p1(this,"text",t)):zne(t==null?"":t+""))}function Vne(t){return function(e){this.textContent=t.call(this,e)}}function Hne(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Vne(i)),e}return r._value=t,r}function Gne(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Hne(t))}function Kne(){for(var t=this._name,e=this._id,n=YL(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,d=0;d<a;++d)if(u=o[d]){var p=Jo(u,e);Sx(u,t,n,d,o,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new il(r,this._parents,t,n)}function Qne(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=wa(this,r),p=d.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),d.on=e}),i===0&&s()})}var Jne=0;function il(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function YL(){return++Jne}var $a=Lm.prototype;il.prototype={constructor:il,select:Rne,selectAll:jne,selectChild:$a.selectChild,selectChildren:$a.selectChildren,filter:Sne,merge:Ene,selection:qne,transition:Kne,call:$a.call,nodes:$a.nodes,node:$a.node,size:$a.size,empty:$a.empty,each:$a.each,on:kne,attr:ane,attrTween:fne,style:Lne,styleTween:Bne,text:Une,textTween:Gne,remove:Tne,tween:ene,delay:mne,duration:bne,ease:xne,easeVarying:_ne,end:Qne,[Symbol.iterator]:$a[Symbol.iterator]};function Zne(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Yne={time:null,delay:0,duration:250,ease:Zne};function Xne(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ere(t){var e,n;t instanceof il?(e=t._id,t=t._name):(e=YL(),(n=Yne).time=d1(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,d=0;d<a;++d)(u=o[d])&&Sx(u,t,e,d,o,n||Xne(u,e));return new il(r,this._parents,t,e)}Lm.prototype.interrupt=Zte;Lm.prototype.transition=ere;const _y=t=>()=>t;function tre(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ha(t,e,n){this.k=t,this.x=e,this.y=n}Ha.prototype={constructor:Ha,scale:function(t){return t===1?this:new Ha(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ha(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ex=new Ha(1,0,0);XL.prototype=Ha.prototype;function XL(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ex;return t.__zoom}function YS(t){t.stopImmediatePropagation()}function Dp(t){t.preventDefault(),t.stopImmediatePropagation()}function nre(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function rre(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function cA(){return this.__zoom||Ex}function ire(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function sre(){return navigator.maxTouchPoints||"ontouchstart"in this}function ore(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function eM(){var t=nre,e=rre,n=ore,r=ire,i=sre,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Wte,d=xx("start","zoom","end"),p,h,y,x=500,_=150,S=0,I=10;function C(z){z.property("__zoom",cA).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",B).filter(i).on("touchstart.zoom",L).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(z,X,J,le){var ie=z.selection?z.selection():z;ie.property("__zoom",cA),z!==ie?A(z,X,J,le):ie.interrupt().each(function(){F(this,arguments).event(le).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},C.scaleBy=function(z,X,J,le){C.scaleTo(z,function(){var ie=this.__zoom.k,ne=typeof X=="function"?X.apply(this,arguments):X;return ie*ne},J,le)},C.scaleTo=function(z,X,J,le){C.transform(z,function(){var ie=e.apply(this,arguments),ne=this.__zoom,oe=J==null?j(ie):typeof J=="function"?J.apply(this,arguments):J,te=ne.invert(oe),ce=typeof X=="function"?X.apply(this,arguments):X;return n(R(k(ne,ce),oe,te),ie,o)},J,le)},C.translateBy=function(z,X,J,le){C.transform(z,function(){return n(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof J=="function"?J.apply(this,arguments):J),e.apply(this,arguments),o)},null,le)},C.translateTo=function(z,X,J,le,ie){C.transform(z,function(){var ne=e.apply(this,arguments),oe=this.__zoom,te=le==null?j(ne):typeof le=="function"?le.apply(this,arguments):le;return n(Ex.translate(te[0],te[1]).scale(oe.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof J=="function"?-J.apply(this,arguments):-J),ne,o)},le,ie)};function k(z,X){return X=Math.max(s[0],Math.min(s[1],X)),X===z.k?z:new Ha(X,z.x,z.y)}function R(z,X,J){var le=X[0]-J[0]*z.k,ie=X[1]-J[1]*z.k;return le===z.x&&ie===z.y?z:new Ha(z.k,le,ie)}function j(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function A(z,X,J,le){z.on("start.zoom",function(){F(this,arguments).event(le).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(le).end()}).tween("zoom",function(){var ie=this,ne=arguments,oe=F(ie,ne).event(le),te=e.apply(ie,ne),ce=J==null?j(te):typeof J=="function"?J.apply(ie,ne):J,de=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),ye=ie.__zoom,we=typeof X=="function"?X.apply(ie,ne):X,Ie=u(ye.invert(ce).concat(de/ye.k),we.invert(ce).concat(de/we.k));return function(ze){if(ze===1)ze=we;else{var je=Ie(ze),De=de/je[2];ze=new Ha(De,ce[0]-je[0]*De,ce[1]-je[1]*De)}oe.zoom(null,ze)}})}function F(z,X,J){return!J&&z.__zooming||new $(z,X)}function $(z,X){this.that=z,this.args=X,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,X),this.taps=0}$.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,X){return this.mouse&&z!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var X=Ds(this.that).datum();d.call(z,this.that,new tre(z,{sourceEvent:this.sourceEvent,target:C,type:z,transform:this.that.__zoom,dispatch:d}),X)}};function P(z,...X){if(!t.apply(this,arguments))return;var J=F(this,X).event(z),le=this.__zoom,ie=Math.max(s[0],Math.min(s[1],le.k*Math.pow(2,r.apply(this,arguments)))),ne=qo(z);if(J.wheel)(J.mouse[0][0]!==ne[0]||J.mouse[0][1]!==ne[1])&&(J.mouse[1]=le.invert(J.mouse[0]=ne)),clearTimeout(J.wheel);else{if(le.k===ie)return;J.mouse=[ne,le.invert(ne)],lb(this),J.start()}Dp(z),J.wheel=setTimeout(oe,_),J.zoom("mouse",n(R(k(le,ie),J.mouse[0],J.mouse[1]),J.extent,o));function oe(){J.wheel=null,J.end()}}function q(z,...X){if(y||!t.apply(this,arguments))return;var J=z.currentTarget,le=F(this,X,!0).event(z),ie=Ds(z.view).on("mousemove.zoom",ce,!0).on("mouseup.zoom",de,!0),ne=qo(z,J),oe=z.clientX,te=z.clientY;DL(z.view),YS(z),le.mouse=[ne,this.__zoom.invert(ne)],lb(this),le.start();function ce(ye){if(Dp(ye),!le.moved){var we=ye.clientX-oe,Ie=ye.clientY-te;le.moved=we*we+Ie*Ie>S}le.event(ye).zoom("mouse",n(R(le.that.__zoom,le.mouse[0]=qo(ye,J),le.mouse[1]),le.extent,o))}function de(ye){ie.on("mousemove.zoom mouseup.zoom",null),LL(ye.view,le.moved),Dp(ye),le.event(ye).end()}}function B(z,...X){if(t.apply(this,arguments)){var J=this.__zoom,le=qo(z.changedTouches?z.changedTouches[0]:z,this),ie=J.invert(le),ne=J.k*(z.shiftKey?.5:2),oe=n(R(k(J,ne),le,ie),e.apply(this,X),o);Dp(z),a>0?Ds(this).transition().duration(a).call(A,oe,le,z):Ds(this).call(C.transform,oe,le,z)}}function L(z,...X){if(t.apply(this,arguments)){var J=z.touches,le=J.length,ie=F(this,X,z.changedTouches.length===le).event(z),ne,oe,te,ce;for(YS(z),oe=0;oe<le;++oe)te=J[oe],ce=qo(te,this),ce=[ce,this.__zoom.invert(ce),te.identifier],ie.touch0?!ie.touch1&&ie.touch0[2]!==ce[2]&&(ie.touch1=ce,ie.taps=0):(ie.touch0=ce,ne=!0,ie.taps=1+!!p);p&&(p=clearTimeout(p)),ne&&(ie.taps<2&&(h=ce[0],p=setTimeout(function(){p=null},x)),lb(this),ie.start())}}function U(z,...X){if(this.__zooming){var J=F(this,X).event(z),le=z.changedTouches,ie=le.length,ne,oe,te,ce;for(Dp(z),ne=0;ne<ie;++ne)oe=le[ne],te=qo(oe,this),J.touch0&&J.touch0[2]===oe.identifier?J.touch0[0]=te:J.touch1&&J.touch1[2]===oe.identifier&&(J.touch1[0]=te);if(oe=J.that.__zoom,J.touch1){var de=J.touch0[0],ye=J.touch0[1],we=J.touch1[0],Ie=J.touch1[1],ze=(ze=we[0]-de[0])*ze+(ze=we[1]-de[1])*ze,je=(je=Ie[0]-ye[0])*je+(je=Ie[1]-ye[1])*je;oe=k(oe,Math.sqrt(ze/je)),te=[(de[0]+we[0])/2,(de[1]+we[1])/2],ce=[(ye[0]+Ie[0])/2,(ye[1]+Ie[1])/2]}else if(J.touch0)te=J.touch0[0],ce=J.touch0[1];else return;J.zoom("touch",n(R(oe,te,ce),J.extent,o))}}function V(z,...X){if(this.__zooming){var J=F(this,X).event(z),le=z.changedTouches,ie=le.length,ne,oe;for(YS(z),y&&clearTimeout(y),y=setTimeout(function(){y=null},x),ne=0;ne<ie;++ne)oe=le[ne],J.touch0&&J.touch0[2]===oe.identifier?delete J.touch0:J.touch1&&J.touch1[2]===oe.identifier&&delete J.touch1;if(J.touch1&&!J.touch0&&(J.touch0=J.touch1,delete J.touch1),J.touch0)J.touch0[1]=this.__zoom.invert(J.touch0[0]);else if(J.end(),J.taps===2&&(oe=qo(oe,this),Math.hypot(h[0]-oe[0],h[1]-oe[1])<I)){var te=Ds(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return C.wheelDelta=function(z){return arguments.length?(r=typeof z=="function"?z:_y(+z),C):r},C.filter=function(z){return arguments.length?(t=typeof z=="function"?z:_y(!!z),C):t},C.touchable=function(z){return arguments.length?(i=typeof z=="function"?z:_y(!!z),C):i},C.extent=function(z){return arguments.length?(e=typeof z=="function"?z:_y([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),C):e},C.scaleExtent=function(z){return arguments.length?(s[0]=+z[0],s[1]=+z[1],C):[s[0],s[1]]},C.translateExtent=function(z){return arguments.length?(o[0][0]=+z[0][0],o[1][0]=+z[1][0],o[0][1]=+z[0][1],o[1][1]=+z[1][1],C):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},C.constrain=function(z){return arguments.length?(n=z,C):n},C.duration=function(z){return arguments.length?(a=+z,C):a},C.interpolate=function(z){return arguments.length?(u=z,C):u},C.on=function(){var z=d.on.apply(d,arguments);return z===d?C:z},C.clickDistance=function(z){return arguments.length?(S=(z=+z)*z,C):Math.sqrt(S)},C.tapDistance=function(z){return arguments.length?(I=+z,C):I},C}const sl={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},im=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],tM=["Enter"," ","Escape"];var df;(function(t){t.Strict="strict",t.Loose="loose"})(df||(df={}));var dc;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(dc||(dc={}));var sm;(function(t){t.Partial="partial",t.Full="full"})(sm||(sm={}));const nM={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Gl;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Gl||(Gl={}));var kv;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(kv||(kv={}));var Tt;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Tt||(Tt={}));const dA={[Tt.Left]:Tt.Right,[Tt.Right]:Tt.Left,[Tt.Top]:Tt.Bottom,[Tt.Bottom]:Tt.Top};function rM(t){return t===null?null:t?"valid":"invalid"}const iM=t=>"id"in t&&"source"in t&&"target"in t,are=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),h1=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),$m=(t,e=[0,0])=>{const{width:n,height:r}=ol(t),i=t.origin??e,s=n*i[0],o=r*i[1];return{x:t.position.x-s,y:t.position.y-o}},lre=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):h1(i)?i:e.nodeLookup.get(i.id));const a=o?Cv(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ix(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Nx(n)},Of=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=Cv(r);n=Ix(n,i)}}),Nx(n)},sM=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const a={...Bm(e,[n,r,i]),width:e.width/i,height:e.height/i},u=[];for(const d of t.values()){const{measured:p,selectable:h=!0,hidden:y=!1}=d;if(o&&!h||y)continue;const x=p.width??d.width??d.initialWidth??null,_=p.height??d.height??d.initialHeight??null,S=om(a,pf(d)),I=(x??0)*(_??0),C=s&&S>0;(!d.internals.handleBounds||C||S>=I||d.dragging)&&u.push(d)}return u},ure=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function RI(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function jI({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(t.size===0)return Promise.resolve(!1);const a=Of(t),u=m1(a,e,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(u,{duration:o?.duration}),Promise.resolve(!0)}function oM({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(t),a=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=a?a.internals.positionAbsolute:{x:0,y:0},p=o.origin??r;let h=i;if(o.extent==="parent"&&!o.expandParent)if(!a)s?.("005",sl.error005());else{const x=a.measured.width,_=a.measured.height;x&&_&&(h=[[u,d],[u+x,d+_]])}else a&&hf(o.extent)&&(h=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const y=hf(h)?Sc(e,h,o.measured):e;return{position:{x:y.x-u+o.measured.width*p[0],y:y.y-d+o.measured.height*p[1]},positionAbsolute:y}}async function cre({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(y=>y.id)),o=[];for(const y of n){if(y.deletable===!1)continue;const x=s.has(y.id),_=!x&&y.parentId&&o.find(S=>S.id===y.parentId);(x||_)&&o.push(y)}const a=new Set(e.map(y=>y.id)),u=r.filter(y=>y.deletable!==!1),p=ure(o,u);for(const y of u)a.has(y.id)&&!p.find(_=>_.id===y.id)&&p.push(y);if(!i)return{edges:p,nodes:o};const h=await i({nodes:o,edges:p});return typeof h=="boolean"?h?{edges:p,nodes:o}:{edges:[],nodes:[]}:h}const ff=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Sc=(t={x:0,y:0},e,n)=>({x:ff(t.x,e[0][0],e[1][0]-(n?.width??0)),y:ff(t.y,e[0][1],e[1][1]-(n?.height??0))});function aM(t,e,n){const{width:r,height:i}=ol(n),{x:s,y:o}=n.internals.positionAbsolute;return Sc(t,[[s,o],[s+r,o+i]],e)}const fA=(t,e,n)=>t<e?ff(Math.abs(t-e),1,e)/e:t>n?-ff(Math.abs(t-n),1,e)/e:0,lM=(t,e,n=15,r=40)=>{const i=fA(t.x,r,e.width-r)*n,s=fA(t.y,r,e.height-r)*n;return[i,s]},Ix=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),OI=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),Nx=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),pf=(t,e=[0,0])=>{const{x:n,y:r}=h1(t)?t.internals.positionAbsolute:$m(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Cv=(t,e=[0,0])=>{const{x:n,y:r}=h1(t)?t.internals.positionAbsolute:$m(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},uM=(t,e)=>Nx(Ix(OI(t),OI(e))),om=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},pA=t=>Bo(t.width)&&Bo(t.height)&&Bo(t.x)&&Bo(t.y),Bo=t=>!isNaN(t)&&isFinite(t),dre=(t,e)=>{},kx=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Bm=({x:t,y:e},[n,r,i],s=!1,o=[1,1])=>{const a={x:(t-n)/i,y:(e-r)/i};return s?kx(a,o):a},cM=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),m1=(t,e,n,r,i,s)=>{const o=e/(t.width*(1+s)),a=n/(t.height*(1+s)),u=Math.min(o,a),d=ff(u,r,i),p=t.x+t.width/2,h=t.y+t.height/2,y=e/2-p*d,x=n/2-h*d;return{x:y,y:x,zoom:d}},Tv=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function hf(t){return t!==void 0&&t!=="parent"}function ol(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function dM(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function fM(t,e={width:0,height:0},n,r,i){const s={...t},o=r.get(n);if(o){const a=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*a[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*a[1]}return s}function hA(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function _h(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=Qa(t),a=Bm({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?kx(a,e):a;return{xSnapped:u,ySnapped:d,...a}}const Cx=t=>({width:t.offsetWidth,height:t.offsetHeight}),pM=t=>t?.getRootNode?.()||window?.document,fre=["INPUT","SELECT","TEXTAREA"];function qI(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:fre.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const hM=t=>"clientX"in t,Qa=(t,e)=>{const n=hM(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},mA=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:t,nodeId:i,position:o.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Cx(o)}})};function mM({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const u=t*.125+i*.375+o*.375+n*.125,d=e*.125+s*.375+a*.375+r*.125,p=Math.abs(u-t),h=Math.abs(d-e);return[u,d,p,h]}function Sy(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function gA({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case Tt.Left:return[e-Sy(e-r,s),n];case Tt.Right:return[e+Sy(r-e,s),n];case Tt.Top:return[e,n-Sy(n-i,s)];case Tt.Bottom:return[e,n+Sy(i-n,s)]}}function g1({sourceX:t,sourceY:e,sourcePosition:n=Tt.Bottom,targetX:r,targetY:i,targetPosition:s=Tt.Top,curvature:o=.25}){const[a,u]=gA({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[d,p]=gA({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[h,y,x,_]=mM({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:d,targetControlY:p});return[`M${t},${e} C${a},${u} ${d},${p} ${r},${i}`,h,y,x,_]}function gM({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,a=r<e?r+o:r-o;return[s,a,i,o]}function pre({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const s=n||e.selected||t.selected,o=Math.max(t.internals.z||0,e.internals.z||0,1e3);return r+(s?o:0)}function hre({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=Ix(Cv(t),Cv(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return om(o,Nx(s))>0}const mre=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,gre=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),yre=(t,e)=>{if(!t.source||!t.target)return e;let n;return iM(t)?n={...t}:n={...t,id:mre(t)},gre(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function yM({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,a]=gM({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,a]}const yA={[Tt.Left]:{x:-1,y:0},[Tt.Right]:{x:1,y:0},[Tt.Top]:{x:0,y:-1},[Tt.Bottom]:{x:0,y:1}},bre=({source:t,sourcePosition:e=Tt.Bottom,target:n})=>e===Tt.Left||e===Tt.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},bA=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function vre({source:t,sourcePosition:e=Tt.Bottom,target:n,targetPosition:r=Tt.Top,center:i,offset:s}){const o=yA[e],a=yA[r],u={x:t.x+o.x*s,y:t.y+o.y*s},d={x:n.x+a.x*s,y:n.y+a.y*s},p=bre({source:u,sourcePosition:e,target:d}),h=p.x!==0?"x":"y",y=p[h];let x=[],_,S;const I={x:0,y:0},C={x:0,y:0},[k,R,j,A]=gM({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[h]*a[h]===-1){_=i.x??k,S=i.y??R;const $=[{x:_,y:u.y},{x:_,y:d.y}],P=[{x:u.x,y:S},{x:d.x,y:S}];o[h]===y?x=h==="x"?$:P:x=h==="x"?P:$}else{const $=[{x:u.x,y:d.y}],P=[{x:d.x,y:u.y}];if(h==="x"?x=o.x===y?P:$:x=o.y===y?$:P,e===r){const V=Math.abs(t[h]-n[h]);if(V<=s){const z=Math.min(s-1,s-V);o[h]===y?I[h]=(u[h]>t[h]?-1:1)*z:C[h]=(d[h]>n[h]?-1:1)*z}}if(e!==r){const V=h==="x"?"y":"x",z=o[h]===a[V],X=u[V]>d[V],J=u[V]<d[V];(o[h]===1&&(!z&&X||z&&J)||o[h]!==1&&(!z&&J||z&&X))&&(x=h==="x"?$:P)}const q={x:u.x+I.x,y:u.y+I.y},B={x:d.x+C.x,y:d.y+C.y},L=Math.max(Math.abs(q.x-x[0].x),Math.abs(B.x-x[0].x)),U=Math.max(Math.abs(q.y-x[0].y),Math.abs(B.y-x[0].y));L>=U?(_=(q.x+B.x)/2,S=x[0].y):(_=x[0].x,S=(q.y+B.y)/2)}return[[t,{x:u.x+I.x,y:u.y+I.y},...x,{x:d.x+C.x,y:d.y+C.y},n],_,S,j,A]}function xre(t,e,n,r){const i=Math.min(bA(t,e)/2,bA(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const d=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*p}`}const a=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*a},${o}`}function AI({sourceX:t,sourceY:e,sourcePosition:n=Tt.Bottom,targetX:r,targetY:i,targetPosition:s=Tt.Top,borderRadius:o=5,centerX:a,centerY:u,offset:d=20}){const[p,h,y,x,_]=vre({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:u},offset:d});return[p.reduce((I,C,k)=>{let R="";return k>0&&k<p.length-1?R=xre(p[k-1],C,p[k+1],o):R=`${k===0?"M":"L"}${C.x} ${C.y}`,I+=R,I},""),h,y,x,_]}function vA(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function wre(t){const{sourceNode:e,targetNode:n}=t;if(!vA(e)||!vA(n))return null;const r=e.internals.handleBounds||xA(e.handles),i=n.internals.handleBounds||xA(n.handles),s=wA(r?.source??[],t.sourceHandle),o=wA(t.connectionMode===df.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!s||!o)return t.onError?.("008",sl.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const a=s?.position||Tt.Bottom,u=o?.position||Tt.Top,d=am(e,s,a),p=am(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:p.x,targetY:p.y,sourcePosition:a,targetPosition:u}}function xA(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function am(t,e,n=Tt.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:o,height:a}=e??ol(t);if(r)return{x:i+o/2,y:s+a/2};switch(e?.position??n){case Tt.Top:return{x:i+o/2,y:s};case Tt.Right:return{x:i+o,y:s+a/2};case Tt.Bottom:return{x:i+o/2,y:s+a};case Tt.Left:return{x:i,y:s+a/2}}}function wA(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function PI(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function _re(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((o,a)=>([a.markerStart||r,a.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=PI(u,e);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}function Sre(t,e,n,r,i){let s=.5;i==="start"?s=0:i==="end"&&(s=1);let o=[(t.x+t.width*s)*e.zoom+e.x,t.y*e.zoom+e.y-r],a=[-100*s,-100];switch(n){case Tt.Right:o=[(t.x+t.width)*e.zoom+e.x+r,(t.y+t.height*s)*e.zoom+e.y],a=[0,-100*s];break;case Tt.Bottom:o[1]=(t.y+t.height)*e.zoom+e.y+r,a[1]=0;break;case Tt.Left:o=[t.x*e.zoom+e.x-r,(t.y+t.height*s)*e.zoom+e.y],a=[-100,-100*s];break}return`translate(${o[0]}px, ${o[1]}px) translate(${a[0]}%, ${a[1]}%)`}const y1={nodeOrigin:[0,0],nodeExtent:im,elevateNodesOnSelect:!0,defaults:{}},Ere={...y1,checkEquality:!0};function b1(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function Ire(t,e,n){const r=b1(y1,n);for(const i of t.values())if(i.parentId)v1(i,t,e,r);else{const s=$m(i,r.nodeOrigin),o=hf(i.extent)?i.extent:r.nodeExtent,a=Sc(s,o,ol(i));i.internals.positionAbsolute=a}}function FI(t,e,n,r){const i=b1(Ere,r),s=new Map(e),o=i?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const a of t){let u=s.get(a.id);if(i.checkEquality&&a===u?.internals.userNode)e.set(a.id,u);else{const d=$m(a,i.nodeOrigin),p=hf(a.extent)?a.extent:i.nodeExtent,h=Sc(d,p,ol(a));u={...i.defaults,...a,measured:{width:a.measured?.width,height:a.measured?.height},internals:{positionAbsolute:h,handleBounds:a.measured?u?.internals.handleBounds:void 0,z:bM(a,o),userNode:a}},e.set(a.id,u)}a.parentId&&v1(u,e,n,r)}}function Nre(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function v1(t,e,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=b1(y1,r),a=t.parentId,u=e.get(a);if(!u){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Nre(t,n);const d=i?1e3:0,{x:p,y:h,z:y}=kre(t,u,s,o,d),{positionAbsolute:x}=t.internals,_=p!==x.x||h!==x.y;(_||y!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:_?{x:p,y:h}:x,z:y}})}function bM(t,e){return(Bo(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function kre(t,e,n,r,i){const{x:s,y:o}=e.internals.positionAbsolute,a=ol(t),u=$m(t,n),d=hf(t.extent)?Sc(u,t.extent,a):u;let p=Sc({x:s+d.x,y:o+d.y},r,a);t.extent==="parent"&&(p=aM(p,a,e));const h=bM(t,i),y=e.internals.z??0;return{x:p.x,y:p.y,z:y>h?y:h}}function x1(t,e,n,r=[0,0]){const i=[],s=new Map;for(const o of t){const a=e.get(o.parentId);if(!a)continue;const u=s.get(o.parentId)?.expandedRect??pf(a),d=uM(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:a})}return s.size>0&&s.forEach(({expandedRect:o,parent:a},u)=>{const d=a.internals.positionAbsolute,p=ol(a),h=a.origin??r,y=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,x=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,_=Math.max(p.width,Math.round(o.width)),S=Math.max(p.height,Math.round(o.height)),I=(_-p.width)*h[0],C=(S-p.height)*h[1];(y>0||x>0||I||C)&&(i.push({id:u,type:"position",position:{x:a.position.x-y+I,y:a.position.y-x+C}}),n.get(u)?.forEach(k=>{t.some(R=>R.id===k.id)||i.push({id:k.id,type:"position",position:{x:k.position.x+y,y:k.position.y+x}})})),(p.width<o.width||p.height<o.height||y||x)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:_+(y?h[0]*y-I:0),height:S+(x?h[1]*x-C:0)}})}),i}function Cre(t,e,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let a=!1;if(!o)return{changes:[],updatedInternals:a};const u=[],d=window.getComputedStyle(o),{m22:p}=new window.DOMMatrixReadOnly(d.transform),h=[];for(const y of t.values()){const x=e.get(y.id);if(!x)continue;if(x.hidden){e.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),a=!0;continue}const _=Cx(y.nodeElement),S=x.measured.width!==_.width||x.measured.height!==_.height;if(!!(_.width&&_.height&&(S||!x.internals.handleBounds||y.force))){const C=y.nodeElement.getBoundingClientRect(),k=hf(x.extent)?x.extent:s;let{positionAbsolute:R}=x.internals;x.parentId&&x.extent==="parent"?R=aM(R,_,e.get(x.parentId)):k&&(R=Sc(R,k,_));const j={...x,measured:_,internals:{...x.internals,positionAbsolute:R,handleBounds:{source:mA("source",y.nodeElement,C,p,x.id),target:mA("target",y.nodeElement,C,p,x.id)}}};e.set(x.id,j),x.parentId&&v1(j,e,n,{nodeOrigin:i}),a=!0,S&&(u.push({id:x.id,type:"dimensions",dimensions:_}),x.expandParent&&x.parentId&&h.push({id:x.id,parentId:x.parentId,rect:pf(j,i)}))}}if(h.length>0){const y=x1(h,e,n,i);u.push(...y)}return{changes:u,updatedInternals:a}}async function Tre({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),a=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(a)}function _A(t,e,n,r,i,s){let o=i;const a=r.get(o)||new Map;r.set(o,a.set(n,e)),o=`${i}-${t}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,e)),s){o=`${i}-${t}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,e))}}function vM(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:a=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:a},d=`${i}-${o}--${s}-${a}`,p=`${s}-${a}--${i}-${o}`;_A("source",u,p,t,i,o),_A("target",u,d,t,s,a),e.set(r.id,r)}}function xM(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:xM(n,e):!1}function SA(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function Rre(t,e,n,r){const i=new Map;for(const[s,o]of t)if((o.selected||o.id===r)&&(!o.parentId||!xM(o,t))&&(o.draggable||e&&typeof o.draggable>"u")){const a=t.get(s);a&&i.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function XS({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,a]of e){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:a.position,dragging:r})}if(!t)return[i[0],i];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:r}:i[0],i]}function jre({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,a=new Map,u=!1,d={x:0,y:0},p=null,h=!1,y=null,x=!1;function _({noDragClassName:I,handleSelector:C,domNode:k,isSelectable:R,nodeId:j,nodeClickDistance:A=0}){y=Ds(k);function F({x:B,y:L},U){const{nodeLookup:V,nodeExtent:z,snapGrid:X,snapToGrid:J,nodeOrigin:le,onNodeDrag:ie,onSelectionDrag:ne,onError:oe,updateNodePositions:te}=e();s={x:B,y:L};let ce=!1,de={x:0,y:0,x2:0,y2:0};if(a.size>1&&z){const ye=Of(a);de=OI(ye)}for(const[ye,we]of a){if(!V.has(ye))continue;let Ie={x:B-we.distance.x,y:L-we.distance.y};J&&(Ie=kx(Ie,X));let ze=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];if(a.size>1&&z&&!we.extent){const{positionAbsolute:Je}=we.internals,Xe=Je.x-de.x+z[0][0],Ue=Je.x+we.measured.width-de.x2+z[1][0],ut=Je.y-de.y+z[0][1],St=Je.y+we.measured.height-de.y2+z[1][1];ze=[[Xe,ut],[Ue,St]]}const{position:je,positionAbsolute:De}=oM({nodeId:ye,nextPosition:Ie,nodeLookup:V,nodeExtent:ze,nodeOrigin:le,onError:oe});ce=ce||we.position.x!==je.x||we.position.y!==je.y,we.position=je,we.internals.positionAbsolute=De}if(ce&&(te(a,!0),U&&(r||ie||!j&&ne))){const[ye,we]=XS({nodeId:j,dragItems:a,nodeLookup:V});r?.(U,a,ye,we),ie?.(U,ye,we),j||ne?.(U,we)}}async function $(){if(!p)return;const{transform:B,panBy:L,autoPanSpeed:U}=e(),[V,z]=lM(d,p,U);(V!==0||z!==0)&&(s.x=(s.x??0)-V/B[2],s.y=(s.y??0)-z/B[2],await L({x:V,y:z})&&F(s,null)),o=requestAnimationFrame($)}function P(B){const{nodeLookup:L,multiSelectionActive:U,nodesDraggable:V,transform:z,snapGrid:X,snapToGrid:J,selectNodesOnDrag:le,onNodeDragStart:ie,onSelectionDragStart:ne,unselectNodesAndEdges:oe}=e();h=!0,(!le||!R)&&!U&&j&&(L.get(j)?.selected||oe()),R&&le&&j&&t?.(j);const te=_h(B.sourceEvent,{transform:z,snapGrid:X,snapToGrid:J,containerBounds:p});if(s=te,a=Rre(L,V,te,j),a.size>0&&(n||ie||!j&&ne)){const[ce,de]=XS({nodeId:j,dragItems:a,nodeLookup:L});n?.(B.sourceEvent,a,ce,de),ie?.(B.sourceEvent,ce,de),j||ne?.(B.sourceEvent,de)}}const q=ML().clickDistance(A).on("start",B=>{const{domNode:L,nodeDragThreshold:U,transform:V,snapGrid:z,snapToGrid:X}=e();p=L?.getBoundingClientRect()||null,x=!1,U===0&&P(B),s=_h(B.sourceEvent,{transform:V,snapGrid:z,snapToGrid:X,containerBounds:p}),d=Qa(B.sourceEvent,p)}).on("drag",B=>{const{autoPanOnNodeDrag:L,transform:U,snapGrid:V,snapToGrid:z,nodeDragThreshold:X,nodeLookup:J}=e(),le=_h(B.sourceEvent,{transform:U,snapGrid:V,snapToGrid:z,containerBounds:p});if((B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1||j&&!J.has(j))&&(x=!0),!x){if(!u&&L&&h&&(u=!0,$()),!h){const ie=le.xSnapped-(s.x??0),ne=le.ySnapped-(s.y??0);Math.sqrt(ie*ie+ne*ne)>X&&P(B)}(s.x!==le.xSnapped||s.y!==le.ySnapped)&&a&&h&&(d=Qa(B.sourceEvent,p),F(le,B.sourceEvent))}}).on("end",B=>{if(!(!h||x)&&(u=!1,h=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:L,updateNodePositions:U,onNodeDragStop:V,onSelectionDragStop:z}=e();if(U(a,!1),i||V||!j&&z){const[X,J]=XS({nodeId:j,dragItems:a,nodeLookup:L,dragging:!1});i?.(B.sourceEvent,a,X,J),V?.(B.sourceEvent,X,J),j||z?.(B.sourceEvent,J)}}}).filter(B=>{const L=B.target;return!B.button&&(!I||!SA(L,`.${I}`,k))&&(!C||SA(L,C,k))});y.call(q)}function S(){y?.on(".drag",null)}return{update:_,destroy:S}}function Ore(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())om(i,pf(s))>0&&r.push(s);return r}const qre=250;function Are(t,e,n,r){let i=[],s=1/0;const o=Ore(t,n,e+qre);for(const a of o){const u=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:p,y:h}=am(a,d,d.position,!0),y=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(h-t.y,2));y>e||(y<s?(i=[{...d,x:p,y:h}],s=y):y===s&&i.push({...d,x:p,y:h}))}}if(!i.length)return null;if(i.length>1){const a=r.type==="source"?"target":"source";return i.find(u=>u.type===a)??i[0]}return i[0]}function wM(t,e,n,r,i,s=!1){const o=r.get(t);if(!o)return null;const a=i==="strict"?o.internals.handleBounds?.[e]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?a?.find(d=>d.id===n):a?.[0])??null;return u&&s?{...u,...am(o,u,u.position,!0)}:u}function _M(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Pre(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const SM=()=>!0;function Fre(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:a,nodeLookup:u,lib:d,autoPanOnConnect:p,flowId:h,panBy:y,cancelConnection:x,onConnectStart:_,onConnect:S,onConnectEnd:I,isValidConnection:C=SM,onReconnectEnd:k,updateConnection:R,getTransform:j,getFromHandle:A,autoPanSpeed:F}){const $=pM(t.target);let P=0,q;const{x:B,y:L}=Qa(t),U=$?.elementFromPoint(B,L),V=_M(s,U),z=a?.getBoundingClientRect();if(!z||!V)return;const X=wM(i,V,r,u,e);if(!X)return;let J=Qa(t,z),le=!1,ie=null,ne=!1,oe=null;function te(){if(!p||!z)return;const[De,Je]=lM(J,z,F);y({x:De,y:Je}),P=requestAnimationFrame(te)}const ce={...X,nodeId:i,type:V,position:X.position},de=u.get(i),we={inProgress:!0,isValid:null,from:am(de,ce,Tt.Left,!0),fromHandle:ce,fromPosition:ce.position,fromNode:de,to:J,toHandle:null,toPosition:dA[ce.position],toNode:null};R(we);let Ie=we;_?.(t,{nodeId:i,handleId:r,handleType:V});function ze(De){if(!A()||!ce){je(De);return}const Je=j();J=Qa(De,z),q=Are(Bm(J,Je,!1,[1,1]),n,u,ce),le||(te(),le=!0);const Xe=EM(De,{handle:q,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:C,doc:$,lib:d,flowId:h,nodeLookup:u});oe=Xe.handleDomNode,ie=Xe.connection,ne=Pre(!!q,Xe.isValid);const Ue={...Ie,isValid:ne,to:q&&ne?cM({x:q.x,y:q.y},Je):J,toHandle:Xe.toHandle,toPosition:ne&&Xe.toHandle?Xe.toHandle.position:dA[ce.position],toNode:Xe.toHandle?u.get(Xe.toHandle.nodeId):null};ne&&q&&Ie.toHandle&&Ue.toHandle&&Ie.toHandle.type===Ue.toHandle.type&&Ie.toHandle.nodeId===Ue.toHandle.nodeId&&Ie.toHandle.id===Ue.toHandle.id&&Ie.to.x===Ue.to.x&&Ie.to.y===Ue.to.y||(R(Ue),Ie=Ue)}function je(De){(q||oe)&&ie&&ne&&S?.(ie);const{inProgress:Je,...Xe}=Ie,Ue={...Xe,toPosition:Ie.toHandle?Ie.toPosition:null};I?.(De,Ue),s&&k?.(De,Ue),x(),cancelAnimationFrame(P),le=!1,ne=!1,ie=null,oe=null,$.removeEventListener("mousemove",ze),$.removeEventListener("mouseup",je),$.removeEventListener("touchmove",ze),$.removeEventListener("touchend",je)}$.addEventListener("mousemove",ze),$.addEventListener("mouseup",je),$.addEventListener("touchmove",ze),$.addEventListener("touchend",je)}function EM(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:a,flowId:u,isValidConnection:d=SM,nodeLookup:p}){const h=s==="target",y=e?o.querySelector(`.${a}-flow__handle[data-id="${u}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x,y:_}=Qa(t),S=o.elementFromPoint(x,_),I=S?.classList.contains(`${a}-flow__handle`)?S:y,C={handleDomNode:I,isValid:!1,connection:null,toHandle:null};if(I){const k=_M(void 0,I),R=I.getAttribute("data-nodeid"),j=I.getAttribute("data-handleid"),A=I.classList.contains("connectable"),F=I.classList.contains("connectableend");if(!R||!k)return C;const $={source:h?R:r,sourceHandle:h?j:i,target:h?r:R,targetHandle:h?i:j};C.connection=$;const q=A&&F&&(n===df.Strict?h&&k==="source"||!h&&k==="target":R!==r||j!==i);C.isValid=q&&d($),C.toHandle=wM(R,k,j,p,n,!1)}return C}const DI={onPointerDown:Fre,isValid:EM};function Dre({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=Ds(t);function s({translateExtent:a,width:u,height:d,zoomStep:p=10,pannable:h=!0,zoomable:y=!0,inversePan:x=!1}){const _=R=>{const j=n();if(R.sourceEvent.type!=="wheel"||!e)return;const A=-R.sourceEvent.deltaY*(R.sourceEvent.deltaMode===1?.05:R.sourceEvent.deltaMode?1:.002)*p,F=j[2]*Math.pow(2,A);e.scaleTo(F)};let S=[0,0];const I=R=>{(R.sourceEvent.type==="mousedown"||R.sourceEvent.type==="touchstart")&&(S=[R.sourceEvent.clientX??R.sourceEvent.touches[0].clientX,R.sourceEvent.clientY??R.sourceEvent.touches[0].clientY])},C=R=>{const j=n();if(R.sourceEvent.type!=="mousemove"&&R.sourceEvent.type!=="touchmove"||!e)return;const A=[R.sourceEvent.clientX??R.sourceEvent.touches[0].clientX,R.sourceEvent.clientY??R.sourceEvent.touches[0].clientY],F=[A[0]-S[0],A[1]-S[1]];S=A;const $=r()*Math.max(j[2],Math.log(j[2]))*(x?-1:1),P={x:j[0]-F[0]*$,y:j[1]-F[1]*$},q=[[0,0],[u,d]];e.setViewportConstrained({x:P.x,y:P.y,zoom:j[2]},q,a)},k=eM().on("start",I).on("zoom",h?C:null).on("zoom.wheel",y?_:null);i.call(k,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:qo}}const Lre=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Tx=t=>({x:t.x,y:t.y,zoom:t.k}),eE=({x:t,y:e,zoom:n})=>Ex.translate(t,e).scale(n),Rd=(t,e)=>t.target.closest(`.${e}`),IM=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),tE=(t,e=0,n=()=>{})=>{const r=typeof e=="number"&&e>0;return r||n(),r?t.transition().duration(e).on("end",n):t},NM=t=>{const e=t.ctrlKey&&Tv()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function Mre({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:u,onPanZoomEnd:d}){return p=>{if(Rd(p,e))return!1;p.preventDefault(),p.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(p.ctrlKey&&o){const I=qo(p),C=NM(p),k=h*Math.pow(2,C);r.scaleTo(n,k,I,p);return}const y=p.deltaMode===1?20:1;let x=i===dc.Vertical?0:p.deltaX*y,_=i===dc.Horizontal?0:p.deltaY*y;!Tv()&&p.shiftKey&&i!==dc.Vertical&&(x=p.deltaY*y,_=0),r.translateBy(n,-(x/h)*s,-(_/h)*s,{internal:!0});const S=Tx(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,a?.(p,S)),t.isPanScrolling&&(u?.(p,S),t.panScrollTimeout=setTimeout(()=>{d?.(p,S),t.isPanScrolling=!1},150))}}function $re({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){if(!e&&r.type==="wheel"&&!r.ctrlKey||Rd(r,t))return null;r.preventDefault(),n.call(this,r,i)}}function Bre({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=Tx(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function zre({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{t.usedRightMouseButton=!!(n&&IM(e,t.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,Tx(s.transform))}}function Wre({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&IM(e,t.mouseButton??0)&&!t.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&Lre(t.prevViewport,o.transform))){const a=Tx(o.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(o.sourceEvent,a)},n?150:0)}}}function Ure({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:a,noPanClassName:u,lib:d}){return p=>{const h=t||e,y=n&&p.ctrlKey;if(p.button===1&&p.type==="mousedown"&&(Rd(p,`${d}-flow__node`)||Rd(p,`${d}-flow__edge`)))return!0;if(!r&&!h&&!i&&!s&&!n||o||Rd(p,a)&&p.type==="wheel"||Rd(p,u)&&(p.type!=="wheel"||i&&p.type==="wheel"&&!t)||!n&&p.ctrlKey&&p.type==="wheel")return!1;if(!n&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!h&&!i&&!y&&p.type==="wheel"||!r&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(r)&&!r.includes(p.button)&&p.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||p.type==="wheel")&&x}}function Vre({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:a,onPanZoomEnd:u,onDraggingChange:d}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),y=eM().clickDistance(!Bo(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(i),x=Ds(t).call(y);R({x:s.x,y:s.y,zoom:ff(s.zoom,e,n)},[[0,0],[h.width,h.height]],i);const _=x.on("wheel.zoom"),S=x.on("dblclick.zoom");y.wheelDelta(NM);function I(U,V){return x?new Promise(z=>{y?.transform(tE(x,V?.duration,()=>z(!0)),U)}):Promise.resolve(!1)}function C({noWheelClassName:U,noPanClassName:V,onPaneContextMenu:z,userSelectionActive:X,panOnScroll:J,panOnDrag:le,panOnScrollMode:ie,panOnScrollSpeed:ne,preventScrolling:oe,zoomOnPinch:te,zoomOnScroll:ce,zoomOnDoubleClick:de,zoomActivationKeyPressed:ye,lib:we,onTransformChange:Ie}){X&&!p.isZoomingOrPanning&&k();const je=J&&!ye&&!X?Mre({zoomPanValues:p,noWheelClassName:U,d3Selection:x,d3Zoom:y,panOnScrollMode:ie,panOnScrollSpeed:ne,zoomOnPinch:te,onPanZoomStart:a,onPanZoom:o,onPanZoomEnd:u}):$re({noWheelClassName:U,preventScrolling:oe,d3ZoomHandler:_});if(x.on("wheel.zoom",je,{passive:!1}),!X){const Je=Bre({zoomPanValues:p,onDraggingChange:d,onPanZoomStart:a});y.on("start",Je);const Xe=zre({zoomPanValues:p,panOnDrag:le,onPaneContextMenu:!!z,onPanZoom:o,onTransformChange:Ie});y.on("zoom",Xe);const Ue=Wre({zoomPanValues:p,panOnDrag:le,panOnScroll:J,onPaneContextMenu:z,onPanZoomEnd:u,onDraggingChange:d});y.on("end",Ue)}const De=Ure({zoomActivationKeyPressed:ye,panOnDrag:le,zoomOnScroll:ce,panOnScroll:J,zoomOnDoubleClick:de,zoomOnPinch:te,userSelectionActive:X,noPanClassName:V,noWheelClassName:U,lib:we});y.filter(De),de?x.on("dblclick.zoom",S):x.on("dblclick.zoom",null)}function k(){y.on("zoom",null)}async function R(U,V,z){const X=eE(U),J=y?.constrain()(X,V,z);return J&&await I(J),new Promise(le=>le(J))}async function j(U,V){const z=eE(U);return await I(z,V),new Promise(X=>X(z))}function A(U){if(x){const V=eE(U),z=x.property("__zoom");(z.k!==U.zoom||z.x!==U.x||z.y!==U.y)&&y?.transform(x,V,null,{sync:!0})}}function F(){const U=x?XL(x.node()):{x:0,y:0,k:1};return{x:U.x,y:U.y,zoom:U.k}}function $(U,V){return x?new Promise(z=>{y?.scaleTo(tE(x,V?.duration,()=>z(!0)),U)}):Promise.resolve(!1)}function P(U,V){return x?new Promise(z=>{y?.scaleBy(tE(x,V?.duration,()=>z(!0)),U)}):Promise.resolve(!1)}function q(U){y?.scaleExtent(U)}function B(U){y?.translateExtent(U)}function L(U){const V=!Bo(U)||U<0?0:U;y?.clickDistance(V)}return{update:C,destroy:k,setViewport:j,setViewportConstrained:R,getViewport:F,scaleTo:$,scaleBy:P,setScaleExtent:q,setTranslateExtent:B,syncViewport:A,setClickDistance:L}}var Sh;(function(t){t.Line="line",t.Handle="handle"})(Sh||(Sh={}));function Hre({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=t-e,a=n-r,u=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(u[0]=u[0]*-1),a&&s&&(u[1]=u[1]*-1),u}function Gre(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function Pl(t,e){return Math.max(0,e-t)}function Fl(t,e){return Math.max(0,t-e)}function Ey(t,e,n){return Math.max(0,e-t,t-n)}function EA(t,e){return t?!e:e}function Kre(t,e,n,r,i,s,o,a){let{affectsX:u,affectsY:d}=e;const{isHorizontal:p,isVertical:h}=e,y=p&&h,{xSnapped:x,ySnapped:_}=n,{minWidth:S,maxWidth:I,minHeight:C,maxHeight:k}=r,{x:R,y:j,width:A,height:F,aspectRatio:$}=t;let P=Math.floor(p?x-t.pointerX:0),q=Math.floor(h?_-t.pointerY:0);const B=A+(u?-P:P),L=F+(d?-q:q),U=-s[0]*A,V=-s[1]*F;let z=Ey(B,S,I),X=Ey(L,C,k);if(o){let ie=0,ne=0;u&&P<0?ie=Pl(R+P+U,o[0][0]):!u&&P>0&&(ie=Fl(R+B+U,o[1][0])),d&&q<0?ne=Pl(j+q+V,o[0][1]):!d&&q>0&&(ne=Fl(j+L+V,o[1][1])),z=Math.max(z,ie),X=Math.max(X,ne)}if(a){let ie=0,ne=0;u&&P>0?ie=Fl(R+P,a[0][0]):!u&&P<0&&(ie=Pl(R+B,a[1][0])),d&&q>0?ne=Fl(j+q,a[0][1]):!d&&q<0&&(ne=Pl(j+L,a[1][1])),z=Math.max(z,ie),X=Math.max(X,ne)}if(i){if(p){const ie=Ey(B/$,C,k)*$;if(z=Math.max(z,ie),o){let ne=0;!u&&!d||u&&!d&&y?ne=Fl(j+V+B/$,o[1][1])*$:ne=Pl(j+V+(u?P:-P)/$,o[0][1])*$,z=Math.max(z,ne)}if(a){let ne=0;!u&&!d||u&&!d&&y?ne=Pl(j+B/$,a[1][1])*$:ne=Fl(j+(u?P:-P)/$,a[0][1])*$,z=Math.max(z,ne)}}if(h){const ie=Ey(L*$,S,I)/$;if(X=Math.max(X,ie),o){let ne=0;!u&&!d||d&&!u&&y?ne=Fl(R+L*$+U,o[1][0])/$:ne=Pl(R+(d?q:-q)*$+U,o[0][0])/$,X=Math.max(X,ne)}if(a){let ne=0;!u&&!d||d&&!u&&y?ne=Pl(R+L*$,a[1][0])/$:ne=Fl(R+(d?q:-q)*$,a[0][0])/$,X=Math.max(X,ne)}}}q=q+(q<0?X:-X),P=P+(P<0?z:-z),i&&(y?B>L*$?q=(EA(u,d)?-P:P)/$:P=(EA(u,d)?-q:q)*$:p?(q=P/$,d=u):(P=q*$,u=d));const J=u?R+P:R,le=d?j+q:j;return{width:A+(u?-P:P),height:F+(d?-q:q),x:s[0]*P*(u?-1:1)+J,y:s[1]*q*(d?-1:1)+le}}const kM={width:0,height:0,x:0,y:0},Qre={...kM,pointerX:0,pointerY:0,aspectRatio:1};function Jre(t){return[[0,0],[t.measured.width,t.measured.height]]}function Zre(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,o=t.measured.height??0,a=n[0]*s,u=n[1]*o;return[[r-a,i-u],[r+s-a,i+o-u]]}function Yre({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=Ds(t);function o({controlPosition:u,boundaries:d,keepAspectRatio:p,onResizeStart:h,onResize:y,onResizeEnd:x,shouldResize:_}){let S={...kM},I={...Qre};const C=Gre(u);let k,R=null,j=[],A,F,$;const P=ML().on("start",q=>{const{nodeLookup:B,transform:L,snapGrid:U,snapToGrid:V,nodeOrigin:z,paneDomNode:X}=n();if(k=B.get(e),!k)return;R=X?.getBoundingClientRect()??null;const{xSnapped:J,ySnapped:le}=_h(q.sourceEvent,{transform:L,snapGrid:U,snapToGrid:V,containerBounds:R});S={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},I={...S,pointerX:J,pointerY:le,aspectRatio:S.width/S.height},A=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(A=B.get(k.parentId),F=A&&k.extent==="parent"?Jre(A):void 0),j=[],$=void 0;for(const[ie,ne]of B)if(ne.parentId===e&&(j.push({id:ie,position:{...ne.position},extent:ne.extent}),ne.extent==="parent"||ne.expandParent)){const oe=Zre(ne,k,ne.origin??z);$?$=[[Math.min(oe[0][0],$[0][0]),Math.min(oe[0][1],$[0][1])],[Math.max(oe[1][0],$[1][0]),Math.max(oe[1][1],$[1][1])]]:$=oe}h?.(q,{...S})}).on("drag",q=>{const{transform:B,snapGrid:L,snapToGrid:U,nodeOrigin:V}=n(),z=_h(q.sourceEvent,{transform:B,snapGrid:L,snapToGrid:U,containerBounds:R}),X=[];if(!k)return;const{x:J,y:le,width:ie,height:ne}=S,oe={},te=k.origin??V,{width:ce,height:de,x:ye,y:we}=Kre(I,C,z,d,p,te,F,$),Ie=ce!==ie,ze=de!==ne,je=ye!==J&&Ie,De=we!==le&&ze;if(!je&&!De&&!Ie&&!ze)return;if((je||De||te[0]===1||te[1]===1)&&(oe.x=je?ye:S.x,oe.y=De?we:S.y,S.x=oe.x,S.y=oe.y,j.length>0)){const ut=ye-J,St=we-le;for(const Ot of j)Ot.position={x:Ot.position.x-ut+te[0]*(ce-ie),y:Ot.position.y-St+te[1]*(de-ne)},X.push(Ot)}if((Ie||ze)&&(oe.width=Ie?ce:S.width,oe.height=ze?de:S.height,S.width=oe.width,S.height=oe.height),A&&k.expandParent){const ut=te[0]*(oe.width??0);oe.x&&oe.x<ut&&(S.x=ut,I.x=I.x-(oe.x-ut));const St=te[1]*(oe.height??0);oe.y&&oe.y<St&&(S.y=St,I.y=I.y-(oe.y-St))}const Je=Hre({width:S.width,prevWidth:ie,height:S.height,prevHeight:ne,affectsX:C.affectsX,affectsY:C.affectsY}),Xe={...S,direction:Je};_?.(q,Xe)!==!1&&(y?.(q,Xe),r(oe,X))}).on("end",q=>{x?.(q,{...S}),i?.()});s.call(P)}function a(){s.on(".drag",null)}return{update:o,destroy:a}}const IA=t=>{let e;const n=new Set,r=(p,h)=>{const y=typeof p=="function"?p(e):p;if(!Object.is(y,e)){const x=e;e=h??(typeof y!="object"||y===null)?y:Object.assign({},e,y),n.forEach(_=>_(e,x))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{n.clear()}},d=e=t(r,i,u);return u},Xre=t=>t?IA(t):IA,{useDebugValue:eie}=Un,{useSyncExternalStoreWithSelector:tie}=hz,nie=t=>t;function CM(t,e=nie,n){const r=tie(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return eie(r),r}const NA=(t,e)=>{const n=Xre(t),r=(i,s=e)=>CM(n,i,s);return Object.assign(r,n),r},rie=(t,e)=>t?NA(t,e):NA;function Ir(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const Rx=H.createContext(null),iie=Rx.Provider,TM=sl.error001();function qn(t,e){const n=H.useContext(Rx);if(n===null)throw new Error(TM);return CM(n,t,e)}function Nr(){const t=H.useContext(Rx);if(t===null)throw new Error(TM);return H.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const kA={display:"none"},sie={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},RM="react-flow__node-desc",jM="react-flow__edge-desc",oie="react-flow__aria-live",aie=t=>t.ariaLiveMessage;function lie({rfId:t}){const e=qn(aie);return f.jsx("div",{id:`${oie}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:sie,children:e})}function uie({rfId:t,disableKeyboardA11y:e}){return f.jsxs(f.Fragment,{children:[f.jsxs("div",{id:`${RM}-${t}`,style:kA,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),f.jsx("div",{id:`${jM}-${t}`,style:kA,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&f.jsx(lie,{rfId:t})]})}const cie=t=>t.userSelectionActive?"none":"all",w1=H.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const o=qn(cie),a=`${t}`.split("-");return f.jsx("div",{className:Jr(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},ref:s,...i,children:e})});function die({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:f.jsx(w1,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:f.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const fie=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},Iy=t=>t.id;function pie(t,e){return Ir(t.selectedNodes.map(Iy),e.selectedNodes.map(Iy))&&Ir(t.selectedEdges.map(Iy),e.selectedEdges.map(Iy))}function hie({onSelectionChange:t}){const e=Nr(),{selectedNodes:n,selectedEdges:r}=qn(fie,pie);return H.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const mie=t=>!!t.onSelectionChangeHandlers;function gie({onSelectionChange:t}){const e=qn(mie);return t||e?f.jsx(hie,{onSelectionChange:t}):null}const OM=[0,0],yie={x:0,y:0,zoom:1},bie=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],CA=[...bie,"rfId"],vie=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),TA={translateExtent:im,nodeOrigin:OM,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function xie(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=qn(vie,Ir),p=Nr();H.useEffect(()=>(u(t.defaultNodes,t.defaultEdges),()=>{h.current=TA,a()}),[]);const h=H.useRef(TA);return H.useEffect(()=>{for(const y of CA){const x=t[y],_=h.current[y];x!==_&&(typeof t[y]>"u"||(y==="nodes"?e(x):y==="edges"?n(x):y==="minZoom"?r(x):y==="maxZoom"?i(x):y==="translateExtent"?s(x):y==="nodeExtent"?o(x):y==="paneClickDistance"?d(x):y==="fitView"?p.setState({fitViewOnInit:x}):y==="fitViewOptions"?p.setState({fitViewOnInitOptions:x}):p.setState({[y]:x})))}h.current=t},CA.map(y=>t[y])),null}function RA(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function wie(t){const[e,n]=H.useState(t==="system"?null:t);return H.useEffect(()=>{if(t!=="system"){n(t);return}const r=RA(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:RA()?.matches?"dark":"light"}const jA=typeof document<"u"?document:null;function lm(t=null,e={target:jA,actInsideInputWithModifier:!0}){const[n,r]=H.useState(!1),i=H.useRef(!1),s=H.useRef(new Set([])),[o,a]=H.useMemo(()=>{if(t!==null){const d=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=d.reduce((h,y)=>h.concat(...y),[]);return[d,p]}return[[],[]]},[t]);return H.useEffect(()=>{const u=e?.target||jA;if(t!==null){const d=y=>{if(i.current=y.ctrlKey||y.metaKey||y.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&qI(y))return!1;const _=qA(y.code,a);s.current.add(y[_]),OA(o,s.current,!1)&&(y.preventDefault(),r(!0))},p=y=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&qI(y))return!1;const _=qA(y.code,a);OA(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(y[_]),y.key==="Meta"&&s.current.clear(),i.current=!1},h=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",d),u?.addEventListener("keyup",p),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{u?.removeEventListener("keydown",d),u?.removeEventListener("keyup",p),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[t,r]),n}function OA(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function qA(t,e){return e.includes(t)?"code":"key"}const _ie=()=>{const t=Nr();return H.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:o}=t.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},fitView:e=>{const{nodeLookup:n,minZoom:r,maxZoom:i,panZoom:s,domNode:o}=t.getState();if(!s||!o)return Promise.resolve(!1);const a=RI(n,e),{width:u,height:d}=Cx(o);return jI({nodes:a,width:u,height:d,minZoom:r,maxZoom:i,panZoom:s},e)},setCenter:async(e,n,r)=>{const{width:i,height:s,maxZoom:o,panZoom:a}=t.getState(),u=typeof r?.zoom<"u"?r.zoom:o,d=i/2-e*u,p=s/2-n*u;return a?(await a.setViewport({x:d,y:p,zoom:u},{duration:r?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:a}=t.getState(),u=m1(e,r,i,s,o,n?.padding??.1);return a?(await a.setViewport(u,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={snapToGrid:!0})=>{const{transform:r,snapGrid:i,domNode:s}=t.getState();if(!s)return e;const{x:o,y:a}=s.getBoundingClientRect(),u={x:e.x-o,y:e.y-a};return Bm(u,r,n.snapToGrid,i)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=cM(e,n);return{x:o.x+i,y:o.y+s}}}),[])};function qM(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const a={...s};for(const u of o)Sie(u,a);n.push(a)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function Sie(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&(e.width=t.dimensions.width,e.height=t.dimensions.height)),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function _1(t,e){return qM(t,e)}function AM(t,e){return qM(t,e)}function Ku(t,e){return{id:t,type:"select",selected:e}}function jd(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(Ku(s.id,o)))}return r}function AA({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const o=e.get(s.id),a=o?.internals?.userNode??o;a!==void 0&&a!==s&&n.push({id:s.id,item:s,type:"replace"}),a===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function PA(t){return{id:t.id,type:"remove"}}const FA=t=>are(t),Eie=t=>iM(t);function PM(t){return H.forwardRef(t)}const Iie=typeof window<"u"?H.useLayoutEffect:H.useEffect;function DA(t){const[e,n]=H.useState(BigInt(0)),[r]=H.useState(()=>Nie(()=>n(i=>i+BigInt(1))));return Iie(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function Nie(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const FM=H.createContext(null);function kie({children:t}){const e=Nr(),n=H.useCallback(a=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:p,onNodesChange:h,nodeLookup:y}=e.getState();let x=u;for(const _ of a)x=typeof _=="function"?_(x):_;p?d(x):h&&h(AA({items:x,lookup:y}))},[]),r=DA(n),i=H.useCallback(a=>{const{edges:u=[],setEdges:d,hasDefaultEdges:p,onEdgesChange:h,edgeLookup:y}=e.getState();let x=u;for(const _ of a)x=typeof _=="function"?_(x):_;p?d(x):h&&h(AA({items:x,lookup:y}))},[]),s=DA(i),o=H.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return f.jsx(FM.Provider,{value:o,children:t})}function Cie(){const t=H.useContext(FM);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const Tie=t=>!!t.panZoom;function qf(){const t=_ie(),e=Nr(),n=Cie(),r=qn(Tie),i=H.useMemo(()=>{const s=h=>e.getState().nodeLookup.get(h),o=h=>{n.nodeQueue.push(h)},a=h=>{n.edgeQueue.push(h)},u=h=>{const{nodeLookup:y,nodeOrigin:x}=e.getState(),_=FA(h)?h:y.get(h.id),S=_.parentId?fM(_.position,_.measured,_.parentId,y,x):_.position,I={..._,position:S,width:_.measured?.width??_.width,height:_.measured?.height??_.height};return pf(I)},d=(h,y,x={replace:!1})=>{o(_=>_.map(S=>{if(S.id===h){const I=typeof y=="function"?y(S):y;return x.replace&&FA(I)?I:{...S,...I}}return S}))},p=(h,y,x={replace:!1})=>{a(_=>_.map(S=>{if(S.id===h){const I=typeof y=="function"?y(S):y;return x.replace&&Eie(I)?I:{...S,...I}}return S}))};return{getNodes:()=>e.getState().nodes.map(h=>({...h})),getNode:h=>s(h)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:h=[]}=e.getState();return h.map(y=>({...y}))},getEdge:h=>e.getState().edgeLookup.get(h),setNodes:o,setEdges:a,addNodes:h=>{const y=Array.isArray(h)?h:[h];n.nodeQueue.push(x=>[...x,...y])},addEdges:h=>{const y=Array.isArray(h)?h:[h];n.edgeQueue.push(x=>[...x,...y])},toObject:()=>{const{nodes:h=[],edges:y=[],transform:x}=e.getState(),[_,S,I]=x;return{nodes:h.map(C=>({...C})),edges:y.map(C=>({...C})),viewport:{x:_,y:S,zoom:I}}},deleteElements:async({nodes:h=[],edges:y=[]})=>{const{nodes:x,edges:_,onNodesDelete:S,onEdgesDelete:I,triggerNodeChanges:C,triggerEdgeChanges:k,onDelete:R,onBeforeDelete:j}=e.getState(),{nodes:A,edges:F}=await cre({nodesToRemove:h,edgesToRemove:y,nodes:x,edges:_,onBeforeDelete:j}),$=F.length>0,P=A.length>0;if($){const q=F.map(PA);I?.(F),k(q)}if(P){const q=A.map(PA);S?.(A),C(q)}return(P||$)&&R?.({nodes:A,edges:F}),{deletedNodes:A,deletedEdges:F}},getIntersectingNodes:(h,y=!0,x)=>{const _=pA(h),S=_?h:u(h),I=x!==void 0;return S?(x||e.getState().nodes).filter(C=>{const k=e.getState().nodeLookup.get(C.id);if(k&&!_&&(C.id===h.id||!k.internals.positionAbsolute))return!1;const R=pf(I?C:k),j=om(R,S);return y&&j>0||j>=S.width*S.height}):[]},isNodeIntersecting:(h,y,x=!0)=>{const S=pA(h)?h:u(h);if(!S)return!1;const I=om(S,y);return x&&I>0||I>=S.width*S.height},updateNode:d,updateNodeData:(h,y,x={replace:!1})=>{d(h,_=>{const S=typeof y=="function"?y(_):y;return x.replace?{..._,data:S}:{..._,data:{..._.data,...S}}},x)},updateEdge:p,updateEdgeData:(h,y,x={replace:!1})=>{p(h,_=>{const S=typeof y=="function"?y(_):y;return x.replace?{..._,data:S}:{..._,data:{..._.data,...S}}},x)},getNodesBounds:h=>{const{nodeLookup:y,nodeOrigin:x}=e.getState();return lre(h,{nodeLookup:y,nodeOrigin:x})},getHandleConnections:({type:h,id:y,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}-${h}${y?`-${y}`:""}`)?.values()??[]),getNodeConnections:({type:h,handleId:y,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}${h?y?`-${h}-${y}`:`-${h}`:""}`)?.values()??[])}},[]);return H.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const LA=t=>t.selected,Rie={actInsideInputWithModifier:!1},jie=typeof window<"u"?window:void 0;function Oie({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=Nr(),{deleteElements:r}=qf(),i=lm(t,Rie),s=lm(e,{target:jie});H.useEffect(()=>{if(i){const{edges:o,nodes:a}=n.getState();r({nodes:a.filter(LA),edges:o.filter(LA)}),n.setState({nodesSelectionActive:!1})}},[i]),H.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function qie(t){const e=Nr();H.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=Cx(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",sl.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const jx={position:"absolute",width:"100%",height:"100%",top:0,left:0},Aie=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function Pie({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=dc.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:u,translateExtent:d,minZoom:p,maxZoom:h,zoomActivationKeyCode:y,preventScrolling:x=!0,children:_,noWheelClassName:S,noPanClassName:I,onViewportChange:C,isControlledViewport:k,paneClickDistance:R}){const j=Nr(),A=H.useRef(null),{userSelectionActive:F,lib:$}=qn(Aie,Ir),P=lm(y),q=H.useRef();qie(A);const B=H.useCallback(L=>{C?.({x:L[0],y:L[1],zoom:L[2]}),k||j.setState({transform:L})},[C,k]);return H.useEffect(()=>{if(A.current){q.current=Vre({domNode:A.current,minZoom:p,maxZoom:h,translateExtent:d,viewport:u,paneClickDistance:R,onDraggingChange:z=>j.setState({paneDragging:z}),onPanZoomStart:(z,X)=>{const{onViewportChangeStart:J,onMoveStart:le}=j.getState();le?.(z,X),J?.(X)},onPanZoom:(z,X)=>{const{onViewportChange:J,onMove:le}=j.getState();le?.(z,X),J?.(X)},onPanZoomEnd:(z,X)=>{const{onViewportChangeEnd:J,onMoveEnd:le}=j.getState();le?.(z,X),J?.(X)}});const{x:L,y:U,zoom:V}=q.current.getViewport();return j.setState({panZoom:q.current,transform:[L,U,V],domNode:A.current.closest(".react-flow")}),()=>{q.current?.destroy()}}},[]),H.useEffect(()=>{q.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:P,preventScrolling:x,noPanClassName:I,userSelectionActive:F,noWheelClassName:S,lib:$,onTransformChange:B})},[t,e,n,r,i,s,o,a,P,x,I,F,S,$,B]),f.jsx("div",{className:"react-flow__renderer",ref:A,style:jx,children:_})}const Fie=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Die(){const{userSelectionActive:t,userSelectionRect:e}=qn(Fie,Ir);return t&&e?f.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const nE=(t,e)=>n=>{n.target===e.current&&t?.(n)},Lie=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging});function Mie({isSelecting:t,selectionKeyPressed:e,selectionMode:n=sm.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:a,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:p,onPaneMouseMove:h,onPaneMouseLeave:y,children:x}){const _=Nr(),{userSelectionActive:S,elementsSelectable:I,dragging:C}=qn(Lie,Ir),k=I&&(t||S),R=H.useRef(null),j=H.useRef(),A=H.useRef(new Set),F=H.useRef(new Set),$=H.useRef(!1),P=H.useRef(!1),q=J=>{if($.current){$.current=!1;return}a?.(J),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},B=J=>{if(Array.isArray(r)&&r?.includes(2)){J.preventDefault();return}u?.(J)},L=d?J=>d(J):void 0,U=J=>{const{resetSelectedElements:le,domNode:ie}=_.getState();if(j.current=ie?.getBoundingClientRect(),!I||!t||J.button!==0||J.target!==R.current||!j.current)return;J.target?.setPointerCapture?.(J.pointerId),P.current=!0,$.current=!1;const{x:ne,y:oe}=Qa(J.nativeEvent,j.current);le(),_.setState({userSelectionRect:{width:0,height:0,startX:ne,startY:oe,x:ne,y:oe}}),s?.(J)},V=J=>{const{userSelectionRect:le,transform:ie,nodeLookup:ne,edgeLookup:oe,connectionLookup:te,triggerNodeChanges:ce,triggerEdgeChanges:de,defaultEdgeOptions:ye}=_.getState();if(!j.current||!le)return;$.current=!0;const{x:we,y:Ie}=Qa(J.nativeEvent,j.current),{startX:ze,startY:je}=le,De={startX:ze,startY:je,x:we<ze?we:ze,y:Ie<je?Ie:je,width:Math.abs(we-ze),height:Math.abs(Ie-je)},Je=A.current,Xe=F.current;A.current=new Set(sM(ne,De,ie,n===sm.Partial,!0).map(ut=>ut.id)),F.current=new Set;const Ue=ye?.selectable??!0;for(const ut of A.current){const St=te.get(ut);if(St)for(const{edgeId:Ot}of St.values()){const Gt=oe.get(Ot);Gt&&(Gt.selectable??Ue)&&F.current.add(Ot)}}if(!hA(Je,A.current)){const ut=jd(ne,A.current,!0);ce(ut)}if(!hA(Xe,F.current)){const ut=jd(oe,F.current);de(ut)}_.setState({userSelectionRect:De,userSelectionActive:!0,nodesSelectionActive:!1})},z=J=>{if(J.button!==0||!P.current)return;J.target?.releasePointerCapture?.(J.pointerId);const{userSelectionRect:le}=_.getState();!S&&le&&J.target===R.current&&q?.(J),_.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:A.current.size>0}),o?.(J),(e||i)&&($.current=!1),P.current=!1},X=r===!0||Array.isArray(r)&&r.includes(0);return f.jsxs("div",{className:Jr(["react-flow__pane",{draggable:X,dragging:C,selection:t}]),onClick:k?void 0:nE(q,R),onContextMenu:nE(B,R),onWheel:nE(L,R),onPointerEnter:k?void 0:p,onPointerDown:k?U:h,onPointerMove:k?V:h,onPointerUp:k?z:void 0,onPointerLeave:y,ref:R,style:jx,children:[x,f.jsx(Die,{})]})}function LI({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:a,onError:u}=e.getState(),d=a.get(t);if(!d){u?.("012",sl.error012(t));return}e.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function DM({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const a=Nr(),[u,d]=H.useState(!1),p=H.useRef();return H.useEffect(()=>{p.current=jre({getStoreItems:()=>a.getState(),onNodeMouseDown:h=>{LI({id:h,store:a,nodeRef:t})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),H.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{p.current?.destroy()}},[n,r,e,s,t,i]),u}const $ie=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function LM(){const t=Nr();return H.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:a,updateNodePositions:u,nodeLookup:d,nodeOrigin:p}=t.getState(),h=new Map,y=$ie(o),x=i?s[0]:5,_=i?s[1]:5,S=n.direction.x*x*n.factor,I=n.direction.y*_*n.factor;for(const[,C]of d){if(!y(C))continue;let k={x:C.internals.positionAbsolute.x+S,y:C.internals.positionAbsolute.y+I};i&&(k=kx(k,s));const{position:R,positionAbsolute:j}=oM({nodeId:C.id,nextPosition:k,nodeLookup:d,nodeExtent:r,nodeOrigin:p,onError:a});C.position=R,C.internals.positionAbsolute=j,h.set(C.id,C)}u(h)},[])}const S1=H.createContext(null),Bie=S1.Provider;S1.Consumer;const E1=()=>H.useContext(S1),zie=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),Wie=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:a,toHandle:u,isValid:d}=o,p=u?.nodeId===t&&u?.id===e&&u?.type===n;return{connectingFrom:a?.nodeId===t&&a?.id===e&&a?.type===n,connectingTo:p,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:s===df.Strict?a?.type!==n:t!==a?.nodeId||e!==a?.id,connectionInProcess:!!a,valid:p&&d}};function Uie({type:t="source",position:e=Tt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:u,className:d,onMouseDown:p,onTouchStart:h,...y},x){const _=o||null,S=t==="target",I=Nr(),C=E1(),{connectOnClick:k,noPanClassName:R,rfId:j}=qn(zie,Ir),{connectingFrom:A,connectingTo:F,clickConnecting:$,isPossibleEndHandle:P,connectionInProcess:q,valid:B}=qn(Wie(C,_,t),Ir);C||I.getState().onError?.("010",sl.error010());const L=z=>{const{defaultEdgeOptions:X,onConnect:J,hasDefaultEdges:le}=I.getState(),ie={...X,...z};if(le){const{edges:ne,setEdges:oe}=I.getState();oe(yre(ie,ne))}J?.(ie),a?.(ie)},U=z=>{if(!C)return;const X=hM(z.nativeEvent);if(i&&(X&&z.button===0||!X)){const J=I.getState();DI.onPointerDown(z.nativeEvent,{autoPanOnConnect:J.autoPanOnConnect,connectionMode:J.connectionMode,connectionRadius:J.connectionRadius,domNode:J.domNode,nodeLookup:J.nodeLookup,lib:J.lib,isTarget:S,handleId:_,nodeId:C,flowId:J.rfId,panBy:J.panBy,cancelConnection:J.cancelConnection,onConnectStart:J.onConnectStart,onConnectEnd:J.onConnectEnd,updateConnection:J.updateConnection,onConnect:L,isValidConnection:n||J.isValidConnection,getTransform:()=>I.getState().transform,getFromHandle:()=>I.getState().connection.fromHandle,autoPanSpeed:J.autoPanSpeed})}X?p?.(z):h?.(z)},V=z=>{const{onClickConnectStart:X,onClickConnectEnd:J,connectionClickStartHandle:le,connectionMode:ie,isValidConnection:ne,lib:oe,rfId:te,nodeLookup:ce,connection:de}=I.getState();if(!C||!le&&!i)return;if(!le){X?.(z.nativeEvent,{nodeId:C,handleId:_,handleType:t}),I.setState({connectionClickStartHandle:{nodeId:C,type:t,id:_}});return}const ye=pM(z.target),we=n||ne,{connection:Ie,isValid:ze}=DI.isValid(z.nativeEvent,{handle:{nodeId:C,id:_,type:t},connectionMode:ie,fromNodeId:le.nodeId,fromHandleId:le.id||null,fromType:le.type,isValidConnection:we,flowId:te,doc:ye,lib:oe,nodeLookup:ce});ze&&Ie&&L(Ie);const je=structuredClone(de);delete je.inProgress,je.toPosition=je.toHandle?je.toHandle.position:null,J?.(z,je),I.setState({connectionClickStartHandle:null})};return f.jsx("div",{"data-handleid":_,"data-nodeid":C,"data-handlepos":e,"data-id":`${j}-${C}-${_}-${t}`,className:Jr(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",R,d,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,clickconnecting:$,connectingfrom:A,connectingto:F,valid:B,connectionindicator:r&&(!q||P)&&(q?s:i)}]),onMouseDown:U,onTouchStart:U,onClick:k?V:void 0,ref:x,...y,children:u})}const $i=H.memo(PM(Uie));function Vie({data:t,isConnectable:e,sourcePosition:n=Tt.Bottom}){return f.jsxs(f.Fragment,{children:[t?.label,f.jsx($i,{type:"source",position:n,isConnectable:e})]})}function Hie({data:t,isConnectable:e,targetPosition:n=Tt.Top,sourcePosition:r=Tt.Bottom}){return f.jsxs(f.Fragment,{children:[f.jsx($i,{type:"target",position:n,isConnectable:e}),t?.label,f.jsx($i,{type:"source",position:r,isConnectable:e})]})}function Gie(){return null}function Kie({data:t,isConnectable:e,targetPosition:n=Tt.Top}){return f.jsxs(f.Fragment,{children:[f.jsx($i,{type:"target",position:n,isConnectable:e}),t?.label]})}const Rv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},MA={input:Vie,default:Hie,output:Kie,group:Gie};function Qie(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const Jie=t=>{const{width:e,height:n,x:r,y:i}=Of(t.nodeLookup,{filter:s=>!!s.selected});return{width:Bo(e)?e:null,height:Bo(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function Zie({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Nr(),{width:i,height:s,transformString:o,userSelectionActive:a}=qn(Jie,Ir),u=LM(),d=H.useRef(null);if(H.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),DM({nodeRef:d}),a||!i||!s)return null;const p=t?y=>{const x=r.getState().nodes.filter(_=>_.selected);t(y,x)}:void 0,h=y=>{Object.prototype.hasOwnProperty.call(Rv,y.key)&&(y.preventDefault(),u({direction:Rv[y.key],factor:y.shiftKey?4:1}))};return f.jsx("div",{className:Jr(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:f.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s}})})}const $A=typeof window<"u"?window:void 0,Yie=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function MM({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:a,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:p,selectionMode:h,onSelectionStart:y,onSelectionEnd:x,multiSelectionKeyCode:_,panActivationKeyCode:S,zoomActivationKeyCode:I,elementsSelectable:C,zoomOnScroll:k,zoomOnPinch:R,panOnScroll:j,panOnScrollSpeed:A,panOnScrollMode:F,zoomOnDoubleClick:$,panOnDrag:P,defaultViewport:q,translateExtent:B,minZoom:L,maxZoom:U,preventScrolling:V,onSelectionContextMenu:z,noWheelClassName:X,noPanClassName:J,disableKeyboardA11y:le,onViewportChange:ie,isControlledViewport:ne}){const{nodesSelectionActive:oe,userSelectionActive:te}=qn(Yie),ce=lm(d,{target:$A}),de=lm(S,{target:$A}),ye=de||P,we=de||j,Ie=p&&ye!==!0,ze=ce||te||Ie;return Oie({deleteKeyCode:u,multiSelectionKeyCode:_}),f.jsx(Pie,{onPaneContextMenu:s,elementsSelectable:C,zoomOnScroll:k,zoomOnPinch:R,panOnScroll:we,panOnScrollSpeed:A,panOnScrollMode:F,zoomOnDoubleClick:$,panOnDrag:!ce&&ye,defaultViewport:q,translateExtent:B,minZoom:L,maxZoom:U,zoomActivationKeyCode:I,preventScrolling:V,noWheelClassName:X,noPanClassName:J,onViewportChange:ie,isControlledViewport:ne,paneClickDistance:a,children:f.jsxs(Mie,{onSelectionStart:y,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ye,isSelecting:!!ze,selectionMode:h,selectionKeyPressed:ce,selectionOnDrag:Ie,children:[t,oe&&f.jsx(Zie,{onSelectionContextMenu:z,noPanClassName:J,disableKeyboardA11y:le})]})})}MM.displayName="FlowRenderer";const Xie=H.memo(MM),ese=t=>e=>t?sM(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function tse(t){return qn(H.useCallback(ese(t),[t]),Ir)}const nse=t=>t.updateNodeInternals;function rse(){const t=qn(nse),[e]=H.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return H.useEffect(()=>()=>{e?.disconnect()},[e]),e}function ise({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=Nr(),s=H.useRef(null),o=H.useRef(null),a=H.useRef(t.sourcePosition),u=H.useRef(t.targetPosition),d=H.useRef(e),p=n&&!!t.internals.handleBounds;return H.useEffect(()=>{s.current&&!t.hidden&&(!p||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[p,t.hidden]),H.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),H.useEffect(()=>{if(s.current){const h=d.current!==e,y=a.current!==t.sourcePosition,x=u.current!==t.targetPosition;(h||y||x)&&(d.current=e,a.current=t.sourcePosition,u.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function sse({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:a,elementsSelectable:u,nodesConnectable:d,nodesFocusable:p,resizeObserver:h,noDragClassName:y,noPanClassName:x,disableKeyboardA11y:_,rfId:S,nodeTypes:I,nodeExtent:C,nodeClickDistance:k,onError:R}){const{node:j,internals:A,isParent:F}=qn(je=>{const De=je.nodeLookup.get(t),Je=je.parentLookup.has(t);return{node:De,internals:De.internals,isParent:Je}},Ir);let $=j.type||"default",P=I?.[$]||MA[$];P===void 0&&(R?.("003",sl.error003($)),$="default",P=MA.default);const q=!!(j.draggable||a&&typeof j.draggable>"u"),B=!!(j.selectable||u&&typeof j.selectable>"u"),L=!!(j.connectable||d&&typeof j.connectable>"u"),U=!!(j.focusable||p&&typeof j.focusable>"u"),V=Nr(),z=dM(j),X=ise({node:j,nodeType:$,hasDimensions:z,resizeObserver:h}),J=DM({nodeRef:X,disabled:j.hidden||!q,noDragClassName:y,handleSelector:j.dragHandle,nodeId:t,isSelectable:B,nodeClickDistance:k}),le=LM();if(j.hidden)return null;const ie=ol(j),ne=Qie(j),oe=B||q||e||n||r||i,te=n?je=>n(je,{...A.userNode}):void 0,ce=r?je=>r(je,{...A.userNode}):void 0,de=i?je=>i(je,{...A.userNode}):void 0,ye=s?je=>s(je,{...A.userNode}):void 0,we=o?je=>o(je,{...A.userNode}):void 0,Ie=je=>{const{selectNodesOnDrag:De,nodeDragThreshold:Je}=V.getState();B&&(!De||!q||Je>0)&&LI({id:t,store:V,nodeRef:X}),e&&e(je,{...A.userNode})},ze=je=>{if(!(qI(je.nativeEvent)||_))if(tM.includes(je.key)&&B){const De=je.key==="Escape";LI({id:t,store:V,unselect:De,nodeRef:X})}else q&&j.selected&&Object.prototype.hasOwnProperty.call(Rv,je.key)&&(je.preventDefault(),V.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~A.positionAbsolute.x}, y: ${~~A.positionAbsolute.y}`}),le({direction:Rv[je.key],factor:je.shiftKey?4:1}))};return f.jsx("div",{className:Jr(["react-flow__node",`react-flow__node-${$}`,{[x]:q},j.className,{selected:j.selected,selectable:B,parent:F,draggable:q,dragging:J}]),ref:X,style:{zIndex:A.z,transform:`translate(${A.positionAbsolute.x}px,${A.positionAbsolute.y}px)`,pointerEvents:oe?"all":"none",visibility:z?"visible":"hidden",...j.style,...ne},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:te,onMouseMove:ce,onMouseLeave:de,onContextMenu:ye,onClick:Ie,onDoubleClick:we,onKeyDown:U?ze:void 0,tabIndex:U?0:void 0,role:U?"button":void 0,"aria-describedby":_?void 0:`${RM}-${S}`,"aria-label":j.ariaLabel,children:f.jsx(Bie,{value:t,children:f.jsx(P,{id:t,data:j.data,type:$,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:j.selected??!1,selectable:B,draggable:q,deletable:j.deletable??!0,isConnectable:L,sourcePosition:j.sourcePosition,targetPosition:j.targetPosition,dragging:J,dragHandle:j.dragHandle,zIndex:A.z,parentId:j.parentId,...ie})})})}const ose=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function $M(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=qn(ose,Ir),o=tse(t.onlyRenderVisibleElements),a=rse();return f.jsx("div",{className:"react-flow__nodes",style:jx,children:o.map(u=>f.jsx(sse,{id:u,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:a,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},u))})}$M.displayName="NodeRenderer";const ase=H.memo($M);function lse(t){return qn(H.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&hre({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),Ir)}const use=({color:t="none",strokeWidth:e=1})=>f.jsx("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),cse=({color:t="none",strokeWidth:e=1})=>f.jsx("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),BA={[kv.Arrow]:use,[kv.ArrowClosed]:cse};function dse(t){const e=Nr();return H.useMemo(()=>Object.prototype.hasOwnProperty.call(BA,t)?BA[t]:(e.getState().onError?.("009",sl.error009(t)),null),[t])}const fse=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const u=dse(e);return u?f.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:f.jsx(u,{color:n,strokeWidth:o})}):null},BM=({defaultColor:t,rfId:e})=>{const n=qn(s=>s.edges),r=qn(s=>s.defaultEdgeOptions),i=H.useMemo(()=>_re(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?f.jsx("svg",{className:"react-flow__marker",children:f.jsx("defs",{children:i.map(s=>f.jsx(fse,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};BM.displayName="MarkerDefinitions";var pse=H.memo(BM);function zM({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:u,className:d,...p}){const[h,y]=H.useState({x:1,y:0,width:0,height:0}),x=Jr(["react-flow__edge-textwrapper",d]),_=H.useRef(null);return H.useEffect(()=>{if(_.current){const S=_.current.getBBox();y({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),typeof n>"u"||!n?null:f.jsxs("g",{transform:`translate(${t-h.width/2} ${e-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...p,children:[i&&f.jsx("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),f.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:_,style:r,children:n}),u]})}zM.displayName="EdgeText";const hse=H.memo(zM);function zm({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:u,interactionWidth:d=20,...p}){return f.jsxs(f.Fragment,{children:[f.jsx("path",{...p,d:t,fill:"none",className:Jr(["react-flow__edge-path",p.className])}),d&&f.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r&&Bo(e)&&Bo(n)?f.jsx(hse,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:u}):null]})}function zA({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Tt.Left||t===Tt.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function Wm({sourceX:t,sourceY:e,sourcePosition:n=Tt.Bottom,targetX:r,targetY:i,targetPosition:s=Tt.Top}){const[o,a]=zA({pos:n,x1:t,y1:e,x2:r,y2:i}),[u,d]=zA({pos:s,x1:r,y1:i,x2:t,y2:e}),[p,h,y,x]=mM({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${a} ${u},${d} ${r},${i}`,p,h,y,x]}function WM(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Tt.Bottom,targetPosition:a=Tt.Top,label:u,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:y,labelBgBorderRadius:x,style:_,markerEnd:S,markerStart:I,interactionWidth:C})=>{const[k,R,j]=Wm({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a}),A=t.isInternal?void 0:e;return f.jsx(zm,{id:A,path:k,labelX:R,labelY:j,label:u,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:y,labelBgBorderRadius:x,style:_,markerEnd:S,markerStart:I,interactionWidth:C})})}const mse=WM({isInternal:!1}),UM=WM({isInternal:!0});mse.displayName="SimpleBezierEdge";UM.displayName="SimpleBezierEdgeInternal";function VM(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:y,sourcePosition:x=Tt.Bottom,targetPosition:_=Tt.Top,markerEnd:S,markerStart:I,pathOptions:C,interactionWidth:k})=>{const[R,j,A]=AI({sourceX:n,sourceY:r,sourcePosition:x,targetX:i,targetY:s,targetPosition:_,borderRadius:C?.borderRadius,offset:C?.offset}),F=t.isInternal?void 0:e;return f.jsx(zm,{id:F,path:R,labelX:j,labelY:A,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:y,markerEnd:S,markerStart:I,interactionWidth:k})})}const HM=VM({isInternal:!1}),GM=VM({isInternal:!0});HM.displayName="SmoothStepEdge";GM.displayName="SmoothStepEdgeInternal";function KM(t){return H.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return f.jsx(HM,{...n,id:r,pathOptions:H.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const gse=KM({isInternal:!1}),QM=KM({isInternal:!0});gse.displayName="StepEdge";QM.displayName="StepEdgeInternal";function JM(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:y,markerEnd:x,markerStart:_,interactionWidth:S})=>{const[I,C,k]=yM({sourceX:n,sourceY:r,targetX:i,targetY:s}),R=t.isInternal?void 0:e;return f.jsx(zm,{id:R,path:I,labelX:C,labelY:k,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:y,markerEnd:x,markerStart:_,interactionWidth:S})})}const yse=JM({isInternal:!1}),ZM=JM({isInternal:!0});yse.displayName="StraightEdge";ZM.displayName="StraightEdgeInternal";function YM(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Tt.Bottom,targetPosition:a=Tt.Top,label:u,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:y,labelBgBorderRadius:x,style:_,markerEnd:S,markerStart:I,pathOptions:C,interactionWidth:k})=>{const[R,j,A]=g1({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a,curvature:C?.curvature}),F=t.isInternal?void 0:e;return f.jsx(zm,{id:F,path:R,labelX:j,labelY:A,label:u,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:y,labelBgBorderRadius:x,style:_,markerEnd:S,markerStart:I,interactionWidth:k})})}const bse=YM({isInternal:!1}),XM=YM({isInternal:!0});bse.displayName="BezierEdge";XM.displayName="BezierEdgeInternal";const WA={default:XM,straight:ZM,step:QM,smoothstep:GM,simplebezier:UM},UA={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},vse=(t,e,n)=>n===Tt.Left?t-e:n===Tt.Right?t+e:t,xse=(t,e,n)=>n===Tt.Top?t-e:n===Tt.Bottom?t+e:t,VA="react-flow__edgeupdater";function HA({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a}){return f.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Jr([VA,`${VA}-${a}`]),cx:vse(e,r,t),cy:xse(n,r,t),r,stroke:"transparent",fill:"transparent"})}function wse({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:a,targetPosition:u,onReconnect:d,onReconnectStart:p,onReconnectEnd:h,setReconnecting:y,setUpdateHover:x}){const _=Nr(),S=(j,A)=>{if(j.button!==0)return;const{autoPanOnConnect:F,domNode:$,isValidConnection:P,connectionMode:q,connectionRadius:B,lib:L,onConnectStart:U,onConnectEnd:V,cancelConnection:z,nodeLookup:X,rfId:J,panBy:le,updateConnection:ie}=_.getState(),ne=A.type==="target";y(!0),p?.(j,n,A.type);const oe=(ce,de)=>{y(!1),h?.(ce,n,A.type,de)},te=ce=>d?.(n,ce);DI.onPointerDown(j.nativeEvent,{autoPanOnConnect:F,connectionMode:q,connectionRadius:B,domNode:$,handleId:A.id,nodeId:A.nodeId,nodeLookup:X,isTarget:ne,edgeUpdaterType:A.type,lib:L,flowId:J,cancelConnection:z,panBy:le,isValidConnection:P,onConnect:te,onConnectStart:U,onConnectEnd:V,onReconnectEnd:oe,updateConnection:ie,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle})},I=j=>S(j,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),C=j=>S(j,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),k=()=>x(!0),R=()=>x(!1);return f.jsxs(f.Fragment,{children:[(t===!0||t==="source")&&f.jsx(HA,{position:a,centerX:r,centerY:i,radius:e,onMouseDown:I,onMouseEnter:k,onMouseOut:R,type:"source"}),(t===!0||t==="target")&&f.jsx(HA,{position:u,centerX:s,centerY:o,radius:e,onMouseDown:C,onMouseEnter:k,onMouseOut:R,type:"target"})]})}function _se({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:a,onMouseMove:u,onMouseLeave:d,reconnectRadius:p,onReconnect:h,onReconnectStart:y,onReconnectEnd:x,rfId:_,edgeTypes:S,noPanClassName:I,onError:C,disableKeyboardA11y:k}){let R=qn(Ue=>Ue.edgeLookup.get(t));const j=qn(Ue=>Ue.defaultEdgeOptions);R=j?{...j,...R}:R;let A=R.type||"default",F=S?.[A]||WA[A];F===void 0&&(C?.("011",sl.error011(A)),A="default",F=WA.default);const $=!!(R.focusable||e&&typeof R.focusable>"u"),P=typeof h<"u"&&(R.reconnectable||n&&typeof R.reconnectable>"u"),q=!!(R.selectable||r&&typeof R.selectable>"u"),B=H.useRef(null),[L,U]=H.useState(!1),[V,z]=H.useState(!1),X=Nr(),{zIndex:J,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ce}=qn(H.useCallback(Ue=>{const ut=Ue.nodeLookup.get(R.source),St=Ue.nodeLookup.get(R.target);if(!ut||!St)return{zIndex:R.zIndex,...UA};const Ot=wre({id:t,sourceNode:ut,targetNode:St,sourceHandle:R.sourceHandle||null,targetHandle:R.targetHandle||null,connectionMode:Ue.connectionMode,onError:C});return{zIndex:pre({selected:R.selected,zIndex:R.zIndex,sourceNode:ut,targetNode:St,elevateOnSelect:Ue.elevateEdgesOnSelect}),...Ot||UA}},[R.source,R.target,R.sourceHandle,R.targetHandle,R.selected,R.zIndex]),Ir),de=H.useMemo(()=>R.markerStart?`url('#${PI(R.markerStart,_)}')`:void 0,[R.markerStart,_]),ye=H.useMemo(()=>R.markerEnd?`url('#${PI(R.markerEnd,_)}')`:void 0,[R.markerEnd,_]);if(R.hidden||le===null||ie===null||ne===null||oe===null)return null;const we=Ue=>{const{addSelectedEdges:ut,unselectNodesAndEdges:St,multiSelectionActive:Ot}=X.getState();q&&(X.setState({nodesSelectionActive:!1}),R.selected&&Ot?(St({nodes:[],edges:[R]}),B.current?.blur()):ut([t])),i&&i(Ue,R)},Ie=s?Ue=>{s(Ue,{...R})}:void 0,ze=o?Ue=>{o(Ue,{...R})}:void 0,je=a?Ue=>{a(Ue,{...R})}:void 0,De=u?Ue=>{u(Ue,{...R})}:void 0,Je=d?Ue=>{d(Ue,{...R})}:void 0,Xe=Ue=>{if(!k&&tM.includes(Ue.key)&&q){const{unselectNodesAndEdges:ut,addSelectedEdges:St}=X.getState();Ue.key==="Escape"?(B.current?.blur(),ut({edges:[R]})):St([t])}};return f.jsx("svg",{style:{zIndex:J},children:f.jsxs("g",{className:Jr(["react-flow__edge",`react-flow__edge-${A}`,R.className,I,{selected:R.selected,animated:R.animated,inactive:!q&&!i,updating:L,selectable:q}]),onClick:we,onDoubleClick:Ie,onContextMenu:ze,onMouseEnter:je,onMouseMove:De,onMouseLeave:Je,onKeyDown:$?Xe:void 0,tabIndex:$?0:void 0,role:$?"button":"img","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":R.ariaLabel===null?void 0:R.ariaLabel||`Edge from ${R.source} to ${R.target}`,"aria-describedby":$?`${jM}-${_}`:void 0,ref:B,children:[!V&&f.jsx(F,{id:t,source:R.source,target:R.target,type:R.type,selected:R.selected,animated:R.animated,selectable:q,deletable:R.deletable??!0,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ce,data:R.data,style:R.style,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerStart:de,markerEnd:ye,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth}),P&&f.jsx(wse,{edge:R,isReconnectable:P,reconnectRadius:p,onReconnect:h,onReconnectStart:y,onReconnectEnd:x,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ce,setUpdateHover:U,setReconnecting:z})]})})}const Sse=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function e$({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:p,reconnectRadius:h,onEdgeDoubleClick:y,onReconnectStart:x,onReconnectEnd:_,disableKeyboardA11y:S}){const{edgesFocusable:I,edgesReconnectable:C,elementsSelectable:k,onError:R}=qn(Sse,Ir),j=lse(e);return f.jsxs("div",{className:"react-flow__edges",children:[f.jsx(pse,{defaultColor:t,rfId:n}),j.map(A=>f.jsx(_se,{id:A,edgesFocusable:I,edgesReconnectable:C,elementsSelectable:k,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:a,onMouseMove:u,onMouseLeave:d,onClick:p,reconnectRadius:h,onDoubleClick:y,onReconnectStart:x,onReconnectEnd:_,rfId:n,onError:R,edgeTypes:r,disableKeyboardA11y:S},A))]})}e$.displayName="EdgeRenderer";const Ese=H.memo(e$),Ise=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Nse({children:t}){const e=qn(Ise);return f.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function kse(t){const e=qf(),n=H.useRef(!1);H.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const Cse=t=>t.panZoom?.syncViewport;function Tse(t){const e=qn(Cse),n=Nr();return H.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function Rse(t){return t.connection.inProgress?{...t.connection,to:Bm(t.connection.to,t.transform)}:{...t.connection}}function jse(t){return Rse}function I1(t){const e=jse();return qn(e,Ir)}const Ose=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function qse({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:a,inProgress:u}=qn(Ose,Ir);return!(s&&i&&u)?null:f.jsx("svg",{style:t,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:f.jsx("g",{className:Jr(["react-flow__connection",rM(a)]),children:f.jsx(t$,{style:e,type:n,CustomComponent:r,isValid:a})})})}const t$=({style:t,type:e=Gl.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:a,fromPosition:u,to:d,toNode:p,toHandle:h,toPosition:y}=I1();if(!i)return;if(n)return f.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:o,fromHandle:a,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:y,connectionStatus:rM(r),toNode:p,toHandle:h});let x="";const _={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:y};switch(e){case Gl.Bezier:[x]=g1(_);break;case Gl.SimpleBezier:[x]=Wm(_);break;case Gl.Step:[x]=AI({..._,borderRadius:0});break;case Gl.SmoothStep:[x]=AI(_);break;default:[x]=yM(_)}return f.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};t$.displayName="ConnectionLine";const Ase={};function GA(t=Ase){H.useRef(t),Nr(),H.useEffect(()=>{},[t])}function Pse(){Nr(),H.useRef(!1),H.useEffect(()=>{},[])}function n$({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:y,onSelectionEnd:x,connectionLineType:_,connectionLineStyle:S,connectionLineComponent:I,connectionLineContainerStyle:C,selectionKeyCode:k,selectionOnDrag:R,selectionMode:j,multiSelectionKeyCode:A,panActivationKeyCode:F,zoomActivationKeyCode:$,deleteKeyCode:P,onlyRenderVisibleElements:q,elementsSelectable:B,defaultViewport:L,translateExtent:U,minZoom:V,maxZoom:z,preventScrolling:X,defaultMarkerColor:J,zoomOnScroll:le,zoomOnPinch:ie,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:te,zoomOnDoubleClick:ce,panOnDrag:de,onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ie,onPaneMouseLeave:ze,onPaneScroll:je,onPaneContextMenu:De,paneClickDistance:Je,nodeClickDistance:Xe,onEdgeContextMenu:Ue,onEdgeMouseEnter:ut,onEdgeMouseMove:St,onEdgeMouseLeave:Ot,reconnectRadius:Gt,onReconnect:an,onReconnectStart:xe,onReconnectEnd:be,noDragClassName:Ne,noWheelClassName:Ae,noPanClassName:Ve,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ct,viewport:Jt,onViewportChange:Zt}){return GA(t),GA(e),Pse(),kse(n),Tse(Jt),f.jsx(Xie,{onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ie,onPaneMouseLeave:ze,onPaneContextMenu:De,onPaneScroll:je,paneClickDistance:Je,deleteKeyCode:P,selectionKeyCode:k,selectionOnDrag:R,selectionMode:j,onSelectionStart:y,onSelectionEnd:x,multiSelectionKeyCode:A,panActivationKeyCode:F,zoomActivationKeyCode:$,elementsSelectable:B,zoomOnScroll:le,zoomOnPinch:ie,zoomOnDoubleClick:ce,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:te,panOnDrag:de,defaultViewport:L,translateExtent:U,minZoom:V,maxZoom:z,onSelectionContextMenu:h,preventScrolling:X,noDragClassName:Ne,noWheelClassName:Ae,noPanClassName:Ve,disableKeyboardA11y:rt,onViewportChange:Zt,isControlledViewport:!!Jt,children:f.jsxs(Nse,{children:[f.jsx(Ese,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:an,onReconnectStart:xe,onReconnectEnd:be,onlyRenderVisibleElements:q,onEdgeContextMenu:Ue,onEdgeMouseEnter:ut,onEdgeMouseMove:St,onEdgeMouseLeave:Ot,reconnectRadius:Gt,defaultMarkerColor:J,noPanClassName:Ve,disableKeyboardA11y:rt,rfId:ct}),f.jsx(qse,{style:S,type:_,component:I,containerStyle:C}),f.jsx("div",{className:"react-flow__edgelabel-renderer"}),f.jsx(ase,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:p,nodeClickDistance:Xe,onlyRenderVisibleElements:q,noPanClassName:Ve,noDragClassName:Ne,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ct}),f.jsx("div",{className:"react-flow__viewport-portal"})]})})}n$.displayName="GraphView";const Fse=H.memo(n$),KA=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:u}={})=>{const d=new Map,p=new Map,h=new Map,y=new Map,x=r??e??[],_=n??t??[],S=a??[0,0],I=u??im;vM(h,y,x),FI(_,d,p,{nodeOrigin:S,nodeExtent:I,elevateNodesOnSelect:!1});let C=[0,0,1];if(o&&i&&s){const k=Of(d,{filter:F=>!!((F.width||F.initialWidth)&&(F.height||F.initialHeight))}),{x:R,y:j,zoom:A}=m1(k,i,s,.5,2,.1);C=[R,j,A]}return{rfId:"1",width:0,height:0,transform:C,nodes:_,nodeLookup:d,parentLookup:p,edges:x,edgeLookup:y,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:im,nodeExtent:I,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:df.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...nM},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:dre,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Dse=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:u})=>rie((d,p)=>({...KA({nodes:t,edges:e,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:u,defaultNodes:n,defaultEdges:r}),setNodes:h=>{const{nodeLookup:y,parentLookup:x,nodeOrigin:_,elevateNodesOnSelect:S}=p();FI(h,y,x,{nodeOrigin:_,nodeExtent:u,elevateNodesOnSelect:S,checkEquality:!0}),d({nodes:h})},setEdges:h=>{const{connectionLookup:y,edgeLookup:x}=p();vM(y,x,h),d({edges:h})},setDefaultNodesAndEdges:(h,y)=>{if(h){const{setNodes:x}=p();x(h),d({hasDefaultNodes:!0})}if(y){const{setEdges:x}=p();x(y),d({hasDefaultEdges:!0})}},updateNodeInternals:(h,y={triggerFitView:!0})=>{const{triggerNodeChanges:x,nodeLookup:_,parentLookup:S,fitViewOnInit:I,fitViewDone:C,fitViewOnInitOptions:k,domNode:R,nodeOrigin:j,nodeExtent:A,debug:F,fitViewSync:$}=p(),{changes:P,updatedInternals:q}=Cre(h,_,S,R,j,A);if(q){if(Ire(_,S,{nodeOrigin:j,nodeExtent:A}),y.triggerFitView){let B=C;!C&&I&&(B=$({...k,nodes:k?.nodes})),d({fitViewDone:B})}else d({});P?.length>0&&(F&&console.log("React Flow: trigger node changes",P),x?.(P))}},updateNodePositions:(h,y=!1)=>{const x=[],_=[];for(const[S,I]of h){const C=!!(I?.expandParent&&I?.parentId&&I?.position),k={id:S,type:"position",position:C?{x:Math.max(0,I.position.x),y:Math.max(0,I.position.y)}:I.position,dragging:y};C&&x.push({id:S,parentId:I.parentId,rect:{...I.internals.positionAbsolute,width:I.measured.width,height:I.measured.height}}),_.push(k)}if(x.length>0){const{nodeLookup:S,parentLookup:I,nodeOrigin:C}=p(),k=x1(x,S,I,C);_.push(...k)}p().triggerNodeChanges(_)},triggerNodeChanges:h=>{const{onNodesChange:y,setNodes:x,nodes:_,hasDefaultNodes:S,debug:I}=p();if(h?.length){if(S){const C=_1(h,_);x(C)}I&&console.log("React Flow: trigger node changes",h),y?.(h)}},triggerEdgeChanges:h=>{const{onEdgesChange:y,setEdges:x,edges:_,hasDefaultEdges:S,debug:I}=p();if(h?.length){if(S){const C=AM(h,_);x(C)}I&&console.log("React Flow: trigger edge changes",h),y?.(h)}},addSelectedNodes:h=>{const{multiSelectionActive:y,edgeLookup:x,nodeLookup:_,triggerNodeChanges:S,triggerEdgeChanges:I}=p();if(y){const C=h.map(k=>Ku(k,!0));S(C);return}S(jd(_,new Set([...h]),!0)),I(jd(x))},addSelectedEdges:h=>{const{multiSelectionActive:y,edgeLookup:x,nodeLookup:_,triggerNodeChanges:S,triggerEdgeChanges:I}=p();if(y){const C=h.map(k=>Ku(k,!0));I(C);return}I(jd(x,new Set([...h]))),S(jd(_,new Set,!0))},unselectNodesAndEdges:({nodes:h,edges:y}={})=>{const{edges:x,nodes:_,nodeLookup:S,triggerNodeChanges:I,triggerEdgeChanges:C}=p(),k=h||_,R=y||x,j=k.map(F=>{const $=S.get(F.id);return $&&($.selected=!1),Ku(F.id,!1)}),A=R.map(F=>Ku(F.id,!1));I(j),C(A)},setMinZoom:h=>{const{panZoom:y,maxZoom:x}=p();y?.setScaleExtent([h,x]),d({minZoom:h})},setMaxZoom:h=>{const{panZoom:y,minZoom:x}=p();y?.setScaleExtent([x,h]),d({maxZoom:h})},setTranslateExtent:h=>{p().panZoom?.setTranslateExtent(h),d({translateExtent:h})},setPaneClickDistance:h=>{p().panZoom?.setClickDistance(h)},resetSelectedElements:()=>{const{edges:h,nodes:y,triggerNodeChanges:x,triggerEdgeChanges:_}=p(),S=y.reduce((C,k)=>k.selected?[...C,Ku(k.id,!1)]:C,[]),I=h.reduce((C,k)=>k.selected?[...C,Ku(k.id,!1)]:C,[]);x(S),_(I)},setNodeExtent:h=>{const{nodes:y,nodeLookup:x,parentLookup:_,nodeOrigin:S,elevateNodesOnSelect:I,nodeExtent:C}=p();h[0][0]===C[0][0]&&h[0][1]===C[0][1]&&h[1][0]===C[1][0]&&h[1][1]===C[1][1]||(FI(y,x,_,{nodeOrigin:S,nodeExtent:h,elevateNodesOnSelect:I,checkEquality:!1}),d({nodeExtent:h}))},panBy:h=>{const{transform:y,width:x,height:_,panZoom:S,translateExtent:I}=p();return Tre({delta:h,panZoom:S,transform:y,translateExtent:I,width:x,height:_})},fitView:h=>{const{panZoom:y,width:x,height:_,minZoom:S,maxZoom:I,nodeLookup:C}=p();if(!y)return Promise.resolve(!1);const k=RI(C,h);return jI({nodes:k,width:x,height:_,panZoom:y,minZoom:S,maxZoom:I},h)},fitViewSync:h=>{const{panZoom:y,width:x,height:_,minZoom:S,maxZoom:I,nodeLookup:C}=p();if(!y)return!1;const k=RI(C,h);return jI({nodes:k,width:x,height:_,panZoom:y,minZoom:S,maxZoom:I},h),k.size>0},cancelConnection:()=>{d({connection:{...nM}})},updateConnection:h=>{d({connection:h})},reset:()=>d({...KA()})}),Object.is);function r$({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:o,nodeOrigin:a,nodeExtent:u,children:d}){const[p]=H.useState(()=>Dse({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:u}));return f.jsx(iie,{value:p,children:f.jsx(kie,{children:d})})}function Lse({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:a,nodeOrigin:u,nodeExtent:d}){return H.useContext(Rx)?f.jsx(f.Fragment,{children:t}):f.jsx(r$,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:a,nodeOrigin:u,nodeExtent:d,children:t})}const Mse={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function $se({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:a,onEdgeClick:u,onInit:d,onMove:p,onMoveStart:h,onMoveEnd:y,onConnect:x,onConnectStart:_,onConnectEnd:S,onClickConnectStart:I,onClickConnectEnd:C,onNodeMouseEnter:k,onNodeMouseMove:R,onNodeMouseLeave:j,onNodeContextMenu:A,onNodeDoubleClick:F,onNodeDragStart:$,onNodeDrag:P,onNodeDragStop:q,onNodesDelete:B,onEdgesDelete:L,onDelete:U,onSelectionChange:V,onSelectionDragStart:z,onSelectionDrag:X,onSelectionDragStop:J,onSelectionContextMenu:le,onSelectionStart:ie,onSelectionEnd:ne,onBeforeDelete:oe,connectionMode:te,connectionLineType:ce=Gl.Bezier,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,deleteKeyCode:Ie="Backspace",selectionKeyCode:ze="Shift",selectionOnDrag:je=!1,selectionMode:De=sm.Full,panActivationKeyCode:Je="Space",multiSelectionKeyCode:Xe=Tv()?"Meta":"Control",zoomActivationKeyCode:Ue=Tv()?"Meta":"Control",snapToGrid:ut,snapGrid:St,onlyRenderVisibleElements:Ot=!1,selectNodesOnDrag:Gt,nodesDraggable:an,nodesConnectable:xe,nodesFocusable:be,nodeOrigin:Ne=OM,edgesFocusable:Ae,edgesReconnectable:Ve,elementsSelectable:rt=!0,defaultViewport:Me=yie,minZoom:ct=.5,maxZoom:Jt=2,translateExtent:Zt=im,preventScrolling:wn=!0,nodeExtent:dr,defaultMarkerColor:Bn="#b1b1b7",zoomOnScroll:Zr=!0,zoomOnPinch:Ui=!0,panOnScroll:kr=!1,panOnScrollSpeed:Yt=.5,panOnScrollMode:rs=dc.Free,zoomOnDoubleClick:is=!0,panOnDrag:ss=!0,onPaneClick:wo,onPaneMouseEnter:_a,onPaneMouseMove:wu,onPaneMouseLeave:Gs,onPaneScroll:G,onPaneContextMenu:Tc,paneClickDistance:gn=0,nodeClickDistance:Rc=0,children:jc,onReconnect:Oc,onReconnectStart:_u,onReconnectEnd:Sa,onEdgeContextMenu:os,onEdgeDoubleClick:Su,onEdgeMouseEnter:Ea,onEdgeMouseMove:Mf,onEdgeMouseLeave:Ia,reconnectRadius:Ks=10,onNodesChange:ul,onEdgesChange:Qs,noDragClassName:$f="nodrag",noWheelClassName:Bf="nowheel",noPanClassName:qc="nopan",fitView:Js,fitViewOptions:Ac,connectOnClick:Pc,attributionPosition:zf,proOptions:Fc,defaultEdgeOptions:Dc,elevateNodesOnSelect:Lc,elevateEdgesOnSelect:Eu,disableKeyboardA11y:Mc=!1,autoPanOnConnect:Wf,autoPanOnNodeDrag:fr,autoPanSpeed:Uf,connectionRadius:Iu,isValidConnection:$c,onError:cl,style:Vf,id:Nu,nodeDragThreshold:dl,viewport:as,onViewportChange:Hf,width:Ni,height:Gf,colorMode:Kf="light",debug:Qf,...Zo},fl){const Vi=Nu||"1",pl=wie(Kf);return f.jsx("div",{"data-testid":"rf__wrapper",...Zo,style:{...Vf,...Mse},ref:fl,className:Jr(["react-flow",i,pl]),id:Nu,children:f.jsxs(Lse,{nodes:t,edges:e,width:Ni,height:Gf,fitView:Js,nodeOrigin:Ne,nodeExtent:dr,children:[f.jsx(Fse,{onInit:d,onNodeClick:a,onEdgeClick:u,onNodeMouseEnter:k,onNodeMouseMove:R,onNodeMouseLeave:j,onNodeContextMenu:A,onNodeDoubleClick:F,nodeTypes:s,edgeTypes:o,connectionLineType:ce,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,selectionKeyCode:ze,selectionOnDrag:je,selectionMode:De,deleteKeyCode:Ie,multiSelectionKeyCode:Xe,panActivationKeyCode:Je,zoomActivationKeyCode:Ue,onlyRenderVisibleElements:Ot,defaultViewport:Me,translateExtent:Zt,minZoom:ct,maxZoom:Jt,preventScrolling:wn,zoomOnScroll:Zr,zoomOnPinch:Ui,zoomOnDoubleClick:is,panOnScroll:kr,panOnScrollSpeed:Yt,panOnScrollMode:rs,panOnDrag:ss,onPaneClick:wo,onPaneMouseEnter:_a,onPaneMouseMove:wu,onPaneMouseLeave:Gs,onPaneScroll:G,onPaneContextMenu:Tc,paneClickDistance:gn,nodeClickDistance:Rc,onSelectionContextMenu:le,onSelectionStart:ie,onSelectionEnd:ne,onReconnect:Oc,onReconnectStart:_u,onReconnectEnd:Sa,onEdgeContextMenu:os,onEdgeDoubleClick:Su,onEdgeMouseEnter:Ea,onEdgeMouseMove:Mf,onEdgeMouseLeave:Ia,reconnectRadius:Ks,defaultMarkerColor:Bn,noDragClassName:$f,noWheelClassName:Bf,noPanClassName:qc,rfId:Vi,disableKeyboardA11y:Mc,nodeExtent:dr,viewport:as,onViewportChange:Hf}),f.jsx(xie,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:x,onConnectStart:_,onConnectEnd:S,onClickConnectStart:I,onClickConnectEnd:C,nodesDraggable:an,nodesConnectable:xe,nodesFocusable:be,edgesFocusable:Ae,edgesReconnectable:Ve,elementsSelectable:rt,elevateNodesOnSelect:Lc,elevateEdgesOnSelect:Eu,minZoom:ct,maxZoom:Jt,nodeExtent:dr,onNodesChange:ul,onEdgesChange:Qs,snapToGrid:ut,snapGrid:St,connectionMode:te,translateExtent:Zt,connectOnClick:Pc,defaultEdgeOptions:Dc,fitView:Js,fitViewOptions:Ac,onNodesDelete:B,onEdgesDelete:L,onDelete:U,onNodeDragStart:$,onNodeDrag:P,onNodeDragStop:q,onSelectionDrag:X,onSelectionDragStart:z,onSelectionDragStop:J,onMove:p,onMoveStart:h,onMoveEnd:y,noPanClassName:qc,nodeOrigin:Ne,rfId:Vi,autoPanOnConnect:Wf,autoPanOnNodeDrag:fr,autoPanSpeed:Uf,onError:cl,connectionRadius:Iu,isValidConnection:$c,selectNodesOnDrag:Gt,nodeDragThreshold:dl,onBeforeDelete:oe,paneClickDistance:gn,debug:Qf}),f.jsx(gie,{onSelectionChange:V}),jc,f.jsx(die,{proOptions:Fc,position:zf}),f.jsx(uie,{rfId:Vi,disableKeyboardA11y:Mc})]})})}var i$=PM($se);const Bse=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function zse({children:t}){const e=qn(Bse);return e?hm.createPortal(t,e):null}function Wse(t){const[e,n]=H.useState(t),r=H.useCallback(i=>n(s=>_1(i,s)),[]);return[e,n,r]}function Use(t){const[e,n]=H.useState(t),r=H.useCallback(i=>n(s=>AM(i,s)),[]);return[e,n,r]}function jv(t){return qn(H.useCallback(n=>n.nodeLookup.get(t),[t]),Ir)}function Vse({dimensions:t,lineWidth:e,variant:n,className:r}){return f.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Jr(["react-flow__background-pattern",n,r])})}function Hse({radius:t,className:e}){return f.jsx("circle",{cx:t,cy:t,r:t,className:Jr(["react-flow__background-pattern","dots",e])})}var fa;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(fa||(fa={}));const Gse={[fa.Dots]:1,[fa.Lines]:1,[fa.Cross]:6},Kse=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function s$({id:t,variant:e=fa.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:a,style:u,className:d,patternClassName:p}){const h=H.useRef(null),{transform:y,patternId:x}=qn(Kse,Ir),_=r||Gse[e],S=e===fa.Dots,I=e===fa.Cross,C=Array.isArray(n)?n:[n,n],k=[C[0]*y[2]||1,C[1]*y[2]||1],R=_*y[2],j=Array.isArray(s)?s:[s,s],A=I?[R,R]:k,F=[j[0]*y[2]||1+A[0]/2,j[1]*y[2]||1+A[1]/2],$=`${x}${t||""}`;return f.jsxs("svg",{className:Jr(["react-flow__background",d]),style:{...u,...jx,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:h,"data-testid":"rf__background",children:[f.jsx("pattern",{id:$,x:y[0]%k[0],y:y[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`,children:S?f.jsx(Hse,{radius:R/2,className:p}):f.jsx(Vse,{dimensions:A,lineWidth:i,variant:e,className:p})}),f.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${$})`})]})}s$.displayName="Background";const o$=H.memo(s$);function Qse(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:f.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Jse(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:f.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Zse(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:f.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Yse(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Xse(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ny({children:t,className:e,...n}){return f.jsx("button",{type:"button",className:Jr(["react-flow__controls-button",e]),...n,children:t})}const eoe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom});function a$({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:u,className:d,children:p,position:h="bottom-left",orientation:y="vertical","aria-label":x="React Flow controls"}){const _=Nr(),{isInteractive:S,minZoomReached:I,maxZoomReached:C}=qn(eoe,Ir),{zoomIn:k,zoomOut:R,fitView:j}=qf(),A=()=>{k(),s?.()},F=()=>{R(),o?.()},$=()=>{j(i),a?.()},P=()=>{_.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),u?.(!S)},q=y==="horizontal"?"horizontal":"vertical";return f.jsxs(w1,{className:Jr(["react-flow__controls",q,d]),position:h,style:t,"data-testid":"rf__controls","aria-label":x,children:[e&&f.jsxs(f.Fragment,{children:[f.jsx(Ny,{onClick:A,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:C,children:f.jsx(Qse,{})}),f.jsx(Ny,{onClick:F,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:I,children:f.jsx(Jse,{})})]}),n&&f.jsx(Ny,{className:"react-flow__controls-fitview",onClick:$,title:"fit view","aria-label":"fit view",children:f.jsx(Zse,{})}),r&&f.jsx(Ny,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:S?f.jsx(Xse,{}):f.jsx(Yse,{})}),p]})}a$.displayName="Controls";const l$=H.memo(a$);function toe({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:u,className:d,borderRadius:p,shapeRendering:h,selected:y,onClick:x}){const{background:_,backgroundColor:S}=s||{},I=o||_||S;return f.jsx("rect",{className:Jr(["react-flow__minimap-node",{selected:y},d]),x:e,y:n,rx:p,ry:p,width:r,height:i,style:{fill:I,stroke:a,strokeWidth:u},shapeRendering:h,onClick:x?C=>x(C,t):void 0})}const noe=H.memo(toe),roe=t=>t.nodes.map(e=>e.id),rE=t=>t instanceof Function?t:()=>t;function ioe({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=noe,onClick:o}){const a=qn(roe,Ir),u=rE(e),d=rE(t),p=rE(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return f.jsx(f.Fragment,{children:a.map(y=>f.jsx(ooe,{id:y,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:h},y))})}function soe({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:a,onClick:u}){const{node:d,x:p,y:h,width:y,height:x}=qn(_=>{const S=_.nodeLookup.get(t),{x:I,y:C}=S.internals.positionAbsolute,{width:k,height:R}=ol(S);return{node:S,x:I,y:C,width:k,height:R}},Ir);return!d||d.hidden||!dM(d)?null:f.jsx(a,{x:p,y:h,width:y,height:x,style:d.style,selected:!!d.selected,className:r(d),color:e(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const ooe=H.memo(soe);var aoe=H.memo(ioe);const loe=200,uoe=150,coe=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?uM(Of(t.nodeLookup),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height}},doe="react-flow__minimap-desc";function u$({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:u,maskColor:d,maskStrokeColor:p,maskStrokeWidth:h,position:y="bottom-right",onClick:x,onNodeClick:_,pannable:S=!1,zoomable:I=!1,ariaLabel:C="React Flow mini map",inversePan:k,zoomStep:R=10,offsetScale:j=5}){const A=Nr(),F=H.useRef(null),{boundingRect:$,viewBB:P,rfId:q,panZoom:B,translateExtent:L,flowWidth:U,flowHeight:V}=qn(coe,Ir),z=t?.width??loe,X=t?.height??uoe,J=$.width/z,le=$.height/X,ie=Math.max(J,le),ne=ie*z,oe=ie*X,te=j*ie,ce=$.x-(ne-$.width)/2-te,de=$.y-(oe-$.height)/2-te,ye=ne+te*2,we=oe+te*2,Ie=`${doe}-${q}`,ze=H.useRef(0),je=H.useRef();ze.current=ie,H.useEffect(()=>{if(F.current&&B)return je.current=Dre({domNode:F.current,panZoom:B,getTransform:()=>A.getState().transform,getViewScale:()=>ze.current}),()=>{je.current?.destroy()}},[B]),H.useEffect(()=>{je.current?.update({translateExtent:L,width:U,height:V,inversePan:k,pannable:S,zoomStep:R,zoomable:I})},[S,I,k,R,L,U,V]);const De=x?Xe=>{const[Ue,ut]=je.current?.pointer(Xe)||[0,0];x(Xe,{x:Ue,y:ut})}:void 0,Je=_?H.useCallback((Xe,Ue)=>{const ut=A.getState().nodeLookup.get(Ue);_(Xe,ut)},[]):void 0;return f.jsx(w1,{position:y,style:{...t,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*ie:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:Jr(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:f.jsxs("svg",{width:z,height:X,viewBox:`${ce} ${de} ${ye} ${we}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Ie,ref:F,onClick:De,children:[C&&f.jsx("title",{id:Ie,children:C}),f.jsx(aoe,{onClick:Je,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),f.jsx("path",{className:"react-flow__minimap-mask",d:`M${ce-te},${de-te}h${ye+te*2}v${we+te*2}h${-ye-te*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}u$.displayName="MiniMap";const c$=H.memo(u$);function foe({nodeId:t,position:e,variant:n=Sh.Handle,className:r,style:i={},children:s,color:o,minWidth:a=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:y,onResizeStart:x,onResize:_,onResizeEnd:S}){const I=E1(),C=typeof t=="string"?t:I,k=Nr(),R=H.useRef(null),j=n===Sh.Line?"right":"bottom-right",A=e??j,F=H.useRef(null);H.useEffect(()=>{if(!(!R.current||!C))return F.current||(F.current=Yre({domNode:R.current,nodeId:C,getStoreItems:()=>{const{nodeLookup:B,transform:L,snapGrid:U,snapToGrid:V,nodeOrigin:z,domNode:X}=k.getState();return{nodeLookup:B,transform:L,snapGrid:U,snapToGrid:V,nodeOrigin:z,paneDomNode:X}},onChange:(B,L)=>{const{triggerNodeChanges:U,nodeLookup:V,parentLookup:z,nodeOrigin:X}=k.getState(),J=[],le={x:B.x,y:B.y},ie=V.get(C);if(ie&&ie.expandParent&&ie.parentId){const ne=ie.origin??X,oe=B.width??ie.measured.width,te=B.height??ie.measured.height,ce={id:ie.id,parentId:ie.parentId,rect:{width:oe,height:te,...fM({x:B.x??ie.position.x,y:B.y??ie.position.y},{width:oe,height:te},ie.parentId,V,ne)}},de=x1([ce],V,z,X);J.push(...de),le.x=B.x?Math.max(ne[0]*oe,B.x):void 0,le.y=B.y?Math.max(ne[1]*te,B.y):void 0}if(le.x!==void 0&&le.y!==void 0){const ne={id:C,type:"position",position:{...le}};J.push(ne)}if(B.width!==void 0&&B.height!==void 0){const ne={id:C,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:B.width,height:B.height}};J.push(ne)}for(const ne of L){const oe={...ne,type:"position"};J.push(oe)}U(J)},onEnd:()=>{const B={id:C,type:"dimensions",resizing:!1};k.getState().triggerNodeChanges([B])}})),F.current.update({controlPosition:A,boundaries:{minWidth:a,minHeight:u,maxWidth:d,maxHeight:p},keepAspectRatio:h,onResizeStart:x,onResize:_,onResizeEnd:S,shouldResize:y}),()=>{F.current?.destroy()}},[A,a,u,d,p,h,x,_,S,y]);const $=A.split("-"),P=n===Sh.Line?"borderColor":"backgroundColor",q=o?{...i,[P]:o}:i;return f.jsx("div",{className:Jr(["react-flow__resize-control","nodrag",...$,n,r]),ref:R,style:q,children:s})}H.memo(foe);const poe=t=>t.domNode?.querySelector(".react-flow__renderer");function hoe({children:t}){const e=qn(poe);return e?hm.createPortal(t,e):null}const moe=(t,e)=>t?.internals.positionAbsolute.x!==e?.internals.positionAbsolute.x||t?.internals.positionAbsolute.y!==e?.internals.positionAbsolute.y||t?.measured.width!==e?.measured.width||t?.measured.height!==e?.measured.height||t?.selected!==e?.selected||t?.internals.z!==e?.internals.z,goe=(t,e)=>{if(t.size!==e.size)return!1;for(const[n,r]of t)if(moe(r,e.get(n)))return!1;return!0},yoe=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2],selectedNodesCount:t.nodes.filter(e=>e.selected).length});function N1({nodeId:t,children:e,className:n,style:r,isVisible:i,position:s=Tt.Top,offset:o=10,align:a="center",...u}){const d=E1(),p=H.useCallback(A=>(Array.isArray(t)?t:[t||d||""]).reduce((P,q)=>{const B=A.nodeLookup.get(q);return B&&P.set(B.id,B),P},new Map),[t,d]),h=qn(p,goe),{x:y,y:x,zoom:_,selectedNodesCount:S}=qn(yoe,Ir);if(!(typeof i=="boolean"?i:h.size===1&&h.values().next().value.selected&&S===1)||!h.size)return null;const C=Of(h),k=Array.from(h.values()),R=Math.max(...k.map(A=>A.internals.z+1)),j={position:"absolute",transform:Sre(C,{x:y,y:x,zoom:_},s,o,a),zIndex:R,...r};return f.jsx(hoe,{children:f.jsx("div",{style:j,className:Jr(["react-flow__node-toolbar",n]),...u,"data-id":k.reduce((A,F)=>`${A}${F.id} `,"").trim(),children:e})})}const Mn="icon-[solar--home-outline]",boe=["bg-blue-200","bg-blue-400","bg-blue-600","bg-green-200","bg-green-400","bg-green-600","bg-green-600","bg-orange-200","bg-orange-400","bg-orange-600","bg-slate-200","bg-slate-400","bg-slate-600","bg-gray-200","bg-gray-400","bg-gray-600","bg-purple-200","bg-purple-400","bg-purple-600","bg-purple-800"],k1=DY({shape:M.object({name:M.string().min(1),color:M.string().min(1),minWidth:Po(),maxWidth:Po(),minHeight:Po(),maxHeight:Po(),probability:Po(),limit:Po()}),filter:zi}),QA=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(k1.shape),defaultValues:{name:"",color:"slate",minWidth:1,maxWidth:4,minHeight:1,maxHeight:4,limit:32,probability:100,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"name",label:f.jsx(Y,{label:"Region name (label)"}),children:f.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),f.jsxs("div",{className:"flex flex-row gap-4 items-center w-full",children:[f.jsx(mn,{formState:s.formState,name:"minWidth",label:f.jsx(Y,{label:"Region min width (label)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("minWidth")})}),f.jsx(mn,{formState:s.formState,name:"maxWidth",label:f.jsx(Y,{label:"Region max width (label)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("maxWidth")})})]}),f.jsxs("div",{className:"flex flex-row gap-4 items-center w-full",children:[f.jsx(mn,{formState:s.formState,name:"minHeight",label:f.jsx(Y,{label:"Region min height (label)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("minHeight")})}),f.jsx(mn,{formState:s.formState,name:"maxHeight",label:f.jsx(Y,{label:"Region max height (label)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("maxHeight")})})]}),f.jsx(mn,{formState:s.formState,name:"probability",label:f.jsx(Y,{label:"Region spawn probability (label)"}),hint:f.jsx(Y,{label:"Region spawn probability (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:.5,max:100,step:.5,...s.register("probability")})}),f.jsx(mn,{formState:s.formState,name:"limit",label:f.jsx(Y,{label:"Region limit (label)"}),hint:f.jsx(Y,{label:"Region limit (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("limit")})}),f.jsx(mn,{formState:s.formState,name:"color",label:f.jsx(Y,{label:"Color (label)"}),children:f.jsx(Mi,{control:s.control,name:"color",render:({field:{ref:a,...u}})=>f.jsx(KN,{items:boe.map(d=>({id:d,color:d})),render:({entity:d})=>f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx("div",{className:cn("w-4","h-4",d.color)}),d.color]}),...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:gL,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},Lp=Wr(),voe=[Lp({name:"name",header(){return f.jsx(Y,{label:"Region name (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsx(qt,{to:"/$locale/apps/derivean/root/region/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),Lp({name:"width",header(){return f.jsx(Y,{label:"Region width (label)"})},render({data:t}){return f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx("div",{children:pn({number:t.minWidth})}),f.jsx("div",{children:f.jsx(on,{icon:vv,variant:{size:"xs"}})}),f.jsx("div",{children:pn({number:t.maxWidth})})]})},size:16}),Lp({name:"height",header(){return f.jsx(Y,{label:"Region height (label)"})},render({data:t}){return f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx("div",{children:pn({number:t.minHeight})}),f.jsx("div",{children:f.jsx(on,{icon:vv,variant:{size:"xs"}})}),f.jsx("div",{children:pn({number:t.maxHeight})})]})},size:12}),Lp({name:"probability",header(){return f.jsx(Y,{label:"Region probability (label)"})},render({value:t}){return f.jsxs(_s,{children:[pn({number:t}),"%"]})},size:14}),Lp({name:"limit",header(){return f.jsx(Y,{label:"Region limit (label)"})},render({value:t}){return pn({number:t})},size:18})],d$=({table:t,...e})=>{const n=Fn([["Region"]]);return f.jsx(Br,{table:zr({...t,columns:voe}),action:{table(){return f.jsx(ur,{children:f.jsx(jn,{label:f.jsx(Y,{label:"Create region (menu)"}),textTitle:f.jsx(Y,{label:"Create region (modal)"}),icon:hv,children:({close:r})=>f.jsx(QA,{mutation:Xt({async mutationFn(i){return Ct.transaction().execute(async s=>s.insertInto("Region").values({id:Sn(),...i}).execute())},async onSuccess(){await n(),r()}})})})})},row({data:r}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit region (modal)"}),icon:hv,children:({close:i})=>f.jsx(QA,{defaultValues:r,mutation:Xt({async mutationFn(s){return Ct.transaction().execute(async o=>o.updateTable("Region").set(s).where("id","=",r.id).execute())},async onSuccess(){await n(),i()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete region (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>Ct.transaction().execute(async i=>i.deleteFrom("Region").where("id","=",r.id).execute()),textContent:f.jsx(Y,{label:"Delete region (content)"}),textToast:"Delete region",invalidator:n})})]})}},...e})},xoe=t=>f.jsx(G2,{icon:hv,table:d$,textTitle:f.jsx(Y,{label:"Select regions (title)"}),render:({entities:e})=>f.jsx(fu,{items:e,css:{base:["flex","flex-row","gap-2"]},render:({entity:n})=>f.jsx("div",{className:cn(["p-2","border","border-blue-300","bg-blue-50","rounded-sm"]),children:n.name})}),queryKey:"Region",query:async({filter:e,cursor:n})=>Ct.transaction().execute(async r=>cr({select:r.selectFrom("Region as r").selectAll(),output:k1.entity,query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("r.id","=",s.id)),s?.idIn&&(o=o.where("r.id","in",s.idIn)),s?.fulltext){const a=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("r.id","like",a),u("r.name","like",a)]))}return o},filter:e,cursor:n})),...t}),C1=IY({shape:M.object({name:M.string().min(1),cycles:Po(),sort:Po(),limit:Po(),regionIds:M.array(M.string()).optional()}),filter:zi.merge(M.object({name:M.string().optional()}))}),Ov=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(C1.shape),defaultValues:{cycles:1,sort:0,limit:1,regionIds:[],...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"name",label:f.jsx(Y,{label:"Building name (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),f.jsx(mn,{formState:s.formState,name:"cycles",label:f.jsx(Y,{label:"Construction cycles (label)"}),hint:f.jsx(Y,{label:"Amount of cycles to build this building (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,...s.register("cycles")})}),f.jsx(mn,{formState:s.formState,name:"limit",label:f.jsx(Y,{label:"Building limit (label)"}),hint:f.jsx(Y,{label:"Maximum number of building a player can build (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,...s.register("limit")})}),f.jsx(mn,{formState:s.formState,name:"sort",label:f.jsx(Y,{label:"Blueprint sort (label)"}),hint:f.jsx(Y,{label:"Sort blueprints by this number (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:0,...s.register("sort")})}),f.jsx(mn,{formState:s.formState,name:"regionIds",label:f.jsx(Y,{label:"Regions (label)"}),children:f.jsx(Mi,{control:s.control,name:"regionIds",render:({field:{ref:a,...u}})=>f.jsx(xoe,{...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:Mn,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},Ws="icon-[fluent-mdl2--production-floor-management]",woe=({id:t,data:e,isConnectable:n})=>{const{locale:r}=nn({from:"/$locale"}),i=pu();return f.jsxs("div",{className:"min-w-[14rem]",onClick:()=>{i({to:"/$locale/apps/derivean/root/editor",params:{locale:r},search:{zoomTo:t}})},onDoubleClick:()=>{i({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t}})},children:[f.jsx($i,{type:"target",position:Tt.Left,className:"w-4 h-4"}),f.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[f.jsx("div",{className:"flex flex-row items-center gap-2",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:f.jsx(qt,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t},children:e.name})}),f.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 border bg-slate-50 border-slate-200 rounded-sm w-full p-1",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:[f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsx(qt,{icon:Er,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:r,id:t}}),f.jsx(qt,{icon:Ws,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:r,id:t}}),f.jsx(qt,{icon:C2,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:r,id:t}})]}),f.jsx("div",{children:f.jsx(kf,{target:f.jsx(Pm,{iconEnabled:si,css:{base:["text-red-500"]}}),outside:!0,textTitle:f.jsx(Y,{label:"Delete blueprint (modal)"}),css:{modal:["w-1/3"]},children:()=>{const s=Fn([["Editor"]]);return f.jsx(Is,{callback:async()=>Ct.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",e.id).execute()),textContent:f.jsx(Y,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:s})}})})]})]}),f.jsx($i,{type:"source",position:Tt.Right,isConnectable:n,className:"w-4 h-4"})]})},_oe=({nodeId:t})=>{const{fitView:e}=qf();return H.useEffect(()=>{t&&setTimeout(()=>{e({nodes:[{id:t}],duration:750,minZoom:1,maxZoom:1})},50)},[t]),null},Soe=({data:t,zoomTo:e})=>{const n=Fn([]),r=Xt({async mutationFn({blueprintId:i,dependencyId:s}){return Ct.transaction().execute(async o=>o.insertInto("Blueprint_Dependency").values({id:Sn(),blueprintId:i,dependencyId:s}).execute())},async onSuccess(){await n()}});return f.jsx("div",{className:"w-fit h-fit mx-auto border border-slate-300 rounded-md shadow-md m-8",children:f.jsx("div",{style:{width:"95vw",height:"85vh"},children:f.jsxs(i$,{nodes:t.nodes,edges:t.edges,onConnect:i=>{r.mutate({blueprintId:i.target,dependencyId:i.source})},fitView:!0,snapGrid:[16,16],elementsSelectable:!1,nodeTypes:H.useMemo(()=>({blueprint(i){return f.jsx(woe,{...i})}}),[]),edgeTypes:H.useMemo(()=>({dependency({id:i,sourceX:s,sourceY:o,targetX:a,targetY:u,sourcePosition:d,targetPosition:p,style:h={},markerEnd:y}){const{setEdges:x}=qf(),[_,S,I]=g1({sourceX:s,sourceY:o,sourcePosition:d,targetX:a,targetY:u,targetPosition:p}),C=Fn([]),k=Xt({async mutationFn({id:R}){return Ct.transaction().execute(async j=>{await j.deleteFrom("Blueprint_Dependency").where("id","=",R).execute()})},async onSuccess(){x(R=>R.filter(j=>j.id!==i)),await C()}});return f.jsxs(f.Fragment,{children:[f.jsx(zm,{path:_,markerEnd:y,style:h}),f.jsx(zse,{children:f.jsx("div",{className:cn("nodrag nopan",["flex","items-center","justify-center","cursor-pointer","bg-red-200","text-red-500","border","border-red-300","hover:border-red-600","hover:bg-red-300","hover:text-red-700","rounded-full","w-4","h-4","z-20"]),style:{position:"absolute",pointerEvents:"all",transformOrigin:"center",transform:`translate(-50%, -50%) translate(${S}px,${I}px)`},children:f.jsx(on,{icon:k.isPending?rJ:HN,onClick:()=>{k.mutate({id:i})}})})})]})}}),[]),children:[f.jsx(_oe,{nodeId:e}),f.jsx(l$,{orientation:"horizontal",showInteractive:!1,showZoom:!1,children:f.jsx(kf,{target:f.jsx(Pm,{className:"react-flow__controls-button",iconEnabled:Mn}),outside:!1,textTitle:f.jsx(Y,{label:"Create blueprint (modal)"}),css:{modal:["w-1/3"]},children:({close:i})=>{const s=Fn([["Editor"]]),{locale:o}=nn({from:"/$locale"}),a=pu();return f.jsx(Ov,{mutation:Xt({async mutationFn(u){return An.promise(Ct.transaction().execute(d=>d.insertInto("Blueprint").values({id:Sn(),...u}).returningAll().executeTakeFirstOrThrow()),ii("Create blueprint"))},async onSuccess(u){await s(),a({to:"/$locale/apps/derivean/root/editor",params:{locale:o},search:{zoomTo:u.id}}),i()}})})}})}),f.jsx(c$,{}),f.jsx(o$,{variant:fa.Dots,gap:12,size:1})]})})})},Eoe=({graph:t,nodes:e,edges:n,size:r={width:344,height:36}})=>(t.setGraph({rankdir:"LR",nodesep:125,edgesep:65,ranksep:50}),e.forEach(i=>{t.setNode(i.id,{width:r.width,height:r.height})}),n.forEach(i=>{t.setEdge(i.source,i.target)}),EL.layout(t,{}),{nodes:e.map(i=>{const s=t.node(i.id);return{...i,targetPosition:"left",sourcePosition:"right",position:{x:s.x-r.width/2,y:s.y-r.height/2}}}),edges:n}),MI=$t("/$locale/apps/derivean/root/editor")({validateSearch:yr(M.object({zoomTo:M.string().optional()})),async loader({context:{kysely:t}}){const e=(await t.selectFrom("Blueprint").select(["id","name","cycles","sort"]).execute()).map(r=>({id:r.id,position:{x:0,y:0},data:r,type:"blueprint"})),n=(await t.selectFrom("Blueprint_Dependency").select(["id","blueprintId","dependencyId"]).execute()).map(({id:r,blueprintId:i,dependencyId:s})=>({id:r,source:s,target:i,type:"dependency"}));return Eoe({graph:new EL.graphlib.Graph().setDefaultEdgeLabel(()=>({})),nodes:[...e],edges:[...n]})},component(){const t=MI.useLoaderData(),{zoomTo:e}=MI.useSearch();return f.jsx(Soe,{data:t,zoomTo:e})}}),Ioe=()=>Xt({mutationKey:["useRegisterMutation"],async mutationFn({login:t,name:e,password1:n}){return Ct.transaction().execute(async r=>Fm.parse(await r.insertInto("User").values({id:Sn(),name:e,login:t,password:ID.hash(n)}).returning(["User.id","User.name","User.login"]).executeTakeFirstOrThrow()))}}),Noe=M.object({name:M.string().min(1),login:M.string().min(1),password1:M.string().min(1),password2:M.string().min(1)}).refine(t=>t.password1===t.password2,{message:"Passwords must match",path:["password1"]}),koe=({onSuccess:t})=>{const e=Ioe(),n=Ei({resolver:Ii(Noe)}),r=Si({isLoading:n.formState.isLoading,isSubmitting:n.formState.isSubmitting}).slots;return f.jsxs("form",{className:r.base(),onSubmit:n.handleSubmit(async i=>e.mutateAsync(i,{onSuccess:t,onError:s=>{TN({error:s,errors:[lN({error:s,schema:CN,onError:({data:o})=>{n.setError("root",{message:o.message})}})],onError:o=>{n.setError("root",{message:o.message})}})}}).catch(()=>{})),children:[f.jsx(pi,{variant:{highlight:!0},error:n.formState.errors.root}),f.jsx(mn,{formState:n.formState,name:"name",label:f.jsx(Y,{label:"Name (label)"}),children:f.jsx("input",{type:"text",className:r.input(),...n.register("name")})}),f.jsx(mn,{formState:n.formState,name:"login",label:f.jsx(Y,{label:"Login (label)"}),children:f.jsx("input",{type:"text",className:r.input(),...n.register("login")})}),f.jsx(mn,{formState:n.formState,name:"password1",label:f.jsx(Y,{label:"Password 1 (label)"}),children:f.jsx("input",{type:"password",className:r.input(),...n.register("password1")})}),f.jsx(mn,{formState:n.formState,name:"password2",label:f.jsx(Y,{label:"Password 2 (label)"}),children:f.jsx("input",{type:"password",className:r.input(),...n.register("password2")})}),f.jsx(vn,{iconEnabled:"icon-[mdi--register-outline]",iconDisabled:"icon-[mdi--register-outline]",type:"submit",children:f.jsx(Y,{label:"Register (submit)"})})]})},Coe=$t("/$locale/apps/derivean/public/register")({component:()=>{const t=pu();return f.jsx("div",{className:cn(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:f.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[f.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),f.jsx(koe,{onSuccess:async e=>{Cf.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),Toe=$t("/$locale/apps/derivean/public/logout")({pendingComponent(){return f.jsx("div",{className:cn(["flex items-center justify-center h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:f.jsx(Q2,{icon:ZN,textTitle:f.jsx(Y,{label:"Logout (label)"}),textMessage:f.jsx(Y,{label:"Logout in progress..."}),css:{base:["p-4","bg-slate-200","rounded-sm"]}})})},async loader({params:{locale:t}}){throw Cf.remove("session"),pm({to:"/$locale/apps/derivean/public/login",params:{locale:t}})}}),Roe=()=>Xt({mutationKey:["useLoginMutation"],async mutationFn({login:t,password:e}){return Ct.transaction().execute(async n=>{const r=await n.selectFrom("User as u").select(["u.id","u.login","u.name"]).where("u.login","=",t).where("u.password","=",ID.hash(e)).executeTakeFirstOrThrow();return{id:r.id,login:r.login,name:r.name}})}}),joe=M.object({login:M.string().min(1),password:M.string().min(1)}),Ooe=({onSuccess:t})=>{const{locale:e}=nn({from:"/$locale"}),n=Roe(),r=Ei({resolver:Ii(joe)}),i=Si({isLoading:r.formState.isLoading,isSubmitting:r.formState.isSubmitting}).slots;return f.jsxs("form",{className:i.base(),onSubmit:r.handleSubmit(async s=>n.mutateAsync(s,{onSuccess:t,onError:o=>{TN({error:o,errors:[lN({error:o,schema:CN,onError:({data:a})=>{r.setError("root",{message:a.message})}})],onError:a=>{r.setError("root",{message:a.message})}})}}).catch(()=>{})),children:[f.jsx(pi,{variant:{highlight:!0},error:r.formState.errors.root}),f.jsx(mn,{formState:r.formState,name:"login",label:f.jsx(Y,{label:"Login (label)"}),children:f.jsx("input",{type:"text",className:i.input(),...r.register("login")})}),f.jsx(mn,{formState:r.formState,name:"password",label:f.jsx(Y,{label:"Password (label)"}),children:f.jsx("input",{type:"password",className:i.input(),...r.register("password")})}),f.jsxs("div",{className:"flex flex-row justify-between gap-8",children:[f.jsx(qt,{icon:"icon-[mdi--register-outline]",to:"/$locale/apps/derivean/public/register",params:{locale:e},children:f.jsx(Y,{label:"Register (link)"})}),f.jsx(vn,{iconEnabled:"icon-[uiw--login]",iconDisabled:"icon-[uiw--login]",type:"submit",children:f.jsx(Y,{label:"Login (submit)"})})]})]})},qoe=$t("/$locale/apps/derivean/public/login")({component:()=>{const t=pu();return f.jsx("div",{className:cn(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:f.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[f.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),f.jsx(Ooe,{onSuccess:async e=>{Cf.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}});var Wu={},iE,JA;function f$(){return JA||(JA=1,iE=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),iE}var sE,ZA;function Aoe(){if(ZA)return sE;ZA=1;function t(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=function(){return this}),t.of=function(){var e=arguments,n=e.length,r=0;return new t(function(){return r>=n?{done:!0}:{done:!1,value:e[r++]}})},t.empty=function(){var e=new t(function(){return{done:!0}});return e},t.fromSequence=function(e){var n=0,r=e.length;return new t(function(){return n>=r?{done:!0}:{done:!1,value:e[n++]}})},t.is=function(e){return e instanceof t?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},sE=t,sE}var ky={},YA;function Poe(){return YA||(YA=1,ky.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",ky.SYMBOL_SUPPORT=typeof Symbol<"u"),ky}var oE,XA;function Foe(){if(XA)return oE;XA=1;var t=Poe(),e=t.ARRAY_BUFFER_SUPPORT,n=t.SYMBOL_SUPPORT;return oE=function(i,s){var o,a,u,d,p;if(!i)throw new Error("obliterator/forEach: invalid iterable.");if(typeof s!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(i)||e&&ArrayBuffer.isView(i)||typeof i=="string"||i.toString()==="[object Arguments]"){for(u=0,d=i.length;u<d;u++)s(i[u],u);return}if(typeof i.forEach=="function"){i.forEach(s);return}if(n&&Symbol.iterator in i&&typeof i.next!="function"&&(i=i[Symbol.iterator]()),typeof i.next=="function"){for(o=i,u=0;p=o.next(),p.done!==!0;)s(p.value,u),u++;return}for(a in i)i.hasOwnProperty(a)&&s(i[a],a)},oE}var aE,e3;function Doe(){if(e3)return aE;e3=1;var t=Aoe(),e=Foe();function n(){this.clear()}return n.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},n.prototype.enqueue=function(r){return this.items.push(r),++this.size},n.prototype.dequeue=function(){if(this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}},n.prototype.peek=function(){if(this.size)return this.items[this.offset]},n.prototype.forEach=function(r,i){i=arguments.length>1?i:this;for(var s=this.offset,o=0,a=this.items.length;s<a;s++,o++)r.call(i,this.items[s],o,this)},n.prototype.toArray=function(){return this.items.slice(this.offset)},n.prototype.values=function(){var r=this.items,i=this.offset;return new t(function(){if(i>=r.length)return{done:!0};var s=r[i];return i++,{value:s,done:!1}})},n.prototype.entries=function(){var r=this.items,i=this.offset,s=0;return new t(function(){if(i>=r.length)return{done:!0};var o=r[i];return i++,{value:[s++,o],done:!1}})},typeof Symbol<"u"&&(n.prototype[Symbol.iterator]=n.prototype.values),n.prototype.toString=function(){return this.toArray().join(",")},n.prototype.toJSON=function(){return this.toArray()},n.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:n,enumerable:!1}),r},typeof Symbol<"u"&&(n.prototype[Symbol.for("nodejs.util.inspect.custom")]=n.prototype.inspect),n.from=function(r){var i=new n;return e(r,function(s){i.enqueue(s)}),i},n.of=function(){return n.from(arguments)},aE=n,aE}var lE,t3;function Loe(){return t3||(t3=1,lE=function(e,n){var r=n.length;if(r!==0){var i=e.length;e.length+=r;for(var s=0;s<r;s++)e[i+s]=n[s]}}),lE}var n3;function Moe(){if(n3)return Wu;n3=1;var t=f$(),e=Doe(),n=Loe();function r(d,p,h){if(!t(d))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!d.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" source node does not exist in the given graph.');if(!d.hasNode(h))throw new Error('graphology-shortest-path: the "'+h+'" target node does not exist in the given graph.');if(p=""+p,h=""+h,p===h)return[p];var y=d.inboundNeighbors.bind(d),x=d.outboundNeighbors.bind(d),_={},S={};_[p]=null,S[h]=null;var I=[p],C=[h],k,R,j,A,F,$,P,q,B=!1;e:for(;I.length&&C.length;)if(I.length<=C.length){for(k=I,I=[],F=0,P=k.length;F<P;F++)for(R=k[F],j=x(R),$=0,q=j.length;$<q;$++)if(A=j[$],A in _||(I.push(A),_[A]=R),A in S){B=!0;break e}}else for(k=C,C=[],F=0,P=k.length;F<P;F++)for(R=k[F],j=y(R),$=0,q=j.length;$<q;$++)if(A=j[$],A in S||(C.push(A),S[A]=R),A in _){B=!0;break e}if(!B)return null;for(var L=[];A;)L.unshift(A),A=_[A];for(A=S[L[L.length-1]];A;)L.push(A),A=S[A];return L.length?L:null}function i(d,p){if(!t(d))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!d.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" source node does not exist in the given graph.');p=""+p;var h={},y={},x,_,S,I,C,k;for(h[p]=!0,y[p]=[p];Object.keys(h).length;){x=h,h={};for(S in x)for(_=d.outboundNeighbors(S),C=0,k=_.length;C<k;C++)I=_[C],y[I]||(y[I]=y[S].concat(I),h[I]=!0)}return y}function s(d,p,h){if(!t(p))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!p.hasNode(h))throw new Error('graphology-shortest-path: the "'+h+'" source node does not exist in the given graph.');h=""+h;var y=new Set,x={},_=0;x[h]=0;for(var S=[h],I,C,k;S.length!==0;){var R=[];for(I=0,C=S.length;I<C;I++)k=S[I],!y.has(k)&&(y.add(k),n(R,p[d](k)),x[k]=_);_++,S=R}return x}var o=s.bind(null,"outboundNeighbors"),a=s.bind(null,"neighbors");function u(d,p){p=""+p;var h=[],y={},x={},_=d.nodes(),S,I,C,k,R,j,A,F,$;for(j=0,F=_.length;j<F;j++)k=_[j],y[k]=[],x[k]=0;var P={};x[p]=1,P[p]=0;for(var q=e.of(p);q.size;)for(k=q.dequeue(),h.push(k),S=P[k],I=x[k],C=d.outboundNeighbors(k),A=0,$=C.length;A<$;A++)R=C[A],R in P||(q.enqueue(R),P[R]=S+1),P[R]===S+1&&(x[R]+=I,y[R].push(k));return[h,y,x]}return Wu.bidirectional=r,Wu.singleSource=i,Wu.singleSourceLength=o,Wu.undirectedSingleSourceLength=a,Wu.brandes=u,Wu}var $I=Moe(),Cy={},uE,r3;function $oe(){if(r3)return uE;r3=1;function t(e){this.graph=e,this.stack=new Array(e.order),this.seen=new Set,this.size=0}return t.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},t.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},t.prototype.forEachNodeYetUnseen=function(e){var n=this.seen,r=this.graph;r.someNode(function(i,s){if(n.size===r.order)return!0;if(n.has(i))return!1;var o=e(i,s);return!!o})},t.prototype.has=function(e){return this.seen.has(e)},t.prototype.push=function(e){var n=this.seen.size;return this.seen.add(e),n===this.seen.size?!1:(this.stack[this.size++]=e,!0)},t.prototype.pushWith=function(e,n){var r=this.seen.size;return this.seen.add(e),r===this.seen.size?!1:(this.stack[this.size++]=n,!0)},t.prototype.pop=function(){if(this.size!==0)return this.stack[--this.size]},uE=t,uE}var Ty={},i3;function Boe(){if(i3)return Ty;i3=1;function t(n,r,i){this.node=n,this.attributes=r,this.depth=i}function e(n){return n[0].toUpperCase()+n.slice(1)}return Ty.TraversalRecord=t,Ty.capitalize=e,Ty}var s3;function zoe(){if(s3)return Cy;s3=1;var t=f$(),e=$oe(),n=Boe(),r=n.TraversalRecord,i=n.capitalize;function s(o,a,u,d){if(d=d||{},!t(o))throw new Error("graphology-traversal/dfs: expecting a graphology instance.");if(typeof u!="function")throw new Error("graphology-traversal/dfs: given callback is not a function.");if(o.order===0)return;var p=new e(o),h=o["forEach"+i(d.mode||"outbound")+"Neighbor"].bind(o),y;a===null?y=p.forEachNodeYetUnseen.bind(p):y=function(I){a=""+a,I(a,o.getNodeAttributes(a))};var x,_;function S(I,C){p.pushWith(I,new r(I,C,x.depth+1))}y(function(I,C){for(p.pushWith(I,new r(I,C,0));p.size!==0;)x=p.pop(),_=u(x.node,x.attributes,x.depth),_!==!0&&h(x.node,S)})}return Cy.dfs=function(o,a,u){return s(o,null,a,u)},Cy.dfsFromNode=s,Cy}var Woe=zoe(),Ry={exports:{}},o3;function Uoe(){if(o3)return Ry.exports;o3=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(A,F,$){return Function.prototype.apply.call(A,F,$)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:n=function(A){return Object.getOwnPropertyNames(A)};function r(j){console&&console.warn&&console.warn(j)}var i=Number.isNaN||function(A){return A!==A};function s(){s.init.call(this)}Ry.exports=s,Ry.exports.once=C,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(j){if(typeof j!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(j){if(typeof j!="number"||j<0||i(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");o=j}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||i(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function u(j){return j._maxListeners===void 0?s.defaultMaxListeners:j._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(A){for(var F=[],$=1;$<arguments.length;$++)F.push(arguments[$]);var P=A==="error",q=this._events;if(q!==void 0)P=P&&q.error===void 0;else if(!P)return!1;if(P){var B;if(F.length>0&&(B=F[0]),B instanceof Error)throw B;var L=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw L.context=B,L}var U=q[A];if(U===void 0)return!1;if(typeof U=="function")e(U,this,F);else for(var V=U.length,z=_(U,V),$=0;$<V;++$)e(z[$],this,F);return!0};function d(j,A,F,$){var P,q,B;if(a(F),q=j._events,q===void 0?(q=j._events=Object.create(null),j._eventsCount=0):(q.newListener!==void 0&&(j.emit("newListener",A,F.listener?F.listener:F),q=j._events),B=q[A]),B===void 0)B=q[A]=F,++j._eventsCount;else if(typeof B=="function"?B=q[A]=$?[F,B]:[B,F]:$?B.unshift(F):B.push(F),P=u(j),P>0&&B.length>P&&!B.warned){B.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=j,L.type=A,L.count=B.length,r(L)}return j}s.prototype.addListener=function(A,F){return d(this,A,F,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(A,F){return d(this,A,F,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(j,A,F){var $={fired:!1,wrapFn:void 0,target:j,type:A,listener:F},P=p.bind($);return P.listener=F,$.wrapFn=P,P}s.prototype.once=function(A,F){return a(F),this.on(A,h(this,A,F)),this},s.prototype.prependOnceListener=function(A,F){return a(F),this.prependListener(A,h(this,A,F)),this},s.prototype.removeListener=function(A,F){var $,P,q,B,L;if(a(F),P=this._events,P===void 0)return this;if($=P[A],$===void 0)return this;if($===F||$.listener===F)--this._eventsCount===0?this._events=Object.create(null):(delete P[A],P.removeListener&&this.emit("removeListener",A,$.listener||F));else if(typeof $!="function"){for(q=-1,B=$.length-1;B>=0;B--)if($[B]===F||$[B].listener===F){L=$[B].listener,q=B;break}if(q<0)return this;q===0?$.shift():S($,q),$.length===1&&(P[A]=$[0]),P.removeListener!==void 0&&this.emit("removeListener",A,L||F)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(A){var F,$,P;if($=this._events,$===void 0)return this;if($.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):$[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete $[A]),this;if(arguments.length===0){var q=Object.keys($),B;for(P=0;P<q.length;++P)B=q[P],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(F=$[A],typeof F=="function")this.removeListener(A,F);else if(F!==void 0)for(P=F.length-1;P>=0;P--)this.removeListener(A,F[P]);return this};function y(j,A,F){var $=j._events;if($===void 0)return[];var P=$[A];return P===void 0?[]:typeof P=="function"?F?[P.listener||P]:[P]:F?I(P):_(P,P.length)}s.prototype.listeners=function(A){return y(this,A,!0)},s.prototype.rawListeners=function(A){return y(this,A,!1)},s.listenerCount=function(j,A){return typeof j.listenerCount=="function"?j.listenerCount(A):x.call(j,A)},s.prototype.listenerCount=x;function x(j){var A=this._events;if(A!==void 0){var F=A[j];if(typeof F=="function")return 1;if(F!==void 0)return F.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function _(j,A){for(var F=new Array(A),$=0;$<A;++$)F[$]=j[$];return F}function S(j,A){for(;A+1<j.length;A++)j[A]=j[A+1];j.pop()}function I(j){for(var A=new Array(j.length),F=0;F<A.length;++F)A[F]=j[F].listener||j[F];return A}function C(j,A){return new Promise(function(F,$){function P(B){j.removeListener(A,q),$(B)}function q(){typeof j.removeListener=="function"&&j.removeListener("error",P),F([].slice.call(arguments))}R(j,A,q,{once:!0}),A!=="error"&&k(j,P,{once:!0})})}function k(j,A,F){typeof j.on=="function"&&R(j,"error",A,F)}function R(j,A,F,$){if(typeof j.on=="function")$.once?j.once(A,F):j.on(A,F);else if(typeof j.addEventListener=="function")j.addEventListener(A,function P(q){$.once&&j.removeEventListener(A,P),F(q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j)}return Ry.exports}var Voe=Uoe();function Hoe(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let ui=Hoe;typeof Object.assign=="function"&&(ui=Object.assign);function mo(t,e,n,r){const i=t._nodes.get(e);let s=null;return i&&(r==="mixed"?s=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?s=i.out&&i.out[n]:s=i.undirected&&i.undirected[n]),s}function xi(t){return typeof t=="object"&&t!==null}function p$(t){let e;for(e in t)return!1;return!0}function so(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Ro(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function a3(t){return!(!xi(t)||t.attributes&&!Array.isArray(t.attributes))}function Goe(){let t=Math.floor(Math.random()*256)&255;return()=>t++}function Ja(){const t=arguments;let e=null,n=-1;return{[Symbol.iterator](){return this},next(){let r=null;do{if(e===null){if(n++,n>=t.length)return{done:!0};e=t[n][Symbol.iterator]()}if(r=e.next(),r.done){e=null;continue}break}while(!0);return r}}}function Af(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class T1 extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class Ft extends T1{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ft.prototype.constructor)}}class xt extends T1{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,xt.prototype.constructor)}}class ln extends T1{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ln.prototype.constructor)}}function h$(t,e){this.key=t,this.attributes=e,this.clear()}h$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function m$(t,e){this.key=t,this.attributes=e,this.clear()}m$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function g$(t,e){this.key=t,this.attributes=e,this.clear()}g$.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Pf(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}Pf.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};Pf.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],s=i[r];if(typeof s>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}s.previous=this,this.next=s,i[r]=this,this.target[e][n]=this};Pf.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};Pf.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const y$=0,b$=1,Koe=2,v$=3;function al(t,e,n,r,i,s,o){let a,u,d,p;if(r=""+r,n===y$){if(a=t._nodes.get(r),!a)throw new xt(`Graph.${e}: could not find the "${r}" node in the graph.`);d=i,p=s}else if(n===v$){if(i=""+i,u=t._edges.get(i),!u)throw new xt(`Graph.${e}: could not find the "${i}" edge in the graph.`);const h=u.source.key,y=u.target.key;if(r===h)a=u.target;else if(r===y)a=u.source;else throw new xt(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${h}, ${y}).`);d=s,p=o}else{if(u=t._edges.get(r),!u)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===b$?a=u.source:a=u.target,d=i,p=s}return[a,d,p]}function Qoe(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=al(this,e,n,r,i,s);return o.attributes[a]}}function Joe(t,e,n){t.prototype[e]=function(r,i){const[s]=al(this,e,n,r,i);return s.attributes}}function Zoe(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=al(this,e,n,r,i,s);return o.attributes.hasOwnProperty(a)}}function Yoe(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,u,d]=al(this,e,n,r,i,s,o);return a.attributes[u]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:u}),this}}function Xoe(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,u,d]=al(this,e,n,r,i,s,o);if(typeof d!="function")throw new Ft(`Graph.${e}: updater should be a function.`);const p=a.attributes,h=d(p[u]);return p[u]=h,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:u}),this}}function eae(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=al(this,e,n,r,i,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function tae(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=al(this,e,n,r,i,s);if(!xi(a))throw new Ft(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function nae(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=al(this,e,n,r,i,s);if(!xi(a))throw new Ft(`Graph.${e}: provided attributes are not a plain object.`);return ui(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function rae(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=al(this,e,n,r,i,s);if(typeof a!="function")throw new Ft(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const iae=[{name:t=>`get${t}Attribute`,attacher:Qoe},{name:t=>`get${t}Attributes`,attacher:Joe},{name:t=>`has${t}Attribute`,attacher:Zoe},{name:t=>`set${t}Attribute`,attacher:Yoe},{name:t=>`update${t}Attribute`,attacher:Xoe},{name:t=>`remove${t}Attribute`,attacher:eae},{name:t=>`replace${t}Attributes`,attacher:tae},{name:t=>`merge${t}Attributes`,attacher:nae},{name:t=>`update${t}Attributes`,attacher:rae}];function sae(t){iae.forEach(function({name:e,attacher:n}){n(t,e("Node"),y$),n(t,e("Source"),b$),n(t,e("Target"),Koe),n(t,e("Opposite"),v$)})}function oae(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ln(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ln(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=mo(this,o,a,n),!s)throw new xt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ln(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]}}function aae(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ln(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new ln(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,o=""+arguments[1];if(i=mo(this,s,o,n),!i)throw new xt(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new ln(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function lae(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ln(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ln(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=mo(this,o,a,n),!s)throw new xt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ln(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes.hasOwnProperty(i)}}function uae(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ln(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ln(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,u=""+i;if(i=arguments[2],s=arguments[3],o=mo(this,a,u,n),!o)throw new xt(`Graph.${e}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if(n!=="mixed")throw new ln(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function cae(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ln(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ln(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,u=""+i;if(i=arguments[2],s=arguments[3],o=mo(this,a,u,n),!o)throw new xt(`Graph.${e}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if(n!=="mixed")throw new ln(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof s!="function")throw new Ft(`Graph.${e}: updater should be a function.`);return o.attributes[i]=s(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function dae(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ln(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ln(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=mo(this,o,a,n),!s)throw new xt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ln(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete s.attributes[i],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:i}),this}}function fae(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ln(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ln(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=mo(this,o,a,n),!s)throw new xt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ln(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!xi(i))throw new Ft(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=i,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function pae(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ln(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ln(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=mo(this,o,a,n),!s)throw new xt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ln(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!xi(i))throw new Ft(`Graph.${e}: provided attributes are not a plain object.`);return ui(s.attributes,i),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:i}),this}}function hae(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ln(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ln(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=mo(this,o,a,n),!s)throw new xt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ln(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new xt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new Ft(`Graph.${e}: provided updater is not a function.`);return s.attributes=i(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const mae=[{name:t=>`get${t}Attribute`,attacher:oae},{name:t=>`get${t}Attributes`,attacher:aae},{name:t=>`has${t}Attribute`,attacher:lae},{name:t=>`set${t}Attribute`,attacher:uae},{name:t=>`update${t}Attribute`,attacher:cae},{name:t=>`remove${t}Attribute`,attacher:dae},{name:t=>`replace${t}Attributes`,attacher:fae},{name:t=>`merge${t}Attributes`,attacher:pae},{name:t=>`update${t}Attributes`,attacher:hae}];function gae(t){mae.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const yae=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function bae(t,e,n,r){let i=!1;for(const s in e){if(s===r)continue;const o=e[s];if(i=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&i)return o.key}}function vae(t,e,n,r){let i,s,o,a=!1;for(const u in e)if(u!==r){i=e[u];do{if(s=i.source,o=i.target,a=n(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function cE(t,e){const n=Object.keys(t),r=n.length;let i,s=0;return{[Symbol.iterator](){return this},next(){do if(i)i=i.next;else{if(s>=r)return{done:!0};const o=n[s++];if(o===e){i=void 0;continue}i=t[o]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}}}}function xae(t,e,n,r){const i=e[n];if(!i)return;const s=i.source,o=i.target;if(r(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected)&&t)return i.key}function wae(t,e,n,r){let i=e[n];if(!i)return;let s=!1;do{if(s=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}function dE(t,e){let n=t[e];if(n.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}};let r=!1;return{[Symbol.iterator](){return this},next(){return r===!0?{done:!0}:(r=!0,{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}})}}}function _ae(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return Array.from(t._edges.keys());const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",s=t._edges.values();let o=0,a,u;for(;a=s.next(),a.done!==!0;)u=a.value,u.undirected===i&&(r[o++]=u.key);return r}function x$(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,u=!1;const d=e._edges.values();for(;o=d.next(),o.done!==!0;){if(a=o.value,i&&a.undirected!==s)continue;const{key:p,attributes:h,source:y,target:x}=a;if(u=r(p,h,y.key,x.key,y.attributes,x.attributes,a.undirected),t&&u)return p}}function Sae(t,e){if(t.size===0)return Af();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return{[Symbol.iterator](){return this},next(){let s,o;for(;;){if(s=i.next(),s.done)return s;if(o=s.value,!(n&&o.undirected!==r))break}return{value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected},done:!1}}}}function R1(t,e,n,r,i,s){const o=e?vae:bae;let a;if(n!=="undirected"&&(r!=="out"&&(a=o(t,i.in,s),t&&a)||r!=="in"&&(a=o(t,i.out,s,r?void 0:i.key),t&&a))||n!=="directed"&&(a=o(t,i.undirected,s),t&&a))return a}function Eae(t,e,n,r){const i=[];return R1(!1,t,e,n,r,function(s){i.push(s)}),i}function Iae(t,e,n){let r=Af();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=Ja(r,cE(n.in))),e!=="in"&&typeof n.out<"u"&&(r=Ja(r,cE(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=Ja(r,cE(n.undirected))),r}function j1(t,e,n,r,i,s,o){const a=n?wae:xae;let u;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(u=a(t,i.in,s,o),t&&u)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==s)&&(u=a(t,i.out,s,o),t&&u))||e!=="directed"&&typeof i.undirected<"u"&&(u=a(t,i.undirected,s,o),t&&u))return u}function Nae(t,e,n,r,i){const s=[];return j1(!1,t,e,n,r,i,function(o){s.push(o)}),s}function kae(t,e,n,r){let i=Af();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=Ja(i,dE(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=Ja(i,dE(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Ja(i,dE(n.undirected,r))),i}function Cae(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return _ae(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new xt(`Graph.${n}: could not find the "${s}" node in the graph.`);return Eae(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new xt(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new xt(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return Nae(r,this.multi,i,a,o)}throw new Ft(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Tae(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(d,p,h){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return h=d,x$(!1,this,r,h);if(arguments.length===2){d=""+d,h=p;const y=this._nodes.get(d);if(typeof y>"u")throw new xt(`Graph.${s}: could not find the "${d}" node in the graph.`);return R1(!1,this.multi,r==="mixed"?this.type:r,i,y,h)}if(arguments.length===3){d=""+d,p=""+p;const y=this._nodes.get(d);if(!y)throw new xt(`Graph.${s}:  could not find the "${d}" source node in the graph.`);if(!this._nodes.has(p))throw new xt(`Graph.${s}:  could not find the "${p}" target node in the graph.`);return j1(!1,r,this.multi,i,y,p,h)}throw new Ft(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop();let h;if(d.length===0){let y=0;r!=="directed"&&(y+=this.undirectedSize),r!=="undirected"&&(y+=this.directedSize),h=new Array(y);let x=0;d.push((_,S,I,C,k,R,j)=>{h[x++]=p(_,S,I,C,k,R,j)})}else h=[],d.push((y,x,_,S,I,C,k)=>{h.push(p(y,x,_,S,I,C,k))});return this[s].apply(this,d),h};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop(),h=[];return d.push((y,x,_,S,I,C,k)=>{p(y,x,_,S,I,C,k)&&h.push(y)}),this[s].apply(this,d),h};const u="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[u]=function(){let d=Array.prototype.slice.call(arguments);if(d.length<2||d.length>4)throw new Ft(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${d.length}).`);if(typeof d[d.length-1]=="function"&&typeof d[d.length-2]!="function")throw new Ft(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let p,h;d.length===2?(p=d[0],h=d[1],d=[]):d.length===3?(p=d[1],h=d[2],d=[d[0]]):d.length===4&&(p=d[2],h=d[3],d=[d[0],d[1]]);let y=h;return d.push((x,_,S,I,C,k,R)=>{y=p(y,x,_,S,I,C,k,R)}),this[s].apply(this,d),y}}function Rae(t,e){const{name:n,type:r,direction:i}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return p=u,x$(!0,this,r,p);if(arguments.length===2){u=""+u,p=d;const h=this._nodes.get(u);if(typeof h>"u")throw new xt(`Graph.${s}: could not find the "${u}" node in the graph.`);return R1(!0,this.multi,r==="mixed"?this.type:r,i,h,p)}if(arguments.length===3){u=""+u,d=""+d;const h=this._nodes.get(u);if(!h)throw new xt(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(d))throw new xt(`Graph.${s}:  could not find the "${d}" target node in the graph.`);return j1(!0,r,this.multi,i,h,d,p)}throw new Ft(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),d=u.pop();return u.push((h,y,x,_,S,I,C)=>d(h,y,x,_,S,I,C)),!!this[s].apply(this,u)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),d=u.pop();return u.push((h,y,x,_,S,I,C)=>!d(h,y,x,_,S,I,C)),!this[s].apply(this,u)}}function jae(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Af();if(!arguments.length)return Sae(this,r);if(arguments.length===1){o=""+o;const u=this._nodes.get(o);if(!u)throw new xt(`Graph.${s}: could not find the "${o}" node in the graph.`);return Iae(r,i,u)}if(arguments.length===2){o=""+o,a=""+a;const u=this._nodes.get(o);if(!u)throw new xt(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new xt(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return kae(r,i,u,a)}throw new Ft(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Oae(t){yae.forEach(e=>{Cae(t,e),Tae(t,e),Rae(t,e),jae(t,e)})}const qae=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Ox(){this.A=null,this.B=null}Ox.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Ox.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Mp(t,e,n,r,i){for(const s in r){const o=r[s],a=o.source,u=o.target,d=a===n?u:a;if(e&&e.has(d.key))continue;const p=i(d.key,d.attributes);if(t&&p)return d.key}}function O1(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return Mp(t,null,r,r.undirected,i);if(typeof n=="string")return Mp(t,null,r,r[n],i)}const s=new Ox;let o;if(e!=="undirected"){if(n!=="out"){if(o=Mp(t,null,r,r.in,i),t&&o)return o;s.wrap(r.in)}if(n!=="in"){if(o=Mp(t,s,r,r.out,i),t&&o)return o;s.wrap(r.out)}}if(e!=="directed"&&(o=Mp(t,s,r,r.undirected,i),t&&o))return o}function Aae(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return O1(!1,t,e,n,function(i){r.push(i)}),r}function $p(t,e,n){const r=Object.keys(n),i=r.length;let s=0;return{[Symbol.iterator](){return this},next(){let o=null;do{if(s>=i)return t&&t.wrap(n),{done:!0};const a=n[r[s++]],u=a.source,d=a.target;if(o=u===e?d:u,t&&t.has(o.key)){o=null;continue}}while(o===null);return{done:!1,value:{neighbor:o.key,attributes:o.attributes}}}}}function Pae(t,e,n){if(t!=="mixed"){if(t==="undirected")return $p(null,n,n.undirected);if(typeof e=="string")return $p(null,n,n[e])}let r=Af();const i=new Ox;return t!=="undirected"&&(e!=="out"&&(r=Ja(r,$p(i,n,n.in))),e!=="in"&&(r=Ja(r,$p(i,n,n.out)))),t!=="directed"&&(r=Ja(r,$p(i,n,n.undirected))),r}function Fae(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new xt(`Graph.${n}: could not find the "${s}" node in the graph.`);return Aae(r==="mixed"?this.type:r,i,o)}}function Dae(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;d=""+d;const h=this._nodes.get(d);if(typeof h>"u")throw new xt(`Graph.${s}: could not find the "${d}" node in the graph.`);O1(!1,r==="mixed"?this.type:r,i,h,p)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(d,p){const h=[];return this[s](d,(y,x)=>{h.push(p(y,x))}),h};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(d,p){const h=[];return this[s](d,(y,x)=>{p(y,x)&&h.push(y)}),h};const u="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[u]=function(d,p,h){if(arguments.length<3)throw new Ft(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let y=h;return this[s](d,(x,_)=>{y=p(y,x,_)}),y}}function Lae(t,e){const{name:n,type:r,direction:i}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;d=""+d;const h=this._nodes.get(d);if(typeof h>"u")throw new xt(`Graph.${o}: could not find the "${d}" node in the graph.`);return O1(!0,r==="mixed"?this.type:r,i,h,p)};const a="some"+s;t.prototype[a]=function(d,p){return!!this[o](d,p)};const u="every"+s;t.prototype[u]=function(d,p){return!this[o](d,(y,x)=>!p(y,x))}}function Mae(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Af();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new xt(`Graph.${s}: could not find the "${o}" node in the graph.`);return Pae(r==="mixed"?this.type:r,i,a)}}function $ae(t){qae.forEach(e=>{Fae(t,e),Dae(t,e),Lae(t,e),Mae(t,e)})}function jy(t,e,n,r,i){const s=r._nodes.values(),o=r.type;let a,u,d,p,h,y;for(;a=s.next(),a.done!==!0;){let x=!1;if(u=a.value,o!=="undirected"){p=u.out;for(d in p){h=p[d];do y=h.target,x=!0,i(u.key,y.key,u.attributes,y.attributes,h.key,h.attributes,h.undirected),h=h.next;while(h)}}if(o!=="directed"){p=u.undirected;for(d in p)if(!(e&&u.key>d)){h=p[d];do y=h.target,y.key!==d&&(y=h.source),x=!0,i(u.key,y.key,u.attributes,y.attributes,h.key,h.attributes,h.undirected),h=h.next;while(h)}}n&&!x&&i(u.key,null,u.attributes,null,null,null,null)}}function Bae(t,e){const n={key:t};return p$(e.attributes)||(n.attributes=ui({},e.attributes)),n}function zae(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return p$(n.attributes)||(r.attributes=ui({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function Wae(t){if(!xi(t))throw new Ft('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new Ft("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!xi(t.attributes)||t.attributes===null))throw new Ft("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Uae(t){if(!xi(t))throw new Ft('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new Ft("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new Ft("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!xi(t.attributes)||t.attributes===null))throw new Ft("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new Ft("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Vae=Goe(),Hae=new Set(["directed","undirected","mixed"]),l3=new Set(["domain","_events","_eventsCount","_maxListeners"]),Gae=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Kae={allowSelfLoops:!0,multi:!1,type:"mixed"};function Qae(t,e,n){if(n&&!xi(n))throw new Ft(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new ln(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function u3(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function w$(t,e,n,r,i,s,o,a){if(!r&&t.type==="undirected")throw new ln(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new ln(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!xi(a))throw new Ft(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new ln(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=t._nodes.get(s),d=t._nodes.get(o);if(!u)throw new xt(`Graph.${e}: source node "${s}" not found.`);if(!d)throw new xt(`Graph.${e}: target node "${o}" not found.`);const p={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new ln(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof u.undirected[o]<"u":typeof u.out[o]<"u"))throw new ln(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const h=new Pf(r,i,u,d,a);t._edges.set(i,h);const y=s===o;return r?(u.undirectedDegree++,d.undirectedDegree++,y&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,y&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),r?t._undirectedSize++:t._directedSize++,p.key=i,t.emit("edgeAdded",p),i}function Jae(t,e,n,r,i,s,o,a,u){if(!r&&t.type==="undirected")throw new ln(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new ln(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(u){if(typeof a!="function")throw new Ft(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!xi(a))throw new Ft(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let d;if(u&&(d=a,a=void 0),!t.allowSelfLoops&&s===o)throw new ln(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let p=t._nodes.get(s),h=t._nodes.get(o),y,x;if(!n&&(y=t._edges.get(i),y)){if((y.source.key!==s||y.target.key!==o)&&(!r||y.source.key!==o||y.target.key!==s))throw new ln(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${s}" source & "${o}" target vs. ("${y.source.key}", "${y.target.key}").`);x=y}if(!x&&!t.multi&&p&&(x=r?p.undirected[o]:p.out[o]),x){const k=[x.key,!1,!1,!1];if(u?!d:!a)return k;if(u){const R=x.attributes;x.attributes=d(R),t.emit("edgeAttributesUpdated",{type:"replace",key:x.key,attributes:x.attributes})}else ui(x.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:x.key,attributes:x.attributes,data:a});return k}a=a||{},u&&d&&(a=d(a));const _={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new ln(`Graph.${e}: the "${i}" edge already exists in the graph.`);let S=!1,I=!1;p||(p=u3(t,s,{}),S=!0,s===o&&(h=p,I=!0)),h||(h=u3(t,o,{}),I=!0),y=new Pf(r,i,p,h,a),t._edges.set(i,y);const C=s===o;return r?(p.undirectedDegree++,h.undirectedDegree++,C&&(p.undirectedLoops++,t._undirectedSelfLoopCount++)):(p.outDegree++,h.inDegree++,C&&(p.directedLoops++,t._directedSelfLoopCount++)),t.multi?y.attachMulti():y.attach(),r?t._undirectedSize++:t._directedSize++,_.key=i,t.emit("edgeAdded",_),[i,!0,S,I]}function md(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,s=e.undirected,o=n===r;s?(n.undirectedDegree--,r.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:s})}class er extends Voe.EventEmitter{constructor(e){if(super(),e=ui({},Kae,e),typeof e.multi!="boolean")throw new Ft(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Hae.has(e.type))throw new Ft(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new Ft(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?h$:e.type==="directed"?m$:g$;so(this,"NodeDataClass",n);const r="geid_"+Vae()+"_";let i=0;const s=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};so(this,"_attributes",{}),so(this,"_nodes",new Map),so(this,"_edges",new Map),so(this,"_directedSize",0),so(this,"_undirectedSize",0),so(this,"_directedSelfLoopCount",0),so(this,"_undirectedSelfLoopCount",0),so(this,"_edgeKeyGenerator",s),so(this,"_options",e),l3.forEach(o=>so(this,o,this[o])),Ro(this,"order",()=>this._nodes.size),Ro(this,"size",()=>this._edges.size),Ro(this,"directedSize",()=>this._directedSize),Ro(this,"undirectedSize",()=>this._undirectedSize),Ro(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Ro(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Ro(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Ro(this,"multi",this._options.multi),Ro(this,"type",this._options.type),Ro(this,"allowSelfLoops",this._options.allowSelfLoops),Ro(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new Ft(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new Ft(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new Ft(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new ln("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new xt(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new xt(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new ln("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new xt(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new xt(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new ln("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new xt(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new xt(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new xt(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new xt(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new xt(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new xt(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,s=r.target.key;if(e===i)return s;if(e===s)return i;throw new xt(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new xt(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new xt(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new xt(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new xt(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Qae(this,e,n).key}mergeNode(e,n){if(n&&!xi(n))throw new Ft(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(ui(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new Ft(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const s=r.attributes;r.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new xt(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do md(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do md(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do md(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=mo(this,r,i,this.type),!n)throw new xt(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new xt(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return md(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new ln("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ln("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=mo(this,e,n,"directed");if(!r)throw new xt(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return md(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new ln("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ln("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=mo(this,e,n,"undirected");if(!r)throw new xt(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return md(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new Ft("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!xi(e))throw new Ft("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!xi(e))throw new Ft("Graph.mergeAttributes: provided attributes are not a plain object.");return ui(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new Ft("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new Ft("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!a3(n))throw new Ft("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new Ft("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!a3(n))throw new Ft("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,s,o,a;for(;i=r.next(),i.done!==!0;)s=i.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new Ft("Graph.forEachAdjacencyEntry: expecting a callback.");jy(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ft("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");jy(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new Ft("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");jy(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ft("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");jy(!1,!0,!0,this,e)}nodes(){return Array.from(this._nodes.keys())}forEachNode(e){if(typeof e!="function")throw new Ft("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new Ft("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new Ft("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const s=new Array(this.order);let o=0;for(;r=n.next(),r.done!==!0;)i=r.value,s[o++]=e(i.key,i.attributes);return s}someNode(e){if(typeof e!="function")throw new Ft("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new Ft("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new Ft("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const s=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&s.push(i.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new Ft("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Ft("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let s,o;for(;s=i.next(),s.done!==!0;)o=s.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return{[Symbol.iterator](){return this},next(){const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}}}}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,s)=>{e[n++]=Bae(s,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,s)=>{r[n++]=zae(this.type,s,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof er)return e.forEachNode((u,d)=>{n?this.mergeNode(u,d):this.addNode(u,d)}),e.forEachEdge((u,d,p,h,y,x,_)=>{n?_?this.mergeUndirectedEdgeWithKey(u,p,h,d):this.mergeDirectedEdgeWithKey(u,p,h,d):_?this.addUndirectedEdgeWithKey(u,p,h,d):this.addDirectedEdgeWithKey(u,p,h,d)}),this;if(!xi(e))throw new Ft("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!xi(e.attributes))throw new Ft("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new Ft("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=s.length;r<i;r++){o=s[r],Wae(o);const{key:u,attributes:d}=o;n?this.mergeNode(u,d):this.addNode(u,d)}}if(e.edges){let u=!1;if(this.type==="undirected"&&(u=!0),s=e.edges,!Array.isArray(s))throw new Ft("Graph.import: invalid edges. Expecting an array.");for(r=0,i=s.length;r<i;r++){a=s[r],Uae(a);const{source:d,target:p,attributes:h,undirected:y=u}=a;let x;"key"in a?(x=n?y?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:y?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,x.call(this,a.key,d,p,h)):(x=n?y?this.mergeUndirectedEdge:this.mergeDirectedEdge:y?this.addUndirectedEdge:this.addDirectedEdge,x.call(this,d,p,h))}}return this}nullCopy(e){const n=new er(ui({},this._options,e));return n.replaceAttributes(ui({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const s=ui({},r.attributes);r=new n.NodeDataClass(i,s),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new ln(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new ln("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new ln("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,w$(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,ui({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},r={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let u="",d=s.source.key,p=s.target.key,h;s.undirected&&d>p&&(h=d,d=p,p=h);const y=`(${d})${a}(${p})`;o.startsWith("geid_")?this.multi&&(typeof r[y]>"u"?r[y]=0:r[y]++,u+=`${r[y]}. `):u+=`[${o}]: `,u+=y,n[u]=s.attributes});const i={};for(const s in this)this.hasOwnProperty(s)&&!l3.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(i[s]=this[s]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,so(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(er.prototype[Symbol.for("nodejs.util.inspect.custom")]=er.prototype.inspect);Gae.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?w$:Jae;t.generateKey?er.prototype[n]=function(i,s,o){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,s,o,e==="update")}:er.prototype[n]=function(i,s,o,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,s,o,a,e==="update")}})});sae(er);gae(er);Oae(er);$ae(er);class _$ extends er{constructor(e){const n=ui({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new Ft("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new Ft('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class S$ extends er{constructor(e){const n=ui({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new Ft("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new Ft('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class E$ extends er{constructor(e){const n=ui({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Ft("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class I$ extends er{constructor(e){const n=ui({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Ft("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new Ft('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class N$ extends er{constructor(e){const n=ui({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Ft("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new Ft('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Ff(t){t.from=function(e,n){const r=ui({},e.options,n),i=new t(r);return i.import(e),i}}Ff(er);Ff(_$);Ff(S$);Ff(E$);Ff(I$);Ff(N$);er.Graph=er;er.DirectedGraph=_$;er.UndirectedGraph=S$;er.MultiGraph=E$;er.MultiDirectedGraph=I$;er.MultiUndirectedGraph=N$;er.InvalidArgumentsGraphError=Ft;er.NotFoundGraphError=xt;er.UsageGraphError=ln;const k$=async({tx:t,userId:e,mapId:n})=>{const r=await t.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").select(["b.id"]).where("b.userId","=",e).where("l.mapId","=",n).execute(),i=await t.selectFrom("Waypoint as w").select("w.id").where("w.mapId","=",n).where("w.userId","=",e).execute(),s=await t.selectFrom("Building_Waypoint as bw").select(["bw.buildingId","bw.waypointId"]).where("bw.buildingId","in",t.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").select(["b.id"]).where("b.userId","=",e).where("l.mapId","=",n)).execute(),o=await t.selectFrom("Route as r").select(["r.fromId","r.toId"]).execute(),a=new er({allowSelfLoops:!0,multi:!1,type:"undirected"});return r.forEach(({id:u})=>a.addNode(u,{type:"building"})),i.forEach(({id:u})=>{a.addNode(u,{type:"waypoint"})}),s.forEach(({buildingId:u,waypointId:d})=>{a.addEdge(u,d,{type:"waypoint"})}),o.forEach(({fromId:u,toId:d})=>{a.addEdge(u,d,{type:"route"})}),{buildings:r,graph:a}},qx=async({tx:t,userId:e,mapId:n})=>{await t.deleteFrom("Building_Route_Building as brb").where("brb.userId","=",e).execute();const{buildings:r,graph:i}=await k$({tx:t,userId:e,mapId:n}),s=new Map;for(const{id:o}of r)Woe.dfsFromNode(i,o,(a,u,d)=>(u.type==="building"&&o!==a&&s.set(`${o}-${a}`,{buildingId:o,linkId:a}),d>=50));await t.insertInto("Building_Route_Building").values([...s.values()].filter(({buildingId:o,linkId:a})=>{const u=$I.bidirectional(i,o,a);return u?(u.shift(),u.pop(),u.every(d=>i.getNodeAttribute(d,"type")==="waypoint")):!1}).map(o=>({id:Sn(),mapId:n,userId:e,...o}))).execute()},Zae=async({tx:t,userId:e,mapId:n})=>{const r=await t.selectFrom(t.selectFrom("Building as b").innerJoin("Construction as c","c.id","b.constructionId").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").select(["b.id as buildingId","c.id","b.blueprintId","c.cycle","bl.cycles",i=>i.case().when(i.not(i.exists(i.selectFrom("Blueprint_Requirement as br").select(i.lit(1).as("one")).whereRef("br.blueprintId","=","b.blueprintId").where(s=>s.not(s.exists(s.selectFrom("Inventory as i").select(s.lit(1).as("one")).where("i.id","in",s.selectFrom("Building_Inventory").select("inventoryId").whereRef("buildingId","=","b.id")).where("i.type","=","construction").whereRef("i.resourceId","=","br.resourceId").whereRef("i.amount",">=","br.amount"))))))).then(i.lit(!0)).else(i.lit(!1)).end().as("withAvailableResources")]).where("b.userId","=",e).where("l.mapId","=",n).where("c.plan","=",!1).as("building")).where("building.withAvailableResources","=",!0).selectAll().execute();for await(const{id:i,cycle:s,cycles:o,buildingId:a,blueprintId:u}of r){if(await t.deleteFrom("Route").where("toId","=",a).execute(),s>=o){await t.deleteFrom("Construction").where("id","=",i).execute();const d=await t.selectFrom("Blueprint_Production as bp").select(["bp.resourceId"]).where("bp.blueprintId","=",u).execute();for await(const{resourceId:p}of d)try{await t.insertInto("Supply").values({id:Sn(),buildingId:a,resourceId:p}).execute()}catch{}continue}await t.updateTable("Construction").set("cycle",s+1).where("id","=",i).execute()}},Yae=async({tx:t,userId:e,mapId:n})=>{const r=await t.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").where("b.userId","=",e).where("l.mapId","=",n).where("b.constructionId","is not",null).where("b.valid","=",!0).select(["b.id","b.blueprintId","bl.name"]).execute();for await(const{id:i,name:s,blueprintId:o}of r){const a=await t.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.resourceId","br.amount","r.name"]).where("br.blueprintId","=",o).where(u=>u.not(u.exists(u.selectFrom("Transport as t").select(["t.id"]).where("t.targetId","=",i).whereRef("t.resourceId","=","br.resourceId")))).execute();for await(const{resourceId:u,name:d,amount:p}of a){const h=await t.selectFrom("Inventory as i").select(["i.resourceId","i.amount"]).where("i.id","in",t.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).where("i.resourceId","=",u).executeTakeFirst();if(!h){console.warn(`Wrong building [${s}] configuration: requested resource [${d}] not found in the inventory`);continue}h.amount<p&&(console.info("Demanding resource",{resource:d,building:(await t.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select("bl.name").where("b.id","=",i).executeTakeFirstOrThrow()).name,amount:p}),await t.insertInto("Demand").values({id:Sn(),mapId:n,userId:e,amount:Math.max(0,p-h.amount),buildingId:i,priority:10,resourceId:u,type:"construction"}).onConflict(y=>y.columns(["buildingId","resourceId"]).doUpdateSet({amount:Math.max(0,p-h.amount)})).execute())}}},Xae=async({tx:t,userId:e,mapId:n})=>{const r=await t.selectFrom("Demand as d").where("d.userId","=",e).where("d.mapId","=",n).select(["d.id","d.buildingId","d.resourceId"]).execute();for await(const{id:i,buildingId:s,resourceId:o}of r){const a=await t.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").select("b.id").where(u=>u.exists(u.selectFrom("Supply as s").select(["s.id"]).whereRef("s.buildingId","=","b.id").where("s.resourceId","=",o))).where("b.id","in",u=>u.selectFrom("Building_Route_Building as brb").select("brb.linkId").whereRef("brb.linkId","=","b.id").where("brb.buildingId","=",s)).where("b.id","in",u=>u.selectFrom("Building_Inventory as bi").select("bi.buildingId").whereRef("bi.buildingId","=","b.id").where("bi.inventoryId","in",t.selectFrom("Inventory as i").select("i.id").where("i.resourceId","=",o).where("i.amount",">",0))).where("b.userId","=",e).where("l.mapId","=",n).executeTakeFirst();await t.updateTable("Demand").set({supplierId:a?a.id:null}).where("id","=",i).execute()}},ele=async({tx:t,userId:e,mapId:n})=>{await Yae({tx:t,userId:e,mapId:n}),await t.deleteFrom("Demand").where("amount","<=",0).execute(),await Xae({tx:t,userId:e,mapId:n})},tle=async({tx:t,userId:e,mapId:n})=>{const r=await t.selectFrom("Production as p").innerJoin("Building as b","b.id","p.buildingId").innerJoin("Land as l","l.id","b.landId").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","p.buildingId","p.cycle","p.cycles","bp.resourceId","p.blueprintProductionId","r.name","bp.amount"]).where("p.userId","=",e).where("l.mapId","=",n).execute();for await(const{id:i,buildingId:s,resourceId:o,cycle:a,cycles:u,amount:d}of r){if(a<u){await t.updateTable("Production").set("cycle",a+1).where("id","=",i).execute();continue}const p=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",s)).where("i.resourceId","=",o).where("i.type","=","storage").executeTakeFirst();if(p&&(!(p.limit>0)||p.amount+d<=p.limit)){await t.updateTable("Inventory").set({amount:p.amount+d}).where("id","=",p.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",i).execute();continue}const h=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",s)).where("i.resourceId","=",o).where("i.type","=","storage").executeTakeFirst();if(h&&(!(h.limit>0)||h.amount+d<=h.limit)){await t.updateTable("Inventory").set({amount:h.amount+d}).where("id","=",h.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",i).execute();continue}}},c3=async({tx:t,userId:e,mapId:n,buildingId:r,blueprintProductionId:i})=>{const s=await t.selectFrom("Blueprint_Production as bp").select(["bp.cycles"]).where("bp.id","=",i).executeTakeFirstOrThrow(),o=await t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).execute();for await(const{resourceId:a,amount:u,passive:d}of o){const p=await t.selectFrom("Inventory as i").innerJoin("Building_Inventory as bi","bi.inventoryId","i.id").select(["i.id","i.amount"]).where("bi.buildingId","=",r).where("i.resourceId","=",a).where("i.type","=","storage").executeTakeFirstOrThrow();if(p.amount<u){await t.insertInto("Demand").values({id:Sn(),amount:u-p.amount,userId:e,mapId:n,buildingId:r,priority:10,resourceId:a,type:"storage"}).onConflict(h=>h.columns(["buildingId","resourceId"]).doUpdateSet({amount:u-p.amount})).execute();continue}d||await t.updateTable("Inventory").set({amount:p.amount-u}).where("id","=",p.id).execute()}await t.insertInto("Production").values({id:Sn(),buildingId:r,blueprintProductionId:i,userId:e,cycle:0,cycles:s.cycles}).execute()},nle=async({tx:t,userId:e,mapId:n})=>{const r=await t.selectFrom("Building as b").select(["b.id as buildingId","b.productionId"]).where("b.userId","=",e).where("b.productionId","is not",null).execute();for await(const{buildingId:s,productionId:o}of r)try{const{count:a}=await t.selectFrom("Production as p").where("p.buildingId","=",s).select(u=>u.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(a>0)continue;await c3({tx:t,userId:e,mapId:n,blueprintProductionId:o,buildingId:s}),await t.updateTable("Building").set({productionId:null}).where("id","=",s).execute()}catch(a){console.error(a)}const i=await t.selectFrom("Building as b").select(["b.id as buildingId","b.recurringProductionId"]).where("b.userId","=",e).where("b.recurringProductionId","is not",null).execute();for await(const{buildingId:s,recurringProductionId:o}of i)try{const{count:a}=await t.selectFrom("Production as p").where("p.buildingId","=",s).select(u=>u.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(a>0)continue;await c3({tx:t,userId:e,mapId:n,blueprintProductionId:o,buildingId:s})}catch(a){console.error(a)}},rle=async({tx:t,userId:e,mapId:n})=>{const r=new Map,{graph:i}=await k$({tx:t,userId:e,mapId:n}),s=await t.selectFrom("Transport as t").select(["t.id","t.waypointId","t.amount","t.targetId","t.resourceId"]).where("t.userId","=",e).where("t.mapId","=",n).execute();for await(const{id:a,waypointId:u,targetId:d,resourceId:p,amount:h}of s){const y=`${u}-${d}`;if(!r.has(y)){const _=$I.bidirectional(i,u,d);if(!_)continue;r.set(y,_)}const x=[...r.get(y)||[]];if(x.shift(),x.pop(),!x.length){const _=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.resourceId","=",p).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",d)).executeTakeFirst();if(!_){console.warn("Target building does not support this resource",{targetId:d,resourceId:p});continue}const S=Math.min(h,_.limit-_.amount);await t.updateTable("Inventory").set({amount:S}).where("id","=",_.id).execute(),await t.updateTable("Transport").set({amount:h-S}).where("id","=",a).execute();continue}await t.updateTable("Transport").set({waypointId:x.shift()}).where("id","=",a).execute()}r.clear();const o=await t.selectFrom("Demand as d").select(["d.id","d.buildingId","d.supplierId","d.amount","d.resourceId"]).where("d.userId","=",e).where("d.mapId","=",n).where("d.supplierId","is not",null).execute();for await(const{id:a,buildingId:u,supplierId:d,amount:p,resourceId:h}of o){if(!d)continue;const y=`${u}-${d}`;if(!r.has(y)){const k=$I.bidirectional(i,d,u);if(!k)continue;r.set(y,k)}const x=[...r.get(y)||[]];x.length<2&&console.warn("Path too short, skipping",x);const _=x.shift(),S=x.shift(),I=x.pop();if(!_||!I||!S){console.warn("Source or target not found");continue}const C=await t.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.amount","r.name"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",_)).where("i.resourceId","=",h).where("i.amount",">=",p).executeTakeFirst();C&&(await t.updateTable("Inventory").set({amount:C.amount-p}).where("id","=",C.id).execute(),console.info("Planning transport",{resource:C.name,amount:p,source:(await t.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select("bl.name").where("b.id","=",_).executeTakeFirstOrThrow()).name,target:(await t.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select("bl.name").where("b.id","=",I).executeTakeFirstOrThrow()).name}),await t.insertInto("Transport").values({id:Sn(),mapId:n,userId:e,waypointId:S,sourceId:_,targetId:I,resourceId:h,amount:p}).execute()),await t.deleteFrom("Demand").where("id","=",a).execute()}await t.deleteFrom("Transport").where("amount","<=",0).execute()},ile=async({tx:t,userId:e,mapId:n})=>{await rle({tx:t,userId:e,mapId:n})},C$=async({tx:t,userId:e,mapId:n})=>{try{await t.insertInto("Cycle").values({id:Sn(),stamp:yn.now().toUTC().toSQLTime(),userId:e,mapId:n}).execute(),await qx({tx:t,userId:e,mapId:n}),await ele({tx:t,userId:e,mapId:n}),await Zae({tx:t,userId:e,mapId:n}),await tle({tx:t,userId:e,mapId:n}),await nle({tx:t,userId:e,mapId:n}),await ile({tx:t,userId:e,mapId:n})}catch(r){throw console.error(r),r}},sle=({userId:t,mapId:e,...n})=>{const r=Fn([["GameMap"]]),[i,s]=H.useState(!1),o=Xt({mutationKey:["useCycleMutation"],async mutationFn({userId:a}){return Ct.transaction().execute(async u=>C$({tx:u,userId:a,mapId:e}))},async onSuccess(){await r()}});return H.useEffect(()=>{if(i&&!o.isPending){const a=setInterval(()=>{o.mutate({userId:t})},1e3);return()=>clearInterval(a)}},[i]),f.jsx(vn,{iconEnabled:i?"icon-[fluent--pause-24-regular]":"icon-[hugeicons--play]",onClick:()=>{s(a=>!a)},loading:o.isPending,...n})},um="icon-[gala--clock]",ole=({userId:t,mapId:e,cycle:n,...r})=>{const i=Fn([["Cycle"],["GameMap"]]),s=Xt({mutationKey:["useCycleMutation"],async mutationFn({userId:o}){return Ct.transaction().execute(async a=>C$({tx:a,userId:o,mapId:e}))},async onSuccess(){await i()}});return f.jsxs(vn,{iconEnabled:um,iconDisabled:um,onClick:()=>{s.mutate({userId:t})},loading:s.isPending,...r,children:[f.jsx(Y,{css:{base:["font-bold"]},label:"New cycle (label)"}),f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx("div",{className:"font-light text-sm",children:pn({number:n})}),f.jsx(on,{icon:"icon-[solar--arrow-right-linear]"}),f.jsx("div",{className:"font-bold",children:pn({number:n+1})})]})]})},ale=({fromX:t,fromY:e,toX:n,toY:r,connectionLineStyle:i})=>{const[s]=Wm({sourceX:t,sourceY:e,targetX:n,targetY:r});return f.jsx("g",{children:f.jsx("path",{style:i,fill:"none",d:s})})};function d3(t,e){const n={...t.internals.positionAbsolute,...t},r=Math.round(n.x),i=Math.round(n.y),s=Math.round(e.x),o=Math.round(e.y);return s<=r+1?Tt.Left:s>=r+n.measured.width-1?Tt.Right:o<=i+1?Tt.Top:o>=n.y+n.measured.height-1?Tt.Bottom:Tt.Top}function f3(t,e){const{width:n,height:r}=t.measured,i=t.internals.positionAbsolute,s=e.internals.positionAbsolute,o=n/2,a=r/2,u=i.x+o,d=i.y+a,p=s.x+e.measured.width/2,h=s.y+e.measured.height/2,y=(p-u)/(2*o)-(h-d)/(2*a),x=(p-u)/(2*o)+(h-d)/(2*a),_=1/(Math.abs(y)+Math.abs(x)||1),S=_*y,I=_*x,C=o*(S+I)+u,k=a*(-S+I)+d;return{x:C,y:k}}function T$(t,e){const n=f3(t,e),r=f3(e,t);return{sx:n.x,sy:n.y,tx:r.x,ty:r.y,sourcePos:d3(t,n),targetPos:d3(e,r)}}const lle=({id:t,source:e,target:n,markerEnd:r,style:i})=>{const s=jv(e),o=jv(n);if(!s||!o)return null;const{sx:a,sy:u,tx:d,ty:p}=T$(s,o),[h]=Wm({sourceX:a,sourceY:u,targetX:d,targetY:p});return f.jsx("path",{id:t,className:"react-flow__edge-path",d:h,markerEnd:r,style:i})},ule=({id:t,source:e,target:n,markerEnd:r,style:i})=>{const s=jv(e),o=jv(n);if(!s||!o)return null;const{sx:a,sy:u,tx:d,ty:p}=T$(s,o),[h]=Wm({sourceX:a,sourceY:u,targetX:d,targetY:p});return f.jsx("path",{id:t,className:"react-flow__edge-path",d:h,markerEnd:r,style:i})},q1="icon-[lucide--land-plot]",cle=()=>{const{locale:t,mapId:e}=nn({from:"/$locale/apps/derivean/map/$mapId"});return f.jsxs("div",{className:"react-flow__panel flex flex-row p-2 border bg-white border-slate-300 shadow-xs",children:[f.jsx(qt,{to:"/$locale/apps/derivean/game",params:{locale:t},children:f.jsx(vn,{iconEnabled:yo,variant:{variant:"subtle"}})}),f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/building/list",params:{locale:t,mapId:e},children:f.jsx(vn,{iconEnabled:bo,variant:{variant:"subtle"}})}),f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/land/list",params:{locale:t,mapId:e},children:f.jsx(vn,{iconEnabled:q1,variant:{variant:"subtle"}})})]})},dle=()=>{const t=Fn([["GameMap"]]);return Xt({async mutationFn({id:e,x:n,y:r}){return Ct.transaction().execute(async i=>{await i.updateTable("Building").set({x:n,y:r}).where("id","=",e).execute()})},async onSuccess(){await t()}})},fle=()=>{const t=Fn([["GameMap"]]);return Xt({async mutationFn({mapId:e,userId:n,buildingId:r,waypointId:i}){return Ct.transaction().execute(async s=>{await s.insertInto("Building_Waypoint").values({id:Sn(),buildingId:r,waypointId:i}).execute(),setTimeout(async()=>{await qx({tx:s,mapId:e,userId:n}),await t()},0)})},async onSuccess(){await t()},onError(e){console.error(e)}})},ple=()=>{const t=Fn([["GameMap"]]);return Xt({async mutationFn({mapId:e,userId:n,fromId:r,toId:i}){return Ct.transaction().execute(async s=>{await s.insertInto("Route").values({id:Sn(),fromId:r,toId:i,userId:n}).execute(),setTimeout(async()=>{await qx({tx:s,mapId:e,userId:n}),await t()},0)})},async onSuccess(){await t()},onError(e){console.error(e)}})},hle=()=>{const t=Fn([["GameMap"]]);return Xt({async mutationFn({userId:e,mapId:n,x:r,y:i}){return Ct.transaction().execute(async s=>await s.insertInto("Waypoint").values({id:Sn(),userId:e,mapId:n,x:r,y:i}).returning("id").executeTakeFirstOrThrow())},async onSuccess(){await t()},onError(e){console.error(e)}})},mle=()=>Xt({async mutationFn({id:t,x:e,y:n}){return Ct.transaction().execute(async r=>r.updateTable("Waypoint").set({x:e,y:n}).where("id","=",t).execute())}}),A1=["flex","flex-row","gap-2","items-center","p-4","bg-white","rounded-md","border","shadow-md","border-slate-300"],Za="icon-[mingcute--inventory-line]",BI="icon-[tabler--basket]",R$="icon-[oui--refresh]",Ax="icon-[hugeicons--package-sent]",gle=({id:t,data:e})=>{const{mapId:n,locale:r}=nn({from:"/$locale/apps/derivean/map/$mapId"});return f.jsxs(f.Fragment,{children:[f.jsx(N1,{className:cn(A1),children:f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[f.jsx(qt,{icon:bo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:t},css:{base:["font-bold"]},children:e.name}),f.jsxs("div",{className:"flex flex-row gap-1 items-end",children:[f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:r,mapId:n,buildingId:t},children:f.jsx(vn,{iconEnabled:Ws,variant:{variant:"subtle",size:"sm"}})}),f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:r,mapId:n,buildingId:t},children:f.jsx(vn,{iconEnabled:Za,variant:{variant:"subtle",size:"sm"}})}),f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:{locale:r,mapId:n,buildingId:t},children:f.jsx(vn,{iconEnabled:Ax,variant:{variant:"subtle",size:"sm"}})})]})]})}),f.jsxs("div",{className:cn(["flex","flex-col","gap-1","w-full","h-full","justify-between","items-start"]),children:[f.jsx("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:f.jsx(qt,{icon:bo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:t},css:{base:["font-bold"]},children:e.name})}),f.jsxs("div",{className:"flex flex-row items-center justify-between w-full",children:[f.jsx("div",{children:e.productionName?f.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400",children:[f.jsx(on,{icon:BI,variant:{size:"xs"}}),f.jsx("div",{children:e.productionName})]}):e.recurringProductionName?f.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400",children:[f.jsx(on,{icon:R$,variant:{size:"xs"}}),f.jsx("div",{children:e.recurringProductionName})]}):null}),e.production?f.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400 font-bold",children:[f.jsx(on,{icon:vv}),f.jsx("div",{children:e.production.name})]}):null]}),e.production?f.jsx(Rf,{value:100*e.production.cycle/e.production.cycles}):null,f.jsx($i,{className:"hidden",position:Tt.Right,type:"source",isConnectable:!1}),f.jsx($i,{className:"hidden",position:Tt.Left,type:"target",isConnectable:!1})]})]})},yle="icon-[gis--route-end]",ble=({id:t,data:e})=>{const n=I1(),r=n.inProgress&&n.fromNode.id!==t;return f.jsxs("div",{className:"flex flex-row gap-2 w-full h-full items-center justify-center ",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-center text-xl",children:[f.jsx(on,{icon:yle,css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:e.name})]}),f.jsxs("div",{className:"w-full h-full absolute top-0 left-0",children:[!n.inProgress&&f.jsx($i,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Tt.Right,type:"source"}),(!n.inProgress||r)&&f.jsx($i,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Tt.Left,type:"target",isConnectableStart:!1})]})]})},vle=({data:t})=>{const e=Fn([["GameMap"]]),n=Xt({async mutationFn({constructionId:r}){return Ct.transaction().execute(async i=>{i.updateTable("Construction").set({plan:!1}).where("id","=",r).execute()})},async onSuccess(){await e()}});return f.jsxs("div",{className:"flex flex-row gap-2 items-start justify-between w-full h-full",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(on,{icon:"icon-[carbon--floorplan]",css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:t.name})]}),f.jsx(vn,{iconEnabled:dI,iconDisabled:dI,loading:n.isPending,disabled:!t.valid,onClick:()=>{n.mutate({constructionId:t.constructionId})}})]})},cm="icon-[emojione-monotone--construction]",xle=({data:t})=>{const{mapId:e,locale:n}=nn({from:"/$locale/apps/derivean/map/$mapId"});return f.jsxs(f.Fragment,{children:[f.jsx(N1,{position:Tt.Top,className:cn(A1),children:f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:n,mapId:e,landId:t.id},children:f.jsx(vn,{iconEnabled:cm,variant:{variant:"subtle"},children:f.jsx(Y,{label:"Construction (label)"})})})}),f.jsx("div",{children:f.jsx("div",{className:"text-9xl font-bold font-slate-800",children:t.name})})]})},wle=({data:t})=>{const{mapId:e,locale:n}=nn({from:"/$locale/apps/derivean/map/$mapId"});return f.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[f.jsx("div",{className:"flex flex-row gap-2 items-center",children:f.jsx(qt,{icon:cm,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:n,mapId:e,buildingId:t.id},css:{base:["font-bold"]},children:t.name})}),f.jsx(Rf,{value:100*t.cycle/t.cycles}),f.jsx($i,{className:"hidden",position:Tt.Right,type:"source",isConnectable:!1}),f.jsx($i,{className:"hidden",position:Tt.Left,type:"target",isConnectable:!1})]})},j$="icon-[icon-park-outline--transport]",O$="icon-[lets-icons--pin-alt-light]",_le=({id:t,data:{mapId:e,userId:n,transport:r}})=>{const{locale:i}=nn({from:"/$locale"}),s=Fn([["GameMap"]]),o=Xt({async mutationFn({id:a,userId:u,mapId:d}){return Ct.transaction().execute(async p=>{await p.deleteFrom("Waypoint").where("id","=",a).execute(),setTimeout(async()=>{await qx({tx:p,mapId:d,userId:u}),await s()},0)})},async onSuccess(){await s()}});return f.jsxs(f.Fragment,{children:[f.jsx(N1,{className:cn(A1),children:f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[r>0?f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/waypoint/$waypointId/transport",params:{locale:i,mapId:e,waypointId:t},children:f.jsx(vn,{iconEnabled:j$,variant:{variant:"subtle"}})}):null,f.jsx(vn,{iconEnabled:si,variant:{variant:"danger"},loading:o.isPending,onClick:()=>{o.mutate({id:t,mapId:e,userId:n})}})]})}),f.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[f.jsx(on,{icon:O$,variant:{size:"5xl"}}),f.jsx($i,{className:"hidden",position:Tt.Right,type:"source",isConnectable:!1}),f.jsx($i,{className:"hidden",position:Tt.Left,type:"target",isConnectable:!1})]})]})},Sle=({id:t})=>{const e=I1(),n=e.inProgress&&e.fromNode.id!==t;return f.jsxs("div",{className:"w-full h-full flex items-center justify-center ",children:[f.jsx(on,{icon:O$,css:{base:["text-amber-600"]},variant:{size:"5xl"}}),f.jsxs("div",{className:"w-full h-full absolute top-0 left-0",children:[!e.inProgress&&f.jsx($i,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Tt.Right,type:"source"}),(!e.inProgress||n)&&f.jsx($i,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Tt.Left,type:"target",isConnectableStart:!1})]})]})},Ele={stroke:"#DD44AA",strokeWidth:3},Ile={land:xle,construction:vle,queue:wle,building:gle,"building-route":ble,waypoint:_le,"waypoint-route":Sle},Nle={route:ule,"building-waypoint":lle},kle=({userId:t,cycle:e,defaultNodes:n,defaultEdges:r,zoomToId:i,routing:s})=>{const o=Fn([["GameMap"]]),{mapId:a}=nn({from:"/$locale/apps/derivean/map/$mapId"}),u=pu(),[d,p]=Wse(n),[h,y]=Use(r),{getIntersectingNodes:x,fitView:_,getNode:S,getNodes:I,screenToFlowPosition:C}=qf();H.useEffect(()=>{p(n)},[n]),H.useEffect(()=>{y(r)},[r]),H.useEffect(()=>{i&&setTimeout(()=>{_({nodes:[{id:i}],duration:750})},250)},[_,i]);const k=dle(),R=Xt({async mutationFn(){return Ct.transaction().execute(async V=>{const z=I().filter(X=>x(X).filter(J=>J.type!=="land").length>0).map(X=>X.id);await V.updateTable("Building").where("id","in",V.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").where("l.mapId","=",a).select("b.id")).set({valid:!0}).execute(),await V.updateTable("Building").set({valid:!1}).where("id","in",z).execute()})},async onSuccess(){await o()}}),j=hle(),A=mle(),F=ple(),$=fle(),P=H.useCallback(V=>{p(z=>_1(V,z))},[p]),q=H.useCallback((V,z)=>{p(X=>X.map(J=>J.id===z.id?{...J,selected:!1}:J))},[]),B=H.useCallback((V,z)=>{switch(z.type){case"construction":case"queue":case"building":k.mutate({id:z.id,x:z.position.x,y:z.position.y},{onSuccess(){R.mutate()}});break;case"waypoint":A.mutate({id:z.id,x:z.position.x,y:z.position.y});break}},[x,k]),L=H.useCallback(V=>{const z=S(V.source),X=S(V.target);if(!(!z||!X))switch(`${z.type}:${X.type}`){case"building-route:waypoint-route":$.mutate({userId:t,mapId:a,buildingId:z.id,waypointId:X.id});break;case"waypoint-route:building-route":$.mutate({userId:t,mapId:a,buildingId:X.id,waypointId:z.id});break;case"waypoint-route:waypoint-route":F.mutate({userId:t,mapId:a,fromId:z.id,toId:X.id});break;default:console.warn(`Unknown connection: ${z.type}:${X.type}`);break}},[F]),U=H.useCallback((V,z)=>{if(!z.isValid&&z.fromNode){const{clientX:X,clientY:J}="changedTouches"in V?V.changedTouches[0]:V,le=C({x:X-32,y:J-32}),ie=z.fromNode.id,{type:ne}=z.fromNode;j.mutate({userId:t,mapId:a,...le},{async onSuccess({id:oe}){switch(ne){case"building-route":$.mutate({userId:t,mapId:a,buildingId:ie,waypointId:oe});break;case"waypoint-route":F.mutate({userId:t,mapId:a,fromId:ie,toId:oe});break}}})}},[C,j,F]);return f.jsx(f.Fragment,{children:f.jsxs("div",{className:"flex flex-row",children:[f.jsxs(i$,{nodes:d,edges:h,onNodesChange:P,onNodeDragStart:q,onNodeDragStop:B,onConnect:L,onConnectEnd:U,className:"grow h-screen",fitView:!0,snapToGrid:!0,snapGrid:[32,32],elementsSelectable:!1,nodeTypes:Ile,edgeTypes:Nle,connectionLineComponent:ale,connectionLineStyle:Ele,maxZoom:2,minZoom:.1,onDoubleClick:H.useCallback(()=>{u({search:{routing:!s}})},[u,s]),zoomOnDoubleClick:!1,children:[f.jsx(ole,{userId:t,mapId:a,cycle:e,css:{base:["react-flow__panel","absolute","top-1","right-16"]},onDoubleClick:V=>{V.preventDefault(),V.stopPropagation()}}),f.jsx(sle,{userId:t,mapId:a,css:{base:["react-flow__panel","absolute","top-1","right-1"]}}),f.jsx(l$,{orientation:"horizontal",showZoom:!1,showFitView:!1}),f.jsx(c$,{zoomable:!0,draggable:!0,pannable:!0,maskColor:"rgba(0,0,0,0.2)"}),f.jsx(o$,{variant:fa.Lines,className:"bg-slate-50",gap:32,size:1}),f.jsx(cle,{})]}),f.jsx(xo,{})]})})},Cle=({cycle:t,userId:e,nodes:n,edges:r,zoomToId:i,routing:s})=>f.jsx(r$,{children:f.jsx(kle,{userId:e,cycle:t,defaultNodes:n,defaultEdges:r,zoomToId:i,routing:s})}),fE=384,pE=128,Oy=["p-2","bg-white","rounded-lg","border-[4px]","border-slate-300"],zI=$t("/$locale/apps/derivean/map/$mapId")({validateSearch:yr(M.object({zoomToId:M.string().optional(),routing:M.boolean().optional()})),loaderDeps:({search:{routing:t}})=>({routing:t}),async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r},deps:{routing:i}}){const s=await n();return{user:s,land:await t.ensureQueryData({queryKey:["GameMap",r,"land","list"],async queryFn(){return e.transaction().execute(async o=>(await qr({select:o.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","r.color","l.x","l.y","l.width","l.height"]).where("l.mapId","=",r).orderBy("r.name"),output:M.object({id:M.string().min(1),name:M.string().min(1),color:M.string().min(1),x:M.number().int(),y:M.number().int(),width:M.number().int(),height:M.number().int()})})).map(u=>({id:u.id,position:{x:u.x,y:u.y},width:u.width,height:u.height,selectable:!0,draggable:!1,data:u,type:"land",className:cn(Oy,[u.color,"border-slate-600","opacity-25"]),zIndex:-1})))}}),construction:await t.ensureQueryData({queryKey:["GameMap",r,"construction"],async queryFn(){return e.transaction().execute(async o=>(await qr({select:o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bg.constructionId","bl.name","bg.x","bg.y","bg.valid"]).where("c.plan","=",!0).where("l.mapId","=",r).where("bg.userId","=",s.id),output:M.object({id:M.string().min(1),blueprintId:M.string().min(1),landId:M.string().min(1),constructionId:M.string().min(1),name:M.string().min(1),x:M.number(),y:M.number(),valid:Fi()})})).map(u=>({id:u.id,data:u,position:{x:u.x,y:u.y},type:"construction",width:fE,height:pE,selectable:!1,className:cn(Oy,[u.valid?["border-green-500"]:["border-red-500"]]),extent:"parent",parentId:u.landId})))}}),queue:await t.ensureQueryData({queryKey:["GameMap",r,"queue",{routing:i}],async queryFn(){return e.transaction().execute(async o=>(await qr({select:o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bl.name","bg.x","bg.y","bg.valid","c.cycles","c.cycle"]).where("c.plan","=",!1).where("l.mapId","=",r).where("bg.userId","=",s.id),output:M.object({id:M.string().min(1),blueprintId:M.string().min(1),landId:M.string().min(1),name:M.string().min(1),x:M.number(),y:M.number(),cycles:M.number().int().nonnegative(),cycle:M.number().int().nonnegative(),valid:Fi()})})).map(u=>({id:u.id,data:u,position:{x:u.x,y:u.y},type:i?"building-route":"queue",width:fE,height:pE,selectable:!1,className:cn(Oy,["border-amber-400","bg-amber-50"],u.valid?void 0:["border-red-500"]),extent:"parent",parentId:u.landId})))}}),building:await t.ensureQueryData({queryKey:["GameMap",r,"building",{routing:i}],async queryFn(){return e.transaction().execute(async o=>(await qr({select:o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bg.productionId","bg.recurringProductionId","bg.valid","bg.userId",u=>u.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.productionId").select("r.name").as("productionName"),u=>u.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.recurringProductionId").select("r.name").as("recurringProductionName"),u=>u.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(d=>lc.jsonObject({id:d.ref("p.id"),name:d.ref("r.name"),cycle:d.ref("p.cycle"),cycles:d.ref("p.cycles")}).as("production")).whereRef("p.buildingId","=","bg.id").as("production"),"bl.name","bg.x","bg.y"]).where("bg.constructionId","is",null).where("l.mapId","=",r).where("bg.userId","=",s.id),output:M.object({id:M.string().min(1),blueprintId:M.string().min(1),landId:M.string().min(1),userId:M.string().min(1),name:M.string().min(1),productionId:M.string().nullish(),recurringProductionId:M.string().nullish(),productionName:M.string().nullish(),recurringProductionName:M.string().nullish(),production:i9(M.object({id:M.string().min(1),name:M.string().min(1),cycle:M.number().int().nonnegative(),cycles:M.number().int().nonnegative()})).nullish(),x:M.number(),y:M.number(),valid:Fi()})})).map(u=>({id:u.id,data:u,position:{x:u.x,y:u.y},type:i?"building-route":"building",width:fE,height:pE,selectable:!0,className:cn(Oy,u.valid?void 0:["border-red-500"]),extent:"parent",parentId:u.landId})))}}),waypoint:await t.ensureQueryData({queryKey:["GameMap",r,"waypoint","list",{routing:i}],async queryFn(){return e.transaction().execute(async o=>(await qr({select:o.selectFrom("Waypoint as wp").select(["wp.id","wp.x","wp.y","wp.mapId","wp.userId",u=>u.selectFrom("Transport as t").whereRef("t.waypointId","=","wp.id").select(d=>d.fn.count("t.id").as("transport")).as("transport")]).where("wp.mapId","=",r),output:M.object({id:M.string().min(1),mapId:M.string().min(1),userId:M.string().min(1),x:M.number(),y:M.number(),transport:M.number().int().nonnegative()})})).map(u=>({id:u.id,data:u,position:{x:u.x,y:u.y},type:i?"waypoint-route":"waypoint",width:64,height:64,selectable:!0,className:cn(["rounded-md","bg-slate-50","border","border-slate-300","text-slate-300","p-2",u.transport>0?["text-green-600","border-green-600","border-2"]:void 0])})))}}),route:await t.ensureQueryData({queryKey:["GameMap",r,"route","list"],async queryFn(){return e.transaction().execute(async o=>(await qr({select:o.selectFrom("Route as r").select(["r.id","r.fromId","r.toId"]).where("r.userId","=",s.id),output:M.object({id:M.string().min(1),fromId:M.string().min(1),toId:M.string().min(1)})})).map(u=>({id:u.id,source:u.fromId,target:u.toId,type:"route",style:{stroke:"#b1b1b7",strokeWidth:5}})))}}),buildingWaypoint:await t.ensureQueryData({queryKey:["GameMap",r,"buildingWaypoint","list"],async queryFn(){return e.transaction().execute(async o=>(await qr({select:o.selectFrom("Building_Waypoint as bw").select(["bw.id","bw.buildingId","bw.waypointId"]).leftJoin("Building as b","b.id","bw.buildingId").leftJoin("Land as l","l.id","b.landId").where("b.userId","=",s.id).where("l.mapId","=",r),output:M.object({id:M.string().min(1),buildingId:M.string().min(1),waypointId:M.string().min(1)})})).map(u=>({id:u.id,source:u.buildingId,target:u.waypointId,type:"building-waypoint",style:{stroke:"#b1b1b7",strokeWidth:2,pointerEvents:"all"}})))}}),cycle:await t.ensureQueryData({queryKey:["GameMap",r,"cycle"],async queryFn(){return e.transaction().execute(async o=>(await o.selectFrom("Cycle as c").select(a=>a.fn.count("c.id").as("count")).where("c.userId","=",s.id).executeTakeFirstOrThrow()).count)}})}},component(){const{user:t,land:e,construction:n,queue:r,building:i,waypoint:s,route:o,buildingWaypoint:a,cycle:u}=zI.useLoaderData(),{zoomToId:d,routing:p}=zI.useSearch(),h=H.useMemo(()=>[...e,...n,...r,...i,...s],[n,r,i,s,e]),y=H.useMemo(()=>[...o,...a],[o,a]);return f.jsx(Cle,{userId:t.id,cycle:u,nodes:h,edges:y,zoomToId:d,routing:p})}}),q$=$t("/$locale/apps/derivean/db/schema")({async loader({context:{kysely:t}}){return{tables:await t.introspection.getTables()}},component(){const{tables:t}=q$.useLoaderData(),e=({dataType:i,isNullable:s})=>{const o=i.toLowerCase();let a=`z.never({message: '${i}'})`;switch(o){case"integer":{a="z.number().int()";break}case"float4":{a="z.number()";break}case"datetime":{a="z.string()";break}case"boolean":{a="withBoolSchema()";break}}return o.startsWith("varchar")&&(a=`z.string()${s?"":".min(1)"}`),`
// ${i} / ${s?"nullable":"not nullable"}
${a}${s?".nullish()":""}
`},n=t.map(i=>{const s=i.name.replaceAll("_","");return`
export const with${s}Schema = <
    TShapeSchema extends ShapeSchema,
    TFilterSchema extends FilterSchema,
>({
    shape,
    filter,
}: {
    shape: TShapeSchema;
    filter: TFilterSchema;
}) => {
    return withSourceSchema({
        entity: IdentitySchema.merge(z.object({
                ${i.columns.filter(({name:o})=>o!=="id").map(o=>`
    "${o.name}": ${e(o)}
        `.trim()).join(`,
			`)},
        })),
        shape,
        filter,
        sort: [${i.columns.map(o=>`"${o.name}"`).join(", ")}],
    });
}

export type ${s}Entity = ReturnType<typeof with${s}Schema>['~entity'];
            `.trim()}),r=t.map(i=>{const s=i.name.replaceAll("_","");return`${i.name}: ${s}Entity;`});return f.jsxs("pre",{children:[`
import {
    IdentitySchema,
    withSourceSchema,
    type FilterSchema,
    type ShapeSchema,
    withBoolSchema,
} from "@use-pico/common";
import { z } from "zod";
            `.trim(),`

${n.join(`

`)}`,`

export interface Database {
    ${r.join(`
	`)}
}
                `]})}}),p3=Wr(),Tle=[p3({name:"name",header(){return f.jsx(Y,{label:"User name (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsx(qt,{to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:e})},size:14}),p3({name:"login",header(){return f.jsx(Y,{label:"User login (label)"})},render({value:t}){return t},size:14})],Rle=({table:t,...e})=>{const n=Fn([["GameMap"],["Management"],["User_Inventory"]]),r=Xt({async mutationFn({userId:i}){return Ct.transaction().execute(async s=>{await s.deleteFrom("Building").where("userId","=",i).execute(),await s.deleteFrom("Production").where("userId","=",i).execute(),await s.deleteFrom("Construction").where("userId","=",i).execute(),await s.deleteFrom("Cycle").where("userId","=",i).execute()})},async onSuccess(){await n()}});return f.jsx(Br,{table:zr({...t,columns:Tle}),action:{row({data:i}){return f.jsx(ur,{children:f.jsx(RN,{icon:si,onClick:()=>{r.mutateAsync({userId:i.id})},children:f.jsx(Y,{label:"Reset game (menu)"})})})}},...e})},jle=$Y({shape:M.object({name:M.string().min(1),login:M.string().min(1),password:M.string().min(1)}),filter:zi.merge(M.object({login:M.string().optional(),password:M.string().optional()}))}),ub=$t("/$locale/apps/derivean/root/user/list")({validateSearch:yr($r(jle)),loaderDeps({search:{filter:t,cursor:e}}){return{filter:t,cursor:e}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["User","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>cr({select:i.selectFrom("User as u").select(["u.id","u.name","u.login"]),output:M.object({id:M.string().min(1),name:M.string().min(1),login:M.string().min(1)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=ub.useLoaderData(),{filter:n,cursor:r,selection:i}=ub.useSearch(),s=ub.useNavigate(),{tva:o}=gr({from:"__root__"}),a=o().slots;return f.jsx("div",{className:a.base(),children:f.jsx(Rle,{table:{data:t,filter:{value:n,set:Lr(s)},selection:{type:"multi",value:i,set:Es(s)}},fulltext:{value:n?.fulltext,set:Mr(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of users (label)"}),...Dr(s)}})})}}),Ole=({entity:t,...e})=>{const{locale:n}=nn({from:"/$locale"});return f.jsxs(Cc,{...e,children:[f.jsx(ir,{icon:YN,to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"View detail (menu)"})}),f.jsx(ir,{icon:bo,to:"/$locale/apps/derivean/root/user/$id/building/list",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Building list (menu)"})})]})},qle=t=>{const{locale:e}=nn({from:"/$locale"});return f.jsx(Tf,{title:({entity:n})=>f.jsx(jf,{icon:YN,title:n.name}),actions:()=>f.jsx(f.Fragment,{children:f.jsx(qt,{icon:mx,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},children:f.jsx(Y,{label:"User list (label)"})})}),...t})},A$=$t("/$locale/apps/derivean/root/user/$id")({async loader({context:{kysely:t},params:{id:e}}){return t.transaction().execute(async n=>({entity:await xa({select:n.selectFrom("User as u").select(["u.id","u.name"]).where("u.id","=",e),output:M.object({id:M.string().min(1),name:M.string().min(1)})})}))},component(){const{tva:t}=gr({from:"__root__"}),{entity:e}=A$.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(qle,{entity:e}),f.jsx(Ole,{entity:e}),f.jsx(xo,{})]})}}),Um=MY({shape:M.object({code:M.string().min(1),label:M.string().min(1),group:M.string().nullish(),sort:Po()}),filter:zi.merge(M.object({code:M.string().optional(),group:M.string().optional()}))}),h3=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(Um.shape),defaultValues:{sort:0,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"code",label:f.jsx(Y,{label:"Tag code (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("code")})}),f.jsx(mn,{formState:s.formState,name:"label",label:f.jsx(Y,{label:"Tag label (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("label")})}),f.jsx(mn,{formState:s.formState,name:"group",label:f.jsx(Y,{label:"Tag group (label)"}),children:f.jsx("input",{type:"text",className:o.input(),...s.register("group")})}),f.jsx(mn,{formState:s.formState,name:"sort",label:f.jsx(Y,{label:"Tag sort (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("sort")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:Zh,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},hE=Wr(),Ale=[hE({name:"label",header(){return f.jsx(Y,{label:"Tag label (label)"})},render({value:t}){return t},size:14}),hE({name:"code",header(){return f.jsx(Y,{label:"Tag code (label)"})},render({value:t}){return t},size:14}),hE({name:"group",header(){return f.jsx(Y,{label:"Tag group (label)"})},render({value:t}){return t},filter:{path:"group",onFilter({data:t,filter:e}){e.shallow("group",t.group)}},size:24})],P$=({group:t,table:e,...n})=>{const r=Fn([["Tag"],["Resource"]]);return f.jsx(Br,{table:zr({...e,columns:Ale}),action:{table(){return f.jsx(ur,{children:f.jsx(jn,{label:f.jsx(Y,{label:"Create tag (menu)"}),textTitle:f.jsx(Y,{label:"Create tag (modal)"}),icon:Zh,children:f.jsx(h3,{defaultValues:{group:t},mutation:Xt({async mutationFn(i){return An.promise(Ct.transaction().execute(s=>s.insertInto("Tag").values({id:Sn(),...i}).returningAll().executeTakeFirstOrThrow()),ii("Create tag"))},async onSuccess(){await r()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit tag (modal)"}),icon:Zh,children:f.jsx(h3,{defaultValues:{group:t,...i},mutation:Xt({async mutationFn(s){return An.promise(Ct.transaction().execute(o=>o.updateTable("Tag").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),ii("Edit tag"))},async onSuccess(){await r()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete tag (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>{await Ct.transaction().execute(s=>s.deleteFrom("Tag").where("id","=",i.id).execute())},textContent:f.jsx(Y,{label:"Tag delete (content)"}),textToast:"Tag delete",invalidator:r})})]})}},...n})},cb=$t("/$locale/apps/derivean/root/tag/list")({validateSearch:yr($r(Um)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Tag","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async i=>cr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]).orderBy("t.sort","desc"),output:M.object({id:M.string().min(1),code:M.string().min(1),label:M.string().min(1),group:M.string().nullish(),sort:M.number().int().nonnegative()}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=cb.useLoaderData(),{filter:n,cursor:r,selection:i}=cb.useSearch(),s=cb.useNavigate(),{tva:o}=gr({from:"__root__"}),a=o().slots;return f.jsx("div",{className:a.base(),children:f.jsx(P$,{table:{data:t,filter:{value:n,set:Lr(s)},selection:{type:"multi",value:i,set:Es(s)}},fulltext:{value:n?.fulltext,set:Mr(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of items"}),...Dr(s)}})})}}),Ple=({group:t,...e})=>f.jsx(G2,{icon:Zh,table:n=>f.jsx(P$,{group:t,...n}),render:({entities:n})=>f.jsx(J2,{tags:n}),queryKey:"Tag",query:async({filter:n,cursor:r})=>Ct.transaction().execute(async i=>cr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]),output:Um.entity,query({select:s,where:o}){let a=s;if(o?.id&&(a=a.where("t.id","=",o.id)),o?.idIn&&(a=a.where("t.id","in",o.idIn)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("t.code","like",u),d("t.group","like",u),d("t.label","like",u),d("t.id","like",u)]))}return a},filter:n,cursor:r})),...e}),F$=LY({shape:M.object({name:M.string().min(1),transport:Ho(),tagIds:M.array(M.string()).optional()}),filter:zi.merge(M.object({name:M.string().optional()}))}),m3=({group:t="resource",mutation:e,defaultValues:n,variant:r,tva:i=Si,css:s})=>{const o=Ei({resolver:Ii(F$.shape),defaultValues:{transport:1,...n}}),a=i({...r,isLoading:o.formState.isLoading,isSubmitting:o.formState.isSubmitting,css:s}).slots;return f.jsxs("form",{className:a.base(),onSubmit:ns({form:o,mutation:e}),children:[f.jsx(pi,{variant:{highlight:!0},error:o.formState.errors.root}),f.jsx(mn,{formState:o.formState,name:"name",label:f.jsx(Y,{label:"Resource name (label)"}),children:f.jsx("input",{type:"text",className:a.input(),...o.register("name")})}),f.jsx(mn,{formState:o.formState,name:"transport",label:f.jsx(Y,{label:"Resource transport (label)"}),hint:f.jsx(Y,{label:"Amount of resources transported per cycle (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:a.input(),min:.5,step:.5,...o.register("transport")})}),f.jsx(mn,{formState:o.formState,name:"tagIds",label:f.jsx(Y,{label:"Resource tags (label)"}),children:f.jsx(Mi,{control:o.control,name:"tagIds",render:({field:{ref:u,...d}})=>f.jsx(Ple,{group:t,textTitle:f.jsx(Y,{label:"Select resource tags (title)"}),textSelect:f.jsx(Y,{label:"Select resource tags (label)"}),allowEmpty:!0,...d})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:Er,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},gd=Wr(),Fle=[gd({name:"name",header(){return f.jsx(Y,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsx(qt,{to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),gd({name:"transport",header(){return f.jsx(Y,{label:"Resource transport (label)"})},render({value:t}){return pn({number:t})},size:12}),gd({name:"countProduction",header(){return f.jsx(Y,{label:"Resource production count (label)"})},render({value:t}){return f.jsx(_s,{css:{base:t!==void 0&&t===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:pn({number:t})})},size:12}),gd({name:"countRequirement",header(){return f.jsx(Y,{label:"Resource requirement count (label)"})},render({data:t,value:e}){return f.jsx(_s,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:pn({number:e})})},size:12}),gd({name:"countProductionRequirement",header(){return f.jsx(Y,{label:"Resource production requirement count (label)"})},render({data:t,value:e}){return f.jsx(_s,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:pn({number:e})})},size:18}),gd({name:"tags",header(){return f.jsx(Y,{label:"Resource tags (label)"})},render({value:t}){return f.jsx(J2,{tags:t})},size:32})],D$=({group:t,table:e,...n})=>{const r=Fn([["Resource"],["Resource_Tag"]]);return f.jsx(Br,{table:zr({...e,columns:Fle}),action:{table(){return f.jsx(ur,{children:f.jsx(jn,{label:f.jsx(Y,{label:"Create resource (menu)"}),textTitle:f.jsx(Y,{label:"Create resource (modal)"}),icon:Er,children:({close:i})=>f.jsx(m3,{group:t,mutation:Xt({async mutationFn({name:s,transport:o,tagIds:a=[]}){return Ct.transaction().execute(async u=>{const d=await u.insertInto("Resource").values({id:Sn(),name:s,transport:o}).returningAll().executeTakeFirstOrThrow();return a.length&&await u.insertInto("Resource_Tag").values(a.map(p=>({id:Sn(),resourceId:d.id,tagId:p}))).execute(),d})},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit resource (modal)"}),icon:Er,children:({close:s})=>f.jsx(m3,{defaultValues:{...i,tagIds:i.tags.map(({id:o})=>o)},mutation:Xt({async mutationFn({tagIds:o,...a}){return An.promise(Ct.transaction().execute(async u=>{const d=await u.updateTable("Resource").set(a).where("id","=",i.id).returningAll().executeTakeFirstOrThrow();return await u.deleteFrom("Resource_Tag").where("resourceId","=",d.id).execute(),o?.length&&await u.insertInto("Resource_Tag").values(o.map(p=>({id:Sn(),resourceId:d.id,tagId:p}))).execute(),d}),ii("Update resource"))},async onSuccess(){await r(),s()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete resource (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>Ct.transaction().execute(async s=>s.deleteFrom("Resource").where("id","=",i.id).execute()),textContent:f.jsx(Y,{label:"Resource delete (content)"}),textToast:"Resource delete",invalidator:r})})]})}},...n})},db=$t("/$locale/apps/derivean/root/resource/list")({validateSearch:yr($r(F$)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Resource","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>cr({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>_r`json_group_array(json_object(
                                            'id', ${o.ref("t.id")},
                                            'code', ${o.ref("t.code")},
                                            'group', ${o.ref("t.group")},
                                            'sort', ${o.ref("t.sort")},
                                            'label', ${o.ref("t.label")}
                                        ))`.as("tags")).where("t.id","in",s.selectFrom("Resource_Tag as rt").select("rt.tagId").whereRef("rt.resourceId","=","r.id")).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("r.id","like",u),d("r.name","like",u),d("r.id","in",d.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return a},output:M.object({id:M.string().min(1),name:M.string().min(1),transport:Ho(),countRequirement:M.number().nonnegative(),countProduction:M.number().nonnegative(),countProductionRequirement:M.number().nonnegative(),tags:wi(Um.entity)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=db.useLoaderData(),{filter:n,cursor:r,selection:i}=db.useSearch(),s=db.useNavigate(),{tva:o}=gr({from:"__root__"}),a=o().slots;return f.jsx("div",{className:a.base(),children:f.jsx(D$,{table:{data:t,filter:{value:n,set:Lr(s)},selection:{type:"multi",value:i,set:Es(s)}},fulltext:{value:n?.fulltext,set:Mr(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of items"}),...Dr(s)}})})}}),Dle=({entity:t,...e})=>{const{locale:n}=nn({from:"/$locale"});return f.jsx(Cc,{...e,children:f.jsx(ir,{icon:Er,to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"View detail (menu)"})})})},Lle=t=>{const{locale:e}=nn({from:"/$locale"});return f.jsx(Tf,{title:({entity:n})=>f.jsx(jf,{icon:Er,title:n.name}),actions:()=>f.jsx(f.Fragment,{children:f.jsx(qt,{icon:mx,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:f.jsx(Y,{label:"Resource list (label)"})})}),...t})},L$=$t("/$locale/apps/derivean/root/resource/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Resource",n],async queryFn(){return e.transaction().execute(async r=>({entity:await xa({select:r.selectFrom("Resource as r").select(["r.id","r.name"]).where("r.id","=",n),output:M.object({id:M.string().min(1),name:M.string().min(1)})})}))}})},component:()=>{const{tva:t}=gr({from:"__root__"}),{entity:e}=L$.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(Lle,{entity:e}),f.jsx(Dle,{entity:e}),f.jsx(xo,{})]})}}),fb=$t("/$locale/apps/derivean/root/region/list")({validateSearch:yr($r(k1)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Region","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>cr({select:i.selectFrom("Region as r").select(["r.id","r.name","r.color","r.minWidth","r.maxWidth","r.minHeight","r.maxHeight","r.probability","r.limit"]).orderBy("r.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("r.id","like",u),d("r.name","like",u)]))}return a},output:M.object({id:M.string().min(1),name:M.string().min(1),color:M.string().min(1),minWidth:M.number().int().min(0),maxWidth:M.number().int().min(0),minHeight:M.number().int().min(0),maxHeight:M.number().int().min(0),probability:M.number().int().min(0),limit:M.number().int().min(0)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=fb.useLoaderData(),{filter:n,cursor:r,selection:i}=fb.useSearch(),s=fb.useNavigate(),{tva:o}=gr({from:"__root__"}),a=o().slots;return f.jsx("div",{className:a.base(),children:f.jsx(d$,{table:{data:t,filter:{value:n,set:Lr(s)},selection:{type:"multi",value:i,set:Es(s)}},fulltext:{value:n?.fulltext,set:Mr(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of items"}),...Dr(s)}})})}}),Mle=En({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2","bg-sky-100","border-sky-300","text-sky-500"]},variant:{missing:{true:[]}},match:[{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{missing:!1}}),M$=({dependencies:t,variant:e,tva:n=Mle,css:r,...i})=>{const s=n({...e,css:r}).slots;return f.jsx(fu,{items:t,render:({entity:o})=>f.jsx("div",{className:s.item(),children:f.jsx("div",{children:o.name})}),...i})};var qy={},g3;function $le(){if(g3)return qy;g3=1;function t(r,i,s,o){var a=new Set;return function(u){if(!a.has(u)){var d=new Set,p=[],h=[];for(h.push({node:u,processed:!1});h.length>0;){var y=h[h.length-1],x=y.processed,_=y.node;if(x)h.pop(),p.pop(),d.delete(_),a.add(_),(!i||r.get(_).length===0)&&s.push(_);else{if(a.has(_)){h.pop();continue}else if(d.has(_)){if(o){h.pop();continue}throw p.push(_),new n(p)}d.add(_),p.push(_);for(var S=r.get(_),I=S.length-1;I>=0;I--)h.push({node:S[I],processed:!1});y.processed=!0}}}}}var e=qy.DepGraph=function(i){this.nodes=new Map,this.outgoingEdges=new Map,this.incomingEdges=new Map,this.circular=i&&!!i.circular};e.prototype={size:function(){return this.nodes.size},addNode:function(r,i){this.hasNode(r)||(arguments.length===2?this.nodes.set(r,i):this.nodes.set(r,r),this.outgoingEdges.set(r,[]),this.incomingEdges.set(r,[]))},removeNode:function(r){this.hasNode(r)&&(this.nodes.delete(r),this.outgoingEdges.delete(r),this.incomingEdges.delete(r),[this.incomingEdges,this.outgoingEdges].forEach(function(i){i.forEach(function(s){var o=s.indexOf(r);o>=0&&s.splice(o,1)})}))},hasNode:function(r){return this.nodes.has(r)},getNodeData:function(r){if(this.hasNode(r))return this.nodes.get(r);throw new Error("Node does not exist: "+r)},setNodeData:function(r,i){if(this.hasNode(r))this.nodes.set(r,i);else throw new Error("Node does not exist: "+r)},addDependency:function(r,i){if(!this.hasNode(r))throw new Error("Node does not exist: "+r);if(!this.hasNode(i))throw new Error("Node does not exist: "+i);return this.outgoingEdges.get(r).indexOf(i)===-1&&this.outgoingEdges.get(r).push(i),this.incomingEdges.get(i).indexOf(r)===-1&&this.incomingEdges.get(i).push(r),!0},removeDependency:function(r,i){var s;this.hasNode(r)&&(s=this.outgoingEdges.get(r).indexOf(i),s>=0&&this.outgoingEdges.get(r).splice(s,1)),this.hasNode(i)&&(s=this.incomingEdges.get(i).indexOf(r),s>=0&&this.incomingEdges.get(i).splice(s,1))},clone:function(){var r=this,i=new e;return r.nodes.forEach(function(s,o){i.nodes.set(o,s),i.outgoingEdges.set(o,r.outgoingEdges.get(o).slice(0)),i.incomingEdges.set(o,r.incomingEdges.get(o).slice(0))}),i.circular=r.circular,i},directDependenciesOf:function(r){if(this.hasNode(r))return this.outgoingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},directDependantsOf:function(r){if(this.hasNode(r))return this.incomingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},dependenciesOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.outgoingEdges,i,s,this.circular);o(r);var a=s.indexOf(r);return a>=0&&s.splice(a,1),s}else throw new Error("Node does not exist: "+r)},dependantsOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.incomingEdges,i,s,this.circular);o(r);var a=s.indexOf(r);return a>=0&&s.splice(a,1),s}else throw new Error("Node does not exist: "+r)},overallOrder:function(r){var i=this,s=[],o=Array.from(this.nodes.keys());if(o.length===0)return s;if(!this.circular){var a=t(this.outgoingEdges,!1,[],this.circular);o.forEach(function(d){a(d)})}var u=t(this.outgoingEdges,r,s,this.circular);return o.filter(function(d){return i.incomingEdges.get(d).length===0}).forEach(function(d){u(d)}),this.circular&&o.filter(function(d){return s.indexOf(d)===-1}).forEach(function(d){u(d)}),s},entryNodes:function(){var r=this;return Array.from(this.nodes.keys()).filter(function(i){return r.incomingEdges.get(i).length===0})}},e.prototype.directDependentsOf=e.prototype.directDependantsOf,e.prototype.dependentsOf=e.prototype.dependantsOf;var n=qy.DepGraphCycleError=function(r){var i="Dependency Cycle Found: "+r.join(" -> "),s=new Error(i);return s.cyclePath=r,Object.setPrototypeOf(s,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(s,n),s};return n.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(n,Error),qy}var $$=$le();const Vm=async({tx:t})=>{const e=new $$.DepGraph({circular:!1});for await(const{id:n,name:r}of await t.selectFrom("Blueprint").select(["id","name"]).execute())e.addNode(n,r);for await(const{blueprintId:n,dependencyId:r}of await t.selectFrom("Blueprint_Dependency").select(["blueprintId","dependencyId"]).execute())e.addDependency(n,r);return e},dm=async({tx:t})=>{const e=Vm({tx:t}),n=await t.selectFrom("Blueprint as bl").select(["bl.id"]).execute();for await(const r of n){const i=(await e).dependenciesOf(r.id);await t.updateTable("Blueprint").set({sort:i.length}).where("id","=",r.id).execute()}},B$=async({tx:t,blueprintId:e})=>{await t.deleteFrom("Blueprint_Inventory").where("blueprintId","=",e).execute();const n=await t.selectFrom("Blueprint_Requirement").select(["resourceId","amount"]).where("blueprintId","=",e).execute();for await(const{resourceId:i,amount:s}of n)await t.insertInto("Blueprint_Inventory").values({id:Sn(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:Sn(),resourceId:i,amount:0,limit:s,type:"construction"}).returning("id").executeTakeFirstOrThrow()).id}).execute();const r=await t.selectFrom(t.selectFrom("Blueprint_Production").select(["resourceId","amount"]).where("blueprintId","=",e).union(t.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).union(t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).as("resources")).select(["resourceId",i=>i.fn.max("amount").as("amount")]).groupBy("resourceId").orderBy("amount","desc").execute();for await(const{resourceId:i,amount:s}of r)await t.insertInto("Blueprint_Inventory").values({id:Sn(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:Sn(),resourceId:i,amount:0,limit:s*5,type:"storage"}).returning("id").executeTakeFirstOrThrow()).id}).execute()},Ble=En({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]},variant:{passive:{true:[]},missing:{true:[]}},match:[{if:{passive:!0},then:{item:["bg-purple-100","border-purple-300","text-purple-500"]}},{if:{passive:!1},then:{item:["bg-sky-100","border-sky-300","text-sky-500"]}},{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{passive:!1,missing:!1}}),Px=({requirements:t,diff:e,variant:n,tva:r=Ble,css:i,...s})=>{const o=r({...n,css:i}).slots;return f.jsx(fu,{items:t,render:({entity:a})=>{const u=e?.find(p=>p.resourceId===a.resourceId),d=u?.amount?u.amount-a.amount:-a.amount;return f.jsxs("div",{className:o.item({css:!e||d>=0?[]:["text-red-700","bg-red-100","border-red-300"],passive:a.passive}),children:[f.jsx("div",{children:a.name}),f.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",pn({number:a.amount})]}),e?d>=0?f.jsx(on,{icon:"icon-[pajamas--check-sm]",css:{base:["text-emerald-600"]}}):f.jsxs("div",{className:"flex flex-row gao-2 items-center text-sm text-red-500",children:[f.jsx(on,{icon:"icon-[charm--cross]",css:{base:["text-red-500"]}}),"(",pn({number:d}),")"]}):null]})},...s})},Bp=Wr(),zle=[Bp({name:"name",header(){return f.jsx(Y,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(qt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:n},search:{zoomTo:t.id}}),f.jsx(qt,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),Bp({name:"dependencies",header(){return f.jsx(Y,{label:"Blueprint dependencies (label)"})},render({value:t}){return t.length>0?f.jsxs("div",{className:"flex flex-col flex-wrap gap-2 w-full",children:[f.jsx(M$,{textTitle:f.jsx(Y,{label:"Blueprint dependencies (title)"}),dependencies:t}),f.jsx("div",{className:"border-b border-slate-200"})]}):f.jsx(Y,{label:"No dependencies (label)"})},size:32}),Bp({name:"requirements",header(){return f.jsx(Y,{label:"Required resources (label)"})},render({value:t}){return f.jsx(Px,{textTitle:f.jsx(Y,{label:"Blueprint requirements (title)"}),textEmpty:f.jsx(Y,{label:"No requirements (label)"}),requirements:t})},size:32}),Bp({name:"cycles",header(){return f.jsx(Y,{label:"Construction cycles (label)"})},render({value:t}){return f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx(on,{icon:um}),pn({number:t})]})},size:8}),Bp({name:"limit",header(){return f.jsx(Y,{label:"Building limit (label)"})},render({value:t}){return pn({number:t})},size:8})],z$=({dependencies:t,table:e,...n})=>{const r=Fn([["Blueprint_Inventory"],["Blueprint"],["Inventory"]]),i=Xt({async mutationFn(){return Ct.transaction().execute(async s=>{const o=await s.selectFrom("Blueprint").select(["id"]).execute();for await(const{id:a}of o)await B$({tx:s,blueprintId:a})})},async onSuccess(){await r()},onError(s){console.error(s)}});return f.jsx(Br,{table:zr({...e,columns:zle,context:{dependencies:t}}),action:{table(){return f.jsxs(ur,{children:[f.jsx(RN,{icon:Za,onClick:()=>{An.promise(i.mutateAsync(),ii("Fill inventories"))},children:f.jsx(Y,{label:"Fill inventories (label)"})}),f.jsx(jn,{label:f.jsx(Y,{label:"Create blueprint (menu)"}),textTitle:f.jsx(Y,{label:"Create blueprint (modal)"}),icon:Mn,children:({close:s})=>f.jsx(Ov,{mutation:Xt({async mutationFn({regionIds:o,...a}){Ct.transaction().execute(async u=>{const d=await u.insertInto("Blueprint").values({id:Sn(),...a}).returningAll().executeTakeFirstOrThrow();return o?.length&&await u.insertInto("Blueprint_Region").values(o.map(p=>({id:Sn(),blueprintId:d.id,regionId:p}))).execute(),await dm({tx:u}),d})},async onSuccess(){await r(),s()}})})})]})},row({data:s}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit blueprint (modal)"}),icon:Mn,children:({close:o})=>f.jsx(Ov,{defaultValues:{...s,regionIds:s.regions.map(a=>a.id)},mutation:Xt({async mutationFn({regionIds:a,...u}){return An.promise(Ct.transaction().execute(async d=>{const p=await d.updateTable("Blueprint").set(u).where("id","=",s.id).returningAll().executeTakeFirstOrThrow();return await d.deleteFrom("Blueprint_Region").where("blueprintId","=",p.id).execute(),a?.length&&await d.insertInto("Blueprint_Region").values(a.map(h=>({id:Sn(),blueprintId:p.id,regionId:h}))).execute(),await dm({tx:d}),p}),ii("Update blueprint"))},async onSuccess(){await r(),o()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete blueprint (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>Ct.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",s.id).execute()),textContent:f.jsx(Y,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:r})})]})}},...n})},yu=kY({shape:M.object({dependencyId:M.string().min(1)}),filter:zi.merge(M.object({blueprintId:M.string().optional(),dependencyId:M.string().optional()}))}),Df=qY({shape:M.object({resourceId:M.string().min(1),amount:Ho(),passive:M.boolean()}),filter:zi.merge(M.object({blueprintId:M.string().optional(),resourceId:M.string().optional()}))}),pb=$t("/$locale/apps/derivean/root/blueprint/list")({validateSearch:yr($r(C1)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles","bl.limit",o=>o.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(a=>lc.jsonGroupArray({id:a.ref("r.id"),name:a.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","bl.id").as("regions"),o=>o.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(a=>_r`json_group_array(json_object(
                                                'id', ${a.ref("br.id")},
                                                'amount', ${a.ref("br.amount")},
                                                'passive', ${a.ref("br.passive")},
                                                'resourceId', ${a.ref("br.resourceId")},
                                                'blueprintId', ${a.ref("br.blueprintId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),o=>o.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(a=>_r`json_group_array(json_object(
                                                        'id', ${a.ref("bd.id")},
                                                        'dependencyId', ${a.ref("bd.dependencyId")},
                                                        'blueprintId', ${a.ref("bd.blueprintId")},
                                                        'name', ${a.ref("bl2.name")}
                                                    ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;if(a?.id&&(u=u.where("bl.id","=",a.id)),a?.fulltext){const d=`%${a.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bl.id","like",d),p("bl.name","like",d)]))}return u},output:M.object({id:M.string().min(1),name:M.string().min(1),cycles:M.number().nonnegative(),sort:M.number().nonnegative(),limit:M.number().nonnegative(),regions:wi(M.object({id:M.string().min(1),name:M.string().min(1)})),requirements:wi(Df.entity.merge(M.object({name:M.string().min(1)}))),dependencies:wi(yu.entity.merge(M.object({name:M.string().min(1)})))}),filter:n,cursor:r}))}}),dependencies:await e.transaction().execute(async s=>Vm({tx:s}))}},component(){const{data:{data:t,count:e},dependencies:n}=pb.useLoaderData(),{filter:r,cursor:i,selection:s}=pb.useSearch(),o=pb.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(z$,{dependencies:n,table:{data:t,filter:{value:r,set:Lr(o)},selection:{type:"multi",value:s,set:Es(o)}},fulltext:{value:r?.fulltext,set:Mr(o)},cursor:{count:e,cursor:i,textTotal:f.jsx(Y,{label:"Number of blueprints"}),...Dr(o)}})})}}),Wle=({entity:t,...e})=>{const{locale:n}=nn({from:"/$locale"});return f.jsxs(Cc,{...e,children:[f.jsx(ir,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"View detail (menu)"})}),f.jsx(ir,{icon:bo,to:"/$locale/apps/derivean/root/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Blueprint dependencies (menu)"})}),f.jsx(ir,{icon:Er,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Required resources (menu)"})}),f.jsx(ir,{icon:Ws,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Resource production (menu)"})}),f.jsx(ir,{icon:Za,to:"/$locale/apps/derivean/root/blueprint/$id/inventory",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Blueprint inventory (menu)"})}),f.jsx(ir,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Blueprint conflicts (menu)"})}),f.jsx(ir,{icon:C2,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Edit (menu)"})})]})},Ule=t=>{const{locale:e}=nn({from:"/$locale"});return f.jsx(Tf,{title:({entity:n})=>f.jsx(jf,{icon:Mn,title:n.name}),actions:({entity:n})=>f.jsxs(f.Fragment,{children:[f.jsx(qt,{icon:mx,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},children:f.jsx(Y,{label:"Blueprint list (label)"})}),f.jsx(qt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},search:{zoomTo:n.id},children:f.jsx(Y,{label:"Editor (label)"})})]}),...t})},W$=$t("/$locale/apps/derivean/root/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>xa({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",s=>s.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(o=>lc.jsonGroupArray({id:o.ref("r.id"),name:o.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","bl.id").as("regions"),s=>s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(o=>lc.jsonGroupArray({id:o.ref("br.id"),amount:o.ref("br.amount"),passive:o.ref("br.passive"),resourceId:o.ref("br.resourceId"),blueprintId:o.ref("br.blueprintId"),name:o.ref("r.name")}).as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),s=>s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(o=>lc.jsonGroupArray({id:o.ref("bd.id"),dependencyId:o.ref("bd.dependencyId"),blueprintId:o.ref("bd.blueprintId"),name:o.ref("bl2.name")}).as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("bl.id","like",u),d("bl.name","like",u),d("bl.id","in",d.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),d("bl.id","in",d.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return a},output:M.object({id:M.string().min(1),name:M.string().min(1),cycles:M.number().nonnegative(),sort:M.number().nonnegative(),regions:wi(M.object({id:M.string().min(1),name:M.string().min(1)})),requirements:wi(Df.entity.merge(M.object({name:M.string().min(1)}))),dependencies:wi(yu.entity.merge(M.object({name:M.string().min(1)})))})}))}}),graph:await e.transaction().execute(async i=>Vm({tx:i}))}},component(){const{tva:t}=gr({from:"__root__"}),{entity:e}=W$.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(Ule,{entity:e}),f.jsx(Wle,{entity:e}),f.jsx(xo,{})]})}}),Vle=$t("/$locale/apps/derivean/map/$mapId/view")({}),y3=Wr(),Hle=[y3({name:"name",header(){return f.jsx(Y,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(qt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/game",params:{locale:n},search:{blueprintId:t.id}}),f.jsx(qt,{icon:Mn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),y3({name:"cycles",header(){return f.jsx(Y,{label:"Construction cycles (label)"})},render({value:t}){return f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx(on,{icon:um}),pn({number:t})]})},size:8})],Gle=({table:t,...e})=>f.jsx(Br,{table:zr({...t,columns:Hle}),...e}),hb=$t("/$locale/apps/derivean/game/blueprint/list")({validateSearch:yr($r(C1)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{filter:r,cursor:i}}){const s=await n();return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:r,cursor:i}],async queryFn(){return e.transaction().execute(async a=>cr({select:a.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","in",a.selectFrom("Building as bg").select("bg.blueprintId").where("bg.userId","=",s.id)).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:u,where:d}){let p=u;if(d?.id&&(p=p.where("bl.id","=",d.id)),d?.fulltext){const h=`%${d.fulltext}%`.toLowerCase();p=p.where(y=>y.or([y("bl.id","like",h),y("bl.name","like",h)]))}return p},output:M.object({id:M.string().min(1),name:M.string().min(1),cycles:M.number().nonnegative()}),filter:r,cursor:i}))}})}},component(){const{data:{data:t,count:e}}=hb.useLoaderData(),{filter:n,cursor:r}=hb.useSearch(),i=hb.useNavigate(),{tva:s}=gr({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Gle,{table:{data:t,filter:{value:n,set:Lr(i)}},fulltext:{value:n?.fulltext,set:Mr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of blueprints"}),...Dr(i)}})})}}),Kle=({entity:t,...e})=>{const{locale:n}=nn({from:"/$locale"});return f.jsxs(Cc,{...e,children:[f.jsx(ir,{icon:Mn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"View detail (menu)"})}),f.jsx(ir,{icon:bo,to:"/$locale/apps/derivean/game/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Blueprint dependencies (menu)"})}),f.jsx(ir,{icon:Er,to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Required resources (menu)"})}),f.jsx(ir,{icon:Ws,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Resource production (menu)"})}),f.jsx(ir,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Blueprint conflicts (menu)"})})]})},Qle=t=>{const{locale:e}=nn({from:"/$locale"});return f.jsx(Tf,{title:({entity:n})=>f.jsx(jf,{icon:Mn,title:n.name}),actions:()=>f.jsx(f.Fragment,{children:f.jsx(qt,{icon:mx,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:e},children:f.jsx(Y,{label:"Blueprint list (label)"})})}),...t})},U$=$t("/$locale/apps/derivean/game/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>xa({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("bl.id","like",u),d("bl.name","like",u),d("bl.id","in",d.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),d("bl.id","in",d.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return a},output:M.object({id:M.string().min(1),name:M.string().min(1),cycles:M.number().nonnegative()})}))}}),graph:await e.transaction().execute(async i=>Vm({tx:i}))}},component(){const{tva:t}=gr({from:"__root__"}),{entity:e}=U$.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(Qle,{entity:e}),f.jsx(Kle,{entity:e}),f.jsx(xo,{})]})}}),Jle=$t("/$locale/apps/derivean/root/user/$id/view")({component(){return"yep"}}),Zle=$t("/$locale/apps/derivean/root/resource/$id/view")({component(){return f.jsx("div",{children:'Hello "/$locale/apps/derivean/root/resource/$id/view/"!'})}}),Yle=$t("/$locale/apps/derivean/root/region/$id/view")({component(){return"view"}}),P1="icon-[carbon--document-requirements]",Xle=({entity:t,...e})=>{const{locale:n}=nn({from:"/$locale"});return f.jsxs(Cc,{...e,children:[f.jsx(ir,{icon:P1,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Production requirements (menu)"})}),f.jsx(ir,{icon:Er,to:"/$locale/apps/derivean/root/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Production resource requirements (menu)"})}),f.jsx(ir,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Production resource dependencies (menu)"})})]})},eue=t=>{const{locale:e}=nn({from:"/$locale"});return f.jsx(Tf,{title:({entity:n})=>f.jsx(jf,{icon:Ws,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>f.jsx(f.Fragment,{children:f.jsx(qt,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:f.jsx(Y,{label:"Building base detail (label)"})})}),...t})},V$=$t("/$locale/apps/derivean/root/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await xa({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:M.object({id:M.string().min(1),resource:M.string().min(1),blueprint:M.string().min(1),blueprintId:M.string().min(1),amount:M.number().nonnegative(),cycles:M.number().int().nonnegative()})})}))}})},component(){const{entity:t}=V$.useLoaderData(),{tva:e}=gr({from:"__root__"}),n=e().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(eue,{entity:t}),f.jsx(Xle,{entity:t}),f.jsx(xo,{})]})}}),tue=({graph:t,blueprintId:e,mode:n="dependencies",reverse:r=!1})=>{try{const i=(s=>r?s.reverse():s)(n==="dependants"?t.dependantsOf(e):t.dependenciesOf(e));return f.jsxs("div",{className:cn(["flex","flex-row","flex-wrap","gap-2","items-center"]),children:[i.length>0?f.jsx(on,{css:{base:["text-emerald-500"]},icon:"icon-[charm--circle-tick]"}):f.jsx(on,{css:{base:["text-amber-500"]},icon:"icon-[fe--question]"}),i.length>0?i.map(s=>f.jsx(_s,{css:{base:["bg-emerald-200","text-emerald-700","border-emerald-500"]},children:t.getNodeData(s)},Sn())):f.jsx(Y,{css:{base:["text-amber-500","font-bold"]},label:"No dependents (label)"})]})}catch(i){return i instanceof $$.DepGraphCycleError?f.jsxs("div",{className:cn(["flex","flex-row","gap-2","items-center"]),children:[f.jsx(on,{css:{base:["text-red-500"]},icon:"icon-[charm--circle-cross]"}),i.cyclePath.map(s=>f.jsx(_s,{css:{base:["bg-red-200","text-red-700","border-red-500"]},children:t.getNodeData(s)},Sn()))]}):"kaboom"}},nue=({dependencies:t,...e})=>f.jsx(_2,{items:[{id:"name",label:f.jsx(Y,{label:"Building name (label)"}),render({entity:n}){return n.name}},{id:"cycles",label:f.jsx(Y,{label:"Construction cycles (label)"}),render({entity:n}){return pn({number:n.cycles})}},{id:"regions",label:f.jsx(Y,{label:"Regions (label)"}),render({entity:n}){return f.jsx(fu,{items:n.regions,css:{base:["flex","flex-row","gap-2"]},textEmpty:f.jsx(Y,{label:"No regions (label)"}),render:({entity:r})=>f.jsx("div",{className:cn(["p-2","border","border-blue-300","bg-blue-50","rounded-sm"]),children:r.name})})}},{id:"requirements",label:f.jsx(Y,{label:"Required resources (label)"}),render({entity:n}){return f.jsx(Px,{requirements:n.requirements,textEmpty:f.jsx(Y,{label:"No requirements (label)"})})}},{id:"dependencies",label:f.jsx(Y,{label:"Blueprint dependencies (label)"}),render({entity:n}){return f.jsx(M$,{dependencies:n.dependencies,textEmpty:f.jsx(Y,{label:"No dependencies (label)"})})}},{id:"deps",label:f.jsx(Y,{label:"Blueprint dependency graph (label)"}),render({entity:n}){return f.jsx(tue,{graph:t,blueprintId:n.id})}}],...e}),H$=$t("/$locale/apps/derivean/root/blueprint/$id/view")({async loader({context:{kysely:t}}){return{dependencies:await t.transaction().execute(async e=>Vm({tx:e}))}},component(){const{dependencies:t}=H$.useLoaderData(),{entity:e}=Di({from:"/$locale/apps/derivean/root/blueprint/$id"});return f.jsx("div",{className:"w-1/2 mx-auto",children:f.jsx(nue,{dependencies:t,entity:e})})}}),Hm=({group:t,...e})=>f.jsx(K2,{icon:Er,textTitle:f.jsx(Y,{label:"Select resource (title)"}),textSelect:f.jsx(Y,{label:"Select resource (label)"}),table:n=>f.jsx(D$,{group:t,...n}),render:({entity:n})=>n.name,queryKey:"Resource",query:async({filter:n,cursor:r})=>Ct.transaction().execute(async i=>cr({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>_r`json_group_array(json_object(
                                                'id', ${o.ref("t.id")},
                                                'code', ${o.ref("t.code")},
                                                'group', ${o.ref("t.group")},
                                                'sort', ${o.ref("t.sort")},
                                                'label', ${o.ref("t.label")}
                                            ))`.as("tags")).where("t.id","in",i.selectFrom("Resource_Tag as rt").select("rt.tagId").where("rt.resourceId","=",s.ref("r.id"))).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let a=s;if(o?.id&&(a=a.where("r.id","=",o.id)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("r.id","like",u),d("r.name","like",u),d("r.id","in",d.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return a},output:M.object({id:M.string().min(1),name:M.string().min(1),transport:Ho(),tags:wi(Um.entity),countRequirement:M.number().nonnegative(),countProduction:M.number().nonnegative(),countProductionRequirement:M.number().nonnegative()}),filter:n,cursor:r})),...e}),b3=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(Df.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"resourceId",label:f.jsx(Y,{label:"Requirement (label)"}),children:f.jsx(Mi,{control:s.control,name:"resourceId",render:({field:{ref:a,...u}})=>f.jsx(Hm,{allowEmpty:!0,...u})})}),f.jsx(mn,{formState:s.formState,name:"amount",label:f.jsx(Y,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(mn,{formState:s.formState,name:"passive",label:f.jsx(Y,{label:"Passive requirement (label)"}),hint:f.jsx(Y,{label:"Passive requirement (hint)"}),children:f.jsx(Mi,{control:s.control,name:"passive",render:({field:{ref:a,...u}})=>f.jsx(w2,{...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:Er,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},mE=Wr(),rue=[mE({name:"name",header(){return f.jsx(Y,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),mE({name:"amount",header(){return f.jsx(Y,{label:"Amount (label)"})},render({value:t}){return pn({number:t})},size:10}),mE({name:"passive",header(){return f.jsx(Y,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx(hx,{value:t})},size:10})],iue=({blueprintId:t,table:e,...n})=>{const r=Fn([["Blueprint"],["Blueprint_Requirement"],["Blueprint_Resource_Requirement"],["Resource"]]);return f.jsx(Br,{table:zr({...e,columns:rue}),action:{table(){return f.jsx(ur,{children:f.jsx(jn,{label:f.jsx(Y,{label:"Create requirement item (menu)"}),textTitle:f.jsx(Y,{label:"Create requirement item (modal)"}),icon:Er,children:f.jsx(b3,{mutation:Xt({async mutationFn(i){return Ct.transaction().execute(async s=>s.insertInto("Blueprint_Requirement").values({id:Sn(),...i,blueprintId:t}).execute())},async onSuccess(){await r()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit requirement item (modal)"}),icon:Er,children:f.jsx(b3,{defaultValues:i,mutation:Xt({async mutationFn(s){return Ct.transaction().execute(async o=>o.updateTable("Blueprint_Requirement").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete requirement item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>Ct.transaction().execute(async s=>s.deleteFrom("Blueprint_Requirement").where("id","=",i.id).execute()),textContent:f.jsx(Y,{label:"Delete requirement item (content)"}),textToast:"Delete requirement item",invalidator:r})})]})}},...n})},Xp=$t("/$locale/apps/derivean/root/blueprint/$id/requirements")({validateSearch:yr($r(Df)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("br.id","=",a.id)),a?.idIn&&(u=u.where("br.id","in",a.idIn)),a?.resourceId&&(u=u.where("br.resourceId","=",a.resourceId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),passive:Fi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Xp.useLoaderData(),{filter:n,cursor:r,selection:i}=Xp.useSearch(),{id:s}=Xp.useParams(),o=Xp.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(iue,{blueprintId:s,table:{data:t,filter:{value:n,set:Lr(o)},selection:{type:"multi",value:i,set:Es(o)}},fulltext:{value:n?.fulltext,set:Mr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of requirements (label)"}),...Dr(o)}})})}}),F1=TY({shape:M.object({resourceId:M.string().min(1),amount:Ho(),cycles:Po()}),filter:zi.merge(M.object({blueprintId:M.string().optional(),resourceId:M.string().optional()}))}),v3=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(F1.shape),defaultValues:{amount:1,cycles:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"resourceId",label:f.jsx(Y,{label:"Resource name (label)"}),children:f.jsx(Mi,{control:s.control,name:"resourceId",render:({field:{ref:a,...u}})=>f.jsx(Hm,{textTitle:f.jsx(Y,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),f.jsx(mn,{formState:s.formState,name:"amount",label:f.jsx(Y,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(mn,{formState:s.formState,name:"cycles",label:f.jsx(Y,{label:"Production cycles (label)"}),hint:f.jsx(Y,{label:"Production cycles (hint)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("cycles")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:Ws,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},Gm=t=>f.jsx(K2,{icon:Mn,textTitle:f.jsx(Y,{label:"Select blueprint (title)"}),table:({table:e,...n})=>f.jsx(z$,{table:{...e,hidden:["requirements","dependencies"]},...n}),render:({entity:e})=>e.name,queryKey:"Blueprint",query:async({filter:e,cursor:n})=>Ct.transaction().execute(async r=>cr({select:r.selectFrom("Blueprint as b").select(["b.id","b.name","b.sort","b.cycles","b.limit",i=>i.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(s=>lc.jsonGroupArray({id:s.ref("r.id"),name:s.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","b.id").as("regions"),i=>i.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(s=>_r`json_group_array(json_object(
                                                    'id', ${s.ref("br.id")},
                                                    'amount', ${s.ref("br.amount")},
                                                    'passive', ${s.ref("br.passive")},
                                                    'resourceId', ${s.ref("br.resourceId")},
                                                    'blueprintId', ${s.ref("br.blueprintId")},
                                                    'name', ${s.ref("r.name")}
                                                ))`.as("requirements")).whereRef("br.blueprintId","=","b.id").as("requirements"),i=>i.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.blueprintId").select(s=>_r`json_group_array(json_object(
                                                    'id', ${s.ref("bd.id")},
                                                    'dependencyId', ${s.ref("bd.dependencyId")},
                                                    'blueprintId', ${s.ref("bd.blueprintId")},
                                                    'name', ${s.ref("b.name")}
                                                ))`.as("requirements")).whereRef("bd.blueprintId","=","b.id").as("dependencies")]).orderBy("b.name","asc"),query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("b.id","=",s.id)),s?.fulltext){const a=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("b.id","like",a),u("b.name","like",a)]))}return o},output:M.object({id:M.string().min(1),name:M.string().min(1),cycles:M.number().nonnegative(),sort:M.number().nonnegative(),limit:M.number().nonnegative(),regions:wi(M.object({id:M.string().min(1),name:M.string().min(1)})),requirements:wi(Df.entity.merge(M.object({name:M.string().min(1)}))),dependencies:wi(yu.entity.merge(M.object({name:M.string().min(1)})))}),filter:e,cursor:n})),...t}),sue=M.object({blueprintId:M.string().min(1)}),oue=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(sue),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"blueprintId",label:f.jsx(Y,{label:"Target blueprint (label)"}),children:f.jsx(Mi,{control:s.control,name:"blueprintId",render:({field:{ref:a,...u}})=>f.jsx(Gm,{allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:Mn,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},yd=Wr(),aue=[yd({name:"name",header(){return f.jsx(Y,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsx(qt,{icon:Ws,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),yd({name:"amount",header(){return f.jsx(Y,{label:"Amount (label)"})},render({value:t}){return pn({number:t})},size:8}),yd({name:"cycles",header(){return f.jsx(Y,{label:"Production cycles (label)"})},render({value:t}){return pn({number:t})},size:8}),yd({name:"requirements",header(){return f.jsx(Y,{label:"Required resources (label)"})},render({value:t}){return f.jsx(Px,{textTitle:f.jsx(Y,{label:"Resource requirements (title)"}),textEmpty:f.jsx(Y,{label:"No requirements (label)"}),requirements:t})},size:32}),yd({name:"resources",header(){return f.jsx(Y,{label:"Required production resources (label)"})},render({value:t}){return f.jsx(fu,{items:t,render:({entity:e})=>f.jsxs("div",{className:cn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[f.jsx("div",{children:e.name}),f.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",pn({number:e.amount})]})]})})},size:32}),yd({name:"dependencies",header(){return f.jsx(Y,{label:"Required production dependencies (label)"})},render({value:t}){return f.jsx(fu,{items:t,render:({entity:e})=>f.jsx("div",{className:cn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:f.jsx("div",{children:e.name})})})},size:32})],lue=({blueprintId:t,table:e,...n})=>{const r=Fn([["Blueprint"],["Blueprint_Production"],["Blueprint_Production_Requirement"],["Resource"]]);return f.jsx(Br,{table:zr({...e,columns:aue}),action:{table(){return f.jsx(ur,{children:f.jsx(jn,{label:f.jsx(Y,{label:"Create blueprint production (menu)"}),textTitle:f.jsx(Y,{label:"Create blueprint production (modal)"}),icon:Ws,children:({close:i})=>f.jsx(v3,{mutation:Xt({async mutationFn(s){return Ct.transaction().execute(async o=>await o.insertInto("Blueprint_Production").values({id:Sn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit blueprint production (modal)"}),icon:Ws,children:f.jsx(v3,{defaultValues:i,mutation:Xt({async mutationFn(s){return Ct.transaction().execute(async o=>o.updateTable("Blueprint_Production").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),f.jsx(jn,{label:f.jsx(Y,{label:"Move production to (menu)"}),textTitle:f.jsx(Y,{label:"Move production to (modal)"}),icon:Er,children:({close:s})=>f.jsx(oue,{mutation:Xt({async mutationFn(o){return Ct.transaction().execute(async a=>{await a.updateTable("Blueprint_Production").set({blueprintId:o.blueprintId}).where("id","=",i.id).execute()})},async onSuccess(){await r(),s()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete blueprint production (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>Ct.transaction().execute(async s=>s.deleteFrom("Blueprint_Production").where("id","=",i.id).execute()),textContent:f.jsx(Y,{label:"Delete blueprint production (content)"}),textToast:"Delete blueprint production",invalidator:r})})]})}},...n})},Km=RY({shape:M.object({blueprintId:M.string().min(1)}),filter:zi}),Qm=jY({shape:M.object({resourceId:M.string().min(1),amount:Ho(),passive:M.boolean()}),filter:zi.merge(M.object({blueprintProductionId:M.string().optional(),resourceId:M.string().optional()}))}),Jm=OY({shape:M.object({resourceId:M.string().min(1),amount:Ho()}),filter:zi.merge(M.object({resourceId:M.string().optional()}))}),eh=$t("/$locale/apps/derivean/root/blueprint/$id/production")({validateSearch:yr($r(F1)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>_r`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'passive', ${a.ref("bpr.passive")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>_r`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(a=>_r`json_group_array(json_object(
                                                'id', ${a.ref("bpd.id")},
                                                'blueprintProductionId', ${a.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${a.ref("bpd.blueprintId")},
                                                'name', ${a.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),cycles:M.number().nonnegative(),requirements:wi(Qm.entity.merge(M.object({name:M.string().min(1)}))),resources:wi(Jm.entity.merge(M.object({name:M.string().min(1)}))),dependencies:wi(Km.entity.merge(M.object({name:M.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=eh.useLoaderData(),{filter:n,cursor:r,selection:i}=eh.useSearch(),{id:s}=eh.useParams(),o=eh.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(lue,{blueprintId:s,table:{data:t,filter:{value:n,set:Lr(o)},selection:{type:"multi",value:i,set:Es(o)}},fulltext:{value:n?.fulltext,set:Mr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of productions (label)"}),...Dr(o)}})})}}),uue=({label:t,...e})=>f.jsx(Y,{label:`Inventory type - ${t}`,...e}),cue=PY({shape:M.object({resourceId:M.string().min(1),amount:Ho(),limit:Ho(),type:M.enum(["storage","construction"])}),filter:zi.merge(M.object({resourceId:M.string().optional(),type:M.enum(["storage","construction"]).optional()}))}),x3=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(cue.shape),defaultValues:{amount:0,limit:0,type:"storage",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"resourceId",label:f.jsx(Y,{label:"Resource name (label)"}),children:f.jsx(Mi,{control:s.control,name:"resourceId",render:({field:{ref:a,...u}})=>f.jsx(Hm,{textTitle:f.jsx(Y,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),f.jsx(mn,{formState:s.formState,name:"type",label:f.jsx(Y,{label:"Inventory type (label)"}),children:f.jsx(Mi,{control:s.control,name:"type",render:({field:{ref:a,...u}})=>f.jsx(KN,{items:[{id:"storage",value:pa.text("Inventory type - storage")},{id:"construction",value:pa.text("Inventory type - construction")}],render:({entity:d})=>d.value,...u})})}),f.jsx(mn,{formState:s.formState,name:"amount",label:f.jsx(Y,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(mn,{formState:s.formState,name:"limit",label:f.jsx(Y,{label:"Inventory limit (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("limit")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:Za,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},Ay=Wr(),due=[Ay({name:"name",header(){return f.jsx(Y,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),Ay({name:"type",header(){return f.jsx(Y,{label:"Inventory type (label)"})},render({value:t}){return f.jsx(uue,{label:t})},filter:{path:"type",onFilter({data:t,filter:e}){e.shallow("type",t.type)}},size:12}),Ay({name:"amount",header(){return f.jsx(Y,{label:"Amount (label)"})},render({value:t}){return pn({number:t})},size:12}),Ay({name:"limit",header(){return f.jsx(Y,{label:"Inventory limit (label)"})},render({value:t,data:e}){return f.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[f.jsx("div",{children:pn({number:t})}),f.jsx(Rf,{value:100*e.amount/e.limit})]})},size:14})],fue=({blueprintId:t,table:e,...n})=>{const r=Fn([["Blueprint_Inventory"]]),i=Xt({async mutationFn(){return Ct.transaction().execute(async s=>B$({tx:s,blueprintId:t}))},async onSuccess(){await r()},onError(s){console.error(s)}});return f.jsx(Br,{table:zr({...e,columns:due}),action:{table(){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Create inventory item (menu)"}),textTitle:f.jsx(Y,{label:"Create inventory item (modal)"}),icon:Za,children:f.jsx(x3,{mutation:Xt({async mutationFn(s){return An.promise(Ct.transaction().execute(async o=>o.insertInto("Blueprint_Inventory").values({id:Sn(),blueprintId:t,inventoryId:(await o.insertInto("Inventory").values({id:Sn(),...s}).returningAll().executeTakeFirstOrThrow()).id}).returningAll().executeTakeFirstOrThrow()),ii("Create inventory item"))},async onSuccess(){await r()}})})}),f.jsx(RN,{icon:Za,onClick:()=>{i.mutate()},children:f.jsx(Y,{label:"Fill inventory (label)"})})]})},row({data:s}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit inventory item (modal)"}),icon:Za,children:f.jsx(x3,{defaultValues:s,mutation:Xt({async mutationFn(o){return An.promise(Ct.transaction().execute(async a=>a.updateTable("Inventory").set(o).where("id","=",s.inventoryId).returningAll().executeTakeFirstOrThrow()),ii("Update inventory item"))},async onSuccess(){await r()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>Ct.transaction().execute(async o=>o.deleteFrom("Inventory").where("id","=",s.inventoryId).execute()),textContent:f.jsx(Y,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:r})})]})}},...n})},pue=CY({shape:M.object({blueprintId:M.string().min(1),inventoryId:M.string().min(1)}),filter:zi.merge(M.object({blueprintId:M.string().optional(),inventoryId:M.string().optional()}))}),th=$t("/$locale/apps/derivean/root/blueprint/$id/inventory")({validateSearch:yr($r(pue)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Inventory","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>cr({select:s.selectFrom("Blueprint_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").innerJoin("Resource as r","r.id","i.resourceId").select(["bi.id","r.name","i.amount","i.limit","i.type","i.resourceId","bi.blueprintId","bi.inventoryId"]).where("bi.blueprintId","=",i).orderBy("i.type","asc").orderBy("r.name","asc"),query({select:o,where:a}){let u=o;if(a?.id&&(u=u.where("bi.id","=",a.id)),a?.idIn&&(u=u.where("bi.id","in",a.idIn)),a?.fulltext){const d=`%${a.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bi.id","like",`%${d}%`),p("r.id","like",`%${d}%`),p("r.name","like",`%${d}%`),p("r.id","in",p.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(h=>h.or([h("t.code","like",d),h("t.label","like",d),h("t.group","like",d)])))]))}return u},output:M.object({id:M.string().min(1),name:M.string().min(1),type:M.enum(["storage","construction"]),resourceId:M.string().min(1),blueprintId:M.string().min(1),inventoryId:M.string().min(1),amount:M.number().nonnegative(),limit:M.number().int().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=th.useLoaderData(),{filter:n,cursor:r,selection:i}=th.useSearch(),{id:s}=th.useParams(),o=th.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(fue,{blueprintId:s,table:{data:t,filter:{value:n,set:Lr(o)},selection:{type:"multi",value:i,set:Es(o)}},fulltext:{value:n?.fulltext,set:Mr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of items"}),...Dr(o)}})})}}),G$=$t("/$locale/apps/derivean/root/blueprint/$id/edit")({component:()=>{const{entity:t}=Di({from:"/$locale/apps/derivean/root/blueprint/$id"}),e=G$.useNavigate(),n=Fn([["Blueprint"]]);return f.jsx("div",{className:"w-1/2 mx-auto",children:f.jsx(Ov,{defaultValues:t,mutation:Xt({async mutationFn(r){return An.promise(Ct.transaction().execute(async i=>i.updateTable("Blueprint").set(r).where("id","=",t.id).returningAll().executeTakeFirstOrThrow()),ii("Update blueprint"))},async onSuccess(){await n(),e({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{id:t.id}})}})})})}}),w3=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(yu.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"dependencyId",label:f.jsx(Y,{label:"Blueprint dependency (label)"}),children:f.jsx(Mi,{control:s.control,name:"dependencyId",render:({field:{ref:a,...u}})=>f.jsx(Gm,{textTitle:f.jsx(Y,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:Mn,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},hue=Wr(),mue=[hue({name:"name",header(){return f.jsx(Y,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsx(qt,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],gue=({blueprintId:t,table:e,...n})=>{const r=Fn([["Blueprint_Dependency"],["Blueprint"]]);return f.jsx(Br,{table:zr({...e,columns:mue}),action:{table(){return f.jsx(ur,{children:f.jsx(jn,{label:f.jsx(Y,{label:"Create blueprint dependency (menu)"}),textTitle:f.jsx(Y,{label:"Create blueprint dependency (modal)"}),icon:Mn,children:({close:i})=>f.jsx(w3,{mutation:Xt({async mutationFn(s){return An.promise(Ct.transaction().execute(async o=>{const a=o.insertInto("Blueprint_Dependency").values({id:Sn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await dm({tx:o}),a}),ii("Create blueprint dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit blueprint dependency (modal)"}),icon:Mn,children:({close:s})=>f.jsx(w3,{defaultValues:i,mutation:Xt({async mutationFn(o){return An.promise(Ct.transaction().execute(async a=>a.updateTable("Blueprint_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),ii("Update blueprint dependency"))},async onSuccess(){await r(),s()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete blueprint dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>Ct.transaction().execute(async s=>s.deleteFrom("Blueprint_Dependency").where("id","=",i.id).execute()),textContent:f.jsx(Y,{label:"Delete blueprint dependency (content)"}),textToast:"Delete blueprint dependency",invalidator:r})})]})}},...n})},nh=$t("/$locale/apps/derivean/root/blueprint/$id/dependencies")({validateSearch:yr($r(yu)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bd.id","=",a.id)),a?.idIn&&(u=u.where("bd.id","in",a.idIn)),a?.blueprintId&&(u=u.where("bd.blueprintId","=",a.blueprintId)),a?.dependencyId&&(u=u.where("bd.dependencyId","=",a.dependencyId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1),dependencyId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=nh.useLoaderData(),{filter:n,cursor:r,selection:i}=nh.useSearch(),{id:s}=nh.useParams(),o=nh.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(gue,{blueprintId:s,table:{data:t,filter:{value:n,set:Lr(o)},selection:{type:"multi",value:i,set:Es(o)}},fulltext:{value:n?.fulltext,set:Mr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of requirements (label)"}),...Dr(o)}})})}}),yue=NY({shape:M.object({conflictId:M.string().min(1)}),filter:zi}),_3=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(yue.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"conflictId",label:f.jsx(Y,{label:"Blueprint conflict (label)"}),hint:f.jsx(Y,{label:"Blueprint conflict (hint)"}),children:f.jsx(Mi,{control:s.control,name:"conflictId",render:({field:{ref:a,...u}})=>f.jsx(Gm,{textTitle:f.jsx(Y,{label:"Select blueprint conflict (title)"}),allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:Mn,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},bue=Wr(),vue=[bue({name:"name",header(){return f.jsx(Y,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsx(qt,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],xue=({blueprintId:t,table:e,...n})=>{const r=Fn([["Blueprint_Conflict"],["Blueprint"]]);return f.jsx(Br,{table:zr({...e,columns:vue}),action:{table(){return f.jsx(ur,{children:f.jsx(jn,{label:f.jsx(Y,{label:"Create blueprint conflict (menu)"}),textTitle:f.jsx(Y,{label:"Create blueprint conflict (modal)"}),icon:Mn,children:({close:i})=>f.jsx(_3,{mutation:Xt({async mutationFn(s){return An.promise(Ct.transaction().execute(async o=>{const a=o.insertInto("Blueprint_Conflict").values({id:Sn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await dm({tx:o}),a}),ii("Create blueprint conflict"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit blueprint conflict (modal)"}),icon:Mn,children:({close:s})=>f.jsx(_3,{defaultValues:i,mutation:Xt({async mutationFn(o){return An.promise(Ct.transaction().execute(async a=>a.updateTable("Blueprint_Conflict").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),ii("Update blueprint conflict"))},async onSuccess(){await r(),s()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete blueprint conflict (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>Ct.transaction().execute(async s=>s.deleteFrom("Blueprint_Conflict").where("id","=",i.id).execute()),textContent:f.jsx(Y,{label:"Delete blueprint conflict (content)"}),textToast:"Delete blueprint conflict",invalidator:r})})]})}},...n})},rh=$t("/$locale/apps/derivean/root/blueprint/$id/conflicts")({validateSearch:yr($r(yu)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bc.id","=",a.id)),a?.idIn&&(u=u.where("bc.id","in",a.idIn)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1),conflictId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=rh.useLoaderData(),{filter:n,cursor:r,selection:i}=rh.useSearch(),{id:s}=rh.useParams(),o=rh.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(xue,{blueprintId:s,table:{data:t,filter:{value:n,set:Lr(o)},selection:{type:"multi",value:i,set:Es(o)}},fulltext:{value:n?.fulltext,set:Mr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of conflicts (label)"}),...Dr(o)}})})}}),wue=$t("/$locale/apps/derivean/map/$mapId/waypoint/$waypointId")({}),_ue=({land:t})=>{const{mapId:e,locale:n}=nn({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx("div",{className:cn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/land/list",params:{locale:n,mapId:e},search:{zoomToId:t.id},children:t.name}),f.jsxs("div",{className:"flex flex-col items-end text-xs",children:[f.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[f.jsx("div",{className:"font-bold",children:pn({number:t.x})}),f.jsx("div",{children:":"}),f.jsx("div",{className:"font-bold",children:pn({number:t.y})})]}),f.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[f.jsx("div",{className:"font-bold",children:pn({number:t.width})}),f.jsx("div",{children:"x"}),f.jsx("div",{className:"font-bold",children:pn({number:t.height})})]})]})]})})},Sue=En({slot:{base:["flex","flex-col","gap-4","w-4/12","border-l-2","border-slate-200","shadow-xs","relative","max-h-screen"],title:["flex","flex-row","justify-between","items-center","px-4","py-4","shadow-md"],content:["flex","flex-col","gap-2","max-h-full","overflow-y-auto","px-4","mb-4"]},variant:{},defaults:{}}),Vs=({icon:t,textTitle:e,textSubTitle:n,variant:r,tva:i=Sue,css:s,children:o})=>{const{mapId:a,locale:u}=nn({from:"/$locale/apps/derivean/map/$mapId"}),d=i({...r,css:s}).slots;return f.jsxs("div",{className:d.base(),children:[f.jsxs("div",{className:d.title(),children:[f.jsxs("div",{className:"flex flex-col gap-2 font-bold",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(on,{icon:t,css:{base:["text-slate-500"]}}),e]}),n?f.jsx("div",{className:"flex flex-row gap-2 items-center text-sm text-slate-500",children:n}):null]}),f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:u,mapId:a},children:f.jsx(vn,{iconEnabled:HN,variant:{variant:"subtle"}})})]}),f.jsx("div",{className:d.content(),children:o})]})},Eue=({land:t,...e})=>f.jsx(Vs,{icon:q1,textTitle:f.jsx(Y,{label:"Land list (label)"}),...e,children:t.map(n=>f.jsx(_ue,{land:n},n.id))}),K$=$t("/$locale/apps/derivean/map/$mapId/land/list")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n}}){return{land:await t.ensureQueryData({queryKey:["GameMap",n,"land","list"],async queryFn(){return e.transaction().execute(async r=>qr({select:r.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId","l.x","l.y","l.width","l.height"]).where("l.mapId","=",n).orderBy("r.name").orderBy("l.width","desc").orderBy("l.height","desc"),output:M.object({id:M.string().min(1),name:M.string().min(1),mapId:M.string().min(1),x:M.number(),y:M.number(),width:M.number(),height:M.number()})}))}})}},component(){const{land:t}=K$.useLoaderData();return f.jsx(Eue,{land:t})}}),Iue=$t("/$locale/apps/derivean/map/$mapId/land/$landId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,landId:r}}){return{land:await t.ensureQueryData({queryKey:["GameMap",n,"land",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>xa({select:i.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId"]).where("l.id","=",r),output:M.object({id:M.string().min(1),name:M.string().min(1),mapId:M.string().min(1)})}))}})}}}),Nue=({building:t})=>{const{mapId:e,locale:n}=nn({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx("div",{className:cn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx(qt,{icon:bo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:n,mapId:e,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),f.jsx(qt,{icon:q1,to:"/$locale/apps/derivean/map/$mapId/building/list",params:{locale:n,mapId:e},search:{zoomToId:t.landId},children:t.land})]})})},kue=({building:t,...e})=>f.jsx(Vs,{icon:bo,textTitle:f.jsx(Y,{label:"Building list (label)"}),...e,children:t.length>0?t.map(n=>f.jsx(Nue,{building:n},n.id)):f.jsx("div",{className:cn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(Y,{label:"No buildings yet. (label)"})})}),Q$=$t("/$locale/apps/derivean/map/$mapId/building/list")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n}}){return{building:await t.ensureQueryData({queryKey:["GameMap",n,"building","list"],async queryFn(){return e.transaction().execute(async r=>qr({select:r.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","b.landId","r.name as land"]).where("l.mapId","=",n).orderBy("bl.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),landId:M.string().min(1),land:M.string().min(1)})}))}})}},component(){const{building:t}=Q$.useLoaderData();return f.jsx(kue,{building:t})}}),Cue=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{building:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>xa({select:i.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","r.name as land","b.constructionId","b.productionId","b.recurringProductionId"]).where("b.id","=",r),output:M.object({id:M.string().min(1),name:M.string().min(1),land:M.string().min(1),constructionId:M.string().nullish(),productionId:M.string().nullish(),recurringProductionId:M.string().nullish()})}))}})}}}),Tue=$t("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId")({async loader({context:{queryClient:t,kysely:e},params:{blueprintId:n}}){return{blueprint:await t.ensureQueryData({queryKey:["GameMap","blueprint",n,"fetch"],async queryFn(){return e.transaction().execute(async r=>xa({select:r.selectFrom("Blueprint as b").select(["b.id","b.name"]).where("b.id","=",n),output:M.object({id:M.string().min(1),name:M.string().min(1)})}))}})}}}),Rue=({entity:t,...e})=>{const{locale:n}=nn({from:"/$locale"});return f.jsxs(Cc,{...e,children:[f.jsx(ir,{icon:P1,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Production requirements (menu)"})}),f.jsx(ir,{icon:Er,to:"/$locale/apps/derivean/game/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Production resource requirements (menu)"})}),f.jsx(ir,{icon:Mn,to:"/$locale/apps/derivean/game/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(Y,{label:"Production resource dependencies (menu)"})})]})},jue=t=>{const{locale:e}=nn({from:"/$locale"});return f.jsx(Tf,{title:({entity:n})=>f.jsx(jf,{icon:Ws,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>f.jsx(f.Fragment,{children:f.jsx(qt,{icon:Mn,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:f.jsx(Y,{label:"Building base detail (label)"})})}),...t})},J$=$t("/$locale/apps/derivean/game/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await xa({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:M.object({id:M.string().min(1),resource:M.string().min(1),blueprint:M.string().min(1),blueprintId:M.string().min(1),amount:M.number().nonnegative(),cycles:M.number().int().nonnegative()})})}))}})},component(){const{entity:t}=J$.useLoaderData(),{tva:e}=gr({from:"__root__"}),n=e().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(jue,{entity:t}),f.jsx(Rue,{entity:t}),f.jsx(xo,{})]})}}),Oue=t=>f.jsx(_2,{items:[{id:"name",label:f.jsx(Y,{label:"Building name (label)"}),render({entity:e}){return e.name}},{id:"cycles",label:f.jsx(Y,{label:"Construction cycles (label)"}),render({entity:e}){return pn({number:e.cycles})}}],...t}),que=$t("/$locale/apps/derivean/game/blueprint/$id/view")({component(){const{entity:t}=Di({from:"/$locale/apps/derivean/game/blueprint/$id"});return f.jsx("div",{className:"w-1/2 mx-auto",children:f.jsx(Oue,{entity:t})})}}),gE=Wr(),Aue=[gE({name:"name",header(){return f.jsx(Y,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),gE({name:"amount",header(){return f.jsx(Y,{label:"Amount (label)"})},render({value:t}){return pn({number:t})},size:10}),gE({name:"passive",header(){return f.jsx(Y,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx(hx,{value:t})},size:10})],Pue=({table:t,...e})=>f.jsx(Br,{table:zr({...t,columns:Aue}),...e}),mb=$t("/$locale/apps/derivean/game/blueprint/$id/requirements")({validateSearch:yr($r(Df)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("br.id","=",a.id)),a?.idIn&&(u=u.where("br.id","in",a.idIn)),a?.resourceId&&(u=u.where("br.resourceId","=",a.resourceId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),passive:Fi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=mb.useLoaderData(),{filter:n,cursor:r}=mb.useSearch(),i=mb.useNavigate(),{tva:s}=gr({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Pue,{table:{data:t,filter:{value:n,set:Lr(i)}},fulltext:{value:n?.fulltext,set:Mr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of requirements (label)"}),...Dr(i)}})})}}),bd=Wr(),Fue=[bd({name:"name",header(){return f.jsx(Y,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsx(qt,{icon:Ws,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),bd({name:"amount",header(){return f.jsx(Y,{label:"Amount (label)"})},render({value:t}){return pn({number:t})},size:8}),bd({name:"cycles",header(){return f.jsx(Y,{label:"Production cycles (label)"})},render({value:t}){return pn({number:t})},size:8}),bd({name:"requirements",header(){return f.jsx(Y,{label:"Required resources (label)"})},render({value:t}){return f.jsx(Px,{textTitle:f.jsx(Y,{label:"Resource requirements (title)"}),textEmpty:f.jsx(Y,{label:"No requirements (label)"}),requirements:t})},size:32}),bd({name:"resources",header(){return f.jsx(Y,{label:"Required production resources (label)"})},render({value:t}){return f.jsx(fu,{items:t,render:({entity:e})=>f.jsxs("div",{className:cn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[f.jsx("div",{children:e.name}),f.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",pn({number:e.amount})]})]})})},size:32}),bd({name:"dependencies",header(){return f.jsx(Y,{label:"Required production dependencies (label)"})},render({value:t}){const{locale:e}=nn({from:"/$locale"});return f.jsx(fu,{items:t,render:({entity:n})=>f.jsx("div",{className:cn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:f.jsx(qt,{to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:e,id:n.blueprintId},children:n.name})})})},size:32})],Due=({table:t,...e})=>f.jsx(Br,{table:zr({...t,columns:Fue}),...e}),gb=$t("/$locale/apps/derivean/game/blueprint/$id/production")({validateSearch:yr($r(F1)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>_r`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'passive', ${a.ref("bpr.passive")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>_r`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(a=>_r`json_group_array(json_object(
                                                'id', ${a.ref("bpd.id")},
                                                'blueprintProductionId', ${a.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${a.ref("bpd.blueprintId")},
                                                'name', ${a.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),cycles:M.number().nonnegative(),requirements:wi(Qm.entity.merge(M.object({name:M.string().min(1)}))),resources:wi(Jm.entity.merge(M.object({name:M.string().min(1)}))),dependencies:wi(Km.entity.merge(M.object({name:M.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=gb.useLoaderData(),{filter:n,cursor:r}=gb.useSearch(),i=gb.useNavigate(),{tva:s}=gr({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Due,{table:{data:t,filter:{value:n,set:Lr(i)}},fulltext:{value:n?.fulltext,set:Mr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of productions (label)"}),...Dr(i)}})})}}),Lue=Wr(),Mue=[Lue({name:"name",header(){return f.jsx(Y,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsx(qt,{icon:Mn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],$ue=({table:t,...e})=>f.jsx(Br,{table:zr({...t,columns:Mue}),...e}),yb=$t("/$locale/apps/derivean/game/blueprint/$id/dependencies")({validateSearch:yr($r(yu)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bd.id","=",a.id)),a?.idIn&&(u=u.where("bd.id","in",a.idIn)),a?.blueprintId&&(u=u.where("bd.blueprintId","=",a.blueprintId)),a?.dependencyId&&(u=u.where("bd.dependencyId","=",a.dependencyId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1),dependencyId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=yb.useLoaderData(),{filter:n,cursor:r}=yb.useSearch(),i=yb.useNavigate(),{tva:s}=gr({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx($ue,{table:{data:t,filter:{value:n,set:Lr(i)}},fulltext:{value:n?.fulltext,set:Mr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of dependencies (label)"}),...Dr(i)}})})}}),Bue=Wr(),zue=[Bue({name:"name",header(){return f.jsx(Y,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsx(qt,{icon:Mn,to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],Wue=({table:t,...e})=>f.jsx(Br,{table:zr({...t,columns:zue}),...e}),bb=$t("/$locale/apps/derivean/game/blueprint/$id/conflicts")({validateSearch:yr($r(yu)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bc.id","=",a.id)),a?.idIn&&(u=u.where("bc.id","in",a.idIn)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1),conflictId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=bb.useLoaderData(),{filter:n,cursor:r}=bb.useSearch(),i=bb.useNavigate(),{tva:s}=gr({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Wue,{table:{data:t,filter:{value:n,set:Lr(i)}},fulltext:{value:n?.fulltext,set:Mr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of conflicts (label)"}),...Dr(i)}})})}}),Z$=AY({shape:M.object({blueprintId:M.string().min(1),constructionId:M.string().optional(),productionId:M.string().optional(),recurringProductionId:M.string().optional(),x:Ho(),y:Ho()}),filter:zi.merge(M.object({userId:M.string().optional(),blueprintId:M.string().optional(),name:M.string().optional()}))}),Uue=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(Z$.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"blueprintId",label:f.jsx(Y,{label:"Select blueprint (label)"}),children:f.jsx(Mi,{control:s.control,name:"blueprintId",render:({field:{ref:a,...u}})=>f.jsx(Gm,{allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:bo,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},Vue=Wr(),Hue=[Vue({name:"name",header(){return f.jsx(Y,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsx(qt,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId}}),e]})},size:14})],Gue=({table:t,...e})=>{const n=Fn([["Building"]]);return f.jsx(Br,{table:zr({...t,columns:Hue}),action:{row({data:r}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit building (modal)"}),icon:bo,children:f.jsx(Uue,{defaultValues:r,mutation:Xt({async mutationFn(i){return An.promise(Ct.transaction().execute(s=>s.updateTable("Building").set(i).where("id","=",r.id).returningAll().executeTakeFirstOrThrow()),ii("Edit building"))},async onSuccess(){await n()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete building (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>Ct.transaction().execute(async i=>i.deleteFrom("Building").where("id","=",r.id).execute()),textContent:f.jsx(Y,{label:"Building delete (content)"}),textToast:"Building delete",invalidator:n})})]})}},...e})},vb=$t("/$locale/apps/derivean/root/user/$id/building/list")({validateSearch:yr($r(Z$)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Building","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>cr({select:s.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name","b.blueprintId"]).where("b.userId","=",i),output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=vb.useLoaderData(),{filter:n,cursor:r,selection:i}=vb.useSearch(),s=vb.useNavigate(),{tva:o}=gr({from:"__root__"}),a=o().slots;return f.jsx("div",{className:a.base(),children:f.jsx(Gue,{table:{data:t,filter:{value:n,set:Lr(s)},selection:{type:"multi",value:i,set:Es(s)}},fulltext:{value:n?.fulltext,set:Mr(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of buildings (label)"}),...Dr(s)}})})}}),S3=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(Jm.shape),defaultValues:{amount:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"resourceId",label:f.jsx(Y,{label:"Requirement (label)"}),children:f.jsx(Mi,{control:s.control,name:"resourceId",render:({field:{ref:a,...u}})=>f.jsx(Hm,{allowEmpty:!0,...u})})}),f.jsx(mn,{formState:s.formState,name:"amount",label:f.jsx(Y,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:Er,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},E3=Wr(),Kue=[E3({name:"name",header(){return f.jsx(Y,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),E3({name:"amount",header(){return f.jsx(Y,{label:"Amount (label)"})},render({value:t}){return pn({number:t})},size:10})],Que=({blueprintProductionId:t,table:e,...n})=>{const r=Fn([["Blueprint_Production_Resource"],["Blueprint_Production"],["Resource"]]);return f.jsx(Br,{table:zr({...e,columns:Kue}),action:{table(){return f.jsx(ur,{children:f.jsx(jn,{label:f.jsx(Y,{label:"Create production resource requirement (menu)"}),textTitle:f.jsx(Y,{label:"Create production resource requirement (modal)"}),icon:Er,children:({close:i})=>f.jsx(S3,{mutation:Xt({async mutationFn(s){return Ct.transaction().execute(async o=>o.insertInto("Blueprint_Production_Resource").values({id:Sn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit production resource requirement (modal)"}),icon:Er,children:({close:s})=>f.jsx(S3,{defaultValues:i,mutation:Xt({async mutationFn(o){return Ct.transaction().execute(async a=>a.updateTable("Blueprint_Production_Resource").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete production resource requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>Ct.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Resource").where("id","=",i.id).execute()),textContent:f.jsx(Y,{label:"Delete production resource requirement (content)"}),textToast:"Delete production resource requirement item",invalidator:r})})]})}},...n})},ih=$t("/$locale/apps/derivean/root/blueprint/production/$id/resources")({validateSearch:yr($r(Jm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bpr.id","=",a.id)),a?.idIn&&(u=u.where("bpr.id","in",a.idIn)),a?.resourceId&&(u=u.where("bpr.resourceId","=",a.resourceId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=ih.useLoaderData(),{filter:n,cursor:r,selection:i}=ih.useSearch(),{id:s}=ih.useParams(),o=ih.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(Que,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:Lr(o)},selection:{type:"multi",value:i,set:Es(o)}},fulltext:{value:n?.fulltext,set:Mr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of production resource requirements (label)"}),...Dr(o)}})})}}),I3=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(Qm.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"resourceId",label:f.jsx(Y,{label:"Requirement (label)"}),children:f.jsx(Mi,{control:s.control,name:"resourceId",render:({field:{ref:a,...u}})=>f.jsx(Hm,{allowEmpty:!0,...u})})}),f.jsx(mn,{formState:s.formState,name:"amount",label:f.jsx(Y,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(mn,{formState:s.formState,name:"passive",label:f.jsx(Y,{label:"Passive requirement (label)"}),hint:f.jsx(Y,{label:"Passive requirement (hint)"}),children:f.jsx(Mi,{control:s.control,name:"passive",render:({field:{ref:a,...u}})=>f.jsx(w2,{...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:Er,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},yE=Wr(),Jue=[yE({name:"name",header(){return f.jsx(Y,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),yE({name:"amount",header(){return f.jsx(Y,{label:"Amount (label)"})},render({value:t}){return pn({number:t})},size:10}),yE({name:"passive",header(){return f.jsx(Y,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx(hx,{value:t})},size:10})],Zue=({blueprintProductionId:t,table:e,...n})=>{const r=Fn([["Blueprint_Production_Requirement"],["Blueprint_Production"],["Resource"]]);return f.jsx(Br,{table:zr({...e,columns:Jue}),action:{table(){return f.jsx(ur,{children:f.jsx(jn,{label:f.jsx(Y,{label:"Create production requirement (menu)"}),textTitle:f.jsx(Y,{label:"Create production requirement (modal)"}),icon:Er,children:({close:i})=>f.jsx(I3,{mutation:Xt({async mutationFn(s){return Ct.transaction().execute(async o=>o.insertInto("Blueprint_Production_Requirement").values({id:Sn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit production requirement (modal)"}),icon:Er,children:({close:s})=>f.jsx(I3,{defaultValues:i,mutation:Xt({async mutationFn(o){return Ct.transaction().execute(async a=>a.updateTable("Blueprint_Production_Requirement").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete production requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>Ct.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Requirement").where("id","=",i.id).execute()),textContent:f.jsx(Y,{label:"Delete production requirement (content)"}),textToast:"Delete production requirement item",invalidator:r})})]})}},...n})},sh=$t("/$locale/apps/derivean/root/blueprint/production/$id/requirements")({validateSearch:yr($r(Qm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bpr.id","=",a.id)),a?.idIn&&(u=u.where("bpr.id","in",a.idIn)),a?.resourceId&&(u=u.where("bpr.resourceId","=",a.resourceId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),passive:Fi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=sh.useLoaderData(),{filter:n,cursor:r,selection:i}=sh.useSearch(),{id:s}=sh.useParams(),o=sh.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(Zue,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:Lr(o)},selection:{type:"multi",value:i,set:Es(o)}},fulltext:{value:n?.fulltext,set:Mr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of production requirements (label)"}),...Dr(o)}})})}}),N3=({mutation:t,defaultValues:e,variant:n,tva:r=Si,css:i})=>{const s=Ei({resolver:Ii(Km.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:ns({form:s,mutation:t}),children:[f.jsx(pi,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(mn,{formState:s.formState,name:"blueprintId",label:f.jsx(Y,{label:"Blueprint dependency (label)"}),children:f.jsx(Mi,{control:s.control,name:"blueprintId",render:({field:{ref:a,...u}})=>f.jsx(Gm,{textTitle:f.jsx(Y,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(vn,{iconEnabled:Mn,type:"submit",children:f.jsx(Y,{label:"Save (submit)"})})})]})},Yue=Wr(),Xue=[Yue({name:"name",header(){return f.jsx(Y,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsx(qt,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],ece=({blueprintProductionId:t,table:e,...n})=>{const r=Fn([["Blueprint_Production_Dependency"],["Blueprint"]]);return f.jsx(Br,{table:zr({...e,columns:Xue}),action:{table(){return f.jsx(ur,{children:f.jsx(jn,{label:f.jsx(Y,{label:"Create blueprint production dependency (menu)"}),textTitle:f.jsx(Y,{label:"Create blueprint production dependency (modal)"}),icon:Mn,children:({close:i})=>f.jsx(N3,{mutation:Xt({async mutationFn(s){return An.promise(Ct.transaction().execute(async o=>{const a=o.insertInto("Blueprint_Production_Dependency").values({id:Sn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow();return await dm({tx:o}),a}),ii("Create blueprint production dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(ur,{children:[f.jsx(jn,{label:f.jsx(Y,{label:"Edit (menu)"}),textTitle:f.jsx(Y,{label:"Edit blueprint production dependency (modal)"}),icon:Mn,children:({close:s})=>f.jsx(N3,{defaultValues:i,mutation:Xt({async mutationFn(o){return An.promise(Ct.transaction().execute(async a=>a.updateTable("Blueprint_Production_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),ii("Update blueprint production dependency"))},async onSuccess(){await r(),s()}})})}),f.jsx(jn,{icon:si,label:f.jsx(Y,{label:"Delete (menu)"}),textTitle:f.jsx(Y,{label:"Delete blueprint production dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Is,{callback:async()=>Ct.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Dependency").where("id","=",i.id).execute()),textContent:f.jsx(Y,{label:"Delete blueprint production dependency (content)"}),textToast:"Delete blueprint production dependency",invalidator:r})})]})}},...n})},oh=$t("/$locale/apps/derivean/root/blueprint/production/$id/dependencies")({validateSearch:yr($r(Km)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bpd.id","=",a.id)),a?.idIn&&(u=u.where("bpd.id","in",a.idIn)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=oh.useLoaderData(),{filter:n,cursor:r,selection:i}=oh.useSearch(),{id:s}=oh.useParams(),o=oh.useNavigate(),{tva:a}=gr({from:"__root__"}),u=a().slots;return f.jsx("div",{className:u.base(),children:f.jsx(ece,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:Lr(o)},selection:{type:"multi",value:i,set:Es(o)}},fulltext:{value:n?.fulltext,set:Mr(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of dependencies (label)"}),...Dr(o)}})})}}),tce=({transport:t})=>f.jsx("div",{className:cn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx("div",{className:cn(["flex","flex-row","gap-2","items-center"]),children:f.jsx("div",{className:"font-bold",children:t.name})}),f.jsxs(_s,{children:["x",pn({number:t.amount})]})]})}),nce=({transport:t,...e})=>f.jsx(Vs,{icon:j$,textTitle:f.jsx(Y,{label:"Transport (label)"}),...e,children:t.length>0?t.map(n=>f.jsx(tce,{transport:n},n.id)):f.jsx("div",{className:cn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(Y,{label:"There are no resources transported on this waypoint. (label)"})})}),Y$=$t("/$locale/apps/derivean/map/$mapId/waypoint/$waypointId/transport")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,waypointId:r}}){return{transport:await t.ensureQueryData({queryKey:["GameMap",n,"waypoint",r,"transport"],async queryFn(){return e.transaction().execute(async i=>qr({select:i.selectFrom("Transport as t").innerJoin("Resource as r","r.id","t.resourceId").select(["t.id","t.amount","r.name"]).where("t.waypointId","=",r).orderBy("r.name"),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number()})}))}})}},component(){const{transport:t}=Y$.useLoaderData();return f.jsx(nce,{transport:t})}}),rce=En({slot:{base:["flex","flex-col","gap-2","rounded-md","bg-white","border","border-slate-300","p-2","hover:bg-slate-100","cursor-draggable"]},variant:{isDragging:{true:[]}},match:[{if:{isDragging:!0},then:{base:["cursor-grabbing","bg-slate-100"]}}],defaults:{isDragging:!1}}),ice=async({userId:t,blueprintId:e,landId:n,x:r,y:i,plan:s,valid:o})=>Ct.transaction().execute(async a=>{const u=await a.selectFrom("Blueprint as b").select(["b.cycles"]).where("b.id","=",e).executeTakeFirstOrThrow(),d=await a.insertInto("Building").values({id:Sn(),userId:t,blueprintId:e,landId:n,constructionId:(await a.insertInto("Construction").values({id:Sn(),userId:t,cycle:0,cycles:u.cycles,plan:s}).returning("id").executeTakeFirstOrThrow()).id,x:r,y:i,valid:o}).returningAll().executeTakeFirstOrThrow(),p=await a.selectFrom("Inventory as i").select(["i.amount","i.limit","i.resourceId","i.type"]).where("i.id","in",a.selectFrom("Blueprint_Inventory as bi").select("bi.inventoryId").where("bi.blueprintId","=",e)).execute();for await(const{amount:h,limit:y,resourceId:x,type:_}of p)await a.insertInto("Building_Inventory").values({id:Sn(),buildingId:d.id,inventoryId:(await a.insertInto("Inventory").values({id:Sn(),amount:h,limit:y,resourceId:x,type:_}).returning("id").executeTakeFirstOrThrow()).id}).execute();return d}),D1=({cycles:t})=>f.jsxs("div",{className:cn(["flex","flex-row","items-center","gap-2"]),children:[f.jsx(on,{css:{base:["text-slate-400"]},icon:um}),f.jsx("div",{className:"font-bold text-md",children:pn({number:t})})]}),sce=({blueprint:t,land:e,userId:n,variant:r,tva:i=rce,css:s})=>{const{mapId:o,locale:a}=nn({from:"/$locale/apps/derivean/map/$mapId"}),u=pu(),d=Fn([["GameMap"]]),p=Xt({async mutationFn({blueprintId:y,landId:x}){const _=await ice({userId:n,blueprintId:y,landId:x,x:0,y:0,plan:!0,valid:!1});u({to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:a,mapId:o,landId:e.id},search:{zoomToId:_.id}})},async onSuccess(){await d()},onError(y){console.error(y)}}),h=i({...r,css:s}).slots;return f.jsx("div",{className:h.base(),children:f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between",children:[f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsxs(_s,{children:["x",t.count]}),f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements",params:{locale:a,mapId:o,blueprintId:t.id},css:{base:["font-bold"]},children:t.name})]}),f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsx(D1,{cycles:t.cycles}),f.jsx(vn,{iconEnabled:cm,iconDisabled:cm,loading:p.isPending,onClick:()=>{p.mutate({blueprintId:t.id,landId:e.id})}})]})]})})},oce=({userId:t,land:e,blueprints:n,...r})=>f.jsx(Vs,{icon:cm,textTitle:f.jsx(Y,{label:"Construction (label)"}),textSubTitle:e.name,...r,children:n.length>0?n.map(i=>f.jsx(sce,{blueprint:i,userId:t,land:e},i.id)):f.jsx("div",{className:cn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(Y,{label:"There are no available blueprints (label)"})})}),X$=$t("/$locale/apps/derivean/map/$mapId/land/$landId/construction")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,landId:i}}){const s=await n();return{user:s,blueprints:await t.ensureQueryData({queryKey:["GameMap",r,"land",i,"construction","list"],async queryFn(){return e.transaction().execute(async o=>qr({select:o.selectFrom(o.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",a=>a.selectFrom("Building as bg").select(u=>u.fn.count("bg.id").as("count")).whereRef("bg.blueprintId","=","bl.id").where("bg.userId","=",s.id).where("bg.landId","is",i).as("count"),a=>a.case().when(a.not(a.exists(a.selectFrom("Blueprint_Dependency as bd").select(a.lit(1).as("one")).whereRef("bd.blueprintId","=","bl.id").where(u=>u.not(u.exists(u.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").select(u.lit(1).as("one")).where("b.constructionId","is",null).where("b.userId","=",s.id).where("l.mapId","=",r).whereRef("b.blueprintId","=","bd.dependencyId"))))))).then(a.lit(!0)).else(a.lit(!1)).end().as("withAvailableBuildings")]).where("bl.id","not in",o.selectFrom("Blueprint_Conflict as bc").select("bc.conflictId").where("bc.blueprintId","in",o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").select("bg.blueprintId").where("bg.userId","=",s.id).where("l.mapId","=",r))).where("bl.id","in",o.selectFrom("Blueprint_Region as br").innerJoin("Land as l","l.regionId","br.regionId").select("br.blueprintId").where("l.id","=",i)).as("blueprint")).selectAll().where("withAvailableBuildings","=",!0).orderBy("blueprint.sort","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),count:M.number().int().nonnegative(),cycles:M.number().int().nonnegative(),sort:M.number().int().nonnegative(),withAvailableBuildings:Fi()})}))}})}},component(){const{user:t,blueprints:e}=X$.useLoaderData(),{land:n}=Di({from:"/$locale/apps/derivean/map/$mapId/land/$landId"});return f.jsx(oce,{userId:t.id,land:n,blueprints:e})}}),L1="icon-[hugeicons--package-receive]",WI="icon-[heroicons--queue-list]",zp=["p-4","border","border-slate-300","w-full","justify-start"],ace=({building:t})=>{const{mapId:e,locale:n}=nn({from:"/$locale/apps/derivean/map/$mapId"});return f.jsxs(Vs,{icon:bo,textTitle:t.name,textSubTitle:t.land,children:[f.jsx(qt,{icon:Ws,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:n,mapId:e,buildingId:t.id},css:{base:zp},children:f.jsx(Y,{label:"Building production (label)"})}),f.jsx(qt,{icon:WI,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue",params:{locale:n,mapId:e,buildingId:t.id},css:{base:zp},children:f.jsx(Y,{label:"Production queue (label)"})}),f.jsx(qt,{icon:Za,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:n,mapId:e,buildingId:t.id},css:{base:zp},children:f.jsx(Y,{label:"Building inventory (label)"})}),f.jsx(qt,{icon:Ax,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:{locale:n,mapId:e,buildingId:t.id},css:{base:zp},children:f.jsx(Y,{label:"Supply list (label)"})}),f.jsx(qt,{icon:L1,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/demand",params:{locale:n,mapId:e,buildingId:t.id},css:{base:zp},children:f.jsx(Y,{label:"Demand list (label)"})})]})},eB="icon-[hugeicons--package]",lce=({requirement:t})=>{const e=t.available||0;return f.jsxs("div",{className:cn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",t.supply?["bg-purple-50","border-purple-400","hover:bg-purple-50","hover:border-purple-400"]:["bg-amber-50","border-amber-400","hover:bg-amber-50","hover:border-amber-400"]]),children:[f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsxs("div",{className:cn(["flex","flex-row","gap-2","items-center",t.supply?["text-purple-600"]:["text-slate-900"]]),children:[t.supply?f.jsx(on,{icon:L1}):f.jsx(on,{icon:eB}),f.jsx("div",{className:"font-bold",children:t.name})]}),f.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[f.jsx("div",{children:pn({number:e})}),f.jsx("div",{children:"/"}),f.jsx("div",{className:"font-bold",children:pn({number:t.amount})})]})]}),f.jsx(Rf,{value:100*e/t.amount})]})},tB=({requirement:t,...e})=>f.jsx(Vs,{icon:P1,textTitle:f.jsx(Y,{label:"Construction requirements (label)"}),...e,children:t.length>0?t.map(n=>f.jsx(lce,{requirement:n},n.id)):f.jsx("div",{className:cn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(Y,{label:"There are no construction requirements (label)"})})}),nB=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/view")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"construction","requirement"],async queryFn(){return e.transaction().execute(async i=>qr({select:i.selectFrom("Blueprint_Requirement as br").innerJoin("Building as bg",s=>s.onRef("bg.blueprintId","=","br.blueprintId").on("bg.id","=",r)).innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive",s=>s.selectFrom("Supply as s").select(o=>o.fn.count("s.id").as("supply")).whereRef("s.resourceId","=","br.resourceId").where("s.buildingId","in",s.selectFrom("Building_Route_Building as brb").select("brb.linkId").where("brb.buildingId","=",r)).as("supply"),s=>s.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","br.resourceId").where("i.type","=","construction").limit(1).as("available")]).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number().nonnegative(),available:M.number().nonnegative().nullish(),supply:M.number().nonnegative(),passive:Fi()})}))}})}},component(){const{building:t}=Di({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{requirement:e}=nB.useLoaderData();return t.constructionId?f.jsx(tB,{requirement:e}):f.jsx(ace,{building:t})}}),uce=({supply:t})=>{const e=Fn([["GameMap"]]),n=Xt({async mutationFn({supplyId:r}){return Ct.transaction().execute(async i=>i.deleteFrom("Supply").where("id","=",r).execute())},async onSuccess(){await e()}});return f.jsxs("div",{className:cn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsx("div",{className:"flex flex-row gap-2 items-center",children:t.name}),f.jsx(vn,{iconEnabled:si,loading:n.isPending,onClick:()=>{n.mutate({supplyId:t.id})},variant:{variant:"danger"}})]})},cce=({building:t,supply:e,...n})=>{const{mapId:r,locale:i}=nn({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(Vs,{icon:Ax,textTitle:f.jsx(Y,{label:"Supply of (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(qt,{icon:yo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>f.jsx(uce,{supply:s},s.id)):f.jsx("div",{className:cn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(Y,{label:"This building does not supply anything. (label)"})})})},rB=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/supply")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{supply:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"supply","list"],queryFn:async()=>e.transaction().execute(async i=>qr({select:i.selectFrom("Supply as s").innerJoin("Resource as r","r.id","s.resourceId").select(["s.id","r.name"]).where("s.buildingId","=",r).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1)})}))})}},component(){const{building:t}=Di({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{supply:e}=rB.useLoaderData();return f.jsx(cce,{building:t,supply:e})}}),dce=({inventory:t})=>{const e=Fn([["GameMap"]]),n=Xt({async mutationFn({buildingId:r,resourceId:i,supplyId:s}){return Ct.transaction().execute(async o=>s?o.deleteFrom("Supply").where("id","=",s).execute():o.insertInto("Supply").values({id:Sn(),buildingId:r,resourceId:i}).execute())},async onSuccess(){await e()}});return f.jsxs("div",{className:cn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",t.limit>0&&t.amount>=t.limit?["border-amber-400","bg-amber-50","hover:bg-amber-50","hover:border-amber-600"]:void 0,t.supplyId?["bg-purple-50","border-purple-400","hover:bg-purple-50","hover:border-purple-400"]:void 0]),children:[f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsxs("div",{className:cn(["flex","flex-row","gap-2","items-center",t.supplyId?["text-purple-600"]:void 0]),children:[f.jsx(vn,{iconEnabled:t.supplyId?Ax:eB,loading:n.isPending,onClick:()=>{n.mutate({buildingId:t.buildingId,resourceId:t.resourceId,supplyId:t.supplyId})},variant:{variant:"subtle"}}),f.jsx("div",{className:"font-bold",children:t.name})]}),pn({number:t.amount})," /"," ",pn({number:t.limit})]}),t.limit>0?f.jsx(Rf,{variant:{size:"md"},value:100*t.amount/t.limit,css:{progress:t.amount>=t.limit?["bg-amber-500"]:void 0}}):null]})},fce=({inventory:t,fulltextProps:e,...n})=>f.jsxs(Vs,{icon:Za,textTitle:f.jsx(Y,{label:"Inventory (label)"}),...n,children:[f.jsx(k2,{...e}),f.jsx("div",{children:f.jsx(Y,{label:"Inventory - storage (label)",css:{base:["font-bold","text-slate-500"]}})}),t.length>0?t.map(r=>f.jsx(dce,{inventory:r},r.id)):f.jsx("div",{className:cn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(Y,{label:"No inventory storage. (label)"})})]}),ah=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory")({validateSearch:yr(M.object({fulltext:M.string().optional()})),loaderDeps({search:{fulltext:t}}){return{fulltext:t}},async loader({context:{queryClient:t,kysely:e},deps:{fulltext:n},params:{mapId:r,buildingId:i}}){return{inventory:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"inventory","storage",{fulltext:n}],async queryFn(){return e.transaction().execute(async s=>qr({select:s.selectFrom("Inventory as i").innerJoin("Building_Inventory as bi",o=>o.on("bi.buildingId","=",i).onRef("bi.inventoryId","=","i.id")).innerJoin("Resource as r","r.id","i.resourceId").leftJoin("Supply as s",o=>o.onRef("s.resourceId","=","i.resourceId").on("s.buildingId","=",i)).select(["i.id","i.amount","i.limit","r.name","bi.buildingId","i.resourceId","s.id as supplyId"]).where("i.type","in",["storage"]).orderBy("r.name"),query({select:o,where:a}){let u=o;if(a?.fulltext){const d=`%${a.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("r.name","like",d)]))}return u},output:M.object({id:M.string().min(1),buildingId:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),limit:M.number().nonnegative(),name:M.string().min(1),supplyId:M.string().nullish()}),filter:{fulltext:n}}))}})}},component(){const{building:t}=Di({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{fulltext:e}=ah.useSearch(),{mapId:n,locale:r}=ah.useParams(),i=ah.useNavigate(),{inventory:s}=ah.useLoaderData();return f.jsx(fce,{inventory:s,textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(qt,{icon:yo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:t.id}}),f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:r,mapId:n,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),fulltextProps:{value:e,onFulltext(o){i({search:{fulltext:o}})}}})}}),pce=({demand:t})=>{const e=Fn([["GameMap"]]),n=Xt({async mutationFn({demandId:r}){return Ct.transaction().execute(async i=>i.deleteFrom("Demand").where("id","=",r).execute())},async onSuccess(){await e()}});return f.jsxs("div",{className:cn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx("div",{children:t.name}),f.jsxs(_s,{children:["x",t.amount]})]}),f.jsx(vn,{iconEnabled:si,loading:n.isPending,onClick:()=>{n.mutate({demandId:t.id})},variant:{variant:"danger"}})]})},hce=({building:t,demand:e,...n})=>{const{mapId:r,locale:i}=nn({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(Vs,{icon:L1,textTitle:f.jsx(Y,{label:"Demand (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(qt,{icon:yo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/demand",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>f.jsx(pce,{demand:s},s.id)):f.jsx("div",{className:cn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(Y,{label:"This building does not demand anything. (label)"})})})},iB=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/demand")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{demand:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"demand","list"],queryFn:async()=>e.transaction().execute(async i=>qr({select:i.selectFrom("Demand as d").innerJoin("Resource as r","r.id","d.resourceId").select(["d.id","r.name","d.amount"]).where("d.buildingId","=",r).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number()})}))})}},component(){const{building:t}=Di({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{demand:e}=iB.useLoaderData();return f.jsx(hce,{building:t,demand:e})}}),sB=({requirement:t})=>{const e=(t.available||0)>=t.amount;return f.jsxs("div",{className:cn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.passive?["border-purple-300","hover:border-purple-500","hover:bg-purple-100"]:void 0,t.available===void 0||e?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),children:[f.jsx("div",{className:"font-bold",children:t.name}),t.available===void 0?f.jsxs(_s,{children:["x",pn({number:t.amount})]}):f.jsxs(_s,{css:{base:e?["bg-green-200","border-green-500"]:["bg-red-200","border-red-500"]},children:[f.jsx("div",{className:"font-bold",children:pn({number:t.available})}),f.jsx("div",{children:"/"}),f.jsx("div",{className:"font-light",children:pn({number:t.amount})})]})]})},mce=({blueprint:t,requirement:e,...n})=>f.jsx(Vs,{icon:Er,textTitle:f.jsx(Y,{label:"Building requirements (label)"}),textSubTitle:t.name,...n,children:e.length>0?e.map(r=>f.jsx(sB,{requirement:r},r.id)):f.jsx("div",{className:cn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(Y,{label:"There are no requirements. (label)"})})}),oB=$t("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{blueprintId:n}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","blueprint",n,"requirements"],async queryFn(){return e.transaction().execute(async r=>qr({select:r.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive"]).where("br.blueprintId","=",n),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number().nonnegative(),passive:Fi()})}))}})}},component(){const{blueprint:t}=Di({from:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId"}),{requirement:e}=oB.useLoaderData();return f.jsx(mce,{blueprint:t,requirement:e})}}),k3=Wr(),gce=[k3({name:"name",header(){return f.jsx(Y,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),k3({name:"amount",header(){return f.jsx(Y,{label:"Amount (label)"})},render({value:t}){return pn({number:t})},size:10})],yce=({table:t,...e})=>f.jsx(Br,{table:zr({...t,columns:gce}),...e}),xb=$t("/$locale/apps/derivean/game/blueprint/production/$id/resources")({validateSearch:yr($r(Jm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bpr.id","=",a.id)),a?.idIn&&(u=u.where("bpr.id","in",a.idIn)),a?.resourceId&&(u=u.where("bpr.resourceId","=",a.resourceId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=xb.useLoaderData(),{filter:n,cursor:r}=xb.useSearch(),i=xb.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(yce,{table:{data:t,filter:{value:n,set:Lr(i)}},fulltext:{value:n?.fulltext,set:Mr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of production resource requirements (label)"}),...Dr(i)}})})}}),bE=Wr(),bce=[bE({name:"name",header(){return f.jsx(Y,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),bE({name:"amount",header(){return f.jsx(Y,{label:"Amount (label)"})},render({value:t}){return pn({number:t})},size:10}),bE({name:"passive",header(){return f.jsx(Y,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx(hx,{value:t})},size:10})],vce=({table:t,...e})=>f.jsx(Br,{table:zr({...t,columns:bce}),...e}),wb=$t("/$locale/apps/derivean/game/blueprint/production/$id/requirements")({validateSearch:yr($r(Qm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bpr.id","=",a.id)),a?.idIn&&(u=u.where("bpr.id","in",a.idIn)),a?.resourceId&&(u=u.where("bpr.resourceId","=",a.resourceId)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),passive:Fi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=wb.useLoaderData(),{filter:n,cursor:r}=wb.useSearch(),i=wb.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(vce,{table:{data:t,filter:{value:n,set:Lr(i)}},fulltext:{value:n?.fulltext,set:Mr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of production requirements (label)"}),...Dr(i)}})})}}),xce=Wr(),wce=[xce({name:"name",header(){return f.jsx(Y,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=nn({from:"/$locale"});return f.jsx(qt,{icon:Mn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],_ce=({table:t,...e})=>f.jsx(Br,{table:zr({...t,columns:wce}),...e}),_b=$t("/$locale/apps/derivean/game/blueprint/production/$id/dependencies")({validateSearch:yr($r(Km)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>cr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let u=o;return a?.id&&(u=u.where("bpd.id","=",a.id)),a?.idIn&&(u=u.where("bpd.id","in",a.idIn)),u},output:M.object({id:M.string().min(1),name:M.string().min(1),blueprintId:M.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=_b.useLoaderData(),{filter:n,cursor:r}=_b.useSearch(),i=_b.useNavigate(),{tva:s}=gr({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(_ce,{table:{data:t,filter:{value:n,set:Lr(i)}},fulltext:{value:n?.fulltext,set:Mr(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(Y,{label:"Number of dependencies (label)"}),...Dr(i)}})})}}),Sce=({queue:t,inventory:e})=>{const n=e.find(i=>i.resourceId===t.resourceId),r=n&&n.amount+t.amount>n.limit;return f.jsxs("div",{className:cn(["flex","flex-col","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300",r?["border-red-400","hover:border-red-600"]:void 0]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[f.jsx("div",{className:"font-bold",children:t.name}),f.jsx("div",{className:"flex flex-row gap-2 items-center",children:f.jsxs(_s,{children:["x",pn({number:t.amount})]})}),f.jsx(D1,{cycles:t.cycles})]}),f.jsx(Rf,{css:{progress:r?["bg-red-500"]:void 0},value:100*t.cycle/t.cycles})]})},Ece=({building:t,queue:e,inventory:n,...r})=>{const{mapId:i,locale:s}=nn({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(Vs,{icon:WI,textTitle:f.jsx(Y,{label:"Production queue (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(qt,{icon:yo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:t.id}}),f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...r,children:e.length>0?e.map(o=>f.jsx(Sce,{queue:o,inventory:n},o.id)):f.jsxs("div",{className:cn(["flex","flex-col","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:[f.jsx(Y,{label:"Production queue is empty. (label)"}),f.jsx(qt,{icon:WI,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id},children:f.jsx(Y,{label:"Plan queue (label)"})})]})})},aB=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{queue:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production","queue"],async queryFn(){return e.transaction().execute(async i=>qr({select:i.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","r.name","bp.resourceId","p.cycle","bp.amount","bp.cycles"]).where("p.buildingId","=",r),output:M.object({id:M.string().min(1),name:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),cycle:M.number().int().nonnegative(),cycles:M.number().int().nonnegative()})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"inventory","list"],async queryFn(){return e.transaction().execute(async i=>qr({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","i.amount","i.limit","r.name"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).orderBy("r.name"),query({select:s,where:o}){let a=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();a=a.where(d=>d.or([d("r.name","like",u)]))}return a},output:M.object({id:M.string().min(1),resourceId:M.string().min(1),amount:M.number().nonnegative(),limit:M.number().nonnegative(),name:M.string().min(1)})}))}})}},component(){const{building:t}=Di({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{queue:e,inventory:n}=aB.useLoaderData();return f.jsx(Ece,{building:t,queue:e,inventory:n})}}),Ice=({building:t,production:e})=>{const{mapId:n,locale:r}=nn({from:"/$locale/apps/derivean/map/$mapId"}),i=Fn([["GameMap"]]),s=Xt({async mutationFn({blueprintProductionId:d,buildingId:p}){return Ct.transaction().execute(async h=>h.updateTable("Building").set({productionId:d}).where("id","=",p).execute())},async onSuccess(){await i()}}),o=Xt({async mutationFn({buildingId:d}){return Ct.transaction().execute(async p=>p.updateTable("Building").set({productionId:null}).where("id","=",d).execute())},async onSuccess(){await i()}}),a=Xt({async mutationFn({blueprintProductionId:d,buildingId:p}){return Ct.transaction().execute(async h=>h.updateTable("Building").set({recurringProductionId:d}).where("id","=",p).execute())},async onSuccess(){await i()}}),u=Xt({async mutationFn({buildingId:d}){return Ct.transaction().execute(async p=>p.updateTable("Building").set({recurringProductionId:null}).where("id","=",d).execute())},async onSuccess(){await i()}});return f.jsxs("div",{className:cn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",e.withAvailableResources?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[t.productionId===e.id?f.jsx(vn,{iconEnabled:BI,loading:o.isPending,onClick:()=>{o.mutate({buildingId:t.id})}}):f.jsx(vn,{iconEnabled:"icon-[solar--play-outline]",loading:s.isPending,onClick:()=>{s.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),t.recurringProductionId===e.id?f.jsx(vn,{iconEnabled:BI,loading:u.isPending,onClick:()=>{u.mutate({buildingId:t.id})}}):f.jsx(vn,{iconEnabled:R$,loading:a.isPending,onClick:()=>{a.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),f.jsxs(qt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements",params:{locale:r,mapId:n,buildingId:t.id,productionId:e.id},children:[e.name,f.jsxs(_s,{children:["x",pn({number:e.amount})]})]})]}),f.jsx(D1,{cycles:e.cycles})]})},Nce=({building:t,production:e,...n})=>{const{mapId:r,locale:i}=nn({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(Vs,{icon:Ws,textTitle:f.jsx(Y,{label:"Building production (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(qt,{icon:yo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>f.jsx(Ice,{building:t,production:s},s.id)):f.jsx("div",{className:cn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(Y,{label:"This building does not produce anything. (label)"})})})},lB=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,buildingId:i}}){const s=await n();return{production:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"production","list"],async queryFn(){return e.transaction().execute(async o=>qr({select:o.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.cycles",a=>a.case().when(a.not(a.exists(a.selectFrom("Blueprint_Production_Requirement as bpr").select(a.lit(1).as("one")).whereRef("bpr.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Inventory as i").select(u.lit(1).as("one")).where("i.id","in",u.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).where("i.type","in",["storage"]).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))).then(a.lit(!0)).else(a.lit(!1)).end().as("withAvailableResources")]).where("bp.blueprintId","=",o.selectFrom("Building as b").select("b.blueprintId").where("b.id","=",i)).where(a=>a.not(a.exists(a.selectFrom("Blueprint_Production_Dependency as bpd").select("bpd.blueprintProductionId").whereRef("bpd.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Building as b").select("b.blueprintId").where("b.userId","=",s.id).where("b.constructionId","is",null).whereRef("b.blueprintId","=","bpd.blueprintId"))))))).where(a=>a.not(a.exists(a.selectFrom("Blueprint_Production_Resource as bpr").select("bpr.blueprintProductionId").whereRef("bpr.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Inventory as i").select("i.resourceId").where("i.id","in",u.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))).orderBy("r.name"),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number().nonnegative(),cycles:M.number().int().nonnegative(),withAvailableResources:Fi()})}))}})}},component(){const{building:t}=Di({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=lB.useLoaderData();return f.jsx(Nce,{building:t,production:e})}}),kce=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r,productionId:i}}){return{production:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production",i,"fetch"],async queryFn(){return e.transaction().execute(async s=>xa({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","bp.amount","r.name"]).where("bp.id","=",i),output:M.object({id:M.string().min(1),amount:M.number().nonnegative(),name:M.string().min(1)})}))}})}}}),uB=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/construction/requirements")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"construction","requirement"],async queryFn(){return e.transaction().execute(async i=>qr({select:i.selectFrom("Blueprint_Requirement as br").innerJoin("Building as bg",s=>s.onRef("bg.blueprintId","=","br.blueprintId").on("bg.id","=",r)).innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive",s=>s.selectFrom("Supply as s").select(o=>o.fn.count("s.id").as("supply")).whereRef("s.resourceId","=","br.resourceId").where("s.buildingId","in",s.selectFrom("Building_Route_Building as brb").select("brb.linkId").where("brb.buildingId","=",r)).as("supply"),s=>s.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","br.resourceId").where("i.type","=","construction").limit(1).as("available")]).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number().nonnegative(),available:M.number().nonnegative().nullish(),supply:M.number().nonnegative(),passive:Fi()})}))}})}},component(){const{requirement:t}=uB.useLoaderData();return f.jsx(tB,{requirement:t})}}),Cce=({building:t,production:e,requirement:n,...r})=>{const{mapId:i,locale:s}=nn({from:"/$locale/apps/derivean/map/$mapId"});return f.jsx(Vs,{icon:Er,textTitle:f.jsx(Y,{label:"Production requirements (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(qt,{icon:yo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id}}),f.jsx(qt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),f.jsx("div",{children:e.name})]}),...r,children:n.length>0?n.map(o=>f.jsx(sB,{requirement:o},o.id)):f.jsx("div",{className:cn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(Y,{label:"There are no requirements. (label)"})})})},cB=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r,productionId:i}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production",i,"requirement","list"],async queryFn(){return e.transaction().execute(async s=>qr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.amount","bpr.passive",o=>o.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",s.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","bpr.resourceId").where("i.type","=","storage").orderBy("i.amount","desc").limit(1).as("available")]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),output:M.object({id:M.string().min(1),name:M.string().min(1),amount:M.number().nonnegative(),available:M.number().nonnegative().nullish(),passive:Fi()})}))}})}},component(){const{building:t}=Di({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=Di({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId"}),{requirement:n}=cB.useLoaderData();return f.jsx(Cce,{building:t,production:e,requirement:n})}}),M1=zZ.update({id:"/$locale",path:"/$locale",getParentRoute:()=>e1}),Tce=VZ.update({id:"/",path:"/",getParentRoute:()=>e1}),Rce=HZ.update({id:"/",path:"/",getParentRoute:()=>M1}),bu=KZ.update({id:"/apps/derivean",path:"/apps/derivean",getParentRoute:()=>M1}),Hs=ZZ.update({id:"/root",path:"/root",getParentRoute:()=>bu}),dB=YZ.update({id:"/map",path:"/map",getParentRoute:()=>bu}),Zm=XZ.update({id:"/game",path:"/game",getParentRoute:()=>bu}),jce=iY.update({id:"/",path:"/",getParentRoute:()=>Hs}),Oce=yL.update({id:"/",path:"/",getParentRoute:()=>Zm}),qce=MI.update({id:"/editor",path:"/editor",getParentRoute:()=>Hs}),Ace=Coe.update({id:"/public/register",path:"/public/register",getParentRoute:()=>bu}),Pce=Toe.update({id:"/public/logout",path:"/public/logout",getParentRoute:()=>bu}),Fce=qoe.update({id:"/public/login",path:"/public/login",getParentRoute:()=>bu}),vu=zI.update({id:"/$mapId",path:"/$mapId",getParentRoute:()=>dB}),Dce=q$.update({id:"/db/schema",path:"/db/schema",getParentRoute:()=>bu}),Lce=ub.update({id:"/user/list",path:"/user/list",getParentRoute:()=>Hs}),$1=A$.update({id:"/user/$id",path:"/user/$id",getParentRoute:()=>Hs}),Mce=cb.update({id:"/tag/list",path:"/tag/list",getParentRoute:()=>Hs}),$ce=db.update({id:"/resource/list",path:"/resource/list",getParentRoute:()=>Hs}),fB=L$.update({id:"/resource/$id",path:"/resource/$id",getParentRoute:()=>Hs}),Bce=fb.update({id:"/region/list",path:"/region/list",getParentRoute:()=>Hs}),zce=pb.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>Hs}),xu=W$.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>Hs}),Wce=Vle.update({id:"/view",path:"/view",getParentRoute:()=>vu}),Uce=hb.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>Zm}),Lf=U$.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>Zm}),Vce=Jle.update({id:"/view",path:"/view",getParentRoute:()=>$1}),Hce=Zle.update({id:"/view",path:"/view",getParentRoute:()=>fB}),Gce=Yle.update({id:"/region/$id/view",path:"/region/$id/view",getParentRoute:()=>Hs}),Fx=V$.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>Hs}),Kce=H$.update({id:"/view",path:"/view",getParentRoute:()=>xu}),Qce=Xp.update({id:"/requirements",path:"/requirements",getParentRoute:()=>xu}),Jce=eh.update({id:"/production",path:"/production",getParentRoute:()=>xu}),Zce=th.update({id:"/inventory",path:"/inventory",getParentRoute:()=>xu}),Yce=G$.update({id:"/edit",path:"/edit",getParentRoute:()=>xu}),Xce=nh.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>xu}),ede=rh.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>xu}),pB=wue.update({id:"/waypoint/$waypointId",path:"/waypoint/$waypointId",getParentRoute:()=>vu}),tde=K$.update({id:"/land/list",path:"/land/list",getParentRoute:()=>vu}),hB=Iue.update({id:"/land/$landId",path:"/land/$landId",getParentRoute:()=>vu}),nde=Q$.update({id:"/building/list",path:"/building/list",getParentRoute:()=>vu}),ll=Cue.update({id:"/building/$buildingId",path:"/building/$buildingId",getParentRoute:()=>vu}),mB=Tue.update({id:"/blueprint/$blueprintId",path:"/blueprint/$blueprintId",getParentRoute:()=>vu}),Dx=J$.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>Zm}),rde=que.update({id:"/view",path:"/view",getParentRoute:()=>Lf}),ide=mb.update({id:"/requirements",path:"/requirements",getParentRoute:()=>Lf}),sde=gb.update({id:"/production",path:"/production",getParentRoute:()=>Lf}),ode=yb.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>Lf}),ade=bb.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>Lf}),lde=vb.update({id:"/building/list",path:"/building/list",getParentRoute:()=>$1}),ude=ih.update({id:"/resources",path:"/resources",getParentRoute:()=>Fx}),cde=sh.update({id:"/requirements",path:"/requirements",getParentRoute:()=>Fx}),dde=oh.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>Fx}),fde=Y$.update({id:"/transport",path:"/transport",getParentRoute:()=>pB}),pde=X$.update({id:"/construction",path:"/construction",getParentRoute:()=>hB}),hde=nB.update({id:"/view",path:"/view",getParentRoute:()=>ll}),mde=rB.update({id:"/supply",path:"/supply",getParentRoute:()=>ll}),gde=ah.update({id:"/inventory",path:"/inventory",getParentRoute:()=>ll}),yde=iB.update({id:"/demand",path:"/demand",getParentRoute:()=>ll}),bde=oB.update({id:"/requirements",path:"/requirements",getParentRoute:()=>mB}),vde=xb.update({id:"/resources",path:"/resources",getParentRoute:()=>Dx}),xde=wb.update({id:"/requirements",path:"/requirements",getParentRoute:()=>Dx}),wde=_b.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>Dx}),_de=aB.update({id:"/production/queue",path:"/production/queue",getParentRoute:()=>ll}),Sde=lB.update({id:"/production/list",path:"/production/list",getParentRoute:()=>ll}),gB=kce.update({id:"/production/$productionId",path:"/production/$productionId",getParentRoute:()=>ll}),Ede=uB.update({id:"/construction/requirements",path:"/construction/requirements",getParentRoute:()=>ll}),Ide=cB.update({id:"/requirements",path:"/requirements",getParentRoute:()=>gB}),Nde={LocaleAppsDeriveanGameBlueprintIdConflictsRoute:ade,LocaleAppsDeriveanGameBlueprintIdDependenciesRoute:ode,LocaleAppsDeriveanGameBlueprintIdProductionRoute:sde,LocaleAppsDeriveanGameBlueprintIdRequirementsRoute:ide,LocaleAppsDeriveanGameBlueprintIdViewRoute:rde},kde=Lf._addFileChildren(Nde),Cde={LocaleAppsDeriveanGameBlueprintProductionIdDependenciesRoute:wde,LocaleAppsDeriveanGameBlueprintProductionIdRequirementsRoute:xde,LocaleAppsDeriveanGameBlueprintProductionIdResourcesRoute:vde},Tde=Dx._addFileChildren(Cde),Rde={LocaleAppsDeriveanGameIndexRoute:Oce,LocaleAppsDeriveanGameBlueprintIdRoute:kde,LocaleAppsDeriveanGameBlueprintListRoute:Uce,LocaleAppsDeriveanGameBlueprintProductionIdRoute:Tde},jde=Zm._addFileChildren(Rde),Ode={LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRequirementsRoute:bde},qde=mB._addFileChildren(Ode),Ade={LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRequirementsRoute:Ide},Pde=gB._addFileChildren(Ade),Fde={LocaleAppsDeriveanMapMapIdBuildingBuildingIdDemandRoute:yde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdInventoryRoute:gde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdSupplyRoute:mde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdViewRoute:hde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdConstructionRequirementsRoute:Ede,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRoute:Pde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionListRoute:Sde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionQueueRoute:_de},Dde=ll._addFileChildren(Fde),Lde={LocaleAppsDeriveanMapMapIdLandLandIdConstructionRoute:pde},Mde=hB._addFileChildren(Lde),$de={LocaleAppsDeriveanMapMapIdWaypointWaypointIdTransportRoute:fde},Bde=pB._addFileChildren($de),zde={LocaleAppsDeriveanMapMapIdViewRoute:Wce,LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRoute:qde,LocaleAppsDeriveanMapMapIdBuildingBuildingIdRoute:Dde,LocaleAppsDeriveanMapMapIdBuildingListRoute:nde,LocaleAppsDeriveanMapMapIdLandLandIdRoute:Mde,LocaleAppsDeriveanMapMapIdLandListRoute:tde,LocaleAppsDeriveanMapMapIdWaypointWaypointIdRoute:Bde},Wde=vu._addFileChildren(zde),Ude={LocaleAppsDeriveanMapMapIdRoute:Wde},Vde=dB._addFileChildren(Ude),Hde={LocaleAppsDeriveanRootBlueprintIdConflictsRoute:ede,LocaleAppsDeriveanRootBlueprintIdDependenciesRoute:Xce,LocaleAppsDeriveanRootBlueprintIdEditRoute:Yce,LocaleAppsDeriveanRootBlueprintIdInventoryRoute:Zce,LocaleAppsDeriveanRootBlueprintIdProductionRoute:Jce,LocaleAppsDeriveanRootBlueprintIdRequirementsRoute:Qce,LocaleAppsDeriveanRootBlueprintIdViewRoute:Kce},Gde=xu._addFileChildren(Hde),Kde={LocaleAppsDeriveanRootResourceIdViewRoute:Hce},Qde=fB._addFileChildren(Kde),Jde={LocaleAppsDeriveanRootUserIdViewRoute:Vce,LocaleAppsDeriveanRootUserIdBuildingListRoute:lde},Zde=$1._addFileChildren(Jde),Yde={LocaleAppsDeriveanRootBlueprintProductionIdDependenciesRoute:dde,LocaleAppsDeriveanRootBlueprintProductionIdRequirementsRoute:cde,LocaleAppsDeriveanRootBlueprintProductionIdResourcesRoute:ude},Xde=Fx._addFileChildren(Yde),efe={LocaleAppsDeriveanRootEditorRoute:qce,LocaleAppsDeriveanRootIndexRoute:jce,LocaleAppsDeriveanRootBlueprintIdRoute:Gde,LocaleAppsDeriveanRootBlueprintListRoute:zce,LocaleAppsDeriveanRootRegionListRoute:Bce,LocaleAppsDeriveanRootResourceIdRoute:Qde,LocaleAppsDeriveanRootResourceListRoute:$ce,LocaleAppsDeriveanRootTagListRoute:Mce,LocaleAppsDeriveanRootUserIdRoute:Zde,LocaleAppsDeriveanRootUserListRoute:Lce,LocaleAppsDeriveanRootBlueprintProductionIdRoute:Xde,LocaleAppsDeriveanRootRegionIdViewRoute:Gce},tfe=Hs._addFileChildren(efe),nfe={LocaleAppsDeriveanGameRoute:jde,LocaleAppsDeriveanMapRoute:Vde,LocaleAppsDeriveanRootRoute:tfe,LocaleAppsDeriveanDbSchemaRoute:Dce,LocaleAppsDeriveanPublicLoginRoute:Fce,LocaleAppsDeriveanPublicLogoutRoute:Pce,LocaleAppsDeriveanPublicRegisterRoute:Ace},rfe=bu._addFileChildren(nfe),ife={LocaleIndexRoute:Rce,LocaleAppsDeriveanRoute:rfe},sfe=M1._addFileChildren(ife),ofe={IndexRoute:Tce,LocaleRoute:sfe},afe=e1._addFileChildren(ofe)._addFileTypes(),yB=new B4({defaultOptions:{queries:{placeholderData:C4}}}),lfe=Lz({routeTree:afe,context:{queryClient:yB,tva:I7,async session(){return Fm.parse(null)},kysely:Ct},defaultPendingComponent:fZ,defaultPreload:"intent",defaultPreloadStaleTime:0,defaultPendingMinMs:200}),C3=document.getElementById("app");U5({limit:{maxRequests:10,perMilliseconds:100}});C3.innerHTML||MZ.createRoot(C3).render(f.jsx(G4,{client:yB,children:f.jsx(cW,{router:lfe})}))})();