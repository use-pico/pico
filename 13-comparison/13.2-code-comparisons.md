# 13.2 Code Comparisons

## Table of Contents
- [13.1 Feature Table](./13.1-feature-table.md)
- [13.2 Code Comparisons](./13.2-code-comparisons.md) *(current)*
- [13.3 Migration Paths](./13.3-migration-paths.md)
- [13.4 vs CVA (Class Variance Authority)](./13.4-vs-cva-class-variance-authority.md)
- [13.5 vs TV (Tailwind Variants)](./13.5-vs-tv-tailwind-variants.md)
- [13.6 vs Stitches](./13.6-vs-stitches.md)
- [13.7 vs Vanilla Extract](./13.7-vs-vanilla-extract.md)

---

This chapter provides **side-by-side code comparisons** showing how the same component would be implemented across different styling solutions. Each example demonstrates the **same functionality** but highlights the **different approaches** and **trade-offs** of each solution.

## **Button Component Comparison** üéØ

Let's start with a **simple button component** that supports different sizes, tones, and states. This is a common use case that demonstrates the core differences between styling approaches.

### **CLS Implementation** ‚ú®

```typescript
import { cls } from "@use-pico/cls";
import { useCls } from "@use-pico/cls/react";
import type { Component } from "@use-pico/cls";

// Define the CLS instance
const ButtonCls = cls({
  slot: ["root", "label"],
  variant: {
    size: ["sm", "md", "lg"],
    tone: ["primary", "secondary", "danger"],
    disabled: [true, false]
  }
}, ({ what, def }) => ({
  token: def.token({
    "color.bg.primary": ["bg-blue-600"],
    "color.bg.secondary": ["bg-gray-600"],
    "color.bg.danger": ["bg-red-600"],
    "color.text.primary": ["text-white"],
    "color.text.secondary": ["text-white"],
    "color.text.danger": ["text-white"],
    "spacing.sm": ["px-3 py-1.5"],
    "spacing.md": ["px-4 py-2"],
    "spacing.lg": ["px-6 py-3"]
  }),
  rules: [
    def.root({
      root: what.css([
        "inline-flex items-center justify-center rounded font-medium transition-colors",
        "focus:outline-none focus:ring-2 focus:ring-offset-2",
        "disabled:opacity-50 disabled:cursor-not-allowed"
      ])
    }),
    def.rule({
      variant: { size: "sm" },
      root: what.css(["text-sm", "spacing.sm"])
    }),
    def.rule({
      variant: { size: "md" },
      root: what.css(["text-base", "spacing.md"])
    }),
    def.rule({
      variant: { size: "lg" },
      root: what.css(["text-lg", "spacing.lg"])
    }),
    def.rule({
      variant: { tone: "primary" },
      root: what.css(["color.bg.primary", "color.text.primary", "focus:ring-blue-500"])
    }),
    def.rule({
      variant: { tone: "secondary" },
      root: what.css(["color.bg.secondary", "color.text.secondary", "focus:ring-gray-500"])
    }),
    def.rule({
      variant: { tone: "danger" },
      root: what.css(["color.bg.danger", "color.text.danger", "focus:ring-red-500"])
    })
  ],
  defaults: def.defaults({
    size: "md",
    tone: "primary",
    disabled: false
  })
}));

// React component
interface ButtonProps extends Component<typeof ButtonCls, React.ButtonHTMLAttributes<HTMLButtonElement>> {
  children: React.ReactNode;
  size?: "sm" | "md" | "lg";
  tone?: "primary" | "secondary" | "danger";
  disabled?: boolean;
}

function Button({
  children,
  size = "md",
  tone = "primary",
  disabled = false,
  tva = ButtonCls,
  cls,
  ...props
}: ButtonProps) {
  const buttonClasses = useCls(tva, cls, ({ what }) => ({
    variant: what.variant({
      size,
      tone,
      disabled
    })
  }));

  return (
    <button
      className={buttonClasses.root()}
      disabled={disabled}
      {...props}
    >
      <span className={buttonClasses.label()}>{children}</span>
    </button>
  );
}
```

### **CVA Implementation** üì¶

```typescript
import { cva, type VariantProps } from "class-variance-authority";
import { cn } from "@/lib/utils";

// Define variants
const buttonVariants = cva(
  "inline-flex items-center justify-center rounded font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",
  {
    variants: {
      size: {
        sm: "px-3 py-1.5 text-sm",
        md: "px-4 py-2 text-base",
        lg: "px-6 py-3 text-lg",
      },
      tone: {
        primary: "bg-blue-600 text-white focus:ring-blue-500",
        secondary: "bg-gray-600 text-white focus:ring-gray-500",
        danger: "bg-red-600 text-white focus:ring-red-500",
      },
    },
    defaultVariants: {
      size: "md",
      tone: "primary",
    },
  }
);

// React component
interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  children: React.ReactNode;
}

function Button({
  children,
  size,
  tone,
  className,
  disabled,
  ...props
}: ButtonProps) {
  return (
    <button
      className={cn(buttonVariants({ size, tone }), className)}
      disabled={disabled}
      {...props}
    >
      {children}
    </button>
  );
}
```

### **TV Implementation** üé®

```typescript
import { tv, type VariantProps } from "tailwind-variants";

// Define variants
const button = tv({
  base: "inline-flex items-center justify-center rounded font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",
  variants: {
    size: {
      sm: "px-3 py-1.5 text-sm",
      md: "px-4 py-2 text-base",
      lg: "px-6 py-3 text-lg",
    },
    tone: {
      primary: "bg-blue-600 text-white focus:ring-blue-500",
      secondary: "bg-gray-600 text-white focus:ring-gray-500",
      danger: "bg-red-600 text-white focus:ring-red-500",
    },
  },
  defaultVariants: {
    size: "md",
    tone: "primary",
  },
});

// React component
interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof button> {
  children: React.ReactNode;
}

function Button({
  children,
  size,
  tone,
  className,
  disabled,
  ...props
}: ButtonProps) {
  return (
    <button
      className={button({ size, tone, className })}
      disabled={disabled}
      {...props}
    >
      {children}
    </button>
  );
}
```

### **Stitches Implementation** üßµ

```typescript
import { styled } from "@stitches/react";

// Define styled component
const StyledButton = styled("button", {
  // Base styles
  display: "inline-flex",
  alignItems: "center",
  justifyContent: "center",
  borderRadius: "0.375rem",
  fontWeight: "500",
  transition: "colors",
  outline: "none",
  cursor: "pointer",
  
  "&:focus": {
    boxShadow: "0 0 0 2px $colors$blue500, 0 0 0 4px $colors$white",
  },
  
  "&:disabled": {
    opacity: 0.5,
    cursor: "not-allowed",
  },

  // Variants
  variants: {
    size: {
      sm: {
        padding: "$2 $3",
        fontSize: "$sm",
      },
      md: {
        padding: "$2 $4",
        fontSize: "$base",
      },
      lg: {
        padding: "$3 $6",
        fontSize: "$lg",
      },
    },
    tone: {
      primary: {
        backgroundColor: "$blue600",
        color: "$white",
        "&:focus": {
          boxShadow: "0 0 0 2px $colors$blue500, 0 0 0 4px $colors$white",
        },
      },
      secondary: {
        backgroundColor: "$gray600",
        color: "$white",
        "&:focus": {
          boxShadow: "0 0 0 2px $colors$gray500, 0 0 0 4px $colors$white",
        },
      },
      danger: {
        backgroundColor: "$red600",
        color: "$white",
        "&:focus": {
          boxShadow: "0 0 0 2px $colors$red500, 0 0 0 4px $colors$white",
        },
      },
    },
  },
  
  defaultVariants: {
    size: "md",
    tone: "primary",
  },
});

// React component
interface ButtonProps extends React.ComponentProps<typeof StyledButton> {
  children: React.ReactNode;
}

function Button({ children, ...props }: ButtonProps) {
  return <StyledButton {...props}>{children}</StyledButton>;
}
```

### **Vanilla Extract Implementation** üç¶

```typescript
import { style, styleVariants } from "@vanilla-extract/css";
import { recipe } from "@vanilla-extract/recipes";

// Define base styles
const base = style({
  display: "inline-flex",
  alignItems: "center",
  justifyContent: "center",
  borderRadius: "0.375rem",
  fontWeight: "500",
  transition: "colors",
  outline: "none",
  cursor: "pointer",
  
  ":focus": {
    boxShadow: "0 0 0 2px #3b82f6, 0 0 0 4px #ffffff",
  },
  
  ":disabled": {
    opacity: 0.5,
    cursor: "not-allowed",
  },
});

// Define size variants
const sizes = styleVariants({
  sm: {
    padding: "0.375rem 0.75rem",
    fontSize: "0.875rem",
  },
  md: {
    padding: "0.5rem 1rem",
    fontSize: "1rem",
  },
  lg: {
    padding: "0.75rem 1.5rem",
    fontSize: "1.125rem",
  },
});

// Define tone variants
const tones = styleVariants({
  primary: {
    backgroundColor: "#2563eb",
    color: "#ffffff",
    ":focus": {
      boxShadow: "0 0 0 2px #3b82f6, 0 0 0 4px #ffffff",
    },
  },
  secondary: {
    backgroundColor: "#4b5563",
    color: "#ffffff",
    ":focus": {
      boxShadow: "0 0 0 2px #6b7280, 0 0 0 4px #ffffff",
    },
  },
  danger: {
    backgroundColor: "#dc2626",
    color: "#ffffff",
    ":focus": {
      boxShadow: "0 0 0 2px #ef4444, 0 0 0 4px #ffffff",
    },
  },
});

// Define recipe
const buttonRecipe = recipe({
  base,
  variants: {
    size: sizes,
    tone: tones,
  },
  defaultVariants: {
    size: "md",
    tone: "primary",
  },
});

// React component
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  children: React.ReactNode;
  size?: keyof typeof sizes;
  tone?: keyof typeof tones;
}

function Button({
  children,
  size = "md",
  tone = "primary",
  className,
  ...props
}: ButtonProps) {
  return (
    <button
      className={buttonRecipe({ size, tone, className })}
      {...props}
    >
      {children}
    </button>
  );
}
```

### **CSS Modules Implementation** üìÑ

```css
/* Button.module.css */
.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.375rem;
  font-weight: 500;
  transition: colors;
  outline: none;
  cursor: pointer;
}

.button:focus {
  box-shadow: 0 0 0 2px #3b82f6, 0 0 0 4px #ffffff;
}

.button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Size variants */
.small {
  padding: 0.375rem 0.75rem;
  font-size: 0.875rem;
}

.medium {
  padding: 0.5rem 1rem;
  font-size: 1rem;
}

.large {
  padding: 0.75rem 1.5rem;
  font-size: 1.125rem;
}

/* Tone variants */
.primary {
  background-color: #2563eb;
  color: #ffffff;
}

.primary:focus {
  box-shadow: 0 0 0 2px #3b82f6, 0 0 0 4px #ffffff;
}

.secondary {
  background-color: #4b5563;
  color: #ffffff;
}

.secondary:focus {
  box-shadow: 0 0 0 2px #6b7280, 0 0 0 4px #ffffff;
}

.danger {
  background-color: #dc2626;
  color: #ffffff;
}

.danger:focus {
  box-shadow: 0 0 0 2px #ef4444, 0 0 0 4px #ffffff;
}
```

```typescript
import styles from "./Button.module.css";
import { cn } from "@/lib/utils";

// React component
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  children: React.ReactNode;
  size?: "sm" | "md" | "lg";
  tone?: "primary" | "secondary" | "danger";
}

function Button({
  children,
  size = "md",
  tone = "primary",
  className,
  disabled,
  ...props
}: ButtonProps) {
  const sizeClass = {
    sm: styles.small,
    md: styles.medium,
    lg: styles.large,
  }[size];

  const toneClass = {
    primary: styles.primary,
    secondary: styles.secondary,
    danger: styles.danger,
  }[tone];

  return (
    <button
      className={cn(styles.button, sizeClass, toneClass, className)}
      disabled={disabled}
      {...props}
    >
      {children}
    </button>
  );
}
```

### **Tailwind CSS Implementation** üé®

```typescript
import { cn } from "@/lib/utils";

// React component
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  children: React.ReactNode;
  size?: "sm" | "md" | "lg";
  tone?: "primary" | "secondary" | "danger";
}

function Button({
  children,
  size = "md",
  tone = "primary",
  className,
  disabled,
  ...props
}: ButtonProps) {
  const sizeClasses = {
    sm: "px-3 py-1.5 text-sm",
    md: "px-4 py-2 text-base",
    lg: "px-6 py-3 text-lg",
  };

  const toneClasses = {
    primary: "bg-blue-600 text-white focus:ring-blue-500",
    secondary: "bg-gray-600 text-white focus:ring-gray-500",
    danger: "bg-red-600 text-white focus:ring-red-500",
  };

  return (
    <button
      className={cn(
        "inline-flex items-center justify-center rounded font-medium transition-colors",
        "focus:outline-none focus:ring-2 focus:ring-offset-2",
        "disabled:opacity-50 disabled:cursor-not-allowed",
        sizeClasses[size],
        toneClasses[tone],
        className
      )}
      disabled={disabled}
      {...props}
    >
      {children}
    </button>
  );
}
```

## **Key Differences Analysis** üîç

### **Type Safety** üõ°Ô∏è

**CLS**: **Full type safety** with contract validation, IntelliSense for all properties, and runtime type checking.

**CVA/TV**: **Partial type safety** with TypeScript support for variants, but no contract system.

**Stitches**: **Full type safety** with CSS-in-JS typing and design token support.

**Vanilla Extract**: **Full type safety** with compile-time CSS generation and type checking.

**CSS Modules/Tailwind**: **No built-in type safety** - relies on manual type definitions.

### **Design Tokens** üé®

**CLS**: **Native design token system** with hierarchical organization and runtime overrides.

**CVA/TV**: **No design token support** - hardcoded values in variants.

**Stitches**: **Native design token system** with CSS custom properties and theme support.

**Vanilla Extract**: **Native design token system** with CSS custom properties and theme support.

**CSS Modules/Tailwind**: **No design token system** - manual organization required.

### **Inheritance & Composition** üèóÔ∏è

**CLS**: **Multi-level inheritance** and **native composition** through `use()` and `merge()`.

**CVA/TV**: **No inheritance system** - each component is independent.

**Stitches**: **Limited inheritance** through theme composition and CSS custom properties.

**Vanilla Extract**: **No inheritance system** - static CSS generation.

**CSS Modules/Tailwind**: **No inheritance system** - manual composition required.

### **Runtime Flexibility** ‚ö°

**CLS**: **Full runtime overrides** for tokens, variants, and slots with type safety.

**CVA/TV**: **No runtime overrides** - static variant definitions only.

**Stitches**: **Limited runtime overrides** through CSS custom properties.

**Vanilla Extract**: **No runtime overrides** - compile-time CSS generation.

**CSS Modules/Tailwind**: **No runtime overrides** - static CSS classes.

### **Bundle Size** üì¶

**CLS**: **Medium** (~15KB) - includes type system and runtime features.

**CVA/TV**: **Small** (~5KB) - minimal runtime overhead.

**Stitches**: **Large** (~50KB) - CSS-in-JS runtime and styling engine.

**Vanilla Extract**: **Small** (~5KB) - compile-time CSS generation.

**CSS Modules/Tailwind**: **Small** (~5KB) - static CSS classes.

### **Developer Experience** üë®‚Äçüíª

**CLS**: **Excellent** - full IntelliSense, type safety, and predictable APIs.

**CVA/TV**: **Good** - TypeScript support and simple API.

**Stitches**: **Good** - CSS-in-JS with design tokens.

**Vanilla Extract**: **Good** - type-safe CSS with build tool integration.

**CSS Modules/Tailwind**: **Good** - familiar CSS with utility classes.

## **Complex Component Example** üöÄ

Let's look at a more complex example - a **card component** with **conditional styling**, **nested elements**, and **theme support**.

### **CLS Implementation** ‚ú®

```typescript
import { cls } from "@use-pico/cls";
import { useCls } from "@use-pico/cls/react";
import type { Component } from "@use-pico/cls";

// Define the CLS instance
const CardCls = cls({
  slot: ["root", "header", "content", "footer"],
  variant: {
    size: ["sm", "md", "lg"],
    tone: ["default", "elevated", "outlined"],
    interactive: [true, false]
  }
}, ({ what, def }) => ({
  token: def.token({
    "color.bg.default": ["bg-white"],
    "color.bg.elevated": ["bg-gray-50"],
    "color.border.default": ["border-gray-200"],
    "color.border.outlined": ["border-gray-300"],
    "color.text.primary": ["text-gray-900"],
    "color.text.secondary": ["text-gray-600"],
    "shadow.elevated": ["shadow-lg"],
    "shadow.outlined": ["shadow-sm"],
    "spacing.sm": ["p-4"],
    "spacing.md": ["p-6"],
    "spacing.lg": ["p-8"]
  }),
  rules: [
    def.root({
      root: what.css([
        "rounded-lg border transition-all duration-200",
        "focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
      ])
    }),
    def.rule({
      variant: { size: "sm" },
      root: what.css(["spacing.sm"]),
      header: what.css(["pb-3"]),
      footer: what.css(["pt-3"])
    }),
    def.rule({
      variant: { size: "md" },
      root: what.css(["spacing.md"]),
      header: what.css(["pb-4"]),
      footer: what.css(["pt-4"])
    }),
    def.rule({
      variant: { size: "lg" },
      root: what.css(["spacing.lg"]),
      header: what.css(["pb-6"]),
      footer: what.css(["pt-6"])
    }),
    def.rule({
      variant: { tone: "default" },
      root: what.css(["color.bg.default", "color.border.default"])
    }),
    def.rule({
      variant: { tone: "elevated" },
      root: what.css(["color.bg.elevated", "shadow.elevated"])
    }),
    def.rule({
      variant: { tone: "outlined" },
      root: what.css(["color.border.outlined", "shadow.outlined"])
    }),
    def.rule({
      variant: { interactive: true },
      root: what.css([
        "cursor-pointer hover:shadow-md active:scale-[0.98]",
        "hover:border-gray-300"
      ])
    }),
    def.root({
      header: what.css(["color.text.primary", "font-semibold"]),
      content: what.css(["color.text.secondary"]),
      footer: what.css(["color.text.secondary", "text-sm"])
    })
  ],
  defaults: def.defaults({
    size: "md",
    tone: "default",
    interactive: false
  })
}));

// React component
interface CardProps extends Component<typeof CardCls, React.HTMLAttributes<HTMLDivElement>> {
  children: React.ReactNode;
  header?: React.ReactNode;
  footer?: React.ReactNode;
  size?: "sm" | "md" | "lg";
  tone?: "default" | "elevated" | "outlined";
  interactive?: boolean;
}

function Card({
  children,
  header,
  footer,
  size = "md",
  tone = "default",
  interactive = false,
  tva = CardCls,
  cls,
  ...props
}: CardProps) {
  const cardClasses = useCls(tva, cls, ({ what }) => ({
    variant: what.variant({
      size,
      tone,
      interactive
    })
  }));

  return (
    <div className={cardClasses.root()} {...props}>
      {header && (
        <div className={cardClasses.header()}>
          {header}
        </div>
      )}
      <div className={cardClasses.content()}>
        {children}
      </div>
      {footer && (
        <div className={cardClasses.footer()}>
          {footer}
        </div>
      )}
    </div>
  );
}
```

### **CVA Implementation** üì¶

```typescript
import { cva, type VariantProps } from "class-variance-authority";
import { cn } from "@/lib/utils";

// Define variants
const cardVariants = cva(
  "rounded-lg border transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",
  {
    variants: {
      size: {
        sm: "p-4",
        md: "p-6",
        lg: "p-8",
      },
      tone: {
        default: "bg-white border-gray-200",
        elevated: "bg-gray-50 shadow-lg",
        outlined: "border-gray-300 shadow-sm",
      },
      interactive: {
        true: "cursor-pointer hover:shadow-md active:scale-[0.98] hover:border-gray-300",
        false: "",
      },
    },
    defaultVariants: {
      size: "md",
      tone: "default",
      interactive: false,
    },
  }
);

// React component
interface CardProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof cardVariants> {
  children: React.ReactNode;
  header?: React.ReactNode;
  footer?: React.ReactNode;
}

function Card({
  children,
  header,
  footer,
  size,
  tone,
  interactive,
  className,
  ...props
}: CardProps) {
  const sizeClasses = {
    sm: "pb-3",
    md: "pb-4",
    lg: "pb-6",
  };

  const footerSizeClasses = {
    sm: "pt-3",
    md: "pt-4",
    lg: "pt-6",
  };

  return (
    <div className={cn(cardVariants({ size, tone, interactive }), className)} {...props}>
      {header && (
        <div className={cn("text-gray-900 font-semibold", sizeClasses[size])}>
          {header}
        </div>
      )}
      <div className="text-gray-600">
        {children}
      </div>
      {footer && (
        <div className={cn("text-gray-600 text-sm", footerSizeClasses[size])}>
          {footer}
        </div>
      )}
    </div>
  );
}
```

## **Summary** üìã

### **CLS Advantages** ‚úÖ

- **Full type safety** with contract validation
- **Design token system** with inheritance and runtime overrides
- **Multi-level inheritance** for scalable design systems
- **Rule-based styling** for complex conditional logic
- **Framework agnostic** with optional React integration
- **Excellent developer experience** with IntelliSense

### **Other Solutions Advantages** ‚úÖ

- **Smaller bundle sizes** (CVA, TV, Vanilla Extract)
- **Familiar patterns** (CSS Modules, Tailwind)
- **CSS-in-JS approach** (Stitches)
- **Build-time optimization** (Vanilla Extract)
- **Quick prototyping** (CVA, TV, Tailwind)

### **When to Choose Each** üéØ

**Choose CLS for:**
- **Type-safe design systems** with complex inheritance
- **Runtime theming** and user customization
- **Multi-framework support** across different environments
- **Complex conditional styling** with rule-based logic
- **Team collaboration** with predictable APIs

**Choose alternatives for:**
- **Simple styling needs** with minimal complexity
- **CSS-in-JS preference** or build-time optimization
- **Quick prototyping** with familiar patterns
- **Specific framework integration** requirements

The choice depends on your **project requirements**, **team expertise**, and **long-term goals**! üöÄ

---

**[‚Üê Previous: Feature Table](./13.1-feature-table.md)** | **[‚Üí Next: Migration Paths](./13.3-migration-paths.md)**
