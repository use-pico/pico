# 2.9 CSS Connection

## Table of Contents
- [2.1 Callbacks Everywhere](./2.1-callbacks-everywhere.md)
- [2.2 Why Contracts First](./2.2-why-contracts-first.md)
- [2.3 Token-Centric Design](./2.3-token-centric-design.md)
- [2.4 Rule-Based System](./2.4-rule-based-system.md)
- [2.5 Required Defaults](./2.5-required-defaults.md)
- [2.6 Type Safety as Foundation](./2.6-type-safety-as-foundation.md)
- [2.7 Performance by Design](./2.7-performance-by-design.md)
- [2.8 Simplicity Beneath Complexity](./2.8-simplicity-beneath-complexity.md)
- [2.9 CSS Connection](./2.9-css-connection.md) *(current)*
- [2.10 Inheritance as Foundation](./2.10-inheritance-as-foundation.md)
- [2.11 Declarative Configuration](./2.11-declarative-configuration.md)

---

CLS doesn't replace CSS - it **enhances** it! CLS is designed to work with any CSS framework or approach you prefer. Let's explore how CLS connects to CSS and why this flexibility is so powerful! ðŸŽ¯

## CSS Framework Agnostic ðŸŽ¨

### Works with Any CSS

CLS is **framework-agnostic** - it works with whatever CSS approach you prefer:

```typescript
// Tailwind CSS
const ButtonCls = cls(contract, ({ what, def }) => ({
  token: def.token({
    "color.bg": {
      primary: ["bg-blue-600"],
      danger: ["bg-red-500"]
    }
  })
}));

// CSS Modules
const ButtonCls = cls(contract, ({ what, def }) => ({
  token: def.token({
    "color.bg": {
      primary: [styles.primaryBg],
      danger: [styles.dangerBg]
    }
  })
}));

// Custom CSS
const ButtonCls = cls(contract, ({ what, def }) => ({
  token: def.token({
    "color.bg": {
      primary: ["button--primary"],
      danger: ["button--danger"]
    }
  })
}));

// CSS-in-JS
const ButtonCls = cls(contract, ({ what, def }) => ({
  token: def.token({
    "color.bg": {
      primary: [css`background: #3b82f6`],
      danger: [css`background: #ef4444`]
    }
  })
}));
```

### The Magic: Class String Generation

CLS simply generates **class strings** - what you do with them is up to you:

```typescript
const classes = ButtonCls.create(({ what }) => ({
  variant: what.variant({ tone: "primary" })
}));

const rootClasses = classes.root(); // "bg-blue-600 text-white px-4 py-2"

// Use with any framework
<div className={rootClasses}>Click me</div>; // React
<button class={rootClasses}>Click me</button>; // Vue
element.className = rootClasses; // Vanilla JS
```

## Tailwind CSS Integration ðŸŽ¨

### Perfect Tailwind Match

CLS and Tailwind are **perfect partners**:

```typescript
// CLS provides the structure, Tailwind provides the styles
const ButtonCls = cls({
  tokens: {
    "color.bg": ["default", "primary", "danger"],
    "color.text": ["default", "primary", "danger"],
    "spacing.padding": ["sm", "md", "lg"]
  },
  slot: ["root", "label"],
  variant: {
    size: ["sm", "md", "lg"],
    tone: ["default", "primary", "danger"]
  }
}, ({ what, def }) => ({
  token: def.token({
    "color.bg": {
      default: ["bg-gray-100"],
      primary: ["bg-blue-600"],
      danger: ["bg-red-500"]
    },
    "color.text": {
      default: ["text-gray-900"],
      primary: ["text-white"],
      danger: ["text-white"]
    },
    "spacing.padding": {
      sm: ["px-2", "py-1"],
      md: ["px-4", "py-2"],
      lg: ["px-6", "py-3"]
    }
  }),
  rules: [
    def.root({
      root: what.both(
        ["inline-flex", "items-center", "rounded", "font-medium"],
        ["color.bg.default", "color.text.default", "spacing.padding.md"]
      ),
      label: what.css(["font-medium"])
    })
  ],
  defaults: def.defaults({
    size: "md",
    tone: "default"
  })
}));
```

### Tailwind Merge Integration

CLS uses **tailwind-merge** for optimal class output:

```typescript
import { tvc } from "@use-pico/cls";

// CLS automatically deduplicates and optimizes classes
const classes = what.both(
  ["inline-flex", "items-center"],
  ["inline-flex", "justify-center"] // "inline-flex" is deduplicated
);
// Result: "inline-flex items-center justify-center"

// You can also use tvc directly
const optimizedClasses = tvc("px-4 py-2", "px-6"); // "py-2 px-6"
```

## CSS Modules Integration ðŸ“¦

### Seamless CSS Modules Support

CLS works perfectly with CSS Modules:

```typescript
import styles from './Button.module.css';

const ButtonCls = cls({
  tokens: {
    "color.bg": ["default", "primary", "danger"]
  },
  slot: ["root"],
  variant: {
    tone: ["default", "primary", "danger"]
  }
}, ({ what, def }) => ({
  token: def.token({
    "color.bg": {
      default: [styles.defaultBg],
      primary: [styles.primaryBg],
      danger: [styles.dangerBg]
    }
  }),
  rules: [
    def.root({
      root: what.both(
        [styles.button],
        ["color.bg.default"]
      )
    })
  ],
  defaults: def.defaults({
    tone: "default"
  })
}));
```

## Custom CSS Integration ðŸŽ¨

### Works with Any CSS Approach

CLS works with **any CSS methodology**:

```typescript
// BEM CSS
const ButtonCls = cls(contract, ({ what, def }) => ({
  token: def.token({
    "color.bg": {
      primary: ["button--primary"],
      danger: ["button--danger"]
    }
  }),
  rules: [
    def.root({
      root: what.both(["button"], ["color.bg.default"])
    })
  ]
}));

// Utility-first CSS
const ButtonCls = cls(contract, ({ what, def }) => ({
  token: def.token({
    "color.bg": {
      primary: ["u-bg-primary"],
      danger: ["u-bg-danger"]
    }
  })
}));

// Custom properties
const ButtonCls = cls(contract, ({ what, def }) => ({
  token: def.token({
    "color.bg": {
      primary: ["bg-primary"],
      danger: ["bg-danger"]
    }
  })
}));
```

## CSS-in-JS Integration ðŸŽ¨

### Framework Integration

CLS works with **any CSS-in-JS framework**:

```typescript
// Styled Components
import styled from 'styled-components';

const ButtonCls = cls(contract, ({ what, def }) => ({
  token: def.token({
    "color.bg": {
      primary: [css`background: #3b82f6`],
      danger: [css`background: #ef4444`]
    }
  })
}));

// Emotion
import { css } from '@emotion/react';

const ButtonCls = cls(contract, ({ what, def }) => ({
  token: def.token({
    "color.bg": {
      primary: [css`background: #3b82f6`],
      danger: [css`background: #ef4444`]
    }
  })
}));

// Linaria
import { css } from 'linaria';

const ButtonCls = cls(contract, ({ what, def }) => ({
  token: def.token({
    "color.bg": {
      primary: [css`background: #3b82f6`],
      danger: [css`background: #ef4444`]
    }
  })
}));
```

## The Alternative: Framework Lock-in ðŸ˜±

Without CSS framework agnosticism, you'd be **locked into specific approaches**:

```typescript
// âŒ Framework-specific styling (don't do this!)
const Button = styled.button`
  display: inline-flex;
  align-items: center;
  padding: ${props => props.size === 'lg' ? '1.5rem' : '0.75rem'};
  background: ${props => props.tone === 'primary' ? '#3b82f6' : '#f3f4f6'};
  color: ${props => props.tone === 'primary' ? 'white' : '#111827'};
`;

// Problems:
// - Locked into styled-components
// - Can't use with other CSS approaches
// - Runtime style injection overhead
// - Bundle size bloat
// - Performance impact
```

## Real-World Benefits ðŸŒŸ

### 1. **Framework Flexibility**
```typescript
// Same CLS code works with any CSS approach
const ButtonCls = cls(contract, definition);

// Use with Tailwind
<div className={classes.root()}>Click me</div>;

// Use with CSS Modules
<div className={classes.root()}>Click me</div>;

// Use with custom CSS
<div className={classes.root()}>Click me</div>;
```

### 2. **Migration Path**
```typescript
// Easy to migrate between CSS approaches
// Start with Tailwind
const ButtonCls = cls(contract, tailwindDefinition);

// Later migrate to CSS Modules
const ButtonCls = cls(contract, cssModulesDefinition);

// Same API, different CSS approach
```

### 3. **Team Flexibility**
```typescript
// Different teams can use different CSS approaches
// Team A: Tailwind CSS
const ButtonCls = cls(contract, tailwindDefinition);

// Team B: CSS Modules
const ButtonCls = cls(contract, cssModulesDefinition);

// Same CLS patterns, different styling
```

## Best Practices for CSS Integration ðŸ’¡

### 1. **Choose Your CSS Approach**
```typescript
// Pick the CSS approach that fits your project
// - Tailwind for rapid prototyping
// - CSS Modules for component isolation
// - Custom CSS for specific design systems
// - CSS-in-JS for dynamic styling
```

### 2. **Consistent Token Naming**
```typescript
// Use consistent token names across your design system
const tokens = {
  "color.bg": ["default", "primary", "danger"],
  "color.text": ["default", "primary", "danger"],
  "spacing.padding": ["sm", "md", "lg"]
};
```

### 3. **Leverage CSS Features**
```typescript
// Use CSS features that complement CLS
// - CSS custom properties for theming
// - CSS Grid/Flexbox for layout
// - CSS animations for interactions
// - CSS media queries for responsive design
```

## The Bottom Line ðŸ’¡

CSS connection provides:

- **Framework agnostic** - works with any CSS approach
- **Flexible integration** - adapts to your preferred styling method
- **Migration paths** - easy to switch between CSS approaches
- **Team flexibility** - different teams can use different approaches
- **Performance optimized** - leverages CSS strengths
- **Future-proof** - not locked into specific frameworks

CLS doesn't replace CSS - it **enhances** it by providing structure and type safety while letting you use whatever CSS approach you prefer! ðŸŽ‰

Think of CLS as the **"CSS orchestrator"** - it manages your styling logic while letting CSS do what it does best! âœ¨

---

**Previous:** [2.8 Simplicity Beneath Complexity](./2.8-simplicity-beneath-complexity.md) | **Next:** [2.10 Inheritance as Foundation](./2.10-inheritance-as-foundation.md)
