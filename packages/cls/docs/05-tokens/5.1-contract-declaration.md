# 5.1 Contract Declaration

## Table of Contents
- [5.1 Contract Declaration](./5.1-contract-declaration.md) *(current)*
- [5.2 Token Definition](./5.2-token-definition.md)
- [5.3 Inheritance](./5.3-inheritance.md)
- [5.4 Runtime Overrides](./5.4-runtime-overrides.md)

---

Token declaration in CLS contracts is the **foundation of your design system**. This chapter teaches you how to declare tokens with proper structure, naming conventions, and type safety.

## üéØ What is Token Declaration?

Token declaration defines **what tokens exist** in your CLS contract. It's the blueprint that tells TypeScript and CLS about your design values - their names, structure, and relationships.

Think of it as **defining your design vocabulary** before you start using it.

## üìù Basic Token Declaration

```tsx
import { cls } from "@use-pico/cls";

const ButtonCls = cls({
  // Token declaration in the contract
  token: {
    "color.bg": {
      primary: ["bg-blue-600"],
      secondary: ["bg-gray-600"],
      danger: ["bg-red-600"]
    },
    "color.text": {
      primary: ["text-white"],
      secondary: ["text-gray-900"],
      danger: ["text-white"]
    },
    "spacing": {
      sm: ["px-3 py-1.5"],
      md: ["px-4 py-2"],
      lg: ["px-6 py-3"]
    }
  }
}, ({ what, def }) => ({
  token: {},
  rules: [
    def.root({
      root: what.css([
        "inline-flex items-center justify-center rounded font-medium"
      ])
    })
  ]
}));
```

## üèóÔ∏è Token Structure

### **Hierarchical Naming**

Tokens use **dot notation** to create logical hierarchies:

```tsx
const DesignTokens = cls({
  token: {
    // Category.Subcategory.Value
    "color.bg": {
      primary: ["bg-blue-600"],
      secondary: ["bg-gray-600"]
    },
    "color.text": {
      primary: ["text-blue-600"],
      secondary: ["text-gray-600"]
    },
    "spacing.x": {
      sm: ["px-2"],
      md: ["px-4"],
      lg: ["px-6"]
    },
    "spacing.y": {
      sm: ["py-1"],
      md: ["py-2"],
      lg: ["py-3"]
    }
  }
});
```

### **Array Values**

All token values are **arrays of strings** (even single values):

```tsx
const TokenExample = cls({
  token: {
    "color.bg": {
      primary: ["bg-blue-600"],           // Single value
      secondary: ["bg-gray-600", "hover:bg-gray-700"], // Multiple values
      complex: ["bg-gradient-to-r", "from-blue-500", "to-purple-600"] // Complex value
    }
  }
});
```

## üé® Token Categories

### **Color Tokens**

```tsx
const ColorTokens = cls({
  token: {
    "color.bg": {
      primary: ["bg-blue-600"],
      secondary: ["bg-gray-600"],
      surface: ["bg-white"],
      overlay: ["bg-black", "bg-opacity-50"]
    },
    "color.text": {
      primary: ["text-blue-600"],
      secondary: ["text-gray-600"],
      muted: ["text-gray-500"],
      inverse: ["text-white"]
    },
    "color.border": {
      primary: ["border-blue-600"],
      secondary: ["border-gray-300"],
      focus: ["border-blue-500"]
    }
  }
});
```

### **Spacing Tokens**

```tsx
const SpacingTokens = cls({
  token: {
    "spacing": {
      xs: ["p-1"],
      sm: ["p-2"],
      md: ["p-4"],
      lg: ["p-6"],
      xl: ["p-8"]
    },
    "spacing.x": {
      sm: ["px-2"],
      md: ["px-4"],
      lg: ["px-6"]
    },
    "spacing.y": {
      sm: ["py-1"],
      md: ["py-2"],
      lg: ["py-3"]
    }
  }
});
```

### **Typography Tokens**

```tsx
const TypographyTokens = cls({
  token: {
    "typography.size": {
      xs: ["text-xs"],
      sm: ["text-sm"],
      base: ["text-base"],
      lg: ["text-lg"],
      xl: ["text-xl"]
    },
    "typography.weight": {
      normal: ["font-normal"],
      medium: ["font-medium"],
      semibold: ["font-semibold"],
      bold: ["font-bold"]
    },
    "typography.color": {
      primary: ["text-gray-900"],
      secondary: ["text-gray-600"],
      muted: ["text-gray-500"]
    }
  }
});
```

### **Layout Tokens**

```tsx
const LayoutTokens = cls({
  token: {
    "layout.radius": {
      none: ["rounded-none"],
      sm: ["rounded"],
      md: ["rounded-md"],
      lg: ["rounded-lg"],
      full: ["rounded-full"]
    },
    "layout.shadow": {
      none: ["shadow-none"],
      sm: ["shadow-sm"],
      md: ["shadow"],
      lg: ["shadow-lg"],
      xl: ["shadow-xl"]
    },
    "layout.border": {
      none: ["border-0"],
      thin: ["border"],
      thick: ["border-2"]
    }
  }
});
```

## üîß Advanced Token Patterns

### **Semantic Token Mapping**

Map semantic concepts to design values:

```tsx
const SemanticTokens = cls({
  token: {
    // Semantic concepts
    "state.success": {
      bg: ["bg-green-600"],
      text: ["text-white"],
      border: ["border-green-600"]
    },
    "state.error": {
      bg: ["bg-red-600"],
      text: ["text-white"],
      border: ["border-red-600"]
    },
    "state.warning": {
      bg: ["bg-yellow-600"],
      text: ["text-white"],
      border: ["border-yellow-600"]
    },
    "state.info": {
      bg: ["bg-blue-600"],
      text: ["text-white"],
      border: ["border-blue-600"]
    }
  }
});
```

### **Component-Specific Tokens**

Define tokens specific to components:

```tsx
const ButtonTokens = cls({
  token: {
    "button.size": {
      sm: ["px-3", "py-1.5", "text-sm"],
      md: ["px-4", "py-2", "text-base"],
      lg: ["px-6", "py-3", "text-lg"]
    },
    "button.variant": {
      primary: ["bg-blue-600", "text-white", "hover:bg-blue-700"],
      secondary: ["bg-gray-600", "text-white", "hover:bg-gray-700"],
      outline: ["border", "border-gray-300", "text-gray-700", "hover:bg-gray-50"]
    }
  }
});
```

### **Theme-Aware Tokens**

Create tokens that adapt to themes:

```tsx
const ThemeTokens = cls({
  token: {
    "theme.light": {
      "color.bg": {
        surface: ["bg-white"],
        surfaceSecondary: ["bg-gray-50"]
      },
      "color.text": {
        primary: ["text-gray-900"],
        secondary: ["text-gray-600"]
      }
    },
    "theme.dark": {
      "color.bg": {
        surface: ["bg-gray-900"],
        surfaceSecondary: ["bg-gray-800"]
      },
      "color.text": {
        primary: ["text-gray-100"],
        secondary: ["text-gray-400"]
      }
    }
  }
});
```

## üéØ Type Safety

### **Automatic Type Inference**

CLS automatically infers types from your token declarations:

```tsx
const TypedTokens = cls({
  token: {
    "color.bg": {
      primary: ["bg-blue-600"],
      secondary: ["bg-gray-600"]
    }
  }
}, ({ what, def }) => ({
  token: {},
  rules: [
    def.root({
      root: what.css([
        "inline-flex items-center justify-center rounded font-medium"
      ])
    })
  ]
}));

// Tokens are used through the Component interface
interface ButtonProps extends Component<typeof TypedTokens, React.ButtonHTMLAttributes<HTMLButtonElement>> {
  children: React.ReactNode;
}

function Button({ children, tva = TypedTokens, cls, ...props }: ButtonProps) {
  const classes = tva.create(cls, () => ({
    variant: {
      size: "md",
      tone: "primary"
    }
  }));
  
  return (
    <button className={classes.root()} {...props}>
      {children}
    </button>
  );
}
```

### **Token Path Validation**

TypeScript validates token paths at compile time through the contract structure:

```tsx
const ButtonCls = cls({
  token: {
    "color.bg": {
      primary: ["bg-blue-600"],
      secondary: ["bg-gray-600"]
    }
  }
}, ({ what, def }) => ({
  token: {},
  rules: [
    def.root({
      root: what.css([
        "inline-flex items-center justify-center rounded font-medium"
      ])
    })
  ]
}));

// TypeScript ensures token paths are valid in the contract
// The contract structure defines what tokens are available
```

## üîç Best Practices

### **1. Semantic Naming**

```tsx
// ‚úÖ Good: Semantic naming
const GoodTokens = cls({
  token: {
    "color.bg": {
      primary: ["bg-blue-600"],
      surface: ["bg-white"],
      overlay: ["bg-black", "bg-opacity-50"]
    }
  }
});

// ‚ùå Avoid: Non-semantic naming
const BadTokens = cls({
  token: {
    "color.bg": {
      blue600: ["bg-blue-600"],
      white: ["bg-white"],
      black50: ["bg-black", "bg-opacity-50"]
    }
  }
});
```

### **2. Consistent Hierarchy**

```tsx
// ‚úÖ Good: Consistent hierarchy
const ConsistentTokens = cls({
  token: {
    "color.bg": { /* ... */ },
    "color.text": { /* ... */ },
    "color.border": { /* ... */ },
    "spacing.x": { /* ... */ },
    "spacing.y": { /* ... */ }
  }
});

// ‚ùå Avoid: Inconsistent hierarchy
const InconsistentTokens = cls({
  token: {
    "color.bg": { /* ... */ },
    "textColor": { /* ... */ }, // Inconsistent naming
    "borderColor": { /* ... */ }, // Inconsistent naming
    "spacingX": { /* ... */ }, // Inconsistent naming
    "spacing.y": { /* ... */ }
  }
});
```

### **3. Logical Grouping**

```tsx
// ‚úÖ Good: Logical grouping
const LogicalTokens = cls({
  token: {
    // Color system
    "color.bg": { /* ... */ },
    "color.text": { /* ... */ },
    "color.border": { /* ... */ },
    
    // Spacing system
    "spacing": { /* ... */ },
    "spacing.x": { /* ... */ },
    "spacing.y": { /* ... */ },
    
    // Typography system
    "typography.size": { /* ... */ },
    "typography.weight": { /* ... */ }
  }
});
```

## üöÄ Common Patterns

### **Design System Foundation**

```tsx
const DesignSystemTokens = cls({
  token: {
    // Color palette
    "color.bg": {
      primary: ["bg-blue-600"],
      secondary: ["bg-gray-600"],
      success: ["bg-green-600"],
      warning: ["bg-yellow-600"],
      danger: ["bg-red-600"],
      info: ["bg-blue-600"]
    },
    
    // Spacing scale
    "spacing": {
      xs: ["p-1"],
      sm: ["p-2"],
      md: ["p-4"],
      lg: ["p-6"],
      xl: ["p-8"],
      "2xl": ["p-12"]
    },
    
    // Typography scale
    "typography.size": {
      xs: ["text-xs"],
      sm: ["text-sm"],
      base: ["text-base"],
      lg: ["text-lg"],
      xl: ["text-xl"],
      "2xl": ["text-2xl"]
    }
  }
});
```

### **Component Library Tokens**

```tsx
const ComponentTokens = cls({
  token: {
    // Button tokens
    "button.size": {
      sm: ["px-3", "py-1.5", "text-sm"],
      md: ["px-4", "py-2", "text-base"],
      lg: ["px-6", "py-3", "text-lg"]
    },
    "button.variant": {
      primary: ["bg-blue-600", "text-white"],
      secondary: ["bg-gray-600", "text-white"],
      outline: ["border", "border-gray-300", "text-gray-700"]
    },
    
    // Card tokens
    "card.padding": {
      sm: ["p-4"],
      md: ["p-6"],
      lg: ["p-8"]
    },
    "card.radius": {
      sm: ["rounded"],
      md: ["rounded-md"],
      lg: ["rounded-lg"]
    }
  }
});
```

## üéØ What's Next?

Now that you understand token declaration, you're ready to explore:

- **[5.2 Token Definition](./5.2-token-definition.md)**: Learn how to define token values and create token hierarchies
- **[5.3 Inheritance](./5.3-inheritance.md)**: Master token inheritance and composition patterns
- **[5.4 Runtime Overrides](./5.4-runtime-overrides.md)**: Discover dynamic token overrides

Token declaration is the **foundation** of your design system. Use these patterns to create consistent, type-safe token structures! üéâ

---

**Previous:** [Chapter 4: React Integration](../04-react-integration/README.md) | **Next:** [5.2 Token Definition](./5.2-token-definition.md)
